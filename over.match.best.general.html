<!DOCTYPE html><html lang='en'><head><title>[over.match.best.general]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>12</a> Overloading <a class='abbr_ref' href='./#over'>[over]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>12.2</a> Overload resolution <a class='abbr_ref' href='over.match#best.general'>[over.match]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>12.2.4</a> Best viable function <a class='abbr_ref' href='over.match.best#general'>[over.match.best]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>12.2.4.1</a> General <a class='abbr_ref'>[over.match.best.general]</a></h4><div class='texpara'><a class='index' id=':overloading,resolution,best_viable_function'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/overloading.tex#L1692'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':conversion,overload_resolution_and'></a>Define <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">ICS</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.646em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> as
the implicit conversion sequence that converts
the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> argument in the list to the type of
the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> parameter of viable function <span class='texttt'>F</span><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'><a href='over.best.ics' title='12.2.4.2&emsp;Implicit conversion sequences'>[over.<span class='shy'></span>best.<span class='shy'></span>ics]</a> defines the implicit conversion sequences and <a href='over.ics.rank' title='12.2.4.3&emsp;Ranking implicit conversion sequences'>[over.<span class='shy'></span>ics.<span class='shy'></span>rank]</a>
defines what it means for one implicit conversion sequence to be
a better conversion sequence or worse conversion sequence than
another<a class='hidden_link' href='#1.sentence-2'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/overloading.tex#L1703'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>Given these definitions,
a viable function <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span> is defined to be a
<a class='hidden_link' href='#def:overloading,resolution,better_viable_function' title='12.2.4.1&emsp;General&emsp;[over.match.best.general]'><span id='def:overloading,resolution,better_viable_function'><i >better</i></span></a>
function than another viable function <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span>
if for all arguments <span class='math'><span class='mathalpha'>i</span></span>,
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">ICS</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.646em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is not a worse conversion
sequence than <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">ICS</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.646em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>, and then
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.1'>(2.1)</a></div>for some argument <span class='math'><span class='mathalpha'>j</span></span>,
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">ICS</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.646em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a better conversion sequence than
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.372em;">ICS</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.646em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>, or, if not that,</li><li id='2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.2'>(2.2)</a></div>the context is an initialization by user-defined conversion
(see <a href='dcl.init' title='9.4&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>,
<a href='over.match.conv' title='12.2.2.6&emsp;Initialization by conversion function'>[over.<span class='shy'></span>match.<span class='shy'></span>conv]</a>, and <a href='over.match.ref' title='12.2.2.7&emsp;Initialization by conversion function for direct reference binding'>[over.<span class='shy'></span>match.<span class='shy'></span>ref]</a>)
and the standard conversion sequence
from the return type of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span> to the destination type
(i.e., the type of the entity being initialized)
is a better conversion sequence than the standard conversion sequence
from the return type of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span> to the destination type
<div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  A<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>operator</span> <span class='keyword'>double</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span> a;
<span class='keyword'>int</span> i <span class='operator'>=</span> a;          <span class='comment'>// <span class='tcode_in_codeblock'>a.<span id=':operator'><span class='tcode_in_codeblock'>operator</span></span> int()</span> followed by no conversion is better than</span>
                    <span class='comment'>// <span class='tcode_in_codeblock'>a.<span id=':operator_'><span class='tcode_in_codeblock'>operator</span></span> double()</span> followed by a conversion to <span class='tcode_in_codeblock'>int</span></span>
<span class='keyword'>float</span> x <span class='operator'>=</span> a;        <span class='comment'>// ambiguous: both possibilities require conversions,</span>
                    <span class='comment'>// and neither is better than the other</span>
</span> —&nbsp;<i>end example</i>]</div></div>
or, if not that,</li><li id='2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.3'>(2.3)</a></div>the context is an initialization by conversion function for <a href='over.match.ref' title='12.2.2.7&emsp;Initialization by conversion function for direct reference binding&emsp;[over.match.ref]'>direct
reference binding</a> of a reference to function type, the
return type of <span class='texttt'>F1</span> is the same kind of reference (lvalue or rvalue)
as the reference being initialized, and the return type of <span class='texttt'>F2</span> is not
<div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> T<span class='operator'>&amp;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;    <span class='comment'>// #1</span>
  <span class='keyword'>operator</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;   <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>typedef</span> <span class='keyword'>int</span> Fn<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
A<span class='anglebracket'>&lt;</span>Fn<span class='anglebracket'>&gt;</span> a;
Fn<span class='operator'>&amp;</span> lf <span class='operator'>=</span> a;         <span class='comment'>// calls #1</span>
Fn<span class='operator'>&amp;</span><span class='operator'>&amp;</span> rf <span class='operator'>=</span> a;        <span class='comment'>// calls #2</span>
</span> —&nbsp;<i>end example</i>]</div></div>
or, if not that,</li><li id='2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.4'>(2.4)</a></div><span class='texttt'>F1</span>
is not a function template specialization and
<span class='texttt'>F2</span>
is a
function template
specialization, or, if not that,</li><li id='2.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.5'>(2.5)</a></div><span class='texttt'>F1</span>
and
<span class='texttt'>F2</span>
are
function template specializations,
and the function template
for
<span class='texttt'>F1</span>
is more specialized than the template for
<span class='texttt'>F2</span>
according to the partial ordering rules described in <a href='temp.func.order' title='13.7.7.3&emsp;Partial ordering of function templates'>[temp.<span class='shy'></span>func.<span class='shy'></span>order]</a>,
or, if not that,</li><li id='2.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.6'>(2.6)</a></div><span class='texttt'>F1</span> and <span class='texttt'>F2</span> are non-template functions and
<ul class='itemize'><li id='2.6.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#2.6.1'>(2.6.1)</a></div>they have the same non-object-parameter-type-lists (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>), and</li><li id='2.6.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#2.6.2'>(2.6.2)</a></div>if they are member functions, both are direct members of the same class, and</li><li id='2.6.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#2.6.3'>(2.6.3)</a></div>if both are non-static member functions,
they have the same types for their object parameters, and</li><li id='2.6.4'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#2.6.4'>(2.6.4)</a></div><span class='texttt'>F1</span> is more constrained than <span class='texttt'>F2</span>
according to the partial ordering of constraints described in
<a href='temp.constr.order' title='13.5.5&emsp;Partial ordering by constraints'>[temp.<span class='shy'></span>constr.<span class='shy'></span>order]</a>,</li></ul>
or if not that,
<div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T <span class='operator'>=</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                       <span class='comment'>// #1</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>this</span> S<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>requires</span> <span class='literal'>true</span>;  <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> test<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  S<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> s;
  s<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                <span class='comment'>// calls #2</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></li><li id='2.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.7'>(2.7)</a></div><span class='texttt'>F1</span> is a constructor for a class <span class='texttt'>D</span>,
<span class='texttt'>F2</span> is a constructor for a base class <span class='texttt'>B</span> of <span class='texttt'>D</span>, and
for all arguments
the corresponding parameters of <span class='texttt'>F1</span> and <span class='texttt'>F2</span> have the same type
<div id='example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  A<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> B<span class='operator'>:</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> A<span class='operator'>::</span>A;
  B<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  B b;              <span class='comment'>// OK, <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;B()</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div>
or, if not that,</li><li id='2.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.8'>(2.8)</a></div><span class='texttt'>F2</span> is a rewritten candidate (<a href='over.match.oper' title='12.2.2.3&emsp;Operators in expressions'>[over.<span class='shy'></span>match.<span class='shy'></span>oper]</a>) and
<span class='texttt'>F1</span> is not
<div id='example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>auto</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> S<span class='operator'>&amp;</span>, <span class='keyword'>const</span> S<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;        <span class='comment'>// #1</span>
  <span class='keyword'>friend</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> S<span class='operator'>&amp;</span>, <span class='keyword'>const</span> S<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;                    <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>bool</span> b <span class='operator'>=</span> S<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span> S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                                             <span class='comment'>// calls #2</span>
</span> —&nbsp;<i>end example</i>]</div></div>
or, if not that,</li><li id='2.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.9'>(2.9)</a></div><span class='texttt'>F1</span> and <span class='texttt'>F2</span> are rewritten candidates, and
<span class='texttt'>F2</span> is a synthesized candidate
with reversed order of parameters
and <span class='texttt'>F1</span> is not
<div id='example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> std<span class='operator'>::</span>weak_ordering <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> S<span class='operator'>&amp;</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;         <span class='comment'>// #1</span>
  <span class='keyword'>friend</span> std<span class='operator'>::</span>weak_ordering <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>const</span> S<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;         <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>bool</span> b <span class='operator'>=</span> <span class='literal'>1</span> <span class='anglebracket'>&lt;</span> S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                                               <span class='comment'>// calls #2</span>
</span> —&nbsp;<i>end example</i>]</div></div>
or, if not that</li><li id='2.10'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.10'>(2.10)</a></div><span class='texttt'>F1</span> and <span class='texttt'>F2</span> are generated
from class template argument deduction (<a href='over.match.class.deduct' title='12.2.2.9&emsp;Class template argument deduction'>[over.<span class='shy'></span>match.<span class='shy'></span>class.<span class='shy'></span>deduct]</a>)
for a class <span class='texttt'>D</span>, and
<span class='texttt'>F2</span> is generated
from inheriting constructors from a base class of <span class='texttt'>D</span>
while <span class='texttt'>F1</span> is not, and
for each explicit function argument,
the corresponding parameters of <span class='texttt'>F1</span> and <span class='texttt'>F2</span>
are either both ellipses or have the same type,
or, if not that,</li><li id='2.11'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.11'>(2.11)</a></div><span class='texttt'>F1</span> is generated from a
<a href='temp.deduct.guide#nt:deduction-guide' title='13.7.2.3&emsp;Deduction guides&emsp;[temp.deduct.guide]'><span id='ntref:deduction-guide'><span class='textsf'><i >deduction-guide</i></span></span></a> (<a href='over.match.class.deduct' title='12.2.2.9&emsp;Class template argument deduction'>[over.<span class='shy'></span>match.<span class='shy'></span>class.<span class='shy'></span>deduct]</a>)
and <span class='texttt'>F2</span> is not, or, if not that,</li><li id='2.12'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.12'>(2.12)</a></div><span class='texttt'>F1</span> is the <a href='over.match.class.deduct#def:copy_deduction_candidate' title='12.2.2.9&emsp;Class template argument deduction&emsp;[over.match.class.deduct]'>copy deduction candidate</a>
and <span class='texttt'>F2</span> is not, or, if not that,</li><li id='2.13'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.13'>(2.13)</a></div><span class='texttt'>F1</span> is generated from a non-template constructor
and <span class='texttt'>F2</span> is generated from a constructor template<a class='hidden_link' href='#2.sentence-1'>.</a> <div class='texpara'><div id='example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-7'>7</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> value_type <span class='operator'>=</span> T;
  A<span class='parenthesis'>(</span>value_type<span class='parenthesis'>)</span>;    <span class='comment'>// #1</span>
  A<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;      <span class='comment'>// #2</span>
  A<span class='parenthesis'>(</span>T, T, <span class='keyword'>int</span><span class='parenthesis'>)</span>;     <span class='comment'>// #3</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    A<span class='parenthesis'>(</span><span class='keyword'>int</span>, T, U<span class='parenthesis'>)</span>;   <span class='comment'>// #4</span>
  <span class='comment'>// #5 is the copy deduction candidate, <span class='tcode_in_codeblock'>A(A)</span></span>
<span class='curlybracket'>}</span>;

A x<span class='parenthesis'>(</span><span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span><span class='parenthesis'>)</span>;       <span class='comment'>// uses #3, generated from a non-template constructor</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
A<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;       <span class='comment'>// #6, less specialized than #5</span>

A a<span class='parenthesis'>(</span><span class='literal'>42</span><span class='parenthesis'>)</span>;            <span class='comment'>// uses #6 to deduce <span class='tcode_in_codeblock'>A&lt;int&gt;</span> and #1 to initialize</span>
A b <span class='operator'>=</span> a;            <span class='comment'>// uses #5 to deduce <span class='tcode_in_codeblock'>A&lt;int&gt;</span> and #2 to initialize</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
A<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> A<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>; <span class='comment'>// #7, as specialized as #5</span>

A b2 <span class='operator'>=</span> a;           <span class='comment'>// uses #7 to deduce <span class='tcode_in_codeblock'>A&lt;A&lt;int&gt;&gt;</span> and #1 to initialize</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li></ul></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/overloading.tex#L1917'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>If there is exactly one viable function that is a better function
than all other viable functions, then it is the one selected by
overload resolution; otherwise the call is ill-formed<a class='hidden_link' href='#3.sentence-1'>.</a><a class='footnoteref' href='#footnote-111' id='footnoteref-111' title='The algorithm for selecting the best viable function is linear in the number of viable functions. Run a simple tournament to find a function W that is not worse than any opponent it faced. Although it is possible that another function F that W did not face is at least as good as W, F cannot be the best function because at some point in the tournament F encountered another function G such that F was not better than G. Hence, either W is the best function or there is no best function. So, make a second pass over the viable functions to verify that W is better than all other functions.'>111</a></div> <div id='example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-8'>8</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> Fcn<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>*</span>,  <span class='keyword'>short</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> Fcn<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>*</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;

<span class='keyword'>int</span> i;
<span class='keyword'>short</span> s <span class='operator'>=</span> <span class='literal'>0</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  Fcn<span class='parenthesis'>(</span><span class='operator'>&amp;</span>i, s<span class='parenthesis'>)</span>;       <span class='comment'>// is ambiguous because <span class='tcode_in_codeblock'>&amp;i</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>int*</span> is better than <span class='tcode_in_codeblock'>&amp;i</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>const int*</span></span>
                    <span class='comment'>// but <span class='tcode_in_codeblock'>s</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>short</span> is also better than <span class='tcode_in_codeblock'>s</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>int</span></span>

  Fcn<span class='parenthesis'>(</span><span class='operator'>&amp;</span>i, <span class='literal'>1L</span><span class='parenthesis'>)</span>;      <span class='comment'>// calls <span class='tcode_in_codeblock'>Fcn(int*, int)</span>, because <span class='tcode_in_codeblock'>&amp;i</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>int*</span> is better than <span class='tcode_in_codeblock'>&amp;i</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>const int*</span></span>
                    <span class='comment'>// and <span class='tcode_in_codeblock'>1L</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>short</span> and <span class='tcode_in_codeblock'>1L</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>int</span> are indistinguishable</span>

  Fcn<span class='parenthesis'>(</span><span class='operator'>&amp;</span>i, <span class='literal'>'c'</span><span class='parenthesis'>)</span>;     <span class='comment'>// calls <span class='tcode_in_codeblock'>Fcn(int*, int)</span>, because <span class='tcode_in_codeblock'>&amp;i</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>int*</span> is better than <span class='tcode_in_codeblock'>&amp;i</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>const int*</span></span>
                    <span class='comment'>// and <span class='tcode_in_codeblock'>'c'</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>int</span> is better than <span class='tcode_in_codeblock'>'c'</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>short</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/overloading.tex#L1978'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>If the best viable function resolves to a function
for which multiple declarations were found, and
if any two of these declarations inhabit different scopes and
specify a default argument that made the function viable,
the program is ill-formed<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-9'>9</a></i>:&ensp;<span class='codeblock'><span class='keyword'>namespace</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>extern</span> <span class='literal'>"C"</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>5</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>namespace</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>extern</span> <span class='literal'>"C"</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>5</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>using</span> A<span class='operator'>::</span>f;
<span class='keyword'>using</span> B<span class='operator'>::</span>f;

<span class='keyword'>void</span> use<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span>;             <span class='comment'>// OK, default argument was not used for viability</span>
  f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// error: found default argument twice</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-111'><div class='texpara'><a class='footnotenum' href='#footnote-111'>111)</a><a class='footnoteBacklink' href='#footnoteref-111'>111)</a> <div id='footnote-111.sentence-1' class='sentence'>The algorithm
for selecting the best viable function is linear in the number
of viable
functions<a class='hidden_link' href='#footnote-111.sentence-1'>.</a></div> <div id='footnote-111.sentence-2' class='sentence'>Run a simple tournament to find a function
<span class='texttt'>W</span>
that is not
worse than any
opponent it faced<a class='hidden_link' href='#footnote-111.sentence-2'>.</a></div> <div id='footnote-111.sentence-3' class='sentence'>Although it is possible that another function
<span class='texttt'>F</span>
that
<span class='texttt'>W</span>
did not face
is at least as good as
<span class='texttt'>W</span>,
<span class='texttt'>F</span>
cannot be the best function because at some point in the
tournament
<span class='texttt'>F</span>
encountered another function
<span class='texttt'>G</span>
such that
<span class='texttt'>F</span>
was not better than
<span class='texttt'>G</span><a class='hidden_link' href='#footnote-111.sentence-3'>.</a></div> <div id='footnote-111.sentence-4' class='sentence'>Hence,
either <span class='texttt'>W</span> is
the best function or there is no best function<a class='hidden_link' href='#footnote-111.sentence-4'>.</a></div> <div id='footnote-111.sentence-5' class='sentence'>So, make a second pass over
the viable
functions to verify that
<span class='texttt'>W</span>
is better than all other functions<a class='hidden_link' href='#footnote-111.sentence-5'>.</a></div></div></div></div></body></html>