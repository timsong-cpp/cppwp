<!DOCTYPE html><html lang='en'><head><title>[expr.spaceship]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>7.6</a> Compound expressions <a class='abbr_ref' href='expr.compound#expr.spaceship'>[expr.compound]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>7.6.8</a> Three-way comparison operator <a class='abbr_ref'>[expr.spaceship]</a></h3><span class='indexparent'><a class='index' id=':expression,three-way_comparison'></a></span><span class='indexparent'><a class='index' id=':expression,spaceship'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/expressions.tex#L5873'>#</a></div><div id='1.sentence-1' class='sentence'>The three-way comparison operator groups left-to-right<a class='hidden_link' href='#1.sentence-1'>.</a></div><span class='indexparent'><a class='index' id=':operator,three-way_comparison'></a></span><span class='indexparent'><a class='index' id=':operator,spaceship'></a></span>
<pre class='bnf'><a class='nontermdef' href='#nt:compare-expression' id='nt:compare-expression'>compare-expression:</a>
&#9;<a class='grammarterm' href='expr.shift#nt:shift-expression'>shift-expression</a>
&#9;<a class='grammarterm' href='#nt:compare-expression'>compare-expression</a> <span class='terminal'><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span></span> <a class='grammarterm' href='expr.shift#nt:shift-expression'>shift-expression</a>
</pre></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/expressions.tex#L5886'>#</a></div><div id='2.sentence-1' class='sentence'>The expression <span class='texttt'>p <span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span> q</span> is a prvalue indicating whether
<span class='texttt'>p</span> is less than, equal to, greater than, or incomparable with
<span class='texttt'>q</span><a class='hidden_link' href='#2.sentence-1'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/expressions.tex#L5891'>#</a></div><div id='3.sentence-1' class='sentence'>If one of the operands is of type <span class='texttt'><span class='keyword'>bool</span></span>
and the other is not, the program is ill-formed<a class='hidden_link' href='#3.sentence-1'>.</a></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/expressions.tex#L5895'>#</a></div><div id='4.sentence-1' class='sentence'>If both operands have arithmetic types,
or one operand has integral type and
the other operand has unscoped enumeration type,
the <a href='expr.arith.conv'>usual arithmetic conversions</a> are applied to the operands<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>Then:</div><ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.1'>(4.1)</a></div><div id='4.1.sentence-1' class='sentence'>If a <a href='dcl.init.list#def:narrowing_conversion'>narrowing conversion</a> is required,
other than from an integral type to a floating-point type,
the program is ill-formed<a class='hidden_link' href='#4.1.sentence-1'>.</a></div></li><li id='4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.2'>(4.2)</a></div><div id='4.2.sentence-1' class='sentence'>Otherwise, if the operands have integral type,
the result is of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_&shy;ordering</span><a class='hidden_link' href='#4.2.sentence-1'>.</a></div> <div id='4.2.sentence-2' class='sentence'>The result is
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_&shy;ordering<span class='operator'>&#x200b;::&#x200b;</span>equal</span>
if both operands are arithmetically equal,
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_&shy;ordering<span class='operator'>&#x200b;::&#x200b;</span>less</span>
if the first operand is arithmetically
less than the second operand,
and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_&shy;ordering<span class='operator'>&#x200b;::&#x200b;</span>greater</span>
otherwise<a class='hidden_link' href='#4.2.sentence-2'>.</a></div></li><li id='4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.3'>(4.3)</a></div><div id='4.3.sentence-1' class='sentence'>Otherwise, the operands have floating-point type, and
the result is of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>partial_&shy;ordering</span><a class='hidden_link' href='#4.3.sentence-1'>.</a></div> <div id='4.3.sentence-2' class='sentence'>The expression <span class='texttt'>a <span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span> b</span> yields
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>partial_&shy;ordering<span class='operator'>&#x200b;::&#x200b;</span>less</span>
if <span class='texttt'>a</span> is less than <span class='texttt'>b</span>,
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>partial_&shy;ordering<span class='operator'>&#x200b;::&#x200b;</span>greater</span>
if <span class='texttt'>a</span> is greater than <span class='texttt'>b</span>,
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>partial_&shy;ordering<span class='operator'>&#x200b;::&#x200b;</span>equivalent</span>
if <span class='texttt'>a</span> is equivalent to <span class='texttt'>b</span>,
and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>partial_&shy;ordering<span class='operator'>&#x200b;::&#x200b;</span>unordered</span> otherwise<a class='hidden_link' href='#4.3.sentence-2'>.</a></div></li></ul></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/expressions.tex#L5934'>#</a></div><div id='5.sentence-1' class='sentence'>If both operands have the same enumeration type <span class='texttt'>E</span>,
the operator yields the result of
converting the operands to the underlying type of <span class='texttt'>E</span>
and applying <span class='texttt'><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span></span> to the converted operands<a class='hidden_link' href='#5.sentence-1'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/expressions.tex#L5940'>#</a></div><div id='6.sentence-1' class='sentence'>If at least one of the operands is of pointer type and
the other operand is of pointer or array type,
array-to-pointer conversions (<a href='conv.array'>[conv.array]</a>),
pointer conversions (<a href='conv.ptr'>[conv.ptr]</a>),
and
<a href='conv.qual'>qualification conversions</a>
are performed on both operands
to bring them to their composite pointer type (<a href='expr.type'>[expr.type]</a>)<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>After the conversions, the operands shall have the same type<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.note-1' class='note'>[&nbsp;<a class='note_link' href='#6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.sentence-3' class='sentence'>If both of the operands are arrays,
<a href='conv.array'>array-to-pointer conversions</a> are not applied<a class='hidden_link' href='#6.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/expressions.tex#L5955'>#</a></div><div id='7.sentence-1' class='sentence'>If the composite pointer type is an object pointer type,
<span class='texttt'>p <span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span> q</span> is of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_&shy;ordering</span><a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>If two pointer operands <span class='texttt'>p</span> and <span class='texttt'>q</span> compare equal (<a href='expr.eq'>[expr.eq]</a>),
<span class='texttt'>p <span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span> q</span> yields <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_&shy;ordering<span class='operator'>&#x200b;::&#x200b;</span>equal</span>;
if <span class='texttt'>p</span> and <span class='texttt'>q</span> compare unequal,
<span class='texttt'>p <span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span> q</span> yields
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_&shy;ordering<span class='operator'>&#x200b;::&#x200b;</span>less</span>
if <span class='texttt'>q</span> compares greater than <span class='texttt'>p</span>
and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_&shy;ordering<span class='operator'>&#x200b;::&#x200b;</span>greater</span>
if <span class='texttt'>p</span> compares greater than <span class='texttt'>q</span> (<a href='expr.rel'>[expr.rel]</a>)<a class='hidden_link' href='#7.sentence-2'>.</a></div> <div id='7.sentence-3' class='sentence'>Otherwise, the result is unspecified<a class='hidden_link' href='#7.sentence-3'>.</a></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/expressions.tex#L5969'>#</a></div><div id='8.sentence-1' class='sentence'>Otherwise, the program is ill-formed<a class='hidden_link' href='#8.sentence-1'>.</a></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/expressions.tex#L5972'>#</a></div><div id='9.sentence-1' class='sentence'>The three comparison category types (<a href='cmp.categories'>[cmp.categories]</a>)
(the types
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_&shy;ordering</span>,
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>weak_&shy;ordering</span>, and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>partial_&shy;ordering</span>)
are not predefined;
if the header <span class='indexparent'><a class='index' id=':<compare>'></a></span><span class='texttt'><span class='anglebracket'>&lt;</span>compare<span class='anglebracket'>&gt;</span></span> (<a href='compare.syn'>[compare.syn]</a>)
is not imported or included prior to a use of such a class type –
even an implicit use in which the type is not named
(e.g., via the <a href='dcl.spec.auto'><span class='texttt'>auto</span> specifier</a>
in a defaulted <a href='class.spaceship'>three-way comparison</a>
or use of the built-in operator) – the program is ill-formed<a class='hidden_link' href='#9.sentence-1'>.</a></div></div></div></body></html>