<!DOCTYPE html><html lang='en'><head><title>[fs.path.cvt]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>30</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>30.10</a> File systems <a class='abbr_ref' href='filesystems#fs.path.cvt'>[filesystems]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>30.10.8</a> Class <span class='texttt'>path</span> <a class='abbr_ref' href='fs.class.path#fs.path.cvt'>[fs.class.path]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>30.10.8.2</a> <span class='texttt'>path</span> conversions <a class='abbr_ref'>[fs.path.cvt]</a></h4><div id='fs.path.fmt.cvt'><h4 ><a class='secnum' href='#fs.path.fmt.cvt' style='min-width:133pt'>30.10.8.2.1</a> <span class='texttt'>path</span> argument format conversions <a class='abbr_ref' href='fs.path.fmt.cvt'>[fs.path.fmt.cvt]</a></h4><div class='para' id='fs.path.fmt.cvt-1'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/iostreams.tex#L10764'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
The format conversions described in this section
are not applied on POSIX-based operating systems
because on these systems:
</p><ul class='itemize'><li id='fs.path.fmt.cvt-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#fs.path.fmt.cvt-1.1'>(1.1)</a></div><p >The generic format is acceptable as a native path.
</p></li><li id='fs.path.fmt.cvt-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#fs.path.fmt.cvt-1.2'>(1.2)</a></div><p >There is no need to distinguish between native format and generic format in function arguments.
</p></li><li id='fs.path.fmt.cvt-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#fs.path.fmt.cvt-1.3'>(1.3)</a></div><p >Paths for regular files and paths for directories share the same syntax.
</p></li></ul><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='fs.path.fmt.cvt-2'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/iostreams.tex#L10776'>#</a></div><p >Several functions are defined to accept <a class='hidden_link' href='#def:detected-format' id='def:detected-format'><i>detected-format</i></a> arguments,
which are character sequences. A detected-format argument represents a path
using either a pathname in the <a href='fs.path.generic'>generic format</a>
or a pathname in the <a href='fs.def.native'>native format</a>.
Such an argument is taken to be in the generic format if and only if
it matches the generic format and is not acceptable to the operating system
as a native path.</p></div><div class='para' id='fs.path.fmt.cvt-3'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/iostreams.tex#L10785'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
Some operating systems may have no unambiguous way to distinguish between native format and generic format arguments.
This is by design as it simplifies use for operating systems that do not require
disambiguation. An implementation for an operating system where disambiguation
is required is permitted to distinguish between the formats.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='fs.path.fmt.cvt-4'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/iostreams.tex#L10793'>#</a></div><p >Pathnames are converted as needed between the generic and native formats
in an operating-system-dependent manner.
Let <span class='textit'>G(n)</span> and <span class='textit'>N(g)</span> in a mathematical sense
be the implementation's functions that convert native-to-generic
and generic-to-native formats respectively.
If <span class='textit'>g=G(n)</span> for some <span class='textit'>n</span>, then <span class='textit'>G(N(g))=g</span>;
if <span class='textit'>n=N(g)</span> for some <span class='textit'>g</span>, then <span class='textit'>N(G(n))=n</span>.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>  Neither <span class='textit'>G</span> nor <span class='textit'>N</span> need be invertible. <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='fs.path.fmt.cvt-5'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/iostreams.tex#L10803'>#</a></div><p >If the native format requires paths for regular files to be formatted
differently from paths for directories, the path shall be treated as a directory
path if its last element is a <i ><a href='fs.path.generic#nt:directory-separator'>directory-separator</a></i>,
otherwise it shall be treated as a path to a regular file.</p></div><div class='para' id='fs.path.fmt.cvt-6'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/iostreams.tex#L10809'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
A path stores a native format pathname (<a href='fs.path.native.obs'>[fs.path.native.obs]</a>)
and acts as if it also stores a generic format pathname,
related as given below.
The implementation may generate the generic format pathname
based on the native format pathname (and possibly other information)
when requested.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='fs.path.fmt.cvt-7'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/iostreams.tex#L10819'>#</a></div><p >When a path is constructed from or is assigned a single representation
separate from any path, the other representation is selected
by the appropriate conversion function (<span class='textit'>G</span> or <span class='textit'>N</span>).</p></div><div class='para' id='fs.path.fmt.cvt-8'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/iostreams.tex#L10824'>#</a></div><p >When the (new) value <span class='textit'>p</span> of one representation of a path
is derived from the representation of that or another path,
a value <span class='textit'>q</span> is chosen for the other representation.
The value <span class='textit'>q</span> converts to <span class='textit'>p</span>
(by <span class='textit'>G</span> or <span class='textit'>N</span> as appropriate)
if any such value does so;
<span class='textit'>q</span> is otherwise unspecified.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
If <span class='textit'>q</span> is the result of converting any path at all,
it is the result of converting <span class='textit'>p</span>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div></div><div id='fs.path.type.cvt'><h4 ><a class='secnum' href='#fs.path.type.cvt' style='min-width:133pt'>30.10.8.2.2</a> <span class='texttt'>path</span> type and encoding conversions <a class='abbr_ref' href='fs.path.type.cvt'>[fs.path.type.cvt]</a></h4><div class='para' id='fs.path.type.cvt-1'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.type.cvt-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/iostreams.tex#L10840'>#</a></div><p >For member function arguments that take character sequences representing
paths and for member functions returning strings, value type and encoding
conversion is performed if the value type of the argument or return value differs from
<span class='texttt'>path&#x200b;::&#x200b;value_&shy;type</span>.
For the argument or return value, the method of conversion and the encoding
to be converted to is determined
by its value type:
</p><ul class='itemize'><li id='fs.path.type.cvt-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#fs.path.type.cvt-1.1'>(1.1)</a></div><p ><span class='texttt'>char</span>: The encoding is the native narrow encoding (<a href='fs.def.native.encode'>[fs.def.native.encode]</a>).
The method of conversion, if any, is operating system dependent.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
For POSIX-based operating systems <span class='texttt'>path&#x200b;::&#x200b;value_&shy;type</span> is <span class='texttt'>char</span>
so no conversion from <span class='texttt'>char</span> value type arguments or to <span class='texttt'>char</span>
value type return values is performed.
For Windows-based operating systems, the
native narrow encoding is determined by calling a Windows API function.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
This results in behavior identical to other C and C++
standard library functions that perform file operations using narrow character
strings to identify paths. Changing this behavior would be surprising and error
prone.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
</p></li><li id='fs.path.type.cvt-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#fs.path.type.cvt-1.2'>(1.2)</a></div><p ><span class='texttt'>wchar_&shy;t</span>: The encoding is the <a href='fs.def.native.encode'>native wide encoding</a>.
The method of conversion is unspecified.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
For Windows-based operating systems <span class='texttt'>path&#x200b;::&#x200b;value_&shy;type</span> is <span class='texttt'>wchar_&shy;t</span>
so no conversion from <span class='texttt'>wchar_&shy;t</span> value type arguments or to <span class='texttt'>wchar_&shy;t</span>
value type return values is performed.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
</p></li><li id='fs.path.type.cvt-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#fs.path.type.cvt-1.3'>(1.3)</a></div><p ><span class='texttt'>char16_&shy;t</span>: The encoding is UTF-16. The method of conversion
is unspecified.
</p></li><li id='fs.path.type.cvt-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#fs.path.type.cvt-1.4'>(1.4)</a></div><p ><span class='texttt'>char32_&shy;t</span>: The encoding is UTF-32. The method of conversion
is unspecified.
</p></li></ul></div><div class='para' id='fs.path.type.cvt-2'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.type.cvt-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/iostreams.tex#L10877'>#</a></div><p >If the encoding being converted to has no representation for source
characters, the resulting converted characters, if any, are unspecified.
Implementations should not modify member function arguments
if already of type <span class='texttt'>path&#x200b;::&#x200b;value_&shy;type</span>.</p></div></div></div></body></html>