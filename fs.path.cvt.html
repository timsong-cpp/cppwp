<!DOCTYPE html><html lang='en'><head><title>[fs.path.cvt]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>31</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>31.12</a> File systems <a class='abbr_ref' href='filesystems#fs.path.cvt'>[filesystems]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>31.12.6</a> Class <span class='texttt'>path</span> <a class='abbr_ref' href='fs.class.path#fs.path.cvt'>[fs.class.path]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>31.12.6.3</a> Conversions <a class='abbr_ref'>[fs.path.cvt]</a></h4><div id='fs.path.fmt.cvt' class='section'><h4 ><a class='secnum' href='#fs.path.fmt.cvt' style='min-width:110pt'>31.12.6.3.1</a> Argument format conversions <a class='abbr_ref' href='fs.path.fmt.cvt'>[fs.path.fmt.cvt]</a></h4><div class='para nonNormativeOnly' id='fs.path.fmt.cvt-1'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/iostreams.tex#L13492'>#</a></div><div class='texpara'><div id='fs.path.fmt.cvt-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#fs.path.fmt.cvt-note-1'>1</a></i>: <div id='fs.path.fmt.cvt-1.sentence-1' class='sentence'>The format conversions described in this subclause
are not applied on POSIX-based operating systems
because on these systems:
<ul class='itemize'><li id='fs.path.fmt.cvt-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#fs.path.fmt.cvt-1.1'>(1.1)</a></div><div class='texpara'><div id='fs.path.fmt.cvt-1.1.sentence-1' class='sentence'>The generic format is acceptable as a native path<a class='hidden_link' href='#fs.path.fmt.cvt-1.1.sentence-1'>.</a></div></div></li><li id='fs.path.fmt.cvt-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#fs.path.fmt.cvt-1.2'>(1.2)</a></div><div class='texpara'><div id='fs.path.fmt.cvt-1.2.sentence-1' class='sentence'>There is no need to distinguish between native format and generic format in function arguments<a class='hidden_link' href='#fs.path.fmt.cvt-1.2.sentence-1'>.</a></div></div></li><li id='fs.path.fmt.cvt-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#fs.path.fmt.cvt-1.3'>(1.3)</a></div><div class='texpara'><div id='fs.path.fmt.cvt-1.3.sentence-1' class='sentence'>Paths for regular files and paths for directories share the same syntax<a class='hidden_link' href='#fs.path.fmt.cvt-1.3.sentence-1'>.</a></div></div></li></ul></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='fs.path.fmt.cvt-2'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/iostreams.tex#L13504'>#</a></div><div class='texpara'><div id='fs.path.fmt.cvt-2.sentence-1' class='sentence'>Several functions are defined to accept <a class='hidden_link' href='#def:detected-format' id='def:detected-format'><i>detected-format</i></a> arguments,
which are character sequences<a class='hidden_link' href='#fs.path.fmt.cvt-2.sentence-1'>.</a></div> <div id='fs.path.fmt.cvt-2.sentence-2' class='sentence'>A detected-format argument represents a path
using either a pathname in the generic format (<a href='fs.path.generic' title='31.12.6.2&emsp;Generic pathname format'>[fs.<span class='shy'></span>path.<span class='shy'></span>generic]</a>)
or a pathname in the native format (<a href='fs.class.path' title='31.12.6&emsp;Class path'>[fs.<span class='shy'></span>class.<span class='shy'></span>path]</a>)<a class='hidden_link' href='#fs.path.fmt.cvt-2.sentence-2'>.</a></div> <div id='fs.path.fmt.cvt-2.sentence-3' class='sentence'>Such an argument is taken to be in the generic format if and only if
it matches the generic format and is not acceptable to the operating system
as a native path<a class='hidden_link' href='#fs.path.fmt.cvt-2.sentence-3'>.</a></div></div></div><div class='para nonNormativeOnly' id='fs.path.fmt.cvt-3'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/iostreams.tex#L13513'>#</a></div><div class='texpara'><div id='fs.path.fmt.cvt-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#fs.path.fmt.cvt-note-2'>2</a></i>: <div id='fs.path.fmt.cvt-3.sentence-1' class='sentence'>Some operating systems have no unambiguous way to distinguish between native format and generic format arguments<a class='hidden_link' href='#fs.path.fmt.cvt-3.sentence-1'>.</a></div> <div id='fs.path.fmt.cvt-3.sentence-2' class='sentence'>This is by design as it simplifies use for operating systems that do not require
disambiguation<a class='hidden_link' href='#fs.path.fmt.cvt-3.sentence-2'>.</a></div> <div id='fs.path.fmt.cvt-3.sentence-3' class='sentence'>An implementation for an operating system where disambiguation
is required is permitted to distinguish between the formats<a class='hidden_link' href='#fs.path.fmt.cvt-3.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='fs.path.fmt.cvt-4'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/iostreams.tex#L13521'>#</a></div><div class='texpara'><div id='fs.path.fmt.cvt-4.sentence-1' class='sentence'>Pathnames are converted as needed between the generic and native formats
in an operating-system-dependent manner<a class='hidden_link' href='#fs.path.fmt.cvt-4.sentence-1'>.</a></div> <div id='fs.path.fmt.cvt-4.sentence-2' class='sentence'>Let <i >G(n)</i> and <i >N(g)</i> in a mathematical sense
be the implementation's functions that convert native-to-generic
and generic-to-native formats respectively<a class='hidden_link' href='#fs.path.fmt.cvt-4.sentence-2'>.</a></div> <div id='fs.path.fmt.cvt-4.sentence-3' class='sentence'>If <i >g=G(n)</i> for some <i >n</i>, then <i >G(N(g))=g</i>;
if <i >n=N(g)</i> for some <i >g</i>, then <i >N(G(n))=n</i><a class='hidden_link' href='#fs.path.fmt.cvt-4.sentence-3'>.</a></div> <div id='fs.path.fmt.cvt-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#fs.path.fmt.cvt-note-3'>3</a></i>: <div id='fs.path.fmt.cvt-4.sentence-4' class='sentence'>Neither <i >G</i> nor <i >N</i> need be invertible<a class='hidden_link' href='#fs.path.fmt.cvt-4.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='fs.path.fmt.cvt-5'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/iostreams.tex#L13533'>#</a></div><div class='texpara'><div id='fs.path.fmt.cvt-5.sentence-1' class='sentence'>If the native format requires paths for regular files to be formatted
differently from paths for directories, the path shall be treated as a directory
path if its last element is a <a href='fs.path.generic#nt:directory-separator' title='31.12.6.2&emsp;Generic pathname format&emsp;[fs.path.generic]'><span id='ntref:directory-separator'><span class='textsf'><i >directory-separator</i></span></span></a>,
otherwise it shall be treated as a path to a regular file<a class='hidden_link' href='#fs.path.fmt.cvt-5.sentence-1'>.</a></div></div></div><div class='para nonNormativeOnly' id='fs.path.fmt.cvt-6'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/iostreams.tex#L13539'>#</a></div><div class='texpara'><div id='fs.path.fmt.cvt-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#fs.path.fmt.cvt-note-4'>4</a></i>: <div id='fs.path.fmt.cvt-6.sentence-1' class='sentence'>A path stores a native format pathname (<a href='fs.path.native.obs' title='31.12.6.5.6&emsp;Native format observers'>[fs.<span class='shy'></span>path.<span class='shy'></span>native.<span class='shy'></span>obs]</a>)
and acts as if it also stores a generic format pathname,
related as given below<a class='hidden_link' href='#fs.path.fmt.cvt-6.sentence-1'>.</a></div> <div id='fs.path.fmt.cvt-6.sentence-2' class='sentence'>The implementation can generate the generic format pathname
based on the native format pathname (and possibly other information)
when requested<a class='hidden_link' href='#fs.path.fmt.cvt-6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='fs.path.fmt.cvt-7'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/iostreams.tex#L13549'>#</a></div><div class='texpara'><div id='fs.path.fmt.cvt-7.sentence-1' class='sentence'>When a path is constructed from or is assigned a single representation
separate from any path, the other representation is selected
by the appropriate conversion function (<i >G</i> or <i >N</i>)<a class='hidden_link' href='#fs.path.fmt.cvt-7.sentence-1'>.</a></div></div></div><div class='para' id='fs.path.fmt.cvt-8'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.fmt.cvt-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/iostreams.tex#L13554'>#</a></div><div class='texpara'><div id='fs.path.fmt.cvt-8.sentence-1' class='sentence'>When the (new) value <i >p</i> of one representation of a path
is derived from the representation of that or another path,
a value <i >q</i> is chosen for the other representation<a class='hidden_link' href='#fs.path.fmt.cvt-8.sentence-1'>.</a></div> <div id='fs.path.fmt.cvt-8.sentence-2' class='sentence'>The value <i >q</i> converts to <i >p</i>
(by <i >G</i> or <i >N</i> as appropriate)
if any such value does so;
<i >q</i> is otherwise unspecified<a class='hidden_link' href='#fs.path.fmt.cvt-8.sentence-2'>.</a></div> <div id='fs.path.fmt.cvt-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#fs.path.fmt.cvt-note-5'>5</a></i>: <div id='fs.path.fmt.cvt-8.sentence-3' class='sentence'>If <i >q</i> is the result of converting any path at all,
it is the result of converting <i >p</i><a class='hidden_link' href='#fs.path.fmt.cvt-8.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='fs.path.type.cvt' class='section'><h4 ><a class='secnum' href='#fs.path.type.cvt' style='min-width:110pt'>31.12.6.3.2</a> Type and encoding conversions <a class='abbr_ref' href='fs.path.type.cvt'>[fs.path.type.cvt]</a></h4><div class='para' id='fs.path.type.cvt-1'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.type.cvt-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/iostreams.tex#L13570'>#</a></div><div class='texpara'><div id='fs.path.type.cvt-1.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:native_encoding' title='31.12.6.3.2&emsp;Type and encoding conversions&emsp;[fs.path.type.cvt]'><span id='def:native_encoding'><i >native encoding</i></span></a> of an ordinary character string is
the operating system dependent current encoding
for pathnames (<a href='fs.class.path' title='31.12.6&emsp;Class path'>[fs.<span class='shy'></span>class.<span class='shy'></span>path]</a>)<a class='hidden_link' href='#fs.path.type.cvt-1.sentence-1'>.</a></div> <div id='fs.path.type.cvt-1.sentence-2' class='sentence'>The <a class='hidden_link' href='#def:native_encoding' title='31.12.6.3.2&emsp;Type and encoding conversions&emsp;[fs.path.type.cvt]'><span id='def:native_encoding_'><i >native encoding</i></span></a> for wide character strings is
the implementation-defined execution
wide-character set encoding (<a href='character.seq' title='16.3.3.3.4&emsp;Character sequences'>[character.<span class='shy'></span>seq]</a>)<a class='hidden_link' href='#fs.path.type.cvt-1.sentence-2'>.</a></div></div></div><div class='para' id='fs.path.type.cvt-2'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.type.cvt-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/iostreams.tex#L13578'>#</a></div><div class='texpara'><div id='fs.path.type.cvt-2.sentence-1' class='sentence'>For member function arguments that take character sequences representing
paths and for member functions returning strings, value type and encoding
conversion is performed if the value type of the argument or return value differs from
<span class='texttt'>path<span class='operator'>&#x200b;::&#x200b;</span>value_<span class='shy'></span>type</span><a class='hidden_link' href='#fs.path.type.cvt-2.sentence-1'>.</a></div> <div id='fs.path.type.cvt-2.sentence-2' class='sentence'>For the argument or return value, the method of conversion and the encoding
to be converted to is determined
by its value type:
<ul class='itemize'><li id='fs.path.type.cvt-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#fs.path.type.cvt-2.1'>(2.1)</a></div><div class='texpara'><div id='fs.path.type.cvt-2.1.sentence-1' class='sentence'><span class='texttt'><span class='keyword'>char</span></span>: The encoding is the native ordinary encoding<a class='hidden_link' href='#fs.path.type.cvt-2.1.sentence-1'>.</a></div> <div id='fs.path.type.cvt-2.1.sentence-2' class='sentence'>The method of conversion, if any, is operating system dependent<a class='hidden_link' href='#fs.path.type.cvt-2.1.sentence-2'>.</a></div> <div id='fs.path.type.cvt-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#fs.path.type.cvt-note-1'>1</a></i>: <div id='fs.path.type.cvt-2.1.sentence-3' class='sentence'>For POSIX-based operating systems <span class='texttt'>path<span class='operator'>&#x200b;::&#x200b;</span>value_<span class='shy'></span>type</span> is <span class='texttt'><span class='keyword'>char</span></span>
so no conversion from <span class='texttt'><span class='keyword'>char</span></span> value type arguments or to <span class='texttt'><span class='keyword'>char</span></span>
value type return values is performed<a class='hidden_link' href='#fs.path.type.cvt-2.1.sentence-3'>.</a></div> <div id='fs.path.type.cvt-2.1.sentence-4' class='sentence'>For Windows-based operating systems, the
native ordinary encoding is determined by calling a Windows API function<a class='hidden_link' href='#fs.path.type.cvt-2.1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='fs.path.type.cvt-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#fs.path.type.cvt-note-2'>2</a></i>: <div id='fs.path.type.cvt-2.1.sentence-5' class='sentence'>This results in behavior identical to other C and C++
standard library functions that perform file operations using ordinary character
strings to identify paths<a class='hidden_link' href='#fs.path.type.cvt-2.1.sentence-5'>.</a></div> <div id='fs.path.type.cvt-2.1.sentence-6' class='sentence'>Changing this behavior would be surprising and error
prone<a class='hidden_link' href='#fs.path.type.cvt-2.1.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='fs.path.type.cvt-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#fs.path.type.cvt-2.2'>(2.2)</a></div><div class='texpara'><div id='fs.path.type.cvt-2.2.sentence-1' class='sentence'><span id=':wchar_t'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>: The encoding is the native wide encoding<a class='hidden_link' href='#fs.path.type.cvt-2.2.sentence-1'>.</a></div> <div id='fs.path.type.cvt-2.2.sentence-2' class='sentence'>The method of conversion is unspecified<a class='hidden_link' href='#fs.path.type.cvt-2.2.sentence-2'>.</a></div> <div id='fs.path.type.cvt-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#fs.path.type.cvt-note-3'>3</a></i>: <div id='fs.path.type.cvt-2.2.sentence-3' class='sentence'>For Windows-based operating systems <span class='texttt'>path<span class='operator'>&#x200b;::&#x200b;</span>value_<span class='shy'></span>type</span> is <span id=':wchar_t_'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>
so no conversion from <span id=':wchar_t__'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span> value type arguments or to <span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span>
value type return values is performed<a class='hidden_link' href='#fs.path.type.cvt-2.2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='fs.path.type.cvt-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#fs.path.type.cvt-2.3'>(2.3)</a></div><div class='texpara'><div id='fs.path.type.cvt-2.3.sentence-1' class='sentence'><a class='index' id=':UTF-8'></a><span id=':char8_t'><span class='texttt'><span class='keyword'>char8_<span class='shy'></span>t</span></span></span>: The encoding is UTF-8<a class='hidden_link' href='#fs.path.type.cvt-2.3.sentence-1'>.</a></div> <div id='fs.path.type.cvt-2.3.sentence-2' class='sentence'>The method of conversion
is unspecified<a class='hidden_link' href='#fs.path.type.cvt-2.3.sentence-2'>.</a></div></div></li><li id='fs.path.type.cvt-2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#fs.path.type.cvt-2.4'>(2.4)</a></div><div class='texpara'><div id='fs.path.type.cvt-2.4.sentence-1' class='sentence'><a class='index' id=':UTF-16'></a><span id=':char16_t'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span>: The encoding is UTF-16<a class='hidden_link' href='#fs.path.type.cvt-2.4.sentence-1'>.</a></div> <div id='fs.path.type.cvt-2.4.sentence-2' class='sentence'>The method of conversion
is unspecified<a class='hidden_link' href='#fs.path.type.cvt-2.4.sentence-2'>.</a></div></div></li><li id='fs.path.type.cvt-2.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#fs.path.type.cvt-2.5'>(2.5)</a></div><div class='texpara'><div id='fs.path.type.cvt-2.5.sentence-1' class='sentence'><a class='index' id=':UTF-32'></a><span id=':char32_t'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span>: The encoding is UTF-32<a class='hidden_link' href='#fs.path.type.cvt-2.5.sentence-1'>.</a></div> <div id='fs.path.type.cvt-2.5.sentence-2' class='sentence'>The method of conversion
is unspecified<a class='hidden_link' href='#fs.path.type.cvt-2.5.sentence-2'>.</a></div></div></li></ul></div></div></div><div class='para' id='fs.path.type.cvt-3'><div class='marginalizedparent'><a class='marginalized' href='#fs.path.type.cvt-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/iostreams.tex#L13623'>#</a></div><div class='texpara'><div id='fs.path.type.cvt-3.sentence-1' class='sentence'>If the encoding being converted to has no representation for source
characters, the resulting converted characters, if any, are unspecified<a class='hidden_link' href='#fs.path.type.cvt-3.sentence-1'>.</a></div> <div id='fs.path.type.cvt-3.sentence-2' class='sentence'>Implementations should not modify member function arguments
if already of type <span class='texttt'>path<span class='operator'>&#x200b;::&#x200b;</span>value_<span class='shy'></span>type</span><a class='hidden_link' href='#fs.path.type.cvt-3.sentence-2'>.</a></div></div></div></div></div></body></html>