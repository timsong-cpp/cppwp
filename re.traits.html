<!DOCTYPE html><html lang='en'><head><title>[re.traits]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>28</a> Regular expressions library <a class='abbr_ref' href='./#re'>[re]</a></h1><div id='re.traits'><h2 ><a class='secnum' style='min-width:88pt'>28.7</a> Class template <span class='texttt'>regex_&shy;traits</span> <a class='abbr_ref'>[re.traits]</a></h2><p ><span class='indexparent'><a class='index' id='regex_traits'></a></span></p><p ><pre class='codeblock'>
namespace std {
  template &lt;class charT&gt;
    struct regex_traits {
      using char_type       = charT;
      using string_type     = basic_string&lt;char_type&gt;;
      using locale_type     = locale;
      using char_class_type = <span class='itshape'></span>bitmask_type;

      regex_traits();
      static size_t length(const char_type* p);
      charT translate(charT c) const;
      charT translate_nocase(charT c) const;
      template &lt;class ForwardIterator&gt;
        string_type transform(ForwardIterator first, ForwardIterator last) const;
      template &lt;class ForwardIterator&gt;
        string_type transform_primary(
          ForwardIterator first, ForwardIterator last) const;
      template &lt;class ForwardIterator&gt;
        string_type lookup_collatename(
          ForwardIterator first, ForwardIterator last) const;
      template &lt;class ForwardIterator&gt;
        char_class_type lookup_classname(
          ForwardIterator first, ForwardIterator last, bool icase = false) const;
      bool isctype(charT c, char_class_type f) const;
      int value(charT ch, int radix) const;
      locale_type imbue(locale_type l);
      locale_type getloc() const;
    };
}</pre></p><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1048'>#</a></div><p ><span class='indexparent'><a class='index' id='regular_expression_traits,requirements'></a></span><span class='indexparent'><a class='index' id='requirements,regular_expression_traits'></a></span><span class='indexparent'><a class='index' id='regex_traits,specializations'></a></span>The specializations <span class='texttt'>regex_&shy;traits&lt;char&gt;</span> and
<span class='texttt'>regex_&shy;traits&lt;wchar_&shy;t&gt;</span> shall be valid and shall satisfy the
requirements for a regular expression traits class (<a href='re.req'>[re.req]</a>).</p><p ><span class='indexparent'><a class='index' id='regex_traits,char_class_type'></a></span><span class='indexparent'><a class='index' id='char_class_type,regex_traits'></a></span></p></div><p ><code class='itemdecl'>using char_class_type = <span class='textit'>bitmask_type</span>;
</code></p><div class='itemdescr'></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1062'>#</a></div><p >The type <span class='texttt'>char_&shy;class_&shy;type</span> is used to represent a character
classification and is capable of holding an implementation specific
set returned by <span class='texttt'>lookup_&shy;classname</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='length,regex_traits'></a></span><span class='indexparent'><a class='index' id='regex_traits,length'></a></span></p><p ><code class='itemdecl'>static size_t length(const char_type* p);
</code></p><div class='itemdescr'></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1074'>#</a></div><p ><span class='textit'>Returns:</span> <span class='texttt'>char_&shy;traits&lt;charT&gt;&#x200b;::&#x200b;length(p)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='regex_traits,translate'></a></span><span class='indexparent'><a class='index' id='translate,regex_traits'></a></span></p><p ><code class='itemdecl'>charT translate(charT c) const;
</code></p><div class='itemdescr'></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1083'>#</a></div><p ><span class='textit'>Returns:</span> <span class='texttt'>c</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='regex_traits,translate_nocase'></a></span><span class='indexparent'><a class='index' id='translate_nocase,regex_traits'></a></span></p><p ><code class='itemdecl'>charT translate_nocase(charT c) const;
</code></p><div class='itemdescr'></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1092'>#</a></div><p ><span class='textit'>Returns:</span> <span class='texttt'>use_&shy;facet&lt;ctype&lt;charT&gt;&gt;(getloc()).tolower(c)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='regex_traits,transform'></a></span><span class='indexparent'><a class='index' id='transform,regex_traits'></a></span></p><p ><code class='itemdecl'>template &lt;class ForwardIterator&gt;
  string_type transform(ForwardIterator first, ForwardIterator last) const;
</code></p><div class='itemdescr'></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1102'>#</a></div><p ><span class='textit'>Effects:</span>
As if by:
</p><p ><pre class='codeblock'>
string_type str(first, last);
return use_facet&lt;collate&lt;charT&gt;&gt;(
  getloc()).transform(&amp;*str.begin(), &amp;*str.begin() + str.length());</pre></p></div></div><p ><span class='indexparent'><a class='index' id='regex_traits,transform_primary'></a></span><span class='indexparent'><a class='index' id='transform_primary,regex_traits'></a></span></p><p ><code class='itemdecl'>template &lt;class ForwardIterator&gt;
  string_type transform_primary(ForwardIterator first, ForwardIterator last) const;
</code></p><div class='itemdescr'></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1118'>#</a></div><p ><span class='textit'>Effects:</span>
If
</p><p ><pre class='codeblock'>
typeid(use_facet&lt;collate&lt;charT&gt;&gt;) == typeid(collate_byname&lt;charT&gt;)</pre></p><p >and the form of the sort key returned
by <span class='texttt'>collate_&shy;byname&lt;charT&gt;&#x200b;::&#x200b;transform(first, last)</span> is known and
can be converted into a primary sort key then returns that key,
otherwise returns an empty string.
</p></div></div><p ><span class='indexparent'><a class='index' id='regex_traits,lookup_collatename'></a></span><span class='indexparent'><a class='index' id='lookup_collatename,regex_traits'></a></span></p><p ><code class='itemdecl'>template &lt;class ForwardIterator&gt;
  string_type lookup_collatename(ForwardIterator first, ForwardIterator last) const;
</code></p><div class='itemdescr'></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1137'>#</a></div><p ><span class='textit'>Returns:</span> a sequence of one or more characters that
represents the collating element consisting of the character
sequence designated by the iterator range <span class='texttt'>[first, last)</span>.
Returns an empty string if the character sequence is not a
valid collating element.
</p></div></div><p ><span class='indexparent'><a class='index' id='regex_traits,lookup_classname'></a></span><span class='indexparent'><a class='index' id='lookup_classname,regex_traits'></a></span></p><p ><code class='itemdecl'>template &lt;class ForwardIterator&gt;
  char_class_type lookup_classname(
    ForwardIterator first, ForwardIterator last, bool icase = false) const;
</code></p><div class='itemdescr'></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1152'>#</a></div><p ><span class='textit'>Returns:</span> an unspecified value that represents
the character classification named by the character sequence
designated by the iterator range <span class='texttt'>[first, last)</span>.
If the parameter <span class='texttt'>icase</span> is <span class='texttt'>true</span> then the returned mask identifies the
character classification without regard to the case of the characters being
matched, otherwise it does honor the case of the characters being
matched.<a class='footnotenum' href='#footnote-329'>329</a>
The value
returned shall be independent of the case of the characters in
the character sequence. If the name
is not recognized then returns <span class='texttt'>char_&shy;class_&shy;type()</span>.</p></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1165'>#</a></div><p ><span class='textit'>Remarks:</span> For <span class='texttt'>regex_&shy;traits&lt;char&gt;</span>, at least the narrow character names
in Table <a href='#tab:re.traits.classnames'>133</a> shall be recognized.
For <span class='texttt'>regex_&shy;traits&lt;wchar_&shy;t&gt;</span>, at least the wide character names
in Table <a href='#tab:re.traits.classnames'>133</a> shall be recognized.
</p></div></div><p ><span class='indexparent'><a class='index' id='regex_traits,isctype'></a></span><span class='indexparent'><a class='index' id='isctype,regex_traits'></a></span></p><p ><code class='itemdecl'>bool isctype(charT c, char_class_type f) const;
</code></p><div class='itemdescr'></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1178'>#</a></div><p ><span class='textit'>Effects:</span> Determines if the character <span class='texttt'>c</span> is a member of the character
classification represented by <span class='texttt'>f</span>.</p></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1182'>#</a></div><p ><span class='textit'>Returns:</span> Given the following function declaration:
</p><p ><pre class='codeblock'>
<span class='comment'>// for exposition only
</span>template&lt;class C&gt;
  ctype_base::mask convert(typename regex_traits&lt;C&gt;::char_class_type f);</pre></p><p >that returns a value in which each <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;mask</span> value corresponding to
a value in <span class='texttt'>f</span> named in Table <a href='#tab:re.traits.classnames'>133</a> is set, then the
result is determined as if by:
</p><p ><pre class='codeblock'>
ctype_base::mask m = convert&lt;charT&gt;(f);
const ctype&lt;charT&gt;&amp; ct = use_facet&lt;ctype&lt;charT&gt;&gt;(getloc());
if (ct.is(m, c)) {
  return true;
} else if (c == ct.widen('_')) {
  charT w[1] = { ct.widen('w') };
  char_class_type x = lookup_classname(w, w+1);
  return (f&amp;x) == x;
} else {
  return false;
}</pre></p><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
regex_traits&lt;char&gt; t;
string d("d");
string u("upper");
regex_traits&lt;char&gt;::char_class_type f;
f = t.lookup_classname(d.begin(), d.end());
f |= t.lookup_classname(u.begin(), u.end());
ctype_base::mask m = convert&lt;char&gt;(f); <span class='comment'>// <span class='tcode_in_codeblock'>m == ctype_&shy;base&#x200b;::&#x200b;digit|ctype_&shy;base&#x200b;::&#x200b;upper</span>
</span></pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><p ><pre class='codeblock'>
regex_traits&lt;char&gt; t;
string w("w");
regex_traits&lt;char&gt;::char_class_type f;
f = t.lookup_classname(w.begin(), w.end());
t.isctype('A', f); <span class='comment'>// returns <span class='tcode_in_codeblock'>true</span>
</span>t.isctype('_', f); <span class='comment'>// returns <span class='tcode_in_codeblock'>true</span>
</span>t.isctype(' ', f); <span class='comment'>// returns <span class='tcode_in_codeblock'>false</span>
</span></pre></p><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div></div><p ><span class='indexparent'><a class='index' id='value,regex_traits'></a></span><span class='indexparent'><a class='index' id='regex_traits,value'></a></span></p><p ><code class='itemdecl'>int value(charT ch, int radix) const;
</code></p><div class='itemdescr'></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1236'>#</a></div><p ><span class='textit'>Requires:</span> The value of <span class='texttt'>radix</span> shall be 8, 10, or 16.</p></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1239'>#</a></div><p ><span class='textit'>Returns:</span> the value represented by the digit <span class='texttt'>ch</span> in base
<span class='texttt'>radix</span> if the character <span class='texttt'>ch</span> is a valid digit in base
<span class='texttt'>radix</span>; otherwise returns <span class='texttt'>-1</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='locale'></a></span><span class='indexparent'><a class='index' id='imbue'></a></span></p><p ><code class='itemdecl'>locale_type imbue(locale_type loc);
</code></p><div class='itemdescr'></div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1252'>#</a></div><p ><span class='textit'>Effects:</span> Imbues <span class='texttt'>this</span> with a copy of the
locale <span class='texttt'>loc</span>. [<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> Calling <span class='texttt'>imbue</span> with a
different locale than the one currently in use invalidates all cached
data held by <span class='texttt'>*this</span>. <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div></div><div class='para' id='16'><div class='marginalizedparent'><a class='marginalized' href='#16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1258'>#</a></div><p ><span class='textit'>Returns:</span> if no locale has been previously imbued then a copy of the
global locale in effect at the time of construction of <span class='texttt'>*this</span>,
otherwise a copy of the last argument passed to <span class='texttt'>imbue</span>.</p></div></div><div class='para' id='17'><div class='marginalizedparent'><a class='marginalized' href='#17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1263'>#</a></div><p ><span class='textit'>Postconditions:</span> <span class='texttt'>getloc() == loc</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='locale'></a></span><span class='indexparent'><a class='index' id='getloc'></a></span></p><p ><code class='itemdecl'>locale_type getloc() const;
</code></p><div class='itemdescr'></div><div class='para' id='18'><div class='marginalizedparent'><a class='marginalized' href='#18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/regex.tex#L1274'>#</a></div><p ><span class='textit'>Returns:</span> if no locale has been imbued then a copy of the global locale
in effect at the time of construction of <span class='texttt'>*this</span>, otherwise a copy of
the last argument passed to <span class='texttt'>imbue</span>.
</p></div></div><div class='numberedTable' id='tab:re.traits.classnames'>Table <a href='#tab:re.traits.classnames'>133</a> — Character class names and corresponding <span class='texttt'>ctype</span> masks<br><table ><tr class='rowsep'><td colspan='1' class='center'><b>Narrow character name</b></td><td colspan='1' class='center'><b>Wide character name</b></td><td colspan='1' class='center'><b>Corresponding <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;mask</span> value</b></td></tr><tr class='capsep'><td class='left'>
<span class='texttt'>"alnum"</span>  </td><td class='left'> <span class='texttt'>L"alnum"</span>  </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;alnum</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"alpha"</span>  </td><td class='left'> <span class='texttt'>L"alpha"</span>  </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;alpha</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"blank"</span>  </td><td class='left'> <span class='texttt'>L"blank"</span>  </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;blank</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"cntrl"</span>  </td><td class='left'> <span class='texttt'>L"cntrl"</span>  </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;cntrl</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"digit"</span>  </td><td class='left'> <span class='texttt'>L"digit"</span>  </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;digit</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"d"</span>      </td><td class='left'> <span class='texttt'>L"d"</span>      </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;digit</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"graph"</span>  </td><td class='left'> <span class='texttt'>L"graph"</span>  </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;graph</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"lower"</span>  </td><td class='left'> <span class='texttt'>L"lower"</span>  </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;lower</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"print"</span>  </td><td class='left'> <span class='texttt'>L"print"</span>  </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;print</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"punct"</span>  </td><td class='left'> <span class='texttt'>L"punct"</span>  </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;punct</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"space"</span>  </td><td class='left'> <span class='texttt'>L"space"</span>  </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;space</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"s"</span>      </td><td class='left'> <span class='texttt'>L"s"</span>      </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;space</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"upper"</span>  </td><td class='left'> <span class='texttt'>L"upper"</span>  </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;upper</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"w"</span>      </td><td class='left'> <span class='texttt'>L"w"</span>      </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;alnum</span>  </td></tr><tr class='rowsep'><td class='left'> 
<span class='texttt'>"xdigit"</span> </td><td class='left'> <span class='texttt'>L"xdigit"</span> </td><td class='left'> <span class='texttt'>ctype_&shy;base&#x200b;::&#x200b;xdigit</span> </td></tr></table></div><div class='footnote' id='footnote-329'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-329'>329)</a></div><p >For example, if the parameter <span class='texttt'>icase</span> is <span class='texttt'>true</span> then
<span class='texttt'>[[:lower:]]</span> is the same as <span class='texttt'>[[:alpha:]]</span>.</p></div></div></div></body></html>