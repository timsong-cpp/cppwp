<!DOCTYPE html><html lang='en'><head><title>[basic.indet]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>6.7</a> Memory and objects <a class='abbr_ref' href='basic.memobj#basic.indet'>[basic.memobj]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>6.7.5</a> Indeterminate and erroneous values <a class='abbr_ref'>[basic.indet]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L3941'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>When storage for an object with automatic or dynamic storage duration
is obtained,
the bytes comprising the storage for the object
have the following initial value:
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.1'>(1.1)</a></div>If the object has dynamic storage duration, or
is the object associated with a variable or function parameter
whose first declaration is marked with
the <span class='texttt'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>indeterminate<span class='squarebracket'>]</span><span class='squarebracket'>]</span></span> attribute (<a href='dcl.attr.indet' title='9.13.6&emsp;Indeterminate storage'>[dcl.<span class='shy'></span>attr.<span class='shy'></span>indet]</a>),
the bytes have <a class='hidden_link' href='#def:value,indeterminate' title='6.7.5&emsp;Indeterminate and erroneous values&emsp;[basic.indet]'><span id='def:value,indeterminate'><i >indeterminate values</i></span></a>;</li><li id='1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.2'>(1.2)</a></div>otherwise, the bytes have <a class='hidden_link' href='#def:value,erroneous' title='6.7.5&emsp;Indeterminate and erroneous values&emsp;[basic.indet]'><span id='def:value,erroneous'><i >erroneous values</i></span></a>,
where each value is determined by the implementation
independently of the state of the program<a class='hidden_link' href='#1.sentence-1'>.</a></li></ul></div> <div id='1.sentence-2' class='sentence'>
If no initialization is performed for an object (including subobjects),
such a byte retains its initial value
until that value is replaced (<a href='dcl.init.general' title='9.5.1&emsp;General'>[dcl.<span class='shy'></span>init.<span class='shy'></span>general]</a>, <a href='expr.assign' title='7.6.19&emsp;Assignment and compound assignment operators'>[expr.<span class='shy'></span>assign]</a>)<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>If any bit in the value representation has an indeterminate value,
the object has an indeterminate value;
otherwise, if any bit in the value representation has an erroneous value,
the object has an erroneous value (<a href='conv.lval' title='7.3.2&emsp;Lvalue-to-rvalue conversion'>[conv.<span class='shy'></span>lval]</a>)<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='1.sentence-4' class='sentence'>Objects with static or thread storage duration are zero-initialized,
see <a href='basic.start.static' title='6.9.3.2&emsp;Static initialization'>[basic.<span class='shy'></span>start.<span class='shy'></span>static]</a><a class='hidden_link' href='#1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L3970'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>Except in the following cases,
if an indeterminate value is produced by an evaluation,
the behavior is undefined, and
if an erroneous value is produced by an evaluation,
the behavior is erroneous and
the result of the evaluation is the value so produced but is not erroneous:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.1'>(2.1)</a></div><div class='texpara'><div id='2.1.sentence-1' class='sentence'>If an indeterminate or erroneous value of
  unsigned ordinary character type (<a href='basic.fundamental' title='6.8.2&emsp;Fundamental types'>[basic.<span class='shy'></span>fundamental]</a>)
  or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type (<a href='cstddef.syn' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis'>[cstddef.<span class='shy'></span>syn]</a>)
  is produced by the evaluation of:
  <ul class='itemize'><li id='2.1.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#2.1.1'>(2.1.1)</a></div>the second or third operand of a <a href='expr.cond' title='7.6.16&emsp;Conditional operator&emsp;[expr.cond]'>conditional expression</a>,</li><li id='2.1.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#2.1.2'>(2.1.2)</a></div>the right operand of a <a href='expr.comma' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'>comma expression</a>,</li><li id='2.1.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#2.1.3'>(2.1.3)</a></div>the operand of a cast or conversion (<a href='conv.integral' title='7.3.9&emsp;Integral conversions'>[conv.<span class='shy'></span>integral]</a>, <a href='expr.type.conv' title='7.6.1.4&emsp;Explicit type conversion (functional notation)'>[expr.<span class='shy'></span>type.<span class='shy'></span>conv]</a>, <a href='expr.static.cast' title='7.6.1.9&emsp;Static cast'>[expr.<span class='shy'></span>static.<span class='shy'></span>cast]</a>, <a href='expr.cast' title='7.6.3&emsp;Explicit type conversion (cast notation)'>[expr.<span class='shy'></span>cast]</a>)
    to an unsigned ordinary character type
    or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type (<a href='cstddef.syn' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis'>[cstddef.<span class='shy'></span>syn]</a>), or</li><li id='2.1.4'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#2.1.4'>(2.1.4)</a></div>a <a href='expr.context#def:discarded-value_expression' title='7.2.3&emsp;Context dependence&emsp;[expr.context]'>discarded-value expression</a>,</li></ul>
  then the result of the operation is an indeterminate value or
  that erroneous value, respectively<a class='hidden_link' href='#2.1.sentence-1'>.</a></div></div></li><li id='2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.2'>(2.2)</a></div><div class='texpara'><div id='2.2.sentence-1' class='sentence'>If an indeterminate or erroneous value of
  unsigned ordinary character type or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type
  is produced by the evaluation of
  the right operand of a simple assignment operator (<a href='expr.assign' title='7.6.19&emsp;Assignment and compound assignment operators'>[expr.<span class='shy'></span>assign]</a>)
  whose first operand is an lvalue of
  unsigned ordinary character type or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type,
  an indeterminate value or that erroneous value, respectively, replaces
  the value of the object referred to by the left operand<a class='hidden_link' href='#2.2.sentence-1'>.</a></div></div></li><li id='2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.3'>(2.3)</a></div><div class='texpara'><div id='2.3.sentence-1' class='sentence'>If an indeterminate or erroneous value of unsigned ordinary character type
  is produced by the evaluation of the initialization expression
  when initializing an object of unsigned ordinary character type,
  that object is initialized to an indeterminate
  value or that erroneous value, respectively<a class='hidden_link' href='#2.3.sentence-1'>.</a></div></div></li><li id='2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.4'>(2.4)</a></div><div class='texpara'><div id='2.4.sentence-1' class='sentence'>If an indeterminate value of
  unsigned ordinary character type or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type
  is produced by the evaluation of the initialization expression
  when initializing an object of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type,
  that object is initialized to an indeterminate value or
  that erroneous value, respectively<a class='hidden_link' href='#2.4.sentence-1'>.</a></div></div></li></ul></div> <div id='2.sentence-2' class='sentence'>
Converting an indeterminate or erroneous value of
unsigned ordinary character type or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type
produces an indeterminate or erroneous value, respectively<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>In the latter case,
the result of the conversion is the value of the converted operand<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>bool</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>unsigned</span> <span class='keyword'>char</span> <span class='operator'>*</span>c <span class='operator'>=</span> <span class='keyword'>new</span> <span class='keyword'>unsigned</span> <span class='keyword'>char</span>;
  <span class='keyword'>unsigned</span> <span class='keyword'>char</span> d <span class='operator'>=</span> <span class='operator'>*</span>c;         <span class='comment'>// OK, <span class='tcode_in_codeblock'>d</span> has an indeterminate value</span>
  <span class='keyword'>int</span> e <span class='operator'>=</span> d;                    <span class='comment'>// undefined behavior</span>
  <span class='keyword'>return</span> b <span class='operator'>?</span> d <span class='operator'>:</span> <span class='literal'>0</span>;             <span class='comment'>// undefined behavior if <span class='tcode_in_codeblock'>b</span> is <span class='tcode_in_codeblock'>true</span></span>
<span class='curlybracket'>}</span>

<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>bool</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>unsigned</span> <span class='keyword'>char</span> c;
  <span class='keyword'>unsigned</span> <span class='keyword'>char</span> d <span class='operator'>=</span> c;          <span class='comment'>// no erroneous behavior, but <span class='tcode_in_codeblock'>d</span> has an erroneous value</span>

  assert<span class='parenthesis'>(</span>c <span class='operator'>=</span><span class='operator'>=</span> d<span class='parenthesis'>)</span>;               <span class='comment'>// holds, both integral promotions have erroneous behavior</span>

  <span class='keyword'>int</span> e <span class='operator'>=</span> d;                    <span class='comment'>// erroneous behavior</span>
  <span class='keyword'>return</span> b <span class='operator'>?</span> d <span class='operator'>:</span> <span class='literal'>0</span>;             <span class='comment'>// erroneous behavior if <span class='tcode_in_codeblock'>b</span> is <span class='tcode_in_codeblock'>true</span></span>
<span class='curlybracket'>}</span>

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> d1, d2;

  <span class='keyword'>int</span> e1 <span class='operator'>=</span> d1;                  <span class='comment'>// erroneous behavior</span>
  <span class='keyword'>int</span> e2 <span class='operator'>=</span> d1;                  <span class='comment'>// erroneous behavior</span>

  assert<span class='parenthesis'>(</span>e1 <span class='operator'>=</span><span class='operator'>=</span> e2<span class='parenthesis'>)</span>;             <span class='comment'>// holds</span>
  assert<span class='parenthesis'>(</span>e1 <span class='operator'>=</span><span class='operator'>=</span> d1<span class='parenthesis'>)</span>;             <span class='comment'>// holds, erroneous behavior</span>
  assert<span class='parenthesis'>(</span>e2 <span class='operator'>=</span><span class='operator'>=</span> d1<span class='parenthesis'>)</span>;             <span class='comment'>// holds, erroneous behavior</span>

  std<span class='operator'>::</span>memcpy<span class='parenthesis'>(</span><span class='operator'>&amp;</span>d2, <span class='operator'>&amp;</span>d1, <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;   <span class='comment'>// no erroneous behavior, but <span class='tcode_in_codeblock'>d2</span> has an erroneous value</span>
  assert<span class='parenthesis'>(</span>e1 <span class='operator'>=</span><span class='operator'>=</span> d2<span class='parenthesis'>)</span>;             <span class='comment'>// holds, erroneous behavior</span>
  assert<span class='parenthesis'>(</span>e2 <span class='operator'>=</span><span class='operator'>=</span> d2<span class='parenthesis'>)</span>;             <span class='comment'>// holds, erroneous behavior</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>