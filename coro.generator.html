<!DOCTYPE html><html lang='en'><head><title>[coro.generator]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>26</a> Ranges library <a class='abbr_ref' href='./#ranges'>[ranges]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>26.8</a> Range generators <a class='abbr_ref'>[coro.generator]</a></h2><div id='coroutine.generator.overview' class='section'><h3 ><a class='secnum' href='#coroutine.generator.overview' style='min-width:80pt'>26.8.1</a> Overview <a class='abbr_ref' href='coroutine.generator.overview'>[coroutine.generator.overview]</a></h3><div class='para' id='coroutine.generator.overview-1'><div class='marginalizedparent'><a class='marginalized' href='#coroutine.generator.overview-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15695'>#</a></div><div class='texpara'><div id='coroutine.generator.overview-1.sentence-1' class='sentence'>Class template <span class='texttt'>generator</span> presents
a view of the elements yielded by the evaluation of a coroutine<a class='hidden_link' href='#coroutine.generator.overview-1.sentence-1'>.</a></div></div></div><div class='para' id='coroutine.generator.overview-2'><div class='marginalizedparent'><a class='marginalized' href='#coroutine.generator.overview-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15699'>#</a></div><div class='texpara'><div id='coroutine.generator.overview-2.sentence-1' class='sentence'>A <span class='texttt'>generator</span> generates a sequence of elements by
repeatedly resuming the coroutine from which it was returned<a class='hidden_link' href='#coroutine.generator.overview-2.sentence-1'>.</a></div> <div id='coroutine.generator.overview-2.sentence-2' class='sentence'>Elements of the sequence are produced by the coroutine
each time a <span class='texttt'><span class='keyword'>co_<span class='shy'></span>yield</span></span> statement is evaluated<a class='hidden_link' href='#coroutine.generator.overview-2.sentence-2'>.</a></div> <div id='coroutine.generator.overview-2.sentence-3' class='sentence'>When the <span class='texttt'><span class='keyword'>co_<span class='shy'></span>yield</span></span> statement is of the form
<span class='texttt'><span class='keyword'>co_<span class='shy'></span>yield</span> elements_<span class='shy'></span>of<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span>,
each element of the range <span class='texttt'>r</span>
is successively produced as an element of the sequence<a class='hidden_link' href='#coroutine.generator.overview-2.sentence-3'>.</a></div> <div id='coroutine.generator.overview-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#coroutine.generator.overview-example-1'>1</a></i>: <span class='codeblock'>generator<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> ints<span class='parenthesis'>(</span><span class='keyword'>int</span> start <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>while</span> <span class='parenthesis'>(</span><span class='literal'>true</span><span class='parenthesis'>)</span>
    <span class='keyword'>co_yield</span> start<span class='operator'>+</span><span class='operator'>+</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>for</span> <span class='parenthesis'>(</span><span class='keyword'>auto</span> i <span class='operator'>:</span> ints<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>|</span> views<span class='operator'>::</span>take<span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
    cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> i <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>' '</span>;       <span class='comment'>// prints <span class='tcode_in_codeblock'>0 1 2</span></span>
<span class='curlybracket'>}</span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div><div id='generator.syn' class='section'><h3 ><a class='secnum' href='#generator.syn' style='min-width:80pt'>26.8.2</a> Header <span class='texttt'>&lt;generator&gt;</span> synopsis <a class='abbr_ref' href='generator.syn'>[generator.syn]</a></h3><div class='texpara'><span id='header:<generator>'><div class='marginalizedparent'><a class='itemDeclLink' href='#header:%3cgenerator%3e'>ðŸ”—</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='comment'>// <a href='#class' title='26.8.3&emsp;Class template generator'>[coro.<span class='shy'></span>generator.<span class='shy'></span>class]</a>, class template <span class='tcode_in_codeblock'>generator</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Ref, <span class='keyword'>class</span> V <span class='operator'>=</span> <span class='keyword'>void</span>, <span class='keyword'>class</span> Allocator <span class='operator'>=</span> <span class='keyword'>void</span><span class='anglebracket'>&gt;</span>
    <span class='keyword'>class</span> generator;

  <span class='keyword'>namespace</span> pmr <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> R, <span class='keyword'>class</span> V <span class='operator'>=</span> <span class='keyword'>void</span><span class='anglebracket'>&gt;</span>
      <span class='keyword'>using</span> generator <span class='operator'>=</span> std<span class='operator'>::</span>generator<span class='anglebracket'>&lt;</span>R, V, polymorphic_allocator<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</span></span></div></div><div id='class' class='section'><h3 ><a class='secnum' href='#class' style='min-width:80pt'>26.8.3</a> Class template <span class='texttt'>generator</span> <a class='abbr_ref' href='coro.generator.class'>[coro.generator.class]</a></h3><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Ref, <span class='keyword'>class</span> V <span class='operator'>=</span> <span class='keyword'>void</span>, <span class='keyword'>class</span> Allocator <span class='operator'>=</span> <span class='keyword'>void</span><span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> <span id='lib:generator'><a class='hidden_link' href='#lib:generator' title='26.8.3&emsp;Class template generator&emsp;[coro.generator.class]'>generator</a></span> <span class='operator'>:</span> <span class='keyword'>public</span> ranges<span class='operator'>::</span>view_interface<span class='anglebracket'>&lt;</span>generator<span class='anglebracket'>&lt;</span>Ref, V, Allocator<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>private</span><span class='operator'>:</span>
    <span class='keyword'>using</span> <i >value</i> <span class='operator'>=</span> conditional_t<span class='anglebracket'>&lt;</span>is_void_v<span class='anglebracket'>&lt;</span>V<span class='anglebracket'>&gt;</span>, remove_cvref_t<span class='anglebracket'>&lt;</span>Ref<span class='anglebracket'>&gt;</span>, V<span class='anglebracket'>&gt;</span>;  <span class='comment'>// <i >exposition only</i></span>
    <span class='keyword'>using</span> <i >reference</i> <span class='operator'>=</span> conditional_t<span class='anglebracket'>&lt;</span>is_void_v<span class='anglebracket'>&lt;</span>V<span class='anglebracket'>&gt;</span>, Ref<span class='operator'>&amp;</span><span class='operator'>&amp;</span>, Ref<span class='anglebracket'>&gt;</span>;          <span class='comment'>// <i >exposition only</i></span>

    <span class='comment'>// <a href='#iterator' title='26.8.6&emsp;Class generator&#x200b;::&#x200b;iterator'>[coro.<span class='shy'></span>generator.<span class='shy'></span>iterator]</a>, class <span class='tcode_in_codeblock'>generator&#x200b;::&#x200b;<span class='tcode_in_codeblock'><i >iterator</i></span></span></span>
    <span class='keyword'>class</span> <i >iterator</i>;                                                     <span class='comment'>// <i >exposition only</i></span>

  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> yielded <span class='operator'>=</span>
      conditional_t<span class='anglebracket'>&lt;</span>is_reference_v<span class='anglebracket'>&lt;</span><i >reference</i><span class='anglebracket'>&gt;</span>, <i >reference</i>, <span class='keyword'>const</span> <i >reference</i><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span>;

    <span class='comment'>// <a href='#promise' title='26.8.5&emsp;Class generator&#x200b;::&#x200b;promise_&shy;type'>[coro.<span class='shy'></span>generator.<span class='shy'></span>promise]</a>, class <span class='tcode_in_codeblock'>generator&#x200b;::&#x200b;promise_<span class='shy'></span>type</span></span>
    <span class='keyword'>class</span> promise_type;

    generator<span class='parenthesis'>(</span><span class='keyword'>const</span> generator<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    generator<span class='parenthesis'>(</span>generator<span class='operator'>&amp;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='operator'>~</span>generator<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    generator<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>generator other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <i >iterator</i> begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    default_sentinel_t end<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    coroutine_handle<span class='anglebracket'>&lt;</span>promise_type<span class='anglebracket'>&gt;</span> <i >coroutine_</i> <span class='operator'>=</span> <span class='literal'>nullptr</span>;  <span class='comment'>// <i >exposition only</i></span>
    unique_ptr<span class='anglebracket'>&lt;</span>stack<span class='anglebracket'>&lt;</span>coroutine_handle<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <i >active_</i>;        <span class='comment'>// <i >exposition only</i></span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div><div class='para' id='class-1'><div class='marginalizedparent'><a class='marginalized' href='#class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15775'>#</a></div><div class='texpara'><div id='class-1.sentence-1' class='sentence'><i >Mandates</i>: <ul class='itemize'><li id='class-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class-1.1'>(1.1)</a></div><div class='texpara'><div id='class-1.1.sentence-1' class='sentence'>If <span class='texttt'>Allocator</span> is not <span class='texttt'><span class='keyword'>void</span></span>,
<span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>Allocator<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span> is a pointer type<a class='hidden_link' href='#class-1.1.sentence-1'>.</a></div></div></li><li id='class-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class-1.2'>(1.2)</a></div><div class='texpara'><div id='class-1.2.sentence-1' class='sentence'><span class='texttt'><i >value</i></span> is a cv-unqualified object type<a class='hidden_link' href='#class-1.2.sentence-1'>.</a></div></div></li><li id='class-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class-1.3'>(1.3)</a></div><div class='texpara'><div id='class-1.3.sentence-1' class='sentence'><span class='texttt'><i >reference</i></span> is either a reference type, or
a cv-unqualified object type that models <a href='concept.copyconstructible#concept:copy_constructible' title='18.4.14&emsp;Concept copy_&shy;constructible&emsp;[concept.copyconstructible]'><span id='conceptref:copy_constructible'><span class='texttt'>copy_<span class='shy'></span>constructible</span></span></a><a class='hidden_link' href='#class-1.3.sentence-1'>.</a></div></div></li><li id='class-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class-1.4'>(1.4)</a></div><div class='texpara'><div id='class-1.4.sentence-1' class='sentence'>Let <span class='texttt'>RRef</span> denote <span class='texttt'>remove_<span class='shy'></span>reference_<span class='shy'></span>t<span class='anglebracket'>&lt;</span><span class='texttt'><i >reference</i></span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>
if <span class='texttt'><i >reference</i></span> is a reference type,
and <span class='texttt'><i >reference</i></span> otherwise<a class='hidden_link' href='#class-1.4.sentence-1'>.</a></div> <div id='class-1.4.sentence-2' class='sentence'>Each of:
<ul class='itemize'><li id='class-1.4.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#class-1.4.1'>(1.4.1)</a></div><span class='texttt'><a href='concept.commonref#concept:common_reference_with' title='18.4.5&emsp;Concept common_&shy;reference_&shy;with&emsp;[concept.commonref]'><span id='conceptref:common_reference_with'><span class='texttt'>common_<span class='shy'></span>reference_<span class='shy'></span>with</span></span></a><span class='anglebracket'>&lt;</span><span class='texttt'><i >reference</i></span><span class='operator'>&amp;</span><span class='operator'>&amp;</span>, <span class='texttt'><i >value</i></span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span>,</li><li id='class-1.4.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#class-1.4.2'>(1.4.2)</a></div><span class='texttt'><a href='concept.commonref#concept:common_reference_with' title='18.4.5&emsp;Concept common_&shy;reference_&shy;with&emsp;[concept.commonref]'><span id='conceptref:common_reference_with_'><span class='texttt'>common_<span class='shy'></span>reference_<span class='shy'></span>with</span></span></a><span class='anglebracket'>&lt;</span><span class='texttt'><i >reference</i></span><span class='operator'>&amp;</span><span class='operator'>&amp;</span>, RRef<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span>, and</li><li id='class-1.4.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#class-1.4.3'>(1.4.3)</a></div><span class='texttt'><a href='concept.commonref#concept:common_reference_with' title='18.4.5&emsp;Concept common_&shy;reference_&shy;with&emsp;[concept.commonref]'><span id='conceptref:common_reference_with__'><span class='texttt'>common_<span class='shy'></span>reference_<span class='shy'></span>with</span></span></a><span class='anglebracket'>&lt;</span>RRef<span class='operator'>&amp;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> <span class='texttt'><i >value</i></span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span></li></ul>
is modeled<a class='hidden_link' href='#class-1.4.sentence-2'>.</a></div> <div id='class-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class-note-1'>1</a></i>: <div id='class-1.4.sentence-3' class='sentence'>These requirements ensure the exposition-only <span class='texttt'><i >iterator</i></span> type
can model <a href='iterator.concept.readable#concept:indirectly_readable' title='25.3.4.2&emsp;Concept indirectly_&shy;readable&emsp;[iterator.concept.readable]'><span id='conceptref:indirectly_readable'><span class='texttt'>indirectly_<span class='shy'></span>readable</span></span></a> and thus <a href='iterator.concept.input#concept:input_iterator' title='25.3.4.9&emsp;Concept input_&shy;iterator&emsp;[iterator.concept.input]'><span id='conceptref:input_iterator'><span class='texttt'>input_<span class='shy'></span>iterator</span></span></a><a class='hidden_link' href='#class-1.4.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></li></ul></div></div></div><div class='para' id='class-2'><div class='marginalizedparent'><a class='marginalized' href='#class-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15803'>#</a></div><div class='texpara'><div id='class-2.sentence-1' class='sentence'>If <span class='texttt'>Allocator</span> is not <span class='texttt'><span class='keyword'>void</span></span>,
it shall meet the <i >Cpp17Allocator</i> requirements<a class='hidden_link' href='#class-2.sentence-1'>.</a></div></div></div><div class='para' id='class-3'><div class='marginalizedparent'><a class='marginalized' href='#class-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15807'>#</a></div><div class='texpara'><div id='class-3.sentence-1' class='sentence'>Specializations of <span class='texttt'>generator</span> model
<a href='range.view#concept:view' title='26.4.4&emsp;Views&emsp;[range.view]'><span id='conceptref:view'><span class='texttt'>view</span></span></a> and <a href='range.refinements#concept:input_range' title='26.4.5&emsp;Other range refinements&emsp;[range.refinements]'><span id='conceptref:input_range'><span class='texttt'>input_<span class='shy'></span>range</span></span></a><a class='hidden_link' href='#class-3.sentence-1'>.</a></div></div></div><div class='para' id='class-4'><div class='marginalizedparent'><a class='marginalized' href='#class-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15811'>#</a></div><div class='texpara'><div id='class-4.sentence-1' class='sentence'>The behavior of a program that adds a specialization
for <span class='texttt'>generator</span> is undefined<a class='hidden_link' href='#class-4.sentence-1'>.</a></div></div></div></div><div id='members' class='section'><h3 ><a class='secnum' href='#members' style='min-width:80pt'>26.8.4</a> Members <a class='abbr_ref' href='coro.generator.members'>[coro.generator.members]</a></h3><div class='texpara'><div id='lib:generator,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:generator,constructor'>ðŸ”—</a></div><code class='itemdeclcode'>generator<span class='parenthesis'>(</span>generator<span class='operator'>&amp;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='members-1'><div class='marginalizedparent'><a class='marginalized' href='#members-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15823'>#</a></div><div class='texpara'><div id='members-1.sentence-1' class='sentence'><i >Effects</i>: Initializes <span class='texttt'><i >coroutine_<span class='shy'></span></i></span> with
<span class='texttt'>exchange<span class='parenthesis'>(</span>other<span class='operator'>.</span><span class='texttt'><i >coroutine_<span class='shy'></span></i></span>, <span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span></span> and
<span class='texttt'><i >active_<span class='shy'></span></i></span> with
<span class='texttt'>exchange<span class='parenthesis'>(</span>&#x200b;other<span class='operator'>.</span>active_<span class='shy'></span>, <span class='literal'>nullptr</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#members-1.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='members-2'><div class='marginalizedparent'><a class='marginalized' href='#members-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15830'>#</a></div><div class='texpara'><div id='members-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#members-note-1'>1</a></i>: <div id='members-2.sentence-1' class='sentence'>Iterators previously obtained from <span class='texttt'>other</span> are not invalidated;
they become iterators into <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#members-2.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:generator,destructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:generator,destructor'>ðŸ”—</a></div><code class='itemdeclcode'><span class='operator'>~</span>generator<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='members-3'><div class='marginalizedparent'><a class='marginalized' href='#members-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15843'>#</a></div><div class='texpara'><div id='members-3.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span><i >coroutine_</i><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <i >coroutine_</i><span class='operator'>.</span>destroy<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div></div></div></div><div class='para nonNormativeOnly' id='members-4'><div class='marginalizedparent'><a class='marginalized' href='#members-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15852'>#</a></div><div class='texpara'><div id='members-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#members-note-2'>2</a></i>: <div id='members-4.sentence-1' class='sentence'>Ownership of recursively yielded generators
is held in awaitable objects
in the coroutine frame of the yielding generator,
so destroying the root generator
effectively destroys the entire stack of yielded generators<a class='hidden_link' href='#members-4.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:generator,operator='><div id='lib:operator=,generator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,generator'>ðŸ”—</a></div><code class='itemdeclcode'>generator<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>generator other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='members-5'><div class='marginalizedparent'><a class='marginalized' href='#members-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15868'>#</a></div><div class='texpara'><div id='members-5.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'>swap<span class='parenthesis'>(</span><i >coroutine_</i>, other<span class='operator'>.</span><i >coroutine_</i><span class='parenthesis'>)</span>;
swap<span class='parenthesis'>(</span><i >active_</i>, other<span class='operator'>.</span><i >active_</i><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='para' id='members-6'><div class='marginalizedparent'><a class='marginalized' href='#members-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15876'>#</a></div><div class='texpara'><div id='members-6.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#members-6.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='members-7'><div class='marginalizedparent'><a class='marginalized' href='#members-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15880'>#</a></div><div class='texpara'><div id='members-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#members-note-3'>3</a></i>: <div id='members-7.sentence-1' class='sentence'>Iterators previously obtained from <span class='texttt'>other</span> are not invalidated;
they become iterators into <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#members-7.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:generator,begin'><div id='lib:begin,generator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:begin,generator'>ðŸ”—</a></div><code class='itemdeclcode'><span class='texttt'><i >iterator</i></span> begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='members-8'><div class='marginalizedparent'><a class='marginalized' href='#members-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15893'>#</a></div><div class='texpara'><div id='members-8.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'><i >coroutine_<span class='shy'></span></i></span> refers to a coroutine
suspended at its initial suspend point (<a href='dcl.fct.def.coroutine' title='9.5.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>)<a class='hidden_link' href='#members-8.sentence-1'>.</a></div></div></div></div><div class='para' id='members-9'><div class='marginalizedparent'><a class='marginalized' href='#members-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15898'>#</a></div><div class='texpara'><div id='members-9.sentence-1' class='sentence'><i >Effects</i>: Pushes <span class='texttt'><i >coroutine_<span class='shy'></span></i></span> into <span class='texttt'><span class='operator'>*</span><span class='texttt'><i >active_<span class='shy'></span></i></span></span>,
then evaluates <span class='texttt'><span class='texttt'><i >coroutine_<span class='shy'></span></i></span><span class='operator'>.</span>resume<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#members-9.sentence-1'>.</a></div></div></div></div><div class='para' id='members-10'><div class='marginalizedparent'><a class='marginalized' href='#members-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15903'>#</a></div><div class='texpara'><div id='members-10.sentence-1' class='sentence'><i >Returns</i>: An <span class='texttt'><i >iterator</i></span> object
whose member <span class='texttt'><i >coroutine_<span class='shy'></span></i></span>
refers to the same coroutine as does
<span class='texttt'><i >coroutine_<span class='shy'></span></i></span><a class='hidden_link' href='#members-10.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='members-11'><div class='marginalizedparent'><a class='marginalized' href='#members-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15910'>#</a></div><div class='texpara'><div id='members-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#members-note-4'>4</a></i>: <div id='members-11.sentence-1' class='sentence'>A program that calls <span class='texttt'>begin</span> more than once on the same generator
has undefined behavior<a class='hidden_link' href='#members-11.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:generator,end'><div id='lib:end,generator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:end,generator'>ðŸ”—</a></div><code class='itemdeclcode'>default_sentinel_t end<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='members-12'><div class='marginalizedparent'><a class='marginalized' href='#members-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15923'>#</a></div><div class='texpara'><div id='members-12.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>default_<span class='shy'></span>sentinel</span><a class='hidden_link' href='#members-12.sentence-1'>.</a></div></div></div></div></div><div id='promise' class='section'><h3 ><a class='secnum' href='#promise' style='min-width:80pt'>26.8.5</a> Class <span class='texttt'>generator&#x200b;::&#x200b;promise_<span class='shy'></span>type</span> <a class='abbr_ref' href='coro.generator.promise'>[coro.generator.promise]</a></h3><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Ref, <span class='keyword'>class</span> V, <span class='keyword'>class</span> Allocator<span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> generator<span class='anglebracket'>&lt;</span>Ref, V, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>::</span>promise_type <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    generator get_return_object<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    suspend_always initial_suspend<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>; <span class='curlybracket'>}</span>
    <span class='keyword'>auto</span> final_suspend<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    suspend_always yield_value<span class='parenthesis'>(</span>yielded val<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>auto</span> yield_value<span class='parenthesis'>(</span><span class='keyword'>const</span> remove_reference_t<span class='anglebracket'>&lt;</span>yielded<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> lval<span class='parenthesis'>)</span>
      <span class='keyword'>requires</span> is_rvalue_reference_v<span class='anglebracket'>&lt;</span>yielded<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>
        <a href='concept.constructible#concept:constructible_from' title='18.4.11&emsp;Concept constructible_&shy;from&emsp;[concept.constructible]'><span id='conceptref:constructible_from'><span class='tcode_in_codeblock'>constructible_<span class='shy'></span>from</span></span></a><span class='anglebracket'>&lt;</span>remove_cvref_t<span class='anglebracket'>&lt;</span>yielded<span class='anglebracket'>&gt;</span>, <span class='keyword'>const</span> remove_reference_t<span class='anglebracket'>&lt;</span>yielded<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> R2, <span class='keyword'>class</span> V2, <span class='keyword'>class</span> Alloc2, <span class='keyword'>class</span> Unused<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.same#concept:same_as' title='18.4.2&emsp;Concept same_&shy;as&emsp;[concept.same]'><span id='conceptref:same_as'><span class='tcode_in_codeblock'>same_<span class='shy'></span>as</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> generator<span class='anglebracket'>&lt;</span>R2, V2, Alloc2<span class='anglebracket'>&gt;</span><span class='operator'>::</span>yielded, yielded<span class='anglebracket'>&gt;</span>
        <span class='keyword'>auto</span> yield_value<span class='parenthesis'>(</span>ranges<span class='operator'>::</span>elements_of<span class='anglebracket'>&lt;</span>generator<span class='anglebracket'>&lt;</span>R2, V2, Alloc2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span>, Unused<span class='anglebracket'>&gt;</span> g<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>ranges<span class='operator'>::</span><a href='range.refinements#concept:input_range' title='26.4.5&emsp;Other range refinements&emsp;[range.refinements]'><span id='conceptref:input_range_'><span class='tcode_in_codeblock'>input_<span class='shy'></span>range</span></span></a> R, <span class='keyword'>class</span> Alloc<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.convertible#concept:convertible_to' title='18.4.4&emsp;Concept convertible_&shy;to&emsp;[concept.convertible]'><span id='conceptref:convertible_to'><span class='tcode_in_codeblock'>convertible_<span class='shy'></span>to</span></span></a><span class='anglebracket'>&lt;</span>ranges<span class='operator'>::</span>range_reference_t<span class='anglebracket'>&lt;</span>R<span class='anglebracket'>&gt;</span>, yielded<span class='anglebracket'>&gt;</span>
        <span class='keyword'>auto</span> yield_value<span class='parenthesis'>(</span>ranges<span class='operator'>::</span>elements_of<span class='anglebracket'>&lt;</span>R, Alloc<span class='anglebracket'>&gt;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> await_transform<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> return_void<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    <span class='keyword'>void</span> unhandled_exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>size_t size<span class='parenthesis'>)</span>
      <span class='keyword'>requires</span> <a href='concept.same#concept:same_as' title='18.4.2&emsp;Concept same_&shy;as&emsp;[concept.same]'><span id='conceptref:same_as_'><span class='tcode_in_codeblock'>same_<span class='shy'></span>as</span></span></a><span class='anglebracket'>&lt;</span>Allocator, <span class='keyword'>void</span><span class='anglebracket'>&gt;</span> <span class='operator'>|</span><span class='operator'>|</span> <a href='concept.default.init#concept:default_initializable' title='18.4.12&emsp;Concept default_&shy;initializable&emsp;[concept.default.init]'><span id='conceptref:default_initializable'><span class='tcode_in_codeblock'>default_<span class='shy'></span>initializable</span></span></a><span class='anglebracket'>&lt;</span>Allocator<span class='anglebracket'>&gt;</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Alloc, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.same#concept:same_as' title='18.4.2&emsp;Concept same_&shy;as&emsp;[concept.same]'><span id='conceptref:same_as__'><span class='tcode_in_codeblock'>same_<span class='shy'></span>as</span></span></a><span class='anglebracket'>&lt;</span>Allocator, <span class='keyword'>void</span><span class='anglebracket'>&gt;</span> <span class='operator'>|</span><span class='operator'>|</span> <a href='concept.convertible#concept:convertible_to' title='18.4.4&emsp;Concept convertible_&shy;to&emsp;[concept.convertible]'><span id='conceptref:convertible_to_'><span class='tcode_in_codeblock'>convertible_<span class='shy'></span>to</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span>, Allocator<span class='anglebracket'>&gt;</span>
        <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>size_t size, allocator_arg_t, <span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc, <span class='keyword'>const</span> Args<span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> This, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.same#concept:same_as' title='18.4.2&emsp;Concept same_&shy;as&emsp;[concept.same]'><span id='conceptref:same_as___'><span class='tcode_in_codeblock'>same_<span class='shy'></span>as</span></span></a><span class='anglebracket'>&lt;</span>Allocator, <span class='keyword'>void</span><span class='anglebracket'>&gt;</span> <span class='operator'>|</span><span class='operator'>|</span> <a href='concept.convertible#concept:convertible_to' title='18.4.4&emsp;Concept convertible_&shy;to&emsp;[concept.convertible]'><span id='conceptref:convertible_to__'><span class='tcode_in_codeblock'>convertible_<span class='shy'></span>to</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span>, Allocator<span class='anglebracket'>&gt;</span>
        <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>size_t size, <span class='keyword'>const</span> This<span class='operator'>&amp;</span>, allocator_arg_t, <span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,
                           <span class='keyword'>const</span> Args<span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;

    <span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> pointer, size_t size<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    add_pointer_t<span class='anglebracket'>&lt;</span>yielded<span class='anglebracket'>&gt;</span> <i >value_</i> <span class='operator'>=</span> <span class='literal'>nullptr</span>;    <span class='comment'>// <i >exposition only</i></span>
    exception_ptr <i >except_</i>;                      <span class='comment'>// <i >exposition only</i></span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='lib:generator::promise_type,get_return_object'><div id='lib:get_return_object,generator::promise_type'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:get_return_object,generator::promise_type'>ðŸ”—</a></div><code class='itemdeclcode'>generator get_return_object<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='promise-1'><div class='marginalizedparent'><a class='marginalized' href='#promise-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15986'>#</a></div><div class='texpara'><div id='promise-1.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>generator</span> object whose member <span class='texttt'><i >coroutine_<span class='shy'></span></i></span>
is <span class='texttt'>coroutine_<span class='shy'></span>handle<span class='anglebracket'>&lt;</span>promise_<span class='shy'></span>type<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>&#x200b;from_<span class='shy'></span>promise<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span>,
and whose member <span class='texttt'><i >active_<span class='shy'></span></i></span> points to an empty stack<a class='hidden_link' href='#promise-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:generator::promise_type,final_suspend'><div id='lib:final_suspend,generator::promise_type'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:final_suspend,generator::promise_type'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>auto</span> final_suspend<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='promise-2'><div class='marginalizedparent'><a class='marginalized' href='#promise-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L15999'>#</a></div><div class='texpara'><div id='promise-2.sentence-1' class='sentence'><i >Preconditions</i>: A handle referring to the coroutine
whose promise object is <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
is at the top of <span class='texttt'><span class='operator'>*</span><span class='texttt'><i >active_<span class='shy'></span></i></span></span>
of some <span class='texttt'>generator</span> object <span class='texttt'>x</span><a class='hidden_link' href='#promise-2.sentence-1'>.</a></div> <div id='promise-2.sentence-2' class='sentence'>This function is called by that coroutine
upon reaching its final suspend point (<a href='dcl.fct.def.coroutine' title='9.5.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>)<a class='hidden_link' href='#promise-2.sentence-2'>.</a></div></div></div></div><div class='para' id='promise-3'><div class='marginalizedparent'><a class='marginalized' href='#promise-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16008'>#</a></div><div class='texpara'><div id='promise-3.sentence-1' class='sentence'><i >Returns</i>: An awaitable object of unspecified type (<a href='expr.await' title='7.6.2.4&emsp;Await'>[expr.<span class='shy'></span>await]</a>)
whose member functions arrange for the
calling coroutine to be suspended,
pop the coroutine handle
from the top of <span class='texttt'><span class='operator'>*</span>x<span class='operator'>.</span><span class='texttt'><i >active_<span class='shy'></span></i></span></span>,
and resume execution of the coroutine referred to by
<span class='texttt'>x<span class='operator'>.</span><span class='texttt'><i >active_<span class='shy'></span></i></span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>top<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
if <span class='texttt'><span class='operator'>*</span>x<span class='operator'>.</span><span class='texttt'><i >active_<span class='shy'></span></i></span></span> is not empty<a class='hidden_link' href='#promise-3.sentence-1'>.</a></div> <div id='promise-3.sentence-2' class='sentence'>If it is empty, control flow returns to the
current coroutine caller or resumer (<a href='dcl.fct.def.coroutine' title='9.5.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>)<a class='hidden_link' href='#promise-3.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:generator::promise_type,yield_value'><div id='lib:yield_value,generator::promise_type'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:yield_value,generator::promise_type'>ðŸ”—</a></div><code class='itemdeclcode'>suspend_always yield_value<span class='parenthesis'>(</span>yielded val<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='promise-4'><div class='marginalizedparent'><a class='marginalized' href='#promise-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16028'>#</a></div><div class='texpara'><div id='promise-4.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'><span class='texttt'><i >value_<span class='shy'></span></i></span> <span class='operator'>=</span> addressof<span class='parenthesis'>(</span>val<span class='parenthesis'>)</span></span><a class='hidden_link' href='#promise-4.sentence-1'>.</a></div></div></div></div><div class='para' id='promise-5'><div class='marginalizedparent'><a class='marginalized' href='#promise-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16032'>#</a></div><div class='texpara'><div id='promise-5.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='curlybracket'>{</span><span class='curlybracket'>}</span></span><a class='hidden_link' href='#promise-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:generator::promise_type,yield_value_'><div id='lib:yield_value,generator::promise_type_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:yield_value,generator::promise_type_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>auto</span> yield_value<span class='parenthesis'>(</span><span class='keyword'>const</span> remove_reference_t<span class='anglebracket'>&lt;</span>yielded<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> lval<span class='parenthesis'>)</span>
  <span class='keyword'>requires</span> is_rvalue_reference_v<span class='anglebracket'>&lt;</span>yielded<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>
    <a href='concept.constructible#concept:constructible_from' title='18.4.11&emsp;Concept constructible_&shy;from&emsp;[concept.constructible]'><span id='conceptref:constructible_from_'><span class='texttt'>constructible_<span class='shy'></span>from</span></span></a><span class='anglebracket'>&lt;</span>remove_cvref_t<span class='anglebracket'>&lt;</span>yielded<span class='anglebracket'>&gt;</span>, <span class='keyword'>const</span> remove_reference_t<span class='anglebracket'>&lt;</span>yielded<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span>;
</code></div></div></div></div><div class='para' id='promise-6'><div class='marginalizedparent'><a class='marginalized' href='#promise-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16045'>#</a></div><div class='texpara'><div id='promise-6.sentence-1' class='sentence'><i >Preconditions</i>: A handle referring to the coroutine
whose promise object is <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
is at the top of <span class='texttt'><span class='operator'>*</span><span class='texttt'><i >active_<span class='shy'></span></i></span></span>
of some <span class='texttt'>generator</span> object<a class='hidden_link' href='#promise-6.sentence-1'>.</a></div></div></div></div><div class='para' id='promise-7'><div class='marginalizedparent'><a class='marginalized' href='#promise-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16052'>#</a></div><div class='texpara'><div id='promise-7.sentence-1' class='sentence'><i >Returns</i>: An awaitable object of an unspecified type (<a href='expr.await' title='7.6.2.4&emsp;Await'>[expr.<span class='shy'></span>await]</a>)
that stores an object of type <span class='texttt'>remove_<span class='shy'></span>cvref_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>yielded<span class='anglebracket'>&gt;</span></span>
direct-non-list-initialized with <span class='texttt'>lval</span>,
whose member functions arrange for
<span class='texttt'><i >value_<span class='shy'></span></i></span> to point to that stored object
and then suspend the coroutine<a class='hidden_link' href='#promise-7.sentence-1'>.</a></div></div></div></div><div class='para' id='promise-8'><div class='marginalizedparent'><a class='marginalized' href='#promise-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16061'>#</a></div><div class='texpara'><div id='promise-8.sentence-1' class='sentence'><i >Throws</i>: Any exception thrown by the initialization of the stored object<a class='hidden_link' href='#promise-8.sentence-1'>.</a></div></div></div></div><div class='para' id='promise-9'><div class='marginalizedparent'><a class='marginalized' href='#promise-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16065'>#</a></div><div class='texpara'><div id='promise-9.sentence-1' class='sentence'><i >Remarks</i>: A <a href='expr.yield#nt:yield-expression' title='7.6.17&emsp;Yielding a value&emsp;[expr.yield]'><span id='ntref:yield-expression'><span class='textsf'><i >yield-expression</i></span></span></a> that calls this function
has type <span class='texttt'><span class='keyword'>void</span></span> (<a href='expr.yield' title='7.6.17&emsp;Yielding a value'>[expr.<span class='shy'></span>yield]</a>)<a class='hidden_link' href='#promise-9.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:generator::promise_type,yield_value__'><div id='lib:yield_value,generator::promise_type__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:yield_value,generator::promise_type__'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> R2, <span class='keyword'>class</span> V2, <span class='keyword'>class</span> Alloc2, <span class='keyword'>class</span> Unused<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> <a href='concept.same#concept:same_as' title='18.4.2&emsp;Concept same_&shy;as&emsp;[concept.same]'><span id='conceptref:same_as____'><span class='texttt'>same_<span class='shy'></span>as</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> generator<span class='anglebracket'>&lt;</span>R2, V2, Alloc2<span class='anglebracket'>&gt;</span><span class='operator'>::</span>yielded, yielded<span class='anglebracket'>&gt;</span>
  <span class='keyword'>auto</span> yield_value<span class='parenthesis'>(</span>ranges<span class='operator'>::</span>elements_of<span class='anglebracket'>&lt;</span>generator<span class='anglebracket'>&lt;</span>R2, V2, Alloc2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span>, Unused<span class='anglebracket'>&gt;</span> g<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='promise-10'><div class='marginalizedparent'><a class='marginalized' href='#promise-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16079'>#</a></div><div class='texpara'><div id='promise-10.sentence-1' class='sentence'><i >Preconditions</i>: A handle referring to the coroutine
whose promise object is <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
is at the top of <span class='texttt'><span class='operator'>*</span><span class='texttt'><i >active_<span class='shy'></span></i></span></span>
of some <span class='texttt'>generator</span> object <span class='texttt'>x</span><a class='hidden_link' href='#promise-10.sentence-1'>.</a></div> <div id='promise-10.sentence-2' class='sentence'>The coroutine referred to by
<span class='texttt'>g<span class='operator'>.</span>range<span class='operator'>.</span><span class='texttt'><i >coroutine_<span class='shy'></span></i></span></span>
is suspended at its initial suspend point<a class='hidden_link' href='#promise-10.sentence-2'>.</a></div></div></div></div><div class='para' id='promise-11'><div class='marginalizedparent'><a class='marginalized' href='#promise-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16089'>#</a></div><div class='texpara'><div id='promise-11.sentence-1' class='sentence'><i >Returns</i>: An awaitable object of an unspecified type (<a href='expr.await' title='7.6.2.4&emsp;Await'>[expr.<span class='shy'></span>await]</a>)
into which <span class='texttt'>g<span class='operator'>.</span>range</span> is moved,
whose member <span class='texttt'>await_<span class='shy'></span>ready</span> returns <span class='texttt'><span class='literal'>false</span></span>,
whose member <span class='texttt'>await_<span class='shy'></span>suspend</span>
pushes <span class='texttt'>g<span class='operator'>.</span>range<span class='operator'>.</span></span><span class='mbox'><span class='texttt'><i >coroutine_<span class='shy'></span></i></span></span>
into <span class='texttt'><span class='operator'>*</span>x<span class='operator'>.</span><span class='texttt'><i >active_<span class='shy'></span></i></span></span>
and resumes execution of the coroutine referred to
by <span class='texttt'>g<span class='operator'>.</span>range<span class='operator'>.</span>&#x200b;<span class='texttt'><i >coroutine_<span class='shy'></span></i></span></span>, and
whose member <span class='texttt'>await_<span class='shy'></span>resume</span> evaluates
<span class='texttt'>rethrow_<span class='shy'></span>exception<span class='parenthesis'>(</span><span class='texttt'><i >except_<span class='shy'></span></i></span><span class='parenthesis'>)</span></span>
if <span class='texttt'><span class='keyword'>bool</span><span class='parenthesis'>(</span><span class='texttt'><i >except_<span class='shy'></span></i></span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#promise-11.sentence-1'>.</a></div> <div id='promise-11.sentence-2' class='sentence'>If <span class='texttt'><span class='keyword'>bool</span><span class='parenthesis'>(</span><span class='texttt'><i >except_<span class='shy'></span></i></span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>false</span></span>,
the <span class='texttt'>await_<span class='shy'></span>resume</span> member has no effects<a class='hidden_link' href='#promise-11.sentence-2'>.</a></div></div></div></div><div class='para' id='promise-12'><div class='marginalizedparent'><a class='marginalized' href='#promise-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16106'>#</a></div><div class='texpara'><div id='promise-12.sentence-1' class='sentence'><i >Remarks</i>: A <a href='expr.yield#nt:yield-expression' title='7.6.17&emsp;Yielding a value&emsp;[expr.yield]'><span id='ntref:yield-expression_'><span class='textsf'><i >yield-expression</i></span></span></a> that calls this function
has type <span class='texttt'><span class='keyword'>void</span></span> (<a href='expr.yield' title='7.6.17&emsp;Yielding a value'>[expr.<span class='shy'></span>yield]</a>)<a class='hidden_link' href='#promise-12.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:generator::promise_type,yield_value___'><div id='lib:yield_value,generator::promise_type___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:yield_value,generator::promise_type___'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span>ranges<span class='operator'>::</span><a href='range.refinements#concept:input_range' title='26.4.5&emsp;Other range refinements&emsp;[range.refinements]'><span id='conceptref:input_range__'><span class='texttt'>input_<span class='shy'></span>range</span></span></a> R, <span class='keyword'>class</span> Alloc<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> <a href='concept.convertible#concept:convertible_to' title='18.4.4&emsp;Concept convertible_&shy;to&emsp;[concept.convertible]'><span id='conceptref:convertible_to___'><span class='texttt'>convertible_<span class='shy'></span>to</span></span></a><span class='anglebracket'>&lt;</span>ranges<span class='operator'>::</span>range_reference_t<span class='anglebracket'>&lt;</span>R<span class='anglebracket'>&gt;</span>, yielded<span class='anglebracket'>&gt;</span>
  <span class='keyword'>auto</span> yield_value<span class='parenthesis'>(</span>ranges<span class='operator'>::</span>elements_of<span class='anglebracket'>&lt;</span>R, Alloc<span class='anglebracket'>&gt;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='promise-13'><div class='marginalizedparent'><a class='marginalized' href='#promise-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16120'>#</a></div><div class='texpara'><div id='promise-13.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>auto</span> nested <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>allocator_arg_t, Alloc, ranges<span class='operator'>::</span>iterator_t<span class='anglebracket'>&lt;</span>R<span class='anglebracket'>&gt;</span> i, ranges<span class='operator'>::</span>sentinel_t<span class='anglebracket'>&lt;</span>R<span class='anglebracket'>&gt;</span> s<span class='parenthesis'>)</span>
  <span class='operator'>-</span><span class='anglebracket'>&gt;</span> generator<span class='anglebracket'>&lt;</span>yielded, ranges<span class='operator'>::</span>range_value_t<span class='anglebracket'>&lt;</span>R<span class='anglebracket'>&gt;</span>, Alloc<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>for</span> <span class='parenthesis'>(</span>; i <span class='operator'>!</span><span class='operator'>=</span> s; <span class='operator'>+</span><span class='operator'>+</span>i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      <span class='keyword'>co_yield</span> <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>yielded<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>*</span>i<span class='parenthesis'>)</span>;
    <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span>;
<span class='keyword'>return</span> yield_value<span class='parenthesis'>(</span>ranges<span class='operator'>::</span>elements_of<span class='parenthesis'>(</span>nested<span class='parenthesis'>(</span>
  allocator_arg, r<span class='operator'>.</span>allocator, ranges<span class='operator'>::</span>begin<span class='parenthesis'>(</span>r<span class='operator'>.</span>range<span class='parenthesis'>)</span>, ranges<span class='operator'>::</span>end<span class='parenthesis'>(</span>r<span class='operator'>.</span>range<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='para nonNormativeOnly' id='promise-14'><div class='marginalizedparent'><a class='marginalized' href='#promise-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16134'>#</a></div><div class='texpara'><div id='promise-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#promise-note-1'>1</a></i>: <div id='promise-14.sentence-1' class='sentence'>A <a href='expr.yield#nt:yield-expression' title='7.6.17&emsp;Yielding a value&emsp;[expr.yield]'><span id='ntref:yield-expression__'><span class='textsf'><i >yield-expression</i></span></span></a> that calls this function
has type <span class='texttt'><span class='keyword'>void</span></span> (<a href='expr.yield' title='7.6.17&emsp;Yielding a value'>[expr.<span class='shy'></span>yield]</a>)<a class='hidden_link' href='#promise-14.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:generator::promise_type,unhandled_exception'><div id='lib:unhandled_exception,generator::promise_type'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:unhandled_exception,generator::promise_type'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> unhandled_exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='promise-15'><div class='marginalizedparent'><a class='marginalized' href='#promise-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16147'>#</a></div><div class='texpara'><div id='promise-15.sentence-1' class='sentence'><i >Preconditions</i>: A handle referring to the coroutine whose promise object is <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
is at the top of <span class='texttt'><span class='operator'>*</span><span class='texttt'><i >active_<span class='shy'></span></i></span></span>
of some <span class='texttt'>generator</span> object <span class='texttt'>x</span><a class='hidden_link' href='#promise-15.sentence-1'>.</a></div></div></div></div><div class='para' id='promise-16'><div class='marginalizedparent'><a class='marginalized' href='#promise-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16153'>#</a></div><div class='texpara'><div id='promise-16.sentence-1' class='sentence'><i >Effects</i>: If the handle referring to the coroutine
whose promise object is <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
is the sole element of <span class='texttt'><span class='operator'>*</span>x<span class='operator'>.</span><span class='texttt'><i >active_<span class='shy'></span></i></span></span>,
equivalent to <span class='texttt'><span class='keyword'>throw</span></span>,
otherwise, assigns <span class='texttt'>current_<span class='shy'></span>exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> to <span class='texttt'><i >except_<span class='shy'></span></i></span><a class='hidden_link' href='#promise-16.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:generator::promise_type,operator_new'><div id='lib:operator_new,generator::promise_type'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator_new,generator::promise_type'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>size_t size<span class='parenthesis'>)</span>
  <span class='keyword'>requires</span> <a href='concept.same#concept:same_as' title='18.4.2&emsp;Concept same_&shy;as&emsp;[concept.same]'><span id='conceptref:same_as_____'><span class='texttt'>same_<span class='shy'></span>as</span></span></a><span class='anglebracket'>&lt;</span>Allocator, <span class='keyword'>void</span><span class='anglebracket'>&gt;</span> <span class='operator'>|</span><span class='operator'>|</span> <a href='concept.default.init#concept:default_initializable' title='18.4.12&emsp;Concept default_&shy;initializable&emsp;[concept.default.init]'><span id='conceptref:default_initializable_'><span class='texttt'>default_<span class='shy'></span>initializable</span></span></a><span class='anglebracket'>&lt;</span>Allocator<span class='anglebracket'>&gt;</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Alloc, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> <a href='concept.same#concept:same_as' title='18.4.2&emsp;Concept same_&shy;as&emsp;[concept.same]'><span id='conceptref:same_as______'><span class='texttt'>same_<span class='shy'></span>as</span></span></a><span class='anglebracket'>&lt;</span>Allocator, <span class='keyword'>void</span><span class='anglebracket'>&gt;</span> <span class='operator'>|</span><span class='operator'>|</span> <a href='concept.convertible#concept:convertible_to' title='18.4.4&emsp;Concept convertible_&shy;to&emsp;[concept.convertible]'><span id='conceptref:convertible_to____'><span class='texttt'>convertible_<span class='shy'></span>to</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span>, Allocator<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>size_t size, allocator_arg_t, <span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc, <span class='keyword'>const</span> Args<span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> This, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> <a href='concept.same#concept:same_as' title='18.4.2&emsp;Concept same_&shy;as&emsp;[concept.same]'><span id='conceptref:same_as_______'><span class='texttt'>same_<span class='shy'></span>as</span></span></a><span class='anglebracket'>&lt;</span>Allocator, <span class='keyword'>void</span><span class='anglebracket'>&gt;</span> <span class='operator'>|</span><span class='operator'>|</span> <a href='concept.convertible#concept:convertible_to' title='18.4.4&emsp;Concept convertible_&shy;to&emsp;[concept.convertible]'><span id='conceptref:convertible_to_____'><span class='texttt'>convertible_<span class='shy'></span>to</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span>, Allocator<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>size_t size, <span class='keyword'>const</span> This<span class='operator'>&amp;</span>, allocator_arg_t, <span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,
                     <span class='keyword'>const</span> Args<span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='promise-17'><div class='marginalizedparent'><a class='marginalized' href='#promise-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16178'>#</a></div><div class='texpara'><div id='promise-17.sentence-1' class='sentence'>Let <span class='texttt'>A</span> be
<ul class='itemize'><li id='promise-17.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#promise-17.1'>(17.1)</a></div><span class='texttt'>Allocator</span>, if it is not <span class='texttt'><span class='keyword'>void</span></span>,</li><li id='promise-17.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#promise-17.2'>(17.2)</a></div><span class='texttt'>Alloc</span> for the overloads with a template parameter <span class='texttt'>Alloc</span>, or</li><li id='promise-17.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#promise-17.3'>(17.3)</a></div><span class='texttt'>allocator<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span></span> otherwise<a class='hidden_link' href='#promise-17.sentence-1'>.</a></li></ul></div> <div id='promise-17.sentence-2' class='sentence'>
Let <span class='texttt'>B</span> be <span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>template</span> rebind_<span class='shy'></span>alloc<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span>
where <span class='texttt'>U</span> is an unspecified type whose size and alignment
are both <span class='texttt'>__STDCPP_<span class='shy'></span>DEFAULT_<span class='shy'></span>NEW_<span class='shy'></span>ALIGNMENT__</span><a class='hidden_link' href='#promise-17.sentence-2'>.</a></div></div></div></div><div class='para' id='promise-18'><div class='marginalizedparent'><a class='marginalized' href='#promise-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16192'>#</a></div><div class='texpara'><div id='promise-18.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span> is a pointer type<a class='hidden_link' href='#promise-18.sentence-1'>.</a></div></div></div></div><div class='para' id='promise-19'><div class='marginalizedparent'><a class='marginalized' href='#promise-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16196'>#</a></div><div class='texpara'><div id='promise-19.sentence-1' class='sentence'><i >Effects</i>: Initializes an allocator <span class='texttt'>b</span> of type <span class='texttt'>B</span> with <span class='texttt'>A<span class='parenthesis'>(</span>alloc<span class='parenthesis'>)</span></span>,
for the overloads with a function parameter <span class='texttt'>alloc</span>,
and with <span class='texttt'>A<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> otherwise<a class='hidden_link' href='#promise-19.sentence-1'>.</a></div> <div id='promise-19.sentence-2' class='sentence'>Uses <span class='texttt'>b</span> to allocate storage for the smallest array
of <span class='texttt'>U</span> sufficient to provide storage for
a coroutine state of size <span class='texttt'>size</span>, and
unspecified additional state necessary to ensure that
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span></span> can later deallocate this memory block
with an allocator equal to <span class='texttt'>b</span><a class='hidden_link' href='#promise-19.sentence-2'>.</a></div></div></div></div><div class='para' id='promise-20'><div class='marginalizedparent'><a class='marginalized' href='#promise-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16208'>#</a></div><div class='texpara'><div id='promise-20.sentence-1' class='sentence'><i >Returns</i>: A pointer to the allocated storage<a class='hidden_link' href='#promise-20.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:generator::promise_type,operator_delete'><div id='lib:operator_delete,generator::promise_type'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator_delete,generator::promise_type'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> pointer, size_t size<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='promise-21'><div class='marginalizedparent'><a class='marginalized' href='#promise-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16219'>#</a></div><div class='texpara'><div id='promise-21.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>pointer</span> was returned from an invocation of
one of the above overloads of <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span>
with a <span class='texttt'>size</span> argument equal to <span class='texttt'>size</span><a class='hidden_link' href='#promise-21.sentence-1'>.</a></div></div></div></div><div class='para' id='promise-22'><div class='marginalizedparent'><a class='marginalized' href='#promise-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16225'>#</a></div><div class='texpara'><div id='promise-22.sentence-1' class='sentence'><i >Effects</i>: Deallocates the storage pointed to by <span class='texttt'>pointer</span>
using an allocator equivalent to that used to allocate it<a class='hidden_link' href='#promise-22.sentence-1'>.</a></div></div></div></div></div><div id='iterator' class='section'><h3 ><a class='secnum' href='#iterator' style='min-width:80pt'>26.8.6</a> Class <span class='texttt'>generator&#x200b;::&#x200b;<span class='texttt'><i >iterator</i></span></span> <a class='abbr_ref' href='coro.generator.iterator'>[coro.generator.iterator]</a></h3><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Ref, <span class='keyword'>class</span> V, <span class='keyword'>class</span> Allocator<span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> generator<span class='anglebracket'>&lt;</span>Ref, V, Allocator<span class='anglebracket'>&gt;</span><span class='operator'>::</span><i >iterator</i> <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> <i >value</i>;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> ptrdiff_t;

    <i >iterator</i><span class='parenthesis'>(</span><i >iterator</i><span class='operator'>&amp;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >iterator</i><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >iterator</i><span class='operator'>&amp;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <i >reference</i> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span>is_nothrow_copy_constructible_v<span class='anglebracket'>&lt;</span><i >reference</i><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
    <i >iterator</i><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;

    <span class='keyword'>friend</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> <i >iterator</i><span class='operator'>&amp;</span> i, default_sentinel_t<span class='parenthesis'>)</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    coroutine_handle<span class='anglebracket'>&lt;</span>promise_type<span class='anglebracket'>&gt;</span> <i >coroutine_</i>; <span class='comment'>// <i >exposition only</i></span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='lib:generator::iterator,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:generator::iterator,constructor'>ðŸ”—</a></div><code class='itemdeclcode'><span class='texttt'><i >iterator</i></span><span class='parenthesis'>(</span><span class='texttt'><i >iterator</i></span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='iterator-1'><div class='marginalizedparent'><a class='marginalized' href='#iterator-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16262'>#</a></div><div class='texpara'><div id='iterator-1.sentence-1' class='sentence'><i >Effects</i>: Initializes <span class='texttt'><i >coroutine_<span class='shy'></span></i></span>
with <span class='texttt'>exchange<span class='parenthesis'>(</span>other<span class='operator'>.</span><span class='texttt'><i >coroutine_<span class='shy'></span></i></span>, <span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#iterator-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:generator::iterator,operator='><div id='lib:operator=,generator::iterator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,generator::iterator'>ðŸ”—</a></div><code class='itemdeclcode'><span class='texttt'><i >iterator</i></span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='texttt'><i >iterator</i></span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='iterator-2'><div class='marginalizedparent'><a class='marginalized' href='#iterator-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16274'>#</a></div><div class='texpara'><div id='iterator-2.sentence-1' class='sentence'><i >Effects</i>: Equivalent to
<span class='texttt'><span class='texttt'><i >coroutine_<span class='shy'></span></i></span> <span class='operator'>=</span> exchange<span class='parenthesis'>(</span>other<span class='operator'>.</span><span class='texttt'><i >coroutine_<span class='shy'></span></i></span>, <span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#iterator-2.sentence-1'>.</a></div></div></div></div><div class='para' id='iterator-3'><div class='marginalizedparent'><a class='marginalized' href='#iterator-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16279'>#</a></div><div class='texpara'><div id='iterator-3.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#iterator-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:generator::iterator,operator*'><div id='lib:operator*,generator::iterator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator*,generator::iterator'>ðŸ”—</a></div><code class='itemdeclcode'><span class='texttt'><i >reference</i></span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span>is_nothrow_copy_constructible_v<span class='anglebracket'>&lt;</span><span class='texttt'><i >reference</i></span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='iterator-4'><div class='marginalizedparent'><a class='marginalized' href='#iterator-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16290'>#</a></div><div class='texpara'><div id='iterator-4.sentence-1' class='sentence'><i >Preconditions</i>: For some <span class='texttt'>generator</span> object <span class='texttt'>x</span>,
<span class='texttt'><i >coroutine_<span class='shy'></span></i></span> is in <span class='texttt'><span class='operator'>*</span>x<span class='operator'>.</span><span class='texttt'><i >active_<span class='shy'></span></i></span></span> and
<span class='texttt'>x<span class='operator'>.</span><span class='texttt'><i >active_<span class='shy'></span></i></span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>top<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> refers to
a suspended coroutine with promise object <span class='texttt'>p</span><a class='hidden_link' href='#iterator-4.sentence-1'>.</a></div></div></div></div><div class='para' id='iterator-5'><div class='marginalizedparent'><a class='marginalized' href='#iterator-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16297'>#</a></div><div class='texpara'><div id='iterator-5.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='texttt'><span class='keyword'>return</span> <span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span><span class='texttt'><i >reference</i></span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='operator'>.</span><span class='texttt'><i >value_<span class='shy'></span></i></span><span class='parenthesis'>)</span>;</span></div></div></div></div><div class='texpara'><div id='lib:generator::iterator,operator++'><div id='lib:operator++,generator::iterator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator++,generator::iterator'>ðŸ”—</a></div><code class='itemdeclcode'><span class='texttt'><i >iterator</i></span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='iterator-6'><div class='marginalizedparent'><a class='marginalized' href='#iterator-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16309'>#</a></div><div class='texpara'><div id='iterator-6.sentence-1' class='sentence'><i >Preconditions</i>: For some <span class='texttt'>generator</span> object <span class='texttt'>x</span>,
<span class='texttt'><i >coroutine_<span class='shy'></span></i></span> is in <span class='texttt'><span class='operator'>*</span>x<span class='operator'>.</span><span class='texttt'><i >active_<span class='shy'></span></i></span></span><a class='hidden_link' href='#iterator-6.sentence-1'>.</a></div></div></div></div><div class='para' id='iterator-7'><div class='marginalizedparent'><a class='marginalized' href='#iterator-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16314'>#</a></div><div class='texpara'><div id='iterator-7.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>x<span class='operator'>.</span><span class='texttt'><i >active_<span class='shy'></span></i></span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>top<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>resume<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#iterator-7.sentence-1'>.</a></div></div></div></div><div class='para' id='iterator-8'><div class='marginalizedparent'><a class='marginalized' href='#iterator-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16318'>#</a></div><div class='texpara'><div id='iterator-8.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#iterator-8.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:generator::iterator,operator++_'><div id='lib:operator++,generator::iterator_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator++,generator::iterator_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='iterator-9'><div class='marginalizedparent'><a class='marginalized' href='#iterator-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16329'>#</a></div><div class='texpara'><div id='iterator-9.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'><span class='operator'>+</span><span class='operator'>+</span><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#iterator-9.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:generator::iterator,operator=='><div id='lib:operator==,generator::iterator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator==,generator::iterator'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>friend</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='texttt'><i >iterator</i></span><span class='operator'>&amp;</span> i, default_sentinel_t<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='iterator-10'><div class='marginalizedparent'><a class='marginalized' href='#iterator-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/ranges.tex#L16340'>#</a></div><div class='texpara'><div id='iterator-10.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> i<span class='operator'>.</span><span class='texttt'><i >coroutine_<span class='shy'></span></i></span><span class='operator'>.</span>done<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;</span></div></div></div></div></div></div></body></html>