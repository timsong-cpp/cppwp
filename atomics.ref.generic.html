<!DOCTYPE html><html lang='en'><head><title>[atomics.ref.generic]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>32</a> Concurrency support library <a class='abbr_ref' href='./#thread'>[thread]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>32.5</a> Atomic operations <a class='abbr_ref' href='atomics#ref.generic'>[atomics]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>32.5.7</a> Class template <span class='texttt'>atomic_<span class='shy'></span>ref</span> <a class='abbr_ref'>[atomics.ref.generic]</a></h3><div id='general' class='section'><h4 ><a class='secnum' href='#general' style='min-width:95pt'>32.5.7.1</a> General <a class='abbr_ref' href='atomics.ref.generic.general'>[atomics.ref.generic.general]</a></h4><div class='texpara'><span id='lib:atomic_ref,value_type'><span id='lib:value_type,atomic_ref'><span id='lib:atomic_ref'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic_ref'>ðŸ”—</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic_ref <span class='curlybracket'>{</span>
  <span class='keyword'>private</span><span class='operator'>:</span>
    T<span class='operator'>*</span> ptr;             <span class='comment'>// <i >exposition only</i></span>

  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> T;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> size_t required_alignment <span class='operator'>=</span> <a class='index' id=':required_alignment_for_atomic_ref_type&#39;s_operations'></a><i >implementation-defined</i>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <a class='index' id=':whether_a_given_atomic_ref_type&#39;s_operations_are_always_lock_free'></a><i >implementation-defined</i>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>explicit</span> atomic_ref<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    atomic_ref<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic_ref<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    T exchange<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></span></span></div><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3161'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'>An <span class='texttt'>atomic_<span class='shy'></span>ref</span> object applies atomic operations (<a href='atomics.general' title='32.5.1&emsp;General'>[atomics.<span class='shy'></span>general]</a>) to
the object referenced by <span class='texttt'><span class='operator'>*</span>ptr</span> such that,
for the lifetime (<a href='basic.life' title='6.7.3&emsp;Lifetime'>[basic.<span class='shy'></span>life]</a>) of the <span class='texttt'>atomic_<span class='shy'></span>ref</span> object,
the object referenced by <span class='texttt'><span class='operator'>*</span>ptr</span> is an atomic object (<a href='intro.races' title='6.9.2.2&emsp;Data races'>[intro.<span class='shy'></span>races]</a>)<a class='hidden_link' href='#general-1.sentence-1'>.</a></div></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3167'>#</a></div><div class='texpara'><div id='general-2.sentence-1' class='sentence'>The program is ill-formed if <span class='texttt'>is_<span class='shy'></span>trivially_<span class='shy'></span>copyable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#general-2.sentence-1'>.</a></div></div></div><div class='para' id='general-3'><div class='marginalizedparent'><a class='marginalized' href='#general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3170'>#</a></div><div class='texpara'><div id='general-3.sentence-1' class='sentence'>The lifetime (<a href='basic.life' title='6.7.3&emsp;Lifetime'>[basic.<span class='shy'></span>life]</a>) of an object referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
shall exceed the lifetime of all <span class='texttt'>atomic_<span class='shy'></span>ref</span>s that reference the object<a class='hidden_link' href='#general-3.sentence-1'>.</a></div> <div id='general-3.sentence-2' class='sentence'>While any <span class='texttt'>atomic_<span class='shy'></span>ref</span> instances exist
that reference the <span class='texttt'><span class='operator'>*</span>ptr</span> object,
all accesses to that object shall exclusively occur
through those <span class='texttt'>atomic_<span class='shy'></span>ref</span> instances<a class='hidden_link' href='#general-3.sentence-2'>.</a></div> <div id='general-3.sentence-3' class='sentence'>No subobject of the object referenced by <span class='texttt'>atomic_<span class='shy'></span>ref</span>
shall be concurrently referenced by any other <span class='texttt'>atomic_<span class='shy'></span>ref</span> object<a class='hidden_link' href='#general-3.sentence-3'>.</a></div></div></div><div class='para' id='general-4'><div class='marginalizedparent'><a class='marginalized' href='#general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3180'>#</a></div><div class='texpara'><div id='general-4.sentence-1' class='sentence'>Atomic operations applied to an object
through a referencing <span class='texttt'>atomic_<span class='shy'></span>ref</span> are atomic with respect to
atomic operations applied through any other <span class='texttt'>atomic_<span class='shy'></span>ref</span>
referencing the same object<a class='hidden_link' href='#general-4.sentence-1'>.</a></div> <div id='general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-1'>1</a></i>:&ensp;<div id='general-4.sentence-2' class='sentence'>Atomic operations or the <span class='texttt'>atomic_<span class='shy'></span>ref</span> constructor can acquire
a shared resource, such as a lock associated with the referenced object,
to enable atomic operations to be applied to the referenced object<a class='hidden_link' href='#general-4.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div id='atomics.ref.ops' class='section'><h4 ><a class='secnum' href='#atomics.ref.ops' style='min-width:95pt'>32.5.7.2</a> Operations <a class='abbr_ref' href='atomics.ref.ops'>[atomics.ref.ops]</a></h4><div class='texpara'><div id='lib:atomic_ref<floating-point-type>,required_alignment'><div id='lib:required_alignment,atomic_ref<floating-point-type>'><div id='lib:atomic_ref<integral-type>,required_alignment'><div id='lib:required_alignment,atomic_ref<integral-type>'><div id='lib:atomic_ref<T*>,required_alignment'><div id='lib:required_alignment,atomic_ref<T*>'><div id='lib:atomic_ref,required_alignment'><div id='lib:required_alignment,atomic_ref'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:required_alignment,atomic_ref'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>static</span> <span class='keyword'>constexpr</span> size_t required_alignment;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.ref.ops-1'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3202'>#</a></div><div class='texpara'><div id='atomics.ref.ops-1.sentence-1' class='sentence'>The alignment required for an object to be referenced by an atomic reference,
which is at least <span class='texttt'><span class='keyword'>alignof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span><a class='hidden_link' href='#atomics.ref.ops-1.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='atomics.ref.ops-2'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3206'>#</a></div><div class='texpara'><div id='atomics.ref.ops-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.ref.ops-note-1'>1</a></i>:&ensp;<div id='atomics.ref.ops-2.sentence-1' class='sentence'>Hardware could require an object
referenced by an <span class='texttt'>atomic_<span class='shy'></span>ref</span>
to have stricter alignment (<a href='basic.align' title='6.7.6&emsp;Alignment'>[basic.<span class='shy'></span>align]</a>)
than other objects of type <span class='texttt'>T</span><a class='hidden_link' href='#atomics.ref.ops-2.sentence-1'>.</a></div> <div id='atomics.ref.ops-2.sentence-2' class='sentence'>Further, whether operations on an <span class='texttt'>atomic_<span class='shy'></span>ref</span>
are lock-free could depend on the alignment of the referenced object<a class='hidden_link' href='#atomics.ref.ops-2.sentence-2'>.</a></div> <div id='atomics.ref.ops-2.sentence-3' class='sentence'>For example, lock-free operations on <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>complex<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span></span>
could be supported only if aligned to <span class='texttt'><span class='literal'>2</span><span class='operator'>*</span><span class='keyword'>alignof</span><span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#atomics.ref.ops-2.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<floating-point-type>,is_always_lock_free'><div id='lib:is_always_lock_free,atomic_ref<floating-point-type>'><div id='lib:atomic_ref<integral-type>,is_always_lock_free'><div id='lib:is_always_lock_free,atomic_ref<integral-type>'><div id='lib:atomic_ref<T*>,is_always_lock_free'><div id='lib:is_always_lock_free,atomic_ref<T*>'><div id='lib:atomic_ref,is_always_lock_free'><div id='lib:is_always_lock_free,atomic_ref'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:is_always_lock_free,atomic_ref'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.ref.ops-3'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3228'>#</a></div><div class='texpara'><div id='atomics.ref.ops-3.sentence-1' class='sentence'>The static data member <span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span>
if the <span class='texttt'>atomic_<span class='shy'></span>ref</span> type's operations are always lock-free,
and <span class='texttt'><span class='literal'>false</span></span> otherwise<a class='hidden_link' href='#atomics.ref.ops-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<floating-point-type>,is_lock_free'><div id='lib:is_lock_free,atomic_ref<floating-point-type>'><div id='lib:atomic_ref<integral-type>,is_lock_free'><div id='lib:is_lock_free,atomic_ref<integral-type>'><div id='lib:atomic_ref<T*>,is_lock_free'><div id='lib:is_lock_free,atomic_ref<T*>'><div id='lib:atomic_ref,is_lock_free'><div id='lib:is_lock_free,atomic_ref'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:is_lock_free,atomic_ref'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.ref.ops-4'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3243'>#</a></div><div class='texpara'><div id='atomics.ref.ops-4.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='literal'>true</span></span> if operations on all objects of the type <span class='texttt'>atomic_<span class='shy'></span>ref<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
are lock-free,
<span class='texttt'><span class='literal'>false</span></span> otherwise<a class='hidden_link' href='#atomics.ref.ops-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<floating-point-type>,constructor'><div id='lib:atomic_ref<integral-type>,constructor'><div id='lib:atomic_ref<T*>,constructor'><div id='lib:atomic_ref,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic_ref,constructor'>ðŸ”—</a></div><code class='itemdeclcode'>atomic_ref<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> obj<span class='parenthesis'>)</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.ref.ops-5'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3259'>#</a></div><div class='texpara'><div id='atomics.ref.ops-5.sentence-1' class='sentence'><i >Preconditions</i>: The referenced object is aligned to <span class='texttt'>required_<span class='shy'></span>alignment</span><a class='hidden_link' href='#atomics.ref.ops-5.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.ops-6'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3263'>#</a></div><div class='texpara'><div id='atomics.ref.ops-6.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> references <span class='texttt'>obj</span><a class='hidden_link' href='#atomics.ref.ops-6.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.ops-7'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3267'>#</a></div><div class='texpara'><div id='atomics.ref.ops-7.sentence-1' class='sentence'><i >Throws</i>: Nothing<a class='hidden_link' href='#atomics.ref.ops-7.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<floating-point-type>,constructor_'><div id='lib:atomic_ref<integral-type>,constructor_'><div id='lib:atomic_ref<T*>,constructor_'><div id='lib:atomic_ref,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic_ref,constructor_'>ðŸ”—</a></div><code class='itemdeclcode'>atomic_ref<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span> ref<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.ref.ops-8'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3281'>#</a></div><div class='texpara'><div id='atomics.ref.ops-8.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> references the object referenced by <span class='texttt'>ref</span><a class='hidden_link' href='#atomics.ref.ops-8.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<floating-point-type>,store'><div id='lib:store,atomic_ref<floating-point-type>'><div id='lib:atomic_ref<integral-type>,store'><div id='lib:store,atomic_ref<integral-type>'><div id='lib:atomic_ref<T*>,store'><div id='lib:store,atomic_ref<T*>'><div id='lib:atomic_ref,store'><div id='lib:store,atomic_ref'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:store,atomic_ref'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> store<span class='parenthesis'>(</span>T desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.ref.ops-9'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3295'>#</a></div><div class='texpara'><div id='atomics.ref.ops-9.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>order</span> is
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span>,
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span>, or
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>seq_<span class='shy'></span>cst</span><a class='hidden_link' href='#atomics.ref.ops-9.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.ops-10'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3302'>#</a></div><div class='texpara'><div id='atomics.ref.ops-10.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
with the value of <span class='texttt'>desired</span><a class='hidden_link' href='#atomics.ref.ops-10.sentence-1'>.</a></div> <div id='atomics.ref.ops-10.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#atomics.ref.ops-10.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<floating-point-type>,operator='><div id='lib:operator=,atomic_ref<floating-point-type>'><div id='lib:atomic_ref<integral-type>,operator='><div id='lib:operator=,atomic_ref<integral-type>'><div id='lib:atomic_ref<T*>,operator='><div id='lib:operator=,atomic_ref<T*>'><div id='lib:atomic_ref,operator='><div id='lib:operator=,atomic_ref'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,atomic_ref'>ðŸ”—</a></div><code class='itemdeclcode'>T <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T desired<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.ref.ops-11'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3318'>#</a></div><div class='texpara'><div id='atomics.ref.ops-11.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'>store<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span>;
<span class='keyword'>return</span> desired;
</span></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<floating-point-type>,load'><div id='lib:load,atomic_ref<floating-point-type>'><div id='lib:atomic_ref<integral-type>,load'><div id='lib:load,atomic_ref<integral-type>'><div id='lib:atomic_ref<T*>,load'><div id='lib:load,atomic_ref<T*>'><div id='lib:atomic_ref,load'><div id='lib:load,atomic_ref'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:load,atomic_ref'>ðŸ”—</a></div><code class='itemdeclcode'>T load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.ref.ops-12'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3336'>#</a></div><div class='texpara'><div id='atomics.ref.ops-12.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>order</span> is
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span>,
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>consume</span>,
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>ac<span class='operator'>-</span><br/>quire</span>, or
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>seq_<span class='shy'></span>cst</span><a class='hidden_link' href='#atomics.ref.ops-12.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.ops-13'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3344'>#</a></div><div class='texpara'><div id='atomics.ref.ops-13.sentence-1' class='sentence'><i >Effects</i>: Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#atomics.ref.ops-13.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.ops-14'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3348'>#</a></div><div class='texpara'><div id='atomics.ref.ops-14.sentence-1' class='sentence'><i >Returns</i>: Atomically returns the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span><a class='hidden_link' href='#atomics.ref.ops-14.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<floating-point-type>,operator_floating-point-type'><div id='lib:operator_floating-point-type,atomic_ref<floating-point-type>'><div id='lib:atomic_ref<integral-type>,operator_integral-type'><div id='lib:operator_integral-type,atomic_ref<integral-type>'><div id='lib:atomic_ref<T*>,operator_T*'><div id='lib:operator_T*,atomic_ref<T*>'><div id='lib:atomic_ref,operator_type'><div id='lib:operator_type,atomic_ref'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator_type,atomic_ref'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>operator</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.ref.ops-15'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3362'>#</a></div><div class='texpara'><div id='atomics.ref.ops-15.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> load<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;</span></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<floating-point-type>,exchange'><div id='lib:exchange,atomic_ref<floating-point-type>'><div id='lib:atomic_ref<integral-type>,exchange'><div id='lib:exchange,atomic_ref<integral-type>'><div id='lib:atomic_ref<T*>,exchange'><div id='lib:exchange,atomic_ref<T*>'><div id='lib:atomic_ref,exchange'><div id='lib:exchange,atomic_ref'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:exchange,atomic_ref'>ðŸ”—</a></div><code class='itemdeclcode'>T exchange<span class='parenthesis'>(</span>T desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.ref.ops-16'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3376'>#</a></div><div class='texpara'><div id='atomics.ref.ops-16.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
with <span class='texttt'>desired</span><a class='hidden_link' href='#atomics.ref.ops-16.sentence-1'>.</a></div> <div id='atomics.ref.ops-16.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#atomics.ref.ops-16.sentence-2'>.</a></div> <div id='atomics.ref.ops-16.sentence-3' class='sentence'>This operation is an atomic read-modify-write operation (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)<a class='hidden_link' href='#atomics.ref.ops-16.sentence-3'>.</a></div></div></div></div><div class='para' id='atomics.ref.ops-17'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3383'>#</a></div><div class='texpara'><div id='atomics.ref.ops-17.sentence-1' class='sentence'><i >Returns</i>: Atomically returns the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
immediately before the effects<a class='hidden_link' href='#atomics.ref.ops-17.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<floating-point-type>,compare_exchange_strong'><div id='lib:compare_exchange_strong,atomic_ref<floating-point-type>'><div id='lib:atomic_ref<integral-type>,compare_exchange_strong'><div id='lib:compare_exchange_strong,atomic_ref<integral-type>'><div id='lib:atomic_ref<T*>,compare_exchange_strong'><div id='lib:compare_exchange_strong,atomic_ref<T*>'><div id='lib:atomic_ref,compare_exchange_strong'><div id='lib:compare_exchange_strong,atomic_ref'><div id='lib:atomic_ref<floating-point-type>,compare_exchange_weak'><div id='lib:compare_exchange_weak,atomic_ref<floating-point-type>'><div id='lib:atomic_ref<integral-type>,compare_exchange_weak'><div id='lib:compare_exchange_weak,atomic_ref<integral-type>'><div id='lib:atomic_ref<T*>,compare_exchange_weak'><div id='lib:compare_exchange_weak,atomic_ref<T*>'><div id='lib:atomic_ref,compare_exchange_weak'><div id='lib:compare_exchange_weak,atomic_ref'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:compare_exchange_weak,atomic_ref'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                           memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                             memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

<span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                           memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                             memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.ref.ops-18'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3412'>#</a></div><div class='texpara'><div id='atomics.ref.ops-18.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>failure</span> is
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span>,
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>consume</span>,
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span>, or
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>seq_<span class='shy'></span>cst</span><a class='hidden_link' href='#atomics.ref.ops-18.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.ops-19'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3420'>#</a></div><div class='texpara'><div id='atomics.ref.ops-19.sentence-1' class='sentence'><i >Effects</i>: Retrieves the value in <span class='texttt'>expected</span><a class='hidden_link' href='#atomics.ref.ops-19.sentence-1'>.</a></div> <div id='atomics.ref.ops-19.sentence-2' class='sentence'>It then atomically compares the value representation of
the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span> for equality
with that previously retrieved from <span class='texttt'>expected</span>,
and if <span class='texttt'><span class='literal'>true</span></span>, replaces the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
with that in <span class='texttt'>desired</span><a class='hidden_link' href='#atomics.ref.ops-19.sentence-2'>.</a></div> <div id='atomics.ref.ops-19.sentence-3' class='sentence'>If and only if the comparison is <span class='texttt'><span class='literal'>true</span></span>,
memory is affected according to the value of <span class='texttt'>success</span>, and
if the comparison is <span class='texttt'><span class='literal'>false</span></span>,
memory is affected according to the value of <span class='texttt'>failure</span><a class='hidden_link' href='#atomics.ref.ops-19.sentence-3'>.</a></div> <div id='atomics.ref.ops-19.sentence-4' class='sentence'>When only one <span class='texttt'>memory_<span class='shy'></span>order</span> argument is supplied,
the value of <span class='texttt'>success</span> is <span class='texttt'>order</span>, and
the value of <span class='texttt'>failure</span> is <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span> shall be replaced by
the value <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> and
a value of <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span> shall be replaced by
the value <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span><a class='hidden_link' href='#atomics.ref.ops-19.sentence-4'>.</a></div> <div id='atomics.ref.ops-19.sentence-5' class='sentence'>If and only if the comparison is <span class='texttt'><span class='literal'>false</span></span> then,
after the atomic operation,
the value in <span class='texttt'>expected</span> is replaced by
the value read from the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
during the atomic comparison<a class='hidden_link' href='#atomics.ref.ops-19.sentence-5'>.</a></div> <div id='atomics.ref.ops-19.sentence-6' class='sentence'>If the operation returns <span class='texttt'><span class='literal'>true</span></span>,
these operations are atomic read-modify-write operations (<a href='intro.races' title='6.9.2.2&emsp;Data races'>[intro.<span class='shy'></span>races]</a>)
on the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span><a class='hidden_link' href='#atomics.ref.ops-19.sentence-6'>.</a></div> <div id='atomics.ref.ops-19.sentence-7' class='sentence'>Otherwise, these operations are atomic load operations on that memory<a class='hidden_link' href='#atomics.ref.ops-19.sentence-7'>.</a></div></div></div></div><div class='para' id='atomics.ref.ops-20'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3449'>#</a></div><div class='texpara'><div id='atomics.ref.ops-20.sentence-1' class='sentence'><i >Returns</i>: The result of the comparison<a class='hidden_link' href='#atomics.ref.ops-20.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.ops-21'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3453'>#</a></div><div class='texpara'><div id='atomics.ref.ops-21.sentence-1' class='sentence'><i >Remarks</i>: A weak compare-and-exchange operation may fail spuriously<a class='hidden_link' href='#atomics.ref.ops-21.sentence-1'>.</a></div> <div id='atomics.ref.ops-21.sentence-2' class='sentence'>That is, even when the contents of memory referred to
by <span class='texttt'>expected</span> and <span class='texttt'>ptr</span> are equal,
it may return <span class='texttt'><span class='literal'>false</span></span> and
store back to <span class='texttt'>expected</span> the same memory contents
that were originally there<a class='hidden_link' href='#atomics.ref.ops-21.sentence-2'>.</a></div> <div id='atomics.ref.ops-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.ref.ops-note-2'>2</a></i>:&ensp;<div id='atomics.ref.ops-21.sentence-3' class='sentence'>This spurious failure enables implementation of compare-and-exchange
on a broader class of machines, e.g., load-locked store-conditional machines<a class='hidden_link' href='#atomics.ref.ops-21.sentence-3'>.</a></div> <div id='atomics.ref.ops-21.sentence-4' class='sentence'>A consequence of spurious failure is
that nearly all uses of weak compare-and-exchange will be in a loop<a class='hidden_link' href='#atomics.ref.ops-21.sentence-4'>.</a></div> <div id='atomics.ref.ops-21.sentence-5' class='sentence'>When a compare-and-exchange is in a loop,
the weak version will yield better performance on some platforms<a class='hidden_link' href='#atomics.ref.ops-21.sentence-5'>.</a></div> <div id='atomics.ref.ops-21.sentence-6' class='sentence'>When a weak compare-and-exchange would require a loop and
a strong one would not, the strong one is preferable<a class='hidden_link' href='#atomics.ref.ops-21.sentence-6'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<T>,wait'><div id='lib:wait,atomic_ref<T>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:wait,atomic_ref%3cT%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='atomics.ref.ops-22'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3479'>#</a></div><div class='texpara'><div id='atomics.ref.ops-22.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>order</span> is
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span>,
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>consume</span>,
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>ac<span class='operator'>-</span> <br/>quire</span>, or
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>seq_<span class='shy'></span>cst</span><a class='hidden_link' href='#atomics.ref.ops-22.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.ops-23'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3487'>#</a></div><div class='texpara'><div id='atomics.ref.ops-23.sentence-1' class='sentence'><i >Effects</i>: Repeatedly performs the following steps, in order:
<ul class='itemize'><li id='atomics.ref.ops-23.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#atomics.ref.ops-23.1'>(23.1)</a></div><div class='texpara'><div id='atomics.ref.ops-23.1.sentence-1' class='sentence'>Evaluates <span class='texttt'>load<span class='parenthesis'>(</span>order<span class='parenthesis'>)</span></span> and
  compares its value representation for equality against that of <span class='texttt'>old</span><a class='hidden_link' href='#atomics.ref.ops-23.1.sentence-1'>.</a></div></div></li><li id='atomics.ref.ops-23.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#atomics.ref.ops-23.2'>(23.2)</a></div><div class='texpara'><div id='atomics.ref.ops-23.2.sentence-1' class='sentence'>If they compare unequal, returns<a class='hidden_link' href='#atomics.ref.ops-23.2.sentence-1'>.</a></div></div></li><li id='atomics.ref.ops-23.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#atomics.ref.ops-23.3'>(23.3)</a></div><div class='texpara'><div id='atomics.ref.ops-23.3.sentence-1' class='sentence'>Blocks until it
  is unblocked by an atomic notifying operation or is unblocked spuriously<a class='hidden_link' href='#atomics.ref.ops-23.3.sentence-1'>.</a></div></div></li></ul></div></div></div></div><div class='para' id='atomics.ref.ops-24'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3501'>#</a></div><div class='texpara'><div id='atomics.ref.ops-24.sentence-1' class='sentence'><i >Remarks</i>: This function is an atomic waiting operation (<a href='atomics.wait' title='32.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>)
on atomic object <span class='texttt'><span class='operator'>*</span>ptr</span><a class='hidden_link' href='#atomics.ref.ops-24.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<T>,notify_one'><div id='lib:notify_one,atomic_ref<T>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:notify_one,atomic_ref%3cT%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='atomics.ref.ops-25'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3513'>#</a></div><div class='texpara'><div id='atomics.ref.ops-25.sentence-1' class='sentence'><i >Effects</i>: Unblocks the execution of at least one atomic waiting operation on <span class='texttt'><span class='operator'>*</span>ptr</span>
that is eligible to be unblocked (<a href='atomics.wait' title='32.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>) by this call,
if any such atomic waiting operations exist<a class='hidden_link' href='#atomics.ref.ops-25.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.ops-26'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3519'>#</a></div><div class='texpara'><div id='atomics.ref.ops-26.sentence-1' class='sentence'><i >Remarks</i>: This function is an atomic notifying operation (<a href='atomics.wait' title='32.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>)
on atomic object <span class='texttt'><span class='operator'>*</span>ptr</span><a class='hidden_link' href='#atomics.ref.ops-26.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<T>,notify_all'><div id='lib:notify_all,atomic_ref<T>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:notify_all,atomic_ref%3cT%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='atomics.ref.ops-27'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-27'>27</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3531'>#</a></div><div class='texpara'><div id='atomics.ref.ops-27.sentence-1' class='sentence'><i >Effects</i>: Unblocks the execution of all atomic waiting operations on <span class='texttt'><span class='operator'>*</span>ptr</span>
that are eligible to be unblocked (<a href='atomics.wait' title='32.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>) by this call<a class='hidden_link' href='#atomics.ref.ops-27.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.ops-28'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.ops-28'>28</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3536'>#</a></div><div class='texpara'><div id='atomics.ref.ops-28.sentence-1' class='sentence'><i >Remarks</i>: This function is an atomic notifying operation (<a href='atomics.wait' title='32.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>)
 on atomic object <span class='texttt'><span class='operator'>*</span>ptr</span><a class='hidden_link' href='#atomics.ref.ops-28.sentence-1'>.</a></div></div></div></div></div><div id='atomics.ref.int' class='section'><h4 ><a class='secnum' href='#atomics.ref.int' style='min-width:95pt'>32.5.7.3</a> Specializations for integral types <a class='abbr_ref' href='atomics.ref.int'>[atomics.ref.int]</a></h4><div class='para' id='atomics.ref.int-1'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.int-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3544'>#</a></div><div class='texpara'><div id='atomics.ref.int-1.sentence-1' class='sentence'><a class='index' id='lib:atomic_ref<integral-type>'></a>There are specializations of the <span class='texttt'>atomic_<span class='shy'></span>ref</span> class template
for the integral types
<span class='texttt'><span class='keyword'>char</span></span>,
<span class='texttt'><span class='keyword'>signed</span> <span class='keyword'>char</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>char</span></span>,
<span class='texttt'><span class='keyword'>short</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>short</span></span>,
<span class='texttt'><span class='keyword'>int</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>int</span></span>,
<span class='texttt'><span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>long</span> <span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>long</span> <span class='keyword'>long</span></span>,
<span id=':char8_t'><span class='texttt'><span class='keyword'>char8_<span class='shy'></span>t</span></span></span>,
<span id=':char16_t'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span>,
<span id=':char32_t'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span>,
<span id=':wchar_t'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>,
and any other types needed by the typedefs in the header <a href='cstdint.syn#header:%3ccstdint%3e' title='17.4.1&emsp;Header &lt;cstdint&gt; synopsis&emsp;[cstdint.syn]'><span id='headerref:<cstdint>'><span class='texttt'>&lt;cstdint&gt;</span></span></a><a class='hidden_link' href='#atomics.ref.int-1.sentence-1'>.</a></div> <div id='atomics.ref.int-1.sentence-2' class='sentence'>For each such type <span class='texttt'><i >integral-type</i></span>,
the specialization <span class='texttt'>atomic_<span class='shy'></span>ref<span class='anglebracket'>&lt;</span><i >integral-type</i><span class='anglebracket'>&gt;</span></span> provides
additional atomic operations appropriate to integral types<a class='hidden_link' href='#atomics.ref.int-1.sentence-2'>.</a></div> <div id='atomics.ref.int-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.ref.int-note-1'>1</a></i>:&ensp;<div id='atomics.ref.int-1.sentence-3' class='sentence'>The specialization <span class='texttt'>atomic_<span class='shy'></span>ref<span class='anglebracket'>&lt;</span><span class='keyword'>bool</span><span class='anglebracket'>&gt;</span></span>
uses the primary template ([atomics.<span class='shy'></span>ref.<span class='shy'></span>generic])<a class='hidden_link' href='#atomics.ref.int-1.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic_ref<span class='anglebracket'>&lt;</span><i >integral-type</i><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>private</span><span class='operator'>:</span>
    <i >integral-type</i><span class='operator'>*</span> ptr;         <span class='comment'>// <i >exposition only</i></span>

  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> <i >integral-type</i>;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> value_type;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> size_t required_alignment <span class='operator'>=</span> <a class='index' id=':required_alignment_for_atomic_ref_type&#39;s_operations_'></a><i >implementation-defined</i>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <a class='index' id=':whether_a_given_atomic_ref_type&#39;s_operations_are_always_lock_free_'></a><i >implementation-defined</i>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>explicit</span> atomic_ref<span class='parenthesis'>(</span><i >integral-type</i><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    atomic_ref<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic_ref<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span><i >integral-type</i>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <i >integral-type</i><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <i >integral-type</i> exchange<span class='parenthesis'>(</span><i >integral-type</i>,
                           memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><i >integral-type</i><span class='operator'>&amp;</span>, <i >integral-type</i>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><i >integral-type</i><span class='operator'>&amp;</span>, <i >integral-type</i>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><i >integral-type</i><span class='operator'>&amp;</span>, <i >integral-type</i>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><i >integral-type</i><span class='operator'>&amp;</span>, <i >integral-type</i>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <i >integral-type</i> fetch_add<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_sub<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_and<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_or<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_xor<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_max<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_min<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>&amp;</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>|</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>^</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><i >integral-type</i>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div></div><div class='para' id='atomics.ref.int-2'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.int-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3638'>#</a></div><div class='texpara'><div id='atomics.ref.int-2.sentence-1' class='sentence'>Descriptions are provided below only for members
that differ from the primary template<a class='hidden_link' href='#atomics.ref.int-2.sentence-1'>.</a></div></div></div><div class='para' id='atomics.ref.int-3'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.int-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3642'>#</a></div><div class='texpara'><div id='atomics.ref.int-3.sentence-1' class='sentence'>The following operations perform arithmetic computations<a class='hidden_link' href='#atomics.ref.int-3.sentence-1'>.</a></div> <div id='atomics.ref.int-3.sentence-2' class='sentence'>The correspondence among key, operator, and computation is specified
in Table <a href='atomics.types.int#tab:atomic.types.int.comp' title='Table 150: Atomic arithmetic computations'>150</a><a class='hidden_link' href='#atomics.ref.int-3.sentence-2'>.</a></div></div></div><div class='texpara'><div id='lib:atomic_ref<integral-type>,fetch_xor'><div id='lib:fetch_xor,atomic_ref<integral-type>'><div id='lib:atomic_ref<integral-type>,fetch_sub'><div id='lib:fetch_sub,atomic_ref<integral-type>'><div id='lib:atomic_ref<integral-type>,fetch_or'><div id='lib:fetch_or,atomic_ref<integral-type>'><div id='lib:atomic_ref<integral-type>,fetch_min'><div id='lib:fetch_min,atomic_ref<integral-type>'><div id='lib:atomic_ref<integral-type>,fetch_max'><div id='lib:fetch_max,atomic_ref<integral-type>'><div id='lib:atomic_ref<integral-type>,fetch_and'><div id='lib:fetch_and,atomic_ref<integral-type>'><div id='lib:atomic_ref<integral-type>,fetch_add'><div id='lib:fetch_add,atomic_ref<integral-type>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:fetch_add,atomic_ref%3cintegral-type%3e'>ðŸ”—</a></div><code class='itemdeclcode'><i >integral-type</i> fetch_<i >key</i><span class='parenthesis'>(</span><i >integral-type</i> operand,
  memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.ref.int-4'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.int-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3660'>#</a></div><div class='texpara'><div id='atomics.ref.int-4.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span> with
the result of the computation applied to the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
and the given operand<a class='hidden_link' href='#atomics.ref.int-4.sentence-1'>.</a></div> <div id='atomics.ref.int-4.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#atomics.ref.int-4.sentence-2'>.</a></div> <div id='atomics.ref.int-4.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.races' title='6.9.2.2&emsp;Data races'>[intro.<span class='shy'></span>races]</a>)<a class='hidden_link' href='#atomics.ref.int-4.sentence-3'>.</a></div></div></div></div><div class='para' id='atomics.ref.int-5'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.int-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3668'>#</a></div><div class='texpara'><div id='atomics.ref.int-5.sentence-1' class='sentence'><i >Returns</i>: Atomically, the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
immediately before the effects<a class='hidden_link' href='#atomics.ref.int-5.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.int-6'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.int-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3673'>#</a></div><div class='texpara'><div id='atomics.ref.int-6.sentence-1' class='sentence'><a class='index' id=':signed_integer_representation,two&#39;s_complement'></a><i >Remarks</i>: Except for <span class='texttt'>fetch_<span class='shy'></span>max</span> and <span class='texttt'>fetch_<span class='shy'></span>min</span>, for signed integer types
the result is as if the object value and parameters
were converted to their corresponding unsigned types,
the computation performed on those types, and
the result converted back to the signed type<a class='hidden_link' href='#atomics.ref.int-6.sentence-1'>.</a></div> <div id='atomics.ref.int-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.ref.int-note-2'>2</a></i>:&ensp;<div id='atomics.ref.int-6.sentence-2' class='sentence'>There are no undefined results arising from the computation<a class='hidden_link' href='#atomics.ref.int-6.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='atomics.ref.int-7'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.int-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3685'>#</a></div><div class='texpara'><div id='atomics.ref.int-7.sentence-1' class='sentence'>For <span class='texttt'>fetch_<span class='shy'></span>max</span> and <span class='texttt'>fetch_<span class='shy'></span>min</span>, the maximum and minimum
computation is performed as if by <span class='texttt'>max</span> and <span class='texttt'>min</span> algorithms
 (<a href='alg.min.max' title='26.8.9&emsp;Minimum and maximum'>[alg.<span class='shy'></span>min.<span class='shy'></span>max]</a>), respectively, with the object value and the first
parameter as the arguments<a class='hidden_link' href='#atomics.ref.int-7.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<integral-type>,operator^='><div id='lib:operator^=,atomic_ref<integral-type>'><div id='lib:atomic_ref<integral-type>,operator|='><div id='lib:operator|=,atomic_ref<integral-type>'><div id='lib:atomic_ref<integral-type>,operator&amp;='><div id='lib:operator&amp;=,atomic_ref<integral-type>'><div id='lib:atomic_ref<integral-type>,operator-='><div id='lib:operator-=,atomic_ref<integral-type>'><div id='lib:atomic_ref<integral-type>,operator+='><div id='lib:operator+=,atomic_ref<integral-type>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator+=,atomic_ref%3cintegral-type%3e'>ðŸ”—</a></div><code class='itemdeclcode'><i >integral-type</i> <span class='keyword'>operator</span> <i >op</i><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i> operand<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.ref.int-8'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.int-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3702'>#</a></div><div class='texpara'><div id='atomics.ref.int-8.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span><i >key</i><span class='parenthesis'>(</span>operand<span class='parenthesis'>)</span> <i >op</i> operand;</span></div></div></div></div></div><div id='atomics.ref.float' class='section'><h4 ><a class='secnum' href='#atomics.ref.float' style='min-width:95pt'>32.5.7.4</a> Specializations for floating-point types <a class='abbr_ref' href='atomics.ref.float'>[atomics.ref.float]</a></h4><div class='para' id='atomics.ref.float-1'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.float-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3710'>#</a></div><div class='texpara'><div id='atomics.ref.float-1.sentence-1' class='sentence'><a class='index' id='lib:atomic_ref<floating-point-type>'></a>There are specializations of the <span class='texttt'>atomic_<span class='shy'></span>ref</span> class template
for all cv-unqualified floating-point types<a class='hidden_link' href='#atomics.ref.float-1.sentence-1'>.</a></div> <div id='atomics.ref.float-1.sentence-2' class='sentence'>For each such type <span class='texttt'><i >floating-point-type</i></span>,
the specialization <span class='texttt'>atomic_<span class='shy'></span>ref<span class='anglebracket'>&lt;</span><i >floating-point</i><span class='anglebracket'>&gt;</span></span> provides
additional atomic operations appropriate to floating-point types<a class='hidden_link' href='#atomics.ref.float-1.sentence-2'>.</a></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic_ref<span class='anglebracket'>&lt;</span><i >floating-point-type</i><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>private</span><span class='operator'>:</span>
    <i >floating-point-type</i><span class='operator'>*</span> ptr;   <span class='comment'>// <i >exposition only</i></span>

  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> <i >floating-point-type</i>;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> value_type;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> size_t required_alignment <span class='operator'>=</span> <a class='index' id=':required_alignment_for_atomic_ref_type&#39;s_operations__'></a><i >implementation-defined</i>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <a class='index' id=':whether_a_given_atomic_ref_type&#39;s_operations_are_always_lock_free__'></a><i >implementation-defined</i>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>explicit</span> atomic_ref<span class='parenthesis'>(</span><i >floating-point-type</i><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    atomic_ref<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic_ref<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span><i >floating-point-type</i>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >floating-point-type</i><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <i >floating-point-type</i><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <i >floating-point-type</i> exchange<span class='parenthesis'>(</span><i >floating-point-type</i>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><i >floating-point-type</i><span class='operator'>&amp;</span>, <i >floating-point-type</i>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><i >floating-point-type</i><span class='operator'>&amp;</span>, <i >floating-point-type</i>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><i >floating-point-type</i><span class='operator'>&amp;</span>, <i >floating-point-type</i>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><i >floating-point-type</i><span class='operator'>&amp;</span>, <i >floating-point-type</i>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <i >floating-point-type</i> fetch_add<span class='parenthesis'>(</span><i >floating-point-type</i>,
                                  memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> fetch_sub<span class='parenthesis'>(</span><i >floating-point-type</i>,
                                  memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <i >floating-point-type</i> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >floating-point-type</i><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >floating-point-type</i><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><i >floating-point-type</i>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div></div><div class='para' id='atomics.ref.float-2'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.float-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3767'>#</a></div><div class='texpara'><div id='atomics.ref.float-2.sentence-1' class='sentence'>Descriptions are provided below only for members
that differ from the primary template<a class='hidden_link' href='#atomics.ref.float-2.sentence-1'>.</a></div></div></div><div class='para' id='atomics.ref.float-3'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.float-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3771'>#</a></div><div class='texpara'><div id='atomics.ref.float-3.sentence-1' class='sentence'>The following operations perform arithmetic computations<a class='hidden_link' href='#atomics.ref.float-3.sentence-1'>.</a></div> <div id='atomics.ref.float-3.sentence-2' class='sentence'>The correspondence among key, operator, and computation is specified
in Table <a href='atomics.types.int#tab:atomic.types.int.comp' title='Table 150: Atomic arithmetic computations'>150</a><a class='hidden_link' href='#atomics.ref.float-3.sentence-2'>.</a></div></div></div><div class='texpara'><div id='lib:atomic_ref<floating-point-type>,fetch_sub'><div id='lib:fetch_sub,atomic_ref<floating-point-type>'><div id='lib:atomic_ref<floating-point-type>,fetch_add'><div id='lib:fetch_add,atomic_ref<floating-point-type>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:fetch_add,atomic_ref%3cfloating-point-type%3e'>ðŸ”—</a></div><code class='itemdeclcode'><i >floating-point-type</i> fetch_<i >key</i><span class='parenthesis'>(</span><i >floating-point-type</i> operand,
                          memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.ref.float-4'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.float-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3784'>#</a></div><div class='texpara'><div id='atomics.ref.float-4.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span> with
the result of the computation applied to the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
and the given operand<a class='hidden_link' href='#atomics.ref.float-4.sentence-1'>.</a></div> <div id='atomics.ref.float-4.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#atomics.ref.float-4.sentence-2'>.</a></div> <div id='atomics.ref.float-4.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.races' title='6.9.2.2&emsp;Data races'>[intro.<span class='shy'></span>races]</a>)<a class='hidden_link' href='#atomics.ref.float-4.sentence-3'>.</a></div></div></div></div><div class='para' id='atomics.ref.float-5'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.float-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3792'>#</a></div><div class='texpara'><div id='atomics.ref.float-5.sentence-1' class='sentence'><i >Returns</i>: Atomically, the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
immediately before the effects<a class='hidden_link' href='#atomics.ref.float-5.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.float-6'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.float-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3797'>#</a></div><div class='texpara'><div id='atomics.ref.float-6.sentence-1' class='sentence'><i >Remarks</i>: If the result is not a representable value for its type (<a href='expr.pre' title='7.1&emsp;Preamble'>[expr.<span class='shy'></span>pre]</a>),
the result is unspecified,
but the operations otherwise have no undefined behavior<a class='hidden_link' href='#atomics.ref.float-6.sentence-1'>.</a></div> <div id='atomics.ref.float-6.sentence-2' class='sentence'>Atomic arithmetic operations on <span class='texttt'><i >floating-point-type</i></span> should conform to
the <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>numeric_<span class='shy'></span>limits<span class='anglebracket'>&lt;</span><i >floating-point-type</i><span class='anglebracket'>&gt;</span></span> traits
associated with the floating-point type (<a href='limits.syn' title='17.3.3&emsp;Header &lt;limits&gt; synopsis'>[limits.<span class='shy'></span>syn]</a>)<a class='hidden_link' href='#atomics.ref.float-6.sentence-2'>.</a></div> <div id='atomics.ref.float-6.sentence-3' class='sentence'>The floating-point environment (<a href='cfenv' title='29.3&emsp;The floating-point environment'>[cfenv]</a>)
for atomic arithmetic operations on <span class='texttt'><i >floating-point-type</i></span>
may be different than the calling thread's floating-point environment<a class='hidden_link' href='#atomics.ref.float-6.sentence-3'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<floating-point-type>,operator-='><div id='lib:operator-=,atomic_ref<floating-point-type>'><div id='lib:atomic_ref<floating-point-type>,operator+='><div id='lib:operator+=,atomic_ref<floating-point-type>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator+=,atomic_ref%3cfloating-point-type%3e'>ðŸ”—</a></div><code class='itemdeclcode'><i >floating-point-type</i> <span class='keyword'>operator</span> <i >op</i><span class='operator'>=</span><span class='parenthesis'>(</span><i >floating-point-type</i> operand<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.ref.float-7'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.float-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3817'>#</a></div><div class='texpara'><div id='atomics.ref.float-7.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span><i >key</i><span class='parenthesis'>(</span>operand<span class='parenthesis'>)</span> <i >op</i> operand;</span></div></div></div></div></div><div id='atomics.ref.pointer' class='section'><h4 ><a class='secnum' href='#atomics.ref.pointer' style='min-width:95pt'>32.5.7.5</a> Partial specialization for pointers <a class='abbr_ref' href='atomics.ref.pointer'>[atomics.ref.pointer]</a></h4><div class='texpara'><a class='index' id='lib:atomic_ref<T*>'></a>
<span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic_ref<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>private</span><span class='operator'>:</span>
    T<span class='operator'>*</span><span class='operator'>*</span> ptr;        <span class='comment'>// <i >exposition only</i></span>

  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> T<span class='operator'>*</span>;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> ptrdiff_t;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> size_t required_alignment <span class='operator'>=</span> <a class='index' id=':required_alignment_for_atomic_ref_type&#39;s_operations___'></a><i >implementation-defined</i>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <a class='index' id=':whether_a_given_atomic_ref_type&#39;s_operations_are_always_lock_free___'></a><i >implementation-defined</i>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>explicit</span> atomic_ref<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    atomic_ref<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic_ref<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic_ref<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> T<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    T<span class='operator'>*</span> exchange<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    T<span class='operator'>*</span> fetch_add<span class='parenthesis'>(</span>difference_type, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> fetch_sub<span class='parenthesis'>(</span>difference_type, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> fetch_max<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> fetch_min<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span>difference_type<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span>difference_type<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div><div class='para' id='atomics.ref.pointer-1'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.pointer-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3878'>#</a></div><div class='texpara'><div id='atomics.ref.pointer-1.sentence-1' class='sentence'>Descriptions are provided below only for members
that differ from the primary template<a class='hidden_link' href='#atomics.ref.pointer-1.sentence-1'>.</a></div></div></div><div class='para' id='atomics.ref.pointer-2'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.pointer-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3882'>#</a></div><div class='texpara'><div id='atomics.ref.pointer-2.sentence-1' class='sentence'>The following operations perform arithmetic computations<a class='hidden_link' href='#atomics.ref.pointer-2.sentence-1'>.</a></div> <div id='atomics.ref.pointer-2.sentence-2' class='sentence'>The correspondence among key, operator, and computation is specified
in Table <a href='atomics.types.pointer#tab:atomic.types.pointer.comp' title='Table 151: Atomic pointer computations'>151</a><a class='hidden_link' href='#atomics.ref.pointer-2.sentence-2'>.</a></div></div></div><div class='texpara'><div id='lib:atomic_ref<T*>,fetch_min'><div id='lib:fetch_min,atomic_ref<T*>'><div id='lib:atomic_ref<T*>,fetch_max'><div id='lib:fetch_max,atomic_ref<T*>'><div id='lib:atomic_ref<T*>,fetch_sub'><div id='lib:fetch_sub,atomic_ref<T*>'><div id='lib:atomic_ref<T*>,fetch_add'><div id='lib:fetch_add,atomic_ref<T*>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:fetch_add,atomic_ref%3cT*%3e'>ðŸ”—</a></div><code class='itemdeclcode'>T<span class='operator'>*</span> fetch_<i >key</i><span class='parenthesis'>(</span>difference_type operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.ref.pointer-3'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.pointer-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3896'>#</a></div><div class='texpara'><div id='atomics.ref.pointer-3.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>T</span> is a complete object type<a class='hidden_link' href='#atomics.ref.pointer-3.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.pointer-4'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.pointer-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3900'>#</a></div><div class='texpara'><div id='atomics.ref.pointer-4.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span> with
the result of the computation applied to the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
and the given operand<a class='hidden_link' href='#atomics.ref.pointer-4.sentence-1'>.</a></div> <div id='atomics.ref.pointer-4.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#atomics.ref.pointer-4.sentence-2'>.</a></div> <div id='atomics.ref.pointer-4.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.races' title='6.9.2.2&emsp;Data races'>[intro.<span class='shy'></span>races]</a>)<a class='hidden_link' href='#atomics.ref.pointer-4.sentence-3'>.</a></div></div></div></div><div class='para' id='atomics.ref.pointer-5'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.pointer-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3908'>#</a></div><div class='texpara'><div id='atomics.ref.pointer-5.sentence-1' class='sentence'><i >Returns</i>: Atomically, the value referenced by <span class='texttt'><span class='operator'>*</span>ptr</span>
immediately before the effects<a class='hidden_link' href='#atomics.ref.pointer-5.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.pointer-6'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.pointer-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3913'>#</a></div><div class='texpara'><div id='atomics.ref.pointer-6.sentence-1' class='sentence'><i >Remarks</i>: The result may be an undefined address,
but the operations otherwise have no undefined behavior<a class='hidden_link' href='#atomics.ref.pointer-6.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.ref.pointer-7'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.pointer-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3918'>#</a></div><div class='texpara'><div id='atomics.ref.pointer-7.sentence-1' class='sentence'>For <span class='texttt'>fetch_<span class='shy'></span>max</span> and <span class='texttt'>fetch_<span class='shy'></span>min</span>, the maximum and minimum
computation is performed as if by <span class='texttt'>max</span> and <span class='texttt'>min</span>
algorithms (<a href='alg.min.max' title='26.8.9&emsp;Minimum and maximum'>[alg.<span class='shy'></span>min.<span class='shy'></span>max]</a>), respectively, with the object value and the first
parameter as the arguments<a class='hidden_link' href='#atomics.ref.pointer-7.sentence-1'>.</a></div></div><div class='texpara'><div id='atomics.ref.pointer-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.ref.pointer-note-1'>1</a></i>:&ensp;<div id='atomics.ref.pointer-7.sentence-2' class='sentence'>If the pointers point to different complete objects (or subobjects thereof),
the <span class='texttt'><span class='anglebracket'>&lt;</span></span> operator does not establish a strict weak ordering
(Table <a href='utility.arg.requirements#tab:cpp17.lessthancomparable' title='Table 29: Cpp17LessThanComparable requirements'>29</a>, <a href='expr.rel' title='7.6.9&emsp;Relational operators'>[expr.<span class='shy'></span>rel]</a>)<a class='hidden_link' href='#atomics.ref.pointer-7.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<T*>,operator-='><div id='lib:operator-=,atomic_ref<T*>'><div id='lib:atomic_ref<T*>,operator+='><div id='lib:operator+=,atomic_ref<T*>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator+=,atomic_ref%3cT*%3e'>ðŸ”—</a></div><code class='itemdeclcode'>T<span class='operator'>*</span> <span class='keyword'>operator</span> <i >op</i><span class='operator'>=</span><span class='parenthesis'>(</span>difference_type operand<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.ref.pointer-8'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.pointer-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3940'>#</a></div><div class='texpara'><div id='atomics.ref.pointer-8.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span><i >key</i><span class='parenthesis'>(</span>operand<span class='parenthesis'>)</span> <i >op</i> operand;</span></div></div></div></div></div><div id='atomics.ref.memop' class='section'><h4 ><a class='secnum' href='#atomics.ref.memop' style='min-width:95pt'>32.5.7.6</a> Member operators
                          common to integers and pointers to objects <a class='abbr_ref' href='atomics.ref.memop'>[atomics.ref.memop]</a></h4><div class='texpara'><div id='lib:atomic_ref<integral-type>,operator++'><div id='lib:operator++,atomic_ref<integral-type>'><div id='lib:atomic_ref<T*>,operator++'><div id='lib:operator++,atomic_ref<T*>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator++,atomic_ref%3cT*%3e'>ðŸ”—</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.ref.memop-1'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.memop-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3956'>#</a></div><div class='texpara'><div id='atomics.ref.memop-1.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span>add<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;</span></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<integral-type>,operator--'><div id='lib:operator--,atomic_ref<integral-type>'><div id='lib:atomic_ref<T*>,operator--'><div id='lib:operator--,atomic_ref<T*>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator--,atomic_ref%3cT*%3e'>ðŸ”—</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.ref.memop-2'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.memop-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3968'>#</a></div><div class='texpara'><div id='atomics.ref.memop-2.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span>sub<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;</span></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<integral-type>,operator++_'><div id='lib:operator++,atomic_ref<integral-type>_'><div id='lib:atomic_ref<T*>,operator++_'><div id='lib:operator++,atomic_ref<T*>_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator++,atomic_ref%3cT*%3e_'>ðŸ”—</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.ref.memop-3'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.memop-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3980'>#</a></div><div class='texpara'><div id='atomics.ref.memop-3.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span>add<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='literal'>1</span>;</span></div></div></div></div><div class='texpara'><div id='lib:atomic_ref<integral-type>,operator--_'><div id='lib:operator--,atomic_ref<integral-type>_'><div id='lib:atomic_ref<T*>,operator--_'><div id='lib:operator--,atomic_ref<T*>_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator--,atomic_ref%3cT*%3e_'>ðŸ”—</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.ref.memop-4'><div class='marginalizedparent'><a class='marginalized' href='#atomics.ref.memop-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/threads.tex#L3992'>#</a></div><div class='texpara'><div id='atomics.ref.memop-4.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span>sub<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span> <span class='operator'>-</span> <span class='literal'>1</span>;</span></div></div></div></div></div></div></body></html>