<!DOCTYPE html><html lang='en'><head><title>[diff.cpp23]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='annexnum' style='min-width:50pt'>Annex C&emsp;(informative)</a> Compatibility <a class='abbr_ref' href='./#diff'>[diff]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>C.1</a> C++ and ISO C++ 2023 <a class='abbr_ref'>[diff.cpp23]</a></h2><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:80pt'>C.1.1</a> General <a class='abbr_ref' href='diff.cpp23.general'>[diff.cpp23.general]</a></h3><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/compatibility.tex#L8'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'><a class='index' id=':summary,compatibility_with_ISO_C++_2023'></a>Subclause [diff.<span class='shy'></span>cpp23] lists the differences between C++ and
ISO C++ 2023 (ISO/IEC 14882:2023, <i >Programming Languages â€” C++</i>),
by the chapters of this document<a class='hidden_link' href='#general-1.sentence-1'>.</a></div></div></div></div><div id='expr' class='section'><h3 ><a class='secnum' href='#expr' style='min-width:80pt'>C.1.2</a> <a href='expr' title='7&emsp;Expressions'>[expr]</a>: expressions <a class='abbr_ref' href='diff.cpp23.expr'>[diff.cpp23.expr]</a></h3><div class='para' id='expr-1'><div class='marginalizedparent'><a class='marginalized' href='#expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/compatibility.tex#L16'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='expr.arith.conv'>[expr.<span class='shy'></span>arith.<span class='shy'></span>conv]</a>
<br/> <div id='expr-1.sentence-1' class='sentence'><b>Change:</b> Operations mixing a value of an enumeration type and a value of a different
enumeration type or of a floating-point type are no longer valid<a class='hidden_link' href='#expr-1.sentence-1'>.</a></div> <br/> <div id='expr-1.sentence-2' class='sentence'><b>Rationale:</b> Reinforcing type safety<a class='hidden_link' href='#expr-1.sentence-2'>.</a></div> <br/> <div id='expr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2023 program that performs operations mixing a value of an
enumeration type and a value of a different enumeration type or of a
floating-point type is ill-formed<a class='hidden_link' href='#expr-1.sentence-3'>.</a></div> <div id='expr-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>enum</span> E1 <span class='curlybracket'>{</span> e <span class='curlybracket'>}</span>;
<span class='keyword'>enum</span> E2 <span class='curlybracket'>{</span> f <span class='curlybracket'>}</span>;
<span class='keyword'>bool</span> b <span class='operator'>=</span> e <span class='anglebracket'>&lt;</span><span class='operator'>=</span> <span class='literal'>3.7</span>;      <span class='comment'>// ill-formed; previously well-formed</span>
<span class='keyword'>int</span>  k <span class='operator'>=</span> f <span class='operator'>-</span> e;         <span class='comment'>// ill-formed; previously well-formed</span>
<span class='keyword'>auto</span> x <span class='operator'>=</span> <span class='literal'>true</span> <span class='operator'>?</span> e <span class='operator'>:</span> f;  <span class='comment'>// ill-formed; previously well-formed</span>
</span></div></div></div></div><div id='dcl.dcl' class='section'><h3 ><a class='secnum' href='#dcl.dcl' style='min-width:80pt'>C.1.3</a> <a href='dcl.dcl' title='9&emsp;Declarations'>[dcl.<span class='shy'></span>dcl]</a>: Declarations <a class='abbr_ref' href='diff.cpp23.dcl.dcl'>[diff.cpp23.dcl.dcl]</a></h3><div class='para' id='dcl.dcl-1'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/compatibility.tex#L37'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.list'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>
<br/> <div id='dcl.dcl-1.sentence-1' class='sentence'><b>Change:</b> Pointer comparisons between <span class='texttt'>initializer_<span class='shy'></span>list</span> objects' backing arrays
are unspecified<a class='hidden_link' href='#dcl.dcl-1.sentence-1'>.</a></div> <br/> <div id='dcl.dcl-1.sentence-2' class='sentence'><b>Rationale:</b> Permit the implementation to store backing arrays in static read-only memory<a class='hidden_link' href='#dcl.dcl-1.sentence-2'>.</a></div> <br/> <div id='dcl.dcl-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2023 code
that relies on the result of pointer comparison between backing arrays
may change behavior<a class='hidden_link' href='#dcl.dcl-1.sentence-3'>.</a></div> <div id='dcl.dcl-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>bool</span> ne<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> a, std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> a<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> b<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='literal'>1</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>bool</span> b <span class='operator'>=</span> ne<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span>, <span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;    <span class='comment'>// unspecified result; previously <span class='tcode_in_codeblock'>false</span></span>
</span></div></div></div><div class='para' id='dcl.dcl-2'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/compatibility.tex#L55'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.array'>[dcl.<span class='shy'></span>array]</a>
<br/> <div id='dcl.dcl-2.sentence-1' class='sentence'><b>Change:</b> Previously, <span class='texttt'>T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='squarebracket'>[</span>n<span class='squarebracket'>]</span></span> would declare a pack of function parameters<a class='hidden_link' href='#dcl.dcl-2.sentence-1'>.</a></div> <div id='dcl.dcl-2.sentence-2' class='sentence'><span class='texttt'>T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='squarebracket'>[</span>n<span class='squarebracket'>]</span></span> is now a <a href='dcl.type.pack.index#nt:pack-index-specifier' title='9.2.9.4&emsp;Pack indexing specifier&emsp;[dcl.type.pack.index]'><span id='ntref:pack-index-specifier'><span class='textsf'><i >pack-index-specifier</i></span></span></a><a class='hidden_link' href='#dcl.dcl-2.sentence-2'>.</a></div> <br/> <div id='dcl.dcl-2.sentence-3' class='sentence'><b>Rationale:</b> Improve the handling of packs<a class='hidden_link' href='#dcl.dcl-2.sentence-3'>.</a></div> <br/> <div id='dcl.dcl-2.sentence-4' class='sentence'><b>Effect on original feature:</b> Valid C++ 2023 code that declares a pack of parameters
without specifying a <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id'><span class='textsf'><i >declarator-id</i></span></span></a> becomes ill-formed<a class='hidden_link' href='#dcl.dcl-2.sentence-4'>.</a></div> <div id='dcl.dcl-2.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> ptr<span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>nullptr</span>, <span class='literal'>nullptr</span><span class='parenthesis'>)</span>;     <span class='comment'>// ill-formed, previously <span class='tcode_in_codeblock'>void f&lt;int, double&gt;(int [1], double [1])</span></span>
  g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>nullptr</span>, <span class='literal'>nullptr</span><span class='parenthesis'>)</span>;     <span class='comment'>// ok</span>
<span class='curlybracket'>}</span>
</span></div></div></div></div><div id='library' class='section'><h3 ><a class='secnum' href='#library' style='min-width:80pt'>C.1.4</a> <a href='library' title='16&emsp;Library introduction'>[library]</a>: library introduction <a class='abbr_ref' href='diff.cpp23.library'>[diff.cpp23.library]</a></h3><div class='para' id='library-1'><div class='marginalizedparent'><a class='marginalized' href='#library-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/compatibility.tex#L78'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='headers'>[headers]</a>
<br/> <div id='library-1.sentence-1' class='sentence'><b>Change:</b> New headers<a class='hidden_link' href='#library-1.sentence-1'>.</a></div> <br/> <div id='library-1.sentence-2' class='sentence'><b>Rationale:</b> New functionality<a class='hidden_link' href='#library-1.sentence-2'>.</a></div> <br/> <div id='library-1.sentence-3' class='sentence'><b>Effect on original feature:</b> The following C++ headers are new:
<a href='debugging.syn#header:%3cdebugging%3e' title='22.16.2&emsp;Header &lt;debugging&gt; synopsis&emsp;[debugging.syn]'><span id='headerref:<debugging>'><span class='texttt'>&lt;debugging&gt;</span></span></a>,
<a href='hazard.pointer.syn#header:%3chazard_pointer%3e' title='33.11.3.2&emsp;Header &lt;hazard_&shy;pointer&gt; synopsis&emsp;[hazard.pointer.syn]'><span id='headerref:<hazard_pointer>'><span class='texttt'>&lt;hazard_<span class='shy'></span>pointer&gt;</span></span></a>,
<a href='linalg.syn#header:%3clinalg%3e' title='28.9.2&emsp;Header &lt;linalg&gt; synopsis&emsp;[linalg.syn]'><span id='headerref:<linalg>'><span class='texttt'>&lt;linalg&gt;</span></span></a>,
<a href='rcu.syn#header:%3crcu%3e' title='33.11.2.2&emsp;Header &lt;rcu&gt; synopsis&emsp;[rcu.syn]'><span id='headerref:<rcu>'><span class='texttt'>&lt;rcu&gt;</span></span></a>, and
<a href='text.encoding.syn#header:%3ctext_encoding%3e' title='30.6.1&emsp;Header &lt;text_&shy;encoding&gt; synopsis&emsp;[text.encoding.syn]'><span id='headerref:<text_encoding>'><span class='texttt'>&lt;text_<span class='shy'></span>encoding&gt;</span></span></a><a class='hidden_link' href='#library-1.sentence-3'>.</a></div> <div id='library-1.sentence-4' class='sentence'>Valid C++ 2023 code that <span class='texttt'><span class='preprocessordirective'>#include</span></span>s headers with these names may be
invalid in this revision of C++<a class='hidden_link' href='#library-1.sentence-4'>.</a></div></div></div></div><div id='strings' class='section'><h3 ><a class='secnum' href='#strings' style='min-width:80pt'>C.1.5</a> <a href='strings' title='23&emsp;Strings library'>[strings]</a>: strings library <a class='abbr_ref' href='diff.cpp23.strings'>[diff.cpp23.strings]</a></h3><div class='para' id='strings-1'><div class='marginalizedparent'><a class='marginalized' href='#strings-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/compatibility.tex#L95'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='string.conversions'>[string.<span class='shy'></span>conversions]</a>
<br/> <div id='strings-1.sentence-1' class='sentence'><b>Change:</b> Output of floating-point overloads of <span class='texttt'>to_<span class='shy'></span>string</span> and <span class='texttt'>to_<span class='shy'></span>wstring</span><a class='hidden_link' href='#strings-1.sentence-1'>.</a></div> <br/> <div id='strings-1.sentence-2' class='sentence'><b>Rationale:</b> Prevent loss of information and improve consistency with other formatting
facilities<a class='hidden_link' href='#strings-1.sentence-2'>.</a></div> <br/> <div id='strings-1.sentence-3' class='sentence'><b>Effect on original feature:</b> <span class='texttt'>to_<span class='shy'></span>string</span> and <span class='texttt'>to_<span class='shy'></span>wstring</span> function calls that take
floating-point arguments may produce a different output<a class='hidden_link' href='#strings-1.sentence-3'>.</a></div> <div id='strings-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>auto</span> s <span class='operator'>=</span> std<span class='operator'>::</span>to_string<span class='parenthesis'>(</span><span class='literal'>1e-7</span><span class='parenthesis'>)</span>;  <span class='comment'>// <span class='tcode_in_codeblock'>"1e-07"</span></span>
                                <span class='comment'>// previously <span class='tcode_in_codeblock'>"0.000000"</span> with <span class='tcode_in_codeblock'>'.'</span> possibly</span>
                                <span class='comment'>// changed according to the global C locale</span>
</span></div></div></div></div><div id='containers' class='section'><h3 ><a class='secnum' href='#containers' style='min-width:80pt'>C.1.6</a> <a href='containers' title='24&emsp;Containers library'>[containers]</a>: containers library <a class='abbr_ref' href='diff.cpp23.containers'>[diff.cpp23.containers]</a></h3><div class='para' id='containers-1'><div class='marginalizedparent'><a class='marginalized' href='#containers-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/compatibility.tex#L113'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='span.overview'>[span.<span class='shy'></span>overview]</a>
<br/> <div id='containers-1.sentence-1' class='sentence'><b>Change:</b> <span class='texttt'>span<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> T<span class='anglebracket'>&gt;</span></span> is constructible from <span class='texttt'>initializer_<span class='shy'></span>list<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#containers-1.sentence-1'>.</a></div> <br/> <div id='containers-1.sentence-2' class='sentence'><b>Rationale:</b> Permit passing a braced initializer list to a function taking <span class='texttt'>span</span><a class='hidden_link' href='#containers-1.sentence-2'>.</a></div> <br/> <div id='containers-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2023 code that relies on the lack of this constructor
may refuse to compile, or change behavior in this revision of C++<a class='hidden_link' href='#containers-1.sentence-3'>.</a></div> <div id='containers-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>void</span> one<span class='parenthesis'>(</span>pair<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;       <span class='comment'>// #1</span>
<span class='keyword'>void</span> one<span class='parenthesis'>(</span>span<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;      <span class='comment'>// #2</span>
<span class='keyword'>void</span> t1<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> one<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>      <span class='comment'>// ambiguous between #1 and #2; previously called #1</span>

<span class='keyword'>void</span> two<span class='parenthesis'>(</span>span<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span>, <span class='literal'>2</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> t2<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> two<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>    <span class='comment'>// ill-formed; previously well-formed</span>

<span class='keyword'>void</span> <span class='operator'>*</span>a<span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span>;
<span class='keyword'>int</span> x <span class='operator'>=</span> span<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>const</span><span class='anglebracket'>&gt;</span><span class='curlybracket'>{</span>a, <span class='literal'>0</span><span class='curlybracket'>}</span><span class='operator'>.</span>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// <span class='tcode_in_codeblock'>x</span> is <span class='tcode_in_codeblock'>2</span>; previously <span class='tcode_in_codeblock'>0</span></span>
any b<span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span>;
<span class='keyword'>int</span> y <span class='operator'>=</span> span<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> any<span class='anglebracket'>&gt;</span><span class='curlybracket'>{</span>b, b <span class='operator'>+</span> <span class='literal'>10</span><span class='curlybracket'>}</span><span class='operator'>.</span>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='comment'>// <span class='tcode_in_codeblock'>y</span> is <span class='tcode_in_codeblock'>2</span>; previously <span class='tcode_in_codeblock'>10</span></span>
</span></div></div></div></div><div id='depr' class='section'><h3 ><a class='secnum' href='#depr' style='min-width:80pt'>C.1.7</a> <a href='depr' title='Annex D&emsp;(normative)&emsp;Compatibility features'>[depr]</a>: compatibility features <a class='abbr_ref' href='diff.cpp23.depr'>[diff.cpp23.depr]</a></h3><div class='para' id='depr-1'><div class='marginalizedparent'><a class='marginalized' href='#depr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/compatibility.tex#L139'>#</a></div><div class='texpara'><div id='depr-1.sentence-1' class='sentence'><b>Change:</b> Remove the type alias <span class='texttt'>allocator<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>is_<span class='shy'></span>always_<span class='shy'></span>equal</span><a class='hidden_link' href='#depr-1.sentence-1'>.</a></div> <br/> <div id='depr-1.sentence-2' class='sentence'><b>Rationale:</b> Non-empty allocator classes derived from <span class='texttt'>allocator</span> needed to explicitly
define an <span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>equal</span> member type so that <span class='texttt'>allocator_<span class='shy'></span>traits</span>
would not use the one from the allocator base class<a class='hidden_link' href='#depr-1.sentence-2'>.</a></div> <br/> <div id='depr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> It is simpler to correctly define an allocator class with an allocator base
class<a class='hidden_link' href='#depr-1.sentence-3'>.</a></div> <div id='depr-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> MyAlloc <span class='operator'>:</span> allocator<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> tag;
<span class='curlybracket'>}</span>;

<span class='keyword'>static_assert</span><span class='parenthesis'>(</span><span class='operator'>!</span>allocator_traits<span class='anglebracket'>&lt;</span>MyAlloc<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>is_always_equal<span class='parenthesis'>)</span>;        <span class='comment'>// Error in C++ 2023,</span>
                                                                        <span class='comment'>// OK in C++ 2026</span>
</span></div></div></div><div class='para' id='depr-2'><div class='marginalizedparent'><a class='marginalized' href='#depr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/compatibility.tex#L159'>#</a></div><div class='texpara'><div id='depr-2.sentence-1' class='sentence'><b>Change:</b> Remove the <span class='texttt'>basic_<span class='shy'></span>string<span class='operator'>&#x200b;::&#x200b;</span>reserve<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> overload with no parameters<a class='hidden_link' href='#depr-2.sentence-1'>.</a></div> <br/> <div id='depr-2.sentence-2' class='sentence'><b>Rationale:</b> The overload of <span class='texttt'>reserve</span> with no parameters is redundant<a class='hidden_link' href='#depr-2.sentence-2'>.</a></div> <div id='depr-2.sentence-3' class='sentence'>The <span class='texttt'>shrink_<span class='shy'></span>to_<span class='shy'></span>fit</span> member function can be used instead<a class='hidden_link' href='#depr-2.sentence-3'>.</a></div> <br/> <div id='depr-2.sentence-4' class='sentence'><b>Effect on original feature:</b> A valid C++ 2023 program that calls <span class='texttt'>reserve<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
on a <span class='texttt'>basic_<span class='shy'></span>string</span> object may fail to compile<a class='hidden_link' href='#depr-2.sentence-4'>.</a></div> <div id='depr-2.sentence-5' class='sentence'>The old functionality can be achieved by calling <span class='texttt'>shrink_<span class='shy'></span>to_<span class='shy'></span>fit<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> instead,
or the function call can be safely eliminated with no side effects<a class='hidden_link' href='#depr-2.sentence-5'>.</a></div></div></div><div class='para' id='depr-3'><div class='marginalizedparent'><a class='marginalized' href='#depr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/compatibility.tex#L171'>#</a></div><div class='texpara'><div id='depr-3.sentence-1' class='sentence'><b>Change:</b> Remove header <a class='index' id=':<codecvt>,absence_thereof'></a><span class='texttt'><span class='anglebracket'>&lt;</span>codecvt<span class='anglebracket'>&gt;</span></span> and all its contents<a class='hidden_link' href='#depr-3.sentence-1'>.</a></div> <br/> <div id='depr-3.sentence-2' class='sentence'><b>Rationale:</b> The header has been deprecated for the previous three editions of this standard
and no longer implements the current Unicode standard, supporting only the
obsolete UCS-2 encoding<a class='hidden_link' href='#depr-3.sentence-2'>.</a></div> <div id='depr-3.sentence-3' class='sentence'>Ongoing support is at implementer's discretion,
exercising freedoms granted by <a href='zombie.names' title='16.4.5.3.2&emsp;Zombie names'>[zombie.<span class='shy'></span>names]</a><a class='hidden_link' href='#depr-3.sentence-3'>.</a></div> <br/> <div id='depr-3.sentence-4' class='sentence'><b>Effect on original feature:</b> A valid C++ 2023 program <span class='texttt'><span class='preprocessordirective'>#include</span></span>-ing the header or importing the
header unit may fail to compile<a class='hidden_link' href='#depr-3.sentence-4'>.</a></div> <div id='depr-3.sentence-5' class='sentence'>Code that uses any of the following names by
importing the standard library modules may fail to compile:
<ul class='itemize'><li id='depr-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#depr-3.1'>(3.1)</a></div><span class='texttt'>codecvt_<span class='shy'></span>mode</span>,</li><li id='depr-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#depr-3.2'>(3.2)</a></div><span class='texttt'>codecvt_<span class='shy'></span>utf16</span>,</li><li id='depr-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#depr-3.3'>(3.3)</a></div><span class='texttt'>codecvt_<span class='shy'></span>utf8</span>,</li><li id='depr-3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#depr-3.4'>(3.4)</a></div><span class='texttt'>codecvt_<span class='shy'></span>utf8_<span class='shy'></span>utf16</span>,</li><li id='depr-3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#depr-3.5'>(3.5)</a></div><span class='texttt'>consume_<span class='shy'></span>header</span>,</li><li id='depr-3.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#depr-3.6'>(3.6)</a></div><span class='texttt'>generate_<span class='shy'></span>header</span>, and</li><li id='depr-3.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#depr-3.7'>(3.7)</a></div><span class='texttt'>little_<span class='shy'></span>endian</span><a class='hidden_link' href='#depr-3.sentence-5'>.</a></li></ul></div></div></div></div></div></body></html>