<!DOCTYPE html><html lang='en'><head><title>[basic.link]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>6.7</a> Program and linkage <a class='abbr_ref'>[basic.link]</a></h2><div class='texpara'><a class='index' id=':linkage'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L2883'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':program'></a><a class='index' id=':linking'></a>A <a class='hidden_link' href='#def:program' title='6.7&emsp;Program and linkage&emsp;[basic.link]'><span id='def:program'><i >program</i></span></a> consists of one or more <a href='lex.separate#def:translation_unit' title='5.1&emsp;Separate translation&emsp;[lex.separate]'>translation units</a>
linked together<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>A translation unit consists
of a sequence of declarations<a class='hidden_link' href='#1.sentence-2'>.</a></div></div><div class='texpara'><div class='bnf' id='nt:translation-unit'>
<a class='hidden_link' href='#nt:translation-unit' title='6.7&emsp;Program and linkage&emsp;[basic.link]'><span id='nt:translation-unit'><span id=':translation-unit'>translation-unit<span class='textnormal'>:</span></span></span></a><br><a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq'><span class='textsf'><i >declaration-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span><br><a href='module.global.frag#nt:global-module-fragment' title='10.4&emsp;Global module fragment&emsp;[module.global.frag]'><span id='ntref:global-module-fragment'><span class='textsf'><i >global-module-fragment</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='module.unit#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration'><span class='textsf'><i >module-declaration</i></span></span></a> <a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq_'><span class='textsf'><i >declaration-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='module.private.frag#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment'><span class='textsf'><i >private-module-fragment</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span>
</div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L2896'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'><a class='index' id=':translation_unit'></a>A name has
<a class='hidden_link' href='#def:linkage,external' title='6.7&emsp;Program and linkage&emsp;[basic.link]'><span id='def:linkage,external'><i >external linkage</i></span></a>,
<a class='hidden_link' href='#def:linkage,module' title='6.7&emsp;Program and linkage&emsp;[basic.link]'><span id='def:linkage,module'><i >module linkage</i></span></a>,
<a class='hidden_link' href='#def:linkage,internal' title='6.7&emsp;Program and linkage&emsp;[basic.link]'><span id='def:linkage,internal'><i >internal linkage</i></span></a>, or
<a class='hidden_link' href='#def:linkage,no' title='6.7&emsp;Program and linkage&emsp;[basic.link]'><span id='def:linkage,no'><i >no linkage</i></span></a>,
as determined by the rules below<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='2.sentence-2' class='sentence'>All declarations of an entity with a name with internal linkage
appear in the same translation unit<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>All declarations of an entity with module linkage
are attached to the same module<a class='hidden_link' href='#2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L2911'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'><a class='index' id=':linkage,static_and'></a><a class='index' id=':static,linkage_of'></a><a class='index' id=':linkage,const_and'></a><a class='index' id=':const,linkage_of'></a><a class='index' id=':linkage,inline_and'></a><a class='index' id=':inline,linkage_of'></a>The name of an entity
that belongs to a <a href='basic.scope.namespace' title='6.4.6&emsp;Namespace scope&emsp;[basic.scope.namespace]'>namespace scope</a>
has internal linkage if it is the name of
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div>a variable, variable template, function, or function template that is
  explicitly declared <span id=':static'><span class='texttt'><span class='keyword'>static</span></span></span>; or</li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div>a non-template variable of non-volatile const-qualified type, unless
  <ul class='itemize'><li id='3.2.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.2.1'>(3.2.1)</a></div>it is declared in the purview of a module interface unit
    (outside the <a href='module.private.frag#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment_'><span class='textsf'><i >private-module-fragment</i></span></span></a>, if any) or
    module partition, or</li><li id='3.2.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.2.2'>(3.2.2)</a></div>it is explicitly declared <span id=':extern'><span class='texttt'><span class='keyword'>extern</span></span></span>, or</li><li id='3.2.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.2.3'>(3.2.3)</a></div>it is inline, or</li><li id='3.2.4'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.2.4'>(3.2.4)</a></div>it was previously declared and the prior declaration did
  not have internal linkage; or</li></ul></li><li id='3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.3'>(3.3)</a></div>a data member of an anonymous union<a class='hidden_link' href='#3.sentence-1'>.</a></li></ul></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='3.sentence-2' class='sentence'>An instantiated variable template that has const-qualified type
can have external or module linkage, even if not declared <span id=':extern_'><span class='texttt'><span class='keyword'>extern</span></span></span><a class='hidden_link' href='#3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L2944'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>An unnamed namespace or a namespace declared directly or indirectly within an
unnamed namespace has internal linkage<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>All other namespaces have external linkage<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>The name of an entity that belongs to a namespace scope,
that has not been given internal linkage above,
and that is the name of
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.1'>(4.1)</a></div>a variable; or</li><li id='4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.2'>(4.2)</a></div>a function; or</li><li id='4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.3'>(4.3)</a></div><a class='index' id=':class,linkage_of'></a>a named class (<a href='class.pre' title='11.1&emsp;Preamble'>[class.<span class='shy'></span>pre]</a>), or an unnamed class defined in a
typedef declaration in which the class has the typedef name for linkage
purposes (<a href='dcl.typedef' title='9.2.4&emsp;The typedef specifier'>[dcl.<span class='shy'></span>typedef]</a>); or</li><li id='4.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.4'>(4.4)</a></div><a class='index' id=':enumeration,linkage_of'></a>a named <a href='dcl.enum' title='9.8.1&emsp;Enumeration declarations&emsp;[dcl.enum]'>enumeration</a>, or an unnamed enumeration defined
in a typedef declaration in which the enumeration has the typedef name
for linkage purposes (<a href='dcl.typedef' title='9.2.4&emsp;The typedef specifier'>[dcl.<span class='shy'></span>typedef]</a>); or</li><li id='4.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.5'>(4.5)</a></div>an unnamed enumeration
that has an enumerator as a name for linkage purposes (<a href='dcl.enum' title='9.8.1&emsp;Enumeration declarations'>[dcl.<span class='shy'></span>enum]</a>); or</li><li id='4.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.6'>(4.6)</a></div>a template</li></ul>
has its linkage determined as follows:
<ul class='itemize'><li id='4.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.7'>(4.7)</a></div><a class='index' id=':friend_function,linkage_of'></a>if the entity is a function or function template
first declared in a friend declaration and
that declaration is a definition and
the enclosing class is defined within an <a href='module.interface#nt:export-declaration' title='10.2&emsp;Export declaration&emsp;[module.interface]'><span id='ntref:export-declaration'><span class='textsf'><i >export-declaration</i></span></span></a>,
the name has the same linkage, if any,
as the name of the enclosing class (<a href='class.friend' title='11.8.4&emsp;Friends'>[class.<span class='shy'></span>friend]</a>);</li><li id='4.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.8'>(4.8)</a></div>otherwise,
<a class='index' id=':friend_function,linkage_of_'></a>if the entity is a function or function template
declared in a friend declaration and
a corresponding non-friend declaration is reachable,
the name has the linkage determined from that prior declaration,</li><li id='4.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.9'>(4.9)</a></div>otherwise,
if the enclosing namespace has internal linkage,
the name has internal linkage;</li><li id='4.10'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.10'>(4.10)</a></div>otherwise,
if the declaration of the name is
attached to a named module (<a href='module.unit' title='10.1&emsp;Module units and purviews'>[module.<span class='shy'></span>unit]</a>)
and is not exported (<a href='module.interface' title='10.2&emsp;Export declaration'>[module.<span class='shy'></span>interface]</a>),
the name has module linkage;</li><li id='4.11'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.11'>(4.11)</a></div>otherwise,
the name has external linkage<a class='hidden_link' href='#4.sentence-3'>.</a></li></ul></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3001'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>In addition,
a member function,
a static data member,
a named class or enumeration that inhabits a class scope, or
an unnamed class or enumeration defined in a typedef declaration
that inhabits a class scope
such that the class or enumeration
has the typedef name for linkage purposes (<a href='dcl.typedef' title='9.2.4&emsp;The typedef specifier'>[dcl.<span class='shy'></span>typedef]</a>),
has the same linkage, if any, as the name of the class of which it is a member<a class='hidden_link' href='#5.sentence-1'>.</a></div></div></div><div class='para nonNormativeOnly' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3012'>#</a></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>static</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>extern</span> <span class='literal'>"C"</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>static</span> <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>0</span>;               <span class='comment'>// #1</span>
<span class='keyword'>void</span> q<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>extern</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// internal linkage</span>
  <span class='keyword'>extern</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;g</span>, external linkage</span>
  <span class='keyword'>extern</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// C language linkage</span>
  <span class='keyword'>int</span> i;                        <span class='comment'>// #2: <span class='tcode_in_codeblock'>i</span> has no linkage</span>
  <span class='curlybracket'>{</span>
    <span class='keyword'>extern</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// internal linkage</span>
    <span class='keyword'>extern</span> <span class='keyword'>int</span> i;               <span class='comment'>// #3: internal linkage</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</span> <div id='6.sentence-1' class='sentence'>
Even though the declaration at line #2 hides the declaration at line #1,
the declaration at line #3 still redeclares #1 and receives internal linkage<a class='hidden_link' href='#6.sentence-1'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3033'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'><a class='index' id=':linkage,no'></a>Names not covered by these rules have no linkage<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>Moreover, except as
noted, a name declared at <a href='basic.scope.block#def:scope,block' title='6.4.3&emsp;Block scope&emsp;[basic.scope.block]'>block scope</a> has no
linkage<a class='hidden_link' href='#7.sentence-2'>.</a></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3039'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'>Two declarations of entities declare the same entity
if, considering declarations of unnamed types to introduce their names
for linkage purposes, if any (<a href='dcl.typedef' title='9.2.4&emsp;The typedef specifier'>[dcl.<span class='shy'></span>typedef]</a>, <a href='dcl.enum' title='9.8.1&emsp;Enumeration declarations'>[dcl.<span class='shy'></span>enum]</a>),
they correspond (<a href='basic.scope.scope' title='6.4.1&emsp;General'>[basic.<span class='shy'></span>scope.<span class='shy'></span>scope]</a>),
have the same target scope that is not a function or template parameter scope,
neither is a name-independent declaration,
and either
<ul class='itemize'><li id='8.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#8.1'>(8.1)</a></div>they appear in the same translation unit, or</li><li id='8.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#8.2'>(8.2)</a></div>they both declare type aliases or namespace aliases that have the same underlying entity, or</li><li id='8.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#8.3'>(8.3)</a></div>they both declare names with module linkage and are attached to the same module, or</li><li id='8.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#8.4'>(8.4)</a></div>they both declare names with external linkage<a class='hidden_link' href='#8.sentence-1'>.</a></li></ul></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='8.sentence-2' class='sentence'>There are other circumstances in which declarations declare
the same entity (<a href='dcl.link' title='9.12&emsp;Linkage specifications'>[dcl.<span class='shy'></span>link]</a>, <a href='temp.type' title='13.6&emsp;Type equivalence'>[temp.<span class='shy'></span>type]</a>, <a href='temp.spec.partial' title='13.7.6&emsp;Partial specialization'>[temp.<span class='shy'></span>spec.<span class='shy'></span>partial]</a>)<a class='hidden_link' href='#8.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3062'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'>If a declaration <span class='math'><span class='mathalpha'>H</span></span> that declares a name with internal linkage
precedes a declaration <span class='math'><span class='mathalpha'>D</span></span> in another translation unit <span class='math'><span class='mathalpha'>U</span></span> and
would declare the same entity as <span class='math'><span class='mathalpha'>D</span></span> if it appeared in <span class='math'><span class='mathalpha'>U</span></span>,
the program is ill-formed<a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>:&ensp;<div id='9.sentence-2' class='sentence'>Such an <span class='math'><span class='mathalpha'>H</span></span> can appear only in a header unit<a class='hidden_link' href='#9.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3071'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'>If two declarations of an entity are
attached to different modules, the program is ill-formed;
no diagnostic is required if neither is reachable from the other<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<p><span class='texttt'><span class='literal'>"decls.h"</span></span>:<span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// #1, attached to the global module</span>
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// #2, attached to the global module</span>
</span></div><div class='texpara'><p>Module interface of <span class='texttt'>M</span>:<span class='codeblock'><span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"decls.h"</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>export</span> <span class='keyword'>using</span> <span class='operator'>::</span>f;   <span class='comment'>// OK, does not declare an entity, exports #1</span>
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// error: matches #2, but attached to <span class='tcode_in_codeblock'>M</span></span>
<span class='keyword'>export</span> <span class='keyword'>int</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// #3</span>
<span class='keyword'>export</span> <span class='keyword'>int</span> k<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// #4</span>
</span></div><div class='texpara'><p>Other translation unit:<span class='codeblock'><span class='keyword'>import</span> M;
<span class='keyword'>static</span> <span class='keyword'>int</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// error: matches #3</span>
<span class='keyword'>int</span> k<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// error: matches #4</span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='10.sentence-2' class='sentence'>
As a consequence of these rules,
all declarations of an entity are attached to the same module;
the entity is said to be <a class='hidden_link' href='#def:attached,entity' title='6.7&emsp;Program and linkage&emsp;[basic.link]'><span id='def:attached,entity'><i >attached</i></span></a> to that module<a class='hidden_link' href='#10.sentence-2'>.</a></div></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3101'>#</a></div><div class='texpara'><div id='11.sentence-1' class='sentence'><a class='index' id=':consistency,type_declaration'></a><a class='index' id=':declaration,multiple'></a>For any two declarations of an entity <span class='math'><span class='mathalpha'>E</span></span>:
<ul class='itemize'><li id='11.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#11.1'>(11.1)</a></div><div class='texpara'><div id='11.1.sentence-1' class='sentence'>If one declares <span class='math'><span class='mathalpha'>E</span></span> to be a variable or function,
the other shall declare <span class='math'><span class='mathalpha'>E</span></span> as one of the same type<a class='hidden_link' href='#11.1.sentence-1'>.</a></div></div></li><li id='11.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#11.2'>(11.2)</a></div><div class='texpara'><div id='11.2.sentence-1' class='sentence'>If one declares <span class='math'><span class='mathalpha'>E</span></span> to be an enumerator, the other shall do so<a class='hidden_link' href='#11.2.sentence-1'>.</a></div></div></li><li id='11.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#11.3'>(11.3)</a></div><div class='texpara'><div id='11.3.sentence-1' class='sentence'>If one declares <span class='math'><span class='mathalpha'>E</span></span> to be a namespace, the other shall do so<a class='hidden_link' href='#11.3.sentence-1'>.</a></div></div></li><li id='11.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#11.4'>(11.4)</a></div><div class='texpara'><div id='11.4.sentence-1' class='sentence'>If one declares <span class='math'><span class='mathalpha'>E</span></span> to be a type,
the other shall declare <span class='math'><span class='mathalpha'>E</span></span> to be a type of the same kind (<a href='dcl.type.elab' title='9.2.9.5&emsp;Elaborated type specifiers'>[dcl.<span class='shy'></span>type.<span class='shy'></span>elab]</a>)<a class='hidden_link' href='#11.4.sentence-1'>.</a></div></div></li><li id='11.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#11.5'>(11.5)</a></div><div class='texpara'><div id='11.5.sentence-1' class='sentence'>If one declares <span class='math'><span class='mathalpha'>E</span></span> to be a class template,
the other shall do so with the same kind and
an equivalent <a href='temp.pre#nt:template-head' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-head'><span class='textsf'><i >template-head</i></span></span></a> (<a href='temp.over.link' title='13.7.7.2&emsp;Function template overloading'>[temp.<span class='shy'></span>over.<span class='shy'></span>link]</a>)<a class='hidden_link' href='#11.5.sentence-1'>.</a></div> <div id='note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-5'>5</a></i>:&ensp;<div id='11.5.sentence-2' class='sentence'>The declarations can supply different default template arguments<a class='hidden_link' href='#11.5.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='11.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#11.6'>(11.6)</a></div><div class='texpara'><div id='11.6.sentence-1' class='sentence'>If one declares <span class='math'><span class='mathalpha'>E</span></span> to be a function template or
a (partial specialization of a) variable template,
the other shall declare <span class='math'><span class='mathalpha'>E</span></span> to be one
with an equivalent <a href='temp.pre#nt:template-head' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-head_'><span class='textsf'><i >template-head</i></span></span></a> and type<a class='hidden_link' href='#11.6.sentence-1'>.</a></div></div></li><li id='11.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#11.7'>(11.7)</a></div><div class='texpara'><div id='11.7.sentence-1' class='sentence'>If one declares <span class='math'><span class='mathalpha'>E</span></span> to be an alias template,
the other shall declare <span class='math'><span class='mathalpha'>E</span></span> to be one with
an equivalent <a href='temp.pre#nt:template-head' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-head__'><span class='textsf'><i >template-head</i></span></span></a> and <a href='dcl.name#nt:defining-type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:defining-type-id'><span class='textsf'><i >defining-type-id</i></span></span></a><a class='hidden_link' href='#11.7.sentence-1'>.</a></div></div></li><li id='11.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#11.8'>(11.8)</a></div><div class='texpara'><div id='11.8.sentence-1' class='sentence'>If one declares <span class='math'><span class='mathalpha'>E</span></span> to be a concept, the other shall do so<a class='hidden_link' href='#11.8.sentence-1'>.</a></div></div></li></ul></div> <div id='11.sentence-2' class='sentence'>
Types are compared after all adjustments of types (during which
typedefs (<a href='dcl.typedef' title='9.2.4&emsp;The typedef specifier'>[dcl.<span class='shy'></span>typedef]</a>) are replaced by their definitions);
declarations for an array
object can specify array types that differ by the presence or absence of
a major array bound (<a href='dcl.array' title='9.3.4.5&emsp;Arrays'>[dcl.<span class='shy'></span>array]</a>)<a class='hidden_link' href='#11.sentence-2'>.</a></div> <div id='11.sentence-3' class='sentence'>No diagnostic is required if neither declaration is reachable from the other<a class='hidden_link' href='#11.sentence-3'>.</a></div> <div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> x, <span class='keyword'>int</span> x<span class='parenthesis'>)</span>;    <span class='comment'>// error: different entities for <span class='tcode_in_codeblock'>x</span></span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;               <span class='comment'>// #1</span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;            <span class='comment'>// OK, different entity from #1</span>
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                <span class='comment'>// error: same entity as #1 with different type</span>
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;               <span class='comment'>// #2</span>
<span class='keyword'>namespace</span> h <span class='curlybracket'>{</span><span class='curlybracket'>}</span>          <span class='comment'>// error: same entity as #2, but not a function</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3152'>#</a></div><div class='texpara'><div id='note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-6'>6</a></i>:&ensp;<div id='12.sentence-1' class='sentence'>Linkage to non-C++ declarations can be achieved using a
<a href='dcl.link#nt:linkage-specification' title='9.12&emsp;Linkage specifications&emsp;[dcl.link]'><span id='ntref:linkage-specification'><span class='textsf'><i >linkage-specification</i></span></span></a> (<a href='dcl.link' title='9.12&emsp;Linkage specifications'>[dcl.<span class='shy'></span>link]</a>)<a class='hidden_link' href='#12.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div> </div></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3159'>#</a></div><div class='texpara'><div id='13.sentence-1' class='sentence'>A declaration <span class='math'><span class='mathalpha'>D</span></span> <a class='hidden_link' href='#def:name' title='6.7&emsp;Program and linkage&emsp;[basic.link]'><span id='def:name'><i >names</i></span></a> an entity <span class='math'><span class='mathalpha'>E</span></span> if
<ul class='itemize'><li id='13.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#13.1'>(13.1)</a></div><span class='math'><span class='mathalpha'>D</span></span> contains a <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression'><span class='textsf'><i >lambda-expression</i></span></span></a> whose closure type is <span class='math'><span class='mathalpha'>E</span></span>,</li><li id='13.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#13.2'>(13.2)</a></div><span class='math'><span class='mathalpha'>D</span></span> contains
a <a href='expr.reflect#nt:reflect-expression' title='7.6.2.10&emsp;The reflection operator&emsp;[expr.reflect]'><span id='ntref:reflect-expression'><span class='textsf'><i >reflect-expression</i></span></span></a> or a <a href='basic.splice#nt:splice-specifier' title='6.6&emsp;Splice specifiers&emsp;[basic.splice]'><span id='ntref:splice-specifier'><span class='textsf'><i >splice-specifier</i></span></span></a>
that, respectively, represents or designates <span class='math'><span class='mathalpha'>E</span></span>,</li><li id='13.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#13.3'>(13.3)</a></div><span class='math'><span class='mathalpha'>D</span></span> is an injected declaration (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)
whose characteristic sequence contains a reflection
that represents
a data member description (<span class='math'><span class='mathalpha'>T</span></span>, <span class='math'><span class='mathalpha'>N</span></span>, <span class='math'><span class='mathalpha'>A</span></span>, <span class='math'><span class='mathalpha'>W</span></span>, <span class='math'><span class='mathit'>NUA</span></span>) (<a href='class.mem.general' title='11.4.1&emsp;General'>[class.<span class='shy'></span>mem.<span class='shy'></span>general]</a>)
for which <span class='math'><span class='mathalpha'>T</span></span> is <span class='math'><span class='mathalpha'>E</span></span>,</li><li id='13.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#13.4'>(13.4)</a></div><span class='math'><span class='mathalpha'>E</span></span> is not a function or function template and <span class='math'><span class='mathalpha'>D</span></span> contains an
<a href='expr.prim.id.general#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression'><span class='textsf'><i >id-expression</i></span></span></a>,
<a href='dcl.type.general#nt:type-specifier' title='9.2.9.1&emsp;General&emsp;[dcl.type.general]'><span id='ntref:type-specifier'><span class='textsf'><i >type-specifier</i></span></span></a>,
<a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier'><span class='textsf'><i >nested-name-specifier</i></span></span></a>,
<a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name'><span class='textsf'><i >template-name</i></span></span></a>, or
<a href='temp.concept#nt:concept-name' title='13.7.9&emsp;Concept definitions&emsp;[temp.concept]'><span id='ntref:concept-name'><span class='textsf'><i >concept-name</i></span></span></a>
denoting <span class='math'><span class='mathalpha'>E</span></span>, or</li><li id='13.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#13.5'>(13.5)</a></div><span class='math'><span class='mathalpha'>E</span></span> is a function or function template and
<span class='math'><span class='mathalpha'>D</span></span> contains an expression that names <span class='math'><span class='mathalpha'>E</span></span> (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>) or
an <a href='expr.prim.id.general#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_'><span class='textsf'><i >id-expression</i></span></span></a>
that refers to a set of overloads that contains <span class='math'><span class='mathalpha'>E</span></span><a class='hidden_link' href='#13.sentence-1'>.</a> <div class='texpara'><div id='note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-7'>7</a></i>:&ensp;<div id='13.5.sentence-2' class='sentence'>Non-dependent names in an instantiated declaration
do not refer to a set of overloads (<a href='temp.res' title='13.8&emsp;Name resolution'>[temp.<span class='shy'></span>res]</a>)<a class='hidden_link' href='#13.5.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li></ul></div></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3193'>#</a></div><div class='texpara'><div id='14.sentence-1' class='sentence'>A declaration is an <a class='hidden_link' href='#def:exposure' title='6.7&emsp;Program and linkage&emsp;[basic.link]'><span id='def:exposure'><i >exposure</i></span></a>
if it either names a TU-local entity (defined below), ignoring
<ul class='itemize'><li id='14.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.1'>(14.1)</a></div>the <a href='dcl.fct.def.general#nt:function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-body'><span class='textsf'><i >function-body</i></span></span></a>
for a non-inline function or function template
(but not the deduced return type
for a (possibly instantiated) definition of a function
with a declared return type that uses a placeholder type (<a href='dcl.spec.auto' title='9.2.9.7&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>)),</li><li id='14.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.2'>(14.2)</a></div>the <a href='dcl.init.general#nt:initializer' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer'><span class='textsf'><i >initializer</i></span></span></a>
for a variable or variable template (but not the variable's type),</li><li id='14.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.3'>(14.3)</a></div>friend declarations in a class definition, and</li><li id='14.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.4'>(14.4)</a></div>any reference to a non-volatile const object or reference
with internal or no linkage initialized with a constant expression
that is not an odr-use (<a href='basic.def.odr#term.odr.use' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>),</li></ul>
or defines a constexpr variable initialized to a TU-local value (defined below)<a class='hidden_link' href='#14.sentence-1'>.</a></div> <div id='note-8' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-8'>8</a></i>:&ensp;<div id='14.sentence-2' class='sentence'>An inline function template can be an exposure even though
certain explicit specializations of it would be usable in other translation units<a class='hidden_link' href='#14.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3219'>#</a></div><div class='texpara'><div id='15.sentence-1' class='sentence'>An entity is <a class='hidden_link' href='#def:TU-local,entity' title='6.7&emsp;Program and linkage&emsp;[basic.link]'><span id='def:TU-local,entity'><i >TU-local</i></span></a> if it is
<ul class='itemize'><li id='15.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.1'>(15.1)</a></div>a type, type alias, namespace, namespace alias, function, variable, or template that
<ul class='itemize'><li id='15.1.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#15.1.1'>(15.1.1)</a></div>has a name with internal linkage, or</li><li id='15.1.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#15.1.2'>(15.1.2)</a></div>does not have a name with linkage and is declared,
or introduced by a <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_'><span class='textsf'><i >lambda-expression</i></span></span></a>,
within the definition of a TU-local entity,</li></ul></li><li id='15.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.2'>(15.2)</a></div>a type with no name that is defined outside a
<a href='class.pre#nt:class-specifier' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-specifier'><span class='textsf'><i >class-specifier</i></span></span></a>,
function body, or
<a href='dcl.init.general#nt:initializer' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer_'><span class='textsf'><i >initializer</i></span></span></a>
or is introduced by a <a href='dcl.type.general#nt:defining-type-specifier' title='9.2.9.1&emsp;General&emsp;[dcl.type.general]'><span id='ntref:defining-type-specifier'><span class='textsf'><i >defining-type-specifier</i></span></span></a>
that is used to declare only TU-local entities,</li><li id='15.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.3'>(15.3)</a></div>a specialization of a TU-local template,</li><li id='15.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.4'>(15.4)</a></div>a specialization of a template with any TU-local template argument, or</li><li id='15.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.5'>(15.5)</a></div>a specialization of a template
whose (possibly instantiated) declaration is an exposure<a class='hidden_link' href='#15.sentence-1'>.</a> <div class='texpara'><div id='note-9' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-9'>9</a></i>:&ensp;<div id='15.5.sentence-2' class='sentence'>A specialization can be produced by implicit or explicit instantiation<a class='hidden_link' href='#15.5.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li></ul></div></div></div><div class='para' id='16'><div class='marginalizedparent'><a class='marginalized' href='#16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3251'>#</a></div><div class='texpara'><div id='16.sentence-1' class='sentence'>A value or object is <a class='hidden_link' href='#def:TU-local,value_or_object' title='6.7&emsp;Program and linkage&emsp;[basic.link]'><span id='def:TU-local,value_or_object'><i >TU-local</i></span></a> if either
<ul class='itemize'><li id='16.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#16.1'>(16.1)</a></div>it is of TU-local type,</li><li id='16.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#16.2'>(16.2)</a></div>it is, or is a pointer to,
a TU-local function or the object associated with a TU-local variable,</li><li id='16.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#16.3'>(16.3)</a></div>it is an object of class or array type and
any of its subobjects or
any of the objects or functions
to which its non-static data members of reference type refer
is TU-local and is usable in constant expressions, or</li><li id='16.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#16.4'>(16.4)</a></div>it is a reflection value (<a href='basic.fundamental' title='6.9.2&emsp;Fundamental types'>[basic.<span class='shy'></span>fundamental]</a>) that represents
<ul class='itemize'><li id='16.4.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#16.4.1'>(16.4.1)</a></div>an entity, value, or object that is TU-local,</li><li id='16.4.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#16.4.2'>(16.4.2)</a></div>a direct base class relationship <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">D</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span></span> (<a href='class.derived.general' title='11.7.1&emsp;General'>[class.<span class='shy'></span>derived.<span class='shy'></span>general]</a>)
for which either <span class='math'><span class='mathalpha'>D</span></span> or <span class='math'><span class='mathalpha'>B</span></span> is TU-local, or</li><li id='16.4.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#16.4.3'>(16.4.3)</a></div>a data member description <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.12em;">T</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.104em;">W</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-texatom MJXc-space1"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">N</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">U</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span></span> (<a href='class.mem.general' title='11.4.1&emsp;General'>[class.<span class='shy'></span>mem.<span class='shy'></span>general]</a>)
for which <span class='math'><span class='mathalpha'>T</span></span> is TU-local<a class='hidden_link' href='#16.sentence-1'>.</a></li></ul></li></ul></div></div></div><div class='para' id='17'><div class='marginalizedparent'><a class='marginalized' href='#17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3279'>#</a></div><div class='texpara'><div id='17.sentence-1' class='sentence'>If a (possibly instantiated) declaration of, or a deduction guide for,
a non-TU-local entity in a module interface unit
(outside the <a href='module.private.frag#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment__'><span class='textsf'><i >private-module-fragment</i></span></span></a>, if any) or
module partition (<a href='module.unit' title='10.1&emsp;Module units and purviews'>[module.<span class='shy'></span>unit]</a>) is an exposure,
the program is ill-formed<a class='hidden_link' href='#17.sentence-1'>.</a></div> <div id='17.sentence-2' class='sentence'>Such a declaration in any other context is deprecated (<a href='depr.local' title='D.2&emsp;Non-local use of TU-local entities'>[depr.<span class='shy'></span>local]</a>)<a class='hidden_link' href='#17.sentence-2'>.</a></div></div></div><div class='para' id='18'><div class='marginalizedparent'><a class='marginalized' href='#18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3287'>#</a></div><div class='texpara'><div id='18.sentence-1' class='sentence'>If a declaration that appears in one translation unit
names a TU-local entity declared
in another translation unit that is not a header unit,
the program is ill-formed<a class='hidden_link' href='#18.sentence-1'>.</a></div> <div id='18.sentence-2' class='sentence'>A declaration instantiated for a template specialization (<a href='temp.spec' title='13.9&emsp;Template instantiation and specialization'>[temp.<span class='shy'></span>spec]</a>)
appears at the point of instantiation of the specialization (<a href='temp.point' title='13.8.4.1&emsp;Point of instantiation'>[temp.<span class='shy'></span>point]</a>)<a class='hidden_link' href='#18.sentence-2'>.</a></div></div></div><div class='para nonNormativeOnly' id='19'><div class='marginalizedparent'><a class='marginalized' href='#19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ad99d5224a03821bcff46081195fed20f0afee31/source/basic.tex#L3295'>#</a></div><div class='texpara'><div id='example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-4'>4</a></i>:&ensp;<p>Translation unit #1:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> A;
<span class='keyword'>static</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>inline</span> <span class='keyword'>void</span> it<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>           <span class='comment'>// error: is an exposure of <span class='tcode_in_codeblock'>f</span></span>
<span class='keyword'>static</span> <span class='keyword'>inline</span> <span class='keyword'>void</span> its<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>   <span class='comment'>// OK</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> its<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>   <span class='comment'>// OK</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> g<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

<span class='keyword'>decltype</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span> <span class='operator'>*</span>fp;                    <span class='comment'>// error: <span class='tcode_in_codeblock'>f</span> (though not its type) is TU-local</span>
<span class='keyword'>auto</span> <span class='operator'>&amp;</span>fr <span class='operator'>=</span> f;                       <span class='comment'>// OK</span>
<span class='keyword'>constexpr</span> <span class='keyword'>auto</span> <span class='operator'>&amp;</span>fr2 <span class='operator'>=</span> fr;           <span class='comment'>// error: is an exposure of <span class='tcode_in_codeblock'>f</span></span>
<span class='keyword'>constexpr</span> <span class='keyword'>static</span> <span class='keyword'>auto</span> fp2 <span class='operator'>=</span> fr;     <span class='comment'>// OK</span>

<span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span>ref<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span> s<span class='curlybracket'>{</span>f<span class='curlybracket'>}</span>;               <span class='comment'>// OK, value is TU-local</span>
<span class='keyword'>constexpr</span> <span class='keyword'>extern</span> <span class='keyword'>struct</span> W <span class='curlybracket'>{</span> S <span class='operator'>&amp;</span>s; <span class='curlybracket'>}</span> wrap<span class='curlybracket'>{</span>s<span class='curlybracket'>}</span>;    <span class='comment'>// OK, value is not TU-local</span>

<span class='keyword'>static</span> <span class='keyword'>auto</span> x <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;<span class='curlybracket'>}</span>;           <span class='comment'>// OK</span>
<span class='keyword'>auto</span> x2 <span class='operator'>=</span> x;                        <span class='comment'>// error: the closure type is TU-local</span>
<span class='keyword'>int</span> y <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;<span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>,<span class='literal'>0</span><span class='parenthesis'>)</span>;             <span class='comment'>// error: the closure type is not TU-local</span>
<span class='keyword'>int</span> y2 <span class='operator'>=</span> <span class='parenthesis'>(</span>x,<span class='literal'>0</span><span class='parenthesis'>)</span>;                     <span class='comment'>// OK</span>

<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
  <span class='keyword'>void</span> adl<span class='parenthesis'>(</span>A<span class='parenthesis'>)</span>;
  <span class='keyword'>static</span> <span class='keyword'>void</span> adl<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>void</span> adl<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span>;

<span class='keyword'>inline</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>auto</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> adl<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>   <span class='comment'>// OK, but certain specializations are exposures</span>

<span class='keyword'>constexpr</span> std<span class='operator'>::</span>meta<span class='operator'>::</span>info r1 <span class='operator'>=</span> <span class='operator'>^</span><span class='operator'>^</span>g<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span>;  <span class='comment'>// OK</span>
<span class='keyword'>namespace</span> N2 <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>constexpr</span> std<span class='operator'>::</span>meta<span class='operator'>::</span>info r2 <span class='operator'>=</span> <span class='operator'>^</span><span class='operator'>^</span>g<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span>;     <span class='comment'>// OK, <span class='tcode_in_codeblock'>r2</span> is TU-local</span>
<span class='curlybracket'>}</span>
<span class='keyword'>constexpr</span> std<span class='operator'>::</span>meta<span class='operator'>::</span>info r3 <span class='operator'>=</span> <span class='operator'>^</span><span class='operator'>^</span>f;                 <span class='comment'>// error: <span class='tcode_in_codeblock'>r3</span> is an exposure of <span class='tcode_in_codeblock'>f</span></span>

<span class='keyword'>constexpr</span> <span class='keyword'>auto</span> ctx <span class='operator'>=</span> std<span class='operator'>::</span>meta<span class='operator'>::</span>access_context<span class='operator'>::</span>current<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>constexpr</span> std<span class='operator'>::</span>meta<span class='operator'>::</span>info r4 <span class='operator'>=</span>
  std<span class='operator'>::</span>meta<span class='operator'>::</span>members_of<span class='parenthesis'>(</span><span class='operator'>^</span><span class='operator'>^</span>N2, ctx<span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>r4</span> is an exposure of <span class='tcode_in_codeblock'>N2&#x200b;::&#x200b;r2</span></span>
</span>
<p>Translation unit #2:<span class='codeblock'><span class='keyword'>module</span> A;
<span class='keyword'>void</span> other<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  g<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                           <span class='comment'>// OK, specialization is explicitly instantiated</span>
  g<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                           <span class='comment'>// error: instantiation uses TU-local <span class='tcode_in_codeblock'>its</span></span>
  h<span class='parenthesis'>(</span>N<span class='operator'>::</span>A<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                        <span class='comment'>// error: overload set contains TU-local <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;adl(int)</span></span>
  h<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                             <span class='comment'>// OK, calls <span class='tcode_in_codeblock'>adl(double)</span></span>
  adl<span class='parenthesis'>(</span>N<span class='operator'>::</span>A<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                      <span class='comment'>// OK; <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;adl(int)</span> not found, calls <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;adl(N&#x200b;::&#x200b;A)</span></span>
  fr<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                             <span class='comment'>// OK, calls <span class='tcode_in_codeblock'>f</span></span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> ptr <span class='operator'>=</span> fr;          <span class='comment'>// error: <span class='tcode_in_codeblock'>fr</span> is not usable in constant expressions here</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>