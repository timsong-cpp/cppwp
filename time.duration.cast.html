<!DOCTYPE html><html lang='en'><head><title>[time.duration.cast]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>20</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>20.17</a> Time utilities <a class='abbr_ref' href='time#duration.cast'>[time]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>20.17.5</a> Class template <span class='texttt'>duration</span> <a class='abbr_ref' href='time.duration#cast'>[time.duration]</a></h3><div id='time.duration.cast'><h4 ><a class='secnum' style='min-width:118pt'>20.17.5.7</a> <span class='texttt'>duration_&shy;cast</span> <a class='abbr_ref'>[time.duration.cast]</a></h4><p ><span class='indexparent'><a class='index' id='duration,duration_cast'></a></span><span class='indexparent'><a class='index' id='duration_cast'></a></span></p><p ><code class='itemdecl'>template &lt;class ToDuration, class Rep, class Period&gt;
  constexpr ToDuration duration_cast(const duration&lt;Rep, Period&gt;&amp; d);
</code></p><div class='itemdescr'></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/utilities.tex#L18167'>#</a></div><p ><span class='textit'>Remarks:</span> This function shall not participate in overload resolution
unless <span class='texttt'>ToDuration</span> is a specialization of <span class='texttt'>duration</span>.</p></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/utilities.tex#L18171'>#</a></div><p ><span class='textit'>Returns:</span> Let <span class='texttt'>CF</span> be <span class='texttt'>ratio_&shy;divide&lt;Period, typename
ToDuration&#x200b;::&#x200b;period&gt;</span>, and <span class='texttt'>CR</span> be <span class='texttt'>common_&shy;type&lt;</span> <span class='texttt'>typename
ToDuration&#x200b;::&#x200b;rep, Rep, intmax_&shy;t&gt;&#x200b;::&#x200b;type</span>.
</p><ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#2.1'>(2.1)</a></div><p >If <span class='texttt'>CF&#x200b;::&#x200b;num == 1</span> and <span class='texttt'>CF&#x200b;::&#x200b;den == 1</span>, returns
</p><p ><pre class='codeblock'>
ToDuration(static_cast&lt;typename ToDuration::rep&gt;(d.count()))</pre></p></li><li id='2.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#2.2'>(2.2)</a></div><p >otherwise, if <span class='texttt'>CF&#x200b;::&#x200b;num != 1</span> and <span class='texttt'>CF&#x200b;::&#x200b;den == 1</span>, returns
</p><p ><pre class='codeblock'>
ToDuration(static_cast&lt;typename ToDuration::rep&gt;(
  static_cast&lt;CR&gt;(d.count()) * static_cast&lt;CR&gt;(CF::num)))</pre></p></li><li id='2.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#2.3'>(2.3)</a></div><p >otherwise, if <span class='texttt'>CF&#x200b;::&#x200b;num == 1</span> and <span class='texttt'>CF&#x200b;::&#x200b;den != 1</span>, returns
</p><p ><pre class='codeblock'>
ToDuration(static_cast&lt;typename ToDuration::rep&gt;(
  static_cast&lt;CR&gt;(d.count()) / static_cast&lt;CR&gt;(CF::den)))</pre></p></li><li id='2.4'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#2.4'>(2.4)</a></div><p >otherwise, returns
</p><p ><pre class='codeblock'>
ToDuration(static_cast&lt;typename ToDuration::rep&gt;(
  static_cast&lt;CR&gt;(d.count()) * static_cast&lt;CR&gt;(CF::num) / static_cast&lt;CR&gt;(CF::den)))</pre></p></li></ul></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/utilities.tex#L18200'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
This function does not use any implicit conversions; all conversions
are done with <span class='texttt'>static_&shy;cast</span>. It avoids multiplications and divisions when
it is known at compile time that one or more arguments is 1. Intermediate
computations are carried out in the widest representation and only converted to
the destination representation at the final step.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>â€”<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
</p></div></div><p ><span class='indexparent'><a class='index' id='floor,duration'></a></span><span class='indexparent'><a class='index' id='duration,floor'></a></span></p><p ><code class='itemdecl'>template &lt;class ToDuration, class Rep, class Period&gt;
  constexpr ToDuration floor(const duration&lt;Rep, Period&gt;&amp; d);
</code></p><div class='itemdescr'></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/utilities.tex#L18217'>#</a></div><p ><span class='textit'>Remarks:</span> This function shall not participate in overload resolution
unless <span class='texttt'>ToDuration</span> is a specialization of <span class='texttt'>duration</span>.</p></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/utilities.tex#L18221'>#</a></div><p ><span class='textit'>Returns:</span> The greatest result <span class='texttt'>t</span> representable in <span class='texttt'>ToDuration</span>
for which <span class='texttt'>t &lt;= d</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='ceil,duration'></a></span><span class='indexparent'><a class='index' id='duration,ceil'></a></span></p><p ><code class='itemdecl'>template &lt;class ToDuration, class Rep, class Period&gt;
  constexpr ToDuration ceil(const duration&lt;Rep, Period&gt;&amp; d);
</code></p><div class='itemdescr'></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/utilities.tex#L18233'>#</a></div><p ><span class='textit'>Remarks:</span> This function shall not participate in overload resolution
unless <span class='texttt'>ToDuration</span> is a specialization of <span class='texttt'>duration</span>.</p></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/utilities.tex#L18237'>#</a></div><p ><span class='textit'>Returns:</span> The least result <span class='texttt'>t</span> representable in <span class='texttt'>ToDuration</span>
for which <span class='texttt'>t &gt;= d</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='round,duration'></a></span><span class='indexparent'><a class='index' id='duration,round'></a></span></p><p ><code class='itemdecl'>template &lt;class ToDuration, class Rep, class Period&gt;
  constexpr ToDuration round(const duration&lt;Rep, Period&gt;&amp; d);
</code></p><div class='itemdescr'></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/utilities.tex#L18249'>#</a></div><p ><span class='textit'>Remarks:</span> This function shall not participate in overload resolution
unless <span class='texttt'>ToDuration</span> is a specialization of <span class='texttt'>duration</span>,
and <span class='texttt'>treat_&shy;as_&shy;floating_&shy;point_&shy;v&lt;typename ToDuration&#x200b;::&#x200b;rep&gt;</span>
is <span class='texttt'>false</span>.</p></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88657c99d3781984bf06d1f89e6e32d3b0051830/source/utilities.tex#L18255'>#</a></div><p ><span class='textit'>Returns:</span> The value of <span class='texttt'>ToDuration</span> that is closest to <span class='texttt'>d</span>.
If there are two closest values, then return the value <span class='texttt'>t</span>
for which <span class='texttt'>t % 2 == 0</span>.
</p></div></div></div></div></body></html>