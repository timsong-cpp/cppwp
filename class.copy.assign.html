<!DOCTYPE html><html lang='en'><head><title>[class.copy.assign]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>11</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>11.4</a> Class members <a class='abbr_ref' href='class.mem#class.copy.assign'>[class.mem]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>11.4.6</a> Copy/move assignment operator <a class='abbr_ref'>[class.copy.assign]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1678'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':assignment_operator,copy'></a><a class='index' id=':assignment_operator,move'></a>A user-declared <a class='hidden_link' href='#def:copy' id='def:copy'><i>copy</i></a> assignment operator <span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='operator'>=</span></span> is a
non-static non-template member function of class <span class='texttt'>X</span> with exactly one
parameter of type <span class='texttt'>X</span>, <span class='texttt'>X<span class='operator'>&amp;</span></span>, <span class='texttt'><span class='keyword'>const</span> X<span class='operator'>&amp;</span></span>,
<span class='texttt'><span class='keyword'>volatile</span> X<span class='operator'>&amp;</span></span>, or <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>volatile</span> X<span class='operator'>&amp;</span></span><a class='hidden_link' href='#1.sentence-1'>.</a><a class='footnoteref' href='#footnote-97' id='footnoteref-97' title='Because a template assignment operator or an assignment operator taking an rvalue reference parameter is never a copy assignment operator, the presence of such an assignment operator does not suppress the implicit declaration of a copy assignment operator. Such assignment operators participate in overload resolution with other assignment operators, including copy assignment operators, and, if selected, will be used to assign an object.'>97</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='1.sentence-2' class='sentence'>An overloaded assignment operator must be declared to have only one parameter;
see <a href='over.ass' title='12.4.3.2&emsp;Simple assignment'>[over.<span class='shy'></span>ass]</a><a class='hidden_link' href='#1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>: <div id='1.sentence-3' class='sentence'>More than one form of copy assignment operator can be declared for a class<a class='hidden_link' href='#1.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>: <div id='1.sentence-4' class='sentence'>If a class
<span class='texttt'>X</span>
only has a copy assignment operator with a parameter of type
<span class='texttt'>X<span class='operator'>&amp;</span></span>,
an expression of type const
<span class='texttt'>X</span>
cannot be assigned to an object of type
<span class='texttt'>X</span><a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  X<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  X<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>const</span> X cx;
X x;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  x <span class='operator'>=</span> cx;           <span class='comment'>// error: <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;operator=(X&amp;)</span> cannot assign <span class='tcode_in_codeblock'>cx</span> into <span class='tcode_in_codeblock'>x</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1730'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>If the class definition does not explicitly declare a copy assignment operator,
one is declared <a class='hidden_link' href='#def:assignment_operator,copy,implicitly_declared' title='11.4.6&emsp;Copy/move assignment operator&emsp;[class.copy.assign]'><span id='def:assignment_operator,copy,implicitly_declared'><i >implicitly</i></span></a><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>If the class definition declares a move
constructor or move assignment operator, the implicitly declared copy
assignment operator is defined as deleted; otherwise, it is
defaulted (<a href='dcl.fct.def' title='9.5&emsp;Function definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def]</a>)<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>The latter case is deprecated if the class has a user-declared copy constructor
or a user-declared destructor  (<a href='depr.impldec' title='D.8&emsp;Implicit declaration of copy functions'>[depr.<span class='shy'></span>impldec]</a>)<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>The implicitly-declared copy assignment operator for a class
<span class='texttt'>X</span>
will have the form
<span class='codeblock'>X<span class='operator'>&amp;</span> X<span class='operator'>::</span><span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>
</span>
if
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.1'>(2.1)</a></div>each direct base class <span class='texttt'>B</span> of <span class='texttt'>X</span>
has a copy assignment operator whose parameter is of type
<span class='texttt'><span class='keyword'>const</span> B<span class='operator'>&amp;</span></span>, <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>volatile</span> B<span class='operator'>&amp;</span></span>, or <span class='texttt'>B</span>, and</li><li id='2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.2'>(2.2)</a></div>for all the non-static data members of <span class='texttt'>X</span>
that are of a class type <span class='texttt'>M</span> (or array thereof),
each such class type has a copy assignment operator whose parameter is of type
<span class='texttt'><span class='keyword'>const</span> M<span class='operator'>&amp;</span></span>, <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>volatile</span> M<span class='operator'>&amp;</span></span>,
or <span class='texttt'>M</span><a class='hidden_link' href='#2.sentence-4'>.</a><a class='footnoteref' href='#footnote-98' id='footnoteref-98' title='This implies that the reference parameter of the implicitly-declared copy assignment operator cannot bind to a volatile lvalue; see [diff.class].'>98</a></li></ul></div></div><div class='texpara'><div id='2.sentence-5' class='sentence'>Otherwise, the implicitly-declared copy assignment operator
will have the form
<span class='codeblock'>X<span class='operator'>&amp;</span> X<span class='operator'>::</span><span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>
</span></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1770'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>A user-declared move assignment operator <span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='operator'>=</span></span> is
a non-static non-template member function of class <span class='texttt'>X</span> with exactly
one parameter of type <span class='texttt'>X<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>, <span class='texttt'><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>, <span class='texttt'><span class='keyword'>volatile</span> X<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>, or
<span class='texttt'><span class='keyword'>const</span> <span class='keyword'>volatile</span> X<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>: <div id='3.sentence-2' class='sentence'>An overloaded assignment operator must be
declared to have only one parameter; see <a href='over.ass' title='12.4.3.2&emsp;Simple assignment'>[over.<span class='shy'></span>ass]</a><a class='hidden_link' href='#3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> 
<div id='note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-5'>5</a></i>: <div id='3.sentence-3' class='sentence'>More than one form of move assignment operator can be declared for a class<a class='hidden_link' href='#3.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1784'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'><a class='index' id=':assignment_operator,move,implicitly_declared'></a>If the definition of a class <span class='texttt'>X</span> does not explicitly declare a
move assignment operator, one
will be implicitly declared as defaulted if and only if
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.1'>(4.1)</a></div><span class='texttt'>X</span> does not have a user-declared copy constructor,</li><li id='4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.2'>(4.2)</a></div><span class='texttt'>X</span> does not have a user-declared move constructor,</li><li id='4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.3'>(4.3)</a></div><span class='texttt'>X</span> does not have a user-declared copy assignment operator, and</li><li id='4.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.4'>(4.4)</a></div><span class='texttt'>X</span> does not have a user-declared destructor<a class='hidden_link' href='#4.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>: <div id='4.sentence-2' class='sentence'>The class definition
<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a;
  S<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> S<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
<span class='curlybracket'>}</span>;
</span>
will not have a default move assignment operator implicitly declared because the
copy assignment operator has been user-declared<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>The move assignment operator may
be explicitly defaulted<a class='hidden_link' href='#4.sentence-3'>.</a></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a;
  S<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> S<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  S<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>S<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1824'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>The implicitly-declared move assignment operator for a class <span class='texttt'>X</span> will have the form
<span class='codeblock'>X<span class='operator'>&amp;</span> X<span class='operator'>::</span><span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>X<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>
</span></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1830'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>The implicitly-declared copy/move assignment operator for class
<span class='texttt'>X</span>
has the return type
<span class='texttt'>X<span class='operator'>&amp;</span></span><a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>An implicitly-declared copy/move assignment operator is an
inline public member of its class<a class='hidden_link' href='#6.sentence-2'>.</a></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1838'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>A defaulted copy/move assignment operator for
class <span class='texttt'>X</span> is defined as deleted if <span class='texttt'>X</span> has:
<ul class='itemize'><li id='7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.1'>(7.1)</a></div>a variant member with a non-trivial corresponding assignment operator and
  <span class='texttt'>X</span> is a union-like class, or</li><li id='7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.2'>(7.2)</a></div>a non-static data member of <span id=':const'><span class='texttt'><span class='keyword'>const</span></span></span> non-class
  type (or array thereof), or</li><li id='7.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.3'>(7.3)</a></div>a non-static data member of reference type, or</li><li id='7.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.4'>(7.4)</a></div>a direct non-static data member of class type <span class='texttt'>M</span>
  (or array thereof) or a direct base class <span class='texttt'>M</span>
  that cannot be copied/moved because overload resolution
  (<a href='over.match' title='12.2&emsp;Overload resolution'>[over.<span class='shy'></span>match]</a>), as applied to find <span class='texttt'>M</span>'s corresponding
  assignment operator, results in an ambiguity or
  a function that is deleted or inaccessible from the
  defaulted assignment operator<a class='hidden_link' href='#7.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-6'>6</a></i>: <div id='7.sentence-2' class='sentence'>A defaulted move assignment operator that is defined as deleted is ignored by
overload resolution (<a href='over.match' title='12.2&emsp;Overload resolution'>[over.<span class='shy'></span>match]</a>, <a href='over.over' title='12.3&emsp;Address of an overload set'>[over.<span class='shy'></span>over]</a>)<a class='hidden_link' href='#7.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1864'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'><a class='index' id=':assignment_operator,copy,hidden'></a><a class='index' id=':assignment_operator,move,hidden'></a>Because a copy/move assignment operator is implicitly declared for a class
if not declared by the user,
a base class copy/move assignment operator is always hidden
by the corresponding assignment operator of a derived class (<a href='over.ass' title='12.4.3.2&emsp;Simple assignment'>[over.<span class='shy'></span>ass]</a>)<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-7'>7</a></i>: <div id='8.sentence-2' class='sentence'>A <a href='namespace.udecl#nt:using-declaration' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declaration'><span class='textsf'><i >using-declaration</i></span></span></a> that names an assignment operator
with a parameter type that could be that of a
copy/move assignment operator for a
derived class does not suppress the implicit declaration of the derived class
operator (<a href='namespace.udecl' title='9.9&emsp;The using declaration'>[namespace.<span class='shy'></span>udecl]</a>)<a class='hidden_link' href='#8.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1879'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'><a class='index' id=':assignment_operator,copy,trivial'></a><a class='index' id=':assignment_operator,move,trivial'></a>A copy/move assignment operator for class
<span class='texttt'>X</span>
is
trivial
if it is not user-provided and if:
<ul class='itemize'><li id='9.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#9.1'>(9.1)</a></div>class
<span class='texttt'>X</span>
has no virtual functions (<a href='class.virtual' title='11.7.3&emsp;Virtual functions'>[class.<span class='shy'></span>virtual]</a>)
and no virtual base classes (<a href='class.mi' title='11.7.2&emsp;Multiple base classes'>[class.<span class='shy'></span>mi]</a>), and</li><li id='9.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#9.2'>(9.2)</a></div>the assignment operator selected to copy/move each direct
base class subobject is trivial, and</li><li id='9.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#9.3'>(9.3)</a></div>for each non-static data member of
<span class='texttt'>X</span>
that is of class type (or array thereof),
the assignment operator selected to copy/move that member is trivial;</li></ul>
<a class='index' id=':assignment_operator,move,non-trivial'></a>otherwise the copy/move assignment operator is
<a class='hidden_link' href='#def:assignment_operator,copy,non-trivial' title='11.4.6&emsp;Copy/move assignment operator&emsp;[class.copy.assign]'><span id='def:assignment_operator,copy,non-trivial'><i >non-trivial</i></span></a><a class='hidden_link' href='#9.sentence-1'>.</a></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1907'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'><a class='index' id=':assignment_operator,copy,implicitly_defined'></a><a class='index' id=':assignment_operator,move,implicitly_defined'></a>A copy/move assignment operator for a class <span class='texttt'>X</span>
that is defaulted and not defined as deleted
is
<a class='hidden_link' href='#def:implicitly_defined' id='def:implicitly_defined'><i>implicitly defined</i></a>
when it is odr-used (<a href='term.odr.use'>[term.<span class='shy'></span>odr.<span class='shy'></span>use]</a>)
(e.g., when it is selected by overload resolution
to assign to an object of its class type),
when it is needed for constant evaluation (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>), or
when it is explicitly defaulted after its first declaration<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>The implicitly-defined copy/move assignment operator is <span id=':constexpr'><span class='texttt'><span class='keyword'>constexpr</span></span></span> if
<ul class='itemize'><li id='10.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#10.1'>(10.1)</a></div><span class='texttt'>X</span> is a literal type, and</li><li id='10.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#10.2'>(10.2)</a></div>the assignment operator selected to copy/move each direct base class subobject
is a constexpr function, and</li><li id='10.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#10.3'>(10.3)</a></div>for each non-static data member of <span class='texttt'>X</span> that is of class type (or array
thereof), the assignment operator selected to copy/move that member is a
constexpr function<a class='hidden_link' href='#10.sentence-2'>.</a></li></ul></div></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1934'>#</a></div><div class='texpara'><div id='11.sentence-1' class='sentence'>Before the defaulted copy/move assignment operator for a class is
implicitly defined,
all non-user-provided copy/move assignment operators for
its direct base classes and
its non-static data members are implicitly defined<a class='hidden_link' href='#11.sentence-1'>.</a></div> <div id='note-8' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-8'>8</a></i>: <div id='11.sentence-2' class='sentence'>An implicitly-declared copy/move assignment operator has an
implied exception specification (<a href='except.spec' title='14.5&emsp;Exception specifications'>[except.<span class='shy'></span>spec]</a>)<a class='hidden_link' href='#11.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1945'>#</a></div><div class='texpara'><div id='12.sentence-1' class='sentence'>The implicitly-defined copy/move assignment operator for a
non-union class <span class='texttt'>X</span> performs memberwise copy/move assignment of its subobjects<a class='hidden_link' href='#12.sentence-1'>.</a></div> <div id='12.sentence-2' class='sentence'>The direct
base classes of <span class='texttt'>X</span> are assigned first, in the order of their declaration in the
<a href='class.derived.general#nt:base-specifier-list' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:base-specifier-list'><span class='textsf'><i >base-specifier-list</i></span></span></a>, and then the immediate non-static data members of
<span class='texttt'>X</span> are assigned, in the order in which they were declared in the class
definition<a class='hidden_link' href='#12.sentence-2'>.</a></div> <div id='12.sentence-3' class='sentence'>Let <span class='texttt'>x</span> be either the parameter of the function or, for the move operator, an
xvalue referring to the parameter<a class='hidden_link' href='#12.sentence-3'>.</a></div> <div id='12.sentence-4' class='sentence'>Each subobject is assigned in the manner appropriate to its type:
<ul class='itemize'><li id='12.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#12.1'>(12.1)</a></div>if the subobject is of class type,
as if by a call to <span class='texttt'><span class='keyword'>operator</span><span class='operator'>=</span></span> with the subobject as the object expression
and the corresponding subobject of <span class='texttt'>x</span> as a single function argument
(as if by explicit qualification; that is,
ignoring any possible virtual overriding functions in more derived classes);</li><li id='12.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#12.2'>(12.2)</a></div>if the subobject is an array, each element is assigned,
in the manner appropriate to the element type;</li><li id='12.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#12.3'>(12.3)</a></div>if the subobject is of scalar type,
the built-in assignment operator is used<a class='hidden_link' href='#12.sentence-4'>.</a></li></ul></div></div><div class='texpara'><div id='12.sentence-5' class='sentence'><a class='index' id=':assignment_operator,copy,virtual_bases_and'></a>It is unspecified whether subobjects representing virtual base classes
are assigned more than once by the implicitly-defined copy/move assignment
operator<a class='hidden_link' href='#12.sentence-5'>.</a></div> <div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>: <span class='codeblock'><span class='keyword'>struct</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> A <span class='operator'>:</span> <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C <span class='operator'>:</span> B, A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='12.sentence-6' class='sentence'>It is unspecified whether the virtual base class subobject
<span class='texttt'>V</span>
is assigned twice by the implicitly-defined copy/move assignment operator for
<span class='texttt'>C</span><a class='hidden_link' href='#12.sentence-6'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1988'>#</a></div><div class='texpara'><div id='13.sentence-1' class='sentence'>The implicitly-defined copy assignment operator for a
union <span class='texttt'>X</span> copies the object representation (<a href='basic.types' title='6.8&emsp;Types'>[basic.<span class='shy'></span>types]</a>) of <span class='texttt'>X</span><a class='hidden_link' href='#13.sentence-1'>.</a></div> <div id='13.sentence-2' class='sentence'>If the source and destination of the assignment are not the same object, then
for each object nested within (<a href='intro.object' title='6.7.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>)
the object that is the source of the copy,
a corresponding object <span class='math'><span class='mathalpha'>o</span></span> nested within the destination is created,
and the lifetime of <span class='math'><span class='mathalpha'>o</span></span> begins before the copy is performed<a class='hidden_link' href='#13.sentence-2'>.</a></div></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/04e0ea7074c9b0d0ca939821ce0f575c589df6b7/source/classes.tex#L1997'>#</a></div><div class='texpara'><div id='14.sentence-1' class='sentence'>The implicitly-defined copy/move assignment operator for a class
returns the object for which the assignment operator is invoked,
that is, the object assigned to<a class='hidden_link' href='#14.sentence-1'>.</a></div> 
</div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-97'><div class='texpara'><a class='footnotenum' href='#footnote-97'>97)</a><a class='footnoteBacklink' href='#footnoteref-97'>97)</a> <div id='footnote-97.sentence-1' class='sentence'>Because
a template assignment operator or an assignment operator
taking an rvalue reference parameter is never a copy assignment operator,
the presence of such an assignment operator does not suppress the
implicit declaration of a copy assignment operator<a class='hidden_link' href='#footnote-97.sentence-1'>.</a></div> <div id='footnote-97.sentence-2' class='sentence'>Such assignment operators
participate in overload resolution with other assignment operators, including
copy assignment operators, and, if selected, will be used to assign an object<a class='hidden_link' href='#footnote-97.sentence-2'>.</a></div></div></div><div class='footnote' id='footnote-98'><div class='texpara'><a class='footnotenum' href='#footnote-98'>98)</a><a class='footnoteBacklink' href='#footnoteref-98'>98)</a> <div id='footnote-98.sentence-1' class='sentence'>This implies that the reference parameter of the
implicitly-declared copy assignment operator cannot bind to a
<span class='texttt'><span class='keyword'>volatile</span></span> lvalue; see <a href='diff.class' title='C.6.7&emsp;[class]: classes'>[diff.<span class='shy'></span>class]</a><a class='hidden_link' href='#footnote-98.sentence-1'>.</a></div></div></div></div></body></html>