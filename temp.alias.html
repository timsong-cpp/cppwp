<!DOCTYPE html><html lang='en'><head><title>[temp.alias]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>17</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>17.6</a> Template declarations <a class='abbr_ref' href='temp.decls#temp.alias'>[temp.decls]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>17.6.7</a> Alias templates <a class='abbr_ref'>[temp.alias]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9d8d06a6601794478075b01009c82d61e7d47445/source/templates.tex#L3846'>#</a></div><div id='1.sentence-1' class='sentence'>A <i ><a href='temp#nt:template-declaration'>template-declaration</a></i> in which the <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i> is an
<i ><a href='dcl.dcl#nt:alias-declaration'>alias-declaration</a></i> declares the
<i ><a href='lex.name#nt:identifier'>identifier</a></i> to be an <a class='hidden_link' href='#def:alias_template' id='def:alias_template'><i >alias template</i></a><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>An alias template is a name for a family of
types<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>The name of the alias template is a <i ><a href='temp.names#nt:template-name'>template-name</a></i><a class='hidden_link' href='#1.sentence-3'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9d8d06a6601794478075b01009c82d61e7d47445/source/templates.tex#L3853'>#</a></div><div id='2.sentence-1' class='sentence'>When a <i ><a href='temp.names#nt:template-id'>template-id</a></i> refers to the specialization of
an alias template, it is equivalent to the associated type obtained by
substitution of its <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span> for the
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span> in the <i ><a href='dcl.name#nt:type-id'>type-id</a></i> of
the alias template<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.sentence-2' class='sentence'>An alias template name is never deduced<a class='hidden_link' href='#2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct Alloc { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
template&lt;class T&gt; using Vec = vector&lt;T, Alloc&lt;T&gt;&gt;;
Vec&lt;int&gt; v;         <span class='comment'>// same as <span class='tcode_in_codeblock'>vector&lt;int, Alloc&lt;int&gt;&gt; v;</span>
</span>
template&lt;class T&gt;
  void process(Vec&lt;T&gt;&amp; v)
  { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }

template&lt;class T&gt;
  void process(vector&lt;T, Alloc&lt;T&gt;&gt;&amp; w)
  { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }     <span class='comment'>// error: redefinition
</span>
template&lt;template&lt;class&gt; class TT&gt;
  void f(TT&lt;int&gt;);

f(v);               <span class='comment'>// error: <span class='tcode_in_codeblock'>Vec</span> not deduced
</span>
template&lt;template&lt;class,class&gt; class TT&gt;
  void g(TT&lt;int, Alloc&lt;int&gt;&gt;);
g(v);               <span class='comment'>// OK: <span class='tcode_in_codeblock'>TT</span> = <span class='tcode_in_codeblock'>vector</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9d8d06a6601794478075b01009c82d61e7d47445/source/templates.tex#L3887'>#</a></div><div id='3.sentence-1' class='sentence'>However, if the <i ><a href='temp.names#nt:template-id'>template-id</a></i> is dependent, subsequent template
argument substitution still applies to the <i ><a href='temp.names#nt:template-id'>template-id</a></i><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename...&gt; using void_t = void;
template&lt;typename T&gt; void_t&lt;typename T::foo&gt; f();
f&lt;int&gt;();           <span class='comment'>// error, <span class='tcode_in_codeblock'>int</span> does not have a nested type <span class='tcode_in_codeblock'>foo</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9d8d06a6601794478075b01009c82d61e7d47445/source/templates.tex#L3898'>#</a></div><div id='4.sentence-1' class='sentence'>The <i ><a href='dcl.name#nt:type-id'>type-id</a></i> in an alias template declaration shall not refer to
the alias template being declared<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>The type produced by an alias template
specialization shall not directly or indirectly make use of that specialization<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct A;
template &lt;class T&gt; using B = typename A&lt;T&gt;::U;
template &lt;class T&gt; struct A {
  typedef B&lt;T&gt; U;
};
B&lt;short&gt; b;         <span class='comment'>// error: instantiation of <span class='tcode_in_codeblock'>B&lt;short&gt;</span> uses own type via <span class='tcode_in_codeblock'>A&lt;short&gt;&#x200b;::&#x200b;U</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9d8d06a6601794478075b01009c82d61e7d47445/source/templates.tex#L3914'>#</a></div><div id='5.sentence-1' class='sentence'>The type of a lambda expression appearing in an alias template declaration
is different between instantiations of that template, even when the lambda
expression is not dependent<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt;
  using A = decltype([] { });   <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;int&gt;</span> and <span class='tcode_in_codeblock'>A&lt;char&gt;</span> refer to different closure types
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></body></html>