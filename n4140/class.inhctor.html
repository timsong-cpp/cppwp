<!DOCTYPE html><html lang='en'><head><title>[class.inhctor]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>12</a> Special member functions <a class='abbr_ref' href='./#special'>[special]</a></h1><div id='class.inhctor'><h2 ><a class='secnum' style='min-width:88pt'>12.9</a> Inheriting constructors <a class='abbr_ref'>[class.inhctor]</a></h2><p ><span class='indexparent'><a class='index' id='constructor,inheriting'></a></span></p><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >A <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i> (<a href='namespace.udecl'>[namespace.udecl]</a>) that names a
constructor implicitly declares a set of <a class='hidden_link' href='#def:inheriting_constructors' id='def:inheriting_constructors'><i>inheriting constructors</i></a>.
The <a class='hidden_link' href='#def:candidate_set_of_inherited_constructors' id='def:candidate_set_of_inherited_constructors'><i>candidate set of inherited constructors</i></a> from the class <span class='texttt'>X</span>
named in the <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i> consists of actual constructors and
notional constructors that result from the transformation of defaulted
parameters as follows:</p><ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.1'>(1.1)</a></div><p >all non-template constructors of <span class='texttt'>X</span>, and
</p></li><li id='1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.2'>(1.2)</a></div><p >for each non-template constructor of <span class='texttt'>X</span> that has at least one parameter with a default argument, the set of constructors that results from omitting any ellipsis parameter specification and successively omitting parameters with a default argument from the end of the parameter-type-list, and
</p></li><li id='1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.3'>(1.3)</a></div><p >all constructor templates of <span class='texttt'>X</span>, and
</p></li><li id='1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.4'>(1.4)</a></div><p >for each constructor template of <span class='texttt'>X</span> that has at least one parameter with a default argument, the set of constructor templates that results from omitting any ellipsis parameter specification and successively omitting parameters with a default argument from the end of the parameter-type-list.
</p></li></ul></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p >The <a class='hidden_link' href='#def:constructor_characteristics' id='def:constructor_characteristics'><i>constructor characteristics</i></a> of a constructor or constructor template are</p><ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div><p >the template parameter list (<a href='temp.param'>[temp.param]</a>), if any,
</p></li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div><p >the <span class='grammarterm'>parameter-type-list</span> (<a href='dcl.fct'>[dcl.fct]</a>),
</p></li><li id='2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.3'>(2.3)</a></div><p >absence or presence of <span class='texttt'>explicit</span> (<a href='class.conv.ctor'>[class.conv.ctor]</a>), and
</p></li><li id='2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.4'>(2.4)</a></div><p >absence or presence of <span class='texttt'>constexpr</span> (<a href='dcl.constexpr'>[dcl.constexpr]</a>).
</p></li></ul></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><p >For each non-template constructor in the candidate set of inherited constructors other
than a constructor having no parameters or a copy/move constructor having a single parameter,
a constructor is implicitly declared with the same constructor characteristics unless
there is a user-declared constructor with the same signature in the complete class where the
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i> appears or the constructor would be a default, copy, or move
constructor for that class. Similarly, for each constructor template in the
candidate set of inherited constructors, a constructor template is implicitly declared
with the same constructor characteristics unless there is an equivalent user-declared
constructor template (<a href='temp.over.link'>[temp.over.link]</a>) in the complete class where the <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>
appears. [&nbsp;<i>Note:</i> Default arguments are not inherited. An
<i ><a href='except.spec#nt:exception-specification'>exception-specification</a></i> is implied as specified
in <a href='except.spec'>[except.spec]</a>.<i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><p >A constructor so declared has the same access as the corresponding constructor
in <span class='texttt'>X</span>. It is deleted if the corresponding constructor in <span class='texttt'>X</span> is
deleted (<a href='dcl.fct.def'>[dcl.fct.def]</a>). An inheriting constructor shall not be explicitly 
instantiated (<a href='temp.explicit'>[temp.explicit]</a>) or explicitly specialized (<a href='temp.expl.spec'>[temp.expl.spec]</a>).</p></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><p >[&nbsp;<i>Note:</i> Default and copy/move constructors may be implicitly declared as specified in <a href='class.ctor'>[class.ctor]</a> and <a href='class.copy'>[class.copy]</a>. <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><p >[&nbsp;<i>Example:</i></p><pre class='codeblock'>
struct B1 {
  B1(int);
};

struct B2 {
  B2(int = 13, int = 42);
};

struct D1 : B1 {
  using B1::B1;
};

struct D2 : B2 {
  using B2::B2;
};
</pre><p >The candidate set of inherited constructors in <span class='texttt'>D1</span> for <span class='texttt'>B1</span> is</p><ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.1'>(6.1)</a></div><p ><span class='texttt'>B1(const B1&amp;)</span>
</p></li><li id='6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.2'>(6.2)</a></div><p ><span class='texttt'>B1(B1&amp;&amp;)</span>
</p></li><li id='6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.3'>(6.3)</a></div><p ><span class='texttt'>B1(int)</span>
</p></li></ul><p >The set of constructors present in <span class='texttt'>D1</span> is</p><ul class='itemize'><li id='6.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.4'>(6.4)</a></div><p ><span class='texttt'>D1()</span>, implicitly-declared default constructor, ill-formed if odr-used
</p></li><li id='6.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.5'>(6.5)</a></div><p ><span class='texttt'>D1(const D1&amp;)</span>, implicitly-declared copy constructor, not inherited
</p></li><li id='6.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.6'>(6.6)</a></div><p ><span class='texttt'>D1(D1&amp;&amp;)</span>, implicitly-declared move constructor, not inherited
</p></li><li id='6.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.7'>(6.7)</a></div><p ><span class='texttt'>D1(int)</span>, implicitly-declared inheriting constructor
</p></li></ul><p >The candidate set of inherited constructors in <span class='texttt'>D2</span> for <span class='texttt'>B2</span> is</p><ul class='itemize'><li id='6.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.8'>(6.8)</a></div><p ><span class='texttt'>B2(const B2&amp;)</span>
</p></li><li id='6.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.9'>(6.9)</a></div><p ><span class='texttt'>B2(B2&amp;&amp;)</span>
</p></li><li id='6.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.10'>(6.10)</a></div><p ><span class='texttt'>B2(int = 13, int = 42)</span>
</p></li><li id='6.11'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.11'>(6.11)</a></div><p ><span class='texttt'>B2(int = 13)</span>
</p></li><li id='6.12'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.12'>(6.12)</a></div><p ><span class='texttt'>B2()</span>
</p></li></ul><p >The set of constructors present in <span class='texttt'>D2</span> is</p><ul class='itemize'><li id='6.13'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.13'>(6.13)</a></div><p ><span class='texttt'>D2()</span>, implicitly-declared default constructor, not inherited
</p></li><li id='6.14'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.14'>(6.14)</a></div><p ><span class='texttt'>D2(const D2&amp;)</span>, implicitly-declared copy constructor, not inherited
</p></li><li id='6.15'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.15'>(6.15)</a></div><p ><span class='texttt'>D2(D2&amp;&amp;)</span>, implicitly-declared move constructor, not inherited
</p></li><li id='6.16'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.16'>(6.16)</a></div><p ><span class='texttt'>D2(int, int)</span>, implicitly-declared inheriting constructor
</p></li><li id='6.17'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.17'>(6.17)</a></div><p ><span class='texttt'>D2(int)</span>, implicitly-declared inheriting constructor
</p></li></ul><p ><i>&nbsp;—&nbsp;end example</i>&nbsp;]</p></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><p >[&nbsp;<i>Note:</i> If two <i ><a href='namespace.udecl#nt:using-declaration'>using-declarations</a></i> declare inheriting constructors with the same
signatures, the program is ill-formed (<a href='class.mem'>[class.mem]</a>, <a href='over.load'>[over.load]</a>), because an
implicitly-declared constructor introduced by the first <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i> is not a
user-declared constructor and thus does not preclude another declaration of a constructor with the
same signature by a subsequent <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>. [&nbsp;<i>Example:</i></p><pre class='codeblock'>
struct B1 {
  B1(int);
};

struct B2 {
  B2(int);
};

struct D1 : B1, B2 {
  using B1::B1;
  using B2::B2;     
};                  <span class='comment'>// ill-formed: attempts to declare D1(int) twice
</span>
struct D2 : B1, B2 {
  using B1::B1;
  using B2::B2;
  D2(int);          <span class='comment'>// OK: user declaration supersedes both implicit declarations
</span>};
</pre><p ><i>&nbsp;—&nbsp;end example</i>&nbsp;] <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><p >An inheriting constructor for a class is implicitly defined when
it is odr-used (<a href='basic.def.odr'>[basic.def.odr]</a>) to
create an object of its class type (<a href='intro.object'>[intro.object]</a>). An implicitly-defined inheriting
constructor performs the set of initializations of the class that would be performed by a
user-written <span class='texttt'>inline</span> constructor for that class with a <i ><a href='class.base.init#nt:mem-initializer-list'>mem-initializer-list</a></i>
whose only <i ><a href='class.base.init#nt:mem-initializer'>mem-initializer</a></i> has a <i ><a href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a></i> that names the base
class denoted in the <i ><a href='expr.prim.general#nt:nested-name-specifier'>nested-name-specifier</a></i> of the
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i> and an <i ><a href='expr.post#nt:expression-list'>expression-list</a></i> as specified below, and where
the <i ><a href='stmt.block#nt:compound-statement'>compound-statement</a></i> in its function body is empty (<a href='class.base.init'>[class.base.init]</a>). If that
user-written constructor would be ill-formed, the program is ill-formed. Each
<i ><a href='expr.comma#nt:expression'>expression</a></i> in the <i ><a href='expr.post#nt:expression-list'>expression-list</a></i> is of the form
<span class='texttt'>static_cast&lt;T&amp;&amp;&gt;(p)</span>, where <span class='texttt'>p</span> is the name of the corresponding constructor
parameter and <span class='texttt'>T</span> is the declared type of <span class='texttt'>p</span>.</p></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><p >[&nbsp;<i>Example:</i></p><pre class='codeblock'>
struct B1 {
  B1(int) { }
};

struct B2 {
  B2(double) { }
};

struct D1 : B1 {
  using B1::B1;     <span class='comment'>// implicitly declares <span class='texttt'>D1(int)</span>
</span>  int x;
};

void test() {
  D1 d(6);          <span class='comment'>// OK: <span class='texttt'>d.x</span> is not initialized
</span>  D1 e;             <span class='comment'>// error: <span class='texttt'>D1</span> has no default constructor
</span>}

struct D2 : B2 {
  using B2::B2;     <span class='comment'>// OK: implicitly declares <span class='texttt'>D2(double)</span>
</span>  B1 b;
};

D2 f(1.0);          <span class='comment'>// error: B1 has no default constructor
</span>
template&lt; class T &gt;
struct D : T {
  using T::T;       <span class='comment'>// declares all constructors from class T
</span>  ~D() { std::clog &lt;&lt; "Destroying wrapper" &lt;&lt; std::endl; }
};
</pre><p >Class template <span class='texttt'>D</span> wraps any class and forwards all of its constructors,
while writing a message to the standard log whenever an object of class
<span class='texttt'>D</span> is destroyed. <i>&nbsp;—&nbsp;end example</i>&nbsp;]<span class='indexparent'><a class='index' id='constructor,inheriting'></a></span>
</p></div></div></div></body></html>