<!DOCTYPE html><html lang='en'><head><title>[dcl.attr]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>7</a> Declarations <a class='abbr_ref' href='./#dcl.dcl'>[dcl.dcl]</a></h1><div id='dcl.attr'><h2 ><a class='secnum' style='min-width:88pt'>7.6</a> Attributes <a class='abbr_ref'>[dcl.attr]</a></h2><p ><span class='indexparent'><a class='index' id='attribute'></a></span></p><div id='grammar'><h3 ><a class='secnum' href='#grammar' style='min-width:103pt'>7.6.1</a> Attribute syntax and semantics <a class='abbr_ref' href='dcl.attr.grammar'>[dcl.attr.grammar]</a></h3><div class='para' id='grammar-1'><div class='marginalizedparent'><a class='marginalized' href='#grammar-1'>1</a></div><p ><span class='indexparent'><a class='index' id='attribute,syntax_and_semantics'></a></span>Attributes specify additional information for various source constructs
such as types, variables, names, blocks, or translation units.</p><pre class='bnf'><a id='nt:attribute-specifier-seq'>attribute-specifier-seq:</a>
  <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class='math'><sub ><span class='mathit'>opt</span></sub></span> <i ><a href='dcl.attr.grammar#nt:attribute-specifier'>attribute-specifier</a></i></pre><pre class='bnf'><a id='nt:attribute-specifier'>attribute-specifier:</a>
  <span class='terminal'>[</span> <span class='terminal'>[</span> <i ><a href='dcl.attr.grammar#nt:attribute-list'>attribute-list</a></i> <span class='terminal'>]</span> <span class='terminal'>]</span>
  <i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifier</a></i></pre><pre class='bnf'><a id='nt:alignment-specifier'>alignment-specifier:</a>
  <span class='terminal'>alignas (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>...</span><span class='math'><sub ><span class='mathit'>opt</span></sub></span> <span class='terminal'>)</span>
  <span class='terminal'>alignas (</span> <i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i> <span class='terminal'>...</span><span class='math'><sub ><span class='mathit'>opt</span></sub></span> <span class='terminal'>)</span></pre><pre class='bnf'><a id='nt:attribute-list'>attribute-list:</a>
  <i ><a href='dcl.attr.grammar#nt:attribute'>attribute</a></i><span class='math'><sub ><span class='mathit'>opt</span></sub></span>
  <i ><a href='dcl.attr.grammar#nt:attribute-list'>attribute-list</a></i> <span class='terminal'>,</span> <i ><a href='dcl.attr.grammar#nt:attribute'>attribute</a></i><span class='math'><sub ><span class='mathit'>opt</span></sub></span>
  <i ><a href='dcl.attr.grammar#nt:attribute'>attribute</a></i> <span class='terminal'>...</span>
  <i ><a href='dcl.attr.grammar#nt:attribute-list'>attribute-list</a></i> <span class='terminal'>,</span> <i ><a href='dcl.attr.grammar#nt:attribute'>attribute</a></i> <span class='terminal'>...</span></pre><pre class='bnf'><a id='nt:attribute'>attribute:</a>
    <i ><a href='dcl.attr.grammar#nt:attribute-token'>attribute-token</a></i> <i ><a href='dcl.attr.grammar#nt:attribute-argument-clause'>attribute-argument-clause</a></i><span class='math'><sub ><span class='mathit'>opt</span></sub></span></pre><pre class='bnf'><a id='nt:attribute-token'>attribute-token:</a>
    <i ><a href='lex.name#nt:identifier'>identifier</a></i>
    <i ><a href='dcl.attr.grammar#nt:attribute-scoped-token'>attribute-scoped-token</a></i></pre><pre class='bnf'><a id='nt:attribute-scoped-token'>attribute-scoped-token:</a>
    <i ><a href='dcl.attr.grammar#nt:attribute-namespace'>attribute-namespace</a></i> <span class='terminal'>::</span> <i ><a href='lex.name#nt:identifier'>identifier</a></i></pre><pre class='bnf'><a id='nt:attribute-namespace'>attribute-namespace:</a>
    <i ><a href='lex.name#nt:identifier'>identifier</a></i></pre><pre class='bnf'><a id='nt:attribute-argument-clause'>attribute-argument-clause:</a>
    <span class='terminal'>(</span> <i ><a href='dcl.attr.grammar#nt:balanced-token-seq'>balanced-token-seq</a></i> <span class='terminal'>)</span></pre><pre class='bnf'><a id='nt:balanced-token-seq'>balanced-token-seq:</a>
    <i ><a href='dcl.attr.grammar#nt:balanced-token'>balanced-token</a></i><span class='math'><sub ><span class='mathit'>opt</span></sub></span>
    <i ><a href='dcl.attr.grammar#nt:balanced-token-seq'>balanced-token-seq</a></i> <i ><a href='dcl.attr.grammar#nt:balanced-token'>balanced-token</a></i></pre><pre class='bnf'><a id='nt:balanced-token'>balanced-token:</a>
    <span class='terminal'>(</span> <i ><a href='dcl.attr.grammar#nt:balanced-token-seq'>balanced-token-seq</a></i> <span class='terminal'>)</span>
    <span class='terminal'>[</span> <i ><a href='dcl.attr.grammar#nt:balanced-token-seq'>balanced-token-seq</a></i> <span class='terminal'>]</span>
    <span class='terminal'>{</span> <i ><a href='dcl.attr.grammar#nt:balanced-token-seq'>balanced-token-seq</a></i> <span class='terminal'>}</span>
    <span class='textnormal'>any <span class='grammarterm'>token</span> other than a parenthesis, a bracket, or a brace</span></pre></div><div class='para' id='grammar-2'><div class='marginalizedparent'><a class='marginalized' href='#grammar-2'>2</a></div><p >[&nbsp;<i>Note:</i> For each individual attribute, the form of the
<i ><a href='dcl.attr.grammar#nt:balanced-token-seq'>balanced-token-seq</a></i> will be specified. <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='grammar-3'><div class='marginalizedparent'><a class='marginalized' href='#grammar-3'>3</a></div><p >In an <i ><a href='dcl.attr.grammar#nt:attribute-list'>attribute-list</a></i>, an ellipsis may appear only if that
<i ><a href='dcl.attr.grammar#nt:attribute'>attribute</a></i>'s specification permits it. An <i ><a href='dcl.attr.grammar#nt:attribute'>attribute</a></i> followed
by an ellipsis is a pack expansion (<a href='temp.variadic'>[temp.variadic]</a>).
An <i ><a href='dcl.attr.grammar#nt:attribute-specifier'>attribute-specifier</a></i> that contains no <i ><a href='dcl.attr.grammar#nt:attribute'>attributes</a></i> has no
effect. The order in which the <span class='grammarterm'>attribute-tokens</span> appear in an
<i ><a href='dcl.attr.grammar#nt:attribute-list'>attribute-list</a></i> is not significant. If a
keyword (<a href='lex.key'>[lex.key]</a>)
or an alternative token (<a href='lex.digraph'>[lex.digraph]</a>) that satisfies the syntactic requirements
of an <i ><a href='lex.name#nt:identifier'>identifier</a></i> (<a href='lex.name'>[lex.name]</a>) is
contained in
an <i ><a href='dcl.attr.grammar#nt:attribute-token'>attribute-token</a></i>, it is considered an identifier. No name
lookup (<a href='basic.lookup'>[basic.lookup]</a>) is performed on any of the identifiers contained in an
<i ><a href='dcl.attr.grammar#nt:attribute-token'>attribute-token</a></i>. The <i ><a href='dcl.attr.grammar#nt:attribute-token'>attribute-token</a></i> determines additional
requirements on the <i ><a href='dcl.attr.grammar#nt:attribute-argument-clause'>attribute-argument-clause</a></i> (if any). The use of an
<i ><a href='dcl.attr.grammar#nt:attribute-scoped-token'>attribute-scoped-token</a></i> is conditionally-supported, with
<span class='indexparent'><a class='index' id='behavior_of_attribute_scoped_token'></a></span>implementation-defined behavior. [&nbsp;<i>Note:</i> Each implementation
should choose a distinctive name for the <i ><a href='dcl.attr.grammar#nt:attribute-namespace'>attribute-namespace</a></i> in an
<i ><a href='dcl.attr.grammar#nt:attribute-scoped-token'>attribute-scoped-token</a></i>. <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='grammar-4'><div class='marginalizedparent'><a class='marginalized' href='#grammar-4'>4</a></div><p >Each <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> is said to <a class='hidden_link' href='#def:appertain' id='def:appertain'><i>appertain</i></a> to some entity or
statement, identified by the syntactic context where it appears
(Clause <a href='stmt.stmt'>[stmt.stmt]</a>, Clause <a href='dcl.dcl'>[dcl.dcl]</a>,
Clause <a href='dcl.decl'>[dcl.decl]</a>). If an <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> that appertains to some
entity or statement contains an <i ><a href='dcl.attr.grammar#nt:attribute'>attribute</a></i> that
is not allowed to apply to that
entity or statement, the program is ill-formed. If an <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i>
appertains to a friend declaration (<a href='class.friend'>[class.friend]</a>), that declaration shall be a
definition. No <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> shall appertain to an explicit
instantiation (<a href='temp.explicit'>[temp.explicit]</a>).</p></div><div class='para' id='grammar-5'><div class='marginalizedparent'><a class='marginalized' href='#grammar-5'>5</a></div><p >For an <i ><a href='dcl.attr.grammar#nt:attribute-token'>attribute-token</a></i> not specified in this International Standard, the
behavior is <span class='indexparent'><a class='index' id='behavior_of_non-standard_attributes'></a></span>implementation-defined.</p></div><div class='para' id='grammar-6'><div class='marginalizedparent'><a class='marginalized' href='#grammar-6'>6</a></div><p >Two consecutive left square bracket tokens shall appear only when introducing an
<i ><a href='dcl.attr.grammar#nt:attribute-specifier'>attribute-specifier</a></i>. [&nbsp;<i>Note:</i> If two consecutive left square brackets appear
where an <i ><a href='dcl.attr.grammar#nt:attribute-specifier'>attribute-specifier</a></i> is not allowed, the program is ill-formed even
if the brackets match an alternative grammar production. <i>&nbsp;—&nbsp;end note</i>&nbsp;] [&nbsp;<i>Example:</i>
</p><pre class='codeblock'>
int p[10];
void f() {
  int x = 42, y[5];
  int(p[[x] { return x; }()]);  <span class='comment'>// error: invalid attribute on a nested
</span>                                <span class='comment'>// <span class='grammarterm'>declarator-id</span> and not a function-style cast of
</span>                                <span class='comment'>// an element of <span class='texttt'>p</span>.
</span>  y[[] { return 2; }()] = 2;    <span class='comment'>// error even though attributes are not allowed
</span>                                <span class='comment'>// in this context.
</span>}
</pre><p ><i>&nbsp;—&nbsp;end example</i>&nbsp;]</p></div></div><div id='dcl.align'><h3 ><a class='secnum' href='#dcl.align' style='min-width:103pt'>7.6.2</a> Alignment specifier <a class='abbr_ref' href='dcl.align'>[dcl.align]</a></h3><p ><span class='indexparent'><a class='index' id='attribute,alignment'></a></span></p><div class='para' id='dcl.align-1'><div class='marginalizedparent'><a class='marginalized' href='#dcl.align-1'>1</a></div><p >An <i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifier</a></i>
may be applied to a variable
or to a class data member, but it shall not be applied to a bit-field, a function
parameter, an <i ><a href='except#nt:exception-declaration'>exception-declaration</a></i> (<a href='except.handle'>[except.handle]</a>), or a variable
declared with the <span class='texttt'>register</span> storage class specifier.
An <i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifier</a></i> may also be applied to the declaration or
definition of a class (in an
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> (<a href='dcl.type.elab'>[dcl.type.elab]</a>) or
<i ><a href='class#nt:class-head'>class-head</a></i> (Clause <a href='class'>[class]</a>), respectively) and to the
declaration or definition of an enumeration (in an
<i ><a href='dcl.enum#nt:opaque-enum-declaration'>opaque-enum-declaration</a></i> or <i ><a href='dcl.enum#nt:enum-head'>enum-head</a></i>,
respectively (<a href='dcl.enum'>[dcl.enum]</a>)).
An <i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifier</a></i> with an ellipsis is a pack expansion (<a href='temp.variadic'>[temp.variadic]</a>).</p></div><div class='para' id='dcl.align-2'><div class='marginalizedparent'><a class='marginalized' href='#dcl.align-2'>2</a></div><p >When the <i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifier</a></i> is of the form
<span class='texttt'>alignas(</span> <i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i> <span class='texttt'>)</span>:</p><ul class='itemize'><li id='dcl.align-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dcl.align-2.1'>(2.1)</a></div><p >the <i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i> shall be an integral constant expression</p></li><li id='dcl.align-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dcl.align-2.2'>(2.2)</a></div><p >if the constant expression evaluates to a fundamental alignment,
the alignment requirement of the declared entity shall be the specified
fundamental alignment</p></li><li id='dcl.align-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dcl.align-2.3'>(2.3)</a></div><p >if the constant expression evaluates to an extended alignment and
the implementation supports that alignment in the context of the declaration,
the alignment of the declared entity shall be that alignment</p></li><li id='dcl.align-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dcl.align-2.4'>(2.4)</a></div><p >if the constant expression evaluates to an extended alignment and
the implementation does not support that alignment in the context of the
declaration, the program is ill-formed</p></li><li id='dcl.align-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dcl.align-2.5'>(2.5)</a></div><p >if the constant expression evaluates to zero, the alignment specifier
shall have no effect</p></li><li id='dcl.align-2.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dcl.align-2.6'>(2.6)</a></div><p >otherwise, the program is ill-formed.
</p></li></ul></div><div class='para' id='dcl.align-3'><div class='marginalizedparent'><a class='marginalized' href='#dcl.align-3'>3</a></div><p >When the <i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifier</a></i> is of the form
<span class='texttt'>alignas(</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='texttt'>)</span>, it shall have the same
effect as <span class='texttt'>alignas(<span class='discretionary'></span>alignof(</span><i ><a href='dcl.name#nt:type-id'>type-id</a></i><span class='texttt'>))</span> (<a href='expr.alignof'>[expr.alignof]</a>).</p></div><div class='para' id='dcl.align-4'><div class='marginalizedparent'><a class='marginalized' href='#dcl.align-4'>4</a></div><p >When multiple <i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifiers</a></i> are specified for an entity, the
alignment requirement shall be set to the strictest specified alignment.</p></div><div class='para' id='dcl.align-5'><div class='marginalizedparent'><a class='marginalized' href='#dcl.align-5'>5</a></div><p >The combined effect of all <i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifiers</a></i> in a declaration shall not
specify an alignment that is less strict than the alignment that would
be required for the entity being declared if all <i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifiers</a></i>
were omitted (including those in other declarations).</p></div><div class='para' id='dcl.align-6'><div class='marginalizedparent'><a class='marginalized' href='#dcl.align-6'>6</a></div><p >If the defining declaration of an entity has an
<i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifier</a></i>, any non-defining
declaration of that entity shall either specify equivalent alignment or have no
<i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifier</a></i>.
Conversely, if any declaration of an entity has an
<i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifier</a></i>,
every defining
declaration of that entity shall specify an equivalent alignment.
No diagnostic is required if declarations of an entity have
different <i ><a href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifiers</a></i>
in different translation units.</p><p >[&nbsp;<i>Example:</i>
</p><pre class='codeblock'>
<span class='comment'>// Translation unit #1:
</span>struct S { int x; } s, p = &amp;s;

<span class='comment'>// Translation unit #2:
</span>struct alignas(16) S;           <span class='comment'>// error: definition of <span class='texttt'>S</span> lacks alignment; no
</span>extern S* p;                    <span class='comment'>// diagnostic required
</span></pre><p ><i>&nbsp;—&nbsp;end example</i>&nbsp;]</p></div><div class='para' id='dcl.align-7'><div class='marginalizedparent'><a class='marginalized' href='#dcl.align-7'>7</a></div><p >[&nbsp;<i>Example:</i> An aligned buffer with an alignment requirement
of <span class='texttt'>A</span> and holding <span class='texttt'>N</span> elements of type <span class='texttt'>T</span> other than
<span class='texttt'>char</span>, <span class='texttt'>signed char</span>, or <span class='texttt'>unsigned char</span>
can be declared as:</p><pre class='codeblock'>
alignas(T) alignas(A) T buffer[N];
</pre><p >Specifying <span class='texttt'>alignas(T)</span> ensures
that the final requested alignment will not be weaker than <span class='texttt'>alignof(T)</span>,
and therefore the program will not be ill-formed.
<i>&nbsp;—&nbsp;end example</i>&nbsp;]</p></div><div class='para' id='dcl.align-8'><div class='marginalizedparent'><a class='marginalized' href='#dcl.align-8'>8</a></div><p >[&nbsp;<i>Example:</i>
</p><pre class='codeblock'>
alignas(double) void f();                         <span class='comment'>// error: alignment applied to function
</span>alignas(double) unsigned char c[sizeof(double)];  <span class='comment'>// array of characters, suitably aligned for a <span class='texttt'>double</span>
</span>extern unsigned char c[sizeof(double)];           <span class='comment'>// no <span class='texttt'>alignas</span> necessary
</span>alignas(float)
  extern unsigned char c[sizeof(double)];         <span class='comment'>// error: different alignment in declaration
</span></pre><p ><i>&nbsp;—&nbsp;end example</i>&nbsp;]</p></div></div><div id='noreturn'><h3 ><a class='secnum' href='#noreturn' style='min-width:103pt'>7.6.3</a> Noreturn attribute <a class='abbr_ref' href='dcl.attr.noreturn'>[dcl.attr.noreturn]</a></h3><p ><span class='indexparent'><a class='index' id='attribute,noreturn'></a></span></p><div class='para' id='noreturn-1'><div class='marginalizedparent'><a class='marginalized' href='#noreturn-1'>1</a></div><p >The <i ><a href='dcl.attr.grammar#nt:attribute-token'>attribute-token</a></i> <span class='texttt'>noreturn</span> specifies that a function does not return. It
shall appear at most once in each <i ><a href='dcl.attr.grammar#nt:attribute-list'>attribute-list</a></i> and no
<i ><a href='dcl.attr.grammar#nt:attribute-argument-clause'>attribute-argument-clause</a></i> shall be present. The attribute may be applied to the
<i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i> in a function declaration. The first declaration of a function shall
specify the <span class='texttt'>noreturn</span> attribute if any declaration of that function specifies the
<span class='texttt'>noreturn</span> attribute. If a function is declared with the <span class='texttt'>noreturn</span> attribute in one
translation unit and the same function is declared without the <span class='texttt'>noreturn</span> attribute in another
translation unit, the program is ill-formed; no diagnostic required.</p></div><div class='para' id='noreturn-2'><div class='marginalizedparent'><a class='marginalized' href='#noreturn-2'>2</a></div><p >If a function <span class='texttt'>f</span> is called where <span class='texttt'>f</span> was previously declared with the <span class='texttt'>noreturn</span>
attribute and <span class='texttt'>f</span> eventually returns, the behavior is undefined. [&nbsp;<i>Note:</i> The function may
terminate by throwing an exception. <i>&nbsp;—&nbsp;end note</i>&nbsp;] [&nbsp;<i>Note:</i> Implementations are encouraged to issue a
warning if a function marked <span class='texttt'>[[noreturn]]</span> might return. <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='noreturn-3'><div class='marginalizedparent'><a class='marginalized' href='#noreturn-3'>3</a></div><p >[&nbsp;<i>Example:</i>
</p><pre class='codeblock'>
[[ noreturn ]] void f() {
  throw "error";        <span class='comment'>// OK
</span>}

[[ noreturn ]] void q(int i) { <span class='comment'>// behavior is undefined if called with an argument <span class='texttt'>&lt;= 0</span>
</span>  if (i &gt; 0)
    throw "positive";
}
</pre><p ><i>&nbsp;—&nbsp;end example</i>&nbsp;]</p></div></div><div id='depend'><h3 ><a class='secnum' href='#depend' style='min-width:103pt'>7.6.4</a> Carries dependency attribute <a class='abbr_ref' href='dcl.attr.depend'>[dcl.attr.depend]</a></h3><p ><span class='indexparent'><a class='index' id='attribute,carries_dependency'></a></span></p><div class='para' id='depend-1'><div class='marginalizedparent'><a class='marginalized' href='#depend-1'>1</a></div><p >The <i ><a href='dcl.attr.grammar#nt:attribute-token'>attribute-token</a></i> <span class='texttt'>carries_dependency</span> specifies
dependency propagation into and out of functions. It shall appear at most once
in each <i ><a href='dcl.attr.grammar#nt:attribute-list'>attribute-list</a></i> and no
<i ><a href='dcl.attr.grammar#nt:attribute-argument-clause'>attribute-argument-clause</a></i> shall be present. The attribute may be
applied to the <i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i> of a
<i ><a href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a></i> in a function declaration or lambda, in
which case it specifies that the initialization of the parameter carries a
dependency to (<a href='intro.multithread'>[intro.multithread]</a>) each lvalue-to-rvalue
conversion (<a href='conv.lval'>[conv.lval]</a>) of that object. The attribute may also be applied
to the <i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i> of a function declaration, in which case it
specifies that the return value, if any, carries a dependency to the evaluation
of the function call expression.</p></div><div class='para' id='depend-2'><div class='marginalizedparent'><a class='marginalized' href='#depend-2'>2</a></div><p >The first declaration of a function shall specify the <span class='texttt'>carries_dependency</span> attribute for its
<i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i> if any declaration of the function specifies the
<span class='texttt'>carries_dependency</span> attribute. Furthermore, the first declaration of a function shall specify
the <span class='texttt'>carries_dependency</span> attribute for a parameter if any declaration of that function
specifies the <span class='texttt'>carries_dependency</span> attribute for that parameter. If a function or one of its
parameters is declared with the <span class='texttt'>carries_dependency</span> attribute in its first declaration in one
translation unit and the same function or one of its parameters is declared without the
<span class='texttt'>carries_dependency</span> attribute in its first declaration in another translation unit, the
program is ill-formed; no diagnostic required.</p></div><div class='para' id='depend-3'><div class='marginalizedparent'><a class='marginalized' href='#depend-3'>3</a></div><p >[&nbsp;<i>Note:</i> The <span class='texttt'>carries_dependency</span> attribute does not change the meaning of the
program, but may result in generation of more efficient code. <i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='depend-4'><div class='marginalizedparent'><a class='marginalized' href='#depend-4'>4</a></div><p >[&nbsp;<i>Example:</i>
</p><pre class='codeblock'>
<span class='comment'>/* Translation unit A. */</span>

struct foo { int* a; int* b; };
std::atomic&lt;struct foo *&gt; foo_head[10];
int foo_array[10][10];

[[carries_dependency]] struct foo* f(int i) {
  return foo_head[i].load(memory_order_consume);
}

int g(int* x, int* y [[carries_dependency]]) {
  return kill_dependency(foo_array[*x][*y]);
}

<span class='comment'>/* Translation unit B. */</span>

[[carries_dependency]] struct foo* f(int i);
int g(int* x, int* y [[carries_dependency]]);

int c = 3;

void h(int i) {
  struct foo* p;

  p = f(i);
  do_something_with(g(&amp;c, p-&gt;a));
  do_something_with(g(p-&gt;a, &amp;c));
}
</pre></div><div class='para' id='depend-5'><div class='marginalizedparent'><a class='marginalized' href='#depend-5'>5</a></div><p >The <span class='texttt'>carries_dependency</span> attribute on function <span class='texttt'>f</span> means that the
return value carries a dependency out of <span class='texttt'>f</span>, so that the implementation
need not constrain ordering upon return from <span class='texttt'>f</span>. Implementations of
<span class='texttt'>f</span> and its caller may choose to preserve dependencies instead of emitting
hardware memory ordering instructions (a.k.a. fences).</p></div><div class='para' id='depend-6'><div class='marginalizedparent'><a class='marginalized' href='#depend-6'>6</a></div><p >Function <span class='texttt'>g</span>'s second parameter has a <span class='texttt'>carries_dependency</span> attribute,
but its first parameter does not. Therefore, function <span class='texttt'>h</span>'s first call to
<span class='texttt'>g</span> carries a dependency into <span class='texttt'>g</span>, but its second call does not. The
implementation might need to insert a fence prior to the second call to
<span class='texttt'>g</span>.</p><p ><i>&nbsp;—&nbsp;end example</i>&nbsp;]<span class='indexparent'><a class='index' id='attribute'></a></span><span class='indexparent'><a class='index' id='declaration'></a></span></p></div></div><div id='deprecated'><h3 ><a class='secnum' href='#deprecated' style='min-width:103pt'>7.6.5</a> Deprecated attribute <a class='abbr_ref' href='dcl.attr.deprecated'>[dcl.attr.deprecated]</a></h3><p ><span class='indexparent'><a class='index' id='attribute,deprecated'></a></span></p><div class='para' id='deprecated-1'><div class='marginalizedparent'><a class='marginalized' href='#deprecated-1'>1</a></div><p >The <i ><a href='dcl.attr.grammar#nt:attribute-token'>attribute-token</a></i> <span class='texttt'>deprecated</span> can be used to mark names and entities
whose use is still allowed, but is discouraged for some reason. [&nbsp;<i>Note:</i> in particular,
<span class='texttt'>deprecated</span> is appropriate for names and entities that are deemed obsolescent or
unsafe. <i>&nbsp;—&nbsp;end note</i>&nbsp;] It shall appear at most once in each <i ><a href='dcl.attr.grammar#nt:attribute-list'>attribute-list</a></i>. An
<i ><a href='dcl.attr.grammar#nt:attribute-argument-clause'>attribute-argument-clause</a></i> may be present and, if present, it shall have the form:</p><pre class='codeblock'>
( <span class='grammarterm'>string-literal</span> )
</pre><p >[&nbsp;<i>Note:</i> the <i ><a href='lex.string#nt:string-literal'>string-literal</a></i> in the <i ><a href='dcl.attr.grammar#nt:attribute-argument-clause'>attribute-argument-clause</a></i>
could be used to explain the rationale for deprecation and/or to suggest a replacing entity.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='deprecated-2'><div class='marginalizedparent'><a class='marginalized' href='#deprecated-2'>2</a></div><p >The attribute may be applied to the declaration of a class, a <i ><a href='dcl.typedef#nt:typedef-name'>typedef-name</a></i>, a
variable, a non-static data member, a function, an enumeration, or a template specialization.</p></div><div class='para' id='deprecated-3'><div class='marginalizedparent'><a class='marginalized' href='#deprecated-3'>3</a></div><p >A name or entity declared without the <span class='texttt'>deprecated</span> attribute can later be re-declared
with the attribute and vice-versa. [&nbsp;<i>Note:</i> Thus, an entity initially declared without the
attribute can be marked as deprecated by a subsequent redeclaration. However, after an entity
is marked as deprecated, later redeclarations do not un-deprecate the entity. <i>&nbsp;—&nbsp;end note</i>&nbsp;] 
Redeclarations using different forms of the attribute (with or without the
<i ><a href='dcl.attr.grammar#nt:attribute-argument-clause'>attribute-argument-clause</a></i> or with different
<i ><a href='dcl.attr.grammar#nt:attribute-argument-clause'>attribute-argument-clauses</a></i>) are allowed.</p></div><div class='para' id='deprecated-4'><div class='marginalizedparent'><a class='marginalized' href='#deprecated-4'>4</a></div><p >[&nbsp;<i>Note:</i> Implementations may use the <span class='texttt'>deprecated </span>attribute to produce a diagnostic
message in case the program refers to a name or entity other than to declare it, after a
declaration that specifies the attribute. The diagnostic message may include the text provided
within the <i ><a href='dcl.attr.grammar#nt:attribute-argument-clause'>attribute-argument-clause</a></i> of any <span class='texttt'>deprecated</span> attribute applied
to the name or entity. <i>&nbsp;—&nbsp;end note</i>&nbsp;]
</p></div></div></div></div></body></html>