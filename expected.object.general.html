<!DOCTYPE html><html lang='en'><head><title>[expected.object.general]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>22</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>22.8</a> Expected objects <a class='abbr_ref' href='expected#object.general'>[expected]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>22.8.6</a> Class template <span class='texttt'>expected</span> <a class='abbr_ref' href='expected.expected#expected.object.general'>[expected.expected]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>22.8.6.1</a> General <a class='abbr_ref'>[expected.object.general]</a></h4><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> expected <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> <span id='lib:expected,value_type'><span id='lib:value_type,expected'>value_type</span></span> <span class='operator'>=</span> T;
    <span class='keyword'>using</span> <span id='lib:expected,error_type'><span id='lib:error_type,expected'>error_type</span></span> <span class='operator'>=</span> E;
    <span class='keyword'>using</span> <span id='lib:expected,unexpected_type'><span id='lib:unexpected_type,expected'>unexpected_type</span></span> <span class='operator'>=</span> unexpected<span class='anglebracket'>&lt;</span>E<span class='anglebracket'>&gt;</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    <span class='keyword'>using</span> <span id='lib:expected,rebind'><span id='lib:rebind,expected'>rebind</span></span> <span class='operator'>=</span> expected<span class='anglebracket'>&lt;</span>U, error_type<span class='anglebracket'>&gt;</span>;

    <span class='comment'>// <a href='expected.object.cons' title='22.8.6.2&emsp;Constructors'>[expected.<span class='shy'></span>object.<span class='shy'></span>cons]</a>, constructors</span>
    <span class='keyword'>constexpr</span> expected<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> expected<span class='parenthesis'>(</span><span class='keyword'>const</span> expected<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> expected<span class='parenthesis'>(</span>expected<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span> G<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span> expected<span class='parenthesis'>(</span><span class='keyword'>const</span> expected<span class='anglebracket'>&lt;</span>U, G<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span> G<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span> expected<span class='parenthesis'>(</span>expected<span class='anglebracket'>&lt;</span>U, G<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U <span class='operator'>=</span> T<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span> expected<span class='parenthesis'>(</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> G<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span> expected<span class='parenthesis'>(</span><span class='keyword'>const</span> unexpected<span class='anglebracket'>&lt;</span>G<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> G<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span> expected<span class='parenthesis'>(</span>unexpected<span class='anglebracket'>&lt;</span>G<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> expected<span class='parenthesis'>(</span>in_place_t, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> expected<span class='parenthesis'>(</span>in_place_t, initializer_list<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span>, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> expected<span class='parenthesis'>(</span>unexpect_t, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> expected<span class='parenthesis'>(</span>unexpect_t, initializer_list<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span>, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='expected.object.dtor' title='22.8.6.3&emsp;Destructor'>[expected.<span class='shy'></span>object.<span class='shy'></span>dtor]</a>, destructor</span>
    <span class='keyword'>constexpr</span> <span class='operator'>~</span>expected<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='expected.object.assign' title='22.8.6.4&emsp;Assignment'>[expected.<span class='shy'></span>object.<span class='shy'></span>assign]</a>, assignment</span>
    <span class='keyword'>constexpr</span> expected<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> expected<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> expected<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>expected<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U <span class='operator'>=</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> expected<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> G<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> expected<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unexpected<span class='anglebracket'>&lt;</span>G<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> G<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> expected<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>unexpected<span class='anglebracket'>&lt;</span>G<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> emplace<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> emplace<span class='parenthesis'>(</span>initializer_list<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span>, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// <a href='expected.object.swap' title='22.8.6.5&emsp;Swap'>[expected.<span class='shy'></span>object.<span class='shy'></span>swap]</a>, swap</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>expected<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span>;
    <span class='keyword'>friend</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>expected<span class='operator'>&amp;</span> x, expected<span class='operator'>&amp;</span> y<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='keyword'>noexcept</span><span class='parenthesis'>(</span>x<span class='operator'>.</span>swap<span class='parenthesis'>(</span>y<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='expected.object.obs' title='22.8.6.6&emsp;Observers'>[expected.<span class='shy'></span>object.<span class='shy'></span>obs]</a>, observers</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> <span class='keyword'>operator</span> <span class='keyword'>bool</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> has_value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>&amp;</span> value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> E<span class='operator'>&amp;</span> error<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> E<span class='operator'>&amp;</span> error<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> E<span class='operator'>&amp;</span><span class='operator'>&amp;</span> error<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> E<span class='operator'>&amp;</span><span class='operator'>&amp;</span> error<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> T value_or<span class='parenthesis'>(</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> T value_or<span class='parenthesis'>(</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> G <span class='operator'>=</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> E error_or<span class='parenthesis'>(</span>G<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> G <span class='operator'>=</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> E error_or<span class='parenthesis'>(</span>G<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;

    <span class='comment'>// <a href='expected.object.monadic' title='22.8.6.7&emsp;Monadic operations'>[expected.<span class='shy'></span>object.<span class='shy'></span>monadic]</a>, monadic operations</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> and_then<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> and_then<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> and_then<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> and_then<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> or_else<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> or_else<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> or_else<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> or_else<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform_error<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform_error<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform_error<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform_error<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;

    <span class='comment'>// <a href='expected.object.eq' title='22.8.6.8&emsp;Equality operators'>[expected.<span class='shy'></span>object.<span class='shy'></span>eq]</a>, equality operators</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2, <span class='keyword'>class</span> E2<span class='anglebracket'>&gt;</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span><span class='operator'>!</span>is_void_v<span class='anglebracket'>&lt;</span>T2<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>
      <span class='keyword'>friend</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> expected<span class='operator'>&amp;</span> x, <span class='keyword'>const</span> expected<span class='anglebracket'>&lt;</span>T2, E2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span>
      <span class='keyword'>friend</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> expected<span class='operator'>&amp;</span>, <span class='keyword'>const</span> T2<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E2<span class='anglebracket'>&gt;</span>
      <span class='keyword'>friend</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> expected<span class='operator'>&amp;</span>, <span class='keyword'>const</span> unexpected<span class='anglebracket'>&lt;</span>E2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    <span class='keyword'>bool</span> <i >has_val</i>;       <span class='comment'>// <i >exposition only</i></span>
    <span class='keyword'>union</span> <span class='curlybracket'>{</span>
      T <i >val</i>;            <span class='comment'>// <i >exposition only</i></span>
      E <i >unex</i>;           <span class='comment'>// <i >exposition only</i></span>
    <span class='curlybracket'>}</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/utilities.tex#L7340'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>Any object of type <span class='texttt'>expected<span class='anglebracket'>&lt;</span>T, E<span class='anglebracket'>&gt;</span></span> either
contains a value of type <span class='texttt'>T</span> or
a value of type <span class='texttt'>E</span> within its own storage<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>Implementations are not permitted to use additional storage,
such as dynamic memory,
to allocate the object of type <span class='texttt'>T</span> or the object of type <span class='texttt'>E</span><a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>Member <span class='texttt'><i >has_<span class='shy'></span>val</i></span> indicates whether the <span class='texttt'>expected<span class='anglebracket'>&lt;</span>T, E<span class='anglebracket'>&gt;</span></span> object
contains an object of type <span class='texttt'>T</span><a class='hidden_link' href='#1.sentence-3'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/utilities.tex#L7350'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>A type <span class='texttt'>T</span> is a <a class='hidden_link' href='#def:valid_value_type_for_expected' id='def:valid_value_type_for_expected'><i>valid value type for <span class='texttt'>expected</span></i></a>,
if <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='keyword'>void</span></span>
or a complete non-array object type that is not <span class='texttt'>in_<span class='shy'></span>place_<span class='shy'></span>t</span>,
<span class='texttt'>unexpect_<span class='shy'></span>t</span>,
or a specialization of <span class='texttt'>unexpected</span><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>A program which instantiates class template <span class='texttt'>expected<span class='anglebracket'>&lt;</span>T, E<span class='anglebracket'>&gt;</span></span>
with an argument <span class='texttt'>T</span> that is not a valid value
type for <span class='texttt'>expected</span> is ill-formed<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>A program that instantiates
the definition of the template <span class='texttt'>expected<span class='anglebracket'>&lt;</span>T, E<span class='anglebracket'>&gt;</span></span>
with a type for the <span class='texttt'>E</span> parameter
that is not a valid template argument for <span class='texttt'>unexpected</span> is ill-formed<a class='hidden_link' href='#2.sentence-3'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/22a3b44cd6d5b0017cb57d8767d9dfc2094735c8/source/utilities.tex#L7364'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>When <span class='texttt'>T</span> is not <span class='mathit'>cv</span> <span class='texttt'><span class='keyword'>void</span></span>, it shall meet
the <i >Cpp17Destructible</i> requirements (Table <a href='utility.arg.requirements#tab:cpp17.destructible' title='Table 35: Cpp17Destructible requirements'>35</a>)<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'><span class='texttt'>E</span> shall meet
the <i >Cpp17Destructible</i> requirements<a class='hidden_link' href='#3.sentence-2'>.</a></div></div></div></div></body></html>