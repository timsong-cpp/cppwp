<!DOCTYPE html><html lang='en'><head><title>[dcl.fct.default]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>9</a> Declarations <a class='abbr_ref' href='./#dcl'>[dcl]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>9.3</a> Declarators <a class='abbr_ref' href='dcl.decl#dcl.fct.default'>[dcl.decl]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>9.3.4</a> Meaning of declarators <a class='abbr_ref' href='dcl.meaning#dcl.fct.default'>[dcl.meaning]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>9.3.4.7</a> Default arguments <a class='abbr_ref'>[dcl.fct.default]</a></h4><div class='texpara'><a class='index' id=':declaration,default_argument'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/declarations.tex#L4159'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>If an <a href='dcl.init.general#nt:initializer-clause' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause'><span class='textsf'><i >initializer-clause</i></span></span></a> is specified in a
<a href='dcl.fct#nt:parameter-declaration' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration'><span class='textsf'><i >parameter-declaration</i></span></span></a> this
<a href='dcl.init.general#nt:initializer-clause' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause_'><span class='textsf'><i >initializer-clause</i></span></span></a>
is used as a default argument<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='1.sentence-2' class='sentence'>Default arguments will be used in calls
where trailing arguments are missing (<a href='expr.call' title='7.6.1.3&emsp;Function call'>[expr.<span class='shy'></span>call]</a>)<a class='hidden_link' href='#1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/declarations.tex#L4169'>#</a></div><div class='texpara'><a class='index' id=':argument,example_of_default'></a><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<div id='2.sentence-1' class='sentence'>The declaration
<span class='codeblock'><span class='keyword'>void</span> point<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>3</span>, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>4</span><span class='parenthesis'>)</span>;
</span>
declares a function that can be called with zero, one, or two arguments of type
<span class='texttt'><span class='keyword'>int</span></span><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>It can be called in any of these ways:
<span class='codeblock'>point<span class='parenthesis'>(</span><span class='literal'>1</span>,<span class='literal'>2</span><span class='parenthesis'>)</span>;  point<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;  point<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span></div></div><div class='texpara'><div id='2.sentence-3' class='sentence'>The last two calls are equivalent to
<span class='texttt'>point<span class='parenthesis'>(</span><span class='literal'>1</span>,<span class='literal'>4</span><span class='parenthesis'>)</span></span>
and
<span class='texttt'>point<span class='parenthesis'>(</span><span class='literal'>3</span>,<span class='literal'>4</span><span class='parenthesis'>)</span></span>,
respectively<a class='hidden_link' href='#2.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/declarations.tex#L4190'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>A default argument shall be specified only in the
<a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a>
of a function declaration
or <a href='expr.prim.lambda.general#nt:lambda-declarator' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator'><span class='textsf'><i >lambda-declarator</i></span></span></a>
or in a
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter'><span class='textsf'><i >template-parameter</i></span></span></a> (<a href='temp.param' title='13.2&emsp;Template parameters'>[temp.<span class='shy'></span>param]</a>)<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>A default argument shall not be specified for
a template parameter pack or
a function parameter pack<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>If it is specified in a
<a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause_'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a>,
it shall not occur within a
<a href='dcl.decl.general#nt:declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator'><span class='textsf'><i >declarator</i></span></span></a>
or
<a href='dcl.name#nt:abstract-declarator' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:abstract-declarator'><span class='textsf'><i >abstract-declarator</i></span></span></a>
of a
<a href='dcl.fct#nt:parameter-declaration' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration_'><span class='textsf'><i >parameter-declaration</i></span></span></a><a class='hidden_link' href='#3.sentence-3'>.</a><a class='footnoteref' href='#footnote-77' id='footnoteref-77' title='This means that default arguments cannot appear, for example, in declarations of pointers to functions, references to functions, or typedef declarations.'>77</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/declarations.tex#L4217'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>For non-template functions, default arguments can be added in later
declarations of a
function that inhabit the same scope<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>Declarations that inhabit different
scopes have completely distinct sets of default arguments<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>That
is, declarations in inner scopes do not acquire default
arguments from declarations in outer scopes, and vice versa<a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='4.sentence-4' class='sentence'>In
a given function declaration, each parameter subsequent to a
parameter with a default argument shall have a default argument
supplied in this or a previous declaration,
unless the parameter was expanded from a parameter pack,
or shall be a function parameter pack<a class='hidden_link' href='#4.sentence-4'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='4.sentence-5' class='sentence'>A default argument
cannot be redefined by a later declaration
(not even to the same value) (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>)<a class='hidden_link' href='#4.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>0</span>, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK, ellipsis is not a parameter so it can follow</span>
                                <span class='comment'>// a parameter with a default argument</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>7</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span>;                         <span class='comment'>// OK, calls <span class='tcode_in_codeblock'>f(3, 7)</span></span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>1</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;         <span class='comment'>// error: does not use default from surrounding scope</span>
<span class='curlybracket'>}</span>
<span class='keyword'>void</span> m<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;             <span class='comment'>// has no defaults</span>
  f<span class='parenthesis'>(</span><span class='literal'>4</span><span class='parenthesis'>)</span>;                         <span class='comment'>// error: wrong number of arguments</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>5</span><span class='parenthesis'>)</span>;         <span class='comment'>// OK</span>
  f<span class='parenthesis'>(</span><span class='literal'>4</span><span class='parenthesis'>)</span>;                         <span class='comment'>// OK, calls <span class='tcode_in_codeblock'>f(4, 5);</span></span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>5</span><span class='parenthesis'>)</span>;         <span class='comment'>// error: cannot redefine, even to same value</span>
<span class='curlybracket'>}</span>
<span class='keyword'>void</span> n<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>6</span><span class='parenthesis'>)</span>;                         <span class='comment'>// OK, calls <span class='tcode_in_codeblock'>f(6, 7)</span></span>
<span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> n <span class='operator'>=</span> <span class='literal'>0</span>, T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
C<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> c;                       <span class='comment'>// OK, instantiates declaration <span class='tcode_in_codeblock'>void C&#x200b;::&#x200b;f(int n = 0, int)</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='4.sentence-6' class='sentence'>
For a given inline function defined in different translation units,
the accumulated sets of default arguments at the end of the
translation units shall be the same; no diagnostic is required<a class='hidden_link' href='#4.sentence-6'>.</a></div> <div id='4.sentence-7' class='sentence'>If a friend declaration <span class='math'><span class='mathalpha'>D</span></span> specifies a default argument expression,
that declaration shall be a definition and there shall be no other
declaration of the function or function template
which is reachable from <span class='math'><span class='mathalpha'>D</span></span> or from which <span class='math'><span class='mathalpha'>D</span></span> is reachable<a class='hidden_link' href='#4.sentence-7'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/declarations.tex#L4271'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'><a class='index' id=':argument,type_checking_of_default'></a><a class='index' id=':argument,binding_of_default'></a><a class='index' id=':argument,evaluation_of_default'></a>The default argument has the
same semantic constraints as the initializer in a
declaration of a variable of the parameter type, using the
copy-initialization semantics (<a href='dcl.init' title='9.5&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>The names in the
default argument are looked up, and the semantic constraints are checked,
at the point where the default argument appears, except that
an immediate invocation (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>) that
is a potentially-evaluated subexpression (<a href='intro.execution' title='6.9.1&emsp;Sequential execution'>[intro.<span class='shy'></span>execution]</a>) of
the <a href='dcl.init.general#nt:initializer-clause' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause__'><span class='textsf'><i >initializer-clause</i></span></span></a> in a <a href='dcl.fct#nt:parameter-declaration' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration__'><span class='textsf'><i >parameter-declaration</i></span></span></a> is
neither evaluated
nor checked for whether it is a constant expression at that point<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>Name lookup and checking of semantic constraints for default
arguments of templated functions are performed as described in <a href='temp.inst' title='13.9.2&emsp;Implicit instantiation'>[temp.<span class='shy'></span>inst]</a><a class='hidden_link' href='#5.sentence-3'>.</a></div> <div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>:&ensp;<div id='5.sentence-4' class='sentence'>In the following code,
<a class='index' id=':argument,example_of_default_'></a><span class='texttt'>g</span>
will be called with the value
<span class='texttt'>f<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span></span>:
<span class='codeblock'><span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>1</span>;
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span> x <span class='operator'>=</span> f<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;            <span class='comment'>// default argument: <span class='tcode_in_codeblock'>f(&#x200b;::&#x200b;a)</span></span>

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  a <span class='operator'>=</span> <span class='literal'>2</span>;
  <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>3</span>;
    g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                        <span class='comment'>// <span class='tcode_in_codeblock'>g(f(&#x200b;::&#x200b;a))</span></span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</span></div> —&nbsp;<i>end example</i>]</div></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='5.sentence-5' class='sentence'>A default argument is a complete-class context (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>)<a class='hidden_link' href='#5.sentence-5'>.</a></div> <div id='5.sentence-6' class='sentence'>Access checking applies to names in default arguments as
described in <a href='class.access' title='11.8&emsp;Member access control'>[class.<span class='shy'></span>access]</a><a class='hidden_link' href='#5.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/declarations.tex#L4315'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>Except for member functions of templated classes, the
default arguments in a member function definition that appears
outside of the class definition
are added to the set of default arguments provided by the
member function declaration in the class definition;
the program is ill-formed if a default constructor (<a href='class.default.ctor' title='11.4.5.2&emsp;Default constructors'>[class.<span class='shy'></span>default.<span class='shy'></span>ctor]</a>),
copy or move constructor (<a href='class.copy.ctor' title='11.4.5.3&emsp;Copy/move constructors'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>), or
copy or move assignment operator (<a href='class.copy.assign' title='11.4.6&emsp;Copy/move assignment operator'>[class.<span class='shy'></span>copy.<span class='shy'></span>assign]</a>)
is so declared<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>Default arguments for a member function of a templated class
shall be specified on the initial declaration of the member
function within the templated class<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>3</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span> i, <span class='keyword'>int</span> j <span class='operator'>=</span> <span class='literal'>99</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> C<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>3</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>         <span class='comment'>// error: default argument already specified in class scope</span>
<span class='keyword'>void</span> C<span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>88</span>, <span class='keyword'>int</span> j<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span> <span class='comment'>// in this translation unit, <span class='tcode_in_codeblock'>C&#x200b;::&#x200b;g</span> can be called with no arguments</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/declarations.tex#L4340'>#</a></div><div class='texpara'><div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>:&ensp;<div id='7.sentence-1' class='sentence'>A local variable cannot be odr-used (<a href='basic.def.odr#term.odr.use' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>)
in a default argument<a class='hidden_link' href='#7.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i;
  <span class='keyword'>extern</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span> x <span class='operator'>=</span> i<span class='parenthesis'>)</span>;         <span class='comment'>// error</span>
  <span class='keyword'>extern</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span> x <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>i<span class='parenthesis'>)</span><span class='parenthesis'>)</span>; <span class='comment'>// OK</span>
  <span class='comment'>// ...</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/declarations.tex#L4356'>#</a></div><div class='texpara'><div id='note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-5'>5</a></i>:&ensp;<div id='8.sentence-1' class='sentence'>The keyword
<span id=':this'><span class='texttt'><span class='keyword'>this</span></span></span>
cannot appear in a default argument of a member function;
see <a href='expr.prim.this' title='7.5.3&emsp;This'>[expr.<span class='shy'></span>prim.<span class='shy'></span>this]</a><a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='operator'>*</span> p <span class='operator'>=</span> <span class='keyword'>this</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>           <span class='comment'>// error</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/declarations.tex#L4371'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'><a class='index' id=':argument,evaluation_of_default_'></a>A default argument is evaluated each time the function is called
with no argument for the corresponding parameter<a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='9.sentence-2' class='sentence'><a class='index' id=':argument,scope_of_default'></a>A parameter shall not appear as a potentially-evaluated expression
in a default argument<a class='hidden_link' href='#9.sentence-2'>.</a></div> <div id='9.sentence-4' class='sentence'><a class='index' id=':argument_and_name_hiding,default'></a><div id='note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-6'>6</a></i>:&ensp;<div id='9.sentence-3' class='sentence'>Parameters of a function declared before a default argument
are in scope and can hide namespace and class member names<a class='hidden_link' href='#9.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div>
<div id='example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-7'>7</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span> a;
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> a, <span class='keyword'>int</span> b <span class='operator'>=</span> a<span class='parenthesis'>)</span>;            <span class='comment'>// error: parameter <span class='tcode_in_codeblock'>a</span> used as default argument</span>
<span class='keyword'>typedef</span> <span class='keyword'>int</span> I;
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>float</span> I, <span class='keyword'>int</span> b <span class='operator'>=</span> I<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;       <span class='comment'>// error: parameter <span class='tcode_in_codeblock'>I</span> found</span>
<span class='keyword'>int</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span> a, <span class='keyword'>int</span> b <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>a<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;    <span class='comment'>// OK, <a href='expr.context#def:unevaluated_operand' title='7.2.3&emsp;Context dependence&emsp;[expr.context]'>unevaluated operand</a></span>
</span> —&nbsp;<i>end example</i>]</div></div>
A non-static member shall not appear in a default argument unless it appears as
the <a href='expr.prim.id.general#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression'><span class='textsf'><i >id-expression</i></span></span></a> of a class member access expression (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>) or
unless it is used to form a pointer to member (<a href='expr.unary.op' title='7.6.2.2&emsp;Unary operators'>[expr.<span class='shy'></span>unary.<span class='shy'></span>op]</a>)<a class='hidden_link' href='#9.sentence-4'>.</a></div> <div id='example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-8'>8</a></i>:&ensp;<div id='9.sentence-5' class='sentence'>The declaration of
<span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>mem1<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
in the following example is ill-formed because no object is supplied for the
non-static member
<span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>a</span>
used as an initializer<a class='hidden_link' href='#9.sentence-5'>.</a></div> <span class='codeblock'><span class='keyword'>int</span> b;
<span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a;
  <span class='keyword'>int</span> mem1<span class='parenthesis'>(</span><span class='keyword'>int</span> i <span class='operator'>=</span> a<span class='parenthesis'>)</span>;              <span class='comment'>// error: non-static member <span class='tcode_in_codeblock'>a</span> used as default argument</span>
  <span class='keyword'>int</span> mem2<span class='parenthesis'>(</span><span class='keyword'>int</span> i <span class='operator'>=</span> b<span class='parenthesis'>)</span>;              <span class='comment'>// OK;  use <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;b</span></span>
  <span class='keyword'>static</span> <span class='keyword'>int</span> b;
<span class='curlybracket'>}</span>;
</span> <div id='9.sentence-6' class='sentence'>
The declaration of
<span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>mem2<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
is meaningful, however, since no object is needed to access the static member
<span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>b</span><a class='hidden_link' href='#9.sentence-6'>.</a></div> <div id='9.sentence-7' class='sentence'>Classes, objects, and members are described in <a href='class' title='11&emsp;Classes'>[class]</a><a class='hidden_link' href='#9.sentence-7'>.</a></div> —&nbsp;<i>end example</i>]</div></div> <div id='9.sentence-8' class='sentence'>
A default argument is not part of the
type of a function<a class='hidden_link' href='#9.sentence-8'>.</a></div> <div id='example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-9'>9</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> j <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;
  <span class='keyword'>int</span> k <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                      <span class='comment'>// OK, means <span class='tcode_in_codeblock'>f(0)</span></span>
<span class='curlybracket'>}</span>

<span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span>p1<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='operator'>&amp;</span>f;
<span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span>p2<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='operator'>&amp;</span>f;                   <span class='comment'>// error: type mismatch</span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='9.sentence-9' class='sentence'>
When an overload set contains a declaration of a function
that inhabits a scope <span class='math'><span class='mathalpha'>S</span></span>,
any default argument associated with any reachable declaration that inhabits <span class='math'><span class='mathalpha'>S</span></span>
is available to the call<a class='hidden_link' href='#9.sentence-9'>.</a></div> <div id='note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-7'>7</a></i>:&ensp;<div id='9.sentence-10' class='sentence'>The candidate might have been found through a <a href='namespace.udecl#nt:using-declarator' title='9.10&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declarator'><span class='textsf'><i >using-declarator</i></span></span></a>
from which the declaration that provides the default argument is not reachable<a class='hidden_link' href='#9.sentence-10'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/declarations.tex#L4441'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'><a class='index' id=':argument_and_virtual_function,default'></a>A virtual function call (<a href='class.virtual' title='11.7.3&emsp;Virtual functions'>[class.<span class='shy'></span>virtual]</a>) uses the default
arguments in the declaration of the virtual function determined
by the static type of the pointer or reference denoting the
object<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>An overriding function in a derived class does not
acquire default arguments from the function it overrides<a class='hidden_link' href='#10.sentence-2'>.</a></div> <div id='example-10' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-10'>10</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>7</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> <span class='keyword'>public</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> a<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>void</span> m<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  B<span class='operator'>*</span> pb <span class='operator'>=</span> <span class='keyword'>new</span> B;
  A<span class='operator'>*</span> pa <span class='operator'>=</span> pb;
  pa<span class='operator'>-</span><span class='anglebracket'>&gt;</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// OK, calls <span class='tcode_in_codeblock'>pa-&gt;B&#x200b;::&#x200b;f(7)</span></span>
  pb<span class='operator'>-</span><span class='anglebracket'>&gt;</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// error: wrong number of arguments for <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f()</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> </div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-77'><div class='texpara'><a class='footnotenum' href='#footnote-77'>77)</a><a class='footnoteBacklink' href='#footnoteref-77'>77)</a> <div id='footnote-77.sentence-1' class='sentence'>This means that default
arguments cannot appear,
for example, in declarations of pointers to functions,
references to functions, or
<span class='texttt'><span class='keyword'>typedef</span></span>
declarations<a class='hidden_link' href='#footnote-77.sentence-1'>.</a></div></div></div></div></body></html>