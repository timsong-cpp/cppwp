<!DOCTYPE html><html lang='en'><head><title>[optional.optional]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>20</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>20.6</a> Optional objects <a class='abbr_ref' href='optional#optional'>[optional]</a></h2><div id='optional.optional'><h3 ><a class='secnum' style='min-width:103pt'>20.6.3</a> Class template <span class='texttt'>optional</span> <a class='abbr_ref'>[optional.optional]</a></h3><p ><span class='indexparent'><a class='index' id='optional'></a></span></p><pre class='codeblock'>
template &lt;class T&gt; class optional {
public:
  using value_type = T;

  <span class='comment'>// <a href='optional.ctor'>[optional.ctor]</a>, constructors
</span>  constexpr optional() noexcept;
  constexpr optional(nullopt_t) noexcept;
  optional(const optional&amp;);
  optional(optional&amp;&amp;) noexcept(<i><span class='texttt'>see below</span></i>);
  template &lt;class... Args&gt; constexpr explicit optional(in_place_t, Args &amp;&amp;...);
  template &lt;class U, class... Args&gt;
    constexpr explicit optional(in_place_t, initializer_list&lt;U&gt;, Args &amp;&amp;...);
  template &lt;class U = T&gt; <i><span class='texttt'>EXPLICIT</span></i> constexpr optional(U&amp;&amp;);
  template &lt;class U&gt; <i><span class='texttt'>EXPLICIT</span></i> optional(const optional&lt;U&gt;&amp;);
  template &lt;class U&gt; <i><span class='texttt'>EXPLICIT</span></i> optional(optional&lt;U&gt; &amp;&amp;);

  <span class='comment'>// <a href='optional.dtor'>[optional.dtor]</a>, destructor
</span>  ~optional();

  <span class='comment'>// <a href='optional.assign'>[optional.assign]</a>, assignment
</span>  optional&amp; operator=(nullopt_t) noexcept;
  optional&amp; operator=(const optional&amp;);
  optional&amp; operator=(optional&amp;&amp;) noexcept(<i><span class='texttt'>see below</span></i>);
  template &lt;class U = T&gt; optional&amp; operator=(U&amp;&amp;);
  template &lt;class U&gt; optional&amp; operator=(const optional&lt;U&gt;&amp;);
  template &lt;class U&gt; optional&amp; operator=(optional&lt;U&gt;&amp;&amp;);
  template &lt;class... Args&gt; void emplace(Args&amp;&amp;...);
  template &lt;class U, class... Args&gt;
    void emplace(initializer_list&lt;U&gt;, Args&amp;&amp;...);

  <span class='comment'>// <a href='optional.swap'>[optional.swap]</a>, swap
</span>  void swap(optional&amp;) noexcept(<i><span class='texttt'>see below</span></i>);

  <span class='comment'>// <a href='optional.observe'>[optional.observe]</a>, observers
</span>  constexpr const T* operator-&gt;() const;
  constexpr T* operator-&gt;();
  constexpr const T&amp; operator*() const&amp;;
  constexpr T&amp; operator*() &amp;;
  constexpr T&amp;&amp; operator*() &amp;&amp;;
  constexpr const T&amp;&amp; operator*() const&amp;&amp;;
  constexpr explicit operator bool() const noexcept;
  constexpr bool has_value() const noexcept;
  constexpr const T&amp; value() const&amp;;
  constexpr T&amp; value() &amp;;
  constexpr T&amp;&amp; value() &amp;&amp;;
  constexpr const T&amp;&amp; value() const&amp;&amp;;
  template &lt;class U&gt; constexpr T value_or(U&amp;&amp;) const&amp;;
  template &lt;class U&gt; constexpr T value_or(U&amp;&amp;) &amp;&amp;;

  <span class='comment'>// <a href='optional.mod'>[optional.mod]</a>, modifiers
</span>  void reset() noexcept;

private:
  T *val; <span class='comment'>// <i>exposition only</i>
</span>};
</pre><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >Any instance of <span class='texttt'>optional&lt;T&gt;</span> at any given time either contains a value or does not contain a value.
When an instance of <span class='texttt'>optional&lt;T&gt;</span> <a class='hidden_link' href='#def:contains_a_value,optional' id='def:contains_a_value,optional'><i>contains a value</i></a>,
it means that an object of type <span class='texttt'>T</span>, referred to as the optional object's <a class='hidden_link' href='#def:contained_value,optional' id='def:contained_value,optional'><i>contained value</i></a>,
is allocated within the storage of the optional object.
Implementations are not permitted to use additional storage, such as dynamic memory, to allocate its contained value.
The contained value shall be allocated in a region of the <span class='texttt'>optional&lt;T&gt;</span> storage suitably aligned for the type <span class='texttt'>T</span>.
When an object of type <span class='texttt'>optional&lt;T&gt;</span> is contextually converted to <span class='texttt'>bool</span>,
the conversion returns <span class='texttt'>true</span> if the object contains a value;
otherwise the conversion returns <span class='texttt'>false</span>.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p >Member <span class='texttt'>val</span> is provided for exposition only. When an <span class='texttt'>optional&lt;T&gt;</span> object contains a value, <span class='texttt'>val</span> points to the contained value.</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><p ><span class='texttt'>T</span> shall be an object type and shall satisfy the requirements of <span class='texttt'>Destructible</span> (Table <a href='utility.arg.requirements#tab:destructible'>[tab:destructible]</a>).</p></div><div id='optional.ctor'><h4 ><a class='secnum' href='#optional.ctor' style='min-width:118pt'>20.6.3.1</a> Constructors <a class='abbr_ref' href='optional.ctor'>[optional.ctor]</a></h4><p ><span class='indexparent'><a class='index' id='optional,constructor'></a></span><code class='itemdecl'>
constexpr optional() noexcept;
constexpr optional(nullopt_t) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='optional.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-1'>1</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>*this</span> does not contain a value.</p></div></div><div class='para' id='optional.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-2'>2</a></div><div class='itemdescr'><p ><i>Remarks:</i>
No contained value is initialized.
For every object type <span class='texttt'>T</span> these constructors shall be constexpr constructors (<a href='dcl.constexpr'>[dcl.constexpr]</a>).
</p></div></div><p ><span class='indexparent'><a class='index' id='optional,constructor'></a></span><code class='itemdecl'>
optional(const optional&amp; rhs);
</code></p><div class='itemdescr'></div><div class='para' id='optional.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-3'>3</a></div><div class='itemdescr'><p ><i>Effects:</i>
If <span class='texttt'>rhs</span> contains a value, initializes the contained value as if
direct-non-list-initializing an object of type <span class='texttt'>T</span> with the expression <span class='texttt'>*rhs</span>.</p></div></div><div class='para' id='optional.ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-4'>4</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>bool(rhs) == bool(*this)</span>.</p></div></div><div class='para' id='optional.ctor-5'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-5'>5</a></div><div class='itemdescr'><p ><i>Throws:</i>
Any exception thrown by the selected constructor of <span class='texttt'>T</span>.</p><p ><i>Remarks:</i>
This constructor shall be defined as deleted unless
<span class='texttt'>is_copy_constructible_v&lt;T&gt;</span> is <span class='texttt'>true</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='optional,constructor'></a></span><code class='itemdecl'>
optional(optional&amp;&amp; rhs) noexcept(<i><span class='texttt'>see below</span></i>);
</code></p><div class='itemdescr'></div><div class='para' id='optional.ctor-6'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-6'>6</a></div><div class='itemdescr'><p ><i>Effects:</i>
If <span class='texttt'>rhs</span> contains a value, initializes the contained value as if
direct-non-list-initializing an object of type <span class='texttt'>T</span> with the expression <span class='texttt'>std::move(*rhs)</span>.
<span class='texttt'>bool(rhs)</span> is unchanged.</p></div></div><div class='para' id='optional.ctor-7'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-7'>7</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>bool(rhs) == bool(*this)</span>.</p></div></div><div class='para' id='optional.ctor-8'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-8'>8</a></div><div class='itemdescr'><p ><i>Throws:</i>
Any exception thrown by the selected constructor of <span class='texttt'>T</span>.</p></div></div><div class='para' id='optional.ctor-9'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-9'>9</a></div><div class='itemdescr'><p ><i>Remarks:</i>
The expression inside <span class='texttt'>noexcept</span> is equivalent to
<span class='texttt'>is_nothrow_move_constructible_v&lt;T&gt;</span>.
This constructor shall not participate in overload resolution
unless <span class='texttt'>is_move_constructible_v&lt;T&gt;</span> is <span class='texttt'>true</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='optional,constructor'></a></span><code class='itemdecl'>
template &lt;class... Args&gt; constexpr explicit optional(in_place_t, Args&amp;&amp;... args);
</code></p><div class='itemdescr'></div><div class='para' id='optional.ctor-10'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-10'>10</a></div><div class='itemdescr'><p ><i>Effects:</i>
Initializes the contained value as if direct-non-list-initializing an object of type <span class='texttt'>T</span> with the arguments <span class='texttt'>std::forward&lt;Args&gt;(args)...</span>.</p></div></div><div class='para' id='optional.ctor-11'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-11'>11</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='optional.ctor-12'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-12'>12</a></div><div class='itemdescr'><p ><i>Throws:</i>
Any exception thrown by the selected constructor of <span class='texttt'>T</span>.</p></div></div><div class='para' id='optional.ctor-13'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-13'>13</a></div><div class='itemdescr'><p ><i>Remarks:</i>
If <span class='texttt'>T</span>'s constructor selected for the initialization is a constexpr constructor, this constructor shall be a <span class='texttt'>constexpr</span> constructor.
This constructor shall not participate in overload resolution
unless <span class='texttt'>is_constructible_v&lt;T, Args...&gt;</span> is <span class='texttt'>true</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='optional,constructor'></a></span><code class='itemdecl'>
template &lt;class U, class... Args&gt;
  constexpr explicit optional(in_place_t, initializer_list&lt;U&gt; il, Args&amp;&amp;... args);
</code></p><div class='itemdescr'></div><div class='para' id='optional.ctor-14'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-14'>14</a></div><div class='itemdescr'><p ><i>Effects:</i>
Initializes the contained value as if direct-non-list-initializing an object of type <span class='texttt'>T</span> with the arguments <span class='texttt'>il, std::forward&lt;Args&gt;(args)...</span>.</p></div></div><div class='para' id='optional.ctor-15'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-15'>15</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='optional.ctor-16'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-16'>16</a></div><div class='itemdescr'><p ><i>Throws:</i>
Any exception thrown by the selected constructor of <span class='texttt'>T</span>.</p></div></div><div class='para' id='optional.ctor-17'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-17'>17</a></div><div class='itemdescr'><p ><i>Remarks:</i>
This constructor shall not participate in overload resolution unless <span class='texttt'>is_constructible_v&lt;T, initializer_list&lt;U&gt;&amp;, Args&amp;&amp;...&gt;</span> is <span class='texttt'>true</span>.
If <span class='texttt'>T</span>'s constructor selected for the initialization is a constexpr constructor, this constructor shall be a <span class='texttt'>constexpr</span> constructor.
</p></div></div><div class='para' id='optional.ctor-18'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-18'>18</a></div><p >[&nbsp;<i>Note:</i>
The following constructors are conditionally specified as explicit.
This is typically implemented by declaring two such constructors,
of which at most one participates in overload resolution.
<i>&nbsp;â€”&nbsp;end note</i>&nbsp;]</p><p ><span class='indexparent'><a class='index' id='optional,constructor'></a></span><code class='itemdecl'>
template &lt;class U = T&gt;
  <i><span class='texttt'>EXPLICIT</span></i> constexpr optional(U&amp;&amp; v);
</code></p></div><div class='itemdescr'></div><div class='para' id='optional.ctor-19'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-19'>19</a></div><div class='itemdescr'><p ><i>Effects:</i>
Initializes the contained value as if direct-non-list-initializing
an object of type <span class='texttt'>T</span> with the expression <span class='texttt'>std::forward&lt;U&gt;(v)</span>.</p></div></div><div class='para' id='optional.ctor-20'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-20'>20</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='optional.ctor-21'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-21'>21</a></div><div class='itemdescr'><p ><i>Throws:</i>
Any exception thrown by the selected constructor of <span class='texttt'>T</span>.</p></div></div><div class='para' id='optional.ctor-22'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-22'>22</a></div><div class='itemdescr'><p ><i>Remarks:</i>
If <span class='texttt'>T</span>'s selected constructor is a constexpr constructor,
this constructor shall be a constexpr constructor.
This constructor shall not participate in overload resolution unless
<span class='texttt'>is_constructible_v&lt;T, U&amp;&amp;&gt;</span> is <span class='texttt'>true</span>,
<span class='texttt'>is_same_v&lt;U, in_place_t&gt;</span> is <span class='texttt'>false</span>, and
<span class='texttt'>is_same_v&lt;optional&lt;T&gt;, decay_t&lt;U&gt;&gt;</span> is <span class='texttt'>false</span>.
The constructor is explicit if and only if
<span class='texttt'>is_convertible_v&lt;U&amp;&amp;, T&gt;</span> is <span class='texttt'>false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='optional,constructor'></a></span><code class='itemdecl'>
template &lt;class U&gt;
  <i><span class='texttt'>EXPLICIT</span></i> optional(const optional&lt;U&gt;&amp; rhs);
</code></p><div class='itemdescr'></div><div class='para' id='optional.ctor-23'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-23'>23</a></div><div class='itemdescr'><p ><i>Effects:</i>
If <span class='texttt'>rhs</span> contains a value,
initializes the contained value as if direct-non-list-initializing
an object of type <span class='texttt'>T</span> with the expression <span class='texttt'>*rhs</span>.</p></div></div><div class='para' id='optional.ctor-24'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-24'>24</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>bool(rhs)</span> == <span class='texttt'>bool(*this)</span>.</p></div></div><div class='para' id='optional.ctor-25'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-25'>25</a></div><div class='itemdescr'><p ><i>Throws:</i>
Any exception thrown by the selected constructor of <span class='texttt'>T</span>.</p></div></div><div class='para' id='optional.ctor-26'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-26'>26</a></div><div class='itemdescr'><p ><i>Remarks:</i>
This constructor shall not participate in overload resolution unless
</p><ul class='itemize'><li id='optional.ctor-26.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-26.1'>(26.1)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, const U&amp;&gt;</span> is <span class='texttt'>true</span>,
</p></li><li id='optional.ctor-26.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-26.2'>(26.2)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.ctor-26.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-26.3'>(26.3)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.ctor-26.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-26.4'>(26.4)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.ctor-26.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-26.5'>(26.5)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.ctor-26.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-26.6'>(26.6)</a></div><p ><span class='texttt'>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.ctor-26.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-26.7'>(26.7)</a></div><p ><span class='texttt'>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.ctor-26.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-26.8'>(26.8)</a></div><p ><span class='texttt'>is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</span> is <span class='texttt'>false</span>, and
</p></li><li id='optional.ctor-26.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-26.9'>(26.9)</a></div><p ><span class='texttt'>is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</span> is <span class='texttt'>false</span>.
</p></li></ul><p >The constructor is explicit if and only if
<span class='texttt'>is_convertible_v&lt;const U&amp;, T&gt;</span> is <span class='texttt'>false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='optional,constructor'></a></span><code class='itemdecl'>
template &lt;class U&gt;
  <i><span class='texttt'>EXPLICIT</span></i> optional(optional&lt;U&gt;&amp;&amp; rhs);
</code></p><div class='itemdescr'></div><div class='para' id='optional.ctor-27'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-27'>27</a></div><div class='itemdescr'><p ><i>Effects:</i>
If <span class='texttt'>rhs</span> contains a value,
initializes the contained value as if direct-non-list-initializing
an object of type <span class='texttt'>T</span> with the expression <span class='texttt'>std::move(*rhs)</span>.
<span class='texttt'>bool(rhs)</span> is unchanged.</p></div></div><div class='para' id='optional.ctor-28'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-28'>28</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>bool(rhs)</span> == <span class='texttt'>bool(*this)</span>.</p></div></div><div class='para' id='optional.ctor-29'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-29'>29</a></div><div class='itemdescr'><p ><i>Throws:</i>
Any exception thrown by the selected constructor of <span class='texttt'>T</span>.</p></div></div><div class='para' id='optional.ctor-30'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-30'>30</a></div><div class='itemdescr'><p ><i>Remarks:</i>
This constructor shall not participate in overload resolution unless
</p><ul class='itemize'><li id='optional.ctor-30.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-30.1'>(30.1)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, U&amp;&amp;&gt;</span> is true,
</p></li><li id='optional.ctor-30.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-30.2'>(30.2)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.ctor-30.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-30.3'>(30.3)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.ctor-30.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-30.4'>(30.4)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.ctor-30.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-30.5'>(30.5)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.ctor-30.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-30.6'>(30.6)</a></div><p ><span class='texttt'>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.ctor-30.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-30.7'>(30.7)</a></div><p ><span class='texttt'>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.ctor-30.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-30.8'>(30.8)</a></div><p ><span class='texttt'>is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</span> is <span class='texttt'>false</span>, and
</p></li><li id='optional.ctor-30.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.ctor-30.9'>(30.9)</a></div><p ><span class='texttt'>is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</span> is <span class='texttt'>false</span>.
</p></li></ul><p >The constructor is explicit if and only if
<span class='texttt'>is_convertible_v&lt;U&amp;&amp;, T&gt;</span> is <span class='texttt'>false</span>.
</p></div></div></div><div id='optional.dtor'><h4 ><a class='secnum' href='#optional.dtor' style='min-width:118pt'>20.6.3.2</a> Destructor <a class='abbr_ref' href='optional.dtor'>[optional.dtor]</a></h4><p ><span class='indexparent'><a class='index' id='optional,destructor'></a></span><code class='itemdecl'>
~optional();
</code></p><div class='itemdescr'></div><div class='para' id='optional.dtor-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.dtor-1'>1</a></div><div class='itemdescr'><p ><i>Effects:</i>
If <span class='texttt'>is_trivially_destructible_v&lt;T&gt; != true</span> and <span class='texttt'>*this</span> contains a value, calls <span class='texttt'>val-&gt;T::~T()</span>.</p></div></div><div class='para' id='optional.dtor-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.dtor-2'>2</a></div><div class='itemdescr'><p ><i>Remarks:</i>
If <span class='texttt'>is_trivially_destructible_v&lt;T&gt; == true</span> then this destructor shall be a trivial destructor.
</p></div></div></div><div id='optional.assign'><h4 ><a class='secnum' href='#optional.assign' style='min-width:118pt'>20.6.3.3</a> Assignment <a class='abbr_ref' href='optional.assign'>[optional.assign]</a></h4><p ><span class='indexparent'><a class='index' id='operator=,optional'></a></span><span class='indexparent'><a class='index' id='optional,operator='></a></span><code class='itemdecl'>
optional&lt;T&gt;&amp; operator=(nullopt_t) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='optional.assign-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-1'>1</a></div><div class='itemdescr'><p ><i>Effects:</i>
If <span class='texttt'>*this</span> contains a value, calls <span class='texttt'>val-&gt;T::~T()</span> to destroy the contained value; otherwise no effect.</p></div></div><div class='para' id='optional.assign-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i>
<span class='texttt'>*this</span>.</p></div></div><div class='para' id='optional.assign-3'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-3'>3</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>*this</span> does not contain a value.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator=,optional'></a></span><span class='indexparent'><a class='index' id='optional,operator='></a></span><code class='itemdecl'>
optional&lt;T&gt;&amp; operator=(const optional&amp; rhs);
</code></p><div class='itemdescr'></div><div class='para' id='optional.assign-4'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-4'>4</a></div><div class='itemdescr'><p ><i>Effects:</i>
See Table <a href='#tab:optional.assign.copy'>[tab:optional.assign.copy]</a>.

 
     
 
 
 
 
 
 
  <div class='table'>
 
 <span class='center'>
 <div class='tabular'>
  
 <td colspan='1'></td>&amp;&amp;<td colspan='1'><b><span class='texttt'>*this</span> contains a value</b></td>&amp;<td colspan='1'><b><span class='texttt'>*this</span> does not contain a value</b></td><br/>
 



<b><span class='texttt'>rhs</span> contains a value</b>&amp; &amp;
assigns <span class='texttt'>*rhs</span> to the contained value &amp;
initializes the contained value as if direct-non-list-initializing an object of type <span class='texttt'>T</span> with <span class='texttt'>*rhs</span> <br/>


<b><span class='texttt'>rhs</span> does not contain a value</b>&amp; &amp;
destroys the contained value by calling <span class='texttt'>val-&gt;T::~T()</span> &amp;
no effect <br/>

 
 
 </div>
 </span>
 </div>

</p></div></div><div class='para' id='optional.assign-5'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-5'>5</a></div><div class='itemdescr'><p ><i>Returns:</i>
<span class='texttt'>*this</span>.</p></div></div><div class='para' id='optional.assign-6'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-6'>6</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>bool(rhs) == bool(*this)</span>.</p></div></div><div class='para' id='optional.assign-7'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-7'>7</a></div><div class='itemdescr'><p ><i>Remarks:</i>
If any exception is thrown, the result of the expression <span class='texttt'>bool(*this)</span> remains unchanged.
If an exception is thrown during the call to <span class='texttt'>T</span>'s copy constructor, no effect.
If an exception is thrown during the call to <span class='texttt'>T</span>'s copy assignment,
the state of its contained value is as defined by the exception safety guarantee of <span class='texttt'>T</span>'s copy assignment.
This operator shall be defined as deleted unless
<span class='texttt'>is_copy_constructible_v&lt;T&gt;</span> is <span class='texttt'>true</span> and
<span class='texttt'>is_copy_assignable_v&lt;T&gt;</span> is <span class='texttt'>true</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator=,optional'></a></span><span class='indexparent'><a class='index' id='optional,operator='></a></span><code class='itemdecl'>
optional&lt;T&gt;&amp; operator=(optional&amp;&amp; rhs) noexcept(<i><span class='texttt'>see below</span></i>);
</code></p><div class='itemdescr'></div><div class='para' id='optional.assign-8'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-8'>8</a></div><div class='itemdescr'><p ><i>Effects:</i>
See Table <a href='#tab:optional.assign.move'>[tab:optional.assign.move]</a>.
The result of the expression <span class='texttt'>bool(rhs)</span> remains unchanged.

 
     
 
 
 
 
 
 
  <div class='table'>
 
 <span class='center'>
 <div class='tabular'>
  
 <td colspan='1'></td>&amp;&amp;<td colspan='1'><b><span class='texttt'>*this</span> contains a value</b></td>&amp;<td colspan='1'><b><span class='texttt'>*this</span> does not contain a value</b></td><br/>
 



<b><span class='texttt'>rhs</span> contains a value</b>&amp; &amp;
assigns <span class='texttt'>std::move(*rhs)</span> to the contained value &amp;
initializes the contained value as if direct-non-list-initializing an object of type <span class='texttt'>T</span> with <span class='texttt'>std::move(*rhs)</span> <br/>


<b><span class='texttt'>rhs</span> does not contain a value</b>&amp; &amp;
destroys the contained value by calling <span class='texttt'>val-&gt;T::~T()</span> &amp;
no effect <br/>

 
 
 </div>
 </span>
 </div>

</p></div></div><div class='para' id='optional.assign-9'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-9'>9</a></div><div class='itemdescr'><p ><i>Returns:</i>
<span class='texttt'>*this</span>.</p></div></div><div class='para' id='optional.assign-10'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-10'>10</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>bool(rhs) == bool(*this)</span>.</p></div></div><div class='para' id='optional.assign-11'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-11'>11</a></div><div class='itemdescr'><p ><i>Remarks:</i>
The expression inside <span class='texttt'>noexcept</span> is equivalent to:
</p><pre class='codeblock'>
is_nothrow_move_assignable_v&lt;T&gt; &amp;&amp; is_nothrow_move_constructible_v&lt;T&gt;
</pre></div></div><div class='para' id='optional.assign-12'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-12'>12</a></div><div class='itemdescr'><p >If any exception is thrown, the result of the expression <span class='texttt'>bool(*this)</span> remains unchanged.
If an exception is thrown during the call to <span class='texttt'>T</span>'s move constructor,
the state of <span class='texttt'>*rhs.val</span> is determined by the exception safety guarantee of <span class='texttt'>T</span>'s move constructor.
If an exception is thrown during the call to <span class='texttt'>T</span>'s move assignment,
the state of <span class='texttt'>*val</span> and <span class='texttt'>*rhs.val</span> is determined by the exception safety guarantee of <span class='texttt'>T</span>'s move assignment.
This operator shall not participate in overload resolution unless
<span class='texttt'>is_move_constructible_v&lt;T&gt;</span> is <span class='texttt'>true</span> and
<span class='texttt'>is_move_assignable_v&lt;T&gt;</span> is <span class='texttt'>true</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator=,optional'></a></span><span class='indexparent'><a class='index' id='optional,operator='></a></span><code class='itemdecl'>
template &lt;class U = T&gt; optional&lt;T&gt;&amp; operator=(U&amp;&amp; v);
</code></p><div class='itemdescr'></div><div class='para' id='optional.assign-13'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-13'>13</a></div><div class='itemdescr'><p ><i>Effects:</i>
If <span class='texttt'>*this</span> contains a value, assigns <span class='texttt'>std::forward&lt;U&gt;(v)</span> to the contained value; otherwise initializes the contained value as if direct-non-list-initializing object of type <span class='texttt'>T</span> with <span class='texttt'>std::forward&lt;U&gt;(v)</span>.</p></div></div><div class='para' id='optional.assign-14'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-14'>14</a></div><div class='itemdescr'><p ><i>Returns:</i>
<span class='texttt'>*this</span>.</p></div></div><div class='para' id='optional.assign-15'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-15'>15</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='optional.assign-16'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-16'>16</a></div><div class='itemdescr'><p ><i>Remarks:</i>
If any exception is thrown, the result of the expression <span class='texttt'>bool(*this)</span> remains unchanged. If an exception is thrown during the call to <span class='texttt'>T</span>'s constructor, the state of <span class='texttt'>v</span> is determined by the exception safety guarantee of <span class='texttt'>T</span>'s constructor. If an exception is thrown during the call to <span class='texttt'>T</span>'s assignment, the state of <span class='texttt'>*val</span> and <span class='texttt'>v</span> is determined by the exception safety guarantee of <span class='texttt'>T</span>'s assignment.
This function shall not participate in overload resolution unless
<span class='texttt'>is_same_v&lt;optional&lt;T&gt;, decay_t&lt;U&gt;&gt;</span> is <span class='texttt'>false</span>,
<span class='texttt'>conjunction_v&lt;is_scalar&lt;T&gt;, is_same&lt;T, decay_t&lt;U&gt;&gt;&gt;</span> is <span class='texttt'>false</span>,
<span class='texttt'>is_constructible_v&lt;T, U&gt;</span> is <span class='texttt'>true</span>, and
<span class='texttt'>is_assignable_v&lt;T&amp;, U&gt;</span> is <span class='texttt'>true</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator=,optional'></a></span><span class='indexparent'><a class='index' id='optional,operator='></a></span><code class='itemdecl'>
template &lt;class U&gt; optional&lt;T&gt;&amp; operator=(const optional&lt;U&gt;&amp; rhs);
</code></p><div class='itemdescr'></div><div class='para' id='optional.assign-17'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-17'>17</a></div><div class='itemdescr'><p ><i>Effects:</i>
See Table <a href='#tab:optional.assign.copy.templ'>[tab:optional.assign.copy.templ]</a>.

 
     
 
 
 
 
 
 
  <div class='table'>
 
 <span class='center'>
 <div class='tabular'>
  
 <td colspan='1'></td>&amp;&amp;<td colspan='1'><b><span class='texttt'>*this</span> contains a value</b></td>&amp;<td colspan='1'><b><span class='texttt'>*this</span> does not contain a value</b></td><br/>
 



<b><span class='texttt'>rhs</span> contains a value</b>&amp; &amp;
assigns <span class='texttt'>*rhs</span> to the contained value &amp;
initializes the contained value as if direct-non-list-initializing
an object of type <span class='texttt'>T</span> with <span class='texttt'>*rhs</span> <br/>


<b><span class='texttt'>rhs</span> does not contain a value</b>&amp; &amp;
destroys the contained value by calling <span class='texttt'>val-&gt;T::~T()</span> &amp;
no effect <br/>

 
 
 </div>
 </span>
 </div>

</p></div></div><div class='para' id='optional.assign-18'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-18'>18</a></div><div class='itemdescr'><p ><i>Returns:</i>
<span class='texttt'>*this</span>.</p></div></div><div class='para' id='optional.assign-19'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-19'>19</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>bool(rhs) == bool(*this)</span>.</p></div></div><div class='para' id='optional.assign-20'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-20'>20</a></div><div class='itemdescr'><p ><i>Remarks:</i>
If any exception is thrown,
the result of the expression <span class='texttt'>bool(*this)</span> remains unchanged.
If an exception is thrown during the call to <span class='texttt'>T</span>'s constructor,
the state of <span class='texttt'>*rhs.val</span> is determined by
the exception safety guarantee of <span class='texttt'>T</span>'s constructor.
If an exception is thrown during the call to <span class='texttt'>T</span>'s assignment,
the state of <span class='texttt'>*val</span> and <span class='texttt'>*rhs.val</span> is determined by
the exception safety guarantee of <span class='texttt'>T</span>'s assignment.
This function shall not participate in overload resolution unless
</p><ul class='itemize'><li id='optional.assign-20.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.1'>(20.1)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, const U&amp;&gt;</span> is <span class='texttt'>true</span>,
</p></li><li id='optional.assign-20.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.2'>(20.2)</a></div><p ><span class='texttt'>is_assignable_v&lt;T&amp;, const U&amp;&gt;</span> is <span class='texttt'>true</span>,
</p></li><li id='optional.assign-20.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.3'>(20.3)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-20.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.4'>(20.4)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-20.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.5'>(20.5)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-20.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.6'>(20.6)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-20.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.7'>(20.7)</a></div><p ><span class='texttt'>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-20.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.8'>(20.8)</a></div><p ><span class='texttt'>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-20.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.9'>(20.9)</a></div><p ><span class='texttt'>is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-20.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.10'>(20.10)</a></div><p ><span class='texttt'>is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-20.11'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.11'>(20.11)</a></div><p ><span class='texttt'>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-20.12'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.12'>(20.12)</a></div><p ><span class='texttt'>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-20.13'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.13'>(20.13)</a></div><p ><span class='texttt'>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&gt;</span> is <span class='texttt'>false</span>, and
</p></li><li id='optional.assign-20.14'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-20.14'>(20.14)</a></div><p ><span class='texttt'>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&amp;&gt;</span> is <span class='texttt'>false</span>.
</p></li></ul></div></div><p ><span class='indexparent'><a class='index' id='operator=,optional'></a></span><span class='indexparent'><a class='index' id='optional,operator='></a></span><code class='itemdecl'>
template &lt;class U&gt; optional&lt;T&gt;&amp; operator=(optional&lt;U&gt;&amp;&amp; rhs);
</code></p><div class='itemdescr'></div><div class='para' id='optional.assign-21'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-21'>21</a></div><div class='itemdescr'><p ><i>Effects:</i>
See Table <a href='#tab:optional.assign.move.templ'>[tab:optional.assign.move.templ]</a>.
The result of the expression <span class='texttt'>bool(rhs)</span> remains unchanged.

 
     
 
 
 
 
 
 
  <div class='table'>
 
 <span class='center'>
 <div class='tabular'>
  
 <td colspan='1'></td>&amp;&amp;<td colspan='1'><b><span class='texttt'>*this</span> contains a value</b></td>&amp;<td colspan='1'><b><span class='texttt'>*this</span> does not contain a value</b></td><br/>
 



<b><span class='texttt'>rhs</span> contains a value</b>&amp; &amp;
assigns <span class='texttt'>std::move(*rhs)</span> to the contained value &amp;
initializes the contained value as if direct-non-list-initializing
an object of type <span class='texttt'>T</span> with <span class='texttt'>std::move(*rhs)</span> <br/>


<b><span class='texttt'>rhs</span> does not contain a value</b>&amp; &amp;
destroys the contained value by calling <span class='texttt'>val-&gt;T::~T()</span> &amp;
no effect <br/>

 
 
 </div>
 </span>
 </div>

</p></div></div><div class='para' id='optional.assign-22'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-22'>22</a></div><div class='itemdescr'><p ><i>Returns:</i>
<span class='texttt'>*this</span>.</p></div></div><div class='para' id='optional.assign-23'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-23'>23</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>bool(rhs) == bool(*this)</span>.</p></div></div><div class='para' id='optional.assign-24'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-24'>24</a></div><div class='itemdescr'><p ><i>Remarks:</i>
If any exception is thrown,
the result of the expression <span class='texttt'>bool(*this)</span> remains unchanged.
If an exception is thrown during the call to <span class='texttt'>T</span>'s constructor,
the state of <span class='texttt'>*rhs.val</span> is determined by
the exception safety guarantee of <span class='texttt'>T</span>'s constructor.
If an exception is thrown during the call to <span class='texttt'>T</span>'s assignment,
the state of <span class='texttt'>*val</span> and <span class='texttt'>*rhs.val</span> is determined by
the exception safety guarantee of <span class='texttt'>T</span>'s assignment.
This function shall not participate in overload resolution unless
</p><ul class='itemize'><li id='optional.assign-24.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.1'>(24.1)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, U&gt;</span> is <span class='texttt'>true</span>,
</p></li><li id='optional.assign-24.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.2'>(24.2)</a></div><p ><span class='texttt'>is_assignable_v&lt;T&amp;, U&gt;</span> is <span class='texttt'>true</span>,
</p></li><li id='optional.assign-24.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.3'>(24.3)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-24.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.4'>(24.4)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, optional&lt;U&gt;&amp;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-24.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.5'>(24.5)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-24.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.6'>(24.6)</a></div><p ><span class='texttt'>is_constructible_v&lt;T, const optional&lt;U&gt;&amp;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-24.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.7'>(24.7)</a></div><p ><span class='texttt'>is_convertible_v&lt;optional&lt;U&gt;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-24.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.8'>(24.8)</a></div><p ><span class='texttt'>is_convertible_v&lt;optional&lt;U&gt;&amp;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-24.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.9'>(24.9)</a></div><p ><span class='texttt'>is_convertible_v&lt;const optional&lt;U&gt;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-24.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.10'>(24.10)</a></div><p ><span class='texttt'>is_convertible_v&lt;const optional&lt;U&gt;&amp;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-24.11'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.11'>(24.11)</a></div><p ><span class='texttt'>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-24.12'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.12'>(24.12)</a></div><p ><span class='texttt'>is_assignable_v&lt;T&amp;, optional&lt;U&gt;&amp;&amp;&gt;</span> is <span class='texttt'>false</span>,
</p></li><li id='optional.assign-24.13'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.13'>(24.13)</a></div><p ><span class='texttt'>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&gt;</span> is <span class='texttt'>false</span>, and
</p></li><li id='optional.assign-24.14'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#optional.assign-24.14'>(24.14)</a></div><p ><span class='texttt'>is_assignable_v&lt;T&amp;, const optional&lt;U&gt;&amp;&amp;&gt;</span> is <span class='texttt'>false</span>.
</p></li></ul></div></div><p ><span class='indexparent'><a class='index' id='emplace,optional'></a></span><span class='indexparent'><a class='index' id='optional,emplace'></a></span><code class='itemdecl'>
template &lt;class... Args&gt; void emplace(Args&amp;&amp;... args);
</code></p><div class='itemdescr'></div><div class='para' id='optional.assign-25'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-25'>25</a></div><div class='itemdescr'><p ><i>Requires:</i>
<span class='texttt'>is_constructible_v&lt;T, Args&amp;&amp;...&gt;</span> is <span class='texttt'>true</span>.</p></div></div><div class='para' id='optional.assign-26'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-26'>26</a></div><div class='itemdescr'><p ><i>Effects:</i>
Calls <span class='texttt'>*this = nullopt</span>. Then initializes the contained value as if direct-non-list-initializing an object of type <span class='texttt'>T</span> with the arguments <span class='texttt'>std::forward&lt;Args&gt;(args)...</span>.</p></div></div><div class='para' id='optional.assign-27'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-27'>27</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='optional.assign-28'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-28'>28</a></div><div class='itemdescr'><p ><i>Throws:</i>
Any exception thrown by the selected constructor of <span class='texttt'>T</span>.</p></div></div><div class='para' id='optional.assign-29'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-29'>29</a></div><div class='itemdescr'><p ><i>Remarks:</i>
If an exception is thrown during the call to <span class='texttt'>T</span>'s constructor, <span class='texttt'>*this</span> does not contain a value, and the previous <span class='texttt'>*val</span> (if any) has been destroyed.
</p></div></div><p ><span class='indexparent'><a class='index' id='emplace,optional'></a></span><span class='indexparent'><a class='index' id='optional,emplace'></a></span><code class='itemdecl'>
template &lt;class U, class... Args&gt; void emplace(initializer_list&lt;U&gt; il, Args&amp;&amp;... args);
</code></p><div class='itemdescr'></div><div class='para' id='optional.assign-30'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-30'>30</a></div><div class='itemdescr'><p ><i>Effects:</i>
Calls <span class='texttt'>*this = nullopt</span>. Then initializes the contained value as if direct-non-list-initializing an object of type <span class='texttt'>T</span> with the arguments <span class='texttt'>il, std::forward&lt;Args&gt;(args)...</span>.</p></div></div><div class='para' id='optional.assign-31'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-31'>31</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='optional.assign-32'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-32'>32</a></div><div class='itemdescr'><p ><i>Throws:</i>
Any exception thrown by the selected constructor of <span class='texttt'>T</span>.</p></div></div><div class='para' id='optional.assign-33'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-33'>33</a></div><div class='itemdescr'><p ><i>Remarks:</i>
If an exception is thrown during the call to <span class='texttt'>T</span>'s constructor, <span class='texttt'>*this</span> does not contain a value, and the previous <span class='texttt'>*val</span> (if any) has been destroyed.
This function shall not participate in overload resolution unless <span class='texttt'>is_constructible_v&lt;T, initializer_list&lt;U&gt;&amp;, Args&amp;&amp;...&gt;</span> is <span class='texttt'>true</span>.
</p></div></div></div><div id='optional.swap'><h4 ><a class='secnum' href='#optional.swap' style='min-width:118pt'>20.6.3.4</a> Swap <a class='abbr_ref' href='optional.swap'>[optional.swap]</a></h4><p ><span class='indexparent'><a class='index' id='swap,optional'></a></span><span class='indexparent'><a class='index' id='optional,swap'></a></span><code class='itemdecl'>
void swap(optional&amp; rhs) noexcept(<i><span class='texttt'>see below</span></i>);
</code></p><div class='itemdescr'></div><div class='para' id='optional.swap-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.swap-1'>1</a></div><div class='itemdescr'><p ><i>Requires:</i>
Lvalues of type <span class='texttt'>T</span> shall be swappable and <span class='texttt'>is_move_constructible_v&lt;T&gt;</span> is <span class='texttt'>true</span>.</p></div></div><div class='para' id='optional.swap-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.swap-2'>2</a></div><div class='itemdescr'><p ><i>Effects:</i>
See Table <a href='#tab:optional.swap'>[tab:optional.swap]</a>.

 
     
 
 
 
 
 
 
  <div class='table'>
 
 <span class='center'>
 <div class='tabular'>
  
 <td colspan='1'></td>&amp;&amp;<td colspan='1'><b><span class='texttt'>*this</span> contains a value</b></td>&amp;<td colspan='1'><b><span class='texttt'>*this</span> does not contain a value</b></td><br/>
 



<b><span class='texttt'>rhs</span> contains a value</b>&amp; &amp;
calls <span class='texttt'>swap(*(*this), *rhs)</span> &amp;
initializes the contained value of <span class='texttt'>*this</span> as if
direct-non-list-initializing an object of type <span class='texttt'>T</span> with the expression <span class='texttt'>std::move(*rhs)</span>,
followed by <span class='texttt'>rhs.val-&gt;T::~T()</span>;
postcondition is that <span class='texttt'>*this</span> contains a value and <span class='texttt'>rhs</span> does not contain a value <br/>


<b><span class='texttt'>rhs</span> does not contain a value</b>&amp; &amp;
initializes the contained value of <span class='texttt'>rhs</span> as if
direct-non-list-initializing an object of type <span class='texttt'>T</span> with the expression <span class='texttt'>std::move(*(*this))</span>,
followed by <span class='texttt'>val-&gt;T::~T()</span>;
postcondition is that <span class='texttt'>*this</span> does not contain a value and <span class='texttt'>rhs</span> contains a value &amp;
no effect <br/>

 
 
 </div>
 </span>
 </div>

</p></div></div><div class='para' id='optional.swap-3'><div class='marginalizedparent'><a class='marginalized' href='#optional.swap-3'>3</a></div><div class='itemdescr'><p ><i>Throws:</i>
Any exceptions thrown by the operations in the relevant part of Table <a href='#tab:optional.swap'>[tab:optional.swap]</a>.</p></div></div><div class='para' id='optional.swap-4'><div class='marginalizedparent'><a class='marginalized' href='#optional.swap-4'>4</a></div><div class='itemdescr'><p ><i>Remarks:</i>
The expression inside <span class='texttt'>noexcept</span> is equivalent to:
</p><pre class='codeblock'>
is_nothrow_move_constructible_v&lt;T&gt; &amp;&amp; is_nothrow_swappable_v&lt;T&gt;
</pre><p >If any exception is thrown, the results of the expressions <span class='texttt'>bool(*this)</span> and <span class='texttt'>bool(rhs)</span> remain unchanged.
If an exception is thrown during the call to function <span class='texttt'>swap</span>,
the state of <span class='texttt'>*val</span> and <span class='texttt'>*rhs.val</span> is determined by the exception safety guarantee of <span class='texttt'>swap</span> for lvalues of <span class='texttt'>T</span>.
If an exception is thrown during the call to <span class='texttt'>T</span>'s move constructor,
the state of <span class='texttt'>*val</span> and <span class='texttt'>*rhs.val</span> is determined by the exception safety guarantee of <span class='texttt'>T</span>'s move constructor.
</p></div></div></div><div id='optional.observe'><h4 ><a class='secnum' href='#optional.observe' style='min-width:118pt'>20.6.3.5</a> Observers <a class='abbr_ref' href='optional.observe'>[optional.observe]</a></h4><p ><span class='indexparent'><a class='index' id='operator->,optional'></a></span><span class='indexparent'><a class='index' id='optional,operator->'></a></span><code class='itemdecl'>
constexpr const T* operator-&gt;() const;
constexpr T* operator-&gt;();
</code></p><div class='itemdescr'></div><div class='para' id='optional.observe-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-1'>1</a></div><div class='itemdescr'><p ><i>Requires:</i>
<span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='optional.observe-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i>
<span class='texttt'>val</span>.</p></div></div><div class='para' id='optional.observe-3'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-3'>3</a></div><div class='itemdescr'><p ><i>Throws:</i>
Nothing.</p></div></div><div class='para' id='optional.observe-4'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-4'>4</a></div><div class='itemdescr'><p ><i>Remarks:</i>
These functions shall be constexpr functions.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator*,optional'></a></span><span class='indexparent'><a class='index' id='optional,operator*'></a></span><code class='itemdecl'>
constexpr const T&amp; operator*() const&amp;;
constexpr T&amp; operator*() &amp;;
</code></p><div class='itemdescr'></div><div class='para' id='optional.observe-5'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-5'>5</a></div><div class='itemdescr'><p ><i>Requires:</i>
<span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='optional.observe-6'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-6'>6</a></div><div class='itemdescr'><p ><i>Returns:</i>
<span class='texttt'>*val</span>.</p></div></div><div class='para' id='optional.observe-7'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-7'>7</a></div><div class='itemdescr'><p ><i>Throws:</i>
Nothing.</p></div></div><div class='para' id='optional.observe-8'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-8'>8</a></div><div class='itemdescr'><p ><i>Remarks:</i>
These functions shall be constexpr functions.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator*,optional'></a></span><span class='indexparent'><a class='index' id='optional,operator*'></a></span><code class='itemdecl'>
constexpr T&amp;&amp; operator*() &amp;&amp;;
constexpr const T&amp;&amp; operator*() const&amp;&amp;;
</code></p><div class='itemdescr'></div><div class='para' id='optional.observe-9'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-9'>9</a></div><div class='itemdescr'><p ><i>Requires:</i>
<span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='optional.observe-10'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-10'>10</a></div><div class='itemdescr'><p ><i>Effects:</i>
Equivalent to: <span class='texttt'>return std::move(*val);</span>
</p></div></div><p ><span class='indexparent'><a class='index' id='operator_bool,optional'></a></span><span class='indexparent'><a class='index' id='optional,operator_bool'></a></span><code class='itemdecl'>
constexpr explicit operator bool() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='optional.observe-11'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-11'>11</a></div><div class='itemdescr'><p ><i>Returns:</i>
<span class='texttt'>true</span> if and only if <span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='optional.observe-12'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-12'>12</a></div><div class='itemdescr'><p ><i>Remarks:</i>
This function shall be a constexpr function.
</p></div></div><p ><span class='indexparent'><a class='index' id='has_value,optional'></a></span><span class='indexparent'><a class='index' id='optional,has_value'></a></span><code class='itemdecl'>
constexpr bool has_value() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='optional.observe-13'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-13'>13</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>true</span> if and only if <span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='optional.observe-14'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-14'>14</a></div><div class='itemdescr'><p ><i>Remarks:</i> This function shall be a constexpr function.
</p></div></div><p ><span class='indexparent'><a class='index' id='value,optional'></a></span><span class='indexparent'><a class='index' id='optional,value'></a></span><code class='itemdecl'>
constexpr const T&amp; value() const&amp;;
constexpr T&amp; value() &amp;;
</code></p><div class='itemdescr'></div><div class='para' id='optional.observe-15'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-15'>15</a></div><div class='itemdescr'><p ><i>Effects:</i>
Equivalent to:
</p><pre class='codeblock'>
return bool(*this) ? *val : throw bad_optional_access();
</pre></div></div><p ><span class='indexparent'><a class='index' id='value,optional'></a></span><span class='indexparent'><a class='index' id='optional,value'></a></span><code class='itemdecl'>
constexpr T&amp;&amp; value() &amp;&amp;;
constexpr const T&amp;&amp; value() const&amp;&amp;;
</code></p><div class='itemdescr'></div><div class='para' id='optional.observe-16'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-16'>16</a></div><div class='itemdescr'><p ><i>Effects:</i>
Equivalent to:
</p><pre class='codeblock'>
return bool(*this) ? std::move(*val) : throw bad_optional_access();
</pre></div></div><p ><span class='indexparent'><a class='index' id='value_or,optional'></a></span><span class='indexparent'><a class='index' id='optional,value_or'></a></span><code class='itemdecl'>
template &lt;class U&gt; constexpr T value_or(U&amp;&amp; v) const&amp;;
</code></p><div class='itemdescr'></div><div class='para' id='optional.observe-17'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-17'>17</a></div><div class='itemdescr'><p ><i>Effects:</i>
Equivalent to:
</p><pre class='codeblock'>
return bool(*this) ? **this : static_cast&lt;T&gt;(std::forward&lt;U&gt;(v));
</pre></div></div><div class='para' id='optional.observe-18'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-18'>18</a></div><div class='itemdescr'><p ><i>Remarks:</i>
If <span class='texttt'>is_copy_constructible_v&lt;T&gt; &amp;&amp; is_convertible_v&lt;U&amp;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
the program is ill-formed.
</p></div></div><p ><span class='indexparent'><a class='index' id='value_or,optional'></a></span><span class='indexparent'><a class='index' id='optional,value_or'></a></span><code class='itemdecl'>
template &lt;class U&gt; constexpr T value_or(U&amp;&amp; v) &amp;&amp;;
</code></p><div class='itemdescr'></div><div class='para' id='optional.observe-19'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-19'>19</a></div><div class='itemdescr'><p ><i>Effects:</i>
Equivalent to:
</p><pre class='codeblock'>
return bool(*this) ? std::move(**this) : static_cast&lt;T&gt;(std::forward&lt;U&gt;(v));
</pre></div></div><div class='para' id='optional.observe-20'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-20'>20</a></div><div class='itemdescr'><p ><i>Remarks:</i>
If <span class='texttt'>is_move_constructible_v&lt;T&gt; &amp;&amp; is_convertible_v&lt;U&amp;&amp;, T&gt;</span> is <span class='texttt'>false</span>,
the program is ill-formed.
</p></div></div></div><div id='optional.mod'><h4 ><a class='secnum' href='#optional.mod' style='min-width:118pt'>20.6.3.6</a> Modifiers <a class='abbr_ref' href='optional.mod'>[optional.mod]</a></h4><p ><span class='indexparent'><a class='index' id='reset,optional'></a></span><span class='indexparent'><a class='index' id='optional,reset'></a></span><code class='itemdecl'>
void reset() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='optional.mod-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.mod-1'>1</a></div><div class='itemdescr'><p ><i>Effects:</i>
If <span class='texttt'>*this</span> contains a value, calls <span class='texttt'>val-&gt;T::~T()</span> to destroy the contained value;
otherwise no effect.</p></div></div><div class='para' id='optional.mod-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.mod-2'>2</a></div><div class='itemdescr'><p ><i>Postconditions:</i>
<span class='texttt'>*this</span> does not contain a value.
</p></div></div></div></div></div></body></html>