<!DOCTYPE html><html lang='en'><head><title>[optional.optional]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>22</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>22.5</a> Optional objects <a class='abbr_ref' href='optional#optional'>[optional]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>22.5.3</a> Class template <span class='texttt'>optional</span> <a class='abbr_ref'>[optional.optional]</a></h3><div id='general' class='section'><h4 ><a class='secnum' href='#general' style='min-width:95pt'>22.5.3.1</a> General <a class='abbr_ref' href='optional.optional.general'>[optional.optional.general]</a></h4><div class='texpara'><span id='lib:optional,value_type'><span id='lib:value_type,optional'><span id='lib:optional'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:optional'>ðŸ”—</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> optional <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> value_type     <span class='operator'>=</span> T;
    <span class='keyword'>using</span> iterator       <span class='operator'>=</span> <i >implementation-defined</i>;              <span class='comment'>// see <a href='#optional.iterators' title='22.5.3.6&emsp;Iterator support'>[optional.<span class='shy'></span>iterators]</a></span>
    <span class='keyword'>using</span> const_iterator <span class='operator'>=</span> <i >implementation-defined</i>;              <span class='comment'>// see <a href='#optional.iterators' title='22.5.3.6&emsp;Iterator support'>[optional.<span class='shy'></span>iterators]</a></span>

    <span class='comment'>// <a href='#optional.ctor' title='22.5.3.2&emsp;Constructors'>[optional.<span class='shy'></span>ctor]</a>, constructors</span>
    <span class='keyword'>constexpr</span> optional<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> optional<span class='parenthesis'>(</span>nullopt_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> optional<span class='parenthesis'>(</span><span class='keyword'>const</span> optional<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> optional<span class='parenthesis'>(</span>optional<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> optional<span class='parenthesis'>(</span>in_place_t, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> optional<span class='parenthesis'>(</span>in_place_t, initializer_list<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span>, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U <span class='operator'>=</span> remove_cv_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span> optional<span class='parenthesis'>(</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span> optional<span class='parenthesis'>(</span><span class='keyword'>const</span> optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span> optional<span class='parenthesis'>(</span>optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#optional.dtor' title='22.5.3.3&emsp;Destructor'>[optional.<span class='shy'></span>dtor]</a>, destructor</span>
    <span class='keyword'>constexpr</span> <span class='operator'>~</span>optional<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#optional.assign' title='22.5.3.4&emsp;Assignment'>[optional.<span class='shy'></span>assign]</a>, assignment</span>
    <span class='keyword'>constexpr</span> optional<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>nullopt_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> optional<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> optional<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> optional<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>optional<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U <span class='operator'>=</span> remove_cv_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> optional<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> optional<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> optional<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> emplace<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> emplace<span class='parenthesis'>(</span>initializer_list<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span>, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#optional.swap' title='22.5.3.5&emsp;Swap'>[optional.<span class='shy'></span>swap]</a>, swap</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>optional<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#optional.iterators' title='22.5.3.6&emsp;Iterator support'>[optional.<span class='shy'></span>iterators]</a>, iterator support</span>
    <span class='keyword'>constexpr</span> iterator begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> const_iterator begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> iterator end<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> const_iterator end<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// <a href='#optional.observe' title='22.5.3.7&emsp;Observers'>[optional.<span class='shy'></span>observe]</a>, observers</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> <span class='keyword'>operator</span> <span class='keyword'>bool</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> has_value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>&amp;</span> value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;                                 <span class='comment'>// freestanding-deleted</span>
    <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span>;                                             <span class='comment'>// freestanding-deleted</span>
    <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;                                           <span class='comment'>// freestanding-deleted</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;                               <span class='comment'>// freestanding-deleted</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U <span class='operator'>=</span> remove_cv_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> T value_or<span class='parenthesis'>(</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U <span class='operator'>=</span> remove_cv_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> T value_or<span class='parenthesis'>(</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;

    <span class='comment'>// <a href='#optional.monadic' title='22.5.3.8&emsp;Monadic operations'>[optional.<span class='shy'></span>monadic]</a>, monadic operations</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> and_then<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> and_then<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> and_then<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> and_then<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> optional or_else<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> optional or_else<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;

    <span class='comment'>// <a href='#optional.mod' title='22.5.3.9&emsp;Modifiers'>[optional.<span class='shy'></span>mod]</a>, modifiers</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    T<span class='operator'>*</span> <i >val</i>;         <span class='comment'>// <i >exposition only</i></span>
  <span class='curlybracket'>}</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    optional<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> optional<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>
</span></span></span></span></div><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3364'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'>Any instance of <span class='texttt'>optional<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> at any given time either contains a value or does not contain a value<a class='hidden_link' href='#general-1.sentence-1'>.</a></div> <div id='general-1.sentence-2' class='sentence'>When an instance of <span class='texttt'>optional<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> <a class='hidden_link' href='#def:contains_a_value,optional' title='22.5.3.1&emsp;General&emsp;[optional.optional.general]'><span id='def:contains_a_value,optional'><i >contains a value</i></span></a>,
it means that an object of type <span class='texttt'>T</span>, referred to as the optional object's <a class='hidden_link' href='#def:contained_value,optional' title='22.5.3.1&emsp;General&emsp;[optional.optional.general]'><span id='def:contained_value,optional'><i >contained value</i></span></a>,
is nested within (<a href='intro.object' title='6.8.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>) the optional object<a class='hidden_link' href='#general-1.sentence-2'>.</a></div> <div id='general-1.sentence-3' class='sentence'>When an object of type <span class='texttt'>optional<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is contextually converted to <span class='texttt'><span class='keyword'>bool</span></span>,
the conversion returns <span class='texttt'><span class='literal'>true</span></span> if the object contains a value;
otherwise the conversion returns <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#general-1.sentence-3'>.</a></div></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3373'>#</a></div><div class='texpara'><div id='general-2.sentence-1' class='sentence'>When an <span class='texttt'>optional<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> object contains a value,
member <span class='texttt'>val</span> points to the contained value<a class='hidden_link' href='#general-2.sentence-1'>.</a></div></div></div><div class='para' id='general-3'><div class='marginalizedparent'><a class='marginalized' href='#general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3377'>#</a></div><div class='texpara'><div id='general-3.sentence-1' class='sentence'>A type <span class='texttt'>X</span> is a
<a class='hidden_link' href='#def:valid_contained_type,optional' title='22.5.3.1&emsp;General&emsp;[optional.optional.general]'><span id='def:valid_contained_type,optional'><i >valid contained type</i></span></a> for <span class='texttt'>optional</span>
if <span class='texttt'>X</span> is an lvalue reference type or a complete non-array object type,
and <span class='texttt'>remove_<span class='shy'></span>cvref_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span></span> is a type other than <span class='texttt'>in_<span class='shy'></span>place_<span class='shy'></span>t</span> or <span class='texttt'>nullopt_<span class='shy'></span>t</span><a class='hidden_link' href='#general-3.sentence-1'>.</a></div> <div id='general-3.sentence-2' class='sentence'>If a specialization of <span class='texttt'>optional</span> is instantiated with a type <span class='texttt'>T</span>
that is not a valid contained type for <span class='texttt'>optional</span>, the program is ill-formed<a class='hidden_link' href='#general-3.sentence-2'>.</a></div> <div id='general-3.sentence-3' class='sentence'>If <span class='texttt'>T</span> is an object type,
<span class='texttt'>T</span> shall meet the <i >Cpp17Destructible</i> requirements (Table <a href='utility.arg.requirements#tab:cpp17.destructible' title='Table 35: Cpp17Destructible requirements'>35</a>)<a class='hidden_link' href='#general-3.sentence-3'>.</a></div></div></div></div><div id='optional.ctor' class='section'><h4 ><a class='secnum' href='#optional.ctor' style='min-width:95pt'>22.5.3.2</a> Constructors <a class='abbr_ref' href='optional.ctor'>[optional.ctor]</a></h4><div class='para' id='optional.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3389'>#</a></div><div class='texpara'><div id='optional.ctor-1.sentence-1' class='sentence'>The exposition-only variable template <span class='texttt'><i >converts-from-any-cvref</i></span>
is used by some constructors for <span class='texttt'>optional</span><a class='hidden_link' href='#optional.ctor-1.sentence-1'>.</a></div> <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> W<span class='anglebracket'>&gt;</span>
<span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <i >converts-from-any-cvref</i> <span class='operator'>=</span>  <span class='comment'>// <i >exposition only</i></span>
  disjunction_v<span class='anglebracket'>&lt;</span>is_constructible<span class='anglebracket'>&lt;</span>T, W<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span>, is_convertible<span class='anglebracket'>&lt;</span>W<span class='operator'>&amp;</span>, T<span class='anglebracket'>&gt;</span>,
                is_constructible<span class='anglebracket'>&lt;</span>T, W<span class='anglebracket'>&gt;</span>, is_convertible<span class='anglebracket'>&lt;</span>W, T<span class='anglebracket'>&gt;</span>,
                is_constructible<span class='anglebracket'>&lt;</span>T, <span class='keyword'>const</span> W<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span>, is_convertible<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> W<span class='operator'>&amp;</span>, T<span class='anglebracket'>&gt;</span>,
                is_constructible<span class='anglebracket'>&lt;</span>T, <span class='keyword'>const</span> W<span class='anglebracket'>&gt;</span>, is_convertible<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> W, T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>;
</span></div></div><div class='texpara'><div id='lib:optional,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:optional,constructor'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> optional<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>constexpr</span> optional<span class='parenthesis'>(</span>nullopt_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='optional.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3408'>#</a></div><div class='texpara'><div id='optional.ctor-2.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> does not contain a value<a class='hidden_link' href='#optional.ctor-2.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3412'>#</a></div><div class='texpara'><div id='optional.ctor-3.sentence-1' class='sentence'><i >Remarks</i>: No contained value is initialized<a class='hidden_link' href='#optional.ctor-3.sentence-1'>.</a></div> <div id='optional.ctor-3.sentence-2' class='sentence'>For every object type <span class='texttt'>T</span> these constructors are constexpr constructors (<a href='dcl.constexpr' title='9.2.6&emsp;The constexpr and consteval specifiers'>[dcl.<span class='shy'></span>constexpr]</a>)<a class='hidden_link' href='#optional.ctor-3.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:optional,constructor_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> optional<span class='parenthesis'>(</span><span class='keyword'>const</span> optional<span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='optional.ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3424'>#</a></div><div class='texpara'><div id='optional.ctor-4.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>rhs</span> contains a value, direct-non-list-initializes the contained value
with <span class='texttt'><span class='operator'>*</span>rhs</span><a class='hidden_link' href='#optional.ctor-4.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-5'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3429'>#</a></div><div class='texpara'><div id='optional.ctor-5.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>rhs<span class='operator'>.</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.ctor-5.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-6'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3433'>#</a></div><div class='texpara'><div id='optional.ctor-6.sentence-1' class='sentence'><i >Throws</i>: Any exception thrown by the selected constructor of <span class='texttt'>T</span><a class='hidden_link' href='#optional.ctor-6.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-7'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3437'>#</a></div><div class='texpara'><div id='optional.ctor-7.sentence-1' class='sentence'><i >Remarks</i>: This constructor is defined as deleted unless
<span class='texttt'>is_<span class='shy'></span>copy_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.ctor-7.sentence-1'>.</a></div> <div id='optional.ctor-7.sentence-2' class='sentence'>If <span class='texttt'>is_<span class='shy'></span>trivially_<span class='shy'></span>copy_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>,
this constructor is trivial<a class='hidden_link' href='#optional.ctor-7.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,constructor__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:optional,constructor__'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> optional<span class='parenthesis'>(</span>optional<span class='operator'>&amp;</span><span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='optional.ctor-8'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3451'>#</a></div><div class='texpara'><div id='optional.ctor-8.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.ctor-8.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-9'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3455'>#</a></div><div class='texpara'><div id='optional.ctor-9.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>rhs</span> contains a value, direct-non-list-initializes the contained value
with <span class='texttt'><span class='operator'>*</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>rhs<span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.ctor-9.sentence-1'>.</a></div> <div id='optional.ctor-9.sentence-2' class='sentence'><span class='texttt'>rhs<span class='operator'>.</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is unchanged<a class='hidden_link' href='#optional.ctor-9.sentence-2'>.</a></div></div></div></div><div class='para' id='optional.ctor-10'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3461'>#</a></div><div class='texpara'><div id='optional.ctor-10.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>rhs<span class='operator'>.</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.ctor-10.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-11'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3465'>#</a></div><div class='texpara'><div id='optional.ctor-11.sentence-1' class='sentence'><i >Throws</i>: Any exception thrown by the selected constructor of <span class='texttt'>T</span><a class='hidden_link' href='#optional.ctor-11.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-12'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3469'>#</a></div><div class='texpara'><div id='optional.ctor-12.sentence-1' class='sentence'><i >Remarks</i>: The exception specification is equivalent to
<span class='texttt'>is_<span class='shy'></span>nothrow_<span class='shy'></span>move_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#optional.ctor-12.sentence-1'>.</a></div> <div id='optional.ctor-12.sentence-2' class='sentence'>If <span class='texttt'>is_<span class='shy'></span>trivially_<span class='shy'></span>move_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>,
this constructor is trivial<a class='hidden_link' href='#optional.ctor-12.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,constructor___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:optional,constructor___'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> optional<span class='parenthesis'>(</span>in_place_t, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='optional.ctor-13'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3483'>#</a></div><div class='texpara'><div id='optional.ctor-13.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.ctor-13.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-14'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3487'>#</a></div><div class='texpara'><div id='optional.ctor-14.sentence-1' class='sentence'><i >Effects</i>: Direct-non-list-initializes the contained value with <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><a class='hidden_link' href='#optional.ctor-14.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-15'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3491'>#</a></div><div class='texpara'><div id='optional.ctor-15.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value<a class='hidden_link' href='#optional.ctor-15.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-16'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3495'>#</a></div><div class='texpara'><div id='optional.ctor-16.sentence-1' class='sentence'><i >Throws</i>: Any exception thrown by the selected constructor of <span class='texttt'>T</span><a class='hidden_link' href='#optional.ctor-16.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-17'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3499'>#</a></div><div class='texpara'><div id='optional.ctor-17.sentence-1' class='sentence'><i >Remarks</i>: If <span class='texttt'>T</span>'s constructor selected for the initialization is a constexpr constructor, this constructor is a constexpr constructor<a class='hidden_link' href='#optional.ctor-17.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,constructor____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:optional,constructor____'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> optional<span class='parenthesis'>(</span>in_place_t, initializer_list<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span> il, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='optional.ctor-18'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3511'>#</a></div><div class='texpara'><div id='optional.ctor-18.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T, initializer_<span class='shy'></span>list<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.ctor-18.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-19'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3515'>#</a></div><div class='texpara'><div id='optional.ctor-19.sentence-1' class='sentence'><i >Effects</i>: Direct-non-list-initializes the contained value with <span class='texttt'>il, std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><a class='hidden_link' href='#optional.ctor-19.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-20'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3519'>#</a></div><div class='texpara'><div id='optional.ctor-20.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value<a class='hidden_link' href='#optional.ctor-20.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-21'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3523'>#</a></div><div class='texpara'><div id='optional.ctor-21.sentence-1' class='sentence'><i >Throws</i>: Any exception thrown by the selected constructor of <span class='texttt'>T</span><a class='hidden_link' href='#optional.ctor-21.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-22'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3527'>#</a></div><div class='texpara'><div id='optional.ctor-22.sentence-1' class='sentence'><i >Remarks</i>: If <span class='texttt'>T</span>'s constructor selected for the initialization is a constexpr constructor, this constructor is a constexpr constructor<a class='hidden_link' href='#optional.ctor-22.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,constructor_____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:optional,constructor_____'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U <span class='operator'>=</span> remove_cv_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span> optional<span class='parenthesis'>(</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='optional.ctor-23'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3538'>#</a></div><div class='texpara'><div id='optional.ctor-23.sentence-1' class='sentence'><i >Constraints</i>: <ul class='itemize'><li id='optional.ctor-23.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.ctor-23.1'>(23.1)</a></div><span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T, U<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>,</li><li id='optional.ctor-23.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.ctor-23.2'>(23.2)</a></div><span class='texttt'>is_<span class='shy'></span>same_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>remove_<span class='shy'></span>cvref_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span>, in_<span class='shy'></span>place_<span class='shy'></span>t<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>,</li><li id='optional.ctor-23.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.ctor-23.3'>(23.3)</a></div><span class='texttt'>is_<span class='shy'></span>same_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>remove_<span class='shy'></span>cvref_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span>, optional<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>, and</li><li id='optional.ctor-23.4'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.ctor-23.4'>(23.4)</a></div>if <span class='texttt'>T</span> is <span class='mathit'>cv</span> <span class='texttt'><span class='keyword'>bool</span></span>,
<span class='texttt'>remove_<span class='shy'></span>cvref_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> is not a specialization of <span class='texttt'>optional</span><a class='hidden_link' href='#optional.ctor-23.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='optional.ctor-24'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3548'>#</a></div><div class='texpara'><div id='optional.ctor-24.sentence-1' class='sentence'><i >Effects</i>: Direct-non-list-initializes the contained value with <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>v<span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.ctor-24.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-25'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3552'>#</a></div><div class='texpara'><div id='optional.ctor-25.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value<a class='hidden_link' href='#optional.ctor-25.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-26'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3556'>#</a></div><div class='texpara'><div id='optional.ctor-26.sentence-1' class='sentence'><i >Throws</i>: Any exception thrown by the selected constructor of <span class='texttt'>T</span><a class='hidden_link' href='#optional.ctor-26.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-27'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-27'>27</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3560'>#</a></div><div class='texpara'><div id='optional.ctor-27.sentence-1' class='sentence'><i >Remarks</i>: If <span class='texttt'>T</span>'s selected constructor is a constexpr constructor,
this constructor is a constexpr constructor<a class='hidden_link' href='#optional.ctor-27.sentence-1'>.</a></div> <div id='optional.ctor-27.sentence-2' class='sentence'>The expression inside <span id=':explicit'><span class='texttt'><span class='keyword'>explicit</span></span></span> is equivalent to:
<span class='codeblock'><span class='operator'>!</span>is_convertible_v<span class='anglebracket'>&lt;</span>U, T<span class='anglebracket'>&gt;</span>
</span></div></div></div></div><div class='texpara'><div id='lib:optional,constructor______'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:optional,constructor______'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span> optional<span class='parenthesis'>(</span><span class='keyword'>const</span> optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='optional.ctor-28'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-28'>28</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3576'>#</a></div><div class='texpara'><div id='optional.ctor-28.sentence-1' class='sentence'><i >Constraints</i>: <ul class='itemize'><li id='optional.ctor-28.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.ctor-28.1'>(28.1)</a></div><span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T, <span class='keyword'>const</span> U<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>, and</li><li id='optional.ctor-28.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.ctor-28.2'>(28.2)</a></div>if <span class='texttt'>T</span> is not <span class='mathit'>cv</span> <span class='texttt'><span class='keyword'>bool</span></span>,
<span class='texttt'><span class='texttt'><i >converts-from-any-cvref</i></span><span class='anglebracket'>&lt;</span>T, optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#optional.ctor-28.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='optional.ctor-29'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-29'>29</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3584'>#</a></div><div class='texpara'><div id='optional.ctor-29.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>rhs</span> contains a value,
direct-non-list-initializes the contained value with <span class='texttt'><span class='operator'>*</span>rhs</span><a class='hidden_link' href='#optional.ctor-29.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-30'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-30'>30</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3589'>#</a></div><div class='texpara'><div id='optional.ctor-30.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>rhs<span class='operator'>.</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.ctor-30.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-31'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-31'>31</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3593'>#</a></div><div class='texpara'><div id='optional.ctor-31.sentence-1' class='sentence'><i >Throws</i>: Any exception thrown by the selected constructor of <span class='texttt'>T</span><a class='hidden_link' href='#optional.ctor-31.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-32'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-32'>32</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3597'>#</a></div><div class='texpara'><div id='optional.ctor-32.sentence-1' class='sentence'><i >Remarks</i>: The expression inside <span id=':explicit_'><span class='texttt'><span class='keyword'>explicit</span></span></span> is equivalent to:
<span class='codeblock'><span class='operator'>!</span>is_convertible_v<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> U<span class='operator'>&amp;</span>, T<span class='anglebracket'>&gt;</span>
</span></div></div></div></div><div class='texpara'><div id='lib:optional,constructor_______'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:optional,constructor_______'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span> optional<span class='parenthesis'>(</span>optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='optional.ctor-33'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-33'>33</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3611'>#</a></div><div class='texpara'><div id='optional.ctor-33.sentence-1' class='sentence'><i >Constraints</i>: <ul class='itemize'><li id='optional.ctor-33.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.ctor-33.1'>(33.1)</a></div><span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T, U<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>, and</li><li id='optional.ctor-33.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.ctor-33.2'>(33.2)</a></div>if <span class='texttt'>T</span> is not <span class='mathit'>cv</span> <span class='texttt'><span class='keyword'>bool</span></span>,
<span class='texttt'><span class='texttt'><i >converts-from-any-cvref</i></span><span class='anglebracket'>&lt;</span>T, optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#optional.ctor-33.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='optional.ctor-34'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-34'>34</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3619'>#</a></div><div class='texpara'><div id='optional.ctor-34.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>rhs</span> contains a value,
direct-non-list-initializes the contained value with <span class='texttt'><span class='operator'>*</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>rhs<span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.ctor-34.sentence-1'>.</a></div> <div id='optional.ctor-34.sentence-2' class='sentence'><span class='texttt'>rhs<span class='operator'>.</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is unchanged<a class='hidden_link' href='#optional.ctor-34.sentence-2'>.</a></div></div></div></div><div class='para' id='optional.ctor-35'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-35'>35</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3625'>#</a></div><div class='texpara'><div id='optional.ctor-35.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>rhs<span class='operator'>.</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.ctor-35.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-36'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-36'>36</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3629'>#</a></div><div class='texpara'><div id='optional.ctor-36.sentence-1' class='sentence'><i >Throws</i>: Any exception thrown by the selected constructor of <span class='texttt'>T</span><a class='hidden_link' href='#optional.ctor-36.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.ctor-37'><div class='marginalizedparent'><a class='marginalized' href='#optional.ctor-37'>37</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3633'>#</a></div><div class='texpara'><div id='optional.ctor-37.sentence-1' class='sentence'><i >Remarks</i>: The expression inside <span id=':explicit__'><span class='texttt'><span class='keyword'>explicit</span></span></span> is equivalent to:
<span class='codeblock'><span class='operator'>!</span>is_convertible_v<span class='anglebracket'>&lt;</span>U, T<span class='anglebracket'>&gt;</span>
</span></div></div></div></div></div><div id='optional.dtor' class='section'><h4 ><a class='secnum' href='#optional.dtor' style='min-width:95pt'>22.5.3.3</a> Destructor <a class='abbr_ref' href='optional.dtor'>[optional.dtor]</a></h4><div class='texpara'><div id='lib:optional,destructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:optional,destructor'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='operator'>~</span>optional<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='optional.dtor-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.dtor-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3649'>#</a></div><div class='texpara'><div id='optional.dtor-1.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>is_<span class='shy'></span>trivially_<span class='shy'></span>destructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>true</span></span> and <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value, calls
<span class='codeblock'>val<span class='operator'>-</span><span class='anglebracket'>&gt;</span>T<span class='operator'>::</span><span class='operator'>~</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
</span></div></div></div></div><div class='para' id='optional.dtor-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.dtor-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3656'>#</a></div><div class='texpara'><div id='optional.dtor-2.sentence-1' class='sentence'><i >Remarks</i>: If <span class='texttt'>is_<span class='shy'></span>trivially_<span class='shy'></span>destructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>, then this destructor is trivial<a class='hidden_link' href='#optional.dtor-2.sentence-1'>.</a></div></div></div></div></div><div id='optional.assign' class='section'><h4 ><a class='secnum' href='#optional.assign' style='min-width:95pt'>22.5.3.4</a> Assignment <a class='abbr_ref' href='optional.assign'>[optional.assign]</a></h4><div class='texpara'><div id='lib:optional,operator='><div id='lib:operator=,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> optional<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>nullopt_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='optional.assign-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3669'>#</a></div><div class='texpara'><div id='optional.assign-1.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value, calls <span class='texttt'>val<span class='operator'>-</span><span class='anglebracket'>&gt;</span>T<span class='operator'>&#x200b;::&#x200b;</span><span class='operator'>~</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> to destroy the contained value; otherwise no effect<a class='hidden_link' href='#optional.assign-1.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3673'>#</a></div><div class='texpara'><div id='optional.assign-2.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> does not contain a value<a class='hidden_link' href='#optional.assign-2.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-3'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3677'>#</a></div><div class='texpara'><div id='optional.assign-3.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#optional.assign-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,operator=_'><div id='lib:operator=,optional_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,optional_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> optional<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> optional<span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='optional.assign-4'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3688'>#</a></div><div class='texpara'><div id='optional.assign-4.sentence-1' class='sentence'><i >Effects</i>: See Table <a href='#tab:optional.assign.copy' title='Table 67: optional&#x200b;::&#x200b;operator=(const optional&amp;) effects'>67</a><a class='hidden_link' href='#optional.assign-4.sentence-1'>.</a></div></div><div class='texpara'><div class='numberedTable' id='tab:optional.assign.copy'>Table <a href='#tab:optional.assign.copy'>67</a> &mdash; <span class='texttt'>optional<span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> optional<span class='operator'>&amp;</span><span class='parenthesis'>)</span></span> effects&emsp;<a href='./tab:optional.assign.copy'>[tab:optional.assign.copy]</a><br><table ><tr id='tab:optional.assign.copy-row-1'><td class='center'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.assign.copy-row-1'>ðŸ”—</a></div></td><td class='empty border justify'></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.copy-row-1-column-3-sentence-1' class='sentence'><b><span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value</b></div></div></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.copy-row-1-column-4-sentence-1' class='sentence'><b><span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> does not contain a value</b></div></div></td></tr><tr id='tab:optional.assign.copy-row-2' class='capsep'><td class='left' style='width:1.2in'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.assign.copy-row-2'>ðŸ”—</a></div><div class='texpara'><div id='tab:optional.assign.copy-row-2-column-1-sentence-1' class='sentence'><b><span class='texttt'>rhs</span> contains a value</b></div></div></td><td class='empty border justify'></td><td class='border left' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.copy-row-2-column-3-sentence-1' class='sentence'>assigns <span class='texttt'><span class='operator'>*</span>rhs</span> to the contained value</div></div></td><td class='border left' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.copy-row-2-column-4-sentence-1' class='sentence'>direct-non-list-initializes the contained value with <span class='texttt'><span class='operator'>*</span>rhs</span></div></div></td></tr><tr id='tab:optional.assign.copy-row-3'><td class='left cline' style='width:1.2in'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.assign.copy-row-3'>ðŸ”—</a></div><div class='texpara'><div id='tab:optional.assign.copy-row-3-column-1-sentence-1' class='sentence'><b><span class='texttt'>rhs</span> does not contain a value</b></div></div></td><td class='empty border justify'></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.copy-row-3-column-3-sentence-1' class='sentence'>destroys the contained value by calling <span class='texttt'>val<span class='operator'>-</span><span class='anglebracket'>&gt;</span>T<span class='operator'>&#x200b;::&#x200b;</span><span class='operator'>~</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></div></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.copy-row-3-column-4-sentence-1' class='sentence'>no effect</div></div></td></tr></table></div></div></div></div><div class='para' id='optional.assign-5'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3705'>#</a></div><div class='texpara'><div id='optional.assign-5.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>rhs<span class='operator'>.</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.assign-5.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-6'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3709'>#</a></div><div class='texpara'><div id='optional.assign-6.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#optional.assign-6.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-7'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3713'>#</a></div><div class='texpara'><div id='optional.assign-7.sentence-1' class='sentence'><i >Remarks</i>: If any exception is thrown, the result of the expression <span class='texttt'><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> remains unchanged<a class='hidden_link' href='#optional.assign-7.sentence-1'>.</a></div> <div id='optional.assign-7.sentence-2' class='sentence'>If an exception is thrown during the call to <span class='texttt'>T</span>'s copy constructor, no effect<a class='hidden_link' href='#optional.assign-7.sentence-2'>.</a></div> <div id='optional.assign-7.sentence-3' class='sentence'>If an exception is thrown during the call to <span class='texttt'>T</span>'s copy assignment,
the state of its contained value is as defined by the exception safety guarantee of <span class='texttt'>T</span>'s copy assignment<a class='hidden_link' href='#optional.assign-7.sentence-3'>.</a></div> <div id='optional.assign-7.sentence-4' class='sentence'>This operator is defined as deleted unless
<span class='texttt'>is_<span class='shy'></span>copy_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span> and
<span class='texttt'>is_<span class='shy'></span>copy_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.assign-7.sentence-4'>.</a></div> <div id='optional.assign-7.sentence-5' class='sentence'>If <span class='texttt'>is_<span class='shy'></span>trivially_<span class='shy'></span>copy_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>
<span class='texttt'>is_<span class='shy'></span>trivially_<span class='shy'></span>copy_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>
<span class='texttt'>is_<span class='shy'></span>trivially_<span class='shy'></span>destructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>,
this assignment operator is trivial<a class='hidden_link' href='#optional.assign-7.sentence-5'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,operator=__'><div id='lib:operator=,optional__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,optional__'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> optional<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>optional<span class='operator'>&amp;</span><span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='optional.assign-8'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3734'>#</a></div><div class='texpara'><div id='optional.assign-8.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span> and
<span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.assign-8.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-9'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3739'>#</a></div><div class='texpara'><div id='optional.assign-9.sentence-1' class='sentence'><i >Effects</i>: See Table <a href='#tab:optional.assign.move' title='Table 68: optional&#x200b;::&#x200b;operator=(optional&amp;&amp;) effects'>68</a><a class='hidden_link' href='#optional.assign-9.sentence-1'>.</a></div> <div id='optional.assign-9.sentence-2' class='sentence'>The result of the expression <span class='texttt'>rhs<span class='operator'>.</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> remains unchanged<a class='hidden_link' href='#optional.assign-9.sentence-2'>.</a></div></div><div class='texpara'><div class='numberedTable' id='tab:optional.assign.move'>Table <a href='#tab:optional.assign.move'>68</a> &mdash; <span class='texttt'>optional<span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>optional<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span></span> effects&emsp;<a href='./tab:optional.assign.move'>[tab:optional.assign.move]</a><br><table ><tr id='tab:optional.assign.move-row-1'><td class='center'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.assign.move-row-1'>ðŸ”—</a></div></td><td class='empty border justify'></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.move-row-1-column-3-sentence-1' class='sentence'><b><span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value</b></div></div></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.move-row-1-column-4-sentence-1' class='sentence'><b><span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> does not contain a value</b></div></div></td></tr><tr id='tab:optional.assign.move-row-2' class='capsep'><td class='left' style='width:1.2in'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.assign.move-row-2'>ðŸ”—</a></div><div class='texpara'><div id='tab:optional.assign.move-row-2-column-1-sentence-1' class='sentence'><b><span class='texttt'>rhs</span> contains a value</b></div></div></td><td class='empty border justify'></td><td class='border left' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.move-row-2-column-3-sentence-1' class='sentence'>assigns <span class='texttt'><span class='operator'>*</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>rhs<span class='parenthesis'>)</span></span> to the contained value</div></div></td><td class='border left' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.move-row-2-column-4-sentence-1' class='sentence'>direct-non-list-initializes the contained value with <span class='texttt'><span class='operator'>*</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>rhs<span class='parenthesis'>)</span></span></div></div></td></tr><tr id='tab:optional.assign.move-row-3'><td class='left cline' style='width:1.2in'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.assign.move-row-3'>ðŸ”—</a></div><div class='texpara'><div id='tab:optional.assign.move-row-3-column-1-sentence-1' class='sentence'><b><span class='texttt'>rhs</span> does not contain a value</b></div></div></td><td class='empty border justify'></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.move-row-3-column-3-sentence-1' class='sentence'>destroys the contained value by calling <span class='texttt'>val<span class='operator'>-</span><span class='anglebracket'>&gt;</span>T<span class='operator'>&#x200b;::&#x200b;</span><span class='operator'>~</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></div></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.move-row-3-column-4-sentence-1' class='sentence'>no effect</div></div></td></tr></table></div></div></div></div><div class='para' id='optional.assign-10'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3757'>#</a></div><div class='texpara'><div id='optional.assign-10.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>rhs<span class='operator'>.</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.assign-10.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-11'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3761'>#</a></div><div class='texpara'><div id='optional.assign-11.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#optional.assign-11.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-12'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3765'>#</a></div><div class='texpara'><div id='optional.assign-12.sentence-1' class='sentence'><i >Remarks</i>: The exception specification is equivalent to:
<span class='codeblock'>is_nothrow_move_assignable_v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> is_nothrow_move_constructible_v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>
</span></div></div></div></div><div class='para' id='optional.assign-13'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3772'>#</a></div><div class='texpara'><div id='optional.assign-13.sentence-1' class='sentence'>If any exception is thrown, the result of the expression <span class='texttt'><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> remains unchanged<a class='hidden_link' href='#optional.assign-13.sentence-1'>.</a></div> <div id='optional.assign-13.sentence-2' class='sentence'>If an exception is thrown during the call to <span class='texttt'>T</span>'s move constructor,
the state of <span class='texttt'><span class='operator'>*</span>rhs<span class='operator'>.</span>val</span> is determined by the exception safety guarantee of <span class='texttt'>T</span>'s move constructor<a class='hidden_link' href='#optional.assign-13.sentence-2'>.</a></div> <div id='optional.assign-13.sentence-3' class='sentence'>If an exception is thrown during the call to <span class='texttt'>T</span>'s move assignment,
the state of <span class='texttt'><span class='operator'>*</span>val</span> and <span class='texttt'><span class='operator'>*</span>rhs<span class='operator'>.</span>val</span> is determined by the exception safety guarantee of <span class='texttt'>T</span>'s move assignment<a class='hidden_link' href='#optional.assign-13.sentence-3'>.</a></div> <div id='optional.assign-13.sentence-4' class='sentence'>If <span class='texttt'>is_<span class='shy'></span>trivially_<span class='shy'></span>move_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>
<span class='texttt'>is_<span class='shy'></span>trivially_<span class='shy'></span>move_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>
<span class='texttt'>is_<span class='shy'></span>trivially_<span class='shy'></span>destructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>,
this assignment operator is trivial<a class='hidden_link' href='#optional.assign-13.sentence-4'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,operator=___'><div id='lib:operator=,optional___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,optional___'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U <span class='operator'>=</span> remove_cv_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> optional<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='optional.assign-14'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3790'>#</a></div><div class='texpara'><div id='optional.assign-14.sentence-1' class='sentence'><i >Constraints</i>: <ul class='itemize'><li id='optional.assign-14.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-14.1'>(14.1)</a></div><span class='texttt'>is_<span class='shy'></span>same_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>remove_<span class='shy'></span>cvref_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span>, optional<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>,</li><li id='optional.assign-14.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-14.2'>(14.2)</a></div><span class='texttt'>conjunction_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>is_<span class='shy'></span>scalar<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>, is_<span class='shy'></span>same<span class='anglebracket'>&lt;</span>T, decay_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>,</li><li id='optional.assign-14.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-14.3'>(14.3)</a></div><span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T, U<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>, and</li><li id='optional.assign-14.4'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-14.4'>(14.4)</a></div><span class='texttt'>is_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span>, U<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.assign-14.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='optional.assign-15'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3799'>#</a></div><div class='texpara'><div id='optional.assign-15.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value, assigns <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>v<span class='parenthesis'>)</span></span> to the contained value; otherwise direct-non-list-initializes the contained value with <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>v<span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.assign-15.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-16'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3803'>#</a></div><div class='texpara'><div id='optional.assign-16.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value<a class='hidden_link' href='#optional.assign-16.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-17'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3807'>#</a></div><div class='texpara'><div id='optional.assign-17.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#optional.assign-17.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-18'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3811'>#</a></div><div class='texpara'><div id='optional.assign-18.sentence-1' class='sentence'><i >Remarks</i>: If any exception is thrown, the result of the expression <span class='texttt'><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> remains unchanged<a class='hidden_link' href='#optional.assign-18.sentence-1'>.</a></div> <div id='optional.assign-18.sentence-2' class='sentence'>If an exception is thrown during the call to <span class='texttt'>T</span>'s constructor, the state of <span class='texttt'>v</span> is determined by the exception safety guarantee of <span class='texttt'>T</span>'s constructor<a class='hidden_link' href='#optional.assign-18.sentence-2'>.</a></div> <div id='optional.assign-18.sentence-3' class='sentence'>If an exception is thrown during the call to <span class='texttt'>T</span>'s assignment, the state of <span class='texttt'><span class='operator'>*</span>val</span> and <span class='texttt'>v</span> is determined by the exception safety guarantee of <span class='texttt'>T</span>'s assignment<a class='hidden_link' href='#optional.assign-18.sentence-3'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,operator=____'><div id='lib:operator=,optional____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,optional____'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> optional<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='optional.assign-19'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3822'>#</a></div><div class='texpara'><div id='optional.assign-19.sentence-1' class='sentence'><i >Constraints</i>: <ul class='itemize'><li id='optional.assign-19.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-19.1'>(19.1)</a></div><span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T, <span class='keyword'>const</span> U<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>,</li><li id='optional.assign-19.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-19.2'>(19.2)</a></div><span class='texttt'>is_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span>, <span class='keyword'>const</span> U<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>,</li><li id='optional.assign-19.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-19.3'>(19.3)</a></div><span class='texttt'><span class='texttt'><i >converts-from-any-cvref</i></span><span class='anglebracket'>&lt;</span>T, optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>,</li><li id='optional.assign-19.4'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-19.4'>(19.4)</a></div><span class='texttt'>is_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span>, optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>,</li><li id='optional.assign-19.5'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-19.5'>(19.5)</a></div><span class='texttt'>is_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span>, optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>,</li><li id='optional.assign-19.6'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-19.6'>(19.6)</a></div><span class='texttt'>is_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span>, <span class='keyword'>const</span> optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>, and</li><li id='optional.assign-19.7'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-19.7'>(19.7)</a></div><span class='texttt'>is_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span>, <span class='keyword'>const</span> optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#optional.assign-19.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='optional.assign-20'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3834'>#</a></div><div class='texpara'><div id='optional.assign-20.sentence-1' class='sentence'><i >Effects</i>: See Table <a href='#tab:optional.assign.copy.templ' title='Table 69: optional&#x200b;::&#x200b;operator=(const optional&lt;U&gt;&amp;) effects'>69</a><a class='hidden_link' href='#optional.assign-20.sentence-1'>.</a></div></div><div class='texpara'><div class='numberedTable' id='tab:optional.assign.copy.templ'>Table <a href='#tab:optional.assign.copy.templ'>69</a> &mdash; <span class='texttt'>optional<span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span></span> effects&emsp;<a href='./tab:optional.assign.copy.templ'>[tab:optional.assign.copy.templ]</a><br><table ><tr id='tab:optional.assign.copy.templ-row-1'><td class='center'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.assign.copy.templ-row-1'>ðŸ”—</a></div></td><td class='empty border justify'></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.copy.templ-row-1-column-3-sentence-1' class='sentence'><b><span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value</b></div></div></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.copy.templ-row-1-column-4-sentence-1' class='sentence'><b><span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> does not contain a value</b></div></div></td></tr><tr id='tab:optional.assign.copy.templ-row-2' class='capsep'><td class='left' style='width:1.2in'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.assign.copy.templ-row-2'>ðŸ”—</a></div><div class='texpara'><div id='tab:optional.assign.copy.templ-row-2-column-1-sentence-1' class='sentence'><b><span class='texttt'>rhs</span> contains a value</b></div></div></td><td class='empty border justify'></td><td class='border left' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.copy.templ-row-2-column-3-sentence-1' class='sentence'>assigns <span class='texttt'><span class='operator'>*</span>rhs</span> to the contained value</div></div></td><td class='border left' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.copy.templ-row-2-column-4-sentence-1' class='sentence'>direct-non-list-initializes the contained value with <span class='texttt'><span class='operator'>*</span>rhs</span></div></div></td></tr><tr id='tab:optional.assign.copy.templ-row-3'><td class='left cline' style='width:1.2in'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.assign.copy.templ-row-3'>ðŸ”—</a></div><div class='texpara'><div id='tab:optional.assign.copy.templ-row-3-column-1-sentence-1' class='sentence'><b><span class='texttt'>rhs</span> does not contain a value</b></div></div></td><td class='empty border justify'></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.copy.templ-row-3-column-3-sentence-1' class='sentence'>destroys the contained value by calling <span class='texttt'>val<span class='operator'>-</span><span class='anglebracket'>&gt;</span>T<span class='operator'>&#x200b;::&#x200b;</span><span class='operator'>~</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></div></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.copy.templ-row-3-column-4-sentence-1' class='sentence'>no effect</div></div></td></tr></table></div></div></div></div><div class='para' id='optional.assign-21'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3851'>#</a></div><div class='texpara'><div id='optional.assign-21.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>rhs<span class='operator'>.</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.assign-21.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-22'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3855'>#</a></div><div class='texpara'><div id='optional.assign-22.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#optional.assign-22.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-23'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3859'>#</a></div><div class='texpara'><div id='optional.assign-23.sentence-1' class='sentence'><i >Remarks</i>: If any exception is thrown,
the result of the expression <span class='texttt'><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> remains unchanged<a class='hidden_link' href='#optional.assign-23.sentence-1'>.</a></div> <div id='optional.assign-23.sentence-2' class='sentence'>If an exception is thrown during the call to <span class='texttt'>T</span>'s constructor,
the state of <span class='texttt'><span class='operator'>*</span>rhs<span class='operator'>.</span>val</span> is determined by
the exception safety guarantee of <span class='texttt'>T</span>'s constructor<a class='hidden_link' href='#optional.assign-23.sentence-2'>.</a></div> <div id='optional.assign-23.sentence-3' class='sentence'>If an exception is thrown during the call to <span class='texttt'>T</span>'s assignment,
the state of <span class='texttt'><span class='operator'>*</span>val</span> and <span class='texttt'><span class='operator'>*</span>rhs<span class='operator'>.</span>val</span> is determined by
the exception safety guarantee of <span class='texttt'>T</span>'s assignment<a class='hidden_link' href='#optional.assign-23.sentence-3'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,operator=_____'><div id='lib:operator=,optional_____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,optional_____'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> optional<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='optional.assign-24'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3877'>#</a></div><div class='texpara'><div id='optional.assign-24.sentence-1' class='sentence'><i >Constraints</i>: <ul class='itemize'><li id='optional.assign-24.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-24.1'>(24.1)</a></div><span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T, U<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>,</li><li id='optional.assign-24.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-24.2'>(24.2)</a></div><span class='texttt'>is_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span>, U<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>,</li><li id='optional.assign-24.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-24.3'>(24.3)</a></div><span class='texttt'><span class='texttt'><i >converts-from-any-cvref</i></span><span class='anglebracket'>&lt;</span>T, optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>,</li><li id='optional.assign-24.4'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-24.4'>(24.4)</a></div><span class='texttt'>is_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span>, optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>,</li><li id='optional.assign-24.5'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-24.5'>(24.5)</a></div><span class='texttt'>is_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span>, optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>,</li><li id='optional.assign-24.6'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-24.6'>(24.6)</a></div><span class='texttt'>is_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span>, <span class='keyword'>const</span> optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>, and</li><li id='optional.assign-24.7'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#optional.assign-24.7'>(24.7)</a></div><span class='texttt'>is_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span>, <span class='keyword'>const</span> optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#optional.assign-24.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='optional.assign-25'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3889'>#</a></div><div class='texpara'><div id='optional.assign-25.sentence-1' class='sentence'><i >Effects</i>: See Table <a href='#tab:optional.assign.move.templ' title='Table 70: optional&#x200b;::&#x200b;operator=(optional&lt;U&gt;&amp;&amp;) effects'>70</a><a class='hidden_link' href='#optional.assign-25.sentence-1'>.</a></div> <div id='optional.assign-25.sentence-2' class='sentence'>The result of the expression <span class='texttt'>rhs<span class='operator'>.</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> remains unchanged<a class='hidden_link' href='#optional.assign-25.sentence-2'>.</a></div></div><div class='texpara'><div class='numberedTable' id='tab:optional.assign.move.templ'>Table <a href='#tab:optional.assign.move.templ'>70</a> &mdash; <span class='texttt'>optional<span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span></span> effects&emsp;<a href='./tab:optional.assign.move.templ'>[tab:optional.assign.move.templ]</a><br><table ><tr id='tab:optional.assign.move.templ-row-1'><td class='center'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.assign.move.templ-row-1'>ðŸ”—</a></div></td><td class='empty border justify'></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.move.templ-row-1-column-3-sentence-1' class='sentence'><b><span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value</b></div></div></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.move.templ-row-1-column-4-sentence-1' class='sentence'><b><span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> does not contain a value</b></div></div></td></tr><tr id='tab:optional.assign.move.templ-row-2' class='capsep'><td class='left' style='width:1.2in'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.assign.move.templ-row-2'>ðŸ”—</a></div><div class='texpara'><div id='tab:optional.assign.move.templ-row-2-column-1-sentence-1' class='sentence'><b><span class='texttt'>rhs</span> contains a value</b></div></div></td><td class='empty border justify'></td><td class='border left' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.move.templ-row-2-column-3-sentence-1' class='sentence'>assigns <span class='texttt'><span class='operator'>*</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>rhs<span class='parenthesis'>)</span></span> to the contained value</div></div></td><td class='border left' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.move.templ-row-2-column-4-sentence-1' class='sentence'>direct-non-list-initializes the contained value with <span class='texttt'><span class='operator'>*</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>rhs<span class='parenthesis'>)</span></span></div></div></td></tr><tr id='tab:optional.assign.move.templ-row-3'><td class='left cline' style='width:1.2in'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.assign.move.templ-row-3'>ðŸ”—</a></div><div class='texpara'><div id='tab:optional.assign.move.templ-row-3-column-1-sentence-1' class='sentence'><b><span class='texttt'>rhs</span> does not contain a value</b></div></div></td><td class='empty border justify'></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.move.templ-row-3-column-3-sentence-1' class='sentence'>destroys the contained value by calling <span class='texttt'>val<span class='operator'>-</span><span class='anglebracket'>&gt;</span>T<span class='operator'>&#x200b;::&#x200b;</span><span class='operator'>~</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></div></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.assign.move.templ-row-3-column-4-sentence-1' class='sentence'>no effect</div></div></td></tr></table></div></div></div></div><div class='para' id='optional.assign-26'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3907'>#</a></div><div class='texpara'><div id='optional.assign-26.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>rhs<span class='operator'>.</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.assign-26.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-27'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-27'>27</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3911'>#</a></div><div class='texpara'><div id='optional.assign-27.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#optional.assign-27.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-28'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-28'>28</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3915'>#</a></div><div class='texpara'><div id='optional.assign-28.sentence-1' class='sentence'><i >Remarks</i>: If any exception is thrown,
the result of the expression <span class='texttt'><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> remains unchanged<a class='hidden_link' href='#optional.assign-28.sentence-1'>.</a></div> <div id='optional.assign-28.sentence-2' class='sentence'>If an exception is thrown during the call to <span class='texttt'>T</span>'s constructor,
the state of <span class='texttt'><span class='operator'>*</span>rhs<span class='operator'>.</span>val</span> is determined by
the exception safety guarantee of <span class='texttt'>T</span>'s constructor<a class='hidden_link' href='#optional.assign-28.sentence-2'>.</a></div> <div id='optional.assign-28.sentence-3' class='sentence'>If an exception is thrown during the call to <span class='texttt'>T</span>'s assignment,
the state of <span class='texttt'><span class='operator'>*</span>val</span> and <span class='texttt'><span class='operator'>*</span>rhs<span class='operator'>.</span>val</span> is determined by
the exception safety guarantee of <span class='texttt'>T</span>'s assignment<a class='hidden_link' href='#optional.assign-28.sentence-3'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,emplace'><div id='lib:emplace,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:emplace,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> emplace<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='optional.assign-29'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-29'>29</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3933'>#</a></div><div class='texpara'><div id='optional.assign-29.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.assign-29.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-30'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-30'>30</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3937'>#</a></div><div class='texpara'><div id='optional.assign-30.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span> <span class='operator'>=</span> nullopt</span><a class='hidden_link' href='#optional.assign-30.sentence-1'>.</a></div> <div id='optional.assign-30.sentence-2' class='sentence'>Then direct-non-list-initializes the contained value
with <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward&#x200b;<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><a class='hidden_link' href='#optional.assign-30.sentence-2'>.</a></div></div></div></div><div class='para' id='optional.assign-31'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-31'>31</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3942'>#</a></div><div class='texpara'><div id='optional.assign-31.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value<a class='hidden_link' href='#optional.assign-31.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-32'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-32'>32</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3946'>#</a></div><div class='texpara'><div id='optional.assign-32.sentence-1' class='sentence'><i >Returns</i>: A reference to the new contained value<a class='hidden_link' href='#optional.assign-32.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-33'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-33'>33</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3950'>#</a></div><div class='texpara'><div id='optional.assign-33.sentence-1' class='sentence'><i >Throws</i>: Any exception thrown by the selected constructor of <span class='texttt'>T</span><a class='hidden_link' href='#optional.assign-33.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-34'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-34'>34</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3954'>#</a></div><div class='texpara'><div id='optional.assign-34.sentence-1' class='sentence'><i >Remarks</i>: If an exception is thrown during the call to <span class='texttt'>T</span>'s constructor, <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> does not contain a value, and the previous <span class='texttt'><span class='operator'>*</span>val</span> (if any) has been destroyed<a class='hidden_link' href='#optional.assign-34.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,emplace_'><div id='lib:emplace,optional_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:emplace,optional_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> emplace<span class='parenthesis'>(</span>initializer_list<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span> il, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='optional.assign-35'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-35'>35</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3965'>#</a></div><div class='texpara'><div id='optional.assign-35.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T, initializer_<span class='shy'></span>list<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.assign-35.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-36'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-36'>36</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3969'>#</a></div><div class='texpara'><div id='optional.assign-36.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span> <span class='operator'>=</span> nullopt</span><a class='hidden_link' href='#optional.assign-36.sentence-1'>.</a></div> <div id='optional.assign-36.sentence-2' class='sentence'>Then direct-non-list-initializes the contained value with
<span class='texttt'>il, std<span class='operator'>&#x200b;::&#x200b;</span>&#x200b;forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><a class='hidden_link' href='#optional.assign-36.sentence-2'>.</a></div></div></div></div><div class='para' id='optional.assign-37'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-37'>37</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3974'>#</a></div><div class='texpara'><div id='optional.assign-37.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value<a class='hidden_link' href='#optional.assign-37.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-38'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-38'>38</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3978'>#</a></div><div class='texpara'><div id='optional.assign-38.sentence-1' class='sentence'><i >Returns</i>: A reference to the new contained value<a class='hidden_link' href='#optional.assign-38.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-39'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-39'>39</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3982'>#</a></div><div class='texpara'><div id='optional.assign-39.sentence-1' class='sentence'><i >Throws</i>: Any exception thrown by the selected constructor of <span class='texttt'>T</span><a class='hidden_link' href='#optional.assign-39.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.assign-40'><div class='marginalizedparent'><a class='marginalized' href='#optional.assign-40'>40</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3986'>#</a></div><div class='texpara'><div id='optional.assign-40.sentence-1' class='sentence'><i >Remarks</i>: If an exception is thrown during the call to <span class='texttt'>T</span>'s constructor, <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> does not contain a value, and the previous <span class='texttt'><span class='operator'>*</span>val</span> (if any) has been destroyed<a class='hidden_link' href='#optional.assign-40.sentence-1'>.</a></div></div></div></div></div><div id='optional.swap' class='section'><h4 ><a class='secnum' href='#optional.swap' style='min-width:95pt'>22.5.3.5</a> Swap <a class='abbr_ref' href='optional.swap'>[optional.swap]</a></h4><div class='texpara'><div id='lib:optional,swap'><div id='lib:swap,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:swap,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>optional<span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='optional.swap-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.swap-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L3999'>#</a></div><div class='texpara'><div id='optional.swap-1.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.swap-1.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.swap-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.swap-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4003'>#</a></div><div class='texpara'><div id='optional.swap-2.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>T</span> meets the <a href='swappable.requirements#:Cpp17Swappable' title='16.4.4.3&emsp;Swappable requirements&emsp;[swappable.requirements]'><i >Cpp17Swappable</i></a> requirements (<a href='swappable.requirements' title='16.4.4.3&emsp;Swappable requirements'>[swappable.<span class='shy'></span>requirements]</a>)<a class='hidden_link' href='#optional.swap-2.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.swap-3'><div class='marginalizedparent'><a class='marginalized' href='#optional.swap-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4007'>#</a></div><div class='texpara'><div id='optional.swap-3.sentence-1' class='sentence'><i >Effects</i>: See Table <a href='#tab:optional.swap' title='Table 71: optional&#x200b;::&#x200b;swap(optional&amp;) effects'>71</a><a class='hidden_link' href='#optional.swap-3.sentence-1'>.</a></div></div><div class='texpara'><div class='numberedTable' id='tab:optional.swap'>Table <a href='#tab:optional.swap'>71</a> &mdash; <span class='texttt'>optional<span class='operator'>&#x200b;::&#x200b;</span>swap<span class='parenthesis'>(</span>optional<span class='operator'>&amp;</span><span class='parenthesis'>)</span></span> effects&emsp;<a href='./tab:optional.swap'>[tab:optional.swap]</a><br><table ><tr id='tab:optional.swap-row-1'><td class='center'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.swap-row-1'>ðŸ”—</a></div></td><td class='empty border justify'></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.swap-row-1-column-3-sentence-1' class='sentence'><b><span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value</b></div></div></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.swap-row-1-column-4-sentence-1' class='sentence'><b><span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> does not contain a value</b></div></div></td></tr><tr id='tab:optional.swap-row-2' class='capsep'><td class='left' style='width:1.2in'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.swap-row-2'>ðŸ”—</a></div><div class='texpara'><div id='tab:optional.swap-row-2-column-1-sentence-1' class='sentence'><b><span class='texttt'>rhs</span> contains a value</b></div></div></td><td class='empty border justify'></td><td class='border left' style='width:1.8in'><div class='texpara'><div id='tab:optional.swap-row-2-column-3-sentence-1' class='sentence'>calls <span class='texttt'>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span>, <span class='operator'>*</span>rhs<span class='parenthesis'>)</span></span></div></div></td><td class='border left' style='width:1.8in'><div class='texpara'><div id='tab:optional.swap-row-2-column-4-sentence-1' class='sentence'>direct-non-list-initializes the contained value of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
with <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span><span class='operator'>*</span>rhs<span class='parenthesis'>)</span></span>,
followed by <span class='texttt'>rhs<span class='operator'>.</span>val<span class='operator'>-</span><span class='anglebracket'>&gt;</span>T<span class='operator'>&#x200b;::&#x200b;</span><span class='operator'>~</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>;
postcondition is that <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value and <span class='texttt'>rhs</span> does not contain a value</div></div></td></tr><tr id='tab:optional.swap-row-3'><td class='left cline' style='width:1.2in'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:optional.swap-row-3'>ðŸ”—</a></div><div class='texpara'><div id='tab:optional.swap-row-3-column-1-sentence-1' class='sentence'><b><span class='texttt'>rhs</span> does not contain a value</b></div></div></td><td class='empty border justify'></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.swap-row-3-column-3-sentence-1' class='sentence'>direct-non-list-initializes the contained value of <span class='texttt'>rhs</span>
with <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>,
followed by <span class='texttt'>val<span class='operator'>-</span><span class='anglebracket'>&gt;</span>T<span class='operator'>&#x200b;::&#x200b;</span><span class='operator'>~</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>;
postcondition is that <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> does not contain a value and <span class='texttt'>rhs</span> contains a value</div></div></td><td class='border left cline' style='width:1.8in'><div class='texpara'><div id='tab:optional.swap-row-3-column-4-sentence-1' class='sentence'>no effect</div></div></td></tr></table></div></div></div></div><div class='para' id='optional.swap-4'><div class='marginalizedparent'><a class='marginalized' href='#optional.swap-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4030'>#</a></div><div class='texpara'><div id='optional.swap-4.sentence-1' class='sentence'><i >Throws</i>: Any exceptions thrown by the operations in the relevant part of Table <a href='#tab:optional.swap' title='Table 71: optional&#x200b;::&#x200b;swap(optional&amp;) effects'>71</a><a class='hidden_link' href='#optional.swap-4.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.swap-5'><div class='marginalizedparent'><a class='marginalized' href='#optional.swap-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4034'>#</a></div><div class='texpara'><div id='optional.swap-5.sentence-1' class='sentence'><i >Remarks</i>: The exception specification is equivalent to:
<span class='codeblock'>is_nothrow_move_constructible_v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> is_nothrow_swappable_v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>
</span></div></div></div></div><div class='para' id='optional.swap-6'><div class='marginalizedparent'><a class='marginalized' href='#optional.swap-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4041'>#</a></div><div class='texpara'><div id='optional.swap-6.sentence-1' class='sentence'>If any exception is thrown, the results of the expressions <span class='texttt'><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> and <span class='texttt'>rhs<span class='operator'>.</span>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> remain unchanged<a class='hidden_link' href='#optional.swap-6.sentence-1'>.</a></div> <div id='optional.swap-6.sentence-2' class='sentence'>If an exception is thrown during the call to function <span class='texttt'>swap</span>,
the state of <span class='texttt'><span class='operator'>*</span>val</span> and <span class='texttt'><span class='operator'>*</span>rhs<span class='operator'>.</span>val</span> is determined by the exception safety guarantee of <span class='texttt'>swap</span> for lvalues of <span class='texttt'>T</span><a class='hidden_link' href='#optional.swap-6.sentence-2'>.</a></div> <div id='optional.swap-6.sentence-3' class='sentence'>If an exception is thrown during the call to <span class='texttt'>T</span>'s move constructor,
the state of <span class='texttt'><span class='operator'>*</span>val</span> and <span class='texttt'><span class='operator'>*</span>rhs<span class='operator'>.</span>val</span> is determined by the exception safety guarantee of <span class='texttt'>T</span>'s move constructor<a class='hidden_link' href='#optional.swap-6.sentence-3'>.</a></div></div></div></div></div><div id='optional.iterators' class='section'><h4 ><a class='secnum' href='#optional.iterators' style='min-width:95pt'>22.5.3.6</a> Iterator support <a class='abbr_ref' href='optional.iterators'>[optional.iterators]</a></h4><div class='texpara'><div id='lib:optional,const_iterator'><div id='lib:const_iterator,optional'><div id='lib:optional,iterator'><div id='lib:iterator,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:iterator,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>using</span> iterator       <span class='operator'>=</span> <i >implementation-defined</i>;
<span class='keyword'>using</span> const_iterator <span class='operator'>=</span> <i >implementation-defined</i>;
</code></div></div></div></div></div></div><div class='para' id='optional.iterators-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.iterators-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4059'>#</a></div><div class='texpara'><div id='optional.iterators-1.sentence-1' class='sentence'>These types
model <a href='iterator.concept.contiguous#concept:contiguous_iterator' title='24.3.4.14&emsp;Concept contiguous_&shy;iterator&emsp;[iterator.concept.contiguous]'><span id='conceptref:contiguous_iterator'><span class='texttt'>contiguous_<span class='shy'></span>iterator</span></span></a> (<a href='iterator.concept.contiguous' title='24.3.4.14&emsp;Concept contiguous_&shy;iterator'>[iterator.<span class='shy'></span>concept.<span class='shy'></span>contiguous]</a>),
meet the <a href='random.access.iterators#:Cpp17RandomAccessIterator' title='24.3.5.7&emsp;Random access iterators&emsp;[random.access.iterators]'><i >Cpp17RandomAccessIterator</i></a> requirements (<a href='random.access.iterators' title='24.3.5.7&emsp;Random access iterators'>[random.<span class='shy'></span>access.<span class='shy'></span>iterators]</a>), and
meet the requirements for constexpr iterators (<a href='iterator.requirements.general' title='24.3.1&emsp;General'>[iterator.<span class='shy'></span>requirements.<span class='shy'></span>general]</a>),
with value type <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#optional.iterators-1.sentence-1'>.</a></div> <div id='optional.iterators-1.sentence-2' class='sentence'>The reference type is <span class='texttt'>T<span class='operator'>&amp;</span></span> for <span class='texttt'>iterator</span> and
<span class='texttt'><span class='keyword'>const</span> T<span class='operator'>&amp;</span></span> for <span class='texttt'>const_<span class='shy'></span>iterator</span><a class='hidden_link' href='#optional.iterators-1.sentence-2'>.</a></div></div></div></div><div class='para' id='optional.iterators-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.iterators-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4068'>#</a></div><div class='texpara'><div id='optional.iterators-2.sentence-1' class='sentence'>All requirements on container iterators (<a href='container.reqmts' title='23.2.2.2&emsp;Container requirements'>[container.<span class='shy'></span>reqmts]</a>) apply to
<span class='texttt'>optional<span class='operator'>&#x200b;::&#x200b;</span>iterator</span> and <span class='texttt'>optional<span class='operator'>&#x200b;::&#x200b;</span>const_<span class='shy'></span>iterator</span> as well<a class='hidden_link' href='#optional.iterators-2.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.iterators-3'><div class='marginalizedparent'><a class='marginalized' href='#optional.iterators-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4072'>#</a></div><div class='texpara'><div id='optional.iterators-3.sentence-1' class='sentence'>Any operation that initializes or destroys the contained value of an optional object invalidates all iterators into that object<a class='hidden_link' href='#optional.iterators-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,begin'><div id='lib:begin,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:begin,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> iterator begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>constexpr</span> const_iterator begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='optional.iterators-4'><div class='marginalizedparent'><a class='marginalized' href='#optional.iterators-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4083'>#</a></div><div class='texpara'><div id='optional.iterators-4.sentence-1' class='sentence'><i >Returns</i>: If <span class='texttt'>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span>,
an iterator referring to the contained value<a class='hidden_link' href='#optional.iterators-4.sentence-1'>.</a></div> <div id='optional.iterators-4.sentence-2' class='sentence'>Otherwise, a past-the-end iterator value<a class='hidden_link' href='#optional.iterators-4.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,end'><div id='lib:end,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:end,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> iterator end<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>constexpr</span> const_iterator end<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='optional.iterators-5'><div class='marginalizedparent'><a class='marginalized' href='#optional.iterators-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4097'>#</a></div><div class='texpara'><div id='optional.iterators-5.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>+</span> has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.iterators-5.sentence-1'>.</a></div></div></div></div></div><div id='optional.observe' class='section'><h4 ><a class='secnum' href='#optional.observe' style='min-width:95pt'>22.5.3.7</a> Observers <a class='abbr_ref' href='optional.observe'>[optional.observe]</a></h4><div class='texpara'><div id='lib:optional,operator->'><div id='lib:operator->,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator-%3e,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>constexpr</span> T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='optional.observe-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4111'>#</a></div><div class='texpara'><div id='optional.observe-1.sentence-1' class='sentence'><i >Hardened preconditions</i>: <span class='texttt'>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.observe-1.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.observe-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4115'>#</a></div><div class='texpara'><div id='optional.observe-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>val</span><a class='hidden_link' href='#optional.observe-2.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.observe-3'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4119'>#</a></div><div class='texpara'><div id='optional.observe-3.sentence-1' class='sentence'><i >Remarks</i>: These functions are constexpr functions<a class='hidden_link' href='#optional.observe-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,operator*'><div id='lib:operator*,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator*,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='optional.observe-4'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4131'>#</a></div><div class='texpara'><div id='optional.observe-4.sentence-1' class='sentence'><i >Hardened preconditions</i>: <span class='texttt'>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.observe-4.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.observe-5'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4135'>#</a></div><div class='texpara'><div id='optional.observe-5.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span>val</span><a class='hidden_link' href='#optional.observe-5.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.observe-6'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4139'>#</a></div><div class='texpara'><div id='optional.observe-6.sentence-1' class='sentence'><i >Remarks</i>: These functions are constexpr functions<a class='hidden_link' href='#optional.observe-6.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,operator*_'><div id='lib:operator*,optional_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator*,optional_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='optional.observe-7'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4151'>#</a></div><div class='texpara'><div id='optional.observe-7.sentence-1' class='sentence'><i >Hardened preconditions</i>: <span class='texttt'>has_<span class='shy'></span>value<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.observe-7.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.observe-8'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4155'>#</a></div><div class='texpara'><div id='optional.observe-8.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span><span class='operator'>*</span>val<span class='parenthesis'>)</span>;</span></div></div></div></div><div class='texpara'><div id='lib:optional,operator_bool'><div id='lib:operator_bool,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator_bool,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> <span class='keyword'>operator</span> <span class='keyword'>bool</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='optional.observe-9'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4166'>#</a></div><div class='texpara'><div id='optional.observe-9.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='literal'>true</span></span> if and only if <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value<a class='hidden_link' href='#optional.observe-9.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.observe-10'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4170'>#</a></div><div class='texpara'><div id='optional.observe-10.sentence-1' class='sentence'><i >Remarks</i>: This function is a constexpr function<a class='hidden_link' href='#optional.observe-10.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,has_value'><div id='lib:has_value,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:has_value,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>bool</span> has_value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='optional.observe-11'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4181'>#</a></div><div class='texpara'><div id='optional.observe-11.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='literal'>true</span></span> if and only if <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value<a class='hidden_link' href='#optional.observe-11.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.observe-12'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4185'>#</a></div><div class='texpara'><div id='optional.observe-12.sentence-1' class='sentence'><i >Remarks</i>: This function is a constexpr function<a class='hidden_link' href='#optional.observe-12.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,value'><div id='lib:value,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:value,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>&amp;</span> value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
<span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span>;
</code></div></div></div></div><div class='para' id='optional.observe-13'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4197'>#</a></div><div class='texpara'><div id='optional.observe-13.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> has_value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>?</span> <span class='operator'>*</span>val <span class='operator'>:</span> <span class='keyword'>throw</span> bad_optional_access<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:optional,value_'><div id='lib:value,optional_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:value,optional_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
<span class='keyword'>constexpr</span> <span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
</code></div></div></div></div><div class='para' id='optional.observe-14'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4213'>#</a></div><div class='texpara'><div id='optional.observe-14.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> has_value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>?</span> std<span class='operator'>::</span>move<span class='parenthesis'>(</span><span class='operator'>*</span>val<span class='parenthesis'>)</span> <span class='operator'>:</span> <span class='keyword'>throw</span> bad_optional_access<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:optional,value_or'><div id='lib:value_or,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:value_or,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U <span class='operator'>=</span> remove_cv_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> T value_or<span class='parenthesis'>(</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
</code></div></div></div></div><div class='para' id='optional.observe-15'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4227'>#</a></div><div class='texpara'><div id='optional.observe-15.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>is_<span class='shy'></span>copy_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> is_<span class='shy'></span>convertible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span>, T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.observe-15.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.observe-16'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4231'>#</a></div><div class='texpara'><div id='optional.observe-16.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> has_value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>?</span> <span class='operator'>*</span><span class='operator'>*</span><span class='keyword'>this</span> <span class='operator'>:</span> <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>v<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:optional,value_or_'><div id='lib:value_or,optional_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:value_or,optional_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U <span class='operator'>=</span> remove_cv_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> T value_or<span class='parenthesis'>(</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
</code></div></div></div></div><div class='para' id='optional.observe-17'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4245'>#</a></div><div class='texpara'><div id='optional.observe-17.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> is_<span class='shy'></span>convertible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span>, T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.observe-17.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.observe-18'><div class='marginalizedparent'><a class='marginalized' href='#optional.observe-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4249'>#</a></div><div class='texpara'><div id='optional.observe-18.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> has_value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>?</span> std<span class='operator'>::</span>move<span class='parenthesis'>(</span><span class='operator'>*</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span> <span class='operator'>:</span> <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>v<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div></div></div></div></div><div id='optional.monadic' class='section'><h4 ><a class='secnum' href='#optional.monadic' style='min-width:95pt'>22.5.3.8</a> Monadic operations <a class='abbr_ref' href='optional.monadic'>[optional.monadic]</a></h4><div class='texpara'><div id='lib:optional,and_then'><div id='lib:and_then,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:and_then,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> and_then<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> and_then<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
</code></div></div></div></div><div class='para' id='optional.monadic-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4266'>#</a></div><div class='texpara'><div id='optional.monadic-1.sentence-1' class='sentence'>Let <span class='texttt'>U</span> be <span class='texttt'>invoke_<span class='shy'></span>result_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>F, <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='texttt'><i >val</i></span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#optional.monadic-1.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.monadic-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4269'>#</a></div><div class='texpara'><div id='optional.monadic-2.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>remove_<span class='shy'></span>cvref_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> is a specialization of <span class='texttt'>optional</span><a class='hidden_link' href='#optional.monadic-2.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.monadic-3'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4273'>#</a></div><div class='texpara'><div id='optional.monadic-3.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> invoke<span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span>, <span class='operator'>*</span><i >val</i><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span> <span class='keyword'>else</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> remove_cvref_t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div></div></div></div><div class='texpara'><div id='lib:optional,and_then_'><div id='lib:and_then,optional_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:and_then,optional_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> and_then<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> and_then<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
</code></div></div></div></div><div class='para' id='optional.monadic-4'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4292'>#</a></div><div class='texpara'><div id='optional.monadic-4.sentence-1' class='sentence'>Let <span class='texttt'>U</span> be <span class='texttt'>invoke_<span class='shy'></span>result_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>F, <span class='keyword'>decltype</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span><span class='operator'>*</span><span class='texttt'><i >val</i></span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#optional.monadic-4.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.monadic-5'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4295'>#</a></div><div class='texpara'><div id='optional.monadic-5.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>remove_<span class='shy'></span>cvref_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> is a specialization of <span class='texttt'>optional</span><a class='hidden_link' href='#optional.monadic-5.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.monadic-6'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4299'>#</a></div><div class='texpara'><div id='optional.monadic-6.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> invoke<span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span>, std<span class='operator'>::</span>move<span class='parenthesis'>(</span><span class='operator'>*</span><i >val</i><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span> <span class='keyword'>else</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> remove_cvref_t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div></div></div></div><div class='texpara'><div id='lib:optional,transform'><div id='lib:transform,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:transform,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
</code></div></div></div></div><div class='para' id='optional.monadic-7'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4318'>#</a></div><div class='texpara'><div id='optional.monadic-7.sentence-1' class='sentence'>Let <span class='texttt'>U</span> be <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>invoke_<span class='shy'></span>result_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>F, <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='texttt'><i >val</i></span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#optional.monadic-7.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.monadic-8'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4321'>#</a></div><div class='texpara'><div id='optional.monadic-8.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>U</span> is a valid contained type for <span class='texttt'>optional</span><a class='hidden_link' href='#optional.monadic-8.sentence-1'>.</a></div> <div id='optional.monadic-8.sentence-2' class='sentence'>The declaration
<span class='codeblock'>U u<span class='parenthesis'>(</span>invoke<span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span>, <span class='operator'>*</span><i >val</i><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span>
is well-formed for some invented variable <span class='texttt'>u</span><a class='hidden_link' href='#optional.monadic-8.sentence-2'>.</a></div> <div id='optional.monadic-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#optional.monadic-note-1'>1</a></i>:&ensp;<div id='optional.monadic-8.sentence-3' class='sentence'>There is no requirement that <span class='texttt'>U</span> is movable (<a href='dcl.init.general' title='9.5.1&emsp;General'>[dcl.<span class='shy'></span>init.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#optional.monadic-8.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='optional.monadic-9'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4333'>#</a></div><div class='texpara'><div id='optional.monadic-9.sentence-1' class='sentence'><i >Returns</i>: If <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value, an <span class='texttt'>optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> object
whose contained value is direct-non-list-initialized with
<span class='texttt'>invoke<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span>, <span class='operator'>*</span><span class='texttt'><i >val</i></span><span class='parenthesis'>)</span></span>;
otherwise, <span class='texttt'>optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.monadic-9.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,transform_'><div id='lib:transform,optional_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:transform,optional_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> transform<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
</code></div></div></div></div><div class='para' id='optional.monadic-10'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4348'>#</a></div><div class='texpara'><div id='optional.monadic-10.sentence-1' class='sentence'>Let <span class='texttt'>U</span> be
<span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>invoke_<span class='shy'></span>result_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>F, <span class='keyword'>decltype</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span><span class='operator'>*</span><span class='texttt'><i >val</i></span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#optional.monadic-10.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.monadic-11'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4352'>#</a></div><div class='texpara'><div id='optional.monadic-11.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>U</span> is a valid contained type for <span class='texttt'>optional</span><a class='hidden_link' href='#optional.monadic-11.sentence-1'>.</a></div> <div id='optional.monadic-11.sentence-2' class='sentence'>The declaration
<span class='codeblock'>U u<span class='parenthesis'>(</span>invoke<span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span>, std<span class='operator'>::</span>move<span class='parenthesis'>(</span><span class='operator'>*</span><i >val</i><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span>
is well-formed for some invented variable <span class='texttt'>u</span><a class='hidden_link' href='#optional.monadic-11.sentence-2'>.</a></div> <div id='optional.monadic-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#optional.monadic-note-2'>2</a></i>:&ensp;<div id='optional.monadic-11.sentence-3' class='sentence'>There is no requirement that <span class='texttt'>U</span> is movable (<a href='dcl.init.general' title='9.5.1&emsp;General'>[dcl.<span class='shy'></span>init.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#optional.monadic-11.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='optional.monadic-12'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4364'>#</a></div><div class='texpara'><div id='optional.monadic-12.sentence-1' class='sentence'><i >Returns</i>: If <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value, an <span class='texttt'>optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> object
whose contained value is direct-non-list-initialized with
<span class='texttt'>invoke<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span>, std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span><span class='operator'>*</span><span class='texttt'><i >val</i></span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>;
otherwise, <span class='texttt'>optional<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#optional.monadic-12.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:optional,or_else'><div id='lib:or_else,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:or_else,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> optional or_else<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>&amp;</span>;
</code></div></div></div></div><div class='para' id='optional.monadic-13'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4378'>#</a></div><div class='texpara'><div id='optional.monadic-13.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>F</span> models <a href='concept.invocable#concept:invocable' title='18.7.2&emsp;Concept invocable&emsp;[concept.invocable]'><span id='conceptref:invocable'><span class='texttt'>invocable</span></span></a> and
<span class='texttt'>T</span> models <a href='concept.copyconstructible#concept:copy_constructible' title='18.4.14&emsp;Concept copy_&shy;constructible&emsp;[concept.copyconstructible]'><span id='conceptref:copy_constructible'><span class='texttt'>copy_<span class='shy'></span>constructible</span></span></a><a class='hidden_link' href='#optional.monadic-13.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.monadic-14'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4383'>#</a></div><div class='texpara'><div id='optional.monadic-14.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>is_<span class='shy'></span>same_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>remove_<span class='shy'></span>cvref_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>invoke_<span class='shy'></span>result_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>, optional<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.monadic-14.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.monadic-15'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4387'>#</a></div><div class='texpara'><div id='optional.monadic-15.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='operator'>*</span><span class='keyword'>this</span>;
<span class='curlybracket'>}</span> <span class='keyword'>else</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div></div></div></div><div class='texpara'><div id='lib:optional,or_else_'><div id='lib:or_else,optional_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:or_else,optional_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> optional or_else<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>;
</code></div></div></div></div><div class='para' id='optional.monadic-16'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4405'>#</a></div><div class='texpara'><div id='optional.monadic-16.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>F</span> models <a href='concept.invocable#concept:invocable' title='18.7.2&emsp;Concept invocable&emsp;[concept.invocable]'><span id='conceptref:invocable_'><span class='texttt'>invocable</span></span></a> and
<span class='texttt'>T</span> models <a href='concept.moveconstructible#concept:move_constructible' title='18.4.13&emsp;Concept move_&shy;constructible&emsp;[concept.moveconstructible]'><span id='conceptref:move_constructible'><span class='texttt'>move_<span class='shy'></span>constructible</span></span></a><a class='hidden_link' href='#optional.monadic-16.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.monadic-17'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4410'>#</a></div><div class='texpara'><div id='optional.monadic-17.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>is_<span class='shy'></span>same_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>remove_<span class='shy'></span>cvref_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>invoke_<span class='shy'></span>result_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>, optional<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#optional.monadic-17.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.monadic-18'><div class='marginalizedparent'><a class='marginalized' href='#optional.monadic-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4414'>#</a></div><div class='texpara'><div id='optional.monadic-18.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> std<span class='operator'>::</span>move<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span> <span class='keyword'>else</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div></div></div></div></div><div id='optional.mod' class='section'><h4 ><a class='secnum' href='#optional.mod' style='min-width:95pt'>22.5.3.9</a> Modifiers <a class='abbr_ref' href='optional.mod'>[optional.mod]</a></h4><div class='texpara'><div id='lib:optional,reset'><div id='lib:reset,optional'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reset,optional'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='optional.mod-1'><div class='marginalizedparent'><a class='marginalized' href='#optional.mod-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4434'>#</a></div><div class='texpara'><div id='optional.mod-1.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains a value, calls <span class='texttt'>val<span class='operator'>-</span><span class='anglebracket'>&gt;</span>T<span class='operator'>&#x200b;::&#x200b;</span><span class='operator'>~</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> to destroy the contained value;
otherwise no effect<a class='hidden_link' href='#optional.mod-1.sentence-1'>.</a></div></div></div></div><div class='para' id='optional.mod-2'><div class='marginalizedparent'><a class='marginalized' href='#optional.mod-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e4a7f6da57891013ed378672c470970d95ea190e/source/utilities.tex#L4439'>#</a></div><div class='texpara'><div id='optional.mod-2.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> does not contain a value<a class='hidden_link' href='#optional.mod-2.sentence-1'>.</a></div></div></div></div></div></div></body></html>