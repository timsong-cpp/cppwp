<!DOCTYPE html><html lang='en'><head><title>[intro.object]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>6.7</a> Memory and objects <a class='abbr_ref' href='basic.memobj#intro.object'>[basic.memobj]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>6.7.2</a> Object model <a class='abbr_ref'>[intro.object]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cbbbbc53b68c18a611bf75c5e626ad2c6aa56a3c/source/basic.tex#L2956'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':object_model'></a></span>The constructs in a C++ program create, destroy, refer to, access, and
manipulate objects<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>An <a class='hidden_link' href='#def:object' id='def:object'><i >object</i></a> is created
by a <a href='basic.def'>definition</a>,
by a <a class='grammarterm' href='expr.new#nt:new-expression'>new-expression</a>,
when implicitly changing the active member of a <a href='class.union'>union</a>,
or
when a temporary object is created (<a href='conv.rval'>[conv.rval]</a>, <a href='class.temporary'>[class.temporary]</a>)<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>An object occupies a region of storage
in its period of construction (<a href='class.cdtor'>[class.cdtor]</a>),
throughout its <a href='basic.life'>lifetime</a>,
and
in its period of destruction (<a href='class.cdtor'>[class.cdtor]</a>)<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.note-1' class='note'>[&nbsp;<a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-4' class='sentence'>A function is not an object, regardless of whether or not it
occupies storage in the way that objects do<a class='hidden_link' href='#1.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='1.sentence-5' class='sentence'>
The properties of an
object are determined when the object is created<a class='hidden_link' href='#1.sentence-5'>.</a></div> <div id='1.sentence-6' class='sentence'>An object can have a
name (<a href='basic.pre'>[basic.pre]</a>)<a class='hidden_link' href='#1.sentence-6'>.</a></div> <div id='1.sentence-7' class='sentence'>An object has a storage
duration (<a href='basic.stc'>[basic.stc]</a>) which influences its
lifetime (<a href='basic.life'>[basic.life]</a>)<a class='hidden_link' href='#1.sentence-7'>.</a></div> <div id='1.sentence-8' class='sentence'>An object has a
type (<a href='basic.types'>[basic.types]</a>)<a class='hidden_link' href='#1.sentence-8'>.</a></div> <div id='1.sentence-9' class='sentence'>Some objects are
polymorphic (<a href='class.virtual'>[class.virtual]</a>); the implementation
generates information associated with each such object that makes it
possible to determine that object's type during program execution<a class='hidden_link' href='#1.sentence-9'>.</a></div> <div id='1.sentence-10' class='sentence'>For
other objects, the interpretation of the values found therein is
determined by the type of the <a class='grammarterm' href='expr.comma#nt:expression'>expression</a><span class='textit'>s</span> (<a href='expr.compound'>[expr.compound]</a>)
used to access them<a class='hidden_link' href='#1.sentence-10'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cbbbbc53b68c18a611bf75c5e626ad2c6aa56a3c/source/basic.tex#L2989'>#</a></div><div id='2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':subobject'></a></span>Objects can contain other objects, called <a class='hidden_link' href='#def:subobject' id='def:subobject'><i >subobjects</i></a><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>A subobject can be
a <a class='hidden_link' href='#def:member_subobject' id='def:member_subobject'><i >member subobject</i></a> (<a href='class.mem'>[class.mem]</a>), a <a class='hidden_link' href='#def:base_class_subobject' id='def:base_class_subobject'><i >base class subobject</i></a> (<a href='class.derived'>[class.derived]</a>),
or an array element<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':object,complete'></a></span>An object that is not a subobject of any other object is called a <a class='hidden_link' href='#def:complete_object' id='def:complete_object'><i >complete
object</i></a><a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>If an object is created
in storage associated with a member subobject or array element <span class='textit'>e</span>
(which may or may not be within its lifetime),
the created object
is a subobject of <span class='textit'>e</span>'s containing object if:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div>the lifetime of <span class='textit'>e</span>'s containing object has begun and not ended, and</li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div>the storage for the new object exactly overlays the storage location associated with <span class='textit'>e</span>, and</li><li id='2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.3'>(2.3)</a></div>the new object is of the same type as <span class='textit'>e</span> (ignoring cv-qualification)<a class='hidden_link' href='#2.sentence-4'>.</a></li></ul></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cbbbbc53b68c18a611bf75c5e626ad2c6aa56a3c/source/basic.tex#L3012'>#</a></div><div id='3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':object,providing_storage_for'></a></span>If a complete object is created (<a href='expr.new'>[expr.new]</a>)
in storage associated with another object <span class='textit'>e</span>
of type “array of <span class='math'><span class='mathalpha'>N</span></span> <span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>char</span></span>” or
of type “array of <span class='math'><span class='mathalpha'>N</span></span> <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span>” (<a href='cstddef.syn'>[cstddef.syn]</a>),
that array <a class='hidden_link' href='#def:provides_storage' id='def:provides_storage'><i >provides storage</i></a>
for the created object if:
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.1'>(3.1)</a></div>the lifetime of <span class='textit'>e</span> has begun and not ended, and</li><li id='3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.2'>(3.2)</a></div>the storage for the new object fits entirely within <span class='textit'>e</span>, and</li><li id='3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.3'>(3.3)</a></div>there is no smaller array object that satisfies these constraints<a class='hidden_link' href='#3.sentence-1'>.</a></li></ul></div> <div id='3.note-1' class='note'>[&nbsp;<a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-2' class='sentence'>If that portion of the array
previously provided storage for another object,
the lifetime of that object ends
because its storage was reused (<a href='basic.life'>[basic.life]</a>)<a class='hidden_link' href='#3.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='3.example-1' class='example'>[&nbsp;<a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>T<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> AlignedUnion <span class='curlybracket'>{</span>
  <span class='keyword'>alignas</span><span class='parenthesis'>(</span>T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='keyword'>unsigned</span> <span class='keyword'>char</span> data<span class='squarebracket'>[</span>max<span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span><span class='squarebracket'>]</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  AlignedUnion<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>char</span><span class='anglebracket'>&gt;</span> au;
  <span class='keyword'>int</span> <span class='operator'>*</span>p <span class='operator'>=</span> <span class='keyword'>new</span> <span class='parenthesis'>(</span>au<span class='operator'>.</span>data<span class='parenthesis'>)</span> <span class='keyword'>int</span>;           <span class='comment'>// OK, <span class='tcode_in_codeblock'>au.data</span> provides storage</span>
  <span class='keyword'>char</span> <span class='operator'>*</span>c <span class='operator'>=</span> <span class='keyword'>new</span> <span class='parenthesis'>(</span>au<span class='operator'>.</span>data<span class='parenthesis'>)</span> <span class='keyword'>char</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK, ends lifetime of <span class='tcode_in_codeblock'>*p</span></span>
  <span class='keyword'>char</span> <span class='operator'>*</span>d <span class='operator'>=</span> <span class='keyword'>new</span> <span class='parenthesis'>(</span>au<span class='operator'>.</span>data <span class='operator'>+</span> <span class='literal'>1</span><span class='parenthesis'>)</span> <span class='keyword'>char</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>return</span> <span class='operator'>*</span>c <span class='operator'>+</span> <span class='operator'>*</span>d;                       <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>

<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>unsigned</span> <span class='keyword'>char</span> a<span class='squarebracket'>[</span><span class='literal'>32</span><span class='squarebracket'>]</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='keyword'>unsigned</span> <span class='keyword'>char</span> b<span class='squarebracket'>[</span><span class='literal'>16</span><span class='squarebracket'>]</span>; <span class='curlybracket'>}</span>;
A a;
B <span class='operator'>*</span>b <span class='operator'>=</span> <span class='keyword'>new</span> <span class='parenthesis'>(</span>a<span class='operator'>.</span>a <span class='operator'>+</span> <span class='literal'>8</span><span class='parenthesis'>)</span> B;                 <span class='comment'>// <span class='tcode_in_codeblock'>a.a</span> provides storage for <span class='tcode_in_codeblock'>*b</span></span>
<span class='keyword'>int</span> <span class='operator'>*</span>p <span class='operator'>=</span> <span class='keyword'>new</span> <span class='parenthesis'>(</span>b<span class='operator'>-</span><span class='anglebracket'>&gt;</span>b <span class='operator'>+</span> <span class='literal'>4</span><span class='parenthesis'>)</span> <span class='keyword'>int</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>b-&gt;b</span> provides storage for <span class='tcode_in_codeblock'>*p</span></span>
                                        <span class='comment'>// <span class='tcode_in_codeblock'>a.a</span> does not provide storage for <span class='tcode_in_codeblock'>*p</span> (directly),</span>
                                        <span class='comment'>// but <span class='tcode_in_codeblock'>*p</span> is nested within <span class='tcode_in_codeblock'>a</span> (see below)</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cbbbbc53b68c18a611bf75c5e626ad2c6aa56a3c/source/basic.tex#L3058'>#</a></div><div id='4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':object,nested_within'></a></span>An object <span class='textit'>a</span> is <a class='hidden_link' href='#def:nested_within' id='def:nested_within'><i >nested within</i></a> another object <span class='textit'>b</span> if:
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.1'>(4.1)</a></div><span class='textit'>a</span> is a subobject of <span class='textit'>b</span>, or</li><li id='4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.2'>(4.2)</a></div><span class='textit'>b</span> provides storage for <span class='textit'>a</span>, or</li><li id='4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#4.3'>(4.3)</a></div>there exists an object <span class='textit'>c</span>
where <span class='textit'>a</span> is nested within <span class='textit'>c</span>,
and <span class='textit'>c</span> is nested within <span class='textit'>b</span><a class='hidden_link' href='#4.sentence-1'>.</a></li></ul></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cbbbbc53b68c18a611bf75c5e626ad2c6aa56a3c/source/basic.tex#L3072'>#</a></div><div id='5.sentence-1' class='sentence'>For every object <span class='texttt'>x</span>, there is some object called the
<a class='hidden_link' href='#def:complete_object_of' id='def:complete_object_of'><i >complete object of</i></a> <span class='texttt'>x</span>, determined as follows:
<ul class='itemize'><li id='5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#5.1'>(5.1)</a></div>If <span class='texttt'>x</span> is a complete object, then the complete object
of <span class='texttt'>x</span> is itself.</li><li id='5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#5.2'>(5.2)</a></div>Otherwise, the complete object of <span class='texttt'>x</span> is the complete object
of the (unique) object that contains <span class='texttt'>x</span>.</li></ul></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cbbbbc53b68c18a611bf75c5e626ad2c6aa56a3c/source/basic.tex#L3085'>#</a></div><div id='6.sentence-1' class='sentence'>If a complete object, a <a href='class.mem#def:data_member'>data member</a>, or an array element is of
class type, its type is considered the <a class='hidden_link' href='#def:most_derived_class' id='def:most_derived_class'><i >most derived
class</i></a>, to distinguish it from the class type of any base class subobject;
an object of a most derived class type or of a non-class type is called a
<a class='hidden_link' href='#def:most_derived_object' id='def:most_derived_object'><i >most derived object</i></a><a class='hidden_link' href='#6.sentence-1'>.</a></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cbbbbc53b68c18a611bf75c5e626ad2c6aa56a3c/source/basic.tex#L3092'>#</a></div><div id='7.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:potentially-overlapping_subobject' id='def:potentially-overlapping_subobject'><i >potentially-overlapping subobject</i></a> is either:
<ul class='itemize'><li id='7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.1'>(7.1)</a></div>a base class subobject, or</li><li id='7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#7.2'>(7.2)</a></div>a non-static data member
declared with the <a href='dcl.attr.nouniqueaddr'><span class='texttt'>no_&shy;unique_&shy;address</span></a> attribute<a class='hidden_link' href='#7.sentence-1'>.</a></li></ul></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cbbbbc53b68c18a611bf75c5e626ad2c6aa56a3c/source/basic.tex#L3100'>#</a></div><div id='8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':object,zero_size'></a></span><span class='indexparent'><a class='index' id=':object,nonzero_size'></a></span>An object has nonzero size if it
<ul class='itemize'><li id='8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.1'>(8.1)</a></div>is not a potentially-overlapping subobject, or</li><li id='8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.2'>(8.2)</a></div>is not of class type, or</li><li id='8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.3'>(8.3)</a></div>is of a class type with virtual member functions or virtual base classes, or</li><li id='8.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.4'>(8.4)</a></div>has subobjects of nonzero size or bit-fields of nonzero length<a class='hidden_link' href='#8.sentence-1'>.</a></li></ul></div> <div id='8.sentence-2' class='sentence'>
Otherwise, if the object is a base class subobject
of a standard-layout class type
with no non-static data members,
it has zero size<a class='hidden_link' href='#8.sentence-2'>.</a></div> <div id='8.sentence-3' class='sentence'>Otherwise, the circumstances under which the object has zero size
are <span class='indexparent'><a class='index' id=':which_non-standard-layout_objects_containing_no_data_are_considered_empty'></a></span>implementation-defined<a class='hidden_link' href='#8.sentence-3'>.</a></div> <div id='8.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':most_derived_object,bit-field'></a></span>Unless it is a <a href='class.bit'>bit-field</a>,
an object with nonzero size
shall occupy one or more bytes of storage,
including every byte that is occupied in full or in part
by any of its subobjects<a class='hidden_link' href='#8.sentence-4'>.</a></div> <div id='8.sentence-5' class='sentence'>An object of trivially copyable or
standard-layout type (<a href='basic.types'>[basic.types]</a>) shall occupy contiguous bytes of
storage<a class='hidden_link' href='#8.sentence-5'>.</a></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cbbbbc53b68c18a611bf75c5e626ad2c6aa56a3c/source/basic.tex#L3127'>#</a></div><div id='9.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':most_derived_object,bit-field_'></a></span><span class='indexparent'><a class='index' id=':most_derived_object,zero_size_subobject'></a></span>Unless an object is a bit-field or a subobject of zero size, the
address of that object is the address of the first byte it occupies<a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='9.sentence-2' class='sentence'>Two objects
with overlapping lifetimes
that are not bit-fields
may have the same address
if one is nested within the other,
or
if at least one is a subobject of zero size
and they are of different types;
otherwise, they have distinct addresses
and occupy disjoint bytes of storage<a class='hidden_link' href='#9.sentence-2'>.</a><a class='footnotenum' href='#footnote-29' id='footnoteref-29'>29</a></div> <div id='9.example-1' class='example'>[&nbsp;<a class='example_link' href='#9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span> test1 <span class='operator'>=</span> <span class='literal'>'x'</span>;
<span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span> test2 <span class='operator'>=</span> <span class='literal'>'x'</span>;
<span class='keyword'>const</span> <span class='keyword'>bool</span> b <span class='operator'>=</span> <span class='operator'>&amp;</span>test1 <span class='operator'>!</span><span class='operator'>=</span> <span class='operator'>&amp;</span>test2;        <span class='comment'>// always <span class='tcode_in_codeblock'>true</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='9.sentence-3' class='sentence'>
The address of a non-bit-field subobject of zero size is
the address of an unspecified byte of storage
occupied by the complete object of that subobject<a class='hidden_link' href='#9.sentence-3'>.</a></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/cbbbbc53b68c18a611bf75c5e626ad2c6aa56a3c/source/basic.tex#L3156'>#</a></div><div id='10.note-1' class='note'>[&nbsp;<a class='note_link' href='#10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='10.sentence-1' class='sentence'>C++ provides a variety of fundamental types and several ways of composing
new types from existing types (<a href='basic.types'>[basic.types]</a>)<a class='hidden_link' href='#10.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  </div><div class='footnote' id='footnote-29'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-29'>29)</a></div><div id='footnote-29.sentence-1' class='sentence'>Under the “as-if” rule an
implementation is allowed to store two objects at the same machine address or
not store an object at all if the program cannot observe the
difference (<a href='intro.execution'>[intro.execution]</a>)<a class='hidden_link' href='#footnote-29.sentence-1'>.</a></div> <a href='#footnoteref-29'>⮥</a></div></div></body></html>