<!DOCTYPE html><html lang='en'><head><title>[module.global]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>10</a> Modules <a class='abbr_ref' href='./#module'>[module]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>10.4</a> Global module fragment <a class='abbr_ref'>[module.global]</a></h2><pre class='bnf'><a class='nontermdef' href='#nt:global-module-fragment' id='nt:global-module-fragment'>global-module-fragment:</a>
&#9;<span class='texttt'><span class='keyword'>module</span></span><span class='indexparent'><a class='index' id=':module'></a></span> <span class='terminal'>;</span> <i ><a href='basic.link#nt:top-level-declaration-seq'>top-level-declaration-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/modules.tex#L562'>#</a></div><div id='1.sentence-1' class='sentence'>A <i ><a href='#nt:global-module-fragment'>global-module-fragment</a></i> specifies the contents of the
<a class='hidden_link' href='#def:global_module_fragment' id='def:global_module_fragment'><i >global module fragment</i></a> for a module unit<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>The global module fragment can be used to provide declarations
that are attached to the global module and usable within the module unit<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-3' class='sentence'>Prior to phase 4 of translation,
only preprocessing directives can appear
in the global module fragment (<a href='cpp.glob.frag'>[cpp.glob.frag]</a>)<a class='hidden_link' href='#1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/modules.tex#L573'>#</a></div><div id='2.sentence-1' class='sentence'>A declaration <span class='math'><span class='mathalpha'>D</span></span> is <a class='hidden_link' href='#def:decl-reachable' id='def:decl-reachable'><i >decl-reachable</i></a> from a declaration <span class='math'><span class='mathalpha'>S</span></span>
in the same translation unit if:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div><div id='2.1.sentence-1' class='sentence'><span class='math'><span class='mathalpha'>D</span></span> does not declare a function or function template and
<span class='math'><span class='mathalpha'>S</span></span> contains an
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>,
<i ><a href='namespace.def#nt:namespace-name'>namespace-name</a></i>,
<i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i>,
<i ><a href='temp.names#nt:template-name'>template-name</a></i>, or
<i ><a href='temp#nt:concept-name'>concept-name</a></i>
naming <span class='math'><span class='mathalpha'>D</span></span>, or</div></li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div><div id='2.2.sentence-1' class='sentence'><span class='math'><span class='mathalpha'>D</span></span> declares a function or function template that
is named by an expression (<a href='basic.def.odr'>[basic.def.odr]</a>)
appearing in <span class='math'><span class='mathalpha'>S</span></span>, or</div></li><li id='2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.3'>(2.3)</a></div><div id='2.3.sentence-1' class='sentence'><span class='math'><span class='mathalpha'>S</span></span> contains an expression <span class='texttt'>E</span> of the form</div><div id='2.3.sentence-2' class='sentence'><pre class='ncsimplebnf'><i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> <span class='terminal'><span class='parenthesis'>(</span></span> <i ><a href='expr.post#nt:expression-list'>expression-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>)</span></span>
</pre>
whose <i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> denotes a dependent name,
or for an operator expression whose operator denotes a dependent name,
and <span class='math'><span class='mathalpha'>D</span></span> is found by name lookup for the corresponding name
in an expression synthesized from <span class='texttt'>E</span>
by replacing each type-dependent argument or operand
with a value of a placeholder type
with no associated namespaces or entities, or</div></li><li id='2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.4'>(2.4)</a></div><div id='2.4.sentence-1' class='sentence'><span class='math'><span class='mathalpha'>S</span></span> contains an expression that
takes the address of an overloaded function (<a href='over.over'>[over.over]</a>)
whose set of overloads contains <span class='math'><span class='mathalpha'>D</span></span> and
for which the target type is dependent, or</div></li><li id='2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.5'>(2.5)</a></div><div id='2.5.sentence-1' class='sentence'>there exists a declaration <span class='math'><span class='mathalpha'>M</span></span> that is not a <i ><a href='namespace.def#nt:namespace-definition'>namespace-definition</a></i>
for which <span class='math'><span class='mathalpha'>M</span></span> is decl-reachable from <span class='math'><span class='mathalpha'>S</span></span> and either
<ul class='itemize'><li id='2.5.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#2.5.1'>(2.5.1)</a></div><div id='2.5.1.sentence-1' class='sentence'><span class='math'><span class='mathalpha'>D</span></span> is decl-reachable from <span class='math'><span class='mathalpha'>M</span></span>, or</div></li><li id='2.5.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#2.5.2'>(2.5.2)</a></div><div id='2.5.2.sentence-1' class='sentence'><span class='math'><span class='mathalpha'>D</span></span> redeclares the entity declared by <span class='math'><span class='mathalpha'>M</span></span> or
<span class='math'><span class='mathalpha'>M</span></span> redeclares the entity declared by <span class='math'><span class='mathalpha'>D</span></span>,
and <span class='math'><span class='mathalpha'>D</span></span> is neither a friend declaration
nor a block-scope declaration, or</div></li><li id='2.5.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#2.5.3'>(2.5.3)</a></div><div id='2.5.3.sentence-1' class='sentence'><span class='math'><span class='mathalpha'>D</span></span> declares a namespace <span class='math'><span class='mathalpha'>N</span></span> and <span class='math'><span class='mathalpha'>M</span></span> is a member of <span class='math'><span class='mathalpha'>N</span></span>, or</div></li><li id='2.5.4'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#2.5.4'>(2.5.4)</a></div><div id='2.5.4.sentence-1' class='sentence'>one of <span class='math'><span class='mathalpha'>M</span></span> and <span class='math'><span class='mathalpha'>D</span></span> declares a class or class template <span class='math'><span class='mathalpha'>C</span></span>
and the other declares a member or friend of <span class='math'><span class='mathalpha'>C</span></span>, or</div></li><li id='2.5.5'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#2.5.5'>(2.5.5)</a></div><div id='2.5.5.sentence-1' class='sentence'>one of <span class='math'><span class='mathalpha'>D</span></span> and <span class='math'><span class='mathalpha'>M</span></span> declares an enumeration <span class='math'><span class='mathalpha'>E</span></span>
and the other declares an enumerator of <span class='math'><span class='mathalpha'>E</span></span>, or</div></li><li id='2.5.6'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#2.5.6'>(2.5.6)</a></div><div id='2.5.6.sentence-1' class='sentence'><span class='math'><span class='mathalpha'>D</span></span> declares a function or variable and <span class='math'><span class='mathalpha'>M</span></span> is declared in <span class='math'><span class='mathalpha'>D</span></span>,<a class='footnotenum' href='#footnote-103'>103</a> or</div></li><li id='2.5.7'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#2.5.7'>(2.5.7)</a></div><div id='2.5.7.sentence-1' class='sentence'>one of <span class='math'><span class='mathalpha'>M</span></span> and <span class='math'><span class='mathalpha'>D</span></span> declares a template and the other declares
a partial or explicit specialization or
an implicit or explicit instantiation of that template, or</div></li><li id='2.5.8'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#2.5.8'>(2.5.8)</a></div><div id='2.5.8.sentence-1' class='sentence'>one of <span class='math'><span class='mathalpha'>M</span></span> and <span class='math'><span class='mathalpha'>D</span></span> declares a class or enumeration type
and the other introduces a typedef name for linkage purposes for that type<a class='hidden_link' href='#2.5.8.sentence-1'>.</a></div></li></ul></div></li></ul></div> <div id='2.sentence-2' class='sentence'>
In this determination, it is unspecified
<ul class='itemize'><li id='2.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.6'>(2.6)</a></div><div id='2.6.sentence-1' class='sentence'>whether a reference to an
<i ><a href='dcl.dcl#nt:alias-declaration'>alias-declaration</a></i>,
<span class='texttt'><span class='keyword'>typedef</span></span> declaration,
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>, or
<span class='grammarterm'>namespace-alias-declaration</span>
is replaced by the declarations they name
prior to this determination,</div></li><li id='2.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.7'>(2.7)</a></div><div id='2.7.sentence-1' class='sentence'>whether a <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
that does not denote a dependent type
and whose <i ><a href='temp.names#nt:template-name'>template-name</a></i> names an alias template
is replaced by its denoted type
prior to this determination,</div></li><li id='2.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.8'>(2.8)</a></div><div id='2.8.sentence-1' class='sentence'>whether a <i ><a href='dcl.type.decltype#nt:decltype-specifier'>decltype-specifier</a></i>
that does not denote a dependent type
is replaced by its denoted type
prior to this determination,
and</div></li><li id='2.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.9'>(2.9)</a></div><div id='2.9.sentence-1' class='sentence'>whether a non-value-dependent constant expression
is replaced by the result of constant evaluation
prior to this determination<a class='hidden_link' href='#2.9.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/modules.tex#L675'>#</a></div><div id='3.sentence-1' class='sentence'>A declaration <span class='texttt'>D</span> in a global module fragment of a module unit
is <a class='hidden_link' href='#def:discarded,declaration' id='def:discarded,declaration'><i >discarded</i></a> if <span class='texttt'>D</span>
is not decl-reachable from any <i ><a href='basic.link#nt:top-level-declaration'>top-level-declaration</a></i>
in the <i ><a href='basic.link#nt:top-level-declaration-seq'>top-level-declaration-seq</a></i>
of the <span class='grammarterm'>translation unit</span><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-2' class='sentence'>A discarded declaration is neither reachable
nor visible to name lookup outside the module unit,
nor in template instantiations whose points of instantiation (<a href='temp.point'>[temp.point]</a>)
are outside the module unit,
even when the instantiation context (<a href='module.context'>[module.context]</a>)
includes the module unit<a class='hidden_link' href='#3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/modules.tex#L690'>#</a></div><div id='4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>const</span> <span class='keyword'>int</span> size <span class='operator'>=</span> <span class='literal'>2</span>;
<span class='keyword'>int</span> ary1<span class='squarebracket'>[</span>size<span class='squarebracket'>]</span>;                 <span class='comment'>// unspecified whether <span class='tcode_in_codeblock'>size</span> is decl-reachable from <span class='tcode_in_codeblock'>ary1</span></span>
<span class='keyword'>constexpr</span> <span class='keyword'>int</span> identity<span class='parenthesis'>(</span><span class='keyword'>int</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span>
<span class='keyword'>int</span> ary2<span class='squarebracket'>[</span>identity<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span><span class='squarebracket'>]</span>;          <span class='comment'>// unspecified whether <span class='tcode_in_codeblock'>identity</span> is decl-reachable from <span class='tcode_in_codeblock'>ary2</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S2;
<span class='keyword'>constexpr</span> <span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span>
S<span class='anglebracket'>&lt;</span>S2<span class='anglebracket'>&lt;</span>T, g<span class='parenthesis'>(</span>N<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>S</span>, <span class='tcode_in_codeblock'>S2</span>, <span class='tcode_in_codeblock'>g</span>, and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>f</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span>g<span class='parenthesis'>(</span>N<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> N<span class='parenthesis'>)</span>;   <span class='comment'>// <span class='tcode_in_codeblock'>g</span> and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>h</span></span>
</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/modules.tex#L710'>#</a></div><div id='5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <p>Source file <span class='texttt'><span class='literal'>"foo.h"</span></span>:<pre class='codeblock'>
<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> X <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
  <span class='keyword'>int</span> d<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>int</span> e<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>inline</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>X, <span class='keyword'>int</span> <span class='operator'>=</span> d<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> e<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>
  <span class='keyword'>int</span> g<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span>;
  <span class='keyword'>int</span> h<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</pre><p>Module <span class='texttt'>M</span> interface:<pre class='codeblock'>
<span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"foo.h"</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> use_f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  N<span class='operator'>:</span><span class='operator'>:</span>X x;                       <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;X</span>, <span class='tcode_in_codeblock'>N</span>, and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>use_&shy;f</span></span>
  <span class='keyword'>return</span> f<span class='parenthesis'>(</span>x, <span class='literal'>123</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;f</span> is decl-reachable from <span class='tcode_in_codeblock'>use_&shy;f</span>,</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;e</span> is indirectly decl-reachable from <span class='tcode_in_codeblock'>use_&shy;f</span></span>
                                <span class='comment'>//   because it is decl-reachable from <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;f</span>, and</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;d</span> is decl-reachable from <span class='tcode_in_codeblock'>use_&shy;f</span></span>
                                <span class='comment'>//   because it is decl-reachable from <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;f</span></span>
                                <span class='comment'>//   even though it is not used in this call</span>
<span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> use_g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  N<span class='operator'>:</span><span class='operator'>:</span>X x;                       <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;X</span>, <span class='tcode_in_codeblock'>N</span>, and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>use_&shy;f</span></span>
  <span class='keyword'>return</span> g<span class='parenthesis'>(</span><span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, x<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;g</span> is not decl-reachable from <span class='tcode_in_codeblock'>use_&shy;g</span></span>
<span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> use_h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  N<span class='operator'>:</span><span class='operator'>:</span>X x;                       <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;X</span>, <span class='tcode_in_codeblock'>N</span>, and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>use_&shy;h</span></span>
  <span class='keyword'>return</span> h<span class='parenthesis'>(</span><span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, x<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;h</span> is not decl-reachable from <span class='tcode_in_codeblock'>use_&shy;h</span>, but</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;h</span> is decl-reachable from <span class='tcode_in_codeblock'>use_&shy;h&lt;int&gt;</span></span>
<span class='curlybracket'>}</span>
<span class='keyword'>int</span> k <span class='operator'>=</span> use_h<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>use_&shy;h&lt;int&gt;</span> is decl-reachable from <span class='tcode_in_codeblock'>k</span>, so</span>
  <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;h</span> is decl-reachable from <span class='tcode_in_codeblock'>k</span></span>
</pre><p>Module <span class='texttt'>M</span> implementation:<pre class='codeblock'>
<span class='keyword'>module</span> M;
<span class='keyword'>int</span> a <span class='operator'>=</span> use_f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK</span>
<span class='keyword'>int</span> b <span class='operator'>=</span> use_g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// error: no viable function for call to <span class='tcode_in_codeblock'>g</span>;</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>g</span> is not decl-reachable from purview of</span>
                                <span class='comment'>// module <span class='tcode_in_codeblock'>M</span>'s interface, so is discarded</span>
<span class='keyword'>int</span> c <span class='operator'>=</span> use_h<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK</span>
</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-103'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-103'>103)</a></div><div id='footnote-103.sentence-1' class='sentence'>A declaration can appear within a <i ><a href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a></i>
in the initializer of a variable<a class='hidden_link' href='#footnote-103.sentence-1'>.</a></div></div></div></body></html>