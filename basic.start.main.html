<!DOCTYPE html><html lang='en'><head><title>[basic.start.main]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>6.9</a> Program execution <a class='abbr_ref' href='basic.exec#basic.start.main'>[basic.exec]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>6.9.3</a> Start and termination <a class='abbr_ref' href='basic.start#main'>[basic.start]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>6.9.3.1</a> <span class='texttt'>main</span> function <a class='abbr_ref'>[basic.start.main]</a></h4><div class='texpara'><a class='index' id=':main_function'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b4e36f7c5b7498a01b1d068afed0b90b0d46ab32/source/basic.tex#L6267'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':program,startup'></a>A program shall contain exactly one function called <span class='texttt'>main</span>
that belongs to the global scope<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>Executing a program starts a main thread of execution (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>, <a href='thread.threads' title='32.4&emsp;Threads'>[thread.<span class='shy'></span>threads]</a>)
in which the <span class='texttt'>main</span> function is invoked<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'><a class='index' id=':implementation,freestanding'></a>It is <a class='index' id=':defining_main_in_freestanding_environment'></a>implementation-defined
whether a program in a freestanding environment is required to define a <span class='texttt'>main</span>
function<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='1.sentence-4' class='sentence'>In a freestanding environment, startup and termination is
<a class='index' id=':startup_and_termination_in_freestanding_environment'></a>implementation-defined; startup contains the
execution of constructors for non-local objects with static storage duration;
termination contains the execution of destructors for objects with static storage
duration<a class='hidden_link' href='#1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b4e36f7c5b7498a01b1d068afed0b90b0d46ab32/source/basic.tex#L6285'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>An implementation shall not predefine the <span class='texttt'>main</span> function<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Its type shall have C++ language linkage
and it shall have a declared return type of type
<span id=':int'><span class='texttt'><span class='keyword'>int</span></span></span>, but otherwise its type is <a class='index' id=':parameters_to_main'></a>implementation-defined<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'><a class='index' id=':main_function,implementation-defined_parameters_to'></a>An implementation shall allow both
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.1'>(2.1)</a></div>a function of <span class='texttt'><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> returning <span id=':int_'><span class='texttt'><span class='keyword'>int</span></span></span> and</li><li id='2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.2'>(2.2)</a></div>a function of <span class='texttt'><span class='parenthesis'>(</span><span id=':int__'><span class='texttt'><span class='keyword'>int</span></span></span></span>, pointer to pointer to <span class='texttt'><span id=':char'><span class='texttt'><span class='keyword'>char</span></span></span><span class='parenthesis'>)</span></span> returning <span id=':int___'><span class='texttt'><span class='keyword'>int</span></span></span></li></ul>
<a class='index' id=':argc'></a><a class='index' id=':argv'></a>as the type of <span class='texttt'>main</span> (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>)<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'><a class='index' id=':main_function,parameters_to'></a><a class='index' id=':environment,program'></a>In the latter form, for purposes of exposition, the first function
parameter is called <span class='texttt'>argc</span> and the second function parameter is
called <span class='texttt'>argv</span>, where <span class='texttt'>argc</span> shall be the number of
arguments passed to the program from the environment in which the
program is run<a class='hidden_link' href='#2.sentence-4'>.</a></div> <div id='2.sentence-5' class='sentence'>If
<span class='texttt'>argc</span> is nonzero these arguments shall be supplied in
<span class='texttt'>argv<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span> through <span class='texttt'>argv<span class='squarebracket'>[</span>argc<span class='operator'>-</span><span class='literal'>1</span><span class='squarebracket'>]</span></span> as pointers to the initial
characters of null-terminated multibyte strings (<span class='textsc'>ntmbs</span>s) (<a href='multibyte.strings' title='16.3.3.3.5.3&emsp;Multibyte strings'>[multibyte.<span class='shy'></span>strings]</a>)
and <span class='texttt'>argv<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span> shall be the pointer to
the initial character of a <span class='textsc'>ntmbs</span> that represents the name used to
invoke the program or <span class='texttt'><span class='literal'>""</span></span><a class='hidden_link' href='#2.sentence-5'>.</a></div> <div id='2.sentence-6' class='sentence'>The value of <span class='texttt'>argc</span> shall be
non-negative<a class='hidden_link' href='#2.sentence-6'>.</a></div> <div id='2.sentence-7' class='sentence'>The value of <span class='texttt'>argv<span class='squarebracket'>[</span>argc<span class='squarebracket'>]</span></span> shall be 0<a class='hidden_link' href='#2.sentence-7'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>: <div id='2.sentence-8' class='sentence'>It
is recommended that any further (optional) parameters be added after
<span class='texttt'>argv</span><a class='hidden_link' href='#2.sentence-8'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b4e36f7c5b7498a01b1d068afed0b90b0d46ab32/source/basic.tex#L6319'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>The function <span class='texttt'>main</span> shall not be used within
a program<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'><a class='index' id=':main_function,implementation-defined_linkage_of'></a>The linkage (<a href='basic.link' title='6.6&emsp;Program and linkage'>[basic.<span class='shy'></span>link]</a>) of <span class='texttt'>main</span> is
<a class='index' id=':linkage_of_main'></a>implementation-defined<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>A program that defines <span class='texttt'>main</span> as
deleted or that declares <span class='texttt'>main</span> to be
<span id=':inline'><span class='texttt'><span class='keyword'>inline</span></span></span>, <span id=':static'><span class='texttt'><span class='keyword'>static</span></span></span>, <span id=':constexpr'><span class='texttt'><span class='keyword'>constexpr</span></span></span>, or <span id=':consteval'><span class='texttt'><span class='keyword'>consteval</span></span></span> is ill-formed<a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='3.sentence-4' class='sentence'>The function <span class='texttt'>main</span> shall not be a coroutine (<a href='dcl.fct.def.coroutine' title='9.5.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>)<a class='hidden_link' href='#3.sentence-4'>.</a></div> <div id='3.sentence-5' class='sentence'>The <span class='texttt'>main</span> function shall not be declared with a
<a href='dcl.link#nt:linkage-specification' title='9.11&emsp;Linkage specifications&emsp;[dcl.link]'><span id='ntref:linkage-specification'><span class='textsf'><i >linkage-specification</i></span></span></a> (<a href='dcl.link' title='9.11&emsp;Linkage specifications'>[dcl.<span class='shy'></span>link]</a>)<a class='hidden_link' href='#3.sentence-5'>.</a></div> <div id='3.sentence-6' class='sentence'>A program
that declares a variable <span class='texttt'>main</span> that belongs to the global scope, or
that declares a function <span class='texttt'>main</span> that belongs to the global scope and
is attached to a named module, or
that declares an entity named <span class='texttt'>main</span>
with C language linkage (in any namespace)
is ill-formed<a class='hidden_link' href='#3.sentence-6'>.</a></div> <div id='3.sentence-7' class='sentence'>The name <span class='texttt'>main</span> is
not otherwise reserved<a class='hidden_link' href='#3.sentence-7'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>: <div id='3.sentence-8' class='sentence'>Member functions, classes, and
enumerations can be called <span class='texttt'>main</span>, as can entities in other
namespaces<a class='hidden_link' href='#3.sentence-8'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b4e36f7c5b7498a01b1d068afed0b90b0d46ab32/source/basic.tex#L6345'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'><a class='index' id=':exit'></a><a class='index' id='lib:exit'></a><a class='index' id=':termination,program'></a>Terminating the program
without leaving the current block (e.g., by calling the function
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>exit<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span></span> (<a href='support.start.term' title='17.5&emsp;Startup and termination'>[support.<span class='shy'></span>start.<span class='shy'></span>term]</a>)) does not destroy any
objects with automatic storage duration (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>If
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>exit</span> is called to end a program during the destruction of
an object with static or thread storage duration, the program has undefined
behavior<a class='hidden_link' href='#4.sentence-2'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b4e36f7c5b7498a01b1d068afed0b90b0d46ab32/source/basic.tex#L6357'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'><a class='index' id=':termination,program_'></a><a class='index' id=':main_function,return_from'></a>A <span id=':return'><span class='texttt'><span class='keyword'>return</span></span></span> statement (<a href='stmt.return' title='8.7.4&emsp;The return statement'>[stmt.<span class='shy'></span>return]</a>) in <span class='texttt'>main</span> has the effect of leaving the main
function (destroying any objects with automatic storage duration) and
calling <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>exit</span> with the return value as the argument<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>If control flows off the end of
the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement'><span class='textsf'><i >compound-statement</i></span></span></a> of <span class='texttt'>main</span>,
the effect is equivalent to a <span id=':return_'><span class='texttt'><span class='keyword'>return</span></span></span> with operand <span class='texttt'><span class='literal'>0</span></span>
(see also <a href='except.handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>)<a class='hidden_link' href='#5.sentence-2'>.</a></div> </div></div></div></body></html>