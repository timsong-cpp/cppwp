<!DOCTYPE html><html lang='en'><head><title>[basic.start.main]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>6</a> Basic concepts <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>6.6</a> Start and termination <a class='abbr_ref' href='basic.start#main'>[basic.start]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>6.6.1</a> <span class='texttt'>main</span> function <a class='abbr_ref'>[basic.start.main]</a></h3><span class='indexparent'><a class='index' id=':main_function'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/48da313836eb57fd8282649c6c17b50a9cb97c3a/source/basic.tex#L2434'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':program,start'></a></span>A program shall contain a global function called <span class='texttt'>main</span><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>Executing a program starts a main thread of execution (<a href='intro.multithread'>[intro.multithread]</a>, <a href='thread.threads'>[thread.threads]</a>)
in which the <span class='texttt'>main</span> function is invoked,
and in which variables of static storage duration
might be initialized (<a href='basic.start.static'>[basic.start.static]</a>) and destroyed (<a href='basic.start.term'>[basic.start.term]</a>)<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>It is <span class='indexparent'><a class='index' id=':defining_main_in_freestanding_environment'></a></span>implementation-defined
whether a program in a freestanding environment is required to define a <span class='texttt'>main</span>
function<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-4' class='sentence'>In a freestanding environment, start-up and termination is
<span class='indexparent'><a class='index' id=':start-up_and_termination_in_freestanding_environment'></a></span>implementation-defined; start-up contains the
execution of constructors for objects of namespace scope with static storage duration;
termination contains the execution of destructors for objects with static storage
duration<a class='hidden_link' href='#1.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/48da313836eb57fd8282649c6c17b50a9cb97c3a/source/basic.tex#L2449'>#</a></div><div id='2.sentence-1' class='sentence'>An implementation shall not predefine the <span class='texttt'>main</span> function<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>This
function shall not be overloaded<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>Its type shall have C++ language linkage
and it shall have a declared return type of type
<span class='texttt'>int</span>, but otherwise its type is <span class='indexparent'><a class='index' id=':parameters_to_main'></a></span>implementation-defined<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':main_function,implementation-defined_parameters_to'></a></span>An implementation shall allow both
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.1'>(2.1)</a></div><div id='2.1.sentence-1' class='sentence'>a function of <span class='texttt'>()</span> returning <span class='texttt'>int</span> and</div></li><li id='2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#2.2'>(2.2)</a></div><div id='2.2.sentence-1' class='sentence'>a function of <span class='texttt'>(int</span>, pointer to pointer to <span class='texttt'>char)</span> returning <span class='texttt'>int</span></div></li></ul></div><div id='2.sentence-5' class='sentence'><span class='indexparent'><a class='index' id=':argc'></a></span><span class='indexparent'><a class='index' id=':argv'></a></span>as the type of <span class='texttt'>main</span> (<a href='dcl.fct'>[dcl.fct]</a>)<a class='hidden_link' href='#2.sentence-5'>.</a></div> <div id='2.sentence-6' class='sentence'><span class='indexparent'><a class='index' id=':main_function,parameters_to'></a></span><span class='indexparent'><a class='index' id=':environment,program'></a></span>In the latter form, for purposes of exposition, the first function
parameter is called <span class='texttt'>argc</span> and the second function parameter is
called <span class='texttt'>argv</span>, where <span class='texttt'>argc</span> shall be the number of
arguments passed to the program from the environment in which the
program is run<a class='hidden_link' href='#2.sentence-6'>.</a></div> <div id='2.sentence-7' class='sentence'>If
<span class='texttt'>argc</span> is nonzero these arguments shall be supplied in
<span class='texttt'>argv[0]</span> through <span class='texttt'>argv[argc-1]</span> as pointers to the initial
characters of null-terminated multibyte strings (<span class='textsc'>ntmbs</span>s) (<a href='multibyte.strings'>[multibyte.strings]</a>)
and <span class='texttt'>argv[0]</span> shall be the pointer to
the initial character of a <span class='textsc'>ntmbs</span> that represents the name used to
invoke the program or <span class='texttt'>""</span><a class='hidden_link' href='#2.sentence-7'>.</a></div> <div id='2.sentence-8' class='sentence'>The value of <span class='texttt'>argc</span> shall be
non-negative<a class='hidden_link' href='#2.sentence-8'>.</a></div> <div id='2.sentence-9' class='sentence'>The value of <span class='texttt'>argv[argc]</span> shall be 0<a class='hidden_link' href='#2.sentence-9'>.</a></div> <div id='2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.sentence-10' class='sentence'>It
is recommended that any further (optional) parameters be added after
<span class='texttt'>argv</span><a class='hidden_link' href='#2.sentence-10'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/48da313836eb57fd8282649c6c17b50a9cb97c3a/source/basic.tex#L2481'>#</a></div><div id='3.sentence-1' class='sentence'>The function <span class='texttt'>main</span> shall not be used within
a program<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':main_function,implementation-defined_linkage_of'></a></span>The linkage (<a href='basic.link'>[basic.link]</a>) of <span class='texttt'>main</span> is
<span class='indexparent'><a class='index' id=':linkage_of_main'></a></span>implementation-defined<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>A program that defines <span class='texttt'>main</span> as
deleted or that declares <span class='texttt'>main</span> to be
<span class='texttt'>inline</span>, <span class='texttt'>static</span>, or <span class='texttt'>constexpr</span> is ill-formed<a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='3.sentence-4' class='sentence'>The <span class='texttt'>main</span> function shall not be declared with a
<i ><a href='dcl.link#nt:linkage-specification'>linkage-specification</a></i><a class='hidden_link' href='#3.sentence-4'>.</a></div> <div id='3.sentence-5' class='sentence'>A program that
declares a variable <span class='texttt'>main</span> at global scope or that declares the name
<span class='texttt'>main</span> with C language linkage (in any namespace) is ill-formed<a class='hidden_link' href='#3.sentence-5'>.</a></div> <div id='3.sentence-6' class='sentence'>The name <span class='texttt'>main</span> is
not otherwise reserved<a class='hidden_link' href='#3.sentence-6'>.</a></div> <div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='3.sentence-7' class='sentence'>Member functions, classes, and
enumerations can be called <span class='texttt'>main</span>, as can entities in other
namespaces<a class='hidden_link' href='#3.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/48da313836eb57fd8282649c6c17b50a9cb97c3a/source/basic.tex#L2498'>#</a></div><div id='4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':exit'></a></span><span class='indexparent'><a class='index' id='lib:exit'></a></span><span class='indexparent'><a class='index' id=':termination,program'></a></span>Terminating the program
without leaving the current block (e.g., by calling the function
<span class='texttt'>std&#x200b;::&#x200b;exit(int)</span> (<a href='support.start.term'>[support.start.term]</a>)) does not destroy any
objects with automatic storage duration (<a href='class.dtor'>[class.dtor]</a>)<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>If
<span class='texttt'>std&#x200b;::&#x200b;exit</span> is called to end a program during the destruction of
an object with static or thread storage duration, the program has undefined
behavior<a class='hidden_link' href='#4.sentence-2'>.</a></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/48da313836eb57fd8282649c6c17b50a9cb97c3a/source/basic.tex#L2510'>#</a></div><div id='5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':termination,program_'></a></span><span class='indexparent'><a class='index' id=':main_function,return_from'></a></span>A return statement in <span class='texttt'>main</span> has the effect of leaving the main
function (destroying any objects with automatic storage duration) and
calling <span class='texttt'>std&#x200b;::&#x200b;exit</span> with the return value as the argument<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>If control flows off the end of
the <i ><a href='stmt.block#nt:compound-statement'>compound-statement</a></i> of <span class='texttt'>main</span>,
the effect is equivalent to a <span class='texttt'>return</span> with operand <span class='texttt'>0</span>
(see also <a href='except.handle'>[except.handle]</a>)<a class='hidden_link' href='#5.sentence-2'>.</a></div> </div></div></body></html>