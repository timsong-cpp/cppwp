<!DOCTYPE html><html lang='en'><head><title>[basic.def.odr]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>6.3</a> One-definition rule <a class='abbr_ref'>[basic.def.odr]</a></h2><div class='texpara'><a class='index' id=':object,definition'></a><a class='index' id=':function,definition'></a><a class='index' id=':class,definition'></a><a class='index' id=':enumerator,definition'></a><a class='index' id=':one-definition_rule'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L345'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>Each of the following is termed a <a class='hidden_link' href='#def:item,definable' title='6.3&emsp;One-definition rule&emsp;[basic.def.odr]'><span id='def:item,definable'><i >definable item</i></span></a>:
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.1'>(1.1)</a></div>a class type (<a href='class' title='11&emsp;Classes'>[class]</a>),</li><li id='1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.2'>(1.2)</a></div>an enumeration type (<a href='dcl.enum' title='9.8.1&emsp;Enumeration declarations'>[dcl.<span class='shy'></span>enum]</a>),</li><li id='1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.3'>(1.3)</a></div>a function (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>),</li><li id='1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.4'>(1.4)</a></div>a variable (<a href='basic.pre' title='6.1&emsp;Preamble'>[basic.<span class='shy'></span>pre]</a>),</li><li id='1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.5'>(1.5)</a></div>a templated entity (<a href='temp.pre' title='13.1&emsp;Preamble'>[temp.<span class='shy'></span>pre]</a>),</li><li id='1.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.6'>(1.6)</a></div>a default argument for a parameter
(for a function in a given scope) (<a href='dcl.fct.default' title='9.3.4.7&emsp;Default arguments'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>default]</a>), or</li><li id='1.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.7'>(1.7)</a></div>a default template argument (<a href='temp.param' title='13.2&emsp;Template parameters'>[temp.<span class='shy'></span>param]</a>)<a class='hidden_link' href='#1.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L358'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>No translation unit shall contain more than one definition of any
definable item<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L362'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'><a class='index' id=':expression,potentially_evaluated'></a>An expression or conversion is <a class='hidden_link' href='#def:potentially_evaluated' title='6.3&emsp;One-definition rule&emsp;[basic.def.odr]'><span id='def:potentially_evaluated'><i >potentially evaluated</i></span></a> unless it is
an unevaluated operand (<a href='expr.context' title='7.2.3&emsp;Context dependence'>[expr.<span class='shy'></span>context]</a>),
a subexpression thereof, or
a conversion in an initialization or conversion sequence in such a context<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>The set of <a class='hidden_link' href='#def:potential_results' title='6.3&emsp;One-definition rule&emsp;[basic.def.odr]'><span id='def:potential_results'><i >potential results</i></span></a> of an expression <span class='math'><span class='mathalpha'>E</span></span> is
defined as follows:
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div><div class='texpara'><div id='3.1.sentence-1' class='sentence'>If <span class='math'><span class='mathalpha'>E</span></span> is an
<a href='expr.prim.id.general#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression'><span class='textsf'><i >id-expression</i></span></span></a> (<a href='expr.prim.id' title='7.5.5&emsp;Names'>[expr.<span class='shy'></span>prim.<span class='shy'></span>id]</a>), the set
contains only <span class='math'><span class='mathalpha'>E</span></span><a class='hidden_link' href='#3.1.sentence-1'>.</a></div></div></li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div><div class='texpara'><div id='3.2.sentence-1' class='sentence'>If <span class='math'><span class='mathalpha'>E</span></span> is a <a href='expr.sub' title='7.6.1.2&emsp;Subscripting&emsp;[expr.sub]'>subscripting</a> operation with
an array operand, the set contains the potential results of that operand<a class='hidden_link' href='#3.2.sentence-1'>.</a></div></div></li><li id='3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.3'>(3.3)</a></div><div class='texpara'><div id='3.3.sentence-1' class='sentence'>If <span class='math'><span class='mathalpha'>E</span></span> is a class member access
expression (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>) of the form
<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> <span class='texttt'><span class='operator'>.</span></span> <span id=':template'><span class='texttt'><span class='keyword'>template</span></span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span>
naming a non-static data member,
the set contains the potential results of <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span><a class='hidden_link' href='#3.3.sentence-1'>.</a></div></div></li><li id='3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.4'>(3.4)</a></div><div class='texpara'><div id='3.4.sentence-1' class='sentence'>If <span class='math'><span class='mathalpha'>E</span></span> is a class member access expression
naming a static data member,
the set contains the <a href='expr.prim.id.general#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_'><span class='textsf'><i >id-expression</i></span></span></a> designating the data member<a class='hidden_link' href='#3.4.sentence-1'>.</a></div></div></li><li id='3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.5'>(3.5)</a></div><div class='texpara'><div id='3.5.sentence-1' class='sentence'>If <span class='math'><span class='mathalpha'>E</span></span> is a <a href='expr.mptr.oper' title='7.6.4&emsp;Pointer-to-member operators&emsp;[expr.mptr.oper]'>pointer-to-member expression</a> of the form
<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> <span class='texttt'><span class='operator'>.</span><span class='operator'>*</span></span> <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span>,
the set contains the potential results of <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span><a class='hidden_link' href='#3.5.sentence-1'>.</a></div></div></li><li id='3.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.6'>(3.6)</a></div><div class='texpara'><div id='3.6.sentence-1' class='sentence'>If <span class='math'><span class='mathalpha'>E</span></span> has the form <span class='texttt'><span class='parenthesis'>(</span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span><span class='parenthesis'>)</span></span>, the set contains the
potential results of <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span><a class='hidden_link' href='#3.6.sentence-1'>.</a></div></div></li><li id='3.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.7'>(3.7)</a></div><div class='texpara'><div id='3.7.sentence-1' class='sentence'>If <span class='math'><span class='mathalpha'>E</span></span> is a glvalue <a href='expr.cond' title='7.6.16&emsp;Conditional operator&emsp;[expr.cond]'>conditional expression</a>,
the set is the union of the sets of
potential results of the second and third operands<a class='hidden_link' href='#3.7.sentence-1'>.</a></div></div></li><li id='3.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.8'>(3.8)</a></div><div class='texpara'><div id='3.8.sentence-1' class='sentence'>If <span class='math'><span class='mathalpha'>E</span></span> is a <a href='expr.comma' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'>comma expression</a>, the set
contains the potential results of the right operand<a class='hidden_link' href='#3.8.sentence-1'>.</a></div></div></li><li id='3.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.9'>(3.9)</a></div><div class='texpara'><div id='3.9.sentence-1' class='sentence'>Otherwise, the set is empty<a class='hidden_link' href='#3.9.sentence-1'>.</a></div></div></li></ul></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='3.sentence-3' class='sentence'>This set is a (possibly-empty) set of <a href='expr.prim.id.general#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression__'><span class='textsf'><i >id-expression</i></span></span></a><i >s</i>,
each of which is either <span class='math'><span class='mathalpha'>E</span></span> or a subexpression of <span class='math'><span class='mathalpha'>E</span></span><a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<div id='3.sentence-4' class='sentence'>In the following example, the set of potential results of the initializer
of <span class='texttt'>n</span> contains the first <span class='texttt'>S<span class='operator'>&#x200b;::&#x200b;</span>x</span> subexpression, but not the second
<span class='texttt'>S<span class='operator'>&#x200b;::&#x200b;</span>x</span> subexpression<a class='hidden_link' href='#3.sentence-4'>.</a></div> <span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>const</span> <span class='keyword'>int</span> <span class='operator'>&amp;</span>f<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>int</span> <span class='operator'>&amp;</span>r<span class='parenthesis'>)</span>;
<span class='keyword'>int</span> n <span class='operator'>=</span> b <span class='operator'>?</span> <span class='parenthesis'>(</span><span class='literal'>1</span>, S<span class='operator'>::</span>x<span class='parenthesis'>)</span>           <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;x</span> is not odr-used here</span>
          <span class='operator'>:</span> f<span class='parenthesis'>(</span>S<span class='operator'>::</span>x<span class='parenthesis'>)</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;x</span> is odr-used here, so a definition is required</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L412'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>A function is <a class='hidden_link' href='#def:function,named_by_expression_or_conversion' title='6.3&emsp;One-definition rule&emsp;[basic.def.odr]'><span id='def:function,named_by_expression_or_conversion'><i >named by</i></span></a>
an expression or conversion as follows:
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.1'>(4.1)</a></div><div class='texpara'><div id='4.1.sentence-1' class='sentence'>A function is named by an expression or conversion
  if it is the selected member
  of an overload set (<a href='basic.lookup' title='6.5&emsp;Name lookup'>[basic.<span class='shy'></span>lookup]</a>, <a href='over.match' title='12.2&emsp;Overload resolution'>[over.<span class='shy'></span>match]</a>, <a href='over.over' title='12.3&emsp;Address of an overload set'>[over.<span class='shy'></span>over]</a>)
  in an overload resolution performed
  as part of forming that expression or conversion,
  unless it is a pure virtual function and either
  the expression is not an <a href='expr.prim.id.general#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression___'><span class='textsf'><i >id-expression</i></span></span></a> naming the function with
  an explicitly qualified name or
  the expression forms a pointer to member (<a href='expr.unary.op' title='7.6.2.2&emsp;Unary operators'>[expr.<span class='shy'></span>unary.<span class='shy'></span>op]</a>)<a class='hidden_link' href='#4.1.sentence-1'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='4.1.sentence-2' class='sentence'>This covers
  taking the address of functions (<a href='conv.func' title='7.3.4&emsp;Function-to-pointer conversion'>[conv.<span class='shy'></span>func]</a>, <a href='expr.unary.op' title='7.6.2.2&emsp;Unary operators'>[expr.<span class='shy'></span>unary.<span class='shy'></span>op]</a>),
  calls to named functions (<a href='expr.call' title='7.6.1.3&emsp;Function call'>[expr.<span class='shy'></span>call]</a>),
  operator overloading (<a href='over' title='12&emsp;Overloading'>[over]</a>),
  user-defined conversions (<a href='class.conv.fct' title='11.4.8.3&emsp;Conversion functions'>[class.<span class='shy'></span>conv.<span class='shy'></span>fct]</a>),
  allocation functions for <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression'><span class='textsf'><i >new-expression</i></span></span></a><i >s</i> (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>), as well as
  non-default initialization (<a href='dcl.init' title='9.5&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#4.1.sentence-2'>.</a></div> <div id='4.1.sentence-3' class='sentence'>A constructor selected to copy or move an object of class type
  is considered to be named by an expression or conversion
  even if the call is actually elided by the implementation (<a href='class.copy.elision' title='11.9.6&emsp;Copy/move elision'>[class.<span class='shy'></span>copy.<span class='shy'></span>elision]</a>)<a class='hidden_link' href='#4.1.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.2'>(4.2)</a></div><div class='texpara'><div id='4.2.sentence-1' class='sentence'>A deallocation function for a class
  is named by a <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_'><span class='textsf'><i >new-expression</i></span></span></a>
  if it is the single matching deallocation function
  for the allocation function selected by overload resolution,
  as specified in <a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a><a class='hidden_link' href='#4.2.sentence-1'>.</a></div></div></li><li id='4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.3'>(4.3)</a></div><div class='texpara'><div id='4.3.sentence-1' class='sentence'>A deallocation function for a class
  is named by a <a href='expr.delete#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression'><span class='textsf'><i >delete-expression</i></span></span></a>
  if it is the selected usual deallocation function
  as specified in <a href='expr.delete' title='7.6.2.9&emsp;Delete'>[expr.<span class='shy'></span>delete]</a> and <a href='class.free' title='11.4.11&emsp;Allocation and deallocation functions'>[class.<span class='shy'></span>free]</a><a class='hidden_link' href='#4.3.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L451'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'><a class='index' id='term.odr.use'></a>A variable is named by an expression
if the expression is an <a href='expr.prim.id.general#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression____'><span class='textsf'><i >id-expression</i></span></span></a> that denotes it<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>A variable <span class='texttt'>x</span> that is named by a
potentially-evaluated expression <span class='math'><span class='mathalpha'>N</span></span>
that appears at a point <span class='math'><span class='mathalpha'>P</span></span>
is <a class='hidden_link' href='#def:odr-use' title='6.3&emsp;One-definition rule&emsp;[basic.def.odr]'><span id='def:odr-use'><i >odr-used</i></span></a> by <span class='math'><span class='mathalpha'>N</span></span> unless
<ul class='itemize'><li id='5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.1'>(5.1)</a></div><span class='texttt'>x</span> is a reference
that is usable in constant expressions at <span class='math'><span class='mathalpha'>P</span></span> (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>) or</li><li id='5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.2'>(5.2)</a></div><span class='math'><span class='mathalpha'>N</span></span> is an element of the set of potential results of an expression <span class='math'><span class='mathalpha'>E</span></span>, where
<ul class='itemize'><li id='5.2.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#5.2.1'>(5.2.1)</a></div><span class='math'><span class='mathalpha'>E</span></span> is a discarded-value expression (<a href='expr.context' title='7.2.3&emsp;Context dependence'>[expr.<span class='shy'></span>context]</a>)
to which the lvalue-to-rvalue conversion is not applied or</li><li id='5.2.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#5.2.2'>(5.2.2)</a></div><span class='texttt'>x</span> is a non-volatile object
that is usable in constant expressions at <span class='math'><span class='mathalpha'>P</span></span> and
has no mutable subobjects and
<ul class='itemize'><li id='5.2.2.1'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#5.2.2.1'>(5.2.2.1)</a></div><span class='math'><span class='mathalpha'>E</span></span> is a class member access expression (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>)
naming a non-static data member of reference type and
whose object expression has non-volatile-qualified type or</li><li id='5.2.2.2'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#5.2.2.2'>(5.2.2.2)</a></div>the lvalue-to-rvalue conversion (<a href='conv.lval' title='7.3.2&emsp;Lvalue-to-rvalue conversion'>[conv.<span class='shy'></span>lval]</a>) is applied to <span class='math'><span class='mathalpha'>E</span></span> and
<span class='math'><span class='mathalpha'>E</span></span> has non-volatile-qualified non-class type</li></ul></li></ul></li></ul>
<div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> x;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>int</span><span class='operator'>&amp;</span> r;
<span class='curlybracket'>}</span>;
<span class='keyword'>int</span> h<span class='parenthesis'>(</span><span class='keyword'>bool</span> cond<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>constexpr</span> A a <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>;
  <span class='keyword'>constexpr</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> A<span class='operator'>&amp;</span> r <span class='operator'>=</span> a;    <span class='comment'>// odr-uses <span class='tcode_in_codeblock'>a</span></span>
  <span class='keyword'>int</span> _ <span class='operator'>=</span> f<span class='parenthesis'>(</span>cond <span class='operator'>?</span> a<span class='operator'>.</span>x <span class='operator'>:</span> r<span class='operator'>.</span>x<span class='parenthesis'>)</span>;          <span class='comment'>// does not odr-use <span class='tcode_in_codeblock'>a</span> or <span class='tcode_in_codeblock'>r</span></span>
  <span class='keyword'>int</span> x, y;
  <span class='keyword'>constexpr</span> B b1 <span class='operator'>=</span> <span class='curlybracket'>{</span>x<span class='curlybracket'>}</span>, b2 <span class='operator'>=</span> <span class='curlybracket'>{</span>y<span class='curlybracket'>}</span>;       <span class='comment'>// odr-uses <span class='tcode_in_codeblock'>x</span> and <span class='tcode_in_codeblock'>y</span></span>
  <span class='keyword'>int</span> _ <span class='operator'>=</span> g<span class='parenthesis'>(</span>cond <span class='operator'>?</span> b1<span class='operator'>.</span>r <span class='operator'>:</span> b2<span class='operator'>.</span>r<span class='parenthesis'>)</span>;        <span class='comment'>// does not odr-use <span class='tcode_in_codeblock'>b1</span> or <span class='tcode_in_codeblock'>b2</span></span>
  <span class='keyword'>int</span> _ <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='parenthesis'>(</span>cond <span class='operator'>?</span> x <span class='operator'>:</span> y<span class='parenthesis'>)</span>, <span class='literal'>0</span><span class='parenthesis'>)</span>;          <span class='comment'>// does not odr-use <span class='tcode_in_codeblock'>x</span> or <span class='tcode_in_codeblock'>y</span></span>
  <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
    <span class='keyword'>return</span> b1<span class='operator'>.</span>r;                        <span class='comment'>// error: <span class='tcode_in_codeblock'>b1</span> is odr-used here because the object</span>
                                        <span class='comment'>// referred to by <span class='tcode_in_codeblock'>b1.r</span> is not constexpr-referenceable here</span>
  <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L510'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>A structured binding is odr-used if it appears as a potentially-evaluated expression<a class='hidden_link' href='#6.sentence-1'>.</a></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L513'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'><span class='texttt'><span class='operator'>*</span><span id=':this'><span class='texttt'><span class='keyword'>this</span></span></span></span> is odr-used if <span id=':this_'><span class='texttt'><span class='keyword'>this</span></span></span> appears as a potentially-evaluated expression
(including as the result of any implicit transformation to
a class member access expression (<a href='expr.prim.id.general' title='7.5.5.1&emsp;General'>[expr.<span class='shy'></span>prim.<span class='shy'></span>id.<span class='shy'></span>general]</a>))<a class='hidden_link' href='#7.sentence-1'>.</a></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L518'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'>A virtual member
function is odr-used if it is not pure<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>A function is odr-used if it is named by
a potentially-evaluated expression or conversion<a class='hidden_link' href='#8.sentence-2'>.</a></div> <div id='8.sentence-3' class='sentence'>A non-placement allocation or deallocation
function for a class is odr-used by the definition of a constructor of that
class<a class='hidden_link' href='#8.sentence-3'>.</a></div> <div id='8.sentence-4' class='sentence'>A non-placement deallocation function for a class is odr-used by the
definition of the destructor of that class, or by being selected by the
lookup at the point of definition of a virtual
destructor (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)<a class='hidden_link' href='#8.sentence-4'>.</a><a class='footnoteref' href='#footnote-16' id='footnoteref-16' title='An implementation is not required to call allocation and deallocation functions from constructors or destructors; however, this is a permissible implementation technique.'>16</a></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L536'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'>An assignment operator function in a class is odr-used by an
implicitly-defined
copy assignment or move assignment function for another class as specified
in <a href='class.copy.assign' title='11.4.6&emsp;Copy/move assignment operator'>[class.<span class='shy'></span>copy.<span class='shy'></span>assign]</a><a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='9.sentence-2' class='sentence'>A constructor for a class is odr-used as specified
in <a href='dcl.init' title='9.5&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a><a class='hidden_link' href='#9.sentence-2'>.</a></div> <div id='9.sentence-3' class='sentence'>A destructor for a class is odr-used if it is
<a href='class.dtor#def:potentially_invoked' title='11.4.7&emsp;Destructors&emsp;[class.dtor]'>potentially invoked</a><a class='hidden_link' href='#9.sentence-3'>.</a></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L545'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'>A local entity (<a href='basic.pre' title='6.1&emsp;Preamble'>[basic.<span class='shy'></span>pre]</a>)
is <a class='hidden_link' href='#def:odr-usable' title='6.3&emsp;One-definition rule&emsp;[basic.def.odr]'><span id='def:odr-usable'><i >odr-usable</i></span></a> in a scope (<a href='basic.scope.scope' title='6.4.1&emsp;General'>[basic.<span class='shy'></span>scope.<span class='shy'></span>scope]</a>) if
<ul class='itemize'><li id='10.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#10.1'>(10.1)</a></div>either the local entity is not <span class='texttt'><span class='operator'>*</span><span id=':this__'><span class='texttt'><span class='keyword'>this</span></span></span></span>, or
an enclosing class or non-lambda function parameter scope exists and,
if the innermost such scope is a function parameter scope,
it corresponds to a non-static member function, and</li><li id='10.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#10.2'>(10.2)</a></div>for each intervening scope (<a href='basic.scope.scope' title='6.4.1&emsp;General'>[basic.<span class='shy'></span>scope.<span class='shy'></span>scope]</a>)
between the point at which the entity is introduced and the scope
(where <span class='texttt'><span class='operator'>*</span><span id=':this___'><span class='texttt'><span class='keyword'>this</span></span></span></span> is considered to be introduced
within the innermost enclosing class or non-lambda function definition scope),
either
<ul class='itemize'><li id='10.2.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#10.2.1'>(10.2.1)</a></div>the intervening scope is a block scope,</li><li id='10.2.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#10.2.2'>(10.2.2)</a></div>the intervening scope is a contract-assertion scope (<a href='basic.scope.contract' title='6.4.10&emsp;Contract-assertion scope'>[basic.<span class='shy'></span>scope.<span class='shy'></span>contract]</a>),</li><li id='10.2.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#10.2.3'>(10.2.3)</a></div>the intervening scope is the function parameter scope of
a <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression'><span class='textsf'><i >lambda-expression</i></span></span></a> or <a href='expr.prim.req.general#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression'><span class='textsf'><i >requires-expression</i></span></span></a>, or</li><li id='10.2.4'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#10.2.4'>(10.2.4)</a></div>the intervening scope is the lambda scope of
a <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_'><span class='textsf'><i >lambda-expression</i></span></span></a>
that has a <a href='expr.prim.lambda.capture#nt:simple-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture'><span class='textsf'><i >simple-capture</i></span></span></a>
naming the entity or has a <a href='expr.prim.lambda.capture#nt:capture-default' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default'><span class='textsf'><i >capture-default</i></span></span></a>, and
the block scope of the <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__'><span class='textsf'><i >lambda-expression</i></span></span></a>
is also an intervening scope<a class='hidden_link' href='#10.sentence-1'>.</a></li></ul></li></ul></div></div><div class='texpara'><div id='10.sentence-2' class='sentence'>If a local entity is odr-used
in a scope in which it is not odr-usable,
the program is ill-formed<a class='hidden_link' href='#10.sentence-2'>.</a></div> <div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> n <span class='operator'>=</span> <span class='literal'>1</span>; <span class='curlybracket'>}</span>;                <span class='comment'>// error: <span class='tcode_in_codeblock'>n</span> is not odr-usable due to intervening lambda-expression</span>
  <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
    <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> n <span class='operator'>=</span> <span class='literal'>2</span>; <span class='curlybracket'>}</span>         <span class='comment'>// error: <span class='tcode_in_codeblock'>n</span> is not odr-usable due to intervening function definition scope</span>
  <span class='curlybracket'>}</span>;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> n<span class='parenthesis'>)</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>n</span> is not odr-usable due to intervening function parameter scope</span>
  <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> k <span class='operator'>=</span> n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;            <span class='comment'>// error: <span class='tcode_in_codeblock'>n</span> is not odr-usable due to being</span>
                                <span class='comment'>// outside the block scope of the <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression___'><span class='textsf'><i >lambda-expression</i></span></span></a></span>
  <span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> <span class='squarebracket'>[</span>n<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> n; <span class='curlybracket'>}</span>; <span class='curlybracket'>}</span>;    <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L591'>#</a></div><div class='texpara'><div id='example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>1</span>;
  <span class='keyword'>auto</span> lambda <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>x, <span class='literal'>0</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;    <span class='comment'>// OK</span>
  lambda<span class='operator'>.</span><span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// OK, does not consider <span class='tcode_in_codeblock'>x</span> at all</span>
  lambda<span class='operator'>.</span><span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;             <span class='comment'>// OK, does not odr-use <span class='tcode_in_codeblock'>x</span></span>
  lambda<span class='operator'>.</span><span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;      <span class='comment'>// error: odr-uses <span class='tcode_in_codeblock'>x</span> from a context where <span class='tcode_in_codeblock'>x</span> is not odr-usable</span>
<span class='curlybracket'>}</span>

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>1</span>;
  <span class='keyword'>auto</span> lambda <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>x; <span class='curlybracket'>}</span>;      <span class='comment'>// OK</span>
  lambda<span class='operator'>.</span><span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;             <span class='comment'>// OK, does not odr-use <span class='tcode_in_codeblock'>x</span></span>
  lambda<span class='operator'>.</span><span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// OK, does not odr-use <span class='tcode_in_codeblock'>x</span></span>
  lambda<span class='operator'>.</span><span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;      <span class='comment'>// error: odr-uses <span class='tcode_in_codeblock'>x</span> from a context where <span class='tcode_in_codeblock'>x</span> is not odr-usable</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L612'>#</a></div><div class='texpara'><div id='12.sentence-1' class='sentence'>Every program shall contain at least one definition of every
function or variable that is odr-used in that program
outside of a <a href='stmt.if#def:discarded_statement' title='8.5.2&emsp;The if statement&emsp;[stmt.if]'>discarded statement</a>; no diagnostic required<a class='hidden_link' href='#12.sentence-1'>.</a></div> <div id='12.sentence-2' class='sentence'>The definition can appear explicitly in the program, it can be found in
the standard or a user-defined library, or (when appropriate) it is
implicitly defined (see <a href='class.default.ctor' title='11.4.5.2&emsp;Default constructors'>[class.<span class='shy'></span>default.<span class='shy'></span>ctor]</a>, <a href='class.copy.ctor' title='11.4.5.3&emsp;Copy/move constructors'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>,
<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>, and <a href='class.copy.assign' title='11.4.6&emsp;Copy/move assignment operator'>[class.<span class='shy'></span>copy.<span class='shy'></span>assign]</a>)<a class='hidden_link' href='#12.sentence-2'>.</a></div> <div id='example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
  <span class='keyword'>return</span> A<span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>decltype</span><span class='parenthesis'>(</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>auto</span> x <span class='operator'>=</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span> <div id='12.sentence-3' class='sentence'>
A program containing this translation unit is ill-formed
because <span class='texttt'>g</span> is odr-used but not defined,
and cannot be defined in any other translation unit
because the local class <span class='texttt'>A</span> cannot be named outside this
translation unit<a class='hidden_link' href='#12.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L636'>#</a></div><div class='texpara'><div id='13.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:definition_domain' title='6.3&emsp;One-definition rule&emsp;[basic.def.odr]'><span id='def:definition_domain'><i >definition domain</i></span></a> is
a <a href='module.private.frag#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment'><span class='textsf'><i >private-module-fragment</i></span></span></a> or
the portion of a translation unit
excluding its <a href='module.private.frag#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment_'><span class='textsf'><i >private-module-fragment</i></span></span></a> (if any)<a class='hidden_link' href='#13.sentence-1'>.</a></div> <div id='13.sentence-2' class='sentence'>A definition of an inline function or variable shall be reachable
from the end of every definition domain
in which it is odr-used outside of a discarded statement<a class='hidden_link' href='#13.sentence-2'>.</a></div></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L645'>#</a></div><div class='texpara'><div id='14.sentence-1' class='sentence'><a class='index' id=':type,incomplete'></a>A definition of a class shall be reachable in every context in which
the class is used in a way that requires the class type to be complete<a class='hidden_link' href='#14.sentence-1'>.</a></div> <div id='example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-6'>6</a></i>:&ensp;<div id='14.sentence-2' class='sentence'>The following complete translation unit is well-formed,
even though it never defines <span class='texttt'>X</span>:
<span class='codeblock'><span class='keyword'>struct</span> X;                       <span class='comment'>// declare <span class='tcode_in_codeblock'>X</span> as a struct type</span>
<span class='keyword'>struct</span> X<span class='operator'>*</span> x1;                   <span class='comment'>// use <span class='tcode_in_codeblock'>X</span> in pointer formation</span>
X<span class='operator'>*</span> x2;                          <span class='comment'>// use <span class='tcode_in_codeblock'>X</span> in pointer formation</span>
</span></div> —&nbsp;<i>end example</i>]</div></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='14.sentence-3' class='sentence'>The rules for declarations and expressions
describe in which contexts complete class types are required<a class='hidden_link' href='#14.sentence-3'>.</a></div> <div id='14.sentence-4' class='sentence'>A class
type <span class='texttt'>T</span> must be complete if
<ul class='itemize'><li id='14.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.1'>(14.1)</a></div>an object of type <span class='texttt'>T</span> is <a href='basic.def' title='6.2&emsp;Declarations and definitions&emsp;[basic.def]'>defined</a>, or</li><li id='14.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.2'>(14.2)</a></div>a non-static class <a href='class.mem#def:data_member' title='11.4&emsp;Class members&emsp;[class.mem]'>data member</a> of
type <span class='texttt'>T</span> is declared, or</li><li id='14.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.3'>(14.3)</a></div><span class='texttt'>T</span> is used as the allocated type or array element type in a
<a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression__'><span class='textsf'><i >new-expression</i></span></span></a> (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>), or</li><li id='14.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.4'>(14.4)</a></div>an lvalue-to-rvalue conversion is applied to
a glvalue referring
to an object of type <span class='texttt'>T</span> (<a href='conv.lval' title='7.3.2&emsp;Lvalue-to-rvalue conversion'>[conv.<span class='shy'></span>lval]</a>), or</li><li id='14.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.5'>(14.5)</a></div>an expression is converted (either implicitly or explicitly) to
type <span class='texttt'>T</span> (<a href='conv' title='7.3&emsp;Standard conversions'>[conv]</a>, <a href='expr.type.conv' title='7.6.1.4&emsp;Explicit type conversion (functional notation)'>[expr.<span class='shy'></span>type.<span class='shy'></span>conv]</a>, <a href='expr.dynamic.cast' title='7.6.1.7&emsp;Dynamic cast'>[expr.<span class='shy'></span>dynamic.<span class='shy'></span>cast]</a>, <a href='expr.static.cast' title='7.6.1.9&emsp;Static cast'>[expr.<span class='shy'></span>static.<span class='shy'></span>cast]</a>, <a href='expr.cast' title='7.6.3&emsp;Explicit type conversion (cast notation)'>[expr.<span class='shy'></span>cast]</a>), or</li><li id='14.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.6'>(14.6)</a></div>an expression that is not a null pointer constant, and has type
other than <span class='mathit'>cv</span> <span class='texttt'><span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span><span class='operator'>*</span></span>, is converted to the type pointer to <span class='texttt'>T</span>
or reference to <span class='texttt'>T</span> using a standard conversion (<a href='conv' title='7.3&emsp;Standard conversions'>[conv]</a>),
a <span id=':dynamic_cast'><span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span></span></span> (<a href='expr.dynamic.cast' title='7.6.1.7&emsp;Dynamic cast'>[expr.<span class='shy'></span>dynamic.<span class='shy'></span>cast]</a>) or
a <span id=':static_cast'><span class='texttt'><span class='keyword'>static_<span class='shy'></span>cast</span></span></span> (<a href='expr.static.cast' title='7.6.1.9&emsp;Static cast'>[expr.<span class='shy'></span>static.<span class='shy'></span>cast]</a>), or</li><li id='14.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.7'>(14.7)</a></div>a class member access operator is applied to an expression of type
<span class='texttt'>T</span> (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>), or</li><li id='14.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.8'>(14.8)</a></div>the <span id=':typeid'><span class='texttt'><span class='keyword'>typeid</span></span></span> operator (<a href='expr.typeid' title='7.6.1.8&emsp;Type identification'>[expr.<span class='shy'></span>typeid]</a>) or the
<span id=':sizeof'><span class='texttt'><span class='keyword'>sizeof</span></span></span> operator (<a href='expr.sizeof' title='7.6.2.5&emsp;Sizeof'>[expr.<span class='shy'></span>sizeof]</a>) is applied to an operand of
type <span class='texttt'>T</span>, or</li><li id='14.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.9'>(14.9)</a></div>a function with a return type or argument type of type <span class='texttt'>T</span>
is defined (<a href='basic.def' title='6.2&emsp;Declarations and definitions'>[basic.<span class='shy'></span>def]</a>) or <a href='expr.call' title='7.6.1.3&emsp;Function call&emsp;[expr.call]'>called</a>, or</li><li id='14.10'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.10'>(14.10)</a></div>a class with a base class of type <span class='texttt'>T</span> is
defined (<a href='class.derived' title='11.7&emsp;Derived classes'>[class.<span class='shy'></span>derived]</a>), or</li><li id='14.11'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.11'>(14.11)</a></div>an lvalue of type <span class='texttt'>T</span> is assigned to (<a href='expr.assign' title='7.6.19&emsp;Assignment and compound assignment operators'>[expr.<span class='shy'></span>assign]</a>), or</li><li id='14.12'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.12'>(14.12)</a></div>the type <span class='texttt'>T</span> is the subject of an
<span id=':alignof'><span class='texttt'><span class='keyword'>alignof</span></span></span> expression (<a href='expr.alignof' title='7.6.2.6&emsp;Alignof'>[expr.<span class='shy'></span>alignof]</a>), or</li><li id='14.13'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.13'>(14.13)</a></div>an <a href='except.pre#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration'><span class='textsf'><i >exception-declaration</i></span></span></a> has type <span class='texttt'>T</span>, reference to
<span class='texttt'>T</span>, or pointer to <span class='texttt'>T</span> (<a href='except.handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>)<a class='hidden_link' href='#14.sentence-4'>.</a></li></ul></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L696'>#</a></div><div class='texpara'><div id='15.sentence-1' class='sentence'>For any definable item <span class='texttt'>D</span> with definitions in multiple translation units,
<ul class='itemize'><li id='15.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.1'>(15.1)</a></div>if <span class='texttt'>D</span> is a non-inline non-templated function or variable, or</li><li id='15.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.2'>(15.2)</a></div>if the definitions in different translation units
do not satisfy the following requirements,</li></ul>
the program is ill-formed;
a diagnostic is required only
if the definable item is attached to a named module and
a prior definition is reachable at the point where a later definition occurs<a class='hidden_link' href='#15.sentence-1'>.</a></div> <div id='15.sentence-2' class='sentence'>Given such an item,
for all definitions of <span class='texttt'>D</span>, or,
if <span class='texttt'>D</span> is an unnamed enumeration,
for all definitions of <span class='texttt'>D</span> that are reachable at any given program point,
the following requirements shall be satisfied<a class='hidden_link' href='#15.sentence-2'>.</a></div> <ul class='itemize'><li id='15.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.3'>(15.3)</a></div><div class='texpara'><div id='15.3.sentence-1' class='sentence'>Each such definition
shall not be attached to a named module (<a href='module.unit' title='10.1&emsp;Module units and purviews'>[module.<span class='shy'></span>unit]</a>)<a class='hidden_link' href='#15.3.sentence-1'>.</a></div></div></li><li id='15.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.4'>(15.4)</a></div><div class='texpara'><div id='15.4.sentence-1' class='sentence'>Each such definition shall consist of
the same sequence of tokens,
where the definition of a closure type
is considered to consist of the sequence of tokens of
the corresponding <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression____'><span class='textsf'><i >lambda-expression</i></span></span></a><a class='hidden_link' href='#15.4.sentence-1'>.</a></div></div></li><li id='15.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.5'>(15.5)</a></div><div class='texpara'><div id='15.5.sentence-1' class='sentence'>In each such definition, corresponding names, looked up
according to <a href='basic.lookup' title='6.5&emsp;Name lookup'>[basic.<span class='shy'></span>lookup]</a>, shall refer to the same entity, after
overload resolution (<a href='over.match' title='12.2&emsp;Overload resolution'>[over.<span class='shy'></span>match]</a>) and after matching of partial
template specializations (<a href='temp.spec.partial.match' title='13.7.6.2&emsp;Matching of partial specializations'>[temp.<span class='shy'></span>spec.<span class='shy'></span>partial.<span class='shy'></span>match]</a>), except that a name can refer to
<ul class='itemize'><li id='15.5.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#15.5.1'>(15.5.1)</a></div>a non-volatile const object with internal or no linkage if the object
<ul class='itemize'><li id='15.5.1.1'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#15.5.1.1'>(15.5.1.1)</a></div>has the same literal type in all definitions of <span class='texttt'>D</span>,</li><li id='15.5.1.2'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#15.5.1.2'>(15.5.1.2)</a></div>is initialized with a <a href='expr.const' title='7.7&emsp;Constant expressions&emsp;[expr.const]'>constant expression</a>,</li><li id='15.5.1.3'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#15.5.1.3'>(15.5.1.3)</a></div>is not odr-used in any definition of <span class='texttt'>D</span>, and</li><li id='15.5.1.4'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#15.5.1.4'>(15.5.1.4)</a></div>has the same value in all definitions of <span class='texttt'>D</span>,</li></ul>
or</li><li id='15.5.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#15.5.2'>(15.5.2)</a></div>a reference with internal or no linkage
initialized with a constant expression such that
the reference refers to the same entity in all definitions of <span class='texttt'>D</span><a class='hidden_link' href='#15.5.sentence-1'>.</a></li></ul></div></div></li><li id='15.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.6'>(15.6)</a></div><div class='texpara'><div id='15.6.sentence-1' class='sentence'>In each such definition, except within
the default arguments and default template arguments of <span class='texttt'>D</span>,
corresponding <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_____'><span class='textsf'><i >lambda-expression</i></span></span></a><i >s</i> shall have
the same closure type (see below)<a class='hidden_link' href='#15.6.sentence-1'>.</a></div></div></li><li id='15.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.7'>(15.7)</a></div><div class='texpara'><div id='15.7.sentence-1' class='sentence'>In each such definition, corresponding entities shall have the
same language linkage<a class='hidden_link' href='#15.7.sentence-1'>.</a></div></div></li><li id='15.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.8'>(15.8)</a></div><div class='texpara'><div id='15.8.sentence-1' class='sentence'>In each such definition,
const objects with static or thread storage duration
shall be constant-initialized if
the object is constant-initialized in any such definition<a class='hidden_link' href='#15.8.sentence-1'>.</a></div></div></li><li id='15.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.9'>(15.9)</a></div><div class='texpara'><div id='15.9.sentence-1' class='sentence'>In each such definition,
corresponding manifestly constant-evaluated expressions
that are not value-dependent
shall have the same value (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>, <a href='temp.dep.constexpr' title='13.8.3.4&emsp;Value-dependent expressions'>[temp.<span class='shy'></span>dep.<span class='shy'></span>constexpr]</a>)<a class='hidden_link' href='#15.9.sentence-1'>.</a></div></div></li><li id='15.10'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.10'>(15.10)</a></div><div class='texpara'><div id='15.10.sentence-1' class='sentence'>In each such definition, the overloaded operators referred
to, the implicit calls to conversion functions, constructors, operator
new functions and operator delete functions, shall refer to the same
function<a class='hidden_link' href='#15.10.sentence-1'>.</a></div></div></li><li id='15.11'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#15.11'>(15.11)</a></div><div class='texpara'><div id='15.11.sentence-1' class='sentence'>In each such definition,
a default argument used by an (implicit or explicit) function call or
a default template argument used by an (implicit or explicit)
<a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id'><span class='textsf'><i >template-id</i></span></span></a> or <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id'><span class='textsf'><i >simple-template-id</i></span></span></a>
is treated as if its token sequence
were present in the definition of <span class='texttt'>D</span>;
that is, the default argument or default template argument
is subject to the requirements described in this paragraph (recursively)<a class='hidden_link' href='#15.11.sentence-1'>.</a></div></div></li></ul></div></div><div class='para' id='16'><div class='marginalizedparent'><a class='marginalized' href='#16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L775'>#</a></div><div class='texpara'><div id='16.sentence-1' class='sentence'>For the purposes of the preceding requirements:
<ul class='itemize'><li id='16.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#16.1'>(16.1)</a></div><div class='texpara'><div id='16.1.sentence-1' class='sentence'>If <span class='texttt'>D</span> is a class with an implicitly-declared
constructor (<a href='class.default.ctor' title='11.4.5.2&emsp;Default constructors'>[class.<span class='shy'></span>default.<span class='shy'></span>ctor]</a>, <a href='class.copy.ctor' title='11.4.5.3&emsp;Copy/move constructors'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>),
it is as if the constructor was
implicitly defined in every translation unit where it is odr-used, and the
implicit definition in every translation unit shall call the same
constructor for a subobject of <span class='texttt'>D</span><a class='hidden_link' href='#16.1.sentence-1'>.</a></div> <div id='example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-7'>7</a></i>:&ensp;<span class='codeblock'><span class='comment'>// translation unit 1:</span>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  X<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;
  X<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
X<span class='operator'>::</span>X<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>class</span> D <span class='curlybracket'>{</span>
  X x <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='curlybracket'>}</span>;
D d1;                           <span class='comment'>// <span class='tcode_in_codeblock'>X(int, int)</span> called by <span class='tcode_in_codeblock'>D()</span></span>

<span class='comment'>// translation unit 2:</span>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  X<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;
  X<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
X<span class='operator'>::</span>X<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>0</span>, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>class</span> D <span class='curlybracket'>{</span>
  X x <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='curlybracket'>}</span>;
D d2;                           <span class='comment'>// <span class='tcode_in_codeblock'>X(int, int, int)</span> called by <span class='tcode_in_codeblock'>D()</span>;</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>D()</span>'s implicit definition violates the ODR</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='16.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#16.2'>(16.2)</a></div><div class='texpara'><div id='16.2.sentence-1' class='sentence'>If <span class='texttt'>D</span> is a class with
a defaulted three-way comparison operator function (<a href='class.spaceship' title='11.10.3&emsp;Three-way comparison'>[class.<span class='shy'></span>spaceship]</a>),
it is as if the operator was
implicitly defined in every translation unit where it is odr-used, and the
implicit definition in every translation unit shall call the same
comparison operators for each subobject of <span class='texttt'>D</span><a class='hidden_link' href='#16.2.sentence-1'>.</a></div></div></li><li id='16.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#16.3'>(16.3)</a></div><div class='texpara'><div id='16.3.sentence-1' class='sentence'>If <span class='texttt'>D</span> is a template and is defined in more than one
translation unit, the requirements
apply both to names from the template's enclosing scope used in the
template definition, and also to dependent names at
the point of instantiation (<a href='temp.dep' title='13.8.3&emsp;Dependent names'>[temp.<span class='shy'></span>dep]</a>)<a class='hidden_link' href='#16.3.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='17'><div class='marginalizedparent'><a class='marginalized' href='#17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L826'>#</a></div><div class='texpara'><div id='17.sentence-1' class='sentence'>These requirements also apply to corresponding entities
defined within each definition of <span class='texttt'>D</span>
(including the closure types of <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression______'><span class='textsf'><i >lambda-expression</i></span></span></a><i >s</i>,
but excluding entities defined within default arguments or
default template arguments of either <span class='texttt'>D</span> or
an entity not defined within <span class='texttt'>D</span>)<a class='hidden_link' href='#17.sentence-1'>.</a></div> <div id='17.sentence-2' class='sentence'>For each such entity and for <span class='texttt'>D</span> itself,
the behavior is as if there is a single entity with a single definition,
including in the application of these requirements to other entities<a class='hidden_link' href='#17.sentence-2'>.</a></div> <div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>:&ensp;<div id='17.sentence-3' class='sentence'>The entity is still declared in multiple translation units, and <a href='basic.link' title='6.6&emsp;Program and linkage'>[basic.<span class='shy'></span>link]</a>
still applies to these declarations<a class='hidden_link' href='#17.sentence-3'>.</a></div> <div id='17.sentence-4' class='sentence'>In particular,
<a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_______'><span class='textsf'><i >lambda-expression</i></span></span></a><i >s</i> (<a href='expr.prim.lambda' title='7.5.6&emsp;Lambda expressions'>[expr.<span class='shy'></span>prim.<span class='shy'></span>lambda]</a>)
appearing in the type of <span class='texttt'>D</span> can result
in the different declarations having distinct types, and
<a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression________'><span class='textsf'><i >lambda-expression</i></span></span></a><i >s</i> appearing in a default argument of <span class='texttt'>D</span>
might still denote different types in different translation units<a class='hidden_link' href='#17.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='18'><div class='marginalizedparent'><a class='marginalized' href='#18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L846'>#</a></div><div class='texpara'><div id='example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-8'>8</a></i>:&ensp;<span class='codeblock'><span class='keyword'>inline</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>bool</span> cond, <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>if</span> <span class='parenthesis'>(</span>cond<span class='parenthesis'>)</span> f<span class='parenthesis'>(</span><span class='literal'>false</span>, <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>inline</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>bool</span> cond, <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>if</span> <span class='parenthesis'>(</span>cond<span class='parenthesis'>)</span> g<span class='parenthesis'>(</span><span class='literal'>false</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>bool</span> cond, <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>if</span> <span class='parenthesis'>(</span>cond<span class='parenthesis'>)</span> h<span class='parenthesis'>(</span><span class='literal'>false</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='18.sentence-1' class='sentence'>If the definition of <span class='texttt'>f</span> appears in multiple translation units,
the behavior of the program is as if
there is only one definition of <span class='texttt'>f</span><a class='hidden_link' href='#18.sentence-1'>.</a></div> <div id='18.sentence-2' class='sentence'>If the definition of <span class='texttt'>g</span> appears in multiple translation units,
the program is ill-formed (no diagnostic required) because
each such definition uses a default argument that
refers to a distinct <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_________'><span class='textsf'><i >lambda-expression</i></span></span></a> closure type<a class='hidden_link' href='#18.sentence-2'>.</a></div> <div id='18.sentence-3' class='sentence'>The definition of <span class='texttt'>X</span> can appear
in multiple translation units of a valid program;
the <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__________'><span class='textsf'><i >lambda-expression</i></span></span></a><i >s</i> defined within
the default argument of <span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>h</span> within the definition of <span class='texttt'>X</span>
denote the same closure type in each translation unit<a class='hidden_link' href='#18.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='19'><div class='marginalizedparent'><a class='marginalized' href='#19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/basic.tex#L876'>#</a></div><div class='texpara'><div id='19.sentence-1' class='sentence'>If, at any point in the program,
there is more than one
reachable unnamed enumeration definition in the same scope
that have the same first enumerator name and
do not have typedef names for linkage purposes (<a href='dcl.enum' title='9.8.1&emsp;Enumeration declarations'>[dcl.<span class='shy'></span>enum]</a>),
those unnamed enumeration types shall be the same; no diagnostic required<a class='hidden_link' href='#19.sentence-1'>.</a></div> </div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-16'><div class='texpara'><a class='footnotenum' href='#footnote-16'>16)</a><a class='footnoteBacklink' href='#footnoteref-16'>16)</a> <div id='footnote-16.sentence-1' class='sentence'>An implementation is not required
to call allocation and
deallocation functions from constructors or destructors; however, this
is a permissible implementation technique<a class='hidden_link' href='#footnote-16.sentence-1'>.</a></div></div></div></div></body></html>