<!DOCTYPE html><html lang='en'><head><title>[flat.multimap.overview]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>24</a> Containers library <a class='abbr_ref' href='./#containers'>[containers]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>24.6</a> Container adaptors <a class='abbr_ref' href='container.adaptors#flat.multimap.overview'>[container.adaptors]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>24.6.10</a> Class template <span class='texttt'>flat_<span class='shy'></span>multimap</span> <a class='abbr_ref' href='flat.multimap#overview'>[flat.multimap]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>24.6.10.1</a> Overview <a class='abbr_ref'>[flat.multimap.overview]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/fa211bcab0c7576e345e93c5940bdd329450a5df/source/containers.tex#L16932'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id='lib:flat_multimap'></a>A <span class='texttt'>flat_<span class='shy'></span>multimap</span> is a container adaptor
that provides an associative container interface
that supports equivalent keys
(i.e., possibly containing multiple copies of the same key value) and
provides for fast retrieval of values of another type <span class='texttt'>T</span>
based on the keys<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'><span class='texttt'>flat_<span class='shy'></span>multimap</span> supports iterators that meet
the <i >Cpp17InputIterator</i> requirements and
model the
<a href='iterator.concept.random.access#concept:random_access_iterator' title='25.3.4.13&emsp;Concept random_&shy;access_&shy;iterator&emsp;[iterator.concept.random.access]'><span id='conceptref:random_access_iterator'><span class='texttt'>random_<span class='shy'></span>access_<span class='shy'></span>iterator</span></span></a> concept (<a href='iterator.concept.random.access' title='25.3.4.13&emsp;Concept random_&shy;access_&shy;iterator'>[iterator.<span class='shy'></span>concept.<span class='shy'></span>random.<span class='shy'></span>access]</a>)<a class='hidden_link' href='#1.sentence-2'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/fa211bcab0c7576e345e93c5940bdd329450a5df/source/containers.tex#L16945'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>A <span class='texttt'>flat_<span class='shy'></span>multimap</span> meets all of the requirements
for a container (<a href='container.reqmts' title='24.2.2.2&emsp;Container requirements'>[container.<span class='shy'></span>reqmts]</a>) and
for a reversible container (<a href='container.rev.reqmts' title='24.2.2.3&emsp;Reversible container requirements'>[container.<span class='shy'></span>rev.<span class='shy'></span>reqmts]</a>),
plus the optional container requirements (<a href='container.opt.reqmts' title='24.2.2.4&emsp;Optional container requirements'>[container.<span class='shy'></span>opt.<span class='shy'></span>reqmts]</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'><span class='texttt'>flat_<span class='shy'></span>multimap</span> meets the requirements of
an associative container (<a href='associative.reqmts' title='24.2.7&emsp;Associative containers'>[associative.<span class='shy'></span>reqmts]</a>), except that:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.1'>(2.1)</a></div>it does not meet the requirements related to node handles (<a href='container.node' title='24.2.5&emsp;Node handles'>[container.<span class='shy'></span>node]</a>),</li><li id='2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.2'>(2.2)</a></div>it does not meet the requirements related to iterator invalidation, and</li><li id='2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.3'>(2.3)</a></div>the time complexity of the operations
that insert or erase a single element from the map is linear,
including the ones that take an insertion position iterator<a class='hidden_link' href='#2.sentence-2'>.</a></li></ul></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='2.sentence-3' class='sentence'>A <span class='texttt'>flat_<span class='shy'></span>multimap</span> does not meet the additional requirements of an
allocator-aware container (<a href='container.alloc.reqmts' title='24.2.2.5&emsp;Allocator-aware containers'>[container.<span class='shy'></span>alloc.<span class='shy'></span>reqmts]</a>)<a class='hidden_link' href='#2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/fa211bcab0c7576e345e93c5940bdd329450a5df/source/containers.tex#L16967'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>A <span class='texttt'>flat_<span class='shy'></span>multimap</span> also provides most operations described
in <a href='associative.reqmts' title='24.2.7&emsp;Associative containers'>[associative.<span class='shy'></span>reqmts]</a> for equal keys<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>This means that a <span class='texttt'>flat_<span class='shy'></span>multimap</span> supports
the <span class='texttt'>a_<span class='shy'></span>eq</span> operations in <a href='associative.reqmts' title='24.2.7&emsp;Associative containers'>[associative.<span class='shy'></span>reqmts]</a>
but not the <span class='texttt'>a_<span class='shy'></span>uniq</span> operations<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>For a <span class='texttt'>flat_<span class='shy'></span>multimap<span class='anglebracket'>&lt;</span>Key, T<span class='anglebracket'>&gt;</span></span>
the <span class='texttt'>key_<span class='shy'></span>type</span> is <span class='texttt'>Key</span> and
the <span class='texttt'>value_<span class='shy'></span>type</span> is <span class='texttt'>pair<span class='anglebracket'>&lt;</span>Key, T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#3.sentence-3'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/fa211bcab0c7576e345e93c5940bdd329450a5df/source/containers.tex#L16977'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>Except as otherwise noted,
operations on <span class='texttt'>flat_<span class='shy'></span>multimap</span> are equivalent to those of <span class='texttt'>flat_<span class='shy'></span>map</span>,
except that <span class='texttt'>flat_<span class='shy'></span>multimap</span> operations
do not remove or replace elements with equal keys<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<div id='4.sentence-2' class='sentence'><span class='texttt'>flat_<span class='shy'></span>multimap</span> constructors and emplace do not erase
non-unique elements after sorting them<a class='hidden_link' href='#4.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/fa211bcab0c7576e345e93c5940bdd329450a5df/source/containers.tex#L16987'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>A <span class='texttt'>flat_<span class='shy'></span>multimap</span> maintains the following invariants:
<ul class='itemize'><li id='5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.1'>(5.1)</a></div>it contains the same number of keys and values;</li><li id='5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.2'>(5.2)</a></div>the keys are sorted with respect to the comparison object; and</li><li id='5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.3'>(5.3)</a></div>the value at offset <span class='texttt'>off</span> within the value container is the value
associated with the key at offset <span class='texttt'>off</span> within the key container<a class='hidden_link' href='#5.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/fa211bcab0c7576e345e93c5940bdd329450a5df/source/containers.tex#L16999'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>If any member function in <a href='flat.multimap.defn' title='24.6.10.2&emsp;Definition'>[flat.<span class='shy'></span>multimap.<span class='shy'></span>defn]</a> exits via an exception,
the invariants are restored<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='6.sentence-2' class='sentence'>This can result in the <span class='texttt'>flat_<span class='shy'></span>multimap</span> being emptied<a class='hidden_link' href='#6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/fa211bcab0c7576e345e93c5940bdd329450a5df/source/containers.tex#L17006'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>Any type <span class='texttt'>C</span>
that meets the sequence container requirements (<a href='sequence.reqmts' title='24.2.4&emsp;Sequence containers'>[sequence.<span class='shy'></span>reqmts]</a>)
can be used to instantiate <span class='texttt'>flat_<span class='shy'></span>multimap</span>,
as long as
<span class='texttt'>C<span class='operator'>&#x200b;::&#x200b;</span>iterator</span> meets the <i >Cpp17RandomAccessIterator</i> requirements and
invocations of
member functions <span class='texttt'>C<span class='operator'>&#x200b;::&#x200b;</span>size</span> and <span class='texttt'>C<span class='operator'>&#x200b;::&#x200b;</span>max_<span class='shy'></span>size</span> do not exit via an exception<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>In particular,
<span class='texttt'>vector</span> (<a href='vector' title='24.3.12&emsp;Class template vector'>[vector]</a>) and <span class='texttt'>deque</span> (<a href='deque' title='24.3.9&emsp;Class template deque'>[deque]</a>) can be used<a class='hidden_link' href='#7.sentence-2'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='7.sentence-3' class='sentence'><span class='texttt'>vector<span class='anglebracket'>&lt;</span><span class='keyword'>bool</span><span class='anglebracket'>&gt;</span></span> is not a sequence container<a class='hidden_link' href='#7.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/fa211bcab0c7576e345e93c5940bdd329450a5df/source/containers.tex#L17020'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'>The program is ill-formed if
<span class='texttt'>Key</span> is not the same type as <span class='texttt'>KeyContainer<span class='operator'>&#x200b;::&#x200b;</span>value_<span class='shy'></span>type</span> or
<span class='texttt'>T</span> is not the same type as <span class='texttt'>MappedContainer<span class='operator'>&#x200b;::&#x200b;</span>value_<span class='shy'></span>type</span><a class='hidden_link' href='#8.sentence-1'>.</a></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/fa211bcab0c7576e345e93c5940bdd329450a5df/source/containers.tex#L17025'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'>The effect of calling a constructor
that takes both <span class='texttt'>key_<span class='shy'></span>container_<span class='shy'></span>type</span> and
<span class='texttt'>mapped_<span class='shy'></span>container_<span class='shy'></span>type</span> arguments
with containers of different sizes is undefined<a class='hidden_link' href='#9.sentence-1'>.</a></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/fa211bcab0c7576e345e93c5940bdd329450a5df/source/containers.tex#L17031'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'>The effect of calling a constructor or member function
that takes a <span class='texttt'>sorted_<span class='shy'></span>equivalent_<span class='shy'></span>t</span> argument
with a container, containers, or range
that are not sorted with respect to <span class='texttt'>key_<span class='shy'></span>comp<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is undefined<a class='hidden_link' href='#10.sentence-1'>.</a></div></div></div></div></body></html>