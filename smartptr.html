<!DOCTYPE html><html lang='en'><head><title>[smartptr]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>19</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>19.11</a> Smart pointers <a class='abbr_ref'>[smartptr]</a></h2><div id='unique.ptr' class='section'><h3 ><a class='secnum' href='#unique.ptr' style='min-width:103pt'>19.11.1</a> Class template <span class='texttt'>unique_&shy;ptr</span> <a class='abbr_ref' href='unique.ptr'>[unique.ptr]</a></h3><div class='para' id='unique.ptr-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L7959'>#</a></div><div id='unique.ptr-1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:unique_pointer' id='def:unique_pointer'><i >unique pointer</i></a> is an object that owns another object and
manages that other object through a pointer<a class='hidden_link' href='#unique.ptr-1.sentence-1'>.</a></div> <div id='unique.ptr-1.sentence-2' class='sentence'>More precisely, a unique pointer
is an object <span class='textit'>u</span> that stores a pointer to a second object <span class='textit'>p</span> and
will dispose of <span class='textit'>p</span> when <span class='textit'>u</span> is itself destroyed (e.g., when
leaving block scope (<a href='stmt.dcl'>[stmt.dcl]</a>))<a class='hidden_link' href='#unique.ptr-1.sentence-2'>.</a></div> <div id='unique.ptr-1.sentence-3' class='sentence'>In this context, <span class='textit'>u</span> is said
to <a class='hidden_link' href='#def:own' id='def:own'><i >own</i></a> <span class='texttt'>p</span><a class='hidden_link' href='#unique.ptr-1.sentence-3'>.</a></div></div><div class='para' id='unique.ptr-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L7967'>#</a></div><div id='unique.ptr-2.sentence-1' class='sentence'>The mechanism by which <span class='textit'>u</span> disposes of <span class='textit'>p</span> is known as
<span class='textit'>p</span>'s associated <a class='hidden_link' href='#def:deleter' id='def:deleter'><i >deleter</i></a>, a function object whose correct
invocation results in <span class='textit'>p</span>'s appropriate disposition (typically its deletion)<a class='hidden_link' href='#unique.ptr-2.sentence-1'>.</a></div></div><div class='para' id='unique.ptr-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L7972'>#</a></div><div id='unique.ptr-3.sentence-1' class='sentence'>Let the notation <span class='textit'>u.p</span> denote the pointer stored by <span class='textit'>u</span>, and
let <span class='textit'>u.d</span> denote the associated deleter<a class='hidden_link' href='#unique.ptr-3.sentence-1'>.</a></div> <div id='unique.ptr-3.sentence-2' class='sentence'>Upon request, <span class='textit'>u</span> can
<a class='hidden_link' href='#def:reset' id='def:reset'><i >reset</i></a> (replace) <span class='textit'>u.p</span> and <span class='textit'>u.d</span> with another pointer and
deleter, but properly disposes of its owned object via the associated
deleter before such replacement is considered completed<a class='hidden_link' href='#unique.ptr-3.sentence-2'>.</a></div></div><div class='para' id='unique.ptr-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L7979'>#</a></div><div id='unique.ptr-4.sentence-1' class='sentence'>Each object of a type <span class='texttt'>U</span> instantiated from the <span class='texttt'>unique_&shy;ptr</span> template
specified in this subclause has the strict ownership semantics, specified above,
of a unique pointer<a class='hidden_link' href='#unique.ptr-4.sentence-1'>.</a></div> <div id='unique.ptr-4.sentence-2' class='sentence'>In partial satisfaction of these semantics, each such <span class='texttt'>U</span>
is <span class='textit'>Cpp17MoveConstructible</span> and <span class='textit'>Cpp17MoveAssignable</span>, but is not
<span class='textit'>Cpp17CopyConstructible</span> nor <span class='textit'>Cpp17CopyAssignable</span><a class='hidden_link' href='#unique.ptr-4.sentence-2'>.</a></div> <div id='unique.ptr-4.sentence-3' class='sentence'>The template parameter <span class='texttt'>T</span> of <span class='texttt'>unique_&shy;ptr</span> may be an incomplete type<a class='hidden_link' href='#unique.ptr-4.sentence-3'>.</a></div></div><div class='para' id='unique.ptr-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L7987'>#</a></div><div id='unique.ptr-5.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#unique.ptr-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='unique.ptr-5.sentence-1' class='sentence'>The uses
of <span class='texttt'>unique_&shy;ptr</span> include providing exception safety for
dynamically allocated memory, passing ownership of dynamically allocated
memory to a function, and returning dynamically allocated memory from a
function<a class='hidden_link' href='#unique.ptr-5.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div><div id='unique.ptr.dltr' class='section'><h4 ><a class='secnum' href='#unique.ptr.dltr' style='min-width:118pt'>19.11.1.1</a> Default deleters <a class='abbr_ref' href='unique.ptr.dltr'>[unique.ptr.dltr]</a></h4><div id='unique.ptr.dltr.general' class='section'><h4 ><a class='secnum' href='#unique.ptr.dltr.general' style='min-width:133pt'>19.11.1.1.1</a> In general <a class='abbr_ref' href='unique.ptr.dltr.general'>[unique.ptr.dltr.general]</a></h4><div class='para' id='unique.ptr.dltr.general-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L7998'>#</a></div><div id='unique.ptr.dltr.general-1.sentence-1' class='sentence'>The class template <span class='texttt'>default_&shy;delete</span> serves as the default deleter (destruction policy)
for the class template <span class='texttt'>unique_&shy;ptr</span><a class='hidden_link' href='#unique.ptr.dltr.general-1.sentence-1'>.</a></div></div><div class='para' id='unique.ptr.dltr.general-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8002'>#</a></div><div id='unique.ptr.dltr.general-2.sentence-1' class='sentence'>The template parameter <span class='texttt'>T</span> of <span class='texttt'>default_&shy;delete</span> may be
an incomplete type<a class='hidden_link' href='#unique.ptr.dltr.general-2.sentence-1'>.</a></div></div></div><div id='unique.ptr.dltr.dflt' class='section'><h4 ><a class='secnum' href='#unique.ptr.dltr.dflt' style='min-width:133pt'>19.11.1.1.2</a> <span class='texttt'>default_&shy;delete</span> <a class='abbr_ref' href='unique.ptr.dltr.dflt'>[unique.ptr.dltr.dflt]</a></h4><pre class='codeblock'>
namespace std {
  template&lt;class T&gt; struct default_delete {
    constexpr default_delete() noexcept = default;
    template&lt;class U&gt; default_delete(const default_delete&lt;U&gt;&amp;) noexcept;
    void operator()(T*) const;
  };
}</pre> <span class='indexparent'><a class='index' id='lib:default_delete,constructor'></a></span><div class='itemdecl' id='unique.ptr.dltr.dflt-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.dltr.dflt-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class U&gt; default_delete(const default_delete&lt;U&gt;&amp; other) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.dltr.dflt-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8024'>#</a></div><div id='unique.ptr.dltr.dflt-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs a <span class='texttt'>default_&shy;delete</span> object
from another <span class='texttt'>default_&shy;delete&lt;U&gt;</span> object<a class='hidden_link' href='#unique.ptr.dltr.dflt-1.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.dltr.dflt-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8028'>#</a></div><div id='unique.ptr.dltr.dflt-2.sentence-1' class='sentence'><span class='textit'>Remarks:</span> This constructor shall not participate in overload resolution unless
<span class='texttt'>U*</span> is implicitly convertible to <span class='texttt'>T*</span><a class='hidden_link' href='#unique.ptr.dltr.dflt-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator(),default_delete'></a></span><span class='indexparent'><a class='index' id='lib:default_delete,operator()'></a></span><div class='itemdecl' id='unique.ptr.dltr.dflt-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.dltr.dflt-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>void operator()(T* ptr) const;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.dltr.dflt-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8039'>#</a></div><div id='unique.ptr.dltr.dflt-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> Calls <span class='texttt'>delete</span> on <span class='texttt'>ptr</span><a class='hidden_link' href='#unique.ptr.dltr.dflt-3.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.dltr.dflt-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8042'>#</a></div><div id='unique.ptr.dltr.dflt-4.sentence-1' class='sentence'><span class='textit'>Remarks:</span> If <span class='texttt'>T</span> is an incomplete type, the program is ill-formed<a class='hidden_link' href='#unique.ptr.dltr.dflt-4.sentence-1'>.</a></div></div></div></div><div id='unique.ptr.dltr.dflt1' class='section'><h4 ><a class='secnum' href='#unique.ptr.dltr.dflt1' style='min-width:133pt'>19.11.1.1.3</a> <span class='texttt'>default_&shy;delete&lt;T[]&gt;</span> <a class='abbr_ref' href='unique.ptr.dltr.dflt1'>[unique.ptr.dltr.dflt1]</a></h4><pre class='codeblock'>
namespace std {
  template&lt;class T&gt; struct default_delete&lt;T[]&gt; {
    constexpr default_delete() noexcept = default;
    template&lt;class U&gt; default_delete(const default_delete&lt;U[]&gt;&amp;) noexcept;
    template&lt;class U&gt; void operator()(U* ptr) const;
  };
}</pre><span class='indexparent'><a class='index' id='lib:default_delete,constructor_'></a></span><div class='itemdecl' id='unique.ptr.dltr.dflt1-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.dltr.dflt1-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class U&gt; default_delete(const default_delete&lt;U[]&gt;&amp; other) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.dltr.dflt1-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt1-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8064'>#</a></div><div id='unique.ptr.dltr.dflt1-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Constructs a <span class='texttt'>default_&shy;delete</span> object from another <span class='texttt'>default_&shy;delete&lt;U[]&gt;</span> object<a class='hidden_link' href='#unique.ptr.dltr.dflt1-1.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.dltr.dflt1-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt1-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8068'>#</a></div><div id='unique.ptr.dltr.dflt1-2.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
This constructor shall not participate in overload resolution unless <span class='texttt'>U(*)[]</span> is
convertible to <span class='texttt'>T(*)[]</span><a class='hidden_link' href='#unique.ptr.dltr.dflt1-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator(),default_delete_'></a></span><span class='indexparent'><a class='index' id='lib:default_delete,operator()_'></a></span><div class='itemdecl' id='unique.ptr.dltr.dflt1-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.dltr.dflt1-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class U&gt; void operator()(U* ptr) const;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.dltr.dflt1-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt1-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8080'>#</a></div><div id='unique.ptr.dltr.dflt1-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Calls <span class='texttt'>delete[]</span> on <span class='texttt'>ptr</span><a class='hidden_link' href='#unique.ptr.dltr.dflt1-3.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.dltr.dflt1-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt1-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8084'>#</a></div><div id='unique.ptr.dltr.dflt1-4.sentence-1' class='sentence'><span class='textit'>Remarks:</span> If <span class='texttt'>U</span> is an incomplete type, the program is ill-formed<a class='hidden_link' href='#unique.ptr.dltr.dflt1-4.sentence-1'>.</a></div> <div id='unique.ptr.dltr.dflt1-4.sentence-2' class='sentence'>This function shall not participate in overload resolution
unless <span class='texttt'>U(*)[]</span> is convertible to <span class='texttt'>T(*)[]</span><a class='hidden_link' href='#unique.ptr.dltr.dflt1-4.sentence-2'>.</a></div></div></div></div></div><div id='unique.ptr.single' class='section'><h4 ><a class='secnum' href='#unique.ptr.single' style='min-width:118pt'>19.11.1.2</a> <span class='texttt'>unique_&shy;ptr</span> for single objects <a class='abbr_ref' href='unique.ptr.single'>[unique.ptr.single]</a></h4><span class='indexparent'><a class='index' id='lib:unique_ptr'></a></span><pre class='codeblock'>
namespace std {
  template&lt;class T, class D = default_delete&lt;T&gt;&gt; class unique_ptr {
  public:
    using pointer      = <span class='textit'><span class='texttt'>see below</span></span>;
    using element_type = T;
    using deleter_type = D;

    <span class='comment'>// <a href='#unique.ptr.single.ctor'>[unique.ptr.single.ctor]</a>, constructors
</span>    constexpr unique_ptr() noexcept;
    explicit unique_ptr(pointer p) noexcept;
    unique_ptr(pointer p, <span class='textit'><span class='texttt'>see below</span></span> d1) noexcept;
    unique_ptr(pointer p, <span class='textit'><span class='texttt'>see below</span></span> d2) noexcept;
    unique_ptr(unique_ptr&amp;&amp; u) noexcept;
    constexpr unique_ptr(nullptr_t) noexcept;
    template&lt;class U, class E&gt;
      unique_ptr(unique_ptr&lt;U, E&gt;&amp;&amp; u) noexcept;

    <span class='comment'>// <a href='#unique.ptr.single.dtor'>[unique.ptr.single.dtor]</a>, destructor
</span>    ~unique_ptr();

    <span class='comment'>// <a href='#unique.ptr.single.asgn'>[unique.ptr.single.asgn]</a>, assignment
</span>    unique_ptr&amp; operator=(unique_ptr&amp;&amp; u) noexcept;
    template&lt;class U, class E&gt;
      unique_ptr&amp; operator=(unique_ptr&lt;U, E&gt;&amp;&amp; u) noexcept;
    unique_ptr&amp; operator=(nullptr_t) noexcept;

    <span class='comment'>// <a href='#unique.ptr.single.observers'>[unique.ptr.single.observers]</a>, observers
</span>    add_lvalue_reference_t&lt;T&gt; operator*() const;
    pointer operator-&gt;() const noexcept;
    pointer get() const noexcept;
    deleter_type&amp; get_deleter() noexcept;
    const deleter_type&amp; get_deleter() const noexcept;
    explicit operator bool() const noexcept;

    <span class='comment'>// <a href='#unique.ptr.single.modifiers'>[unique.ptr.single.modifiers]</a>, modifiers
</span>    pointer release() noexcept;
    void reset(pointer p = pointer()) noexcept;
    void swap(unique_ptr&amp; u) noexcept;

    <span class='comment'>// disable copy from lvalue
</span>    unique_ptr(const unique_ptr&amp;) = delete;
    unique_ptr&amp; operator=(const unique_ptr&amp;) = delete;
  };
}</pre><div class='para' id='unique.ptr.single-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8140'>#</a></div><div id='unique.ptr.single-1.sentence-1' class='sentence'>The default type for the template parameter <span class='texttt'>D</span> is
<span class='texttt'>default_&shy;delete</span><a class='hidden_link' href='#unique.ptr.single-1.sentence-1'>.</a></div> <div id='unique.ptr.single-1.sentence-2' class='sentence'>A client-supplied template argument
<span class='texttt'>D</span> shall be a
<a href='function.objects#def:function_object,type'>function object type</a>,
lvalue reference to function, or
lvalue reference to function object type
for which, given
a value <span class='texttt'>d</span> of type <span class='texttt'>D</span> and a value
<span class='texttt'>ptr</span> of type <span class='texttt'>unique_&shy;ptr&lt;T, D&gt;&#x200b;::&#x200b;pointer</span>, the expression
<span class='texttt'>d(ptr)</span> is valid and has the effect of disposing of the
pointer as appropriate for that deleter<a class='hidden_link' href='#unique.ptr.single-1.sentence-2'>.</a></div></div><div class='para' id='unique.ptr.single-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8153'>#</a></div><div id='unique.ptr.single-2.sentence-1' class='sentence'>If the deleter's type <span class='texttt'>D</span> is not a reference type, <span class='texttt'>D</span> shall satisfy
the <span class='textit'>Cpp17Destructible</span> requirements (Table <a href='utility.arg.requirements#tab:destructible'>29</a>)<a class='hidden_link' href='#unique.ptr.single-2.sentence-1'>.</a></div></div><div class='para' id='unique.ptr.single-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8157'>#</a></div><div id='unique.ptr.single-3.sentence-1' class='sentence'>If the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> <span class='texttt'>remove_&shy;reference_&shy;t&lt;D&gt;&#x200b;::&#x200b;pointer</span> is valid and denotes a
type (<a href='temp.deduct'>[temp.deduct]</a>), then <span class='texttt'>unique_&shy;ptr&lt;T,
D&gt;&#x200b;::&#x200b;pointer</span> shall be a synonym for <span class='texttt'>remove_&shy;reference_&shy;t&lt;D&gt;&#x200b;::&#x200b;pointer</span><a class='hidden_link' href='#unique.ptr.single-3.sentence-1'>.</a></div> <div id='unique.ptr.single-3.sentence-2' class='sentence'>Otherwise
<span class='texttt'>unique_&shy;ptr&lt;T, D&gt;&#x200b;::&#x200b;pointer</span> shall be a synonym for <span class='texttt'>element_&shy;type*</span><a class='hidden_link' href='#unique.ptr.single-3.sentence-2'>.</a></div> <div id='unique.ptr.single-3.sentence-3' class='sentence'>The type <span class='texttt'>unique_&shy;ptr&lt;T,
D&gt;&#x200b;::&#x200b;pointer</span> shall
satisfy the <span class='textit'>Cpp17NullablePointer</span> requirements (Table <a href='nullablepointer.requirements#tab:nullablepointer'>30</a>)<a class='hidden_link' href='#unique.ptr.single-3.sentence-3'>.</a></div></div><div class='para' id='unique.ptr.single-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8165'>#</a></div><div id='unique.ptr.single-4.example-1' class='example'>[<span style='white-space:nowrap'>â€‰</span><a class='example_link' href='#unique.ptr.single-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='unique.ptr.single-4.sentence-1' class='sentence'>Given an allocator type <span class='texttt'>X</span> (Table <a href='allocator.requirements#tab:utilities.allocator.requirements'>33</a>) and
letting <span class='texttt'>A</span> be a synonym for <span class='texttt'>allocator_&shy;traits&lt;X&gt;</span>, the types <span class='texttt'>A&#x200b;::&#x200b;pointer</span>,
<span class='texttt'>A&#x200b;::&#x200b;const_&shy;pointer</span>, <span class='texttt'>A&#x200b;::&#x200b;void_&shy;pointer</span>, and <span class='texttt'>A&#x200b;::&#x200b;const_&shy;void_&shy;pointer</span>
may be used as <span class='texttt'>unique_&shy;ptr&lt;T, D&gt;&#x200b;::&#x200b;pointer</span><a class='hidden_link' href='#unique.ptr.single-4.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end example</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div><div id='unique.ptr.single.ctor' class='section'><h4 ><a class='secnum' href='#unique.ptr.single.ctor' style='min-width:133pt'>19.11.1.2.1</a> Constructors <a class='abbr_ref' href='unique.ptr.single.ctor'>[unique.ptr.single.ctor]</a></h4><span class='indexparent'><a class='index' id='lib:unique_ptr,constructor'></a></span><div class='itemdecl' id='unique.ptr.single.ctor-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.ctor-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>constexpr unique_ptr() noexcept;
constexpr unique_ptr(nullptr_t) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8180'>#</a></div><div id='unique.ptr.single.ctor-1.sentence-1' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>D</span> shall
satisfy the <span class='textit'>Cpp17DefaultConstructible</span> requirements (Table <a href='utility.arg.requirements#tab:defaultconstructible'>24</a>),
and that construction shall not throw an exception<a class='hidden_link' href='#unique.ptr.single.ctor-1.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8185'>#</a></div><div id='unique.ptr.single.ctor-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs a <span class='texttt'>unique_&shy;ptr</span> object that owns
nothing, value-initializing the stored pointer and the stored deleter<a class='hidden_link' href='#unique.ptr.single.ctor-2.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8189'>#</a></div><div id='unique.ptr.single.ctor-3.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>get() == nullptr</span><a class='hidden_link' href='#unique.ptr.single.ctor-3.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-3.sentence-2' class='sentence'><span class='texttt'>get_&shy;deleter()</span>
returns a reference to the stored deleter<a class='hidden_link' href='#unique.ptr.single.ctor-3.sentence-2'>.</a></div></div></div><div class='para' id='unique.ptr.single.ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8193'>#</a></div><div id='unique.ptr.single.ctor-4.sentence-1' class='sentence'><span class='textit'>Remarks:</span> If <span class='texttt'>is_&shy;pointer_&shy;v&lt;deleter_&shy;type&gt;</span> is <span class='texttt'>true</span> or
<span class='texttt'>is_&shy;default_&shy;constructible_&shy;v&lt;deleter_&shy;type&gt;</span> is <span class='texttt'>false</span>,
this constructor shall not participate in overload resolution<a class='hidden_link' href='#unique.ptr.single.ctor-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:unique_ptr,constructor_'></a></span><div class='itemdecl' id='unique.ptr.single.ctor-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.ctor-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>explicit unique_ptr(pointer p) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.ctor-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8205'>#</a></div><div id='unique.ptr.single.ctor-5.sentence-1' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>D</span> shall
satisfy the <span class='textit'>Cpp17DefaultConstructible</span> requirements (Table <a href='utility.arg.requirements#tab:defaultconstructible'>24</a>),
and that construction shall not throw an exception<a class='hidden_link' href='#unique.ptr.single.ctor-5.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.ctor-6'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8210'>#</a></div><div id='unique.ptr.single.ctor-6.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs a <span class='texttt'>unique_&shy;ptr</span> which owns
<span class='texttt'>p</span>, initializing the stored pointer with <span class='texttt'>p</span> and
value-initializing the stored deleter<a class='hidden_link' href='#unique.ptr.single.ctor-6.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.ctor-7'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8215'>#</a></div><div id='unique.ptr.single.ctor-7.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>get() == p</span><a class='hidden_link' href='#unique.ptr.single.ctor-7.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-7.sentence-2' class='sentence'><span class='texttt'>get_&shy;deleter()</span>
returns a reference to the stored deleter<a class='hidden_link' href='#unique.ptr.single.ctor-7.sentence-2'>.</a></div></div></div><div class='para' id='unique.ptr.single.ctor-8'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8219'>#</a></div><div id='unique.ptr.single.ctor-8.sentence-1' class='sentence'><span class='textit'>Remarks:</span> If <span class='texttt'>is_&shy;pointer_&shy;v&lt;deleter_&shy;type&gt;</span> is <span class='texttt'>true</span> or
<span class='texttt'>is_&shy;default_&shy;constructible_&shy;v&lt;deleter_&shy;type&gt;</span> is <span class='texttt'>false</span>,
this constructor shall not participate in overload resolution<a class='hidden_link' href='#unique.ptr.single.ctor-8.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-8.sentence-2' class='sentence'>If class template argument deduction (<a href='over.match.class.deduct'>[over.match.class.deduct]</a>)
would select the function template corresponding to this constructor,
then the program is ill-formed<a class='hidden_link' href='#unique.ptr.single.ctor-8.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:unique_ptr,constructor__'></a></span><div class='itemdecl' id='unique.ptr.single.ctor-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.ctor-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>unique_ptr(pointer p, const D&amp; d) noexcept;
unique_ptr(pointer p, remove_reference_t&lt;D&gt;&amp;&amp; d) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.ctor-9'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8235'>#</a></div><div id='unique.ptr.single.ctor-9.sentence-1' class='sentence'><span class='textit'>Requires:</span> For the first constructor, if <span class='texttt'>D</span> is not a reference type,
<span class='texttt'>D</span> shall satisfy the <span class='textit'>Cpp17CopyConstructible</span> requirements and
such construction shall not exit via an exception<a class='hidden_link' href='#unique.ptr.single.ctor-9.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-9.sentence-2' class='sentence'>For the second constructor, if <span class='texttt'>D</span> is not a reference type,
<span class='texttt'>D</span> shall satisfy the <span class='textit'>Cpp17MoveConstructible</span> requirements and
such construction shall not exit via an exception<a class='hidden_link' href='#unique.ptr.single.ctor-9.sentence-2'>.</a></div></div></div><div class='para' id='unique.ptr.single.ctor-10'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8243'>#</a></div><div id='unique.ptr.single.ctor-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs a <span class='texttt'>unique_&shy;ptr</span> object which owns <span class='texttt'>p</span>, initializing
the stored pointer with <span class='texttt'>p</span> and initializing the deleter
from <span class='texttt'>std&#x200b;::&#x200b;forward&lt;decltype(d)&gt;(d)</span><a class='hidden_link' href='#unique.ptr.single.ctor-10.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.ctor-11'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8248'>#</a></div><div id='unique.ptr.single.ctor-11.sentence-1' class='sentence'><span class='textit'>Remarks:</span> If <span class='texttt'>D</span> is a reference type,
the second constructor is defined as deleted<a class='hidden_link' href='#unique.ptr.single.ctor-11.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-11.sentence-2' class='sentence'>These constructors shall not participate in overload resolution
unless <span class='texttt'>is_&shy;constructible_&shy;v&lt;D, decltype(d)&gt;</span> is <span class='texttt'>true</span><a class='hidden_link' href='#unique.ptr.single.ctor-11.sentence-2'>.</a></div></div></div><div class='para' id='unique.ptr.single.ctor-12'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8254'>#</a></div><div id='unique.ptr.single.ctor-12.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>get() == p</span><a class='hidden_link' href='#unique.ptr.single.ctor-12.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-12.sentence-2' class='sentence'><span class='texttt'>get_&shy;deleter()</span> returns a reference to the stored
deleter<a class='hidden_link' href='#unique.ptr.single.ctor-12.sentence-2'>.</a></div> <div id='unique.ptr.single.ctor-12.sentence-3' class='sentence'>If <span class='texttt'>D</span> is a reference type then <span class='texttt'>get_&shy;deleter()</span>
returns a reference to the lvalue <span class='texttt'>d</span><a class='hidden_link' href='#unique.ptr.single.ctor-12.sentence-3'>.</a></div></div></div><div class='para' id='unique.ptr.single.ctor-13'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8260'>#</a></div><div id='unique.ptr.single.ctor-13.sentence-1' class='sentence'><span class='textit'>Remarks:</span> If class template argument deduction (<a href='over.match.class.deduct'>[over.match.class.deduct]</a>)
would select a function template corresponding to either of these constructors,
then the program is ill-formed<a class='hidden_link' href='#unique.ptr.single.ctor-13.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.ctor-14'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8265'>#</a></div><div id='unique.ptr.single.ctor-14.example-1' class='example'>[<span style='white-space:nowrap'>â€‰</span><a class='example_link' href='#unique.ptr.single.ctor-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
D d;
unique_ptr&lt;int, D&gt; p1(new int, D());        <span class='comment'>// <span class='tcode_in_codeblock'>D</span> must be <span class='textit'>Cpp17MoveConstructible</span>
</span>unique_ptr&lt;int, D&gt; p2(new int, d);          <span class='comment'>// <span class='tcode_in_codeblock'>D</span> must be <span class='textit'>Cpp17CopyConstructible</span>
</span>unique_ptr&lt;int, D&amp;&gt; p3(new int, d);         <span class='comment'>// <span class='tcode_in_codeblock'>p3</span> holds a reference to <span class='tcode_in_codeblock'>d</span>
</span>unique_ptr&lt;int, const D&amp;&gt; p4(new int, D()); <span class='comment'>// error: rvalue deleter object combined
</span>                                            <span class='comment'>// with reference deleter type
</span></pre> â€”<span style='white-space:nowrap'>â€‰</span><i>end example</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:unique_ptr,constructor___'></a></span><div class='itemdecl' id='unique.ptr.single.ctor-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.ctor-itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'>unique_ptr(unique_ptr&amp;&amp; u) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.ctor-15'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8284'>#</a></div><div id='unique.ptr.single.ctor-15.sentence-1' class='sentence'><span class='textit'>Requires:</span> If <span class='texttt'>D</span> is not a reference type,
<span class='texttt'>D</span> shall satisfy the <span class='textit'>Cpp17MoveConstructible</span>
requirements (Table <a href='utility.arg.requirements#tab:moveconstructible'>25</a>)<a class='hidden_link' href='#unique.ptr.single.ctor-15.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-15.sentence-2' class='sentence'>Construction
of the deleter from an rvalue of type <span class='texttt'>D</span> shall not
throw an exception<a class='hidden_link' href='#unique.ptr.single.ctor-15.sentence-2'>.</a></div></div></div><div class='para' id='unique.ptr.single.ctor-16'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8292'>#</a></div><div id='unique.ptr.single.ctor-16.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs a <span class='texttt'>unique_&shy;ptr</span> from
<span class='texttt'>u</span><a class='hidden_link' href='#unique.ptr.single.ctor-16.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-16.sentence-2' class='sentence'>If <span class='texttt'>D</span> is a reference type, this
deleter is copy constructed from <span class='texttt'>u</span>'s deleter; otherwise, this
deleter is move constructed from <span class='texttt'>u</span>'s deleter<a class='hidden_link' href='#unique.ptr.single.ctor-16.sentence-2'>.</a></div> <div id='unique.ptr.single.ctor-16.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#unique.ptr.single.ctor-16.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='unique.ptr.single.ctor-16.sentence-3' class='sentence'>The
construction of the deleter can be implemented with <span class='texttt'>std&#x200b;::&#x200b;forward&lt;D&gt;</span><a class='hidden_link' href='#unique.ptr.single.ctor-16.sentence-3'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div class='para' id='unique.ptr.single.ctor-17'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8299'>#</a></div><div id='unique.ptr.single.ctor-17.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>get()</span> yields the value <span class='texttt'>u.get()</span>
yielded before the construction<a class='hidden_link' href='#unique.ptr.single.ctor-17.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-17.sentence-2' class='sentence'><span class='texttt'>u.get() == nullptr</span><a class='hidden_link' href='#unique.ptr.single.ctor-17.sentence-2'>.</a></div> <div id='unique.ptr.single.ctor-17.sentence-3' class='sentence'><span class='texttt'>get_&shy;deleter()</span> returns a reference
to the stored deleter that was constructed from
<span class='texttt'>u.get_&shy;deleter()</span><a class='hidden_link' href='#unique.ptr.single.ctor-17.sentence-3'>.</a></div> <div id='unique.ptr.single.ctor-17.sentence-4' class='sentence'>If <span class='texttt'>D</span> is a reference type then
<span class='texttt'>get_&shy;deleter()</span> and <span class='texttt'>u.get_&shy;deleter()</span> both reference
the same lvalue deleter<a class='hidden_link' href='#unique.ptr.single.ctor-17.sentence-4'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:unique_ptr,constructor____'></a></span><div class='itemdecl' id='unique.ptr.single.ctor-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.ctor-itemdecl:5'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class U, class E&gt; unique_ptr(unique_ptr&lt;U, E&gt;&amp;&amp; u) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.ctor-18'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8315'>#</a></div><div id='unique.ptr.single.ctor-18.sentence-1' class='sentence'><span class='textit'>Requires:</span> If <span class='texttt'>E</span> is not a reference type,
construction of the deleter from an rvalue of type
<span class='texttt'>E</span> shall be well-formed and shall not throw an exception<a class='hidden_link' href='#unique.ptr.single.ctor-18.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-18.sentence-2' class='sentence'>Otherwise, <span class='texttt'>E</span> is a reference type and construction of the deleter from an
lvalue of type <span class='texttt'>E</span> shall be well-formed and shall not throw an exception<a class='hidden_link' href='#unique.ptr.single.ctor-18.sentence-2'>.</a></div></div></div><div class='para' id='unique.ptr.single.ctor-19'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8322'>#</a></div><div id='unique.ptr.single.ctor-19.sentence-1' class='sentence'><span class='textit'>Remarks:</span> This constructor shall not participate in overload resolution unless:</div><div id='unique.ptr.single.ctor-19.sentence-2' class='sentence'><ul class='itemize'><li id='unique.ptr.single.ctor-19.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.single.ctor-19.1'>(19.1)</a></div><div id='unique.ptr.single.ctor-19.1.sentence-1' class='sentence'><span class='texttt'>unique_&shy;ptr&lt;U, E&gt;&#x200b;::&#x200b;pointer</span> is implicitly convertible to <span class='texttt'>pointer</span>,</div></li><li id='unique.ptr.single.ctor-19.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.single.ctor-19.2'>(19.2)</a></div><div id='unique.ptr.single.ctor-19.2.sentence-1' class='sentence'><span class='texttt'>U</span> is not an array type, and</div></li><li id='unique.ptr.single.ctor-19.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.single.ctor-19.3'>(19.3)</a></div><div id='unique.ptr.single.ctor-19.3.sentence-1' class='sentence'>either <span class='texttt'>D</span> is a reference type and <span class='texttt'>E</span> is the same type as <span class='texttt'>D</span>, or
<span class='texttt'>D</span> is not a reference type and <span class='texttt'>E</span> is implicitly convertible to <span class='texttt'>D</span><a class='hidden_link' href='#unique.ptr.single.ctor-19.3.sentence-1'>.</a></div></li></ul></div></div></div><div class='para' id='unique.ptr.single.ctor-20'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8332'>#</a></div><div id='unique.ptr.single.ctor-20.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs a <span class='texttt'>unique_&shy;ptr</span> from <span class='texttt'>u</span><a class='hidden_link' href='#unique.ptr.single.ctor-20.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-20.sentence-2' class='sentence'>If <span class='texttt'>E</span> is a reference type, this deleter is copy constructed from
<span class='texttt'>u</span>'s deleter; otherwise, this deleter is move constructed from <span class='texttt'>u</span>'s
deleter<a class='hidden_link' href='#unique.ptr.single.ctor-20.sentence-2'>.</a></div> <div id='unique.ptr.single.ctor-20.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#unique.ptr.single.ctor-20.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='unique.ptr.single.ctor-20.sentence-3' class='sentence'>The deleter constructor can be implemented with
<span class='texttt'>std&#x200b;::&#x200b;forward&lt;E&gt;</span><a class='hidden_link' href='#unique.ptr.single.ctor-20.sentence-3'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div class='para' id='unique.ptr.single.ctor-21'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8339'>#</a></div><div id='unique.ptr.single.ctor-21.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>get()</span> yields the value <span class='texttt'>u.get()</span>
yielded before the construction<a class='hidden_link' href='#unique.ptr.single.ctor-21.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-21.sentence-2' class='sentence'><span class='texttt'>u.get() == nullptr</span><a class='hidden_link' href='#unique.ptr.single.ctor-21.sentence-2'>.</a></div> <div id='unique.ptr.single.ctor-21.sentence-3' class='sentence'><span class='texttt'>get_&shy;deleter()</span> returns a reference
to the stored deleter that was constructed from
<span class='texttt'>u.get_&shy;deleter()</span><a class='hidden_link' href='#unique.ptr.single.ctor-21.sentence-3'>.</a></div></div></div></div><div id='unique.ptr.single.dtor' class='section'><h4 ><a class='secnum' href='#unique.ptr.single.dtor' style='min-width:133pt'>19.11.1.2.2</a> Destructor <a class='abbr_ref' href='unique.ptr.single.dtor'>[unique.ptr.single.dtor]</a></h4><div id='lib:unique_ptr,destructor'>
<div class='itemdecl' id='unique.ptr.single.dtor-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.dtor-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>~unique_ptr();
</code></div>
</div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.dtor-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.dtor-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8356'>#</a></div><div id='unique.ptr.single.dtor-1.sentence-1' class='sentence'><span class='textit'>Requires:</span> The expression <span class='texttt'>get_&shy;deleter()(get())</span> shall be well-formed,
shall have well-defined behavior, and shall not throw exceptions<a class='hidden_link' href='#unique.ptr.single.dtor-1.sentence-1'>.</a></div> <div id='unique.ptr.single.dtor-1.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#unique.ptr.single.dtor-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='unique.ptr.single.dtor-1.sentence-2' class='sentence'>The
use of <span class='texttt'>default_&shy;delete</span> requires <span class='texttt'>T</span> to be a complete type<a class='hidden_link' href='#unique.ptr.single.dtor-1.sentence-2'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div class='para' id='unique.ptr.single.dtor-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.dtor-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8362'>#</a></div><div id='unique.ptr.single.dtor-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> If <span class='texttt'>get() == nullptr</span> there are no effects<a class='hidden_link' href='#unique.ptr.single.dtor-2.sentence-1'>.</a></div> <div id='unique.ptr.single.dtor-2.sentence-2' class='sentence'>Otherwise <span class='texttt'>get_&shy;deleter()(get())</span><a class='hidden_link' href='#unique.ptr.single.dtor-2.sentence-2'>.</a></div></div></div></div><div id='unique.ptr.single.asgn' class='section'><h4 ><a class='secnum' href='#unique.ptr.single.asgn' style='min-width:133pt'>19.11.1.2.3</a> Assignment <a class='abbr_ref' href='unique.ptr.single.asgn'>[unique.ptr.single.asgn]</a></h4><span class='indexparent'><a class='index' id='lib:operator=,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator='></a></span><div class='itemdecl' id='unique.ptr.single.asgn-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.asgn-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>unique_ptr&amp; operator=(unique_ptr&amp;&amp; u) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.asgn-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8375'>#</a></div><div id='unique.ptr.single.asgn-1.sentence-1' class='sentence'><span class='textit'>Requires:</span> If <span class='texttt'>D</span> is not a reference type, <span class='texttt'>D</span> shall satisfy the
<span class='textit'>Cpp17MoveAssignable</span> requirements (Table <a href='utility.arg.requirements#tab:moveassignable'>27</a>) and assignment
of the deleter from an rvalue of type <span class='texttt'>D</span> shall not throw an exception<a class='hidden_link' href='#unique.ptr.single.asgn-1.sentence-1'>.</a></div> <div id='unique.ptr.single.asgn-1.sentence-2' class='sentence'>Otherwise, <span class='texttt'>D</span> is a reference type;
<span class='texttt'>remove_&shy;reference_&shy;t&lt;D&gt;</span> shall satisfy the <span class='textit'>Cpp17CopyAssignable</span>
requirements and assignment of the deleter from an
lvalue of type <span class='texttt'>D</span> shall not throw an exception<a class='hidden_link' href='#unique.ptr.single.asgn-1.sentence-2'>.</a></div></div></div><div class='para' id='unique.ptr.single.asgn-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8384'>#</a></div><div id='unique.ptr.single.asgn-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> Calls <span class='texttt'>reset(u.release())</span> followed by
<span class='texttt'>get_&shy;deleter() = std&#x200b;::&#x200b;forward&lt;D&gt;(u.get_&shy;deleter())</span><a class='hidden_link' href='#unique.ptr.single.asgn-2.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.asgn-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8388'>#</a></div><div id='unique.ptr.single.asgn-3.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#unique.ptr.single.asgn-3.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.asgn-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8391'>#</a></div><div id='unique.ptr.single.asgn-4.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>u.get() == nullptr</span><a class='hidden_link' href='#unique.ptr.single.asgn-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator=,unique_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator=_'></a></span><div class='itemdecl' id='unique.ptr.single.asgn-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.asgn-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class U, class E&gt; unique_ptr&amp; operator=(unique_ptr&lt;U, E&gt;&amp;&amp; u) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.asgn-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8401'>#</a></div><div id='unique.ptr.single.asgn-5.sentence-1' class='sentence'><span class='textit'>Requires:</span> If <span class='texttt'>E</span> is not a reference type, assignment of the deleter from
an rvalue of type <span class='texttt'>E</span> shall be well-formed and shall not throw an exception<a class='hidden_link' href='#unique.ptr.single.asgn-5.sentence-1'>.</a></div> <div id='unique.ptr.single.asgn-5.sentence-2' class='sentence'>Otherwise, <span class='texttt'>E</span> is a reference type and assignment of the deleter from an lvalue
of type <span class='texttt'>E</span> shall be well-formed and shall not throw an exception<a class='hidden_link' href='#unique.ptr.single.asgn-5.sentence-2'>.</a></div></div></div><div class='para' id='unique.ptr.single.asgn-6'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8407'>#</a></div><div id='unique.ptr.single.asgn-6.sentence-1' class='sentence'><span class='textit'>Remarks:</span> This operator shall not participate in overload resolution unless:</div><div id='unique.ptr.single.asgn-6.sentence-2' class='sentence'><ul class='itemize'><li id='unique.ptr.single.asgn-6.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.single.asgn-6.1'>(6.1)</a></div><div id='unique.ptr.single.asgn-6.1.sentence-1' class='sentence'><span class='texttt'>unique_&shy;ptr&lt;U, E&gt;&#x200b;::&#x200b;pointer</span> is implicitly convertible to <span class='texttt'>pointer</span>, and</div></li><li id='unique.ptr.single.asgn-6.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.single.asgn-6.2'>(6.2)</a></div><div id='unique.ptr.single.asgn-6.2.sentence-1' class='sentence'><span class='texttt'>U</span> is not an array type, and</div></li><li id='unique.ptr.single.asgn-6.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.single.asgn-6.3'>(6.3)</a></div><div id='unique.ptr.single.asgn-6.3.sentence-1' class='sentence'><span class='texttt'>is_&shy;assignable_&shy;v&lt;D&amp;, E&amp;&amp;&gt;</span> is <span class='texttt'>true</span><a class='hidden_link' href='#unique.ptr.single.asgn-6.3.sentence-1'>.</a></div></li></ul></div></div></div><div class='para' id='unique.ptr.single.asgn-7'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8416'>#</a></div><div id='unique.ptr.single.asgn-7.sentence-1' class='sentence'><span class='textit'>Effects:</span> Calls <span class='texttt'>reset(u.release())</span> followed by
<span class='texttt'>get_&shy;deleter() = std&#x200b;::&#x200b;forward&lt;E&gt;(u.get_&shy;deleter())</span><a class='hidden_link' href='#unique.ptr.single.asgn-7.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.asgn-8'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8420'>#</a></div><div id='unique.ptr.single.asgn-8.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#unique.ptr.single.asgn-8.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.asgn-9'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8423'>#</a></div><div id='unique.ptr.single.asgn-9.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>u.get() == nullptr</span><a class='hidden_link' href='#unique.ptr.single.asgn-9.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator=,unique_ptr__'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator=__'></a></span><div class='itemdecl' id='unique.ptr.single.asgn-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.asgn-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>unique_ptr&amp; operator=(nullptr_t) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.asgn-10'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8433'>#</a></div><div id='unique.ptr.single.asgn-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> As if by <span class='texttt'>reset()</span><a class='hidden_link' href='#unique.ptr.single.asgn-10.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.asgn-11'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8436'>#</a></div><div id='unique.ptr.single.asgn-11.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>get() == nullptr</span><a class='hidden_link' href='#unique.ptr.single.asgn-11.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.asgn-12'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8439'>#</a></div><div id='unique.ptr.single.asgn-12.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#unique.ptr.single.asgn-12.sentence-1'>.</a></div></div></div></div><div id='unique.ptr.single.observers' class='section'><h4 ><a class='secnum' href='#unique.ptr.single.observers' style='min-width:133pt'>19.11.1.2.4</a> Observers <a class='abbr_ref' href='unique.ptr.single.observers'>[unique.ptr.single.observers]</a></h4><span class='indexparent'><a class='index' id='lib:operator*,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator*'></a></span><div class='itemdecl' id='unique.ptr.single.observers-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.observers-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>add_lvalue_reference_t&lt;T&gt; operator*() const;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.observers-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8451'>#</a></div><div id='unique.ptr.single.observers-1.sentence-1' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>get() != nullptr</span><a class='hidden_link' href='#unique.ptr.single.observers-1.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.observers-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8454'>#</a></div><div id='unique.ptr.single.observers-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*get()</span><a class='hidden_link' href='#unique.ptr.single.observers-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator->,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator->'></a></span><div class='itemdecl' id='unique.ptr.single.observers-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.observers-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>pointer operator-&gt;() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.observers-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8465'>#</a></div><div id='unique.ptr.single.observers-3.sentence-1' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>get() != nullptr</span><a class='hidden_link' href='#unique.ptr.single.observers-3.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.observers-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8468'>#</a></div><div id='unique.ptr.single.observers-4.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>get()</span><a class='hidden_link' href='#unique.ptr.single.observers-4.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.observers-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8471'>#</a></div><div id='unique.ptr.single.observers-5.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#unique.ptr.single.observers-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='unique.ptr.single.observers-5.sentence-1' class='sentence'>The use of this function typically requires that <span class='texttt'>T</span> be a complete type<a class='hidden_link' href='#unique.ptr.single.observers-5.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:get,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,get'></a></span><div class='itemdecl' id='unique.ptr.single.observers-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.observers-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>pointer get() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.observers-6'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8483'>#</a></div><div id='unique.ptr.single.observers-6.sentence-1' class='sentence'><span class='textit'>Returns:</span> The stored pointer<a class='hidden_link' href='#unique.ptr.single.observers-6.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:get_deleter,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,get_deleter'></a></span><div class='itemdecl' id='unique.ptr.single.observers-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.observers-itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'>deleter_type&amp; get_deleter() noexcept;
const deleter_type&amp; get_deleter() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.observers-7'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8494'>#</a></div><div id='unique.ptr.single.observers-7.sentence-1' class='sentence'><span class='textit'>Returns:</span> A reference to the stored deleter<a class='hidden_link' href='#unique.ptr.single.observers-7.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator_bool,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator_bool'></a></span><div class='itemdecl' id='unique.ptr.single.observers-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.observers-itemdecl:5'>ðŸ”—</a></div><code class='itemdeclcode'>explicit operator bool() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.observers-8'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8504'>#</a></div><div id='unique.ptr.single.observers-8.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>get() != nullptr</span><a class='hidden_link' href='#unique.ptr.single.observers-8.sentence-1'>.</a></div></div></div></div><div id='unique.ptr.single.modifiers' class='section'><h4 ><a class='secnum' href='#unique.ptr.single.modifiers' style='min-width:133pt'>19.11.1.2.5</a> Modifiers <a class='abbr_ref' href='unique.ptr.single.modifiers'>[unique.ptr.single.modifiers]</a></h4><span class='indexparent'><a class='index' id='lib:release,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,release'></a></span><div class='itemdecl' id='unique.ptr.single.modifiers-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.modifiers-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>pointer release() noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.modifiers-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8516'>#</a></div><div id='unique.ptr.single.modifiers-1.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>get() == nullptr</span><a class='hidden_link' href='#unique.ptr.single.modifiers-1.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.modifiers-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8519'>#</a></div><div id='unique.ptr.single.modifiers-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> The value <span class='texttt'>get()</span> had at the start of
the call to <span class='texttt'>release</span><a class='hidden_link' href='#unique.ptr.single.modifiers-2.sentence-1'>.</a></div></div></div><div id='lib:unique_ptr,reset'><div id='lib:reset,unique_ptr'>
<div class='itemdecl' id='unique.ptr.single.modifiers-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.modifiers-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>void reset(pointer p = pointer()) noexcept;
</code></div>
</div></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.modifiers-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8531'>#</a></div><div id='unique.ptr.single.modifiers-3.sentence-1' class='sentence'><span class='textit'>Requires:</span> The expression <span class='texttt'>get_&shy;deleter()(get())</span> shall be well-formed, shall have
well-defined behavior, and shall not throw exceptions<a class='hidden_link' href='#unique.ptr.single.modifiers-3.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.modifiers-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8535'>#</a></div><div id='unique.ptr.single.modifiers-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> Assigns <span class='texttt'>p</span> to the stored pointer, and then if and only if the old value of the
stored pointer, <span class='texttt'>old_&shy;p</span>, was not equal to <span class='texttt'>nullptr</span>, calls
<span class='texttt'>get_&shy;deleter()(old_&shy;p)</span><a class='hidden_link' href='#unique.ptr.single.modifiers-4.sentence-1'>.</a></div> <div id='unique.ptr.single.modifiers-4.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#unique.ptr.single.modifiers-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='unique.ptr.single.modifiers-4.sentence-2' class='sentence'>The order of these operations is significant
because the call to <span class='texttt'>get_&shy;deleter()</span> may destroy <span class='texttt'>*this</span><a class='hidden_link' href='#unique.ptr.single.modifiers-4.sentence-2'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div class='para' id='unique.ptr.single.modifiers-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8541'>#</a></div><div id='unique.ptr.single.modifiers-5.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>get() == p</span><a class='hidden_link' href='#unique.ptr.single.modifiers-5.sentence-1'>.</a></div> <div id='unique.ptr.single.modifiers-5.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#unique.ptr.single.modifiers-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='unique.ptr.single.modifiers-5.sentence-2' class='sentence'>The postcondition does not hold if the call to <span class='texttt'>get_&shy;deleter()</span>
destroys <span class='texttt'>*this</span> since <span class='texttt'>this-&gt;get()</span> is no longer a valid expression<a class='hidden_link' href='#unique.ptr.single.modifiers-5.sentence-2'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div id='lib:unique_ptr,swap'><div id='lib:swap,unique_ptr'>
<div class='itemdecl' id='unique.ptr.single.modifiers-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.single.modifiers-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>void swap(unique_ptr&amp; u) noexcept;
</code></div>
</div></div><div class='itemdescr'></div><div class='para' id='unique.ptr.single.modifiers-6'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8555'>#</a></div><div id='unique.ptr.single.modifiers-6.sentence-1' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>get_&shy;deleter()</span> shall be
<a href='swappable.requirements'>swappable</a> and shall
not throw an exception
under <span class='texttt'>swap</span><a class='hidden_link' href='#unique.ptr.single.modifiers-6.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.modifiers-7'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8561'>#</a></div><div id='unique.ptr.single.modifiers-7.sentence-1' class='sentence'><span class='textit'>Effects:</span> Invokes <span class='texttt'>swap</span> on the stored pointers and on the stored
deleters of <span class='texttt'>*this</span> and <span class='texttt'>u</span><a class='hidden_link' href='#unique.ptr.single.modifiers-7.sentence-1'>.</a></div></div></div></div></div><div id='unique.ptr.runtime' class='section'><h4 ><a class='secnum' href='#unique.ptr.runtime' style='min-width:118pt'>19.11.1.3</a> <span class='texttt'>unique_&shy;ptr</span> for array objects with a runtime length <a class='abbr_ref' href='unique.ptr.runtime'>[unique.ptr.runtime]</a></h4><span class='indexparent'><a class='index' id='lib:unique_ptr_'></a></span><pre class='codeblock'>
namespace std {
  template&lt;class T, class D&gt; class unique_ptr&lt;T[], D&gt; {
  public:
    using pointer      = <span class='textit'><span class='texttt'>see below</span></span>;
    using element_type = T;
    using deleter_type = D;

    <span class='comment'>// <a href='#unique.ptr.runtime.ctor'>[unique.ptr.runtime.ctor]</a>, constructors
</span>    constexpr unique_ptr() noexcept;
    template&lt;class U&gt; explicit unique_ptr(U p) noexcept;
    template&lt;class U&gt; unique_ptr(U p, <span class='textit'><span class='texttt'>see below</span></span> d) noexcept;
    template&lt;class U&gt; unique_ptr(U p, <span class='textit'><span class='texttt'>see below</span></span> d) noexcept;
    unique_ptr(unique_ptr&amp;&amp; u) noexcept;
    template&lt;class U, class E&gt;
      unique_ptr(unique_ptr&lt;U, E&gt;&amp;&amp; u) noexcept;
    constexpr unique_ptr(nullptr_t) noexcept;

    <span class='comment'>// destructor
</span>    ~unique_ptr();

    <span class='comment'>// assignment
</span>    unique_ptr&amp; operator=(unique_ptr&amp;&amp; u) noexcept;
    template&lt;class U, class E&gt;
      unique_ptr&amp; operator=(unique_ptr&lt;U, E&gt;&amp;&amp; u) noexcept;
    unique_ptr&amp; operator=(nullptr_t) noexcept;

    <span class='comment'>// <a href='#unique.ptr.runtime.observers'>[unique.ptr.runtime.observers]</a>, observers
</span>    T&amp; operator[](size_t i) const;
    pointer get() const noexcept;
    deleter_type&amp; get_deleter() noexcept;
    const deleter_type&amp; get_deleter() const noexcept;
    explicit operator bool() const noexcept;

    <span class='comment'>// <a href='#unique.ptr.runtime.modifiers'>[unique.ptr.runtime.modifiers]</a>, modifiers
</span>    pointer release() noexcept;
    template&lt;class U&gt; void reset(U p) noexcept;
    void reset(nullptr_t = nullptr) noexcept;
    void swap(unique_ptr&amp; u) noexcept;

    <span class='comment'>// disable copy from lvalue
</span>    unique_ptr(const unique_ptr&amp;) = delete;
    unique_ptr&amp; operator=(const unique_ptr&amp;) = delete;
  };
}</pre><div class='para' id='unique.ptr.runtime-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8616'>#</a></div><div id='unique.ptr.runtime-1.sentence-1' class='sentence'>A specialization for array types is provided with a slightly altered
interface<a class='hidden_link' href='#unique.ptr.runtime-1.sentence-1'>.</a></div><div id='unique.ptr.runtime-1.sentence-2' class='sentence'><ul class='itemize'><li id='unique.ptr.runtime-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#unique.ptr.runtime-1.1'>(1.1)</a></div><div id='unique.ptr.runtime-1.1.sentence-1' class='sentence'>Conversions between different types of
<span class='texttt'>unique_&shy;ptr&lt;T[], D&gt;</span>
that would be disallowed for the corresponding pointer-to-array types,
and conversions to or from the non-array forms of
<span class='texttt'>unique_&shy;ptr</span>, produce an ill-formed program<a class='hidden_link' href='#unique.ptr.runtime-1.1.sentence-1'>.</a></div></li><li id='unique.ptr.runtime-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#unique.ptr.runtime-1.2'>(1.2)</a></div><div id='unique.ptr.runtime-1.2.sentence-1' class='sentence'>Pointers to types derived from <span class='texttt'>T</span> are
rejected by the constructors, and by <span class='texttt'>reset</span><a class='hidden_link' href='#unique.ptr.runtime-1.2.sentence-1'>.</a></div></li><li id='unique.ptr.runtime-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#unique.ptr.runtime-1.3'>(1.3)</a></div><div id='unique.ptr.runtime-1.3.sentence-1' class='sentence'>The observers <span class='texttt'>operator*</span> and
<span class='texttt'>operator-&gt;</span> are not provided<a class='hidden_link' href='#unique.ptr.runtime-1.3.sentence-1'>.</a></div></li><li id='unique.ptr.runtime-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#unique.ptr.runtime-1.4'>(1.4)</a></div><div id='unique.ptr.runtime-1.4.sentence-1' class='sentence'>The indexing observer <span class='texttt'>operator[]</span> is provided<a class='hidden_link' href='#unique.ptr.runtime-1.4.sentence-1'>.</a></div></li><li id='unique.ptr.runtime-1.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#unique.ptr.runtime-1.5'>(1.5)</a></div><div id='unique.ptr.runtime-1.5.sentence-1' class='sentence'>The default deleter will call <span class='texttt'>delete[]</span><a class='hidden_link' href='#unique.ptr.runtime-1.5.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='unique.ptr.runtime-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8638'>#</a></div><div id='unique.ptr.runtime-2.sentence-1' class='sentence'>Descriptions are provided below only for members that
differ from the primary template<a class='hidden_link' href='#unique.ptr.runtime-2.sentence-1'>.</a></div></div><div class='para' id='unique.ptr.runtime-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8642'>#</a></div><div id='unique.ptr.runtime-3.sentence-1' class='sentence'>The template argument <span class='texttt'>T</span> shall be a complete type<a class='hidden_link' href='#unique.ptr.runtime-3.sentence-1'>.</a></div></div><div id='unique.ptr.runtime.ctor' class='section'><h4 ><a class='secnum' href='#unique.ptr.runtime.ctor' style='min-width:133pt'>19.11.1.3.1</a> Constructors <a class='abbr_ref' href='unique.ptr.runtime.ctor'>[unique.ptr.runtime.ctor]</a></h4><span class='indexparent'><a class='index' id='lib:unique_ptr,constructor_____'></a></span><div class='itemdecl' id='unique.ptr.runtime.ctor-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.runtime.ctor-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class U&gt; explicit unique_ptr(U p) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.runtime.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.ctor-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8653'>#</a></div><div id='unique.ptr.runtime.ctor-1.sentence-1' class='sentence'>This constructor behaves the same as
the constructor in the primary template that
takes a single parameter of type <span class='texttt'>pointer</span>
except that it additionally
shall not participate in overload resolution unless</div><div id='unique.ptr.runtime.ctor-1.sentence-2' class='sentence'><ul class='itemize'><li id='unique.ptr.runtime.ctor-1.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.ctor-1.1'>(1.1)</a></div><div id='unique.ptr.runtime.ctor-1.1.sentence-1' class='sentence'><span class='texttt'>U</span> is the same type as <span class='texttt'>pointer</span>, or</div></li><li id='unique.ptr.runtime.ctor-1.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.ctor-1.2'>(1.2)</a></div><div id='unique.ptr.runtime.ctor-1.2.sentence-1' class='sentence'><span class='texttt'>pointer</span> is the same type as <span class='texttt'>element_&shy;type*</span>,
<span class='texttt'>U</span> is a pointer type <span class='texttt'>V*</span>, and
<span class='texttt'>V(*)[]</span> is convertible to <span class='texttt'>element_&shy;type(*)[]</span><a class='hidden_link' href='#unique.ptr.runtime.ctor-1.2.sentence-1'>.</a></div></li></ul></div></div></div><span class='indexparent'><a class='index' id='lib:unique_ptr,constructor______'></a></span><div class='itemdecl' id='unique.ptr.runtime.ctor-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.runtime.ctor-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class U&gt; unique_ptr(U p, <span class='textit'><span class='texttt'>see below</span></span> d) noexcept;
template&lt;class U&gt; unique_ptr(U p, <span class='textit'><span class='texttt'>see below</span></span> d) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.runtime.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.ctor-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8675'>#</a></div><div id='unique.ptr.runtime.ctor-2.sentence-1' class='sentence'>These constructors behave the same as
the constructors in the primary template that
take a parameter of type <span class='texttt'>pointer</span> and a second parameter
except that they
shall not participate in overload resolution unless either</div><div id='unique.ptr.runtime.ctor-2.sentence-2' class='sentence'><ul class='itemize'><li id='unique.ptr.runtime.ctor-2.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.ctor-2.1'>(2.1)</a></div><div id='unique.ptr.runtime.ctor-2.1.sentence-1' class='sentence'><span class='texttt'>U</span> is the same type as <span class='texttt'>pointer</span>,</div></li><li id='unique.ptr.runtime.ctor-2.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.ctor-2.2'>(2.2)</a></div><div id='unique.ptr.runtime.ctor-2.2.sentence-1' class='sentence'><span class='texttt'>U</span> is <span class='texttt'>nullptr_&shy;t</span>, or</div></li><li id='unique.ptr.runtime.ctor-2.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.ctor-2.3'>(2.3)</a></div><div id='unique.ptr.runtime.ctor-2.3.sentence-1' class='sentence'><span class='texttt'>pointer</span> is the same type as <span class='texttt'>element_&shy;type*</span>,
      <span class='texttt'>U</span> is a pointer type <span class='texttt'>V*</span>, and
      <span class='texttt'>V(*)[]</span> is convertible to <span class='texttt'>element_&shy;type(*)[]</span><a class='hidden_link' href='#unique.ptr.runtime.ctor-2.3.sentence-1'>.</a></div></li></ul></div></div></div><span class='indexparent'><a class='index' id='lib:unique_ptr,constructor_______'></a></span><div class='itemdecl' id='unique.ptr.runtime.ctor-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.runtime.ctor-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class U, class E&gt; unique_ptr(unique_ptr&lt;U, E&gt;&amp;&amp; u) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.runtime.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.ctor-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8697'>#</a></div><div id='unique.ptr.runtime.ctor-3.sentence-1' class='sentence'>This constructor behaves the same as in the primary template,
except that it shall not participate in overload resolution
unless all of the following conditions hold,
where <span class='texttt'>UP</span> is <span class='texttt'>unique_&shy;ptr&lt;U, E&gt;</span>:</div><div id='unique.ptr.runtime.ctor-3.sentence-2' class='sentence'><ul class='itemize'><li id='unique.ptr.runtime.ctor-3.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.ctor-3.1'>(3.1)</a></div><div id='unique.ptr.runtime.ctor-3.1.sentence-1' class='sentence'><span class='texttt'>U</span> is an array type, and</div></li><li id='unique.ptr.runtime.ctor-3.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.ctor-3.2'>(3.2)</a></div><div id='unique.ptr.runtime.ctor-3.2.sentence-1' class='sentence'><span class='texttt'>pointer</span> is the same type as <span class='texttt'>element_&shy;type*</span>, and</div></li><li id='unique.ptr.runtime.ctor-3.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.ctor-3.3'>(3.3)</a></div><div id='unique.ptr.runtime.ctor-3.3.sentence-1' class='sentence'><span class='texttt'>UP&#x200b;::&#x200b;pointer</span> is the same type as <span class='texttt'>UP&#x200b;::&#x200b;element_&shy;type*</span>, and</div></li><li id='unique.ptr.runtime.ctor-3.4'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.ctor-3.4'>(3.4)</a></div><div id='unique.ptr.runtime.ctor-3.4.sentence-1' class='sentence'><span class='texttt'>UP&#x200b;::&#x200b;element_&shy;type(*)[]</span> is convertible to <span class='texttt'>element_&shy;type(*)[]</span>, and</div></li><li id='unique.ptr.runtime.ctor-3.5'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.ctor-3.5'>(3.5)</a></div><div id='unique.ptr.runtime.ctor-3.5.sentence-1' class='sentence'>either <span class='texttt'>D</span> is a reference type and <span class='texttt'>E</span> is the same type as <span class='texttt'>D</span>,
      or <span class='texttt'>D</span> is not a reference type and <span class='texttt'>E</span> is implicitly convertible to <span class='texttt'>D</span><a class='hidden_link' href='#unique.ptr.runtime.ctor-3.5.sentence-1'>.</a></div></li></ul></div><div id='unique.ptr.runtime.ctor-3.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#unique.ptr.runtime.ctor-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='unique.ptr.runtime.ctor-3.sentence-3' class='sentence'>This replaces the overload-resolution specification of the primary template</div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div></div><div id='unique.ptr.runtime.asgn' class='section'><h4 ><a class='secnum' href='#unique.ptr.runtime.asgn' style='min-width:133pt'>19.11.1.3.2</a> Assignment <a class='abbr_ref' href='unique.ptr.runtime.asgn'>[unique.ptr.runtime.asgn]</a></h4><span class='indexparent'><a class='index' id='lib:operator=,unique_ptr___'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator=___'></a></span><div class='itemdecl' id='unique.ptr.runtime.asgn-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.runtime.asgn-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class U, class E&gt; unique_ptr&amp; operator=(unique_ptr&lt;U, E&gt;&amp;&amp; u)noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.runtime.asgn-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.asgn-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8725'>#</a></div><div id='unique.ptr.runtime.asgn-1.sentence-1' class='sentence'>This operator behaves the same as in the primary template,
except that it shall not participate in overload resolution
unless all of the following conditions hold,
where <span class='texttt'>UP</span> is <span class='texttt'>unique_&shy;ptr&lt;U, E&gt;</span>:</div><div id='unique.ptr.runtime.asgn-1.sentence-2' class='sentence'><ul class='itemize'><li id='unique.ptr.runtime.asgn-1.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.asgn-1.1'>(1.1)</a></div><div id='unique.ptr.runtime.asgn-1.1.sentence-1' class='sentence'><span class='texttt'>U</span> is an array type, and</div></li><li id='unique.ptr.runtime.asgn-1.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.asgn-1.2'>(1.2)</a></div><div id='unique.ptr.runtime.asgn-1.2.sentence-1' class='sentence'><span class='texttt'>pointer</span> is the same type as <span class='texttt'>element_&shy;type*</span>, and</div></li><li id='unique.ptr.runtime.asgn-1.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.asgn-1.3'>(1.3)</a></div><div id='unique.ptr.runtime.asgn-1.3.sentence-1' class='sentence'><span class='texttt'>UP&#x200b;::&#x200b;pointer</span> is the same type as <span class='texttt'>UP&#x200b;::&#x200b;element_&shy;type*</span>, and</div></li><li id='unique.ptr.runtime.asgn-1.4'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.asgn-1.4'>(1.4)</a></div><div id='unique.ptr.runtime.asgn-1.4.sentence-1' class='sentence'><span class='texttt'>UP&#x200b;::&#x200b;element_&shy;type(*)[]</span> is convertible to <span class='texttt'>element_&shy;type(*)[]</span>, and</div></li><li id='unique.ptr.runtime.asgn-1.5'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.asgn-1.5'>(1.5)</a></div><div id='unique.ptr.runtime.asgn-1.5.sentence-1' class='sentence'><span class='texttt'>is_&shy;assignable_&shy;v&lt;D&amp;, E&amp;&amp;&gt;</span> is <span class='texttt'>true</span><a class='hidden_link' href='#unique.ptr.runtime.asgn-1.5.sentence-1'>.</a></div></li></ul></div><div id='unique.ptr.runtime.asgn-1.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#unique.ptr.runtime.asgn-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='unique.ptr.runtime.asgn-1.sentence-3' class='sentence'>This replaces the overload-resolution specification of the primary template</div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div></div><div id='unique.ptr.runtime.observers' class='section'><h4 ><a class='secnum' href='#unique.ptr.runtime.observers' style='min-width:133pt'>19.11.1.3.3</a> Observers <a class='abbr_ref' href='unique.ptr.runtime.observers'>[unique.ptr.runtime.observers]</a></h4><span class='indexparent'><a class='index' id='lib:operator[],unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator[]'></a></span><div class='itemdecl' id='unique.ptr.runtime.observers-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.runtime.observers-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>T&amp; operator[](size_t i) const;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.runtime.observers-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.observers-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8752'>#</a></div><div id='unique.ptr.runtime.observers-1.sentence-1' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>i &lt;</span> the
number of elements in the array to which
the stored pointer points<a class='hidden_link' href='#unique.ptr.runtime.observers-1.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.runtime.observers-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.observers-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8757'>#</a></div><div id='unique.ptr.runtime.observers-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>get()[i]</span><a class='hidden_link' href='#unique.ptr.runtime.observers-2.sentence-1'>.</a></div></div></div></div><div id='unique.ptr.runtime.modifiers' class='section'><h4 ><a class='secnum' href='#unique.ptr.runtime.modifiers' style='min-width:133pt'>19.11.1.3.4</a> Modifiers <a class='abbr_ref' href='unique.ptr.runtime.modifiers'>[unique.ptr.runtime.modifiers]</a></h4><span class='indexparent'><a class='index' id='lib:reset,unique_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,reset_'></a></span><div class='itemdecl' id='unique.ptr.runtime.modifiers-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.runtime.modifiers-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>void reset(nullptr_t p = nullptr) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.runtime.modifiers-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.modifiers-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8769'>#</a></div><div id='unique.ptr.runtime.modifiers-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>reset(pointer())</span><a class='hidden_link' href='#unique.ptr.runtime.modifiers-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:reset,unique_ptr__'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,reset__'></a></span><div class='itemdecl' id='unique.ptr.runtime.modifiers-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.runtime.modifiers-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class U&gt; void reset(U p) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.runtime.modifiers-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.modifiers-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8779'>#</a></div><div id='unique.ptr.runtime.modifiers-2.sentence-1' class='sentence'>This function behaves the same as
the <span class='texttt'>reset</span> member of the primary template,
except that it shall not participate in overload resolution
unless either</div><div id='unique.ptr.runtime.modifiers-2.sentence-2' class='sentence'><ul class='itemize'><li id='unique.ptr.runtime.modifiers-2.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.modifiers-2.1'>(2.1)</a></div><div id='unique.ptr.runtime.modifiers-2.1.sentence-1' class='sentence'><span class='texttt'>U</span> is the same type as <span class='texttt'>pointer</span>, or</div></li><li id='unique.ptr.runtime.modifiers-2.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#unique.ptr.runtime.modifiers-2.2'>(2.2)</a></div><div id='unique.ptr.runtime.modifiers-2.2.sentence-1' class='sentence'><span class='texttt'>pointer</span> is the same type as <span class='texttt'>element_&shy;type*</span>,
      <span class='texttt'>U</span> is a pointer type <span class='texttt'>V*</span>, and
      <span class='texttt'>V(*)[]</span> is convertible to <span class='texttt'>element_&shy;type(*)[]</span><a class='hidden_link' href='#unique.ptr.runtime.modifiers-2.2.sentence-1'>.</a></div></li></ul></div></div></div></div></div><div id='unique.ptr.create' class='section'><h4 ><a class='secnum' href='#unique.ptr.create' style='min-width:118pt'>19.11.1.4</a> Creation <a class='abbr_ref' href='unique.ptr.create'>[unique.ptr.create]</a></h4><span class='indexparent'><a class='index' id='lib:make_unique'></a></span><div class='itemdecl' id='unique.ptr.create-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.create-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class... Args&gt; unique_ptr&lt;T&gt; make_unique(Args&amp;&amp;... args);
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.create-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8801'>#</a></div><div id='unique.ptr.create-1.sentence-1' class='sentence'><span class='textit'>Remarks:</span> This function shall not participate in overload resolution unless <span class='texttt'>T</span> is not an array<a class='hidden_link' href='#unique.ptr.create-1.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.create-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8804'>#</a></div><div id='unique.ptr.create-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>unique_&shy;ptr&lt;T&gt;(new T(std&#x200b;::&#x200b;forward&lt;Args&gt;(args)...))</span><a class='hidden_link' href='#unique.ptr.create-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:make_unique_'></a></span><div class='itemdecl' id='unique.ptr.create-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.create-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt; unique_ptr&lt;T&gt; make_unique(size_t n);
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.create-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8815'>#</a></div><div id='unique.ptr.create-3.sentence-1' class='sentence'><span class='textit'>Remarks:</span> This function shall not participate in overload resolution unless <span class='texttt'>T</span> is an array of unknown bound<a class='hidden_link' href='#unique.ptr.create-3.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.create-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8818'>#</a></div><div id='unique.ptr.create-4.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>unique_&shy;ptr&lt;T&gt;(new remove_&shy;extent_&shy;t&lt;T&gt;[n]())</span><a class='hidden_link' href='#unique.ptr.create-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:make_unique__'></a></span><div class='itemdecl' id='unique.ptr.create-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.create-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class... Args&gt; <span class='textit'><span class='texttt'>unspecified</span></span> make_unique(Args&amp;&amp;...) = delete;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.create-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8829'>#</a></div><div id='unique.ptr.create-5.sentence-1' class='sentence'><span class='textit'>Remarks:</span> This function shall not participate in overload resolution unless <span class='texttt'>T</span> is an array of known bound<a class='hidden_link' href='#unique.ptr.create-5.sentence-1'>.</a></div></div></div></div><div id='unique.ptr.special' class='section'><h4 ><a class='secnum' href='#unique.ptr.special' style='min-width:118pt'>19.11.1.5</a> Specialized algorithms <a class='abbr_ref' href='unique.ptr.special'>[unique.ptr.special]</a></h4><span class='indexparent'><a class='index' id='lib:swap(unique_ptr&,_unique_ptr&)'></a></span><div class='itemdecl' id='unique.ptr.special-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.special-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class D&gt; void swap(unique_ptr&lt;T, D&gt;&amp; x, unique_ptr&lt;T, D&gt;&amp; y) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.special-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8842'>#</a></div><div id='unique.ptr.special-1.sentence-1' class='sentence'><span class='textit'>Remarks:</span> This function shall not participate in overload resolution
unless <span class='texttt'>is_&shy;swappable_&shy;v&lt;D&gt;</span> is <span class='texttt'>true</span><a class='hidden_link' href='#unique.ptr.special-1.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.special-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8846'>#</a></div><div id='unique.ptr.special-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> Calls <span class='texttt'>x.swap(y)</span><a class='hidden_link' href='#unique.ptr.special-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator==,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator=='></a></span><div class='itemdecl' id='unique.ptr.special-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.special-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T1, class D1, class T2, class D2&gt;
  bool operator==(const unique_ptr&lt;T1, D1&gt;&amp; x, const unique_ptr&lt;T2, D2&gt;&amp; y);
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.special-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8857'>#</a></div><div id='unique.ptr.special-3.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>x.get() == y.get()</span><a class='hidden_link' href='#unique.ptr.special-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator!=,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator!='></a></span><div class='itemdecl' id='unique.ptr.special-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.special-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T1, class D1, class T2, class D2&gt;
  bool operator!=(const unique_ptr&lt;T1, D1&gt;&amp; x, const unique_ptr&lt;T2, D2&gt;&amp; y);
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.special-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8868'>#</a></div><div id='unique.ptr.special-4.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>x.get() != y.get()</span><a class='hidden_link' href='#unique.ptr.special-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator<,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator<'></a></span><div class='itemdecl' id='unique.ptr.special-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.special-itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T1, class D1, class T2, class D2&gt;
  bool operator&lt;(const unique_ptr&lt;T1, D1&gt;&amp; x, const unique_ptr&lt;T2, D2&gt;&amp; y);
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.special-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8879'>#</a></div><div id='unique.ptr.special-5.sentence-1' class='sentence'><span class='textit'>Requires:</span> Let <span class='texttt'>CT</span> denote
<pre class='codeblock'>
common_type_t&lt;typename unique_ptr&lt;T1, D1&gt;::pointer,
              typename unique_ptr&lt;T2, D2&gt;::pointer&gt;</pre>
Then the specialization
<span class='texttt'>less&lt;CT&gt;</span> shall be a
<a href='function.objects#def:function_object,type'>function object type</a> that
induces a <a href='alg.sorting'>strict weak ordering</a> on the pointer values<a class='hidden_link' href='#unique.ptr.special-5.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.special-6'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8890'>#</a></div><div id='unique.ptr.special-6.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>less&lt;CT&gt;()(x.get(), y.get())</span><a class='hidden_link' href='#unique.ptr.special-6.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.special-7'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8893'>#</a></div><div id='unique.ptr.special-7.sentence-1' class='sentence'><span class='textit'>Remarks:</span> If <span class='texttt'>unique_&shy;ptr&lt;T1, D1&gt;&#x200b;::&#x200b;pointer</span> is not implicitly convertible
to <span class='texttt'>CT</span> or <span class='texttt'>unique_&shy;ptr&lt;T2, D2&gt;&#x200b;::&#x200b;pointer</span> is not implicitly
convertible to <span class='texttt'>CT</span>, the program is ill-formed<a class='hidden_link' href='#unique.ptr.special-7.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator>,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator>'></a></span><div class='itemdecl' id='unique.ptr.special-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.special-itemdecl:5'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T1, class D1, class T2, class D2&gt;
  bool operator&gt;(const unique_ptr&lt;T1, D1&gt;&amp; x, const unique_ptr&lt;T2, D2&gt;&amp; y);
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.special-8'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8906'>#</a></div><div id='unique.ptr.special-8.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>y &lt; x</span><a class='hidden_link' href='#unique.ptr.special-8.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator<=,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator<='></a></span><div class='itemdecl' id='unique.ptr.special-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.special-itemdecl:6'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T1, class D1, class T2, class D2&gt;
  bool operator&lt;=(const unique_ptr&lt;T1, D1&gt;&amp; x, const unique_ptr&lt;T2, D2&gt;&amp; y);
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.special-9'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8917'>#</a></div><div id='unique.ptr.special-9.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>!(y &lt; x)</span><a class='hidden_link' href='#unique.ptr.special-9.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator>=,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator>='></a></span><div class='itemdecl' id='unique.ptr.special-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.special-itemdecl:7'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T1, class D1, class T2, class D2&gt;
  bool operator&gt;=(const unique_ptr&lt;T1, D1&gt;&amp; x, const unique_ptr&lt;T2, D2&gt;&amp; y);
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.special-10'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8928'>#</a></div><div id='unique.ptr.special-10.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>!(x &lt; y)</span><a class='hidden_link' href='#unique.ptr.special-10.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator==,unique_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator==_'></a></span><div class='itemdecl' id='unique.ptr.special-itemdecl:8'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.special-itemdecl:8'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class D&gt;
  bool operator==(const unique_ptr&lt;T, D&gt;&amp; x, nullptr_t) noexcept;
template&lt;class T, class D&gt;
  bool operator==(nullptr_t, const unique_ptr&lt;T, D&gt;&amp; x) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.special-11'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8941'>#</a></div><div id='unique.ptr.special-11.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>!x</span><a class='hidden_link' href='#unique.ptr.special-11.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator!=,unique_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator!=_'></a></span><div class='itemdecl' id='unique.ptr.special-itemdecl:9'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.special-itemdecl:9'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class D&gt;
  bool operator!=(const unique_ptr&lt;T, D&gt;&amp; x, nullptr_t) noexcept;
template&lt;class T, class D&gt;
  bool operator!=(nullptr_t, const unique_ptr&lt;T, D&gt;&amp; x) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.special-12'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8954'>#</a></div><div id='unique.ptr.special-12.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>(bool)x</span><a class='hidden_link' href='#unique.ptr.special-12.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator<,unique_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator<_'></a></span><div class='itemdecl' id='unique.ptr.special-itemdecl:10'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.special-itemdecl:10'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class D&gt;
  bool operator&lt;(const unique_ptr&lt;T, D&gt;&amp; x, nullptr_t);
template&lt;class T, class D&gt;
  bool operator&lt;(nullptr_t, const unique_ptr&lt;T, D&gt;&amp; x);
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.special-13'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8967'>#</a></div><div id='unique.ptr.special-13.sentence-1' class='sentence'><span class='textit'>Requires:</span> The specialization <span class='texttt'>less&lt;unique_&shy;ptr&lt;T, D&gt;&#x200b;::&#x200b;pointer&gt;</span> shall be a
<a href='function.objects#def:function_object,type'>function object type</a>
that induces a <a href='alg.sorting'>strict weak ordering</a> on the pointer values<a class='hidden_link' href='#unique.ptr.special-13.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.special-14'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8972'>#</a></div><div id='unique.ptr.special-14.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
The first function template returns
<pre class='codeblock'>
less&lt;unique_ptr&lt;T, D&gt;::pointer&gt;()(x.get(), nullptr)</pre>
The second function template returns
<pre class='codeblock'>
less&lt;unique_ptr&lt;T, D&gt;::pointer&gt;()(nullptr, x.get())</pre></div></div></div><span class='indexparent'><a class='index' id='lib:operator>,unique_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator>_'></a></span><div class='itemdecl' id='unique.ptr.special-itemdecl:11'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.special-itemdecl:11'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class D&gt;
  bool operator&gt;(const unique_ptr&lt;T, D&gt;&amp; x, nullptr_t);
template&lt;class T, class D&gt;
  bool operator&gt;(nullptr_t, const unique_ptr&lt;T, D&gt;&amp; x);
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.special-15'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L8993'>#</a></div><div id='unique.ptr.special-15.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
The first function template returns <span class='texttt'>nullptr &lt; x</span><a class='hidden_link' href='#unique.ptr.special-15.sentence-1'>.</a></div> <div id='unique.ptr.special-15.sentence-2' class='sentence'>The second function template returns <span class='texttt'>x &lt; nullptr</span><a class='hidden_link' href='#unique.ptr.special-15.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator<=,unique_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator<=_'></a></span><div class='itemdecl' id='unique.ptr.special-itemdecl:12'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.special-itemdecl:12'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class D&gt;
  bool operator&lt;=(const unique_ptr&lt;T, D&gt;&amp; x, nullptr_t);
template&lt;class T, class D&gt;
  bool operator&lt;=(nullptr_t, const unique_ptr&lt;T, D&gt;&amp; x);
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.special-16'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9008'>#</a></div><div id='unique.ptr.special-16.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
The first function template returns <span class='texttt'>!(nullptr &lt; x)</span><a class='hidden_link' href='#unique.ptr.special-16.sentence-1'>.</a></div> <div id='unique.ptr.special-16.sentence-2' class='sentence'>The second function template returns <span class='texttt'>!(x &lt; nullptr)</span><a class='hidden_link' href='#unique.ptr.special-16.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator>=,unique_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator>=_'></a></span><div class='itemdecl' id='unique.ptr.special-itemdecl:13'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.special-itemdecl:13'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class D&gt;
  bool operator&gt;=(const unique_ptr&lt;T, D&gt;&amp; x, nullptr_t);
template&lt;class T, class D&gt;
  bool operator&gt;=(nullptr_t, const unique_ptr&lt;T, D&gt;&amp; x);
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.special-17'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9023'>#</a></div><div id='unique.ptr.special-17.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
The first function template returns <span class='texttt'>!(x &lt; nullptr)</span><a class='hidden_link' href='#unique.ptr.special-17.sentence-1'>.</a></div> <div id='unique.ptr.special-17.sentence-2' class='sentence'>The second function template returns <span class='texttt'>!(nullptr &lt; x)</span><a class='hidden_link' href='#unique.ptr.special-17.sentence-2'>.</a></div></div></div></div><div id='unique.ptr.io' class='section'><h4 ><a class='secnum' href='#unique.ptr.io' style='min-width:118pt'>19.11.1.6</a> I/O <a class='abbr_ref' href='unique.ptr.io'>[unique.ptr.io]</a></h4><span class='indexparent'><a class='index' id='lib:operator<<,unique_ptr'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr,operator<<'></a></span><div class='itemdecl' id='unique.ptr.io-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#unique.ptr.io-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class E, class T, class Y, class D&gt;
  basic_ostream&lt;E, T&gt;&amp; operator&lt;&lt;(basic_ostream&lt;E, T&gt;&amp; os, const unique_ptr&lt;Y, D&gt;&amp; p);
</code></div><div class='itemdescr'></div><div class='para' id='unique.ptr.io-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.io-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9038'>#</a></div><div id='unique.ptr.io-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to: <span class='texttt'>os &lt;&lt; p.get();</span></div></div></div><div class='para' id='unique.ptr.io-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.io-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9041'>#</a></div><div id='unique.ptr.io-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>os</span><a class='hidden_link' href='#unique.ptr.io-2.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.io-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.io-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9044'>#</a></div><div id='unique.ptr.io-3.sentence-1' class='sentence'><span class='textit'>Remarks:</span> This function shall not participate in overload resolution
unless <span class='texttt'>os &lt;&lt; p.get()</span> is a valid expression<a class='hidden_link' href='#unique.ptr.io-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id=':smart_pointers'></a></span></div></div><div id='util.smartptr.weak.bad' class='section'><h3 ><a class='secnum' href='#util.smartptr.weak.bad' style='min-width:103pt'>19.11.2</a> Class <span class='texttt'>bad_&shy;weak_&shy;ptr</span> <a class='abbr_ref' href='util.smartptr.weak.bad'>[util.smartptr.weak.bad]</a></h3><span class='indexparent'><a class='index' id='lib:bad_weak_ptr'></a></span><pre class='codeblock'>
namespace std {
  class bad_weak_ptr : public exception {
  public:
    bad_weak_ptr() noexcept;
  };
}</pre><div class='para' id='util.smartptr.weak.bad-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.bad-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9061'>#</a></div><div id='util.smartptr.weak.bad-1.sentence-1' class='sentence'>An exception of type <span class='texttt'>bad_&shy;weak_&shy;ptr</span> is thrown by the <span class='texttt'>shared_&shy;ptr</span>
constructor taking a <span class='texttt'>weak_&shy;ptr</span><a class='hidden_link' href='#util.smartptr.weak.bad-1.sentence-1'>.</a></div> <span class='indexparent'><a class='index' id='lib:bad_weak_ptr,constructor'></a></span><span class='indexparent'><a class='index' id='lib:what,bad_weak_ptr'></a></span><span class='indexparent'><a class='index' id='lib:bad_weak_ptr,what'></a></span></div><div class='itemdecl' id='util.smartptr.weak.bad-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.bad-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>bad_weak_ptr() noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.bad-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.bad-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9072'>#</a></div><div id='util.smartptr.weak.bad-2.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>what()</span> returns an
<span class='indexparent'><a class='index' id=':return_value_of_bad_weak_ptr::what'></a></span>implementation-defined <span class='textsc'>ntbs</span><a class='hidden_link' href='#util.smartptr.weak.bad-2.sentence-1'>.</a></div></div></div></div><div id='util.smartptr.shared' class='section'><h3 ><a class='secnum' href='#util.smartptr.shared' style='min-width:103pt'>19.11.3</a> Class template <span class='texttt'>shared_&shy;ptr</span> <a class='abbr_ref' href='util.smartptr.shared'>[util.smartptr.shared]</a></h3><div class='para' id='util.smartptr.shared-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9079'>#</a></div><div id='util.smartptr.shared-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id='lib:shared_ptr'></a></span>The <span class='texttt'>shared_&shy;ptr</span> class template stores a pointer, usually obtained
via <span class='texttt'>new</span><a class='hidden_link' href='#util.smartptr.shared-1.sentence-1'>.</a></div> <div id='util.smartptr.shared-1.sentence-2' class='sentence'><span class='texttt'>shared_&shy;ptr</span> implements semantics of shared ownership;
the last remaining owner of the pointer is responsible for destroying
the object, or otherwise releasing the resources associated with the stored pointer<a class='hidden_link' href='#util.smartptr.shared-1.sentence-2'>.</a></div> <div id='util.smartptr.shared-1.sentence-3' class='sentence'>A
<span class='texttt'>shared_&shy;ptr</span> is said to be empty if it does not own a pointer<a class='hidden_link' href='#util.smartptr.shared-1.sentence-3'>.</a></div><pre class='codeblock'>
namespace std {
  template&lt;class T&gt; class shared_ptr {
  public:
    using element_type = remove_extent_t&lt;T&gt;;
    using weak_type    = weak_ptr&lt;T&gt;;

    <span class='comment'>// <a href='#util.smartptr.shared.const'>[util.smartptr.shared.const]</a>, constructors
</span>    constexpr shared_ptr() noexcept;
    constexpr shared_ptr(nullptr_t) noexcept : shared_ptr() { }
    template&lt;class Y&gt;
      explicit shared_ptr(Y* p);
    template&lt;class Y, class D&gt;
      shared_ptr(Y* p, D d);
    template&lt;class Y, class D, class A&gt;
      shared_ptr(Y* p, D d, A a);
    template&lt;class D&gt;
      shared_ptr(nullptr_t p, D d);
    template&lt;class D, class A&gt;
      shared_ptr(nullptr_t p, D d, A a);
    template&lt;class Y&gt;
      shared_ptr(const shared_ptr&lt;Y&gt;&amp; r, element_type* p) noexcept;
    shared_ptr(const shared_ptr&amp; r) noexcept;
    template&lt;class Y&gt;
      shared_ptr(const shared_ptr&lt;Y&gt;&amp; r) noexcept;
    shared_ptr(shared_ptr&amp;&amp; r) noexcept;
    template&lt;class Y&gt;
      shared_ptr(shared_ptr&lt;Y&gt;&amp;&amp; r) noexcept;
    template&lt;class Y&gt;
      explicit shared_ptr(const weak_ptr&lt;Y&gt;&amp; r);
    template&lt;class Y, class D&gt;
      shared_ptr(unique_ptr&lt;Y, D&gt;&amp;&amp; r);

    <span class='comment'>// <a href='#util.smartptr.shared.dest'>[util.smartptr.shared.dest]</a>, destructor
</span>    ~shared_ptr();

    <span class='comment'>// <a href='#util.smartptr.shared.assign'>[util.smartptr.shared.assign]</a>, assignment
</span>    shared_ptr&amp; operator=(const shared_ptr&amp; r) noexcept;
    template&lt;class Y&gt;
      shared_ptr&amp; operator=(const shared_ptr&lt;Y&gt;&amp; r) noexcept;
    shared_ptr&amp; operator=(shared_ptr&amp;&amp; r) noexcept;
    template&lt;class Y&gt;
      shared_ptr&amp; operator=(shared_ptr&lt;Y&gt;&amp;&amp; r) noexcept;
    template&lt;class Y, class D&gt;
      shared_ptr&amp; operator=(unique_ptr&lt;Y, D&gt;&amp;&amp; r);

    <span class='comment'>// <a href='#util.smartptr.shared.mod'>[util.smartptr.shared.mod]</a>, modifiers
</span>    void swap(shared_ptr&amp; r) noexcept;
    void reset() noexcept;
    template&lt;class Y&gt;
      void reset(Y* p);
    template&lt;class Y, class D&gt;
      void reset(Y* p, D d);
    template&lt;class Y, class D, class A&gt;
      void reset(Y* p, D d, A a);

    <span class='comment'>// <a href='#util.smartptr.shared.obs'>[util.smartptr.shared.obs]</a>, observers
</span>    element_type* get() const noexcept;
    T&amp; operator*() const noexcept;
    T* operator-&gt;() const noexcept;
    element_type&amp; operator[](ptrdiff_t i) const;
    long use_count() const noexcept;
    explicit operator bool() const noexcept;
    template&lt;class U&gt;
      bool owner_before(const shared_ptr&lt;U&gt;&amp; b) const noexcept;
    template&lt;class U&gt;
      bool owner_before(const weak_ptr&lt;U&gt;&amp; b) const noexcept;
  };

  template&lt;class T&gt;
    shared_ptr(weak_ptr&lt;T&gt;) -&gt; shared_ptr&lt;T&gt;;
  template&lt;class T, class D&gt;
    shared_ptr(unique_ptr&lt;T, D&gt;) -&gt; shared_ptr&lt;T&gt;;
}</pre></div><div class='para' id='util.smartptr.shared-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9163'>#</a></div><div id='util.smartptr.shared-2.sentence-1' class='sentence'>Specializations of <span class='texttt'>shared_&shy;ptr</span> shall be <span class='textit'>Cpp17CopyConstructible</span>,
<span class='textit'>Cpp17CopyAssignable</span>, and <span class='textit'>Cpp17LessThanComparable</span>, allowing their use in standard
containers<a class='hidden_link' href='#util.smartptr.shared-2.sentence-1'>.</a></div> <div id='util.smartptr.shared-2.sentence-2' class='sentence'>Specializations of <span class='texttt'>shared_&shy;ptr</span> shall be
contextually convertible to <span class='texttt'>bool</span>,
allowing their use in boolean expressions and declarations in conditions<a class='hidden_link' href='#util.smartptr.shared-2.sentence-2'>.</a></div> <div id='util.smartptr.shared-2.sentence-3' class='sentence'>The template
parameter <span class='texttt'>T</span> of <span class='texttt'>shared_&shy;ptr</span> may be an incomplete type<a class='hidden_link' href='#util.smartptr.shared-2.sentence-3'>.</a></div></div><div class='para' id='util.smartptr.shared-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9171'>#</a></div><div id='util.smartptr.shared-3.example-1' class='example'>[<span style='white-space:nowrap'>â€‰</span><a class='example_link' href='#util.smartptr.shared-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
if (shared_ptr&lt;X&gt; px = dynamic_pointer_cast&lt;X&gt;(py)) {
  <span class='comment'>// do something with <span class='tcode_in_codeblock'>px</span>
</span>}</pre> â€”<span style='white-space:nowrap'>â€‰</span><i>end example</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div><div class='para' id='util.smartptr.shared-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9180'>#</a></div><div id='util.smartptr.shared-4.sentence-1' class='sentence'>For purposes of determining the presence of a data race, member functions shall
access and modify only the <span class='texttt'>shared_&shy;ptr</span> and <span class='texttt'>weak_&shy;ptr</span> objects
themselves and not objects they refer to<a class='hidden_link' href='#util.smartptr.shared-4.sentence-1'>.</a></div> <div id='util.smartptr.shared-4.sentence-2' class='sentence'>Changes in <span class='texttt'>use_&shy;count()</span> do not
reflect modifications that can introduce data races<a class='hidden_link' href='#util.smartptr.shared-4.sentence-2'>.</a></div></div><div class='para' id='util.smartptr.shared-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9186'>#</a></div><div id='util.smartptr.shared-5.sentence-1' class='sentence'>For the purposes of subclause <a href='#smartptr'>[smartptr]</a>,
a pointer type <span class='texttt'>Y*</span> is said to be
<a class='hidden_link' href='#def:compatible_with,shared_ptr' id='def:compatible_with,shared_ptr'><i >compatible with</i></a>
a pointer type <span class='texttt'>T*</span> when either
<span class='texttt'>Y*</span> is convertible to <span class='texttt'>T*</span> or
<span class='texttt'>Y</span> is <span class='texttt'>U[N]</span> and <span class='texttt'>T</span> is <span class='mathit'>cv</span> <span class='texttt'>U[]</span><a class='hidden_link' href='#util.smartptr.shared-5.sentence-1'>.</a></div></div><div id='util.smartptr.shared.const' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.const' style='min-width:118pt'>19.11.3.1</a> Constructors <a class='abbr_ref' href='util.smartptr.shared.const'>[util.smartptr.shared.const]</a></h4><div class='para' id='util.smartptr.shared.const-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9196'>#</a></div><div id='util.smartptr.shared.const-1.sentence-1' class='sentence'>In the constructor definitions below,
enables <span class='texttt'>shared_&shy;from_&shy;this</span> with <span class='texttt'>p</span>,
for a pointer <span class='texttt'>p</span> of type <span class='texttt'>Y*</span>,
means that if <span class='texttt'>Y</span> has an unambiguous and accessible base class
that is a specialization of <a href='#util.smartptr.enab'><span class='texttt'>enable_&shy;shared_&shy;from_&shy;this</span></a>,
then <span class='texttt'>remove_&shy;cv_&shy;t&lt;Y&gt;*</span> shall be implicitly convertible to <span class='texttt'>T*</span> and
the constructor evaluates the statement:
<pre class='codeblock'>
if (p != nullptr &amp;&amp; p-&gt;weak_this.expired())
  p-&gt;weak_this = shared_ptr&lt;remove_cv_t&lt;Y&gt;&gt;(*this, const_cast&lt;remove_cv_t&lt;Y&gt;*&gt;(p));</pre>
The assignment to the <span class='texttt'>weak_&shy;this</span> member is not atomic and
conflicts with any potentially concurrent access to the same object (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#util.smartptr.shared.const-1.sentence-1'>.</a></div> <span class='indexparent'><a class='index' id='lib:shared_ptr,constructor'></a></span></div><div class='itemdecl' id='util.smartptr.shared.const-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.const-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>constexpr shared_ptr() noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.const-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9217'>#</a></div><div id='util.smartptr.shared.const-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs an empty <span class='texttt'>shared_&shy;ptr</span> object<a class='hidden_link' href='#util.smartptr.shared.const-2.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9219'>#</a></div><div id='util.smartptr.shared.const-3.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>use_&shy;count() == 0 &amp;&amp; get() == nullptr</span><a class='hidden_link' href='#util.smartptr.shared.const-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:shared_ptr,constructor_'></a></span><div class='itemdecl' id='util.smartptr.shared.const-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.const-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class Y&gt; explicit shared_ptr(Y* p);
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.const-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9228'>#</a></div><div id='util.smartptr.shared.const-4.sentence-1' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>Y</span> shall be a complete type<a class='hidden_link' href='#util.smartptr.shared.const-4.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-4.sentence-2' class='sentence'>The expression
<span class='texttt'>delete[] p</span>, when <span class='texttt'>T</span> is an array type, or
<span class='texttt'>delete p</span>, when <span class='texttt'>T</span> is not an array type,
shall have well-defined behavior, and
shall not throw exceptions<a class='hidden_link' href='#util.smartptr.shared.const-4.sentence-2'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9234'>#</a></div><div id='util.smartptr.shared.const-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> When <span class='texttt'>T</span> is not an array type,
constructs a <span class='texttt'>shared_&shy;ptr</span> object
that owns the pointer <span class='texttt'>p</span><a class='hidden_link' href='#util.smartptr.shared.const-5.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-5.sentence-2' class='sentence'>Otherwise, constructs a <span class='texttt'>shared_&shy;ptr</span>
that owns <span class='texttt'>p</span> and a deleter of an
unspecified type that calls <span class='texttt'>delete[] p</span><a class='hidden_link' href='#util.smartptr.shared.const-5.sentence-2'>.</a></div> <div id='util.smartptr.shared.const-5.sentence-3' class='sentence'>When <span class='texttt'>T</span> is not an array type,
enables <span class='texttt'>shared_&shy;from_&shy;this</span> with <span class='texttt'>p</span><a class='hidden_link' href='#util.smartptr.shared.const-5.sentence-3'>.</a></div> <div id='util.smartptr.shared.const-5.sentence-4' class='sentence'>If an exception is thrown, <span class='texttt'>delete p</span> is called
when <span class='texttt'>T</span> is not an array type, <span class='texttt'>delete[] p</span> otherwise<a class='hidden_link' href='#util.smartptr.shared.const-5.sentence-4'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9245'>#</a></div><div id='util.smartptr.shared.const-6.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>use_&shy;count() == 1 &amp;&amp; get() == p</span><a class='hidden_link' href='#util.smartptr.shared.const-6.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9247'>#</a></div><div id='util.smartptr.shared.const-7.sentence-1' class='sentence'><span class='textit'>Throws:</span> <span class='texttt'>bad_&shy;alloc</span>, or an <span class='indexparent'><a class='index' id=':exception_type_when_shared_ptr_constructor_fails'></a></span>implementation-defined exception when a resource other than memory could not be obtained<a class='hidden_link' href='#util.smartptr.shared.const-7.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9250'>#</a></div><div id='util.smartptr.shared.const-8.sentence-1' class='sentence'><span class='textit'>Remarks:</span> When <span class='texttt'>T</span> is an array type,
this constructor shall not participate in overload resolution unless
the expression <span class='texttt'>delete[] p</span> is well-formed and either
<span class='texttt'>T</span> is <span class='texttt'>U[N]</span> and <span class='texttt'>Y(*)[N]</span> is convertible to <span class='texttt'>T*</span>, or
<span class='texttt'>T</span> is <span class='texttt'>U[]</span> and <span class='texttt'>Y(*)[]</span> is convertible to <span class='texttt'>T*</span><a class='hidden_link' href='#util.smartptr.shared.const-8.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-8.sentence-2' class='sentence'>When <span class='texttt'>T</span> is not an array type,
this constructor shall not participate in overload resolution unless
the expression <span class='texttt'>delete p</span> is well-formed and
<span class='texttt'>Y*</span> is convertible to <span class='texttt'>T*</span><a class='hidden_link' href='#util.smartptr.shared.const-8.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:shared_ptr,constructor__'></a></span><div class='itemdecl' id='util.smartptr.shared.const-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.const-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class Y, class D&gt; shared_ptr(Y* p, D d);
template&lt;class Y, class D, class A&gt; shared_ptr(Y* p, D d, A a);
template&lt;class D&gt; shared_ptr(nullptr_t p, D d);
template&lt;class D, class A&gt; shared_ptr(nullptr_t p, D d, A a);
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.const-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9270'>#</a></div><div id='util.smartptr.shared.const-9.sentence-1' class='sentence'><span class='textit'>Requires:</span> Construction of <span class='texttt'>d</span> and a deleter of type <span class='texttt'>D</span>
initialized with <span class='texttt'>std&#x200b;::&#x200b;move(d)</span> shall not throw exceptions<a class='hidden_link' href='#util.smartptr.shared.const-9.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-9.sentence-2' class='sentence'>The expression <span class='texttt'>d(p)</span>
shall have well-defined behavior and shall not throw exceptions<a class='hidden_link' href='#util.smartptr.shared.const-9.sentence-2'>.</a></div> <div id='util.smartptr.shared.const-9.sentence-3' class='sentence'><span class='texttt'>A</span> shall satisfy the <span class='textit'>Cpp17Allocator</span> requirements
(Table <a href='allocator.requirements#tab:utilities.allocator.requirements'>33</a>)<a class='hidden_link' href='#util.smartptr.shared.const-9.sentence-3'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9277'>#</a></div><div id='util.smartptr.shared.const-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs a <span class='texttt'>shared_&shy;ptr</span> object that owns the
object <span class='texttt'>p</span> and the deleter <span class='texttt'>d</span><a class='hidden_link' href='#util.smartptr.shared.const-10.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-10.sentence-2' class='sentence'>When <span class='texttt'>T</span> is not an array type,
the first and second constructors enable <span class='texttt'>shared_&shy;from_&shy;this</span> with <span class='texttt'>p</span><a class='hidden_link' href='#util.smartptr.shared.const-10.sentence-2'>.</a></div> <div id='util.smartptr.shared.const-10.sentence-3' class='sentence'>The second and fourth constructors shall use a copy of <span class='texttt'>a</span> to
allocate memory for internal use<a class='hidden_link' href='#util.smartptr.shared.const-10.sentence-3'>.</a></div> <div id='util.smartptr.shared.const-10.sentence-4' class='sentence'>If an exception is thrown, <span class='texttt'>d(p)</span> is called<a class='hidden_link' href='#util.smartptr.shared.const-10.sentence-4'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9285'>#</a></div><div id='util.smartptr.shared.const-11.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>use_&shy;count() == 1 &amp;&amp; get() == p</span><a class='hidden_link' href='#util.smartptr.shared.const-11.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9287'>#</a></div><div id='util.smartptr.shared.const-12.sentence-1' class='sentence'><span class='textit'>Throws:</span> <span class='texttt'>bad_&shy;alloc</span>, or an <span class='indexparent'><a class='index' id=':exception_type_when_shared_ptr_constructor_fails_'></a></span>implementation-defined exception
when a resource other than memory could not be obtained<a class='hidden_link' href='#util.smartptr.shared.const-12.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-13'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9291'>#</a></div><div id='util.smartptr.shared.const-13.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
When <span class='texttt'>T</span> is an array type,
this constructor shall not participate in overload resolution unless
<span class='texttt'>is_&shy;move_&shy;constructible_&shy;v&lt;D&gt;</span> is <span class='texttt'>true</span>,
the expression <span class='texttt'>d(p)</span> is well-formed, and either
<span class='texttt'>T</span> is <span class='texttt'>U[N]</span> and <span class='texttt'>Y(*)[N]</span> is convertible to <span class='texttt'>T*</span>, or
<span class='texttt'>T</span> is <span class='texttt'>U[]</span> and <span class='texttt'>Y(*)[]</span> is convertible to <span class='texttt'>T*</span><a class='hidden_link' href='#util.smartptr.shared.const-13.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-13.sentence-2' class='sentence'>When <span class='texttt'>T</span> is not an array type,
this constructor shall not participate in overload resolution unless
<span class='texttt'>is_&shy;move_&shy;constructible_&shy;v&lt;D&gt;</span> is <span class='texttt'>true</span>,
the expression <span class='texttt'>d(p)</span> is well-formed, and
<span class='texttt'>Y*</span> is convertible to <span class='texttt'>T*</span><a class='hidden_link' href='#util.smartptr.shared.const-13.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:shared_ptr,constructor___'></a></span><div class='itemdecl' id='util.smartptr.shared.const-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.const-itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class Y&gt; shared_ptr(const shared_ptr&lt;Y&gt;&amp; r, element_type* p) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.const-14'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9311'>#</a></div><div id='util.smartptr.shared.const-14.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs a <span class='texttt'>shared_&shy;ptr</span> instance that
stores <span class='texttt'>p</span> and shares ownership with <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.shared.const-14.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-15'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9315'>#</a></div><div id='util.smartptr.shared.const-15.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>get() == p &amp;&amp; use_&shy;count() == r.use_&shy;count()</span><a class='hidden_link' href='#util.smartptr.shared.const-15.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-16'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9318'>#</a></div><div id='util.smartptr.shared.const-16.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.const-16.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.const-16.sentence-1' class='sentence'>To avoid the possibility of a dangling pointer, the
user of this constructor should ensure that <span class='texttt'>p</span> remains valid at
least until the ownership group of <span class='texttt'>r</span> is destroyed<a class='hidden_link' href='#util.smartptr.shared.const-16.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div class='para' id='util.smartptr.shared.const-17'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9323'>#</a></div><div id='util.smartptr.shared.const-17.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.const-17.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.const-17.sentence-1' class='sentence'>This constructor allows creation of an empty
<span class='texttt'>shared_&shy;ptr</span> instance with a non-null stored pointer<a class='hidden_link' href='#util.smartptr.shared.const-17.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:shared_ptr,constructor____'></a></span><div class='itemdecl' id='util.smartptr.shared.const-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.const-itemdecl:5'>ðŸ”—</a></div><code class='itemdeclcode'>shared_ptr(const shared_ptr&amp; r) noexcept;
template&lt;class Y&gt; shared_ptr(const shared_ptr&lt;Y&gt;&amp; r) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.const-18'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9335'>#</a></div><div id='util.smartptr.shared.const-18.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
The second constructor shall not participate in overload resolution unless
<span class='texttt'>Y*</span> is compatible with <span class='texttt'>T*</span><a class='hidden_link' href='#util.smartptr.shared.const-18.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-19'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9339'>#</a></div><div id='util.smartptr.shared.const-19.sentence-1' class='sentence'><span class='textit'>Effects:</span> If <span class='texttt'>r</span> is empty, constructs
an empty <span class='texttt'>shared_&shy;ptr</span> object; otherwise, constructs
a <span class='texttt'>shared_&shy;ptr</span> object that shares ownership with <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.shared.const-19.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-20'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9343'>#</a></div><div id='util.smartptr.shared.const-20.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>get() == r.get() &amp;&amp; use_&shy;count() == r.use_&shy;count()</span><a class='hidden_link' href='#util.smartptr.shared.const-20.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:shared_ptr,constructor_____'></a></span><div class='itemdecl' id='util.smartptr.shared.const-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.const-itemdecl:6'>ðŸ”—</a></div><code class='itemdeclcode'>shared_ptr(shared_ptr&amp;&amp; r) noexcept;
template&lt;class Y&gt; shared_ptr(shared_ptr&lt;Y&gt;&amp;&amp; r) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.const-21'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9353'>#</a></div><div id='util.smartptr.shared.const-21.sentence-1' class='sentence'><span class='textit'>Remarks:</span> The second constructor shall not participate in overload resolution unless
<span class='texttt'>Y*</span> is compatible with <span class='texttt'>T*</span><a class='hidden_link' href='#util.smartptr.shared.const-21.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-22'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9357'>#</a></div><div id='util.smartptr.shared.const-22.sentence-1' class='sentence'><span class='textit'>Effects:</span> Move constructs a <span class='texttt'>shared_&shy;ptr</span> instance from <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.shared.const-22.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-23'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9360'>#</a></div><div id='util.smartptr.shared.const-23.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>*this</span> shall contain the old value of
<span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.shared.const-23.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-23.sentence-2' class='sentence'><span class='texttt'>r</span> shall be empty<a class='hidden_link' href='#util.smartptr.shared.const-23.sentence-2'>.</a></div> <div id='util.smartptr.shared.const-23.sentence-3' class='sentence'><span class='texttt'>r.get() == nullptr</span><a class='hidden_link' href='#util.smartptr.shared.const-23.sentence-3'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:shared_ptr,constructor______'></a></span><span class='indexparent'><a class='index' id='lib:weak_ptr'></a></span><div class='itemdecl' id='util.smartptr.shared.const-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.const-itemdecl:7'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class Y&gt; explicit shared_ptr(const weak_ptr&lt;Y&gt;&amp; r);
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.const-24'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9372'>#</a></div><div id='util.smartptr.shared.const-24.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs a <span class='texttt'>shared_&shy;ptr</span> object that shares ownership with
<span class='texttt'>r</span> and stores a copy of the pointer stored in <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.shared.const-24.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-24.sentence-2' class='sentence'>If an exception is thrown, the constructor has no effect<a class='hidden_link' href='#util.smartptr.shared.const-24.sentence-2'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-25'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9376'>#</a></div><div id='util.smartptr.shared.const-25.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>use_&shy;count() == r.use_&shy;count()</span><a class='hidden_link' href='#util.smartptr.shared.const-25.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-26'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9378'>#</a></div><div id='util.smartptr.shared.const-26.sentence-1' class='sentence'><span class='textit'>Throws:</span> <span class='texttt'>bad_&shy;weak_&shy;ptr</span> when <span class='texttt'>r.expired()</span><a class='hidden_link' href='#util.smartptr.shared.const-26.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-27'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-27'>27</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9380'>#</a></div><div id='util.smartptr.shared.const-27.sentence-1' class='sentence'><span class='textit'>Remarks:</span> This constructor shall not participate in overload resolution unless
<span class='texttt'>Y*</span> is compatible with <span class='texttt'>T*</span><a class='hidden_link' href='#util.smartptr.shared.const-27.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:shared_ptr,constructor_______'></a></span><span class='indexparent'><a class='index' id='lib:unique_ptr__'></a></span><div class='itemdecl' id='util.smartptr.shared.const-itemdecl:8'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.const-itemdecl:8'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class Y, class D&gt; shared_ptr(unique_ptr&lt;Y, D&gt;&amp;&amp; r);
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.const-28'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-28'>28</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9391'>#</a></div><div id='util.smartptr.shared.const-28.sentence-1' class='sentence'><span class='textit'>Remarks:</span> This constructor shall not participate in overload resolution
unless <span class='texttt'>Y*</span> is compatible with <span class='texttt'>T*</span> and
<span class='texttt'>unique_&shy;ptr&lt;Y, D&gt;&#x200b;::&#x200b;pointer</span> is convertible to <span class='texttt'>element_&shy;type*</span><a class='hidden_link' href='#util.smartptr.shared.const-28.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.const-29'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-29'>29</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9395'>#</a></div><div id='util.smartptr.shared.const-29.sentence-1' class='sentence'><span class='textit'>Effects:</span> If <span class='texttt'>r.get() == nullptr</span>, equivalent to <span class='texttt'>shared_&shy;ptr()</span><a class='hidden_link' href='#util.smartptr.shared.const-29.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-29.sentence-2' class='sentence'>Otherwise, if <span class='texttt'>D</span> is not a reference type,
equivalent to <span class='texttt'>shared_&shy;ptr(r.release(), r.get_&shy;deleter())</span><a class='hidden_link' href='#util.smartptr.shared.const-29.sentence-2'>.</a></div> <div id='util.smartptr.shared.const-29.sentence-3' class='sentence'>Otherwise, equivalent to <span class='texttt'>shared_&shy;ptr(r.release(), ref(r.get_&shy;deleter()))</span><a class='hidden_link' href='#util.smartptr.shared.const-29.sentence-3'>.</a></div> <div id='util.smartptr.shared.const-29.sentence-4' class='sentence'>If an exception is thrown, the constructor has no effect<a class='hidden_link' href='#util.smartptr.shared.const-29.sentence-4'>.</a></div></div></div></div><div id='util.smartptr.shared.dest' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.dest' style='min-width:118pt'>19.11.3.2</a> Destructor <a class='abbr_ref' href='util.smartptr.shared.dest'>[util.smartptr.shared.dest]</a></h4><span class='indexparent'><a class='index' id='lib:shared_ptr,destructor'></a></span><div class='itemdecl' id='util.smartptr.shared.dest-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.dest-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>~shared_ptr();
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.dest-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.dest-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9411'>#</a></div><div id='util.smartptr.shared.dest-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
<ul class='itemize'><li id='util.smartptr.shared.dest-1.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.dest-1.1'>(1.1)</a></div><div id='util.smartptr.shared.dest-1.1.sentence-1' class='sentence'>If <span class='texttt'>*this</span> is empty or shares ownership with another
<span class='texttt'>shared_&shy;ptr</span> instance (<span class='texttt'>use_&shy;count() &gt; 1</span>), there are no side effects<a class='hidden_link' href='#util.smartptr.shared.dest-1.1.sentence-1'>.</a></div></li><li id='util.smartptr.shared.dest-1.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.dest-1.2'>(1.2)</a></div><div id='util.smartptr.shared.dest-1.2.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>*this</span> owns an object
<span class='texttt'>p</span> and a deleter <span class='texttt'>d</span>, <span class='texttt'>d(p)</span> is called<a class='hidden_link' href='#util.smartptr.shared.dest-1.2.sentence-1'>.</a></div></li><li id='util.smartptr.shared.dest-1.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.dest-1.3'>(1.3)</a></div><div id='util.smartptr.shared.dest-1.3.sentence-1' class='sentence'>Otherwise, <span class='texttt'>*this</span> owns a pointer <span class='texttt'>p</span>,
and <span class='texttt'>delete p</span> is called<a class='hidden_link' href='#util.smartptr.shared.dest-1.3.sentence-1'>.</a></div></li></ul></div></div></div><div class='para' id='util.smartptr.shared.dest-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.dest-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9425'>#</a></div><div id='util.smartptr.shared.dest-2.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.dest-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.dest-2.sentence-1' class='sentence'>Since the destruction of <span class='texttt'>*this</span>
decreases the number of instances that share ownership with <span class='texttt'>*this</span>
by one,
after <span class='texttt'>*this</span> has been destroyed
all <span class='texttt'>shared_&shy;ptr</span> instances that shared ownership with
<span class='texttt'>*this</span> will report a <span class='texttt'>use_&shy;count()</span> that is one less
than its previous value<a class='hidden_link' href='#util.smartptr.shared.dest-2.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div id='util.smartptr.shared.assign' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.assign' style='min-width:118pt'>19.11.3.3</a> Assignment <a class='abbr_ref' href='util.smartptr.shared.assign'>[util.smartptr.shared.assign]</a></h4><div id='lib:shared_ptr,operator='><div id='lib:operator=,shared_ptr'>
<div class='itemdecl' id='util.smartptr.shared.assign-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.assign-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>shared_ptr&amp; operator=(const shared_ptr&amp; r) noexcept;
template&lt;class Y&gt; shared_ptr&amp; operator=(const shared_ptr&lt;Y&gt;&amp; r) noexcept;
</code></div>
</div></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.assign-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9444'>#</a></div><div id='util.smartptr.shared.assign-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr(r).swap(*this)</span><a class='hidden_link' href='#util.smartptr.shared.assign-1.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.assign-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9446'>#</a></div><div id='util.smartptr.shared.assign-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#util.smartptr.shared.assign-2.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.assign-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9448'>#</a></div><div id='util.smartptr.shared.assign-3.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.assign-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.assign-3.sentence-1' class='sentence'>The use count updates caused by the temporary object
construction and destruction are not observable side
effects, so the implementation may meet the effects (and the
implied guarantees) via different means, without creating a
temporary<a class='hidden_link' href='#util.smartptr.shared.assign-3.sentence-1'>.</a></div> <div id='util.smartptr.shared.assign-3.sentence-2' class='sentence'>In particular, in the example:
<pre class='codeblock'>
shared_ptr&lt;int&gt; p(new int);
shared_ptr&lt;void&gt; q(p);
p = p;
q = p;</pre>
both assignments may be no-ops<a class='hidden_link' href='#util.smartptr.shared.assign-3.sentence-2'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:operator=,shared_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator=_'></a></span><div class='itemdecl' id='util.smartptr.shared.assign-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.assign-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>shared_ptr&amp; operator=(shared_ptr&amp;&amp; r) noexcept;
template&lt;class Y&gt; shared_ptr&amp; operator=(shared_ptr&lt;Y&gt;&amp;&amp; r) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.assign-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9470'>#</a></div><div id='util.smartptr.shared.assign-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr(std&#x200b;::&#x200b;move(r)).swap(*this)</span><a class='hidden_link' href='#util.smartptr.shared.assign-4.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.assign-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9473'>#</a></div><div id='util.smartptr.shared.assign-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#util.smartptr.shared.assign-5.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator=,shared_ptr__'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator=__'></a></span><div class='itemdecl' id='util.smartptr.shared.assign-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.assign-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class Y, class D&gt; shared_ptr&amp; operator=(unique_ptr&lt;Y, D&gt;&amp;&amp; r);
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.assign-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9483'>#</a></div><div id='util.smartptr.shared.assign-6.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr(std&#x200b;::&#x200b;move(r)).swap(*this)</span><a class='hidden_link' href='#util.smartptr.shared.assign-6.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.assign-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9486'>#</a></div><div id='util.smartptr.shared.assign-7.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#util.smartptr.shared.assign-7.sentence-1'>.</a></div></div></div></div><div id='util.smartptr.shared.mod' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.mod' style='min-width:118pt'>19.11.3.4</a> Modifiers <a class='abbr_ref' href='util.smartptr.shared.mod'>[util.smartptr.shared.mod]</a></h4><span class='indexparent'><a class='index' id='lib:swap,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,swap'></a></span><div class='itemdecl' id='util.smartptr.shared.mod-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.mod-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>void swap(shared_ptr&amp; r) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.mod-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.mod-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9499'>#</a></div><div id='util.smartptr.shared.mod-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Exchanges the contents of <span class='texttt'>*this</span> and <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.shared.mod-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:reset,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,reset'></a></span><div class='itemdecl' id='util.smartptr.shared.mod-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.mod-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>void reset() noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.mod-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.mod-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9508'>#</a></div><div id='util.smartptr.shared.mod-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr().swap(*this)</span><a class='hidden_link' href='#util.smartptr.shared.mod-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:reset,shared_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,reset_'></a></span><div class='itemdecl' id='util.smartptr.shared.mod-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.mod-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class Y&gt; void reset(Y* p);
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.mod-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.mod-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9517'>#</a></div><div id='util.smartptr.shared.mod-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr(p).swap(*this)</span><a class='hidden_link' href='#util.smartptr.shared.mod-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:reset,shared_ptr__'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,reset__'></a></span><div class='itemdecl' id='util.smartptr.shared.mod-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.mod-itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class Y, class D&gt; void reset(Y* p, D d);
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.mod-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.mod-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9526'>#</a></div><div id='util.smartptr.shared.mod-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr(p, d).swap(*this)</span><a class='hidden_link' href='#util.smartptr.shared.mod-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:reset,shared_ptr___'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,reset___'></a></span><div class='itemdecl' id='util.smartptr.shared.mod-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.mod-itemdecl:5'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class Y, class D, class A&gt; void reset(Y* p, D d, A a);
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.mod-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.mod-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9535'>#</a></div><div id='util.smartptr.shared.mod-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr(p, d, a).swap(*this)</span><a class='hidden_link' href='#util.smartptr.shared.mod-5.sentence-1'>.</a></div></div></div></div><div id='util.smartptr.shared.obs' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.obs' style='min-width:118pt'>19.11.3.5</a> Observers <a class='abbr_ref' href='util.smartptr.shared.obs'>[util.smartptr.shared.obs]</a></h4><span class='indexparent'><a class='index' id='lib:get,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,get'></a></span><div class='itemdecl' id='util.smartptr.shared.obs-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.obs-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>element_type* get() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.obs-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9546'>#</a></div><div id='util.smartptr.shared.obs-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> The stored pointer<a class='hidden_link' href='#util.smartptr.shared.obs-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator*,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator*'></a></span><div class='itemdecl' id='util.smartptr.shared.obs-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.obs-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>T&amp; operator*() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.obs-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9555'>#</a></div><div id='util.smartptr.shared.obs-2.sentence-1' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>get() != 0</span><a class='hidden_link' href='#util.smartptr.shared.obs-2.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.obs-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9557'>#</a></div><div id='util.smartptr.shared.obs-3.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*get()</span><a class='hidden_link' href='#util.smartptr.shared.obs-3.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.obs-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9559'>#</a></div><div id='util.smartptr.shared.obs-4.sentence-1' class='sentence'><span class='textit'>Remarks:</span> When <span class='texttt'>T</span> is an array type or <span class='mathit'>cv</span> <span class='texttt'>void</span>,
it is unspecified whether this
member function is declared<a class='hidden_link' href='#util.smartptr.shared.obs-4.sentence-1'>.</a></div> <div id='util.smartptr.shared.obs-4.sentence-2' class='sentence'>If it is declared, it is unspecified what its
return type is, except that the declaration (although not necessarily the
definition) of the function shall be well-formed<a class='hidden_link' href='#util.smartptr.shared.obs-4.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator->,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator->'></a></span><div class='itemdecl' id='util.smartptr.shared.obs-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.obs-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>T* operator-&gt;() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.obs-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9572'>#</a></div><div id='util.smartptr.shared.obs-5.sentence-1' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>get() != 0</span><a class='hidden_link' href='#util.smartptr.shared.obs-5.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.obs-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9574'>#</a></div><div id='util.smartptr.shared.obs-6.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>get()</span><a class='hidden_link' href='#util.smartptr.shared.obs-6.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.obs-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9576'>#</a></div><div id='util.smartptr.shared.obs-7.sentence-1' class='sentence'><span class='textit'>Remarks:</span> When <span class='texttt'>T</span> is an array type,
it is unspecified whether this member function is declared<a class='hidden_link' href='#util.smartptr.shared.obs-7.sentence-1'>.</a></div> <div id='util.smartptr.shared.obs-7.sentence-2' class='sentence'>If it is declared, it is unspecified what its return type is,
except that the declaration (although not necessarily the definition)
of the function shall be well-formed<a class='hidden_link' href='#util.smartptr.shared.obs-7.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator[],shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator[]'></a></span><div class='itemdecl' id='util.smartptr.shared.obs-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.obs-itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'>element_type&amp; operator[](ptrdiff_t i) const;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.obs-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9589'>#</a></div><div id='util.smartptr.shared.obs-8.sentence-1' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>get() != 0 &amp;&amp; i &gt;= 0</span><a class='hidden_link' href='#util.smartptr.shared.obs-8.sentence-1'>.</a></div> <div id='util.smartptr.shared.obs-8.sentence-2' class='sentence'>If <span class='texttt'>T</span> is <span class='texttt'>U[N]</span>, <span class='texttt'>i &lt; N</span><a class='hidden_link' href='#util.smartptr.shared.obs-8.sentence-2'>.</a></div></div></div><div class='para' id='util.smartptr.shared.obs-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9592'>#</a></div><div id='util.smartptr.shared.obs-9.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>get()[i]</span><a class='hidden_link' href='#util.smartptr.shared.obs-9.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.obs-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9594'>#</a></div><div id='util.smartptr.shared.obs-10.sentence-1' class='sentence'><span class='textit'>Remarks:</span> When <span class='texttt'>T</span> is not an array type,
it is unspecified whether this member function is declared<a class='hidden_link' href='#util.smartptr.shared.obs-10.sentence-1'>.</a></div> <div id='util.smartptr.shared.obs-10.sentence-2' class='sentence'>If it is declared, it is unspecified what its return type is,
except that the declaration (although not necessarily the definition)
of the function shall be well-formed<a class='hidden_link' href='#util.smartptr.shared.obs-10.sentence-2'>.</a></div></div></div><div class='para' id='util.smartptr.shared.obs-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9600'>#</a></div><div id='util.smartptr.shared.obs-11.sentence-1' class='sentence'><span class='textit'>Throws:</span> Nothing<a class='hidden_link' href='#util.smartptr.shared.obs-11.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,use_count'><div id='lib:use_count,shared_ptr'>
<div class='itemdecl' id='util.smartptr.shared.obs-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.obs-itemdecl:5'>ðŸ”—</a></div><code class='itemdeclcode'>long use_count() const noexcept;
</code></div>
</div></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.obs-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9610'>#</a></div><div id='util.smartptr.shared.obs-12.sentence-1' class='sentence'><span class='textit'>Returns:</span> The number of <span class='texttt'>shared_&shy;ptr</span> objects, <span class='texttt'>*this</span> included,
that share ownership with <span class='texttt'>*this</span>, or <span class='texttt'>0</span> when <span class='texttt'>*this</span> is
empty<a class='hidden_link' href='#util.smartptr.shared.obs-12.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.obs-13'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9614'>#</a></div><div id='util.smartptr.shared.obs-13.sentence-1' class='sentence'><span class='textit'>Synchronization:</span> None<a class='hidden_link' href='#util.smartptr.shared.obs-13.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.obs-14'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9616'>#</a></div><div id='util.smartptr.shared.obs-14.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.obs-14.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.obs-14.sentence-1' class='sentence'><span class='texttt'>get() == nullptr</span>
does not imply a specific return value of <span class='texttt'>use_&shy;count()</span><a class='hidden_link' href='#util.smartptr.shared.obs-14.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div class='para' id='util.smartptr.shared.obs-15'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9619'>#</a></div><div id='util.smartptr.shared.obs-15.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.obs-15.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.obs-15.sentence-1' class='sentence'><span class='texttt'>weak_&shy;ptr&lt;T&gt;&#x200b;::&#x200b;lock()</span>
can affect the return value of <span class='texttt'>use_&shy;count()</span><a class='hidden_link' href='#util.smartptr.shared.obs-15.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div class='para' id='util.smartptr.shared.obs-16'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9622'>#</a></div><div id='util.smartptr.shared.obs-16.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.obs-16.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.obs-16.sentence-1' class='sentence'>When multiple threads
can affect the return value of <span class='texttt'>use_&shy;count()</span>,
the result should be treated as approximate<a class='hidden_link' href='#util.smartptr.shared.obs-16.sentence-1'>.</a></div> <div id='util.smartptr.shared.obs-16.sentence-2' class='sentence'>In particular, <span class='texttt'>use_&shy;count() == 1</span> does not imply that accesses through
a previously destroyed <span class='texttt'>shared_&shy;ptr</span> have in any sense completed<a class='hidden_link' href='#util.smartptr.shared.obs-16.sentence-2'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:operator_bool,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator_bool'></a></span><div class='itemdecl' id='util.smartptr.shared.obs-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.obs-itemdecl:6'>ðŸ”—</a></div><code class='itemdeclcode'>explicit operator bool() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.obs-17'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9635'>#</a></div><div id='util.smartptr.shared.obs-17.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>get() != 0</span><a class='hidden_link' href='#util.smartptr.shared.obs-17.sentence-1'>.</a></div></div></div><div id='lib:shared_ptr,owner_before'><div id='lib:owner_before,shared_ptr'>
<div class='itemdecl' id='util.smartptr.shared.obs-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.obs-itemdecl:7'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class U&gt; bool owner_before(const shared_ptr&lt;U&gt;&amp; b) const noexcept;
template&lt;class U&gt; bool owner_before(const weak_ptr&lt;U&gt;&amp; b) const noexcept;
</code></div>
</div></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.obs-18'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9646'>#</a></div><div id='util.smartptr.shared.obs-18.sentence-1' class='sentence'><span class='textit'>Returns:</span> An unspecified value such that</div><div id='util.smartptr.shared.obs-18.sentence-2' class='sentence'><ul class='itemize'><li id='util.smartptr.shared.obs-18.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.obs-18.1'>(18.1)</a></div><div id='util.smartptr.shared.obs-18.1.sentence-1' class='sentence'><span class='texttt'>x.owner_&shy;before(y)</span> defines a strict weak ordering as defined in <a href='alg.sorting'>[alg.sorting]</a>;</div></li><li id='util.smartptr.shared.obs-18.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.obs-18.2'>(18.2)</a></div><div id='util.smartptr.shared.obs-18.2.sentence-1' class='sentence'>under the equivalence relation defined by <span class='texttt'>owner_&shy;before</span>,
<span class='texttt'>!a.owner_&shy;before(b) &amp;&amp; !b.owner_&shy;before(a)</span>, two <span class='texttt'>shared_&shy;ptr</span> or
<span class='texttt'>weak_&shy;ptr</span> instances are equivalent if and only if they share ownership or
are both empty<a class='hidden_link' href='#util.smartptr.shared.obs-18.2.sentence-1'>.</a></div></li></ul></div></div></div></div><div id='util.smartptr.shared.create' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.create' style='min-width:118pt'>19.11.3.6</a> Creation <a class='abbr_ref' href='util.smartptr.shared.create'>[util.smartptr.shared.create]</a></h4><div class='para' id='util.smartptr.shared.create-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9662'>#</a></div><div id='util.smartptr.shared.create-1.sentence-1' class='sentence'>The common requirements that apply to
all <span class='texttt'>make_&shy;shared</span> and <span class='texttt'>allocate_&shy;shared</span> overloads,
unless specified otherwise, are described below<a class='hidden_link' href='#util.smartptr.shared.create-1.sentence-1'>.</a></div></div><div class='itemdecl' id='util.smartptr.shared.create-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.create-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, ...&gt;
  shared_ptr&lt;T&gt; make_shared(<span class='textit'>args</span>);
template&lt;class T, class A, ...&gt;
  shared_ptr&lt;T&gt; allocate_shared(const A&amp; a, <span class='textit'>args</span>);
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.create-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9675'>#</a></div><div id='util.smartptr.shared.create-2.sentence-1' class='sentence'><span class='textit'>Requires:</span> <span class='texttt'>A</span> shall satisfy the <span class='textit'>Cpp17Allocator</span>
requirements (Table <a href='allocator.requirements#tab:utilities.allocator.requirements'>33</a>)<a class='hidden_link' href='#util.smartptr.shared.create-2.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9679'>#</a></div><div id='util.smartptr.shared.create-3.sentence-1' class='sentence'><span class='textit'>Effects:</span> Allocates memory for an object of type <span class='texttt'>T</span>
(or <span class='texttt'>U[N]</span> when <span class='texttt'>T</span> is <span class='texttt'>U[]</span>,
where <span class='texttt'>N</span> is determined from <span class='textit'>args</span> as specified by the concrete overload)<a class='hidden_link' href='#util.smartptr.shared.create-3.sentence-1'>.</a></div> <div id='util.smartptr.shared.create-3.sentence-2' class='sentence'>The object is initialized from <span class='textit'>args</span> as specified by the concrete overload<a class='hidden_link' href='#util.smartptr.shared.create-3.sentence-2'>.</a></div> <div id='util.smartptr.shared.create-3.sentence-3' class='sentence'>The <span class='texttt'>allocate_&shy;shared</span> templates use a copy of <span class='texttt'>a</span>
(rebound for an unspecified <span class='texttt'>value_&shy;type</span>) to allocate memory<a class='hidden_link' href='#util.smartptr.shared.create-3.sentence-3'>.</a></div> <div id='util.smartptr.shared.create-3.sentence-4' class='sentence'>If an exception is thrown, the functions have no effect<a class='hidden_link' href='#util.smartptr.shared.create-3.sentence-4'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9688'>#</a></div><div id='util.smartptr.shared.create-4.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> instance that stores and owns the address of
the newly constructed object<a class='hidden_link' href='#util.smartptr.shared.create-4.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9692'>#</a></div><div id='util.smartptr.shared.create-5.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>r.get() != 0 &amp;&amp; r.use_&shy;count() == 1</span>,
where <span class='texttt'>r</span> is the return value<a class='hidden_link' href='#util.smartptr.shared.create-5.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9696'>#</a></div><div id='util.smartptr.shared.create-6.sentence-1' class='sentence'><span class='textit'>Throws:</span> <span class='texttt'>bad_&shy;alloc</span>, or
an exception thrown from <span class='texttt'>allocate</span> or from the initialization of the object<a class='hidden_link' href='#util.smartptr.shared.create-6.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9700'>#</a></div><div id='util.smartptr.shared.create-7.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
<ul class='itemize'><li id='util.smartptr.shared.create-7.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.create-7.1'>(7.1)</a></div><div id='util.smartptr.shared.create-7.1.sentence-1' class='sentence'>Implementations should perform no more than one memory allocation<a class='hidden_link' href='#util.smartptr.shared.create-7.1.sentence-1'>.</a></div> <div id='util.smartptr.shared.create-7.1.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.create-7.1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.create-7.1.sentence-2' class='sentence'>This provides efficiency equivalent to an intrusive smart pointer<a class='hidden_link' href='#util.smartptr.shared.create-7.1.sentence-2'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </li><li id='util.smartptr.shared.create-7.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.create-7.2'>(7.2)</a></div><div id='util.smartptr.shared.create-7.2.sentence-1' class='sentence'>When an object of an array type <span class='texttt'>U</span> is specified to have
  an initial value of <span class='texttt'>u</span> (of the same type),
  this shall be interpreted to mean that
  each array element of the object has as its initial value
  the corresponding element from <span class='texttt'>u</span><a class='hidden_link' href='#util.smartptr.shared.create-7.2.sentence-1'>.</a></div></li><li id='util.smartptr.shared.create-7.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.create-7.3'>(7.3)</a></div><div id='util.smartptr.shared.create-7.3.sentence-1' class='sentence'>When an object of an array type is specified to have
  a default initial value,
  this shall be interpreted to mean that each array element of the object
  has a default initial value<a class='hidden_link' href='#util.smartptr.shared.create-7.3.sentence-1'>.</a></div></li><li id='util.smartptr.shared.create-7.4'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.create-7.4'>(7.4)</a></div><div id='util.smartptr.shared.create-7.4.sentence-1' class='sentence'>When a (sub)object of a non-array type <span class='texttt'>U</span> is specified to have
  an initial value of <span class='texttt'>v</span>, or <span class='texttt'>U(l...)</span>,
  where <span class='texttt'>l...</span> is a list of constructor arguments,
  <span class='texttt'>make_&shy;shared</span> shall initialize this (sub)object
  via the expression <span class='texttt'>&#x200b;::&#x200b;new(pv) U(v)</span> or <span class='texttt'>&#x200b;::&#x200b;new(pv) U(l...)</span> respectively,
  where <span class='texttt'>pv</span> has type <span class='texttt'>void*</span> and points to storage
  suitable to hold an object of type <span class='texttt'>U</span><a class='hidden_link' href='#util.smartptr.shared.create-7.4.sentence-1'>.</a></div></li><li id='util.smartptr.shared.create-7.5'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.create-7.5'>(7.5)</a></div><div id='util.smartptr.shared.create-7.5.sentence-1' class='sentence'>When a (sub)object of a non-array type <span class='texttt'>U</span> is specified to have
  an initial value of <span class='texttt'>v</span>, or <span class='texttt'>U(l...)</span>,
  where <span class='texttt'>l...</span> is a list of constructor arguments,
  <span class='texttt'>allocate_&shy;shared</span> shall initialize this (sub)object
  via the expression
  <ul class='itemize'><li id='util.smartptr.shared.create-7.5.1'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#util.smartptr.shared.create-7.5.1'>(7.5.1)</a></div><div id='util.smartptr.shared.create-7.5.1.sentence-1' class='sentence'>
  <span class='texttt'>allocator_&shy;traits&lt;A2&gt;&#x200b;::&#x200b;construct(a2, pv, v)</span> or</div></li><li id='util.smartptr.shared.create-7.5.2'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#util.smartptr.shared.create-7.5.2'>(7.5.2)</a></div><div id='util.smartptr.shared.create-7.5.2.sentence-1' class='sentence'><span class='texttt'>allocator_&shy;traits&lt;A2&gt;&#x200b;::&#x200b;construct(a2, pv, l...)</span></div></li></ul>
  respectively,
  where <span class='texttt'>pv</span> points to storage
  suitable to hold an object of type <span class='texttt'>U</span> and
  <span class='texttt'>a2</span> of type <span class='texttt'>A2</span> is a rebound copy of
  the allocator <span class='texttt'>a</span> passed to <span class='texttt'>allocate_&shy;shared</span>
  such that its <span class='texttt'>value_&shy;type</span> is <span class='texttt'>remove_&shy;cv_&shy;t&lt;U&gt;</span><a class='hidden_link' href='#util.smartptr.shared.create-7.5.sentence-1'>.</a></div></li><li id='util.smartptr.shared.create-7.6'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.create-7.6'>(7.6)</a></div><div id='util.smartptr.shared.create-7.6.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span> is specified to have
  a default initial value,
  <span class='texttt'>make_&shy;shared</span> shall initialize this (sub)object
  via the expression <span class='texttt'>&#x200b;::&#x200b;new(pv) U()</span>,
  where <span class='texttt'>pv</span> has type <span class='texttt'>void*</span> and points to storage
  suitable to hold an object of type <span class='texttt'>U</span><a class='hidden_link' href='#util.smartptr.shared.create-7.6.sentence-1'>.</a></div></li><li id='util.smartptr.shared.create-7.7'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.create-7.7'>(7.7)</a></div><div id='util.smartptr.shared.create-7.7.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span> is specified to have
  a default initial value,
  <span class='texttt'>allocate_&shy;shared</span> shall initialize this (sub)object
  via the expression <span class='texttt'>allocator_&shy;traits&lt;A2&gt;&#x200b;::&#x200b;construct(a2, pv)</span>,
  where <span class='texttt'>pv</span> points to storage
  suitable to hold an object of type <span class='texttt'>U</span> and
  <span class='texttt'>a2</span> of type <span class='texttt'>A2</span> is a rebound copy of
  the allocator <span class='texttt'>a</span> passed to <span class='texttt'>allocate_&shy;shared</span>
  such that its <span class='texttt'>value_&shy;type</span> is <span class='texttt'>remove_&shy;cv_&shy;t&lt;U&gt;</span><a class='hidden_link' href='#util.smartptr.shared.create-7.7.sentence-1'>.</a></div></li><li id='util.smartptr.shared.create-7.8'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.create-7.8'>(7.8)</a></div><div id='util.smartptr.shared.create-7.8.sentence-1' class='sentence'>Array elements are initialized in ascending order of their addresses<a class='hidden_link' href='#util.smartptr.shared.create-7.8.sentence-1'>.</a></div></li><li id='util.smartptr.shared.create-7.9'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.create-7.9'>(7.9)</a></div><div id='util.smartptr.shared.create-7.9.sentence-1' class='sentence'>When the lifetime of the object managed by the return value ends, or
  when the initialization of an array element throws an exception,
  the initialized elements are destroyed in the reverse order
  of their original construction<a class='hidden_link' href='#util.smartptr.shared.create-7.9.sentence-1'>.</a></div></li></ul></div> <div id='util.smartptr.shared.create-7.note-2' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.create-7.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.create-7.sentence-2' class='sentence'>These functions will typically allocate more memory than <span class='texttt'>sizeof(T)</span> to
allow for internal bookkeeping structures such as reference counts<a class='hidden_link' href='#util.smartptr.shared.create-7.sentence-2'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div class='itemdecl' id='util.smartptr.shared.create-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.create-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class... Args&gt;
  shared_ptr&lt;T&gt; make_shared(Args&amp;&amp;... args);                    <span class='comment'>// <span class='texttt'>T</span> is not array
</span>template&lt;class T, class A, class... Args&gt;
  shared_ptr&lt;T&gt; allocate_shared(const A&amp; a, Args&amp;&amp;... args);    <span class='comment'>// <span class='texttt'>T</span> is not array
</span></code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.create-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9782'>#</a></div><div id='util.smartptr.shared.create-8.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> to an object of type <span class='texttt'>T</span>
with an initial value <span class='texttt'>T(forward&lt;Args&gt;(args)...)</span><a class='hidden_link' href='#util.smartptr.shared.create-8.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9786'>#</a></div><div id='util.smartptr.shared.create-9.sentence-1' class='sentence'><span class='textit'>Remarks:</span> These overloads shall only participate in overload resolution
when <span class='texttt'>T</span> is not an array type<a class='hidden_link' href='#util.smartptr.shared.create-9.sentence-1'>.</a></div> <div id='util.smartptr.shared.create-9.sentence-2' class='sentence'>The <span class='texttt'>shared_&shy;ptr</span> constructors called by these functions
enable <span class='texttt'>shared_&shy;from_&shy;this</span>
with the address of the newly constructed object of type <span class='texttt'>T</span><a class='hidden_link' href='#util.smartptr.shared.create-9.sentence-2'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9793'>#</a></div><div id='util.smartptr.shared.create-10.example-1' class='example'>[<span style='white-space:nowrap'>â€‰</span><a class='example_link' href='#util.smartptr.shared.create-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
shared_ptr&lt;int&gt; p = make_shared&lt;int&gt;(); <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to <span class='tcode_in_codeblock'>int()</span>
</span>shared_ptr&lt;vector&lt;int&gt;&gt; q = make_shared&lt;vector&lt;int&gt;&gt;(16, 1);
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to vector of <span class='tcode_in_codeblock'>16</span> elements with value <span class='tcode_in_codeblock'>1</span>
</span></pre> â€”<span style='white-space:nowrap'>â€‰</span><i>end example</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div class='itemdecl' id='util.smartptr.shared.create-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.create-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt; shared_ptr&lt;T&gt;
  make_shared(size_t N);                                        <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span>
</span>template&lt;class T, class A&gt;
  shared_ptr&lt;T&gt; allocate_shared(const A&amp; a, size_t N);          <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span>
</span></code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.create-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9811'>#</a></div><div id='util.smartptr.shared.create-11.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> to an object of type <span class='texttt'>U[N]</span>
with a default initial value,
where <span class='texttt'>U</span> is <span class='texttt'>remove_&shy;extent_&shy;t&lt;T&gt;</span><a class='hidden_link' href='#util.smartptr.shared.create-11.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9816'>#</a></div><div id='util.smartptr.shared.create-12.sentence-1' class='sentence'><span class='textit'>Remarks:</span> These overloads shall only participate in overload resolution
when <span class='texttt'>T</span> is of the form <span class='texttt'>U[]</span><a class='hidden_link' href='#util.smartptr.shared.create-12.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-13'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9820'>#</a></div><div id='util.smartptr.shared.create-13.example-1' class='example'>[<span style='white-space:nowrap'>â€‰</span><a class='example_link' href='#util.smartptr.shared.create-13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
shared_ptr&lt;double[]&gt; p = make_shared&lt;double[]&gt;(1024);
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[1024]</span>
</span>shared_ptr&lt;double[][2][2]&gt; q = make_shared&lt;double[][2][2]&gt;(6);
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[6][2][2]</span>
</span></pre> â€”<span style='white-space:nowrap'>â€‰</span><i>end example</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:make_shared'></a></span><span class='indexparent'><a class='index' id='lib:allocate_shared'></a></span><div class='itemdecl' id='util.smartptr.shared.create-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.create-itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt;
  shared_ptr&lt;T&gt; make_shared();                                  <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span>
</span>template&lt;class T, class A&gt;
  shared_ptr&lt;T&gt; allocate_shared(const A&amp; a);                    <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span>
</span></code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.create-14'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9841'>#</a></div><div id='util.smartptr.shared.create-14.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> to an object of type <span class='texttt'>T</span>
with a default initial value<a class='hidden_link' href='#util.smartptr.shared.create-14.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-15'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9845'>#</a></div><div id='util.smartptr.shared.create-15.sentence-1' class='sentence'><span class='textit'>Remarks:</span> These overloads shall only participate in overload resolution
when <span class='texttt'>T</span> is of the form <span class='texttt'>U[N]</span><a class='hidden_link' href='#util.smartptr.shared.create-15.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-16'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9849'>#</a></div><div id='util.smartptr.shared.create-16.example-1' class='example'>[<span style='white-space:nowrap'>â€‰</span><a class='example_link' href='#util.smartptr.shared.create-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
shared_ptr&lt;double[1024]&gt; p = make_shared&lt;double[1024]&gt;();
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[1024]</span>
</span>shared_ptr&lt;double[6][2][2]&gt; q = make_shared&lt;double[6][2][2]&gt;();
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[6][2][2]</span>
</span></pre> â€”<span style='white-space:nowrap'>â€‰</span><i>end example</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:make_shared_'></a></span><span class='indexparent'><a class='index' id='lib:allocate_shared_'></a></span><div class='itemdecl' id='util.smartptr.shared.create-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.create-itemdecl:5'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt;
  shared_ptr&lt;T&gt; make_shared(size_t N,
                            const remove_extent_t&lt;T&gt;&amp; u);       <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span>
</span>template&lt;class T, class A&gt;
  shared_ptr&lt;T&gt; allocate_shared(const A&amp; a, size_t N,
                                const remove_extent_t&lt;T&gt;&amp; u);   <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span>
</span></code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.create-17'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9872'>#</a></div><div id='util.smartptr.shared.create-17.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> to an object of type <span class='texttt'>U[N]</span>,
where <span class='texttt'>U</span> is <span class='texttt'>remove_&shy;extent_&shy;t&lt;T&gt;</span> and
each array element has an initial value of <span class='texttt'>u</span><a class='hidden_link' href='#util.smartptr.shared.create-17.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-18'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9877'>#</a></div><div id='util.smartptr.shared.create-18.sentence-1' class='sentence'><span class='textit'>Remarks:</span> These overloads shall only participate in overload resolution
when <span class='texttt'>T</span> is of the form <span class='texttt'>U[]</span><a class='hidden_link' href='#util.smartptr.shared.create-18.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-19'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9881'>#</a></div><div id='util.smartptr.shared.create-19.example-1' class='example'>[<span style='white-space:nowrap'>â€‰</span><a class='example_link' href='#util.smartptr.shared.create-19.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
shared_ptr&lt;double[]&gt; p = make_shared&lt;double[]&gt;(1024, 1.0);
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a <span class='tcode_in_codeblock'>double[1024]</span>, where each element is <span class='tcode_in_codeblock'>1.0</span>
</span>shared_ptr&lt;double[][2]&gt; q = make_shared&lt;double[][2]&gt;(6, {1.0, 0.0});
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a <span class='tcode_in_codeblock'>double[6][2]</span>, where each <span class='tcode_in_codeblock'>double[2]</span> element is <span class='tcode_in_codeblock'>{1.0, 0.0}</span>
</span>shared_ptr&lt;vector&lt;int&gt;[]&gt; r = make_shared&lt;vector&lt;int&gt;[]&gt;(4, {1, 2});
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a <span class='tcode_in_codeblock'>vector&lt;int&gt;[4]</span>, where each vector has contents <span class='tcode_in_codeblock'>{1, 2}</span>
</span></pre> â€”<span style='white-space:nowrap'>â€‰</span><i>end example</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:make_shared__'></a></span><span class='indexparent'><a class='index' id='lib:allocate_shared__'></a></span><div class='itemdecl' id='util.smartptr.shared.create-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.create-itemdecl:6'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt;
  shared_ptr&lt;T&gt; make_shared(const remove_extent_t&lt;T&gt;&amp; u);       <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span>
</span>template&lt;class T, class A&gt;
  shared_ptr&lt;T&gt; allocate_shared(const A&amp; a,
                                const remove_extent_t&lt;T&gt;&amp; u);   <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span>
</span></code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.create-20'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9905'>#</a></div><div id='util.smartptr.shared.create-20.sentence-1' class='sentence'><span class='textit'>Returns:</span> A <span class='texttt'>shared_&shy;ptr</span> to an object of type <span class='texttt'>T</span>,
where each array element of type <span class='texttt'>remove_&shy;extent_&shy;t&lt;T&gt;</span>
has an initial value of <span class='texttt'>u</span><a class='hidden_link' href='#util.smartptr.shared.create-20.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-21'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9910'>#</a></div><div id='util.smartptr.shared.create-21.sentence-1' class='sentence'><span class='textit'>Remarks:</span> These overloads shall only participate in overload resolution
when <span class='texttt'>T</span> is of the form <span class='texttt'>U[N]</span><a class='hidden_link' href='#util.smartptr.shared.create-21.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.create-22'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9914'>#</a></div><div id='util.smartptr.shared.create-22.example-1' class='example'>[<span style='white-space:nowrap'>â€‰</span><a class='example_link' href='#util.smartptr.shared.create-22.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
shared_ptr&lt;double[1024]&gt; p = make_shared&lt;double[1024]&gt;(1.0);
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a <span class='tcode_in_codeblock'>double[1024]</span>, where each element is <span class='tcode_in_codeblock'>1.0</span>
</span>shared_ptr&lt;double[6][2]&gt; q = make_shared&lt;double[6][2]&gt;({1.0, 0.0});
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a <span class='tcode_in_codeblock'>double[6][2]</span>, where each double[2] element is <span class='tcode_in_codeblock'>{1.0, 0.0}</span>
</span>shared_ptr&lt;vector&lt;int&gt;[4]&gt; r = make_shared&lt;vector&lt;int&gt;[4]&gt;({1, 2});
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_&shy;ptr</span> to a <span class='tcode_in_codeblock'>vector&lt;int&gt;[4]</span>, where each vector has contents <span class='tcode_in_codeblock'>{1, 2}</span>
</span></pre> â€”<span style='white-space:nowrap'>â€‰</span><i>end example</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div></div><div id='util.smartptr.shared.cmp' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.cmp' style='min-width:118pt'>19.11.3.7</a> Comparison <a class='abbr_ref' href='util.smartptr.shared.cmp'>[util.smartptr.shared.cmp]</a></h4><span class='indexparent'><a class='index' id='lib:operator==,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator=='></a></span><div class='itemdecl' id='util.smartptr.shared.cmp-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.cmp-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class U&gt;
  bool operator==(const shared_ptr&lt;T&gt;&amp; a, const shared_ptr&lt;U&gt;&amp; b) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.cmp-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9936'>#</a></div><div id='util.smartptr.shared.cmp-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>a.get() == b.get()</span><a class='hidden_link' href='#util.smartptr.shared.cmp-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator<,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator<'></a></span><div class='itemdecl' id='util.smartptr.shared.cmp-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.cmp-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class U&gt;
  bool operator&lt;(const shared_ptr&lt;T&gt;&amp; a, const shared_ptr&lt;U&gt;&amp; b) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.cmp-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9947'>#</a></div><div id='util.smartptr.shared.cmp-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>less&lt;&gt;()(a.get(), b.get())</span><a class='hidden_link' href='#util.smartptr.shared.cmp-2.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.cmp-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9950'>#</a></div><div id='util.smartptr.shared.cmp-3.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.cmp-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.cmp-3.sentence-1' class='sentence'>Defining a comparison function allows <span class='texttt'>shared_&shy;ptr</span> objects to be
used as keys in associative containers<a class='hidden_link' href='#util.smartptr.shared.cmp-3.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div id='lib:shared_ptr,operator=='><div id='lib:operator==,shared_ptr'>
<div class='itemdecl' id='util.smartptr.shared.cmp-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.cmp-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt;
  bool operator==(const shared_ptr&lt;T&gt;&amp; a, nullptr_t) noexcept;
template&lt;class T&gt;
  bool operator==(nullptr_t, const shared_ptr&lt;T&gt;&amp; a) noexcept;
</code></div>
</div></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.cmp-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9967'>#</a></div><div id='util.smartptr.shared.cmp-4.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>!a</span><a class='hidden_link' href='#util.smartptr.shared.cmp-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator!=,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator!='></a></span><div class='itemdecl' id='util.smartptr.shared.cmp-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.cmp-itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt;
  bool operator!=(const shared_ptr&lt;T&gt;&amp; a, nullptr_t) noexcept;
template&lt;class T&gt;
  bool operator!=(nullptr_t, const shared_ptr&lt;T&gt;&amp; a) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.cmp-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9980'>#</a></div><div id='util.smartptr.shared.cmp-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>(bool)a</span><a class='hidden_link' href='#util.smartptr.shared.cmp-5.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator<,shared_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator<_'></a></span><div class='itemdecl' id='util.smartptr.shared.cmp-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.cmp-itemdecl:5'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt;
  bool operator&lt;(const shared_ptr&lt;T&gt;&amp; a, nullptr_t) noexcept;
template&lt;class T&gt;
  bool operator&lt;(nullptr_t, const shared_ptr&lt;T&gt;&amp; a) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.cmp-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L9993'>#</a></div><div id='util.smartptr.shared.cmp-6.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
The first function template returns
<pre class='codeblock'>
less&lt;typename shared_ptr&lt;T&gt;::element_type*&gt;()(a.get(), nullptr)</pre>
The second function template returns
<pre class='codeblock'>
less&lt;typename shared_ptr&lt;T&gt;::element_type*&gt;()(nullptr, a.get())</pre></div></div></div><span class='indexparent'><a class='index' id='lib:operator>,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator>'></a></span><div class='itemdecl' id='util.smartptr.shared.cmp-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.cmp-itemdecl:6'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt;
  bool operator&gt;(const shared_ptr&lt;T&gt;&amp; a, nullptr_t) noexcept;
template&lt;class T&gt;
  bool operator&gt;(nullptr_t, const shared_ptr&lt;T&gt;&amp; a) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.cmp-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10014'>#</a></div><div id='util.smartptr.shared.cmp-7.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
The first function template returns <span class='texttt'>nullptr &lt; a</span><a class='hidden_link' href='#util.smartptr.shared.cmp-7.sentence-1'>.</a></div> <div id='util.smartptr.shared.cmp-7.sentence-2' class='sentence'>The second function template returns <span class='texttt'>a &lt; nullptr</span><a class='hidden_link' href='#util.smartptr.shared.cmp-7.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator<=,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator<='></a></span><div class='itemdecl' id='util.smartptr.shared.cmp-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.cmp-itemdecl:7'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt;
  bool operator&lt;=(const shared_ptr&lt;T&gt;&amp; a, nullptr_t) noexcept;
template&lt;class T&gt;
  bool operator&lt;=(nullptr_t, const shared_ptr&lt;T&gt;&amp; a) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.cmp-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10029'>#</a></div><div id='util.smartptr.shared.cmp-8.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
The first function template returns <span class='texttt'>!(nullptr &lt; a)</span><a class='hidden_link' href='#util.smartptr.shared.cmp-8.sentence-1'>.</a></div> <div id='util.smartptr.shared.cmp-8.sentence-2' class='sentence'>The second function template returns <span class='texttt'>!(a &lt; nullptr)</span><a class='hidden_link' href='#util.smartptr.shared.cmp-8.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator>=,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator>='></a></span><div class='itemdecl' id='util.smartptr.shared.cmp-itemdecl:8'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.cmp-itemdecl:8'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt;
  bool operator&gt;=(const shared_ptr&lt;T&gt;&amp; a, nullptr_t) noexcept;
template&lt;class T&gt;
  bool operator&gt;=(nullptr_t, const shared_ptr&lt;T&gt;&amp; a) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.cmp-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10044'>#</a></div><div id='util.smartptr.shared.cmp-9.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
The first function template returns <span class='texttt'>!(a &lt; nullptr)</span><a class='hidden_link' href='#util.smartptr.shared.cmp-9.sentence-1'>.</a></div> <div id='util.smartptr.shared.cmp-9.sentence-2' class='sentence'>The second function template returns <span class='texttt'>!(nullptr &lt; a)</span><a class='hidden_link' href='#util.smartptr.shared.cmp-9.sentence-2'>.</a></div></div></div></div><div id='util.smartptr.shared.spec' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.spec' style='min-width:118pt'>19.11.3.8</a> Specialized algorithms <a class='abbr_ref' href='util.smartptr.shared.spec'>[util.smartptr.shared.spec]</a></h4><span class='indexparent'><a class='index' id='lib:swap,shared_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,swap_'></a></span><div class='itemdecl' id='util.smartptr.shared.spec-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.spec-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt;
  void swap(shared_ptr&lt;T&gt;&amp; a, shared_ptr&lt;T&gt;&amp; b) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.spec-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.spec-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10059'>#</a></div><div id='util.smartptr.shared.spec-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>a.swap(b)</span><a class='hidden_link' href='#util.smartptr.shared.spec-1.sentence-1'>.</a></div></div></div></div><div id='util.smartptr.shared.cast' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.cast' style='min-width:118pt'>19.11.3.9</a> Casts <a class='abbr_ref' href='util.smartptr.shared.cast'>[util.smartptr.shared.cast]</a></h4><span class='indexparent'><a class='index' id='lib:static_pointer_cast,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,static_pointer_cast'></a></span><div class='itemdecl' id='util.smartptr.shared.cast-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.cast-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class U&gt;
  shared_ptr&lt;T&gt; static_pointer_cast(const shared_ptr&lt;U&gt;&amp; r) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.cast-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10071'>#</a></div><div id='util.smartptr.shared.cast-1.sentence-1' class='sentence'><span class='textit'>Requires:</span> The expression <span class='texttt'>static_&shy;cast&lt;T*&gt;((U*)nullptr)</span> shall
be well-formed<a class='hidden_link' href='#util.smartptr.shared.cast-1.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.cast-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10075'>#</a></div><div id='util.smartptr.shared.cast-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<pre class='codeblock'>
shared_ptr&lt;T&gt;(r, static_cast&lt;typename shared_ptr&lt;T&gt;::element_type*&gt;(r.get()))</pre></div></div></div><div class='para' id='util.smartptr.shared.cast-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10081'>#</a></div><div id='util.smartptr.shared.cast-3.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.cast-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.cast-3.sentence-1' class='sentence'>The seemingly equivalent expression
<span class='texttt'>shared_&shy;ptr&lt;T&gt;(static_&shy;cast&lt;T*&gt;(r.get()))</span>
will eventually result in undefined behavior, attempting to delete the
same object twice<a class='hidden_link' href='#util.smartptr.shared.cast-3.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:dynamic_pointer_cast,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,dynamic_pointer_cast'></a></span><div class='itemdecl' id='util.smartptr.shared.cast-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.cast-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class U&gt;
  shared_ptr&lt;T&gt; dynamic_pointer_cast(const shared_ptr&lt;U&gt;&amp; r) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.cast-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10097'>#</a></div><div id='util.smartptr.shared.cast-4.sentence-1' class='sentence'><span class='textit'>Requires:</span> The expression <span class='texttt'>dynamic_&shy;cast&lt;T*&gt;((U*)nullptr)</span>
shall be well-formed<a class='hidden_link' href='#util.smartptr.shared.cast-4.sentence-1'>.</a></div> <div id='util.smartptr.shared.cast-4.sentence-2' class='sentence'>The expression <span class='texttt'>dynamic_&shy;cast&lt;typename shared_&shy;ptr&lt;T&gt;&#x200b;::&#x200b;element_&shy;type*&gt;(r.get())</span>
shall be well formed and shall have well-defined behavior<a class='hidden_link' href='#util.smartptr.shared.cast-4.sentence-2'>.</a></div></div></div><div class='para' id='util.smartptr.shared.cast-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10103'>#</a></div><div id='util.smartptr.shared.cast-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<ul class='itemize'><li id='util.smartptr.shared.cast-5.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.cast-5.1'>(5.1)</a></div><div id='util.smartptr.shared.cast-5.1.sentence-1' class='sentence'>When <span class='texttt'>dynamic_&shy;cast&lt;typename shared_&shy;ptr&lt;T&gt;&#x200b;::&#x200b;element_&shy;type*&gt;(r.get())</span>
returns a non-null value <span class='texttt'>p</span>, <span class='texttt'>shared_&shy;ptr&lt;T&gt;(r, p)</span><a class='hidden_link' href='#util.smartptr.shared.cast-5.1.sentence-1'>.</a></div></li><li id='util.smartptr.shared.cast-5.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.shared.cast-5.2'>(5.2)</a></div><div id='util.smartptr.shared.cast-5.2.sentence-1' class='sentence'>Otherwise, <span class='texttt'>shared_&shy;ptr&lt;T&gt;()</span><a class='hidden_link' href='#util.smartptr.shared.cast-5.2.sentence-1'>.</a></div></li></ul></div></div></div><div class='para' id='util.smartptr.shared.cast-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10111'>#</a></div><div id='util.smartptr.shared.cast-6.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.cast-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.cast-6.sentence-1' class='sentence'>The seemingly equivalent expression
<span class='texttt'>shared_&shy;ptr&lt;T&gt;(dynamic_&shy;cast&lt;T*&gt;(r.get()))</span> will eventually result in
undefined behavior, attempting to delete the same object twice<a class='hidden_link' href='#util.smartptr.shared.cast-6.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div id='lib:shared_ptr,const_pointer_cast'><div id='lib:const_pointer_cast,shared_ptr'>
<div class='itemdecl' id='util.smartptr.shared.cast-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.cast-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class U&gt;
  shared_ptr&lt;T&gt; const_pointer_cast(const shared_ptr&lt;U&gt;&amp; r) noexcept;
</code></div>
</div></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.cast-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10127'>#</a></div><div id='util.smartptr.shared.cast-7.sentence-1' class='sentence'><span class='textit'>Requires:</span> The expression <span class='texttt'>const_&shy;cast&lt;T*&gt;((U*)nullptr)</span> shall
be well-formed<a class='hidden_link' href='#util.smartptr.shared.cast-7.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.cast-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10131'>#</a></div><div id='util.smartptr.shared.cast-8.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<pre class='codeblock'>
shared_ptr&lt;T&gt;(r, const_cast&lt;typename shared_ptr&lt;T&gt;::element_type*&gt;(r.get()))</pre></div></div></div><div class='para' id='util.smartptr.shared.cast-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10137'>#</a></div><div id='util.smartptr.shared.cast-9.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.cast-9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.cast-9.sentence-1' class='sentence'>The seemingly equivalent expression
<span class='texttt'>shared_&shy;ptr&lt;T&gt;(const_&shy;cast&lt;T*&gt;(r.get()))</span> will eventually result in
undefined behavior, attempting to delete the same object twice<a class='hidden_link' href='#util.smartptr.shared.cast-9.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:reinterpret_pointer_cast,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,reinterpret_pointer_cast'></a></span><div class='itemdecl' id='util.smartptr.shared.cast-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.cast-itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class U&gt;
  shared_ptr&lt;T&gt; reinterpret_pointer_cast(const shared_ptr&lt;U&gt;&amp; r) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.cast-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10152'>#</a></div><div id='util.smartptr.shared.cast-10.sentence-1' class='sentence'><span class='textit'>Requires:</span> The expression <span class='texttt'>reinterpret_&shy;cast&lt;T*&gt;((U*)nullptr)</span>
shall be well-formed<a class='hidden_link' href='#util.smartptr.shared.cast-10.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.shared.cast-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10156'>#</a></div><div id='util.smartptr.shared.cast-11.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<pre class='codeblock'>
shared_ptr&lt;T&gt;(r, reinterpret_cast&lt;typename shared_ptr&lt;T&gt;::element_type*&gt;(r.get()))</pre></div></div></div><div class='para' id='util.smartptr.shared.cast-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10161'>#</a></div><div id='util.smartptr.shared.cast-12.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.shared.cast-12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.shared.cast-12.sentence-1' class='sentence'>The seemingly equivalent expression
<span class='texttt'>shared_&shy;ptr&lt;T&gt;(reinterpret_&shy;cast&lt;T*&gt;(r.get()))</span> will eventually result in
undefined behavior, attempting to delete the same object twice<a class='hidden_link' href='#util.smartptr.shared.cast-12.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div></div><div id='util.smartptr.getdeleter' class='section'><h4 ><a class='secnum' href='#util.smartptr.getdeleter' style='min-width:118pt'>19.11.3.10</a> <span class='texttt'>get_&shy;deleter</span> <a class='abbr_ref' href='util.smartptr.getdeleter'>[util.smartptr.getdeleter]</a></h4><span class='indexparent'><a class='index' id='lib:get_deleter,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,get_deleter'></a></span><div class='itemdecl' id='util.smartptr.getdeleter-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.getdeleter-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class D, class T&gt;
  D* get_deleter(const shared_ptr&lt;T&gt;&amp; p) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.getdeleter-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.getdeleter-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10178'>#</a></div><div id='util.smartptr.getdeleter-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> If <span class='texttt'>p</span> owns a deleter <span class='texttt'>d</span> of type cv-unqualified
<span class='texttt'>D</span>, returns <span class='texttt'>addressof(d)</span>; otherwise returns <span class='texttt'>nullptr</span><a class='hidden_link' href='#util.smartptr.getdeleter-1.sentence-1'>.</a></div> <div id='util.smartptr.getdeleter-1.sentence-2' class='sentence'>The returned
pointer remains valid as long as there exists a <span class='texttt'>shared_&shy;ptr</span> instance
that owns <span class='texttt'>d</span><a class='hidden_link' href='#util.smartptr.getdeleter-1.sentence-2'>.</a></div> <div id='util.smartptr.getdeleter-1.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.getdeleter-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.getdeleter-1.sentence-3' class='sentence'>It is unspecified whether the pointer
remains valid longer than that<a class='hidden_link' href='#util.smartptr.getdeleter-1.sentence-3'>.</a></div> <div id='util.smartptr.getdeleter-1.sentence-4' class='sentence'>This can happen if the implementation doesn't destroy
the deleter until all <span class='texttt'>weak_&shy;ptr</span> instances that share ownership with
<span class='texttt'>p</span> have been destroyed<a class='hidden_link' href='#util.smartptr.getdeleter-1.sentence-4'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div></div><div id='util.smartptr.shared.io' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.io' style='min-width:118pt'>19.11.3.11</a> I/O <a class='abbr_ref' href='util.smartptr.shared.io'>[util.smartptr.shared.io]</a></h4><span class='indexparent'><a class='index' id='lib:operator<<,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator<<'></a></span><div class='itemdecl' id='util.smartptr.shared.io-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.shared.io-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class E, class T, class Y&gt;
  basic_ostream&lt;E, T&gt;&amp; operator&lt;&lt;(basic_ostream&lt;E, T&gt;&amp; os, const shared_ptr&lt;Y&gt;&amp; p);
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.shared.io-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.io-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10197'>#</a></div><div id='util.smartptr.shared.io-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> As if by: <span class='texttt'>os &lt;&lt; p.get();</span></div></div></div><div class='para' id='util.smartptr.shared.io-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.io-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10199'>#</a></div><div id='util.smartptr.shared.io-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>os</span><a class='hidden_link' href='#util.smartptr.shared.io-2.sentence-1'>.</a></div></div></div></div></div><div id='util.smartptr.weak' class='section'><h3 ><a class='secnum' href='#util.smartptr.weak' style='min-width:103pt'>19.11.4</a> Class template <span class='texttt'>weak_&shy;ptr</span> <a class='abbr_ref' href='util.smartptr.weak'>[util.smartptr.weak]</a></h3><div class='para' id='util.smartptr.weak-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10204'>#</a></div><div id='util.smartptr.weak-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id='lib:weak_ptr_'></a></span>The <span class='texttt'>weak_&shy;ptr</span> class template stores a weak reference to an object
that is already managed by a <span class='texttt'>shared_&shy;ptr</span><a class='hidden_link' href='#util.smartptr.weak-1.sentence-1'>.</a></div> <div id='util.smartptr.weak-1.sentence-2' class='sentence'>To access the object, a
<span class='texttt'>weak_&shy;ptr</span> can be converted to a <span class='texttt'>shared_&shy;ptr</span> using the member
function <span class='texttt'>lock</span><a class='hidden_link' href='#util.smartptr.weak-1.sentence-2'>.</a></div><pre class='codeblock'>
namespace std {
  template&lt;class T&gt; class weak_ptr {
  public:
    using element_type = remove_extent_t&lt;T&gt;;

    <span class='comment'>// <a href='#util.smartptr.weak.const'>[util.smartptr.weak.const]</a>, constructors
</span>    constexpr weak_ptr() noexcept;
    template&lt;class Y&gt;
      weak_ptr(const shared_ptr&lt;Y&gt;&amp; r) noexcept;
    weak_ptr(const weak_ptr&amp; r) noexcept;
    template&lt;class Y&gt;
      weak_ptr(const weak_ptr&lt;Y&gt;&amp; r) noexcept;
    weak_ptr(weak_ptr&amp;&amp; r) noexcept;
    template&lt;class Y&gt;
      weak_ptr(weak_ptr&lt;Y&gt;&amp;&amp; r) noexcept;

    <span class='comment'>// <a href='#util.smartptr.weak.dest'>[util.smartptr.weak.dest]</a>, destructor
</span>    ~weak_ptr();

    <span class='comment'>// <a href='#util.smartptr.weak.assign'>[util.smartptr.weak.assign]</a>, assignment
</span>    weak_ptr&amp; operator=(const weak_ptr&amp; r) noexcept;
    template&lt;class Y&gt;
      weak_ptr&amp; operator=(const weak_ptr&lt;Y&gt;&amp; r) noexcept;
    template&lt;class Y&gt;
      weak_ptr&amp; operator=(const shared_ptr&lt;Y&gt;&amp; r) noexcept;
    weak_ptr&amp; operator=(weak_ptr&amp;&amp; r) noexcept;
    template&lt;class Y&gt;
      weak_ptr&amp; operator=(weak_ptr&lt;Y&gt;&amp;&amp; r) noexcept;

    <span class='comment'>// <a href='#util.smartptr.weak.mod'>[util.smartptr.weak.mod]</a>, modifiers
</span>    void swap(weak_ptr&amp; r) noexcept;
    void reset() noexcept;

    <span class='comment'>// <a href='#util.smartptr.weak.obs'>[util.smartptr.weak.obs]</a>, observers
</span>    long use_count() const noexcept;
    bool expired() const noexcept;
    shared_ptr&lt;T&gt; lock() const noexcept;
    template&lt;class U&gt;
      bool owner_before(const shared_ptr&lt;U&gt;&amp; b) const noexcept;
    template&lt;class U&gt;
      bool owner_before(const weak_ptr&lt;U&gt;&amp; b) const noexcept;
  };

  template&lt;class T&gt;
    weak_ptr(shared_ptr&lt;T&gt;) -&gt; weak_ptr&lt;T&gt;;

  <span class='comment'>// <a href='#util.smartptr.weak.spec'>[util.smartptr.weak.spec]</a>, specialized algorithms
</span>  template&lt;class T&gt;
    void swap(weak_ptr&lt;T&gt;&amp; a, weak_ptr&lt;T&gt;&amp; b) noexcept;
}</pre></div><div class='para' id='util.smartptr.weak-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10264'>#</a></div><div id='util.smartptr.weak-2.sentence-1' class='sentence'>Specializations of <span class='texttt'>weak_&shy;ptr</span> shall be <span class='textit'>Cpp17CopyConstructible</span> and
<span class='textit'>Cpp17CopyAssignable</span>, allowing their use in standard
containers<a class='hidden_link' href='#util.smartptr.weak-2.sentence-1'>.</a></div> <div id='util.smartptr.weak-2.sentence-2' class='sentence'>The template parameter <span class='texttt'>T</span> of <span class='texttt'>weak_&shy;ptr</span> may be an
incomplete type<a class='hidden_link' href='#util.smartptr.weak-2.sentence-2'>.</a></div></div><div id='util.smartptr.weak.const' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.const' style='min-width:118pt'>19.11.4.1</a> Constructors <a class='abbr_ref' href='util.smartptr.weak.const'>[util.smartptr.weak.const]</a></h4><span class='indexparent'><a class='index' id='lib:weak_ptr,constructor'></a></span><div class='itemdecl' id='util.smartptr.weak.const-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.const-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>constexpr weak_ptr() noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.const-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10278'>#</a></div><div id='util.smartptr.weak.const-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs an empty <span class='texttt'>weak_&shy;ptr</span> object<a class='hidden_link' href='#util.smartptr.weak.const-1.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.weak.const-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10280'>#</a></div><div id='util.smartptr.weak.const-2.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>use_&shy;count() == 0</span><a class='hidden_link' href='#util.smartptr.weak.const-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:weak_ptr,constructor_'></a></span><div class='itemdecl' id='util.smartptr.weak.const-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.const-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>weak_ptr(const weak_ptr&amp; r) noexcept;
template&lt;class Y&gt; weak_ptr(const weak_ptr&lt;Y&gt;&amp; r) noexcept;
template&lt;class Y&gt; weak_ptr(const shared_ptr&lt;Y&gt;&amp; r) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.const-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10291'>#</a></div><div id='util.smartptr.weak.const-3.sentence-1' class='sentence'><span class='textit'>Remarks:</span> The second and third constructors shall not participate in
overload resolution unless <span class='texttt'>Y*</span> is compatible with <span class='texttt'>T*</span><a class='hidden_link' href='#util.smartptr.weak.const-3.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.weak.const-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10294'>#</a></div><div id='util.smartptr.weak.const-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> If <span class='texttt'>r</span> is empty, constructs
an empty <span class='texttt'>weak_&shy;ptr</span> object; otherwise, constructs
a <span class='texttt'>weak_&shy;ptr</span> object that shares ownership
with <span class='texttt'>r</span> and stores a copy of the pointer stored in <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.weak.const-4.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.weak.const-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10299'>#</a></div><div id='util.smartptr.weak.const-5.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>use_&shy;count() == r.use_&shy;count()</span><a class='hidden_link' href='#util.smartptr.weak.const-5.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:weak_ptr,constructor__'></a></span><div class='itemdecl' id='util.smartptr.weak.const-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.const-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>weak_ptr(weak_ptr&amp;&amp; r) noexcept;
template&lt;class Y&gt; weak_ptr(weak_ptr&lt;Y&gt;&amp;&amp; r) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.const-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10309'>#</a></div><div id='util.smartptr.weak.const-6.sentence-1' class='sentence'><span class='textit'>Remarks:</span> The second constructor shall not participate in overload resolution unless
<span class='texttt'>Y*</span> is compatible with <span class='texttt'>T*</span><a class='hidden_link' href='#util.smartptr.weak.const-6.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.weak.const-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10312'>#</a></div><div id='util.smartptr.weak.const-7.sentence-1' class='sentence'><span class='textit'>Effects:</span> Move constructs a <span class='texttt'>weak_&shy;ptr</span> instance from <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.weak.const-7.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.weak.const-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10314'>#</a></div><div id='util.smartptr.weak.const-8.sentence-1' class='sentence'><span class='textit'>Ensures:</span> <span class='texttt'>*this</span> shall contain the old value of <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.weak.const-8.sentence-1'>.</a></div> <div id='util.smartptr.weak.const-8.sentence-2' class='sentence'><span class='texttt'>r</span> shall be empty<a class='hidden_link' href='#util.smartptr.weak.const-8.sentence-2'>.</a></div> <div id='util.smartptr.weak.const-8.sentence-3' class='sentence'><span class='texttt'>r.use_&shy;count() == 0</span><a class='hidden_link' href='#util.smartptr.weak.const-8.sentence-3'>.</a></div></div></div></div><div id='util.smartptr.weak.dest' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.dest' style='min-width:118pt'>19.11.4.2</a> Destructor <a class='abbr_ref' href='util.smartptr.weak.dest'>[util.smartptr.weak.dest]</a></h4><div id='lib:weak_ptr,destructor'>
<div class='itemdecl' id='util.smartptr.weak.dest-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.dest-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>~weak_ptr();
</code></div>
</div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.dest-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.dest-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10327'>#</a></div><div id='util.smartptr.weak.dest-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Destroys this <span class='texttt'>weak_&shy;ptr</span> object but has no
effect on the object its stored pointer points to<a class='hidden_link' href='#util.smartptr.weak.dest-1.sentence-1'>.</a></div></div></div></div><div id='util.smartptr.weak.assign' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.assign' style='min-width:118pt'>19.11.4.3</a> Assignment <a class='abbr_ref' href='util.smartptr.weak.assign'>[util.smartptr.weak.assign]</a></h4><span class='indexparent'><a class='index' id='lib:operator=,weak_ptr'></a></span><span class='indexparent'><a class='index' id='lib:weak_ptr,operator='></a></span><div class='itemdecl' id='util.smartptr.weak.assign-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.assign-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>weak_ptr&amp; operator=(const weak_ptr&amp; r) noexcept;
template&lt;class Y&gt; weak_ptr&amp; operator=(const weak_ptr&lt;Y&gt;&amp; r) noexcept;
template&lt;class Y&gt; weak_ptr&amp; operator=(const shared_ptr&lt;Y&gt;&amp; r) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.assign-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.assign-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10341'>#</a></div><div id='util.smartptr.weak.assign-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>weak_&shy;ptr(r).swap(*this)</span><a class='hidden_link' href='#util.smartptr.weak.assign-1.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.weak.assign-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.assign-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10343'>#</a></div><div id='util.smartptr.weak.assign-2.sentence-1' class='sentence'><span class='textit'>Remarks:</span> The implementation may meet the effects (and the
implied guarantees) via different means, without creating a temporary object<a class='hidden_link' href='#util.smartptr.weak.assign-2.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.weak.assign-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.assign-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10346'>#</a></div><div id='util.smartptr.weak.assign-3.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#util.smartptr.weak.assign-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator=,weak_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:weak_ptr,operator=_'></a></span><div class='itemdecl' id='util.smartptr.weak.assign-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.assign-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>weak_ptr&amp; operator=(weak_ptr&amp;&amp; r) noexcept;
template&lt;class Y&gt; weak_ptr&amp; operator=(weak_ptr&lt;Y&gt;&amp;&amp; r) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.assign-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.assign-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10356'>#</a></div><div id='util.smartptr.weak.assign-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>weak_&shy;ptr(std&#x200b;::&#x200b;move(r)).swap(*this)</span><a class='hidden_link' href='#util.smartptr.weak.assign-4.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.weak.assign-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.assign-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10358'>#</a></div><div id='util.smartptr.weak.assign-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#util.smartptr.weak.assign-5.sentence-1'>.</a></div></div></div></div><div id='util.smartptr.weak.mod' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.mod' style='min-width:118pt'>19.11.4.4</a> Modifiers <a class='abbr_ref' href='util.smartptr.weak.mod'>[util.smartptr.weak.mod]</a></h4><span class='indexparent'><a class='index' id='lib:swap,weak_ptr'></a></span><span class='indexparent'><a class='index' id='lib:weak_ptr,swap'></a></span><div class='itemdecl' id='util.smartptr.weak.mod-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.mod-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>void swap(weak_ptr&amp; r) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.mod-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.mod-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10368'>#</a></div><div id='util.smartptr.weak.mod-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Exchanges the contents of <span class='texttt'>*this</span> and <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.weak.mod-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:reset,weak_ptr'></a></span><span class='indexparent'><a class='index' id='lib:weak_ptr,reset'></a></span><div class='itemdecl' id='util.smartptr.weak.mod-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.mod-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>void reset() noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.mod-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.mod-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10377'>#</a></div><div id='util.smartptr.weak.mod-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>weak_&shy;ptr().swap(*this)</span><a class='hidden_link' href='#util.smartptr.weak.mod-2.sentence-1'>.</a></div></div></div></div><div id='util.smartptr.weak.obs' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.obs' style='min-width:118pt'>19.11.4.5</a> Observers <a class='abbr_ref' href='util.smartptr.weak.obs'>[util.smartptr.weak.obs]</a></h4><span class='indexparent'><a class='index' id='lib:use_count,weak_ptr'></a></span><span class='indexparent'><a class='index' id='lib:weak_ptr,use_count'></a></span><div class='itemdecl' id='util.smartptr.weak.obs-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.obs-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>long use_count() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.obs-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.obs-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10387'>#</a></div><div id='util.smartptr.weak.obs-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>0</span> if <span class='texttt'>*this</span> is empty;
otherwise, the number of <span class='texttt'>shared_&shy;ptr</span> instances
that share ownership with <span class='texttt'>*this</span><a class='hidden_link' href='#util.smartptr.weak.obs-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:expired,weak_ptr'></a></span><span class='indexparent'><a class='index' id='lib:weak_ptr,expired'></a></span><div class='itemdecl' id='util.smartptr.weak.obs-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.obs-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>bool expired() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.obs-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.obs-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10398'>#</a></div><div id='util.smartptr.weak.obs-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>use_&shy;count() == 0</span><a class='hidden_link' href='#util.smartptr.weak.obs-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:lock,weak_ptr'></a></span><span class='indexparent'><a class='index' id='lib:weak_ptr,lock'></a></span><div class='itemdecl' id='util.smartptr.weak.obs-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.obs-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>shared_ptr&lt;T&gt; lock() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.obs-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.obs-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10407'>#</a></div><div id='util.smartptr.weak.obs-3.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>expired() ?&nbsp;shared_&shy;ptr&lt;T&gt;() :&nbsp;shared_&shy;ptr&lt;T&gt;(*this)</span>, executed atomically<a class='hidden_link' href='#util.smartptr.weak.obs-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:owner_before,weak_ptr'></a></span><span class='indexparent'><a class='index' id='lib:weak_ptr,owner_before'></a></span><div class='itemdecl' id='util.smartptr.weak.obs-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.obs-itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class U&gt; bool owner_before(const shared_ptr&lt;U&gt;&amp; b) const noexcept;
template&lt;class U&gt; bool owner_before(const weak_ptr&lt;U&gt;&amp; b) const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.obs-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.obs-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10418'>#</a></div><div id='util.smartptr.weak.obs-4.sentence-1' class='sentence'><span class='textit'>Returns:</span> An unspecified value such that</div><div id='util.smartptr.weak.obs-4.sentence-2' class='sentence'><ul class='itemize'><li id='util.smartptr.weak.obs-4.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.weak.obs-4.1'>(4.1)</a></div><div id='util.smartptr.weak.obs-4.1.sentence-1' class='sentence'><span class='texttt'>x.owner_&shy;before(y)</span> defines a strict weak ordering as defined in <a href='alg.sorting'>[alg.sorting]</a>;</div></li><li id='util.smartptr.weak.obs-4.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#util.smartptr.weak.obs-4.2'>(4.2)</a></div><div id='util.smartptr.weak.obs-4.2.sentence-1' class='sentence'>under the equivalence relation defined by <span class='texttt'>owner_&shy;before</span>,
<span class='texttt'>!a.owner_&shy;before(b) &amp;&amp; !b.owner_&shy;before(a)</span>, two <span class='texttt'>shared_&shy;ptr</span> or
<span class='texttt'>weak_&shy;ptr</span> instances are equivalent if and only if they share ownership or are
both empty<a class='hidden_link' href='#util.smartptr.weak.obs-4.2.sentence-1'>.</a></div></li></ul></div></div></div></div><div id='util.smartptr.weak.spec' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.spec' style='min-width:118pt'>19.11.4.6</a> Specialized algorithms <a class='abbr_ref' href='util.smartptr.weak.spec'>[util.smartptr.weak.spec]</a></h4><div id='lib:weak_ptr,swap'><div id='lib:swap,weak_ptr'>
<div class='itemdecl' id='util.smartptr.weak.spec-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.weak.spec-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt;
  void swap(weak_ptr&lt;T&gt;&amp; a, weak_ptr&lt;T&gt;&amp; b) noexcept;
</code></div>
</div></div><div class='itemdescr'></div><div class='para' id='util.smartptr.weak.spec-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.spec-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10442'>#</a></div><div id='util.smartptr.weak.spec-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>a.swap(b)</span><a class='hidden_link' href='#util.smartptr.weak.spec-1.sentence-1'>.</a></div></div></div></div></div><div id='util.smartptr.ownerless' class='section'><h3 ><a class='secnum' href='#util.smartptr.ownerless' style='min-width:103pt'>19.11.5</a> Class template <span class='texttt'>owner_&shy;less</span> <a class='abbr_ref' href='util.smartptr.ownerless'>[util.smartptr.ownerless]</a></h3><div class='para' id='util.smartptr.ownerless-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.ownerless-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10447'>#</a></div><div id='util.smartptr.ownerless-1.sentence-1' class='sentence'>The class template <span class='texttt'>owner_&shy;less</span> allows ownership-based mixed comparisons of shared
and weak pointers<a class='hidden_link' href='#util.smartptr.ownerless-1.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='lib:owner_less'>
<pre class='codeblock'>
namespace std {
  template&lt;class T = void&gt; struct owner_less;

  template&lt;class T&gt; struct owner_less&lt;shared_ptr&lt;T&gt;&gt; {
    bool operator()(const shared_ptr&lt;T&gt;&amp;, const shared_ptr&lt;T&gt;&amp;) const noexcept;
    bool operator()(const shared_ptr&lt;T&gt;&amp;, const weak_ptr&lt;T&gt;&amp;) const noexcept;
    bool operator()(const weak_ptr&lt;T&gt;&amp;, const shared_ptr&lt;T&gt;&amp;) const noexcept;
  };

  template&lt;class T&gt; struct owner_less&lt;weak_ptr&lt;T&gt;&gt; {
    bool operator()(const weak_ptr&lt;T&gt;&amp;, const weak_ptr&lt;T&gt;&amp;) const noexcept;
    bool operator()(const shared_ptr&lt;T&gt;&amp;, const weak_ptr&lt;T&gt;&amp;) const noexcept;
    bool operator()(const weak_ptr&lt;T&gt;&amp;, const shared_ptr&lt;T&gt;&amp;) const noexcept;
  };

  template&lt;&gt; struct owner_less&lt;void&gt; {
    template&lt;class T, class U&gt;
      bool operator()(const shared_ptr&lt;T&gt;&amp;, const shared_ptr&lt;U&gt;&amp;) const noexcept;
    template&lt;class T, class U&gt;
      bool operator()(const shared_ptr&lt;T&gt;&amp;, const weak_ptr&lt;U&gt;&amp;) const noexcept;
    template&lt;class T, class U&gt;
      bool operator()(const weak_ptr&lt;T&gt;&amp;, const shared_ptr&lt;U&gt;&amp;) const noexcept;
    template&lt;class T, class U&gt;
      bool operator()(const weak_ptr&lt;T&gt;&amp;, const weak_ptr&lt;U&gt;&amp;) const noexcept;

    using is_transparent = <span class='textit'><span class='texttt'>unspecified</span></span>;
  };
}</pre>
</div><span class='indexparent'><a class='index' id='lib:operator(),owner_less'></a></span><span class='indexparent'><a class='index' id='lib:owner_less,operator()'></a></span></div><div class='para' id='util.smartptr.ownerless-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.ownerless-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10485'>#</a></div><div id='util.smartptr.ownerless-2.sentence-1' class='sentence'><span class='texttt'>operator()(x, y)</span> shall return <span class='texttt'>x.owner_&shy;before(y)</span><a class='hidden_link' href='#util.smartptr.ownerless-2.sentence-1'>.</a></div> <div id='util.smartptr.ownerless-2.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.ownerless-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.ownerless-2.sentence-2' class='sentence'>Note that</div><div id='util.smartptr.ownerless-2.sentence-3' class='sentence'><ul class='itemize'><li id='util.smartptr.ownerless-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#util.smartptr.ownerless-2.1'>(2.1)</a></div><div id='util.smartptr.ownerless-2.1.sentence-1' class='sentence'><span class='texttt'>operator()</span> defines a strict weak ordering as defined in <a href='alg.sorting'>[alg.sorting]</a>;</div></li><li id='util.smartptr.ownerless-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#util.smartptr.ownerless-2.2'>(2.2)</a></div><div id='util.smartptr.ownerless-2.2.sentence-1' class='sentence'>under the equivalence relation defined by <span class='texttt'>operator()</span>,
<span class='texttt'>!operator()(a, b) &amp;&amp; !operator()(b, a)</span>, two <span class='texttt'>shared_&shy;ptr</span> or
<span class='texttt'>weak_&shy;ptr</span> instances are equivalent if and only if they share ownership or are
both empty<a class='hidden_link' href='#util.smartptr.ownerless-2.2.sentence-1'>.</a></div></li></ul></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><div id='util.smartptr.enab' class='section'><h3 ><a class='secnum' href='#util.smartptr.enab' style='min-width:103pt'>19.11.6</a> Class template <span class='texttt'>enable_&shy;shared_&shy;from_&shy;this</span> <a class='abbr_ref' href='util.smartptr.enab'>[util.smartptr.enab]</a></h3><div class='para' id='util.smartptr.enab-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10499'>#</a></div><div id='util.smartptr.enab-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id='lib:enable_shared_from_this'></a></span>A class <span class='texttt'>T</span> can inherit from <span class='texttt'>enable_&shy;shared_&shy;from_&shy;this&lt;T&gt;</span>
to inherit the <span class='texttt'>shared_&shy;from_&shy;this</span> member functions that obtain
a <span class='texttt'>shared_&shy;ptr</span> instance pointing to <span class='texttt'>*this</span><a class='hidden_link' href='#util.smartptr.enab-1.sentence-1'>.</a></div></div><div class='para' id='util.smartptr.enab-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10505'>#</a></div><div id='util.smartptr.enab-2.example-1' class='example'>[<span style='white-space:nowrap'>â€‰</span><a class='example_link' href='#util.smartptr.enab-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct X: public enable_shared_from_this&lt;X&gt; { };

int main() {
  shared_ptr&lt;X&gt; p(new X);
  shared_ptr&lt;X&gt; q = p-&gt;shared_from_this();
  assert(p == q);
  assert(!p.owner_before(q) &amp;&amp; !q.owner_before(p)); <span class='comment'>// p and q share ownership
</span>}</pre> â€”<span style='white-space:nowrap'>â€‰</span><i>end example</i></div><span style='white-space:nowrap'>â€‰</span>]</div> <pre class='codeblock'>
namespace std {
  template&lt;class T&gt; class enable_shared_from_this {
  protected:
    constexpr enable_shared_from_this() noexcept;
    enable_shared_from_this(const enable_shared_from_this&amp;) noexcept;
    enable_shared_from_this&amp; operator=(const enable_shared_from_this&amp;) noexcept;
    ~enable_shared_from_this();

  public:
    shared_ptr&lt;T&gt; shared_from_this();
    shared_ptr&lt;T const&gt; shared_from_this() const;
    weak_ptr&lt;T&gt; weak_from_this() noexcept;
    weak_ptr&lt;T const&gt; weak_from_this() const noexcept;

  private:
    mutable weak_ptr&lt;T&gt; weak_this;  <span class='comment'>// <span class='textit'>exposition only</span>
</span>  };
}</pre></div><div class='para' id='util.smartptr.enab-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10540'>#</a></div><div id='util.smartptr.enab-3.sentence-1' class='sentence'>The template parameter <span class='texttt'>T</span> of <span class='texttt'>enable_&shy;shared_&shy;from_&shy;this</span>
may be an incomplete type<a class='hidden_link' href='#util.smartptr.enab-3.sentence-1'>.</a></div> <span class='indexparent'><a class='index' id='lib:enable_shared_from_this,constructor'></a></span></div><div class='itemdecl' id='util.smartptr.enab-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.enab-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>constexpr enable_shared_from_this() noexcept;
enable_shared_from_this(const enable_shared_from_this&lt;T&gt;&amp;) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.enab-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10551'>#</a></div><div id='util.smartptr.enab-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> Value-initializes <span class='texttt'>weak_&shy;this</span><a class='hidden_link' href='#util.smartptr.enab-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator=,enable_shared_from_this'></a></span><span class='indexparent'><a class='index' id='lib:enable_shared_from_this,operator='></a></span><div class='itemdecl' id='util.smartptr.enab-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.enab-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>enable_shared_from_this&lt;T&gt;&amp; operator=(const enable_shared_from_this&lt;T&gt;&amp;) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.enab-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10560'>#</a></div><div id='util.smartptr.enab-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#util.smartptr.enab-5.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.enab-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10562'>#</a></div><div id='util.smartptr.enab-6.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.enab-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.enab-6.sentence-1' class='sentence'><span class='texttt'>weak_&shy;this</span> is not changed<a class='hidden_link' href='#util.smartptr.enab-6.sentence-1'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:shared_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:shared_from_this,enable_shared_from_this'></a></span><span class='indexparent'><a class='index' id='lib:enable_shared_from_this,shared_from_this'></a></span><div class='itemdecl' id='util.smartptr.enab-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.enab-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>shared_ptr&lt;T&gt;       shared_from_this();
shared_ptr&lt;T const&gt; shared_from_this() const;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.enab-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10573'>#</a></div><div id='util.smartptr.enab-7.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>shared_&shy;ptr&lt;T&gt;(weak_&shy;this)</span><a class='hidden_link' href='#util.smartptr.enab-7.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:weak_ptr__'></a></span><span class='indexparent'><a class='index' id='lib:weak_from_this,enable_shared_from_this'></a></span><span class='indexparent'><a class='index' id='lib:enable_shared_from_this,weak_from_this'></a></span><div class='itemdecl' id='util.smartptr.enab-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.enab-itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'>weak_ptr&lt;T&gt;       weak_from_this() noexcept;
weak_ptr&lt;T const&gt; weak_from_this() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.enab-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10584'>#</a></div><div id='util.smartptr.enab-8.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>weak_&shy;this</span><a class='hidden_link' href='#util.smartptr.enab-8.sentence-1'>.</a></div></div></div></div><div id='util.smartptr.hash' class='section'><h3 ><a class='secnum' href='#util.smartptr.hash' style='min-width:103pt'>19.11.7</a> Smart pointer hash support <a class='abbr_ref' href='util.smartptr.hash'>[util.smartptr.hash]</a></h3><span class='indexparent'><a class='index' id='lib:hash,unique_ptr'></a></span><div class='itemdecl' id='util.smartptr.hash-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.hash-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T, class D&gt; struct hash&lt;unique_ptr&lt;T, D&gt;&gt;;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.hash-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.hash-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10595'>#</a></div><div id='util.smartptr.hash-1.sentence-1' class='sentence'>Letting <span class='texttt'>UP</span> be <span class='texttt'>unique_&shy;ptr&lt;T,D&gt;</span>,
the specialization <span class='texttt'>hash&lt;UP&gt;</span> is enabled (<a href='unord.hash'>[unord.hash]</a>)
if and only if <span class='texttt'>hash&lt;typename UP&#x200b;::&#x200b;pointer&gt;</span> is enabled<a class='hidden_link' href='#util.smartptr.hash-1.sentence-1'>.</a></div> <div id='util.smartptr.hash-1.sentence-2' class='sentence'>When enabled, for an object <span class='texttt'>p</span> of type <span class='texttt'>UP</span>,
<span class='texttt'>hash&lt;UP&gt;()(p)</span> shall evaluate to
the same value as <span class='texttt'>hash&lt;typename UP&#x200b;::&#x200b;pointer&gt;()(p.get())</span><a class='hidden_link' href='#util.smartptr.hash-1.sentence-2'>.</a></div> <div id='util.smartptr.hash-1.sentence-3' class='sentence'>The member functions are not guaranteed to be <span class='texttt'>noexcept</span><a class='hidden_link' href='#util.smartptr.hash-1.sentence-3'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:hash,shared_ptr'></a></span><div class='itemdecl' id='util.smartptr.hash-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.hash-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>template&lt;class T&gt; struct hash&lt;shared_ptr&lt;T&gt;&gt;;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.hash-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.hash-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10611'>#</a></div><div id='util.smartptr.hash-2.sentence-1' class='sentence'>For an object <span class='texttt'>p</span> of type <span class='texttt'>shared_&shy;ptr&lt;T&gt;</span>,
<span class='texttt'>hash&lt;shared_&shy;ptr&lt;T&gt;&gt;()(p)</span> shall evaluate to
the same value as <span class='texttt'>hash&lt;typename shared_&shy;ptr&lt;T&gt;&#x200b;::&#x200b;element_&shy;type*&gt;()(p.get())</span><a class='hidden_link' href='#util.smartptr.hash-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id=':atomic_smart_pointers'></a></span></div><div id='util.smartptr.atomic' class='section'><h3 ><a class='secnum' href='#util.smartptr.atomic' style='min-width:103pt'>19.11.8</a> Atomic specializations for smart pointers <a class='abbr_ref' href='util.smartptr.atomic'>[util.smartptr.atomic]</a></h3><div class='para' id='util.smartptr.atomic-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10621'>#</a></div><div id='util.smartptr.atomic-1.sentence-1' class='sentence'>The library provides partial specializations of the <span class='texttt'>atomic</span> template
for shared-ownership smart pointers<a class='hidden_link' href='#util.smartptr.atomic-1.sentence-1'>.</a></div> <div id='util.smartptr.atomic-1.sentence-2' class='sentence'>The behavior of all operations is as specified in <a href='atomics.types.generic'>[atomics.types.generic]</a>,
unless specified otherwise<a class='hidden_link' href='#util.smartptr.atomic-1.sentence-2'>.</a></div> <div id='util.smartptr.atomic-1.sentence-3' class='sentence'>The template parameter <span class='texttt'>T</span> of these partial specializations
may be an incomplete type<a class='hidden_link' href='#util.smartptr.atomic-1.sentence-3'>.</a></div></div><div class='para' id='util.smartptr.atomic-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10629'>#</a></div><div id='util.smartptr.atomic-2.sentence-1' class='sentence'>All changes to an atomic smart pointer in this subclause, and
all associated <span class='texttt'>use_&shy;count</span> increments,
are guaranteed to be performed atomically<a class='hidden_link' href='#util.smartptr.atomic-2.sentence-1'>.</a></div> <div id='util.smartptr.atomic-2.sentence-2' class='sentence'>Associated <span class='texttt'>use_&shy;count</span> decrements
are sequenced after the atomic operation,
but are not required to be part of it<a class='hidden_link' href='#util.smartptr.atomic-2.sentence-2'>.</a></div> <div id='util.smartptr.atomic-2.sentence-3' class='sentence'>Any associated deletion and deallocation
are sequenced after the atomic update step and
are not part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic-2.sentence-3'>.</a></div> <div id='util.smartptr.atomic-2.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.atomic-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.atomic-2.sentence-4' class='sentence'>If the atomic operation uses locks,
locks acquired by the implementation
will be held when any <span class='texttt'>use_&shy;count</span> adjustments are performed, and
will not be held when any destruction or deallocation
resulting from this is performed<a class='hidden_link' href='#util.smartptr.atomic-2.sentence-4'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div><div id='util.smartptr.atomic.shared' class='section'><h4 ><a class='secnum' href='#util.smartptr.atomic.shared' style='min-width:118pt'>19.11.8.1</a> Atomic specialization for <span class='texttt'>shared_&shy;ptr</span> <a class='abbr_ref' href='util.smartptr.atomic.shared'>[util.smartptr.atomic.shared]</a></h4><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>'></a></span><pre class='codeblock'>
namespace std {
  template&lt;class T&gt; struct atomic&lt;shared_ptr&lt;T&gt;&gt; {
    using value_type = shared_ptr&lt;T&gt;;
    static constexpr bool is_always_lock_free = <span class='indexparent'><a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free'></a></span><span class='textit'>implementation-defined</span>;

    bool is_lock_free() const noexcept;
    void store(shared_ptr&lt;T&gt; desired, memory_order order = memory_order::seq_cst) noexcept;
    shared_ptr&lt;T&gt; load(memory_order order = memory_order::seq_cst) const noexcept;
    operator shared_ptr&lt;T&gt;() const noexcept;

    shared_ptr&lt;T&gt; exchange(shared_ptr&lt;T&gt; desired,
                           memory_order order = memory_order::seq_cst) noexcept;

    bool compare_exchange_weak(shared_ptr&lt;T&gt;&amp; expected, shared_ptr&lt;T&gt; desired,
                               memory_order success, memory_order failure) noexcept;
    bool compare_exchange_strong(shared_ptr&lt;T&gt;&amp; expected, shared_ptr&lt;T&gt; desired,
                                 memory_order success, memory_order failure) noexcept;

    bool compare_exchange_weak(shared_ptr&lt;T&gt;&amp; expected, shared_ptr&lt;T&gt; desired,
                               memory_order order = memory_order::seq_cst) noexcept;
    bool compare_exchange_strong(shared_ptr&lt;T&gt;&amp; expected, shared_ptr&lt;T&gt; desired,
                                 memory_order order = memory_order::seq_cst) noexcept;

    constexpr atomic() noexcept = default;
    atomic(shared_ptr&lt;T&gt; desired) noexcept;
    atomic(const atomic&amp;) = delete;
    void operator=(const atomic&amp;) = delete;
    void operator=(shared_ptr&lt;T&gt; desired) noexcept;

  private:
    shared_ptr&lt;T&gt; p;            <span class='comment'>// <span class='textit'>exposition only</span>
</span>  };
}</pre><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,constructor'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>constexpr atomic() noexcept = default;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10691'>#</a></div><div id='util.smartptr.atomic.shared-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes <span class='texttt'>p{}</span><a class='hidden_link' href='#util.smartptr.atomic.shared-1.sentence-1'>.</a></div></div></div><div id='lib:atomic<shared_ptr<T>>,constructor'>
<div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>atomic(shared_ptr&lt;T&gt; desired) noexcept;
</code></div>
</div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10703'>#</a></div><div id='util.smartptr.atomic.shared-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes the object with the value <span class='texttt'>desired</span><a class='hidden_link' href='#util.smartptr.atomic.shared-2.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-2.sentence-2' class='sentence'>Initialization is not an atomic operation (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#util.smartptr.atomic.shared-2.sentence-2'>.</a></div> <div id='util.smartptr.atomic.shared-2.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.atomic.shared-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.atomic.shared-2.sentence-3' class='sentence'>It is possible to have an access to
an atomic object <span class='texttt'>A</span> race with its construction,
for example,
by communicating the address of the just-constructed object <span class='texttt'>A</span>
to another thread via <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;relaxed</span> operations
on a suitable atomic pointer variable, and
then immediately accessing <span class='texttt'>A</span> in the receiving thread<a class='hidden_link' href='#util.smartptr.atomic.shared-2.sentence-3'>.</a></div> <div id='util.smartptr.atomic.shared-2.sentence-4' class='sentence'>This results in undefined behavior<a class='hidden_link' href='#util.smartptr.atomic.shared-2.sentence-4'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:store,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,store'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>void store(shared_ptr&lt;T&gt; desired, memory_order order = memory_order::seq_cst) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10725'>#</a></div><div id='util.smartptr.atomic.shared-3.sentence-1' class='sentence'><span class='textit'>Requires:</span> 
The <span class='texttt'>order</span> argument shall not be
<span class='texttt'>memory_&shy;order&#x200b;::&#x200b;consume</span>,
<span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acquire</span>, nor
<span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.shared-3.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10732'>#</a></div><div id='util.smartptr.atomic.shared-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value pointed to by <span class='texttt'>this</span> with
the value of <span class='texttt'>desired</span> as if by <span class='texttt'>p.swap(desired)</span><a class='hidden_link' href='#util.smartptr.atomic.shared-4.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-4.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.shared-4.sentence-2'>.</a></div></div></div><div id='lib:atomic<shared_ptr<T>>,operator='><div id='lib:operator=,atomic<shared_ptr<T>>'>
<div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'>void operator=(shared_ptr&lt;T&gt; desired) noexcept;
</code></div>
</div></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10746'>#</a></div><div id='util.smartptr.atomic.shared-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to <span class='texttt'>store(desired)</span><a class='hidden_link' href='#util.smartptr.atomic.shared-5.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:load,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,load'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:5'>ðŸ”—</a></div><code class='itemdeclcode'>shared_ptr&lt;T&gt; load(memory_order order = memory_order::seq_cst) const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10757'>#</a></div><div id='util.smartptr.atomic.shared-6.sentence-1' class='sentence'><span class='textit'>Requires:</span> 
<span class='texttt'>order</span> shall not be
<span class='texttt'>memory_&shy;order&#x200b;::&#x200b;release</span> nor <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.shared-6.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10762'>#</a></div><div id='util.smartptr.atomic.shared-7.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.shared-7.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10766'>#</a></div><div id='util.smartptr.atomic.shared-8.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically returns <span class='texttt'>p</span><a class='hidden_link' href='#util.smartptr.atomic.shared-8.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator_shared_ptr<T>,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,operator_shared_ptr<T>'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:6'>ðŸ”—</a></div><code class='itemdeclcode'>operator shared_ptr&lt;T&gt;() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10777'>#</a></div><div id='util.smartptr.atomic.shared-9.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'>return load();</span></div></div></div><span class='indexparent'><a class='index' id='lib:exchange,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,exchange'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:7'>ðŸ”—</a></div><code class='itemdeclcode'>shared_ptr&lt;T&gt; exchange(shared_ptr&lt;T&gt; desired, memory_order order = memory_order::seq_cst) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10788'>#</a></div><div id='util.smartptr.atomic.shared-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces <span class='texttt'>p</span> with <span class='texttt'>desired</span>
as if by <span class='texttt'>p.swap(desired)</span><a class='hidden_link' href='#util.smartptr.atomic.shared-10.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-10.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.shared-10.sentence-2'>.</a></div> <div id='util.smartptr.atomic.shared-10.sentence-3' class='sentence'>This is an atomic read-modify-write operation (<a href='intro.races'>[intro.races]</a>)<a class='hidden_link' href='#util.smartptr.atomic.shared-10.sentence-3'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10795'>#</a></div><div id='util.smartptr.atomic.shared-11.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically returns the value of <span class='texttt'>p</span> immediately before the effects<a class='hidden_link' href='#util.smartptr.atomic.shared-11.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,compare_exchange_weak'></a></span><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic<shared_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,compare_exchange_strong'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:8'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:8'>ðŸ”—</a></div><code class='itemdeclcode'>bool compare_exchange_weak(shared_ptr&lt;T&gt;&amp; expected, shared_ptr&lt;T&gt; desired,
                           memory_order success, memory_order failure) noexcept;
bool compare_exchange_strong(shared_ptr&lt;T&gt;&amp; expected, shared_ptr&lt;T&gt; desired,
                             memory_order success, memory_order failure) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10810'>#</a></div><div id='util.smartptr.atomic.shared-12.sentence-1' class='sentence'><span class='textit'>Requires:</span> 
<span class='texttt'>failure</span> shall not be
<span class='texttt'>memory_&shy;order&#x200b;::&#x200b;release</span> nor <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.shared-12.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-13'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10815'>#</a></div><div id='util.smartptr.atomic.shared-13.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
If <span class='texttt'>p</span> is equivalent to <span class='texttt'>expected</span>,
assigns <span class='texttt'>desired</span> to <span class='texttt'>p</span> and
has synchronization semantics corresponding to the value of <span class='texttt'>success</span>,
otherwise assigns <span class='texttt'>p</span> to <span class='texttt'>expected</span> and
has synchronization semantics corresponding to the value of <span class='texttt'>failure</span><a class='hidden_link' href='#util.smartptr.atomic.shared-13.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-14'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10823'>#</a></div><div id='util.smartptr.atomic.shared-14.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>true</span> if <span class='texttt'>p</span> was equivalent to <span class='texttt'>expected</span>,
<span class='texttt'>false</span> otherwise<a class='hidden_link' href='#util.smartptr.atomic.shared-14.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-15'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10828'>#</a></div><div id='util.smartptr.atomic.shared-15.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
Two <span class='texttt'>shared_&shy;ptr</span> objects are equivalent if
they store the same pointer value and
either share ownership, or both are empty<a class='hidden_link' href='#util.smartptr.atomic.shared-15.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-15.sentence-2' class='sentence'>The weak form may fail spuriously<a class='hidden_link' href='#util.smartptr.atomic.shared-15.sentence-2'>.</a></div> <div id='util.smartptr.atomic.shared-15.sentence-3' class='sentence'>See <a href='atomics.types.operations'>[atomics.types.operations]</a><a class='hidden_link' href='#util.smartptr.atomic.shared-15.sentence-3'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.shared-16'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10835'>#</a></div><div id='util.smartptr.atomic.shared-16.sentence-1' class='sentence'>If the operation returns <span class='texttt'>true</span>,
<span class='texttt'>expected</span> is not accessed after the atomic update and
the operation is an atomic read-modify-write operation (<a href='intro.multithread'>[intro.multithread]</a>)
on the memory pointed to by <span class='texttt'>this</span><a class='hidden_link' href='#util.smartptr.atomic.shared-16.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-16.sentence-2' class='sentence'>Otherwise, the operation is an atomic load operation on that memory, and
<span class='texttt'>expected</span> is updated with the existing value
read from the atomic object in the attempted atomic update<a class='hidden_link' href='#util.smartptr.atomic.shared-16.sentence-2'>.</a></div> <div id='util.smartptr.atomic.shared-16.sentence-3' class='sentence'>The <span class='texttt'>use_&shy;count</span> update corresponding to the write to <span class='texttt'>expected</span>
is part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic.shared-16.sentence-3'>.</a></div> <div id='util.smartptr.atomic.shared-16.sentence-4' class='sentence'>The write to <span class='texttt'>expected</span> itself
is not required to be part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic.shared-16.sentence-4'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic<shared_ptr<T>>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,compare_exchange_weak_'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:9'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:9'>ðŸ”—</a></div><code class='itemdeclcode'>bool compare_exchange_weak(shared_ptr&lt;T&gt;&amp; expected, shared_ptr&lt;T&gt; desired,
                           memory_order order = memory_order::seq_cst) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-17'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10856'>#</a></div><div id='util.smartptr.atomic.shared-17.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
return compare_exchange_weak(expected, desired, order, fail_order);</pre>
where <span class='texttt'>fail_&shy;order</span> is the same as <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acq_&shy;rel</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acquire</span> and
a value of <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;release</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;relaxed</span><a class='hidden_link' href='#util.smartptr.atomic.shared-17.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic<shared_ptr<T>>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<shared_ptr<T>>,compare_exchange_strong_'></a></span><div class='itemdecl' id='util.smartptr.atomic.shared-itemdecl:10'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.shared-itemdecl:10'>ðŸ”—</a></div><code class='itemdeclcode'>bool compare_exchange_strong(shared_ptr&lt;T&gt;&amp; expected, shared_ptr&lt;T&gt; desired,
                             memory_order order = memory_order::seq_cst) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.shared-18'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10876'>#</a></div><div id='util.smartptr.atomic.shared-18.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
return compare_exchange_strong(expected, desired, order, fail_order);</pre>
where <span class='texttt'>fail_&shy;order</span> is the same as <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acq_&shy;rel</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acquire</span> and
a value of <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;release</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;relaxed</span><a class='hidden_link' href='#util.smartptr.atomic.shared-18.sentence-1'>.</a></div></div></div></div><div id='util.smartptr.atomic.weak' class='section'><h4 ><a class='secnum' href='#util.smartptr.atomic.weak' style='min-width:118pt'>19.11.8.2</a> Atomic specialization for <span class='texttt'>weak_&shy;ptr</span> <a class='abbr_ref' href='util.smartptr.atomic.weak'>[util.smartptr.atomic.weak]</a></h4><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>'></a></span><pre class='codeblock'>
namespace std {
  template&lt;class T&gt; struct atomic&lt;weak_ptr&lt;T&gt;&gt; {
    using value_type = weak_ptr&lt;T&gt;;
    static constexpr bool is_always_lock_free = <span class='indexparent'><a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free_'></a></span><span class='textit'>implementation-defined</span>;

    bool is_lock_free() const noexcept;
    void store(weak_ptr&lt;T&gt; desired, memory_order order = memory_order::seq_cst) noexcept;
    weak_ptr&lt;T&gt; load(memory_order order = memory_order::seq_cst) const noexcept;
    operator weak_ptr&lt;T&gt;() const noexcept;

    weak_ptr&lt;T&gt; exchange(weak_ptr&lt;T&gt; desired,
                         memory_order order = memory_order::seq_cst) noexcept;

    bool compare_exchange_weak(weak_ptr&lt;T&gt;&amp; expected, weak_ptr&lt;T&gt; desired,
                               memory_order success, memory_order failure) noexcept;
    bool compare_exchange_strong(weak_ptr&lt;T&gt;&amp; expected, weak_ptr&lt;T&gt; desired,
                                 memory_order success, memory_order failure) noexcept;

    bool compare_exchange_weak(weak_ptr&lt;T&gt;&amp; expected, weak_ptr&lt;T&gt; desired,
                               memory_order order = memory_order::seq_cst) noexcept;
    bool compare_exchange_strong(weak_ptr&lt;T&gt;&amp; expected, weak_ptr&lt;T&gt; desired,
                                 memory_order order = memory_order::seq_cst) noexcept;

    constexpr atomic() noexcept = default;
    atomic(weak_ptr&lt;T&gt; desired) noexcept;
    atomic(const atomic&amp;) = delete;
    void operator=(const atomic&amp;) = delete;
    void operator=(weak_ptr&lt;T&gt; desired) noexcept;

  private:
    weak_ptr&lt;T&gt; p;              <span class='comment'>// <span class='textit'>exposition only</span>
</span>  };
}</pre><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,constructor'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>constexpr atomic() noexcept = default;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10933'>#</a></div><div id='util.smartptr.atomic.weak-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes <span class='texttt'>p{}</span><a class='hidden_link' href='#util.smartptr.atomic.weak-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,constructor_'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>atomic(weak_ptr&lt;T&gt; desired) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10944'>#</a></div><div id='util.smartptr.atomic.weak-2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Initializes the object with the value <span class='texttt'>desired</span><a class='hidden_link' href='#util.smartptr.atomic.weak-2.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-2.sentence-2' class='sentence'>Initialization is not an atomic operation (<a href='intro.multithread'>[intro.multithread]</a>)<a class='hidden_link' href='#util.smartptr.atomic.weak-2.sentence-2'>.</a></div> <div id='util.smartptr.atomic.weak-2.note-1' class='note'>[<span style='white-space:nowrap'>â€‰</span><a class='note_link' href='#util.smartptr.atomic.weak-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='util.smartptr.atomic.weak-2.sentence-3' class='sentence'>It is possible to have an access to
an atomic object <span class='texttt'>A</span> race with its construction,
for example,
by communicating the address of the just-constructed object <span class='texttt'>A</span>
to another thread via <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;relaxed</span> operations
on a suitable atomic pointer variable, and
then immediately accessing <span class='texttt'>A</span> in the receiving thread<a class='hidden_link' href='#util.smartptr.atomic.weak-2.sentence-3'>.</a></div> <div id='util.smartptr.atomic.weak-2.sentence-4' class='sentence'>This results in undefined behavior<a class='hidden_link' href='#util.smartptr.atomic.weak-2.sentence-4'>.</a></div> â€”<span style='white-space:nowrap'>â€‰</span><i>end note</i></div><span style='white-space:nowrap'>â€‰</span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:store,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,store'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'>void store(weak_ptr&lt;T&gt; desired, memory_order order = memory_order::seq_cst) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10966'>#</a></div><div id='util.smartptr.atomic.weak-3.sentence-1' class='sentence'><span class='textit'>Requires:</span> 
The <span class='texttt'>order</span> argument shall not be
<span class='texttt'>memory_&shy;order&#x200b;::&#x200b;consume</span>,
<span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acquire</span>, nor
<span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.weak-3.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10973'>#</a></div><div id='util.smartptr.atomic.weak-4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces the value pointed to by <span class='texttt'>this</span> with
the value of <span class='texttt'>desired</span> as if by <span class='texttt'>p.swap(desired)</span><a class='hidden_link' href='#util.smartptr.atomic.weak-4.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-4.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.weak-4.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator=,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,operator='></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'>void operator=(weak_ptr&lt;T&gt; desired) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10986'>#</a></div><div id='util.smartptr.atomic.weak-5.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to <span class='texttt'>store(desired)</span><a class='hidden_link' href='#util.smartptr.atomic.weak-5.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:load,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,load'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:5'>ðŸ”—</a></div><code class='itemdeclcode'>weak_ptr&lt;T&gt; load(memory_order order = memory_order::seq_cst) const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L10997'>#</a></div><div id='util.smartptr.atomic.weak-6.sentence-1' class='sentence'><span class='textit'>Requires:</span> 
<span class='texttt'>order</span> shall not be
<span class='texttt'>memory_&shy;order&#x200b;::&#x200b;release</span> nor <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.weak-6.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L11002'>#</a></div><div id='util.smartptr.atomic.weak-7.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.weak-7.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L11006'>#</a></div><div id='util.smartptr.atomic.weak-8.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically returns <span class='texttt'>p</span><a class='hidden_link' href='#util.smartptr.atomic.weak-8.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator_weak_ptr<T>,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,operator_weak_ptr<T>'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:6'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:6'>ðŸ”—</a></div><code class='itemdeclcode'>operator weak_ptr&lt;T&gt;() const noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L11017'>#</a></div><div id='util.smartptr.atomic.weak-9.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to: <span class='texttt'>return load();</span></div></div></div><span class='indexparent'><a class='index' id='lib:exchange,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,exchange'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:7'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:7'>ðŸ”—</a></div><code class='itemdeclcode'>weak_ptr&lt;T&gt; exchange(weak_ptr&lt;T&gt; desired, memory_order order = memory_order::seq_cst) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L11028'>#</a></div><div id='util.smartptr.atomic.weak-10.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Atomically replaces <span class='texttt'>p</span> with <span class='texttt'>desired</span>
as if by <span class='texttt'>p.swap(desired)</span><a class='hidden_link' href='#util.smartptr.atomic.weak-10.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-10.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.weak-10.sentence-2'>.</a></div> <div id='util.smartptr.atomic.weak-10.sentence-3' class='sentence'>This is an atomic read-modify-write operation (<a href='intro.races'>[intro.races]</a>)<a class='hidden_link' href='#util.smartptr.atomic.weak-10.sentence-3'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L11035'>#</a></div><div id='util.smartptr.atomic.weak-11.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
Atomically returns the value of <span class='texttt'>p</span> immediately before the effects<a class='hidden_link' href='#util.smartptr.atomic.weak-11.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,compare_exchange_weak'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:8'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:8'>ðŸ”—</a></div><code class='itemdeclcode'>bool compare_exchange_weak(weak_ptr&lt;T&gt;&amp; expected, weak_ptr&lt;T&gt; desired,
                           memory_order success, memory_order failure) noexcept;
bool compare_exchange_strong(weak_ptr&lt;T&gt;&amp; expected, weak_ptr&lt;T&gt; desired,
                             memory_order success, memory_order failure) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L11049'>#</a></div><div id='util.smartptr.atomic.weak-12.sentence-1' class='sentence'><span class='textit'>Requires:</span> 
<span class='texttt'>failure</span> shall not be
<span class='texttt'>memory_&shy;order&#x200b;::&#x200b;release</span> nor <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acq_&shy;rel</span><a class='hidden_link' href='#util.smartptr.atomic.weak-12.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-13'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L11054'>#</a></div><div id='util.smartptr.atomic.weak-13.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
If <span class='texttt'>p</span> is equivalent to <span class='texttt'>expected</span>,
assigns <span class='texttt'>desired</span> to <span class='texttt'>p</span> and
has synchronization semantics corresponding to the value of <span class='texttt'>success</span>,
otherwise assigns <span class='texttt'>p</span> to <span class='texttt'>expected</span> and
has synchronization semantics corresponding to the value of <span class='texttt'>failure</span><a class='hidden_link' href='#util.smartptr.atomic.weak-13.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-14'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L11062'>#</a></div><div id='util.smartptr.atomic.weak-14.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>true</span> if <span class='texttt'>p</span> was equivalent to <span class='texttt'>expected</span>,
<span class='texttt'>false</span> otherwise<a class='hidden_link' href='#util.smartptr.atomic.weak-14.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-15'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L11067'>#</a></div><div id='util.smartptr.atomic.weak-15.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
Two <span class='texttt'>weak_&shy;ptr</span> objects are equivalent if
they store the same pointer value and
either share ownership, or both are empty<a class='hidden_link' href='#util.smartptr.atomic.weak-15.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-15.sentence-2' class='sentence'>The weak form may fail spuriously<a class='hidden_link' href='#util.smartptr.atomic.weak-15.sentence-2'>.</a></div> <div id='util.smartptr.atomic.weak-15.sentence-3' class='sentence'>See <a href='atomics.types.operations'>[atomics.types.operations]</a><a class='hidden_link' href='#util.smartptr.atomic.weak-15.sentence-3'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.weak-16'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L11074'>#</a></div><div id='util.smartptr.atomic.weak-16.sentence-1' class='sentence'>If the operation returns <span class='texttt'>true</span>,
<span class='texttt'>expected</span> is not accessed after the atomic update and
the operation is an atomic read-modify-write operation (<a href='intro.multithread'>[intro.multithread]</a>)
on the memory pointed to by <span class='texttt'>this</span><a class='hidden_link' href='#util.smartptr.atomic.weak-16.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-16.sentence-2' class='sentence'>Otherwise, the operation is an atomic load operation on that memory, and
<span class='texttt'>expected</span> is updated with the existing value
read from the atomic object in the attempted atomic update<a class='hidden_link' href='#util.smartptr.atomic.weak-16.sentence-2'>.</a></div> <div id='util.smartptr.atomic.weak-16.sentence-3' class='sentence'>The <span class='texttt'>use_&shy;count</span> update corresponding to the write to <span class='texttt'>expected</span>
is part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic.weak-16.sentence-3'>.</a></div> <div id='util.smartptr.atomic.weak-16.sentence-4' class='sentence'>The write to <span class='texttt'>expected</span> itself
is not required to be part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic.weak-16.sentence-4'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:compare_exchange_weak,atomic<weak_ptr<T>>_'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,compare_exchange_weak_'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:9'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:9'>ðŸ”—</a></div><code class='itemdeclcode'>bool compare_exchange_weak(weak_ptr&lt;T&gt;&amp; expected, weak_ptr&lt;T&gt; desired,
                           memory_order order = memory_order::seq_cst) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-17'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L11095'>#</a></div><div id='util.smartptr.atomic.weak-17.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
return compare_exchange_weak(expected, desired, order, fail_order);</pre>
where <span class='texttt'>fail_&shy;order</span> is the same as <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acq_&shy;rel</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acquire</span> and
a value of <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;release</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;relaxed</span><a class='hidden_link' href='#util.smartptr.atomic.weak-17.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:compare_exchange_strong,atomic<weak_ptr<T>>'></a></span><span class='indexparent'><a class='index' id='lib:atomic<weak_ptr<T>>,compare_exchange_strong'></a></span><div class='itemdecl' id='util.smartptr.atomic.weak-itemdecl:10'><div class='marginalizedparent'><a class='itemDeclLink' href='#util.smartptr.atomic.weak-itemdecl:10'>ðŸ”—</a></div><code class='itemdeclcode'>bool compare_exchange_strong(weak_ptr&lt;T&gt;&amp; expected, weak_ptr&lt;T&gt; desired,
                             memory_order order = memory_order::seq_cst) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='util.smartptr.atomic.weak-18'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12c6805c739b429fbbfbd8e7afe62bbd48e0af8c/source/utilities.tex#L11115'>#</a></div><div id='util.smartptr.atomic.weak-18.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
Equivalent to:
<pre class='codeblock'>
return compare_exchange_strong(expected, desired, order, fail_order);</pre>
where <span class='texttt'>fail_&shy;order</span> is the same as <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acq_&shy;rel</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;acquire</span> and
a value of <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;release</span>
shall be replaced by the value <span class='texttt'>memory_&shy;order&#x200b;::&#x200b;relaxed</span><a class='hidden_link' href='#util.smartptr.atomic.weak-18.sentence-1'>.</a></div></div></div></div></div></div></body></html>