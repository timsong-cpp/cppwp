<!DOCTYPE html><html lang='en'><head><title>[variant.variant.general]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>20</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>20.7</a> Variants <a class='abbr_ref' href='variant#variant.general'>[variant]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>20.7.3</a> Class template <span class='texttt'>variant</span> <a class='abbr_ref' href='variant.variant#general'>[variant.variant]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>20.7.3.1</a> General <a class='abbr_ref'>[variant.variant.general]</a></h4><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> variant <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='comment'>// <a href='variant.ctor' title='20.7.3.2&emsp;Constructors'>[variant.<span class='shy'></span>ctor]</a>, constructors</span>
    <span class='keyword'>constexpr</span> variant<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='textit'><span class='texttt'>see below</span></span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> variant<span class='parenthesis'>(</span><span class='keyword'>const</span> variant<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> variant<span class='parenthesis'>(</span>variant<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='textit'><span class='texttt'>see below</span></span><span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> variant<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='textit'><span class='texttt'>see below</span></span><span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> variant<span class='parenthesis'>(</span>in_place_type_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> variant<span class='parenthesis'>(</span>in_place_type_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>, initializer_list<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span>, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>size_t I, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> variant<span class='parenthesis'>(</span>in_place_index_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span>, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>size_t I, <span class='keyword'>class</span> U, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> variant<span class='parenthesis'>(</span>in_place_index_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span>, initializer_list<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span>, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='variant.dtor' title='20.7.3.3&emsp;Destructor'>[variant.<span class='shy'></span>dtor]</a>, destructor</span>
    <span class='operator'>~</span>variant<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='variant.assign' title='20.7.3.4&emsp;Assignment'>[variant.<span class='shy'></span>assign]</a>, assignment</span>
    <span class='keyword'>constexpr</span> variant<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> variant<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> variant<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>variant<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='textit'><span class='texttt'>see below</span></span><span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> variant<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='textit'><span class='texttt'>see below</span></span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='variant.mod' title='20.7.3.5&emsp;Modifiers'>[variant.<span class='shy'></span>mod]</a>, modifiers</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      T<span class='operator'>&amp;</span> emplace<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      T<span class='operator'>&amp;</span> emplace<span class='parenthesis'>(</span>initializer_list<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span>, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>size_t I, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      variant_alternative_t<span class='anglebracket'>&lt;</span>I, variant<span class='anglebracket'>&lt;</span>Types<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> emplace<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>size_t I, <span class='keyword'>class</span> U, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      variant_alternative_t<span class='anglebracket'>&lt;</span>I, variant<span class='anglebracket'>&lt;</span>Types<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> emplace<span class='parenthesis'>(</span>initializer_list<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span>, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='variant.status' title='20.7.3.6&emsp;Value status'>[variant.<span class='shy'></span>status]</a>, value status</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> valueless_by_exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> size_t index<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// <a href='variant.swap' title='20.7.3.7&emsp;Swap'>[variant.<span class='shy'></span>swap]</a>, swap</span>
    <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>variant<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='textit'><span class='texttt'>see below</span></span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/utilities.tex#L4069'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>Any instance of <span class='texttt'>variant</span> at any given time either holds a value
of one of its alternative types or holds no value<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>When an instance of <span class='texttt'>variant</span> holds a value of alternative type <span class='texttt'>T</span>,
it means that a value of type <span class='texttt'>T</span>, referred to as the <span class='texttt'>variant</span>
object's <a class='hidden_link' href='#def:contained_value,variant' title='20.7.3.1&emsp;General&emsp;[variant.variant.general]'><span id='def:contained_value,variant'><span class='textit'>contained value</span></span></a>, is allocated within the storage of the
<span class='texttt'>variant</span> object<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>Implementations are not permitted to use additional storage, such as dynamic
memory, to allocate the contained value<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>The contained value shall be allocated in a region of the <span class='texttt'>variant</span>
storage suitably aligned for all types in <span class='texttt'>Types</span><a class='hidden_link' href='#1.sentence-4'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/utilities.tex#L4081'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>All types in <span class='texttt'>Types</span> shall meet
the <span class='textit'>Cpp17Destructible</span> requirements (Table <a href='utility.arg.requirements#tab:cpp17.destructible' title='Table 32: Cpp17Destructible requirements'>32</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/88ec08948c822ecddba35e33c556817ebe32f607/source/utilities.tex#L4085'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>A program that instantiates the definition of <span class='texttt'>variant</span> with
no template arguments is ill-formed<a class='hidden_link' href='#3.sentence-1'>.</a></div></div></div></div></body></html>