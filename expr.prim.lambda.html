<!DOCTYPE html><html lang='en'><head><title>[expr.prim.lambda]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>7.5</a> Primary expressions <a class='abbr_ref' href='expr.prim#lambda'>[expr.prim]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>7.5.5</a> Lambda expressions <a class='abbr_ref'>[expr.prim.lambda]</a></h3><div id='general' class='section'><h4 ><a class='secnum' href='#general' style='min-width:95pt'>7.5.5.1</a> General <a class='abbr_ref' href='expr.prim.lambda.general'>[expr.prim.lambda.general]</a></h4><div class='texpara'><a class='index' id=':expression,lambda'></a></div><div class='texpara'><div class='bnf' id='nt:lambda-expression'>
<a class='hidden_link' href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='nt:lambda-expression'><span id=':lambda-expression'>lambda-expression<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:lambda-introducer' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-introducer'><span class='textsf'><i >lambda-introducer</i></span></span></a> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='#nt:lambda-declarator' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator'><span class='textsf'><i >lambda-declarator</i></span></span></a> <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement'><span class='textsf'><i >compound-statement</i></span></span></a><br/><a href='#nt:lambda-introducer' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-introducer_'><span class='textsf'><i >lambda-introducer</i></span></span></a> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list'><span class='textsf'><i >template-parameter-list</i></span></span></a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause'><span class='textsf'><i >requires-clause</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span><br/>&emsp;&emsp;&emsp;<a href='#nt:lambda-declarator' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator_'><span class='textsf'><i >lambda-declarator</i></span></span></a> <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement_'><span class='textsf'><i >compound-statement</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:lambda-introducer'>
<a class='hidden_link' href='#nt:lambda-introducer' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='nt:lambda-introducer'><span id=':lambda-introducer'>lambda-introducer<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='squarebracket'>[</span></span> <a href='#nt:lambda-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture'><span class='textsf'><i >lambda-capture</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='squarebracket'>]</span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:lambda-declarator'>
<a class='hidden_link' href='#nt:lambda-declarator' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='nt:lambda-declarator'><span id=':lambda-declarator'>lambda-declarator<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:lambda-specifier-seq' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a> <a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier'><span class='textsf'><i >noexcept-specifier</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq__'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type'><span class='textsf'><i >trailing-return-type</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span><br/><a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier_'><span class='textsf'><i >noexcept-specifier</i></span></span></a> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq___'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type_'><span class='textsf'><i >trailing-return-type</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span><br/><a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type__'><span class='textsf'><i >trailing-return-type</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span><br/><span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span> <a href='#nt:lambda-specifier-seq' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq_'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier__'><span class='textsf'><i >noexcept-specifier</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq____'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span><br/>&emsp;&emsp;&emsp;<a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type___'><span class='textsf'><i >trailing-return-type</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause_'><span class='textsf'><i >requires-clause</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:lambda-specifier'>
<a class='hidden_link' href='#nt:lambda-specifier' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='nt:lambda-specifier'><span id=':lambda-specifier'>lambda-specifier<span class='textnormal'>:</span></span></span></a><br/><span id=':consteval'><span class='texttt'><span class='keyword'>consteval</span></span></span><br/><span id=':constexpr'><span class='texttt'><span class='keyword'>constexpr</span></span></span><br/><span id=':mutable'><span class='texttt'><span class='keyword'>mutable</span></span></span><br/><span id=':static'><span class='texttt'><span class='keyword'>static</span></span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:lambda-specifier-seq'>
<a class='hidden_link' href='#nt:lambda-specifier-seq' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='nt:lambda-specifier-seq'><span id=':lambda-specifier-seq'>lambda-specifier-seq<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:lambda-specifier' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier'><span class='textsf'><i >lambda-specifier</i></span></span></a><br/><a href='#nt:lambda-specifier' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier_'><span class='textsf'><i >lambda-specifier</i></span></span></a> <a href='#nt:lambda-specifier-seq' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq__'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a>
</div></div><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L1762'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'>A <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression'><span class='textsf'><i >lambda-expression</i></span></span></a> provides
a concise way to create a simple function object<a class='hidden_link' href='#general-1.sentence-1'>.</a></div> <div id='general-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>algorithm<span class='anglebracket'>&gt;</span>
<span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>cmath<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> abssort<span class='parenthesis'>(</span><span class='keyword'>float</span><span class='operator'>*</span> x, <span class='keyword'>unsigned</span> N<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  std<span class='operator'>::</span>sort<span class='parenthesis'>(</span>x, x <span class='operator'>+</span> N, <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>float</span> a, <span class='keyword'>float</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> std<span class='operator'>::</span>abs<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span> std<span class='operator'>::</span>abs<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L1775'>#</a></div><div class='texpara'><div id='general-2.sentence-1' class='sentence'>A <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_'><span class='textsf'><i >lambda-expression</i></span></span></a> is a prvalue
whose result object is called the <a class='hidden_link' href='#def:closure_object' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='def:closure_object'><i >closure object</i></span></a><a class='hidden_link' href='#general-2.sentence-1'>.</a></div> <div id='general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-1'>1</a></i>:&ensp;<div id='general-2.sentence-2' class='sentence'>A closure object behaves like a <a href='function.objects' title='22.10&emsp;Function objects&emsp;[function.objects]'>function
object</a><a class='hidden_link' href='#general-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='general-3'><div class='marginalizedparent'><a class='marginalized' href='#general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L1783'>#</a></div><div class='texpara'><div id='general-3.sentence-1' class='sentence'>An ambiguity can arise
because a <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause__'><span class='textsf'><i >requires-clause</i></span></span></a> can end in
an <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_____'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a>,
which collides with
the <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq______'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a> in <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__'><span class='textsf'><i >lambda-expression</i></span></span></a><a class='hidden_link' href='#general-3.sentence-1'>.</a></div> <div id='general-3.sentence-2' class='sentence'>In such cases,
any attributes are treated as
<a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_______'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a> in <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression___'><span class='textsf'><i >lambda-expression</i></span></span></a><a class='hidden_link' href='#general-3.sentence-2'>.</a></div> <div id='general-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-2'>2</a></i>:&ensp;<div id='general-3.sentence-3' class='sentence'>Such ambiguous cases cannot have valid semantics
because the constraint expression would not have type <span id=':bool'><span class='texttt'><span class='keyword'>bool</span></span></span><a class='hidden_link' href='#general-3.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='general-4'><div class='marginalizedparent'><a class='marginalized' href='#general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L1797'>#</a></div><div class='texpara'><div id='general-4.sentence-1' class='sentence'>A <a href='#nt:lambda-specifier-seq' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq___'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a>
shall contain at most one of each <a href='#nt:lambda-specifier' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier__'><span class='textsf'><i >lambda-specifier</i></span></span></a> and
shall not contain both <span id=':constexpr_'><span class='texttt'><span class='keyword'>constexpr</span></span></span> and <span id=':consteval_'><span class='texttt'><span class='keyword'>consteval</span></span></span><a class='hidden_link' href='#general-4.sentence-1'>.</a></div> <div id='general-4.sentence-2' class='sentence'>If the <a href='#nt:lambda-declarator' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator__'><span class='textsf'><i >lambda-declarator</i></span></span></a> contains
an explicit object parameter (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>),
then no <a href='#nt:lambda-specifier' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier___'><span class='textsf'><i >lambda-specifier</i></span></span></a> in the <a href='#nt:lambda-specifier-seq' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq____'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a>
shall be <span id=':mutable_'><span class='texttt'><span class='keyword'>mutable</span></span></span> or <span id=':static_'><span class='texttt'><span class='keyword'>static</span></span></span><a class='hidden_link' href='#general-4.sentence-2'>.</a></div> <div id='general-4.sentence-3' class='sentence'>The <a href='#nt:lambda-specifier-seq' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq_____'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a> shall not contain
both <span id=':mutable__'><span class='texttt'><span class='keyword'>mutable</span></span></span> and <span id=':static__'><span class='texttt'><span class='keyword'>static</span></span></span><a class='hidden_link' href='#general-4.sentence-3'>.</a></div> <div id='general-4.sentence-4' class='sentence'>If the <a href='#nt:lambda-specifier-seq' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq______'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a> contains <span id=':static___'><span class='texttt'><span class='keyword'>static</span></span></span>,
there shall be no <a href='#nt:lambda-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture_'><span class='textsf'><i >lambda-capture</i></span></span></a><a class='hidden_link' href='#general-4.sentence-4'>.</a></div> <div id='general-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-3'>3</a></i>:&ensp;<div id='general-4.sentence-5' class='sentence'>The trailing <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause___'><span class='textsf'><i >requires-clause</i></span></span></a> is described in <a href='dcl.decl' title='9.3&emsp;Declarators'>[dcl.<span class='shy'></span>decl]</a><a class='hidden_link' href='#general-4.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='general-5'><div class='marginalizedparent'><a class='marginalized' href='#general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L1813'>#</a></div><div class='texpara'><div id='general-5.sentence-1' class='sentence'>A <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression____'><span class='textsf'><i >lambda-expression</i></span></span></a>'s <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause_'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a>
is the <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause__'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> of
the <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_____'><span class='textsf'><i >lambda-expression</i></span></span></a>'s <a href='#nt:lambda-declarator' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator___'><span class='textsf'><i >lambda-declarator</i></span></span></a>, if any,
or empty otherwise<a class='hidden_link' href='#general-5.sentence-1'>.</a></div> <div id='general-5.sentence-2' class='sentence'>If the <a href='#nt:lambda-declarator' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator____'><span class='textsf'><i >lambda-declarator</i></span></span></a>
does not include a <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type____'><span class='textsf'><i >trailing-return-type</i></span></span></a>,
it is considered to be <span class='texttt'><span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span id=':auto'><span class='texttt'><span class='keyword'>auto</span></span></span></span><a class='hidden_link' href='#general-5.sentence-2'>.</a></div> <div id='general-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-4'>4</a></i>:&ensp;<div id='general-5.sentence-3' class='sentence'>In that case, the return type is deduced from <span id=':return'><span class='texttt'><span class='keyword'>return</span></span></span> statements
as described in <a href='dcl.spec.auto' title='9.2.9.6&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a><a class='hidden_link' href='#general-5.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='general-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> x1 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span>;      <span class='comment'>// OK, return type is <span class='tcode_in_codeblock'>int</span></span>
<span class='keyword'>auto</span> x2 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>; <span class='curlybracket'>}</span>;       <span class='comment'>// error: deducing return type from <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list'><span class='textsf'><i >braced-init-list</i></span></span></a></span>
<span class='keyword'>int</span> j;
<span class='keyword'>auto</span> x3 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> j; <span class='curlybracket'>}</span>;  <span class='comment'>// OK, return type is <span class='tcode_in_codeblock'>int&amp;</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-6'><div class='marginalizedparent'><a class='marginalized' href='#general-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L1834'>#</a></div><div class='texpara'><div id='general-6.sentence-1' class='sentence'>A lambda is a <a class='hidden_link' href='#def:generic_lambda' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='def:generic_lambda'><i >generic lambda</i></span></a>
if the <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression______'><span class='textsf'><i >lambda-expression</i></span></span></a>
has any generic parameter type placeholders (<a href='dcl.spec.auto' title='9.2.9.6&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>), or
if the lambda has a <a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list_'><span class='textsf'><i >template-parameter-list</i></span></span></a><a class='hidden_link' href='#general-6.sentence-1'>.</a></div> <div id='general-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span> i <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> i, <span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='literal'>3</span>, <span class='literal'>4</span><span class='parenthesis'>)</span>;                  <span class='comment'>// OK, a generic lambda</span>
<span class='keyword'>int</span> j <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>T t, <span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='literal'>3</span>, <span class='literal'>4</span><span class='parenthesis'>)</span>;            <span class='comment'>// OK, a generic lambda</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='closure' class='section'><h4 ><a class='secnum' href='#closure' style='min-width:95pt'>7.5.5.2</a> Closure types <a class='abbr_ref' href='expr.prim.lambda.closure'>[expr.prim.lambda.closure]</a></h4><div class='para' id='closure-1'><div class='marginalizedparent'><a class='marginalized' href='#closure-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L1848'>#</a></div><div class='texpara'><div id='closure-1.sentence-1' class='sentence'>The type of a <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_______'><span class='textsf'><i >lambda-expression</i></span></span></a> (which is also the type of the
closure object) is a unique, unnamed non-union class type,
called the <a class='hidden_link' href='#def:closure_type' title='7.5.5.2&emsp;Closure types&emsp;[expr.prim.lambda.closure]'><span id='def:closure_type'><i >closure type</i></span></a>,
whose properties are described below<a class='hidden_link' href='#closure-1.sentence-1'>.</a></div></div></div><div class='para' id='closure-2'><div class='marginalizedparent'><a class='marginalized' href='#closure-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L1854'>#</a></div><div class='texpara'><div id='closure-2.sentence-1' class='sentence'>The closure type is declared in the smallest block
scope, class scope, or namespace scope that contains the corresponding
<a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression________'><span class='textsf'><i >lambda-expression</i></span></span></a><a class='hidden_link' href='#closure-2.sentence-1'>.</a></div> <div id='closure-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#closure-note-1'>1</a></i>:&ensp;<div id='closure-2.sentence-2' class='sentence'>This determines the set of namespaces and
classes associated with the closure type (<a href='basic.lookup.argdep' title='6.5.4&emsp;Argument-dependent name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>argdep]</a>)<a class='hidden_link' href='#closure-2.sentence-2'>.</a></div> <div id='closure-2.sentence-3' class='sentence'>The parameter
types of a <a href='#nt:lambda-declarator' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator_____'><span class='textsf'><i >lambda-declarator</i></span></span></a> do not affect these associated namespaces and
classes<a class='hidden_link' href='#closure-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='closure-2.sentence-4' class='sentence'>
The closure type is not an aggregate type (<a href='dcl.init.aggr' title='9.4.2&emsp;Aggregates'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a>) and
not a structural type (<a href='temp.param' title='13.2&emsp;Template parameters'>[temp.<span class='shy'></span>param]</a>)<a class='hidden_link' href='#closure-2.sentence-4'>.</a></div> <div id='closure-2.sentence-5' class='sentence'>An implementation may define the closure type differently from what
is described below provided this does not alter the observable behavior of the program
other than by changing:
<ul class='itemize'><li id='closure-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#closure-2.1'>(2.1)</a></div>the size and/or alignment of the closure type,</li><li id='closure-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#closure-2.2'>(2.2)</a></div>whether the closure type is trivially copyable (<a href='class.prop' title='11.2&emsp;Properties of classes'>[class.<span class='shy'></span>prop]</a>), or</li><li id='closure-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#closure-2.3'>(2.3)</a></div>whether the closure type is a standard-layout class (<a href='class.prop' title='11.2&emsp;Properties of classes'>[class.<span class='shy'></span>prop]</a>)<a class='hidden_link' href='#closure-2.sentence-5'>.</a></li></ul></div></div><div class='texpara'><div id='closure-2.sentence-6' class='sentence'>An implementation shall not add members of rvalue reference type to the closure
type<a class='hidden_link' href='#closure-2.sentence-6'>.</a></div></div></div><div class='para' id='closure-3'><div class='marginalizedparent'><a class='marginalized' href='#closure-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L1880'>#</a></div><div class='texpara'><div id='closure-3.sentence-1' class='sentence'>The closure type for a <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_________'><span class='textsf'><i >lambda-expression</i></span></span></a> has a public
inline function call operator (for a non-generic lambda) or
function call operator template (for a generic lambda) (<a href='over.call' title='12.4.4&emsp;Function call'>[over.<span class='shy'></span>call]</a>)
whose parameters and return type
are those of the <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s
<a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause___'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> and <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type_____'><span class='textsf'><i >trailing-return-type</i></span></span></a>
respectively, and whose
<a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list__'><span class='textsf'><i >template-parameter-list</i></span></span></a> consists of
the specified <a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list___'><span class='textsf'><i >template-parameter-list</i></span></span></a>, if any<a class='hidden_link' href='#closure-3.sentence-1'>.</a></div> <div id='closure-3.sentence-2' class='sentence'>The <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause____'><span class='textsf'><i >requires-clause</i></span></span></a> of the function call operator template
is the <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause_____'><span class='textsf'><i >requires-clause</i></span></span></a> immediately following
<span class='texttt'><span class='anglebracket'>&lt;</span></span> <a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list____'><span class='textsf'><i >template-parameter-list</i></span></span></a> <span class='texttt'><span class='anglebracket'>&gt;</span></span>, if any<a class='hidden_link' href='#closure-3.sentence-2'>.</a></div> <div id='closure-3.sentence-3' class='sentence'>The trailing <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause______'><span class='textsf'><i >requires-clause</i></span></span></a> of the function call operator
or operator template is the <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause_______'><span class='textsf'><i >requires-clause</i></span></span></a>
of the <a href='#nt:lambda-declarator' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator______'><span class='textsf'><i >lambda-declarator</i></span></span></a>, if any<a class='hidden_link' href='#closure-3.sentence-3'>.</a></div> <div id='closure-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#closure-note-2'>2</a></i>:&ensp;<div id='closure-3.sentence-4' class='sentence'>The function call operator template for a generic lambda can be
an abbreviated function template (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>)<a class='hidden_link' href='#closure-3.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='closure-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#closure-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> glambda <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a, <span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a <span class='anglebracket'>&lt;</span> b; <span class='curlybracket'>}</span>;
<span class='keyword'>bool</span> b <span class='operator'>=</span> glambda<span class='parenthesis'>(</span><span class='literal'>3</span>, <span class='literal'>3.14</span><span class='parenthesis'>)</span>;                                      <span class='comment'>// OK</span>

<span class='keyword'>auto</span> vglambda <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> printer<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> ts<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>                                   <span class='comment'>// OK, <span class='tcode_in_codeblock'>ts</span> is a function parameter pack</span>
    printer<span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span>ts<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>ts<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;

    <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      printer<span class='parenthesis'>(</span>ts <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    <span class='curlybracket'>}</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>auto</span> p <span class='operator'>=</span> vglambda<span class='parenthesis'>(</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> v1, <span class='keyword'>auto</span> v2, <span class='keyword'>auto</span> v3<span class='parenthesis'>)</span>
                   <span class='curlybracket'>{</span> std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> v1 <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> v2 <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> v3; <span class='curlybracket'>}</span> <span class='parenthesis'>)</span>;
<span class='keyword'>auto</span> q <span class='operator'>=</span> p<span class='parenthesis'>(</span><span class='literal'>1</span>, <span class='literal'>'a'</span>, <span class='literal'>3.14</span><span class='parenthesis'>)</span>;                                       <span class='comment'>// OK, outputs <span class='tcode_in_codeblock'>1a3.14</span></span>
q<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                                                            <span class='comment'>// OK, outputs <span class='tcode_in_codeblock'>1a3.14</span></span>

<span class='keyword'>auto</span> fact <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>this</span> <span class='keyword'>auto</span> self, <span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> <span class='curlybracket'>{</span>                  <span class='comment'>// OK, explicit object parameter</span>
  <span class='keyword'>return</span> <span class='parenthesis'>(</span>n <span class='anglebracket'>&lt;</span><span class='operator'>=</span> <span class='literal'>1</span><span class='parenthesis'>)</span> <span class='operator'>?</span> <span class='literal'>1</span> <span class='operator'>:</span> n <span class='operator'>*</span> self<span class='parenthesis'>(</span>n<span class='operator'>-</span><span class='literal'>1</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> fact<span class='parenthesis'>(</span><span class='literal'>5</span><span class='parenthesis'>)</span>;                                           <span class='comment'>// OK, outputs 120</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='closure-4'><div class='marginalizedparent'><a class='marginalized' href='#closure-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L1926'>#</a></div><div class='texpara'><div id='closure-4.sentence-1' class='sentence'>Given a lambda with a <a href='#nt:lambda-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture__'><span class='textsf'><i >lambda-capture</i></span></span></a>,
the type of the explicit object parameter, if any,
of the lambda's function call operator
(possibly instantiated from a function call operator template)
shall be either:
<ul class='itemize'><li id='closure-4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#closure-4.1'>(4.1)</a></div>the closure type,</li><li id='closure-4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#closure-4.2'>(4.2)</a></div>a class type derived from the closure type, or</li><li id='closure-4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#closure-4.3'>(4.3)</a></div>a reference to a possibly cv-qualified such type<a class='hidden_link' href='#closure-4.sentence-1'>.</a></li></ul></div> <div id='closure-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#closure-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
  C<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> func<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> x <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>this</span> <span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// OK</span>
  <span class='keyword'>int</span> y <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>this</span> C<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// error</span>
  <span class='keyword'>int</span> z <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>this</span> C<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>42</span>; <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='closure-5'><div class='marginalizedparent'><a class='marginalized' href='#closure-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L1955'>#</a></div><div class='texpara'><div id='closure-5.sentence-1' class='sentence'>The function call operator or operator template is
a static member function or static member function template (<a href='class.static.mfct' title='11.4.9.2&emsp;Static member functions'>[class.<span class='shy'></span>static.<span class='shy'></span>mfct]</a>)
if the <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression___________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s
<a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause____'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> is followed by <span id=':static____'><span class='texttt'><span class='keyword'>static</span></span></span><a class='hidden_link' href='#closure-5.sentence-1'>.</a></div> <div id='closure-5.sentence-2' class='sentence'>Otherwise, it is
a non-static member function or member function template (<a href='class.mfct.non.static' title='11.4.3&emsp;Non-static member functions'>[class.<span class='shy'></span>mfct.<span class='shy'></span>non.<span class='shy'></span>static]</a>)
that is declared
<span id=':const'><span class='texttt'><span class='keyword'>const</span></span></span> (<a href='class.mfct.non.static' title='11.4.3&emsp;Non-static member functions'>[class.<span class='shy'></span>mfct.<span class='shy'></span>non.<span class='shy'></span>static]</a>) if and only if the
<a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression____________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause_____'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> is not
followed by <span id=':mutable___'><span class='texttt'><span class='keyword'>mutable</span></span></span> and
the <a href='#nt:lambda-declarator' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator_______'><span class='textsf'><i >lambda-declarator</i></span></span></a> does not contain
an explicit object parameter<a class='hidden_link' href='#closure-5.sentence-2'>.</a></div> <div id='closure-5.sentence-3' class='sentence'>It is neither virtual nor declared <span class='texttt'><span class='keyword'>volatile</span></span><a class='hidden_link' href='#closure-5.sentence-3'>.</a></div> <div id='closure-5.sentence-4' class='sentence'>Any
<a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier___'><span class='textsf'><i >noexcept-specifier</i></span></span></a> specified on a <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_____________'><span class='textsf'><i >lambda-expression</i></span></span></a>
applies to the corresponding function call operator or operator template<a class='hidden_link' href='#closure-5.sentence-4'>.</a></div> <div id='closure-5.sentence-5' class='sentence'>An <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq________'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a> in a <a href='#nt:lambda-declarator' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator________'><span class='textsf'><i >lambda-declarator</i></span></span></a> appertains
to the type of the corresponding function call operator or operator template<a class='hidden_link' href='#closure-5.sentence-5'>.</a></div> <div id='closure-5.sentence-6' class='sentence'>An <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_________'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a> in a <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression______________'><span class='textsf'><i >lambda-expression</i></span></span></a>
preceding a <a href='#nt:lambda-declarator' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator_________'><span class='textsf'><i >lambda-declarator</i></span></span></a>
appertains to the corresponding function call operator or operator template<a class='hidden_link' href='#closure-5.sentence-6'>.</a></div> <div id='closure-5.sentence-7' class='sentence'>The function call operator or any given operator template specialization
is a constexpr function if either
the corresponding <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_______________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s
<a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause______'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a>
is followed by <span id=':constexpr__'><span class='texttt'><span class='keyword'>constexpr</span></span></span> or <span id=':consteval__'><span class='texttt'><span class='keyword'>consteval</span></span></span>, or
it is constexpr-suitable (<a href='dcl.constexpr' title='9.2.6&emsp;The constexpr and consteval specifiers'>[dcl.<span class='shy'></span>constexpr]</a>)<a class='hidden_link' href='#closure-5.sentence-7'>.</a></div> <div id='closure-5.sentence-8' class='sentence'>It is an immediate function (<a href='dcl.constexpr' title='9.2.6&emsp;The constexpr and consteval specifiers'>[dcl.<span class='shy'></span>constexpr]</a>)
if the corresponding <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression________________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s
<a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause_______'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> is followed by <span id=':consteval___'><span class='texttt'><span class='keyword'>consteval</span></span></span><a class='hidden_link' href='#closure-5.sentence-8'>.</a></div> <div id='closure-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#closure-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> ID <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>;
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>ID<span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>3</span><span class='parenthesis'>)</span>;                      <span class='comment'>// OK</span>

<span class='keyword'>struct</span> NonLiteral <span class='curlybracket'>{</span>
  NonLiteral<span class='parenthesis'>(</span><span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='operator'>:</span> n<span class='parenthesis'>(</span>n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
  <span class='keyword'>int</span> n;
<span class='curlybracket'>}</span>;
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>ID<span class='parenthesis'>(</span>NonLiteral<span class='curlybracket'>{</span><span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='operator'>.</span>n <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>3</span><span class='parenthesis'>)</span>;        <span class='comment'>// error</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='closure-6'><div class='marginalizedparent'><a class='marginalized' href='#closure-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L1998'>#</a></div><div class='texpara'><div id='closure-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#closure-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> monoid <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> v; <span class='curlybracket'>}</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>auto</span> add <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> m1<span class='parenthesis'>)</span> <span class='keyword'>constexpr</span> <span class='curlybracket'>{</span>
  <span class='keyword'>auto</span> ret <span class='operator'>=</span> m1<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> m2<span class='parenthesis'>)</span> <span class='keyword'>mutable</span> <span class='curlybracket'>{</span>
    <span class='keyword'>auto</span> m1val <span class='operator'>=</span> m1<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>auto</span> plus <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> m2val<span class='parenthesis'>)</span> <span class='keyword'>mutable</span> <span class='keyword'>constexpr</span>
                   <span class='curlybracket'>{</span> <span class='keyword'>return</span> m1val <span class='operator'>+</span><span class='operator'>=</span> m2val; <span class='curlybracket'>}</span>;
    ret <span class='operator'>=</span> plus<span class='parenthesis'>(</span>m2<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
    <span class='keyword'>return</span> monoid<span class='parenthesis'>(</span>ret<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>constexpr</span> <span class='keyword'>auto</span> zero <span class='operator'>=</span> monoid<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='keyword'>constexpr</span> <span class='keyword'>auto</span> one <span class='operator'>=</span> monoid<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>add<span class='parenthesis'>(</span>one<span class='parenthesis'>)</span><span class='parenthesis'>(</span>zero<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> one<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK</span>

<span class='comment'>// Since <span class='tcode_in_codeblock'>two</span> below is not declared <span id=':constexpr___'><span class='tcode_in_codeblock'>constexpr</span></span>, an evaluation of its <span class='tcode_in_codeblock'>constexpr</span> member function call operator</span>
<span class='comment'>// cannot perform an lvalue-to-rvalue conversion on one of its subobjects (that represents its capture)</span>
<span class='comment'>// in a constant expression.</span>
<span class='keyword'>auto</span> two <span class='operator'>=</span> monoid<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span>;
assert<span class='parenthesis'>(</span>two<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>2</span><span class='parenthesis'>)</span>; <span class='comment'>// OK, not a constant expression.</span>
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>add<span class='parenthesis'>(</span>one<span class='parenthesis'>)</span><span class='parenthesis'>(</span>one<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> two<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;        <span class='comment'>// error: <span class='tcode_in_codeblock'>two()</span> is not a constant expression</span>
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>add<span class='parenthesis'>(</span>one<span class='parenthesis'>)</span><span class='parenthesis'>(</span>one<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> monoid<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;  <span class='comment'>// OK</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='closure-7'><div class='marginalizedparent'><a class='marginalized' href='#closure-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2026'>#</a></div><div class='texpara'><div id='closure-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#closure-note-3'>3</a></i>:&ensp;<div id='closure-7.sentence-1' class='sentence'>The function call operator or operator template can be constrained (<a href='temp.constr.decl' title='13.5.3&emsp;Constrained declarations'>[temp.<span class='shy'></span>constr.<span class='shy'></span>decl]</a>)
by a <a href='temp.param#nt:type-constraint' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:type-constraint'><span class='textsf'><i >type-constraint</i></span></span></a> (<a href='temp.param' title='13.2&emsp;Template parameters'>[temp.<span class='shy'></span>param]</a>),
a <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause________'><span class='textsf'><i >requires-clause</i></span></span></a> (<a href='temp.pre' title='13.1&emsp;Preamble'>[temp.<span class='shy'></span>pre]</a>),
or a trailing <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause_________'><span class='textsf'><i >requires-clause</i></span></span></a> (<a href='dcl.decl' title='9.3&emsp;Declarators'>[dcl.<span class='shy'></span>decl]</a>)<a class='hidden_link' href='#closure-7.sentence-1'>.</a></div> <div id='closure-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#closure-example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C1 <span class='operator'>=</span> <span class='comment'>/* ... */</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>size_t N<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C2 <span class='operator'>=</span> <span class='comment'>/* ... */</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> A, <span class='keyword'>typename</span> B<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C3 <span class='operator'>=</span> <span class='comment'>/* ... */</span>;

<span class='keyword'>auto</span> f <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T1, C1 T2<span class='anglebracket'>&gt;</span> <span class='keyword'>requires</span> C2<span class='anglebracket'>&lt;</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T1<span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T2<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span>
         <span class='parenthesis'>(</span>T1 a1, T1 b1, T2 a2, <span class='keyword'>auto</span> a3, <span class='keyword'>auto</span> a4<span class='parenthesis'>)</span> <span class='keyword'>requires</span> C3<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span>a4<span class='parenthesis'>)</span>, T2<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='comment'>// <span class='tcode_in_codeblock'>T2</span> is constrained by a <a href='temp.param#nt:type-constraint' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:type-constraint_'><span class='textsf'><i >type-constraint</i></span></span></a>.</span>
  <span class='comment'>// <span class='tcode_in_codeblock'>T1</span> and <span class='tcode_in_codeblock'>T2</span> are constrained by a <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause__________'><span class='textsf'><i >requires-clause</i></span></span></a>, and</span>
  <span class='comment'>// <span class='tcode_in_codeblock'>T2</span> and the type of <span class='tcode_in_codeblock'>a4</span> are constrained by a trailing <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause___________'><span class='textsf'><i >requires-clause</i></span></span></a>.</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='closure-8'><div class='marginalizedparent'><a class='marginalized' href='#closure-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2048'>#</a></div><div class='texpara'><div id='closure-8.sentence-1' class='sentence'>The closure type for a non-generic <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_________________'><span class='textsf'><i >lambda-expression</i></span></span></a> with no
<a href='#nt:lambda-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture___'><span class='textsf'><i >lambda-capture</i></span></span></a>
whose constraints (if any) are satisfied
has a conversion function to pointer to
function with C++ language <a href='dcl.link' title='9.11&emsp;Linkage specifications&emsp;[dcl.link]'>linkage</a> having
the same parameter and return types as the closure type's function call operator<a class='hidden_link' href='#closure-8.sentence-1'>.</a></div> <div id='closure-8.sentence-2' class='sentence'>The conversion is to “pointer to <span id=':noexcept'><span class='texttt'><span class='keyword'>noexcept</span></span></span> function”
if the function call operator
has a non-throwing exception specification<a class='hidden_link' href='#closure-8.sentence-2'>.</a></div> <div id='closure-8.sentence-3' class='sentence'>If the function call operator is a static member function,
then the value returned by this conversion function is
the address of the function call operator<a class='hidden_link' href='#closure-8.sentence-3'>.</a></div> <div id='closure-8.sentence-4' class='sentence'>Otherwise, the value returned by this conversion function
is the address of a function <span class='texttt'>F</span> that, when invoked,
has the same effect as invoking the closure type's function call operator
on a default-constructed instance of the closure type<a class='hidden_link' href='#closure-8.sentence-4'>.</a></div> <div id='closure-8.sentence-5' class='sentence'><span class='texttt'>F</span> is a constexpr function
if the function call operator is a constexpr function
and is an immediate function
if the function call operator is an immediate function<a class='hidden_link' href='#closure-8.sentence-5'>.</a></div></div></div><div class='para' id='closure-9'><div class='marginalizedparent'><a class='marginalized' href='#closure-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2070'>#</a></div><div class='texpara'><div id='closure-9.sentence-1' class='sentence'>For a generic lambda with no <a href='#nt:lambda-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture____'><span class='textsf'><i >lambda-capture</i></span></span></a>, the closure type has a
conversion function template to
pointer to function<a class='hidden_link' href='#closure-9.sentence-1'>.</a></div> <div id='closure-9.sentence-2' class='sentence'>The conversion function template has the same invented
template parameter list, and the pointer to function has the same
parameter types, as the function call operator template<a class='hidden_link' href='#closure-9.sentence-2'>.</a></div> <div id='closure-9.sentence-3' class='sentence'>The return type of
the pointer to function shall behave as if it were a
<a href='dcl.type.decltype#nt:decltype-specifier' title='9.2.9.5&emsp;Decltype specifiers&emsp;[dcl.type.decltype]'><span id='ntref:decltype-specifier'><span class='textsf'><i >decltype-specifier</i></span></span></a> denoting the return type of the corresponding
function call operator template specialization<a class='hidden_link' href='#closure-9.sentence-3'>.</a></div></div></div><div class='para nonNormativeOnly' id='closure-10'><div class='marginalizedparent'><a class='marginalized' href='#closure-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2080'>#</a></div><div class='texpara'><div id='closure-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#closure-note-4'>4</a></i>:&ensp;<div id='closure-10.sentence-1' class='sentence'>If the generic lambda has no <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type______'><span class='textsf'><i >trailing-return-type</i></span></span></a> or
the <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type_______'><span class='textsf'><i >trailing-return-type</i></span></span></a> contains a placeholder type, return type
deduction of the corresponding function call operator template specialization
has to be done<a class='hidden_link' href='#closure-10.sentence-1'>.</a></div> <div id='closure-10.sentence-2' class='sentence'>The corresponding specialization is that instantiation of the
function call operator template with the same template arguments as those
deduced for the conversion function template<a class='hidden_link' href='#closure-10.sentence-2'>.</a></div> <div id='closure-10.sentence-3' class='sentence'>Consider the following:
<span class='codeblock'><span class='keyword'>auto</span> glambda <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>;
<span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span>fp<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='operator'>=</span> glambda;
</span></div> <div id='closure-10.sentence-4' class='sentence'>
The behavior of the conversion function of <span class='texttt'>glambda</span> above is like
that of the following conversion function:
<span class='codeblock'><span class='keyword'>struct</span> Closure <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>static</span> <span class='keyword'>auto</span> lambda_call_operator_invoker<span class='parenthesis'>(</span>T a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='comment'>// forwards execution to <span class='tcode_in_codeblock'>operator()(a)</span> and therefore has</span>
    <span class='comment'>// the same return type deduced</span>
    <span class='comment'>/* ... */</span>
  <span class='curlybracket'>}</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> fptr_t <span class='operator'>=</span>
     <span class='keyword'>decltype</span><span class='parenthesis'>(</span>lambda_call_operator_invoker<span class='parenthesis'>(</span>declval<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>operator</span> fptr_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>
    <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='operator'>&amp;</span>lambda_call_operator_invoker; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span></div> —&nbsp;<i>end note</i>]</div></div></div><div class='texpara'><div id='closure-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#closure-example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f1<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>   <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>void</span> f2<span class='parenthesis'>(</span><span class='keyword'>char</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>  <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>    <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>     <span class='comment'>// #1</span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>char</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>  <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>     <span class='comment'>// #2</span>

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>    <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>     <span class='comment'>// #3</span>
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>char</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>   <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>     <span class='comment'>// #4</span>

<span class='keyword'>auto</span> glambda <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>;
f1<span class='parenthesis'>(</span>glambda<span class='parenthesis'>)</span>;                    <span class='comment'>// OK</span>
f2<span class='parenthesis'>(</span>glambda<span class='parenthesis'>)</span>;                    <span class='comment'>// error: ID is not convertible</span>
g<span class='parenthesis'>(</span>glambda<span class='parenthesis'>)</span>;                     <span class='comment'>// error: ambiguous</span>
h<span class='parenthesis'>(</span>glambda<span class='parenthesis'>)</span>;                     <span class='comment'>// OK, calls #3 since it is convertible from ID</span>
<span class='keyword'>int</span><span class='operator'>&amp;</span> <span class='parenthesis'>(</span><span class='operator'>*</span>fpi<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='operator'>*</span> a<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span><span class='operator'>&amp;</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='operator'>*</span>a; <span class='curlybracket'>}</span>;        <span class='comment'>// OK</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='closure-11'><div class='marginalizedparent'><a class='marginalized' href='#closure-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2131'>#</a></div><div class='texpara'><div id='closure-11.sentence-1' class='sentence'>If the function call operator template is a static member function template,
then the value returned by
any given specialization of this conversion function template is
the address of the corresponding function call operator template specialization<a class='hidden_link' href='#closure-11.sentence-1'>.</a></div> <div id='closure-11.sentence-2' class='sentence'>Otherwise,
the value returned by any given specialization of this conversion function
template is the address of a function <span class='texttt'>F</span> that, when invoked, has the same
effect as invoking the generic lambda's corresponding function call operator
template specialization on a default-constructed instance of the closure type<a class='hidden_link' href='#closure-11.sentence-2'>.</a></div> <div id='closure-11.sentence-3' class='sentence'><span class='texttt'>F</span> is a constexpr function
if the corresponding specialization is a constexpr function and
<span class='texttt'>F</span> is an immediate function
if the function call operator template specialization is an immediate function<a class='hidden_link' href='#closure-11.sentence-3'>.</a></div> <div id='closure-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#closure-note-5'>5</a></i>:&ensp;<div id='closure-11.sentence-4' class='sentence'>This will result in the implicit instantiation of the generic lambda's body<a class='hidden_link' href='#closure-11.sentence-4'>.</a></div> <div id='closure-11.sentence-5' class='sentence'>The instantiated generic lambda's return type and parameter types are required to match
the return type and parameter types of the pointer to function<a class='hidden_link' href='#closure-11.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='closure-example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#closure-example-7'>7</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> GL <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> a; <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>;
<span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span>GL_int<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='operator'>=</span> GL;        <span class='comment'>// OK, through conversion function template</span>
GL_int<span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span>;                      <span class='comment'>// OK, same as <span class='tcode_in_codeblock'>GL(3)</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='closure-12'><div class='marginalizedparent'><a class='marginalized' href='#closure-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2158'>#</a></div><div class='texpara'><div id='closure-12.sentence-1' class='sentence'>The conversion function or conversion function template is public,
constexpr, non-virtual, non-explicit, const, and has a non-throwing <a href='except.spec' title='14.5&emsp;Exception specifications&emsp;[except.spec]'>exception
specification</a><a class='hidden_link' href='#closure-12.sentence-1'>.</a></div> <div id='closure-example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#closure-example-8'>8</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> Fwd <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span>fp<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>, <span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> fp<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>auto</span> C <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>;

<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>Fwd<span class='parenthesis'>(</span>C,<span class='literal'>3</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>3</span><span class='parenthesis'>)</span>;   <span class='comment'>// OK</span>

<span class='comment'>// No specialization of the function call operator template can be constexpr (due to the local static).</span>
<span class='keyword'>auto</span> NC <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>static</span> <span class='keyword'>int</span> s; <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>;
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>Fwd<span class='parenthesis'>(</span>NC,<span class='literal'>3</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>3</span><span class='parenthesis'>)</span>;  <span class='comment'>// error</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='closure-13'><div class='marginalizedparent'><a class='marginalized' href='#closure-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2175'>#</a></div><div class='texpara'><div id='closure-13.sentence-1' class='sentence'>The <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__________________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement__'><span class='textsf'><i >compound-statement</i></span></span></a> yields
the <a href='dcl.fct.def.general#nt:function-body' title='9.5.1&emsp;In general&emsp;[dcl.fct.def.general]'><span id='ntref:function-body'><span class='textsf'><i >function-body</i></span></span></a> (<a href='dcl.fct.def' title='9.5&emsp;Function definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def]</a>) of the function call operator,
but it is not within the scope of the closure type<a class='hidden_link' href='#closure-13.sentence-1'>.</a></div> <div id='closure-example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#closure-example-9'>9</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S1 <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> x, y;
  <span class='keyword'>int</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='keyword'>int</span> <span class='curlybracket'>{</span>
      <span class='keyword'>return</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>x <span class='operator'>+</span> y<span class='parenthesis'>)</span>;   <span class='comment'>// equivalent to <span class='tcode_in_codeblock'>S1&#x200b;::&#x200b;operator()(this-&gt;x + (*this).y)</span></span>
                                        <span class='comment'>// <span id=':this'><span class='tcode_in_codeblock'>this</span></span> has type <span class='tcode_in_codeblock'>S1*</span></span>
    <span class='curlybracket'>}</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div> <div id='closure-13.sentence-2' class='sentence'>
Further, a variable <span class='texttt'>__func__</span> is implicitly defined at the beginning of
the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement___'><span class='textsf'><i >compound-statement</i></span></span></a> of the <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression___________________'><span class='textsf'><i >lambda-expression</i></span></span></a>,
with semantics as described in <a href='dcl.fct.def.general' title='9.5.1&emsp;In general'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>general]</a><a class='hidden_link' href='#closure-13.sentence-2'>.</a></div></div></div><div class='para' id='closure-14'><div class='marginalizedparent'><a class='marginalized' href='#closure-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2197'>#</a></div><div class='texpara'><div id='closure-14.sentence-1' class='sentence'>The closure type associated with a <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression____________________'><span class='textsf'><i >lambda-expression</i></span></span></a> has no
default constructor
if the <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_____________________'><span class='textsf'><i >lambda-expression</i></span></span></a> has a <a href='#nt:lambda-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture_____'><span class='textsf'><i >lambda-capture</i></span></span></a>
and a defaulted default constructor otherwise<a class='hidden_link' href='#closure-14.sentence-1'>.</a></div> <div id='closure-14.sentence-2' class='sentence'>It has a defaulted copy constructor and a defaulted move constructor (<a href='class.copy.ctor' title='11.4.5.3&emsp;Copy/move constructors'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>)<a class='hidden_link' href='#closure-14.sentence-2'>.</a></div> <div id='closure-14.sentence-3' class='sentence'>It has a deleted copy assignment operator if the <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression______________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
has a <a href='#nt:lambda-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture______'><span class='textsf'><i >lambda-capture</i></span></span></a> and defaulted copy and move assignment
operators otherwise (<a href='class.copy.assign' title='11.4.6&emsp;Copy/move assignment operator'>[class.<span class='shy'></span>copy.<span class='shy'></span>assign]</a>)<a class='hidden_link' href='#closure-14.sentence-3'>.</a></div> <div id='closure-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#closure-note-6'>6</a></i>:&ensp;<div id='closure-14.sentence-4' class='sentence'>These special member functions are implicitly defined as
usual, which can result in them being defined as deleted<a class='hidden_link' href='#closure-14.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='closure-15'><div class='marginalizedparent'><a class='marginalized' href='#closure-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2211'>#</a></div><div class='texpara'><div id='closure-15.sentence-1' class='sentence'>The closure type associated with a <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_______________________'><span class='textsf'><i >lambda-expression</i></span></span></a> has an
implicitly-declared destructor (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)<a class='hidden_link' href='#closure-15.sentence-1'>.</a></div></div></div><div class='para' id='closure-16'><div class='marginalizedparent'><a class='marginalized' href='#closure-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2215'>#</a></div><div class='texpara'><div id='closure-16.sentence-1' class='sentence'>A member of a closure type shall not be
<a href='temp.explicit' title='13.9.3&emsp;Explicit instantiation&emsp;[temp.explicit]'>explicitly instantiated</a>,
<a href='temp.expl.spec' title='13.9.4&emsp;Explicit specialization&emsp;[temp.expl.spec]'>explicitly specialized</a>, or
named in a <a href='class.friend' title='11.8.4&emsp;Friends&emsp;[class.friend]'>friend declaration</a><a class='hidden_link' href='#closure-16.sentence-1'>.</a></div></div></div></div><div id='capture' class='section'><h4 ><a class='secnum' href='#capture' style='min-width:95pt'>7.5.5.3</a> Captures <a class='abbr_ref' href='expr.prim.lambda.capture'>[expr.prim.lambda.capture]</a></h4><div class='texpara'><div class='bnf' id='nt:lambda-capture'>
<a class='hidden_link' href='#nt:lambda-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='nt:lambda-capture'><span id=':lambda-capture'>lambda-capture<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:capture-default' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default'><span class='textsf'><i >capture-default</i></span></span></a><br/><a href='#nt:capture-list' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-list'><span class='textsf'><i >capture-list</i></span></span></a><br/><a href='#nt:capture-default' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default_'><span class='textsf'><i >capture-default</i></span></span></a> <span class='terminal'>,</span> <a href='#nt:capture-list' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-list_'><span class='textsf'><i >capture-list</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:capture-default'>
<a class='hidden_link' href='#nt:capture-default' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='nt:capture-default'><span id=':capture-default'>capture-default<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='operator'>&amp;</span></span><br/><span class='terminal'><span class='operator'>=</span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:capture-list'>
<a class='hidden_link' href='#nt:capture-list' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='nt:capture-list'><span id=':capture-list'>capture-list<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture'><span class='textsf'><i >capture</i></span></span></a><br/><a href='#nt:capture-list' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-list__'><span class='textsf'><i >capture-list</i></span></span></a> <span class='terminal'>,</span> <a href='#nt:capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture_'><span class='textsf'><i >capture</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:capture'>
<a class='hidden_link' href='#nt:capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='nt:capture'><span id=':capture'>capture<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:simple-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture'><span class='textsf'><i >simple-capture</i></span></span></a><br/><a href='#nt:init-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture'><span class='textsf'><i >init-capture</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:simple-capture'>
<a class='hidden_link' href='#nt:simple-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='nt:simple-capture'><span id=':simple-capture'>simple-capture<span class='textnormal'>:</span></span></span></a><br/><a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier'><span class='textsf'><i >identifier</i></span></span></a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span><br/><span class='terminal'><span class='operator'>&amp;</span></span> <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_'><span class='textsf'><i >identifier</i></span></span></a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span><br/><span id=':this_'><span class='texttt'><span class='keyword'>this</span></span></span><br/><span class='terminal'><span class='operator'>*</span></span> <span class='terminal'><span class='keyword'>this</span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:init-capture'>
<a class='hidden_link' href='#nt:init-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='nt:init-capture'><span id=':init-capture'>init-capture<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier__'><span class='textsf'><i >identifier</i></span></span></a> <a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer'><span class='textsf'><i >initializer</i></span></span></a><br/><span class='terminal'><span class='operator'>&amp;</span></span> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier___'><span class='textsf'><i >identifier</i></span></span></a> <a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer_'><span class='textsf'><i >initializer</i></span></span></a>
</div></div><div class='para' id='capture-1'><div class='marginalizedparent'><a class='marginalized' href='#capture-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2262'>#</a></div><div class='texpara'><div id='capture-1.sentence-1' class='sentence'>The body of a <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> may refer to local entities
of enclosing block scopes by capturing those entities, as described
below<a class='hidden_link' href='#capture-1.sentence-1'>.</a></div></div></div><div class='para' id='capture-2'><div class='marginalizedparent'><a class='marginalized' href='#capture-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2267'>#</a></div><div class='texpara'><div id='capture-2.sentence-1' class='sentence'>If a <a href='#nt:lambda-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture_______'><span class='textsf'><i >lambda-capture</i></span></span></a> includes a <a href='#nt:capture-default' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default__'><span class='textsf'><i >capture-default</i></span></span></a> that
is <span class='texttt'><span class='operator'>&amp;</span></span>, no identifier in a <a href='#nt:simple-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture_'><span class='textsf'><i >simple-capture</i></span></span></a> of that
<a href='#nt:lambda-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture________'><span class='textsf'><i >lambda-capture</i></span></span></a> shall be preceded
by <span class='texttt'><span class='operator'>&amp;</span></span><a class='hidden_link' href='#capture-2.sentence-1'>.</a></div> <div id='capture-2.sentence-2' class='sentence'>If a <a href='#nt:lambda-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture_________'><span class='textsf'><i >lambda-capture</i></span></span></a> includes a
<a href='#nt:capture-default' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default___'><span class='textsf'><i >capture-default</i></span></span></a> that is <span class='texttt'><span class='operator'>=</span></span>, each
<a href='#nt:simple-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture__'><span class='textsf'><i >simple-capture</i></span></span></a> of that <a href='#nt:lambda-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture__________'><span class='textsf'><i >lambda-capture</i></span></span></a> shall
be of the form
“<span class='texttt'><span class='operator'>&amp;</span></span> <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier____'><span class='textsf'><i >identifier</i></span></span></a> <span class='texttt'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>”,
“<span id=':this__'><span class='texttt'><span class='keyword'>this</span></span></span>”,
or “<span class='texttt'><span class='operator'>*</span> <span id=':this___'><span class='texttt'><span class='keyword'>this</span></span></span></span>”<a class='hidden_link' href='#capture-2.sentence-2'>.</a></div> <div id='capture-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#capture-note-1'>1</a></i>:&ensp;<div id='capture-2.sentence-3' class='sentence'>The form <span class='texttt'><span class='squarebracket'>[</span><span class='operator'>&amp;</span>,<span id=':this____'><span class='texttt'><span class='keyword'>this</span></span></span><span class='squarebracket'>]</span></span> is redundant but accepted
for compatibility with ISO C++ 2014<a class='hidden_link' href='#capture-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='capture-2.sentence-4' class='sentence'>
Ignoring appearances in
<a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer__'><span class='textsf'><i >initializer</i></span></span></a><i >s</i> of <a href='#nt:init-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture_'><span class='textsf'><i >init-capture</i></span></span></a><i >s</i>, an identifier or
<span id=':this_____'><span class='texttt'><span class='keyword'>this</span></span></span> shall not appear more than once in a
<a href='#nt:lambda-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture___________'><span class='textsf'><i >lambda-capture</i></span></span></a><a class='hidden_link' href='#capture-2.sentence-4'>.</a></div> <div id='capture-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#capture-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S2 <span class='curlybracket'>{</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>void</span> S2<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='squarebracket'>[</span><span class='operator'>&amp;</span>, i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;        <span class='comment'>// OK</span>
  <span class='squarebracket'>[</span><span class='operator'>&amp;</span>, <span class='keyword'>this</span>, i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;  <span class='comment'>// OK, equivalent to <span class='tcode_in_codeblock'>[&amp;, i]</span></span>
  <span class='squarebracket'>[</span><span class='operator'>&amp;</span>, <span class='operator'>&amp;</span>i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;       <span class='comment'>// error: <span class='tcode_in_codeblock'>i</span> preceded by <span class='tcode_in_codeblock'>&amp;</span> when <span class='tcode_in_codeblock'>&amp;</span> is the default</span>
  <span class='squarebracket'>[</span><span class='operator'>=</span>, <span class='operator'>*</span><span class='keyword'>this</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// OK</span>
  <span class='squarebracket'>[</span><span class='operator'>=</span>, <span class='keyword'>this</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;     <span class='comment'>// OK, equivalent to <span class='tcode_in_codeblock'>[=]</span></span>
  <span class='squarebracket'>[</span>i, i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;        <span class='comment'>// error: <span class='tcode_in_codeblock'>i</span> repeated</span>
  <span class='squarebracket'>[</span><span class='keyword'>this</span>, <span class='operator'>*</span><span class='keyword'>this</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>; <span class='comment'>// error: <span id=':this______'><span class='tcode_in_codeblock'>this</span></span> appears twice</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='capture-3'><div class='marginalizedparent'><a class='marginalized' href='#capture-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2301'>#</a></div><div class='texpara'><div id='capture-3.sentence-1' class='sentence'>A <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> shall not have
a <a href='#nt:capture-default' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default____'><span class='textsf'><i >capture-default</i></span></span></a> or <a href='#nt:simple-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture___'><span class='textsf'><i >simple-capture</i></span></span></a>
in its <a href='#nt:lambda-introducer' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-introducer__'><span class='textsf'><i >lambda-introducer</i></span></span></a>
unless its innermost enclosing scope is a block scope (<a href='basic.scope.block' title='6.4.3&emsp;Block scope'>[basic.<span class='shy'></span>scope.<span class='shy'></span>block]</a>)
or it appears within a default member initializer
and its innermost enclosing scope is
the corresponding class scope (<a href='basic.scope.class' title='6.4.7&emsp;Class scope'>[basic.<span class='shy'></span>scope.<span class='shy'></span>class]</a>)<a class='hidden_link' href='#capture-3.sentence-1'>.</a></div></div></div><div class='para' id='capture-4'><div class='marginalizedparent'><a class='marginalized' href='#capture-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2310'>#</a></div><div class='texpara'><div id='capture-4.sentence-1' class='sentence'>The <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_____'><span class='textsf'><i >identifier</i></span></span></a> in a <a href='#nt:simple-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture____'><span class='textsf'><i >simple-capture</i></span></span></a>
shall denote a local entity (<a href='basic.lookup.unqual' title='6.5.3&emsp;Unqualified name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>unqual]</a>, <a href='basic.pre' title='6.1&emsp;Preamble'>[basic.<span class='shy'></span>pre]</a>)<a class='hidden_link' href='#capture-4.sentence-1'>.</a></div> <div id='capture-4.sentence-2' class='sentence'>The <a href='#nt:simple-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture_____'><span class='textsf'><i >simple-capture</i></span></span></a><i >s</i> <span id=':this_______'><span class='texttt'><span class='keyword'>this</span></span></span> and <span class='texttt'><span class='operator'>*</span> <span id=':this________'><span class='texttt'><span class='keyword'>this</span></span></span></span>
denote the local entity <span class='texttt'><span class='operator'>*</span><span id=':this_________'><span class='texttt'><span class='keyword'>this</span></span></span></span><a class='hidden_link' href='#capture-4.sentence-2'>.</a></div> <div id='capture-4.sentence-3' class='sentence'>An entity that is designated by a
<a href='#nt:simple-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture______'><span class='textsf'><i >simple-capture</i></span></span></a>
is said to be <a class='hidden_link' href='#def:explicitly_captured' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='def:explicitly_captured'><i >explicitly captured</i></span></a><a class='hidden_link' href='#capture-4.sentence-3'>.</a></div></div></div><div class='para' id='capture-5'><div class='marginalizedparent'><a class='marginalized' href='#capture-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2319'>#</a></div><div class='texpara'><div id='capture-5.sentence-1' class='sentence'>If an <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier______'><span class='textsf'><i >identifier</i></span></span></a> in a <a href='#nt:capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture__'><span class='textsf'><i >capture</i></span></span></a> appears
as the <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id'><span class='textsf'><i >declarator-id</i></span></span></a> of a parameter of
the <a href='#nt:lambda-declarator' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator__________'><span class='textsf'><i >lambda-declarator</i></span></span></a>'s <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause________'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a>
or as the name of a template parameter of
the <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s <a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list_____'><span class='textsf'><i >template-parameter-list</i></span></span></a>,
the program is ill-formed<a class='hidden_link' href='#capture-5.sentence-1'>.</a></div> <div id='capture-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#capture-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>0</span>;
  <span class='keyword'>auto</span> g <span class='operator'>=</span> <span class='squarebracket'>[</span>x<span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>;    <span class='comment'>// error: parameter and <a href='#nt:capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture___'><span class='textsf'><i >capture</i></span></span></a> have the same name</span>
  <span class='keyword'>auto</span> h <span class='operator'>=</span> <span class='squarebracket'>[</span>y <span class='operator'>=</span> <span class='literal'>0</span><span class='squarebracket'>]</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> y<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>;    <span class='comment'>// error: template parameter and <a href='#nt:capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture____'><span class='textsf'><i >capture</i></span></span></a></span>
                                                    <span class='comment'>// have the same name</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='capture-6'><div class='marginalizedparent'><a class='marginalized' href='#capture-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2337'>#</a></div><div class='texpara'><div id='capture-6.sentence-1' class='sentence'>An <a href='#nt:init-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture__'><span class='textsf'><i >init-capture</i></span></span></a> inhabits
the lambda scope (<a href='basic.scope.lambda' title='6.4.5&emsp;Lambda scope'>[basic.<span class='shy'></span>scope.<span class='shy'></span>lambda]</a>)
of the <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression___________________________'><span class='textsf'><i >lambda-expression</i></span></span></a><a class='hidden_link' href='#capture-6.sentence-1'>.</a></div> <div id='capture-6.sentence-2' class='sentence'>An <a href='#nt:init-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture___'><span class='textsf'><i >init-capture</i></span></span></a> without ellipsis
behaves as if it declares and explicitly captures a variable of
the form “<span id=':auto_'><span class='texttt'><span class='keyword'>auto</span></span></span> <a href='#nt:init-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture____'><span class='textsf'><i >init-capture</i></span></span></a> <span class='texttt'>;</span>”, except that:
<ul class='itemize'><li id='capture-6.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#capture-6.1'>(6.1)</a></div>if the capture is by copy (see below), the non-static data member
declared for the capture and the variable are treated as two different ways
of referring to the same object, which has the lifetime of the non-static
data member, and no additional copy and destruction is performed, and</li><li id='capture-6.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#capture-6.2'>(6.2)</a></div>if the capture is by reference, the variable's lifetime ends when the
closure object's lifetime ends<a class='hidden_link' href='#capture-6.sentence-2'>.</a></li></ul></div> <div id='capture-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#capture-note-2'>2</a></i>:&ensp;<div id='capture-6.sentence-3' class='sentence'>This enables an <a href='#nt:init-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture_____'><span class='textsf'><i >init-capture</i></span></span></a> like
“<span class='texttt'>x <span class='operator'>=</span> std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span></span>”; the second “<span class='texttt'>x</span>” must bind to a
declaration in the surrounding context<a class='hidden_link' href='#capture-6.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='capture-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#capture-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>4</span>;
<span class='keyword'>auto</span> y <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>&amp;</span>r <span class='operator'>=</span> x, x <span class='operator'>=</span> x<span class='operator'>+</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='keyword'>int</span> <span class='curlybracket'>{</span>
            r <span class='operator'>+</span><span class='operator'>=</span> <span class='literal'>2</span>;
            <span class='keyword'>return</span> x<span class='operator'>+</span><span class='literal'>2</span>;
         <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                               <span class='comment'>// Updates <span class='tcode_in_codeblock'>&#x200b;::&#x200b;x</span> to 6, and initializes <span class='tcode_in_codeblock'>y</span> to 7.</span>

<span class='keyword'>auto</span> z <span class='operator'>=</span> <span class='squarebracket'>[</span>a <span class='operator'>=</span> <span class='literal'>42</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>1</span>; <span class='curlybracket'>}</span>;     <span class='comment'>// error: parameter and conceptual local variable have the same name</span>
<span class='keyword'>auto</span> counter <span class='operator'>=</span> <span class='squarebracket'>[</span>i<span class='operator'>=</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>mutable</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span>i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>     <span class='comment'>// OK, returns <span class='tcode_in_codeblock'>int</span></span>
  <span class='keyword'>return</span> i<span class='operator'>+</span><span class='operator'>+</span>;
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='capture-7'><div class='marginalizedparent'><a class='marginalized' href='#capture-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2372'>#</a></div><div class='texpara'><div id='capture-7.sentence-1' class='sentence'>For the purposes of lambda capture,
an expression potentially references local entities as follows:
<ul class='itemize'><li id='capture-7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#capture-7.1'>(7.1)</a></div><div class='texpara'><div id='capture-7.1.sentence-1' class='sentence'>An <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression'><span class='textsf'><i >id-expression</i></span></span></a> that names a local entity
potentially references that entity;
an <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_'><span class='textsf'><i >id-expression</i></span></span></a> that names
one or more non-static class members
and does not form a pointer to member (<a href='expr.unary.op' title='7.6.2.2&emsp;Unary operators'>[expr.<span class='shy'></span>unary.<span class='shy'></span>op]</a>)
potentially references <span class='texttt'><span class='operator'>*</span><span id=':this__________'><span class='texttt'><span class='keyword'>this</span></span></span></span><a class='hidden_link' href='#capture-7.1.sentence-1'>.</a></div> <div id='capture-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#capture-note-3'>3</a></i>:&ensp;<div id='capture-7.1.sentence-2' class='sentence'>This occurs even if overload resolution
selects a static member function for the <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression__'><span class='textsf'><i >id-expression</i></span></span></a><a class='hidden_link' href='#capture-7.1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='capture-7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#capture-7.2'>(7.2)</a></div><div class='texpara'><div id='capture-7.2.sentence-1' class='sentence'>A <span id=':this___________'><span class='texttt'><span class='keyword'>this</span></span></span> expression potentially references <span class='texttt'><span class='operator'>*</span><span id=':this____________'><span class='texttt'><span class='keyword'>this</span></span></span></span><a class='hidden_link' href='#capture-7.2.sentence-1'>.</a></div></div></li><li id='capture-7.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#capture-7.3'>(7.3)</a></div><div class='texpara'><div id='capture-7.3.sentence-1' class='sentence'>A <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression____________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> potentially references
the local entities named by its <a href='#nt:simple-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture_______'><span class='textsf'><i >simple-capture</i></span></span></a><i >s</i><a class='hidden_link' href='#capture-7.3.sentence-1'>.</a></div></div></li></ul></div></div><div class='texpara'><div id='capture-7.sentence-2' class='sentence'>If an expression potentially references a local entity
within a scope in which it is odr-usable (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>),
and the expression would be potentially evaluated
if the effect of any enclosing <span id=':typeid'><span class='texttt'><span class='keyword'>typeid</span></span></span> expressions (<a href='expr.typeid' title='7.6.1.8&emsp;Type identification'>[expr.<span class='shy'></span>typeid]</a>) were ignored,
the entity is said to be <a class='hidden_link' href='#def:capture,implicit' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='def:capture,implicit'><i >implicitly captured</i></span></a>
by each intervening <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_____________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> with an associated
<a href='#nt:capture-default' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default_____'><span class='textsf'><i >capture-default</i></span></span></a> that does not explicitly capture it<a class='hidden_link' href='#capture-7.sentence-2'>.</a></div> <div id='capture-7.sentence-3' class='sentence'>The implicit capture of <span class='texttt'><span class='operator'>*</span><span id=':this_____________'><span class='texttt'><span class='keyword'>this</span></span></span></span> is deprecated when the
<a href='#nt:capture-default' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default______'><span class='textsf'><i >capture-default</i></span></span></a> is <span class='texttt'><span class='operator'>=</span></span>; see <a href='depr.capture.this' title='D.3&emsp;Implicit capture of *this by reference'>[depr.<span class='shy'></span>capture.<span class='shy'></span>this]</a><a class='hidden_link' href='#capture-7.sentence-3'>.</a></div> <div id='capture-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#capture-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>const</span> <span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;         <span class='comment'>// #1</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> <span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;       <span class='comment'>// #2</span>
<span class='keyword'>void</span> test<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> <span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>17</span>;
  <span class='keyword'>auto</span> g <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;                       <span class='comment'>// OK, calls #1, does not capture <span class='tcode_in_codeblock'>x</span></span>
  <span class='curlybracket'>}</span>;

  <span class='keyword'>auto</span> g1 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;                       <span class='comment'>// OK, calls #1, captures <span class='tcode_in_codeblock'>x</span></span>
  <span class='curlybracket'>}</span>;

  <span class='keyword'>auto</span> g2 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> selector<span class='squarebracket'>[</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span> <span class='operator'>?</span> <span class='literal'>1</span> <span class='operator'>:</span> <span class='literal'>2</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
    f<span class='parenthesis'>(</span>x, selector<span class='parenthesis'>)</span>;             <span class='comment'>// OK, captures <span class='tcode_in_codeblock'>x</span>, can call #1 or #2</span>
  <span class='curlybracket'>}</span>;

  <span class='keyword'>auto</span> g3 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>typeid</span><span class='parenthesis'>(</span>a <span class='operator'>+</span> x<span class='parenthesis'>)</span>;              <span class='comment'>// captures <span class='tcode_in_codeblock'>x</span> regardless of whether <span class='tcode_in_codeblock'>a + x</span> is an unevaluated operand</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span> <div id='capture-7.sentence-4' class='sentence'>
Within <span class='texttt'>g1</span>, an implementation can optimize away
the capture of <span class='texttt'>x</span> as it is not odr-used<a class='hidden_link' href='#capture-7.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div> <div id='capture-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#capture-note-4'>4</a></i>:&ensp;<div id='capture-7.sentence-5' class='sentence'>The set of captured entities is determined syntactically,
and entities are implicitly captured
even if the expression denoting a local entity
is within a discarded statement (<a href='stmt.if' title='8.5.2&emsp;The if statement'>[stmt.<span class='shy'></span>if]</a>)<a class='hidden_link' href='#capture-7.sentence-5'>.</a></div> <div id='capture-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#capture-example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span> B<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>if</span> <span class='keyword'>constexpr</span> <span class='parenthesis'>(</span>B <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>4</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      <span class='parenthesis'>(</span><span class='keyword'>void</span><span class='parenthesis'>)</span>n;                  <span class='comment'>// captures <span class='tcode_in_codeblock'>n</span> regardless of the value of <span class='tcode_in_codeblock'>B</span> and <span class='tcode_in_codeblock'>sizeof(int)</span></span>
    <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='capture-8'><div class='marginalizedparent'><a class='marginalized' href='#capture-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2451'>#</a></div><div class='texpara'><div id='capture-8.sentence-1' class='sentence'>An entity is <a class='hidden_link' href='#def:captured' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='def:captured'><i >captured</i></span></a> if it is captured explicitly or implicitly<a class='hidden_link' href='#capture-8.sentence-1'>.</a></div> <div id='capture-8.sentence-2' class='sentence'>An entity
captured by a <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression______________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> is odr-used (<a href='basic.def.odr#term.odr.use' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>) by
the <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_______________________________'><span class='textsf'><i >lambda-expression</i></span></span></a><a class='hidden_link' href='#capture-8.sentence-2'>.</a></div> <div id='capture-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#capture-note-5'>5</a></i>:&ensp;<div id='capture-8.sentence-3' class='sentence'>As a consequence, if a <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
explicitly captures an entity that is not odr-usable,
the program is ill-formed (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>)<a class='hidden_link' href='#capture-8.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='capture-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#capture-example-6'>6</a></i>:&ensp;<span id=':Bond,James_Bond'><div class='marginalizedparent'><a class='itemDeclLink' href='#:Bond,James_Bond'>🔗</a></div><span class='codeblock'><span class='keyword'>void</span> f1<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> <span class='keyword'>const</span> N <span class='operator'>=</span> <span class='literal'>20</span>;
  <span class='keyword'>auto</span> m1 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span>
    <span class='keyword'>int</span> <span class='keyword'>const</span> M <span class='operator'>=</span> <span class='literal'>30</span>;
    <span class='keyword'>auto</span> m2 <span class='operator'>=</span> <span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='curlybracket'>{</span>
      <span class='keyword'>int</span> x<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span><span class='squarebracket'>[</span>M<span class='squarebracket'>]</span>;              <span class='comment'>// OK, <span class='tcode_in_codeblock'>N</span> and <span class='tcode_in_codeblock'>M</span> are not odr-used</span>
      x<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span> <span class='operator'>=</span> i;              <span class='comment'>// OK, <span class='tcode_in_codeblock'>i</span> is explicitly captured by <span class='tcode_in_codeblock'>m2</span> and implicitly captured by <span class='tcode_in_codeblock'>m1</span></span>
    <span class='curlybracket'>}</span>;
  <span class='curlybracket'>}</span>;
  <span class='keyword'>struct</span> s1 <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> f;
    <span class='keyword'>void</span> work<span class='parenthesis'>(</span><span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      <span class='keyword'>int</span> m <span class='operator'>=</span> n<span class='operator'>*</span>n;
      <span class='keyword'>int</span> j <span class='operator'>=</span> <span class='literal'>40</span>;
      <span class='keyword'>auto</span> m3 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='keyword'>this</span>,m<span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
        <span class='keyword'>auto</span> m4 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>&amp;</span>,j<span class='squarebracket'>]</span> <span class='curlybracket'>{</span>       <span class='comment'>// error: <span class='tcode_in_codeblock'>j</span> not odr-usable due to intervening lambda <span class='tcode_in_codeblock'>m3</span></span>
          <span class='keyword'>int</span> x <span class='operator'>=</span> n;            <span class='comment'>// error: <span class='tcode_in_codeblock'>n</span> is odr-used but not odr-usable due to intervening lambda <span class='tcode_in_codeblock'>m3</span></span>
          x <span class='operator'>+</span><span class='operator'>=</span> m;               <span class='comment'>// OK, <span class='tcode_in_codeblock'>m</span> implicitly captured by <span class='tcode_in_codeblock'>m4</span> and explicitly captured by <span class='tcode_in_codeblock'>m3</span></span>
          x <span class='operator'>+</span><span class='operator'>=</span> i;               <span class='comment'>// error: <span class='tcode_in_codeblock'>i</span> is odr-used but not odr-usable</span>
                                <span class='comment'>// due to intervening function and class scopes</span>
          x <span class='operator'>+</span><span class='operator'>=</span> f;               <span class='comment'>// OK, <span id=':this______________'><span class='tcode_in_codeblock'>this</span></span> captured implicitly by <span class='tcode_in_codeblock'>m4</span> and explicitly by <span class='tcode_in_codeblock'>m3</span></span>
        <span class='curlybracket'>}</span>;
      <span class='curlybracket'>}</span>;
    <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>struct</span> s2 <span class='curlybracket'>{</span>
  <span class='keyword'>double</span> ohseven <span class='operator'>=</span> <span class='literal'>.007</span>;
  <span class='keyword'>auto</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='keyword'>this</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
      <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>*</span><span class='keyword'>this</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
          <span class='keyword'>return</span> ohseven;       <span class='comment'>// OK</span>
      <span class='curlybracket'>}</span>;
    <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
  <span class='keyword'>auto</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
      <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>*</span><span class='keyword'>this</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;   <span class='comment'>// error: <span class='tcode_in_codeblock'>*this</span> not captured by outer <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a></span>
    <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span></span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='capture-9'><div class='marginalizedparent'><a class='marginalized' href='#capture-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2508'>#</a></div><div class='texpara'><div id='capture-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#capture-note-6'>6</a></i>:&ensp;<div id='capture-9.sentence-1' class='sentence'>Because local entities are not
odr-usable within a default argument (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>),
a <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> appearing in a default argument
cannot implicitly or explicitly capture any local entity<a class='hidden_link' href='#capture-9.sentence-1'>.</a></div> <div id='capture-9.sentence-2' class='sentence'>Such a <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression___________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
can still have an <a href='#nt:init-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture______'><span class='textsf'><i >init-capture</i></span></span></a> if
any full-expression in its <a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer___'><span class='textsf'><i >initializer</i></span></span></a>
satisfies the constraints of an expression appearing in
a default argument (<a href='dcl.fct.default' title='9.3.4.7&emsp;Default arguments'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>default]</a>)<a class='hidden_link' href='#capture-9.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='capture-example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#capture-example-7'>7</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f2<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>1</span>;
  <span class='keyword'>void</span> g1<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;          <span class='comment'>// error</span>
  <span class='keyword'>void</span> g2<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;          <span class='comment'>// error</span>
  <span class='keyword'>void</span> g3<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;          <span class='comment'>// error</span>
  <span class='keyword'>void</span> g4<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;          <span class='comment'>// OK</span>
  <span class='keyword'>void</span> g5<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='keyword'>sizeof</span> i; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;    <span class='comment'>// OK</span>
  <span class='keyword'>void</span> g6<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span>x<span class='operator'>=</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;        <span class='comment'>// OK</span>
  <span class='keyword'>void</span> g7<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span>x<span class='operator'>=</span>i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;        <span class='comment'>// error</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='capture-10'><div class='marginalizedparent'><a class='marginalized' href='#capture-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2535'>#</a></div><div class='texpara'><div id='capture-10.sentence-1' class='sentence'>An entity is <a class='hidden_link' href='#def:captured,by_copy' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='def:captured,by_copy'><i >captured by copy</i></span></a> if
<ul class='itemize'><li id='capture-10.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#capture-10.1'>(10.1)</a></div>it is implicitly captured,
the <a href='#nt:capture-default' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default_______'><span class='textsf'><i >capture-default</i></span></span></a> is <span class='texttt'><span class='operator'>=</span></span>, and
the captured entity is not <span class='texttt'><span class='operator'>*</span><span id=':this_______________'><span class='texttt'><span class='keyword'>this</span></span></span></span>, or</li><li id='capture-10.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#capture-10.2'>(10.2)</a></div>it is explicitly captured with a capture that is not of the form
<span id=':this________________'><span class='texttt'><span class='keyword'>this</span></span></span>,
<span class='texttt'><span class='operator'>&amp;</span></span> <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_______'><span class='textsf'><i >identifier</i></span></span></a>, or
<span class='texttt'><span class='operator'>&amp;</span></span> <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier________'><span class='textsf'><i >identifier</i></span></span></a> <a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer____'><span class='textsf'><i >initializer</i></span></span></a><a class='hidden_link' href='#capture-10.sentence-1'>.</a></li></ul></div> <div id='capture-10.sentence-2' class='sentence'>
For each entity captured by copy, an
unnamed non-static data member is declared in the closure type<a class='hidden_link' href='#capture-10.sentence-2'>.</a></div> <div id='capture-10.sentence-3' class='sentence'>The declaration order of
these members is unspecified<a class='hidden_link' href='#capture-10.sentence-3'>.</a></div> <div id='capture-10.sentence-4' class='sentence'>The type of such a data member is
the referenced type if the entity is a reference to an object,
an lvalue reference to the referenced function type if the entity is a reference to a function, or
the type of the corresponding captured entity otherwise<a class='hidden_link' href='#capture-10.sentence-4'>.</a></div> <div id='capture-10.sentence-5' class='sentence'>A member of an anonymous union shall not be captured by copy<a class='hidden_link' href='#capture-10.sentence-5'>.</a></div></div></div><div class='para' id='capture-11'><div class='marginalizedparent'><a class='marginalized' href='#capture-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2556'>#</a></div><div class='texpara'><div id='capture-11.sentence-1' class='sentence'>Every <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression___'><span class='textsf'><i >id-expression</i></span></span></a> within the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement____'><span class='textsf'><i >compound-statement</i></span></span></a> of a
<a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression____________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> that is an odr-use (<a href='basic.def.odr#term.odr.use' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>) of an
entity captured by copy is transformed into an access to the corresponding unnamed data
member of the closure type<a class='hidden_link' href='#capture-11.sentence-1'>.</a></div> <div id='capture-note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#capture-note-7'>7</a></i>:&ensp;<div id='capture-11.sentence-2' class='sentence'>An <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression____'><span class='textsf'><i >id-expression</i></span></span></a> that is not an odr-use refers to
the original entity, never to a member of the closure type<a class='hidden_link' href='#capture-11.sentence-2'>.</a></div> <div id='capture-11.sentence-3' class='sentence'>However, such
an <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_____'><span class='textsf'><i >id-expression</i></span></span></a> can still cause the implicit capture of the
entity<a class='hidden_link' href='#capture-11.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='capture-11.sentence-4' class='sentence'>
If <span class='texttt'><span class='operator'>*</span><span id=':this_________________'><span class='texttt'><span class='keyword'>this</span></span></span></span> is captured by copy, each expression that odr-uses <span class='texttt'><span class='operator'>*</span><span id=':this__________________'><span class='texttt'><span class='keyword'>this</span></span></span></span> is
transformed to instead refer to the corresponding unnamed data member of the closure type<a class='hidden_link' href='#capture-11.sentence-4'>.</a></div> <div id='capture-example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#capture-example-8'>8</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> <span class='keyword'>int</span> N <span class='operator'>=</span> <span class='literal'>10</span>;
  <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> arr<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span>;     <span class='comment'>// OK, not an odr-use, refers to automatic variable</span>
    f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>N<span class='parenthesis'>)</span>;          <span class='comment'>// OK, causes <span class='tcode_in_codeblock'>N</span> to be captured; <span class='tcode_in_codeblock'>&amp;N</span> points to</span>
                    <span class='comment'>// the corresponding member of the closure type</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='capture-12'><div class='marginalizedparent'><a class='marginalized' href='#capture-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2584'>#</a></div><div class='texpara'><div id='capture-12.sentence-1' class='sentence'>An entity is <a class='hidden_link' href='#def:captured,by_reference' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='def:captured,by_reference'><i >captured by reference</i></span></a> if it is implicitly or explicitly
captured but not captured by copy<a class='hidden_link' href='#capture-12.sentence-1'>.</a></div> <div id='capture-12.sentence-2' class='sentence'>It is unspecified whether additional unnamed
non-static data members are declared in the closure type for entities captured by
reference<a class='hidden_link' href='#capture-12.sentence-2'>.</a></div> <div id='capture-12.sentence-3' class='sentence'>If declared, such non-static data members shall be of literal type<a class='hidden_link' href='#capture-12.sentence-3'>.</a></div> <div id='capture-example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#capture-example-9'>9</a></i>:&ensp;<span class='codeblock'><span class='comment'>// The inner closure type must be a literal type regardless of how reference captures are represented.</span>
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>&amp;</span>n<span class='squarebracket'>]</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='operator'>+</span><span class='operator'>+</span>n; <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>4</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div> <div id='capture-12.sentence-4' class='sentence'>
A bit-field or a member of an anonymous union
shall not be captured by reference<a class='hidden_link' href='#capture-12.sentence-4'>.</a></div></div></div><div class='para' id='capture-13'><div class='marginalizedparent'><a class='marginalized' href='#capture-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2599'>#</a></div><div class='texpara'><div id='capture-13.sentence-1' class='sentence'>An <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression______'><span class='textsf'><i >id-expression</i></span></span></a> within
the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement_____'><span class='textsf'><i >compound-statement</i></span></span></a> of a <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_____________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
that is an odr-use of a reference captured by reference
refers to the entity to which the captured reference is bound and
not to the captured reference<a class='hidden_link' href='#capture-13.sentence-1'>.</a></div> <div id='capture-note-8' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#capture-note-8'>8</a></i>:&ensp;<div id='capture-13.sentence-2' class='sentence'>The validity of such captures is determined by
the lifetime of the object to which the reference refers,
not by the lifetime of the reference itself<a class='hidden_link' href='#capture-13.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='capture-example-10' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#capture-example-10'>10</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>&amp;</span>r<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
    <span class='operator'>+</span><span class='operator'>+</span>r;            <span class='comment'>// Valid after <span class='tcode_in_codeblock'>h</span> returns if the lifetime of the</span>
                    <span class='comment'>// object to which <span class='tcode_in_codeblock'>r</span> is bound has not ended</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='capture-14'><div class='marginalizedparent'><a class='marginalized' href='#capture-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2621'>#</a></div><div class='texpara'><div id='capture-14.sentence-1' class='sentence'>If a <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression______________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> <span class='texttt'>m2</span> captures an entity and that entity is
captured by an immediately enclosing <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_______________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
<span class='texttt'>m1</span>, then
<span class='texttt'>m2</span>'s capture is transformed as follows:
<ul class='itemize'><li id='capture-14.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#capture-14.1'>(14.1)</a></div><div class='texpara'><div id='capture-14.1.sentence-1' class='sentence'>If <span class='texttt'>m1</span> captures the entity by copy,
<span class='texttt'>m2</span> captures the corresponding
non-static data member of <span class='texttt'>m1</span>'s closure type;
if <span class='texttt'>m1</span> is not <span id=':mutable____'><span class='texttt'><span class='keyword'>mutable</span></span></span>, the non-static data member is considered to be const-qualified<a class='hidden_link' href='#capture-14.1.sentence-1'>.</a></div></div></li><li id='capture-14.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#capture-14.2'>(14.2)</a></div><div class='texpara'><div id='capture-14.2.sentence-1' class='sentence'>If <span class='texttt'>m1</span> captures the entity by reference,
<span class='texttt'>m2</span> captures the same
entity captured by <span class='texttt'>m1</span><a class='hidden_link' href='#capture-14.2.sentence-1'>.</a></div></div></li></ul></div> <div id='capture-example-11' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#capture-example-11'>11</a></i>:&ensp;<div id='capture-14.sentence-2' class='sentence'>The nested <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a><i >s</i> and invocations below will output
<span class='texttt'><span class='literal'>123234</span></span><a class='hidden_link' href='#capture-14.sentence-2'>.</a></div> <span class='codeblock'><span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>1</span>, b <span class='operator'>=</span> <span class='literal'>1</span>, c <span class='operator'>=</span> <span class='literal'>1</span>;
<span class='keyword'>auto</span> m1 <span class='operator'>=</span> <span class='squarebracket'>[</span>a, <span class='operator'>&amp;</span>b, <span class='operator'>&amp;</span>c<span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>mutable</span> <span class='curlybracket'>{</span>
  <span class='keyword'>auto</span> m2 <span class='operator'>=</span> <span class='squarebracket'>[</span>a, b, <span class='operator'>&amp;</span>c<span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>mutable</span> <span class='curlybracket'>{</span>
    std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> a <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> b <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> c;
    a <span class='operator'>=</span> <span class='literal'>4</span>; b <span class='operator'>=</span> <span class='literal'>4</span>; c <span class='operator'>=</span> <span class='literal'>4</span>;
  <span class='curlybracket'>}</span>;
  a <span class='operator'>=</span> <span class='literal'>3</span>; b <span class='operator'>=</span> <span class='literal'>3</span>; c <span class='operator'>=</span> <span class='literal'>3</span>;
  m2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
a <span class='operator'>=</span> <span class='literal'>2</span>; b <span class='operator'>=</span> <span class='literal'>2</span>; c <span class='operator'>=</span> <span class='literal'>2</span>;
m1<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> a <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> b <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> c;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='capture-15'><div class='marginalizedparent'><a class='marginalized' href='#capture-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2654'>#</a></div><div class='texpara'><div id='capture-15.sentence-1' class='sentence'>When the <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> is evaluated, the entities that are
captured by copy are used to direct-initialize each corresponding non-static data member
of the resulting closure object, and the non-static data members corresponding to the
<a href='#nt:init-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture_______'><span class='textsf'><i >init-capture</i></span></span></a><i >s</i> are initialized as indicated by the corresponding
<a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer_____'><span class='textsf'><i >initializer</i></span></span></a> (which may be copy- or direct-initialization)<a class='hidden_link' href='#capture-15.sentence-1'>.</a></div> <div id='capture-15.sentence-2' class='sentence'>(For array members, the array elements are
direct-initialized in increasing subscript order<a class='hidden_link' href='#capture-15.sentence-2'>.</a>)</div> <div id='capture-15.sentence-3' class='sentence'>These initializations are performed
in the (unspecified) order in which the non-static data members are declared<a class='hidden_link' href='#capture-15.sentence-3'>.</a></div> <div id='capture-note-9' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#capture-note-9'>9</a></i>:&ensp;<div id='capture-15.sentence-4' class='sentence'>This ensures that the destructions will occur in the reverse order of the constructions<a class='hidden_link' href='#capture-15.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='capture-16'><div class='marginalizedparent'><a class='marginalized' href='#capture-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2666'>#</a></div><div class='texpara'><div id='capture-note-10' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#capture-note-10'>10</a></i>:&ensp;<div id='capture-16.sentence-1' class='sentence'>If a non-reference entity is implicitly or explicitly captured by reference,
invoking the function call operator of the corresponding <a href='#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
after the lifetime of the entity has ended is likely to result in undefined behavior<a class='hidden_link' href='#capture-16.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='capture-17'><div class='marginalizedparent'><a class='marginalized' href='#capture-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/expressions.tex#L2673'>#</a></div><div class='texpara'><div id='capture-17.sentence-1' class='sentence'>A <a href='#nt:simple-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture________'><span class='textsf'><i >simple-capture</i></span></span></a> containing an ellipsis is a pack
expansion (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>)<a class='hidden_link' href='#capture-17.sentence-1'>.</a></div> <div id='capture-17.sentence-2' class='sentence'><a class='index' id=':init-capture_pack'></a>An <a href='#nt:init-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture________'><span class='textsf'><i >init-capture</i></span></span></a> containing an ellipsis is a pack
expansion that declares an
<a href='#nt:init-capture' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture_________'><span class='textsf'><i >init-capture</i></span></span></a> pack (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>)<a class='hidden_link' href='#capture-17.sentence-2'>.</a></div> <div id='capture-example-12' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#capture-example-12'>12</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>auto</span> lm <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>&amp;</span>, args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> g<span class='parenthesis'>(</span>args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
  lm<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

  <span class='keyword'>auto</span> lm2 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>xs<span class='operator'>=</span>std<span class='operator'>::</span>move<span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> g<span class='parenthesis'>(</span>xs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
  lm2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> </div></div></div></div></body></html>