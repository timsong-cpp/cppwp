<!DOCTYPE html><html lang='en'><head><title>[format.string.general]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>20</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>20.20</a> Formatting <a class='abbr_ref' href='format#string.general'>[format]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>20.20.2</a> Format string <a class='abbr_ref' href='format.string#general'>[format.string]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>20.20.2.1</a> In general <a class='abbr_ref'>[format.string.general]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/utilities.tex#L19271'>#</a></div><div id='1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:format_string' id='def:format_string'><i >format string</i></a> for arguments <span class='texttt'>args</span> is
a (possibly empty) sequence of
<a class='hidden_link' href='#def:replacement_field,format_string' id='def:replacement_field,format_string'><i >replacement fields</i></a>,
<a class='hidden_link' href='#def:escape_sequence,format_string' id='def:escape_sequence,format_string'><i >escape sequences</i></a>,
and characters other than <span class='texttt'><span class='curlybracket'>{</span></span> and <span class='texttt'><span class='curlybracket'>}</span></span><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>Let <span class='texttt'>charT</span> be the character type of the format string<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>Each character that is not part of
a replacement field or an escape sequence
is copied unchanged to the output<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>An escape sequence is one of <span class='texttt'><span class='curlybracket'>{</span><span class='curlybracket'>{</span></span> or <span class='texttt'><span class='curlybracket'>}</span><span class='curlybracket'>}</span></span><a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>It is replaced with <span class='texttt'><span class='curlybracket'>{</span></span> or <span class='texttt'><span class='curlybracket'>}</span></span>, respectively, in the output<a class='hidden_link' href='#1.sentence-5'>.</a></div> <div id='1.sentence-6' class='sentence'>The syntax of replacement fields is as follows:</div><pre class='ncbnf'><span class='sffamily'></span><i>replacement-field</i><span class='textnormal'>:</span>
&#9;<span class='terminal'><span class='curlybracket'>{</span></span> arg-id<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> format-specifier<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='curlybracket'>}</span></span>
</pre><pre class='ncbnf'><span class='sffamily'></span><i>arg-id</i><span class='textnormal'>:</span>
&#9;<span class='terminal'><span class='literal'>0</span></span>
&#9;positive-integer
</pre><pre class='ncbnf'><span class='sffamily'></span><i>positive-integer</i><span class='textnormal'>:</span>
&#9;<a class='grammarterm' href='lex.icon#nt:nonzero-digit'>nonzero-digit</a>
&#9;positive-integer <a class='grammarterm' href='lex.name#nt:digit'>digit</a>
</pre><pre class='ncbnf'><span class='sffamily'></span><i>nonnegative-integer</i><span class='textnormal'>:</span>
&#9;<a class='grammarterm' href='lex.name#nt:digit'>digit</a>
&#9;nonnegative-integer <a class='grammarterm' href='lex.name#nt:digit'>digit</a>
</pre><pre class='ncbnf'><span class='sffamily'></span><i><a class='grammarterm' href='lex.icon#nt:nonzero-digit'>nonzero-digit</a></i><span class='textnormal'>:</span> <span class='textnormal'>one of</span>
&#9;<span class='terminal'><span class='literal'>1</span> <span class='literal'>2</span> <span class='literal'>3</span> <span class='literal'>4</span> <span class='literal'>5</span> <span class='literal'>6</span> <span class='literal'>7</span> <span class='literal'>8</span> <span class='literal'>9</span></span>
</pre><pre class='ncbnf'><span class='sffamily'></span><i><a class='grammarterm' href='lex.name#nt:digit'>digit</a></i><span class='textnormal'>:</span> <span class='textnormal'>one of</span>
&#9;<span class='terminal'><span class='literal'>0</span> <span class='literal'>1</span> <span class='literal'>2</span> <span class='literal'>3</span> <span class='literal'>4</span> <span class='literal'>5</span> <span class='literal'>6</span> <span class='literal'>7</span> <span class='literal'>8</span> <span class='literal'>9</span></span>
</pre><pre class='ncbnf'><span class='sffamily'></span><i>format-specifier</i><span class='textnormal'>:</span>
&#9;<span class='terminal'><span class='operator'>:</span></span> format-spec
</pre><pre class='ncbnf'><span class='sffamily'></span><i>format-spec</i><span class='textnormal'>:</span>
&#9;<span class='textnormal'>as specified by the <span class='texttt'>formatter</span> specialization for the argument type</span>
</pre></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/utilities.tex#L19329'>#</a></div><div id='2.sentence-1' class='sentence'>The <span class='textsf'><span class='textit'>arg-id</span></span> field specifies the index of
the argument in <span class='texttt'>args</span>
whose value is to be formatted and inserted into the output
instead of the replacement field<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>If there is no argument with
the index <span class='textsf'><span class='textit'>arg-id</span></span> in <span class='texttt'>args</span>,
the string is not a format string for <span class='texttt'>args</span><a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>The optional <span class='textsf'><span class='textit'>format-specifier</span></span> field
explicitly specifies a format for the replacement value<a class='hidden_link' href='#2.sentence-3'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/utilities.tex#L19340'>#</a></div><div id='3.example-1' class='example'>[&nbsp;<a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
string s <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"{0}-{{"</span>, <span class='literal'>8</span><span class='parenthesis'>)</span>;         <span class='comment'>// value of <span class='tcode_in_codeblock'>s</span> is <span class='tcode_in_codeblock'>"8-{"</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/utilities.tex#L19347'>#</a></div><div id='4.sentence-1' class='sentence'>If all <span class='textsf'><span class='textit'>arg-id</span></span>s in a format string are omitted
(including those in the <span class='textsf'><span class='textit'>format-spec</span></span>,
as interpreted by the corresponding <span class='texttt'>formatter</span> specialization),
argument indices 0, 1, 2, &hellip; will automatically be used in that order<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>If some <span class='textsf'><span class='textit'>arg-id</span></span>s are omitted and some are present,
the string is not a format string<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.note-1' class='note'>[&nbsp;<a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-3' class='sentence'>A format string cannot contain a
mixture of automatic and manual indexing<a class='hidden_link' href='#4.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='4.example-1' class='example'>[&nbsp;<a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
string s0 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"{} to {}"</span>,   <span class='literal'>"a"</span>, <span class='literal'>"b"</span><span class='parenthesis'>)</span>; <span class='comment'>// OK, automatic indexing</span>
string s1 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"{1} to {0}"</span>, <span class='literal'>"a"</span>, <span class='literal'>"b"</span><span class='parenthesis'>)</span>; <span class='comment'>// OK, manual indexing</span>
string s2 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"{0} to {}"</span>,  <span class='literal'>"a"</span>, <span class='literal'>"b"</span><span class='parenthesis'>)</span>; <span class='comment'>// not a format string (mixing automatic and manual indexing),</span>
                                            <span class='comment'>// throws <span class='tcode_in_codeblock'>format_&shy;error</span></span>
string s3 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"{} to {1}"</span>,  <span class='literal'>"a"</span>, <span class='literal'>"b"</span><span class='parenthesis'>)</span>; <span class='comment'>// not a format string (mixing automatic and manual indexing),</span>
                                            <span class='comment'>// throws <span class='tcode_in_codeblock'>format_&shy;error</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/utilities.tex#L19369'>#</a></div><div id='5.sentence-1' class='sentence'>The <span class='textsf'><span class='textit'>format-spec</span></span> field contains
<a class='hidden_link' href='#def:format_specification,format_string' id='def:format_specification,format_string'><i >format specifications</i></a>
that define how the value should be presented<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>Each type can define its own
interpretation of the <span class='textsf'><span class='textit'>format-spec</span></span> field<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>If <span class='textsf'><span class='textit'>format-spec</span></span> does not conform
to the format specifications for
the argument type referred to by <span class='textsf'><span class='textit'>arg-id</span></span>,
the string is not a format string for <span class='texttt'>args</span><a class='hidden_link' href='#5.sentence-3'>.</a></div> <div id='5.example-1' class='example'>[&nbsp;<a class='example_link' href='#5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <ul class='itemize'><li ><div id='5.sentence-1' class='sentence'>For arithmetic, pointer, and string types
the <span class='textsf'><span class='textit'>format-spec</span></span>
is interpreted as a <span class='textsf'><span class='textit'>std-format-spec</span></span>
as described in  (<a href='format.string.std'>[format.string.std]</a>)<a class='hidden_link' href='#5.sentence-1'>.</a></div></li><li ><div id='5.sentence-1' class='sentence'>For chrono types
the <span class='textsf'><span class='textit'>format-spec</span></span>
is interpreted as a <span class='textsf'><span class='textit'>chrono-format-spec</span></span>
as described in  (<a href='time.format'>[time.format]</a>)<a class='hidden_link' href='#5.sentence-1'>.</a></div></li><li ><div id='5.sentence-1' class='sentence'>For user-defined <span class='texttt'>formatter</span> specializations,
the behavior of the <span class='texttt'>parse</span> member function
determines how the <span class='textsf'><span class='textit'>format-spec</span></span>
is interpreted<a class='hidden_link' href='#5.sentence-1'>.</a></div></li></ul> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div></body></html>