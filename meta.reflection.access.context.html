<!DOCTYPE html><html lang='en'><head><title>[meta.reflection.access.context]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>21</a> Metaprogramming library <a class='abbr_ref' href='./#meta'>[meta]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>21.4</a> Reflection <a class='abbr_ref' href='meta.reflection#access.context'>[meta.reflection]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>21.4.8</a> Access control context <a class='abbr_ref'>[meta.reflection.access.context]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/meta.tex#L4997'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>The <span class='texttt'>access_<span class='shy'></span>context</span> class is a non-aggregate type
that represents a namespace, class, or function
from which queries pertaining to access rules may be performed,
as well as the designating class (<a href='class.access.base' title='11.8.3&emsp;Accessibility of base classes and base class members'>[class.<span class='shy'></span>access.<span class='shy'></span>base]</a>), if any<a class='hidden_link' href='#1.sentence-1'>.</a></div> <a class='index' id='lib:access_context'></a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/meta.tex#L5004'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>An <span class='texttt'>access_<span class='shy'></span>context</span> has an associated scope and designating class<a class='hidden_link' href='#2.sentence-1'>.</a></div></div><div class='texpara'><span id='lib:access_context_'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:access_context_'>ðŸ”—</a></div><span class='codeblock'><span class='keyword'>namespace</span> std<span class='operator'>::</span>meta <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> access_context <span class='curlybracket'>{</span>
    access_context<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>consteval</span> info scope<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    <span class='keyword'>consteval</span> info designating_class<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;

    <span class='keyword'>static</span> <span class='keyword'>consteval</span> access_context current<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>static</span> <span class='keyword'>consteval</span> access_context unprivileged<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>static</span> <span class='keyword'>consteval</span> access_context unchecked<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>consteval</span> access_context via<span class='parenthesis'>(</span>info cls<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/meta.tex#L5024'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'><span class='texttt'>access_<span class='shy'></span>context</span> is a structural type<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>Two values <span class='texttt'>ac1</span> and <span class='texttt'>ac2</span> of type <span class='texttt'>access_<span class='shy'></span>context</span>
are template-argument-equivalent (<a href='temp.type' title='13.6&emsp;Type equivalence'>[temp.<span class='shy'></span>type]</a>)
if <span class='texttt'>ac1<span class='operator'>.</span>scope<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> and <span class='texttt'>ac2<span class='operator'>.</span>scope<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
are template-argument-equivalent
and <span class='texttt'>ac1<span class='operator'>.</span>designating_<span class='shy'></span>class<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> and <span class='texttt'>ac2<span class='operator'>.</span>designating_<span class='shy'></span>class<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
are template-argument-equivalent<a class='hidden_link' href='#3.sentence-2'>.</a></div></div></div><div class='texpara'><div class='itemdecl' id='itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>consteval</span> info <span id='lib:access_context,scope'><span id='lib:scope,access_context'><a class='hidden_link' href='#lib:access_context,scope' title='21.4.8&emsp;Access control context&emsp;[meta.reflection.access.context]'>scope</a></span></span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
<span class='keyword'>consteval</span> info <span id='lib:access_context,designating_class'><span id='lib:designating_class,access_context'><a class='hidden_link' href='#lib:access_context,designating_class' title='21.4.8&emsp;Access control context&emsp;[meta.reflection.access.context]'>designating_class</a></span></span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/meta.tex#L5039'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'><i >Returns</i>: The <span class='texttt'>access_<span class='shy'></span>context</span>'s associated scope
and designating class, respectively<a class='hidden_link' href='#4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div class='itemdecl' id='itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>static</span> <span class='keyword'>consteval</span> access_context <span id='lib:access_context,current'><span id='lib:current,access_context'><a class='hidden_link' href='#lib:access_context,current' title='21.4.8&emsp;Access control context&emsp;[meta.reflection.access.context]'>current</a></span></span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/meta.tex#L5050'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>Given a program point <span class='math'><span class='mathalpha'>P</span></span>,
let <span class='texttt'><span class='texttt'><i >eval-point</i></span><span class='parenthesis'>(</span><span class='math'><span class='mathalpha'>P</span></span><span class='parenthesis'>)</span></span> be the following program point:
<ul class='itemize'><li id='5.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#5.1'>(5.1)</a></div><div class='texpara'><div id='5.1.sentence-1' class='sentence'>If a potentially-evaluated subexpression (<a href='intro.execution' title='6.10.1&emsp;Sequential execution'>[intro.<span class='shy'></span>execution]</a>)
  of a default member initializer <span class='math'><span class='mathalpha'>I</span></span>
  for a member of class <span class='math'><span class='mathalpha'>C</span></span> (<a href='class.mem.general' title='11.4.1&emsp;General'>[class.<span class='shy'></span>mem.<span class='shy'></span>general]</a>)
  appears at <span class='math'><span class='mathalpha'>P</span></span>,
  then a point determined as follows:
  <ul class='itemize'><li id='5.1.1'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#5.1.1'>(5.1.1)</a></div><div class='texpara'><div id='5.1.1.sentence-1' class='sentence'>If an aggregate initialization is using <span class='math'><span class='mathalpha'>I</span></span>,
    <span class='texttt'><span class='texttt'><i >eval-point</i></span><span class='parenthesis'>(</span><span class='math'><span class='mathalpha'>Q</span></span><span class='parenthesis'>)</span></span>,
    where <span class='math'><span class='mathalpha'>Q</span></span> is the point at which that aggregate initialization appears<a class='hidden_link' href='#5.1.1.sentence-1'>.</a></div></div></li><li id='5.1.2'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#5.1.2'>(5.1.2)</a></div><div class='texpara'><div id='5.1.2.sentence-1' class='sentence'>Otherwise, if an initialization
    by an inherited constructor (<a href='class.inhctor.init' title='11.9.4&emsp;Initialization by inherited constructor'>[class.<span class='shy'></span>inhctor.<span class='shy'></span>init]</a>) is using <span class='math'><span class='mathalpha'>I</span></span>,
    a point whose immediate scope is the class scope corresponding to <span class='math'><span class='mathalpha'>C</span></span><a class='hidden_link' href='#5.1.2.sentence-1'>.</a></div></div></li><li id='5.1.3'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#5.1.3'>(5.1.3)</a></div><div class='texpara'><div id='5.1.3.sentence-1' class='sentence'>Otherwise, a point whose immediate scope
    is the function parameter scope
    corresponding to the constructor definition that is using <span class='math'><span class='mathalpha'>I</span></span><a class='hidden_link' href='#5.1.3.sentence-1'>.</a></div></div></li></ul></div></div></li><li id='5.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#5.2'>(5.2)</a></div><div class='texpara'><div id='5.2.sentence-1' class='sentence'>Otherwise, if a potentially-evaluated subexpression
    of a default argument (<a href='dcl.fct.default' title='9.3.4.7&emsp;Default arguments'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>default]</a>) appears at <span class='math'><span class='mathalpha'>P</span></span>,
    <span class='texttt'><span class='texttt'><i >eval-point</i></span><span class='parenthesis'>(</span><span class='math'><span class='mathalpha'>Q</span></span><span class='parenthesis'>)</span></span>,
    where <span class='math'><span class='mathalpha'>Q</span></span> is the point at which the invocation of the function (<a href='expr.call' title='7.6.1.3&emsp;Function call'>[expr.<span class='shy'></span>call]</a>)
    using that default argument appears<a class='hidden_link' href='#5.2.sentence-1'>.</a></div></div></li><li id='5.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#5.3'>(5.3)</a></div><div class='texpara'><div id='5.3.sentence-1' class='sentence'>Otherwise, if the immediate scope of <span class='math'><span class='mathalpha'>P</span></span>
    is a function parameter scope introduced by a declaration <span class='math'><span class='mathalpha'>D</span></span>,
    and <span class='math'><span class='mathalpha'>P</span></span> appears either before the locus of <span class='math'><span class='mathalpha'>D</span></span>
    or within the trailing <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause'><span class='textsf'><i >requires-clause</i></span></span></a> of <span class='math'><span class='mathalpha'>D</span></span>,
    a point whose immediate scope is the innermost scope enclosing the locus of <span class='math'><span class='mathalpha'>D</span></span>
    that is not a template parameter scope<a class='hidden_link' href='#5.3.sentence-1'>.</a></div></div></li><li id='5.4'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#5.4'>(5.4)</a></div><div class='texpara'><div id='5.4.sentence-1' class='sentence'>Otherwise, if the immediate scope of <span class='math'><span class='mathalpha'>P</span></span>
    is a function parameter scope
    introduced by a <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression'><span class='textsf'><i >lambda-expression</i></span></span></a> <span class='math'><span class='mathalpha'>L</span></span>
    whose <a href='expr.prim.lambda.general#nt:lambda-introducer' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-introducer'><span class='textsf'><i >lambda-introducer</i></span></span></a> appears at point <span class='math'><span class='mathalpha'>Q</span></span>,
    and <span class='math'><span class='mathalpha'>P</span></span> appears either within the <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type'><span class='textsf'><i >trailing-return-type</i></span></span></a>
    or the trailing <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause_'><span class='textsf'><i >requires-clause</i></span></span></a> of <span class='math'><span class='mathalpha'>L</span></span>,
    <span class='texttt'><span class='texttt'><i >eval-point</i></span><span class='parenthesis'>(</span><span class='math'><span class='mathalpha'>Q</span></span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#5.4.sentence-1'>.</a></div></div></li><li id='5.5'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#5.5'>(5.5)</a></div><div class='texpara'><div id='5.5.sentence-1' class='sentence'>Otherwise, if the innermost non-block scope enclosing <span class='math'><span class='mathalpha'>P</span></span>
    is the function parameter scope
    introduced by a <a href='dcl.pre#nt:consteval-block-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:consteval-block-declaration'><span class='textsf'><i >consteval-block-declaration</i></span></span></a> (<a href='dcl.pre' title='9.1&emsp;Preamble'>[dcl.<span class='shy'></span>pre]</a>),
    a point whose immediate scope is that inhabited
    by the outermost <a href='dcl.pre#nt:consteval-block-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:consteval-block-declaration_'><span class='textsf'><i >consteval-block-declaration</i></span></span></a> <span class='math'><span class='mathalpha'>D</span></span>
    containing <span class='math'><span class='mathalpha'>P</span></span> such that each scope (if any) that intervenes between <span class='math'><span class='mathalpha'>P</span></span>
    and the function parameter scope introduced by <span class='math'><span class='mathalpha'>D</span></span> is either
    <ul class='itemize'><li id='5.5.1'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#5.5.1'>(5.5.1)</a></div>a block scope or</li><li id='5.5.2'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#5.5.2'>(5.5.2)</a></div>a function parameter scope or lambda scope
      introduced by a <a href='dcl.pre#nt:consteval-block-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:consteval-block-declaration__'><span class='textsf'><i >consteval-block-declaration</i></span></span></a><a class='hidden_link' href='#5.5.sentence-1'>.</a></li></ul></div></div></li><li id='5.6'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#5.6'>(5.6)</a></div><div class='texpara'><div id='5.6.sentence-1' class='sentence'>Otherwise, <span class='math'><span class='mathalpha'>P</span></span><a class='hidden_link' href='#5.6.sentence-1'>.</a></div></div></li></ul></div></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/meta.tex#L5114'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>Given a scope <span class='math'><span class='mathalpha'>S</span></span>,
let <span class='texttt'><span class='texttt'><i >ctx-scope</i></span><span class='parenthesis'>(</span><span class='math'><span class='mathalpha'>S</span></span><span class='parenthesis'>)</span></span> be the following scope:
<ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#6.1'>(6.1)</a></div><div class='texpara'><div id='6.1.sentence-1' class='sentence'>If <span class='math'><span class='mathalpha'>S</span></span> is a class scope or namespace scope,
  <span class='math'><span class='mathalpha'>S</span></span><a class='hidden_link' href='#6.1.sentence-1'>.</a></div></div></li><li id='6.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#6.2'>(6.2)</a></div><div class='texpara'><div id='6.2.sentence-1' class='sentence'>Otherwise, if <span class='math'><span class='mathalpha'>S</span></span> is a function parameter scope
  introduced by the declaration of a function,
  <span class='math'><span class='mathalpha'>S</span></span><a class='hidden_link' href='#6.2.sentence-1'>.</a></div></div></li><li id='6.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#6.3'>(6.3)</a></div><div class='texpara'><div id='6.3.sentence-1' class='sentence'>Otherwise, if <span class='math'><span class='mathalpha'>S</span></span> is a lambda scope
  introduced by a <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_'><span class='textsf'><i >lambda-expression</i></span></span></a> <span class='math'><span class='mathalpha'>L</span></span>,
  the function parameter scope
  corresponding to the call operator of the closure type of <span class='math'><span class='mathalpha'>L</span></span><a class='hidden_link' href='#6.3.sentence-1'>.</a></div></div></li><li id='6.4'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#6.4'>(6.4)</a></div><div class='texpara'><div id='6.4.sentence-1' class='sentence'>Otherwise, <span class='texttt'><span class='texttt'><i >ctx-scope</i></span><span class='parenthesis'>(</span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0.13em; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">â€²</span></span></span></span></span></span></span></span><span class='parenthesis'>)</span></span>,
  where <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0.13em; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">â€²</span></span></span></span></span></span></span></span> is the parent scope of <span class='math'><span class='mathalpha'>S</span></span><a class='hidden_link' href='#6.4.sentence-1'>.</a></div></div></li></ul></div></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/meta.tex#L5135'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'><i >Returns</i>: An <span class='texttt'>access_<span class='shy'></span>context</span> whose designating class is the null reflection
and whose scope represents the function, class, or namespace
whose corresponding function parameter scope, class scope, or namespace scope, respectively,
is <span class='texttt'><span class='texttt'><i >ctx-scope</i></span><span class='parenthesis'>(</span><span class='math'><span class='mathalpha'>S</span></span><span class='parenthesis'>)</span></span>,
where <span class='math'><span class='mathalpha'>S</span></span> is the immediate scope of <span class='texttt'><span class='texttt'><i >eval-point</i></span><span class='parenthesis'>(</span><span class='math'><span class='mathalpha'>P</span></span><span class='parenthesis'>)</span></span>
and <span class='math'><span class='mathalpha'>P</span></span> is the point at which the invocation of <span class='texttt'>current</span> lexically appears<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>0</span>;
  <span class='keyword'>consteval</span> A<span class='parenthesis'>(</span><span class='keyword'>int</span> p<span class='parenthesis'>)</span> <span class='operator'>:</span> a<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> A<span class='operator'>::</span>A;
  <span class='keyword'>consteval</span> B<span class='parenthesis'>(</span><span class='keyword'>int</span> p, <span class='keyword'>int</span> q<span class='parenthesis'>)</span> <span class='operator'>:</span> A<span class='parenthesis'>(</span>p <span class='operator'>*</span> q<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
  info s <span class='operator'>=</span> access_context<span class='operator'>::</span>current<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>scope<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C <span class='operator'>:</span> B <span class='curlybracket'>{</span> <span class='keyword'>using</span> B<span class='operator'>::</span>B; <span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> Agg <span class='curlybracket'>{</span>
  <span class='keyword'>consteval</span> <span class='keyword'>bool</span> eq<span class='parenthesis'>(</span>info rhs <span class='operator'>=</span> access_context<span class='operator'>::</span>current<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>scope<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>return</span> s <span class='operator'>=</span><span class='operator'>=</span> rhs;
  <span class='curlybracket'>}</span>
  info s <span class='operator'>=</span> access_context<span class='operator'>::</span>current<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>scope<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>namespace</span> NS <span class='curlybracket'>{</span>
  <span class='keyword'>static_assert</span><span class='parenthesis'>(</span>Agg<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='operator'>.</span>s <span class='operator'>=</span><span class='operator'>=</span> access_context<span class='operator'>::</span>current<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>scope<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;              <span class='comment'>// OK</span>
  <span class='keyword'>static_assert</span><span class='parenthesis'>(</span>Agg<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='operator'>.</span>eq<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;                                                <span class='comment'>// OK</span>
  <span class='keyword'>static_assert</span><span class='parenthesis'>(</span>B<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span><span class='operator'>.</span>s <span class='operator'>=</span><span class='operator'>=</span> <span class='operator'>^</span><span class='operator'>^</span>B<span class='parenthesis'>)</span>;                                             <span class='comment'>// OK</span>
  <span class='keyword'>static_assert</span><span class='parenthesis'>(</span>is_constructor<span class='parenthesis'>(</span>B<span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span><span class='operator'>.</span>s<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> parent_of<span class='parenthesis'>(</span>B<span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span><span class='operator'>.</span>s<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='operator'>^</span><span class='operator'>^</span>B<span class='parenthesis'>)</span>;  <span class='comment'>// OK</span>
  <span class='keyword'>static_assert</span><span class='parenthesis'>(</span>is_constructor<span class='parenthesis'>(</span>C<span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span><span class='operator'>.</span>s<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> parent_of<span class='parenthesis'>(</span>C<span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span><span class='operator'>.</span>s<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='operator'>^</span><span class='operator'>^</span>B<span class='parenthesis'>)</span>;  <span class='comment'>// OK</span>

  <span class='keyword'>auto</span> fn<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='squarebracket'>[</span><span class='operator'>:</span>is_namespace<span class='parenthesis'>(</span>access_context<span class='operator'>::</span>current<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>scope<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>?</span> <span class='operator'>^</span><span class='operator'>^</span><span class='keyword'>int</span> <span class='operator'>:</span> <span class='operator'>^</span><span class='operator'>^</span><span class='keyword'>bool</span><span class='operator'>:</span><span class='squarebracket'>]</span>;
  <span class='keyword'>static_assert</span><span class='parenthesis'>(</span>type_of<span class='parenthesis'>(</span><span class='operator'>^</span><span class='operator'>^</span>fn<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='operator'>^</span><span class='operator'>^</span><span class='keyword'>auto</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;                            <span class='comment'>// OK</span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>auto</span> R<span class='anglebracket'>&gt;</span>
    <span class='keyword'>struct</span> TCls <span class='curlybracket'>{</span>
      <span class='keyword'>consteval</span> <span class='keyword'>bool</span> fn<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
        <span class='keyword'>requires</span> <span class='parenthesis'>(</span>is_type<span class='parenthesis'>(</span>access_context<span class='operator'>::</span>current<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>scope<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
          <span class='keyword'>return</span> <span class='literal'>true</span>;                  <span class='comment'>// OK, scope is <span class='tcode_in_codeblock'>TCls&lt;R&gt;</span>.</span>
        <span class='curlybracket'>}</span>
    <span class='curlybracket'>}</span>;
  <span class='keyword'>static_assert</span><span class='parenthesis'>(</span>TCls<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='operator'>.</span>fn<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;        <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/meta.tex#L5185'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'><i >Remarks</i>: <span class='texttt'>current</span> is not an addressable function (<a href='namespace.std' title='16.4.5.2.1&emsp;Namespace std'>[namespace.<span class='shy'></span>std]</a>)<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>An invocation of <span class='texttt'>current</span> that appears at a program point <span class='math'><span class='mathalpha'>P</span></span>
is value-dependent (<a href='temp.dep.constexpr' title='13.8.3.4&emsp;Value-dependent expressions'>[temp.<span class='shy'></span>dep.<span class='shy'></span>constexpr]</a>)
if <span class='texttt'><span class='texttt'><i >eval-point</i></span>&#x200b;<span class='parenthesis'>(</span>&#x200b;<span class='math'><span class='mathalpha'>P</span></span><span class='parenthesis'>)</span></span> is enclosed by a scope
corresponding to a templated entity<a class='hidden_link' href='#8.sentence-2'>.</a></div></div></div></div><div class='texpara'><div class='itemdecl' id='itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:3'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>static</span> <span class='keyword'>consteval</span> access_context <span id='lib:access_context,unprivileged'><span id='lib:unprivileged,access_context'><a class='hidden_link' href='#lib:access_context,unprivileged' title='21.4.8&emsp;Access control context&emsp;[meta.reflection.access.context]'>unprivileged</a></span></span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/meta.tex#L5199'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'><i >Returns</i>: An <span class='texttt'>access_<span class='shy'></span>context</span> whose designating class is the null reflection
and whose scope is the global namespace<a class='hidden_link' href='#9.sentence-1'>.</a></div></div></div></div><div class='texpara'><div class='itemdecl' id='itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:4'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>static</span> <span class='keyword'>consteval</span> access_context <span id='lib:access_context,unchecked'><span id='lib:unchecked,access_context'><a class='hidden_link' href='#lib:access_context,unchecked' title='21.4.8&emsp;Access control context&emsp;[meta.reflection.access.context]'>unchecked</a></span></span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/meta.tex#L5210'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'><i >Returns</i>: An <span class='texttt'>access_<span class='shy'></span>context</span> whose designating class and scope
are both the null reflection<a class='hidden_link' href='#10.sentence-1'>.</a></div></div></div></div><div class='texpara'><div class='itemdecl' id='itemdecl:5'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:5'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>static</span> <span class='keyword'>consteval</span> access_context <span id='lib:access_context,via'><span id='lib:via,access_context'><a class='hidden_link' href='#lib:access_context,via' title='21.4.8&emsp;Access control context&emsp;[meta.reflection.access.context]'>via</a></span></span><span class='parenthesis'>(</span>info cls<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/meta.tex#L5221'>#</a></div><div class='texpara'><div id='11.sentence-1' class='sentence'><i >Returns</i>: An <span class='texttt'>access_<span class='shy'></span>context</span> whose scope is <span class='texttt'><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>scope<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
and whose designating class is <span class='texttt'>cls</span><a class='hidden_link' href='#11.sentence-1'>.</a></div></div></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/meta.tex#L5226'>#</a></div><div class='texpara'><div id='12.sentence-1' class='sentence'><i >Throws</i>: <span class='texttt'>meta<span class='operator'>&#x200b;::&#x200b;</span>exception</span> unless
<span class='texttt'>cls</span> is either the null reflection
or a reflection of a complete class type<a class='hidden_link' href='#12.sentence-1'>.</a></div></div></div></div></div></body></html>