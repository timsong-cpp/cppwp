<!DOCTYPE html><html lang='en'><head><title>[util.smartptr.shared.assign]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>23</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>23.11</a> Smart pointers <a class='abbr_ref' href='smartptr#util.smartptr.shared.assign'>[smartptr]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>23.11.2</a> Shared-ownership pointers <a class='abbr_ref' href='util.smartptr#shared.assign'>[util.smartptr]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>23.11.2.2</a> Class template <span class='texttt'>shared_&shy;ptr</span> <a class='abbr_ref' href='util.smartptr.shared#assign'>[util.smartptr.shared]</a></h4><h4 ><a class='secnum' style='min-width:133pt'>23.11.2.2.3</a> <span class='texttt'>shared_&shy;ptr</span> assignment <a class='abbr_ref'>[util.smartptr.shared.assign]</a></h4><span class='indexparent'><a class='index' id='lib:operator=,shared_ptr'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator='></a></span><code class='itemdecl'>shared_ptr&amp; operator=(const shared_ptr&amp; r) noexcept;
template&lt;class Y&gt; shared_ptr&amp; operator=(const shared_ptr&lt;Y&gt;&amp; r) noexcept;
</code><div class='itemdescr'></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/58a489c5007a31a364006fd589f971930a8d30c5/source/utilities.tex#L9925'>#</a></div><div id='1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr(r).swap(*this)</span><a class='hidden_link' href='#1.sentence-1'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/58a489c5007a31a364006fd589f971930a8d30c5/source/utilities.tex#L9927'>#</a></div><div id='2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/58a489c5007a31a364006fd589f971930a8d30c5/source/utilities.tex#L9929'>#</a></div><div id='3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-1' class='sentence'>The use count updates caused by the temporary object
construction and destruction are not observable side
effects, so the implementation may meet the effects (and the
implied guarantees) via different means, without creating a
temporary<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>In particular, in the example:
<pre class='codeblock'>
shared_ptr&lt;int&gt; p(new int);
shared_ptr&lt;void&gt; q(p);
p = p;
q = p;</pre>
both assignments may be no-ops<a class='hidden_link' href='#3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><span class='indexparent'><a class='index' id='lib:operator=,shared_ptr_'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator=_'></a></span><code class='itemdecl'>shared_ptr&amp; operator=(shared_ptr&amp;&amp; r) noexcept;
template&lt;class Y&gt; shared_ptr&amp; operator=(shared_ptr&lt;Y&gt;&amp;&amp; r) noexcept;
</code><div class='itemdescr'></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/58a489c5007a31a364006fd589f971930a8d30c5/source/utilities.tex#L9951'>#</a></div><div id='4.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr(std&#x200b;::&#x200b;move(r)).swap(*this)</span><a class='hidden_link' href='#4.sentence-1'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/58a489c5007a31a364006fd589f971930a8d30c5/source/utilities.tex#L9954'>#</a></div><div id='5.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#5.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator=,shared_ptr__'></a></span><span class='indexparent'><a class='index' id='lib:shared_ptr,operator=__'></a></span><code class='itemdecl'>template &lt;class Y, class D&gt; shared_ptr&amp; operator=(unique_ptr&lt;Y, D&gt;&amp;&amp; r);
</code><div class='itemdescr'></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/58a489c5007a31a364006fd589f971930a8d30c5/source/utilities.tex#L9964'>#</a></div><div id='6.sentence-1' class='sentence'><span class='textit'>Effects:</span> Equivalent to <span class='texttt'>shared_&shy;ptr(std&#x200b;::&#x200b;move(r)).swap(*this)</span><a class='hidden_link' href='#6.sentence-1'>.</a></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/58a489c5007a31a364006fd589f971930a8d30c5/source/utilities.tex#L9967'>#</a></div><div id='7.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this</span><a class='hidden_link' href='#7.sentence-1'>.</a></div></div></div></div></body></html>