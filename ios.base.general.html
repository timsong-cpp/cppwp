<!DOCTYPE html><html lang='en'><head><title>[ios.base.general]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>29</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>29.5</a> Iostreams base classes <a class='abbr_ref' href='iostreams.base#ios.base.general'>[iostreams.base]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>29.5.3</a> Class <span class='texttt'>ios_&shy;base</span> <a class='abbr_ref' href='ios.base#general'>[ios.base]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>29.5.3.1</a> General <a class='abbr_ref'>[ios.base.general]</a></h4><div class='texpara'><span id='lib:ios_base'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:ios_base'>ðŸ”—</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> ios_base <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>class</span> failure;              <span class='comment'>// see below</span>

    <span class='comment'>// <a href='ios.fmtflags' title='29.5.3.2.2&emsp;Type ios_&shy;base&#x200b;::&#x200b;fmtflags'>[ios.<span class='shy'></span>fmtflags]</a>, <span class='tcode_in_codeblock'>fmtflags</span></span>
    <span class='keyword'>using</span> fmtflags <span class='operator'>=</span> <i >T1</i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags boolalpha <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags dec <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags fixed <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags hex <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags internal <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags left <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags oct <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags right <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags scientific <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags showbase <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags showpoint <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags showpos <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags skipws <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags unitbuf <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags uppercase <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags adjustfield <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags basefield <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> fmtflags floatfield <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;

    <span class='comment'>// <a href='ios.iostate' title='29.5.3.2.3&emsp;Type ios_&shy;base&#x200b;::&#x200b;iostate'>[ios.<span class='shy'></span>iostate]</a>, <span class='tcode_in_codeblock'>iostate</span></span>
    <span class='keyword'>using</span> iostate <span class='operator'>=</span> <i >T2</i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> iostate badbit <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> iostate eofbit <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> iostate failbit <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> iostate goodbit <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;

    <span class='comment'>// <a href='ios.openmode' title='29.5.3.2.4&emsp;Type ios_&shy;base&#x200b;::&#x200b;openmode'>[ios.<span class='shy'></span>openmode]</a>, <span class='tcode_in_codeblock'>openmode</span></span>
    <span class='keyword'>using</span> openmode <span class='operator'>=</span> <i >T3</i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> openmode app <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> openmode ate <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> openmode binary <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> openmode in <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> openmode out <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> openmode trunc <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;

    <span class='comment'>// <a href='ios.seekdir' title='29.5.3.2.5&emsp;Type ios_&shy;base&#x200b;::&#x200b;seekdir'>[ios.<span class='shy'></span>seekdir]</a>, <span class='tcode_in_codeblock'>seekdir</span></span>
    <span class='keyword'>using</span> seekdir <span class='operator'>=</span> <i >T4</i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> seekdir beg <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> seekdir cur <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> seekdir end <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;

    <span class='keyword'>class</span> Init;

    <span class='comment'>// <a href='fmtflags.state' title='29.5.3.3&emsp;State functions'>[fmtflags.<span class='shy'></span>state]</a>, <span class='tcode_in_codeblock'>fmtflags</span> state</span>
    fmtflags flags<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    fmtflags flags<span class='parenthesis'>(</span>fmtflags fmtfl<span class='parenthesis'>)</span>;
    fmtflags setf<span class='parenthesis'>(</span>fmtflags fmtfl<span class='parenthesis'>)</span>;
    fmtflags setf<span class='parenthesis'>(</span>fmtflags fmtfl, fmtflags mask<span class='parenthesis'>)</span>;
    <span class='keyword'>void</span> unsetf<span class='parenthesis'>(</span>fmtflags mask<span class='parenthesis'>)</span>;

    streamsize precision<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    streamsize precision<span class='parenthesis'>(</span>streamsize prec<span class='parenthesis'>)</span>;
    streamsize width<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    streamsize width<span class='parenthesis'>(</span>streamsize wide<span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='ios.base.locales' title='29.5.3.4&emsp;Functions'>[ios.<span class='shy'></span>base.<span class='shy'></span>locales]</a>, locales</span>
    locale imbue<span class='parenthesis'>(</span><span class='keyword'>const</span> locale<span class='operator'>&amp;</span> loc<span class='parenthesis'>)</span>;
    locale getloc<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;

    <span class='comment'>// <a href='ios.base.storage' title='29.5.3.6&emsp;Storage functions'>[ios.<span class='shy'></span>base.<span class='shy'></span>storage]</a>, storage</span>
    <span class='keyword'>static</span> <span class='keyword'>int</span> xalloc<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>long</span><span class='operator'>&amp;</span>  iword<span class='parenthesis'>(</span><span class='keyword'>int</span> idx<span class='parenthesis'>)</span>;
    <span class='keyword'>void</span><span class='operator'>*</span><span class='operator'>&amp;</span> pword<span class='parenthesis'>(</span><span class='keyword'>int</span> idx<span class='parenthesis'>)</span>;

    <span class='comment'>// destructor</span>
    <span class='keyword'>virtual</span> <span class='operator'>~</span>ios_base<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='ios.base.callback' title='29.5.3.7&emsp;Callbacks'>[ios.<span class='shy'></span>base.<span class='shy'></span>callback]</a>, callbacks</span>
    <span class='keyword'>enum</span> event <span class='curlybracket'>{</span> erase_event, imbue_event, copyfmt_event <span class='curlybracket'>}</span>;
    <span class='keyword'>using</span> event_callback <span class='operator'>=</span> <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>event, ios_base<span class='operator'>&amp;</span>, <span class='keyword'>int</span> idx<span class='parenthesis'>)</span>;
    <span class='keyword'>void</span> register_callback<span class='parenthesis'>(</span>event_callback fn, <span class='keyword'>int</span> idx<span class='parenthesis'>)</span>;

    ios_base<span class='parenthesis'>(</span><span class='keyword'>const</span> ios_base<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    ios_base<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> ios_base<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>static</span> <span class='keyword'>bool</span> sync_with_stdio<span class='parenthesis'>(</span><span class='keyword'>bool</span> sync <span class='operator'>=</span> <span class='literal'>true</span><span class='parenthesis'>)</span>;

  <span class='keyword'>protected</span><span class='operator'>:</span>
    ios_base<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    <span class='keyword'>static</span> <span class='keyword'>int</span> index;           <span class='comment'>// <i >exposition only</i></span>
    <span class='keyword'>long</span><span class='operator'>*</span>  iarray;              <span class='comment'>// <i >exposition only</i></span>
    <span class='keyword'>void</span><span class='operator'>*</span><span class='operator'>*</span> parray;              <span class='comment'>// <i >exposition only</i></span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/7620db718df1ff82c2468b75f3449ced8ad7b716/source/iostreams.tex#L821'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><span class='texttt'>ios_&shy;base</span>
defines several member types:
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.1'>(1.1)</a></div>a type <span class='texttt'>failure</span>, defined as either a class derived from
<span class='texttt'>system_&shy;error</span> or a synonym for a class derived from <span class='texttt'>system_&shy;error</span>;</li><li id='1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.2'>(1.2)</a></div>a class <span class='texttt'>Init</span>;</li><li id='1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.3'>(1.3)</a></div>three bitmask types, <span class='texttt'>fmtflags</span>, <span class='texttt'>iostate</span>, and <span class='texttt'>openmode</span>;</li><li id='1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.4'>(1.4)</a></div>an enumerated type, <span class='texttt'>seekdir</span><a class='hidden_link' href='#1.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/7620db718df1ff82c2468b75f3449ced8ad7b716/source/iostreams.tex#L835'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>It maintains several kinds of data:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.1'>(2.1)</a></div>state information that reflects the integrity of the stream buffer;</li><li id='2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.2'>(2.2)</a></div>control information that influences how to interpret (format) input
sequences and how to generate (format) output sequences;</li><li id='2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.3'>(2.3)</a></div>additional information that is stored by the program for its private use<a class='hidden_link' href='#2.sentence-1'>.</a></li></ul></div></div></div><div class='para nonNormativeOnly' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/7620db718df1ff82c2468b75f3449ced8ad7b716/source/iostreams.tex#L847'>#</a></div><div class='texpara'><div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='3.sentence-1' class='sentence'>For the sake of exposition, the maintained data is presented here as:
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div><span class='texttt'><span class='keyword'>static</span> <span class='keyword'>int</span> index</span>,
specifies the next available
unique index for the integer or pointer arrays maintained for the private use
of the program, initialized to an unspecified value;</li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div><span class='texttt'><span class='keyword'>long</span><span class='operator'>*</span> iarray</span>,
points to the first element of an
arbitrary-length
<span class='texttt'><span class='keyword'>long</span></span>
array maintained for the private use of the
program;</li><li id='3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.3'>(3.3)</a></div><span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span><span class='operator'>*</span> parray</span>,
points to the first element of an
arbitrary-length pointer array maintained for the private use of the program<a class='hidden_link' href='#3.sentence-1'>.</a></li></ul></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div></body></html>