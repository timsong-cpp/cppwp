<!DOCTYPE html><html lang='en'><head><title>[res.on.data.races]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>20</a> Library introduction <a class='abbr_ref' href='./#library'>[library]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>20.5</a> Library-wide requirements <a class='abbr_ref' href='requirements#res.on.data.races'>[requirements]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>20.5.5</a> Conforming implementations <a class='abbr_ref' href='conforming#res.on.data.races'>[conforming]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>20.5.5.9</a> Data race avoidance <a class='abbr_ref'>[res.on.data.races]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f6aff7e71cc33243671d1e501911d331af61fa3/source/lib-intro.tex#L2778'>#</a></div><p >This section specifies requirements that implementations shall meet to prevent
<a href='intro.multithread#def:data_race'>data races</a>.
Every standard library function shall meet each requirement unless otherwise specified.
Implementations may prevent data races in cases other than those specified below.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f6aff7e71cc33243671d1e501911d331af61fa3/source/lib-intro.tex#L2784'>#</a></div><p >A C++ standard library function shall not directly or indirectly access
objects (<a href='intro.multithread'>[intro.multithread]</a>) accessible by threads other than the current thread
unless the objects are accessed directly or indirectly via the function's arguments,
including <span class='texttt'>this</span>.</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f6aff7e71cc33243671d1e501911d331af61fa3/source/lib-intro.tex#L2790'>#</a></div><p >A C++ standard library function shall not directly or indirectly modify
objects (<a href='intro.multithread'>[intro.multithread]</a>) accessible by threads other than the current thread
unless the objects are accessed directly or indirectly via the function's non-const
arguments, including <span class='texttt'>this</span>.</p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f6aff7e71cc33243671d1e501911d331af61fa3/source/lib-intro.tex#L2796'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>  This means, for example, that implementations can't use a static object for
internal purposes without synchronization because it could cause a data race even in
programs that do not explicitly share objects between threads. <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f6aff7e71cc33243671d1e501911d331af61fa3/source/lib-intro.tex#L2801'>#</a></div><p >A C++ standard library function shall not access objects indirectly accessible via its
arguments or via elements of its container arguments except by invoking functions
required by its specification on those container elements.</p></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f6aff7e71cc33243671d1e501911d331af61fa3/source/lib-intro.tex#L2806'>#</a></div><p >Operations on iterators obtained by calling a standard library container or string
member function may access the underlying container, but shall not modify it.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>  In particular, container operations that invalidate iterators conflict
with operations on iterators associated with that container. <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f6aff7e71cc33243671d1e501911d331af61fa3/source/lib-intro.tex#L2812'>#</a></div><p >Implementations may share their own internal objects between threads if the objects are
not visible to users and are protected against data races.</p></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f6aff7e71cc33243671d1e501911d331af61fa3/source/lib-intro.tex#L2816'>#</a></div><p >Unless otherwise specified, C++ standard library functions shall perform all operations
solely within the current thread if those operations have effects that are
<a href='intro.multithread#def:side_effects,visible'>visible</a> to users.</p></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f6aff7e71cc33243671d1e501911d331af61fa3/source/lib-intro.tex#L2821'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>  This allows implementations to parallelize operations if there are no visible
<span class='indexparent'><a class='index' id=':side_effects'></a></span>side effects. <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div></div></body></html>