<!DOCTYPE html><html lang='en'><head><title>[futures.async]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>32</a> Thread support library <a class='abbr_ref' href='./#thread'>[thread]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>32.9</a> Futures <a class='abbr_ref' href='futures#async'>[futures]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>32.9.9</a> Function template <span class='texttt'>async</span> <a class='abbr_ref'>[futures.async]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b2264247505861345c6d297d673209b06c67737f/source/threads.tex#L7189'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>The function template <span class='texttt'>async</span> provides a mechanism to launch a function potentially
in a new thread and provides the result of the function in a <span class='texttt'>future</span> object with which
it shares a shared state<a class='hidden_link' href='#1.sentence-1'>.</a></div></div></div><div class='texpara'><div id='lib:async'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:async'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> future<span class='anglebracket'>&lt;</span>invoke_result_t<span class='anglebracket'>&lt;</span>decay_t<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span>, decay_t<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
    async<span class='parenthesis'>(</span>F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> F, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> future<span class='anglebracket'>&lt;</span>invoke_result_t<span class='anglebracket'>&lt;</span>decay_t<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span>, decay_t<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
    async<span class='parenthesis'>(</span>launch policy, F<span class='operator'>&amp;</span><span class='operator'>&amp;</span> f, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b2264247505861345c6d297d673209b06c67737f/source/threads.tex#L7205'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'><i >Mandates</i>: The following are all <span class='texttt'><span class='literal'>true</span></span>:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#2.1'>(2.1)</a></div><span class='texttt'>is_&shy;constructible_&shy;v<span class='anglebracket'>&lt;</span>decay_&shy;t<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span>, F<span class='anglebracket'>&gt;</span></span>,</li><li id='2.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#2.2'>(2.2)</a></div><span class='texttt'><span class='parenthesis'>(</span>is_&shy;constructible_&shy;v<span class='anglebracket'>&lt;</span>decay_&shy;t<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span>, Args<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>, and</li><li id='2.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#2.3'>(2.3)</a></div><span class='texttt'>is_&shy;invocable_&shy;v<span class='anglebracket'>&lt;</span>decay_&shy;t<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span>, decay_&shy;t<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#2.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b2264247505861345c6d297d673209b06c67737f/source/threads.tex#L7214'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'><i >Effects</i>: The first function
behaves the same as a call to the second function with a <span class='texttt'>policy</span> argument of
<span class='texttt'>launch<span class='operator'>&#x200b;::&#x200b;</span>async <span class='operator'>|</span> launch<span class='operator'>&#x200b;::&#x200b;</span>deferred</span>
and the same arguments for <span class='texttt'>F</span> and <span class='texttt'>Args</span><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>The second function creates a shared state that is associated with
the returned <span class='texttt'>future</span> object<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>The further behavior
of the second function depends on the <span class='texttt'>policy</span> argument as follows (if
more than one of these conditions applies, the implementation may choose any of
the corresponding policies):
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#3.1'>(3.1)</a></div><div class='texpara'><div id='3.1.sentence-1' class='sentence'>If <span class='texttt'>launch<span class='operator'>&#x200b;::&#x200b;</span>async</span> is set in <span class='texttt'>policy</span>, calls
<span class='texttt'>invoke<span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span><span class='parenthesis'>)</span>, <span class='keyword'>auto</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>for</span>ward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>
(<a href='func.require' title='20.14.4&emsp;Requirements'>[func.<span class='shy'></span>require]</a>, <a href='thread.thread.constr' title='32.4.3.3&emsp;Constructors'>[thread.<span class='shy'></span>thread.<span class='shy'></span>constr]</a>)
as if in a new thread of execution represented by a <span class='texttt'>thread</span> object
with the values produced by <span class='texttt'><span class='keyword'>auto</span></span>
being materialized (<a href='conv.rval' title='7.3.5&emsp;Temporary materialization conversion'>[conv.<span class='shy'></span>rval]</a>) in the thread that called <span class='texttt'>async</span><a class='hidden_link' href='#3.1.sentence-1'>.</a></div> <div id='3.1.sentence-2' class='sentence'>Any return value
is stored as the result in the
shared state<a class='hidden_link' href='#3.1.sentence-2'>.</a></div> <div id='3.1.sentence-3' class='sentence'>Any exception propagated from
the execution of
<span class='texttt'>invoke<span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span><span class='parenthesis'>)</span>, <span class='keyword'>auto</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>
is stored as the exceptional result in the shared state<a class='hidden_link' href='#3.1.sentence-3'>.</a></div> <div id='3.1.sentence-4' class='sentence'>The <span class='texttt'>thread</span> object is
stored in the shared state
and affects the behavior of any asynchronous return objects that
reference that state<a class='hidden_link' href='#3.1.sentence-4'>.</a></div></div></li><li id='3.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#3.2'>(3.2)</a></div><div class='texpara'><div id='3.2.sentence-1' class='sentence'>If <span class='texttt'>launch<span class='operator'>&#x200b;::&#x200b;</span>deferred</span> is set in <span class='texttt'>policy</span>,
stores <span class='texttt'><span class='keyword'>auto</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> and
<span class='texttt'><span class='keyword'>auto</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>for</span>ward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span>
in the shared state<a class='hidden_link' href='#3.2.sentence-1'>.</a></div> <div id='3.2.sentence-2' class='sentence'>These copies of <span class='texttt'>f</span> and <span class='texttt'>args</span> constitute
a <a class='hidden_link' href='#def:function,deferred' title='32.9.9&emsp;Function template async&emsp;[futures.async]'><span id='def:function,deferred'><i >deferred function</i></span></a><a class='hidden_link' href='#3.2.sentence-2'>.</a></div> <div id='3.2.sentence-3' class='sentence'>Invocation of the deferred function evaluates
<span class='texttt'>invoke<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>g<span class='parenthesis'>)</span>, std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>xyz<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> where <span class='texttt'>g</span> is the stored value of
<span class='texttt'><span class='keyword'>auto</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> and <span class='texttt'>xyz</span> is the stored copy of
<span class='texttt'><span class='keyword'>auto</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><a class='hidden_link' href='#3.2.sentence-3'>.</a></div> <div id='3.2.sentence-4' class='sentence'>Any return value is stored
as the result in the shared state<a class='hidden_link' href='#3.2.sentence-4'>.</a></div> <div id='3.2.sentence-5' class='sentence'>Any exception propagated
from the execution
of the deferred function
is stored as the exceptional result
in the shared state<a class='hidden_link' href='#3.2.sentence-5'>.</a></div> <div id='3.2.sentence-6' class='sentence'>The shared state is not
made ready until the function has completed<a class='hidden_link' href='#3.2.sentence-6'>.</a></div> <div id='3.2.sentence-7' class='sentence'>The first call to a
non-timed waiting function (<a href='futures.state' title='32.9.5&emsp;Shared state'>[futures.<span class='shy'></span>state]</a>)
on an asynchronous return object referring to
this shared state invokes the
deferred function in the thread that called the waiting function<a class='hidden_link' href='#3.2.sentence-7'>.</a></div> <div id='3.2.sentence-8' class='sentence'>Once evaluation of <span class='texttt'>invoke<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>g<span class='parenthesis'>)</span>, std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>xyz<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> begins, the function is no longer
considered deferred<a class='hidden_link' href='#3.2.sentence-8'>.</a></div></div><div class='texpara'><div id='3.2.sentence-9' class='sentence'><i >Recommended practice</i>: If this policy is specified together with other policies, such as when using a
<span class='texttt'>policy</span> value of <span class='texttt'>launch<span class='operator'>&#x200b;::&#x200b;</span>async <span class='operator'>|</span> launch<span class='operator'>&#x200b;::&#x200b;</span>deferred</span>, implementations should defer
invocation or the selection of the policy when no more concurrency can be effectively
exploited<a class='hidden_link' href='#3.2.sentence-9'>.</a></div></div></li><li id='3.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#3.3'>(3.3)</a></div><div class='texpara'><div id='3.3.sentence-1' class='sentence'>If no value is set in the launch policy, or a value is set that is neither specified
in this document nor by the implementation, the behavior is undefined<a class='hidden_link' href='#3.3.sentence-1'>.</a></div></div></li></ul></div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b2264247505861345c6d297d673209b06c67737f/source/threads.tex#L7281'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'><i >Synchronization</i>: The invocation of <span class='texttt'>async</span> synchronizes with the invocation of <span class='texttt'>f</span><a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>The completion of the function <span class='texttt'>f</span> is sequenced before
the shared state is made ready<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='4.sentence-3' class='sentence'>These apply regardless of the provided <span class='texttt'>policy</span> argument, and
even if the corresponding <span class='texttt'>future</span> object is moved to another thread<a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='4.sentence-4' class='sentence'>However, it is possible for <span class='texttt'>f</span> not to be called at all,
in which case its completion never happens<a class='hidden_link' href='#4.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div><div class='texpara'><div id='4.sentence-5' class='sentence'>If the implementation chooses the <span class='texttt'>launch<span class='operator'>&#x200b;::&#x200b;</span>async</span> policy,
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#4.1'>(4.1)</a></div>a call to a waiting function on an asynchronous return
object that shares the shared state created by this <span class='texttt'>async</span> call shall
block until the associated thread has completed, as if joined, or else time
out (<a href='thread.thread.member' title='32.4.3.6&emsp;Members'>[thread.<span class='shy'></span>thread.<span class='shy'></span>member]</a>);</li><li id='4.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#4.2'>(4.2)</a></div>the associated thread completion
<a href='intro.multithread#def:synchronize_with' title='6.9.2&emsp;Multi-threaded executions and data races&emsp;[intro.multithread]'>synchronizes with</a>
the return from
the first function
that successfully detects the ready status of the shared state or
with the return from the last
function that releases the shared state, whichever
happens first<a class='hidden_link' href='#4.sentence-5'>.</a></li></ul></div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b2264247505861345c6d297d673209b06c67737f/source/threads.tex#L7311'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'><i >Returns</i>: An object of type
<span class='texttt'>future<span class='anglebracket'>&lt;</span>invoke_&shy;result_&shy;t<span class='anglebracket'>&lt;</span>decay_&shy;t<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span>, decay_&shy;t<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span></span> that refers
to the shared state created by this call to <span class='texttt'>async</span><a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>: <div id='5.sentence-2' class='sentence'>If a future obtained from <span class='texttt'>async</span> is moved outside the local scope,
the future's destructor can block for the shared state to become ready<a class='hidden_link' href='#5.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b2264247505861345c6d297d673209b06c67737f/source/threads.tex#L7321'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'><i >Throws</i>: <span class='texttt'>system_&shy;error</span> if <span class='texttt'>policy <span class='operator'>=</span><span class='operator'>=</span> launch<span class='operator'>&#x200b;::&#x200b;</span>async</span> and the
implementation is unable to start a new thread, or
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>bad_&shy;alloc</span> if memory for the internal data structures
cannot be allocated<a class='hidden_link' href='#6.sentence-1'>.</a></div></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b2264247505861345c6d297d673209b06c67737f/source/threads.tex#L7328'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'><i >Error conditions</i>: <ul class='itemize'><li id='7.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#7.1'>(7.1)</a></div><span class='texttt'>resource_&shy;unavailable_&shy;try_&shy;again</span> â€” if
<span class='texttt'>policy <span class='operator'>=</span><span class='operator'>=</span> launch<span class='operator'>&#x200b;::&#x200b;</span>async</span> and the system is unable to start a new thread<a class='hidden_link' href='#7.sentence-1'>.</a></li></ul></div></div></div></div><div class='para nonNormativeOnly' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b2264247505861345c6d297d673209b06c67737f/source/threads.tex#L7336'>#</a></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>int</span> work1<span class='parenthesis'>(</span><span class='keyword'>int</span> value<span class='parenthesis'>)</span>;
<span class='keyword'>int</span> work2<span class='parenthesis'>(</span><span class='keyword'>int</span> value<span class='parenthesis'>)</span>;
<span class='keyword'>int</span> work<span class='parenthesis'>(</span><span class='keyword'>int</span> value<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>auto</span> handle <span class='operator'>=</span> std<span class='operator'>::</span>async<span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> work2<span class='parenthesis'>(</span>value<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
  <span class='keyword'>int</span> tmp <span class='operator'>=</span> work1<span class='parenthesis'>(</span>value<span class='parenthesis'>)</span>;
  <span class='keyword'>return</span> tmp <span class='operator'>+</span> handle<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;    <span class='comment'>// #1</span>
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>: <div id='8.sentence-1' class='sentence'>Line #1 might not result in concurrency because
the <span class='texttt'>async</span> call uses the default policy, which might use
<span class='texttt'>launch<span class='operator'>&#x200b;::&#x200b;</span>deferred</span>, in which case the lambda might not be invoked until the
<span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> call; in that case, <span class='texttt'>work1</span> and <span class='texttt'>work2</span> are called on the
same thread and there is no concurrency<a class='hidden_link' href='#8.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div> â€”&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>