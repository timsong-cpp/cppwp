<!DOCTYPE html><html lang='en'><head><title>[class.ctor]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>15</a> Special member functions <a class='abbr_ref' href='./#special'>[special]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>15.1</a> Constructors <a class='abbr_ref'>[class.ctor]</a></h2><p ><span class='indexparent'><a class='index' id=':constructor'></a></span>
</p><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L76'>#</a></div><p >Constructors do not have names.
In a declaration of a constructor, the <i ><a href='dcl.decl#nt:declarator'>declarator</a></i> is a
<a href='dcl.fct'>function declarator</a> of the form</p><pre class='ncbnf'><i ><a href='dcl.decl#nt:ptr-declarator'>ptr-declarator</a></i> <span class='terminal'>(</span> <i ><a href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a></i> <span class='terminal'>)</span> <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><p >where the <i ><a href='dcl.decl#nt:ptr-declarator'>ptr-declarator</a></i> consists solely of an
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>, an optional <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i>,
and optional surrounding parentheses, and the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> has
one of the following forms:</p><ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.1'>(1.1)</a></div><p >in a <i ><a href='class.mem#nt:member-declaration'>member-declaration</a></i> that belongs to the
<i ><a href='class.mem#nt:member-specification'>member-specification</a></i> of a class but is not a <a href='class.friend'>friend
declaration</a>, the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> is the
<a href='class#def:injected-class-name'>injected-class-name</a> of the immediately-enclosing class;</p></li><li id='1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.2'>(1.2)</a></div><p >in a <i ><a href='class.mem#nt:member-declaration'>member-declaration</a></i> that belongs to the
<i ><a href='class.mem#nt:member-specification'>member-specification</a></i> of a class template but is not a friend
declaration, the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> is a <i ><a href='class#nt:class-name'>class-name</a></i> that
names the <a href='temp.dep.type#def:current_instantiation'>current instantiation</a> of the
immediately-enclosing class template; or</p></li><li id='1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.3'>(1.3)</a></div><p >in a declaration at namespace scope or in a friend declaration, the
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> is a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> that names a
constructor (<a href='class.qual'>[class.qual]</a>).
</p></li></ul><p >The <i ><a href='class#nt:class-name'>class-name</a></i> shall not be a <i ><a href='dcl.typedef#nt:typedef-name'>typedef-name</a></i>. In a constructor
declaration, each <i ><a href='dcl.spec#nt:decl-specifier'>decl-specifier</a></i> in the optional
<i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i> shall be <span class='texttt'>friend</span>, <span class='texttt'>inline</span>,
<span class='texttt'>explicit</span>, or <span class='texttt'>constexpr</span>.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> </p><pre class='codeblock'>
struct S {
  S();              <span class='comment'>// declares the constructor
</span>};

S::S() { }          <span class='comment'>// defines the constructor
</span></pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L125'>#</a></div><p >A constructor is used to initialize objects of its class type.
Because constructors do not have names, they are never found during
name lookup; however an <a href='expr.type.conv'>explicit type conversion using the functional
notation</a> will cause a constructor to be called to
initialize an object.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
For initialization of objects of class type see <a href='class.init'>[class.init]</a>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L135'>#</a></div><p ><span class='indexparent'><a class='index' id=':const,constructor_and'></a></span><span class='indexparent'><a class='index' id=':volatile,constructor_and'></a></span>A constructor can be invoked for a
<span class='texttt'>const</span>,
<span class='texttt'>volatile</span>
or
<span class='texttt'>const</span>
<span class='texttt'>volatile</span>
object.
<span class='indexparent'><a class='index' id=':restriction,constructor'></a></span><span class='texttt'>const</span>
and
<span class='texttt'>volatile</span>
semantics (<a href='dcl.type.cv'>[dcl.type.cv]</a>) are not applied on an object under construction.
They come into effect when the constructor for the
<a href='intro.object#def:most_derived_object'>most derived object</a> ends.</p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L153'>#</a></div><p ><span class='indexparent'><a class='index' id=':constructor,inheritance_of'></a></span><span class='indexparent'><a class='index' id=':constructor,non-trivial'></a></span>A
<a class='hidden_link' href='#def:constructor,default' id='def:constructor,default'><i >default</i></a>
constructor for a class
<span class='texttt'>X</span>
is a constructor of class
<span class='texttt'>X</span>
for which
each parameter
that is not a function parameter pack
has a default argument
(including the case of a constructor with no parameters).
<span class='indexparent'><a class='index' id=':implicitly-declared_default_constructor'></a></span>If there is no user-declared constructor for class
<span class='texttt'>X</span>,
a non-explicit constructor having no parameters is implicitly declared
as defaulted (<a href='dcl.fct.def'>[dcl.fct.def]</a>).
An implicitly-declared default constructor is an
<span class='texttt'>inline</span>
<span class='texttt'>public</span>
member of its class.</p></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L177'>#</a></div><p >A defaulted default constructor for class <span class='texttt'>X</span> is defined as deleted if:</p><ul class='itemize'><li id='5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#5.1'>(5.1)</a></div><p ><span class='texttt'>X</span> is a union that has a variant member
with a non-trivial default constructor and
no variant member of <span class='texttt'>X</span> has a default member initializer,</p></li><li id='5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#5.2'>(5.2)</a></div><p ><span class='texttt'>X</span> is a non-union class that has a variant member <span class='texttt'>M</span>
with a non-trivial default constructor and
no variant member of the anonymous union containing <span class='texttt'>M</span>
has a default member initializer,</p></li><li id='5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#5.3'>(5.3)</a></div><p >any non-static data member with no <a href='class.mem#def:default_member_initializer'>default member initializer</a> is
of reference type,</p></li><li id='5.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#5.4'>(5.4)</a></div><p >any non-variant non-static data member of const-qualified type (or array
thereof) with no <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i> does not have a user-provided default constructor,</p></li><li id='5.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#5.5'>(5.5)</a></div><p ><span class='texttt'>X</span> is a union and all of its variant members are of const-qualified
type (or array thereof),</p></li><li id='5.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#5.6'>(5.6)</a></div><p ><span class='texttt'>X</span> is a non-union class and all members of any anonymous union member are
of const-qualified type (or array thereof),</p></li><li id='5.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#5.7'>(5.7)</a></div><p >any potentially constructed subobject, except for a non-static data member
with a <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i>, has
class type <span class='texttt'>M</span> (or array thereof) and either <span class='texttt'>M</span>
has no default constructor or <a href='over.match'>overload resolution</a>
as applied to find <span class='texttt'>M</span>'s corresponding
constructor results in an ambiguity or in a function that is deleted or
inaccessible from the defaulted default constructor, or</p></li><li id='5.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#5.8'>(5.8)</a></div><p >any potentially constructed subobject has a type
with a destructor that is deleted or inaccessible from the defaulted default
constructor.
</p></li></ul></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L215'>#</a></div><p >A default constructor is
<a class='hidden_link' href='#def:constructor,default,trivial' id='def:constructor,default,trivial'><i >trivial</i></a>
if it is not user-provided and if:</p><ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.1'>(6.1)</a></div><p >its class has no <a href='class.virtual'>virtual functions</a> and no <a href='class.mi#def:base_class,virtual'>virtual base
classes</a>, and</p></li><li id='6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.2'>(6.2)</a></div><p >no non-static data member of its class has
a <a href='class.mem#def:default_member_initializer'>default member initializer</a>, and</p></li><li id='6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.3'>(6.3)</a></div><p >all the direct base classes of its class have trivial default constructors, and</p></li><li id='6.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.4'>(6.4)</a></div><p >for all the non-static data members of its class that are of class
type (or array thereof), each such class has a trivial default constructor.
</p></li></ul><p >Otherwise, the default constructor is
<a class='hidden_link' href='#def:constructor,default,non-trivial' id='def:constructor,default,non-trivial'><i >non-trivial</i></a>.</p></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L239'>#</a></div><p >A default constructor
that is defaulted and not defined as deleted
is
<a class='hidden_link' href='#def:constructor,implicitly_defined' id='def:constructor,implicitly_defined'><i >implicitly defined</i></a>
when it is <a href='basic.def.odr'>odr-used</a>
to create an object of its class type (<a href='intro.object'>[intro.object]</a>)
or when it is explicitly defaulted after its first declaration.
The implicitly-defined default constructor performs the set of
initializations of the class that would be performed by a user-written default
constructor for that class with no
<i ><a href='class.base.init#nt:ctor-initializer'>ctor-initializer</a></i> and an empty
<i ><a href='stmt.block#nt:compound-statement'>compound-statement</a></i>.
If that user-written default constructor would be ill-formed,
the program is ill-formed.
If that user-written default constructor would satisfy the requirements
of a <a href='dcl.constexpr#def:specifier,constexpr,constructor'>constexpr constructor</a>, the implicitly-defined
default constructor is <span class='texttt'>constexpr</span>.
Before the defaulted default constructor for a class is
implicitly defined,
all the non-user-provided default constructors for its base classes and
its non-static data members shall have been implicitly defined.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
An implicitly-declared default constructor has an
exception specification (<a href='except.spec'>[except.spec]</a>).
An explicitly-defaulted definition might have an
implicit exception specification, see <a href='dcl.fct.def'>[dcl.fct.def]</a>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L268'>#</a></div><p ><span class='indexparent'><a class='index' id=':constructor,implicitly_called'></a></span>Default constructors are called implicitly to create class objects of static, thread,
or automatic storage duration (<a href='basic.stc.static'>[basic.stc.static]</a>, <a href='basic.stc.thread'>[basic.stc.thread]</a>, <a href='basic.stc.auto'>[basic.stc.auto]</a>) defined
without an <a href='dcl.init'>initializer</a>,
are called to create class objects of <a href='basic.stc.dynamic'>dynamic storage duration</a> created by a
<i ><a href='expr.new#nt:new-expression'>new-expression</a></i>
in which the
<i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i>
is omitted (<a href='expr.new'>[expr.new]</a>), or
are called when the <a href='expr.type.conv'>explicit type conversion</a> syntax is
used.
A program is ill-formed if the default constructor for an object
is implicitly used and the constructor is not <a href='class.access'>accessible</a>.</p></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L283'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
<span class='indexparent'><a class='index' id=':order_of_execution,base_class_constructor'></a></span><span class='indexparent'><a class='index' id=':order_of_execution,member_constructor'></a></span><a href='class.base.init'>[class.base.init]</a> describes the order in which constructors for base
classes and non-static data members are called and
describes how arguments can be specified for the calls to these constructors.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L292'>#</a></div><p ><span class='indexparent'><a class='index' id=':restriction,constructor_'></a></span>A
<span class='texttt'>return</span>
statement in the body of a constructor shall not specify a return value.
<span class='indexparent'><a class='index' id=':constructor,address_of'></a></span>The address of a constructor shall not be taken.</p></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L300'>#</a></div><p ><span class='indexparent'><a class='index' id=':object,unnamed'></a></span><span class='indexparent'><a class='index' id=':constructor,explicit_call'></a></span>A <a href='expr.type.conv'>functional notation type conversion</a> can be used
to create new objects of its type.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
The syntax looks like an explicit call of the constructor.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> 
<span class='indexparent'><a class='index' id=':example,constructor'></a></span>
</p><pre class='codeblock'>
complex zz = complex(1,2.3);
cprint( complex(7.8,1.2) );</pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L317'>#</a></div><p >An object created in this way is unnamed.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
<a href='class.temporary'>[class.temporary]</a> describes the lifetime of temporary objects.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
Explicit constructor calls do not yield lvalues, see <a href='basic.lval'>[basic.lval]</a>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L326'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
<span class='indexparent'><a class='index' id=':member_function,constructor_and'></a></span>Some language constructs have special semantics when used during construction;
see <a href='class.base.init'>[class.base.init]</a> and <a href='class.cdtor'>[class.cdtor]</a>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/special.tex#L333'>#</a></div><p >During the construction of an object,
if the value of the object or any of its subobjects is
accessed through a glvalue that is not obtained, directly or indirectly, from
the constructor's
<span class='texttt'>this</span>
pointer, the value of the object or subobject thus obtained is unspecified.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> </p><pre class='codeblock'>
struct C;
void no_opt(C*);

struct C {
  int c;
  C() : c(0) { no_opt(this); }
};

const C cobj;

void no_opt(C* cptr) {
  int i = cobj.c * 100;         <span class='comment'>// value of <span class='tcode_in_codeblock'>cobj.c</span> is unspecified
</span>  cptr-&gt;c = 1;
  cout &lt;&lt; cobj.c * 100          <span class='comment'>// value of <span class='tcode_in_codeblock'>cobj.c</span> is unspecified
</span>       &lt;&lt; '\n';
}

extern struct D d;
struct D {
  D(int a) : a(a), b(d.a) {}
  int a, b;
};
D d = D(1);                     <span class='comment'>// value of <span class='tcode_in_codeblock'>d.b</span> is unspecified
</span></pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div></div></body></html>