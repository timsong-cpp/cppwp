<!DOCTYPE html><html lang='en'><head><title>[class.ctor]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>12</a> Special member functions <a class='abbr_ref' href='./#special'>[special]</a></h1><div id='class.ctor'><h2 ><a class='secnum' style='min-width:88pt'>12.1</a> Constructors <a class='abbr_ref'>[class.ctor]</a></h2><p ><span class='indexparent'><a class='index' id='constructor'></a></span></p><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >Constructors do not have names.
In a declaration of a constructor, the <i ><a href='dcl.decl#declarator'>declarator</a></i> is a
function declarator (<a href='dcl.fct'>[dcl.fct]</a>) of the form</p><pre class='bnf'><i ><a href='dcl.decl#ptr-declarator'>ptr-declarator</a></i> <span class='terminal'>(</span> <i ><a href='dcl.fct#parameter-declaration-clause'>parameter-declaration-clause</a></i> <span class='terminal'>)</span> <i ><a href='except.spec#exception-specification'>exception-specification</a></i><span class='math'><sub ><span class='mathit'>opt</span></sub></span> <i ><a href='dcl.attr.grammar#attribute-specifier-seq'>attribute-specifier-seq</a></i><span class='math'><sub ><span class='mathit'>opt</span></sub></span></pre><p >where the <i ><a href='dcl.decl#ptr-declarator'>ptr-declarator</a></i> consists solely of an
<i ><a href='expr.prim.id#id-expression'>id-expression</a></i>, an optional <i ><a href='dcl.attr.grammar#attribute-specifier-seq'>attribute-specifier-seq</a></i>,
and optional surrounding parentheses, and the <i ><a href='expr.prim.id#id-expression'>id-expression</a></i> has
one of the following forms:</p><ul ><li ><p >in a <i ><a href='class.mem#member-declaration'>member-declaration</a></i> that belongs to the
<i ><a href='class.mem#member-specification'>member-specification</a></i> of a class but is not a friend
declaration (<a href='class.friend'>[class.friend]</a>), the <i ><a href='expr.prim.id#id-expression'>id-expression</a></i> is the
injected-class-name (Clause <a href='class'>[class]</a>) of the immediately-enclosing class;</p></li><li ><p >in a <i ><a href='class.mem#member-declaration'>member-declaration</a></i> that belongs to the
<i ><a href='class.mem#member-specification'>member-specification</a></i> of a class template but is not a friend
declaration, the <i ><a href='expr.prim.id#id-expression'>id-expression</a></i> is a <i ><a href='class#class-name'>class-name</a></i> that
names the current instantiation (<a href='temp.dep.type'>[temp.dep.type]</a>) of the
immediately-enclosing class template; or</p></li><li ><p >in a declaration at namespace scope or in a friend declaration, the
<i ><a href='expr.prim.id#id-expression'>id-expression</a></i> is a <i ><a href='expr.prim.id.qual#qualified-id'>qualified-id</a></i> that names a
constructor (<a href='class.qual'>[class.qual]</a>).
</p></li></ul><p >The <i ><a href='class#class-name'>class-name</a></i> shall not be a <i ><a href='dcl.typedef#typedef-name'>typedef-name</a></i>. In a constructor
declaration, each <i ><a href='dcl.spec#decl-specifier'>decl-specifier</a></i> in the optional
<i ><a href='dcl.spec#decl-specifier-seq'>decl-specifier-seq</a></i> shall be <span class='texttt'>friend</span>, <span class='texttt'>inline</span>,
<span class='texttt'>explicit</span>, or <span class='texttt'>constexpr</span>.
[&nbsp;<i>Example:</i><span class='space'></span></p><pre class='codeblock'>
struct S {
  S();              <span class='comment'>// declares the constructor
</span>};

S::S() { }          <span class='comment'>// defines the constructor
</span></pre><p ><i>&nbsp;—&nbsp;end example</i>&nbsp;]</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p >A constructor is used to initialize objects of its class type.
Because constructors do not have names, they are never found during
name lookup; however an explicit type conversion using the functional
notation (<a href='expr.type.conv'>[expr.type.conv]</a>) will cause a constructor to be called to
initialize an object.
[&nbsp;<i>Note:</i><span class='space'></span>
For initialization of objects of class type see <a href='class.init'>[class.init]</a>.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><p ><span class='indexparent'><a class='index' id='const!constructor~and'></a></span><span class='indexparent'><a class='index' id='volatile!constructor~and'></a></span>A constructor can be invoked for a
<span class='texttt'>const</span>,
<span class='texttt'>volatile</span>
or
<span class='texttt'>const</span>
<span class='texttt'>volatile</span>
object.
<span class='indexparent'><a class='index' id='restriction!constructor'></a></span><span class='texttt'>const</span>
and
<span class='texttt'>volatile</span>
semantics (<a href='dcl.type.cv'>[dcl.type.cv]</a>) are not applied on an object under construction.
They come into effect when the constructor for the
most derived object (<a href='intro.object'>[intro.object]</a>) ends.</p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><p ><span class='indexparent'><a class='index' id='constructor!inheritance~of'></a></span><span class='indexparent'><a class='index' id='constructor!default'></a></span><span class='indexparent'><a class='index' id='constructor!non-trivial'></a></span>A
<i>default</i>
constructor for a class
<span class='texttt'>X</span>
is a constructor of class
<span class='texttt'>X</span>
that either has no parameters or else each parameter that is not a
function parameter pack has a default argument.
<span class='indexparent'><a class='index' id='implicitly-declared~default~constructor'></a></span>If there is no user-declared constructor for class
<span class='texttt'>X</span>,
a non-explicit constructor having no parameters is implicitly declared
as defaulted (<a href='dcl.fct.def'>[dcl.fct.def]</a>).
An implicitly-declared default constructor is an
<span class='texttt'>inline</span>
<span class='texttt'>public</span>
member of its class.
A defaulted default constructor for class <span class='texttt'>X</span> is defined as deleted if:</p><ul ><li ><p ><span class='texttt'>X</span> is a union that has a variant member
with a non-trivial default constructor and
no variant member of <span class='texttt'>X</span> has a default member initializer,
    
</p></li><li ><p ><span class='texttt'>X</span> is a non-union class that has a variant member <span class='texttt'>M</span>
with a non-trivial default constructor and
no variant member of the anonymous union containing <span class='texttt'>M</span>
has a default member initializer,</p></li><li ><p >any non-static data member with no default member initializer (<a href='class.mem'>[class.mem]</a>) is
of reference type,</p></li><li ><p >any non-variant non-static data member of const-qualified type (or array
thereof) with no <i ><a href='dcl.init#brace-or-equal-initializer'>brace-or-equal-initializer</a></i> does not have a user-provided default constructor,</p></li><li ><p ><span class='texttt'>X</span> is a union and all of its variant members are of const-qualified
type (or array thereof),</p></li><li ><p ><span class='texttt'>X</span> is a non-union class and all members of any anonymous union member are
of const-qualified type (or array thereof),</p></li><li ><p >any potentially constructed subobject, except for a non-static data member
with a <i ><a href='dcl.init#brace-or-equal-initializer'>brace-or-equal-initializer</a></i>, has
class type <span class='texttt'>M</span> (or array thereof) and either <span class='texttt'>M</span>
has no default constructor or overload resolution
(<a href='over.match'>[over.match]</a>) as applied to <span class='texttt'>M</span>'s default
constructor results in an ambiguity or in a function that is deleted or
inaccessible from the defaulted default constructor, or</p></li><li ><p >any potentially constructed subobject has a type
with a destructor that is deleted or inaccessible from the defaulted default
constructor.
</p></li></ul><p >A default constructor is
trivial
if it is not user-provided and if:</p><ul ><li ><p >its class has no virtual functions (<a href='class.virtual'>[class.virtual]</a>) and no virtual base
classes (<a href='class.mi'>[class.mi]</a>), and</p></li><li ><p >no non-static data member of its class has
a default member initializer (<a href='class.mem'>[class.mem]</a>), and</p></li><li ><p >all the direct base classes of its class have trivial default constructors, and</p></li><li ><p >for all the non-static data members of its class that are of class
type (or array thereof), each such class has a trivial default constructor.
</p></li></ul><p >Otherwise, the default constructor is
<span class='grammarterm'>non-trivial</span>.</p></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><p ><span class='indexparent'><a class='index' id='constructor!implicitly defined'></a></span>A default constructor
that is defaulted and not defined as deleted
is
<i>implicitly defined</i>
when it is odr-used (<a href='basic.def.odr'>[basic.def.odr]</a>)
to create an object of its class type (<a href='intro.object'>[intro.object]</a>)
or when it is explicitly defaulted after its first declaration.
The implicitly-defined default constructor performs the set of
initializations of the class that would be performed by a user-written default
constructor for that class with no
<i ><a href='class.base.init#ctor-initializer'>ctor-initializer</a></i> (<a href='class.base.init'>[class.base.init]</a>) and an empty
<i ><a href='stmt.block#compound-statement'>compound-statement</a></i>.
If that user-written default constructor would be ill-formed,
the program is ill-formed.
If that user-written default constructor would satisfy the requirements
of a <span class='texttt'>constexpr</span> constructor (<a href='dcl.constexpr'>[dcl.constexpr]</a>), the implicitly-defined
default constructor is <span class='texttt'>constexpr</span>.
Before the defaulted default constructor for a class is
implicitly defined,
all the non-user-provided default constructors for its base classes and
its non-static data members shall have been implicitly defined.
[&nbsp;<i>Note:</i><span class='space'></span>
An implicitly-declared default constructor has an
exception specification (<a href='except.spec'>[except.spec]</a>).
An explicitly-defaulted definition might have an
implicit exception specification, see <a href='dcl.fct.def'>[dcl.fct.def]</a>.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><p ><span class='indexparent'><a class='index' id='constructor!implicitly called'></a></span>Default constructors are called implicitly to create class objects of static, thread,
or automatic storage duration (<a href='basic.stc.static'>[basic.stc.static]</a>, <a href='basic.stc.thread'>[basic.stc.thread]</a>, <a href='basic.stc.auto'>[basic.stc.auto]</a>) defined
without an initializer (<a href='dcl.init'>[dcl.init]</a>),
are called to create class objects of dynamic storage duration (<a href='basic.stc.dynamic'>[basic.stc.dynamic]</a>) created by a
<i ><a href='expr.new#new-expression'>new-expression</a></i>
in which the
<i ><a href='expr.new#new-initializer'>new-initializer</a></i>
is omitted (<a href='expr.new'>[expr.new]</a>), or
are called when the explicit type conversion syntax (<a href='expr.type.conv'>[expr.type.conv]</a>) is
used.
A program is ill-formed if the default constructor for an object
is implicitly used and the constructor is not accessible (Clause <a href='class.access'>[class.access]</a>).</p></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><p >[&nbsp;<i>Note:</i><span class='space'></span>
<span class='indexparent'><a class='index' id='order~of~execution!base~class constructor'></a></span><span class='indexparent'><a class='index' id='order~of~execution!member constructor'></a></span><a href='class.base.init'>[class.base.init]</a> describes the order in which constructors for base
classes and non-static data members are called and
describes how arguments can be specified for the calls to these constructors.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><p ><span class='indexparent'><a class='index' id='restriction!constructor'></a></span>A
<span class='texttt'>return</span>
statement in the body of a constructor shall not specify a return value.
<span class='indexparent'><a class='index' id='constructor!address~of'></a></span>The address of a constructor shall not be taken.</p></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><p ><span class='indexparent'><a class='index' id='object!unnamed'></a></span><span class='indexparent'><a class='index' id='constructor!explicit call'></a></span>A functional notation type conversion (<a href='expr.type.conv'>[expr.type.conv]</a>) can be used
to create new objects of its type.
[&nbsp;<i>Note:</i><span class='space'></span>
The syntax looks like an explicit call of the constructor.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]
[&nbsp;<i>Example:</i><span class='space'></span>
<span class='indexparent'><a class='index' id='example!constructor'></a></span>
</p><pre class='codeblock'>
complex zz = complex(1,2.3);
cprint( complex(7.8,1.2) );
</pre><p ><i>&nbsp;—&nbsp;end example</i>&nbsp;]</p></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><p >An object created in this way is unnamed.
[&nbsp;<i>Note:</i><span class='space'></span>
<a href='class.temporary'>[class.temporary]</a> describes the lifetime of temporary objects.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]
[&nbsp;<i>Note:</i><span class='space'></span>
Explicit constructor calls do not yield lvalues, see <a href='basic.lval'>[basic.lval]</a>.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><p >[&nbsp;<i>Note:</i><span class='space'></span>
<span class='indexparent'><a class='index' id='member function!constructor~and'></a></span>some language constructs have special semantics when used during construction;
see <a href='class.base.init'>[class.base.init]</a> and <a href='class.cdtor'>[class.cdtor]</a>.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]</p></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><p >During the construction of a
<span class='texttt'>const</span>
object, if the value of the object or any of its subobjects is
accessed through a glvalue that is not obtained, directly or indirectly, from
the constructor's
<span class='texttt'>this</span>
pointer, the value of the object or subobject thus obtained is unspecified.
[&nbsp;<i>Example:</i><span class='space'></span></p><pre class='codeblock'>
struct C;
void no_opt(C*);

struct C {
  int c;
  C() : c(0) { no_opt(this); }
};

const C cobj;

void no_opt(C* cptr) {
  int i = cobj.c * 100;         <span class='comment'>// value of <span class='texttt'>cobj.c</span> is unspecified
</span>  cptr-&gt;c = 1;
  cout &lt;&lt; cobj.c * 100          <span class='comment'>// value of <span class='texttt'>cobj.c</span> is unspecified
</span>       &lt;&lt; '\n';
}
</pre><p ><i>&nbsp;—&nbsp;end example</i>&nbsp;]</p></div></div></div></body></html>