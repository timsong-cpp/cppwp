<!DOCTYPE html><html lang='en'><head><title>[class.ctor]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>11</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>11.4</a> Class members <a class='abbr_ref' href='class.mem#class.ctor'>[class.mem]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>11.4.4</a> Constructors <a class='abbr_ref'>[class.ctor]</a></h3><span class='indexparent'><a class='index' id=':constructor'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1232'>#</a></div><div id='1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:constructor' id='def:constructor'><i >constructor</i></a> is introduced by a declaration
whose <a class='grammarterm' href='dcl.decl#nt:declarator'>declarator</a> is a
function declarator (<a href='dcl.fct'>[dcl.fct]</a>) of the form
<pre class='ncbnf'><a class='grammarterm' href='dcl.decl#nt:ptr-declarator'>ptr-declarator</a> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a> <span class='terminal'><span class='parenthesis'>)</span></span> <a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre>
where the <a class='grammarterm' href='dcl.decl#nt:ptr-declarator'>ptr-declarator</a> consists solely of an
<a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a>, an optional <a class='grammarterm' href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a>,
and optional surrounding parentheses, and the <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a> has
one of the following forms:
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.1'>(1.1)</a></div>in a <a class='grammarterm' href='class.mem#nt:member-declaration'>member-declaration</a> that belongs to the
<a class='grammarterm' href='class.mem#nt:member-specification'>member-specification</a> of a class or class template
but is not a friend
declaration (<a href='class.friend'>[class.friend]</a>), the <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a> is the
injected-class-name (<a href='class.pre'>[class.pre]</a>) of the immediately-enclosing entity or</li><li id='1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.2'>(1.2)</a></div>in a declaration at namespace scope or in a friend declaration, the
<a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a> is a <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> that names a
constructor (<a href='class.qual'>[class.qual]</a>)<a class='hidden_link' href='#1.sentence-1'>.</a></li></ul></div> <div id='1.sentence-2' class='sentence'>
Constructors do not have names<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>In a constructor declaration, each <a class='grammarterm' href='dcl.spec#nt:decl-specifier'>decl-specifier</a> in the optional
<a class='grammarterm' href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a> shall be <span class='texttt'><span class='keyword'>friend</span></span>, <span class='texttt'><span class='keyword'>inline</span></span>,
<span class='texttt'><span class='keyword'>constexpr</span></span>, or an <a class='grammarterm' href='dcl.fct.spec#nt:explicit-specifier'>explicit-specifier</a><a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.example-1' class='example'>[&nbsp;<a class='example_link' href='#1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// declares the constructor</span>
<span class='curlybracket'>}</span>;

S<span class='operator'>::</span>S<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>          <span class='comment'>// defines the constructor</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1270'>#</a></div><div id='2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,explicit_call'></a></span>A constructor is used to initialize objects of its class type<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Because constructors do not have names, they are never found during
name lookup; however an explicit type conversion using the functional
notation (<a href='expr.type.conv'>[expr.type.conv]</a>) will cause a constructor to be called to
initialize an object<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.note-1' class='note'>[&nbsp;<a class='note_link' href='#2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.sentence-3' class='sentence'>The syntax looks like an explicit call of the constructor<a class='hidden_link' href='#2.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='2.example-1' class='example'>[&nbsp;<a class='example_link' href='#2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
complex zz <span class='operator'>=</span> complex<span class='parenthesis'>(</span><span class='literal'>1</span>,<span class='literal'>2.3</span><span class='parenthesis'>)</span>;
cprint<span class='parenthesis'>(</span> complex<span class='parenthesis'>(</span><span class='literal'>7.8</span>,<span class='literal'>1.2</span><span class='parenthesis'>)</span> <span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='2.note-2' class='note'>[&nbsp;<a class='note_link' href='#2.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.sentence-4' class='sentence'>For initialization of objects of class type see <a href='class.init'>[class.init]</a><a class='hidden_link' href='#2.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1290'>#</a></div><div id='3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':object,unnamed'></a></span>An object created in this way is unnamed<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.note-1' class='note'>[&nbsp;<a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-2' class='sentence'><a href='class.temporary'>[class.temporary]</a> describes the lifetime of temporary objects<a class='hidden_link' href='#3.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='3.note-2' class='note'>[&nbsp;<a class='note_link' href='#3.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-3' class='sentence'>Explicit constructor calls do not yield lvalues, see <a href='basic.lval'>[basic.lval]</a><a class='hidden_link' href='#3.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1300'>#</a></div><div id='4.note-1' class='note'>[&nbsp;<a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':member_function,constructor_and'></a></span>Some language constructs have special semantics when used during construction;
see <a href='class.base.init'>[class.base.init]</a> and <a href='class.cdtor'>[class.cdtor]</a><a class='hidden_link' href='#4.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1307'>#</a></div><div id='5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':const,constructor_and'></a></span><span class='indexparent'><a class='index' id=':volatile,constructor_and'></a></span>A constructor can be invoked for a
<span class='texttt'><span class='keyword'>const</span></span>,
<span class='texttt'><span class='keyword'>volatile</span></span>
or
<span class='texttt'><span class='keyword'>const</span></span>
<span class='texttt'><span class='keyword'>volatile</span></span>
object<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':restriction,constructor'></a></span><span class='texttt'><span class='keyword'>const</span></span>
and
<span class='texttt'><span class='keyword'>volatile</span></span>
semantics (<a href='dcl.type.cv'>[dcl.type.cv]</a>) are not applied on an object under construction<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>They come into effect when the constructor for the
most derived object (<a href='intro.object'>[intro.object]</a>) ends<a class='hidden_link' href='#5.sentence-3'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1325'>#</a></div><div id='6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':restriction,constructor_'></a></span>A
<span class='texttt'><span class='keyword'>return</span></span>
statement in the body of a constructor shall not specify a return value<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':constructor,address_of'></a></span>The address of a constructor shall not be taken<a class='hidden_link' href='#6.sentence-2'>.</a></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1333'>#</a></div><div id='7.sentence-1' class='sentence'>A constructor shall not be a coroutine<a class='hidden_link' href='#7.sentence-1'>.</a></div></div><div id='class.default.ctor' class='section'><h4 ><a class='secnum' href='#class.default.ctor' style='min-width:118pt'>11.4.4.1</a> Default constructors <a class='abbr_ref' href='class.default.ctor'>[class.default.ctor]</a></h4><div class='para' id='class.default.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#class.default.ctor-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1338'>#</a></div><div id='class.default.ctor-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,inheritance_of'></a></span><span class='indexparent'><a class='index' id=':constructor,non-trivial'></a></span>A <a class='hidden_link' href='#def:constructor,default' id='def:constructor,default'><i >default constructor</i></a> for a class <span class='texttt'>X</span>
is a constructor of class <span class='texttt'>X</span>
for which each parameter
that is not a function parameter pack
has a default argument
(including the case of a constructor with no parameters)<a class='hidden_link' href='#class.default.ctor-1.sentence-1'>.</a></div> <div id='class.default.ctor-1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':implicitly-declared_default_constructor'></a></span>If there is no user-declared constructor for class
<span class='texttt'>X</span>,
a non-explicit constructor having no parameters is implicitly declared
as defaulted (<a href='dcl.fct.def'>[dcl.fct.def]</a>)<a class='hidden_link' href='#class.default.ctor-1.sentence-2'>.</a></div> <div id='class.default.ctor-1.sentence-3' class='sentence'>An implicitly-declared default constructor is an
inline public member of its class<a class='hidden_link' href='#class.default.ctor-1.sentence-3'>.</a></div></div><div class='para' id='class.default.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#class.default.ctor-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1355'>#</a></div><div id='class.default.ctor-2.sentence-1' class='sentence'>A defaulted default constructor for class <span class='texttt'>X</span> is defined as deleted if:
<ul class='itemize'><li id='class.default.ctor-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.default.ctor-2.1'>(2.1)</a></div><span class='texttt'>X</span> is a union that has a variant member
with a non-trivial default constructor and
no variant member of <span class='texttt'>X</span> has a default member initializer,</li><li id='class.default.ctor-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.default.ctor-2.2'>(2.2)</a></div><span class='texttt'>X</span> is a non-union class that has a variant member <span class='texttt'>M</span>
with a non-trivial default constructor and
no variant member of the anonymous union containing <span class='texttt'>M</span>
has a default member initializer,</li><li id='class.default.ctor-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.default.ctor-2.3'>(2.3)</a></div>any non-static data member with no default member initializer (<a href='class.mem'>[class.mem]</a>) is
of reference type,</li><li id='class.default.ctor-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.default.ctor-2.4'>(2.4)</a></div>any non-variant non-static data member of const-qualified type (or array
thereof) with no <a class='grammarterm' href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a>
is not const-default-constructible (<a href='dcl.init'>[dcl.init]</a>),</li><li id='class.default.ctor-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.default.ctor-2.5'>(2.5)</a></div><span class='texttt'>X</span> is a union and all of its variant members are of const-qualified
type (or array thereof),</li><li id='class.default.ctor-2.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.default.ctor-2.6'>(2.6)</a></div><span class='texttt'>X</span> is a non-union class and all members of any anonymous union member are
of const-qualified type (or array thereof),</li><li id='class.default.ctor-2.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.default.ctor-2.7'>(2.7)</a></div>any potentially constructed subobject, except for a non-static data member
with a <a class='grammarterm' href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a>, has
class type <span class='texttt'>M</span> (or array thereof) and either <span class='texttt'>M</span>
has no default constructor or overload resolution (<a href='over.match'>[over.match]</a>)
as applied to find <span class='texttt'>M</span>'s corresponding
constructor results in an ambiguity or in a function that is deleted or
inaccessible from the defaulted default constructor, or</li><li id='class.default.ctor-2.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.default.ctor-2.8'>(2.8)</a></div>any potentially constructed subobject has a type
with a destructor that is deleted or inaccessible from the defaulted default
constructor<a class='hidden_link' href='#class.default.ctor-2.sentence-1'>.</a></li></ul></div></div><div class='para' id='class.default.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#class.default.ctor-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1393'>#</a></div><div id='class.default.ctor-3.sentence-1' class='sentence'>A default constructor is
<a class='hidden_link' href='#def:constructor,default,trivial' id='def:constructor,default,trivial'><i >trivial</i></a>
if it is not user-provided and if:
<ul class='itemize'><li id='class.default.ctor-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.default.ctor-3.1'>(3.1)</a></div>its class has no virtual functions (<a href='class.virtual'>[class.virtual]</a>) and no virtual base
classes (<a href='class.mi'>[class.mi]</a>), and</li><li id='class.default.ctor-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.default.ctor-3.2'>(3.2)</a></div>no non-static data member of its class has
a default member initializer (<a href='class.mem'>[class.mem]</a>), and</li><li id='class.default.ctor-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.default.ctor-3.3'>(3.3)</a></div>all the direct base classes of its class have trivial default constructors, and</li><li id='class.default.ctor-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.default.ctor-3.4'>(3.4)</a></div>for all the non-static data members of its class that are of class
type (or array thereof), each such class has a trivial default constructor<a class='hidden_link' href='#class.default.ctor-3.sentence-1'>.</a></li></ul></div><div id='class.default.ctor-3.sentence-2' class='sentence'>Otherwise, the default constructor is
<a class='hidden_link' href='#def:constructor,default,non-trivial' id='def:constructor,default,non-trivial'><i >non-trivial</i></a><a class='hidden_link' href='#class.default.ctor-3.sentence-2'>.</a></div></div><div class='para' id='class.default.ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#class.default.ctor-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1416'>#</a></div><div id='class.default.ctor-4.sentence-1' class='sentence'>A default constructor
that is defaulted and not defined as deleted
is
<a class='hidden_link' href='#def:constructor,implicitly_defined' id='def:constructor,implicitly_defined'><i >implicitly defined</i></a>
when it is odr-used (<a href='basic.def.odr'>[basic.def.odr]</a>)
to create an object of its class type (<a href='intro.object'>[intro.object]</a>),
when it is needed for constant evaluation (<a href='expr.const'>[expr.const]</a>), or
when it is explicitly defaulted after its first declaration<a class='hidden_link' href='#class.default.ctor-4.sentence-1'>.</a></div> <div id='class.default.ctor-4.sentence-2' class='sentence'>The implicitly-defined default constructor performs the set of
initializations of the class that would be performed by a user-written default
constructor for that class with no
<a class='grammarterm' href='class.base.init#nt:ctor-initializer'>ctor-initializer</a> and an empty
<a class='grammarterm' href='stmt.block#nt:compound-statement'>compound-statement</a><a class='hidden_link' href='#class.default.ctor-4.sentence-2'>.</a></div> <div id='class.default.ctor-4.sentence-3' class='sentence'>If that user-written default constructor would be ill-formed,
the program is ill-formed<a class='hidden_link' href='#class.default.ctor-4.sentence-3'>.</a></div> <div id='class.default.ctor-4.sentence-4' class='sentence'>If that user-written default constructor would satisfy the requirements
of a constexpr constructor (<a href='dcl.constexpr'>[dcl.constexpr]</a>), the implicitly-defined
default constructor is <span class='texttt'><span class='keyword'>constexpr</span></span><a class='hidden_link' href='#class.default.ctor-4.sentence-4'>.</a></div> <div id='class.default.ctor-4.sentence-5' class='sentence'>Before the defaulted default constructor for a class is
implicitly defined,
all the non-user-provided default constructors for its base classes and
its non-static data members are implicitly defined<a class='hidden_link' href='#class.default.ctor-4.sentence-5'>.</a></div> <div id='class.default.ctor-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#class.default.ctor-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.default.ctor-4.sentence-6' class='sentence'>An implicitly-declared default constructor has an
exception specification (<a href='except.spec'>[except.spec]</a>)<a class='hidden_link' href='#class.default.ctor-4.sentence-6'>.</a></div> <div id='class.default.ctor-4.sentence-7' class='sentence'>An explicitly-defaulted definition might have an
implicit exception specification, see <a href='dcl.fct.def'>[dcl.fct.def]</a><a class='hidden_link' href='#class.default.ctor-4.sentence-7'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='class.default.ctor-5'><div class='marginalizedparent'><a class='marginalized' href='#class.default.ctor-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1446'>#</a></div><div id='class.default.ctor-5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,implicitly_called'></a></span>Default constructors are called implicitly to create class objects of static, thread,
or automatic storage duration (<a href='basic.stc.static'>[basic.stc.static]</a>, <a href='basic.stc.thread'>[basic.stc.thread]</a>, <a href='basic.stc.auto'>[basic.stc.auto]</a>) defined
without an initializer (<a href='dcl.init'>[dcl.init]</a>),
are called to create class objects of dynamic storage duration (<a href='basic.stc.dynamic'>[basic.stc.dynamic]</a>) created by a
<a class='grammarterm' href='expr.new#nt:new-expression'>new-expression</a>
in which the
<a class='grammarterm' href='expr.new#nt:new-initializer'>new-initializer</a>
is omitted (<a href='expr.new'>[expr.new]</a>), or
are called when the explicit type conversion syntax (<a href='expr.type.conv'>[expr.type.conv]</a>) is
used<a class='hidden_link' href='#class.default.ctor-5.sentence-1'>.</a></div> <div id='class.default.ctor-5.sentence-2' class='sentence'>A program is ill-formed if the default constructor for an object
is implicitly used and the constructor is not accessible (<a href='class.access'>[class.access]</a>)<a class='hidden_link' href='#class.default.ctor-5.sentence-2'>.</a></div></div><div class='para' id='class.default.ctor-6'><div class='marginalizedparent'><a class='marginalized' href='#class.default.ctor-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1461'>#</a></div><div id='class.default.ctor-6.note-1' class='note'>[&nbsp;<a class='note_link' href='#class.default.ctor-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.default.ctor-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':order_of_execution,base_class_constructor'></a></span><span class='indexparent'><a class='index' id=':order_of_execution,member_constructor'></a></span><a href='class.base.init'>[class.base.init]</a> describes the order in which constructors for base
classes and non-static data members are called and
describes how arguments can be specified for the calls to these constructors<a class='hidden_link' href='#class.default.ctor-6.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div id='class.copy.ctor' class='section'><h4 ><a class='secnum' href='#class.copy.ctor' style='min-width:118pt'>11.4.4.2</a> Copy/move constructors <a class='abbr_ref' href='class.copy.ctor'>[class.copy.ctor]</a></h4><div class='para' id='class.copy.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1472'>#</a></div><div id='class.copy.ctor-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,copy'></a></span><span class='indexparent'><a class='index' id=':constructor,move'></a></span>A non-template constructor for class
<span class='texttt'>X</span>
is
a
copy
constructor if its first parameter is of type
<span class='texttt'>X<span class='operator'>&amp;</span></span>,
<span class='texttt'><span class='keyword'>const</span> X<span class='operator'>&amp;</span></span>,
<span class='texttt'><span class='keyword'>volatile</span> X<span class='operator'>&amp;</span></span>
or
<span class='texttt'><span class='keyword'>const</span> <span class='keyword'>volatile</span> X<span class='operator'>&amp;</span></span>,
and either there are no other parameters
or else all other parameters have default arguments (<a href='dcl.fct.default'>[dcl.fct.default]</a>)<a class='hidden_link' href='#class.copy.ctor-1.sentence-1'>.</a></div> <div id='class.copy.ctor-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.copy.ctor-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.copy.ctor-1.sentence-2' class='sentence'><span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>X<span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='parenthesis'>)</span></span>
and
<span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>X<span class='parenthesis'>(</span>X<span class='operator'>&amp;</span>,<span class='keyword'>int</span><span class='operator'>=</span><span class='literal'>1</span><span class='parenthesis'>)</span></span>
are copy constructors<a class='hidden_link' href='#class.copy.ctor-1.sentence-2'>.</a></div><pre class='codeblock'>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  X<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  X<span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span>, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>1</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
X a<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;             <span class='comment'>// calls <span class='tcode_in_codeblock'>X(int);</span></span>
X b<span class='parenthesis'>(</span>a, <span class='literal'>0</span><span class='parenthesis'>)</span>;          <span class='comment'>// calls <span class='tcode_in_codeblock'>X(const X&amp;, int);</span></span>
X c <span class='operator'>=</span> b;            <span class='comment'>// calls <span class='tcode_in_codeblock'>X(const X&amp;, int);</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='class.copy.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1507'>#</a></div><div id='class.copy.ctor-2.sentence-1' class='sentence'>A non-template constructor for class <span class='texttt'>X</span> is a move constructor if its
first parameter is of type <span class='texttt'>X<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>, <span class='texttt'><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>,
<span class='texttt'><span class='keyword'>volatile</span> X<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>, or <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>volatile</span> X<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>, and either there are
no other parameters or else all other parameters have default
arguments (<a href='dcl.fct.default'>[dcl.fct.default]</a>)<a class='hidden_link' href='#class.copy.ctor-2.sentence-1'>.</a></div> <div id='class.copy.ctor-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.copy.ctor-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.copy.ctor-2.sentence-2' class='sentence'><span class='texttt'>Y<span class='operator'>&#x200b;::&#x200b;</span>Y<span class='parenthesis'>(</span>Y<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span></span> is a move constructor<a class='hidden_link' href='#class.copy.ctor-2.sentence-2'>.</a></div> <pre class='codeblock'>
<span class='keyword'>struct</span> Y <span class='curlybracket'>{</span>
  Y<span class='parenthesis'>(</span><span class='keyword'>const</span> Y<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
  Y<span class='parenthesis'>(</span>Y<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>extern</span> Y f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
Y d<span class='parenthesis'>(</span>f<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;          <span class='comment'>// calls <span class='tcode_in_codeblock'>Y(Y&amp;&amp;)</span></span>
Y e <span class='operator'>=</span> d;            <span class='comment'>// calls <span class='tcode_in_codeblock'>Y(const Y&amp;)</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='class.copy.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1526'>#</a></div><div id='class.copy.ctor-3.note-1' class='note'>[&nbsp;<a class='note_link' href='#class.copy.ctor-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.copy.ctor-3.sentence-1' class='sentence'>All forms of copy/move constructor may be declared for a class<a class='hidden_link' href='#class.copy.ctor-3.sentence-1'>.</a></div> <div id='class.copy.ctor-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.copy.ctor-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  X<span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
  X<span class='parenthesis'>(</span>X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;            <span class='comment'>// OK</span>
  X<span class='parenthesis'>(</span>X<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
  X<span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;     <span class='comment'>// OK, but possibly not sensible</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='class.copy.ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1541'>#</a></div><div id='class.copy.ctor-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#class.copy.ctor-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.copy.ctor-4.sentence-1' class='sentence'>If a class
<span class='texttt'>X</span>
only has a copy constructor with a parameter of type
<span class='texttt'>X<span class='operator'>&amp;</span></span>,
an initializer of type
<span class='texttt'><span class='keyword'>const</span></span>
<span class='texttt'>X</span>
or
<span class='texttt'><span class='keyword'>volatile</span></span>
<span class='texttt'>X</span>
cannot initialize an object of type
<span class='mathit'>cv</span> <span class='texttt'>X</span><a class='hidden_link' href='#class.copy.ctor-4.sentence-1'>.</a></div> <div id='class.copy.ctor-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.copy.ctor-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  X<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// default constructor</span>
  X<span class='parenthesis'>(</span>X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;            <span class='comment'>// copy constructor with a non-const parameter</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>const</span> X cx;
X x <span class='operator'>=</span> cx;           <span class='comment'>// error: <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;X(X&amp;)</span> cannot copy <span class='tcode_in_codeblock'>cx</span> into <span class='tcode_in_codeblock'>x</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='class.copy.ctor-5'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1567'>#</a></div><div id='class.copy.ctor-5.sentence-1' class='sentence'>A declaration of a constructor for a class
<span class='texttt'>X</span>
is ill-formed if its first parameter is of type
<span class='mathit'>cv</span> <span class='texttt'>X</span>
and either there are no other parameters or else all other parameters have
default arguments<a class='hidden_link' href='#class.copy.ctor-5.sentence-1'>.</a></div> <div id='class.copy.ctor-5.sentence-2' class='sentence'>A member function template is never instantiated to
produce such a constructor signature<a class='hidden_link' href='#class.copy.ctor-5.sentence-2'>.</a></div> <div id='class.copy.ctor-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.copy.ctor-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> S<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

S g;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  S a<span class='parenthesis'>(</span>g<span class='parenthesis'>)</span>;           <span class='comment'>// does not instantiate the member template to produce <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;S&lt;S&gt;(S)</span>;</span>
                    <span class='comment'>// uses the implicitly declared copy constructor</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='class.copy.ctor-6'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1592'>#</a></div><div id='class.copy.ctor-6.sentence-1' class='sentence'>If the class definition does not explicitly declare a copy constructor,
a non-explicit one is declared <a class='hidden_link' href='#def:constructor,copy,implicitly_declared' id='def:constructor,copy,implicitly_declared'><i >implicitly</i></a><a class='hidden_link' href='#class.copy.ctor-6.sentence-1'>.</a></div> <div id='class.copy.ctor-6.sentence-2' class='sentence'>If the class definition declares a move
constructor or move assignment operator, the implicitly declared copy
constructor is defined as deleted; otherwise, it is defined as
defaulted (<a href='dcl.fct.def'>[dcl.fct.def]</a>)<a class='hidden_link' href='#class.copy.ctor-6.sentence-2'>.</a></div> <div id='class.copy.ctor-6.sentence-3' class='sentence'>The latter case is deprecated if the class has a user-declared copy assignment
operator or a user-declared destructor  (<a href='depr.impldec'>[depr.impldec]</a>)<a class='hidden_link' href='#class.copy.ctor-6.sentence-3'>.</a></div></div><div class='para' id='class.copy.ctor-7'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1602'>#</a></div><div id='class.copy.ctor-7.sentence-1' class='sentence'>The implicitly-declared copy constructor for a class
<span class='texttt'>X</span>
will have the form
<pre class='codeblock'>
X<span class='operator'>::</span>X<span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>
</pre>
if each potentially constructed subobject of a class type
<span class='texttt'>M</span>
(or array thereof)
has a copy constructor whose first parameter is of type
<span class='texttt'><span class='keyword'>const</span></span>
<span class='texttt'>M<span class='operator'>&amp;</span></span>
or
<span class='texttt'><span class='keyword'>const</span></span>
<span class='texttt'><span class='keyword'>volatile</span></span>
<span class='texttt'>M<span class='operator'>&amp;</span></span><a class='hidden_link' href='#class.copy.ctor-7.sentence-1'>.</a><a class='footnotenum' href='#footnote-103' id='footnoteref-103'>103</a></div> <div id='class.copy.ctor-7.sentence-2' class='sentence'>
Otherwise, the implicitly-declared copy constructor will have the form
<pre class='codeblock'>
X<span class='operator'>::</span>X<span class='parenthesis'>(</span>X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>
</pre></div></div><div class='para' id='class.copy.ctor-8'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1628'>#</a></div><div id='class.copy.ctor-8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,move,implicitly_declared'></a></span>If the definition of a class <span class='texttt'>X</span> does not explicitly declare
a move constructor, a non-explicit one will be
implicitly declared as defaulted if and only if
<ul class='itemize'><li id='class.copy.ctor-8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-8.1'>(8.1)</a></div><span class='texttt'>X</span> does not have a user-declared copy constructor,</li><li id='class.copy.ctor-8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-8.2'>(8.2)</a></div><span class='texttt'>X</span> does not have a user-declared copy assignment operator,</li><li id='class.copy.ctor-8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-8.3'>(8.3)</a></div><span class='texttt'>X</span> does not have a user-declared move assignment operator, and</li><li id='class.copy.ctor-8.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-8.4'>(8.4)</a></div><span class='texttt'>X</span> does not have a user-declared destructor.</li></ul></div><div id='class.copy.ctor-8.note-1' class='note'>[&nbsp;<a class='note_link' href='#class.copy.ctor-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.copy.ctor-8.sentence-2' class='sentence'>When the move constructor is not implicitly declared or explicitly supplied,
expressions that otherwise would have invoked the move constructor may instead invoke
a copy constructor<a class='hidden_link' href='#class.copy.ctor-8.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='class.copy.ctor-9'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1653'>#</a></div><div id='class.copy.ctor-9.sentence-1' class='sentence'>The implicitly-declared move constructor for class <span class='texttt'>X</span> will have the form
<pre class='codeblock'>
X<span class='operator'>::</span>X<span class='parenthesis'>(</span>X<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>
</pre></div></div><div class='para' id='class.copy.ctor-10'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1659'>#</a></div><div id='class.copy.ctor-10.sentence-1' class='sentence'>An implicitly-declared copy/move constructor is an
inline public member of its class<a class='hidden_link' href='#class.copy.ctor-10.sentence-1'>.</a></div> <div id='class.copy.ctor-10.sentence-2' class='sentence'>A defaulted copy/&#x200b;move constructor for a class
  <span class='texttt'>X</span> is defined as deleted (<a href='dcl.fct.def.delete'>[dcl.fct.def.delete]</a>) if <span class='texttt'>X</span> has:
<ul class='itemize'><li id='class.copy.ctor-10.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-10.1'>(10.1)</a></div>a potentially constructed subobject type
  <span class='texttt'>M</span> (or array thereof) that cannot be copied/moved because
  overload resolution (<a href='over.match'>[over.match]</a>), as applied to find
  <span class='texttt'>M</span>'s
  corresponding constructor, results in an ambiguity or
  a function that is deleted or inaccessible from the
  defaulted constructor,</li><li id='class.copy.ctor-10.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-10.2'>(10.2)</a></div>a variant member whose corresponding constructor
  as selected by overload resolution is non-trivial,</li><li id='class.copy.ctor-10.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-10.3'>(10.3)</a></div>any potentially constructed subobject of a type
  with a destructor that is deleted or inaccessible from the defaulted
  constructor, or,</li><li id='class.copy.ctor-10.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-10.4'>(10.4)</a></div>for the copy constructor, a non-static data member of rvalue reference type<a class='hidden_link' href='#class.copy.ctor-10.sentence-2'>.</a></li></ul></div><div id='class.copy.ctor-10.note-1' class='note'>[&nbsp;<a class='note_link' href='#class.copy.ctor-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.copy.ctor-10.sentence-3' class='sentence'>A defaulted move constructor that is defined as deleted is ignored by overload
resolution (<a href='over.match'>[over.match]</a>, <a href='over.over'>[over.over]</a>)<a class='hidden_link' href='#class.copy.ctor-10.sentence-3'>.</a></div> <div id='class.copy.ctor-10.sentence-4' class='sentence'>Such a constructor would otherwise interfere with initialization from
an rvalue which can use the copy constructor instead<a class='hidden_link' href='#class.copy.ctor-10.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='class.copy.ctor-11'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1690'>#</a></div><div id='class.copy.ctor-11.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,copy,trivial'></a></span><span class='indexparent'><a class='index' id=':constructor,move,trivial'></a></span>A copy/move constructor for class
<span class='texttt'>X</span>
is
trivial
if it is not user-provided and if:
<ul class='itemize'><li id='class.copy.ctor-11.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-11.1'>(11.1)</a></div>class
<span class='texttt'>X</span>
has no virtual functions (<a href='class.virtual'>[class.virtual]</a>)
and no virtual base classes (<a href='class.mi'>[class.mi]</a>), and</li><li id='class.copy.ctor-11.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-11.2'>(11.2)</a></div>the constructor selected to copy/move each direct base class subobject is trivial, and</li><li id='class.copy.ctor-11.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-11.3'>(11.3)</a></div>for each non-static data member of
<span class='texttt'>X</span>
that is of class type (or array thereof),
the constructor selected to copy/move that member is trivial;</li></ul></div><div id='class.copy.ctor-11.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':constructor,move,non-trivial'></a></span>otherwise the copy/move constructor is
<a class='hidden_link' href='#def:constructor,copy,nontrivial' id='def:constructor,copy,nontrivial'><i >non-trivial</i></a><a class='hidden_link' href='#class.copy.ctor-11.sentence-2'>.</a></div></div><div class='para' id='class.copy.ctor-12'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1719'>#</a></div><div id='class.copy.ctor-12.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':constructor,copy,implicitly_defined'></a></span><span class='indexparent'><a class='index' id=':constructor,move,implicitly_defined'></a></span>A copy/move constructor
that is defaulted and not defined as deleted
is
<a class='hidden_link' href='#def:implicitly_defined' id='def:implicitly_defined'><i>implicitly defined</i></a>
when it is odr-used (<a href='basic.def.odr'>[basic.def.odr]</a>),
when it is needed for constant evaluation (<a href='expr.const'>[expr.const]</a>), or
when it is explicitly defaulted after its first declaration<a class='hidden_link' href='#class.copy.ctor-12.sentence-1'>.</a></div> <div id='class.copy.ctor-12.note-1' class='note'>[&nbsp;<a class='note_link' href='#class.copy.ctor-12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.copy.ctor-12.sentence-2' class='sentence'>The copy/move constructor is implicitly defined even if the implementation elided
its odr-use (<a href='basic.def.odr'>[basic.def.odr]</a>, <a href='class.temporary'>[class.temporary]</a>)<a class='hidden_link' href='#class.copy.ctor-12.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='class.copy.ctor-12.sentence-3' class='sentence'>
If the implicitly-defined constructor would satisfy the requirements of a
constexpr constructor (<a href='dcl.constexpr'>[dcl.constexpr]</a>), the implicitly-defined
constructor is <span class='texttt'><span class='keyword'>constexpr</span></span><a class='hidden_link' href='#class.copy.ctor-12.sentence-3'>.</a></div></div><div class='para' id='class.copy.ctor-13'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1737'>#</a></div><div id='class.copy.ctor-13.sentence-1' class='sentence'>Before the defaulted copy/move constructor for a class is
implicitly defined,
all non-user-provided copy/move constructors for its
potentially constructed subobjects
are implicitly defined<a class='hidden_link' href='#class.copy.ctor-13.sentence-1'>.</a></div> <div id='class.copy.ctor-13.note-1' class='note'>[&nbsp;<a class='note_link' href='#class.copy.ctor-13.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.copy.ctor-13.sentence-2' class='sentence'>An implicitly-declared copy/move constructor has an
implied exception specification (<a href='except.spec'>[except.spec]</a>)<a class='hidden_link' href='#class.copy.ctor-13.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='class.copy.ctor-14'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1748'>#</a></div><div id='class.copy.ctor-14.sentence-1' class='sentence'>The implicitly-defined copy/move constructor for a non-union class
<span class='texttt'>X</span>
performs a memberwise copy/move of its bases and members<a class='hidden_link' href='#class.copy.ctor-14.sentence-1'>.</a></div> <div id='class.copy.ctor-14.note-1' class='note'>[&nbsp;<a class='note_link' href='#class.copy.ctor-14.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.copy.ctor-14.sentence-2' class='sentence'>Default member initializers of non-static data members are ignored<a class='hidden_link' href='#class.copy.ctor-14.sentence-2'>.</a></div> <div id='class.copy.ctor-14.sentence-3' class='sentence'>See also the example in <a href='class.base.init'>[class.base.init]</a><a class='hidden_link' href='#class.copy.ctor-14.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='class.copy.ctor-14.sentence-4' class='sentence'>
The order of initialization is the same as the order of initialization of bases
and members in a user-defined constructor (see <a href='class.base.init'>[class.base.init]</a>)<a class='hidden_link' href='#class.copy.ctor-14.sentence-4'>.</a></div> <div id='class.copy.ctor-14.sentence-5' class='sentence'>Let <span class='texttt'>x</span> be either the parameter of the constructor or, for the move constructor, an
xvalue referring to the parameter<a class='hidden_link' href='#class.copy.ctor-14.sentence-5'>.</a></div> <div id='class.copy.ctor-14.sentence-6' class='sentence'>Each base or non-static data member
is copied/moved in the manner appropriate to its type:
<ul class='itemize'><li id='class.copy.ctor-14.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-14.1'>(14.1)</a></div>if the member is an array, each element is
direct-initialized with the corresponding subobject of <span class='texttt'>x</span>;</li><li id='class.copy.ctor-14.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-14.2'>(14.2)</a></div>if a member <span class='texttt'>m</span> has rvalue reference type <span class='texttt'>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>, it is direct-initialized with
<span class='texttt'><span class='keyword'>static_&shy;cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>x<span class='operator'>.</span>m<span class='parenthesis'>)</span></span>;</li><li id='class.copy.ctor-14.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.copy.ctor-14.3'>(14.3)</a></div>otherwise, the base or member is direct-initialized with the corresponding base or member of <span class='texttt'>x</span><a class='hidden_link' href='#class.copy.ctor-14.sentence-6'>.</a></li></ul></div><div id='class.copy.ctor-14.sentence-7' class='sentence'><span class='indexparent'><a class='index' id=':initialization,virtual_base_class'></a></span>Virtual base class subobjects shall be initialized only once by
the implicitly-defined copy/move constructor (see <a href='class.base.init'>[class.base.init]</a>)<a class='hidden_link' href='#class.copy.ctor-14.sentence-7'>.</a></div></div><div class='para' id='class.copy.ctor-15'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.ctor-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b6d9e27e75b10cfb0a5f0a99343cce3697042c21/source/classes.tex#L1778'>#</a></div><div id='class.copy.ctor-15.sentence-1' class='sentence'>The implicitly-defined copy/move constructor for a union
<span class='texttt'>X</span> copies the object representation (<a href='basic.types'>[basic.types]</a>) of <span class='texttt'>X</span><a class='hidden_link' href='#class.copy.ctor-15.sentence-1'>.</a></div> <div id='class.copy.ctor-15.sentence-2' class='sentence'>For each object nested within (<a href='intro.object'>[intro.object]</a>)
the object that is the source of the copy,
a corresponding object <span class='math'><span class='mathalpha'>o</span></span> nested within the destination
is identified (if the object is a subobject) or created (otherwise),
and the lifetime of <span class='math'><span class='mathalpha'>o</span></span> begins before the copy is performed<a class='hidden_link' href='#class.copy.ctor-15.sentence-2'>.</a></div> 
</div><div class='footnote' id='footnote-103'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-103'>103)</a></div><div id='footnote-103.sentence-1' class='sentence'>This implies that the reference parameter of the
implicitly-declared copy constructor
cannot bind to a
<span class='texttt'><span class='keyword'>volatile</span></span>
lvalue; see <a href='diff.class'>[diff.class]</a><a class='hidden_link' href='#footnote-103.sentence-1'>.</a></div> <a href='#footnoteref-103'>⮥</a></div></div></div></body></html>