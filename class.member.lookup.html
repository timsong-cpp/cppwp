<!DOCTYPE html><html lang='en'><head><title>[class.member.lookup]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>6.5</a> Name lookup <a class='abbr_ref' href='basic.lookup#class.member.lookup'>[basic.lookup]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>6.5.2</a> Member name lookup <a class='abbr_ref'>[class.member.lookup]</a></h3><div class='texpara'><a class='index' id=':lookup,member_name'></a><a class='index' id=':ambiguity,base_class_member'></a><a class='index' id=':ambiguity,member_access'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/basic.tex#L1559'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':scope,search'></a>A <a class='hidden_link' href='#def:search' title='6.5.2&emsp;Member name lookup&emsp;[class.member.lookup]'><span id='def:search'><i >search</i></span></a> in a scope <span class='math'><span class='mathalpha'>X</span></span> for a name <span class='math'><span class='mathalpha'>M</span></span> from a program point <span class='math'><span class='mathalpha'>P</span></span>
is a single search in <span class='math'><span class='mathalpha'>X</span></span> for <span class='math'><span class='mathalpha'>M</span></span> from <span class='math'><span class='mathalpha'>P</span></span>
unless <span class='math'><span class='mathalpha'>X</span></span> is the scope of a class or class template <span class='math'><span class='mathalpha'>T</span></span>, in which case the
following steps define the result of the search<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='1.sentence-2' class='sentence'>The result differs only
if <span class='math'><span class='mathalpha'>M</span></span> is a <a href='class.conv.fct#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id'><span class='textsf'><i >conversion-function-id</i></span></span></a> or
if the single search would find nothing<a class='hidden_link' href='#1.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/basic.tex#L1571'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:lookup_set' title='6.5.2&emsp;Member name lookup&emsp;[class.member.lookup]'><span id='def:lookup_set'><i >lookup set</i></span></a> for a name <span class='math'><span class='mathalpha'>N</span></span> in a class or class template <span class='math'><span class='mathalpha'>C</span></span>, called <span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>N</span>,<span class='mathalpha'>C</span>)</span>,
consists of two component sets:
the <a class='hidden_link' href='#def:declaration_set' id='def:declaration_set'><i>declaration set</i></a>, a set of members named <span class='math'><span class='mathalpha'>N</span></span>; and
the <a class='hidden_link' href='#def:subobject_set' id='def:subobject_set'><i>subobject set</i></a>,
a set of subobjects where declarations of these members were found
(possibly via <a href='namespace.udecl#nt:using-declaration' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declaration'><span class='textsf'><i >using-declaration</i></span></span></a><i >s</i>)<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>In the declaration set, type declarations (including injected-class-names)
are replaced by the types they designate<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'><span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>N</span>,<span class='mathalpha'>C</span>)</span> is calculated as follows:</div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/basic.tex#L1581'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>The declaration set is the result of
a single search in the scope of <span class='math'><span class='mathalpha'>C</span></span> for <span class='math'><span class='mathalpha'>N</span></span>
from immediately after the <a href='class.pre#nt:class-specifier' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-specifier'><span class='textsf'><i >class-specifier</i></span></span></a> of <span class='math'><span class='mathalpha'>C</span></span>
if <span class='math'><span class='mathalpha'>P</span></span> is in a complete-class context of <span class='math'><span class='mathalpha'>C</span></span> or
from <span class='math'><span class='mathalpha'>P</span></span> otherwise<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>If the resulting declaration set is not empty, the subobject set
contains <span class='math'><span class='mathalpha'>C</span></span> itself, and calculation is complete<a class='hidden_link' href='#3.sentence-2'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/basic.tex#L1590'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>Otherwise (i.e., <span class='math'><span class='mathalpha'>C</span></span> does not contain a declaration of <span class='math'><span class='mathalpha'>N</span></span>
or the resulting declaration set is empty), <span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>N</span>,<span class='mathalpha'>C</span>)</span> is initially empty<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>Calculate the lookup set for <span class='math'><span class='mathalpha'>N</span></span>
in each direct non-dependent (<a href='temp.dep.type' title='13.8.3.2&emsp;Dependent types'>[temp.<span class='shy'></span>dep.<span class='shy'></span>type]</a>) base class subobject <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>, and
merge each such lookup set <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> in turn into <span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>N</span>,<span class='mathalpha'>C</span>)</span><a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='4.sentence-3' class='sentence'>If <span class='math'><span class='mathalpha'>C</span></span> is incomplete,
only base classes whose <a href='class.derived.general#nt:base-specifier' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:base-specifier'><span class='textsf'><i >base-specifier</i></span></span></a> appears before <span class='math'><span class='mathalpha'>P</span></span>
are considered<a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='4.sentence-4' class='sentence'>If <span class='math'><span class='mathalpha'>C</span></span> is an instantiated class, its base classes are not dependent<a class='hidden_link' href='#4.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/basic.tex#L1603'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>The following steps define the result of merging lookup set <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>
into the intermediate <span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>N</span>,<span class='mathalpha'>C</span>)</span>:</div></div><div class='texpara'><ul class='itemize'><li id='5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.1'>(5.1)</a></div><div class='texpara'><div id='5.1.sentence-1' class='sentence'>If each of the subobject members of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a base class
subobject of at least one of the subobject members of <span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>N</span>,<span class='mathalpha'>C</span>)</span>, or if
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is empty, <span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>N</span>,<span class='mathalpha'>C</span>)</span> is unchanged and the merge is complete<a class='hidden_link' href='#5.1.sentence-1'>.</a></div> <div id='5.1.sentence-2' class='sentence'>Conversely, if each of the subobject members of <span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>N</span>,<span class='mathalpha'>C</span>)</span> is a base class
subobject of at least one of the subobject members of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>, or if
<span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>N</span>,<span class='mathalpha'>C</span>)</span> is empty, the new <span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>N</span>,<span class='mathalpha'>C</span>)</span> is a copy of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#5.1.sentence-2'>.</a></div></div></li><li id='5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.2'>(5.2)</a></div><div class='texpara'><div id='5.2.sentence-1' class='sentence'>Otherwise, if the declaration sets of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> and <span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>N</span>,<span class='mathalpha'>C</span>)</span>
differ, the merge is ambiguous: the new <span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>N</span>,<span class='mathalpha'>C</span>)</span> is a lookup set with an
invalid declaration set and the union of the subobject sets<a class='hidden_link' href='#5.2.sentence-1'>.</a></div> <div id='5.2.sentence-2' class='sentence'>In
subsequent merges, an invalid declaration set is considered different
from any other<a class='hidden_link' href='#5.2.sentence-2'>.</a></div></div></li><li id='5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.3'>(5.3)</a></div><div class='texpara'><div id='5.3.sentence-1' class='sentence'>Otherwise, the new <span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>N</span>,<span class='mathalpha'>C</span>)</span> is a lookup set with the shared set of
declarations and the union of the subobject sets<a class='hidden_link' href='#5.3.sentence-1'>.</a></div></div></li></ul></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/basic.tex#L1625'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>The result of the search is the declaration set of <span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>M</span>,<span class='mathalpha'>T</span>)</span><a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>If it is an invalid set, the program is ill-formed<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>If it differs from the result of a search in <span class='math'><span class='mathalpha'>T</span></span> for <span class='math'><span class='mathalpha'>M</span></span>
in a complete-class context (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>) of <span class='math'><span class='mathalpha'>T</span></span>,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>int</span> x; <span class='curlybracket'>}</span>;                    <span class='comment'>// S(x,A) = { { <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;x</span> }, { <span class='tcode_in_codeblock'>A</span> } }</span>
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='keyword'>float</span> x; <span class='curlybracket'>}</span>;                  <span class='comment'>// S(x,B) = { { <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;x</span> }, { <span class='tcode_in_codeblock'>B</span> } }</span>
<span class='keyword'>struct</span> C<span class='operator'>:</span> <span class='keyword'>public</span> A, <span class='keyword'>public</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;       <span class='comment'>// S(x,C) = { invalid, { <span class='tcode_in_codeblock'>A</span> in <span class='tcode_in_codeblock'>C</span>, <span class='tcode_in_codeblock'>B</span> in <span class='tcode_in_codeblock'>C</span> } }</span>
<span class='keyword'>struct</span> D<span class='operator'>:</span> <span class='keyword'>public</span> <span class='keyword'>virtual</span> C <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;         <span class='comment'>// S(x,D) = S(x,C)</span>
<span class='keyword'>struct</span> E<span class='operator'>:</span> <span class='keyword'>public</span> <span class='keyword'>virtual</span> C <span class='curlybracket'>{</span> <span class='keyword'>char</span> x; <span class='curlybracket'>}</span>; <span class='comment'>// S(x,E) = { { <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;x</span> }, { <span class='tcode_in_codeblock'>E</span> } }</span>
<span class='keyword'>struct</span> F<span class='operator'>:</span> <span class='keyword'>public</span> D, <span class='keyword'>public</span> E <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;       <span class='comment'>// S(x,F) = S(x,E)</span>
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  F f;
  f<span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>0</span>;                              <span class='comment'>// OK, lookup finds <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;x</span></span>
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='6.sentence-4' class='sentence'><span class='math'><span class='mathalpha'>S</span>(<span class='texttt'>x</span>,<span class='texttt'>F</span>)</span> is unambiguous because the <span class='texttt'>A</span> and <span class='texttt'>B</span> base
class subobjects of <span class='texttt'>D</span> are also base class subobjects of <span class='texttt'>E</span>, so
<span class='math'><span class='mathalpha'>S</span>(<span class='texttt'>x</span>,<span class='texttt'>D</span>)</span> is discarded in the first merge step<a class='hidden_link' href='#6.sentence-4'>.</a></div> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/basic.tex#L1650'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>If <span class='math'><span class='mathalpha'>M</span></span> is a non-dependent <a href='class.conv.fct#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id_'><span class='textsf'><i >conversion-function-id</i></span></span></a>,
conversion function templates that are members of <span class='math'><span class='mathalpha'>T</span></span> are considered<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>For each such template <span class='math'><span class='mathalpha'>F</span></span>, the lookup set <span class='math'><span class='mathalpha'>S</span>(<span class='mathalpha'>t</span>,<span class='mathalpha'>T</span>)</span> is constructed,
considering a function template declaration to have the name <span class='math'><span class='mathalpha'>t</span></span>
only if it corresponds to a declaration of <span class='math'><span class='mathalpha'>F</span></span> (<a href='basic.scope.scope' title='6.4.1&emsp;General'>[basic.<span class='shy'></span>scope.<span class='shy'></span>scope]</a>)<a class='hidden_link' href='#7.sentence-2'>.</a></div> <div id='7.sentence-3' class='sentence'>The members of the declaration set of each such lookup set,
which shall not be an invalid set, are included in the result<a class='hidden_link' href='#7.sentence-3'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='7.sentence-4' class='sentence'>Overload resolution will discard those
that cannot convert to the type specified by <span class='math'><span class='mathalpha'>M</span></span> (<a href='temp.over' title='13.10.4&emsp;Overload resolution'>[temp.<span class='shy'></span>over]</a>)<a class='hidden_link' href='#7.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/basic.tex#L1663'>#</a></div><div class='texpara'><div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>:&ensp;<div id='8.sentence-1' class='sentence'>A static member, a nested type or an enumerator defined in a base class
<span class='texttt'>T</span> can unambiguously be found even if an object has more than one
base class subobject of type <span class='texttt'>T</span><a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>Two base class subobjects share
the non-static member subobjects of their common virtual base classes<a class='hidden_link' href='#8.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> V <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> v;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a;
  <span class='keyword'>static</span> <span class='keyword'>int</span> s;
  <span class='keyword'>enum</span> <span class='curlybracket'>{</span> e <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> A, <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C <span class='operator'>:</span> A, <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D <span class='operator'>:</span> B, C <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span>D<span class='operator'>*</span> pd<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  pd<span class='operator'>-</span><span class='anglebracket'>&gt;</span>v<span class='operator'>+</span><span class='operator'>+</span>;          <span class='comment'>// OK, only one <span class='tcode_in_codeblock'>v</span> (virtual)</span>
  pd<span class='operator'>-</span><span class='anglebracket'>&gt;</span>s<span class='operator'>+</span><span class='operator'>+</span>;          <span class='comment'>// OK, only one <span class='tcode_in_codeblock'>s</span> (static)</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> pd<span class='operator'>-</span><span class='anglebracket'>&gt;</span>e;    <span class='comment'>// OK, only one <span class='tcode_in_codeblock'>e</span> (enumerator)</span>
  pd<span class='operator'>-</span><span class='anglebracket'>&gt;</span>a<span class='operator'>+</span><span class='operator'>+</span>;          <span class='comment'>// error: ambiguous: two <span class='tcode_in_codeblock'>a</span>s in <span class='tcode_in_codeblock'>D</span></span>
<span class='curlybracket'>}</span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/basic.tex#L1693'>#</a></div><div class='texpara'><div id='note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-5'>5</a></i>:&ensp;<div id='9.sentence-1' class='sentence'><a class='index' id=':dominance,virtual_base_class'></a>When virtual base classes are used, a hidden declaration can be reached
along a path through the subobject lattice that does not pass through
the hiding declaration<a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='9.sentence-2' class='sentence'>This is not an ambiguity<a class='hidden_link' href='#9.sentence-2'>.</a></div> <div id='9.sentence-3' class='sentence'>The identical use with
non-virtual base classes is an ambiguity; in that case there is no
unique instance of the name that hides all the others<a class='hidden_link' href='#9.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div> <div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> V <span class='curlybracket'>{</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='keyword'>int</span> x; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> W <span class='curlybracket'>{</span> <span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='keyword'>int</span> y; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> <span class='keyword'>virtual</span> V, W <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='keyword'>int</span> x;
  <span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='keyword'>int</span> y;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C <span class='operator'>:</span> <span class='keyword'>virtual</span> V, W <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> D <span class='operator'>:</span> B, C <span class='curlybracket'>{</span> <span class='keyword'>void</span> glorp<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div class='figure' id='fig:class.lookup'><svg width="386pt" height="140pt"
 viewBox="0.00 0.00 386.00 140.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 136)">
<title>virt</title>
<!-- W1 -->
<g class="node">
<title>W1</title>
<text text-anchor="middle" x="27" y="-119.2" font-family="Noto Sans Mono" font-size="11.00">W</text>
</g>
<!-- V -->
<g class="node">
<title>V</title>
<text text-anchor="middle" x="189" y="-119.2" font-family="Noto Sans Mono" font-size="11.00">V</text>
</g>
<!-- W2 -->
<g class="node">
<title>W2</title>
<text text-anchor="middle" x="351" y="-119.2" font-family="Noto Sans Mono" font-size="11.00">W</text>
</g>
<!-- B -->
<g class="node">
<title>B</title>
<text text-anchor="middle" x="108" y="-63.2" font-family="Noto Sans Mono" font-size="11.00">B</text>
</g>
<!-- B&#45;&gt;W1 -->
<g class="edge">
<title>B&#45;&gt;W1</title>
<path fill="none" stroke="black" d="M94.26,-76.16C81.85,-84.43 63.37,-96.75 48.92,-106.38"/>
<polygon fill="black" stroke="black" points="46.92,-103.52 40.54,-111.97 50.8,-109.34 46.92,-103.52"/>
</g>
<!-- B&#45;&gt;V -->
<g class="edge">
<title>B&#45;&gt;V</title>
<path fill="none" stroke="black" d="M121.74,-76.16C134.15,-84.43 152.63,-96.75 167.08,-106.38"/>
<polygon fill="black" stroke="black" points="165.2,-109.34 175.46,-111.97 169.08,-103.52 165.2,-109.34"/>
</g>
<!-- C -->
<g class="node">
<title>C</title>
<text text-anchor="middle" x="270" y="-63.2" font-family="Noto Sans Mono" font-size="11.00">C</text>
</g>
<!-- C&#45;&gt;V -->
<g class="edge">
<title>C&#45;&gt;V</title>
<path fill="none" stroke="black" d="M256.26,-76.16C243.85,-84.43 225.37,-96.75 210.92,-106.38"/>
<polygon fill="black" stroke="black" points="208.92,-103.52 202.54,-111.97 212.8,-109.34 208.92,-103.52"/>
</g>
<!-- C&#45;&gt;W2 -->
<g class="edge">
<title>C&#45;&gt;W2</title>
<path fill="none" stroke="black" d="M283.74,-76.16C296.15,-84.43 314.63,-96.75 329.08,-106.38"/>
<polygon fill="black" stroke="black" points="327.2,-109.34 337.46,-111.97 331.08,-103.52 327.2,-109.34"/>
</g>
<!-- D -->
<g class="node">
<title>D</title>
<text text-anchor="middle" x="189" y="-7.2" font-family="Noto Sans Mono" font-size="11.00">D</text>
</g>
<!-- D&#45;&gt;B -->
<g class="edge">
<title>D&#45;&gt;B</title>
<path fill="none" stroke="black" d="M175.26,-20.16C162.85,-28.43 144.37,-40.75 129.92,-50.38"/>
<polygon fill="black" stroke="black" points="127.92,-47.52 121.54,-55.97 131.8,-53.34 127.92,-47.52"/>
</g>
<!-- D&#45;&gt;C -->
<g class="edge">
<title>D&#45;&gt;C</title>
<path fill="none" stroke="black" d="M202.74,-20.16C215.15,-28.43 233.63,-40.75 248.08,-50.38"/>
<polygon fill="black" stroke="black" points="246.2,-53.34 256.46,-55.97 250.08,-47.52 246.2,-53.34"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:class.lookup'>1</a>: Name lookup&emsp;&ensp;<a href='./fig:class.lookup'>[fig:class.lookup]</a></div></div><div class='texpara'><div id='9.sentence-4' class='sentence'>As illustrated in Figure <a href='#fig:class.lookup'>1</a>,
the names declared in <span class='texttt'>V</span> and the left-hand instance of <span class='texttt'>W</span>
are hidden by those in <span class='texttt'>B</span>, but the names declared in the
right-hand instance of <span class='texttt'>W</span> are not hidden at all<a class='hidden_link' href='#9.sentence-4'>.</a></div> <span class='codeblock'><span class='keyword'>void</span> D<span class='operator'>::</span>glorp<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  x<span class='operator'>+</span><span class='operator'>+</span>;              <span class='comment'>// OK, <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;x</span> hides <span class='tcode_in_codeblock'>V&#x200b;::&#x200b;x</span></span>
  f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// OK, <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f()</span> hides <span class='tcode_in_codeblock'>V&#x200b;::&#x200b;f()</span></span>
  y<span class='operator'>+</span><span class='operator'>+</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;y</span> and <span class='tcode_in_codeblock'>C</span>'s <span class='tcode_in_codeblock'>W&#x200b;::&#x200b;y</span></span>
  g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;g()</span> and <span class='tcode_in_codeblock'>C</span>'s <span class='tcode_in_codeblock'>W&#x200b;::&#x200b;g()</span></span>
<span class='curlybracket'>}</span>
</span> â€”&nbsp;<i>end example</i>]</div></div> <a class='index' id=':ambiguity,class_conversion'></a></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/basic.tex#L1736'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'>An explicit or implicit conversion from a pointer to or
an expression designating an object
of a
derived class to a pointer or reference to one of its base classes shall
unambiguously refer to a unique object representing the base class<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> A, <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C <span class='operator'>:</span> A, <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D <span class='operator'>:</span> B, C <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  D d;
  B<span class='operator'>*</span> pb <span class='operator'>=</span> <span class='operator'>&amp;</span>d;
  A<span class='operator'>*</span> pa <span class='operator'>=</span> <span class='operator'>&amp;</span>d;       <span class='comment'>// error: ambiguous: <span class='tcode_in_codeblock'>C</span>'s <span class='tcode_in_codeblock'>A</span> or <span class='tcode_in_codeblock'>B</span>'s <span class='tcode_in_codeblock'>A</span>?</span>
  V<span class='operator'>*</span> pv <span class='operator'>=</span> <span class='operator'>&amp;</span>d;       <span class='comment'>// OK, only one <span class='tcode_in_codeblock'>V</span> subobject</span>
<span class='curlybracket'>}</span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/basic.tex#L1759'>#</a></div><div class='texpara'><div id='note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-6'>6</a></i>:&ensp;<div id='11.sentence-1' class='sentence'>Even if the result of name lookup is unambiguous, use of a name found in
multiple subobjects might still be
ambiguous (<a href='conv.mem' title='7.3.13&emsp;Pointer-to-member conversions'>[conv.<span class='shy'></span>mem]</a>, <a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>, <a href='class.access.base' title='11.8.3&emsp;Accessibility of base classes and base class members'>[class.<span class='shy'></span>access.<span class='shy'></span>base]</a>)<a class='hidden_link' href='#11.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div> <div id='example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> B1 <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>static</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  <span class='keyword'>int</span> i;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B2 <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> I1<span class='operator'>:</span> B1 <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> I2<span class='operator'>:</span> B1 <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> D<span class='operator'>:</span> I1, I2, B2 <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> B1<span class='operator'>::</span>f;
  <span class='keyword'>using</span> B2<span class='operator'>::</span>f;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                        <span class='comment'>// Ambiguous conversion of <span id=':this'><span class='tcode_in_codeblock'>this</span></span></span>
    f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                       <span class='comment'>// Unambiguous (static)</span>
    f<span class='parenthesis'>(</span><span class='literal'>0.0</span><span class='parenthesis'>)</span>;                     <span class='comment'>// Unambiguous (only one <span class='tcode_in_codeblock'>B2</span>)</span>
    <span class='keyword'>int</span> B1<span class='operator'>::</span><span class='operator'>*</span> mpB1 <span class='operator'>=</span> <span class='operator'>&amp;</span>D<span class='operator'>::</span>i;     <span class='comment'>// Unambiguous</span>
    <span class='keyword'>int</span> D<span class='operator'>::</span><span class='operator'>*</span> mpD <span class='operator'>=</span> <span class='operator'>&amp;</span>D<span class='operator'>::</span>i;       <span class='comment'>// Ambiguous conversion</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>