<!DOCTYPE html><html lang='en'><head><title>[class.member.lookup]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>11</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>11.8</a> Member name lookup <a class='abbr_ref'>[class.member.lookup]</a></h2><span class='indexparent'><a class='index' id=':lookup,member_name'></a></span><span class='indexparent'><a class='index' id=':ambiguity,base_class_member'></a></span><span class='indexparent'><a class='index' id=':ambiguity,member_access'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4f2f5811d4d4f45679e0a09e2cf105f9535db8c6/source/classes.tex#L4225'>#</a></div><div id='1.sentence-1' class='sentence'>Member name lookup determines the meaning of a name
(<a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a>) in a class scope (<a href='basic.scope.class'>[basic.scope.class]</a>)<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>Name lookup can result in an ambiguity, in which case the
program is ill-formed<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>For an <a class='grammarterm' href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a>, name lookup
begins in the class scope of <span class='texttt'><span class='keyword'>this</span></span>; for a
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a>, name lookup begins in the scope of the
<a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a><a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>Name lookup takes place before access
control (<a href='basic.lookup'>[basic.lookup]</a>, <a href='class.access'>[class.access]</a>)<a class='hidden_link' href='#1.sentence-4'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4f2f5811d4d4f45679e0a09e2cf105f9535db8c6/source/classes.tex#L4235'>#</a></div><div id='2.sentence-1' class='sentence'>The following steps define the result of name lookup for a member name
<span class='texttt'>f</span> in a class scope <span class='texttt'>C</span><a class='hidden_link' href='#2.sentence-1'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4f2f5811d4d4f45679e0a09e2cf105f9535db8c6/source/classes.tex#L4239'>#</a></div><div id='3.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:lookup_set' id='def:lookup_set'><i>lookup set</i></a> for <span class='texttt'>f</span> in <span class='texttt'>C</span>, called <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>,
consists of two component sets: the <a class='hidden_link' href='#def:declaration_set' id='def:declaration_set'><i>declaration set</i></a>, a set of
members named <span class='texttt'>f</span>; and the <a class='hidden_link' href='#def:subobject_set' id='def:subobject_set'><i>subobject set</i></a>, a set of
subobjects where declarations of these members (possibly including
<a class='grammarterm' href='namespace.udecl#nt:using-declaration'>using-declaration</a><span class='textit'>s</span>) were found<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>In the declaration set,
<a class='grammarterm' href='namespace.udecl#nt:using-declaration'>using-declaration</a><span class='textit'>s</span> are replaced by the
set of designated members that are not hidden or overridden by members of the
derived class (<a href='namespace.udecl'>[namespace.udecl]</a>),
and type declarations (including injected-class-names) are
replaced by the types they designate<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is calculated as follows:</div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4f2f5811d4d4f45679e0a09e2cf105f9535db8c6/source/classes.tex#L4251'>#</a></div><div id='4.sentence-1' class='sentence'>If <span class='texttt'>C</span> contains a declaration of the name <span class='texttt'>f</span>, the
declaration set contains every declaration of <span class='texttt'>f</span> declared in
<span class='texttt'>C</span> that satisfies the requirements of the language construct in
which the lookup occurs<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.note-1' class='note'>[&nbsp;<a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-2' class='sentence'>Looking up a name in an
<a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a> (<a href='basic.lookup.elab'>[basic.lookup.elab]</a>) or
<a class='grammarterm' href='class.derived#nt:base-specifier'>base-specifier</a>, for instance,
ignores all non-type declarations, while looking up a name in a
<a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a> (<a href='basic.lookup.qual'>[basic.lookup.qual]</a>) ignores
function, variable, and enumerator declarations<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>As another example,
looking up a name in a
<a class='grammarterm' href='namespace.udecl#nt:using-declaration'>using-declaration</a> includes the
declaration of a class or enumeration that would ordinarily be hidden by
another declaration of that name in the same scope<a class='hidden_link' href='#4.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='4.sentence-4' class='sentence'>
If the resulting declaration set is not empty, the subobject set
contains <span class='texttt'>C</span> itself, and calculation is complete<a class='hidden_link' href='#4.sentence-4'>.</a></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4f2f5811d4d4f45679e0a09e2cf105f9535db8c6/source/classes.tex#L4271'>#</a></div><div id='5.sentence-1' class='sentence'>Otherwise (i.e., <span class='texttt'>C</span> does not contain a declaration of <span class='texttt'>f</span>
or the resulting declaration set is empty), <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is initially empty<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>If <span class='texttt'>C</span> has base classes, calculate the lookup set for <span class='texttt'>f</span> in
each direct base class subobject <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>, and merge each such lookup set
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> in turn into <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#5.sentence-2'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4f2f5811d4d4f45679e0a09e2cf105f9535db8c6/source/classes.tex#L4278'>#</a></div><div id='6.sentence-1' class='sentence'>The following steps define the result of merging lookup set <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>
into the intermediate <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>:</div><ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.1'>(6.1)</a></div><div id='6.1.sentence-1' class='sentence'>If each of the subobject members of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a base class
subobject of at least one of the subobject members of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>, or if
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is empty, <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is unchanged and the merge is complete<a class='hidden_link' href='#6.1.sentence-1'>.</a></div> <div id='6.1.sentence-2' class='sentence'>Conversely, if each of the subobject members of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a base class
subobject of at least one of the subobject members of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>, or if
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is empty, the new <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a copy of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#6.1.sentence-2'>.</a></div></li><li id='6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.2'>(6.2)</a></div><div id='6.2.sentence-1' class='sentence'>Otherwise, if the declaration sets of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>
differ, the merge is ambiguous: the new <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a lookup set with an
invalid declaration set and the union of the subobject sets<a class='hidden_link' href='#6.2.sentence-1'>.</a></div> <div id='6.2.sentence-2' class='sentence'>In
subsequent merges, an invalid declaration set is considered different
from any other<a class='hidden_link' href='#6.2.sentence-2'>.</a></div></li><li id='6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#6.3'>(6.3)</a></div><div id='6.3.sentence-1' class='sentence'>Otherwise, the new <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is a lookup set with the shared set of
declarations and the union of the subobject sets<a class='hidden_link' href='#6.3.sentence-1'>.</a></div></li></ul></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4f2f5811d4d4f45679e0a09e2cf105f9535db8c6/source/classes.tex#L4300'>#</a></div><div id='7.sentence-1' class='sentence'>The result of name lookup for <span class='texttt'>f</span> in <span class='texttt'>C</span> is the declaration
set of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.519em; padding-right: 0.06em;">f</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>If it is an invalid set, the program is ill-formed<a class='hidden_link' href='#7.sentence-2'>.</a></div> <div id='7.example-1' class='example'>[&nbsp;<a class='example_link' href='#7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>int</span> x; <span class='curlybracket'>}</span>;                    <span class='comment'>// S(x,A) = { { <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;x</span> }, { <span class='tcode_in_codeblock'>A</span> } }</span>
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='keyword'>float</span> x; <span class='curlybracket'>}</span>;                  <span class='comment'>// S(x,B) = { { <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;x</span> }, { <span class='tcode_in_codeblock'>B</span> } }</span>
<span class='keyword'>struct</span> C<span class='operator'>:</span> <span class='keyword'>public</span> A, <span class='keyword'>public</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;       <span class='comment'>// S(x,C) = { invalid, { <span class='tcode_in_codeblock'>A</span> in <span class='tcode_in_codeblock'>C</span>, <span class='tcode_in_codeblock'>B</span> in <span class='tcode_in_codeblock'>C</span> } }</span>
<span class='keyword'>struct</span> D<span class='operator'>:</span> <span class='keyword'>public</span> <span class='keyword'>virtual</span> C <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;         <span class='comment'>// S(x,D) = S(x,C)</span>
<span class='keyword'>struct</span> E<span class='operator'>:</span> <span class='keyword'>public</span> <span class='keyword'>virtual</span> C <span class='curlybracket'>{</span> <span class='keyword'>char</span> x; <span class='curlybracket'>}</span>; <span class='comment'>// S(x,E) = { { <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;x</span> }, { <span class='tcode_in_codeblock'>E</span> } }</span>
<span class='keyword'>struct</span> F<span class='operator'>:</span> <span class='keyword'>public</span> D, <span class='keyword'>public</span> E <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;       <span class='comment'>// S(x,F) = S(x,E)</span>
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  F f;
  f<span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>0</span>;                              <span class='comment'>// OK, lookup finds <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;x</span></span>
<span class='curlybracket'>}</span>
</pre><div id='7.sentence-3' class='sentence'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">x</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.106em;">F</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is unambiguous because the <span class='texttt'>A</span> and <span class='texttt'>B</span> base
class subobjects of <span class='texttt'>D</span> are also base class subobjects of <span class='texttt'>E</span>, so
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">x</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mi MJXc-space1"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">D</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is discarded in the first merge step<a class='hidden_link' href='#7.sentence-3'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4f2f5811d4d4f45679e0a09e2cf105f9535db8c6/source/classes.tex#L4322'>#</a></div><div id='8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':access_control,overload_resolution_and'></a></span>If the name of an overloaded function is unambiguously found,
overload resolution (<a href='over.match'>[over.match]</a>) also takes place before access
control<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':overloading,resolution,scoping_ambiguity'></a></span>Ambiguities can often be resolved by qualifying a name with its class name<a class='hidden_link' href='#8.sentence-2'>.</a></div> <div id='8.example-1' class='example'>[&nbsp;<a class='example_link' href='#8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

</pre>
<pre class='codeblock'>
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

</pre>
<pre class='codeblock'>
<span class='keyword'>struct</span> C <span class='operator'>:</span> A, B <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> A<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>+</span> B<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4f2f5811d4d4f45679e0a09e2cf105f9535db8c6/source/classes.tex#L4349'>#</a></div><div id='9.note-1' class='note'>[&nbsp;<a class='note_link' href='#9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='9.sentence-1' class='sentence'>A static member, a nested type or an enumerator defined in a base class
<span class='texttt'>T</span> can unambiguously be found even if an object has more than one
base class subobject of type <span class='texttt'>T</span><a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='9.sentence-2' class='sentence'>Two base class subobjects share
the non-static member subobjects of their common virtual base classes<a class='hidden_link' href='#9.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='9.example-1' class='example'>[&nbsp;<a class='example_link' href='#9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> V <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> v;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a;
  <span class='keyword'>static</span> <span class='keyword'>int</span>   s;
  <span class='keyword'>enum</span> <span class='curlybracket'>{</span> e <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> A, <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C <span class='operator'>:</span> A, <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D <span class='operator'>:</span> B, C <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span>D<span class='operator'>*</span> pd<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  pd<span class='operator'>-</span><span class='anglebracket'>&gt;</span>v<span class='operator'>+</span><span class='operator'>+</span>;          <span class='comment'>// OK: only one <span class='tcode_in_codeblock'>v</span> (virtual)</span>
  pd<span class='operator'>-</span><span class='anglebracket'>&gt;</span>s<span class='operator'>+</span><span class='operator'>+</span>;          <span class='comment'>// OK: only one <span class='tcode_in_codeblock'>s</span> (static)</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> pd<span class='operator'>-</span><span class='anglebracket'>&gt;</span>e;    <span class='comment'>// OK: only one <span class='tcode_in_codeblock'>e</span> (enumerator)</span>
  pd<span class='operator'>-</span><span class='anglebracket'>&gt;</span>a<span class='operator'>+</span><span class='operator'>+</span>;          <span class='comment'>// error: ambiguous: two <span class='tcode_in_codeblock'>a</span>s in <span class='tcode_in_codeblock'>D</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4f2f5811d4d4f45679e0a09e2cf105f9535db8c6/source/classes.tex#L4379'>#</a></div><div id='10.note-1' class='note'>[&nbsp;<a class='note_link' href='#10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='10.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':dominance,virtual_base_class'></a></span>When virtual base classes are used, a hidden declaration can be reached
along a path through the subobject lattice that does not pass through
the hiding declaration<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>This is not an ambiguity<a class='hidden_link' href='#10.sentence-2'>.</a></div> <div id='10.sentence-3' class='sentence'>The identical use with
non-virtual base classes is an ambiguity; in that case there is no
unique instance of the name that hides all the others<a class='hidden_link' href='#10.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='10.example-1' class='example'>[&nbsp;<a class='example_link' href='#10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> V <span class='curlybracket'>{</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='keyword'>int</span> x; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> W <span class='curlybracket'>{</span> <span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='keyword'>int</span> y; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> <span class='keyword'>virtual</span> V, W <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='keyword'>int</span> x;
  <span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='keyword'>int</span> y;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C <span class='operator'>:</span> <span class='keyword'>virtual</span> V, W <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> D <span class='operator'>:</span> B, C <span class='curlybracket'>{</span> <span class='keyword'>void</span> glorp<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
</pre><div class='figure' id='fig:class.lookup'><svg width="386pt" height="146pt"
 viewBox="0.00 0.00 386.00 146.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 142)">
<title>virt</title>
<!-- W1 -->
<g class="node">
<title>W1</title>
<text text-anchor="middle" x="27" y="-123.6" font-family="Times,serif" font-size="13.00" fill="#000000">W</text>
</g>
<!-- V -->
<g class="node">
<title>V</title>
<text text-anchor="middle" x="189" y="-123.6" font-family="Times,serif" font-size="13.00" fill="#000000">V</text>
</g>
<!-- W2 -->
<g class="node">
<title>W2</title>
<text text-anchor="middle" x="351" y="-123.6" font-family="Times,serif" font-size="13.00" fill="#000000">W</text>
</g>
<!-- B -->
<g class="node">
<title>B</title>
<text text-anchor="middle" x="108" y="-65.6" font-family="Times,serif" font-size="13.00" fill="#000000">B</text>
</g>
<!-- B&#45;&gt;W1 -->
<g class="edge">
<title>B&#45;&gt;W1</title>
<path fill="none" stroke="#000000" d="M92.3824,-80.183C80.6164,-88.608 64.2759,-100.3086 50.8744,-109.9048"/>
<polygon fill="#000000" stroke="#000000" points="48.6626,-107.1837 42.5697,-115.8513 52.7379,-112.8751 48.6626,-107.1837"/>
</g>
<!-- B&#45;&gt;V -->
<g class="edge">
<title>B&#45;&gt;V</title>
<path fill="none" stroke="#000000" d="M123.6176,-80.183C135.3836,-88.608 151.7241,-100.3086 165.1256,-109.9048"/>
<polygon fill="#000000" stroke="#000000" points="163.2621,-112.8751 173.4303,-115.8513 167.3374,-107.1837 163.2621,-112.8751"/>
</g>
<!-- C -->
<g class="node">
<title>C</title>
<text text-anchor="middle" x="270" y="-65.6" font-family="Times,serif" font-size="13.00" fill="#000000">C</text>
</g>
<!-- C&#45;&gt;V -->
<g class="edge">
<title>C&#45;&gt;V</title>
<path fill="none" stroke="#000000" d="M254.3824,-80.183C242.6164,-88.608 226.2759,-100.3086 212.8744,-109.9048"/>
<polygon fill="#000000" stroke="#000000" points="210.6626,-107.1837 204.5697,-115.8513 214.7379,-112.8751 210.6626,-107.1837"/>
</g>
<!-- C&#45;&gt;W2 -->
<g class="edge">
<title>C&#45;&gt;W2</title>
<path fill="none" stroke="#000000" d="M285.6176,-80.183C297.3836,-88.608 313.7241,-100.3086 327.1256,-109.9048"/>
<polygon fill="#000000" stroke="#000000" points="325.2621,-112.8751 335.4303,-115.8513 329.3374,-107.1837 325.2621,-112.8751"/>
</g>
<!-- D -->
<g class="node">
<title>D</title>
<text text-anchor="middle" x="189" y="-7.6" font-family="Times,serif" font-size="13.00" fill="#000000">D</text>
</g>
<!-- D&#45;&gt;B -->
<g class="edge">
<title>D&#45;&gt;B</title>
<path fill="none" stroke="#000000" d="M173.3824,-22.183C161.6164,-30.608 145.2759,-42.3086 131.8744,-51.9048"/>
<polygon fill="#000000" stroke="#000000" points="129.6626,-49.1837 123.5697,-57.8513 133.7379,-54.8751 129.6626,-49.1837"/>
</g>
<!-- D&#45;&gt;C -->
<g class="edge">
<title>D&#45;&gt;C</title>
<path fill="none" stroke="#000000" d="M204.6176,-22.183C216.3836,-30.608 232.7241,-42.3086 246.1256,-51.9048"/>
<polygon fill="#000000" stroke="#000000" points="244.2621,-54.8751 254.4303,-57.8513 248.3374,-49.1837 244.2621,-54.8751"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:class.lookup'>6</a>: Name lookup&emsp;&ensp;[fig:class.lookup]</div><div id='10.sentence-4' class='sentence'>As illustrated in <a href='#fig:class.lookup'>Figure 6</a>,
the names declared in <span class='texttt'>V</span> and the left-hand instance of <span class='texttt'>W</span>
are hidden by those in <span class='texttt'>B</span>, but the names declared in the
right-hand instance of <span class='texttt'>W</span> are not hidden at all<a class='hidden_link' href='#10.sentence-4'>.</a></div> <pre class='codeblock'>
<span class='keyword'>void</span> D<span class='operator'>::</span>glorp<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  x<span class='operator'>+</span><span class='operator'>+</span>;              <span class='comment'>// OK: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;x</span> hides <span class='tcode_in_codeblock'>V&#x200b;::&#x200b;x</span></span>
  f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// OK: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f()</span> hides <span class='tcode_in_codeblock'>V&#x200b;::&#x200b;f()</span></span>
  y<span class='operator'>+</span><span class='operator'>+</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;y</span> and <span class='tcode_in_codeblock'>C</span>'s <span class='tcode_in_codeblock'>W&#x200b;::&#x200b;y</span></span>
  g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;g()</span> and <span class='tcode_in_codeblock'>C</span>'s <span class='tcode_in_codeblock'>W&#x200b;::&#x200b;g()</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <span class='indexparent'><a class='index' id=':ambiguity,class_conversion'></a></span></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4f2f5811d4d4f45679e0a09e2cf105f9535db8c6/source/classes.tex#L4422'>#</a></div><div id='11.sentence-1' class='sentence'>An explicit or implicit conversion from a pointer to or
an expression designating an object
of a
derived class to a pointer or reference to one of its base classes shall
unambiguously refer to a unique object representing the base class<a class='hidden_link' href='#11.sentence-1'>.</a></div> <div id='11.example-1' class='example'>[&nbsp;<a class='example_link' href='#11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> A, <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C <span class='operator'>:</span> A, <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D <span class='operator'>:</span> B, C <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  D d;
  B<span class='operator'>*</span> pb <span class='operator'>=</span> <span class='operator'>&amp;</span>d;
  A<span class='operator'>*</span> pa <span class='operator'>=</span> <span class='operator'>&amp;</span>d;       <span class='comment'>// error: ambiguous: <span class='tcode_in_codeblock'>C</span>'s <span class='tcode_in_codeblock'>A</span> or <span class='tcode_in_codeblock'>B</span>'s <span class='tcode_in_codeblock'>A</span>?</span>
  V<span class='operator'>*</span> pv <span class='operator'>=</span> <span class='operator'>&amp;</span>d;       <span class='comment'>// OK: only one <span class='tcode_in_codeblock'>V</span> subobject</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4f2f5811d4d4f45679e0a09e2cf105f9535db8c6/source/classes.tex#L4445'>#</a></div><div id='12.note-1' class='note'>[&nbsp;<a class='note_link' href='#12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='12.sentence-1' class='sentence'>Even if the result of name lookup is unambiguous, use of a name found in
multiple subobjects might still be
ambiguous (<a href='conv.mem'>[conv.mem]</a>, <a href='expr.ref'>[expr.ref]</a>, <a href='class.access.base'>[class.access.base]</a>)<a class='hidden_link' href='#12.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='12.example-1' class='example'>[&nbsp;<a class='example_link' href='#12.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> B1 <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>static</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  <span class='keyword'>int</span> i;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B2 <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> I1<span class='operator'>:</span> B1 <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> I2<span class='operator'>:</span> B1 <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> D<span class='operator'>:</span> I1, I2, B2 <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> B1<span class='operator'>::</span>f;
  <span class='keyword'>using</span> B2<span class='operator'>::</span>f;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                        <span class='comment'>// Ambiguous conversion of <span class='tcode_in_codeblock'>this</span></span>
    f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                       <span class='comment'>// Unambiguous (static)</span>
    f<span class='parenthesis'>(</span><span class='literal'>0.0</span><span class='parenthesis'>)</span>;                     <span class='comment'>// Unambiguous (only one <span class='tcode_in_codeblock'>B2</span>)</span>
    <span class='keyword'>int</span> B1<span class='operator'>::</span><span class='operator'>*</span> mpB1 <span class='operator'>=</span> <span class='operator'>&amp;</span>D<span class='operator'>::</span>i;     <span class='comment'>// Unambiguous</span>
    <span class='keyword'>int</span> D<span class='operator'>::</span><span class='operator'>*</span> mpD <span class='operator'>=</span> <span class='operator'>&amp;</span>D<span class='operator'>::</span>i;       <span class='comment'>// Ambiguous conversion</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div></body></html>