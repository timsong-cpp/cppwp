<!DOCTYPE html><html lang='en'><head><title>[stmt.return]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>8</a> Statements <a class='abbr_ref' href='./#stmt'>[stmt]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>8.8</a> Jump statements <a class='abbr_ref' href='stmt.jump#stmt.return'>[stmt.jump]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>8.8.4</a> The <span class='texttt'>return</span> statement <a class='abbr_ref'>[stmt.return]</a></h3><div class='texpara'><a class='index' id=':return'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f53f313f5b1aac5f9547b39e78863e23ca9c047/source/statements.tex#L1063'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>A function returns control to its caller by the <span class='texttt'><span class='keyword'>return</span></span> statement<a class='hidden_link' href='#1.sentence-1'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f53f313f5b1aac5f9547b39e78863e23ca9c047/source/statements.tex#L1066'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>The <a href='dcl.init.general#nt:expr-or-braced-init-list' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:expr-or-braced-init-list'><span class='textsf'><i >expr-or-braced-init-list</i></span></span></a>
of a <span class='texttt'><span class='keyword'>return</span></span> statement is called its operand<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>A <span class='texttt'><span class='keyword'>return</span></span> statement with
no operand shall be used only in a function whose return type is
<span class='mathit'>cv</span> <span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span>, a constructor (<a href='class.ctor' title='11.4.5&emsp;Constructors'>[class.<span class='shy'></span>ctor]</a>), or a
destructor (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'><a class='index' id=':return,constructor_and'></a><a class='index' id=':return,constructor_and_'></a>A <span class='texttt'><span class='keyword'>return</span></span> statement with an operand of type <span id=':void_'><span class='texttt'><span class='keyword'>void</span></span></span> shall be used only
in a function that has a <span class='mathit'>cv</span> <span id=':void__'><span class='texttt'><span class='keyword'>void</span></span></span> return type<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>A <span class='texttt'><span class='keyword'>return</span></span> statement with any other operand shall be used only
in a function that has a return type other than <span class='mathit'>cv</span> <span id=':void___'><span class='texttt'><span class='keyword'>void</span></span></span>;
<a class='index' id=':conversion,return_type'></a>the <span class='texttt'><span class='keyword'>return</span></span> statement initializes the
returned reference or prvalue result object
of the (explicit or implicit) function call
by <a href='dcl.init#def:copy-initialization' title='9.5&emsp;Initializers&emsp;[dcl.init]'>copy-initialization</a> from the operand<a class='hidden_link' href='#2.sentence-4'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='2.sentence-5' class='sentence'>A constructor or destructor does not have a return type<a class='hidden_link' href='#2.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='2.sentence-6' class='sentence'>A <span class='texttt'><span class='keyword'>return</span></span> statement can involve
an invocation of a constructor to perform a copy or move of the operand
if it is not a prvalue or if its type differs from the return type of the function<a class='hidden_link' href='#2.sentence-6'>.</a></div> <div id='2.sentence-7' class='sentence'>A copy operation associated with a <span class='texttt'><span class='keyword'>return</span></span> statement can be elided or
converted to a move operation if an automatic storage duration variable is returned (<a href='class.copy.elision' title='11.9.6&emsp;Copy/move elision'>[class.<span class='shy'></span>copy.<span class='shy'></span>elision]</a>)<a class='hidden_link' href='#2.sentence-7'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f53f313f5b1aac5f9547b39e78863e23ca9c047/source/statements.tex#L1094'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>The destructor for the result object
is potentially invoked (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>, <a href='except.ctor' title='14.3&emsp;Stack unwinding'>[except.<span class='shy'></span>ctor]</a>)<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='operator'>~</span>A<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
A f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> A<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>   <span class='comment'>// error: destructor of <span class='tcode_in_codeblock'>A</span> is private (even though it is never invoked)</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f53f313f5b1aac5f9547b39e78863e23ca9c047/source/statements.tex#L1106'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>Flowing off the end of
a constructor,
a destructor, or
a non-coroutine function with a <span class='mathit'>cv</span> <span id=':void____'><span class='texttt'><span class='keyword'>void</span></span></span> return type is
equivalent to a <span class='texttt'><span class='keyword'>return</span></span> with no operand<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>Otherwise, flowing off the end of a function
that is neither <span class='texttt'>main</span> (<a href='basic.start.main' title='6.10.3.1&emsp;main function'>[basic.<span class='shy'></span>start.<span class='shy'></span>main]</a>) nor a coroutine (<a href='dcl.fct.def.coroutine' title='9.6.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>)
results in undefined behavior<a class='hidden_link' href='#4.sentence-2'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f53f313f5b1aac5f9547b39e78863e23ca9c047/source/statements.tex#L1116'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>The copy-initialization of the result of the call is sequenced before the
destruction of temporaries at the end of the full-expression established
by the operand of the <span class='texttt'><span class='keyword'>return</span></span> statement, which, in turn, is sequenced
before the destruction of local variables (<a href='stmt.jump' title='8.8&emsp;Jump statements'>[stmt.<span class='shy'></span>jump]</a>) of the block
enclosing the <span class='texttt'><span class='keyword'>return</span></span> statement<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='5.sentence-2' class='sentence'>These operations
are sequenced before the destruction of local variables
in each remaining enclosing block of the function (<a href='stmt.dcl' title='8.10&emsp;Declaration statement'>[stmt.<span class='shy'></span>dcl]</a>),
which, in turn,
is sequenced before the evaluation of
postcondition assertions of the function (<a href='dcl.contract.func' title='9.4.1&emsp;General'>[dcl.<span class='shy'></span>contract.<span class='shy'></span>func]</a>),
which, in turn,
is sequenced before the destruction of function parameters (<a href='expr.call' title='7.6.1.3&emsp;Function call'>[expr.<span class='shy'></span>call]</a>)<a class='hidden_link' href='#5.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f53f313f5b1aac5f9547b39e78863e23ca9c047/source/statements.tex#L1133'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>In a function whose return type is a reference,
other than an invented function for <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>is_<span class='shy'></span>convertible</span> (<a href='meta.rel' title='21.3.8&emsp;Relationships between types'>[meta.<span class='shy'></span>rel]</a>),
a <span class='texttt'><span class='keyword'>return</span></span> statement that binds the returned reference to
a temporary expression (<a href='class.temporary' title='6.8.7&emsp;Temporary objects'>[class.<span class='shy'></span>temporary]</a>) is ill-formed<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> f1<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='literal'>42</span>;            <span class='comment'>// ill-formed</span>
<span class='curlybracket'>}</span>
<span class='keyword'>const</span> <span class='keyword'>double</span><span class='operator'>&amp;</span> f2<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>42</span>;
  <span class='keyword'>return</span> x;             <span class='comment'>// ill-formed</span>
<span class='curlybracket'>}</span>
<span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> id<span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span>r<span class='parenthesis'>)</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> f3<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> id<span class='parenthesis'>(</span><span class='literal'>42</span><span class='parenthesis'>)</span>;        <span class='comment'>// OK, but probably a bug</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>