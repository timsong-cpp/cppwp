<!DOCTYPE html><html lang='en'><head><title>[module.global.frag]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>10</a> Modules <a class='abbr_ref' href='./#module'>[module]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>10.4</a> Global module fragment <a class='abbr_ref'>[module.global.frag]</a></h2><div class='texpara'><div class='bnf' id='nt:global-module-fragment'>
<a class='hidden_link' href='#nt:global-module-fragment' title='10.4&emsp;Global module fragment&emsp;[module.global.frag]'><span id='nt:global-module-fragment'><span id=':global-module-fragment'>global-module-fragment<span class='textnormal'>:</span></span></span></a><br>module-keyword <span class='terminal'>;</span> <a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq'><span class='textsf'><i >declaration-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span>
</div></div><div class='para nonNormativeOnly' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/modules.tex#L587'>#</a></div><div class='texpara'><div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='1.sentence-1' class='sentence'>Prior to phase 4 of translation,
only preprocessing directives can appear
in the <a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq_'><span class='textsf'><i >declaration-seq</i></span></span></a> (<a href='cpp.pre' title='15.1&emsp;Preamble'>[cpp.<span class='shy'></span>pre]</a>)<a class='hidden_link' href='#1.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/modules.tex#L594'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>A <a href='#nt:global-module-fragment' title='10.4&emsp;Global module fragment&emsp;[module.global.frag]'><span id='ntref:global-module-fragment'><span class='textsf'><i >global-module-fragment</i></span></span></a> specifies the contents of the
<a class='hidden_link' href='#def:global_module_fragment' title='10.4&emsp;Global module fragment&emsp;[module.global.frag]'><span id='def:global_module_fragment'><i >global module fragment</i></span></a> for a module unit<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>The global module fragment can be used to provide declarations
that are attached to the global module and usable within the module unit<a class='hidden_link' href='#2.sentence-2'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/modules.tex#L600'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>A declaration <span class='math'><span class='mathalpha'>D</span></span> is <a class='hidden_link' href='#def:decl-reachable' title='10.4&emsp;Global module fragment&emsp;[module.global.frag]'><span id='def:decl-reachable'><i >decl-reachable</i></span></a> from a declaration <span class='math'><span class='mathalpha'>S</span></span>
in the same translation unit if
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div><span class='math'><span class='mathalpha'>D</span></span> does not declare a function or function template and
<span class='math'><span class='mathalpha'>S</span></span> contains an
<a href='expr.prim.id.general#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression'><span class='textsf'><i >id-expression</i></span></span></a>,
<a href='namespace.def.general#nt:namespace-name' title='9.9.2.1&emsp;General&emsp;[namespace.def.general]'><span id='ntref:namespace-name'><span class='textsf'><i >namespace-name</i></span></span></a>,
<a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name'><span class='textsf'><i >type-name</i></span></span></a>,
<a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name'><span class='textsf'><i >template-name</i></span></span></a>, or
<a href='temp.concept#nt:concept-name' title='13.7.9&emsp;Concept definitions&emsp;[temp.concept]'><span id='ntref:concept-name'><span class='textsf'><i >concept-name</i></span></span></a>
naming <span class='math'><span class='mathalpha'>D</span></span>, or</li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div><span class='math'><span class='mathalpha'>D</span></span> declares a function or function template that
is named by an expression (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>)
appearing in <span class='math'><span class='mathalpha'>S</span></span>, or</li><li id='3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.3'>(3.3)</a></div><span class='math'><span class='mathalpha'>S</span></span> contains a dependent call <span class='texttt'>E</span> (<a href='temp.dep' title='13.8.3&emsp;Dependent names'>[temp.<span class='shy'></span>dep]</a>)
and <span class='math'><span class='mathalpha'>D</span></span> is found by any name lookup performed
for an expression synthesized from <span class='texttt'>E</span>
by replacing each type-dependent argument or operand
with a value of a placeholder type
with no associated namespaces or entities, or
<div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='3.3.sentence-1' class='sentence'>This includes the lookup for <span class='texttt'><span id=':operator'><span class='texttt'><span class='keyword'>operator</span></span></span><span class='operator'>=</span><span class='operator'>=</span></span> performed
when considering rewriting an <span class='texttt'><span class='operator'>!</span><span class='operator'>=</span></span> expression,
the lookup for <span class='texttt'><span id=':operator_'><span class='texttt'><span class='keyword'>operator</span></span></span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span></span>
performed when considering rewriting a relational comparison, and
the lookup for <span class='texttt'><span id=':operator__'><span class='texttt'><span class='keyword'>operator</span></span></span><span class='operator'>!</span><span class='operator'>=</span></span>
when considering whether an <span class='texttt'><span id=':operator___'><span class='texttt'><span class='keyword'>operator</span></span></span><span class='operator'>=</span><span class='operator'>=</span></span> is a rewrite target<a class='hidden_link' href='#3.3.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></li><li id='3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.4'>(3.4)</a></div><span class='math'><span class='mathalpha'>S</span></span> contains an expression that
takes the address of an overload set (<a href='over.over' title='12.3&emsp;Address of an overload set'>[over.<span class='shy'></span>over]</a>)
that contains <span class='math'><span class='mathalpha'>D</span></span> and
for which the target type is dependent, or</li><li id='3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.5'>(3.5)</a></div>there exists a declaration <span class='math'><span class='mathalpha'>M</span></span> that is not a <a href='namespace.def.general#nt:namespace-definition' title='9.9.2.1&emsp;General&emsp;[namespace.def.general]'><span id='ntref:namespace-definition'><span class='textsf'><i >namespace-definition</i></span></span></a>
for which <span class='math'><span class='mathalpha'>M</span></span> is decl-reachable from <span class='math'><span class='mathalpha'>S</span></span> and either
<ul class='itemize'><li id='3.5.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.5.1'>(3.5.1)</a></div><span class='math'><span class='mathalpha'>D</span></span> is decl-reachable from <span class='math'><span class='mathalpha'>M</span></span>, or</li><li id='3.5.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.5.2'>(3.5.2)</a></div><span class='math'><span class='mathalpha'>D</span></span> and <span class='math'><span class='mathalpha'>M</span></span> declare the same entity,
and <span class='math'><span class='mathalpha'>D</span></span> neither is a friend declaration
nor inhabits a block scope, or</li><li id='3.5.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.5.3'>(3.5.3)</a></div><span class='math'><span class='mathalpha'>D</span></span> declares a namespace <span class='math'><span class='mathalpha'>N</span></span> and <span class='math'><span class='mathalpha'>M</span></span> is a member of <span class='math'><span class='mathalpha'>N</span></span>, or</li><li id='3.5.4'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.5.4'>(3.5.4)</a></div>one of <span class='math'><span class='mathalpha'>D</span></span> and <span class='math'><span class='mathalpha'>M</span></span> declares a class or class template <span class='math'><span class='mathalpha'>C</span></span>
and the other declares a member or friend of <span class='math'><span class='mathalpha'>C</span></span>, or</li><li id='3.5.5'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.5.5'>(3.5.5)</a></div>one of <span class='math'><span class='mathalpha'>D</span></span> and <span class='math'><span class='mathalpha'>M</span></span> declares an enumeration <span class='math'><span class='mathalpha'>E</span></span>
and the other declares an enumerator of <span class='math'><span class='mathalpha'>E</span></span>, or</li><li id='3.5.6'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.5.6'>(3.5.6)</a></div><span class='math'><span class='mathalpha'>D</span></span> declares a function or variable and <span class='math'><span class='mathalpha'>M</span></span> is declared in <span class='math'><span class='mathalpha'>D</span></span>,<a class='footnoteref' href='#footnote-86' id='footnoteref-86' title='A declaration can appear within a lambda-expression in the initializer of a variable.'>86</a>
or</li><li id='3.5.7'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.5.7'>(3.5.7)</a></div>one of <span class='math'><span class='mathalpha'>D</span></span> and <span class='math'><span class='mathalpha'>M</span></span> declares a template and the other declares
a partial or explicit specialization or
an implicit or explicit instantiation of that template, or</li><li id='3.5.8'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.5.8'>(3.5.8)</a></div><span class='math'><span class='mathalpha'>M</span></span> declares a class template
and <span class='math'><span class='mathalpha'>D</span></span> is a deduction guide for that template, or</li><li id='3.5.9'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.5.9'>(3.5.9)</a></div>one of <span class='math'><span class='mathalpha'>D</span></span> and <span class='math'><span class='mathalpha'>M</span></span> declares a class or enumeration type
and the other introduces a typedef name for linkage purposes for that type<a class='hidden_link' href='#3.sentence-1'>.</a></li></ul></li></ul></div> <div id='3.sentence-2' class='sentence'>
In this determination, it is unspecified
<ul class='itemize'><li id='3.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.6'>(3.6)</a></div>whether a reference to an
<a href='dcl.pre#nt:alias-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:alias-declaration'><span class='textsf'><i >alias-declaration</i></span></span></a>,
<span class='texttt'><span class='keyword'>typedef</span></span> declaration,
<a href='namespace.udecl#nt:using-declaration' title='9.10&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declaration'><span class='textsf'><i >using-declaration</i></span></span></a>, or
<a href='namespace.alias#nt:namespace-alias-definition' title='9.9.3&emsp;Namespace alias&emsp;[namespace.alias]'><span id='ntref:namespace-alias-definition'><span class='textsf'><i >namespace-alias-definition</i></span></span></a>
is replaced by the declarations they name
prior to this determination,</li><li id='3.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.7'>(3.7)</a></div>whether a <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id'><span class='textsf'><i >simple-template-id</i></span></span></a>
that does not denote a dependent type
and whose <a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name_'><span class='textsf'><i >template-name</i></span></span></a> names an alias template
is replaced by its denoted type
prior to this determination,</li><li id='3.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.8'>(3.8)</a></div>whether a <a href='dcl.type.decltype#nt:decltype-specifier' title='9.2.9.6&emsp;Decltype specifiers&emsp;[dcl.type.decltype]'><span id='ntref:decltype-specifier'><span class='textsf'><i >decltype-specifier</i></span></span></a>
that does not denote a dependent type
is replaced by its denoted type
prior to this determination,
and</li><li id='3.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.9'>(3.9)</a></div>whether a non-value-dependent constant expression
is replaced by the result of constant evaluation
prior to this determination<a class='hidden_link' href='#3.sentence-2'>.</a></li></ul></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/modules.tex#L709'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>A declaration <span class='texttt'>D</span> in a global module fragment of a module unit
is <a class='hidden_link' href='#def:discarded,declaration' title='10.4&emsp;Global module fragment&emsp;[module.global.frag]'><span id='def:discarded,declaration'><i >discarded</i></span></a> if <span class='texttt'>D</span>
is not decl-reachable from any <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration'><span class='textsf'><i >declaration</i></span></span></a>
in the <a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq__'><span class='textsf'><i >declaration-seq</i></span></span></a>
of the <a href='basic.link#nt:translation-unit' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='ntref:translation-unit'><span class='textsf'><i >translation-unit</i></span></span></a><a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='4.sentence-2' class='sentence'>A discarded declaration is neither reachable
nor visible to name lookup outside the module unit,
nor in template instantiations whose points of instantiation (<a href='temp.point' title='13.8.4.1&emsp;Point of instantiation'>[temp.<span class='shy'></span>point]</a>)
are outside the module unit,
even when the instantiation context (<a href='module.context' title='10.6&emsp;Instantiation context'>[module.<span class='shy'></span>context]</a>)
includes the module unit<a class='hidden_link' href='#4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/modules.tex#L724'>#</a></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>const</span> <span class='keyword'>int</span> size <span class='operator'>=</span> <span class='literal'>2</span>;
<span class='keyword'>int</span> ary1<span class='squarebracket'>[</span>size<span class='squarebracket'>]</span>;                 <span class='comment'>// unspecified whether <span class='tcode_in_codeblock'>size</span> is decl-reachable from <span class='tcode_in_codeblock'>ary1</span></span>
<span class='keyword'>constexpr</span> <span class='keyword'>int</span> identity<span class='parenthesis'>(</span><span class='keyword'>int</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span>
<span class='keyword'>int</span> ary2<span class='squarebracket'>[</span>identity<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span><span class='squarebracket'>]</span>;          <span class='comment'>// unspecified whether <span class='tcode_in_codeblock'>identity</span> is decl-reachable from <span class='tcode_in_codeblock'>ary2</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S2;
<span class='keyword'>constexpr</span> <span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span>
S<span class='anglebracket'>&lt;</span>S2<span class='anglebracket'>&lt;</span>T, g<span class='parenthesis'>(</span>N<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>S</span>, <span class='tcode_in_codeblock'>S2</span>, <span class='tcode_in_codeblock'>g</span>, and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>f</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span>g<span class='parenthesis'>(</span>N<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> N<span class='parenthesis'>)</span>;   <span class='comment'>// <span class='tcode_in_codeblock'>g</span> and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>h</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/modules.tex#L744'>#</a></div><div class='texpara'><div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<p>Source file <span class='texttt'><span class='literal'>"foo.h"</span></span>:<span class='codeblock'><span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> X <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
  <span class='keyword'>int</span> d<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>int</span> e<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>inline</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>X, <span class='keyword'>int</span> <span class='operator'>=</span> d<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> e<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>
  <span class='keyword'>int</span> g<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span>;
  <span class='keyword'>int</span> h<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Module <span class='texttt'>M</span> interface:<span class='codeblock'><span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"foo.h"</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> use_f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  N<span class='operator'>::</span>X x;                       <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;X</span>, <span class='tcode_in_codeblock'>N</span>, and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>f</span></span>
  <span class='keyword'>return</span> f<span class='parenthesis'>(</span>x, <span class='literal'>123</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;f</span> is decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>f</span>,</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;e</span> is indirectly decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>f</span></span>
                                <span class='comment'>//   because it is decl-reachable from <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;f</span>, and</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;d</span> is decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>f</span></span>
                                <span class='comment'>//   because it is decl-reachable from <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;f</span></span>
                                <span class='comment'>//   even though it is not used in this call</span>
<span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> use_g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  N<span class='operator'>::</span>X x;                       <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;X</span>, <span class='tcode_in_codeblock'>N</span>, and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>g</span></span>
  <span class='keyword'>return</span> g<span class='parenthesis'>(</span><span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, x<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;g</span> is not decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>g</span></span>
<span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> use_h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  N<span class='operator'>::</span>X x;                       <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;X</span>, <span class='tcode_in_codeblock'>N</span>, and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>h</span></span>
  <span class='keyword'>return</span> h<span class='parenthesis'>(</span><span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, x<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;h</span> is not decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>h</span>, but</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;h</span> is decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>h&lt;int&gt;</span></span>
<span class='curlybracket'>}</span>
<span class='keyword'>int</span> k <span class='operator'>=</span> use_h<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>use_<span class='shy'></span>h&lt;int&gt;</span> is decl-reachable from <span class='tcode_in_codeblock'>k</span>, so</span>
  <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;h</span> is decl-reachable from <span class='tcode_in_codeblock'>k</span></span>
</span></div><div class='texpara'><p>Module <span class='texttt'>M</span> implementation:<span class='codeblock'><span class='keyword'>module</span> M;
<span class='keyword'>int</span> a <span class='operator'>=</span> use_f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK</span>
<span class='keyword'>int</span> b <span class='operator'>=</span> use_g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// error: no viable function for call to <span class='tcode_in_codeblock'>g</span>;</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>g</span> is not decl-reachable from purview of</span>
                                <span class='comment'>// module <span class='tcode_in_codeblock'>M</span>'s interface, so is discarded</span>
<span class='keyword'>int</span> c <span class='operator'>=</span> use_h<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-86'><div class='texpara'><a class='footnotenum' href='#footnote-86'>86)</a><a class='footnoteBacklink' href='#footnoteref-86'>86)</a> <div id='footnote-86.sentence-1' class='sentence'>A declaration can appear within a <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression'><span class='textsf'><i >lambda-expression</i></span></span></a>
in the initializer of a variable<a class='hidden_link' href='#footnote-86.sentence-1'>.</a></div></div></div></div></body></html>