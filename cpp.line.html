<!DOCTYPE html><html lang='en'><head><title>[cpp.line]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>15</a> Preprocessing directives <a class='abbr_ref' href='./#cpp'>[cpp]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>15.7</a> Line control <a class='abbr_ref'>[cpp.line]</a></h2><div class='texpara'><a class='index' id=':preprocessing_directive,line_control'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/preprocessor.tex#L1561'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>The <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal'><span class='textsf'><i >string-literal</i></span></span></a> of a
<span class='texttt'><span class='preprocessordirective'>#line</span></span>
directive, if present,
shall be a character string literal<a class='hidden_link' href='#1.sentence-1'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/preprocessor.tex#L1567'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>The
<a class='hidden_link' href='#def:line_number' title='15.7&emsp;Line control&emsp;[cpp.line]'><span id='def:line_number'><i >line number</i></span></a>
of the current source line is one greater than
the number of new-line characters read or introduced
in <a href='lex.phases' title='5.2&emsp;Phases of translation&emsp;[lex.phases]'>translation phase 1</a>
while processing the source file to the current token<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/preprocessor.tex#L1575'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>A preprocessing directive of the form
<div class='simplebnf'>
<span class='terminal'><span class='preprocessordirective'># line</span></span> <a href='lex.fcon#nt:digit-sequence' title='5.13.4&emsp;Floating-point literals&emsp;[lex.fcon]'><span id='ntref:digit-sequence'><span class='textsf'><i >digit-sequence</i></span></span></a> <a href='cpp.pre#nt:new-line' title='15.1&emsp;Preamble&emsp;[cpp.pre]'><span id='ntref:new-line'><span class='textsf'><i >new-line</i></span></span></a>
</div>
causes the implementation to behave as if
the following sequence of source lines begins with a
source line that has a line number as specified
by the digit sequence (interpreted as a decimal integer)<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>If the digit sequence specifies zero
or a number greater than 2147483647,
the behavior is undefined<a class='hidden_link' href='#3.sentence-2'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/preprocessor.tex#L1588'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>A preprocessing directive of the form
<div class='simplebnf'>
<span class='terminal'><span class='preprocessordirective'># line</span></span> <a href='lex.fcon#nt:digit-sequence' title='5.13.4&emsp;Floating-point literals&emsp;[lex.fcon]'><span id='ntref:digit-sequence_'><span class='textsf'><i >digit-sequence</i></span></span></a> <span class='terminal'>"</span> <a href='lex.string#nt:s-char-sequence' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:s-char-sequence'><span class='textsf'><i >s-char-sequence</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>"</span> <a href='cpp.pre#nt:new-line' title='15.1&emsp;Preamble&emsp;[cpp.pre]'><span id='ntref:new-line_'><span class='textsf'><i >new-line</i></span></span></a>
</div>
sets the presumed line number similarly and changes the
presumed name of the source file to be the contents
of the character string literal<a class='hidden_link' href='#4.sentence-1'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/preprocessor.tex#L1597'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>A preprocessing directive of the form
<div class='simplebnf'>
<span class='terminal'><span class='preprocessordirective'># line</span></span> <a href='cpp.pre#nt:pp-tokens' title='15.1&emsp;Preamble&emsp;[cpp.pre]'><span id='ntref:pp-tokens'><span class='textsf'><i >pp-tokens</i></span></span></a> <a href='cpp.pre#nt:new-line' title='15.1&emsp;Preamble&emsp;[cpp.pre]'><span id='ntref:new-line__'><span class='textsf'><i >new-line</i></span></span></a>
</div>
(that does not match one of the two previous forms)
is permitted<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>The preprocessing tokens after
<span class='texttt'>line</span>
on the directive are processed just as in normal text
(each identifier currently defined as a macro name is replaced by its
replacement list of preprocessing tokens)<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>If the directive resulting after all replacements does not match
one of the two previous forms, the behavior is undefined;
otherwise, the result is processed as appropriate<a class='hidden_link' href='#5.sentence-3'>.</a></div></div></div></div></body></html>