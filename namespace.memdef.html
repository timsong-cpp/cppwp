<!DOCTYPE html><html lang='en'><head><title>[namespace.memdef]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>10</a> Declarations <a class='abbr_ref' href='./#dcl.dcl'>[dcl.dcl]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>10.3</a> Namespaces <a class='abbr_ref' href='basic.namespace#namespace.memdef'>[basic.namespace]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>10.3.1</a> Namespace definition <a class='abbr_ref' href='namespace.def#namespace.memdef'>[namespace.def]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>10.3.1.2</a> Namespace member definitions <a class='abbr_ref'>[namespace.memdef]</a></h4><span class='indexparent'><a class='index' id=':namespace,member_definition'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/06013de0d00e66204253d2f682b4b879f7686540/source/declarations.tex#L2440'>#</a></div><div id='1.sentence-1' class='sentence'>A declaration in a namespace <span class='texttt'>N</span> (excluding declarations in nested scopes)
whose <i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i> is an <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i> (<a href='dcl.meaning'>[dcl.meaning]</a>),
whose <i ><a href='class#nt:class-head-name'>class-head-name</a></i> or
<i ><a href='dcl.enum#nt:enum-head-name'>enum-head-name</a></i> is an <i ><a href='lex.name#nt:identifier'>identifier</a></i>, or
whose <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> is of the form <i ><a href='class#nt:class-key'>class-key</a></i>
<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='lex.name#nt:identifier'>identifier</a></i> (<a href='dcl.type.elab'>[dcl.type.elab]</a>), or
that is an <i ><a href='dcl.enum#nt:opaque-enum-declaration'>opaque-enum-declaration</a></i>,
declares (or redeclares) its <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i> or
<i ><a href='lex.name#nt:identifier'>identifier</a></i> as a member of <span class='texttt'>N</span><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-2' class='sentence'>An <a href='temp.explicit'>explicit instantiation</a> or
<a href='temp.expl.spec'>explicit specialization</a> of a template
does not introduce a name and thus may be declared using an
<i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i> in a member of the enclosing namespace set,
if the primary template is declared in an inline namespace<a class='hidden_link' href='#1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
namespace X {
  void f() { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }        <span class='comment'>// OK: introduces <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f()</span>
</span>
  namespace M {
    void g();                   <span class='comment'>// OK: introduces <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;M&#x200b;::&#x200b;g()</span>
</span>  }
  using M::g;
  void g();                     <span class='comment'>// error: conflicts with <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;M&#x200b;::&#x200b;g()</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/06013de0d00e66204253d2f682b4b879f7686540/source/declarations.tex#L2471'>#</a></div><div id='2.sentence-1' class='sentence'>Members of a named namespace can also be
defined outside that namespace by explicit
qualification (<a href='namespace.qual'>[namespace.qual]</a>) of the name being defined, provided
that the entity being defined was already declared in the namespace and
the definition appears after the point of declaration in a namespace
that encloses the declaration's namespace<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
namespace Q {
  namespace V {
    void f();
  }
  void V::f() { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }     <span class='comment'>// OK
</span>  void V::g() { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }     <span class='comment'>// error: <span class='tcode_in_codeblock'>g()</span> is not yet a member of <span class='tcode_in_codeblock'>V</span>
</span>  namespace V {
    void g();
  }
}

namespace R {
  void Q::V::g() { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }  <span class='comment'>// error: <span class='tcode_in_codeblock'>R</span> doesn't enclose <span class='tcode_in_codeblock'>Q</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/06013de0d00e66204253d2f682b4b879f7686540/source/declarations.tex#L2497'>#</a></div><div id='3.sentence-1' class='sentence'>If a friend declaration in a non-local class first declares a
class, function, class template or function template<a class='footnotenum' href='#footnote-99'>99</a>
the friend is a member of the innermost enclosing
namespace<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>The friend declaration does not by itself make the name
visible to <a href='basic.lookup.unqual'>unqualified lookup</a> or <a href='basic.lookup.qual'>qualified
lookup</a><a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-5' class='sentence'>The name of the friend will be
visible in its namespace if a matching declaration is provided at namespace
scope (either before or after the class definition granting friendship)<a class='hidden_link' href='#3.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='3.sentence-3' class='sentence'> If a friend
function or function template is called, its name may be found by the
name lookup that considers functions from namespaces and classes
associated with the types of the function
arguments (<a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>)<a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='3.sentence-4' class='sentence'>If the
name in a friend declaration is neither qualified nor a
<i ><a href='temp.names#nt:template-id'>template-id</a></i> and the declaration is a function or an
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i>, the lookup to determine whether
the entity has been previously declared shall not consider any scopes
outside the innermost enclosing namespace<a class='hidden_link' href='#3.sentence-4'>.</a></div> <div id='3.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#3.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-6' class='sentence'>The other forms of
friend declarations cannot declare a new member of the innermost
enclosing namespace and thus follow the usual lookup rules<a class='hidden_link' href='#3.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// Assume <span class='tcode_in_codeblock'>f</span> and <span class='tcode_in_codeblock'>g</span> have not yet been declared.
</span>void h(int);
template &lt;class T&gt; void f2(T);
namespace A {
  class X {
    friend void f(X);           <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f(X)</span> is a friend
</span>    class Y {
      friend void g();          <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span> is a friend
</span>      friend void h(int);       <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span> is a friend
</span>                                <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;h</span> not considered
</span>      friend void f2&lt;&gt;(int);    <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;f2&lt;&gt;(int)</span> is a friend
</span>    };
  };

  <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span>, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span> and <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span> are not visible here
</span>  X x;
  void g() { f(x); }            <span class='comment'>// definition of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span>
</span>  void f(X) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }       <span class='comment'>// definition of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span>
</span>  void h(int) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }     <span class='comment'>// definition of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span>
</span>  <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span>, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span> and <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span> are visible here and known to be friends
</span>}

using A::x;

void h() {
  A::f(x);
  A::X::f(x);                   <span class='comment'>// error: <span class='tcode_in_codeblock'>f</span> is not a member of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X</span>
</span>  A::X::Y::g();                 <span class='comment'>// error: <span class='tcode_in_codeblock'>g</span> is not a member of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X&#x200b;::&#x200b;Y</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-99'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-99'>99)</a></div><div id='footnote-99.sentence-1' class='sentence'>this implies that the name of the class or function is unqualified<a class='hidden_link' href='#footnote-99.sentence-1'>.</a></div></div></div></body></html>