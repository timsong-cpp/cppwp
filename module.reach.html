<!DOCTYPE html><html lang='en'><head><title>[module.reach]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>10</a> Modules <a class='abbr_ref' href='./#module'>[module]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>10.7</a> Reachability <a class='abbr_ref'>[module.reach]</a></h2><div class='texpara'></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/7620db718df1ff82c2468b75f3449ced8ad7b716/source/modules.tex#L956'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>A translation unit <span class='math'><span class='mathalpha'>U</span></span> is
<a class='hidden_link' href='#def:reachable,necessarily,translation_unit' title='10.7&emsp;Reachability&emsp;[module.reach]'><span id='def:reachable,necessarily,translation_unit'><i >necessarily reachable</i></span></a>
from a point <span class='math'><span class='mathalpha'>P</span></span> if
<span class='math'><span class='mathalpha'>U</span></span> is a module interface unit on which the translation unit containing <span class='math'><span class='mathalpha'>P</span></span>
has an interface dependency, or
the translation unit containing <span class='math'><span class='mathalpha'>P</span></span> imports <span class='math'><span class='mathalpha'>U</span></span>,
in either case prior to <span class='math'><span class='mathalpha'>P</span></span> (<a href='module.import' title='10.3&emsp;Import declaration'>[module.<span class='shy'></span>import]</a>)<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='1.sentence-2' class='sentence'>While module interface units are reachable even when they are only
transitively imported via a non-exported import declaration,
namespace-scope names from such module interface units are not found by
name lookup (<a href='basic.lookup' title='6.5&emsp;Name lookup'>[basic.<span class='shy'></span>lookup]</a>)<a class='hidden_link' href='#1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/7620db718df1ff82c2468b75f3449ced8ad7b716/source/modules.tex#L971'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>All translation units that are necessarily reachable are
<a class='hidden_link' href='#def:reachable,translation_unit' title='10.7&emsp;Reachability&emsp;[module.reach]'><span id='def:reachable,translation_unit'><i >reachable</i></span></a><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Additional translation units on which the
point within the program has an interface dependency may be considered reachable,
but it is unspecified which are and under what circumstances<a class='hidden_link' href='#2.sentence-2'>.</a><a class='footnoteref' href='#footnote-96' id='footnoteref-96' title='Implementations are therefore not required to prevent the semantic effects of additional translation units involved in the compilation from being observed.'>96</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>: <div id='2.sentence-3' class='sentence'>It is advisable to avoid
depending on the reachability of any additional translation units
in programs intending to be portable<a class='hidden_link' href='#2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/7620db718df1ff82c2468b75f3449ced8ad7b716/source/modules.tex#L988'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>A declaration <span class='math'><span class='mathalpha'>D</span></span> is
<a class='hidden_link' href='#def:reachable_from,declaration' title='10.7&emsp;Reachability&emsp;[module.reach]'><span id='def:reachable_from,declaration'><i >reachable from</i></span></a> a point <span class='math'><span class='mathalpha'>P</span></span> if
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div><span class='math'><span class='mathalpha'>D</span></span> appears prior to <span class='math'><span class='mathalpha'>P</span></span> in the same translation unit, or</li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div><span class='math'><span class='mathalpha'>D</span></span> is not discarded (<a href='module.global.frag' title='10.4&emsp;Global module fragment'>[module.<span class='shy'></span>global.<span class='shy'></span>frag]</a>),
appears in a translation unit that is
reachable from <span class='math'><span class='mathalpha'>P</span></span>,
and
does not appear within a <a href='module.private.frag#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment'><span class='textsf'><i >private-module-fragment</i></span></span></a><a class='hidden_link' href='#3.sentence-1'>.</a></li></ul></div> <div id='3.sentence-2' class='sentence'>
A declaration is <a class='hidden_link' href='#def:reachable,declaration' title='10.7&emsp;Reachability&emsp;[module.reach]'><span id='def:reachable,declaration'><i >reachable</i></span></a>
if it is reachable from
any point in the instantiation context (<a href='module.context' title='10.6&emsp;Instantiation context'>[module.<span class='shy'></span>context]</a>)<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>: <div id='3.sentence-3' class='sentence'>Whether a declaration is exported has no bearing on whether it is reachable<a class='hidden_link' href='#3.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/7620db718df1ff82c2468b75f3449ced8ad7b716/source/modules.tex#L1006'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>The accumulated properties of all reachable declarations of
an entity within a context
determine the behavior of the entity within that context<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>: <div id='4.sentence-2' class='sentence'>These reachable semantic properties include type completeness,
type definitions, initializers,
default arguments of functions or template declarations, attributes,
names bound, etc<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>Since default arguments are evaluated in the context of the call expression,
the reachable semantic properties of the corresponding parameter types apply in
that context<a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>: <p>Translation unit #1:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M<span class='operator'>:</span>A;
<span class='keyword'>export</span> <span class='keyword'>struct</span> B;
</span></div><div class='texpara'><p>Translation unit #2:<span class='codeblock'><span class='keyword'>module</span> M<span class='operator'>:</span>B;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
</span></div><div class='texpara'><p>Translation unit #3:<span class='codeblock'><span class='keyword'>module</span> M<span class='operator'>:</span>C;
<span class='keyword'>import</span> <span class='operator'>:</span>A;
B b1;                           <span class='comment'>// error: no reachable definition of <span class='tcode_in_codeblock'>struct B</span></span>
</span></div><div class='texpara'><p>Translation unit #4:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>export</span> <span class='keyword'>import</span> <span class='operator'>:</span>A;
<span class='keyword'>import</span> <span class='operator'>:</span>B;
B b2;
<span class='keyword'>export</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>B b <span class='operator'>=</span> B<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div><div class='texpara'><p>Translation unit #5:<span class='codeblock'><span class='keyword'>module</span> X;
<span class='keyword'>import</span> M;
B b3;                           <span class='comment'>// error: no reachable definition of <span class='tcode_in_codeblock'>struct B</span></span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>               <span class='comment'>// error: no reachable definition of <span class='tcode_in_codeblock'>struct B</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/7620db718df1ff82c2468b75f3449ced8ad7b716/source/modules.tex#L1054'>#</a></div><div class='texpara'><div id='note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-5'>5</a></i>: <div id='5.sentence-1' class='sentence'>Declarations of an entity can be reachable
even where they cannot be found by name lookup<a class='hidden_link' href='#5.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>: <p>Translation unit #1:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> A;
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>export</span> <span class='keyword'>using</span> Y <span class='operator'>=</span> X;
</span></div><div class='texpara'><p>Translation unit #2:<span class='codeblock'><span class='keyword'>module</span> B;
<span class='keyword'>import</span> A;
Y y;                <span class='comment'>// OK, definition of <span class='tcode_in_codeblock'>X</span> is reachable</span>
X x;                <span class='comment'>// error: <span class='tcode_in_codeblock'>X</span> not visible to unqualified lookup</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-96'><div class='texpara'><a class='footnotenum' href='#footnote-96'>96)</a><a class='footnoteBacklink' href='#footnoteref-96'>96)</a> <div id='footnote-96.sentence-1' class='sentence'>Implementations are therefore not required to prevent the semantic
effects of additional translation units involved in the compilation from being
observed<a class='hidden_link' href='#footnote-96.sentence-1'>.</a></div></div></div></div></body></html>