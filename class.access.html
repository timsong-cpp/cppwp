<!DOCTYPE html><html lang='en'><head><title>[class.access]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>11</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>11.8</a> Member access control <a class='abbr_ref'>[class.access]</a></h2><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:80pt'>11.8.1</a> General <a class='abbr_ref' href='class.access.general'>[class.access.general]</a></h3><div class='texpara'><a class='index' id=':access_control'></a></div><div class='texpara'>


</div><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4189'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'>A member of a class can be
<ul class='itemize'><li id='general-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-1.1'>(1.1)</a></div><a class='index' id=':access_control,private'></a>private,
that is, it can be named only by members and friends
of the class in which it is declared;</li><li id='general-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-1.2'>(1.2)</a></div><a class='index' id=':access_control,protected'></a>protected,
that is, it can be named only by members and friends
of the class in which it is declared, by classes derived from that class, and by their
friends (see <a href='#class.protected' title='11.8.5&emsp;Protected member access'>[class.<span class='shy'></span>protected]</a>); or</li><li id='general-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-1.3'>(1.3)</a></div><a class='index' id=':access_control,public'></a>public,
that is, it can be named anywhere without access restriction<a class='hidden_link' href='#general-1.sentence-1'>.</a></li></ul></div> <div id='general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-1'>1</a></i>:&ensp;<div id='general-1.sentence-2' class='sentence'>A constructor or destructor can be named by an expression (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>)
even though it has no name<a class='hidden_link' href='#general-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4213'>#</a></div><div class='texpara'><div id='general-2.sentence-1' class='sentence'>A member of a class can also access all the members to which the class has access<a class='hidden_link' href='#general-2.sentence-1'>.</a></div> <div id='general-2.sentence-2' class='sentence'>A local class of a member function may access
the same members that the member function itself may access<a class='hidden_link' href='#general-2.sentence-2'>.</a><a class='footnoteref' href='#footnote-101' id='footnoteref-101' title='Access permissions are thus transitive and cumulative to nested and local classes.'>101</a></div></div></div><div class='para' id='general-3'><div class='marginalizedparent'><a class='marginalized' href='#general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4223'>#</a></div><div class='texpara'><div id='general-3.sentence-1' class='sentence'><a class='index' id=':access_control,member_name'></a><a class='index' id=':access_control,default'></a>Members of a class defined with the keyword
<span id=':class'><span class='texttt'><span class='keyword'>class</span></span></span>
are private by default<a class='hidden_link' href='#general-3.sentence-1'>.</a></div> <div id='general-3.sentence-2' class='sentence'>Members of a class defined with the keywords
<span id=':struct'><span class='texttt'><span class='keyword'>struct</span></span></span> or <span id=':union'><span class='texttt'><span class='keyword'>union</span></span></span>
are public by default<a class='hidden_link' href='#general-3.sentence-2'>.</a></div> <div id='general-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a;            <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;a</span> is private by default</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;a</span> is public by default</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-4'><div class='marginalizedparent'><a class='marginalized' href='#general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4245'>#</a></div><div class='texpara'><div id='general-4.sentence-1' class='sentence'>Access control is applied uniformly to declarations and expressions<a class='hidden_link' href='#general-4.sentence-1'>.</a></div> <div id='general-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-2'>2</a></i>:&ensp;<div id='general-4.sentence-2' class='sentence'>Access control applies to members nominated by
friend declarations (<a href='#class.friend' title='11.8.4&emsp;Friends'>[class.<span class='shy'></span>friend]</a>) and
<a href='namespace.udecl#nt:using-declaration' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declaration'><span class='textsf'><i >using-declaration</i></span></span></a><i >s</i> (<a href='namespace.udecl' title='9.9&emsp;The using declaration'>[namespace.<span class='shy'></span>udecl]</a>)<a class='hidden_link' href='#general-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='general-4.sentence-3' class='sentence'>
When a <a href='namespace.udecl#nt:using-declarator' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declarator'><span class='textsf'><i >using-declarator</i></span></span></a> is named,
access control is applied to it, not to the declarations that replace it<a class='hidden_link' href='#general-4.sentence-3'>.</a></div> <div id='general-4.sentence-4' class='sentence'>For an overload set, access control is applied only to
the function selected by overload resolution<a class='hidden_link' href='#general-4.sentence-4'>.</a></div> <div id='general-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>private</span><span class='operator'>:</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span>S<span class='operator'>*</span> sp<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  sp<span class='operator'>-</span><span class='anglebracket'>&gt;</span>f<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span>;         <span class='comment'>// OK, access control applied after overload resolution</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='general-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-3'>3</a></i>:&ensp;<div id='general-4.sentence-5' class='sentence'>Because access control applies to the declarations named, if access control is applied to a
<a href='dcl.typedef#nt:typedef-name' title='9.2.4&emsp;The typedef specifier&emsp;[dcl.typedef]'><span id='ntref:typedef-name'><span class='textsf'><i >typedef-name</i></span></span></a>, only the accessibility of the typedef or alias declaration itself is considered<a class='hidden_link' href='#general-4.sentence-5'>.</a></div> <div id='general-4.sentence-6' class='sentence'>The accessibility of the entity referred to by the <a href='dcl.typedef#nt:typedef-name' title='9.2.4&emsp;The typedef specifier&emsp;[dcl.typedef]'><span id='ntref:typedef-name_'><span class='textsf'><i >typedef-name</i></span></span></a> is not considered<a class='hidden_link' href='#general-4.sentence-6'>.</a></div> <div id='general-4.sentence-7' class='sentence'>For example,</div></div><div class='texpara'><span class='codeblock'><span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>typedef</span> B BB;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='operator'>::</span>BB x;          <span class='comment'>// OK, typedef <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;BB</span> is public</span>
  A<span class='operator'>::</span>B y;           <span class='comment'>// access error, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> is private</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='general-5'><div class='marginalizedparent'><a class='marginalized' href='#general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4289'>#</a></div><div class='texpara'><div id='general-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-4'>4</a></i>:&ensp;<div id='general-5.sentence-1' class='sentence'>Access control does not prevent members from being found by name lookup or
implicit conversions to base classes from being considered<a class='hidden_link' href='#general-5.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='general-5.sentence-2' class='sentence'>
The interpretation of a given construct is
established without regard to access control<a class='hidden_link' href='#general-5.sentence-2'>.</a></div> <div id='general-5.sentence-3' class='sentence'>If the interpretation
established makes use of inaccessible members or base classes,
the construct is ill-formed<a class='hidden_link' href='#general-5.sentence-3'>.</a></div></div></div><div class='para' id='general-6'><div class='marginalizedparent'><a class='marginalized' href='#general-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4300'>#</a></div><div class='texpara'><div id='general-6.sentence-1' class='sentence'>All access controls in [class.<span class='shy'></span>access] affect the ability to name a class member
from the declaration of a particular
entity, including parts of the declaration preceding the name of the entity
being declared and, if the entity is a class, the definitions of members of
the class appearing outside the class's <a href='class.mem.general#nt:member-specification' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:member-specification'><span class='textsf'><i >member-specification</i></span></span></a><a class='hidden_link' href='#general-6.sentence-1'>.</a></div> <div id='general-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-5'>5</a></i>:&ensp;<div id='general-6.sentence-2' class='sentence'>This access also applies to implicit references to constructors,
conversion functions, and destructors<a class='hidden_link' href='#general-6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='general-7'><div class='marginalizedparent'><a class='marginalized' href='#general-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4311'>#</a></div><div class='texpara'><div id='general-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> I;    <span class='comment'>// private member</span>
  I f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>friend</span> I g<span class='parenthesis'>(</span>I<span class='parenthesis'>)</span>;
  <span class='keyword'>static</span> I x;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Q;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>struct</span> R;
<span class='keyword'>protected</span><span class='operator'>:</span>
    <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

A<span class='operator'>::</span>I A<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>
A<span class='operator'>::</span>I g<span class='parenthesis'>(</span>A<span class='operator'>::</span>I p <span class='operator'>=</span> A<span class='operator'>::</span>x<span class='parenthesis'>)</span>;
A<span class='operator'>::</span>I g<span class='parenthesis'>(</span>A<span class='operator'>::</span>I p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>
A<span class='operator'>::</span>I A<span class='operator'>::</span>x <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>A<span class='operator'>::</span>I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='operator'>::</span>Q <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>A<span class='operator'>::</span>I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> R <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> D<span class='operator'>:</span> A<span class='operator'>::</span>B, A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='general-7.sentence-1' class='sentence'>Here, all the uses of
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>I</span>
are well-formed because
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>f</span>,
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>x</span>, and <span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>Q</span>
are members of class
<span class='texttt'>A</span>
and
<span class='texttt'>g</span>
and <span class='texttt'>R</span> are friends of class
<span class='texttt'>A</span><a class='hidden_link' href='#general-7.sentence-1'>.</a></div> <div id='general-7.sentence-2' class='sentence'>This implies, for example, that access checking on the first use of
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>I</span>
must be deferred until it is determined that this use of
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>I</span>
is as the return type of a member of class
<span class='texttt'>A</span><a class='hidden_link' href='#general-7.sentence-2'>.</a></div> <div id='general-7.sentence-3' class='sentence'>Similarly, the use of <span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>B</span> as a
<a href='class.derived.general#nt:base-specifier' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:base-specifier'><span class='textsf'><i >base-specifier</i></span></span></a> is well-formed because <span class='texttt'>D</span>
is derived from <span class='texttt'>A</span>, so checking of <a href='class.derived.general#nt:base-specifier' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:base-specifier_'><span class='textsf'><i >base-specifier</i></span></span></a><i >s</i>
must be deferred until the entire <a href='class.derived.general#nt:base-specifier-list' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:base-specifier-list'><span class='textsf'><i >base-specifier-list</i></span></span></a> has been seen<a class='hidden_link' href='#general-7.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-8'><div class='marginalizedparent'><a class='marginalized' href='#general-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4358'>#</a></div><div class='texpara'><div id='general-8.sentence-1' class='sentence'><a class='index' id=':argument,access_checking_and_default'></a><a class='index' id=':access_control,default_argument'></a>Access is checked for a default argument (<a href='dcl.fct.default' title='9.3.4.7&emsp;Default arguments'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>default]</a>)
at the point of declaration,
rather than at any points of use of the default argument<a class='hidden_link' href='#general-8.sentence-1'>.</a></div> <div id='general-8.sentence-2' class='sentence'>Access checking for default arguments in function templates and in
member functions of class templates is performed as described in <a href='temp.inst' title='13.9.2&emsp;Implicit instantiation'>[temp.<span class='shy'></span>inst]</a><a class='hidden_link' href='#general-8.sentence-2'>.</a></div></div></div><div class='para' id='general-9'><div class='marginalizedparent'><a class='marginalized' href='#general-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4367'>#</a></div><div class='texpara'><div id='general-9.sentence-1' class='sentence'>Access for a default <a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument'><span class='textsf'><i >template-argument</i></span></span></a> (<a href='temp.param' title='13.2&emsp;Template parameters'>[temp.<span class='shy'></span>param]</a>)
is checked in the context in which it appears rather than at any
points of use of it<a class='hidden_link' href='#general-9.sentence-1'>.</a></div> <div id='general-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> C <span class='curlybracket'>{</span>
<span class='keyword'>protected</span><span class='operator'>:</span>
  <span class='keyword'>typedef</span> T TT;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span> V <span class='operator'>=</span> <span class='keyword'>typename</span> U<span class='operator'>::</span>TT<span class='anglebracket'>&gt;</span>
<span class='keyword'>class</span> D <span class='operator'>:</span> <span class='keyword'>public</span> U <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

D <span class='anglebracket'>&lt;</span>C<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span> <span class='anglebracket'>&gt;</span><span class='operator'>*</span> d;       <span class='comment'>// access error, <span class='tcode_in_codeblock'>C&#x200b;::&#x200b;TT</span> is protected</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-101'><div class='texpara'><a class='footnotenum' href='#footnote-101'>101)</a><a class='footnoteBacklink' href='#footnoteref-101'>101)</a> <div id='footnote-101.sentence-1' class='sentence'>Access
permissions are thus transitive and cumulative to nested
and local classes<a class='hidden_link' href='#footnote-101.sentence-1'>.</a></div></div></div></div><div id='spec' class='section'><h3 ><a class='secnum' href='#spec' style='min-width:80pt'>11.8.2</a> Access specifiers <a class='abbr_ref' href='class.access.spec'>[class.access.spec]</a></h3><div class='texpara'><a class='index' id=':access_specifier'></a></div><div class='para' id='spec-1'><div class='marginalizedparent'><a class='marginalized' href='#spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4389'>#</a></div><div class='texpara'><div id='spec-1.sentence-1' class='sentence'>Member declarations can be labeled by an
<a href='class.derived.general#nt:access-specifier' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:access-specifier'><span class='textsf'><i >access-specifier</i></span></span></a> (<a href='class.derived' title='11.7&emsp;Derived classes'>[class.<span class='shy'></span>derived]</a>):</div></div><div class='texpara'><div class='simplebnf'>
<a href='class.derived.general#nt:access-specifier' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:access-specifier_'><span class='textsf'><i >access-specifier</i></span></span></a> <span class='terminal'><span class='operator'>:</span></span> <a href='class.mem.general#nt:member-specification' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:member-specification_'><span class='textsf'><i >member-specification</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</div></div><div class='texpara'><div id='spec-1.sentence-2' class='sentence'>An
<a href='class.derived.general#nt:access-specifier' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:access-specifier__'><span class='textsf'><i >access-specifier</i></span></span></a>
specifies the access rules for members following it
until the end of the class or until another
<a href='class.derived.general#nt:access-specifier' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:access-specifier___'><span class='textsf'><i >access-specifier</i></span></span></a>
is encountered<a class='hidden_link' href='#spec-1.sentence-2'>.</a></div> <div id='spec-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#spec-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a;            <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;a</span> is private by default: <span id=':class_'><span class='tcode_in_codeblock'>class</span></span> used</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>int</span> b;            <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;b</span> is public</span>
  <span class='keyword'>int</span> c;            <span class='comment'>// <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;c</span> is public</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='spec-2'><div class='marginalizedparent'><a class='marginalized' href='#spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4414'>#</a></div><div class='texpara'><div id='spec-2.sentence-1' class='sentence'>Any number of access specifiers is allowed and no particular order is required<a class='hidden_link' href='#spec-2.sentence-1'>.</a></div> <div id='spec-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#spec-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;a</span> is public by default: <span id=':struct_'><span class='tcode_in_codeblock'>struct</span></span> used</span>
<span class='keyword'>protected</span><span class='operator'>:</span>
  <span class='keyword'>int</span> b;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;b</span> is protected</span>
<span class='keyword'>private</span><span class='operator'>:</span>
  <span class='keyword'>int</span> c;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;c</span> is private</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>int</span> d;            <span class='comment'>// <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;d</span> is public</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='spec-3'><div class='marginalizedparent'><a class='marginalized' href='#spec-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4430'>#</a></div><div class='texpara'><div id='spec-3.sentence-1' class='sentence'>When a member is redeclared within its class definition,
the access specified at its redeclaration shall
be the same as at its initial declaration<a class='hidden_link' href='#spec-3.sentence-1'>.</a></div> <div id='spec-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#spec-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> A;
  <span class='keyword'>enum</span> E <span class='operator'>:</span> <span class='keyword'>int</span>;
<span class='keyword'>private</span><span class='operator'>:</span>
  <span class='keyword'>class</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                  <span class='comment'>// error: cannot change access</span>
  <span class='keyword'>enum</span> E<span class='operator'>:</span> <span class='keyword'>int</span> <span class='curlybracket'>{</span> e0 <span class='curlybracket'>}</span>;           <span class='comment'>// error: cannot change access</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='spec-4'><div class='marginalizedparent'><a class='marginalized' href='#spec-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4446'>#</a></div><div class='texpara'><div id='spec-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#spec-note-1'>1</a></i>:&ensp;<div id='spec-4.sentence-1' class='sentence'>In a derived class, the lookup of a base class name will find the
injected-class-name instead of the name of the base class in the scope
in which it was declared<a class='hidden_link' href='#spec-4.sentence-1'>.</a></div> <div id='spec-4.sentence-2' class='sentence'>The injected-class-name might be less accessible
than the name of the base class in the scope in which it was declared<a class='hidden_link' href='#spec-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div><div class='texpara'><div id='spec-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#spec-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> B <span class='operator'>:</span> <span class='keyword'>private</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> C <span class='operator'>:</span> <span class='keyword'>public</span> B <span class='curlybracket'>{</span>
  A<span class='operator'>*</span> p;             <span class='comment'>// error: injected-class-name <span class='tcode_in_codeblock'>A</span> is inaccessible</span>
  <span class='operator'>::</span>A<span class='operator'>*</span> q;           <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='base' class='section'><h3 ><a class='secnum' href='#base' style='min-width:80pt'>11.8.3</a> Accessibility of base classes and base class members <a class='abbr_ref' href='class.access.base'>[class.access.base]</a></h3><div class='texpara'><a class='index' id=':access_control,base_class'></a><a class='index' id=':access_specifier_'></a><a class='index' id=':base_class,private'></a><a class='index' id=':base_class,protected'></a><a class='index' id=':base_class,public'></a></div><div class='para' id='base-1'><div class='marginalizedparent'><a class='marginalized' href='#base-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4472'>#</a></div><div class='texpara'><div id='base-1.sentence-1' class='sentence'>If a class is declared to be a base class (<a href='class.derived' title='11.7&emsp;Derived classes'>[class.<span class='shy'></span>derived]</a>) for another class using the
<span id=':public'><span class='texttt'><span class='keyword'>public</span></span></span>
access specifier, the
public members of the base class are accessible as
public members of the derived class and
protected members of the base class are accessible as
protected members of the derived class<a class='hidden_link' href='#base-1.sentence-1'>.</a></div> <div id='base-1.sentence-2' class='sentence'>If a class is declared to be a base class for another class using the
<span id=':protected'><span class='texttt'><span class='keyword'>protected</span></span></span>
access specifier, the
public and protected members of the base class are accessible as
protected members of the derived class<a class='hidden_link' href='#base-1.sentence-2'>.</a></div> <div id='base-1.sentence-3' class='sentence'>If a class is declared to be a base class for another class using the
<span id=':private'><span class='texttt'><span class='keyword'>private</span></span></span>
access specifier, the
public and protected
members of the base class are accessible as private
members of the derived class<a class='hidden_link' href='#base-1.sentence-3'>.</a><a class='footnoteref' href='#footnote-102' id='footnoteref-102' title='As specified previously in [class.access], private members of a base class remain inaccessible even to derived classes unless friend declarations within the base class definition are used to grant access explicitly.'>102</a></div></div></div><div class='para' id='base-2'><div class='marginalizedparent'><a class='marginalized' href='#base-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4498'>#</a></div><div class='texpara'><div id='base-2.sentence-1' class='sentence'>In the absence of an
<a href='class.derived.general#nt:access-specifier' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:access-specifier____'><span class='textsf'><i >access-specifier</i></span></span></a>
for a base class,
<span id=':public_'><span class='texttt'><span class='keyword'>public</span></span></span>
is assumed when the derived class is
defined with the <a href='class.pre#nt:class-key' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-key'><span class='textsf'><i >class-key</i></span></span></a>
<span id=':struct__'><span class='texttt'><span class='keyword'>struct</span></span></span>
and
<span id=':private_'><span class='texttt'><span class='keyword'>private</span></span></span>
is assumed when the class is
defined with the <a href='class.pre#nt:class-key' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-key_'><span class='textsf'><i >class-key</i></span></span></a>
<span id=':class__'><span class='texttt'><span class='keyword'>class</span></span></span><a class='hidden_link' href='#base-2.sentence-1'>.</a></div> <div id='base-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#base-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> D1 <span class='operator'>:</span> <span class='keyword'>private</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> D2 <span class='operator'>:</span> <span class='keyword'>public</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> D3 <span class='operator'>:</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>B</span> private by default</span>
<span class='keyword'>struct</span> D4 <span class='operator'>:</span> <span class='keyword'>public</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D5 <span class='operator'>:</span> <span class='keyword'>private</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D6 <span class='operator'>:</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>B</span> public by default</span>
<span class='keyword'>class</span> D7 <span class='operator'>:</span> <span class='keyword'>protected</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D8 <span class='operator'>:</span> <span class='keyword'>protected</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='base-2.sentence-2' class='sentence'>Here
<span class='texttt'>B</span>
is a public base of
<span class='texttt'>D2</span>,
<span class='texttt'>D4</span>,
and
<span class='texttt'>D6</span>,
a private base of
<span class='texttt'>D1</span>,
<span class='texttt'>D3</span>,
and
<span class='texttt'>D5</span>,
and a protected base of
<span class='texttt'>D7</span>
and
<span class='texttt'>D8</span><a class='hidden_link' href='#base-2.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='base-3'><div class='marginalizedparent'><a class='marginalized' href='#base-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4542'>#</a></div><div class='texpara'><div id='base-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#base-note-1'>1</a></i>:&ensp;<div id='base-3.sentence-1' class='sentence'>A member of a private base class can be inaccessible as inherited,
but accessible directly<a class='hidden_link' href='#base-3.sentence-1'>.</a></div> <div id='base-3.sentence-2' class='sentence'>Because of the rules on pointer conversions (<a href='conv.ptr' title='7.3.12&emsp;Pointer conversions'>[conv.<span class='shy'></span>ptr]</a>) and
explicit casts (<a href='expr.type.conv' title='7.6.1.4&emsp;Explicit type conversion (functional notation)'>[expr.<span class='shy'></span>type.<span class='shy'></span>conv]</a>, <a href='expr.static.cast' title='7.6.1.9&emsp;Static cast'>[expr.<span class='shy'></span>static.<span class='shy'></span>cast]</a>, <a href='expr.cast' title='7.6.3&emsp;Explicit type conversion (cast notation)'>[expr.<span class='shy'></span>cast]</a>),
a conversion from a pointer to a derived class to a pointer
to an inaccessible base class can be ill-formed if an implicit conversion
is used, but well-formed if an explicit cast is used<a class='hidden_link' href='#base-3.sentence-2'>.</a></div> <div id='base-3.sentence-3' class='sentence'>For example,</div></div><div class='texpara'><span class='codeblock'><span class='keyword'>class</span> B <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>int</span> mi;                       <span class='comment'>// non-static member</span>
  <span class='keyword'>static</span> <span class='keyword'>int</span> si;                <span class='comment'>// static member</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>class</span> D <span class='operator'>:</span> <span class='keyword'>private</span> B <span class='curlybracket'>{</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>class</span> DD <span class='operator'>:</span> <span class='keyword'>public</span> D <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> DD<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  mi <span class='operator'>=</span> <span class='literal'>3</span>;                       <span class='comment'>// error: <span class='tcode_in_codeblock'>mi</span> is private in <span class='tcode_in_codeblock'>D</span></span>
  si <span class='operator'>=</span> <span class='literal'>3</span>;                       <span class='comment'>// error: <span class='tcode_in_codeblock'>si</span> is private in <span class='tcode_in_codeblock'>D</span></span>
  <span class='operator'>::</span>B  b;
  b<span class='operator'>.</span>mi <span class='operator'>=</span> <span class='literal'>3</span>;                     <span class='comment'>// OK (<span class='tcode_in_codeblock'>b.mi</span> is different from <span class='tcode_in_codeblock'>this-&gt;mi</span>)</span>
  b<span class='operator'>.</span>si <span class='operator'>=</span> <span class='literal'>3</span>;                     <span class='comment'>// OK (<span class='tcode_in_codeblock'>b.si</span> is different from <span class='tcode_in_codeblock'>this-&gt;si</span>)</span>
  <span class='operator'>::</span>B<span class='operator'>::</span>si <span class='operator'>=</span> <span class='literal'>3</span>;                  <span class='comment'>// OK</span>
  <span class='operator'>::</span>B<span class='operator'>*</span> bp1 <span class='operator'>=</span> <span class='keyword'>this</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>B</span> is a private base class</span>
  <span class='operator'>::</span>B<span class='operator'>*</span> bp2 <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='operator'>::</span>B<span class='operator'>*</span><span class='parenthesis'>)</span><span class='keyword'>this</span>;        <span class='comment'>// OK with cast</span>
  bp2<span class='operator'>-</span><span class='anglebracket'>&gt;</span>mi <span class='operator'>=</span> <span class='literal'>3</span>;                  <span class='comment'>// OK, access through a pointer to <span class='tcode_in_codeblock'>B</span>.</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='base-4'><div class='marginalizedparent'><a class='marginalized' href='#base-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4579'>#</a></div><div class='texpara'><div id='base-4.sentence-1' class='sentence'>A base class
<span class='texttt'>B</span>
of
<span class='texttt'>N</span>
is
<a class='hidden_link' href='#def:accessible' title='11.8.3&emsp;Accessibility of base classes and base class members&emsp;[class.access.base]'><span id='def:accessible'><i >accessible</i></span></a>
at
<i >R</i>,
if
<ul class='itemize'><li id='base-4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#base-4.1'>(4.1)</a></div>an invented public member of
<span class='texttt'>B</span>
would be a public member of
<span class='texttt'>N</span>, or</li><li id='base-4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#base-4.2'>(4.2)</a></div><i >R</i>
occurs in a direct member or friend of class
<span class='texttt'>N</span>,
and an invented public member of
<span class='texttt'>B</span>
would be a private or protected member of
<span class='texttt'>N</span>, or</li><li id='base-4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#base-4.3'>(4.3)</a></div><i >R</i>
occurs in a direct member or friend of a class
<span class='texttt'>P</span>
derived from
<span class='texttt'>N</span>,
and an invented public member of
<span class='texttt'>B</span>
would be a private or protected member of
<span class='texttt'>P</span>, or</li><li id='base-4.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#base-4.4'>(4.4)</a></div>there exists a class
<span class='texttt'>S</span>
such that
<span class='texttt'>B</span>
is a base class of
<span class='texttt'>S</span>
accessible at
<i >R</i>
and
<span class='texttt'>S</span>
is a base class of
<span class='texttt'>N</span>
accessible at
<i >R</i><a class='hidden_link' href='#base-4.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='base-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#base-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> B <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>int</span> m;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> S<span class='operator'>:</span> <span class='keyword'>private</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> N;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> N<span class='operator'>:</span> <span class='keyword'>private</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    B<span class='operator'>*</span> p <span class='operator'>=</span> <span class='keyword'>this</span>;    <span class='comment'>// OK because class <span class='tcode_in_codeblock'>S</span> satisfies the fourth condition above: <span class='tcode_in_codeblock'>B</span> is a base class of <span class='tcode_in_codeblock'>N</span></span>
                    <span class='comment'>// accessible in <span class='tcode_in_codeblock'>f()</span> because <span class='tcode_in_codeblock'>B</span> is an accessible base class of <span class='tcode_in_codeblock'>S</span> and <span class='tcode_in_codeblock'>S</span> is an accessible</span>
                    <span class='comment'>// base class of <span class='tcode_in_codeblock'>N</span>.</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='base-5'><div class='marginalizedparent'><a class='marginalized' href='#base-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4651'>#</a></div><div class='texpara'><div id='base-5.sentence-1' class='sentence'>If a base class is accessible, one can implicitly convert a pointer to
a derived class to a pointer to that base class (<a href='conv.ptr' title='7.3.12&emsp;Pointer conversions'>[conv.<span class='shy'></span>ptr]</a>, <a href='conv.mem' title='7.3.13&emsp;Pointer-to-member conversions'>[conv.<span class='shy'></span>mem]</a>)<a class='hidden_link' href='#base-5.sentence-1'>.</a></div> <div id='base-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#base-note-2'>2</a></i>:&ensp;<div id='base-5.sentence-2' class='sentence'>It follows that
members and friends of a class
<span class='texttt'>X</span>
can implicitly convert an
<span class='texttt'>X<span class='operator'>*</span></span>
to a pointer to a private or protected immediate base class of
<span class='texttt'>X</span><a class='hidden_link' href='#base-5.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='base-5.sentence-3' class='sentence'>
The access to a member is affected by the class in which the member is
named<a class='hidden_link' href='#base-5.sentence-3'>.</a></div> <div id='base-5.sentence-4' class='sentence'>This naming class is
the class in whose scope name lookup performed a search that found the member<a class='hidden_link' href='#base-5.sentence-4'>.</a></div> <div id='base-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#base-note-3'>3</a></i>:&ensp;<div id='base-5.sentence-5' class='sentence'>This class can be explicit, e.g., when a
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id'><span class='textsf'><i >qualified-id</i></span></span></a>
is used, or implicit, e.g., when a class member access operator (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>) is used (including cases where an implicit
“<span class='texttt'><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span></span>”
is
added)<a class='hidden_link' href='#base-5.sentence-5'>.</a></div> <div id='base-5.sentence-6' class='sentence'>If both a class member access operator and a
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_'><span class='textsf'><i >qualified-id</i></span></span></a>
are used to name the member (as in
<span class='texttt'>p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>T<span class='operator'>&#x200b;::&#x200b;</span>m</span>),
the class naming the member is the class denoted by the
<a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier'><span class='textsf'><i >nested-name-specifier</i></span></span></a>
of the
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id__'><span class='textsf'><i >qualified-id</i></span></span></a>
(that is,
<span class='texttt'>T</span>)<a class='hidden_link' href='#base-5.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='base-5.sentence-7' class='sentence'>
A member
<span class='texttt'>m</span>
is accessible at the point
<i >R</i>
when named in class
<span class='texttt'>N</span>
if
<ul class='itemize'><li id='base-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#base-5.1'>(5.1)</a></div><span class='texttt'>m</span>
as a member of
<span class='texttt'>N</span>
is public, or</li><li id='base-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#base-5.2'>(5.2)</a></div><span class='texttt'>m</span>
as a member of
<span class='texttt'>N</span>
is private, and
<i >R</i>
occurs in a direct member or friend of class
<span class='texttt'>N</span>,
or</li><li id='base-5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#base-5.3'>(5.3)</a></div><span class='texttt'>m</span>
as a member of
<span class='texttt'>N</span>
is protected, and
<i >R</i>
occurs in a direct member or friend of class
<span class='texttt'>N</span>,
or in a member of a class
<span class='texttt'>P</span>
derived from
<span class='texttt'>N</span>,
where
<span class='texttt'>m</span>
as a member of
<span class='texttt'>P</span>
is public, private, or protected, or</li><li id='base-5.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#base-5.4'>(5.4)</a></div>there exists a base class
<span class='texttt'>B</span>
of
<span class='texttt'>N</span>
that is accessible at
<i >R</i>,
and
<span class='texttt'>m</span>
is accessible at
<i >R</i>
when named in class
<span class='texttt'>B</span><a class='hidden_link' href='#base-5.sentence-7'>.</a> <div class='texpara'><div id='base-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#base-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> B;
<span class='keyword'>class</span> A <span class='curlybracket'>{</span>
<span class='keyword'>private</span><span class='operator'>:</span>
  <span class='keyword'>int</span> i;
  <span class='keyword'>friend</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>class</span> B <span class='operator'>:</span> <span class='keyword'>public</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>i <span class='operator'>=</span> <span class='literal'>1</span>;         <span class='comment'>// OK, <span class='tcode_in_codeblock'>B*</span> can be implicitly converted to <span class='tcode_in_codeblock'>A*</span>, and <span class='tcode_in_codeblock'>f</span> has access to <span class='tcode_in_codeblock'>i</span> in <span class='tcode_in_codeblock'>A</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li></ul></div></div></div><div class='para' id='base-6'><div class='marginalizedparent'><a class='marginalized' href='#base-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4753'>#</a></div><div class='texpara'><div id='base-6.sentence-1' class='sentence'>If a class member access operator, including an implicit
“<span class='texttt'><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span></span>”,
is used to access a non-static data member or non-static
member function, the reference is ill-formed if the
left operand (considered as a pointer in the
“<span class='texttt'><span class='operator'>.</span></span>”
operator case) cannot be implicitly converted to a
pointer to the naming class of the right operand<a class='hidden_link' href='#base-6.sentence-1'>.</a></div> <div id='base-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#base-note-4'>4</a></i>:&ensp;<div id='base-6.sentence-2' class='sentence'>This requirement is in addition to the requirement that
the member be accessible as named<a class='hidden_link' href='#base-6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-102'><div class='texpara'><a class='footnotenum' href='#footnote-102'>102)</a><a class='footnoteBacklink' href='#footnoteref-102'>102)</a> <div id='footnote-102.sentence-1' class='sentence'>As specified previously in [class.<span class='shy'></span>access],
private members of a base class remain inaccessible even to derived classes
unless friend
declarations within the base class definition are used to grant access explicitly<a class='hidden_link' href='#footnote-102.sentence-1'>.</a></div></div></div></div><div id='class.friend' class='section'><h3 ><a class='secnum' href='#class.friend' style='min-width:80pt'>11.8.4</a> Friends <a class='abbr_ref' href='class.friend'>[class.friend]</a></h3><div class='texpara'><a class='index' id=':friend_function,access_and'></a><a class='index' id=':access_control,friend_function'></a></div><div class='para' id='class.friend-1'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4771'>#</a></div><div class='texpara'><div id='class.friend-1.sentence-1' class='sentence'>A friend of a class is a function or class that is
given permission to name the private and protected members of the class<a class='hidden_link' href='#class.friend-1.sentence-1'>.</a></div> <div id='class.friend-1.sentence-2' class='sentence'>A class specifies its friends, if any, by way of friend declarations<a class='hidden_link' href='#class.friend-1.sentence-2'>.</a></div> <div id='class.friend-1.sentence-3' class='sentence'>Such declarations give special access rights to the friends, but they
do not make the nominated friends members of the befriending class<a class='hidden_link' href='#class.friend-1.sentence-3'>.</a></div> <div id='class.friend-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.friend-example-1'>1</a></i>:&ensp;<div id='class.friend-1.sentence-4' class='sentence'>The following example illustrates the differences between
members and friends:
<a class='index' id=':friend_function,member_function_and'></a>
<span class='codeblock'><span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a;
  <span class='keyword'>friend</span> <span class='keyword'>void</span> friend_set<span class='parenthesis'>(</span>X<span class='operator'>*</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>void</span> member_set<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> friend_set<span class='parenthesis'>(</span>X<span class='operator'>*</span> p, <span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>a <span class='operator'>=</span> i; <span class='curlybracket'>}</span>
<span class='keyword'>void</span> X<span class='operator'>::</span>member_set<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> a <span class='operator'>=</span> i; <span class='curlybracket'>}</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  X obj;
  friend_set<span class='parenthesis'>(</span><span class='operator'>&amp;</span>obj,<span class='literal'>10</span><span class='parenthesis'>)</span>;
  obj<span class='operator'>.</span>member_set<span class='parenthesis'>(</span><span class='literal'>10</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.friend-2'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4801'>#</a></div><div class='texpara'><div id='class.friend-2.sentence-1' class='sentence'><a class='index' id=':friend,class_access_and'></a>Declaring a class to be a friend implies that private and
protected members of the class granting friendship can be named in the
<a href='class.derived.general#nt:base-specifier' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:base-specifier__'><span class='textsf'><i >base-specifier</i></span></span></a><i >s</i> and member declarations of the befriended
class<a class='hidden_link' href='#class.friend-2.sentence-1'>.</a></div> <div id='class.friend-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.friend-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>friend</span> <span class='keyword'>class</span> X;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> X <span class='operator'>:</span> A<span class='operator'>::</span>B <span class='curlybracket'>{</span>               <span class='comment'>// OK, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> accessible to friend</span>
  A<span class='operator'>::</span>B mx;                      <span class='comment'>// OK, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> accessible to member of friend</span>
  <span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
    A<span class='operator'>::</span>B my;                    <span class='comment'>// OK, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> accessible to nested member of friend</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div> <div id='class.friend-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.friend-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>enum</span> <span class='curlybracket'>{</span> a<span class='operator'>=</span><span class='literal'>100</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>friend</span> <span class='keyword'>class</span> Y;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> v<span class='squarebracket'>[</span>X<span class='operator'>::</span>a<span class='squarebracket'>]</span>;                  <span class='comment'>// OK, <span class='tcode_in_codeblock'>Y</span> is a friend of <span class='tcode_in_codeblock'>X</span></span>
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> Z <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> v<span class='squarebracket'>[</span>X<span class='operator'>::</span>a<span class='squarebracket'>]</span>;                  <span class='comment'>// error: <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;a</span> is private</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.friend-3'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4839'>#</a></div><div class='texpara'><div id='class.friend-3.sentence-1' class='sentence'>A friend declaration that does not declare a function
shall have one of the following forms:
<div class='simplebnf'>
<span id=':friend'><span class='texttt'><span class='keyword'>friend</span></span></span> <a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.5&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a> <span class='terminal'>;</span><br/><span id=':friend_'><span class='texttt'><span class='keyword'>friend</span></span></span> <a href='dcl.type.simple#nt:simple-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:simple-type-specifier'><span class='textsf'><i >simple-type-specifier</i></span></span></a> <span class='terminal'>;</span><br/><span id=':friend__'><span class='texttt'><span class='keyword'>friend</span></span></span> <a href='temp.res.general#nt:typename-specifier' title='13.8.1&emsp;General&emsp;[temp.res.general]'><span id='ntref:typename-specifier'><span class='textsf'><i >typename-specifier</i></span></span></a> <span class='terminal'>;</span>
</div></div></div><div class='texpara'><div id='class.friend-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.friend-note-1'>1</a></i>:&ensp;<div id='class.friend-3.sentence-2' class='sentence'>A friend declaration can be the
<a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration'><span class='textsf'><i >declaration</i></span></span></a> in
a <a href='temp.pre#nt:template-declaration' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-declaration'><span class='textsf'><i >template-declaration</i></span></span></a> (<a href='temp.pre' title='13.1&emsp;Preamble'>[temp.<span class='shy'></span>pre]</a>, <a href='temp.friend' title='13.7.5&emsp;Friends'>[temp.<span class='shy'></span>friend]</a>)<a class='hidden_link' href='#class.friend-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='class.friend-3.sentence-3' class='sentence'>
If the
type specifier in a friend declaration designates a (possibly
cv-qualified) class type, that class is declared as a friend; otherwise, the
friend declaration is ignored<a class='hidden_link' href='#class.friend-3.sentence-3'>.</a></div> <div id='class.friend-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.friend-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> C;
<span class='keyword'>typedef</span> C Ct;

<span class='keyword'>class</span> X1 <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> C;                     <span class='comment'>// OK, <span class='tcode_in_codeblock'>class C</span> is a friend</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> X2 <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> Ct;                    <span class='comment'>// OK, <span class='tcode_in_codeblock'>class C</span> is a friend</span>
  <span class='keyword'>friend</span> D;                     <span class='comment'>// error: <span class='tcode_in_codeblock'>D</span> not found</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> D;               <span class='comment'>// OK, elaborated-type-specifier declares new class</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> R <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> T;
<span class='curlybracket'>}</span>;

R<span class='anglebracket'>&lt;</span>C<span class='anglebracket'>&gt;</span> rc;                        <span class='comment'>// <span class='tcode_in_codeblock'>class C</span> is a friend of <span class='tcode_in_codeblock'>R&lt;C&gt;</span></span>
R<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> Ri;                      <span class='comment'>// OK, <span class='tcode_in_codeblock'>"friend int;"</span> is ignored</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.friend-4'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4881'>#</a></div><div class='texpara'><div id='class.friend-4.sentence-1' class='sentence'><a class='index' id=':friend_function,linkage_of'></a>A function first declared in a friend declaration
has the linkage of the namespace of which it is a member (<a href='basic.link' title='6.6&emsp;Program and linkage'>[basic.<span class='shy'></span>link]</a>)<a class='hidden_link' href='#class.friend-4.sentence-1'>.</a></div> <div id='class.friend-4.sentence-2' class='sentence'>Otherwise, the function retains its previous linkage (<a href='dcl.stc' title='9.2.2&emsp;Storage class specifiers'>[dcl.<span class='shy'></span>stc]</a>)<a class='hidden_link' href='#class.friend-4.sentence-2'>.</a></div></div></div><div class='para nonNormativeOnly' id='class.friend-5'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4887'>#</a></div><div class='texpara'><a class='index' id=':declaration,overloaded_name_and_friend'></a><div id='class.friend-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.friend-note-2'>2</a></i>:&ensp;<div id='class.friend-5.sentence-1' class='sentence'>A friend declaration refers to an entity, not (all overloads of) a name<a class='hidden_link' href='#class.friend-5.sentence-1'>.</a></div> <div id='class.friend-5.sentence-2' class='sentence'>A member function of a class
<span class='texttt'>X</span>
can be a friend of
a class
<span class='texttt'>Y</span><a class='hidden_link' href='#class.friend-5.sentence-2'>.</a></div> <a class='index' id=':member_function,friend'></a><div id='class.friend-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.friend-example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>char</span><span class='operator'>*</span> X<span class='operator'>::</span>foo<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  <span class='keyword'>friend</span> X<span class='operator'>::</span>X<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span>;            <span class='comment'>// constructors can be friends</span>
  <span class='keyword'>friend</span> X<span class='operator'>::</span><span class='operator'>~</span>X<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;               <span class='comment'>// destructors can be friends</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='class.friend-6'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4908'>#</a></div><div class='texpara'><div id='class.friend-6.sentence-1' class='sentence'><a class='index' id=':friend_function,inline'></a>A function may be defined in a friend declaration of a class if and only if the
class is a non-local class (<a href='class.local' title='11.6&emsp;Local class declarations'>[class.<span class='shy'></span>local]</a>) and the function name is unqualified<a class='hidden_link' href='#class.friend-6.sentence-1'>.</a></div> <div id='class.friend-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.friend-example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> M <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>           <span class='comment'>// definition of global <span class='tcode_in_codeblock'>f</span>, a friend of <span class='tcode_in_codeblock'>M</span>,</span>
                                <span class='comment'>// not the definition of a member function</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.friend-7'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4921'>#</a></div><div class='texpara'><div id='class.friend-7.sentence-1' class='sentence'>Such a function is implicitly an inline (<a href='dcl.inline' title='9.2.8&emsp;The inline specifier'>[dcl.<span class='shy'></span>inline]</a>) function
if it is attached to the global module<a class='hidden_link' href='#class.friend-7.sentence-1'>.</a></div> <div id='class.friend-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.friend-note-3'>3</a></i>:&ensp;<div id='class.friend-7.sentence-2' class='sentence'>If a friend function is defined outside a class,
it is not in the scope of the class<a class='hidden_link' href='#class.friend-7.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='class.friend-8'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4929'>#</a></div><div class='texpara'><div id='class.friend-8.sentence-1' class='sentence'>No
<a href='dcl.stc#nt:storage-class-specifier' title='9.2.2&emsp;Storage class specifiers&emsp;[dcl.stc]'><span id='ntref:storage-class-specifier'><span class='textsf'><i >storage-class-specifier</i></span></span></a>
shall appear in the
<a href='dcl.spec.general#nt:decl-specifier-seq' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier-seq'><span class='textsf'><i >decl-specifier-seq</i></span></span></a>
of a friend declaration<a class='hidden_link' href='#class.friend-8.sentence-1'>.</a></div></div></div><div class='para' id='class.friend-9'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4936'>#</a></div><div class='texpara'><div id='class.friend-9.sentence-1' class='sentence'><a class='index' id=':friend,access_specifier_and'></a>A member nominated by a friend declaration shall be accessible in the
class containing the friend declaration<a class='hidden_link' href='#class.friend-9.sentence-1'>.</a></div> <div id='class.friend-9.sentence-2' class='sentence'>The meaning of the friend declaration is the same whether the friend declaration
appears in the private, protected, or public (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>)
portion of the class
<a href='class.mem.general#nt:member-specification' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:member-specification__'><span class='textsf'><i >member-specification</i></span></span></a><a class='hidden_link' href='#class.friend-9.sentence-2'>.</a></div></div></div><div class='para' id='class.friend-10'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4945'>#</a></div><div class='texpara'><div id='class.friend-10.sentence-1' class='sentence'><a class='index' id=':friend,inheritance_and'></a>Friendship is neither inherited nor transitive<a class='hidden_link' href='#class.friend-10.sentence-1'>.</a></div> <div id='class.friend-example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.friend-example-7'>7</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> B;
  <span class='keyword'>int</span> a;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> C;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> C  <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>a<span class='operator'>+</span><span class='operator'>+</span>;         <span class='comment'>// error: <span class='tcode_in_codeblock'>C</span> is not a friend of <span class='tcode_in_codeblock'>A</span> despite being a friend of a friend</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> D <span class='operator'>:</span> <span class='keyword'>public</span> B  <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>a<span class='operator'>+</span><span class='operator'>+</span>;         <span class='comment'>// error: <span class='tcode_in_codeblock'>D</span> is not a friend of <span class='tcode_in_codeblock'>A</span> despite being derived from a friend</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.friend-11'><div class='marginalizedparent'><a class='marginalized' href='#class.friend-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L4973'>#</a></div><div class='texpara'><a class='index' id=':local_class,friend'></a><a class='index' id=':friend,local_class_and'></a><div id='class.friend-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.friend-note-4'>4</a></i>:&ensp;<div id='class.friend-11.sentence-1' class='sentence'>A friend declaration never binds any names (<a href='dcl.meaning' title='9.3.4&emsp;Meaning of declarators'>[dcl.<span class='shy'></span>meaning]</a>, <a href='dcl.type.elab' title='9.2.9.5&emsp;Elaborated type specifiers'>[dcl.<span class='shy'></span>type.<span class='shy'></span>elab]</a>)<a class='hidden_link' href='#class.friend-11.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div>
<div id='class.friend-example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.friend-example-8'>8</a></i>:&ensp;<span class='codeblock'><span class='comment'>// Assume <span class='tcode_in_codeblock'>f</span> and <span class='tcode_in_codeblock'>g</span> have not yet been declared.</span>
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f2<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='keyword'>namespace</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
    <span class='keyword'>friend</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f(X)</span> is a friend</span>
    <span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
      <span class='keyword'>friend</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span> is a friend</span>
      <span class='keyword'>friend</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;       <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span> is a friend</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;h</span> not considered</span>
      <span class='keyword'>friend</span> <span class='keyword'>void</span> f2<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;    <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;f2&lt;&gt;(int)</span> is a friend</span>
    <span class='curlybracket'>}</span>;
  <span class='curlybracket'>}</span>;

  <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span>, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span> and <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span> are not visible here</span>
  X x;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>            <span class='comment'>// definition of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span></span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>       <span class='comment'>// definition of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span></span>
  <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>     <span class='comment'>// definition of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span></span>
  <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span>, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span> and <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span> are visible here and known to be friends</span>
<span class='curlybracket'>}</span>

<span class='keyword'>using</span> A<span class='operator'>::</span>x;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='operator'>::</span>f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;
  A<span class='operator'>::</span>X<span class='operator'>::</span>f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;                   <span class='comment'>// error: <span class='tcode_in_codeblock'>f</span> is not a member of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X</span></span>
  A<span class='operator'>::</span>X<span class='operator'>::</span>Y<span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                 <span class='comment'>// error: <span class='tcode_in_codeblock'>g</span> is not a member of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X&#x200b;::&#x200b;Y</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div>
<div id='class.friend-example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.friend-example-9'>9</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> X;
<span class='keyword'>void</span> a<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> Y;
  <span class='keyword'>extern</span> <span class='keyword'>void</span> b<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> X;   <span class='comment'>// OK, but <span class='tcode_in_codeblock'>X</span> is a local class, not <span class='tcode_in_codeblock'>&#x200b;::&#x200b;X</span></span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> Y;   <span class='comment'>// OK</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> Z;   <span class='comment'>// OK, introduces local class <span class='tcode_in_codeblock'>Z</span></span>
  <span class='keyword'>friend</span> <span class='keyword'>void</span> a<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='comment'>// error, <span class='tcode_in_codeblock'>&#x200b;::&#x200b;a</span> is not considered</span>
  <span class='keyword'>friend</span> <span class='keyword'>void</span> b<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='comment'>// OK</span>
  <span class='keyword'>friend</span> <span class='keyword'>void</span> c<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='comment'>// error</span>
  <span class='curlybracket'>}</span>;
  X<span class='operator'>*</span> px;            <span class='comment'>// OK, but <span class='tcode_in_codeblock'>&#x200b;::&#x200b;X</span> is found</span>
  Z<span class='operator'>*</span> pz;            <span class='comment'>// error: no <span class='tcode_in_codeblock'>Z</span> is found</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='class.protected' class='section'><h3 ><a class='secnum' href='#class.protected' style='min-width:80pt'>11.8.5</a> Protected member access <a class='abbr_ref' href='class.protected'>[class.protected]</a></h3><div class='texpara'><a class='index' id=':access_control,protected_'></a></div><div class='para' id='class.protected-1'><div class='marginalizedparent'><a class='marginalized' href='#class.protected-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L5036'>#</a></div><div class='texpara'><div id='class.protected-1.sentence-1' class='sentence'>An additional access check beyond those described earlier in [class.<span class='shy'></span>access]
is applied when a non-static data member or non-static member function is a
protected member of its naming class (<a href='#base' title='11.8.3&emsp;Accessibility of base classes and base class members'>[class.<span class='shy'></span>access.<span class='shy'></span>base]</a>)<a class='hidden_link' href='#class.protected-1.sentence-1'>.</a><a class='footnoteref' href='#footnote-103' id='footnoteref-103' title='This additional check does not apply to other members, e.g., static data members or enumerator member constants.'>103</a></div> <div id='class.protected-1.sentence-2' class='sentence'>
As described earlier, access to a protected member is granted because the
reference occurs in a friend or direct member of some class <span class='texttt'>C</span><a class='hidden_link' href='#class.protected-1.sentence-2'>.</a></div> <div id='class.protected-1.sentence-3' class='sentence'>If the access is
to form a pointer to member (<a href='expr.unary.op' title='7.6.2.2&emsp;Unary operators'>[expr.<span class='shy'></span>unary.<span class='shy'></span>op]</a>), the
<a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier_'><span class='textsf'><i >nested-name-specifier</i></span></span></a> shall denote <span class='texttt'>C</span> or a class derived from
<span class='texttt'>C</span><a class='hidden_link' href='#class.protected-1.sentence-3'>.</a></div> <div id='class.protected-1.sentence-4' class='sentence'>All other accesses involve a (possibly implicit) object
expression (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>)<a class='hidden_link' href='#class.protected-1.sentence-4'>.</a></div> <div id='class.protected-1.sentence-5' class='sentence'>In this case, the class of the object expression shall be
<span class='texttt'>C</span> or a class derived from <span class='texttt'>C</span><a class='hidden_link' href='#class.protected-1.sentence-5'>.</a></div> <div id='class.protected-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.protected-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> B <span class='curlybracket'>{</span>
<span class='keyword'>protected</span><span class='operator'>:</span>
  <span class='keyword'>int</span> i;
  <span class='keyword'>static</span> <span class='keyword'>int</span> j;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> D1 <span class='operator'>:</span> <span class='keyword'>public</span> B <span class='curlybracket'>{</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> D2 <span class='operator'>:</span> <span class='keyword'>public</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>void</span> fr<span class='parenthesis'>(</span>B<span class='operator'>*</span>,D1<span class='operator'>*</span>,D2<span class='operator'>*</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> mem<span class='parenthesis'>(</span>B<span class='operator'>*</span>,D1<span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> fr<span class='parenthesis'>(</span>B<span class='operator'>*</span> pb, D1<span class='operator'>*</span> p1, D2<span class='operator'>*</span> p2<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  pb<span class='operator'>-</span><span class='anglebracket'>&gt;</span>i <span class='operator'>=</span> <span class='literal'>1</span>;                    <span class='comment'>// error</span>
  p1<span class='operator'>-</span><span class='anglebracket'>&gt;</span>i <span class='operator'>=</span> <span class='literal'>2</span>;                    <span class='comment'>// error</span>
  p2<span class='operator'>-</span><span class='anglebracket'>&gt;</span>i <span class='operator'>=</span> <span class='literal'>3</span>;                    <span class='comment'>// OK (access through a <span class='tcode_in_codeblock'>D2</span>)</span>
  p2<span class='operator'>-</span><span class='anglebracket'>&gt;</span>B<span class='operator'>::</span>i <span class='operator'>=</span> <span class='literal'>4</span>;                 <span class='comment'>// OK (access through a <span class='tcode_in_codeblock'>D2</span>, even though naming class is <span class='tcode_in_codeblock'>B</span>)</span>
  <span class='keyword'>int</span> B<span class='operator'>::</span><span class='operator'>*</span> pmi_B <span class='operator'>=</span> <span class='operator'>&amp;</span>B<span class='operator'>::</span>i;       <span class='comment'>// error</span>
  <span class='keyword'>int</span> B<span class='operator'>::</span><span class='operator'>*</span> pmi_B2 <span class='operator'>=</span> <span class='operator'>&amp;</span>D2<span class='operator'>::</span>i;     <span class='comment'>// OK (type of <span class='tcode_in_codeblock'>&amp;D2&#x200b;::&#x200b;i</span> is <span class='tcode_in_codeblock'>int B&#x200b;::&#x200b;*</span>)</span>
  B<span class='operator'>::</span>j <span class='operator'>=</span> <span class='literal'>5</span>;                     <span class='comment'>// error: not a friend of naming class <span class='tcode_in_codeblock'>B</span></span>
  D2<span class='operator'>::</span>j <span class='operator'>=</span> <span class='literal'>6</span>;                    <span class='comment'>// OK (because refers to static member)</span>
<span class='curlybracket'>}</span>

<span class='keyword'>void</span> D2<span class='operator'>::</span>mem<span class='parenthesis'>(</span>B<span class='operator'>*</span> pb, D1<span class='operator'>*</span> p1<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  pb<span class='operator'>-</span><span class='anglebracket'>&gt;</span>i <span class='operator'>=</span> <span class='literal'>1</span>;                    <span class='comment'>// error</span>
  p1<span class='operator'>-</span><span class='anglebracket'>&gt;</span>i <span class='operator'>=</span> <span class='literal'>2</span>;                    <span class='comment'>// error</span>
  i <span class='operator'>=</span> <span class='literal'>3</span>;                        <span class='comment'>// OK (access through <span id=':this'><span class='tcode_in_codeblock'>this</span></span>)</span>
  B<span class='operator'>::</span>i <span class='operator'>=</span> <span class='literal'>4</span>;                     <span class='comment'>// OK (access through <span id=':this_'><span class='tcode_in_codeblock'>this</span></span>, qualification ignored)</span>
  <span class='keyword'>int</span> B<span class='operator'>::</span><span class='operator'>*</span> pmi_B <span class='operator'>=</span> <span class='operator'>&amp;</span>B<span class='operator'>::</span>i;       <span class='comment'>// error</span>
  <span class='keyword'>int</span> B<span class='operator'>::</span><span class='operator'>*</span> pmi_B2 <span class='operator'>=</span> <span class='operator'>&amp;</span>D2<span class='operator'>::</span>i;     <span class='comment'>// OK</span>
  j <span class='operator'>=</span> <span class='literal'>5</span>;                        <span class='comment'>// OK (because <span class='tcode_in_codeblock'>j</span> refers to static member)</span>
  B<span class='operator'>::</span>j <span class='operator'>=</span> <span class='literal'>6</span>;                     <span class='comment'>// OK (because <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;j</span> refers to static member)</span>
<span class='curlybracket'>}</span>

<span class='keyword'>void</span> g<span class='parenthesis'>(</span>B<span class='operator'>*</span> pb, D1<span class='operator'>*</span> p1, D2<span class='operator'>*</span> p2<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  pb<span class='operator'>-</span><span class='anglebracket'>&gt;</span>i <span class='operator'>=</span> <span class='literal'>1</span>;                    <span class='comment'>// error</span>
  p1<span class='operator'>-</span><span class='anglebracket'>&gt;</span>i <span class='operator'>=</span> <span class='literal'>2</span>;                    <span class='comment'>// error</span>
  p2<span class='operator'>-</span><span class='anglebracket'>&gt;</span>i <span class='operator'>=</span> <span class='literal'>3</span>;                    <span class='comment'>// error</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-103'><div class='texpara'><a class='footnotenum' href='#footnote-103'>103)</a><a class='footnoteBacklink' href='#footnoteref-103'>103)</a> <div id='footnote-103.sentence-1' class='sentence'>This
additional check does not apply to other members,
e.g., static data members or enumerator member constants<a class='hidden_link' href='#footnote-103.sentence-1'>.</a></div></div></div></div><div id='virt' class='section'><h3 ><a class='secnum' href='#virt' style='min-width:80pt'>11.8.6</a> Access to virtual functions <a class='abbr_ref' href='class.access.virt'>[class.access.virt]</a></h3><div class='texpara'><a class='index' id=':access_control,virtual_function'></a></div><div class='para' id='virt-1'><div class='marginalizedparent'><a class='marginalized' href='#virt-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L5101'>#</a></div><div class='texpara'><div id='virt-1.sentence-1' class='sentence'>The access rules ([class.<span class='shy'></span>access]) for a virtual function are determined by its declaration
and are not affected by the rules for a function that later overrides it<a class='hidden_link' href='#virt-1.sentence-1'>.</a></div> <div id='virt-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#virt-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> B <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>virtual</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> D <span class='operator'>:</span> <span class='keyword'>public</span> B <span class='curlybracket'>{</span>
<span class='keyword'>private</span><span class='operator'>:</span>
  <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  D d;
  B<span class='operator'>*</span> pb <span class='operator'>=</span> <span class='operator'>&amp;</span>d;
  D<span class='operator'>*</span> pd <span class='operator'>=</span> <span class='operator'>&amp;</span>d;

  pb<span class='operator'>-</span><span class='anglebracket'>&gt;</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                      <span class='comment'>// OK, <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f()</span> is public, <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;f()</span> is invoked</span>
  pd<span class='operator'>-</span><span class='anglebracket'>&gt;</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                      <span class='comment'>// error: <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;f()</span> is private</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='virt-2'><div class='marginalizedparent'><a class='marginalized' href='#virt-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L5127'>#</a></div><div class='texpara'><div id='virt-2.sentence-1' class='sentence'>Access is checked at the call point using the type of the expression used
to denote the object for which the member function is called
(<span class='texttt'>B<span class='operator'>*</span></span>
in the example above)<a class='hidden_link' href='#virt-2.sentence-1'>.</a></div> <div id='virt-2.sentence-2' class='sentence'>The access of the member function in the class in which it was defined
(<span class='texttt'>D</span>
in the example above) is in general not known<a class='hidden_link' href='#virt-2.sentence-2'>.</a></div></div></div></div><div id='class.paths' class='section'><h3 ><a class='secnum' href='#class.paths' style='min-width:80pt'>11.8.7</a> Multiple access <a class='abbr_ref' href='class.paths'>[class.paths]</a></h3><div class='texpara'><a class='index' id=':access_control,multiple_access'></a></div><div class='para' id='class.paths-1'><div class='marginalizedparent'><a class='marginalized' href='#class.paths-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L5139'>#</a></div><div class='texpara'><div id='class.paths-1.sentence-1' class='sentence'>If a declaration can be reached by several paths through a multiple inheritance
graph, the access is that of the path that gives most access<a class='hidden_link' href='#class.paths-1.sentence-1'>.</a></div> <div id='class.paths-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.paths-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> W <span class='curlybracket'>{</span> <span class='keyword'>public</span><span class='operator'>:</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> A <span class='operator'>:</span> <span class='keyword'>private</span> <span class='keyword'>virtual</span> W <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> B <span class='operator'>:</span> <span class='keyword'>public</span> <span class='keyword'>virtual</span> W <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> C <span class='operator'>:</span> <span class='keyword'>public</span> A, <span class='keyword'>public</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> W<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>          <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='class.paths-1.sentence-2' class='sentence'>Since
<span class='texttt'>W<span class='operator'>&#x200b;::&#x200b;</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
is available to
<span class='texttt'>C<span class='operator'>&#x200b;::&#x200b;</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
along the public path through
<span class='texttt'>B</span>,
access is allowed<a class='hidden_link' href='#class.paths-1.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='nest' class='section'><h3 ><a class='secnum' href='#nest' style='min-width:80pt'>11.8.8</a> Nested classes <a class='abbr_ref' href='class.access.nest'>[class.access.nest]</a></h3><div class='texpara'><a class='index' id=':access_control,nested_class'></a><a class='index' id=':member_function,nested_class'></a></div><div class='para' id='nest-1'><div class='marginalizedparent'><a class='marginalized' href='#nest-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/classes.tex#L5165'>#</a></div><div class='texpara'><div id='nest-1.sentence-1' class='sentence'>A nested class is a member and as such has the same access rights as any other member<a class='hidden_link' href='#nest-1.sentence-1'>.</a></div> <div id='nest-1.sentence-2' class='sentence'>The members of an enclosing class have no special access to members of a nested
class; the usual access rules ([class.<span class='shy'></span>access]) shall be obeyed<a class='hidden_link' href='#nest-1.sentence-2'>.</a></div> <div id='nest-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#nest-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> E <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> x;
  <span class='keyword'>class</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

  <span class='keyword'>class</span> I <span class='curlybracket'>{</span>
    B b;                        <span class='comment'>// OK, <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;I</span> can access <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;B</span></span>
    <span class='keyword'>int</span> y;
    <span class='keyword'>void</span> f<span class='parenthesis'>(</span>E<span class='operator'>*</span> p, <span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>x <span class='operator'>=</span> i;                 <span class='comment'>// OK, <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;I</span> can access <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;x</span></span>
    <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span>;

  <span class='keyword'>int</span> g<span class='parenthesis'>(</span>I<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>return</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>y;                <span class='comment'>// error: <span class='tcode_in_codeblock'>I&#x200b;::&#x200b;y</span> is private</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div> </div></div></div></div></body></html>