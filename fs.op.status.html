<!DOCTYPE html><html lang='en'><head><title>[fs.op.status]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>27</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>27.10</a> File systems <a class='abbr_ref' href='filesystems#fs.op.status'>[filesystems]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>27.10.15</a> Filesystem operation functions <a class='abbr_ref' href='fs.op.funcs#fs.op.status'>[fs.op.funcs]</a></h3><div id='fs.op.status'><h4 ><a class='secnum' style='min-width:118pt'>27.10.15.35</a> Status <a class='abbr_ref'>[fs.op.status]</a></h4><p ><span class='indexparent'><a class='index' id='status'></a></span></p><p ><code class='itemdecl'>
file_status status(const path&amp; p);
</code></p><div class='itemdescr'></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b63d68ab7bc08f5e969a5b44b000941e6e82eb2e/source/iostreams.tex#L14523'>#</a></div><p ><span class='textit'>Effects:</span> As if:
</p><pre class='codeblock'>
error_code ec;
file_status result = status(p, ec);
if (result.type() == file_type::none)
  throw filesystem_error(<span class='textit'>implementation-supplied-message</span>, p, ec);
return result;</pre></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b63d68ab7bc08f5e969a5b44b000941e6e82eb2e/source/iostreams.tex#L14533'>#</a></div><p ><span class='textit'>Returns:</span> See above.</p></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b63d68ab7bc08f5e969a5b44b000941e6e82eb2e/source/iostreams.tex#L14536'>#</a></div><p ><span class='textit'>Throws:</span> <span class='texttt'>filesystem_&shy;error</span>.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> <span class='texttt'>result</span> values of <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;not_&shy;found)</span>
  and <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;unknown)</span> are not considered failures and do not
  cause an exception to be thrown.<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
</p></div></div><p ><span class='indexparent'><a class='index' id='status'></a></span></p><p ><code class='itemdecl'>
file_status status(const path&amp; p, error_code&amp; ec) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b63d68ab7bc08f5e969a5b44b000941e6e82eb2e/source/iostreams.tex#L14549'>#</a></div><p ><span class='textit'>Effects:</span>
If possible, determines the attributes
    of the file <span class='texttt'>p</span> resolves to, as if by using POSIX <span class='texttt'>stat()</span>
    to obtain a POSIX <span class='texttt'>struct stat</span>.
      If, during attribute determination, the underlying file system API reports
    an error, sets <span class='texttt'>ec</span> to indicate the specific error reported.
    Otherwise, <span class='texttt'>ec.clear()</span>.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> This allows users to inspect the specifics of underlying
      API errors even when the value returned by <span class='texttt'>status()</span> is not
      <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;none)</span>. <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b63d68ab7bc08f5e969a5b44b000941e6e82eb2e/source/iostreams.tex#L14561'>#</a></div><p >Let <span class='texttt'>prms</span> denote the result of <span class='texttt'>(m &amp; perms&#x200b;::&#x200b;mask)</span>,
where <span class='texttt'>m</span> is determined as if by converting the <span class='texttt'>st_&shy;mode</span> member
of the obtained <span class='texttt'>struct stat</span> to the type <span class='texttt'>perms</span>.</p></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b63d68ab7bc08f5e969a5b44b000941e6e82eb2e/source/iostreams.tex#L14566'>#</a></div><p ><span class='textit'>Returns:</span>
</p><ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#6.1'>(6.1)</a></div><p >If <span class='texttt'>ec != error_&shy;code()</span>:
</p><ul class='itemize'><li id='6.1.1'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.1.1'>(6.1.1)</a></div><p >If the specific error indicates that <span class='texttt'>p</span> cannot be resolved
      because some element of the path does not exist, returns
      <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;not_&shy;found)</span>.
</p></li><li id='6.1.2'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.1.2'>(6.1.2)</a></div><p >Otherwise, if the specific error indicates that <span class='texttt'>p</span> can be resolved
      but the attributes cannot be determined, returns
      <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;unknown)</span>.
</p></li><li id='6.1.3'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.1.3'>(6.1.3)</a></div><p >Otherwise, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;none)</span>.
</p></li></ul><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> These semantics distinguish between <span class='texttt'>p</span> being known not to exist, <span class='texttt'>p</span> existing but not being able to determine its attributes,
        and there being an error that prevents even knowing if <span class='texttt'>p</span> exists. These
        distinctions are important to some use cases. <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
</p></li><li id='6.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#6.2'>(6.2)</a></div><p >Otherwise,
</p><ul class='itemize'><li id='6.2.1'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.1'>(6.2.1)</a></div><p >If the attributes indicate a regular file, as if by POSIX <span class='texttt'>S_&shy;ISREG</span>,
      returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;regular, prms)</span>. [<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
      <span class='texttt'>file_&shy;type&#x200b;::&#x200b;regular</span> implies appropriate <span class='texttt'>&lt;fstream&gt;</span> operations
      would succeed, assuming no hardware, permission, access, or file system
      race errors. Lack of <span class='texttt'>file_&shy;type&#x200b;::&#x200b;regular</span> does not necessarily imply
      <span class='texttt'>&lt;fstream&gt;</span> operations would fail on a directory.  <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
</p></li><li id='6.2.2'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.2'>(6.2.2)</a></div><p >Otherwise, if the attributes indicate a directory, as if by POSIX
      <span class='texttt'>S_&shy;ISDIR</span>, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;directory, prms)</span>.
      [<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> <span class='texttt'>file_&shy;type&#x200b;::&#x200b;directory</span> implies
      <span class='texttt'>directory_&shy;iterator(p)</span> would succeed.  <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
</p></li><li id='6.2.3'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.3'>(6.2.3)</a></div><p >Otherwise, if the attributes indicate a block special file, as if by
      POSIX <span class='texttt'>S_&shy;ISBLK</span>, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;block, prms)</span>.
</p></li><li id='6.2.4'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.4'>(6.2.4)</a></div><p >Otherwise, if the attributes indicate a character special file, as if
      by POSIX <span class='texttt'>S_&shy;ISCHR</span>, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;character, prms)</span>.
</p></li><li id='6.2.5'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.5'>(6.2.5)</a></div><p >Otherwise, if the attributes indicate a fifo or pipe file, as if by
      POSIX <span class='texttt'>S_&shy;ISFIFO</span>, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;fifo, prms)</span>.
</p></li><li id='6.2.6'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.6'>(6.2.6)</a></div><p >Otherwise, if the attributes indicate a socket, as if by POSIX
      <span class='texttt'>S_&shy;ISSOCK</span>, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;socket, prms)</span>.
</p></li><li id='6.2.7'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.7'>(6.2.7)</a></div><p >Otherwise, returns <span class='texttt'>file_&shy;status(file_&shy;type&#x200b;::&#x200b;unknown, prms)</span>.
</p></li></ul></li></ul></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b63d68ab7bc08f5e969a5b44b000941e6e82eb2e/source/iostreams.tex#L14608'>#</a></div><p ><span class='textit'>Remarks:</span> If a symbolic link is encountered during pathname resolution,
      pathname resolution continues using the contents of the symbolic link.
</p></div></div></div></div></body></html>