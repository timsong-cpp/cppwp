<!DOCTYPE html><html lang='en'><head><title>[fs.op.status]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>31</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>31.12</a> File systems <a class='abbr_ref' href='filesystems#fs.op.status'>[filesystems]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>31.12.13</a> Filesystem operation functions <a class='abbr_ref' href='fs.op.funcs#fs.op.status'>[fs.op.funcs]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>31.12.13.36</a> Status <a class='abbr_ref'>[fs.op.status]</a></h4><div class='texpara'><div id='lib:status'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:status'>ðŸ”—</a></div><code class='itemdeclcode'>file_status filesystem<span class='operator'>::</span>status<span class='parenthesis'>(</span><span class='keyword'>const</span> path<span class='operator'>&amp;</span> p<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/iostreams.tex#L18047'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><i >Effects</i>: As if:
<span class='codeblock'>error_code ec;
file_status result <span class='operator'>=</span> status<span class='parenthesis'>(</span>p, ec<span class='parenthesis'>)</span>;
<span class='keyword'>if</span> <span class='parenthesis'>(</span>result<span class='operator'>.</span>type<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> file_type<span class='operator'>::</span>none<span class='parenthesis'>)</span>
  <span class='keyword'>throw</span> filesystem_error<span class='parenthesis'>(</span><i >implementation-supplied-message</i>, p, ec<span class='parenthesis'>)</span>;
<span class='keyword'>return</span> result;
</span></div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/iostreams.tex#L18058'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'><i >Returns</i>: See above<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/iostreams.tex#L18062'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'><i >Throws</i>: <span class='texttt'>filesystem_<span class='shy'></span>error</span><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='3.sentence-2' class='sentence'><span class='texttt'>result</span> values of <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>not_<span class='shy'></span>found<span class='parenthesis'>)</span></span>
  and <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>unknown<span class='parenthesis'>)</span></span> are not considered failures and do not
  cause an exception to be thrown<a class='hidden_link' href='#3.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:status_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:status_'>ðŸ”—</a></div><code class='itemdeclcode'>file_status filesystem<span class='operator'>::</span>status<span class='parenthesis'>(</span><span class='keyword'>const</span> path<span class='operator'>&amp;</span> p, error_code<span class='operator'>&amp;</span> ec<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/iostreams.tex#L18078'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'><i >Effects</i>: If possible, determines the attributes
    of the file <span class='texttt'>p</span> resolves to, as if by using POSIX <span class='texttt'>stat<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
    to obtain a POSIX <span class='texttt'><span class='keyword'>struct</span> stat</span><a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>If, during attribute determination, the underlying file system API reports
    an error, sets <span class='texttt'>ec</span> to indicate the specific error reported<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>Otherwise, <span class='texttt'>ec<span class='operator'>.</span>clear<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>: <div id='4.sentence-4' class='sentence'>This allows users to inspect the specifics of underlying
      API errors even when the value returned by <span class='texttt'>status<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is not
      <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>none<span class='parenthesis'>)</span></span><a class='hidden_link' href='#4.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/iostreams.tex#L18092'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>Let <span class='texttt'>prms</span> denote the result of <span class='texttt'><span class='parenthesis'>(</span>m <span class='operator'>&amp;</span> perms<span class='operator'>&#x200b;::&#x200b;</span>mask<span class='parenthesis'>)</span></span>,
where <span class='texttt'>m</span> is determined as if by converting the <span class='texttt'>st_<span class='shy'></span>mode</span> member
of the obtained <span class='texttt'><span class='keyword'>struct</span> stat</span> to the type <span class='texttt'>perms</span><a class='hidden_link' href='#5.sentence-1'>.</a></div></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/iostreams.tex#L18097'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'><i >Returns</i>: <ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#6.1'>(6.1)</a></div><div class='texpara'><div id='6.1.sentence-1' class='sentence'>If <span class='texttt'>ec <span class='operator'>!</span><span class='operator'>=</span> error_<span class='shy'></span>code<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>:
<ul class='itemize'><li id='6.1.1'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#6.1.1'>(6.1.1)</a></div><div class='texpara'><div id='6.1.1.sentence-1' class='sentence'>If the specific error indicates that <span class='texttt'>p</span> cannot be resolved
      because some element of the path does not exist, returns
      <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>not_<span class='shy'></span>found<span class='parenthesis'>)</span></span><a class='hidden_link' href='#6.1.1.sentence-1'>.</a></div></div></li><li id='6.1.2'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#6.1.2'>(6.1.2)</a></div><div class='texpara'><div id='6.1.2.sentence-1' class='sentence'>Otherwise, if the specific error indicates that <span class='texttt'>p</span> can be resolved
      but the attributes cannot be determined, returns
      <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>unknown<span class='parenthesis'>)</span></span><a class='hidden_link' href='#6.1.2.sentence-1'>.</a></div></div></li><li id='6.1.3'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#6.1.3'>(6.1.3)</a></div><div class='texpara'><div id='6.1.3.sentence-1' class='sentence'>Otherwise, returns <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>none<span class='parenthesis'>)</span></span><a class='hidden_link' href='#6.1.3.sentence-1'>.</a></div></div></li></ul></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>: <div id='6.1.sentence-2' class='sentence'>These semantics distinguish between <span class='texttt'>p</span> being known not to exist, <span class='texttt'>p</span> existing but not being able to determine its attributes,
        and there being an error that prevents even knowing if <span class='texttt'>p</span> exists<a class='hidden_link' href='#6.1.sentence-2'>.</a></div> <div id='6.1.sentence-3' class='sentence'>These
        distinctions are important to some use cases<a class='hidden_link' href='#6.1.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></li><li id='6.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#6.2'>(6.2)</a></div><div class='texpara'><div id='6.2.sentence-1' class='sentence'>Otherwise,
<ul class='itemize'><li id='6.2.1'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#6.2.1'>(6.2.1)</a></div><div class='texpara'><div id='6.2.1.sentence-1' class='sentence'>If the attributes indicate a regular file, as if by POSIX <span class='texttt'>S_<span class='shy'></span>ISREG</span>,
      returns <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>regular, prms<span class='parenthesis'>)</span></span><a class='hidden_link' href='#6.2.1.sentence-1'>.</a></div> <div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>: <div id='6.2.1.sentence-2' class='sentence'><span class='texttt'>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>regular</span> implies appropriate <a href='fstream.syn#header:%3cfstream%3e' title='31.10.1&emsp;Header &lt;fstream&gt; synopsis&emsp;[fstream.syn]'><span id='headerref:<fstream>'><span class='texttt'>&lt;fstream&gt;</span></span></a> operations
      would succeed, assuming no hardware, permission, access, or file system
      race errors<a class='hidden_link' href='#6.2.1.sentence-2'>.</a></div> <div id='6.2.1.sentence-3' class='sentence'>Lack of <span class='texttt'>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>regular</span> does not necessarily imply
      <a href='fstream.syn#header:%3cfstream%3e' title='31.10.1&emsp;Header &lt;fstream&gt; synopsis&emsp;[fstream.syn]'><span id='headerref:<fstream>_'><span class='texttt'>&lt;fstream&gt;</span></span></a> operations would fail on a directory<a class='hidden_link' href='#6.2.1.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></li><li id='6.2.2'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#6.2.2'>(6.2.2)</a></div><div class='texpara'><div id='6.2.2.sentence-1' class='sentence'>Otherwise, if the attributes indicate a directory, as if by POSIX
      <span class='texttt'>S_<span class='shy'></span>ISDIR</span>, returns <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>directory, prms<span class='parenthesis'>)</span></span><a class='hidden_link' href='#6.2.2.sentence-1'>.</a></div> <div id='note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-5'>5</a></i>: <div id='6.2.2.sentence-2' class='sentence'><span class='texttt'>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>directory</span> implies that calling
      <span class='texttt'>directory_<span class='shy'></span>iterator<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> would succeed<a class='hidden_link' href='#6.2.2.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></li><li id='6.2.3'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#6.2.3'>(6.2.3)</a></div><div class='texpara'><div id='6.2.3.sentence-1' class='sentence'>Otherwise, if the attributes indicate a block special file, as if by
      POSIX <span class='texttt'>S_<span class='shy'></span>ISBLK</span>, returns <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>block, prms<span class='parenthesis'>)</span></span><a class='hidden_link' href='#6.2.3.sentence-1'>.</a></div></div></li><li id='6.2.4'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#6.2.4'>(6.2.4)</a></div><div class='texpara'><div id='6.2.4.sentence-1' class='sentence'>Otherwise, if the attributes indicate a character special file, as if
      by POSIX <span class='texttt'>S_<span class='shy'></span>ISCHR</span>, returns <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>character, prms<span class='parenthesis'>)</span></span><a class='hidden_link' href='#6.2.4.sentence-1'>.</a></div></div></li><li id='6.2.5'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#6.2.5'>(6.2.5)</a></div><div class='texpara'><div id='6.2.5.sentence-1' class='sentence'>Otherwise, if the attributes indicate a fifo or pipe file, as if by
      POSIX <span class='texttt'>S_<span class='shy'></span>ISFIFO</span>, returns <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>fifo, prms<span class='parenthesis'>)</span></span><a class='hidden_link' href='#6.2.5.sentence-1'>.</a></div></div></li><li id='6.2.6'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#6.2.6'>(6.2.6)</a></div><div class='texpara'><div id='6.2.6.sentence-1' class='sentence'>Otherwise, if the attributes indicate a socket, as if by POSIX
      <span class='texttt'>S_<span class='shy'></span>ISSOCK</span>, returns <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>socket, prms<span class='parenthesis'>)</span></span><a class='hidden_link' href='#6.2.6.sentence-1'>.</a></div></div></li><li id='6.2.7'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#6.2.7'>(6.2.7)</a></div><div class='texpara'><div id='6.2.7.sentence-1' class='sentence'>Otherwise, if the attributes indicate an implementation-defined
      file type (<a href='fs.enum.file.type' title='31.12.8.2&emsp;Enum class file_&shy;type'>[fs.<span class='shy'></span>enum.<span class='shy'></span>file.<span class='shy'></span>type]</a>),
      returns <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span><i >A</i>, prms<span class='parenthesis'>)</span></span>,
      where <span class='texttt'><i >A</i></span> is the constant for the
      <a class='index' id=':file_type_of_the_file_argument_of_filesystem::status'></a>implementation-defined file type<a class='hidden_link' href='#6.2.7.sentence-1'>.</a></div></div></li><li id='6.2.8'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#6.2.8'>(6.2.8)</a></div><div class='texpara'><div id='6.2.8.sentence-1' class='sentence'>Otherwise, returns <span class='texttt'>file_<span class='shy'></span>status<span class='parenthesis'>(</span>file_<span class='shy'></span>type<span class='operator'>&#x200b;::&#x200b;</span>unknown, prms<span class='parenthesis'>)</span></span><a class='hidden_link' href='#6.2.8.sentence-1'>.</a></div></div></li></ul></div></div></li></ul></div></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1be4801ac1f90aca9a8f5804a48e8bcd082f5bb9/source/iostreams.tex#L18150'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'><i >Remarks</i>: If a symbolic link is encountered during pathname resolution,
      pathname resolution continues using the contents of the symbolic link<a class='hidden_link' href='#7.sentence-1'>.</a></div></div></div></div></div></body></html>