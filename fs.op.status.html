<!DOCTYPE html><html lang='en'><head><title>[fs.op.status]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>29</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>29.11</a> File systems <a class='abbr_ref' href='filesystems#fs.op.status'>[filesystems]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>29.11.14</a> Filesystem operation functions <a class='abbr_ref' href='fs.op.funcs#fs.op.status'>[fs.op.funcs]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>29.11.14.35</a> Status <a class='abbr_ref'>[fs.op.status]</a></h4><span class='indexparent'><a class='index' id='lib:status'></a></span><div class='itemdecl' id='itemdecl:1'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:1'>ðŸ”—</a></div><code class='itemdeclcode'>file_status status<span class='parenthesis'>(</span><span class='keyword'>const</span> path<span class='operator'>&amp;</span> p<span class='parenthesis'>)</span>;
</code></div><div class='itemdescr'></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/iostreams.tex#L16583'>#</a></div><div id='1.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
As if:
<pre class='codeblock'>
error_code ec;
file_status result <span class='operator'>=</span> status<span class='parenthesis'>(</span>p, ec<span class='parenthesis'>)</span>;
<span class='keyword'>if</span> <span class='parenthesis'>(</span>result<span class='operator'>.</span>type<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> file_type<span class='operator'>::</span>none<span class='parenthesis'>)</span>
  <span class='keyword'>throw</span> filesystem_error<span class='parenthesis'>(</span><span class='textit'>implementation-supplied-message</span>, p, ec<span class='parenthesis'>)</span>;
<span class='keyword'>return</span> result;
</pre></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/iostreams.tex#L16594'>#</a></div><div id='2.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
See above<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/iostreams.tex#L16598'>#</a></div><div id='3.sentence-1' class='sentence'><span class='textit'>Throws:</span> 
<span class='texttt'>filesystem_&shy;error</span><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.note-1' class='note'>[&nbsp;<a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-2' class='sentence'><span class='texttt'>result</span> values of <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>not_&shy;found<span class='parenthesis'>)</span></span>
  and <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>unknown<span class='parenthesis'>)</span></span> are not considered failures and do not
  cause an exception to be thrown<a class='hidden_link' href='#3.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><span class='indexparent'><a class='index' id='lib:status_'></a></span><div class='itemdecl' id='itemdecl:2'><div class='marginalizedparent'><a class='itemDeclLink' href='#itemdecl:2'>ðŸ”—</a></div><code class='itemdeclcode'>file_status status<span class='parenthesis'>(</span><span class='keyword'>const</span> path<span class='operator'>&amp;</span> p, error_code<span class='operator'>&amp;</span> ec<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div><div class='itemdescr'></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/iostreams.tex#L16614'>#</a></div><div id='4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
If possible, determines the attributes
    of the file <span class='texttt'>p</span> resolves to, as if by using POSIX <span class='texttt'>stat<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
    to obtain a POSIX <span class='texttt'><span class='keyword'>struct</span> stat</span><a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>If, during attribute determination, the underlying file system API reports
    an error, sets <span class='texttt'>ec</span> to indicate the specific error reported<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>Otherwise, <span class='texttt'>ec<span class='operator'>.</span>clear<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='4.note-1' class='note'>[&nbsp;<a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-4' class='sentence'>This allows users to inspect the specifics of underlying
      API errors even when the value returned by <span class='texttt'>status<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is not
      <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>none<span class='parenthesis'>)</span></span><a class='hidden_link' href='#4.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/iostreams.tex#L16628'>#</a></div><div id='5.sentence-1' class='sentence'>Let <span class='texttt'>prms</span> denote the result of <span class='texttt'><span class='parenthesis'>(</span>m <span class='operator'>&amp;</span> perms<span class='operator'>&#x200b;::&#x200b;</span>mask<span class='parenthesis'>)</span></span>,
where <span class='texttt'>m</span> is determined as if by converting the <span class='texttt'>st_&shy;mode</span> member
of the obtained <span class='texttt'><span class='keyword'>struct</span> stat</span> to the type <span class='texttt'>perms</span><a class='hidden_link' href='#5.sentence-1'>.</a></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/iostreams.tex#L16633'>#</a></div><div id='6.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#6.1'>(6.1)</a></div>If <span class='texttt'>ec <span class='operator'>!</span><span class='operator'>=</span> error_&shy;code<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>:
<ul class='itemize'><li id='6.1.1'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.1.1'>(6.1.1)</a></div>If the specific error indicates that <span class='texttt'>p</span> cannot be resolved
      because some element of the path does not exist, returns
      <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>not_&shy;found<span class='parenthesis'>)</span></span>.</li><li id='6.1.2'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.1.2'>(6.1.2)</a></div>Otherwise, if the specific error indicates that <span class='texttt'>p</span> can be resolved
      but the attributes cannot be determined, returns
      <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>unknown<span class='parenthesis'>)</span></span>.</li><li id='6.1.3'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.1.3'>(6.1.3)</a></div>Otherwise, returns <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>none<span class='parenthesis'>)</span></span>.</li></ul> <div id='6.1.note-1' class='note'>[&nbsp;<a class='note_link' href='#6.1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> These semantics distinguish between <span class='texttt'>p</span> being known not to exist, <span class='texttt'>p</span> existing but not being able to determine its attributes,
        and there being an error that prevents even knowing if <span class='texttt'>p</span> exists. These
        distinctions are important to some use cases. â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </li><li id='6.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#6.2'>(6.2)</a></div>Otherwise,
<ul class='itemize'><li id='6.2.1'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.1'>(6.2.1)</a></div>If the attributes indicate a regular file, as if by POSIX <span class='texttt'>S_&shy;ISREG</span>,
      returns <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>regular, prms<span class='parenthesis'>)</span></span>. <div id='6.2.1.note-2' class='note'>[&nbsp;<a class='note_link' href='#6.2.1.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <span class='texttt'>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>regular</span> implies appropriate <span class='indexparent'><a class='index' id=':<fstream>'></a></span><span class='texttt'><span class='anglebracket'>&lt;</span>fstream<span class='anglebracket'>&gt;</span></span> operations
      would succeed, assuming no hardware, permission, access, or file system
      race errors. Lack of <span class='texttt'>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>regular</span> does not necessarily imply
      <span class='indexparent'><a class='index' id=':<fstream>_'></a></span><span class='texttt'><span class='anglebracket'>&lt;</span>fstream<span class='anglebracket'>&gt;</span></span> operations would fail on a directory. â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </li><li id='6.2.2'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.2'>(6.2.2)</a></div>Otherwise, if the attributes indicate a directory, as if by POSIX
      <span class='texttt'>S_&shy;ISDIR</span>, returns <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>directory, prms<span class='parenthesis'>)</span></span>. <div id='6.2.2.note-3' class='note'>[&nbsp;<a class='note_link' href='#6.2.2.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <span class='texttt'>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>directory</span> implies that calling
      <span class='texttt'>directory_&shy;iterator<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> would succeed. â€”&nbsp;<i>end note</i></div>&nbsp;]</div> </li><li id='6.2.3'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.3'>(6.2.3)</a></div>Otherwise, if the attributes indicate a block special file, as if by
      POSIX <span class='texttt'>S_&shy;ISBLK</span>, returns <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>block, prms<span class='parenthesis'>)</span></span>.</li><li id='6.2.4'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.4'>(6.2.4)</a></div>Otherwise, if the attributes indicate a character special file, as if
      by POSIX <span class='texttt'>S_&shy;ISCHR</span>, returns <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>character, prms<span class='parenthesis'>)</span></span>.</li><li id='6.2.5'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.5'>(6.2.5)</a></div>Otherwise, if the attributes indicate a fifo or pipe file, as if by
      POSIX <span class='texttt'>S_&shy;ISFIFO</span>, returns <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>fifo, prms<span class='parenthesis'>)</span></span>.</li><li id='6.2.6'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.6'>(6.2.6)</a></div>Otherwise, if the attributes indicate a socket, as if by POSIX
      <span class='texttt'>S_&shy;ISSOCK</span>, returns <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>socket, prms<span class='parenthesis'>)</span></span>.</li><li id='6.2.7'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.7'>(6.2.7)</a></div>Otherwise, if the attributes indicate an implementation-defined
      file type (<a href='fs.enum.file.type'>[fs.enum.file.type]</a>),
      returns <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span><span class='textit'>A</span>, prms<span class='parenthesis'>)</span></span>,
      where <span class='texttt'><span class='textit'>A</span></span> is the constant for the
      <span class='indexparent'><a class='index' id=':file_type_of_the_file_argument_of_filesystem::status'></a></span>implementation-defined file type.</li><li id='6.2.8'><div class='marginalizedparent' style='left:-12em'><a class='marginalized' href='#6.2.8'>(6.2.8)</a></div>Otherwise, returns <span class='texttt'>file_&shy;status<span class='parenthesis'>(</span>file_&shy;type<span class='operator'>&#x200b;::&#x200b;</span>unknown, prms<span class='parenthesis'>)</span></span>.</li></ul></li></ul></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/iostreams.tex#L16686'>#</a></div><div id='7.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
If a symbolic link is encountered during pathname resolution,
      pathname resolution continues using the contents of the symbolic link<a class='hidden_link' href='#7.sentence-1'>.</a></div></div></div></div></body></html>