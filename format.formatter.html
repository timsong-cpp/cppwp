<!DOCTYPE html><html lang='en'><head><title>[format.formatter]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>22</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>22.14</a> Formatting <a class='abbr_ref' href='format#formatter'>[format]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>22.14.6</a> Formatter <a class='abbr_ref'>[format.formatter]</a></h3><div id='formatter.requirements' class='section'><h4 ><a class='secnum' href='#formatter.requirements' style='min-width:95pt'>22.14.6.1</a> Formatter requirements <a class='abbr_ref' href='formatter.requirements'>[formatter.requirements]</a></h4><div class='para' id='formatter.requirements-1'><div class='marginalizedparent'><a class='marginalized' href='#formatter.requirements-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L16985'>#</a></div><div class='texpara'><div id='formatter.requirements-1.sentence-1' class='sentence'>A type <span class='texttt'>F</span> meets the <a class='index' id='def:BasicFormatter'></a><i >BasicFormatter</i> requirements if
it meets the
<ul class='itemize'><li id='formatter.requirements-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#formatter.requirements-1.1'>(1.1)</a></div><i >Cpp17DefaultConstructible</i> (Table <a href='utility.arg.requirements#tab:cpp17.defaultconstructible' title='Table 30: Cpp17DefaultConstructible requirements'>30</a>),</li><li id='formatter.requirements-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#formatter.requirements-1.2'>(1.2)</a></div><i >Cpp17CopyConstructible</i> (Table <a href='utility.arg.requirements#tab:cpp17.copyconstructible' title='Table 32: Cpp17CopyConstructible requirements (in addition to Cpp17MoveConstructible)'>32</a>),</li><li id='formatter.requirements-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#formatter.requirements-1.3'>(1.3)</a></div><i >Cpp17CopyAssignable</i> (Table <a href='utility.arg.requirements#tab:cpp17.copyassignable' title='Table 34: Cpp17CopyAssignable requirements (in addition to Cpp17MoveAssignable)'>34</a>),</li><li id='formatter.requirements-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#formatter.requirements-1.4'>(1.4)</a></div><i >Cpp17Swappable</i> (<a href='swappable.requirements' title='16.4.4.3&emsp;Swappable requirements'>[swappable.<span class='shy'></span>requirements]</a>), and</li><li id='formatter.requirements-1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#formatter.requirements-1.5'>(1.5)</a></div><i >Cpp17Destructible</i> (Table <a href='utility.arg.requirements#tab:cpp17.destructible' title='Table 35: Cpp17Destructible requirements'>35</a>)</li></ul>
requirements, and
the expressions shown in Table <a href='#tab:formatter.basic' title='Table 77: BasicFormatter requirements'>77</a> are valid and
have the indicated semantics<a class='hidden_link' href='#formatter.requirements-1.sentence-1'>.</a></div></div></div><div class='para' id='formatter.requirements-2'><div class='marginalizedparent'><a class='marginalized' href='#formatter.requirements-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L16999'>#</a></div><div class='texpara'><div id='formatter.requirements-2.sentence-1' class='sentence'>A type <span class='texttt'>F</span> meets the <a class='index' id='def:Formatter'></a><i >Formatter</i> requirements
if it meets the <i >BasicFormatter</i> requirements and
the expressions shown in Table <a href='#tab:formatter' title='Table 78: Formatter requirements'>78</a> are valid and
have the indicated semantics<a class='hidden_link' href='#formatter.requirements-2.sentence-1'>.</a></div></div></div><div class='para' id='formatter.requirements-3'><div class='marginalizedparent'><a class='marginalized' href='#formatter.requirements-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17005'>#</a></div><div class='texpara'><div id='formatter.requirements-3.sentence-1' class='sentence'>Given character type <span class='texttt'>charT</span>, output iterator type
<span class='texttt'>Out</span>, and formatting argument type <span class='texttt'>T</span>,
in Table <a href='#tab:formatter.basic' title='Table 77: BasicFormatter requirements'>77</a> and Table <a href='#tab:formatter' title='Table 78: Formatter requirements'>78</a>:
<ul class='itemize'><li id='formatter.requirements-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#formatter.requirements-3.1'>(3.1)</a></div><span class='texttt'>f</span> is a value of type (possibly const) <span class='texttt'>F</span>,</li><li id='formatter.requirements-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#formatter.requirements-3.2'>(3.2)</a></div><span class='texttt'>g</span> is an lvalue of type <span class='texttt'>F</span>,</li><li id='formatter.requirements-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#formatter.requirements-3.3'>(3.3)</a></div><span class='texttt'>u</span> is an lvalue of type <span class='texttt'>T</span>,</li><li id='formatter.requirements-3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#formatter.requirements-3.4'>(3.4)</a></div><span class='texttt'>t</span> is a value of a type convertible to (possibly const) <span class='texttt'>T</span>,</li><li id='formatter.requirements-3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#formatter.requirements-3.5'>(3.5)</a></div><span class='texttt'>PC</span> is <span class='texttt'>basic_<span class='shy'></span>format_<span class='shy'></span>parse_<span class='shy'></span>context<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span></span>,</li><li id='formatter.requirements-3.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#formatter.requirements-3.6'>(3.6)</a></div><span class='texttt'>FC</span> is <span class='texttt'>basic_<span class='shy'></span>format_<span class='shy'></span>context<span class='anglebracket'>&lt;</span>Out, charT<span class='anglebracket'>&gt;</span></span>,</li><li id='formatter.requirements-3.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#formatter.requirements-3.7'>(3.7)</a></div><span class='texttt'>pc</span> is an lvalue of type <span class='texttt'>PC</span>, and</li><li id='formatter.requirements-3.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#formatter.requirements-3.8'>(3.8)</a></div><span class='texttt'>fc</span> is an lvalue of type <span class='texttt'>FC</span><a class='hidden_link' href='#formatter.requirements-3.sentence-1'>.</a></li></ul></div> <div id='formatter.requirements-3.sentence-2' class='sentence'><span class='texttt'>pc<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> points to the beginning of the
<span class='textsf'><i >format-spec</i></span> (<a href='format.string' title='22.14.2&emsp;Format string'>[format.<span class='shy'></span>string]</a>)
of the replacement field being formatted
in the format string<a class='hidden_link' href='#formatter.requirements-3.sentence-2'>.</a></div> <div id='formatter.requirements-3.sentence-3' class='sentence'>If <span class='textsf'><i >format-spec</i></span> is not present or empty then either
<span class='texttt'>pc<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> pc<span class='operator'>.</span>end<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> or
<span class='texttt'><span class='operator'>*</span>pc<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> '<span class='curlybracket'>}</span>'</span><a class='hidden_link' href='#formatter.requirements-3.sentence-3'>.</a></div></div><div class='texpara'><div class='numberedTable' id='tab:formatter.basic'>Table <a href='#tab:formatter.basic'>77</a>: <i >BasicFormatter</i> requirements&emsp;<a href='./tab:formatter.basic'>[tab:formatter.basic]</a><br><table ><tr id='tab:formatter.basic-row-1' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:formatter.basic-row-1'>🔗</a></div></td><td class='justify' style='width:1.2in'><div class='texpara'><div id='tab:formatter.basic-row-1-column-1-sentence-1' class='sentence'><b>Expression</b></div></div></td><td class='justify' style='width:1in'><div class='texpara'><div id='tab:formatter.basic-row-1-column-2-sentence-1' class='sentence'><b>Return type</b></div></div></td><td class='justify' style='width:2.9in'><div class='texpara'><div id='tab:formatter.basic-row-1-column-3-sentence-1' class='sentence'><b>Requirement</b></div></div></td></tr><tr id='tab:formatter.basic-row-2' class='capsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:formatter.basic-row-2'>🔗</a></div></td><td class='justify' style='width:1.2in'><div class='texpara'><div id='tab:formatter.basic-row-2-column-1-sentence-1' class='sentence'><span class='texttt'>g<span class='operator'>.</span>parse<span class='parenthesis'>(</span>pc<span class='parenthesis'>)</span></span></div></div></td><td class='justify' style='width:1in'><div class='texpara'><div id='tab:formatter.basic-row-2-column-2-sentence-1' class='sentence'><span class='texttt'>PC<span class='operator'>&#x200b;::&#x200b;</span>iterator</span></div></div></td><td class='justify' style='width:2.9in'><div class='texpara'><div id='tab:formatter.basic-row-2-column-3-sentence-1' class='sentence'>Parses <span class='textsf'><i >format-spec</i></span> (<a href='format.string' title='22.14.2&emsp;Format string'>[format.<span class='shy'></span>string]</a>)
for type <span class='texttt'>T</span>
in the range [<span class='texttt'>pc<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, pc<span class='operator'>.</span>end<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>)
until the first unmatched character<a class='hidden_link' href='#tab:formatter.basic-row-2-column-3-sentence-1'>.</a></div> <div id='tab:formatter.basic-row-2-column-3-sentence-2' class='sentence'>Throws <span class='texttt'>format_<span class='shy'></span>error</span> unless the whole range is parsed
or the unmatched character is <span class='texttt'><span class='curlybracket'>}</span></span><a class='hidden_link' href='#tab:formatter.basic-row-2-column-3-sentence-2'>.</a></div> <div id='tab:formatter.basic-row-2-column-3-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#tab:formatter.basic-row-2-column-3-note-1'>1</a></i>:&ensp;<div id='tab:formatter.basic-row-2-column-3-sentence-3' class='sentence'>This allows formatters to emit meaningful error messages<a class='hidden_link' href='#tab:formatter.basic-row-2-column-3-sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='tab:formatter.basic-row-2-column-3-sentence-4' class='sentence'>
Stores the parsed format specifiers in <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> and
returns an iterator past the end of the parsed range<a class='hidden_link' href='#tab:formatter.basic-row-2-column-3-sentence-4'>.</a></div></div></td></tr><tr id='tab:formatter.basic-row-3' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:formatter.basic-row-3'>🔗</a></div></td><td class='justify' style='width:1.2in'><div class='texpara'><div id='tab:formatter.basic-row-3-column-1-sentence-1' class='sentence'><span class='texttt'>f<span class='operator'>.</span>format<span class='parenthesis'>(</span>u, fc<span class='parenthesis'>)</span></span></div></div></td><td class='justify' style='width:1in'><div class='texpara'><div id='tab:formatter.basic-row-3-column-2-sentence-1' class='sentence'><span class='texttt'>FC<span class='operator'>&#x200b;::&#x200b;</span>iterator</span></div></div></td><td class='justify' style='width:2.9in'><div class='texpara'><div id='tab:formatter.basic-row-3-column-3-sentence-1' class='sentence'>Formats <span class='texttt'>u</span> according to the specifiers stored in <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>,
writes the output to <span class='texttt'>fc<span class='operator'>.</span>out<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, and
returns an iterator past the end of the output range<a class='hidden_link' href='#tab:formatter.basic-row-3-column-3-sentence-1'>.</a></div> <div id='tab:formatter.basic-row-3-column-3-sentence-2' class='sentence'>The output shall only depend on
<span class='texttt'>u</span>,
<span class='texttt'>fc<span class='operator'>.</span>locale<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
<span class='texttt'>fc<span class='operator'>.</span>arg<span class='parenthesis'>(</span>n<span class='parenthesis'>)</span></span> for any value <span class='texttt'>n</span> of type <span class='texttt'>size_<span class='shy'></span>t</span>,
and the range [<span class='texttt'>pc<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, pc<span class='operator'>.</span>end<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>)
from the last call to <span class='texttt'>f<span class='operator'>.</span>parse<span class='parenthesis'>(</span>pc<span class='parenthesis'>)</span></span><a class='hidden_link' href='#tab:formatter.basic-row-3-column-3-sentence-2'>.</a></div></div></td></tr></table></div>
 </div><div class='texpara'><div class='numberedTable' id='tab:formatter'>Table <a href='#tab:formatter'>78</a>: <i >Formatter</i> requirements&emsp;<a href='./tab:formatter'>[tab:formatter]</a><br><table ><tr id='tab:formatter-row-1' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:formatter-row-1'>🔗</a></div></td><td class='justify' style='width:1.2in'><div class='texpara'><div id='tab:formatter-row-1-column-1-sentence-1' class='sentence'><b>Expression</b></div></div></td><td class='justify' style='width:1in'><div class='texpara'><div id='tab:formatter-row-1-column-2-sentence-1' class='sentence'><b>Return type</b></div></div></td><td class='justify' style='width:2.9in'><div class='texpara'><div id='tab:formatter-row-1-column-3-sentence-1' class='sentence'><b>Requirement</b></div></div></td></tr><tr id='tab:formatter-row-2' class='capsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:formatter-row-2'>🔗</a></div></td><td class='justify' style='width:1.2in'><div class='texpara'><div id='tab:formatter-row-2-column-1-sentence-1' class='sentence'><span class='texttt'>f<span class='operator'>.</span>format<span class='parenthesis'>(</span>t, fc<span class='parenthesis'>)</span></span></div></div></td><td class='justify' style='width:1in'><div class='texpara'><div id='tab:formatter-row-2-column-2-sentence-1' class='sentence'><span class='texttt'>FC<span class='operator'>&#x200b;::&#x200b;</span>iterator</span></div></div></td><td class='justify' style='width:2.9in'><div class='texpara'><div id='tab:formatter-row-2-column-3-sentence-1' class='sentence'>Formats <span class='texttt'>t</span> according to the specifiers stored in <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>,
writes the output to <span class='texttt'>fc<span class='operator'>.</span>out<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, and
returns an iterator past the end of the output range<a class='hidden_link' href='#tab:formatter-row-2-column-3-sentence-1'>.</a></div> <div id='tab:formatter-row-2-column-3-sentence-2' class='sentence'>The output shall only depend on
<span class='texttt'>t</span>,
<span class='texttt'>fc<span class='operator'>.</span>locale<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
<span class='texttt'>fc<span class='operator'>.</span>arg<span class='parenthesis'>(</span>n<span class='parenthesis'>)</span></span> for any value <span class='texttt'>n</span> of type <span class='texttt'>size_<span class='shy'></span>t</span>,
and the range [<span class='texttt'>pc<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, pc<span class='operator'>.</span>end<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>)
from the last call to <span class='texttt'>f<span class='operator'>.</span>parse<span class='parenthesis'>(</span>pc<span class='parenthesis'>)</span></span><a class='hidden_link' href='#tab:formatter-row-2-column-3-sentence-2'>.</a></div></div></td></tr><tr id='tab:formatter-row-3' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:formatter-row-3'>🔗</a></div></td><td class='justify' style='width:1.2in'><div class='texpara'><div id='tab:formatter-row-3-column-1-sentence-1' class='sentence'><span class='texttt'>f<span class='operator'>.</span>format<span class='parenthesis'>(</span>u, fc<span class='parenthesis'>)</span></span></div></div></td><td class='justify' style='width:1in'><div class='texpara'><div id='tab:formatter-row-3-column-2-sentence-1' class='sentence'><span class='texttt'>FC<span class='operator'>&#x200b;::&#x200b;</span>iterator</span></div></div></td><td class='justify' style='width:2.9in'><div class='texpara'><div id='tab:formatter-row-3-column-3-sentence-1' class='sentence'>As above, but does not modify <span class='texttt'>u</span><a class='hidden_link' href='#tab:formatter-row-3-column-3-sentence-1'>.</a></div></div></td></tr></table></div></div></div></div><div id='locking' class='section'><h4 ><a class='secnum' href='#locking' style='min-width:95pt'>22.14.6.2</a> Formatter locking <a class='abbr_ref' href='format.formatter.locking'>[format.formatter.locking]</a></h4><div class='texpara'><div id='lib:enable_nonlocking_formatter_optimization'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:enable_nonlocking_formatter_optimization'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> enable_nonlocking_formatter_optimization <span class='operator'>=</span> <span class='literal'>false</span>;
</code></div></div></div><div class='para' id='locking-1'><div class='marginalizedparent'><a class='marginalized' href='#locking-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17090'>#</a></div><div class='texpara'><div id='locking-1.sentence-1' class='sentence'><i >Remarks</i>: Pursuant to <a href='namespace.std' title='16.4.5.2.1&emsp;Namespace std'>[namespace.<span class='shy'></span>std]</a>,
users may specialize <span class='texttt'>enable_<span class='shy'></span>nonlocking_<span class='shy'></span>formatter_<span class='shy'></span>optimization</span> for
cv-unqualified program-defined types<a class='hidden_link' href='#locking-1.sentence-1'>.</a></div> <div id='locking-1.sentence-2' class='sentence'>Such specializations shall be usable in constant expressions (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)
and have type <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>bool</span></span><a class='hidden_link' href='#locking-1.sentence-2'>.</a></div></div></div></div></div><div id='format.formattable' class='section'><h4 ><a class='secnum' href='#format.formattable' style='min-width:95pt'>22.14.6.3</a> Concept <span class='texttt'>formattable</span> <a class='abbr_ref' href='format.formattable'>[format.formattable]</a></h4><div class='para' id='format.formattable-1'><div class='marginalizedparent'><a class='marginalized' href='#format.formattable-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17101'>#</a></div><div class='texpara'><div id='format.formattable-1.sentence-1' class='sentence'>Let <span class='texttt'><i >fmt-iter-for</i><span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span></span> be an unspecified type
that models
<span class='texttt'><a href='iterator.concept.output#concept:output_iterator' title='25.3.4.10&emsp;Concept output_&shy;iterator&emsp;[iterator.concept.output]'><span id='conceptref:output_iterator'><span class='texttt'>output_<span class='shy'></span>iterator</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> charT<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> (<a href='iterator.concept.output' title='25.3.4.10&emsp;Concept output_&shy;iterator'>[iterator.<span class='shy'></span>concept.<span class='shy'></span>output]</a>)<a class='hidden_link' href='#format.formattable-1.sentence-1'>.</a></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Context,
         <span class='keyword'>class</span> Formatter <span class='operator'>=</span> <span class='keyword'>typename</span> Context<span class='operator'>::</span><span class='keyword'>template</span> formatter_type<span class='anglebracket'>&lt;</span>remove_const_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
  <span class='keyword'>concept</span> <a class='hidden_link' href='#concept:formattable-with' title='22.14.6.3&emsp;Concept formattable&emsp;[format.formattable]'><span id='concept:formattable-with'><span class='tcode_in_codeblock'><i >formattable-with</i></span></span></a> <span class='operator'>=</span>                <span class='comment'>// <i >exposition only</i></span>
    <a href='concepts.object#concept:semiregular' title='18.6&emsp;Object concepts&emsp;[concepts.object]'><span id='conceptref:semiregular'><span class='tcode_in_codeblock'>semiregular</span></span></a><span class='anglebracket'>&lt;</span>Formatter<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span>
    <span class='keyword'>requires</span><span class='parenthesis'>(</span>Formatter<span class='operator'>&amp;</span> f, <span class='keyword'>const</span> Formatter<span class='operator'>&amp;</span> cf, T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> t, Context fc,
             basic_format_parse_context<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> Context<span class='operator'>::</span>char_type<span class='anglebracket'>&gt;</span> pc<span class='parenthesis'>)</span>
    <span class='curlybracket'>{</span>
      <span class='curlybracket'>{</span> f<span class='operator'>.</span>parse<span class='parenthesis'>(</span>pc<span class='parenthesis'>)</span> <span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <a href='concept.same#concept:same_as' title='18.4.2&emsp;Concept same_&shy;as&emsp;[concept.same]'><span id='conceptref:same_as'><span class='tcode_in_codeblock'>same_<span class='shy'></span>as</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span>pc<span class='parenthesis'>)</span><span class='operator'>::</span>iterator<span class='anglebracket'>&gt;</span>;
      <span class='curlybracket'>{</span> cf<span class='operator'>.</span>format<span class='parenthesis'>(</span>t, fc<span class='parenthesis'>)</span> <span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <a href='concept.same#concept:same_as' title='18.4.2&emsp;Concept same_&shy;as&emsp;[concept.same]'><span id='conceptref:same_as_'><span class='tcode_in_codeblock'>same_<span class='shy'></span>as</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> Context<span class='operator'>::</span>iterator<span class='anglebracket'>&gt;</span>;
    <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> charT<span class='anglebracket'>&gt;</span>
  <span class='keyword'>concept</span> <a class='hidden_link' href='#concept:formattable' title='22.14.6.3&emsp;Concept formattable&emsp;[format.formattable]'><span id='concept:formattable'><span id='lib:formattable'><span class='tcode_in_codeblock'>formattable</span></span></span></a> <span class='operator'>=</span>
    <a href='#concept:formattable-with' title='22.14.6.3&emsp;Concept formattable&emsp;[format.formattable]'><span id='conceptref:formattable-with'><span class='tcode_in_codeblock'><i >formattable-with</i></span></span></a><span class='anglebracket'>&lt;</span>remove_reference_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>, basic_format_context<span class='anglebracket'>&lt;</span><i >fmt-iter-for</i><span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span>, charT<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>;
</span></div></div><div class='para' id='format.formattable-2'><div class='marginalizedparent'><a class='marginalized' href='#format.formattable-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17123'>#</a></div><div class='texpara'><div id='format.formattable-2.sentence-1' class='sentence'>A type <span class='texttt'>T</span> and a character type <span class='texttt'>charT</span>
model <a href='#concept:formattable' title='22.14.6.3&emsp;Concept formattable&emsp;[format.formattable]'><span id='conceptref:formattable'><span class='texttt'>formattable</span></span></a>
if <span class='texttt'>formatter<span class='anglebracket'>&lt;</span>remove_<span class='shy'></span>cvref_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>, charT<span class='anglebracket'>&gt;</span></span> meets
the <i >BasicFormatter</i> requirements (<a href='#formatter.requirements' title='22.14.6.1&emsp;Formatter requirements'>[formatter.<span class='shy'></span>requirements]</a>)
and, if <span class='texttt'>remove_<span class='shy'></span>reference_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is const-qualified,
the <i >Formatter</i> requirements<a class='hidden_link' href='#format.formattable-2.sentence-1'>.</a></div></div></div></div><div id='spec' class='section'><h4 ><a class='secnum' href='#spec' style='min-width:95pt'>22.14.6.4</a> Formatter specializations <a class='abbr_ref' href='format.formatter.spec'>[format.formatter.spec]</a></h4><div class='texpara'><a class='index' id='lib:formatter'></a></div><div class='para' id='spec-1'><div class='marginalizedparent'><a class='marginalized' href='#spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17134'>#</a></div><div class='texpara'><div id='spec-1.sentence-1' class='sentence'>The functions defined in <a href='format.functions' title='22.14.5&emsp;Formatting functions'>[format.<span class='shy'></span>functions]</a> use
specializations of the class template <span class='texttt'>formatter</span> to format
individual arguments<a class='hidden_link' href='#spec-1.sentence-1'>.</a></div></div></div><div class='para' id='spec-2'><div class='marginalizedparent'><a class='marginalized' href='#spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17140'>#</a></div><div class='texpara'><div id='spec-2.sentence-1' class='sentence'>Let <span class='texttt'>charT</span> be either <span class='texttt'><span class='keyword'>char</span></span> or <span id=':wchar_t'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span><a class='hidden_link' href='#spec-2.sentence-1'>.</a></div> <div id='spec-2.sentence-2' class='sentence'>Each specialization of <span class='texttt'>formatter</span> is either enabled or disabled,
as described below<a class='hidden_link' href='#spec-2.sentence-2'>.</a></div> <div id='spec-2.sentence-3' class='sentence'><a class='index' id=':formatter,debug-enabled_specialization_of'></a>A <a class='hidden_link' href='#def:debug-enabled' title='22.14.6.4&emsp;Formatter specializations&emsp;[format.formatter.spec]'><span id='def:debug-enabled'><i >debug-enabled</i></span></a> specialization of <span class='texttt'>formatter</span>
additionally provides
a public, constexpr, non-static member function <span class='texttt'>set_<span class='shy'></span>debug_<span class='shy'></span>format<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
which modifies the state of the <span class='texttt'>formatter</span> to be as if
the type of the <span class='textsf'><i >std-format-spec</i></span>
parsed by the last call to <span class='texttt'>parse</span> were <span class='texttt'><span class='operator'>?</span></span><a class='hidden_link' href='#spec-2.sentence-3'>.</a></div> <div id='spec-2.sentence-4' class='sentence'>Each header that declares the template <span class='texttt'>formatter</span>
provides the following enabled specializations:
<ul class='itemize'><li id='spec-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-2.1'>(2.1)</a></div><a class='index' id='lib:formatter,specializations,character_types'></a>The debug-enabled specializations
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>, <span class='keyword'>char</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>, <span class='keyword'>wchar_t</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>wchar_t</span>, <span class='keyword'>wchar_t</span><span class='anglebracket'>&gt;</span>;
</span></li><li id='spec-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-2.2'>(2.2)</a></div><a class='index' id='lib:formatter,specializations,string_types'></a>For each <span class='texttt'>charT</span>,
the debug-enabled string type specializations
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>charT<span class='operator'>*</span>, charT<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> charT<span class='operator'>*</span>, charT<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>size_t N<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>charT<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span>, charT<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> traits, <span class='keyword'>class</span> Allocator<span class='anglebracket'>&gt;</span>
  <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span>, charT<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> traits<span class='anglebracket'>&gt;</span>
  <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>basic_string_view<span class='anglebracket'>&lt;</span>charT, traits<span class='anglebracket'>&gt;</span>, charT<span class='anglebracket'>&gt;</span>;
</span></li><li id='spec-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-2.3'>(2.3)</a></div><a class='index' id='lib:formatter,specializations,arithmetic_types'></a>For each <span class='texttt'>charT</span>,
for each cv-unqualified arithmetic type <span class='texttt'>ArithmeticT</span>
other than
<span class='texttt'><span class='keyword'>char</span></span>,
<span id=':wchar_t_'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>,
<span id=':char8_t'><span class='texttt'><span class='keyword'>char8_<span class='shy'></span>t</span></span></span>,
<span id=':char16_t'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span>, or
<span id=':char32_t'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span>,
a specialization
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>ArithmeticT, charT<span class='anglebracket'>&gt;</span>;
</span></li><li id='spec-2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-2.4'>(2.4)</a></div><a class='index' id='lib:formatter,specializations,pointer_types'></a><a class='index' id='lib:formatter,specializations,nullptr_t'></a>For each <span class='texttt'>charT</span>,
the pointer type specializations
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>nullptr_t, charT<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='operator'>*</span>, charT<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>void</span><span class='operator'>*</span>, charT<span class='anglebracket'>&gt;</span>;
</span></li></ul>
The <span class='texttt'>parse</span> member functions of these formatters
interpret the format specification
as a <span class='textsf'><i >std-format-spec</i></span>
as described in <a href='format.string.std' title='22.14.2.2&emsp;Standard format specifiers'>[format.<span class='shy'></span>string.<span class='shy'></span>std]</a><a class='hidden_link' href='#spec-2.sentence-4'>.</a></div></div></div><div class='para' id='spec-3'><div class='marginalizedparent'><a class='marginalized' href='#spec-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17208'>#</a></div><div class='texpara'><div id='spec-3.sentence-2' class='sentence'>Unless specified otherwise, for each type <span class='texttt'>T</span> for which
a <span class='texttt'>formatter</span> specialization is provided by the library,
each of the headers provides the following specialization:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>inline</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> enable_nonlocking_formatter_optimization<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>=</span> <span class='literal'>true</span>;
</span>
<div id='spec-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#spec-note-1'>1</a></i>:&ensp;<div id='spec-3.sentence-1' class='sentence'>Specializations such as <span class='texttt'>formatter<span class='anglebracket'>&lt;</span><span class='keyword'>wchar_<span class='shy'></span>t</span>, <span class='keyword'>char</span><span class='anglebracket'>&gt;</span></span>
that would require implicit
multibyte / wide string or character conversion are disabled<a class='hidden_link' href='#spec-3.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='spec-4'><div class='marginalizedparent'><a class='marginalized' href='#spec-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17221'>#</a></div><div class='texpara'><div id='spec-4.sentence-1' class='sentence'>The header <span id='header:<format>'><span class='texttt'><span class='anglebracket'>&lt;</span>format<span class='anglebracket'>&gt;</span></span></span> provides
the following disabled specializations:
<ul class='itemize'><li id='spec-4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-4.1'>(4.1)</a></div>The string type specializations
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span>, <span class='keyword'>wchar_t</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span>, <span class='keyword'>wchar_t</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>size_t N<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span>, <span class='keyword'>wchar_t</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> traits, <span class='keyword'>class</span> Allocator<span class='anglebracket'>&gt;</span>
  <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>basic_string<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>, traits, Allocator<span class='anglebracket'>&gt;</span>, <span class='keyword'>wchar_t</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> traits<span class='anglebracket'>&gt;</span>
  <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>basic_string_view<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>, traits<span class='anglebracket'>&gt;</span>, <span class='keyword'>wchar_t</span><span class='anglebracket'>&gt;</span>;
</span></li></ul></div></div></div><div class='para' id='spec-5'><div class='marginalizedparent'><a class='marginalized' href='#spec-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17238'>#</a></div><div class='texpara'><div id='spec-5.sentence-1' class='sentence'>For any types <span class='texttt'>T</span> and <span class='texttt'>charT</span> for which
neither the library nor the user provides
an explicit or partial specialization of
the class template <span class='texttt'>formatter</span>,
<span class='texttt'>formatter<span class='anglebracket'>&lt;</span>T, charT<span class='anglebracket'>&gt;</span></span> is disabled<a class='hidden_link' href='#spec-5.sentence-1'>.</a></div></div></div><div class='para' id='spec-6'><div class='marginalizedparent'><a class='marginalized' href='#spec-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17245'>#</a></div><div class='texpara'><div id='spec-6.sentence-1' class='sentence'>If the library provides an explicit or partial specialization of
<span class='texttt'>formatter<span class='anglebracket'>&lt;</span>T, charT<span class='anglebracket'>&gt;</span></span>, that specialization is enabled
and meets the <i >Formatter</i> requirements
except as noted otherwise<a class='hidden_link' href='#spec-6.sentence-1'>.</a></div></div></div><div class='para' id='spec-7'><div class='marginalizedparent'><a class='marginalized' href='#spec-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17251'>#</a></div><div class='texpara'><div id='spec-7.sentence-1' class='sentence'>If <span class='texttt'>F</span> is a disabled specialization of <span class='texttt'>formatter</span>, these
values are <span class='texttt'><span class='literal'>false</span></span>:
<ul class='itemize'><li id='spec-7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-7.1'>(7.1)</a></div><span class='texttt'>is_<span class='shy'></span>default_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span></span>,</li><li id='spec-7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-7.2'>(7.2)</a></div><span class='texttt'>is_<span class='shy'></span>copy_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span></span>,</li><li id='spec-7.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-7.3'>(7.3)</a></div><span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span></span>,</li><li id='spec-7.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-7.4'>(7.4)</a></div><span class='texttt'>is_<span class='shy'></span>copy_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span></span>, and</li><li id='spec-7.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#spec-7.5'>(7.5)</a></div><span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#spec-7.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='spec-8'><div class='marginalizedparent'><a class='marginalized' href='#spec-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17262'>#</a></div><div class='texpara'><div id='spec-8.sentence-1' class='sentence'>An enabled specialization <span class='texttt'>formatter<span class='anglebracket'>&lt;</span>T, charT<span class='anglebracket'>&gt;</span></span> meets the
<i >BasicFormatter</i> requirements (<a href='#formatter.requirements' title='22.14.6.1&emsp;Formatter requirements'>[formatter.<span class='shy'></span>requirements]</a>)<a class='hidden_link' href='#spec-8.sentence-1'>.</a></div> <div id='spec-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#spec-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>format<span class='anglebracket'>&gt;</span>
<span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>string<span class='anglebracket'>&gt;</span>

<span class='keyword'>enum</span> color <span class='curlybracket'>{</span> red, green, blue <span class='curlybracket'>}</span>;
<span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> color_names<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>"red"</span>, <span class='literal'>"green"</span>, <span class='literal'>"blue"</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> std<span class='operator'>::</span>formatter<span class='anglebracket'>&lt;</span>color<span class='anglebracket'>&gt;</span> <span class='operator'>:</span> std<span class='operator'>::</span>formatter<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>auto</span> format<span class='parenthesis'>(</span>color c, format_context<span class='operator'>&amp;</span> ctx<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span>
    <span class='keyword'>return</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>format<span class='parenthesis'>(</span>color_names<span class='squarebracket'>[</span>c<span class='squarebracket'>]</span>, ctx<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> err <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

std<span class='operator'>::</span>string s0 <span class='operator'>=</span> std<span class='operator'>::</span>format<span class='parenthesis'>(</span><span class='literal'>"{}"</span>, <span class='literal'>42</span><span class='parenthesis'>)</span>;         <span class='comment'>// OK, library-provided formatter</span>
std<span class='operator'>::</span>string s1 <span class='operator'>=</span> std<span class='operator'>::</span>format<span class='parenthesis'>(</span><span class='literal'>"{}"</span>, <span class='literal'>L"foo"</span><span class='parenthesis'>)</span>;     <span class='comment'>// error: disabled formatter</span>
std<span class='operator'>::</span>string s2 <span class='operator'>=</span> std<span class='operator'>::</span>format<span class='parenthesis'>(</span><span class='literal'>"{}"</span>, red<span class='parenthesis'>)</span>;        <span class='comment'>// OK, user-provided formatter</span>
std<span class='operator'>::</span>string s3 <span class='operator'>=</span> std<span class='operator'>::</span>format<span class='parenthesis'>(</span><span class='literal'>"{}"</span>, err<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;      <span class='comment'>// error: disabled formatter</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='format.string.escaped' class='section'><h4 ><a class='secnum' href='#format.string.escaped' style='min-width:95pt'>22.14.6.5</a> Formatting escaped characters and strings <a class='abbr_ref' href='format.string.escaped'>[format.string.escaped]</a></h4><div class='para' id='format.string.escaped-1'><div class='marginalizedparent'><a class='marginalized' href='#format.string.escaped-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17290'>#</a></div><div class='texpara'><div id='format.string.escaped-1.sentence-1' class='sentence'><a class='index' id=':string,formatted_as_escaped'></a><a class='index' id=':character,formatted_as_escaped'></a>A character or string can be formatted as <a class='hidden_link' href='#def:escaped' title='22.14.6.5&emsp;Formatting escaped characters and strings&emsp;[format.string.escaped]'><span id='def:escaped'><i >escaped</i></span></a>
to make it more suitable for debugging or for logging<a class='hidden_link' href='#format.string.escaped-1.sentence-1'>.</a></div></div></div><div class='para' id='format.string.escaped-2'><div class='marginalizedparent'><a class='marginalized' href='#format.string.escaped-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17296'>#</a></div><div class='texpara'><div id='format.string.escaped-2.sentence-1' class='sentence'>The escaped string <i >E</i> representation of a string <i >S</i>
is constructed by encoding a sequence of characters as follows<a class='hidden_link' href='#format.string.escaped-2.sentence-1'>.</a></div> <div id='format.string.escaped-2.sentence-2' class='sentence'>The associated character encoding <i >CE</i>
for <span class='texttt'>charT</span> (Table <a href='lex.string#tab:lex.string.literal' title='Table 12: String literals'>12</a>)
is used to both interpret <i >S</i> and construct <i >E</i><a class='hidden_link' href='#format.string.escaped-2.sentence-2'>.</a></div></div><div class='texpara'><ul class='itemize'><li id='format.string.escaped-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#format.string.escaped-2.1'>(2.1)</a></div><div class='texpara'><div id='format.string.escaped-2.1.sentence-1' class='sentence'><span class='ucode'>U+0022</span> <span class='uname'>quotation mark</span> (<span class='texttt'>"</span>) is appended to <i >E</i><a class='hidden_link' href='#format.string.escaped-2.1.sentence-1'>.</a></div></div></li><li id='format.string.escaped-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#format.string.escaped-2.2'>(2.2)</a></div><div class='texpara'><div id='format.string.escaped-2.2.sentence-1' class='sentence'>For each code unit sequence <i >X</i> in <i >S</i> that either
encodes a single character,
is a shift sequence, or
is a sequence of ill-formed code units,
processing is in order as follows:
<ul class='itemize'><li id='format.string.escaped-2.2.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#format.string.escaped-2.2.1'>(2.2.1)</a></div><div class='texpara'><div id='format.string.escaped-2.2.1.sentence-1' class='sentence'>If <i >X</i> encodes a single character <i >C</i>, then:</div></div><div class='texpara'><ul class='itemize'><li id='format.string.escaped-2.2.1.1'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#format.string.escaped-2.2.1.1'>(2.2.1.1)</a></div><div class='texpara'><div id='format.string.escaped-2.2.1.1.sentence-1' class='sentence'>If <i >C</i> is one of the characters in Table <a href='#tab:format.escape.sequences' title='Table 79: Mapping of characters to escape sequences'>79</a>,
then the two characters shown as the corresponding escape sequence
are appended to <i >E</i><a class='hidden_link' href='#format.string.escaped-2.2.1.1.sentence-1'>.</a></div></div></li><li id='format.string.escaped-2.2.1.2'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#format.string.escaped-2.2.1.2'>(2.2.1.2)</a></div><div class='texpara'><div id='format.string.escaped-2.2.1.2.sentence-1' class='sentence'>Otherwise, if <i >C</i> is not <span class='ucode'>U+0020</span> <span class='uname'>space</span> and</div></div><div class='texpara'><ul class='itemize'><li id='format.string.escaped-2.2.1.2.1'><div class='marginalizedparent' style='left:-54mm'><a class='marginalized' href='#format.string.escaped-2.2.1.2.1'>(2.2.1.2.1)</a></div><i >CE</i> is UTF-8, UTF-16, or UTF-32 and
<i >C</i> corresponds to a Unicode scalar value
whose Unicode property <span class='texttt'>General_<span class='shy'></span>Category</span> has a value in the groups
<span class='texttt'>Separator</span> (<span class='texttt'>Z</span>) or <span class='texttt'>Other</span> (<span class='texttt'>C</span>),
as described by UAX #44 of the Unicode Standard, or</li><li id='format.string.escaped-2.2.1.2.2'><div class='marginalizedparent' style='left:-54mm'><a class='marginalized' href='#format.string.escaped-2.2.1.2.2'>(2.2.1.2.2)</a></div><i >CE</i> is UTF-8, UTF-16, or UTF-32 and
<i >C</i> corresponds to a Unicode scalar value
with the Unicode property <span class='texttt'>Grapheme_<span class='shy'></span>Extend<span class='operator'>=</span>Yes</span>
as described by UAX #44 of the Unicode Standard and
<i >C</i> is not immediately preceded in <i >S</i> by
a character <i >P</i> appended to <i >E</i>
without translation to an escape sequence, or</li><li id='format.string.escaped-2.2.1.2.3'><div class='marginalizedparent' style='left:-54mm'><a class='marginalized' href='#format.string.escaped-2.2.1.2.3'>(2.2.1.2.3)</a></div><i >CE</i> is neither UTF-8, UTF-16, nor UTF-32 and
<i >C</i> is one of an implementation-defined set
of separator or non-printable characters</li></ul></div><div class='texpara'><div id='format.string.escaped-2.2.1.2.sentence-2' class='sentence'>then the sequence <span class='literal'><span class='texttt'>\u{<i >hex-digit-sequence</i>}</span></span>
is appended to <i >E</i>,
where <span class='texttt'><i >hex-digit-sequence</i></span>
is the shortest hexadecimal representation
of <i >C</i> using lower-case hexadecimal digits<a class='hidden_link' href='#format.string.escaped-2.2.1.2.sentence-2'>.</a></div></div></li><li id='format.string.escaped-2.2.1.3'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#format.string.escaped-2.2.1.3'>(2.2.1.3)</a></div><div class='texpara'><div id='format.string.escaped-2.2.1.3.sentence-1' class='sentence'>Otherwise, <i >C</i> is appended to <i >E</i><a class='hidden_link' href='#format.string.escaped-2.2.1.3.sentence-1'>.</a></div></div></li></ul></div></li><li id='format.string.escaped-2.2.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#format.string.escaped-2.2.2'>(2.2.2)</a></div><div class='texpara'><div id='format.string.escaped-2.2.2.sentence-1' class='sentence'>Otherwise, if <i >X</i> is a shift sequence,
the effect on <i >E</i> and further decoding of <i >S</i>
is unspecified<a class='hidden_link' href='#format.string.escaped-2.2.2.sentence-1'>.</a></div></div><div class='texpara'><div id='format.string.escaped-2.2.2.sentence-2' class='sentence'><i >Recommended practice</i>: A shift sequence should be represented in <i >E</i>
such that the original code unit sequence of <i >S</i>
can be reconstructed<a class='hidden_link' href='#format.string.escaped-2.2.2.sentence-2'>.</a></div></div></li><li id='format.string.escaped-2.2.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#format.string.escaped-2.2.3'>(2.2.3)</a></div><div class='texpara'><div id='format.string.escaped-2.2.3.sentence-1' class='sentence'>Otherwise (<i >X</i> is a sequence of ill-formed code units),
each code unit <i >U</i> is appended to <i >E</i> in order
as the sequence <span class='literal'><span class='texttt'>\x{<i >hex-digit-sequence</i>}</span></span>,
where <span class='texttt'><i >hex-digit-sequence</i></span>
is the shortest hexadecimal representation of <i >U</i>
using lower-case hexadecimal digits<a class='hidden_link' href='#format.string.escaped-2.2.3.sentence-1'>.</a></div></div></li></ul></div></div></li><li id='format.string.escaped-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#format.string.escaped-2.3'>(2.3)</a></div><div class='texpara'><div id='format.string.escaped-2.3.sentence-1' class='sentence'>Finally, <span class='ucode'>U+0022</span> <span class='uname'>quotation mark</span> (<span class='texttt'>"</span>)
is appended to <i >E</i><a class='hidden_link' href='#format.string.escaped-2.3.sentence-1'>.</a></div></div></li></ul></div><div class='texpara'><div class='numberedTable' id='tab:format.escape.sequences'>Table <a href='#tab:format.escape.sequences'>79</a>: Mapping of characters to escape sequences&emsp;<a href='./tab:format.escape.sequences'>[tab:format.escape.sequences]</a><br><table ><tr id='tab:format.escape.sequences-row-1' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:format.escape.sequences-row-1'>🔗</a></div></td><td class='center'><div class='texpara'><div id='tab:format.escape.sequences-row-1-column-1-sentence-1' class='sentence'><b>Character</b></div></div></td><td class='center'><div class='texpara'><div id='tab:format.escape.sequences-row-1-column-2-sentence-1' class='sentence'><b>Escape sequence</b></div></div></td></tr><tr id='tab:format.escape.sequences-row-2' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:format.escape.sequences-row-2'>🔗</a></div></td><td class='left'><div class='texpara'><span class='ucode'>U+0009</span> <span class='uname'>character tabulation</span></div></td><td class='left'><div class='texpara'><div id='tab:format.escape.sequences-row-2-column-2-sentence-1' class='sentence'><span class='texttt'>\t</span></div></div></td></tr><tr id='tab:format.escape.sequences-row-3' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:format.escape.sequences-row-3'>🔗</a></div></td><td class='left'><div class='texpara'><span class='ucode'>U+000a</span> <span class='uname'>line feed</span></div></td><td class='left'><div class='texpara'><div id='tab:format.escape.sequences-row-3-column-2-sentence-1' class='sentence'><span class='texttt'>\n</span></div></div></td></tr><tr id='tab:format.escape.sequences-row-4' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:format.escape.sequences-row-4'>🔗</a></div></td><td class='left'><div class='texpara'><span class='ucode'>U+000d</span> <span class='uname'>carriage return</span></div></td><td class='left'><div class='texpara'><div id='tab:format.escape.sequences-row-4-column-2-sentence-1' class='sentence'><span class='texttt'>\r</span></div></div></td></tr><tr id='tab:format.escape.sequences-row-5' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:format.escape.sequences-row-5'>🔗</a></div></td><td class='left'><div class='texpara'><span class='ucode'>U+0022</span> <span class='uname'>quotation mark</span></div></td><td class='left'><div class='texpara'><div id='tab:format.escape.sequences-row-5-column-2-sentence-1' class='sentence'><span class='texttt'>\"</span></div></div></td></tr><tr id='tab:format.escape.sequences-row-6' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:format.escape.sequences-row-6'>🔗</a></div></td><td class='left'><div class='texpara'><span class='ucode'>U+005c</span> <span class='uname'>reverse solidus</span></div></td><td class='left'><div class='texpara'><div id='tab:format.escape.sequences-row-6-column-2-sentence-1' class='sentence'><span class='texttt'>\\</span></div></div></td></tr></table></div></div></div><div class='para' id='format.string.escaped-3'><div class='marginalizedparent'><a class='marginalized' href='#format.string.escaped-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17407'>#</a></div><div class='texpara'><div id='format.string.escaped-3.sentence-1' class='sentence'>The escaped string representation of a character <i >C</i>
is equivalent to the escaped string representation
of a string of <i >C</i>, except that:
<ul class='itemize'><li id='format.string.escaped-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#format.string.escaped-3.1'>(3.1)</a></div>the result starts and ends with <span class='ucode'>U+0027</span> <span class='uname'>apostrophe</span> (<span class='texttt'>'</span>)
instead of <span class='ucode'>U+0022</span> <span class='uname'>quotation mark</span> (<span class='texttt'>"</span>), and</li><li id='format.string.escaped-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#format.string.escaped-3.2'>(3.2)</a></div>if <i >C</i> is <span class='ucode'>U+0027</span> <span class='uname'>apostrophe</span>,
the two characters <span class='texttt'>\'</span> are appended to <i >E</i>, and</li><li id='format.string.escaped-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#format.string.escaped-3.3'>(3.3)</a></div>if <i >C</i> is <span class='ucode'>U+0022</span> <span class='uname'>quotation mark</span>,
then <i >C</i> is appended unchanged<a class='hidden_link' href='#format.string.escaped-3.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='format.string.escaped-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#format.string.escaped-example-1'>1</a></i>:&ensp;<span class='codeblock'>string s0 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{}]"</span>, <span class='literal'>"h\tllo"</span><span class='parenthesis'>)</span>;                   <span class='comment'>// <span class='tcode_in_codeblock'>s0</span> has value: <span class='tcode_in_codeblock'>[h&nbsp;&nbsp;&nbsp;&nbsp;llo]</span></span>
string s1 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"h\tllo"</span><span class='parenthesis'>)</span>;                 <span class='comment'>// <span class='tcode_in_codeblock'>s1</span> has value: <span class='tcode_in_codeblock'>["h\tllo"]</span></span>
string s2 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"<span class='texttt'>Спасибо, Виктор ♥!</span>"</span><span class='parenthesis'>)</span>;  <span class='comment'>// <span class='tcode_in_codeblock'>s2</span> has value: <span class='tcode_in_codeblock'>["<span class='texttt'>Спасибо, Виктор ♥!</span>"]</span></span>
string s3 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}, {:?}]"</span>, <span class='literal'>'\''</span>, <span class='literal'>'"'</span><span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>s3</span> has value: <span class='tcode_in_codeblock'>['\'', '"']</span></span>

<span class='comment'>// The following examples assume use of the UTF-8 encoding</span>
string s4 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, string<span class='parenthesis'>(</span><span class='literal'>"\0 \n \t \x02 \x1b"</span>, <span class='literal'>9</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
                                                    <span class='comment'>// <span class='tcode_in_codeblock'>s4</span> has value: <span class='tcode_in_codeblock'>["\u{0} \n \t \u{2} \u{1b}"]</span></span>
string s5 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"\xc3\x28"</span><span class='parenthesis'>)</span>;           <span class='comment'>// invalid UTF-8, <span class='tcode_in_codeblock'>s5</span> has value: <span class='tcode_in_codeblock'>["\x{c3}("]</span></span>
string s6 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"🤷🏻‍♂️"</span><span class='parenthesis'>)</span>;                 <span class='comment'>// <span class='tcode_in_codeblock'>s6</span> has value: <span class='tcode_in_codeblock'>["🤷\u{200d}♂"]</span></span>
string s7 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"\u0301"</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>s7</span> has value: <span class='tcode_in_codeblock'>["\u{301}"]</span></span>
string s8 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"\\\u0301"</span><span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>s8</span> has value: <span class='tcode_in_codeblock'>["\\\u{301}"]</span></span>
string s9 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"e\u0301\u0323"</span><span class='parenthesis'>)</span>;      <span class='comment'>// <span class='tcode_in_codeblock'>s9</span> has value: <span class='tcode_in_codeblock'>["<span class='texttt'>ẹ́</span>"]</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='format.parse.ctx' class='section'><h4 ><a class='secnum' href='#format.parse.ctx' style='min-width:95pt'>22.14.6.6</a> Class template <span class='texttt'>basic_<span class='shy'></span>format_<span class='shy'></span>parse_<span class='shy'></span>context</span> <a class='abbr_ref' href='format.parse.ctx'>[format.parse.ctx]</a></h4><div class='texpara'><span id='lib:basic_format_parse_context,iterator'><span id='lib:iterator,basic_format_parse_context'><span id='lib:basic_format_parse_context,const_iterator'><span id='lib:const_iterator,basic_format_parse_context'><span id='lib:basic_format_parse_context,char_type'><span id='lib:char_type,basic_format_parse_context'><span id='lib:basic_format_parse_context'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:basic_format_parse_context'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> charT<span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> basic_format_parse_context <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> char_type <span class='operator'>=</span> charT;
    <span class='keyword'>using</span> const_iterator <span class='operator'>=</span> <span class='keyword'>typename</span> basic_string_view<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span><span class='operator'>::</span>const_iterator;
    <span class='keyword'>using</span> iterator <span class='operator'>=</span> const_iterator;

  <span class='keyword'>private</span><span class='operator'>:</span>
    iterator begin_;                                    <span class='comment'>// <i >exposition only</i></span>
    iterator end_;                                      <span class='comment'>// <i >exposition only</i></span>
    <span class='keyword'>enum</span> indexing <span class='curlybracket'>{</span> unknown, manual, automatic <span class='curlybracket'>}</span>;       <span class='comment'>// <i >exposition only</i></span>
    indexing indexing_;                                 <span class='comment'>// <i >exposition only</i></span>
    size_t next_arg_id_;                                <span class='comment'>// <i >exposition only</i></span>
    size_t num_args_;                                   <span class='comment'>// <i >exposition only</i></span>

  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> basic_format_parse_context<span class='parenthesis'>(</span>basic_string_view<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span> fmt<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    basic_format_parse_context<span class='parenthesis'>(</span><span class='keyword'>const</span> basic_format_parse_context<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    basic_format_parse_context<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> basic_format_parse_context<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>constexpr</span> const_iterator begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> const_iterator end<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> advance_to<span class='parenthesis'>(</span>const_iterator it<span class='parenthesis'>)</span>;

    <span class='keyword'>constexpr</span> size_t next_arg_id<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> check_arg_id<span class='parenthesis'>(</span>size_t id<span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Ts<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>void</span> check_dynamic_spec<span class='parenthesis'>(</span>size_t id<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> check_dynamic_spec_integral<span class='parenthesis'>(</span>size_t id<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> check_dynamic_spec_string<span class='parenthesis'>(</span>size_t id<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></span></span></span></span></span></span></div><div class='para' id='format.parse.ctx-1'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17484'>#</a></div><div class='texpara'><div id='format.parse.ctx-1.sentence-1' class='sentence'>An instance of <span class='texttt'>basic_<span class='shy'></span>format_<span class='shy'></span>parse_<span class='shy'></span>context</span> holds
the format string parsing state, consisting of
the format string range being parsed and
the argument counter for automatic indexing<a class='hidden_link' href='#format.parse.ctx-1.sentence-1'>.</a></div></div></div><div class='para' id='format.parse.ctx-2'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17490'>#</a></div><div class='texpara'><div id='format.parse.ctx-2.sentence-1' class='sentence'>If a program declares an explicit or partial specialization of
<span class='texttt'>basic_<span class='shy'></span>format_<span class='shy'></span>parse_<span class='shy'></span>context</span>,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#format.parse.ctx-2.sentence-1'>.</a></div></div></div><div class='texpara'><div id='lib:basic_format_parse_context,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:basic_format_parse_context,constructor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> basic_format_parse_context<span class='parenthesis'>(</span>basic_string_view<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span> fmt<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='format.parse.ctx-3'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17501'>#</a></div><div class='texpara'><div id='format.parse.ctx-3.sentence-1' class='sentence'><i >Effects</i>: Initializes
<span class='texttt'>begin_<span class='shy'></span></span> with <span class='texttt'>fmt<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
<span class='texttt'>end_<span class='shy'></span></span> with <span class='texttt'>fmt<span class='operator'>.</span>end<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
<span class='texttt'>indexing_<span class='shy'></span></span> with <span class='texttt'>unknown</span>,
<span class='texttt'>next_<span class='shy'></span>arg_<span class='shy'></span>id_<span class='shy'></span></span> with <span class='texttt'><span class='literal'>0</span></span>, and
<span class='texttt'>num_<span class='shy'></span>args_<span class='shy'></span></span> with <span class='texttt'><span class='literal'>0</span></span><a class='hidden_link' href='#format.parse.ctx-3.sentence-1'>.</a></div> <div id='format.parse.ctx-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#format.parse.ctx-note-1'>1</a></i>:&ensp;<div id='format.parse.ctx-3.sentence-2' class='sentence'>Any call to
<span class='texttt'>next_<span class='shy'></span>arg_<span class='shy'></span>id</span>, <span class='texttt'>check_<span class='shy'></span>arg_<span class='shy'></span>id</span>, or <span class='texttt'>check_<span class='shy'></span>dynamic_<span class='shy'></span>spec</span>
on an instance of <span class='texttt'>basic_<span class='shy'></span>format_<span class='shy'></span>parse_<span class='shy'></span>context</span>
initialized using this constructor is not a core constant expression<a class='hidden_link' href='#format.parse.ctx-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:basic_format_parse_context,begin'><div id='lib:begin,basic_format_parse_context'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:begin,basic_format_parse_context'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> const_iterator begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='format.parse.ctx-4'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17523'>#</a></div><div class='texpara'><div id='format.parse.ctx-4.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>begin_<span class='shy'></span></span><a class='hidden_link' href='#format.parse.ctx-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:basic_format_parse_context,end'><div id='lib:end,basic_format_parse_context'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:end,basic_format_parse_context'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> const_iterator end<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='format.parse.ctx-5'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17534'>#</a></div><div class='texpara'><div id='format.parse.ctx-5.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>end_<span class='shy'></span></span><a class='hidden_link' href='#format.parse.ctx-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:basic_format_parse_context,advance_to'><div id='lib:advance_to,basic_format_parse_context'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:advance_to,basic_format_parse_context'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>void</span> advance_to<span class='parenthesis'>(</span>const_iterator it<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='format.parse.ctx-6'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17545'>#</a></div><div class='texpara'><div id='format.parse.ctx-6.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>end<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is reachable from <span class='texttt'>it</span><a class='hidden_link' href='#format.parse.ctx-6.sentence-1'>.</a></div></div></div></div><div class='para' id='format.parse.ctx-7'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17549'>#</a></div><div class='texpara'><div id='format.parse.ctx-7.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'>begin_<span class='shy'></span> <span class='operator'>=</span> it;</span></div></div></div></div><div class='texpara'><div id='lib:basic_format_parse_context,next_arg_id'><div id='lib:next_arg_id,basic_format_parse_context'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:next_arg_id,basic_format_parse_context'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> size_t next_arg_id<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='format.parse.ctx-8'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17560'>#</a></div><div class='texpara'><div id='format.parse.ctx-8.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>indexing_<span class='shy'></span> <span class='operator'>!</span><span class='operator'>=</span> manual</span> is <span class='texttt'><span class='literal'>true</span></span>, equivalent to:
<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span>indexing_ <span class='operator'>=</span><span class='operator'>=</span> unknown<span class='parenthesis'>)</span>
  indexing_ <span class='operator'>=</span> automatic;
<span class='keyword'>return</span> next_arg_id_<span class='operator'>+</span><span class='operator'>+</span>;
</span></div></div></div></div><div class='para' id='format.parse.ctx-9'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17569'>#</a></div><div class='texpara'><div id='format.parse.ctx-9.sentence-1' class='sentence'><i >Throws</i>: <span class='texttt'>format_<span class='shy'></span>error</span> if <span class='texttt'>indexing_<span class='shy'></span> <span class='operator'>=</span><span class='operator'>=</span> manual</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#format.parse.ctx-9.sentence-1'>.</a></div> <div id='format.parse.ctx-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#format.parse.ctx-note-2'>2</a></i>:&ensp;<div id='format.parse.ctx-9.sentence-2' class='sentence'>This indicates mixing of automatic and manual argument indexing<a class='hidden_link' href='#format.parse.ctx-9.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='format.parse.ctx-10'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17576'>#</a></div><div class='texpara'><div id='format.parse.ctx-10.sentence-1' class='sentence'><i >Remarks</i>: Let <span class='texttt'><i >cur-arg-id</i></span> be the value of <span class='texttt'>next_<span class='shy'></span>arg_<span class='shy'></span>id_<span class='shy'></span></span> prior to this call<a class='hidden_link' href='#format.parse.ctx-10.sentence-1'>.</a></div> <div id='format.parse.ctx-10.sentence-2' class='sentence'>Call expressions where <span class='texttt'><i >cur-arg-id</i> <span class='anglebracket'>&gt;</span><span class='operator'>=</span> num_<span class='shy'></span>args_<span class='shy'></span></span> is <span class='texttt'><span class='literal'>true</span></span>
are not core constant expressions (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)<a class='hidden_link' href='#format.parse.ctx-10.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:basic_format_parse_context,check_arg_id'><div id='lib:check_arg_id,basic_format_parse_context'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:check_arg_id,basic_format_parse_context'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>void</span> check_arg_id<span class='parenthesis'>(</span>size_t id<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='format.parse.ctx-11'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17589'>#</a></div><div class='texpara'><div id='format.parse.ctx-11.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>indexing_<span class='shy'></span> <span class='operator'>!</span><span class='operator'>=</span> automatic</span> is <span class='texttt'><span class='literal'>true</span></span>, equivalent to:
<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span>indexing_ <span class='operator'>=</span><span class='operator'>=</span> unknown<span class='parenthesis'>)</span>
  indexing_ <span class='operator'>=</span> manual;
</span></div></div></div></div><div class='para' id='format.parse.ctx-12'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17597'>#</a></div><div class='texpara'><div id='format.parse.ctx-12.sentence-1' class='sentence'><i >Throws</i>: <span class='texttt'>format_<span class='shy'></span>error</span> if
<span class='texttt'>indexing_<span class='shy'></span> <span class='operator'>=</span><span class='operator'>=</span> automatic</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#format.parse.ctx-12.sentence-1'>.</a></div> <div id='format.parse.ctx-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#format.parse.ctx-note-3'>3</a></i>:&ensp;<div id='format.parse.ctx-12.sentence-2' class='sentence'>This indicates mixing of automatic and manual argument indexing<a class='hidden_link' href='#format.parse.ctx-12.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='format.parse.ctx-13'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17605'>#</a></div><div class='texpara'><div id='format.parse.ctx-13.sentence-1' class='sentence'><i >Remarks</i>: A call to this function is a core constant expression (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>) only if
<span class='texttt'>id <span class='anglebracket'>&lt;</span> num_<span class='shy'></span>args_<span class='shy'></span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#format.parse.ctx-13.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:basic_format_parse_context,check_dynamic_spec'><div id='lib:check_dynamic_spec,basic_format_parse_context'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:check_dynamic_spec,basic_format_parse_context'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Ts<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>void</span> check_dynamic_spec<span class='parenthesis'>(</span>size_t id<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='format.parse.ctx-14'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17618'>#</a></div><div class='texpara'><div id='format.parse.ctx-14.sentence-1' class='sentence'><i >Mandates</i>: The types in <span class='texttt'>Ts<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> are unique<a class='hidden_link' href='#format.parse.ctx-14.sentence-1'>.</a></div> <div id='format.parse.ctx-14.sentence-2' class='sentence'>Each type in <span class='texttt'>Ts<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> is one of
<span id=':bool'><span class='texttt'><span class='keyword'>bool</span></span></span>,
<span class='texttt'>char_<span class='shy'></span>type</span>,
<span id=':int'><span class='texttt'><span class='keyword'>int</span></span></span>,
<span class='texttt'><span id=':unsigned'><span class='texttt'><span class='keyword'>unsigned</span></span></span> <span id=':int_'><span class='texttt'><span class='keyword'>int</span></span></span></span>,
<span class='texttt'><span id=':long'><span class='texttt'><span class='keyword'>long</span></span></span> <span id=':long_'><span class='texttt'><span class='keyword'>long</span></span></span> <span id=':int__'><span class='texttt'><span class='keyword'>int</span></span></span></span>,
<span class='texttt'><span id=':unsigned_'><span class='texttt'><span class='keyword'>unsigned</span></span></span> <span id=':long__'><span class='texttt'><span class='keyword'>long</span></span></span> <span id=':long___'><span class='texttt'><span class='keyword'>long</span></span></span> <span id=':int___'><span class='texttt'><span class='keyword'>int</span></span></span></span>,
<span id=':float'><span class='texttt'><span class='keyword'>float</span></span></span>,
<span id=':double'><span class='texttt'><span class='keyword'>double</span></span></span>,
<span class='texttt'><span id=':long____'><span class='texttt'><span class='keyword'>long</span></span></span> <span id=':double_'><span class='texttt'><span class='keyword'>double</span></span></span></span>,
<span class='texttt'><span id=':const'><span class='texttt'><span class='keyword'>const</span></span></span> char_<span class='shy'></span>type<span class='operator'>*</span></span>,
<span class='texttt'>basic_<span class='shy'></span>string_<span class='shy'></span>view<span class='anglebracket'>&lt;</span>char_<span class='shy'></span>type<span class='anglebracket'>&gt;</span></span>, or
<span class='texttt'><span id=':const_'><span class='texttt'><span class='keyword'>const</span></span></span> <span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span><span class='operator'>*</span></span><a class='hidden_link' href='#format.parse.ctx-14.sentence-2'>.</a></div></div></div></div><div class='para' id='format.parse.ctx-15'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17635'>#</a></div><div class='texpara'><div id='format.parse.ctx-15.sentence-1' class='sentence'><i >Remarks</i>: A call to this function is a core constant expression only if
<ul class='itemize'><li id='format.parse.ctx-15.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#format.parse.ctx-15.1'>(15.1)</a></div><span class='texttt'>id <span class='anglebracket'>&lt;</span> num_<span class='shy'></span>args_<span class='shy'></span></span> is <span class='texttt'><span class='literal'>true</span></span> and</li><li id='format.parse.ctx-15.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#format.parse.ctx-15.2'>(15.2)</a></div>the type of the corresponding format argument
(after conversion to <span class='texttt'>basic_<span class='shy'></span>format_<span class='shy'></span>arg<span class='anglebracket'>&lt;</span>Context<span class='anglebracket'>&gt;</span></span>) is one of the types in <span class='texttt'>Ts<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><a class='hidden_link' href='#format.parse.ctx-15.sentence-1'>.</a></li></ul></div></div></div></div><div class='texpara'><div id='lib:basic_format_parse_context,check_dynamic_spec_integral'><div id='lib:check_dynamic_spec_integral,basic_format_parse_context'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:check_dynamic_spec_integral,basic_format_parse_context'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>void</span> check_dynamic_spec_integral<span class='parenthesis'>(</span>size_t id<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='format.parse.ctx-16'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17653'>#</a></div><div class='texpara'><div id='format.parse.ctx-16.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'>check_dynamic_spec<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>unsigned</span> <span class='keyword'>int</span>, <span class='keyword'>long</span> <span class='keyword'>long</span> <span class='keyword'>int</span>, <span class='keyword'>unsigned</span> <span class='keyword'>long</span> <span class='keyword'>long</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>id<span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:basic_format_parse_context,check_dynamic_spec_string'><div id='lib:check_dynamic_spec_string,basic_format_parse_context'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:check_dynamic_spec_string,basic_format_parse_context'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>void</span> check_dynamic_spec_string<span class='parenthesis'>(</span>size_t id<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='format.parse.ctx-17'><div class='marginalizedparent'><a class='marginalized' href='#format.parse.ctx-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17667'>#</a></div><div class='texpara'><div id='format.parse.ctx-17.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'>check_dynamic_spec<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> char_type<span class='operator'>*</span>, basic_string_view<span class='anglebracket'>&lt;</span>char_type<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>id<span class='parenthesis'>)</span>;
</span></div></div></div></div></div><div id='format.context' class='section'><h4 ><a class='secnum' href='#format.context' style='min-width:95pt'>22.14.6.7</a> Class template <span class='texttt'>basic_<span class='shy'></span>format_<span class='shy'></span>context</span> <a class='abbr_ref' href='format.context'>[format.context]</a></h4><div class='texpara'><span id='lib:basic_format_context,formatter_type'><span id='lib:formatter_type,basic_format_context'><span id='lib:basic_format_context,char_type'><span id='lib:char_type,basic_format_context'><span id='lib:basic_format_context,iterator'><span id='lib:iterator,basic_format_context'><span id='lib:basic_format_context'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:basic_format_context'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Out, <span class='keyword'>class</span> charT<span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> basic_format_context <span class='curlybracket'>{</span>
    basic_format_args<span class='anglebracket'>&lt;</span>basic_format_context<span class='anglebracket'>&gt;</span> args_;      <span class='comment'>// <i >exposition only</i></span>
    Out out_;                                           <span class='comment'>// <i >exposition only</i></span>

    basic_format_context<span class='parenthesis'>(</span><span class='keyword'>const</span> basic_format_context<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    basic_format_context<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> basic_format_context<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> iterator <span class='operator'>=</span> Out;
    <span class='keyword'>using</span> char_type <span class='operator'>=</span> charT;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> formatter_type <span class='operator'>=</span> formatter<span class='anglebracket'>&lt;</span>T, charT<span class='anglebracket'>&gt;</span>;

    basic_format_arg<span class='anglebracket'>&lt;</span>basic_format_context<span class='anglebracket'>&gt;</span> arg<span class='parenthesis'>(</span>size_t id<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    std<span class='operator'>::</span>locale locale<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    iterator out<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>void</span> advance_to<span class='parenthesis'>(</span>iterator it<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></span></span></span></span></span></span></div><div class='para' id='format.context-1'><div class='marginalizedparent'><a class='marginalized' href='#format.context-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17705'>#</a></div><div class='texpara'><div id='format.context-1.sentence-1' class='sentence'>An instance of <span class='texttt'>basic_<span class='shy'></span>format_<span class='shy'></span>context</span> holds formatting state
consisting of the formatting arguments and the output iterator<a class='hidden_link' href='#format.context-1.sentence-1'>.</a></div></div></div><div class='para' id='format.context-2'><div class='marginalizedparent'><a class='marginalized' href='#format.context-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17709'>#</a></div><div class='texpara'><div id='format.context-2.sentence-1' class='sentence'>If a program declares an explicit or partial specialization of
<span class='texttt'>basic_<span class='shy'></span>format_<span class='shy'></span>context</span>,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#format.context-2.sentence-1'>.</a></div></div></div><div class='para' id='format.context-3'><div class='marginalizedparent'><a class='marginalized' href='#format.context-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17714'>#</a></div><div class='texpara'><div id='format.context-3.sentence-1' class='sentence'><span class='texttt'>Out</span> shall model <span class='texttt'><a href='iterator.concept.output#concept:output_iterator' title='25.3.4.10&emsp;Concept output_&shy;iterator&emsp;[iterator.concept.output]'><span id='conceptref:output_iterator_'><span class='texttt'>output_<span class='shy'></span>iterator</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> charT<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#format.context-3.sentence-1'>.</a></div></div></div><div class='para' id='format.context-4'><div class='marginalizedparent'><a class='marginalized' href='#format.context-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17717'>#</a></div><div class='texpara'><div id='format.context-4.sentence-1' class='sentence'><a class='index' id='lib:format_context'></a><span class='texttt'>format_<span class='shy'></span>context</span> is an alias for
a specialization of <span class='texttt'>basic_<span class='shy'></span>format_<span class='shy'></span>context</span>
with an output iterator
that appends to <span class='texttt'>string</span>,
such as <span class='texttt'>back_<span class='shy'></span>insert_<span class='shy'></span>iterator<span class='anglebracket'>&lt;</span>string<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#format.context-4.sentence-1'>.</a></div> <div id='format.context-4.sentence-2' class='sentence'><a class='index' id='lib:wformat_context'></a>Similarly, <span class='texttt'>wformat_<span class='shy'></span>context</span> is an alias for
a specialization of <span class='texttt'>basic_<span class='shy'></span>format_<span class='shy'></span>context</span>
with an output iterator
that appends to <span class='texttt'>wstring</span><a class='hidden_link' href='#format.context-4.sentence-2'>.</a></div></div></div><div class='para' id='format.context-5'><div class='marginalizedparent'><a class='marginalized' href='#format.context-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17730'>#</a></div><div class='texpara'><div id='format.context-5.sentence-1' class='sentence'><i >Recommended practice</i>: For a given type <span class='texttt'>charT</span>,
implementations should provide
a single instantiation of <span class='texttt'>basic_<span class='shy'></span>format_<span class='shy'></span>context</span>
for appending to
<span class='texttt'>basic_<span class='shy'></span>string<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span></span>,
<span class='texttt'>vector<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span></span>,
or any other container with contiguous storage
by wrapping those in temporary objects with a uniform interface
(such as a <span class='texttt'>span<span class='anglebracket'>&lt;</span>charT<span class='anglebracket'>&gt;</span></span>) and polymorphic reallocation<a class='hidden_link' href='#format.context-5.sentence-1'>.</a></div></div></div><div class='texpara'><div id='lib:basic_format_context,arg'><div id='lib:arg,basic_format_context'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:arg,basic_format_context'>🔗</a></div><code class='itemdeclcode'>basic_format_arg<span class='anglebracket'>&lt;</span>basic_format_context<span class='anglebracket'>&gt;</span> arg<span class='parenthesis'>(</span>size_t id<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='format.context-6'><div class='marginalizedparent'><a class='marginalized' href='#format.context-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17748'>#</a></div><div class='texpara'><div id='format.context-6.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>args_<span class='shy'></span><span class='operator'>.</span>get<span class='parenthesis'>(</span>id<span class='parenthesis'>)</span></span><a class='hidden_link' href='#format.context-6.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:basic_format_context,locale'><div id='lib:locale,basic_format_context'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:locale,basic_format_context'>🔗</a></div><code class='itemdeclcode'>std<span class='operator'>::</span>locale locale<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='format.context-7'><div class='marginalizedparent'><a class='marginalized' href='#format.context-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17759'>#</a></div><div class='texpara'><div id='format.context-7.sentence-1' class='sentence'><i >Returns</i>: The locale passed to the formatting function
if the latter takes one,
and <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>locale<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> otherwise<a class='hidden_link' href='#format.context-7.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:basic_format_context,out'><div id='lib:out,basic_format_context'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:out,basic_format_context'>🔗</a></div><code class='itemdeclcode'>iterator out<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='format.context-8'><div class='marginalizedparent'><a class='marginalized' href='#format.context-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17772'>#</a></div><div class='texpara'><div id='format.context-8.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>out_<span class='shy'></span><span class='parenthesis'>)</span>;</span></div></div></div></div><div class='texpara'><div id='lib:basic_format_context,advance_to'><div id='lib:advance_to,basic_format_context'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:advance_to,basic_format_context'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> advance_to<span class='parenthesis'>(</span>iterator it<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='format.context-9'><div class='marginalizedparent'><a class='marginalized' href='#format.context-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/utilities.tex#L17783'>#</a></div><div class='texpara'><div id='format.context-9.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'>out_<span class='shy'></span> <span class='operator'>=</span> std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>it<span class='parenthesis'>)</span>;</span></div></div></div></div><div class='texpara'><a class='index' id=':left-pad'></a><div id='format.context-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#format.context-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>int</span> value; <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> std<span class='operator'>::</span>formatter<span class='anglebracket'>&lt;</span>S<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  size_t width_arg_id <span class='operator'>=</span> <span class='literal'>0</span>;

  <span class='comment'>// Parses a width argument id in the format <span class='tcode_in_codeblock'>{</span> <span class='textsf'><i >digit</i></span> <span class='tcode_in_codeblock'>}</span>.</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> parse<span class='parenthesis'>(</span>format_parse_context<span class='operator'>&amp;</span> ctx<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>auto</span> iter <span class='operator'>=</span> ctx<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>auto</span> is_digit <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> c<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> c <span class='anglebracket'>&gt;</span><span class='operator'>=</span> <span class='literal'>'0'</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> c <span class='anglebracket'>&lt;</span><span class='operator'>=</span> <span class='literal'>'9'</span>; <span class='curlybracket'>}</span>;
    <span class='keyword'>auto</span> get_char <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> iter <span class='operator'>!</span><span class='operator'>=</span> ctx<span class='operator'>.</span>end<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>?</span> <span class='operator'>*</span>iter <span class='operator'>:</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>;
    <span class='keyword'>if</span> <span class='parenthesis'>(</span>get_char<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>'{'</span><span class='parenthesis'>)</span>
      <span class='keyword'>return</span> iter;
    <span class='operator'>+</span><span class='operator'>+</span>iter;
    <span class='keyword'>char</span> c <span class='operator'>=</span> get_char<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>if</span> <span class='parenthesis'>(</span><span class='operator'>!</span>is_digit<span class='parenthesis'>(</span>c<span class='parenthesis'>)</span> <span class='operator'>|</span><span class='operator'>|</span> <span class='parenthesis'>(</span><span class='operator'>+</span><span class='operator'>+</span>iter, get_char<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>'}'</span><span class='parenthesis'>)</span>
      <span class='keyword'>throw</span> format_error<span class='parenthesis'>(</span><span class='literal'>"invalid format"</span><span class='parenthesis'>)</span>;
    width_arg_id <span class='operator'>=</span> c <span class='operator'>-</span> <span class='literal'>'0'</span>;
    ctx<span class='operator'>.</span>check_arg_id<span class='parenthesis'>(</span>width_arg_id<span class='parenthesis'>)</span>;
    <span class='keyword'>return</span> <span class='operator'>+</span><span class='operator'>+</span>iter;
  <span class='curlybracket'>}</span>

  <span class='comment'>// Formats an <span class='tcode_in_codeblock'>S</span> with width given by the argument <span class='tcode_in_codeblock'>width_<span class='shy'></span>arg_<span class='shy'></span>id</span>.</span>
  <span class='keyword'>auto</span> format<span class='parenthesis'>(</span>S s, format_context<span class='operator'>&amp;</span> ctx<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> width <span class='operator'>=</span> ctx<span class='operator'>.</span>arg<span class='parenthesis'>(</span>width_arg_id<span class='parenthesis'>)</span><span class='operator'>.</span>visit<span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> value<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> <span class='curlybracket'>{</span>
      <span class='keyword'>if</span> <span class='keyword'>constexpr</span> <span class='parenthesis'>(</span><span class='operator'>!</span>is_integral_v<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span>value<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>
        <span class='keyword'>throw</span> format_error<span class='parenthesis'>(</span><span class='literal'>"width is not integral"</span><span class='parenthesis'>)</span>;
      <span class='keyword'>else</span> <span class='keyword'>if</span> <span class='parenthesis'>(</span>value <span class='anglebracket'>&lt;</span> <span class='literal'>0</span> <span class='operator'>|</span><span class='operator'>|</span> value <span class='anglebracket'>&gt;</span> numeric_limits<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>max<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
        <span class='keyword'>throw</span> format_error<span class='parenthesis'>(</span><span class='literal'>"invalid width"</span><span class='parenthesis'>)</span>;
      <span class='keyword'>else</span>
        <span class='keyword'>return</span> value;
      <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
    <span class='keyword'>return</span> format_to<span class='parenthesis'>(</span>ctx<span class='operator'>.</span>out<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, <span class='literal'>"{0:x&gt;{1}}"</span>, s<span class='operator'>.</span>value, width<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

std<span class='operator'>::</span>string s <span class='operator'>=</span> std<span class='operator'>::</span>format<span class='parenthesis'>(</span><span class='literal'>"{0:{1}}"</span>, S<span class='curlybracket'>{</span><span class='literal'>42</span><span class='curlybracket'>}</span>, <span class='literal'>10</span><span class='parenthesis'>)</span>;  <span class='comment'>// value of <span class='tcode_in_codeblock'>s</span> is <span class='tcode_in_codeblock'>"xxxxxxxx42"</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>