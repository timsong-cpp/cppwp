<!DOCTYPE html><html lang='en'><head><title>[expr.prim.this]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>8</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>8.4</a> Primary expressions <a class='abbr_ref' href='expr.prim#this'>[expr.prim]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>8.4.2</a> This <a class='abbr_ref'>[expr.prim.this]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/487e870347a4c76c9b6dd664c4e5671e709c81d8/source/expressions.tex#L503'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':this'></a></span>The keyword <a href='class.this'><span class='texttt'>this</span></a> names a pointer to the object for which a non-static member
function is invoked or a non-static data member's
initializer (<a href='class.mem'>[class.mem]</a>) is evaluated<a class='hidden_link' href='#1.sentence-1'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/487e870347a4c76c9b6dd664c4e5671e709c81d8/source/expressions.tex#L509'>#</a></div><div id='2.sentence-1' class='sentence'>If a declaration declares a member function or member function template of a
class <span class='texttt'>X</span>, the expression <span class='texttt'>this</span> is a prvalue of type “pointer to
<i ><a href='dcl.decl#nt:cv-qualifier-seq'>cv-qualifier-seq</a></i> <span class='texttt'>X</span>” between the optional
<i ><a href='dcl.decl#nt:cv-qualifier-seq'>cv-qualifier-seq</a></i> and the end of the <i ><a href='dcl.fct.def.general#nt:function-definition'>function-definition</a></i>,
<i ><a href='class.mem#nt:member-declarator'>member-declarator</a></i>, or <i ><a href='dcl.decl#nt:declarator'>declarator</a></i><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>It shall not appear
before the optional <i ><a href='dcl.decl#nt:cv-qualifier-seq'>cv-qualifier-seq</a></i> and it shall not appear within
the declaration of a static member function (although its type and value category
are defined within a static member function as they are within a non-static
member function)<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.sentence-3' class='sentence'>This is because declaration matching does not
occur until the complete declarator is known<a class='hidden_link' href='#2.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='2.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#2.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.sentence-4' class='sentence'>In a <i ><a href='dcl.decl#nt:trailing-return-type'>trailing-return-type</a></i>,
the class being defined is not required to be complete
for purposes of <a href='expr.ref'>class member access</a><a class='hidden_link' href='#2.sentence-4'>.</a></div> <div id='2.sentence-5' class='sentence'>Class members declared later are not visible<a class='hidden_link' href='#2.sentence-5'>.</a></div> <div id='2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  char g();
  template&lt;class T&gt; auto f(T t) -&gt; decltype(t + g())
    { return t + g(); }
};
template auto A::f(int t) -&gt; decltype(t + g());</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/487e870347a4c76c9b6dd664c4e5671e709c81d8/source/expressions.tex#L537'>#</a></div><div id='3.sentence-1' class='sentence'>Otherwise, if a <i ><a href='class.mem#nt:member-declarator'>member-declarator</a></i> declares a non-static <a href='class.mem'>data
member</a> of a class <span class='texttt'>X</span>, the expression <span class='texttt'>this</span> is
a prvalue of type “pointer to <span class='texttt'>X</span>” within the
optional <a href='class.mem#def:default_member_initializer'>default member initializer</a><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>It shall not appear elsewhere
in the <i ><a href='class.mem#nt:member-declarator'>member-declarator</a></i><a class='hidden_link' href='#3.sentence-2'>.</a></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/487e870347a4c76c9b6dd664c4e5671e709c81d8/source/expressions.tex#L544'>#</a></div><div id='4.sentence-1' class='sentence'>The expression <span class='texttt'>this</span> shall not appear in any other context<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class Outer {
  int a[sizeof(*this)];               <span class='comment'>// error: not inside a member function
</span>  unsigned int sz = sizeof(*this);    <span class='comment'>// OK: in default member initializer
</span>
  void f() {
    int b[sizeof(*this)];             <span class='comment'>// OK
</span>
    struct Inner {
      int c[sizeof(*this)];           <span class='comment'>// error: not inside a member function of <span class='tcode_in_codeblock'>Inner</span>
</span>    };
  }
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></body></html>