<!DOCTYPE html><html lang='en'><head><title>[module]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>10</a> Modules <a class='abbr_ref' href='./#module'>[module]</a></h1><div id='unit' class='section'><h2 ><a class='secnum' href='#unit' style='min-width:65pt'>10.1</a> Module units and purviews <a class='abbr_ref' href='module.unit'>[module.unit]</a></h2><div class='texpara'><div class='bnf' id='nt:module-declaration'>
<a class='hidden_link' href='#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='nt:module-declaration'><span id=':module-declaration'>module-declaration<span class='textnormal'>:</span></span></span></a><br>export-keyword<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> module-keyword <a href='#nt:module-name' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-name'><span class='textsf'><i >module-name</i></span></span></a> <a href='#nt:module-partition' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-partition'><span class='textsf'><i >module-partition</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='terminal'>;</span>
</div></div><div class='texpara'><div class='bnf' id='nt:module-name'>
<a class='hidden_link' href='#nt:module-name' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='nt:module-name'><span id=':module-name'>module-name<span class='textnormal'>:</span></span></span></a><br><a href='#nt:module-name-qualifier' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-name-qualifier'><span class='textsf'><i >module-name-qualifier</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier'><span class='textsf'><i >identifier</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:module-partition'>
<a class='hidden_link' href='#nt:module-partition' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='nt:module-partition'><span id=':module-partition'>module-partition<span class='textnormal'>:</span></span></span></a><br><span class='terminal'><span class='operator'>:</span></span> <a href='#nt:module-name-qualifier' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-name-qualifier_'><span class='textsf'><i >module-name-qualifier</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_'><span class='textsf'><i >identifier</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:module-name-qualifier'>
<a class='hidden_link' href='#nt:module-name-qualifier' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='nt:module-name-qualifier'><span id=':module-name-qualifier'>module-name-qualifier<span class='textnormal'>:</span></span></span></a><br><a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier__'><span class='textsf'><i >identifier</i></span></span></a> <span class='terminal'><span class='operator'>.</span></span><br><a href='#nt:module-name-qualifier' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-name-qualifier__'><span class='textsf'><i >module-name-qualifier</i></span></span></a> <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier___'><span class='textsf'><i >identifier</i></span></span></a> <span class='terminal'><span class='operator'>.</span></span>
</div></div><div class='para' id='unit-1'><div class='marginalizedparent'><a class='marginalized' href='#unit-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L29'>#</a></div><div class='texpara'><div id='unit-1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:module_unit' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='def:module_unit'><i >module unit</i></span></a> is a translation unit that contains
a <a href='#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration'><span class='textsf'><i >module-declaration</i></span></span></a><a class='hidden_link' href='#unit-1.sentence-1'>.</a></div> <div id='unit-1.sentence-2' class='sentence'>A <a class='hidden_link' href='#def:module,named' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='def:module,named'><i >named module</i></span></a> is the
collection of module units with the same <a href='#nt:module-name' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-name_'><span class='textsf'><i >module-name</i></span></span></a><a class='hidden_link' href='#unit-1.sentence-2'>.</a></div> <div id='unit-1.sentence-3' class='sentence'>The identifiers <span class='texttt'><span class='keyword'>module</span></span> and <span class='texttt'><span class='keyword'>import</span></span>
shall not appear as <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier____'><span class='textsf'><i >identifier</i></span></span></a><i >s</i>
in a <a href='#nt:module-name' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-name__'><span class='textsf'><i >module-name</i></span></span></a> or <a href='#nt:module-partition' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-partition_'><span class='textsf'><i >module-partition</i></span></span></a><a class='hidden_link' href='#unit-1.sentence-3'>.</a></div> <div id='unit-1.sentence-4' class='sentence'><a class='index' id=':module,reserved_name_of'></a>All <a href='#nt:module-name' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-name___'><span class='textsf'><i >module-name</i></span></span></a><i >s</i> either beginning with an <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_____'><span class='textsf'><i >identifier</i></span></span></a>
consisting of <span class='texttt'>std</span> followed by zero or more <a href='lex.name#nt:digit' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:digit'><span class='textsf'><i >digit</i></span></span></a><i >s</i> or
containing a reserved identifier (<a href='lex.name' title='5.11&emsp;Identifiers'>[lex.<span class='shy'></span>name]</a>)
are reserved and shall not be specified in a <a href='#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration_'><span class='textsf'><i >module-declaration</i></span></span></a>;
no diagnostic is required<a class='hidden_link' href='#unit-1.sentence-4'>.</a></div> <div id='unit-1.sentence-5' class='sentence'>If any <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier______'><span class='textsf'><i >identifier</i></span></span></a> in a reserved <a href='#nt:module-name' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-name____'><span class='textsf'><i >module-name</i></span></span></a>
is a reserved identifier,
the module name is reserved for use by C++ implementations;
otherwise it is reserved for future standardization<a class='hidden_link' href='#unit-1.sentence-5'>.</a></div> <div id='unit-1.sentence-6' class='sentence'>The optional <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a>
appertains to the <a href='#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration__'><span class='textsf'><i >module-declaration</i></span></span></a><a class='hidden_link' href='#unit-1.sentence-6'>.</a></div></div></div><div class='para' id='unit-2'><div class='marginalizedparent'><a class='marginalized' href='#unit-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L50'>#</a></div><div class='texpara'><div id='unit-2.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:module_interface_unit' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='def:module_interface_unit'><i >module interface unit</i></span></a> is a module unit whose
<a href='#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration___'><span class='textsf'><i >module-declaration</i></span></span></a> starts with <span id='ntref:export-keyword'><span class='textsf'><i >export-keyword</i></span></span>;
any other module unit is a <a class='hidden_link' href='#def:module_implementation_unit' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='def:module_implementation_unit'><i >module implementation unit</i></span></a><a class='hidden_link' href='#unit-2.sentence-1'>.</a></div> <div id='unit-2.sentence-2' class='sentence'>A named module shall contain exactly one module interface unit
with no <a href='#nt:module-partition' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-partition__'><span class='textsf'><i >module-partition</i></span></span></a>, known as the
<a class='hidden_link' href='#def:primary_module_interface_unit' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='def:primary_module_interface_unit'><i >primary module interface unit</i></span></a> of the module;
no diagnostic is required<a class='hidden_link' href='#unit-2.sentence-2'>.</a></div></div></div><div class='para' id='unit-3'><div class='marginalizedparent'><a class='marginalized' href='#unit-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L59'>#</a></div><div class='texpara'><div id='unit-3.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:module_partition' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='def:module_partition'><i >module partition</i></span></a> is
a module unit whose <a href='#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration____'><span class='textsf'><i >module-declaration</i></span></span></a> contains
a <a href='#nt:module-partition' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-partition___'><span class='textsf'><i >module-partition</i></span></span></a><a class='hidden_link' href='#unit-3.sentence-1'>.</a></div> <div id='unit-3.sentence-2' class='sentence'>A named module shall not contain multiple module partitions with
the same <a href='#nt:module-partition' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-partition____'><span class='textsf'><i >module-partition</i></span></span></a><a class='hidden_link' href='#unit-3.sentence-2'>.</a></div> <div id='unit-3.sentence-3' class='sentence'>All module partitions of a module
that are module interface units
shall be directly or indirectly exported
by the primary module interface unit (<a href='#import' title='10.3&emsp;Import declaration'>[module.<span class='shy'></span>import]</a>)<a class='hidden_link' href='#unit-3.sentence-3'>.</a></div> <div id='unit-3.sentence-4' class='sentence'>No diagnostic is required for a violation of these rules<a class='hidden_link' href='#unit-3.sentence-4'>.</a></div> <div id='unit-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#unit-note-1'>1</a></i>:&ensp;<div id='unit-3.sentence-5' class='sentence'>Module partitions can be imported only by
other module units in the same module<a class='hidden_link' href='#unit-3.sentence-5'>.</a></div> <div id='unit-3.sentence-6' class='sentence'>The division of a module into module units
is not visible outside the module<a class='hidden_link' href='#unit-3.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='unit-4'><div class='marginalizedparent'><a class='marginalized' href='#unit-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L77'>#</a></div><div class='texpara'><div id='unit-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#unit-example-1'>1</a></i>:&ensp;<p>Translation unit #1:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> A;
<span class='keyword'>export</span> <span class='keyword'>import</span> <span class='operator'>:</span>Foo;
<span class='keyword'>export</span> <span class='keyword'>int</span> baz<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span></div><div class='texpara'><p>Translation unit #2:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> A<span class='operator'>:</span>Foo;
<span class='keyword'>import</span> <span class='operator'>:</span>Internals;
<span class='keyword'>export</span> <span class='keyword'>int</span> foo<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>2</span> <span class='operator'>*</span> <span class='parenthesis'>(</span>bar<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='literal'>1</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Translation unit #3:<span class='codeblock'><span class='keyword'>module</span> A<span class='operator'>:</span>Internals;
<span class='keyword'>int</span> bar<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span></div><div class='texpara'><p>Translation unit #4:<span class='codeblock'><span class='keyword'>module</span> A;
<span class='keyword'>import</span> <span class='operator'>:</span>Internals;
<span class='keyword'>int</span> bar<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> baz<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span> <span class='literal'>10</span>; <span class='curlybracket'>}</span>
<span class='keyword'>int</span> baz<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>30</span>; <span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='unit-4.sentence-1' class='sentence'>Module <span class='texttt'>A</span> contains four translation units:
<ul class='itemize'><li id='unit-4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#unit-4.1'>(4.1)</a></div>a primary module interface unit,</li><li id='unit-4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#unit-4.2'>(4.2)</a></div>a module partition <span class='texttt'>A<span class='operator'>:</span>Foo</span>, which is a module interface unit
forming part of the interface of module <span class='texttt'>A</span>,</li><li id='unit-4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#unit-4.3'>(4.3)</a></div>a module partition <span class='texttt'>A<span class='operator'>:</span>Internals</span>, which does not contribute
to the external interface of module <span class='texttt'>A</span>, and</li><li id='unit-4.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#unit-4.4'>(4.4)</a></div>a module implementation unit providing
a definition of <span class='texttt'>bar</span> and <span class='texttt'>baz</span>,
which cannot be imported because
it does not have a partition name<a class='hidden_link' href='#unit-4.sentence-1'>.</a></li></ul></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='unit-5'><div class='marginalizedparent'><a class='marginalized' href='#unit-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L117'>#</a></div><div class='texpara'><div id='unit-5.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:purview,module_unit' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='def:purview,module_unit'><i >module unit purview</i></span></a> is
the sequence of <a href='lex.token#nt:token' title='5.10&emsp;Tokens&emsp;[lex.token]'><span id='ntref:token'><span class='textsf'><i >token</i></span></span></a><i >s</i>
starting at the <a href='#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration_____'><span class='textsf'><i >module-declaration</i></span></span></a>
and extending to the end of the translation unit<a class='hidden_link' href='#unit-5.sentence-1'>.</a></div> <div id='unit-5.sentence-2' class='sentence'>The <a class='hidden_link' href='#def:purview,named_module' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='def:purview,named_module'><i >purview</i></span></a>
of a named module <span class='texttt'>M</span> is the set of module unit purviews
of <span class='texttt'>M</span>'s module units<a class='hidden_link' href='#unit-5.sentence-2'>.</a></div></div></div><div class='para' id='unit-6'><div class='marginalizedparent'><a class='marginalized' href='#unit-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L126'>#</a></div><div class='texpara'><div id='unit-6.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:module,global' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='def:module,global'><i >global module</i></span></a> is the collection of all
<a href='#nt:global-module-fragment' title='10.4&emsp;Global module fragment&emsp;[module.global.frag]'><span id='ntref:global-module-fragment'><span class='textsf'><i >global-module-fragment</i></span></span></a><i >s</i>
and all translation units that are not module units<a class='hidden_link' href='#unit-6.sentence-1'>.</a></div> <div id='unit-6.sentence-2' class='sentence'>Declarations appearing in such a context
are said to be in the <a class='hidden_link' href='#def:purview,global_module' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='def:purview,global_module'><i >purview</i></span></a> of the global module<a class='hidden_link' href='#unit-6.sentence-2'>.</a></div> <div id='unit-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#unit-note-2'>2</a></i>:&ensp;<div id='unit-6.sentence-3' class='sentence'>The global module has no name, no module interface unit, and is not
introduced by any <a href='#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration______'><span class='textsf'><i >module-declaration</i></span></span></a><a class='hidden_link' href='#unit-6.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='unit-7'><div class='marginalizedparent'><a class='marginalized' href='#unit-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L137'>#</a></div><div class='texpara'><div id='unit-7.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:module' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='def:module'><i >module</i></span></a> is either a named module or the global module<a class='hidden_link' href='#unit-7.sentence-1'>.</a></div> <div id='unit-7.sentence-2' class='sentence'>A declaration is <a class='hidden_link' href='#def:attached,declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='def:attached,declaration'><i >attached</i></span></a> to a module as follows:
<ul class='itemize'><li id='unit-7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#unit-7.1'>(7.1)</a></div><div class='texpara'><div id='unit-7.1.sentence-1' class='sentence'>If the declaration is a non-dependent friend declaration
that nominates a function with a <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id'><span class='textsf'><i >declarator-id</i></span></span></a>
that is a <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id'><span class='textsf'><i >qualified-id</i></span></span></a> or <a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id'><span class='textsf'><i >template-id</i></span></span></a> or
that nominates a class
other than with an <a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.5&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a> with neither
a <a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier'><span class='textsf'><i >nested-name-specifier</i></span></span></a> nor a <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id'><span class='textsf'><i >simple-template-id</i></span></span></a>,
it is attached to the module to which the friend is attached (<a href='basic.link' title='6.6&emsp;Program and linkage'>[basic.<span class='shy'></span>link]</a>)<a class='hidden_link' href='#unit-7.1.sentence-1'>.</a></div></div></li><li id='unit-7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#unit-7.2'>(7.2)</a></div><div class='texpara'><div id='unit-7.2.sentence-1' class='sentence'>Otherwise, if the declaration
<ul class='itemize'><li id='unit-7.2.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#unit-7.2.1'>(7.2.1)</a></div>is a <a href='namespace.def.general#nt:namespace-definition' title='9.8.2.1&emsp;General&emsp;[namespace.def.general]'><span id='ntref:namespace-definition'><span class='textsf'><i >namespace-definition</i></span></span></a> with external linkage or</li><li id='unit-7.2.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#unit-7.2.2'>(7.2.2)</a></div>appears within a <a href='dcl.link#nt:linkage-specification' title='9.11&emsp;Linkage specifications&emsp;[dcl.link]'><span id='ntref:linkage-specification'><span class='textsf'><i >linkage-specification</i></span></span></a> (<a href='dcl.link' title='9.11&emsp;Linkage specifications'>[dcl.<span class='shy'></span>link]</a>)</li></ul>
it is attached to the global module<a class='hidden_link' href='#unit-7.2.sentence-1'>.</a></div></div></li><li id='unit-7.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#unit-7.3'>(7.3)</a></div><div class='texpara'><div id='unit-7.3.sentence-1' class='sentence'>Otherwise, the declaration is
attached to the module in whose purview it appears<a class='hidden_link' href='#unit-7.3.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='unit-8'><div class='marginalizedparent'><a class='marginalized' href='#unit-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L160'>#</a></div><div class='texpara'><div id='unit-8.sentence-1' class='sentence'>A <a href='#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration_______'><span class='textsf'><i >module-declaration</i></span></span></a>
that contains neither an <span id='ntref:export-keyword_'><span class='textsf'><i >export-keyword</i></span></span>
nor a <a href='#nt:module-partition' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-partition_____'><span class='textsf'><i >module-partition</i></span></span></a>
implicitly imports the primary module interface unit of the module
as if by a <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration'><span class='textsf'><i >module-import-declaration</i></span></span></a><a class='hidden_link' href='#unit-8.sentence-1'>.</a></div> <div id='unit-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#unit-example-2'>2</a></i>:&ensp;<p>Translation unit #1:<span class='codeblock'><span class='keyword'>module</span> B<span class='operator'>:</span>Y;                     <span class='comment'>// does not implicitly import <span class='tcode_in_codeblock'>B</span></span>
<span class='keyword'>int</span> y<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span></div><div class='texpara'><p>Translation unit #2:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> B;
<span class='keyword'>import</span> <span class='operator'>:</span>Y;                      <span class='comment'>// OK, does not create interface dependency cycle</span>
<span class='keyword'>int</span> n <span class='operator'>=</span> y<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span></div><div class='texpara'><p>Translation unit #3:<span class='codeblock'><span class='keyword'>module</span> B<span class='operator'>:</span>X1;                    <span class='comment'>// does not implicitly import <span class='tcode_in_codeblock'>B</span></span>
<span class='keyword'>int</span> <span class='operator'>&amp;</span>a <span class='operator'>=</span> n;                     <span class='comment'>// error: <span class='tcode_in_codeblock'>n</span> not visible here</span>
</span></div><div class='texpara'><p>Translation unit #4:<span class='codeblock'><span class='keyword'>module</span> B<span class='operator'>:</span>X2;                    <span class='comment'>// does not implicitly import <span class='tcode_in_codeblock'>B</span></span>
<span class='keyword'>import</span> B;
<span class='keyword'>int</span> <span class='operator'>&amp;</span>b <span class='operator'>=</span> n;                     <span class='comment'>// OK</span>
</span></div><div class='texpara'><p>Translation unit #5:<span class='codeblock'><span class='keyword'>module</span> B;                       <span class='comment'>// implicitly imports <span class='tcode_in_codeblock'>B</span></span>
<span class='keyword'>int</span> <span class='operator'>&amp;</span>c <span class='operator'>=</span> n;                     <span class='comment'>// OK</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='interface' class='section'><h2 ><a class='secnum' href='#interface' style='min-width:65pt'>10.2</a> Export declaration <a class='abbr_ref' href='module.interface'>[module.interface]</a></h2><div class='texpara'><div class='bnf' id='nt:export-declaration'>
<a class='hidden_link' href='#nt:export-declaration' title='10.2&emsp;Export declaration&emsp;[module.interface]'><span id='nt:export-declaration'><span id=':export-declaration'>export-declaration<span class='textnormal'>:</span></span></span></a><br><span id=':export'><span class='texttt'><span class='keyword'>export</span></span></span> <a href='dcl.pre#nt:name-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:name-declaration'><span class='textsf'><i >name-declaration</i></span></span></a><br><span id=':export_'><span class='texttt'><span class='keyword'>export</span></span></span> <span class='terminal'><span class='curlybracket'>{</span></span> <a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq'><span class='textsf'><i >declaration-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='curlybracket'>}</span></span><br>export-keyword <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration_'><span class='textsf'><i >module-import-declaration</i></span></span></a>
</div></div><div class='para' id='interface-1'><div class='marginalizedparent'><a class='marginalized' href='#interface-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L204'>#</a></div><div class='texpara'><div id='interface-1.sentence-1' class='sentence'>An <a href='#nt:export-declaration' title='10.2&emsp;Export declaration&emsp;[module.interface]'><span id='ntref:export-declaration'><span class='textsf'><i >export-declaration</i></span></span></a> shall inhabit
a namespace scope and appear in the purview of a module interface unit<a class='hidden_link' href='#interface-1.sentence-1'>.</a></div> <div id='interface-1.sentence-2' class='sentence'>An <a href='#nt:export-declaration' title='10.2&emsp;Export declaration&emsp;[module.interface]'><span id='ntref:export-declaration_'><span class='textsf'><i >export-declaration</i></span></span></a> shall not appear directly
or indirectly within an unnamed namespace
or a <a href='#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment'><span class='textsf'><i >private-module-fragment</i></span></span></a><a class='hidden_link' href='#interface-1.sentence-2'>.</a></div> <div id='interface-1.sentence-3' class='sentence'>An <a href='#nt:export-declaration' title='10.2&emsp;Export declaration&emsp;[module.interface]'><span id='ntref:export-declaration__'><span class='textsf'><i >export-declaration</i></span></span></a>
has the declarative effects of its
<a href='dcl.pre#nt:name-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:name-declaration_'><span class='textsf'><i >name-declaration</i></span></span></a>,
<a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq_'><span class='textsf'><i >declaration-seq</i></span></span></a> (if any), or
<a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration__'><span class='textsf'><i >module-import-declaration</i></span></span></a><a class='hidden_link' href='#interface-1.sentence-3'>.</a></div> <div id='interface-1.sentence-4' class='sentence'>The <a href='dcl.pre#nt:name-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:name-declaration__'><span class='textsf'><i >name-declaration</i></span></span></a> of an <a href='#nt:export-declaration' title='10.2&emsp;Export declaration&emsp;[module.interface]'><span id='ntref:export-declaration___'><span class='textsf'><i >export-declaration</i></span></span></a>
shall not declare a partial specialization (<a href='temp.decls.general' title='13.7.1&emsp;General'>[temp.<span class='shy'></span>decls.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#interface-1.sentence-4'>.</a></div> <div id='interface-1.sentence-5' class='sentence'>The <a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq__'><span class='textsf'><i >declaration-seq</i></span></span></a> of
an <a href='#nt:export-declaration' title='10.2&emsp;Export declaration&emsp;[module.interface]'><span id='ntref:export-declaration____'><span class='textsf'><i >export-declaration</i></span></span></a>
shall not contain an <a href='#nt:export-declaration' title='10.2&emsp;Export declaration&emsp;[module.interface]'><span id='ntref:export-declaration_____'><span class='textsf'><i >export-declaration</i></span></span></a> or
<a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration___'><span class='textsf'><i >module-import-declaration</i></span></span></a><a class='hidden_link' href='#interface-1.sentence-5'>.</a></div> <div id='interface-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#interface-note-1'>1</a></i>:&ensp;<div id='interface-1.sentence-6' class='sentence'>An <a href='#nt:export-declaration' title='10.2&emsp;Export declaration&emsp;[module.interface]'><span id='ntref:export-declaration______'><span class='textsf'><i >export-declaration</i></span></span></a> does not establish a scope<a class='hidden_link' href='#interface-1.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='interface-2'><div class='marginalizedparent'><a class='marginalized' href='#interface-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L225'>#</a></div><div class='texpara'><div id='interface-2.sentence-1' class='sentence'>A declaration is <a class='hidden_link' href='#def:declaration,exported' title='10.2&emsp;Export declaration&emsp;[module.interface]'><span id='def:declaration,exported'><i >exported</i></span></a> if it is
declared within an <a href='#nt:export-declaration' title='10.2&emsp;Export declaration&emsp;[module.interface]'><span id='ntref:export-declaration_______'><span class='textsf'><i >export-declaration</i></span></span></a> and
inhabits a namespace scope or it is
<ul class='itemize'><li id='interface-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#interface-2.1'>(2.1)</a></div>a <a href='namespace.def.general#nt:namespace-definition' title='9.8.2.1&emsp;General&emsp;[namespace.def.general]'><span id='ntref:namespace-definition_'><span class='textsf'><i >namespace-definition</i></span></span></a> that contains an
      exported declaration, or</li><li id='interface-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#interface-2.2'>(2.2)</a></div>a declaration within a header unit (<a href='#import' title='10.3&emsp;Import declaration'>[module.<span class='shy'></span>import]</a>)
      that introduces at least one name<a class='hidden_link' href='#interface-2.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='interface-3'><div class='marginalizedparent'><a class='marginalized' href='#interface-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L236'>#</a></div><div class='texpara'><div id='interface-3.sentence-1' class='sentence'>If an exported declaration is not within a header unit,
it shall not declare a name with internal linkage<a class='hidden_link' href='#interface-3.sentence-1'>.</a></div></div></div><div class='para nonNormativeOnly' id='interface-4'><div class='marginalizedparent'><a class='marginalized' href='#interface-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L240'>#</a></div><div class='texpara'><div id='interface-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#interface-example-1'>1</a></i>:&ensp;<p>Source file <span class='texttt'><span class='literal'>"a.h"</span></span>:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>int</span> x;
</span></div><div class='texpara'><p>Translation unit #1:<span class='codeblock'><span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"a.h"</span>                  <span class='comment'>// error: declaration of <span class='tcode_in_codeblock'>x</span> is not in the</span>
                                <span class='comment'>// purview of a module interface unit</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>export</span> <span class='keyword'>namespace</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>             <span class='comment'>// error: namespace has internal linkage</span>
<span class='keyword'>namespace</span> <span class='curlybracket'>{</span>
  <span class='keyword'>export</span> <span class='keyword'>int</span> a2;                <span class='comment'>// error: export of name with internal linkage</span>
<span class='curlybracket'>}</span>
<span class='keyword'>export</span> <span class='keyword'>static</span> <span class='keyword'>int</span> b;            <span class='comment'>// error: b explicitly declared static</span>
<span class='keyword'>export</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                 <span class='comment'>// OK</span>
<span class='keyword'>export</span> <span class='keyword'>namespace</span> N <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>          <span class='comment'>// OK</span>
<span class='keyword'>export</span> <span class='keyword'>using</span> <span class='keyword'>namespace</span> N;       <span class='comment'>// OK</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='interface-5'><div class='marginalizedparent'><a class='marginalized' href='#interface-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L262'>#</a></div><div class='texpara'><div id='interface-5.sentence-1' class='sentence'>If an exported declaration is a <a href='namespace.udecl#nt:using-declaration' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declaration'><span class='textsf'><i >using-declaration</i></span></span></a> (<a href='namespace.udecl' title='9.9&emsp;The using declaration'>[namespace.<span class='shy'></span>udecl]</a>)
and is not within a header unit,
all entities to which all of the
<a href='namespace.udecl#nt:using-declarator' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declarator'><span class='textsf'><i >using-declarator</i></span></span></a><i >s</i> ultimately refer (if any)
shall have been introduced with a name having external linkage<a class='hidden_link' href='#interface-5.sentence-1'>.</a></div> <div id='interface-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#interface-example-2'>2</a></i>:&ensp;<p>Source file <span class='texttt'><span class='literal'>"b.h"</span></span>:<span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span></div><div class='texpara'><p>Importable header <span class='texttt'><span class='literal'>"c.h"</span></span>:<span class='codeblock'><span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span></div><div class='texpara'><p>Translation unit #1:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> X;
<span class='keyword'>export</span> <span class='keyword'>int</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span></div><div class='texpara'><p>Translation unit #2:<span class='codeblock'><span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"b.h"</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>import</span> <span class='literal'>"c.h"</span>;
<span class='keyword'>import</span> X;
<span class='keyword'>export</span> <span class='keyword'>using</span> <span class='operator'>::</span>f, <span class='operator'>::</span>g, <span class='operator'>::</span>h;     <span class='comment'>// OK</span>
<span class='keyword'>struct</span> S;
<span class='keyword'>export</span> <span class='keyword'>using</span> <span class='operator'>::</span>S;               <span class='comment'>// error: <span class='tcode_in_codeblock'>S</span> has module linkage</span>
<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>export</span> <span class='keyword'>int</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>static</span> <span class='keyword'>int</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;            <span class='comment'>// #1</span>
<span class='curlybracket'>}</span>
<span class='keyword'>export</span> <span class='keyword'>using</span> N<span class='operator'>::</span>h;              <span class='comment'>// error: #1 has internal linkage</span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='interface-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#interface-note-2'>2</a></i>:&ensp;<div id='interface-5.sentence-2' class='sentence'>These constraints do not apply to
type names introduced by <span id=':typedef'><span class='texttt'><span class='keyword'>typedef</span></span></span> declarations
and <a href='dcl.pre#nt:alias-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:alias-declaration'><span class='textsf'><i >alias-declaration</i></span></span></a><i >s</i><a class='hidden_link' href='#interface-5.sentence-2'>.</a></div> <div id='interface-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#interface-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>struct</span> S;
<span class='keyword'>export</span> <span class='keyword'>using</span> T <span class='operator'>=</span> S;             <span class='comment'>// OK, exports name <span class='tcode_in_codeblock'>T</span> denoting type <span class='tcode_in_codeblock'>S</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='interface-6'><div class='marginalizedparent'><a class='marginalized' href='#interface-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L311'>#</a></div><div class='texpara'><div id='interface-6.sentence-1' class='sentence'>A redeclaration of an entity <span class='math'><span class='mathalpha'>X</span></span>
is implicitly exported
if <span class='math'><span class='mathalpha'>X</span></span> was introduced by an exported declaration;
otherwise it shall not be exported if it is attached to a named module<a class='hidden_link' href='#interface-6.sentence-1'>.</a></div> <div id='interface-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#interface-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>int</span> n; <span class='curlybracket'>}</span>;
<span class='keyword'>typedef</span> S S;
<span class='keyword'>export</span> <span class='keyword'>typedef</span> S S;             <span class='comment'>// OK, does not redeclare an entity</span>
<span class='keyword'>export</span> <span class='keyword'>struct</span> S;                <span class='comment'>// error: exported declaration follows non-exported declaration</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='interface-7'><div class='marginalizedparent'><a class='marginalized' href='#interface-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L326'>#</a></div><div class='texpara'><div id='interface-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#interface-note-3'>3</a></i>:&ensp;<div id='interface-7.sentence-1' class='sentence'>Names introduced by exported declarations
have either external linkage or no linkage; see <a href='basic.link' title='6.6&emsp;Program and linkage'>[basic.<span class='shy'></span>link]</a><a class='hidden_link' href='#interface-7.sentence-1'>.</a></div> <div id='interface-7.sentence-2' class='sentence'>Namespace-scope declarations exported by a module can be found by name lookup
in any translation unit importing that module (<a href='basic.lookup' title='6.5&emsp;Name lookup'>[basic.<span class='shy'></span>lookup]</a>)<a class='hidden_link' href='#interface-7.sentence-2'>.</a></div> <div id='interface-7.sentence-3' class='sentence'>Class and enumeration member names can be found by name lookup in any
context in which a definition of the type is reachable<a class='hidden_link' href='#interface-7.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='interface-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#interface-example-5'>5</a></i>:&ensp;<p>Interface unit of <span class='texttt'>M</span>:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>export</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>namespace</span> <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>export</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>S<span class='parenthesis'>)</span>;               <span class='comment'>// OK</span>
<span class='keyword'>struct</span> T <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>export</span> T id<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;                 <span class='comment'>// OK</span>

<span class='keyword'>export</span> <span class='keyword'>struct</span> A;                <span class='comment'>// <span class='tcode_in_codeblock'>A</span> exported as incomplete</span>

<span class='keyword'>export</span> <span class='keyword'>auto</span> rootFinder<span class='parenthesis'>(</span><span class='keyword'>double</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>double</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='parenthesis'>(</span>x <span class='operator'>+</span> a<span class='operator'>/</span>x<span class='parenthesis'>)</span><span class='operator'>/</span><span class='literal'>2</span>; <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>export</span> <span class='keyword'>const</span> <span class='keyword'>int</span> n <span class='operator'>=</span> <span class='literal'>5</span>;         <span class='comment'>// OK, <span class='tcode_in_codeblock'>n</span> has external linkage</span>
</span></div><div class='texpara'><p>Implementation unit of <span class='texttt'>M</span>:<span class='codeblock'><span class='keyword'>module</span> M;
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> value;
<span class='curlybracket'>}</span>;
</span></div><div class='texpara'><p>Main program:<span class='codeblock'><span class='keyword'>import</span> M;
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  X<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                       <span class='comment'>// OK, <span class='tcode_in_codeblock'>X</span> is exported and definition of <span class='tcode_in_codeblock'>X</span> is reachable</span>
  X<span class='operator'>::</span>Y y;                       <span class='comment'>// OK, <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;Y</span> is exported as a complete type</span>
  <span class='keyword'>auto</span> f <span class='operator'>=</span> rootFinder<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK</span>
  <span class='keyword'>return</span> A<span class='curlybracket'>{</span><span class='literal'>45</span><span class='curlybracket'>}</span><span class='operator'>.</span>value;           <span class='comment'>// error: <span class='tcode_in_codeblock'>A</span> is incomplete</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='interface-8'><div class='marginalizedparent'><a class='marginalized' href='#interface-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L377'>#</a></div><div class='texpara'><div id='interface-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#interface-note-4'>4</a></i>:&ensp;<div id='interface-8.sentence-1' class='sentence'>Declarations in an exported <a href='namespace.def.general#nt:namespace-definition' title='9.8.2.1&emsp;General&emsp;[namespace.def.general]'><span id='ntref:namespace-definition__'><span class='textsf'><i >namespace-definition</i></span></span></a>
or in an exported <a href='dcl.link#nt:linkage-specification' title='9.11&emsp;Linkage specifications&emsp;[dcl.link]'><span id='ntref:linkage-specification_'><span class='textsf'><i >linkage-specification</i></span></span></a> (<a href='dcl.link' title='9.11&emsp;Linkage specifications'>[dcl.<span class='shy'></span>link]</a>)
are exported and subject to the rules of exported declarations<a class='hidden_link' href='#interface-8.sentence-1'>.</a></div> <div id='interface-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#interface-example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>int</span> g;
<span class='keyword'>export</span> <span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> x;                        <span class='comment'>// OK</span>
  <span class='keyword'>using</span> <span class='operator'>::</span>g;                    <span class='comment'>// error: <span class='tcode_in_codeblock'>&#x200b;::&#x200b;g</span> has module linkage</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='import' class='section'><h2 ><a class='secnum' href='#import' style='min-width:65pt'>10.3</a> Import declaration <a class='abbr_ref' href='module.import'>[module.import]</a></h2><div class='texpara'><div class='bnf' id='nt:module-import-declaration'>
<a class='hidden_link' href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='nt:module-import-declaration'><span id=':module-import-declaration'>module-import-declaration<span class='textnormal'>:</span></span></span></a><br>import-keyword <a href='#nt:module-name' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-name_____'><span class='textsf'><i >module-name</i></span></span></a> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq__'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='terminal'>;</span><br>import-keyword <a href='#nt:module-partition' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-partition______'><span class='textsf'><i >module-partition</i></span></span></a> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq___'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='terminal'>;</span><br>import-keyword <a href='lex.header#nt:header-name' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name'><span class='textsf'><i >header-name</i></span></span></a> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq____'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='terminal'>;</span>
</div></div><div class='para' id='import-1'><div class='marginalizedparent'><a class='marginalized' href='#import-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L403'>#</a></div><div class='texpara'><div id='import-1.sentence-1' class='sentence'>A <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration____'><span class='textsf'><i >module-import-declaration</i></span></span></a>
shall inhabit the global namespace scope<a class='hidden_link' href='#import-1.sentence-1'>.</a></div> <div id='import-1.sentence-2' class='sentence'>In a module unit, all <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration_____'><span class='textsf'><i >module-import-declaration</i></span></span></a><i >s</i>
and <a href='#nt:export-declaration' title='10.2&emsp;Export declaration&emsp;[module.interface]'><span id='ntref:export-declaration________'><span class='textsf'><i >export-declaration</i></span></span></a><i >s</i> exporting
<a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration______'><span class='textsf'><i >module-import-declaration</i></span></span></a><i >s</i>
shall appear before all other <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration'><span class='textsf'><i >declaration</i></span></span></a><i >s</i> in
the <a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq___'><span class='textsf'><i >declaration-seq</i></span></span></a> of the
<a href='basic.link#nt:translation-unit' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='ntref:translation-unit'><span class='textsf'><i >translation-unit</i></span></span></a>
and of the <a href='#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment_'><span class='textsf'><i >private-module-fragment</i></span></span></a> (if any)<a class='hidden_link' href='#import-1.sentence-2'>.</a></div> <div id='import-1.sentence-3' class='sentence'>The optional <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_____'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a>
appertains to the <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration_______'><span class='textsf'><i >module-import-declaration</i></span></span></a><a class='hidden_link' href='#import-1.sentence-3'>.</a></div></div></div><div class='para' id='import-2'><div class='marginalizedparent'><a class='marginalized' href='#import-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L416'>#</a></div><div class='texpara'><div id='import-2.sentence-1' class='sentence'>A <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration________'><span class='textsf'><i >module-import-declaration</i></span></span></a> <a class='hidden_link' href='#def:import' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='def:import'><i >imports</i></span></a> a set of
translation units determined as described below<a class='hidden_link' href='#import-2.sentence-1'>.</a></div> <div id='import-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#import-note-1'>1</a></i>:&ensp;<div id='import-2.sentence-2' class='sentence'>Namespace-scope declarations exported by the imported translation units
can be found by name lookup (<a href='basic.lookup' title='6.5&emsp;Name lookup'>[basic.<span class='shy'></span>lookup]</a>)
in the importing translation unit
and declarations within the imported translation units
become reachable (<a href='#reach' title='10.7&emsp;Reachability'>[module.<span class='shy'></span>reach]</a>)
in the importing translation unit
after the import declaration<a class='hidden_link' href='#import-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='import-3'><div class='marginalizedparent'><a class='marginalized' href='#import-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L429'>#</a></div><div class='texpara'><div id='import-3.sentence-1' class='sentence'>A <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration_________'><span class='textsf'><i >module-import-declaration</i></span></span></a> that specifies
a <a href='#nt:module-name' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-name______'><span class='textsf'><i >module-name</i></span></span></a> <span class='texttt'>M</span>
imports all module interface units of <span class='texttt'>M</span><a class='hidden_link' href='#import-3.sentence-1'>.</a></div></div></div><div class='para' id='import-4'><div class='marginalizedparent'><a class='marginalized' href='#import-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L434'>#</a></div><div class='texpara'><div id='import-4.sentence-1' class='sentence'>A <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration__________'><span class='textsf'><i >module-import-declaration</i></span></span></a> that specifies
a <a href='#nt:module-partition' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-partition_______'><span class='textsf'><i >module-partition</i></span></span></a> shall only appear after
the <a href='#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration________'><span class='textsf'><i >module-declaration</i></span></span></a> in a module unit of
some module <span class='texttt'>M</span><a class='hidden_link' href='#import-4.sentence-1'>.</a></div> <div id='import-4.sentence-2' class='sentence'>Such a declaration imports the so-named
module partition of <span class='texttt'>M</span><a class='hidden_link' href='#import-4.sentence-2'>.</a></div></div></div><div class='para' id='import-5'><div class='marginalizedparent'><a class='marginalized' href='#import-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L442'>#</a></div><div class='texpara'><div id='import-5.sentence-1' class='sentence'>A <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration___________'><span class='textsf'><i >module-import-declaration</i></span></span></a> that specifies
a <a href='lex.header#nt:header-name' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name_'><span class='textsf'><i >header-name</i></span></span></a> <span class='texttt'>H</span> imports
a synthesized <a class='hidden_link' href='#def:header_unit' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='def:header_unit'><i >header unit</i></span></a>,
which is a translation unit formed by applying
phases 1 to 7 of translation (<a href='lex.phases' title='5.2&emsp;Phases of translation'>[lex.<span class='shy'></span>phases]</a>)
to the source file or header nominated by <span class='texttt'>H</span>,
which shall not contain a <a href='#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration_________'><span class='textsf'><i >module-declaration</i></span></span></a><a class='hidden_link' href='#import-5.sentence-1'>.</a></div> <div id='import-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#import-note-2'>2</a></i>:&ensp;<div id='import-5.sentence-2' class='sentence'>A header unit is a separate translation unit with
an independent set of defined macros<a class='hidden_link' href='#import-5.sentence-2'>.</a></div> <div id='import-5.sentence-3' class='sentence'>All declarations within a header unit are implicitly
exported (<a href='#interface' title='10.2&emsp;Export declaration'>[module.<span class='shy'></span>interface]</a>),
and are attached to the global module (<a href='#unit' title='10.1&emsp;Module units and purviews'>[module.<span class='shy'></span>unit]</a>)<a class='hidden_link' href='#import-5.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='import-5.sentence-4' class='sentence'>
An <a class='hidden_link' href='#def:header,importable' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='def:header,importable'><i >importable header</i></span></a> is a member of an
<a class='index' id=':how_the_set_of_importable_headers_is_determined'></a>implementation-defined
set of headers that
includes all importable C++ library headers (<a href='headers' title='16.4.2.3&emsp;Headers'>[headers]</a>)<a class='hidden_link' href='#import-5.sentence-4'>.</a></div> <div id='import-5.sentence-5' class='sentence'><span class='texttt'>H</span> shall identify an importable header<a class='hidden_link' href='#import-5.sentence-5'>.</a></div> <div id='import-5.sentence-6' class='sentence'>Given two such <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration____________'><span class='textsf'><i >module-import-declaration</i></span></span></a><i >s</i>:
<ul class='itemize'><li id='import-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#import-5.1'>(5.1)</a></div>if their <a href='lex.header#nt:header-name' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name__'><span class='textsf'><i >header-name</i></span></span></a><i >s</i> identify
different headers or source files (<a href='cpp.include' title='15.3&emsp;Source file inclusion'>[cpp.<span class='shy'></span>include]</a>),
they import distinct header units;</li><li id='import-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#import-5.2'>(5.2)</a></div>otherwise, if they appear in the same translation unit,
they import the same header unit;</li><li id='import-5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#import-5.3'>(5.3)</a></div>otherwise, it is unspecified whether they import the same header unit<a class='hidden_link' href='#import-5.sentence-6'>.</a> <div class='texpara'><div id='import-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#import-note-3'>3</a></i>:&ensp;<div id='import-5.3.sentence-2' class='sentence'>It is therefore possible that multiple copies exist of entities
declared with internal linkage in an importable header<a class='hidden_link' href='#import-5.3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li></ul></div> <div id='import-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#import-note-4'>4</a></i>:&ensp;<div id='import-5.sentence-7' class='sentence'>A <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration_____________'><span class='textsf'><i >module-import-declaration</i></span></span></a> nominating
a <a href='lex.header#nt:header-name' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name___'><span class='textsf'><i >header-name</i></span></span></a> is also recognized by the
preprocessor, and results in macros defined at the
end of phase 4 of translation of the header unit
being made visible as described in <a href='cpp.import' title='15.5&emsp;Header unit importation'>[cpp.<span class='shy'></span>import]</a><a class='hidden_link' href='#import-5.sentence-7'>.</a></div> <div id='import-5.sentence-8' class='sentence'>Any other <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration______________'><span class='textsf'><i >module-import-declaration</i></span></span></a>
does not make macros visible<a class='hidden_link' href='#import-5.sentence-8'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='import-6'><div class='marginalizedparent'><a class='marginalized' href='#import-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L488'>#</a></div><div class='texpara'><div id='import-6.sentence-1' class='sentence'>A declaration of a name with internal linkage is
permitted within a header unit despite all
declarations being implicitly exported (<a href='#interface' title='10.2&emsp;Export declaration'>[module.<span class='shy'></span>interface]</a>)<a class='hidden_link' href='#import-6.sentence-1'>.</a></div> <div id='import-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#import-note-5'>5</a></i>:&ensp;<div id='import-6.sentence-2' class='sentence'>A definition that appears in multiple translation units
cannot in general refer to such names (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>)<a class='hidden_link' href='#import-6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='import-6.sentence-3' class='sentence'>
A header unit shall not contain
a definition of a non-inline function or variable
whose name has external linkage<a class='hidden_link' href='#import-6.sentence-3'>.</a></div></div></div><div class='para' id='import-7'><div class='marginalizedparent'><a class='marginalized' href='#import-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L500'>#</a></div><div class='texpara'><div id='import-7.sentence-1' class='sentence'>When a <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration_______________'><span class='textsf'><i >module-import-declaration</i></span></span></a> imports
a translation unit <span class='math'><span class='mathalpha'>T</span></span>, it also imports
all translation units imported by
exported <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration________________'><span class='textsf'><i >module-import-declaration</i></span></span></a><i >s</i>
in <span class='math'><span class='mathalpha'>T</span></span>; such translation units are
said to be <a class='hidden_link' href='#def:module,exported' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='def:module,exported'><i >exported</i></span></a> by <span class='math'><span class='mathalpha'>T</span></span><a class='hidden_link' href='#import-7.sentence-1'>.</a></div> <div id='import-7.sentence-2' class='sentence'>Additionally, when a <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration_________________'><span class='textsf'><i >module-import-declaration</i></span></span></a>
in a module unit of some module <span class='math'><span class='mathalpha'>M</span></span> imports another module unit <span class='math'><span class='mathalpha'>U</span></span> of <span class='math'><span class='mathalpha'>M</span></span>,
it also imports all translation units imported by
non-exported <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration__________________'><span class='textsf'><i >module-import-declaration</i></span></span></a><i >s</i>
in the module unit purview of <span class='math'><span class='mathalpha'>U</span></span><a class='hidden_link' href='#import-7.sentence-2'>.</a><a class='footnoteref' href='#footnote-85' id='footnoteref-85' title='This is consistent with the lookup rules for imported names ([basic.lookup]).'>85</a></div> <div id='import-7.sentence-3' class='sentence'>
These rules can in turn lead to the importation of yet more
translation units<a class='hidden_link' href='#import-7.sentence-3'>.</a></div> <div id='import-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#import-note-6'>6</a></i>:&ensp;<div id='import-7.sentence-4' class='sentence'>Such indirect importation does not make macros available,
because a translation unit is
a sequence of tokens in translation phase 7 (<a href='lex.phases' title='5.2&emsp;Phases of translation'>[lex.<span class='shy'></span>phases]</a>)<a class='hidden_link' href='#import-7.sentence-4'>.</a></div> <div id='import-7.sentence-5' class='sentence'>Macros can be made available by directly importing header units
as described in <a href='cpp.import' title='15.5&emsp;Header unit importation'>[cpp.<span class='shy'></span>import]</a><a class='hidden_link' href='#import-7.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='import-8'><div class='marginalizedparent'><a class='marginalized' href='#import-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L526'>#</a></div><div class='texpara'><div id='import-8.sentence-1' class='sentence'>A module implementation unit shall not be exported<a class='hidden_link' href='#import-8.sentence-1'>.</a></div> <div id='import-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#import-example-1'>1</a></i>:&ensp;<p>Translation unit #1:<span class='codeblock'><span class='keyword'>module</span> M<span class='operator'>:</span>Part;
</span></div><div class='texpara'><p>Translation unit #2:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>export</span> <span class='keyword'>import</span> <span class='operator'>:</span>Part;    <span class='comment'>// error: exported partition <span class='tcode_in_codeblock'>:Part</span> is an implementation unit</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='import-9'><div class='marginalizedparent'><a class='marginalized' href='#import-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L539'>#</a></div><div class='texpara'><div id='import-9.sentence-1' class='sentence'>A module implementation unit of a module <span class='texttt'>M</span>
that is not a module partition
shall not contain a <a href='#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration___________________'><span class='textsf'><i >module-import-declaration</i></span></span></a>
nominating <span class='texttt'>M</span><a class='hidden_link' href='#import-9.sentence-1'>.</a></div> <div id='import-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#import-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>module</span> M;
<span class='keyword'>import</span> M;               <span class='comment'>// error: cannot import <span class='tcode_in_codeblock'>M</span> in its own unit</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='import-10'><div class='marginalizedparent'><a class='marginalized' href='#import-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L551'>#</a></div><div class='texpara'><div id='import-10.sentence-1' class='sentence'>A translation unit has an <a class='hidden_link' href='#def:interface_dependency' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='def:interface_dependency'><i >interface dependency</i></span></a> on a translation unit <span class='texttt'>U</span>
if it contains a declaration (possibly a <a href='#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration__________'><span class='textsf'><i >module-declaration</i></span></span></a>)
that imports <span class='texttt'>U</span> or if it has
an interface dependency on a translation unit that has an interface dependency on <span class='texttt'>U</span><a class='hidden_link' href='#import-10.sentence-1'>.</a></div> <div id='import-10.sentence-2' class='sentence'>A translation unit shall not have an interface dependency on itself<a class='hidden_link' href='#import-10.sentence-2'>.</a></div> <div id='import-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#import-example-3'>3</a></i>:&ensp;<p>Interface unit of <span class='texttt'>M1</span>:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M1;
<span class='keyword'>import</span> M2;
</span></div><div class='texpara'><p>Interface unit of <span class='texttt'>M2</span>:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M2;
<span class='keyword'>import</span> M3;
</span></div><div class='texpara'><p>Interface unit of <span class='texttt'>M3</span>:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M3;
<span class='keyword'>import</span> M1;              <span class='comment'>// error: cyclic interface dependency <span class='math'><span class='mathtt'>M3</span> →<span class='mathtt'>M1</span> →<span class='mathtt'>M2</span> →<span class='mathtt'>M3</span></span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-85'><div class='texpara'><a class='footnotenum' href='#footnote-85'>85)</a><a class='footnoteBacklink' href='#footnoteref-85'>85)</a> <div id='footnote-85.sentence-1' class='sentence'>This is consistent
with the lookup rules for imported names (<a href='basic.lookup' title='6.5&emsp;Name lookup'>[basic.<span class='shy'></span>lookup]</a>)<a class='hidden_link' href='#footnote-85.sentence-1'>.</a></div></div></div></div><div id='global.frag' class='section'><h2 ><a class='secnum' href='#global.frag' style='min-width:65pt'>10.4</a> Global module fragment <a class='abbr_ref' href='module.global.frag'>[module.global.frag]</a></h2><div class='texpara'><div class='bnf' id='nt:global-module-fragment'>
<a class='hidden_link' href='#nt:global-module-fragment' title='10.4&emsp;Global module fragment&emsp;[module.global.frag]'><span id='nt:global-module-fragment'><span id=':global-module-fragment'>global-module-fragment<span class='textnormal'>:</span></span></span></a><br>module-keyword <span class='terminal'>;</span> <a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq____'><span class='textsf'><i >declaration-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span>
</div></div><div class='para nonNormativeOnly' id='global.frag-1'><div class='marginalizedparent'><a class='marginalized' href='#global.frag-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L581'>#</a></div><div class='texpara'><div id='global.frag-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#global.frag-note-1'>1</a></i>:&ensp;<div id='global.frag-1.sentence-1' class='sentence'>Prior to phase 4 of translation,
only preprocessing directives can appear
in the <a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq_____'><span class='textsf'><i >declaration-seq</i></span></span></a> (<a href='cpp.pre' title='15.1&emsp;Preamble'>[cpp.<span class='shy'></span>pre]</a>)<a class='hidden_link' href='#global.frag-1.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='global.frag-2'><div class='marginalizedparent'><a class='marginalized' href='#global.frag-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L588'>#</a></div><div class='texpara'><div id='global.frag-2.sentence-1' class='sentence'>A <a href='#nt:global-module-fragment' title='10.4&emsp;Global module fragment&emsp;[module.global.frag]'><span id='ntref:global-module-fragment_'><span class='textsf'><i >global-module-fragment</i></span></span></a> specifies the contents of the
<a class='hidden_link' href='#def:global_module_fragment' title='10.4&emsp;Global module fragment&emsp;[module.global.frag]'><span id='def:global_module_fragment'><i >global module fragment</i></span></a> for a module unit<a class='hidden_link' href='#global.frag-2.sentence-1'>.</a></div> <div id='global.frag-2.sentence-2' class='sentence'>The global module fragment can be used to provide declarations
that are attached to the global module and usable within the module unit<a class='hidden_link' href='#global.frag-2.sentence-2'>.</a></div></div></div><div class='para' id='global.frag-3'><div class='marginalizedparent'><a class='marginalized' href='#global.frag-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L594'>#</a></div><div class='texpara'><div id='global.frag-3.sentence-1' class='sentence'>A declaration <span class='math'><span class='mathalpha'>D</span></span> is <a class='hidden_link' href='#def:decl-reachable' title='10.4&emsp;Global module fragment&emsp;[module.global.frag]'><span id='def:decl-reachable'><i >decl-reachable</i></span></a> from a declaration <span class='math'><span class='mathalpha'>S</span></span>
in the same translation unit if
<ul class='itemize'><li id='global.frag-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#global.frag-3.1'>(3.1)</a></div><span class='math'><span class='mathalpha'>D</span></span> does not declare a function or function template and
<span class='math'><span class='mathalpha'>S</span></span> contains an
<a href='expr.prim.id.general#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression'><span class='textsf'><i >id-expression</i></span></span></a>,
<a href='namespace.def.general#nt:namespace-name' title='9.8.2.1&emsp;General&emsp;[namespace.def.general]'><span id='ntref:namespace-name'><span class='textsf'><i >namespace-name</i></span></span></a>,
<a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name'><span class='textsf'><i >type-name</i></span></span></a>,
<a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name'><span class='textsf'><i >template-name</i></span></span></a>, or
<a href='temp.concept#nt:concept-name' title='13.7.9&emsp;Concept definitions&emsp;[temp.concept]'><span id='ntref:concept-name'><span class='textsf'><i >concept-name</i></span></span></a>
naming <span class='math'><span class='mathalpha'>D</span></span>, or</li><li id='global.frag-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#global.frag-3.2'>(3.2)</a></div><span class='math'><span class='mathalpha'>D</span></span> declares a function or function template that
is named by an expression (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>)
appearing in <span class='math'><span class='mathalpha'>S</span></span>, or</li><li id='global.frag-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#global.frag-3.3'>(3.3)</a></div><span class='math'><span class='mathalpha'>S</span></span> contains a dependent call <span class='texttt'>E</span> (<a href='temp.dep' title='13.8.3&emsp;Dependent names'>[temp.<span class='shy'></span>dep]</a>)
and <span class='math'><span class='mathalpha'>D</span></span> is found by any name lookup performed
for an expression synthesized from <span class='texttt'>E</span>
by replacing each type-dependent argument or operand
with a value of a placeholder type
with no associated namespaces or entities, or
<div id='global.frag-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#global.frag-note-2'>2</a></i>:&ensp;<div id='global.frag-3.3.sentence-1' class='sentence'>This includes the lookup for <span class='texttt'><span id=':operator'><span class='texttt'><span class='keyword'>operator</span></span></span><span class='operator'>=</span><span class='operator'>=</span></span> performed
when considering rewriting an <span class='texttt'><span class='operator'>!</span><span class='operator'>=</span></span> expression,
the lookup for <span class='texttt'><span id=':operator_'><span class='texttt'><span class='keyword'>operator</span></span></span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span></span>
performed when considering rewriting a relational comparison, and
the lookup for <span class='texttt'><span id=':operator__'><span class='texttt'><span class='keyword'>operator</span></span></span><span class='operator'>!</span><span class='operator'>=</span></span>
when considering whether an <span class='texttt'><span id=':operator___'><span class='texttt'><span class='keyword'>operator</span></span></span><span class='operator'>=</span><span class='operator'>=</span></span> is a rewrite target<a class='hidden_link' href='#global.frag-3.3.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></li><li id='global.frag-3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#global.frag-3.4'>(3.4)</a></div><span class='math'><span class='mathalpha'>S</span></span> contains an expression that
takes the address of an overload set (<a href='over.over' title='12.3&emsp;Address of an overload set'>[over.<span class='shy'></span>over]</a>)
that contains <span class='math'><span class='mathalpha'>D</span></span> and
for which the target type is dependent, or</li><li id='global.frag-3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#global.frag-3.5'>(3.5)</a></div>there exists a declaration <span class='math'><span class='mathalpha'>M</span></span> that is not a <a href='namespace.def.general#nt:namespace-definition' title='9.8.2.1&emsp;General&emsp;[namespace.def.general]'><span id='ntref:namespace-definition___'><span class='textsf'><i >namespace-definition</i></span></span></a>
for which <span class='math'><span class='mathalpha'>M</span></span> is decl-reachable from <span class='math'><span class='mathalpha'>S</span></span> and either
<ul class='itemize'><li id='global.frag-3.5.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#global.frag-3.5.1'>(3.5.1)</a></div><span class='math'><span class='mathalpha'>D</span></span> is decl-reachable from <span class='math'><span class='mathalpha'>M</span></span>, or</li><li id='global.frag-3.5.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#global.frag-3.5.2'>(3.5.2)</a></div><span class='math'><span class='mathalpha'>D</span></span> and <span class='math'><span class='mathalpha'>M</span></span> declare the same entity,
and <span class='math'><span class='mathalpha'>D</span></span> neither is a friend declaration
nor inhabits a block scope, or</li><li id='global.frag-3.5.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#global.frag-3.5.3'>(3.5.3)</a></div><span class='math'><span class='mathalpha'>D</span></span> declares a namespace <span class='math'><span class='mathalpha'>N</span></span> and <span class='math'><span class='mathalpha'>M</span></span> is a member of <span class='math'><span class='mathalpha'>N</span></span>, or</li><li id='global.frag-3.5.4'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#global.frag-3.5.4'>(3.5.4)</a></div>one of <span class='math'><span class='mathalpha'>D</span></span> and <span class='math'><span class='mathalpha'>M</span></span> declares a class or class template <span class='math'><span class='mathalpha'>C</span></span>
and the other declares a member or friend of <span class='math'><span class='mathalpha'>C</span></span>, or</li><li id='global.frag-3.5.5'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#global.frag-3.5.5'>(3.5.5)</a></div>one of <span class='math'><span class='mathalpha'>D</span></span> and <span class='math'><span class='mathalpha'>M</span></span> declares an enumeration <span class='math'><span class='mathalpha'>E</span></span>
and the other declares an enumerator of <span class='math'><span class='mathalpha'>E</span></span>, or</li><li id='global.frag-3.5.6'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#global.frag-3.5.6'>(3.5.6)</a></div><span class='math'><span class='mathalpha'>D</span></span> declares a function or variable and <span class='math'><span class='mathalpha'>M</span></span> is declared in <span class='math'><span class='mathalpha'>D</span></span>,<a class='footnoteref' href='#footnote-86' id='footnoteref-86' title='A declaration can appear within a lambda-expression in the initializer of a variable.'>86</a>
or</li><li id='global.frag-3.5.7'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#global.frag-3.5.7'>(3.5.7)</a></div>one of <span class='math'><span class='mathalpha'>D</span></span> and <span class='math'><span class='mathalpha'>M</span></span> declares a template and the other declares
a partial or explicit specialization or
an implicit or explicit instantiation of that template, or</li><li id='global.frag-3.5.8'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#global.frag-3.5.8'>(3.5.8)</a></div><span class='math'><span class='mathalpha'>M</span></span> declares a class template
and <span class='math'><span class='mathalpha'>D</span></span> is a deduction guide for that template, or</li><li id='global.frag-3.5.9'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#global.frag-3.5.9'>(3.5.9)</a></div>one of <span class='math'><span class='mathalpha'>D</span></span> and <span class='math'><span class='mathalpha'>M</span></span> declares a class or enumeration type
and the other introduces a typedef name for linkage purposes for that type<a class='hidden_link' href='#global.frag-3.sentence-1'>.</a></li></ul></li></ul></div> <div id='global.frag-3.sentence-2' class='sentence'>
In this determination, it is unspecified
<ul class='itemize'><li id='global.frag-3.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#global.frag-3.6'>(3.6)</a></div>whether a reference to an
<a href='dcl.pre#nt:alias-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:alias-declaration_'><span class='textsf'><i >alias-declaration</i></span></span></a>,
<span class='texttt'><span class='keyword'>typedef</span></span> declaration,
<a href='namespace.udecl#nt:using-declaration' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declaration_'><span class='textsf'><i >using-declaration</i></span></span></a>, or
<a href='namespace.alias#nt:namespace-alias-definition' title='9.8.3&emsp;Namespace alias&emsp;[namespace.alias]'><span id='ntref:namespace-alias-definition'><span class='textsf'><i >namespace-alias-definition</i></span></span></a>
is replaced by the declarations they name
prior to this determination,</li><li id='global.frag-3.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#global.frag-3.7'>(3.7)</a></div>whether a <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id_'><span class='textsf'><i >simple-template-id</i></span></span></a>
that does not denote a dependent type
and whose <a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name_'><span class='textsf'><i >template-name</i></span></span></a> names an alias template
is replaced by its denoted type
prior to this determination,</li><li id='global.frag-3.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#global.frag-3.8'>(3.8)</a></div>whether a <a href='dcl.type.decltype#nt:decltype-specifier' title='9.2.9.6&emsp;Decltype specifiers&emsp;[dcl.type.decltype]'><span id='ntref:decltype-specifier'><span class='textsf'><i >decltype-specifier</i></span></span></a>
that does not denote a dependent type
is replaced by its denoted type
prior to this determination,
and</li><li id='global.frag-3.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#global.frag-3.9'>(3.9)</a></div>whether a non-value-dependent constant expression
is replaced by the result of constant evaluation
prior to this determination<a class='hidden_link' href='#global.frag-3.sentence-2'>.</a></li></ul></div></div></div><div class='para' id='global.frag-4'><div class='marginalizedparent'><a class='marginalized' href='#global.frag-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L703'>#</a></div><div class='texpara'><div id='global.frag-4.sentence-1' class='sentence'>A declaration <span class='texttt'>D</span> in a global module fragment of a module unit
is <a class='hidden_link' href='#def:discarded,declaration' title='10.4&emsp;Global module fragment&emsp;[module.global.frag]'><span id='def:discarded,declaration'><i >discarded</i></span></a> if <span class='texttt'>D</span>
is not decl-reachable from any <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration_'><span class='textsf'><i >declaration</i></span></span></a>
in the <a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq______'><span class='textsf'><i >declaration-seq</i></span></span></a>
of the <a href='basic.link#nt:translation-unit' title='6.6&emsp;Program and linkage&emsp;[basic.link]'><span id='ntref:translation-unit_'><span class='textsf'><i >translation-unit</i></span></span></a><a class='hidden_link' href='#global.frag-4.sentence-1'>.</a></div> <div id='global.frag-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#global.frag-note-3'>3</a></i>:&ensp;<div id='global.frag-4.sentence-2' class='sentence'>A discarded declaration is neither reachable
nor visible to name lookup outside the module unit,
nor in template instantiations whose points of instantiation (<a href='temp.point' title='13.8.4.1&emsp;Point of instantiation'>[temp.<span class='shy'></span>point]</a>)
are outside the module unit,
even when the instantiation context (<a href='#context' title='10.6&emsp;Instantiation context'>[module.<span class='shy'></span>context]</a>)
includes the module unit<a class='hidden_link' href='#global.frag-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='global.frag-5'><div class='marginalizedparent'><a class='marginalized' href='#global.frag-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L718'>#</a></div><div class='texpara'><div id='global.frag-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#global.frag-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>const</span> <span class='keyword'>int</span> size <span class='operator'>=</span> <span class='literal'>2</span>;
<span class='keyword'>int</span> ary1<span class='squarebracket'>[</span>size<span class='squarebracket'>]</span>;                 <span class='comment'>// unspecified whether <span class='tcode_in_codeblock'>size</span> is decl-reachable from <span class='tcode_in_codeblock'>ary1</span></span>
<span class='keyword'>constexpr</span> <span class='keyword'>int</span> identity<span class='parenthesis'>(</span><span class='keyword'>int</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span>
<span class='keyword'>int</span> ary2<span class='squarebracket'>[</span>identity<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span><span class='squarebracket'>]</span>;          <span class='comment'>// unspecified whether <span class='tcode_in_codeblock'>identity</span> is decl-reachable from <span class='tcode_in_codeblock'>ary2</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S2;
<span class='keyword'>constexpr</span> <span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span>
S<span class='anglebracket'>&lt;</span>S2<span class='anglebracket'>&lt;</span>T, g<span class='parenthesis'>(</span>N<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>S</span>, <span class='tcode_in_codeblock'>S2</span>, <span class='tcode_in_codeblock'>g</span>, and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>f</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span>g<span class='parenthesis'>(</span>N<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> N<span class='parenthesis'>)</span>;   <span class='comment'>// <span class='tcode_in_codeblock'>g</span> and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>h</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='global.frag-6'><div class='marginalizedparent'><a class='marginalized' href='#global.frag-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L738'>#</a></div><div class='texpara'><div id='global.frag-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#global.frag-example-2'>2</a></i>:&ensp;<p>Source file <span class='texttt'><span class='literal'>"foo.h"</span></span>:<span class='codeblock'><span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> X <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
  <span class='keyword'>int</span> d<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>int</span> e<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>inline</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>X, <span class='keyword'>int</span> <span class='operator'>=</span> d<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> e<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>
  <span class='keyword'>int</span> g<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span>;
  <span class='keyword'>int</span> h<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Module <span class='texttt'>M</span> interface:<span class='codeblock'><span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"foo.h"</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> use_f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  N<span class='operator'>::</span>X x;                       <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;X</span>, <span class='tcode_in_codeblock'>N</span>, and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>f</span></span>
  <span class='keyword'>return</span> f<span class='parenthesis'>(</span>x, <span class='literal'>123</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;f</span> is decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>f</span>,</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;e</span> is indirectly decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>f</span></span>
                                <span class='comment'>//   because it is decl-reachable from <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;f</span>, and</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;d</span> is decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>f</span></span>
                                <span class='comment'>//   because it is decl-reachable from <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;f</span></span>
                                <span class='comment'>//   even though it is not used in this call</span>
<span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> use_g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  N<span class='operator'>::</span>X x;                       <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;X</span>, <span class='tcode_in_codeblock'>N</span>, and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>g</span></span>
  <span class='keyword'>return</span> g<span class='parenthesis'>(</span><span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, x<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;g</span> is not decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>g</span></span>
<span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> use_h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  N<span class='operator'>::</span>X x;                       <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;X</span>, <span class='tcode_in_codeblock'>N</span>, and <span class='tcode_in_codeblock'>&#x200b;::&#x200b;</span> are decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>h</span></span>
  <span class='keyword'>return</span> h<span class='parenthesis'>(</span><span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, x<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;h</span> is not decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>h</span>, but</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;h</span> is decl-reachable from <span class='tcode_in_codeblock'>use_<span class='shy'></span>h&lt;int&gt;</span></span>
<span class='curlybracket'>}</span>
<span class='keyword'>int</span> k <span class='operator'>=</span> use_h<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>use_<span class='shy'></span>h&lt;int&gt;</span> is decl-reachable from <span class='tcode_in_codeblock'>k</span>, so</span>
  <span class='comment'>// <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;h</span> is decl-reachable from <span class='tcode_in_codeblock'>k</span></span>
</span></div><div class='texpara'><p>Module <span class='texttt'>M</span> implementation:<span class='codeblock'><span class='keyword'>module</span> M;
<span class='keyword'>int</span> a <span class='operator'>=</span> use_f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK</span>
<span class='keyword'>int</span> b <span class='operator'>=</span> use_g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// error: no viable function for call to <span class='tcode_in_codeblock'>g</span>;</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>g</span> is not decl-reachable from purview of</span>
                                <span class='comment'>// module <span class='tcode_in_codeblock'>M</span>'s interface, so is discarded</span>
<span class='keyword'>int</span> c <span class='operator'>=</span> use_h<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-86'><div class='texpara'><a class='footnotenum' href='#footnote-86'>86)</a><a class='footnoteBacklink' href='#footnoteref-86'>86)</a> <div id='footnote-86.sentence-1' class='sentence'>A declaration can appear within a <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression'><span class='textsf'><i >lambda-expression</i></span></span></a>
in the initializer of a variable<a class='hidden_link' href='#footnote-86.sentence-1'>.</a></div></div></div></div><div id='private.frag' class='section'><h2 ><a class='secnum' href='#private.frag' style='min-width:65pt'>10.5</a> Private module fragment <a class='abbr_ref' href='module.private.frag'>[module.private.frag]</a></h2><div class='texpara'><div class='bnf' id='nt:private-module-fragment'>
<a class='hidden_link' href='#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='nt:private-module-fragment'><span id=':private-module-fragment'>private-module-fragment<span class='textnormal'>:</span></span></span></a><br>module-keyword <span class='terminal'><span class='operator'>:</span></span> <span id=':private'><span class='texttt'><span class='keyword'>private</span></span></span> <span class='terminal'>;</span> <a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq_______'><span class='textsf'><i >declaration-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span>
</div></div><div class='para' id='private.frag-1'><div class='marginalizedparent'><a class='marginalized' href='#private.frag-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L795'>#</a></div><div class='texpara'><div id='private.frag-1.sentence-1' class='sentence'>A <a href='#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment__'><span class='textsf'><i >private-module-fragment</i></span></span></a> shall appear only
in a primary module interface unit (<a href='#unit' title='10.1&emsp;Module units and purviews'>[module.<span class='shy'></span>unit]</a>)<a class='hidden_link' href='#private.frag-1.sentence-1'>.</a></div> <div id='private.frag-1.sentence-2' class='sentence'>A module unit with a <a href='#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment___'><span class='textsf'><i >private-module-fragment</i></span></span></a>
shall be the only module unit of its module;
no diagnostic is required<a class='hidden_link' href='#private.frag-1.sentence-2'>.</a></div></div></div><div class='para nonNormativeOnly' id='private.frag-2'><div class='marginalizedparent'><a class='marginalized' href='#private.frag-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L802'>#</a></div><div class='texpara'><div id='private.frag-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#private.frag-note-1'>1</a></i>:&ensp;<div id='private.frag-2.sentence-1' class='sentence'>A <a href='#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment____'><span class='textsf'><i >private-module-fragment</i></span></span></a> ends
the portion of the module interface unit
that can affect the behavior of other translation units<a class='hidden_link' href='#private.frag-2.sentence-1'>.</a></div> <div id='private.frag-2.sentence-2' class='sentence'>A <a href='#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment_____'><span class='textsf'><i >private-module-fragment</i></span></span></a> allows a module
to be represented as a single translation unit
without making all of the contents of the module reachable to importers<a class='hidden_link' href='#private.frag-2.sentence-2'>.</a></div> <div id='private.frag-2.sentence-3' class='sentence'>The presence of a <a href='#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment______'><span class='textsf'><i >private-module-fragment</i></span></span></a> affects:
<ul class='itemize'><li id='private.frag-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#private.frag-2.1'>(2.1)</a></div>the point by which the definition of
an inline function or variable
is required (<a href='dcl.inline' title='9.2.8&emsp;The inline specifier'>[dcl.<span class='shy'></span>inline]</a>),</li><li id='private.frag-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#private.frag-2.2'>(2.2)</a></div>the point by which the definition of
an exported function with a placeholder return type
is required (<a href='dcl.spec.auto' title='9.2.9.7&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>),</li><li id='private.frag-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#private.frag-2.3'>(2.3)</a></div>whether a declaration is required not to be an exposure (<a href='basic.link' title='6.6&emsp;Program and linkage'>[basic.<span class='shy'></span>link]</a>),</li><li id='private.frag-2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#private.frag-2.4'>(2.4)</a></div>where definitions for inline functions and templates
must appear (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>, <a href='dcl.inline' title='9.2.8&emsp;The inline specifier'>[dcl.<span class='shy'></span>inline]</a>, <a href='temp.pre' title='13.1&emsp;Preamble'>[temp.<span class='shy'></span>pre]</a>),</li><li id='private.frag-2.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#private.frag-2.5'>(2.5)</a></div>the instantiation contexts of templates
instantiated before it (<a href='#context' title='10.6&emsp;Instantiation context'>[module.<span class='shy'></span>context]</a>), and</li><li id='private.frag-2.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#private.frag-2.6'>(2.6)</a></div>the reachability of declarations within it (<a href='#reach' title='10.7&emsp;Reachability'>[module.<span class='shy'></span>reach]</a>)<a class='hidden_link' href='#private.frag-2.sentence-3'>.</a></li></ul></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='private.frag-3'><div class='marginalizedparent'><a class='marginalized' href='#private.frag-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L838'>#</a></div><div class='texpara'><div id='private.frag-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#private.frag-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> A;
<span class='keyword'>export</span> <span class='keyword'>inline</span> <span class='keyword'>void</span> fn_e<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;      <span class='comment'>// error: exported inline function <span class='tcode_in_codeblock'>fn_<span class='shy'></span>e</span> not defined</span>
                                <span class='comment'>// before private module fragment</span>
<span class='keyword'>inline</span> <span class='keyword'>void</span> fn_m<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;             <span class='comment'>// error: non-exported inline function <span class='tcode_in_codeblock'>fn_<span class='shy'></span>m</span> not defined</span>
<span class='keyword'>static</span> <span class='keyword'>void</span> fn_s<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>export</span> <span class='keyword'>struct</span> X;
<span class='keyword'>export</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>X <span class='operator'>*</span>x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  fn_s<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                       <span class='comment'>// OK, call to static function in same translation unit</span>
<span class='curlybracket'>}</span>
<span class='keyword'>export</span> X <span class='operator'>*</span>factory<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// OK</span>

<span class='keyword'>module</span> <span class='operator'>:</span><span class='keyword'>private</span>;
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;                    <span class='comment'>// definition not reachable from importers of <span class='tcode_in_codeblock'>A</span></span>
X <span class='operator'>*</span>factory<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='keyword'>new</span> X <span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>void</span> fn_e<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>void</span> fn_m<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>void</span> fn_s<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='context' class='section'><h2 ><a class='secnum' href='#context' style='min-width:65pt'>10.6</a> Instantiation context <a class='abbr_ref' href='module.context'>[module.context]</a></h2><div class='para' id='context-1'><div class='marginalizedparent'><a class='marginalized' href='#context-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L865'>#</a></div><div class='texpara'><div id='context-1.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:instantiation_context' title='10.6&emsp;Instantiation context&emsp;[module.context]'><span id='def:instantiation_context'><i >instantiation context</i></span></a> is a set of points within the program
that determines which declarations are found by
argument-dependent name lookup (<a href='basic.lookup.argdep' title='6.5.4&emsp;Argument-dependent name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>argdep]</a>)
and which are reachable (<a href='#reach' title='10.7&emsp;Reachability'>[module.<span class='shy'></span>reach]</a>)
in the context of a particular declaration or template instantiation<a class='hidden_link' href='#context-1.sentence-1'>.</a></div></div></div><div class='para' id='context-2'><div class='marginalizedparent'><a class='marginalized' href='#context-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L872'>#</a></div><div class='texpara'><div id='context-2.sentence-1' class='sentence'>During the implicit definition of
a defaulted function (<a href='special' title='11.4.4&emsp;Special member functions'>[special]</a>, <a href='class.compare.default' title='11.10.1&emsp;Defaulted comparison operator functions'>[class.<span class='shy'></span>compare.<span class='shy'></span>default]</a>),
the instantiation context is the union of
the instantiation context from the definition of the class and
the instantiation context of the program construct that
resulted in the implicit definition of the defaulted function<a class='hidden_link' href='#context-2.sentence-1'>.</a></div></div></div><div class='para' id='context-3'><div class='marginalizedparent'><a class='marginalized' href='#context-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L880'>#</a></div><div class='texpara'><div id='context-3.sentence-1' class='sentence'>During the implicit instantiation of a template
whose point of instantiation is specified as
that of an enclosing specialization (<a href='temp.point' title='13.8.4.1&emsp;Point of instantiation'>[temp.<span class='shy'></span>point]</a>),
the instantiation context is the union of
the instantiation context of the enclosing specialization and,
if the template is defined in a module interface unit of a module <span class='math'><span class='mathalpha'>M</span></span>
and the point of instantiation is not in a module interface unit of <span class='math'><span class='mathalpha'>M</span></span>,
the point at the end of the
<a href='dcl.pre#nt:declaration-seq' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration-seq________'><span class='textsf'><i >declaration-seq</i></span></span></a> of the
primary module interface unit of <span class='math'><span class='mathalpha'>M</span></span>
(prior to the <a href='#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment_______'><span class='textsf'><i >private-module-fragment</i></span></span></a>, if any)<a class='hidden_link' href='#context-3.sentence-1'>.</a></div></div></div><div class='para' id='context-4'><div class='marginalizedparent'><a class='marginalized' href='#context-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L893'>#</a></div><div class='texpara'><div id='context-4.sentence-1' class='sentence'>During the implicit instantiation of a template
that is implicitly instantiated because it is referenced
from within the implicit definition of a defaulted function,
the instantiation context is the instantiation context of
the defaulted function<a class='hidden_link' href='#context-4.sentence-1'>.</a></div></div></div><div class='para' id='context-5'><div class='marginalizedparent'><a class='marginalized' href='#context-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L900'>#</a></div><div class='texpara'><div id='context-5.sentence-1' class='sentence'>During the instantiation of any other template specialization,
the instantiation context comprises the point of instantiation
of the template<a class='hidden_link' href='#context-5.sentence-1'>.</a></div></div></div><div class='para' id='context-6'><div class='marginalizedparent'><a class='marginalized' href='#context-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L905'>#</a></div><div class='texpara'><div id='context-6.sentence-1' class='sentence'>In any other case, the instantiation context
at a point within the program
comprises that point<a class='hidden_link' href='#context-6.sentence-1'>.</a></div></div></div><div class='para nonNormativeOnly' id='context-7'><div class='marginalizedparent'><a class='marginalized' href='#context-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L910'>#</a></div><div class='texpara'><div id='context-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#context-example-1'>1</a></i>:&ensp;<p>Translation unit #1:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> stuff;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> foo<span class='parenthesis'>(</span>T, U u<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>auto</span> v <span class='operator'>=</span> u; <span class='curlybracket'>}</span>
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> bar<span class='parenthesis'>(</span>T, U u<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>auto</span> v <span class='operator'>=</span> <span class='operator'>*</span>u; <span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Translation unit #2:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M1;
<span class='keyword'>import</span> <span class='literal'>"defn.h"</span>;        <span class='comment'>// provides <span class='tcode_in_codeblock'>struct X {};</span></span>
<span class='keyword'>import</span> stuff;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  X x;
  foo<span class='parenthesis'>(</span>t, x<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Translation unit #3:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M2;
<span class='keyword'>import</span> <span class='literal'>"decl.h"</span>;        <span class='comment'>// provides <span class='tcode_in_codeblock'>struct X;</span> (not a definition)</span>
<span class='keyword'>import</span> stuff;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  X <span class='operator'>*</span>x;
  bar<span class='parenthesis'>(</span>t, x<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><p>Translation unit #4:<span class='codeblock'><span class='keyword'>import</span> M1;
<span class='keyword'>import</span> M2;
<span class='keyword'>void</span> test<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
  g<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span> <div id='context-7.sentence-1' class='sentence'>
The call to <span class='texttt'>f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span></span> is valid;
the instantiation context of <span class='texttt'>foo<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, X<span class='anglebracket'>&gt;</span></span> comprises
<ul class='itemize'><li id='context-7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#context-7.1'>(7.1)</a></div>the point at the end of translation unit #1,</li><li id='context-7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#context-7.2'>(7.2)</a></div>the point at the end of translation unit #2, and</li><li id='context-7.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#context-7.3'>(7.3)</a></div>the point of the call to <span class='texttt'>f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span></span>,</li></ul>
so the definition of <span class='texttt'>X</span> is reachable (<a href='#reach' title='10.7&emsp;Reachability'>[module.<span class='shy'></span>reach]</a>)<a class='hidden_link' href='#context-7.sentence-1'>.</a></div></div><div class='texpara'><div id='context-7.sentence-2' class='sentence'>It is unspecified whether the call to <span class='texttt'>g<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span></span> is valid:
the instantiation context of <span class='texttt'>bar<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, X<span class='anglebracket'>&gt;</span></span> comprises
<ul class='itemize'><li id='context-7.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#context-7.4'>(7.4)</a></div>the point at the end of translation unit #1,</li><li id='context-7.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#context-7.5'>(7.5)</a></div>the point at the end of translation unit #3, and</li><li id='context-7.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#context-7.6'>(7.6)</a></div>the point of the call to <span class='texttt'>g<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span></span>,</li></ul>
so the definition of <span class='texttt'>X</span> need not be reachable,
as described in <a href='#reach' title='10.7&emsp;Reachability'>[module.<span class='shy'></span>reach]</a><a class='hidden_link' href='#context-7.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='reach' class='section'><h2 ><a class='secnum' href='#reach' style='min-width:65pt'>10.7</a> Reachability <a class='abbr_ref' href='module.reach'>[module.reach]</a></h2><div class='texpara'></div><div class='para' id='reach-1'><div class='marginalizedparent'><a class='marginalized' href='#reach-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L969'>#</a></div><div class='texpara'><div id='reach-1.sentence-1' class='sentence'>A translation unit <span class='math'><span class='mathalpha'>U</span></span> is
<a class='hidden_link' href='#def:reachable,necessarily,translation_unit' title='10.7&emsp;Reachability&emsp;[module.reach]'><span id='def:reachable,necessarily,translation_unit'><i >necessarily reachable</i></span></a>
from a point <span class='math'><span class='mathalpha'>P</span></span> if
<span class='math'><span class='mathalpha'>U</span></span> is a module interface unit on which the translation unit containing <span class='math'><span class='mathalpha'>P</span></span>
has an interface dependency, or
the translation unit containing <span class='math'><span class='mathalpha'>P</span></span> imports <span class='math'><span class='mathalpha'>U</span></span>,
in either case prior to <span class='math'><span class='mathalpha'>P</span></span> (<a href='#import' title='10.3&emsp;Import declaration'>[module.<span class='shy'></span>import]</a>)<a class='hidden_link' href='#reach-1.sentence-1'>.</a></div> <div id='reach-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#reach-note-1'>1</a></i>:&ensp;<div id='reach-1.sentence-2' class='sentence'>While module interface units are reachable even when they are only
transitively imported via a non-exported import declaration,
namespace-scope names from such module interface units are not found by
name lookup (<a href='basic.lookup' title='6.5&emsp;Name lookup'>[basic.<span class='shy'></span>lookup]</a>)<a class='hidden_link' href='#reach-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='reach-2'><div class='marginalizedparent'><a class='marginalized' href='#reach-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L984'>#</a></div><div class='texpara'><div id='reach-2.sentence-1' class='sentence'>All translation units that are necessarily reachable are
<a class='hidden_link' href='#def:reachable,translation_unit' title='10.7&emsp;Reachability&emsp;[module.reach]'><span id='def:reachable,translation_unit'><i >reachable</i></span></a><a class='hidden_link' href='#reach-2.sentence-1'>.</a></div> <div id='reach-2.sentence-2' class='sentence'>Additional translation units on which the
point within the program has an interface dependency may be considered reachable,
but it is unspecified which are and under what circumstances<a class='hidden_link' href='#reach-2.sentence-2'>.</a><a class='footnoteref' href='#footnote-87' id='footnoteref-87' title='Implementations are therefore not required to prevent the semantic effects of additional translation units involved in the compilation from being observed.'>87</a></div> <div id='reach-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#reach-note-2'>2</a></i>:&ensp;<div id='reach-2.sentence-3' class='sentence'>It is advisable to avoid
depending on the reachability of any additional translation units
in programs intending to be portable<a class='hidden_link' href='#reach-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='reach-3'><div class='marginalizedparent'><a class='marginalized' href='#reach-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L1001'>#</a></div><div class='texpara'><div id='reach-3.sentence-1' class='sentence'>A declaration <span class='math'><span class='mathalpha'>D</span></span> is
<a class='hidden_link' href='#def:reachable_from,declaration' title='10.7&emsp;Reachability&emsp;[module.reach]'><span id='def:reachable_from,declaration'><i >reachable from</i></span></a> a point <span class='math'><span class='mathalpha'>P</span></span> if
<ul class='itemize'><li id='reach-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#reach-3.1'>(3.1)</a></div><span class='math'><span class='mathalpha'>D</span></span> appears prior to <span class='math'><span class='mathalpha'>P</span></span> in the same translation unit, or</li><li id='reach-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#reach-3.2'>(3.2)</a></div><span class='math'><span class='mathalpha'>D</span></span> is not discarded (<a href='#global.frag' title='10.4&emsp;Global module fragment'>[module.<span class='shy'></span>global.<span class='shy'></span>frag]</a>),
appears in a translation unit that is
reachable from <span class='math'><span class='mathalpha'>P</span></span>,
and
does not appear within a <a href='#nt:private-module-fragment' title='10.5&emsp;Private module fragment&emsp;[module.private.frag]'><span id='ntref:private-module-fragment________'><span class='textsf'><i >private-module-fragment</i></span></span></a><a class='hidden_link' href='#reach-3.sentence-1'>.</a></li></ul></div> <div id='reach-3.sentence-2' class='sentence'>
A declaration is <a class='hidden_link' href='#def:reachable,declaration' title='10.7&emsp;Reachability&emsp;[module.reach]'><span id='def:reachable,declaration'><i >reachable</i></span></a>
if it is reachable from
any point in the instantiation context (<a href='#context' title='10.6&emsp;Instantiation context'>[module.<span class='shy'></span>context]</a>)<a class='hidden_link' href='#reach-3.sentence-2'>.</a></div> <div id='reach-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#reach-note-3'>3</a></i>:&ensp;<div id='reach-3.sentence-3' class='sentence'>Whether a declaration is exported has no bearing on whether it is reachable<a class='hidden_link' href='#reach-3.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='reach-4'><div class='marginalizedparent'><a class='marginalized' href='#reach-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L1019'>#</a></div><div class='texpara'><div id='reach-4.sentence-1' class='sentence'>The accumulated properties of all reachable declarations of
an entity within a context
determine the behavior of the entity within that context<a class='hidden_link' href='#reach-4.sentence-1'>.</a></div> <div id='reach-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#reach-note-4'>4</a></i>:&ensp;<div id='reach-4.sentence-2' class='sentence'>These reachable semantic properties include type completeness,
type definitions, initializers,
default arguments of functions or template declarations, attributes,
names bound, etc<a class='hidden_link' href='#reach-4.sentence-2'>.</a></div> <div id='reach-4.sentence-3' class='sentence'>Since default arguments are evaluated in the context of the call expression,
the reachable semantic properties of the corresponding parameter types apply in
that context<a class='hidden_link' href='#reach-4.sentence-3'>.</a></div> <div id='reach-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#reach-example-1'>1</a></i>:&ensp;<p>Translation unit #1:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M<span class='operator'>:</span>A;
<span class='keyword'>export</span> <span class='keyword'>struct</span> B;
</span></div><div class='texpara'><p>Translation unit #2:<span class='codeblock'><span class='keyword'>module</span> M<span class='operator'>:</span>B;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
</span></div><div class='texpara'><p>Translation unit #3:<span class='codeblock'><span class='keyword'>module</span> M<span class='operator'>:</span>C;
<span class='keyword'>import</span> <span class='operator'>:</span>A;
B b1;                           <span class='comment'>// error: no reachable definition of <span class='tcode_in_codeblock'>struct B</span></span>
</span></div><div class='texpara'><p>Translation unit #4:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>export</span> <span class='keyword'>import</span> <span class='operator'>:</span>A;
<span class='keyword'>import</span> <span class='operator'>:</span>B;
B b2;
<span class='keyword'>export</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>B b <span class='operator'>=</span> B<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div><div class='texpara'><p>Translation unit #5:<span class='codeblock'><span class='keyword'>import</span> M;
B b3;                           <span class='comment'>// error: no reachable definition of <span class='tcode_in_codeblock'>struct B</span></span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>               <span class='comment'>// error: no reachable definition of <span class='tcode_in_codeblock'>struct B</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='reach-5'><div class='marginalizedparent'><a class='marginalized' href='#reach-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/896196c8c08ed834ef876c29c1182510da9c1a1c/source/modules.tex#L1066'>#</a></div><div class='texpara'><div id='reach-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#reach-note-5'>5</a></i>:&ensp;<div id='reach-5.sentence-1' class='sentence'>Declarations of an entity can be reachable
even where they cannot be found by name lookup<a class='hidden_link' href='#reach-5.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='reach-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#reach-example-2'>2</a></i>:&ensp;<p>Translation unit #1:<span class='codeblock'><span class='keyword'>export</span> <span class='keyword'>module</span> A;
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>export</span> <span class='keyword'>using</span> Y <span class='operator'>=</span> X;
</span></div><div class='texpara'><p>Translation unit #2:<span class='codeblock'><span class='keyword'>import</span> A;
Y y;                <span class='comment'>// OK, definition of <span class='tcode_in_codeblock'>X</span> is reachable</span>
X x;                <span class='comment'>// error: <span class='tcode_in_codeblock'>X</span> not visible to unqualified lookup</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-87'><div class='texpara'><a class='footnotenum' href='#footnote-87'>87)</a><a class='footnoteBacklink' href='#footnoteref-87'>87)</a> <div id='footnote-87.sentence-1' class='sentence'>Implementations are therefore not required to prevent the semantic
effects of additional translation units involved in the compilation from being
observed<a class='hidden_link' href='#footnote-87.sentence-1'>.</a></div></div></div></div></div></body></html>