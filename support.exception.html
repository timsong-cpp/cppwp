<!DOCTYPE html><html lang='en'><head><title>[support.exception]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>17</a> Language support library <a class='abbr_ref' href='./#support'>[support]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>17.9</a> Exception handling <a class='abbr_ref'>[support.exception]</a></h2><hr><h3 ><a class='secnum' style='min-width:80pt'>17.9.1</a> General <a class='abbr_ref' href='#general'>[support.<span class='shy'></span>exception.<span class='shy'></span>general]</a><div style='clear:right'></div></h3><h3 ><a class='secnum' style='min-width:80pt'>17.9.2</a> Header <span class='texttt'>&lt;exception&gt;</span> synopsis <a class='abbr_ref' href='#exception.syn'>[exception.<span class='shy'></span>syn]</a><div style='clear:right'></div></h3><h3 ><a class='secnum' style='min-width:80pt'>17.9.3</a> Class <span class='texttt'>exception</span> <a class='abbr_ref' href='#exception'>[exception]</a><div style='clear:right'></div></h3><h3 ><a class='secnum' style='min-width:80pt'>17.9.4</a> Class <span class='texttt'>bad_<span class='shy'></span>exception</span> <a class='abbr_ref' href='#bad.exception'>[bad.<span class='shy'></span>exception]</a><div style='clear:right'></div></h3><h3 ><a class='secnum' style='min-width:80pt'>17.9.5</a> Abnormal termination <a class='abbr_ref' href='#exception.terminate'>[exception.<span class='shy'></span>terminate]</a><div style='clear:right'></div></h3><h4 ><a class='secnum' style='min-width:95pt'>17.9.5.1</a> Type <span class='texttt'>terminate_<span class='shy'></span>handler</span> <a class='abbr_ref' href='#terminate.handler'>[terminate.<span class='shy'></span>handler]</a><div style='clear:right'></div></h4><h4 ><a class='secnum' style='min-width:95pt'>17.9.5.2</a> <span class='texttt'>set_<span class='shy'></span>terminate</span> <a class='abbr_ref' href='#set.terminate'>[set.<span class='shy'></span>terminate]</a><div style='clear:right'></div></h4><h4 ><a class='secnum' style='min-width:95pt'>17.9.5.3</a> <span class='texttt'>get_<span class='shy'></span>terminate</span> <a class='abbr_ref' href='#get.terminate'>[get.<span class='shy'></span>terminate]</a><div style='clear:right'></div></h4><h4 ><a class='secnum' style='min-width:95pt'>17.9.5.4</a> <span class='texttt'>terminate</span> <a class='abbr_ref' href='#terminate'>[terminate]</a><div style='clear:right'></div></h4><h3 ><a class='secnum' style='min-width:80pt'>17.9.6</a> <span class='texttt'>uncaught_<span class='shy'></span>exceptions</span> <a class='abbr_ref' href='#uncaught.exceptions'>[uncaught.<span class='shy'></span>exceptions]</a><div style='clear:right'></div></h3><h3 ><a class='secnum' style='min-width:80pt'>17.9.7</a> Exception propagation <a class='abbr_ref' href='#propagation'>[propagation]</a><div style='clear:right'></div></h3><h3 ><a class='secnum' style='min-width:80pt'>17.9.8</a> <span class='texttt'>nested_<span class='shy'></span>exception</span> <a class='abbr_ref' href='#except.nested'>[except.<span class='shy'></span>nested]</a><div style='clear:right'></div></h3><hr><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:50pt'>17.9.1</a> General <a class='abbr_ref' href='support.exception.general'>[support.exception.general]</a></h3></div><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L3843'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'>The header <span id='header:<exception>'><span class='texttt'><span class='anglebracket'>&lt;</span>exception<span class='anglebracket'>&gt;</span></span></span>
defines several types and functions related to the handling of exceptions in a C++ program<a class='hidden_link' href='#general-1.sentence-1'>.</a></div></div></div><div id='exception.syn' class='section'><h3 ><a class='secnum' href='#exception.syn' style='min-width:50pt'>17.9.2</a> Header <span class='texttt'>&lt;exception&gt;</span> synopsis <a class='abbr_ref' href='exception.syn'>[exception.syn]</a></h3></div><div class='texpara'><span class='codeblock'><span class='comment'>// all freestanding</span>
<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> exception;
  <span class='keyword'>class</span> bad_exception;
  <span class='keyword'>class</span> nested_exception;

  <span class='keyword'>using</span> terminate_handler <span class='operator'>=</span> <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  terminate_handler get_terminate<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  terminate_handler set_terminate<span class='parenthesis'>(</span>terminate_handler f<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span> terminate<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>constexpr</span> <span class='keyword'>int</span> uncaught_exceptions<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>using</span> exception_ptr <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;

  <span class='keyword'>constexpr</span> exception_ptr current_exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> rethrow_exception<span class='parenthesis'>(</span>exception_ptr p<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> exception_ptr make_exception_ptr<span class='parenthesis'>(</span>E e<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>const</span> E<span class='operator'>*</span> exception_ptr_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> exception_ptr<span class='operator'>&amp;</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> exception_ptr_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> exception_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> throw_with_nested<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> t<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> rethrow_if_nested<span class='parenthesis'>(</span><span class='keyword'>const</span> E<span class='operator'>&amp;</span> e<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div><div id='exception' class='section'><h3 ><a class='secnum' href='#exception' style='min-width:50pt'>17.9.3</a> Class <span class='texttt'>exception</span> <a class='abbr_ref' href='exception'>[exception]</a></h3></div><div class='texpara'><span id='lib:exception,constructor'><span id='lib:exception'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:exception'>ðŸ”—</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> exception <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>constexpr</span> exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> exception<span class='parenthesis'>(</span><span class='keyword'>const</span> exception<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> exception<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> exception<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>virtual</span> <span class='operator'>~</span>exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>virtual</span> <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> what<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></span></div><div class='para' id='exception-1'><div class='marginalizedparent'><a class='marginalized' href='#exception-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L3893'>#</a></div><div class='texpara'><div id='exception-1.sentence-1' class='sentence'>The class
<span class='texttt'>exception</span>
defines the base
class for the types of objects thrown as exceptions by
C++ standard library components, and certain
expressions, to report errors detected during program execution<a class='hidden_link' href='#exception-1.sentence-1'>.</a></div></div></div><div class='para' id='exception-2'><div class='marginalizedparent'><a class='marginalized' href='#exception-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L3901'>#</a></div><div class='texpara'><div id='exception-2.sentence-1' class='sentence'>Except where explicitly specified otherwise,
each standard library class <span class='texttt'>T</span> that derives from class <span class='texttt'>exception</span>
has the following publicly accessible member functions, each of them having
a non-throwing exception specification (<a href='except.spec' title='14.5&emsp;Exception specifications'>[except.<span class='shy'></span>spec]</a>):
<ul class='itemize'><li id='exception-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#exception-2.1'>(2.1)</a></div>default constructor (unless the class synopsis shows other constructors)</li><li id='exception-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#exception-2.2'>(2.2)</a></div>copy constructor</li><li id='exception-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#exception-2.3'>(2.3)</a></div>copy assignment operator</li></ul>
The copy constructor and the copy assignment operator meet
the following postcondition: If two objects <span class='texttt'>lhs</span> and <span class='texttt'>rhs</span> both have
dynamic type <span class='texttt'>T</span> and <span class='texttt'>lhs</span> is a copy of <span class='texttt'>rhs</span>, then
<span class='texttt'>strcmp<span class='parenthesis'>(</span>lhs<span class='operator'>.</span>what<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, rhs<span class='operator'>.</span>what<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> is equal to <span class='texttt'><span class='literal'>0</span></span><a class='hidden_link' href='#exception-2.sentence-1'>.</a></div> <div id='exception-2.sentence-2' class='sentence'>The <span class='texttt'>what<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> member function of each such <span class='texttt'>T</span> satisfies the
constraints specified for <span class='texttt'>exception<span class='operator'>&#x200b;::&#x200b;</span>what<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> (see below)<a class='hidden_link' href='#exception-2.sentence-2'>.</a></div></div></div><div class='texpara'><div id='lib:exception,operator='><div id='lib:operator=,exception'><div id='lib:exception,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:exception,constructor_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> exception<span class='parenthesis'>(</span><span class='keyword'>const</span> exception<span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>constexpr</span> exception<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> exception<span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div><div class='para' id='exception-3'><div class='marginalizedparent'><a class='marginalized' href='#exception-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L3926'>#</a></div><div class='texpara'><div id='exception-3.sentence-1' class='sentence'><i >Postconditions</i>: If <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> and <span class='texttt'>rhs</span> both have dynamic type <span class='texttt'>exception</span>
then the value of the expression <span class='texttt'>strcmp<span class='parenthesis'>(</span>what<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, rhs<span class='operator'>.</span>what<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> shall equal 0<a class='hidden_link' href='#exception-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:exception,destructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:exception,destructor'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>virtual</span> <span class='operator'>~</span>exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='exception-4'><div class='marginalizedparent'><a class='marginalized' href='#exception-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L3938'>#</a></div><div class='texpara'><div id='exception-4.sentence-1' class='sentence'><i >Effects</i>: Destroys an object of class
<span class='texttt'>exception</span><a class='hidden_link' href='#exception-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:exception,what'><div id='lib:what,exception'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:what,exception'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>virtual</span> <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> what<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='exception-5'><div class='marginalizedparent'><a class='marginalized' href='#exception-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L3950'>#</a></div><div class='texpara'><div id='exception-5.sentence-1' class='sentence'><i >Returns</i>: An <a class='index' id=':return_value_of_exception::what'></a>implementation-defined <span class='textsc'>ntbs</span>,
which during constant evaluation is encoded with
the ordinary literal encoding (<a href='lex.ccon' title='5.13.3&emsp;Character literals'>[lex.<span class='shy'></span>ccon]</a>)<a class='hidden_link' href='#exception-5.sentence-1'>.</a></div></div></div></div><div class='para' id='exception-6'><div class='marginalizedparent'><a class='marginalized' href='#exception-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L3956'>#</a></div><div class='texpara'><div id='exception-6.sentence-1' class='sentence'><i >Remarks</i>: The message may be a
<a href='multibyte.strings#def:ntmbs' title='16.3.3.3.4.3&emsp;Multibyte strings&emsp;[multibyte.strings]'>null-terminated multibyte string</a>,
suitable for conversion and display as a
<span class='texttt'>wstring</span> (<a href='string.classes' title='27.4&emsp;String classes'>[string.<span class='shy'></span>classes]</a>, <a href='locale.codecvt' title='28.3.4.2.5&emsp;Class template codecvt'>[locale.<span class='shy'></span>codecvt]</a>)<a class='hidden_link' href='#exception-6.sentence-1'>.</a></div> <div id='exception-6.sentence-2' class='sentence'>The return value remains valid until the exception object from which
it is obtained is destroyed or a non-<span id=':const'><span class='texttt'><span class='keyword'>const</span></span></span>
member function of the exception object is called<a class='hidden_link' href='#exception-6.sentence-2'>.</a></div></div></div></div><div id='bad.exception' class='section'><h3 ><a class='secnum' href='#bad.exception' style='min-width:50pt'>17.9.4</a> Class <span class='texttt'>bad_<span class='shy'></span>exception</span> <a class='abbr_ref' href='bad.exception'>[bad.exception]</a></h3></div><div class='texpara'><span id='lib:bad_exception,constructor'><span id='lib:bad_exception'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:bad_exception'>ðŸ”—</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> bad_exception <span class='operator'>:</span> <span class='keyword'>public</span> exception <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='comment'>// see <a href='#exception' title='17.9.3&emsp;Class exception'>[exception]</a> for the specification of the special member functions</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> what<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='keyword'>override</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></span></div><div class='para' id='bad.exception-1'><div class='marginalizedparent'><a class='marginalized' href='#bad.exception-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L3981'>#</a></div><div class='texpara'><div id='bad.exception-1.sentence-1' class='sentence'>The class
<span class='texttt'>bad_<span class='shy'></span>exception</span>
defines the type of the object
referenced by the <span class='texttt'>exception_<span class='shy'></span>ptr</span>
returned from a call to <span class='texttt'>current_<span class='shy'></span>exception</span> (<a href='#propagation' title='17.9.7&emsp;Exception propagation'>[propagation]</a>)
when the currently active exception object fails to copy<a class='hidden_link' href='#bad.exception-1.sentence-1'>.</a></div></div></div><div class='texpara'><div id='lib:bad_exception,what'><div id='lib:what,bad_exception'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:what,bad_exception'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> what<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='keyword'>override</span>;
</code></div></div></div></div><div class='para' id='bad.exception-2'><div class='marginalizedparent'><a class='marginalized' href='#bad.exception-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L3995'>#</a></div><div class='texpara'><div id='bad.exception-2.sentence-1' class='sentence'><i >Returns</i>: An <a class='index' id=':return_value_of_bad_exception::what'></a>implementation-defined <span class='textsc'>ntbs</span><a class='hidden_link' href='#bad.exception-2.sentence-1'>.</a></div></div></div></div><div id='exception.terminate' class='section'><h3 ><a class='secnum' href='#exception.terminate' style='min-width:50pt'>17.9.5</a> Abnormal termination <a class='abbr_ref' href='exception.terminate'>[exception.terminate]</a></h3></div><div id='terminate.handler' class='section'><h4 ><a class='secnum' href='#terminate.handler' style='min-width:65pt'>17.9.5.1</a> Type <span class='texttt'>terminate_<span class='shy'></span>handler</span> <a class='abbr_ref' href='terminate.handler'>[terminate.handler]</a></h4></div><div class='texpara'><div id='lib:terminate_handler'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:terminate_handler'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>using</span> terminate_handler <span class='operator'>=</span> <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='terminate.handler-1'><div class='marginalizedparent'><a class='marginalized' href='#terminate.handler-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4010'>#</a></div><div class='texpara'><div id='terminate.handler-1.sentence-1' class='sentence'>The type of a <a class='hidden_link' href='#def:handler_function' id='def:handler_function'><i>handler function</i></a>
to be invoked by <span class='texttt'>terminate</span>
<a class='index' id='lib:terminate'></a>when terminating exception processing<a class='hidden_link' href='#terminate.handler-1.sentence-1'>.</a></div></div></div></div><div class='para' id='terminate.handler-2'><div class='marginalizedparent'><a class='marginalized' href='#terminate.handler-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4016'>#</a></div><div class='texpara'><div id='terminate.handler-2.sentence-1' class='sentence'><i >Required behavior</i>: A <span class='texttt'>terminate_<span class='shy'></span>handler</span> shall
terminate execution of the program without returning to the caller<a class='hidden_link' href='#terminate.handler-2.sentence-1'>.</a></div></div></div></div><div class='para' id='terminate.handler-3'><div class='marginalizedparent'><a class='marginalized' href='#terminate.handler-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4021'>#</a></div><div class='texpara'><div id='terminate.handler-3.sentence-1' class='sentence'><i >Default behavior</i>: The implementation's default <span class='texttt'>terminate_<span class='shy'></span>handler</span> calls
<span class='texttt'>abort<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#terminate.handler-3.sentence-1'>.</a></div> <a class='index' id='lib:abort'></a></div></div></div><div id='set.terminate' class='section'><h4 ><a class='secnum' href='#set.terminate' style='min-width:65pt'>17.9.5.2</a> <span class='texttt'>set_<span class='shy'></span>terminate</span> <a class='abbr_ref' href='set.terminate'>[set.terminate]</a></h4></div><div class='texpara'><div id='lib:set_terminate'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:set_terminate'>ðŸ”—</a></div><code class='itemdeclcode'>terminate_handler set_terminate<span class='parenthesis'>(</span>terminate_handler f<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='set.terminate-1'><div class='marginalizedparent'><a class='marginalized' href='#set.terminate-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4036'>#</a></div><div class='texpara'><div id='set.terminate-1.sentence-1' class='sentence'><i >Effects</i>: Establishes the function designated by <span class='texttt'>f</span> as the current
handler function for terminating exception processing<a class='hidden_link' href='#set.terminate-1.sentence-1'>.</a></div></div></div></div><div class='para' id='set.terminate-2'><div class='marginalizedparent'><a class='marginalized' href='#set.terminate-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4041'>#</a></div><div class='texpara'><div id='set.terminate-2.sentence-1' class='sentence'><i >Returns</i>: The previous <span class='texttt'>terminate_<span class='shy'></span>handler</span><a class='hidden_link' href='#set.terminate-2.sentence-1'>.</a></div></div></div></div><div class='para' id='set.terminate-3'><div class='marginalizedparent'><a class='marginalized' href='#set.terminate-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4045'>#</a></div><div class='texpara'><div id='set.terminate-3.sentence-1' class='sentence'><i >Remarks</i>: It is unspecified whether a null pointer value designates the default
<span class='texttt'>terminate_<span class='shy'></span>handler</span><a class='hidden_link' href='#set.terminate-3.sentence-1'>.</a></div></div></div></div><div id='get.terminate' class='section'><h4 ><a class='secnum' href='#get.terminate' style='min-width:65pt'>17.9.5.3</a> <span class='texttt'>get_<span class='shy'></span>terminate</span> <a class='abbr_ref' href='get.terminate'>[get.terminate]</a></h4></div><div class='texpara'><div id='lib:get_terminate'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:get_terminate'>ðŸ”—</a></div><code class='itemdeclcode'>terminate_handler get_terminate<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='get.terminate-1'><div class='marginalizedparent'><a class='marginalized' href='#get.terminate-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4059'>#</a></div><div class='texpara'><div id='get.terminate-1.sentence-1' class='sentence'><i >Returns</i>: The current <span class='texttt'>terminate_<span class='shy'></span>handler</span><a class='hidden_link' href='#get.terminate-1.sentence-1'>.</a></div> <div id='get.terminate-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#get.terminate-note-1'>1</a></i>:&ensp;<div id='get.terminate-1.sentence-2' class='sentence'>This can be a null pointer value<a class='hidden_link' href='#get.terminate-1.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div id='terminate' class='section'><h4 ><a class='secnum' href='#terminate' style='min-width:65pt'>17.9.5.4</a> <span class='texttt'>terminate</span> <a class='abbr_ref' href='terminate'>[terminate]</a></h4></div><div class='texpara'><div id='lib:terminate_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:terminate_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span> terminate<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='terminate-1'><div class='marginalizedparent'><a class='marginalized' href='#terminate-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4075'>#</a></div><div class='texpara'><div id='terminate-1.sentence-1' class='sentence'><i >Effects</i>: Calls a <span class='texttt'>terminate_<span class='shy'></span>handler</span> function<a class='hidden_link' href='#terminate-1.sentence-1'>.</a></div> <div id='terminate-1.sentence-2' class='sentence'>It is unspecified which
<span class='texttt'>terminate_<span class='shy'></span>handler</span> function will be called if an exception is active
during a call to <span class='texttt'>set_<span class='shy'></span>terminate</span><a class='hidden_link' href='#terminate-1.sentence-2'>.</a></div> <div id='terminate-1.sentence-3' class='sentence'>Otherwise calls the current <span class='texttt'>terminate_<span class='shy'></span>handler</span> function<a class='hidden_link' href='#terminate-1.sentence-3'>.</a></div> <div id='terminate-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#terminate-note-1'>1</a></i>:&ensp;<div id='terminate-1.sentence-4' class='sentence'>A
default <span class='texttt'>terminate_<span class='shy'></span>handler</span> is always considered a callable handler in
this context<a class='hidden_link' href='#terminate-1.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='terminate-2'><div class='marginalizedparent'><a class='marginalized' href='#terminate-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4087'>#</a></div><div class='texpara'><div id='terminate-2.sentence-1' class='sentence'><i >Remarks</i>: Called by the implementation when exception
handling must be abandoned for any of several reasons (<a href='except.terminate' title='14.6.2&emsp;The std&#x200b;::&#x200b;terminate function'>[except.<span class='shy'></span>terminate]</a>)<a class='hidden_link' href='#terminate-2.sentence-1'>.</a></div> <div id='terminate-2.sentence-2' class='sentence'>May also be called directly by the program<a class='hidden_link' href='#terminate-2.sentence-2'>.</a></div></div></div></div><div id='uncaught.exceptions' class='section'><h3 ><a class='secnum' href='#uncaught.exceptions' style='min-width:50pt'>17.9.6</a> <span class='texttt'>uncaught_<span class='shy'></span>exceptions</span> <a class='abbr_ref' href='uncaught.exceptions'>[uncaught.exceptions]</a></h3></div><div class='texpara'><div id='lib:uncaught_exceptions'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:uncaught_exceptions'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>int</span> uncaught_exceptions<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='uncaught.exceptions-1'><div class='marginalizedparent'><a class='marginalized' href='#uncaught.exceptions-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4102'>#</a></div><div class='texpara'><div id='uncaught.exceptions-1.sentence-1' class='sentence'><i >Returns</i>: The number of uncaught exceptions (<a href='except.throw' title='14.2&emsp;Throwing an exception'>[except.<span class='shy'></span>throw]</a>) in the current thread<a class='hidden_link' href='#uncaught.exceptions-1.sentence-1'>.</a></div></div></div></div><div class='para' id='uncaught.exceptions-2'><div class='marginalizedparent'><a class='marginalized' href='#uncaught.exceptions-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4106'>#</a></div><div class='texpara'><div id='uncaught.exceptions-2.sentence-1' class='sentence'><i >Remarks</i>: When <span class='texttt'>uncaught_<span class='shy'></span>exceptions<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>0</span></span>,
throwing an exception can result in a call of the function
<a href='except.terminate' title='14.6.2&emsp;The std&#x200b;::&#x200b;terminate function&emsp;[except.terminate]'><span class='texttt'>std&#x200b;::&#x200b;terminate</span></a><a class='hidden_link' href='#uncaught.exceptions-2.sentence-1'>.</a></div></div></div></div><div id='propagation' class='section'><h3 ><a class='secnum' href='#propagation' style='min-width:50pt'>17.9.7</a> Exception propagation <a class='abbr_ref' href='propagation'>[propagation]</a></h3></div><div class='texpara'><div id='lib:exception_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:exception_ptr'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>using</span> exception_ptr <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
</code></div></div></div><div class='para' id='propagation-1'><div class='marginalizedparent'><a class='marginalized' href='#propagation-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4121'>#</a></div><div class='texpara'><div id='propagation-1.sentence-1' class='sentence'>The type <span class='texttt'>exception_<span class='shy'></span>ptr</span> can be used to refer to an exception object<a class='hidden_link' href='#propagation-1.sentence-1'>.</a></div></div></div></div><div class='para' id='propagation-2'><div class='marginalizedparent'><a class='marginalized' href='#propagation-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4124'>#</a></div><div class='texpara'><div id='propagation-2.sentence-1' class='sentence'><span class='texttt'>exception_<span class='shy'></span>ptr</span> meets the requirements of
<a href='nullablepointer.requirements#:Cpp17NullablePointer' title='16.4.4.4&emsp;Cpp17NullablePointer requirements&emsp;[nullablepointer.requirements]'><i >Cpp17NullablePointer</i></a> (Table <a href='nullablepointer.requirements#tab:cpp17.nullablepointer' title='Table 36: Cpp17NullablePointer requirements'>36</a>)<a class='hidden_link' href='#propagation-2.sentence-1'>.</a></div></div></div></div><div class='para' id='propagation-3'><div class='marginalizedparent'><a class='marginalized' href='#propagation-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4128'>#</a></div><div class='texpara'><div id='propagation-3.sentence-1' class='sentence'>Two non-null values of type <span class='texttt'>exception_<span class='shy'></span>ptr</span> are equivalent and compare equal if and
only if they refer to the same exception<a class='hidden_link' href='#propagation-3.sentence-1'>.</a></div></div></div></div><div class='para' id='propagation-4'><div class='marginalizedparent'><a class='marginalized' href='#propagation-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4132'>#</a></div><div class='texpara'><div id='propagation-4.sentence-1' class='sentence'>The default constructor of <span class='texttt'>exception_<span class='shy'></span>ptr</span> produces the null value of the
type<a class='hidden_link' href='#propagation-4.sentence-1'>.</a></div></div></div></div><div class='para' id='propagation-5'><div class='marginalizedparent'><a class='marginalized' href='#propagation-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4136'>#</a></div><div class='texpara'><div id='propagation-5.sentence-1' class='sentence'><span class='texttt'>exception_<span class='shy'></span>ptr</span> shall not be implicitly convertible to any arithmetic,
enumeration, or pointer type<a class='hidden_link' href='#propagation-5.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='propagation-6'><div class='marginalizedparent'><a class='marginalized' href='#propagation-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4140'>#</a></div><div class='texpara'><div id='propagation-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#propagation-note-1'>1</a></i>:&ensp;<div id='propagation-6.sentence-1' class='sentence'>An implementation can use a reference-counted smart
pointer as <span class='texttt'>exception_<span class='shy'></span>ptr</span><a class='hidden_link' href='#propagation-6.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='propagation-7'><div class='marginalizedparent'><a class='marginalized' href='#propagation-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4146'>#</a></div><div class='texpara'><div id='propagation-7.sentence-1' class='sentence'>For purposes of determining the presence of a data race, operations on
<span class='texttt'>exception_<span class='shy'></span>ptr</span> objects shall access and modify only the
<span class='texttt'>exception_<span class='shy'></span>ptr</span> objects themselves and not the exceptions they refer to<a class='hidden_link' href='#propagation-7.sentence-1'>.</a></div> <div id='propagation-7.sentence-2' class='sentence'>Use of <span class='texttt'>rethrow_<span class='shy'></span>exception</span> or <span class='texttt'>exception_<span class='shy'></span>ptr_<span class='shy'></span>cast</span>
on <span class='texttt'>exception_<span class='shy'></span>ptr</span> objects that refer to
the same exception object shall not introduce a data race<a class='hidden_link' href='#propagation-7.sentence-2'>.</a></div> <div id='propagation-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#propagation-note-2'>2</a></i>:&ensp;<div id='propagation-7.sentence-3' class='sentence'>If
<span class='texttt'>rethrow_<span class='shy'></span>exception</span> rethrows the same exception object (rather than a copy),
concurrent access to that rethrown exception object can introduce a data race<a class='hidden_link' href='#propagation-7.sentence-3'>.</a></div> <div id='propagation-7.sentence-4' class='sentence'>Changes in the number of <span class='texttt'>exception_<span class='shy'></span>ptr</span> objects that refer to a
particular exception do not introduce a data race<a class='hidden_link' href='#propagation-7.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='propagation-8'><div class='marginalizedparent'><a class='marginalized' href='#propagation-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4161'>#</a></div><div class='texpara'><div id='propagation-8.sentence-1' class='sentence'>All member functions are marked <span class='texttt'><span class='keyword'>constexpr</span></span><a class='hidden_link' href='#propagation-8.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:current_exception'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:current_exception'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> exception_ptr current_exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='propagation-9'><div class='marginalizedparent'><a class='marginalized' href='#propagation-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4171'>#</a></div><div class='texpara'><div id='propagation-9.sentence-1' class='sentence'><i >Returns</i>: An <span class='texttt'>exception_<span class='shy'></span>ptr</span> object that refers to the
<a href='except.handle#def:exception_handling,currently_handled_exception' title='14.4&emsp;Handling an exception&emsp;[except.handle]'>currently handled exception</a>
or a copy of the currently
handled exception, or a null <span class='texttt'>exception_<span class='shy'></span>ptr</span> object if no exception is being
handled<a class='hidden_link' href='#propagation-9.sentence-1'>.</a></div> <div id='propagation-9.sentence-2' class='sentence'>The referenced object shall remain valid at least as long as there is an
<span class='texttt'>exception_<span class='shy'></span>ptr</span> object that refers to it<a class='hidden_link' href='#propagation-9.sentence-2'>.</a></div> <div id='propagation-9.sentence-3' class='sentence'>If the function needs to allocate memory and the attempt fails, it returns an
<span class='texttt'>exception_<span class='shy'></span>ptr</span> object that refers to an instance of <span class='texttt'>bad_<span class='shy'></span>alloc</span><a class='hidden_link' href='#propagation-9.sentence-3'>.</a></div> <div id='propagation-9.sentence-4' class='sentence'>It is unspecified whether the return values of two successive calls to
<span class='texttt'>current_<span class='shy'></span>exception</span> refer to the same exception object<a class='hidden_link' href='#propagation-9.sentence-4'>.</a></div> <div id='propagation-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#propagation-note-3'>3</a></i>:&ensp;<div id='propagation-9.sentence-5' class='sentence'>That is, it is unspecified whether <span class='texttt'>current_<span class='shy'></span>exception</span>
creates a new copy each time it is called<a class='hidden_link' href='#propagation-9.sentence-5'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div> <div id='propagation-9.sentence-6' class='sentence'>
If the attempt to copy the current exception object throws an exception, the function
returns an <span class='texttt'>exception_<span class='shy'></span>ptr</span> object that refers to the thrown exception or,
if this is not possible, to an instance of <span class='texttt'>bad_<span class='shy'></span>exception</span><a class='hidden_link' href='#propagation-9.sentence-6'>.</a></div> <div id='propagation-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#propagation-note-4'>4</a></i>:&ensp;<div id='propagation-9.sentence-7' class='sentence'>The copy constructor of the thrown exception can also fail,
so the implementation can substitute a <span class='texttt'>bad_<span class='shy'></span>exception</span> object
to avoid infinite recursion<a class='hidden_link' href='#propagation-9.sentence-7'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:rethrow_exception'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:rethrow_exception'>ðŸ”—</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> rethrow_exception<span class='parenthesis'>(</span>exception_ptr p<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='propagation-10'><div class='marginalizedparent'><a class='marginalized' href='#propagation-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4203'>#</a></div><div class='texpara'><div id='propagation-10.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>p</span> is not a null pointer<a class='hidden_link' href='#propagation-10.sentence-1'>.</a></div></div></div></div><div class='para' id='propagation-11'><div class='marginalizedparent'><a class='marginalized' href='#propagation-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4207'>#</a></div><div class='texpara'><div id='propagation-11.sentence-1' class='sentence'><i >Effects</i>: Let <span class='math'><span class='mathalpha'>u</span></span> be the exception object to which <span class='texttt'>p</span> refers, or
a copy of that exception object<a class='hidden_link' href='#propagation-11.sentence-1'>.</a></div> <div id='propagation-11.sentence-2' class='sentence'>It is unspecified whether a copy is made, and
memory for the copy is allocated in an unspecified way<a class='hidden_link' href='#propagation-11.sentence-2'>.</a></div> <ul class='itemize'><li id='propagation-11.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#propagation-11.1'>(11.1)</a></div>If allocating memory to form <span class='math'><span class='mathalpha'>u</span></span> fails,
throws an instance of <span class='texttt'>bad_<span class='shy'></span>alloc</span>;</li><li id='propagation-11.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#propagation-11.2'>(11.2)</a></div>otherwise, if copying the exception to which <span class='texttt'>p</span> refers
to form <span class='math'><span class='mathalpha'>u</span></span> throws an exception, throws that exception;</li><li id='propagation-11.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#propagation-11.3'>(11.3)</a></div>otherwise, throws <span class='math'><span class='mathalpha'>u</span></span>.</li></ul></div></div></div><div class='texpara'><div id='lib:make_exception_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_exception_ptr'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> exception_ptr make_exception_ptr<span class='parenthesis'>(</span>E e<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='propagation-12'><div class='marginalizedparent'><a class='marginalized' href='#propagation-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4231'>#</a></div><div class='texpara'><div id='propagation-12.sentence-1' class='sentence'><i >Effects</i>: Creates an <span class='texttt'>exception_<span class='shy'></span>ptr</span> object that refers to a copy of <span class='texttt'>e</span>, as if:
<span class='codeblock'><span class='keyword'>try</span> <span class='curlybracket'>{</span>
  <span class='keyword'>throw</span> e;
<span class='curlybracket'>}</span> <span class='keyword'>catch</span><span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> current_exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div></div></div></div><div class='para nonNormativeOnly' id='propagation-13'><div class='marginalizedparent'><a class='marginalized' href='#propagation-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4242'>#</a></div><div class='texpara'><div id='propagation-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#propagation-note-5'>5</a></i>:&ensp;<div id='propagation-13.sentence-1' class='sentence'>This function is provided for convenience and
efficiency reasons<a class='hidden_link' href='#propagation-13.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:exception_ptr_cast'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:exception_ptr_cast'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>const</span> E<span class='operator'>*</span> exception_ptr_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> exception_ptr<span class='operator'>&amp;</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='propagation-14'><div class='marginalizedparent'><a class='marginalized' href='#propagation-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4255'>#</a></div><div class='texpara'><div id='propagation-14.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>E</span> is a cv-unqualified complete object type<a class='hidden_link' href='#propagation-14.sentence-1'>.</a></div> <div id='propagation-14.sentence-2' class='sentence'><span class='texttt'>E</span> is not an array type<a class='hidden_link' href='#propagation-14.sentence-2'>.</a></div> <div id='propagation-14.sentence-3' class='sentence'><span class='texttt'>E</span> is not a pointer or pointer-to-member type<a class='hidden_link' href='#propagation-14.sentence-3'>.</a></div> <div id='propagation-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#propagation-note-6'>6</a></i>:&ensp;<div id='propagation-14.sentence-4' class='sentence'>When <span class='texttt'>E</span> is a pointer or pointer-to-member type,
a handler of type <span class='texttt'><span class='keyword'>const</span> E<span class='operator'>&amp;</span></span> can match
without binding to the exception object itself<a class='hidden_link' href='#propagation-14.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='propagation-15'><div class='marginalizedparent'><a class='marginalized' href='#propagation-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4266'>#</a></div><div class='texpara'><div id='propagation-15.sentence-1' class='sentence'><i >Returns</i>: A pointer to the exception object referred to by <span class='texttt'>p</span>,
if <span class='texttt'>p</span> is not null and
a handler of type <span class='texttt'><span class='keyword'>const</span> E<span class='operator'>&amp;</span></span>
would be a match (<a href='except.handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>) for that exception object<a class='hidden_link' href='#propagation-15.sentence-1'>.</a></div> <div id='propagation-15.sentence-2' class='sentence'>Otherwise, <span class='texttt'><span class='literal'>nullptr</span></span><a class='hidden_link' href='#propagation-15.sentence-2'>.</a></div></div></div></div><div id='except.nested' class='section'><h3 ><a class='secnum' href='#except.nested' style='min-width:50pt'>17.9.8</a> <span class='texttt'>nested_<span class='shy'></span>exception</span> <a class='abbr_ref' href='except.nested'>[except.nested]</a></h3></div><div class='texpara'><span id='lib:nested_exception'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:nested_exception'>ðŸ”—</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> nested_exception <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>constexpr</span> nested_exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> nested_exception<span class='parenthesis'>(</span><span class='keyword'>const</span> nested_exception<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
    <span class='keyword'>constexpr</span> nested_exception<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> nested_exception<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>virtual</span> <span class='operator'>~</span>nested_exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;

    <span class='comment'>// access functions</span>
    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> rethrow_nested<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    <span class='keyword'>constexpr</span> exception_ptr nested_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> throw_with_nested<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> t<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> rethrow_if_nested<span class='parenthesis'>(</span><span class='keyword'>const</span> E<span class='operator'>&amp;</span> e<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></span></div><div class='para' id='except.nested-1'><div class='marginalizedparent'><a class='marginalized' href='#except.nested-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4297'>#</a></div><div class='texpara'><div id='except.nested-1.sentence-1' class='sentence'>The class <span class='texttt'>nested_<span class='shy'></span>exception</span> is designed for use as a mixin through
multiple inheritance<a class='hidden_link' href='#except.nested-1.sentence-1'>.</a></div> <div id='except.nested-1.sentence-2' class='sentence'>It captures the currently handled exception and stores it
for later use<a class='hidden_link' href='#except.nested-1.sentence-2'>.</a></div></div></div><div class='para nonNormativeOnly' id='except.nested-2'><div class='marginalizedparent'><a class='marginalized' href='#except.nested-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4302'>#</a></div><div class='texpara'><div id='except.nested-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#except.nested-note-1'>1</a></i>:&ensp;<div id='except.nested-2.sentence-1' class='sentence'><span class='texttt'>nested_<span class='shy'></span>exception</span> has a virtual destructor to make it a
polymorphic class<a class='hidden_link' href='#except.nested-2.sentence-1'>.</a></div> <div id='except.nested-2.sentence-2' class='sentence'>Its presence can be tested for with <span id=':dynamic_cast'><span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span></span></span><a class='hidden_link' href='#except.nested-2.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='texpara'><div id='lib:nested_exception,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:nested_exception,constructor'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> nested_exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='except.nested-3'><div class='marginalizedparent'><a class='marginalized' href='#except.nested-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4314'>#</a></div><div class='texpara'><div id='except.nested-3.sentence-1' class='sentence'><i >Effects</i>: The constructor calls <span class='texttt'>current_<span class='shy'></span>exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> and stores the returned value<a class='hidden_link' href='#except.nested-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:nested_exception,rethrow_nested'><div id='lib:rethrow_nested,nested_exception'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:rethrow_nested,nested_exception'>ðŸ”—</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> rethrow_nested<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div></div><div class='para' id='except.nested-4'><div class='marginalizedparent'><a class='marginalized' href='#except.nested-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4325'>#</a></div><div class='texpara'><div id='except.nested-4.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>nested_<span class='shy'></span>ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> returns a null pointer, the function calls the function <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span><a class='hidden_link' href='#except.nested-4.sentence-1'>.</a></div> <div id='except.nested-4.sentence-2' class='sentence'>Otherwise, it throws the stored exception captured by <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#except.nested-4.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:nested_exception,nested_ptr'><div id='lib:nested_ptr,nested_exception'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:nested_ptr,nested_exception'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> exception_ptr nested_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='except.nested-5'><div class='marginalizedparent'><a class='marginalized' href='#except.nested-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4337'>#</a></div><div class='texpara'><div id='except.nested-5.sentence-1' class='sentence'><i >Returns</i>: The stored exception captured by this <span class='texttt'>nested_<span class='shy'></span>exception</span> object<a class='hidden_link' href='#except.nested-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:nested_exception,throw_with_nested'><div id='lib:throw_with_nested,nested_exception'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:throw_with_nested,nested_exception'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> throw_with_nested<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> t<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='except.nested-6'><div class='marginalizedparent'><a class='marginalized' href='#except.nested-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4348'>#</a></div><div class='texpara'><div id='except.nested-6.sentence-1' class='sentence'>Let <span class='texttt'>U</span> be <span class='texttt'>decay_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#except.nested-6.sentence-1'>.</a></div></div></div></div><div class='para' id='except.nested-7'><div class='marginalizedparent'><a class='marginalized' href='#except.nested-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4351'>#</a></div><div class='texpara'><div id='except.nested-7.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>U</span> meets the <a href='utility.arg.requirements#:Cpp17CopyConstructible' title='16.4.4.2&emsp;Template argument requirements&emsp;[utility.arg.requirements]'><i >Cpp17CopyConstructible</i></a> requirements<a class='hidden_link' href='#except.nested-7.sentence-1'>.</a></div></div></div></div><div class='para' id='except.nested-8'><div class='marginalizedparent'><a class='marginalized' href='#except.nested-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4355'>#</a></div><div class='texpara'><div id='except.nested-8.sentence-1' class='sentence'><i >Throws</i>: If <span class='texttt'>is_<span class='shy'></span>class_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>!</span>is_<span class='shy'></span>final_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>!</span>is_<span class='shy'></span>base_<span class='shy'></span>of_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>nested_<span class='shy'></span>exception, U<span class='anglebracket'>&gt;</span></span>
is <span class='texttt'><span class='literal'>true</span></span>,
an exception of unspecified type that is publicly derived from both
<span class='texttt'>U</span> and <span class='texttt'>nested_<span class='shy'></span>exception</span>
and constructed from <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>t<span class='parenthesis'>)</span></span>, otherwise
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>t<span class='parenthesis'>)</span></span><a class='hidden_link' href='#except.nested-8.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:nested_exception,rethrow_if_nested'><div id='lib:rethrow_if_nested,nested_exception'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:rethrow_if_nested,nested_exception'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> rethrow_if_nested<span class='parenthesis'>(</span><span class='keyword'>const</span> E<span class='operator'>&amp;</span> e<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='except.nested-9'><div class='marginalizedparent'><a class='marginalized' href='#except.nested-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/support.tex#L4371'>#</a></div><div class='texpara'><div id='except.nested-9.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>E</span> is not a polymorphic class type, or
if <span class='texttt'>nested_<span class='shy'></span>exception</span> is an inaccessible or ambiguous base class of <span class='texttt'>E</span>,
there is no effect<a class='hidden_link' href='#except.nested-9.sentence-1'>.</a></div> <div id='except.nested-9.sentence-2' class='sentence'>Otherwise, performs:
<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span><span class='keyword'>auto</span> p <span class='operator'>=</span> <span class='keyword'>dynamic_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> nested_exception<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>addressof<span class='parenthesis'>(</span>e<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
  p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>rethrow_nested<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span></div></div></div></div></div></body></html>