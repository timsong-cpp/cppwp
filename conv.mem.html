<!DOCTYPE html><html lang='en'><head><title>[conv.mem]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>7.3</a> Standard conversions <a class='abbr_ref' href='conv#mem'>[conv]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>7.3.12</a> Pointer-to-member conversions <a class='abbr_ref'>[conv.mem]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/expressions.tex#L997'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':conversion,pointer-to-member'></a></span><span class='indexparent'><a class='index' id=':constant,null_pointer'></a></span>A <a href='conv.ptr#def:constant,null_pointer'>null pointer constant</a> can be converted to a
pointer-to-member
type; the result is the <a class='hidden_link' href='#def:value,null_member_pointer' id='def:value,null_member_pointer'><i >null member pointer value</i></a>
of that type and is distinguishable from any pointer to member not
created from a null pointer constant<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>Such a conversion is called a <a class='hidden_link' href='#def:conversion,null_member_pointer' id='def:conversion,null_member_pointer'><i >null member pointer conversion</i></a><a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>Two null member pointer values of
the same type shall compare equal<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>The conversion of a null pointer
constant to a pointer to member of cv-qualified type is a single
conversion, and not the sequence of a pointer-to-member conversion
followed by a qualification conversion (<a href='conv.qual'>[conv.qual]</a>)<a class='hidden_link' href='#1.sentence-4'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f30ae8fa2e8023bb070d9a6225063168f278cbb2/source/expressions.tex#L1013'>#</a></div><div id='2.sentence-1' class='sentence'>A prvalue of type “pointer to member of <span class='texttt'>B</span> of type <span class='mathit'>cv</span>
<span class='texttt'>T</span>”, where <span class='texttt'>B</span> is a class type, can be converted to
a prvalue of type “pointer to member of <span class='texttt'>D</span> of type <span class='mathit'>cv</span>
<span class='texttt'>T</span>”, where <span class='texttt'>D</span> is a complete class derived (<a href='class.derived'>[class.derived]</a>)
from <span class='texttt'>B</span><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>If <span class='texttt'>B</span> is an
inaccessible (<a href='class.access'>[class.access]</a>),
ambiguous (<a href='class.member.lookup'>[class.member.lookup]</a>), or virtual (<a href='class.mi'>[class.mi]</a>) base
class of <span class='texttt'>D</span>, or a base class of a virtual base class of
<span class='texttt'>D</span>, a program that necessitates this conversion is ill-formed<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>The result of the conversion refers to the same member as the pointer to
member before the conversion took place, but it refers to the base class
member as if it were a member of the derived class<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>The result refers to
the member in <span class='texttt'>D</span>'s instance of <span class='texttt'>B</span><a class='hidden_link' href='#2.sentence-4'>.</a></div> <div id='2.sentence-5' class='sentence'>Since the result has
type “pointer to member of <span class='texttt'>D</span> of type <span class='mathit'>cv</span> <span class='texttt'>T</span>”,
indirection through it with a <span class='texttt'>D</span> object is valid<a class='hidden_link' href='#2.sentence-5'>.</a></div> <div id='2.sentence-6' class='sentence'>The result is the same
as if indirecting through the pointer to member of <span class='texttt'>B</span> with the
<span class='texttt'>B</span> subobject of <span class='texttt'>D</span><a class='hidden_link' href='#2.sentence-6'>.</a></div> <div id='2.sentence-7' class='sentence'>The null member pointer value is
converted to the null member pointer value of the destination
type<a class='hidden_link' href='#2.sentence-7'>.</a><a class='footnotenum' href='#footnote-55' id='footnoteref-55'>55</a></div></div><div class='footnote' id='footnote-55'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-55'>55)</a></div><div id='footnote-55.sentence-1' class='sentence'>The rule for conversion of pointers to members (from pointer to member
of base to pointer to member of derived) appears inverted compared to
the rule for pointers to objects (from pointer to derived to pointer to
base) (<a href='conv.ptr'>[conv.ptr]</a>, <a href='class.derived'>[class.derived]</a>)<a class='hidden_link' href='#footnote-55.sentence-1'>.</a></div> <div id='footnote-55.sentence-2' class='sentence'>This inversion is
necessary to ensure type safety<a class='hidden_link' href='#footnote-55.sentence-2'>.</a></div> <div id='footnote-55.sentence-3' class='sentence'>Note that a pointer to member is not
an object pointer or a function pointer
and the rules for conversions
of such pointers do not apply to pointers to members<a class='hidden_link' href='#footnote-55.sentence-3'>.</a></div> <div id='footnote-55.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':conversion,pointer-to-member,void*'></a></span>In particular, a pointer to member cannot be converted to a
<span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span><a class='hidden_link' href='#footnote-55.sentence-4'>.</a></div> <a href='#footnoteref-55'>⮥</a></div></div></body></html>