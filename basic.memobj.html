<!DOCTYPE html><html lang='en'><head><title>[basic.memobj]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>6.7</a> Memory and objects <a class='abbr_ref'>[basic.memobj]</a></h2><div id='intro.memory' class='section'><h3 ><a class='secnum' href='#intro.memory' style='min-width:80pt'>6.7.1</a> Memory model <a class='abbr_ref' href='intro.memory'>[intro.memory]</a></h3><div class='para' id='intro.memory-1'><div class='marginalizedparent'><a class='marginalized' href='#intro.memory-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3178'>#</a></div><div class='texpara'><div id='intro.memory-1.sentence-1' class='sentence'><a class='index' id=':memory_model'></a>The fundamental storage unit in the C++ memory model is the
<a class='hidden_link' href='#def:byte' title='6.7.1&emsp;Memory model&emsp;[intro.memory]'><span id='def:byte'><i >byte</i></span></a><a class='hidden_link' href='#intro.memory-1.sentence-1'>.</a></div> <div id='intro.memory-1.sentence-2' class='sentence'>A byte is at least large enough to contain
the ordinary literal encoding of any element of the basic
<a class='index' id=':character_set,basic_literal'></a>literal character set (<a href='lex.charset' title='5.3.1&emsp;Character sets'>[lex.<span class='shy'></span>charset]</a>)
and the eight-bit code units of the Unicode
<a class='index' id=':UTF-8'></a>UTF-8 encoding form
and is composed of a contiguous sequence of
bits,<a class='footnoteref' href='#footnote-19' id='footnoteref-19' title='The number of bits in a byte is reported by the macro CHAR_&shy;BIT in the header &lt;climits&gt;.'>19</a>
the number of which is <a class='index' id=':bits_in_a_byte'></a>implementation-defined<a class='hidden_link' href='#intro.memory-1.sentence-2'>.</a></div> <div id='intro.memory-1.sentence-3' class='sentence'>The memory available to a C++ program consists of one or more sequences of
contiguous bytes<a class='hidden_link' href='#intro.memory-1.sentence-3'>.</a></div> <div id='intro.memory-1.sentence-4' class='sentence'>Every byte has a unique address<a class='hidden_link' href='#intro.memory-1.sentence-4'>.</a></div></div></div><div class='para nonNormativeOnly' id='intro.memory-2'><div class='marginalizedparent'><a class='marginalized' href='#intro.memory-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3200'>#</a></div><div class='texpara'><div id='intro.memory-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#intro.memory-note-1'>1</a></i>:&ensp;<div id='intro.memory-2.sentence-1' class='sentence'>The representation of types is described
in <a href='basic.types.general' title='6.8.1&emsp;General'>[basic.<span class='shy'></span>types.<span class='shy'></span>general]</a><a class='hidden_link' href='#intro.memory-2.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='intro.memory-3'><div class='marginalizedparent'><a class='marginalized' href='#intro.memory-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3206'>#</a></div><div class='texpara'><div id='intro.memory-3.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:memory_location' title='6.7.1&emsp;Memory model&emsp;[intro.memory]'><span id='def:memory_location'><i >memory location</i></span></a> is
the storage occupied by the object representation of
either an object of scalar type that is not a bit-field
or a maximal sequence of adjacent bit-fields all having nonzero width<a class='hidden_link' href='#intro.memory-3.sentence-1'>.</a></div> <div id='intro.memory-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#intro.memory-note-2'>2</a></i>:&ensp;<div id='intro.memory-3.sentence-2' class='sentence'>Various
features of the language, such as references and virtual functions, might
involve additional memory locations that are not accessible to programs but are
managed by the implementation<a class='hidden_link' href='#intro.memory-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='intro.memory-3.sentence-3' class='sentence'>
Two or more <a href='intro.multithread#def:thread_of_execution' title='6.9.2&emsp;Multi-threaded executions and data races&emsp;[intro.multithread]'>threads of
execution</a> can access separate memory
locations without interfering with each other<a class='hidden_link' href='#intro.memory-3.sentence-3'>.</a></div></div></div><div class='para nonNormativeOnly' id='intro.memory-4'><div class='marginalizedparent'><a class='marginalized' href='#intro.memory-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3221'>#</a></div><div class='texpara'><div id='intro.memory-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#intro.memory-note-3'>3</a></i>:&ensp;<div id='intro.memory-4.sentence-1' class='sentence'>Thus a bit-field and an adjacent non-bit-field are in separate memory
locations, and therefore can be concurrently updated by two threads of execution
without interference<a class='hidden_link' href='#intro.memory-4.sentence-1'>.</a></div> <div id='intro.memory-4.sentence-2' class='sentence'>The same applies to two bit-fields, if one is declared
inside a nested struct declaration and the other is not, or if the two are
separated by a zero-length bit-field declaration, or if they are separated by a
non-bit-field declaration<a class='hidden_link' href='#intro.memory-4.sentence-2'>.</a></div> <div id='intro.memory-4.sentence-3' class='sentence'>It is not safe to concurrently update two bit-fields
in the same struct if all fields between them are also bit-fields of nonzero
width<a class='hidden_link' href='#intro.memory-4.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='intro.memory-5'><div class='marginalizedparent'><a class='marginalized' href='#intro.memory-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3233'>#</a></div><div class='texpara'><div id='intro.memory-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#intro.memory-example-1'>1</a></i>:&ensp;<div id='intro.memory-5.sentence-1' class='sentence'>A class declared as
<span class='codeblock'><span class='keyword'>struct</span> <span class='curlybracket'>{</span>
  <span class='keyword'>char</span> a;
  <span class='keyword'>int</span> b<span class='operator'>:</span><span class='literal'>5</span>,
  c<span class='operator'>:</span><span class='literal'>11</span>,
  <span class='operator'>:</span><span class='literal'>0</span>,
  d<span class='operator'>:</span><span class='literal'>8</span>;
  <span class='keyword'>struct</span> <span class='curlybracket'>{</span><span class='keyword'>int</span> ee<span class='operator'>:</span><span class='literal'>8</span>;<span class='curlybracket'>}</span> e;
<span class='curlybracket'>}</span>;
</span>
contains four separate memory locations: The member <span class='texttt'>a</span> and bit-fields
<span class='texttt'>d</span> and <span class='texttt'>e<span class='operator'>.</span>ee</span> are each separate memory locations, and can be
modified concurrently without interfering with each other<a class='hidden_link' href='#intro.memory-5.sentence-1'>.</a></div> <div id='intro.memory-5.sentence-2' class='sentence'>The bit-fields
<span class='texttt'>b</span> and <span class='texttt'>c</span> together constitute the fourth memory location<a class='hidden_link' href='#intro.memory-5.sentence-2'>.</a></div> <div id='intro.memory-5.sentence-3' class='sentence'>The
bit-fields <span class='texttt'>b</span> and <span class='texttt'>c</span> cannot be concurrently modified, but
<span class='texttt'>b</span> and <span class='texttt'>a</span>, for example, can be<a class='hidden_link' href='#intro.memory-5.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div> </div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-19'><div class='texpara'><a class='footnotenum' href='#footnote-19'>19)</a><a class='footnoteBacklink' href='#footnoteref-19'>19)</a> <div id='footnote-19.sentence-1' class='sentence'>The number of bits in a byte is reported by the macro
<span class='texttt'>CHAR_<span class='shy'></span>BIT</span> in the header <a href='climits.syn#header:%3cclimits%3e' title='17.3.6&emsp;Header &lt;climits&gt; synopsis&emsp;[climits.syn]'><span id='headerref:<climits>'><span class='texttt'>&lt;climits&gt;</span></span></a><a class='hidden_link' href='#footnote-19.sentence-1'>.</a></div></div></div></div><div id='intro.object' class='section'><h3 ><a class='secnum' href='#intro.object' style='min-width:80pt'>6.7.2</a> Object model <a class='abbr_ref' href='intro.object'>[intro.object]</a></h3><div class='para' id='intro.object-1'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3257'>#</a></div><div class='texpara'><div id='intro.object-1.sentence-1' class='sentence'><a class='index' id=':object_model'></a>The constructs in a C++ program create, destroy, refer to, access, and
manipulate objects<a class='hidden_link' href='#intro.object-1.sentence-1'>.</a></div> <div id='intro.object-1.sentence-2' class='sentence'>An <a class='hidden_link' href='#def:object' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:object'><i >object</i></span></a> is created
by a <a href='basic.def' title='6.2&emsp;Declarations and definitions&emsp;[basic.def]'>definition</a>,
by a <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression'><span class='textsf'><i >new-expression</i></span></span></a> (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>),
by an operation that implicitly creates objects (see below),
when implicitly changing the active member of a <a href='class.union' title='11.5&emsp;Unions&emsp;[class.union]'>union</a>,
or
when a temporary object is created (<a href='conv.rval' title='7.3.5&emsp;Temporary materialization conversion'>[conv.<span class='shy'></span>rval]</a>, <a href='#class.temporary' title='6.7.7&emsp;Temporary objects'>[class.<span class='shy'></span>temporary]</a>)<a class='hidden_link' href='#intro.object-1.sentence-2'>.</a></div> <div id='intro.object-1.sentence-3' class='sentence'>An object occupies a region of storage
in its period of construction (<a href='class.cdtor' title='11.9.5&emsp;Construction and destruction'>[class.<span class='shy'></span>cdtor]</a>),
throughout its <a href='#basic.life' title='6.7.4&emsp;Lifetime&emsp;[basic.life]'>lifetime</a>,
and
in its period of destruction (<a href='class.cdtor' title='11.9.5&emsp;Construction and destruction'>[class.<span class='shy'></span>cdtor]</a>)<a class='hidden_link' href='#intro.object-1.sentence-3'>.</a></div> <div id='intro.object-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#intro.object-note-1'>1</a></i>:&ensp;<div id='intro.object-1.sentence-4' class='sentence'>A function is not an object, regardless of whether or not it
occupies storage in the way that objects do<a class='hidden_link' href='#intro.object-1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='intro.object-1.sentence-5' class='sentence'>
The properties of an
object are determined when the object is created<a class='hidden_link' href='#intro.object-1.sentence-5'>.</a></div> <div id='intro.object-1.sentence-6' class='sentence'>An object can have a
name (<a href='basic.pre' title='6.1&emsp;Preamble'>[basic.<span class='shy'></span>pre]</a>)<a class='hidden_link' href='#intro.object-1.sentence-6'>.</a></div> <div id='intro.object-1.sentence-7' class='sentence'>An object has a storage
duration (<a href='#basic.stc' title='6.7.6&emsp;Storage duration'>[basic.<span class='shy'></span>stc]</a>) which influences its
lifetime (<a href='#basic.life' title='6.7.4&emsp;Lifetime'>[basic.<span class='shy'></span>life]</a>)<a class='hidden_link' href='#intro.object-1.sentence-7'>.</a></div> <div id='intro.object-1.sentence-8' class='sentence'>An object has a
type (<a href='basic.types' title='6.8&emsp;Types'>[basic.<span class='shy'></span>types]</a>)<a class='hidden_link' href='#intro.object-1.sentence-8'>.</a></div> <div id='intro.object-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#intro.object-note-2'>2</a></i>:&ensp;<div id='intro.object-1.sentence-9' class='sentence'>Some objects are
polymorphic (<a href='class.virtual' title='11.7.3&emsp;Virtual functions'>[class.<span class='shy'></span>virtual]</a>); the implementation
generates information associated with each such object that makes it
possible to determine that object's type during program execution<a class='hidden_link' href='#intro.object-1.sentence-9'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='intro.object-2'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3290'>#</a></div><div class='texpara'><div id='intro.object-2.sentence-1' class='sentence'><a class='index' id=':subobject'></a>Objects can contain other objects, called <a class='hidden_link' href='#def:subobject' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:subobject'><i >subobjects</i></span></a><a class='hidden_link' href='#intro.object-2.sentence-1'>.</a></div> <div id='intro.object-2.sentence-2' class='sentence'>A subobject can be
a <a class='hidden_link' href='#def:member_subobject' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:member_subobject'><i >member subobject</i></span></a> (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>), a <a class='hidden_link' href='#def:base_class_subobject' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:base_class_subobject'><i >base class subobject</i></span></a> (<a href='class.derived' title='11.7&emsp;Derived classes'>[class.<span class='shy'></span>derived]</a>),
or an array element<a class='hidden_link' href='#intro.object-2.sentence-2'>.</a></div> <div id='intro.object-2.sentence-3' class='sentence'><a class='index' id=':object,complete'></a>An object that is not a subobject of any other object is called a <a class='hidden_link' href='#def:complete_object' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:complete_object'><i >complete
object</i></span></a><a class='hidden_link' href='#intro.object-2.sentence-3'>.</a></div> <div id='intro.object-2.sentence-4' class='sentence'>If an object is created
in storage associated with a member subobject or array element <i >e</i>
(which may or may not be within its lifetime),
the created object
is a subobject of <i >e</i>'s containing object if
<ul class='itemize'><li id='intro.object-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-2.1'>(2.1)</a></div>the lifetime of <i >e</i>'s containing object has begun and not ended, and</li><li id='intro.object-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-2.2'>(2.2)</a></div>the storage for the new object exactly overlays the storage location associated with <i >e</i>, and</li><li id='intro.object-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-2.3'>(2.3)</a></div>the new object is of the same type as <i >e</i> (ignoring cv-qualification)<a class='hidden_link' href='#intro.object-2.sentence-4'>.</a></li></ul></div></div></div><div class='para' id='intro.object-3'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3313'>#</a></div><div class='texpara'><div id='intro.object-3.sentence-1' class='sentence'><a class='index' id=':object,providing_storage_for'></a>If a complete object is created (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>)
in storage associated with another object <i >e</i>
of type “array of <span class='math'><span class='mathalpha'>N</span></span> <span class='texttt'><span id=':unsigned'><span class='texttt'><span class='keyword'>unsigned</span></span></span> <span id=':char'><span class='texttt'><span class='keyword'>char</span></span></span></span>” or
of type “array of <span class='math'><span class='mathalpha'>N</span></span> <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span>” (<a href='cstddef.syn' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis'>[cstddef.<span class='shy'></span>syn]</a>),
that array <a class='hidden_link' href='#def:provides_storage' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:provides_storage'><i >provides storage</i></span></a>
for the created object if
<ul class='itemize'><li id='intro.object-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-3.1'>(3.1)</a></div>the lifetime of <i >e</i> has begun and not ended, and</li><li id='intro.object-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-3.2'>(3.2)</a></div>the storage for the new object fits entirely within <i >e</i>, and</li><li id='intro.object-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-3.3'>(3.3)</a></div>there is no array object that satisfies these constraints nested within <i >e</i><a class='hidden_link' href='#intro.object-3.sentence-1'>.</a></li></ul></div> <div id='intro.object-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#intro.object-note-3'>3</a></i>:&ensp;<div id='intro.object-3.sentence-2' class='sentence'>If that portion of the array
previously provided storage for another object,
the lifetime of that object ends
because its storage was reused (<a href='#basic.life' title='6.7.4&emsp;Lifetime'>[basic.<span class='shy'></span>life]</a>)<a class='hidden_link' href='#intro.object-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='intro.object-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#intro.object-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='comment'>// assumes that <span class='tcode_in_codeblock'>sizeof(int)</span> is equal to 4</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>T<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> AlignedUnion <span class='curlybracket'>{</span>
  <span class='keyword'>alignas</span><span class='parenthesis'>(</span>T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='keyword'>unsigned</span> <span class='keyword'>char</span> data<span class='squarebracket'>[</span>max<span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span><span class='squarebracket'>]</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  AlignedUnion<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>char</span><span class='anglebracket'>&gt;</span> au;
  <span class='keyword'>int</span> <span class='operator'>*</span>p <span class='operator'>=</span> <span class='keyword'>new</span> <span class='parenthesis'>(</span>au<span class='operator'>.</span>data<span class='parenthesis'>)</span> <span class='keyword'>int</span>;           <span class='comment'>// OK, <span class='tcode_in_codeblock'>au.data</span> provides storage</span>
  <span class='keyword'>char</span> <span class='operator'>*</span>c <span class='operator'>=</span> <span class='keyword'>new</span> <span class='parenthesis'>(</span>au<span class='operator'>.</span>data<span class='parenthesis'>)</span> <span class='keyword'>char</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK, ends lifetime of <span class='tcode_in_codeblock'>*p</span></span>
  <span class='keyword'>char</span> <span class='operator'>*</span>d <span class='operator'>=</span> <span class='keyword'>new</span> <span class='parenthesis'>(</span>au<span class='operator'>.</span>data <span class='operator'>+</span> <span class='literal'>1</span><span class='parenthesis'>)</span> <span class='keyword'>char</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>return</span> <span class='operator'>*</span>c <span class='operator'>+</span> <span class='operator'>*</span>d;                       <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>

<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>unsigned</span> <span class='keyword'>char</span> a<span class='squarebracket'>[</span><span class='literal'>32</span><span class='squarebracket'>]</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='keyword'>unsigned</span> <span class='keyword'>char</span> b<span class='squarebracket'>[</span><span class='literal'>16</span><span class='squarebracket'>]</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>alignas</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> A a;
B <span class='operator'>*</span>b <span class='operator'>=</span> <span class='keyword'>new</span> <span class='parenthesis'>(</span>a<span class='operator'>.</span>a <span class='operator'>+</span> <span class='literal'>8</span><span class='parenthesis'>)</span> B;                 <span class='comment'>// <span class='tcode_in_codeblock'>a.a</span> provides storage for <span class='tcode_in_codeblock'>*b</span></span>
<span class='keyword'>int</span> <span class='operator'>*</span>p <span class='operator'>=</span> <span class='keyword'>new</span> <span class='parenthesis'>(</span>b<span class='operator'>-</span><span class='anglebracket'>&gt;</span>b <span class='operator'>+</span> <span class='literal'>4</span><span class='parenthesis'>)</span> <span class='keyword'>int</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>b-&gt;b</span> provides storage for <span class='tcode_in_codeblock'>*p</span></span>
                                        <span class='comment'>// <span class='tcode_in_codeblock'>a.a</span> does not provide storage for <span class='tcode_in_codeblock'>*p</span> (directly),</span>
                                        <span class='comment'>// but <span class='tcode_in_codeblock'>*p</span> is nested within <span class='tcode_in_codeblock'>a</span> (see below)</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='intro.object-4'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3361'>#</a></div><div class='texpara'><div id='intro.object-4.sentence-1' class='sentence'><a class='index' id=':object,nested_within'></a>An object <i >a</i> is <a class='hidden_link' href='#def:nested_within' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:nested_within'><i >nested within</i></span></a> another object <i >b</i> if
<ul class='itemize'><li id='intro.object-4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-4.1'>(4.1)</a></div><i >a</i> is a subobject of <i >b</i>, or</li><li id='intro.object-4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-4.2'>(4.2)</a></div><i >b</i> provides storage for <i >a</i>, or</li><li id='intro.object-4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-4.3'>(4.3)</a></div>there exists an object <i >c</i>
where <i >a</i> is nested within <i >c</i>,
and <i >c</i> is nested within <i >b</i><a class='hidden_link' href='#intro.object-4.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='intro.object-5'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3375'>#</a></div><div class='texpara'><div id='intro.object-5.sentence-1' class='sentence'>For every object <span class='texttt'>x</span>, there is some object called the
<a class='hidden_link' href='#def:complete_object_of' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:complete_object_of'><i >complete object of</i></span></a> <span class='texttt'>x</span>, determined as follows:
<ul class='itemize'><li id='intro.object-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-5.1'>(5.1)</a></div><div class='texpara'><div id='intro.object-5.1.sentence-1' class='sentence'>If <span class='texttt'>x</span> is a complete object, then the complete object
of <span class='texttt'>x</span> is itself<a class='hidden_link' href='#intro.object-5.1.sentence-1'>.</a></div></div></li><li id='intro.object-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-5.2'>(5.2)</a></div><div class='texpara'><div id='intro.object-5.2.sentence-1' class='sentence'>Otherwise, the complete object of <span class='texttt'>x</span> is the complete object
of the (unique) object that contains <span class='texttt'>x</span><a class='hidden_link' href='#intro.object-5.2.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='intro.object-6'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3388'>#</a></div><div class='texpara'><div id='intro.object-6.sentence-1' class='sentence'>If a complete object, a member subobject, or an array element is of
class type, its type is considered the <a class='hidden_link' href='#def:most_derived_class' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:most_derived_class'><i >most derived
class</i></span></a>, to distinguish it from the class type of any base class subobject;
an object of a most derived class type or of a non-class type is called a
<a class='hidden_link' href='#def:most_derived_object' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:most_derived_object'><i >most derived object</i></span></a><a class='hidden_link' href='#intro.object-6.sentence-1'>.</a></div></div></div><div class='para' id='intro.object-7'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3395'>#</a></div><div class='texpara'><div id='intro.object-7.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:potentially-overlapping_subobject' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:potentially-overlapping_subobject'><i >potentially-overlapping subobject</i></span></a> is either:
<ul class='itemize'><li id='intro.object-7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-7.1'>(7.1)</a></div>a base class subobject, or</li><li id='intro.object-7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-7.2'>(7.2)</a></div>a non-static data member
declared with the <a href='dcl.attr.nouniqueaddr' title='9.13.11&emsp;No unique address attribute&emsp;[dcl.attr.nouniqueaddr]'><span class='texttt'>no_<span class='shy'></span>unique_<span class='shy'></span>address</span></a> attribute<a class='hidden_link' href='#intro.object-7.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='intro.object-8'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3403'>#</a></div><div class='texpara'><div id='intro.object-8.sentence-1' class='sentence'><a class='index' id=':object,zero_size'></a><a class='index' id=':object,nonzero_size'></a>An object has nonzero size if it
<ul class='itemize'><li id='intro.object-8.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-8.1'>(8.1)</a></div>is not a potentially-overlapping subobject, or</li><li id='intro.object-8.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-8.2'>(8.2)</a></div>is not of class type, or</li><li id='intro.object-8.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-8.3'>(8.3)</a></div>is of a class type with virtual member functions or virtual base classes, or</li><li id='intro.object-8.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-8.4'>(8.4)</a></div>has subobjects of nonzero size or unnamed bit-fields of nonzero length<a class='hidden_link' href='#intro.object-8.sentence-1'>.</a></li></ul></div> <div id='intro.object-8.sentence-2' class='sentence'>
Otherwise, if the object is a base class subobject
of a standard-layout class type
with no non-static data members,
it has zero size<a class='hidden_link' href='#intro.object-8.sentence-2'>.</a></div> <div id='intro.object-8.sentence-3' class='sentence'>Otherwise, the circumstances under which the object has zero size
are <a class='index' id=':which_non-standard-layout_objects_containing_no_data_are_considered_empty'></a>implementation-defined<a class='hidden_link' href='#intro.object-8.sentence-3'>.</a></div> <div id='intro.object-8.sentence-4' class='sentence'><a class='index' id=':most_derived_object,bit-field'></a>Unless it is a <a href='class.bit' title='11.4.10&emsp;Bit-fields&emsp;[class.bit]'>bit-field</a>,
an object with nonzero size
shall occupy one or more bytes of storage,
including every byte that is occupied in full or in part
by any of its subobjects<a class='hidden_link' href='#intro.object-8.sentence-4'>.</a></div> <div id='intro.object-8.sentence-5' class='sentence'>An object of trivially copyable or
standard-layout type (<a href='basic.types.general' title='6.8.1&emsp;General'>[basic.<span class='shy'></span>types.<span class='shy'></span>general]</a>) shall occupy contiguous bytes of
storage<a class='hidden_link' href='#intro.object-8.sentence-5'>.</a></div></div></div><div class='para' id='intro.object-9'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3430'>#</a></div><div class='texpara'><div id='intro.object-9.sentence-1' class='sentence'>An object is a <a class='hidden_link' href='#def:object,potentially_non-unique' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:object,potentially_non-unique'><i >potentially non-unique object</i></span></a> if it is
a string literal object (<a href='lex.string' title='5.13.5&emsp;String literals'>[lex.<span class='shy'></span>string]</a>),
the backing array of an initializer list (<a href='dcl.init.ref' title='9.5.4&emsp;References'>[dcl.<span class='shy'></span>init.<span class='shy'></span>ref]</a>), or
a subobject thereof<a class='hidden_link' href='#intro.object-9.sentence-1'>.</a></div></div></div><div class='para' id='intro.object-10'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3436'>#</a></div><div class='texpara'><div id='intro.object-10.sentence-1' class='sentence'><a class='index' id=':most_derived_object,bit-field_'></a><a class='index' id=':most_derived_object,zero_size_subobject'></a>Unless an object is a bit-field or a subobject of zero size, the
address of that object is the address of the first byte it occupies<a class='hidden_link' href='#intro.object-10.sentence-1'>.</a></div> <div id='intro.object-10.sentence-2' class='sentence'>Two objects
with overlapping lifetimes
that are not bit-fields
may have the same address if
<ul class='itemize'><li id='intro.object-10.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-10.1'>(10.1)</a></div>one is nested within the other,</li><li id='intro.object-10.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-10.2'>(10.2)</a></div>at least one is a subobject of zero size and they are not of similar types (<a href='conv.qual' title='7.3.6&emsp;Qualification conversions'>[conv.<span class='shy'></span>qual]</a>),
or</li><li id='intro.object-10.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#intro.object-10.3'>(10.3)</a></div>they are both potentially non-unique objects;</li></ul>
otherwise, they have distinct addresses
and occupy disjoint bytes of storage<a class='hidden_link' href='#intro.object-10.sentence-2'>.</a><a class='footnoteref' href='#footnote-20' id='footnoteref-20' title='Under the “as-if” rule an implementation is allowed to store two objects at the same machine address or not store an object at all if the program cannot observe the difference ([intro.execution]).'>20</a></div> <div id='intro.object-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#intro.object-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span> test1 <span class='operator'>=</span> <span class='literal'>'x'</span>;
<span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span> test2 <span class='operator'>=</span> <span class='literal'>'x'</span>;
<span class='keyword'>const</span> <span class='keyword'>bool</span> b <span class='operator'>=</span> <span class='operator'>&amp;</span>test1 <span class='operator'>!</span><span class='operator'>=</span> <span class='operator'>&amp;</span>test2;        <span class='comment'>// always <span class='tcode_in_codeblock'>true</span></span>

<span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span>r<span class='parenthesis'>)</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='literal'>"x"</span>;
<span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span> <span class='operator'>*</span>s <span class='operator'>=</span> <span class='literal'>"x"</span>;
<span class='keyword'>static</span> std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> il <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>'x'</span> <span class='curlybracket'>}</span>;
<span class='keyword'>const</span> <span class='keyword'>bool</span> b2 <span class='operator'>=</span> r <span class='operator'>!</span><span class='operator'>=</span> il<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;        <span class='comment'>// unspecified result</span>
<span class='keyword'>const</span> <span class='keyword'>bool</span> b3 <span class='operator'>=</span> r <span class='operator'>!</span><span class='operator'>=</span> s;                 <span class='comment'>// unspecified result</span>
<span class='keyword'>const</span> <span class='keyword'>bool</span> b4 <span class='operator'>=</span> il<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='operator'>&amp;</span>test1;   <span class='comment'>// always <span class='tcode_in_codeblock'>true</span></span>
<span class='keyword'>const</span> <span class='keyword'>bool</span> b5 <span class='operator'>=</span> r <span class='operator'>!</span><span class='operator'>=</span> <span class='operator'>&amp;</span>test1;            <span class='comment'>// always <span class='tcode_in_codeblock'>true</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='intro.object-10.sentence-3' class='sentence'>
The address of a non-bit-field subobject of zero size is
the address of an unspecified byte of storage
occupied by the complete object of that subobject<a class='hidden_link' href='#intro.object-10.sentence-3'>.</a></div></div></div><div class='para' id='intro.object-11'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3478'>#</a></div><div class='texpara'><div id='intro.object-11.sentence-1' class='sentence'>Some operations are described as
<a class='hidden_link' href='#def:object,implicit_creation' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:object,implicit_creation'><i >implicitly creating objects</i></span></a>
within a specified region of storage<a class='hidden_link' href='#intro.object-11.sentence-1'>.</a></div> <div id='intro.object-11.sentence-2' class='sentence'>For each operation that is specified as implicitly creating objects,
that operation implicitly creates and starts the lifetime of
zero or more objects of implicit-lifetime types (<a href='basic.types.general#term.implicit.lifetime.type' title='6.8.1&emsp;General'>[basic.<span class='shy'></span>types.<span class='shy'></span>general]</a>)
in its specified region of storage
if doing so would result in the program having defined behavior<a class='hidden_link' href='#intro.object-11.sentence-2'>.</a></div> <div id='intro.object-11.sentence-3' class='sentence'>If no such set of objects would give the program defined behavior,
the behavior of the program is undefined<a class='hidden_link' href='#intro.object-11.sentence-3'>.</a></div> <div id='intro.object-11.sentence-4' class='sentence'>If multiple such sets of objects would give the program defined behavior,
it is unspecified which such set of objects is created<a class='hidden_link' href='#intro.object-11.sentence-4'>.</a></div> <div id='intro.object-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#intro.object-note-4'>4</a></i>:&ensp;<div id='intro.object-11.sentence-5' class='sentence'>Such operations do not start the lifetimes of subobjects of such objects
that are not themselves of implicit-lifetime types<a class='hidden_link' href='#intro.object-11.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='intro.object-12'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3496'>#</a></div><div class='texpara'><div id='intro.object-12.sentence-1' class='sentence'>Further, after implicitly creating objects within a specified region of storage,
some operations are described as producing a pointer to a
<a class='hidden_link' href='#def:object,suitable_created' title='6.7.2&emsp;Object model&emsp;[intro.object]'><span id='def:object,suitable_created'><i >suitable created object</i></span></a><a class='hidden_link' href='#intro.object-12.sentence-1'>.</a></div> <div id='intro.object-12.sentence-2' class='sentence'>These operations select one of the implicitly-created objects
whose address is the address of the start of the region of storage,
and produce a pointer value that points to that object,
if that value would result in the program having defined behavior<a class='hidden_link' href='#intro.object-12.sentence-2'>.</a></div> <div id='intro.object-12.sentence-3' class='sentence'>If no such pointer value would give the program defined behavior,
the behavior of the program is undefined<a class='hidden_link' href='#intro.object-12.sentence-3'>.</a></div> <div id='intro.object-12.sentence-4' class='sentence'>If multiple such pointer values would give the program defined behavior,
it is unspecified which such pointer value is produced<a class='hidden_link' href='#intro.object-12.sentence-4'>.</a></div></div></div><div class='para nonNormativeOnly' id='intro.object-13'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3509'>#</a></div><div class='texpara'><div id='intro.object-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#intro.object-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>cstdlib<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>int</span> a, b; <span class='curlybracket'>}</span>;
X <span class='operator'>*</span>make_x<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='comment'>// The call to <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;malloc</span> implicitly creates an object of type <span class='tcode_in_codeblock'>X</span></span>
  <span class='comment'>// and its subobjects <span class='tcode_in_codeblock'>a</span> and <span class='tcode_in_codeblock'>b</span>, and returns a pointer to that <span class='tcode_in_codeblock'>X</span> object</span>
  <span class='comment'>// (or an object that is pointer-interconvertible (<a href='basic.compound' title='6.8.4&emsp;Compound types'>[basic.<span class='shy'></span>compound]</a>) with it),</span>
  <span class='comment'>// in order to give the subsequent class member access operations</span>
  <span class='comment'>// defined behavior.</span>
  X <span class='operator'>*</span>p <span class='operator'>=</span> <span class='parenthesis'>(</span>X<span class='operator'>*</span><span class='parenthesis'>)</span>std<span class='operator'>::</span>malloc<span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>struct</span> X<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
  p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>a <span class='operator'>=</span> <span class='literal'>1</span>;
  p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>b <span class='operator'>=</span> <span class='literal'>2</span>;
  <span class='keyword'>return</span> p;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='intro.object-14'><div class='marginalizedparent'><a class='marginalized' href='#intro.object-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3528'>#</a></div><div class='texpara'><div id='intro.object-14.sentence-1' class='sentence'>Except during constant evaluation,
an operation that begins the lifetime of
an array of <span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>char</span></span> or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span>
implicitly creates objects within the region of storage occupied by the array<a class='hidden_link' href='#intro.object-14.sentence-1'>.</a></div> <div id='intro.object-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#intro.object-note-5'>5</a></i>:&ensp;<div id='intro.object-14.sentence-2' class='sentence'>The array object provides storage for these objects<a class='hidden_link' href='#intro.object-14.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='intro.object-14.sentence-3' class='sentence'>
Except during constant evaluation,
any implicit or explicit invocation of a function
named <span class='texttt'><span id=':operator'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':new'><span class='texttt'><span class='keyword'>new</span></span></span></span> or <span class='texttt'><span id=':operator_'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':new_'><span class='texttt'><span class='keyword'>new</span></span></span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>
implicitly creates objects in the returned region of storage and
returns a pointer to a suitable created object<a class='hidden_link' href='#intro.object-14.sentence-3'>.</a></div> <div id='intro.object-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#intro.object-note-6'>6</a></i>:&ensp;<div id='intro.object-14.sentence-4' class='sentence'>Some functions in the C++ standard library implicitly create objects (<a href='obj.lifetime' title='20.2.6&emsp;Explicit lifetime management'>[obj.<span class='shy'></span>lifetime]</a>, <a href='c.malloc' title='20.2.12&emsp;C library memory allocation'>[c.<span class='shy'></span>malloc]</a>, <a href='mem.res.public' title='20.5.2.2&emsp;Public member functions'>[mem.<span class='shy'></span>res.<span class='shy'></span>public]</a>, <a href='bit.cast' title='22.11.3&emsp;Function template bit_&shy;cast'>[bit.<span class='shy'></span>cast]</a>, <a href='cstring.syn' title='27.5.1&emsp;Header &lt;cstring&gt; synopsis'>[cstring.<span class='shy'></span>syn]</a>)<a class='hidden_link' href='#intro.object-14.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div> </div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-20'><div class='texpara'><a class='footnotenum' href='#footnote-20'>20)</a><a class='footnoteBacklink' href='#footnoteref-20'>20)</a> <div id='footnote-20.sentence-1' class='sentence'>Under the “as-if” rule an
implementation is allowed to store two objects at the same machine address or
not store an object at all if the program cannot observe the
difference (<a href='intro.execution' title='6.9.1&emsp;Sequential execution'>[intro.<span class='shy'></span>execution]</a>)<a class='hidden_link' href='#footnote-20.sentence-1'>.</a></div></div></div></div><div id='basic.align' class='section'><h3 ><a class='secnum' href='#basic.align' style='min-width:80pt'>6.7.3</a> Alignment <a class='abbr_ref' href='basic.align'>[basic.align]</a></h3><div class='para' id='basic.align-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3549'>#</a></div><div class='texpara'><div id='basic.align-1.sentence-1' class='sentence'>Object types have <a class='hidden_link' href='#def:alignment_requirement,implementation-defined' title='6.7.3&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment_requirement,implementation-defined'><i >alignment requirements</i></span></a> (<a href='basic.fundamental' title='6.8.2&emsp;Fundamental types'>[basic.<span class='shy'></span>fundamental]</a>, <a href='basic.compound' title='6.8.4&emsp;Compound types'>[basic.<span class='shy'></span>compound]</a>)
which place restrictions on the addresses at which an object of that type
may be allocated<a class='hidden_link' href='#basic.align-1.sentence-1'>.</a></div> <div id='basic.align-1.sentence-2' class='sentence'>An <a class='hidden_link' href='#def:alignment' title='6.7.3&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment'><i >alignment</i></span></a> is an <a class='index' id=':alignment'></a>implementation-defined
integer value representing the number of bytes between successive addresses
at which a given object can be allocated<a class='hidden_link' href='#basic.align-1.sentence-2'>.</a></div> <div id='basic.align-1.sentence-3' class='sentence'>An object type imposes an alignment
requirement on every object of that type; stricter alignment can be requested
using the alignment specifier (<a href='dcl.align' title='9.13.2&emsp;Alignment specifier'>[dcl.<span class='shy'></span>align]</a>)<a class='hidden_link' href='#basic.align-1.sentence-3'>.</a></div> <div id='basic.align-1.sentence-4' class='sentence'>Attempting to create an object (<a href='#intro.object' title='6.7.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>) in storage that
does not meet the alignment requirements of the object's type
is undefined behavior<a class='hidden_link' href='#basic.align-1.sentence-4'>.</a></div></div></div><div class='para' id='basic.align-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3561'>#</a></div><div class='texpara'><div id='basic.align-2.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:alignment,fundamental' title='6.7.3&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment,fundamental'><i >fundamental alignment</i></span></a> is represented by an alignment
less than or equal to the greatest alignment supported by the implementation in
all contexts, which is equal to
<span class='texttt'><span id=':alignof'><span class='texttt'><span class='keyword'>alignof</span></span></span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>max_<span class='shy'></span>align_<span class='shy'></span>t<span class='parenthesis'>)</span></span> (<a href='support.types' title='17.2&emsp;Common definitions'>[support.<span class='shy'></span>types]</a>)<a class='hidden_link' href='#basic.align-2.sentence-1'>.</a></div> <div id='basic.align-2.sentence-2' class='sentence'>The alignment required for a type may be different when it is used as the type
of a complete object and when it is used as the type of a subobject<a class='hidden_link' href='#basic.align-2.sentence-2'>.</a></div> <div id='basic.align-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#basic.align-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='keyword'>long</span> <span class='keyword'>double</span> d; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D <span class='operator'>:</span> <span class='keyword'>virtual</span> B <span class='curlybracket'>{</span> <span class='keyword'>char</span> c; <span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='basic.align-2.sentence-3' class='sentence'>When <span class='texttt'>D</span> is the type of a complete object, it will have a subobject of
type <span class='texttt'>B</span>, so it must be aligned appropriately for a <span class='texttt'><span id=':long'><span class='texttt'><span class='keyword'>long</span></span></span> <span id=':double'><span class='texttt'><span class='keyword'>double</span></span></span></span><a class='hidden_link' href='#basic.align-2.sentence-3'>.</a></div> <div id='basic.align-2.sentence-4' class='sentence'>If <span class='texttt'>D</span> appears as a subobject of another object that also has <span class='texttt'>B</span>
as a virtual base class, the <span class='texttt'>B</span> subobject might be part of a different
subobject, reducing the alignment requirements on the <span class='texttt'>D</span> subobject<a class='hidden_link' href='#basic.align-2.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div> <div id='basic.align-2.sentence-5' class='sentence'>
The result of the <span id=':alignof_'><span class='texttt'><span class='keyword'>alignof</span></span></span> operator reflects the alignment
requirement of the type in the complete-object case<a class='hidden_link' href='#basic.align-2.sentence-5'>.</a></div></div></div><div class='para' id='basic.align-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3583'>#</a></div><div class='texpara'><div id='basic.align-3.sentence-1' class='sentence'>An <a class='hidden_link' href='#def:alignment,extended' title='6.7.3&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment,extended'><i >extended alignment</i></span></a> is represented by an alignment
greater than <span class='texttt'><span id=':alignof__'><span class='texttt'><span class='keyword'>alignof</span></span></span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>max_<span class='shy'></span>align_<span class='shy'></span>t<span class='parenthesis'>)</span></span><a class='hidden_link' href='#basic.align-3.sentence-1'>.</a></div> <div id='basic.align-3.sentence-2' class='sentence'>It is <a class='index' id=':support_for_extended_alignments'></a>implementation-defined
whether any extended alignments are supported and the contexts in which they are
supported (<a href='dcl.align' title='9.13.2&emsp;Alignment specifier'>[dcl.<span class='shy'></span>align]</a>)<a class='hidden_link' href='#basic.align-3.sentence-2'>.</a></div> <div id='basic.align-3.sentence-3' class='sentence'>A type having an extended alignment
requirement is an <a class='hidden_link' href='#def:type,over-aligned' title='6.7.3&emsp;Alignment&emsp;[basic.align]'><span id='def:type,over-aligned'><i >over-aligned type</i></span></a><a class='hidden_link' href='#basic.align-3.sentence-3'>.</a></div> <div id='basic.align-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.align-note-1'>1</a></i>:&ensp;<div id='basic.align-3.sentence-4' class='sentence'>Every over-aligned type is or contains a class type
to which extended alignment applies (possibly through a non-static data member)<a class='hidden_link' href='#basic.align-3.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='basic.align-3.sentence-5' class='sentence'>
A <a class='hidden_link' href='#def:alignment,new-extended' title='6.7.3&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment,new-extended'><i >new-extended alignment</i></span></a> is represented by
an alignment greater than <span class='texttt'>__STDCPP_<span class='shy'></span>DEFAULT_<span class='shy'></span>NEW_<span class='shy'></span>ALIGNMENT__</span> (<a href='cpp.predefined' title='15.12&emsp;Predefined macro names'>[cpp.<span class='shy'></span>predefined]</a>)<a class='hidden_link' href='#basic.align-3.sentence-5'>.</a></div></div></div><div class='para' id='basic.align-4'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3596'>#</a></div><div class='texpara'><div id='basic.align-4.sentence-1' class='sentence'>Alignments are represented as values of the type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span><a class='hidden_link' href='#basic.align-4.sentence-1'>.</a></div> <div id='basic.align-4.sentence-2' class='sentence'>Valid alignments include only those values returned by an <span id=':alignof___'><span class='texttt'><span class='keyword'>alignof</span></span></span>
expression for the fundamental types plus an additional <a class='index' id=':alignment_additional_values'></a>implementation-defined
set of values, which may be empty<a class='hidden_link' href='#basic.align-4.sentence-2'>.</a></div> <div id='basic.align-4.sentence-3' class='sentence'>Every alignment value shall be a non-negative integral power of two<a class='hidden_link' href='#basic.align-4.sentence-3'>.</a></div></div></div><div class='para' id='basic.align-5'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3604'>#</a></div><div class='texpara'><div id='basic.align-5.sentence-1' class='sentence'>Alignments have an order from <a class='hidden_link' href='#def:alignment,weaker' title='6.7.3&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment,weaker'><i >weaker</i></span></a> to
<a class='hidden_link' href='#def:alignment,stronger' title='6.7.3&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment,stronger'><i >stronger</i></span></a> or <a class='hidden_link' href='#def:alignment,stricter' title='6.7.3&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment,stricter'><i >stricter</i></span></a> alignments<a class='hidden_link' href='#basic.align-5.sentence-1'>.</a></div> <div id='basic.align-5.sentence-2' class='sentence'>Stricter
alignments have larger alignment values<a class='hidden_link' href='#basic.align-5.sentence-2'>.</a></div> <div id='basic.align-5.sentence-3' class='sentence'>An address that satisfies an alignment
requirement also satisfies any weaker valid alignment requirement<a class='hidden_link' href='#basic.align-5.sentence-3'>.</a></div></div></div><div class='para' id='basic.align-6'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3610'>#</a></div><div class='texpara'><div id='basic.align-6.sentence-1' class='sentence'>The alignment requirement of a complete type can be queried using an
<span id=':alignof____'><span class='texttt'><span class='keyword'>alignof</span></span></span> expression (<a href='expr.alignof' title='7.6.2.6&emsp;Alignof'>[expr.<span class='shy'></span>alignof]</a>)<a class='hidden_link' href='#basic.align-6.sentence-1'>.</a></div> <div id='basic.align-6.sentence-2' class='sentence'>Furthermore,
the narrow character types (<a href='basic.fundamental' title='6.8.2&emsp;Fundamental types'>[basic.<span class='shy'></span>fundamental]</a>) shall have the weakest
alignment requirement<a class='hidden_link' href='#basic.align-6.sentence-2'>.</a></div> <div id='basic.align-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.align-note-2'>2</a></i>:&ensp;<div id='basic.align-6.sentence-3' class='sentence'>This enables the ordinary character types to be used as the
underlying type for an aligned memory area (<a href='dcl.align' title='9.13.2&emsp;Alignment specifier'>[dcl.<span class='shy'></span>align]</a>)<a class='hidden_link' href='#basic.align-6.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='basic.align-7'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3620'>#</a></div><div class='texpara'><div id='basic.align-7.sentence-1' class='sentence'>Comparing alignments is meaningful and provides the obvious results:</div></div><div class='texpara'><ul class='itemize'><li id='basic.align-7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.align-7.1'>(7.1)</a></div><div class='texpara'><div id='basic.align-7.1.sentence-1' class='sentence'>Two alignments are equal when their numeric values are equal<a class='hidden_link' href='#basic.align-7.1.sentence-1'>.</a></div></div></li><li id='basic.align-7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.align-7.2'>(7.2)</a></div><div class='texpara'><div id='basic.align-7.2.sentence-1' class='sentence'>Two alignments are different when their numeric values are not equal<a class='hidden_link' href='#basic.align-7.2.sentence-1'>.</a></div></div></li><li id='basic.align-7.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.align-7.3'>(7.3)</a></div><div class='texpara'><div id='basic.align-7.3.sentence-1' class='sentence'>When an alignment is larger than another it represents a stricter alignment<a class='hidden_link' href='#basic.align-7.3.sentence-1'>.</a></div></div></li></ul></div></div><div class='para nonNormativeOnly' id='basic.align-8'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3629'>#</a></div><div class='texpara'><div id='basic.align-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.align-note-3'>3</a></i>:&ensp;<div id='basic.align-8.sentence-1' class='sentence'>The runtime pointer alignment function (<a href='ptr.align' title='20.2.5&emsp;Pointer alignment'>[ptr.<span class='shy'></span>align]</a>)
can be used to obtain an aligned pointer within a buffer;
an <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.13.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier'><span class='textsf'><i >alignment-specifier</i></span></span></a> (<a href='dcl.align' title='9.13.2&emsp;Alignment specifier'>[dcl.<span class='shy'></span>align]</a>)
can be used to align storage explicitly<a class='hidden_link' href='#basic.align-8.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='basic.align-9'><div class='marginalizedparent'><a class='marginalized' href='#basic.align-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3637'>#</a></div><div class='texpara'><div id='basic.align-9.sentence-1' class='sentence'>If a request for a specific extended alignment in a specific context is not
supported by an implementation, the program is ill-formed<a class='hidden_link' href='#basic.align-9.sentence-1'>.</a></div></div></div></div><div id='basic.life' class='section'><h3 ><a class='secnum' href='#basic.life' style='min-width:80pt'>6.7.4</a> Lifetime <a class='abbr_ref' href='basic.life'>[basic.life]</a></h3><div class='para' id='basic.life-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3643'>#</a></div><div class='texpara'><div id='basic.life-1.sentence-1' class='sentence'>In this subclause, “before” and “after” refer to the “happens before”
relation (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)<a class='hidden_link' href='#basic.life-1.sentence-1'>.</a></div></div></div><div class='para' id='basic.life-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3647'>#</a></div><div class='texpara'><div id='basic.life-2.sentence-1' class='sentence'><a class='index' id=':object_lifetime'></a>The <a class='hidden_link' href='#def:lifetime' title='6.7.4&emsp;Lifetime&emsp;[basic.life]'><span id='def:lifetime'><i >lifetime</i></span></a> of an object or reference is a runtime property of the
object or reference<a class='hidden_link' href='#basic.life-2.sentence-1'>.</a></div> <div id='basic.life-2.sentence-2' class='sentence'>A variable is said to have <a class='hidden_link' href='#def:initialization,vacuous' title='6.7.4&emsp;Lifetime&emsp;[basic.life]'><span id='def:initialization,vacuous'><i >vacuous initialization</i></span></a>
if it is default-initialized, no other initialization is performed, and,
if it is of class type or a (possibly multidimensional) array thereof,
a trivial constructor of that class type is selected for
the default-initialization<a class='hidden_link' href='#basic.life-2.sentence-2'>.</a></div> <div id='basic.life-2.sentence-3' class='sentence'>The lifetime of an object of type <span class='texttt'>T</span> begins when:
<ul class='itemize'><li id='basic.life-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-2.1'>(2.1)</a></div>storage with the proper alignment and size
  for type <span class='texttt'>T</span> is obtained, and</li><li id='basic.life-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-2.2'>(2.2)</a></div>its initialization (if any) is complete
  (including vacuous initialization) (<a href='dcl.init' title='9.5&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>),</li></ul>
except that if the object is a union member or subobject thereof,
its lifetime only begins if that union member is the
initialized member in the union (<a href='dcl.init.aggr' title='9.5.2&emsp;Aggregates'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a>, <a href='class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>),
or as described in
<a href='class.union' title='11.5&emsp;Unions'>[class.<span class='shy'></span>union]</a>, <a href='class.copy.ctor' title='11.4.5.3&emsp;Copy/move constructors'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>, and <a href='class.copy.assign' title='11.4.6&emsp;Copy/move assignment operator'>[class.<span class='shy'></span>copy.<span class='shy'></span>assign]</a>,
and except as described in <a href='allocator.members' title='20.2.10.2&emsp;Members'>[allocator.<span class='shy'></span>members]</a><a class='hidden_link' href='#basic.life-2.sentence-3'>.</a></div> <div id='basic.life-2.sentence-4' class='sentence'>The lifetime of an object <i >o</i> of type <span class='texttt'>T</span> ends when:
<ul class='itemize'><li id='basic.life-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-2.3'>(2.3)</a></div>if <span class='texttt'>T</span> is a non-class type, the object is destroyed, or</li><li id='basic.life-2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-2.4'>(2.4)</a></div>if <span class='texttt'>T</span> is a class type, the destructor call starts, or</li><li id='basic.life-2.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-2.5'>(2.5)</a></div>the storage which the object occupies is released,
or is reused by an object that is not nested within <i >o</i> (<a href='#intro.object' title='6.7.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>)<a class='hidden_link' href='#basic.life-2.sentence-4'>.</a></li></ul></div> <div id='basic.life-2.sentence-5' class='sentence'>
When evaluating a <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_'><span class='textsf'><i >new-expression</i></span></span></a>,
storage is considered reused after it is returned from the allocation function,
but before the evaluation of the <a href='expr.new#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer'><span class='textsf'><i >new-initializer</i></span></span></a> (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>)<a class='hidden_link' href='#basic.life-2.sentence-5'>.</a></div> <div id='basic.life-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#basic.life-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> m;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  S x<span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>;
  <span class='keyword'>new</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span>x<span class='parenthesis'>)</span> S<span class='parenthesis'>(</span>x<span class='operator'>.</span>m<span class='parenthesis'>)</span>;   <span class='comment'>// undefined behavior</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='basic.life-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3692'>#</a></div><div class='texpara'><div id='basic.life-3.sentence-1' class='sentence'><a class='index' id=':reference_lifetime'></a>The lifetime of a reference begins when its initialization is complete<a class='hidden_link' href='#basic.life-3.sentence-1'>.</a></div> <div id='basic.life-3.sentence-2' class='sentence'>The lifetime of a reference ends as if it were a scalar object requiring storage<a class='hidden_link' href='#basic.life-3.sentence-2'>.</a></div></div></div><div class='para nonNormativeOnly' id='basic.life-4'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3697'>#</a></div><div class='texpara'><div id='basic.life-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.life-note-1'>1</a></i>:&ensp;<div id='basic.life-4.sentence-1' class='sentence'><a href='class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>
describes the lifetime of base and member subobjects<a class='hidden_link' href='#basic.life-4.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='basic.life-5'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3703'>#</a></div><div class='texpara'><div id='basic.life-5.sentence-1' class='sentence'>The properties ascribed to objects and references throughout this document
apply for a given object or reference only during its lifetime<a class='hidden_link' href='#basic.life-5.sentence-1'>.</a></div> <div id='basic.life-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.life-note-2'>2</a></i>:&ensp;<div id='basic.life-5.sentence-2' class='sentence'>In particular, before the lifetime of an object starts and after its
lifetime ends there are significant restrictions on the use of the
object, as described below, in <a href='class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>, and
in <a href='class.cdtor' title='11.9.5&emsp;Construction and destruction'>[class.<span class='shy'></span>cdtor]</a><a class='hidden_link' href='#basic.life-5.sentence-2'>.</a></div> <div id='basic.life-5.sentence-3' class='sentence'>Also, the behavior of an object under construction
and destruction can differ from the behavior of an object whose
lifetime has started and not ended<a class='hidden_link' href='#basic.life-5.sentence-3'>.</a></div> <div id='basic.life-5.sentence-4' class='sentence'><a href='class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>
and <a href='class.cdtor' title='11.9.5&emsp;Construction and destruction'>[class.<span class='shy'></span>cdtor]</a> describe the behavior of an object during its periods
of construction and destruction<a class='hidden_link' href='#basic.life-5.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='basic.life-6'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3717'>#</a></div><div class='texpara'><div id='basic.life-6.sentence-1' class='sentence'>A program may end the lifetime of an object of class type without invoking the
destructor, by reusing or releasing the storage as described above<a class='hidden_link' href='#basic.life-6.sentence-1'>.</a></div> <div id='basic.life-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.life-note-3'>3</a></i>:&ensp;<div id='basic.life-6.sentence-2' class='sentence'>A <a href='expr.delete#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression'><span class='textsf'><i >delete-expression</i></span></span></a> (<a href='expr.delete' title='7.6.2.9&emsp;Delete'>[expr.<span class='shy'></span>delete]</a>) invokes the destructor
prior to releasing the storage<a class='hidden_link' href='#basic.life-6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='basic.life-6.sentence-3' class='sentence'>
In this case, the destructor is not implicitly invoked<a class='hidden_link' href='#basic.life-6.sentence-3'>.</a></div> <div id='basic.life-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.life-note-4'>4</a></i>:&ensp;<div id='basic.life-6.sentence-4' class='sentence'>The correct behavior of a program often depends on
the destructor being invoked for each object of class type<a class='hidden_link' href='#basic.life-6.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='basic.life-7'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3730'>#</a></div><div class='texpara'><div id='basic.life-7.sentence-1' class='sentence'>Before the lifetime of an object has started but after the storage which
the object will occupy has been allocated<a class='footnoteref' href='#footnote-21' id='footnoteref-21' title='For example, before the dynamic initialization of an object with static storage duration ([basic.start.dynamic]).'>21</a>
or, after the lifetime of an object has ended and before the storage
which the object occupied is reused or released, any pointer that represents the address of
the storage location where the object will be or was located may be
used but only in limited ways<a class='hidden_link' href='#basic.life-7.sentence-1'>.</a></div> <div id='basic.life-7.sentence-2' class='sentence'>For an object under construction or destruction, see <a href='class.cdtor' title='11.9.5&emsp;Construction and destruction'>[class.<span class='shy'></span>cdtor]</a><a class='hidden_link' href='#basic.life-7.sentence-2'>.</a></div> <div id='basic.life-7.sentence-3' class='sentence'>Otherwise, such
a pointer refers to allocated
storage (<a href='#basic.stc.dynamic.allocation' title='6.7.6.5.2&emsp;Allocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>allocation]</a>), and using the pointer as
if the pointer were of type <span class='texttt'><span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span><span class='operator'>*</span></span> is
well-defined<a class='hidden_link' href='#basic.life-7.sentence-3'>.</a></div> <div id='basic.life-7.sentence-4' class='sentence'>Indirection through such a pointer is permitted but the resulting lvalue may only be used in
limited ways, as described below<a class='hidden_link' href='#basic.life-7.sentence-4'>.</a></div> <div id='basic.life-7.sentence-5' class='sentence'>The
program has undefined behavior if
<ul class='itemize'><li id='basic.life-7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-7.1'>(7.1)</a></div>the pointer is used as the operand of a <a href='expr.delete#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_'><span class='textsf'><i >delete-expression</i></span></span></a>,</li><li id='basic.life-7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-7.2'>(7.2)</a></div>the pointer is used to access a non-static data member or call a
  non-static member function of the object, or</li><li id='basic.life-7.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-7.3'>(7.3)</a></div>the pointer is implicitly converted (<a href='conv.ptr' title='7.3.12&emsp;Pointer conversions'>[conv.<span class='shy'></span>ptr]</a>) to a pointer
  to a virtual base class, or</li><li id='basic.life-7.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-7.4'>(7.4)</a></div>the pointer is used as the operand of a
  <span id=':static_cast'><span class='texttt'><span class='keyword'>static_<span class='shy'></span>cast</span></span></span> (<a href='expr.static.cast' title='7.6.1.9&emsp;Static cast'>[expr.<span class='shy'></span>static.<span class='shy'></span>cast]</a>), except when the conversion
  is to pointer to <span class='mathit'>cv</span> <span id=':void_'><span class='texttt'><span class='keyword'>void</span></span></span>, or to pointer to <span class='mathit'>cv</span> <span id=':void__'><span class='texttt'><span class='keyword'>void</span></span></span>
  and subsequently to pointer to
  <span class='mathit'>cv</span> <span id=':char_'><span class='texttt'><span class='keyword'>char</span></span></span>,
  <span class='mathit'>cv</span> <span class='texttt'><span id=':unsigned_'><span class='texttt'><span class='keyword'>unsigned</span></span></span> <span id=':char__'><span class='texttt'><span class='keyword'>char</span></span></span></span>, or
  <span class='mathit'>cv</span> <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> (<a href='cstddef.syn' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis'>[cstddef.<span class='shy'></span>syn]</a>), or</li><li id='basic.life-7.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-7.5'>(7.5)</a></div>the pointer is used as the operand of a
  <span id=':dynamic_cast'><span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span></span></span> (<a href='expr.dynamic.cast' title='7.6.1.7&emsp;Dynamic cast'>[expr.<span class='shy'></span>dynamic.<span class='shy'></span>cast]</a>)<a class='hidden_link' href='#basic.life-7.sentence-5'>.</a></li></ul></div> <div id='basic.life-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#basic.life-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>cstdlib<span class='anglebracket'>&gt;</span>

<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> mutate<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>virtual</span> <span class='operator'>~</span>B<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> D1 <span class='operator'>:</span> B <span class='curlybracket'>{</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D2 <span class='operator'>:</span> B <span class='curlybracket'>{</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;

<span class='keyword'>void</span> B<span class='operator'>::</span>mutate<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>new</span> <span class='parenthesis'>(</span><span class='keyword'>this</span><span class='parenthesis'>)</span> D2;    <span class='comment'>// reuses storage --- ends the lifetime of <span class='tcode_in_codeblock'>*this</span></span>
  f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// undefined behavior</span>
  <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='operator'>=</span> <span class='keyword'>this</span>;       <span class='comment'>// OK, <span id=':this'><span class='tcode_in_codeblock'>this</span></span> points to valid memory</span>
<span class='curlybracket'>}</span>

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>void</span><span class='operator'>*</span> p <span class='operator'>=</span> std<span class='operator'>::</span>malloc<span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>D1<span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>D2<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
  B<span class='operator'>*</span> pb <span class='operator'>=</span> <span class='keyword'>new</span> <span class='parenthesis'>(</span>p<span class='parenthesis'>)</span> D1;
  pb<span class='operator'>-</span><span class='anglebracket'>&gt;</span>mutate<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='operator'>*</span>pb;              <span class='comment'>// OK, <span class='tcode_in_codeblock'>pb</span> points to valid memory</span>
  <span class='keyword'>void</span><span class='operator'>*</span> q <span class='operator'>=</span> pb;     <span class='comment'>// OK, <span class='tcode_in_codeblock'>pb</span> points to valid memory</span>
  pb<span class='operator'>-</span><span class='anglebracket'>&gt;</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// undefined behavior: lifetime of <span class='tcode_in_codeblock'>*pb</span> has ended</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='basic.life-8'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3801'>#</a></div><div class='texpara'><div id='basic.life-8.sentence-1' class='sentence'>Similarly, before the lifetime of an object has started but after the
storage which the object will occupy has been allocated or, after the
lifetime of an object has ended and before the storage which the object
occupied is reused or released, any glvalue that refers to the original
object may be used but only in limited ways<a class='hidden_link' href='#basic.life-8.sentence-1'>.</a></div> <div id='basic.life-8.sentence-2' class='sentence'>For an object under construction or destruction, see <a href='class.cdtor' title='11.9.5&emsp;Construction and destruction'>[class.<span class='shy'></span>cdtor]</a><a class='hidden_link' href='#basic.life-8.sentence-2'>.</a></div> <div id='basic.life-8.sentence-3' class='sentence'>Otherwise, such
a glvalue refers to
allocated storage (<a href='#basic.stc.dynamic.allocation' title='6.7.6.5.2&emsp;Allocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>allocation]</a>), and using the
properties of the glvalue that do not depend on its value is
well-defined<a class='hidden_link' href='#basic.life-8.sentence-3'>.</a></div> <div id='basic.life-8.sentence-4' class='sentence'>The program has undefined behavior if
<ul class='itemize'><li id='basic.life-8.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-8.1'>(8.1)</a></div>the glvalue is used to access the object, or</li><li id='basic.life-8.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-8.2'>(8.2)</a></div>the glvalue is used to call a non-static member function of the object, or</li><li id='basic.life-8.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-8.3'>(8.3)</a></div>the glvalue is bound to a reference to a virtual base class (<a href='dcl.init.ref' title='9.5.4&emsp;References'>[dcl.<span class='shy'></span>init.<span class='shy'></span>ref]</a>), or</li><li id='basic.life-8.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-8.4'>(8.4)</a></div>the glvalue is used as the operand of a
<span id=':dynamic_cast_'><span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span></span></span> (<a href='expr.dynamic.cast' title='7.6.1.7&emsp;Dynamic cast'>[expr.<span class='shy'></span>dynamic.<span class='shy'></span>cast]</a>) or as the operand of
<span id=':typeid'><span class='texttt'><span class='keyword'>typeid</span></span></span><a class='hidden_link' href='#basic.life-8.sentence-4'>.</a></li></ul></div></div><div class='texpara'><div id='basic.life-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.life-note-5'>5</a></i>:&ensp;<div id='basic.life-8.sentence-5' class='sentence'>Therefore, undefined behavior results
if an object that is being constructed in one thread is referenced from another
thread without adequate synchronization<a class='hidden_link' href='#basic.life-8.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='basic.life-9'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3828'>#</a></div><div class='texpara'><div id='basic.life-9.sentence-1' class='sentence'>An object <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> is <a class='hidden_link' href='#def:transparently_replaceable' title='6.7.4&emsp;Lifetime&emsp;[basic.life]'><span id='def:transparently_replaceable'><i >transparently replaceable</i></span></a> by an object <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span> if
<ul class='itemize'><li id='basic.life-9.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-9.1'>(9.1)</a></div>the storage that <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span> occupies exactly overlays
the storage that <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> occupied, and</li><li id='basic.life-9.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-9.2'>(9.2)</a></div><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> and <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span> are of the same type
(ignoring the top-level cv-qualifiers), and</li><li id='basic.life-9.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-9.3'>(9.3)</a></div><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> is not a const, complete object, and</li><li id='basic.life-9.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-9.4'>(9.4)</a></div>neither <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> nor <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span>
is a potentially-overlapping subobject (<a href='#intro.object' title='6.7.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>), and</li><li id='basic.life-9.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.life-9.5'>(9.5)</a></div>either <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> and <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span> are both complete objects, or
<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> and <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span> are direct subobjects of objects <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> and <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span>, respectively,
and <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> is transparently replaceable by <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span><a class='hidden_link' href='#basic.life-9.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='basic.life-10'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3847'>#</a></div><div class='texpara'><div id='basic.life-10.sentence-1' class='sentence'>After the lifetime of an object has ended and before the storage which the
object occupied is reused or released, if a new object is created at the
storage location which the original object occupied and the original object was
transparently replaceable by the new object, a pointer that pointed to the
original object, a reference that referred to the original object, or the name
of the original object will automatically refer to the new object and, once the
lifetime of the new object has started, can be used to manipulate the new
object<a class='hidden_link' href='#basic.life-10.sentence-1'>.</a></div></div><div class='texpara'><div id='basic.life-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#basic.life-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i;
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>const</span> C<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span> <span class='keyword'>const</span> C<span class='operator'>&amp;</span> <span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>const</span> C<span class='operator'>&amp;</span> C<span class='operator'>::</span><span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span> <span class='keyword'>const</span> C<span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>if</span> <span class='parenthesis'>(</span> <span class='keyword'>this</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='operator'>&amp;</span>other <span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='operator'>~</span>C<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                 <span class='comment'>// lifetime of <span class='tcode_in_codeblock'>*this</span> ends</span>
    <span class='keyword'>new</span> <span class='parenthesis'>(</span><span class='keyword'>this</span><span class='parenthesis'>)</span> C<span class='parenthesis'>(</span>other<span class='parenthesis'>)</span>;        <span class='comment'>// new object of type <span class='tcode_in_codeblock'>C</span> created</span>
    f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                        <span class='comment'>// well-defined</span>
  <span class='curlybracket'>}</span>
  <span class='keyword'>return</span> <span class='operator'>*</span><span class='keyword'>this</span>;
<span class='curlybracket'>}</span>

C c1;
C c2;
c1 <span class='operator'>=</span> c2;                        <span class='comment'>// well-defined</span>
c1<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                         <span class='comment'>// well-defined; <span class='tcode_in_codeblock'>c1</span> refers to a new object of type <span class='tcode_in_codeblock'>C</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='basic.life-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.life-note-6'>6</a></i>:&ensp;<div id='basic.life-10.sentence-2' class='sentence'>If these conditions are not met,
a pointer to the new object can be obtained from
a pointer that represents the address of its storage
by calling <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>launder</span> (<a href='ptr.launder' title='17.6.5&emsp;Pointer optimization barrier'>[ptr.<span class='shy'></span>launder]</a>)<a class='hidden_link' href='#basic.life-10.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='basic.life-11'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3887'>#</a></div><div class='texpara'><div id='basic.life-11.sentence-1' class='sentence'>If a program ends the lifetime of an object of type <span class='texttt'>T</span> with
static (<a href='#basic.stc.static' title='6.7.6.2&emsp;Static storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>static]</a>), thread (<a href='#basic.stc.thread' title='6.7.6.3&emsp;Thread storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>thread]</a>),
or automatic (<a href='#basic.stc.auto' title='6.7.6.4&emsp;Automatic storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>auto]</a>)
storage duration and if <span class='texttt'>T</span> has a non-trivial destructor,<a class='footnoteref' href='#footnote-22' id='footnoteref-22' title='That is, an object for which a destructor will be called implicitly—upon exit from the block for an object with automatic storage duration, upon exit from the thread for an object with thread storage duration, or upon exit from the program for an object with static storage duration.'>22</a>
and another object of the original type does not occupy
that same storage location when the implicit destructor call takes
place, the behavior of the program is undefined<a class='hidden_link' href='#basic.life-11.sentence-1'>.</a></div> <div id='basic.life-11.sentence-2' class='sentence'>This is true
even if the block is exited with an exception<a class='hidden_link' href='#basic.life-11.sentence-2'>.</a></div> <div id='basic.life-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#basic.life-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> T <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='operator'>~</span>B<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  B b;
  <span class='keyword'>new</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span>b<span class='parenthesis'>)</span> T;
<span class='curlybracket'>}</span>                               <span class='comment'>// undefined behavior at block exit</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='basic.life-12'><div class='marginalizedparent'><a class='marginalized' href='#basic.life-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3918'>#</a></div><div class='texpara'><div id='basic.life-12.sentence-1' class='sentence'>Creating a new object within the storage that a const, complete
object with static, thread, or automatic storage duration occupies,
or within the storage that such a const object used to occupy before
its lifetime ended, results in undefined behavior<a class='hidden_link' href='#basic.life-12.sentence-1'>.</a></div> <div id='basic.life-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#basic.life-example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  B<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='operator'>~</span>B<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>const</span> B b;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  b<span class='operator'>.</span><span class='operator'>~</span>B<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>new</span> <span class='parenthesis'>(</span><span class='keyword'>const_cast</span><span class='anglebracket'>&lt;</span>B<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span>b<span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> B;     <span class='comment'>// undefined behavior</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> </div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-21'><div class='texpara'><a class='footnotenum' href='#footnote-21'>21)</a><a class='footnoteBacklink' href='#footnoteref-21'>21)</a> <div id='footnote-21.sentence-1' class='sentence'>For example, before the dynamic initialization of
an object with static storage duration (<a href='basic.start.dynamic' title='6.9.3.3&emsp;Dynamic initialization of non-block variables'>[basic.<span class='shy'></span>start.<span class='shy'></span>dynamic]</a>)<a class='hidden_link' href='#footnote-21.sentence-1'>.</a></div></div></div><div class='footnote' id='footnote-22'><div class='texpara'><a class='footnotenum' href='#footnote-22'>22)</a><a class='footnoteBacklink' href='#footnoteref-22'>22)</a> <div id='footnote-22.sentence-1' class='sentence'>That
is, an object for which a destructor will be called
implicitly—upon exit from the block for an object with
automatic storage duration, upon exit from the thread for an object with
thread storage duration, or upon exit from the program for an object
with static storage duration<a class='hidden_link' href='#footnote-22.sentence-1'>.</a></div></div></div></div><div id='basic.indet' class='section'><h3 ><a class='secnum' href='#basic.indet' style='min-width:80pt'>6.7.5</a> Indeterminate and erroneous values <a class='abbr_ref' href='basic.indet'>[basic.indet]</a></h3><div class='para' id='basic.indet-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.indet-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3942'>#</a></div><div class='texpara'><div id='basic.indet-1.sentence-1' class='sentence'>When storage for an object with automatic or dynamic storage duration
is obtained,
the bytes comprising the storage for the object
have the following initial value:
<ul class='itemize'><li id='basic.indet-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.indet-1.1'>(1.1)</a></div>If the object has dynamic storage duration, or
is the object associated with a variable or function parameter
whose first declaration is marked with
the <span class='texttt'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>indeterminate<span class='squarebracket'>]</span><span class='squarebracket'>]</span></span> attribute (<a href='dcl.attr.indet' title='9.13.6&emsp;Indeterminate storage'>[dcl.<span class='shy'></span>attr.<span class='shy'></span>indet]</a>),
the bytes have <a class='hidden_link' href='#def:value,indeterminate' title='6.7.5&emsp;Indeterminate and erroneous values&emsp;[basic.indet]'><span id='def:value,indeterminate'><i >indeterminate values</i></span></a>;</li><li id='basic.indet-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.indet-1.2'>(1.2)</a></div>otherwise, the bytes have <a class='hidden_link' href='#def:value,erroneous' title='6.7.5&emsp;Indeterminate and erroneous values&emsp;[basic.indet]'><span id='def:value,erroneous'><i >erroneous values</i></span></a>,
where each value is determined by the implementation
independently of the state of the program<a class='hidden_link' href='#basic.indet-1.sentence-1'>.</a></li></ul></div> <div id='basic.indet-1.sentence-2' class='sentence'>
If no initialization is performed for an object (including subobjects),
such a byte retains its initial value
until that value is replaced (<a href='dcl.init.general' title='9.5.1&emsp;General'>[dcl.<span class='shy'></span>init.<span class='shy'></span>general]</a>, <a href='expr.assign' title='7.6.19&emsp;Assignment and compound assignment operators'>[expr.<span class='shy'></span>assign]</a>)<a class='hidden_link' href='#basic.indet-1.sentence-2'>.</a></div> <div id='basic.indet-1.sentence-3' class='sentence'>If any bit in the value representation has an indeterminate value,
the object has an indeterminate value;
otherwise, if any bit in the value representation has an erroneous value,
the object has an erroneous value (<a href='conv.lval' title='7.3.2&emsp;Lvalue-to-rvalue conversion'>[conv.<span class='shy'></span>lval]</a>)<a class='hidden_link' href='#basic.indet-1.sentence-3'>.</a></div> <div id='basic.indet-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.indet-note-1'>1</a></i>:&ensp;<div id='basic.indet-1.sentence-4' class='sentence'>Objects with static or thread storage duration are zero-initialized,
see <a href='basic.start.static' title='6.9.3.2&emsp;Static initialization'>[basic.<span class='shy'></span>start.<span class='shy'></span>static]</a><a class='hidden_link' href='#basic.indet-1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='basic.indet-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.indet-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L3971'>#</a></div><div class='texpara'><div id='basic.indet-2.sentence-1' class='sentence'>Except in the following cases,
if an indeterminate value is produced by an evaluation,
the behavior is undefined, and
if an erroneous value is produced by an evaluation,
the behavior is erroneous and
the result of the evaluation is the value so produced but is not erroneous:
<ul class='itemize'><li id='basic.indet-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.indet-2.1'>(2.1)</a></div><div class='texpara'><div id='basic.indet-2.1.sentence-1' class='sentence'>If an indeterminate or erroneous value of
  unsigned ordinary character type (<a href='basic.fundamental' title='6.8.2&emsp;Fundamental types'>[basic.<span class='shy'></span>fundamental]</a>)
  or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type (<a href='cstddef.syn' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis'>[cstddef.<span class='shy'></span>syn]</a>)
  is produced by the evaluation of:
  <ul class='itemize'><li id='basic.indet-2.1.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#basic.indet-2.1.1'>(2.1.1)</a></div>the second or third operand of a <a href='expr.cond' title='7.6.16&emsp;Conditional operator&emsp;[expr.cond]'>conditional expression</a>,</li><li id='basic.indet-2.1.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#basic.indet-2.1.2'>(2.1.2)</a></div>the right operand of a <a href='expr.comma' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'>comma expression</a>,</li><li id='basic.indet-2.1.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#basic.indet-2.1.3'>(2.1.3)</a></div>the operand of a cast or conversion (<a href='conv.integral' title='7.3.9&emsp;Integral conversions'>[conv.<span class='shy'></span>integral]</a>, <a href='expr.type.conv' title='7.6.1.4&emsp;Explicit type conversion (functional notation)'>[expr.<span class='shy'></span>type.<span class='shy'></span>conv]</a>, <a href='expr.static.cast' title='7.6.1.9&emsp;Static cast'>[expr.<span class='shy'></span>static.<span class='shy'></span>cast]</a>, <a href='expr.cast' title='7.6.3&emsp;Explicit type conversion (cast notation)'>[expr.<span class='shy'></span>cast]</a>)
    to an unsigned ordinary character type
    or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type (<a href='cstddef.syn' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis'>[cstddef.<span class='shy'></span>syn]</a>), or</li><li id='basic.indet-2.1.4'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#basic.indet-2.1.4'>(2.1.4)</a></div>a <a href='expr.context#def:discarded-value_expression' title='7.2.3&emsp;Context dependence&emsp;[expr.context]'>discarded-value expression</a>,</li></ul>
  then the result of the operation is an indeterminate value or
  that erroneous value, respectively<a class='hidden_link' href='#basic.indet-2.1.sentence-1'>.</a></div></div></li><li id='basic.indet-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.indet-2.2'>(2.2)</a></div><div class='texpara'><div id='basic.indet-2.2.sentence-1' class='sentence'>If an indeterminate or erroneous value of
  unsigned ordinary character type or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type
  is produced by the evaluation of
  the right operand of a simple assignment operator (<a href='expr.assign' title='7.6.19&emsp;Assignment and compound assignment operators'>[expr.<span class='shy'></span>assign]</a>)
  whose first operand is an lvalue of
  unsigned ordinary character type or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type,
  an indeterminate value or that erroneous value, respectively, replaces
  the value of the object referred to by the left operand<a class='hidden_link' href='#basic.indet-2.2.sentence-1'>.</a></div></div></li><li id='basic.indet-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.indet-2.3'>(2.3)</a></div><div class='texpara'><div id='basic.indet-2.3.sentence-1' class='sentence'>If an indeterminate or erroneous value of unsigned ordinary character type
  is produced by the evaluation of the initialization expression
  when initializing an object of unsigned ordinary character type,
  that object is initialized to an indeterminate
  value or that erroneous value, respectively<a class='hidden_link' href='#basic.indet-2.3.sentence-1'>.</a></div></div></li><li id='basic.indet-2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.indet-2.4'>(2.4)</a></div><div class='texpara'><div id='basic.indet-2.4.sentence-1' class='sentence'>If an indeterminate value of
  unsigned ordinary character type or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type
  is produced by the evaluation of the initialization expression
  when initializing an object of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type,
  that object is initialized to an indeterminate value or
  that erroneous value, respectively<a class='hidden_link' href='#basic.indet-2.4.sentence-1'>.</a></div></div></li></ul></div> <div id='basic.indet-2.sentence-2' class='sentence'>
Converting an indeterminate or erroneous value of
unsigned ordinary character type or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span> type
produces an indeterminate or erroneous value, respectively<a class='hidden_link' href='#basic.indet-2.sentence-2'>.</a></div> <div id='basic.indet-2.sentence-3' class='sentence'>In the latter case,
the result of the conversion is the value of the converted operand<a class='hidden_link' href='#basic.indet-2.sentence-3'>.</a></div> <div id='basic.indet-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#basic.indet-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>bool</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>unsigned</span> <span class='keyword'>char</span> <span class='operator'>*</span>c <span class='operator'>=</span> <span class='keyword'>new</span> <span class='keyword'>unsigned</span> <span class='keyword'>char</span>;
  <span class='keyword'>unsigned</span> <span class='keyword'>char</span> d <span class='operator'>=</span> <span class='operator'>*</span>c;         <span class='comment'>// OK, <span class='tcode_in_codeblock'>d</span> has an indeterminate value</span>
  <span class='keyword'>int</span> e <span class='operator'>=</span> d;                    <span class='comment'>// undefined behavior</span>
  <span class='keyword'>return</span> b <span class='operator'>?</span> d <span class='operator'>:</span> <span class='literal'>0</span>;             <span class='comment'>// undefined behavior if <span class='tcode_in_codeblock'>b</span> is <span class='tcode_in_codeblock'>true</span></span>
<span class='curlybracket'>}</span>

<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>bool</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>unsigned</span> <span class='keyword'>char</span> c;
  <span class='keyword'>unsigned</span> <span class='keyword'>char</span> d <span class='operator'>=</span> c;          <span class='comment'>// no erroneous behavior, but <span class='tcode_in_codeblock'>d</span> has an erroneous value</span>

  assert<span class='parenthesis'>(</span>c <span class='operator'>=</span><span class='operator'>=</span> d<span class='parenthesis'>)</span>;               <span class='comment'>// holds, both integral promotions have erroneous behavior</span>

  <span class='keyword'>int</span> e <span class='operator'>=</span> d;                    <span class='comment'>// erroneous behavior</span>
  <span class='keyword'>return</span> b <span class='operator'>?</span> d <span class='operator'>:</span> <span class='literal'>0</span>;             <span class='comment'>// erroneous behavior if <span class='tcode_in_codeblock'>b</span> is <span class='tcode_in_codeblock'>true</span></span>
<span class='curlybracket'>}</span>

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> d1, d2;

  <span class='keyword'>int</span> e1 <span class='operator'>=</span> d1;                  <span class='comment'>// erroneous behavior</span>
  <span class='keyword'>int</span> e2 <span class='operator'>=</span> d1;                  <span class='comment'>// erroneous behavior</span>

  assert<span class='parenthesis'>(</span>e1 <span class='operator'>=</span><span class='operator'>=</span> e2<span class='parenthesis'>)</span>;             <span class='comment'>// holds</span>
  assert<span class='parenthesis'>(</span>e1 <span class='operator'>=</span><span class='operator'>=</span> d1<span class='parenthesis'>)</span>;             <span class='comment'>// holds, erroneous behavior</span>
  assert<span class='parenthesis'>(</span>e2 <span class='operator'>=</span><span class='operator'>=</span> d1<span class='parenthesis'>)</span>;             <span class='comment'>// holds, erroneous behavior</span>

  std<span class='operator'>::</span>memcpy<span class='parenthesis'>(</span><span class='operator'>&amp;</span>d2, <span class='operator'>&amp;</span>d1, <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;   <span class='comment'>// no erroneous behavior, but <span class='tcode_in_codeblock'>d2</span> has an erroneous value</span>
  assert<span class='parenthesis'>(</span>e1 <span class='operator'>=</span><span class='operator'>=</span> d2<span class='parenthesis'>)</span>;             <span class='comment'>// holds, erroneous behavior</span>
  assert<span class='parenthesis'>(</span>e2 <span class='operator'>=</span><span class='operator'>=</span> d2<span class='parenthesis'>)</span>;             <span class='comment'>// holds, erroneous behavior</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='basic.stc' class='section'><h3 ><a class='secnum' href='#basic.stc' style='min-width:80pt'>6.7.6</a> Storage duration <a class='abbr_ref' href='basic.stc'>[basic.stc]</a></h3><div id='basic.stc.general' class='section'><h4 ><a class='secnum' href='#basic.stc.general' style='min-width:95pt'>6.7.6.1</a> General <a class='abbr_ref' href='basic.stc.general'>[basic.stc.general]</a></h4><div class='para' id='basic.stc.general-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4067'>#</a></div><div class='texpara'><div id='basic.stc.general-1.sentence-1' class='sentence'><a class='index' id=':storage_duration'></a>The <a class='hidden_link' href='#def:storage_duration' title='6.7.6.1&emsp;General&emsp;[basic.stc.general]'><span id='def:storage_duration'><i >storage duration</i></span></a> is the property of an object that defines the minimum
potential lifetime of the storage containing the object<a class='hidden_link' href='#basic.stc.general-1.sentence-1'>.</a></div> <div id='basic.stc.general-1.sentence-3' class='sentence'>The storage
duration is determined by the construct used to create the object and is
one of the following:
<ul class='itemize'><li id='basic.stc.general-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.stc.general-1.1'>(1.1)</a></div>static storage duration</li><li id='basic.stc.general-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.stc.general-1.2'>(1.2)</a></div>thread storage duration</li><li id='basic.stc.general-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.stc.general-1.3'>(1.3)</a></div>automatic storage duration</li><li id='basic.stc.general-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.stc.general-1.4'>(1.4)</a></div>dynamic storage duration</li></ul>
<div id='basic.stc.general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.stc.general-note-1'>1</a></i>:&ensp;<div id='basic.stc.general-1.sentence-2' class='sentence'>After the duration of a region of storage has ended,
the use of pointers to that region of storage is limited (<a href='basic.compound' title='6.8.4&emsp;Compound types'>[basic.<span class='shy'></span>compound]</a>)<a class='hidden_link' href='#basic.stc.general-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='basic.stc.general-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4084'>#</a></div><div class='texpara'><div id='basic.stc.general-2.sentence-1' class='sentence'><a class='index' id=':storage_duration,static'></a><a class='index' id=':storage_duration,thread'></a><a class='index' id=':storage_duration,automatic'></a><a class='index' id=':storage_duration,dynamic'></a>Static, thread, and automatic storage durations are associated with objects
introduced by declarations (<a href='basic.def' title='6.2&emsp;Declarations and definitions'>[basic.<span class='shy'></span>def]</a>) and
with temporary objects (<a href='#class.temporary' title='6.7.7&emsp;Temporary objects'>[class.<span class='shy'></span>temporary]</a>)<a class='hidden_link' href='#basic.stc.general-2.sentence-1'>.</a></div> <div id='basic.stc.general-2.sentence-2' class='sentence'>The dynamic storage duration
is associated with objects created by a
<a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression__'><span class='textsf'><i >new-expression</i></span></span></a> (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>) or
with implicitly created objects (<a href='#intro.object' title='6.7.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>)<a class='hidden_link' href='#basic.stc.general-2.sentence-2'>.</a></div></div></div><div class='para' id='basic.stc.general-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4097'>#</a></div><div class='texpara'><div id='basic.stc.general-3.sentence-1' class='sentence'>The storage duration categories apply to references as well<a class='hidden_link' href='#basic.stc.general-3.sentence-1'>.</a></div></div></div><div class='para' id='basic.stc.general-4'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4100'>#</a></div><div class='texpara'><div id='basic.stc.general-4.sentence-1' class='sentence'><a class='index' id=':storage_duration,class_member'></a>The storage duration of subobjects and reference members
is that of their complete object (<a href='#intro.object' title='6.7.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>)<a class='hidden_link' href='#basic.stc.general-4.sentence-1'>.</a></div> </div></div></div><div id='basic.stc.static' class='section'><h4 ><a class='secnum' href='#basic.stc.static' style='min-width:95pt'>6.7.6.2</a> Static storage duration <a class='abbr_ref' href='basic.stc.static'>[basic.stc.static]</a></h4><div class='para' id='basic.stc.static-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.static-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4108'>#</a></div><div class='texpara'><div id='basic.stc.static-1.sentence-1' class='sentence'>All variables which
<ul class='itemize'><li id='basic.stc.static-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.stc.static-1.1'>(1.1)</a></div>do not have thread storage duration and</li><li id='basic.stc.static-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.stc.static-1.2'>(1.2)</a></div>belong to a namespace scope (<a href='basic.scope.namespace' title='6.4.6&emsp;Namespace scope'>[basic.<span class='shy'></span>scope.<span class='shy'></span>namespace]</a>) or
are first declared with
the <span id=':static'><span class='texttt'><span class='keyword'>static</span></span></span> or <span id=':extern'><span class='texttt'><span class='keyword'>extern</span></span></span> keywords (<a href='dcl.stc' title='9.2.2&emsp;Storage class specifiers'>[dcl.<span class='shy'></span>stc]</a>)</li></ul>
have <a class='hidden_link' href='#def:storage_duration,static' title='6.7.6.2&emsp;Static storage duration&emsp;[basic.stc.static]'><span id='def:storage_duration,static'><i >static storage duration</i></span></a><a class='hidden_link' href='#basic.stc.static-1.sentence-1'>.</a></div> <div id='basic.stc.static-1.sentence-2' class='sentence'>The storage for these entities lasts for the duration of the
program (<a href='basic.start.static' title='6.9.3.2&emsp;Static initialization'>[basic.<span class='shy'></span>start.<span class='shy'></span>static]</a>, <a href='basic.start.term' title='6.9.3.4&emsp;Termination'>[basic.<span class='shy'></span>start.<span class='shy'></span>term]</a>)<a class='hidden_link' href='#basic.stc.static-1.sentence-2'>.</a></div></div></div><div class='para' id='basic.stc.static-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.static-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4122'>#</a></div><div class='texpara'><div id='basic.stc.static-2.sentence-1' class='sentence'>If a variable with static storage duration has initialization or a
destructor with side effects, it shall not be eliminated even if it
appears to be unused, except that a class object or its copy/move may be
eliminated as specified in <a href='class.copy.elision' title='11.9.6&emsp;Copy/move elision'>[class.<span class='shy'></span>copy.<span class='shy'></span>elision]</a><a class='hidden_link' href='#basic.stc.static-2.sentence-1'>.</a></div></div></div><div class='para nonNormativeOnly' id='basic.stc.static-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.static-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4128'>#</a></div><div class='texpara'><div id='basic.stc.static-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.stc.static-note-1'>1</a></i>:&ensp;<div id='basic.stc.static-3.sentence-1' class='sentence'><a class='index' id=':object,local_static'></a>The keyword <span id=':static_'><span class='texttt'><span class='keyword'>static</span></span></span> can be used to declare
a block variable (<a href='basic.scope.block' title='6.4.3&emsp;Block scope'>[basic.<span class='shy'></span>scope.<span class='shy'></span>block]</a>) with static storage duration;
<a href='stmt.dcl' title='8.9&emsp;Declaration statement'>[stmt.<span class='shy'></span>dcl]</a> and <a href='basic.start.term' title='6.9.3.4&emsp;Termination'>[basic.<span class='shy'></span>start.<span class='shy'></span>term]</a> describe the
initialization and destruction of such variables<a class='hidden_link' href='#basic.stc.static-3.sentence-1'>.</a></div> <div id='basic.stc.static-3.sentence-2' class='sentence'><a class='index' id=':member,class_static'></a>The keyword <span id=':static__'><span class='texttt'><span class='keyword'>static</span></span></span> applied to
a class data member in a class definition
gives the data member static storage duration (<a href='class.static.data' title='11.4.9.3&emsp;Static data members'>[class.<span class='shy'></span>static.<span class='shy'></span>data]</a>)<a class='hidden_link' href='#basic.stc.static-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='basic.stc.thread' class='section'><h4 ><a class='secnum' href='#basic.stc.thread' style='min-width:95pt'>6.7.6.3</a> Thread storage duration <a class='abbr_ref' href='basic.stc.thread'>[basic.stc.thread]</a></h4><div class='para' id='basic.stc.thread-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.thread-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4143'>#</a></div><div class='texpara'><div id='basic.stc.thread-1.sentence-1' class='sentence'>All variables declared with the <span id=':thread_local'><span class='texttt'><span class='keyword'>thread_<span class='shy'></span>local</span></span></span> keyword have
<a class='hidden_link' href='#def:storage_duration,thread' title='6.7.6.3&emsp;Thread storage duration&emsp;[basic.stc.thread]'><span id='def:storage_duration,thread'><i >thread storage duration</i></span></a><a class='hidden_link' href='#basic.stc.thread-1.sentence-1'>.</a></div> <div id='basic.stc.thread-1.sentence-2' class='sentence'>The storage for these entities lasts for the duration of
the thread in which they are created<a class='hidden_link' href='#basic.stc.thread-1.sentence-2'>.</a></div> <div id='basic.stc.thread-1.sentence-3' class='sentence'>There is a distinct object or reference
per thread, and use of the declared name refers to the entity associated with
the current thread<a class='hidden_link' href='#basic.stc.thread-1.sentence-3'>.</a></div></div></div><div class='para nonNormativeOnly' id='basic.stc.thread-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.thread-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4151'>#</a></div><div class='texpara'><div id='basic.stc.thread-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.stc.thread-note-1'>1</a></i>:&ensp;<div id='basic.stc.thread-2.sentence-1' class='sentence'>A variable with thread storage duration is initialized as specified
in <a href='basic.start.static' title='6.9.3.2&emsp;Static initialization'>[basic.<span class='shy'></span>start.<span class='shy'></span>static]</a>, <a href='basic.start.dynamic' title='6.9.3.3&emsp;Dynamic initialization of non-block variables'>[basic.<span class='shy'></span>start.<span class='shy'></span>dynamic]</a>, and <a href='stmt.dcl' title='8.9&emsp;Declaration statement'>[stmt.<span class='shy'></span>dcl]</a>
and, if constructed, is destroyed on thread exit (<a href='basic.start.term' title='6.9.3.4&emsp;Termination'>[basic.<span class='shy'></span>start.<span class='shy'></span>term]</a>)<a class='hidden_link' href='#basic.stc.thread-2.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='basic.stc.auto' class='section'><h4 ><a class='secnum' href='#basic.stc.auto' style='min-width:95pt'>6.7.6.4</a> Automatic storage duration <a class='abbr_ref' href='basic.stc.auto'>[basic.stc.auto]</a></h4><div class='para' id='basic.stc.auto-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.auto-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4160'>#</a></div><div class='texpara'><div id='basic.stc.auto-1.sentence-1' class='sentence'><a class='index' id=':storage_duration,local_object'></a>Variables that belong to a block scope and are
not explicitly declared <span id=':static___'><span class='texttt'><span class='keyword'>static</span></span></span>, <span id=':thread_local_'><span class='texttt'><span class='keyword'>thread_<span class='shy'></span>local</span></span></span>, or <span id=':extern_'><span class='texttt'><span class='keyword'>extern</span></span></span> have
<a class='hidden_link' href='#def:storage_duration,automatic' title='6.7.6.4&emsp;Automatic storage duration&emsp;[basic.stc.auto]'><span id='def:storage_duration,automatic'><i >automatic storage duration</i></span></a><a class='hidden_link' href='#basic.stc.auto-1.sentence-1'>.</a></div> <div id='basic.stc.auto-1.sentence-2' class='sentence'>The storage
for such variables lasts until the block in which they are created exits<a class='hidden_link' href='#basic.stc.auto-1.sentence-2'>.</a></div> <div id='basic.stc.auto-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.stc.auto-note-1'>1</a></i>:&ensp;<div id='basic.stc.auto-1.sentence-3' class='sentence'>These variables are initialized and destroyed as described in <a href='stmt.dcl' title='8.9&emsp;Declaration statement'>[stmt.<span class='shy'></span>dcl]</a><a class='hidden_link' href='#basic.stc.auto-1.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='basic.stc.auto-1.sentence-4' class='sentence'>
Variables that belong to a parameter scope also have automatic storage duration<a class='hidden_link' href='#basic.stc.auto-1.sentence-4'>.</a></div> <div id='basic.stc.auto-1.sentence-5' class='sentence'>The storage for a function parameter lasts until
immediately after its destruction (<a href='expr.call' title='7.6.1.3&emsp;Function call'>[expr.<span class='shy'></span>call]</a>)<a class='hidden_link' href='#basic.stc.auto-1.sentence-5'>.</a></div></div></div><div class='para' id='basic.stc.auto-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.auto-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4173'>#</a></div><div class='texpara'><div id='basic.stc.auto-2.sentence-1' class='sentence'>If a variable with automatic storage duration has initialization or a destructor with side
effects, an implementation shall not destroy it before the end of its block
nor eliminate it as an optimization, even if it appears to be
unused, except that a class object or its copy/move may be eliminated as
specified in <a href='class.copy.elision' title='11.9.6&emsp;Copy/move elision'>[class.<span class='shy'></span>copy.<span class='shy'></span>elision]</a><a class='hidden_link' href='#basic.stc.auto-2.sentence-1'>.</a></div></div></div></div><div id='basic.stc.dynamic' class='section'><h4 ><a class='secnum' href='#basic.stc.dynamic' style='min-width:95pt'>6.7.6.5</a> Dynamic storage duration <a class='abbr_ref' href='basic.stc.dynamic'>[basic.stc.dynamic]</a></h4><div id='basic.stc.dynamic.general' class='section'><h4 ><a class='secnum' href='#basic.stc.dynamic.general' style='min-width:110pt'>6.7.6.5.1</a> General <a class='abbr_ref' href='basic.stc.dynamic.general'>[basic.stc.dynamic.general]</a></h4><div class='texpara'><a class='index' id=':storage_duration,dynamic_'></a></div><div class='para' id='basic.stc.dynamic.general-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4185'>#</a></div><div class='texpara'><div id='basic.stc.dynamic.general-1.sentence-1' class='sentence'>Objects can be created dynamically during <a href='intro.execution' title='6.9.1&emsp;Sequential execution&emsp;[intro.execution]'>program
execution</a>, using
<a class='index' id=':new__'></a><a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression___'><span class='textsf'><i >new-expression</i></span></span></a><i >s</i> (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>), and destroyed using
<a class='index' id=':delete'></a><a href='expr.delete#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression__'><span class='textsf'><i >delete-expression</i></span></span></a><i >s</i> (<a href='expr.delete' title='7.6.2.9&emsp;Delete'>[expr.<span class='shy'></span>delete]</a>)<a class='hidden_link' href='#basic.stc.dynamic.general-1.sentence-1'>.</a></div> <div id='basic.stc.dynamic.general-1.sentence-2' class='sentence'>A C++ implementation
provides access to, and management of, dynamic storage via
the global <a class='hidden_link' href='#def:allocation_function' title='6.7.6.5.1&emsp;General&emsp;[basic.stc.dynamic.general]'><span id='def:allocation_function'><i >allocation functions</i></span></a>
<span class='texttt'><span id=':operator__'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':new___'><span class='texttt'><span class='keyword'>new</span></span></span></span> and
<span class='texttt'><span id=':operator___'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':new____'><span class='texttt'><span class='keyword'>new</span></span></span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> and
the global <a class='hidden_link' href='#def:deallocation_function' title='6.7.6.5.1&emsp;General&emsp;[basic.stc.dynamic.general]'><span id='def:deallocation_function'><i >deallocation functions</i></span></a>
<span class='texttt'><span id=':operator____'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':delete_'><span class='texttt'><span class='keyword'>delete</span></span></span></span> and
<span class='texttt'><span id=':operator_____'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':delete__'><span class='texttt'><span class='keyword'>delete</span></span></span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#basic.stc.dynamic.general-1.sentence-2'>.</a></div> <div id='basic.stc.dynamic.general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.stc.dynamic.general-note-1'>1</a></i>:&ensp;<div id='basic.stc.dynamic.general-1.sentence-3' class='sentence'>The non-allocating forms described in <a href='new.delete.placement' title='17.6.3.4&emsp;Non-allocating forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>placement]</a>
do not perform allocation or deallocation<a class='hidden_link' href='#basic.stc.dynamic.general-1.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='basic.stc.dynamic.general-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4204'>#</a></div><div class='texpara'><div id='basic.stc.dynamic.general-2.sentence-1' class='sentence'>The library provides default definitions for the global allocation and
deallocation functions<a class='hidden_link' href='#basic.stc.dynamic.general-2.sentence-1'>.</a></div> <div id='basic.stc.dynamic.general-2.sentence-2' class='sentence'>Some global allocation and deallocation
functions are replaceable (<a href='dcl.fct.def.replace' title='9.6.5&emsp;Replaceable function definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>replace]</a>)<a class='hidden_link' href='#basic.stc.dynamic.general-2.sentence-2'>.</a></div> <div id='basic.stc.dynamic.general-2.sentence-3' class='sentence'>The following allocation and deallocation functions (<a href='support.dynamic' title='17.6&emsp;Dynamic memory management'>[support.<span class='shy'></span>dynamic]</a>)
are implicitly declared in global scope in each translation unit of a
program<a class='hidden_link' href='#basic.stc.dynamic.general-2.sentence-3'>.</a></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t<span class='parenthesis'>)</span>;
<span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t, std<span class='operator'>::</span>align_val_t<span class='parenthesis'>)</span>;

<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span>, std<span class='operator'>::</span>size_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span>, std<span class='operator'>::</span>align_val_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span>, std<span class='operator'>::</span>size_t, std<span class='operator'>::</span>align_val_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

<span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t<span class='parenthesis'>)</span>;
<span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t, std<span class='operator'>::</span>align_val_t<span class='parenthesis'>)</span>;

<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span>, std<span class='operator'>::</span>size_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span>, std<span class='operator'>::</span>align_val_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span>, std<span class='operator'>::</span>size_t, std<span class='operator'>::</span>align_val_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</span></div><div class='texpara'><div id='basic.stc.dynamic.general-2.sentence-4' class='sentence'>These implicit declarations introduce only the function names
<span class='texttt'><span id=':operator______'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':new_____'><span class='texttt'><span class='keyword'>new</span></span></span></span>,
<span class='texttt'><span id=':operator_______'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':new______'><span class='texttt'><span class='keyword'>new</span></span></span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>,
<span class='texttt'><span id=':operator________'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':delete___'><span class='texttt'><span class='keyword'>delete</span></span></span></span>, and
<span class='texttt'><span id=':operator_________'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':delete____'><span class='texttt'><span class='keyword'>delete</span></span></span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#basic.stc.dynamic.general-2.sentence-4'>.</a></div> <div id='basic.stc.dynamic.general-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.stc.dynamic.general-note-2'>2</a></i>:&ensp;<div id='basic.stc.dynamic.general-2.sentence-5' class='sentence'>The implicit declarations do not introduce
the names <span class='texttt'>std</span>,
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span>,
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>align_<span class='shy'></span>val_<span class='shy'></span>t</span>,
or any other names that the library uses to
declare these names<a class='hidden_link' href='#basic.stc.dynamic.general-2.sentence-5'>.</a></div> <div id='basic.stc.dynamic.general-2.sentence-6' class='sentence'>Thus, a <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression____'><span class='textsf'><i >new-expression</i></span></span></a>,
<a href='expr.delete#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression___'><span class='textsf'><i >delete-expression</i></span></span></a>, or function call that refers to one of
these functions without importing or including the header <a href='support.dynamic.general#header:%3cnew%3e' title='17.6.1&emsp;General&emsp;[support.dynamic.general]'><span id='headerref:<new>'><span class='texttt'>&lt;new&gt;</span></span></a>
or importing a C++ library module (<a href='std.modules' title='16.4.2.4&emsp;Modules'>[std.<span class='shy'></span>modules]</a>)
is well-formed<a class='hidden_link' href='#basic.stc.dynamic.general-2.sentence-6'>.</a></div> <div id='basic.stc.dynamic.general-2.sentence-7' class='sentence'>However, referring to <span class='texttt'>std</span>
or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span>
or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>align_<span class='shy'></span>val_<span class='shy'></span>t</span>
is ill-formed unless
a standard library declaration (<a href='cstddef.syn' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis'>[cstddef.<span class='shy'></span>syn]</a>, <a href='new.syn' title='17.6.2&emsp;Header &lt;new&gt; synopsis'>[new.<span class='shy'></span>syn]</a>, <a href='std.modules' title='16.4.2.4&emsp;Modules'>[std.<span class='shy'></span>modules]</a>)
of that name precedes (<a href='basic.lookup.general' title='6.5.1&emsp;General'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>general]</a>) the use of that name<a class='hidden_link' href='#basic.stc.dynamic.general-2.sentence-7'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='basic.stc.dynamic.general-2.sentence-8' class='sentence'>
Allocation and/or
deallocation functions may also be declared and defined for any
class (<a href='class.free' title='11.4.11&emsp;Allocation and deallocation functions'>[class.<span class='shy'></span>free]</a>)<a class='hidden_link' href='#basic.stc.dynamic.general-2.sentence-8'>.</a></div></div></div><div class='para' id='basic.stc.dynamic.general-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4256'>#</a></div><div class='texpara'><div id='basic.stc.dynamic.general-3.sentence-1' class='sentence'>If the behavior of an allocation or deallocation function
does not satisfy the semantic constraints
specified in <a href='#basic.stc.dynamic.allocation' title='6.7.6.5.2&emsp;Allocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>allocation]</a>
and <a href='#basic.stc.dynamic.deallocation' title='6.7.6.5.3&emsp;Deallocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>deallocation]</a>,
the behavior is undefined<a class='hidden_link' href='#basic.stc.dynamic.general-3.sentence-1'>.</a></div></div><div class='texpara'></div></div></div><div id='basic.stc.dynamic.allocation' class='section'><h4 ><a class='secnum' href='#basic.stc.dynamic.allocation' style='min-width:110pt'>6.7.6.5.2</a> Allocation functions <a class='abbr_ref' href='basic.stc.dynamic.allocation'>[basic.stc.dynamic.allocation]</a></h4><div class='para' id='basic.stc.dynamic.allocation-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.allocation-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4267'>#</a></div><div class='texpara'><div id='basic.stc.dynamic.allocation-1.sentence-1' class='sentence'><a class='index' id=':function,allocation'></a>An allocation function that is not a class member function
shall belong to the global scope and not have a name with internal linkage<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-1'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-2' class='sentence'>The return type shall be <span class='texttt'><span id=':void___'><span class='texttt'><span class='keyword'>void</span></span></span><span class='operator'>*</span></span><a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-2'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-3' class='sentence'>The first
parameter shall have type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span> (<a href='support.types' title='17.2&emsp;Common definitions'>[support.<span class='shy'></span>types]</a>)<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-3'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-4' class='sentence'>The
first parameter shall not have an associated default
argument (<a href='dcl.fct.default' title='9.3.4.7&emsp;Default arguments'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>default]</a>)<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-4'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-5' class='sentence'>The value of the first parameter
is interpreted as the requested size of the allocation<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-5'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-6' class='sentence'>An allocation
function can be a function template<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-6'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-7' class='sentence'>Such a template shall declare its
return type and first parameter as specified above (that is, template
parameter types shall not be used in the return type and first parameter
type)<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-7'>.</a></div> <div id='basic.stc.dynamic.allocation-1.sentence-8' class='sentence'>Allocation function templates shall have two or more parameters<a class='hidden_link' href='#basic.stc.dynamic.allocation-1.sentence-8'>.</a></div></div></div><div class='para' id='basic.stc.dynamic.allocation-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.allocation-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4281'>#</a></div><div class='texpara'><div id='basic.stc.dynamic.allocation-2.sentence-1' class='sentence'>An allocation function attempts to allocate the requested amount of
storage<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-1'>.</a></div> <div id='basic.stc.dynamic.allocation-2.sentence-2' class='sentence'>If it is successful, it returns the address of the start
of a block of storage whose length in bytes is at least as large
as the requested size<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-2'>.</a></div> <div id='basic.stc.dynamic.allocation-2.sentence-3' class='sentence'>The order,
contiguity, and initial value of storage allocated by successive calls
to an allocation function are unspecified<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-3'>.</a></div> <div id='basic.stc.dynamic.allocation-2.sentence-4' class='sentence'>Even if the size of the space
requested is zero, the request can fail<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-4'>.</a></div> <div id='basic.stc.dynamic.allocation-2.sentence-5' class='sentence'>If the request succeeds, the
value returned by a replaceable allocation function
is a non-null pointer value (<a href='basic.compound' title='6.8.4&emsp;Compound types'>[basic.<span class='shy'></span>compound]</a>)
<span class='texttt'>p0</span> different from any previously returned value <span class='texttt'>p1</span>,
unless that value <span class='texttt'>p1</span> was subsequently passed to a
replaceable deallocation function<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-5'>.</a></div> <div id='basic.stc.dynamic.allocation-2.sentence-6' class='sentence'>Furthermore, for the library allocation functions
in <a href='new.delete.single' title='17.6.3.2&emsp;Single-object forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>single]</a> and <a href='new.delete.array' title='17.6.3.3&emsp;Array forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>array]</a>,
<span class='texttt'>p0</span> represents the address of a block of storage disjoint from the storage
for any other object accessible to the caller<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-6'>.</a></div> <div id='basic.stc.dynamic.allocation-2.sentence-7' class='sentence'>The effect of indirecting through a pointer
returned from a request for zero size is undefined<a class='hidden_link' href='#basic.stc.dynamic.allocation-2.sentence-7'>.</a><a class='footnoteref' href='#footnote-23' id='footnoteref-23' title='The intent is to have operator new() implementable by calling std&#x200b;::&#x200b;malloc() or std&#x200b;::&#x200b;calloc(), so the rules are substantially the same. C++ differs from C in requiring a zero request to return a non-null pointer.'>23</a></div></div></div><div class='para' id='basic.stc.dynamic.allocation-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.allocation-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4310'>#</a></div><div class='texpara'><div id='basic.stc.dynamic.allocation-3.sentence-1' class='sentence'>For an allocation function other than
a reserved placement allocation function (<a href='new.delete.placement' title='17.6.3.4&emsp;Non-allocating forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>placement]</a>),
the pointer returned on a successful call
shall represent the address of storage that is aligned as follows:
<ul class='itemize'><li id='basic.stc.dynamic.allocation-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.stc.dynamic.allocation-3.1'>(3.1)</a></div><div class='texpara'><div id='basic.stc.dynamic.allocation-3.1.sentence-1' class='sentence'>If the allocation function takes an argument
  of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>align_<span class='shy'></span>val_<span class='shy'></span>t</span>,
  the storage will have the alignment specified
  by the value of this argument<a class='hidden_link' href='#basic.stc.dynamic.allocation-3.1.sentence-1'>.</a></div></div></li><li id='basic.stc.dynamic.allocation-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.stc.dynamic.allocation-3.2'>(3.2)</a></div><div class='texpara'><div id='basic.stc.dynamic.allocation-3.2.sentence-1' class='sentence'>Otherwise, if the allocation function is named <span class='texttt'><span id=':operator___________'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':new________'><span class='texttt'><span class='keyword'>new</span></span></span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>,
  the storage is aligned for any object that
  does not have new-extended alignment (<a href='#basic.align' title='6.7.3&emsp;Alignment'>[basic.<span class='shy'></span>align]</a>) and
  is no larger than the requested size<a class='hidden_link' href='#basic.stc.dynamic.allocation-3.2.sentence-1'>.</a></div></div></li><li id='basic.stc.dynamic.allocation-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.stc.dynamic.allocation-3.3'>(3.3)</a></div><div class='texpara'><div id='basic.stc.dynamic.allocation-3.3.sentence-1' class='sentence'>Otherwise, the storage is aligned for any object that
  does not have new-extended alignment and is of the requested size<a class='hidden_link' href='#basic.stc.dynamic.allocation-3.3.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='basic.stc.dynamic.allocation-4'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.allocation-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4331'>#</a></div><div class='texpara'><div id='basic.stc.dynamic.allocation-4.sentence-1' class='sentence'>An allocation function that fails to allocate storage can invoke the
currently installed new-handler function (<a href='new.handler' title='17.6.4.3&emsp;Type new_&shy;handler'>[new.<span class='shy'></span>handler]</a>), if any<a class='hidden_link' href='#basic.stc.dynamic.allocation-4.sentence-1'>.</a></div> <div id='basic.stc.dynamic.allocation-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.stc.dynamic.allocation-note-1'>1</a></i>:&ensp;<div id='basic.stc.dynamic.allocation-4.sentence-2' class='sentence'><a class='index' id=':new_handler'></a>A program-supplied allocation function can obtain the
currently installed <span class='texttt'>new_<span class='shy'></span>handler</span> using the
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>get_<span class='shy'></span>new_<span class='shy'></span>handler</span> function (<a href='get.new.handler' title='17.6.4.5&emsp;get_&shy;new_&shy;handler'>[get.<span class='shy'></span>new.<span class='shy'></span>handler]</a>)<a class='hidden_link' href='#basic.stc.dynamic.allocation-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='basic.stc.dynamic.allocation-4.sentence-3' class='sentence'>
An allocation function that has a non-throwing
exception specification (<a href='except.spec' title='14.5&emsp;Exception specifications'>[except.<span class='shy'></span>spec]</a>)
indicates failure by returning
a null pointer value<a class='hidden_link' href='#basic.stc.dynamic.allocation-4.sentence-3'>.</a></div> <div id='basic.stc.dynamic.allocation-4.sentence-4' class='sentence'>Any other allocation function
never returns a null pointer value and
indicates failure only by throwing an exception (<a href='except.throw' title='14.2&emsp;Throwing an exception'>[except.<span class='shy'></span>throw]</a>) of a type
that would match a handler (<a href='except.handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>) of type
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>bad_<span class='shy'></span>alloc</span> (<a href='bad.alloc' title='17.6.4.1&emsp;Class bad_&shy;alloc'>[bad.<span class='shy'></span>alloc]</a>)<a class='hidden_link' href='#basic.stc.dynamic.allocation-4.sentence-4'>.</a></div></div></div><div class='para' id='basic.stc.dynamic.allocation-5'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.allocation-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4350'>#</a></div><div class='texpara'><div id='basic.stc.dynamic.allocation-5.sentence-1' class='sentence'>A global allocation function is only called as the result of a <a href='expr.new' title='7.6.2.8&emsp;New&emsp;[expr.new]'>new
expression</a>, or called directly using the <a href='expr.call' title='7.6.1.3&emsp;Function call&emsp;[expr.call]'>function call</a>
syntax, or called indirectly to allocate storage for
a coroutine state (<a href='dcl.fct.def.coroutine' title='9.6.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>),
or called indirectly through calls to the
functions in the C++ standard library<a class='hidden_link' href='#basic.stc.dynamic.allocation-5.sentence-1'>.</a></div> <div id='basic.stc.dynamic.allocation-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.stc.dynamic.allocation-note-2'>2</a></i>:&ensp;<div id='basic.stc.dynamic.allocation-5.sentence-2' class='sentence'>In particular, a
global allocation function is not called to allocate storage
for objects with static storage duration (<a href='#basic.stc.static' title='6.7.6.2&emsp;Static storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>static]</a>),
for objects or references with thread storage duration (<a href='#basic.stc.thread' title='6.7.6.3&emsp;Thread storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>thread]</a>),
for objects of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>type_<span class='shy'></span>info</span> (<a href='expr.typeid' title='7.6.1.8&emsp;Type identification'>[expr.<span class='shy'></span>typeid]</a>),
for an object of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>contracts<span class='operator'>&#x200b;::&#x200b;</span>contract_<span class='shy'></span>violation</span>
when a contract violation occurs (<a href='basic.contract.eval' title='6.10.2&emsp;Evaluation'>[basic.<span class='shy'></span>contract.<span class='shy'></span>eval]</a>), or
for an exception object (<a href='except.throw' title='14.2&emsp;Throwing an exception'>[except.<span class='shy'></span>throw]</a>)<a class='hidden_link' href='#basic.stc.dynamic.allocation-5.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-23'><div class='texpara'><a class='footnotenum' href='#footnote-23'>23)</a><a class='footnoteBacklink' href='#footnoteref-23'>23)</a> <div id='footnote-23.sentence-1' class='sentence'>The intent is
to have <span class='texttt'><span id=':operator__________'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':new_______'><span class='texttt'><span class='keyword'>new</span></span></span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> implementable by
calling <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>malloc<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>calloc<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, so the rules are
substantially the same<a class='hidden_link' href='#footnote-23.sentence-1'>.</a></div> <div id='footnote-23.sentence-2' class='sentence'>C++ differs from C in requiring a zero request
to return a non-null pointer<a class='hidden_link' href='#footnote-23.sentence-2'>.</a></div></div></div></div><div id='basic.stc.dynamic.deallocation' class='section'><h4 ><a class='secnum' href='#basic.stc.dynamic.deallocation' style='min-width:110pt'>6.7.6.5.3</a> Deallocation functions <a class='abbr_ref' href='basic.stc.dynamic.deallocation'>[basic.stc.dynamic.deallocation]</a></h4><div class='para' id='basic.stc.dynamic.deallocation-1'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.deallocation-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4370'>#</a></div><div class='texpara'><div id='basic.stc.dynamic.deallocation-1.sentence-1' class='sentence'><a class='index' id=':function,deallocation'></a>A deallocation function that is not a class member function
shall belong to the global scope and not have a name with internal linkage<a class='hidden_link' href='#basic.stc.dynamic.deallocation-1.sentence-1'>.</a></div></div></div><div class='para' id='basic.stc.dynamic.deallocation-2'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.deallocation-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4375'>#</a></div><div class='texpara'><div id='basic.stc.dynamic.deallocation-2.sentence-1' class='sentence'>A deallocation function
is a <a class='hidden_link' href='#def:operator_delete,destroying' title='6.7.6.5.3&emsp;Deallocation functions&emsp;[basic.stc.dynamic.deallocation]'><span id='def:operator_delete,destroying'><i >destroying operator delete</i></span></a>
if it has at least two parameters
and its second parameter
is of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>destroying_<span class='shy'></span>delete_<span class='shy'></span>t</span><a class='hidden_link' href='#basic.stc.dynamic.deallocation-2.sentence-1'>.</a></div> <div id='basic.stc.dynamic.deallocation-2.sentence-2' class='sentence'>A destroying operator delete
shall be a class member function named <span class='texttt'><span id=':operator______________'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':delete______'><span class='texttt'><span class='keyword'>delete</span></span></span></span><a class='hidden_link' href='#basic.stc.dynamic.deallocation-2.sentence-2'>.</a></div> <div id='basic.stc.dynamic.deallocation-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#basic.stc.dynamic.deallocation-note-1'>1</a></i>:&ensp;<div id='basic.stc.dynamic.deallocation-2.sentence-3' class='sentence'>Array deletion cannot use a destroying operator delete<a class='hidden_link' href='#basic.stc.dynamic.deallocation-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='basic.stc.dynamic.deallocation-3'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.deallocation-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4387'>#</a></div><div class='texpara'><div id='basic.stc.dynamic.deallocation-3.sentence-1' class='sentence'><a class='index' id=':delete,overloading_and'></a>Each deallocation function shall return <span id=':void______'><span class='texttt'><span class='keyword'>void</span></span></span><a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-1'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-2' class='sentence'>If the function is a destroying operator delete
declared in class type <span class='texttt'>C</span>,
the type of its first parameter shall be <span class='texttt'>C<span class='operator'>*</span></span>;
otherwise, the type of its first
parameter shall be <span class='texttt'><span id=':void_______'><span class='texttt'><span class='keyword'>void</span></span></span><span class='operator'>*</span></span><a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-2'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-3' class='sentence'>A deallocation function may have more
than one parameter<a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-3'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-4' class='sentence'><a class='index' id=':deallocation_function,usual'></a>A <a class='hidden_link' href='#def:usual_deallocation_function' title='6.7.6.5.3&emsp;Deallocation functions&emsp;[basic.stc.dynamic.deallocation]'><span id='def:usual_deallocation_function'><i >usual deallocation function</i></span></a> is a deallocation function
whose parameters after the first are
<ul class='itemize'><li id='basic.stc.dynamic.deallocation-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.stc.dynamic.deallocation-3.1'>(3.1)</a></div>optionally, a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>destroying_<span class='shy'></span>delete_<span class='shy'></span>t</span>, then</li><li id='basic.stc.dynamic.deallocation-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.stc.dynamic.deallocation-3.2'>(3.2)</a></div>optionally, a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span>,<a class='footnoteref' href='#footnote-24' id='footnoteref-24' title='The global operator delete(void*, std&#x200b;::&#x200b;size_&shy;t) precludes use of an allocation function void operator new(std&#x200b;::&#x200b;size_&shy;t, std&#x200b;::&#x200b;size_&shy;t) as a placement allocation function ([diff.cpp11.basic]).'>24</a>
then</li><li id='basic.stc.dynamic.deallocation-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#basic.stc.dynamic.deallocation-3.3'>(3.3)</a></div>optionally, a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>align_<span class='shy'></span>val_<span class='shy'></span>t</span><a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-4'>.</a></li></ul></div> <div id='basic.stc.dynamic.deallocation-3.sentence-5' class='sentence'>
A destroying operator delete shall be a usual deallocation function<a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-5'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-6' class='sentence'>A deallocation function may be an instance of a function
template<a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-6'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-7' class='sentence'>Neither the first parameter nor the return type shall depend
on a template parameter<a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-7'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-8' class='sentence'>A deallocation
function template shall have two or more function parameters<a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-8'>.</a></div> <div id='basic.stc.dynamic.deallocation-3.sentence-9' class='sentence'>A template
instance is never a usual deallocation function, regardless of its
signature<a class='hidden_link' href='#basic.stc.dynamic.deallocation-3.sentence-9'>.</a></div></div></div><div class='para' id='basic.stc.dynamic.deallocation-4'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.deallocation-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4423'>#</a></div><div class='texpara'><div id='basic.stc.dynamic.deallocation-4.sentence-1' class='sentence'>If a deallocation function terminates by throwing an exception, the behavior is undefined<a class='hidden_link' href='#basic.stc.dynamic.deallocation-4.sentence-1'>.</a></div> <div id='basic.stc.dynamic.deallocation-4.sentence-2' class='sentence'>The value of the first argument supplied to a deallocation function may
be a null pointer value; if so, and if the deallocation function is one
supplied in the standard library, the call has no effect<a class='hidden_link' href='#basic.stc.dynamic.deallocation-4.sentence-2'>.</a></div></div></div><div class='para' id='basic.stc.dynamic.deallocation-5'><div class='marginalizedparent'><a class='marginalized' href='#basic.stc.dynamic.deallocation-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4429'>#</a></div><div class='texpara'><div id='basic.stc.dynamic.deallocation-5.sentence-1' class='sentence'>If the argument given to a deallocation function in the standard library
is a pointer that is not the null pointer value (<a href='basic.compound' title='6.8.4&emsp;Compound types'>[basic.<span class='shy'></span>compound]</a>), the
deallocation function shall deallocate the storage referenced by the
pointer, ending the duration of the region of storage<a class='hidden_link' href='#basic.stc.dynamic.deallocation-5.sentence-1'>.</a></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-24'><div class='texpara'><a class='footnotenum' href='#footnote-24'>24)</a><a class='footnoteBacklink' href='#footnoteref-24'>24)</a> <div id='footnote-24.sentence-1' class='sentence'>The global <span class='texttt'><span id=':operator____________'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':delete_____'><span class='texttt'><span class='keyword'>delete</span></span></span><span class='parenthesis'>(</span><span id=':void____'><span class='texttt'><span class='keyword'>void</span></span></span><span class='operator'>*</span>, std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t<span class='parenthesis'>)</span></span>
precludes use of an
allocation function <span class='texttt'><span id=':void_____'><span class='texttt'><span class='keyword'>void</span></span></span> <span id=':operator_____________'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':new_________'><span class='texttt'><span class='keyword'>new</span></span></span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t, std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t<span class='parenthesis'>)</span></span> as a placement
allocation function (<a href='diff.cpp11.basic' title='C.5.3&emsp;[basic]: basics'>[diff.<span class='shy'></span>cpp11.<span class='shy'></span>basic]</a>)<a class='hidden_link' href='#footnote-24.sentence-1'>.</a></div></div></div></div></div></div><div id='class.temporary' class='section'><h3 ><a class='secnum' href='#class.temporary' style='min-width:80pt'>6.7.7</a> Temporary objects <a class='abbr_ref' href='class.temporary'>[class.temporary]</a></h3><div class='para' id='class.temporary-1'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4437'>#</a></div><div class='texpara'><div id='class.temporary-1.sentence-1' class='sentence'><a class='index' id=':temporary'></a><a class='index' id=':temporary,elimination_of'></a><a class='index' id=':temporary,implementation-defined_generation_of'></a>A <a class='hidden_link' href='#def:object,temporary' title='6.7.7&emsp;Temporary objects&emsp;[class.temporary]'><span id='def:object,temporary'><i >temporary object</i></span></a> is an object created
<ul class='itemize'><li id='class.temporary-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-1.1'>(1.1)</a></div>when a prvalue is converted to an xvalue (<a href='conv.rval' title='7.3.5&emsp;Temporary materialization conversion'>[conv.<span class='shy'></span>rval]</a>) and</li><li id='class.temporary-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-1.2'>(1.2)</a></div>when needed by the implementation to pass or return an object of suitable type (see below)<a class='hidden_link' href='#class.temporary-1.sentence-1'>.</a></li></ul></div> <div id='class.temporary-1.sentence-2' class='sentence'>
Even when the creation of the temporary object is
unevaluated (<a href='expr.context' title='7.2.3&emsp;Context dependence'>[expr.<span class='shy'></span>context]</a>),
all the semantic restrictions shall be respected as if the temporary object
had been created and later destroyed<a class='hidden_link' href='#class.temporary-1.sentence-2'>.</a></div> <div id='class.temporary-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.temporary-note-1'>1</a></i>:&ensp;<div id='class.temporary-1.sentence-3' class='sentence'>This includes accessibility (<a href='class.access' title='11.8&emsp;Member access control'>[class.<span class='shy'></span>access]</a>) and whether it is deleted,
for the constructor selected and for the destructor<a class='hidden_link' href='#class.temporary-1.sentence-3'>.</a></div> <div id='class.temporary-1.sentence-4' class='sentence'>However, in the special
case of the operand of a
<a href='dcl.type.decltype#nt:decltype-specifier' title='9.2.9.6&emsp;Decltype specifiers&emsp;[dcl.type.decltype]'><span id='ntref:decltype-specifier'><span class='textsf'><i >decltype-specifier</i></span></span></a> (<a href='dcl.type.decltype' title='9.2.9.6&emsp;Decltype specifiers'>[dcl.<span class='shy'></span>type.<span class='shy'></span>decltype]</a>), no temporary is introduced,
so the foregoing does not apply to such a prvalue<a class='hidden_link' href='#class.temporary-1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='class.temporary-2'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4461'>#</a></div><div class='texpara'><div id='class.temporary-2.sentence-1' class='sentence'>The materialization of a temporary object is generally
delayed as long as possible
in order to avoid creating unnecessary temporary objects<a class='hidden_link' href='#class.temporary-2.sentence-1'>.</a></div> <div id='class.temporary-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.temporary-note-2'>2</a></i>:&ensp;<div id='class.temporary-2.sentence-2' class='sentence'>Temporary objects are materialized:
<ul class='itemize'><li id='class.temporary-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-2.1'>(2.1)</a></div>when binding a reference to a prvalue (<a href='dcl.init.ref' title='9.5.4&emsp;References'>[dcl.<span class='shy'></span>init.<span class='shy'></span>ref]</a>, <a href='expr.type.conv' title='7.6.1.4&emsp;Explicit type conversion (functional notation)'>[expr.<span class='shy'></span>type.<span class='shy'></span>conv]</a>, <a href='expr.dynamic.cast' title='7.6.1.7&emsp;Dynamic cast'>[expr.<span class='shy'></span>dynamic.<span class='shy'></span>cast]</a>, <a href='expr.static.cast' title='7.6.1.9&emsp;Static cast'>[expr.<span class='shy'></span>static.<span class='shy'></span>cast]</a>, <a href='expr.const.cast' title='7.6.1.11&emsp;Const cast'>[expr.<span class='shy'></span>const.<span class='shy'></span>cast]</a>, <a href='expr.cast' title='7.6.3&emsp;Explicit type conversion (cast notation)'>[expr.<span class='shy'></span>cast]</a>),</li><li id='class.temporary-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-2.2'>(2.2)</a></div>when performing certain member accesses on a class prvalue (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>, <a href='expr.mptr.oper' title='7.6.4&emsp;Pointer-to-member operators'>[expr.<span class='shy'></span>mptr.<span class='shy'></span>oper]</a>),</li><li id='class.temporary-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-2.3'>(2.3)</a></div>when invoking an implicit object member function on a class prvalue (<a href='expr.call' title='7.6.1.3&emsp;Function call'>[expr.<span class='shy'></span>call]</a>),</li><li id='class.temporary-2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-2.4'>(2.4)</a></div>when performing an array-to-pointer conversion or subscripting on an array prvalue (<a href='conv.array' title='7.3.3&emsp;Array-to-pointer conversion'>[conv.<span class='shy'></span>array]</a>, <a href='expr.sub' title='7.6.1.2&emsp;Subscripting'>[expr.<span class='shy'></span>sub]</a>),</li><li id='class.temporary-2.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-2.5'>(2.5)</a></div>when initializing an object of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_<span class='shy'></span>list<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> from a <a href='dcl.init.general#nt:braced-init-list' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list'><span class='textsf'><i >braced-init-list</i></span></span></a> (<a href='dcl.init.list' title='9.5.5&emsp;List-initialization'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>),</li><li id='class.temporary-2.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-2.6'>(2.6)</a></div>for certain unevaluated operands (<a href='expr.typeid' title='7.6.1.8&emsp;Type identification'>[expr.<span class='shy'></span>typeid]</a>, <a href='expr.sizeof' title='7.6.2.5&emsp;Sizeof'>[expr.<span class='shy'></span>sizeof]</a>), and</li><li id='class.temporary-2.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-2.7'>(2.7)</a></div>when a prvalue that has type other than <span class='mathit'>cv</span> <span id=':void________'><span class='texttt'><span class='keyword'>void</span></span></span> appears as a discarded-value expression (<a href='expr.context' title='7.2.3&emsp;Context dependence'>[expr.<span class='shy'></span>context]</a>)<a class='hidden_link' href='#class.temporary-2.sentence-2'>.</a></li></ul></div> —&nbsp;<i>end note</i>]</div></div> <div id='class.temporary-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.temporary-example-1'>1</a></i>:&ensp;<div id='class.temporary-2.sentence-3' class='sentence'>Consider the following code:
<span class='codeblock'><span class='keyword'>class</span> X <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  X<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  X<span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
  X<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
  <span class='operator'>~</span>X<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  Y<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  Y<span class='parenthesis'>(</span>Y<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
  <span class='operator'>~</span>Y<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

X f<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span>;
Y g<span class='parenthesis'>(</span>Y<span class='parenthesis'>)</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  X a<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;
  X b <span class='operator'>=</span> f<span class='parenthesis'>(</span>X<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
  Y c <span class='operator'>=</span> g<span class='parenthesis'>(</span>Y<span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
  a <span class='operator'>=</span> f<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div></div><div class='texpara'><div id='class.temporary-2.sentence-4' class='sentence'><a class='index' id=':constructor,copy'></a><span class='texttt'>X<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span></span> is constructed in the space used to hold <span class='texttt'>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>'s argument and
<span class='texttt'>Y<span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span></span> is constructed in the space used to hold <span class='texttt'>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>'s argument<a class='hidden_link' href='#class.temporary-2.sentence-4'>.</a></div> <div id='class.temporary-2.sentence-5' class='sentence'>Likewise,
<span class='texttt'>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>'s result is constructed directly in <span class='texttt'>b</span> and
<span class='texttt'>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>'s result is constructed directly in <span class='texttt'>c</span><a class='hidden_link' href='#class.temporary-2.sentence-5'>.</a></div> <div id='class.temporary-2.sentence-6' class='sentence'>On the other hand, the expression
<span class='texttt'>a <span class='operator'>=</span> f<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span></span>
requires a temporary for
the result of <span class='texttt'>f<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span></span>,
which is materialized so that the reference parameter
of <span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='parenthesis'>)</span></span> can bind to it<a class='hidden_link' href='#class.temporary-2.sentence-6'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.temporary-3'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4529'>#</a></div><div class='texpara'><div id='class.temporary-3.sentence-1' class='sentence'>When an object of class type <span class='texttt'>X</span>
is passed to or returned from a potentially-evaluated function call,
if <span class='texttt'>X</span> is
<ul class='itemize'><li id='class.temporary-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-3.1'>(3.1)</a></div>a scalar type or</li><li id='class.temporary-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-3.2'>(3.2)</a></div>a class type that
has at least one eligible copy or move constructor (<a href='special' title='11.4.4&emsp;Special member functions'>[special]</a>),
where each such constructor is trivial,
and the destructor of <span class='texttt'>X</span> is either trivial or deleted,</li></ul>
implementations are permitted
to create temporary objects
to hold the function parameter or result object,
as follows:
<ul class='itemize'><li id='class.temporary-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-3.3'>(3.3)</a></div><div class='texpara'><div id='class.temporary-3.3.sentence-1' class='sentence'>The first such temporary object
is constructed from the function argument or return value, respectively<a class='hidden_link' href='#class.temporary-3.3.sentence-1'>.</a></div></div></li><li id='class.temporary-3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-3.4'>(3.4)</a></div><div class='texpara'><div id='class.temporary-3.4.sentence-1' class='sentence'>Each successive temporary object
is initialized from the previous one
as if by direct-initialization if <span class='texttt'>X</span> is a scalar type,
otherwise by using an eligible trivial constructor<a class='hidden_link' href='#class.temporary-3.4.sentence-1'>.</a></div></div></li><li id='class.temporary-3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-3.5'>(3.5)</a></div><div class='texpara'><div id='class.temporary-3.5.sentence-1' class='sentence'>The function parameter or return object is initialized
from the final temporary
as if by direct-initialization if <span class='texttt'>X</span> is a scalar type,
otherwise by using an eligible trivial constructor<a class='hidden_link' href='#class.temporary-3.5.sentence-1'>.</a></div></div></li></ul></div> <div id='class.temporary-3.sentence-2' class='sentence'>
(In all cases, the eligible constructor is used
even if that constructor is inaccessible
or would not be selected by overload resolution
to perform a copy or move of the object)<a class='hidden_link' href='#class.temporary-3.sentence-2'>.</a></div> <div id='class.temporary-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.temporary-note-3'>3</a></i>:&ensp;<div id='class.temporary-3.sentence-3' class='sentence'>This latitude is granted to allow objects
to be passed to or returned from functions in registers<a class='hidden_link' href='#class.temporary-3.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='class.temporary-4'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4570'>#</a></div><div class='texpara'><div id='class.temporary-4.sentence-1' class='sentence'><a class='index' id=':temporary,constructor_for'></a><a class='index' id=':temporary,destructor_for'></a><a class='index' id=':temporary,destruction_of'></a>Temporary objects are destroyed as the last step
in evaluating
the full-expression (<a href='intro.execution' title='6.9.1&emsp;Sequential execution'>[intro.<span class='shy'></span>execution]</a>)
that (lexically) contains the point where
they were created<a class='hidden_link' href='#class.temporary-4.sentence-1'>.</a></div> <div id='class.temporary-4.sentence-2' class='sentence'>This is true even if that evaluation ends in throwing an exception<a class='hidden_link' href='#class.temporary-4.sentence-2'>.</a></div> <div id='class.temporary-4.sentence-3' class='sentence'>The
<a class='index' id=':value_computation'></a>value computations and
<a class='index' id=':side_effects'></a>side effects of destroying a temporary object
are associated only with the full-expression, not with any specific
subexpression<a class='hidden_link' href='#class.temporary-4.sentence-3'>.</a></div></div></div><div class='para' id='class.temporary-5'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4588'>#</a></div><div class='texpara'><div id='class.temporary-5.sentence-1' class='sentence'><a class='index' id=':initializer,temporary_and_declarator'></a><a class='index' id=':temporary,order_of_destruction_of'></a>There are five contexts in which temporaries are destroyed at a different
point than the end of the full-expression<a class='hidden_link' href='#class.temporary-5.sentence-1'>.</a></div> <div id='class.temporary-5.sentence-2' class='sentence'>The first context is when a default constructor is called to initialize
an element of an array with no corresponding initializer (<a href='dcl.init' title='9.5&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#class.temporary-5.sentence-2'>.</a></div> <div id='class.temporary-5.sentence-3' class='sentence'>The second context is when a copy constructor is called to copy an element of
an array while the entire array is copied (<a href='expr.prim.lambda.capture' title='7.5.6.3&emsp;Captures'>[expr.<span class='shy'></span>prim.<span class='shy'></span>lambda.<span class='shy'></span>capture]</a>, <a href='class.copy.ctor' title='11.4.5.3&emsp;Copy/move constructors'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>)<a class='hidden_link' href='#class.temporary-5.sentence-3'>.</a></div> <div id='class.temporary-5.sentence-4' class='sentence'>In either case, if the constructor has one or more default arguments,
the destruction of every temporary created in a default argument is
sequenced before the construction of the next array element, if any<a class='hidden_link' href='#class.temporary-5.sentence-4'>.</a></div></div></div><div class='para' id='class.temporary-6'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4601'>#</a></div><div class='texpara'><div id='class.temporary-6.sentence-1' class='sentence'>The third context is when a reference binds to a temporary object<a class='hidden_link' href='#class.temporary-6.sentence-1'>.</a><a class='footnoteref' href='#footnote-25' id='footnoteref-25' title='The same rules apply to initialization of an initializer_&shy;list object ([dcl.init.list]) with its underlying temporary array.'>25</a></div> <div id='class.temporary-6.sentence-2' class='sentence'>
The temporary object to which the reference is bound or the temporary object
that is the complete object of a subobject to which the reference is bound
persists for the lifetime of the reference if the glvalue
to which the reference is bound
was obtained through one of the following:
<ul class='itemize'><li id='class.temporary-6.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-6.1'>(6.1)</a></div>a temporary materialization conversion (<a href='conv.rval' title='7.3.5&emsp;Temporary materialization conversion'>[conv.<span class='shy'></span>rval]</a>),</li><li id='class.temporary-6.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-6.2'>(6.2)</a></div><span class='texttt'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression'><span class='textsf'><i >expression</i></span></span></a> <span class='texttt'><span class='parenthesis'>)</span></span>,
  where <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression_'><span class='textsf'><i >expression</i></span></span></a> is one of these expressions,</li><li id='class.temporary-6.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-6.3'>(6.3)</a></div>subscripting (<a href='expr.sub' title='7.6.1.2&emsp;Subscripting'>[expr.<span class='shy'></span>sub]</a>) of an array operand,
  where that operand is one of these expressions,</li><li id='class.temporary-6.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-6.4'>(6.4)</a></div>a class member access (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>) using the <span class='texttt'><span class='operator'>.</span></span> operator
  where the left operand is one of these expressions and
  the right operand designates a non-static data member of non-reference type,</li><li id='class.temporary-6.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-6.5'>(6.5)</a></div>a pointer-to-member operation (<a href='expr.mptr.oper' title='7.6.4&emsp;Pointer-to-member operators'>[expr.<span class='shy'></span>mptr.<span class='shy'></span>oper]</a>) using the <span class='texttt'><span class='operator'>.</span><span class='operator'>*</span></span> operator
  where the left operand is one of these expressions and
  the right operand is a pointer to data member of non-reference type,</li><li id='class.temporary-6.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-6.6'>(6.6)</a></div>a
  <ul class='itemize'><li id='class.temporary-6.6.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#class.temporary-6.6.1'>(6.6.1)</a></div><span id=':const_cast'><span class='texttt'><span class='keyword'>const_<span class='shy'></span>cast</span></span></span> (<a href='expr.const.cast' title='7.6.1.11&emsp;Const cast'>[expr.<span class='shy'></span>const.<span class='shy'></span>cast]</a>),</li><li id='class.temporary-6.6.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#class.temporary-6.6.2'>(6.6.2)</a></div><span id=':static_cast_'><span class='texttt'><span class='keyword'>static_<span class='shy'></span>cast</span></span></span> (<a href='expr.static.cast' title='7.6.1.9&emsp;Static cast'>[expr.<span class='shy'></span>static.<span class='shy'></span>cast]</a>),</li><li id='class.temporary-6.6.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#class.temporary-6.6.3'>(6.6.3)</a></div><span id=':dynamic_cast__'><span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span></span></span> (<a href='expr.dynamic.cast' title='7.6.1.7&emsp;Dynamic cast'>[expr.<span class='shy'></span>dynamic.<span class='shy'></span>cast]</a>), or</li><li id='class.temporary-6.6.4'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#class.temporary-6.6.4'>(6.6.4)</a></div><span id=':reinterpret_cast'><span class='texttt'><span class='keyword'>reinterpret_<span class='shy'></span>cast</span></span></span> (<a href='expr.reinterpret.cast' title='7.6.1.10&emsp;Reinterpret cast'>[expr.<span class='shy'></span>reinterpret.<span class='shy'></span>cast]</a>)</li></ul>
  converting, without a user-defined conversion,
  a glvalue operand that is one of these expressions
  to a glvalue that refers
  to the object designated by the operand, or
  to its complete object or a subobject thereof,</li><li id='class.temporary-6.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-6.7'>(6.7)</a></div>a conditional expression (<a href='expr.cond' title='7.6.16&emsp;Conditional operator'>[expr.<span class='shy'></span>cond]</a>) that is a glvalue
  where the second or third operand is one of these expressions, or</li><li id='class.temporary-6.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-6.8'>(6.8)</a></div>a comma expression (<a href='expr.comma' title='7.6.20&emsp;Comma operator'>[expr.<span class='shy'></span>comma]</a>) that is a glvalue
  where the right operand is one of these expressions<a class='hidden_link' href='#class.temporary-6.sentence-2'>.</a></li></ul></div> <div id='class.temporary-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.temporary-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> id <span class='operator'>=</span> T;

<span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>1</span>;
<span class='keyword'>int</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> a <span class='operator'>=</span> id<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span><span class='curlybracket'>}</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span>;           <span class='comment'>// temporary array has same lifetime as <span class='tcode_in_codeblock'>a</span></span>
<span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> b <span class='operator'>=</span> <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;  <span class='comment'>// temporary <span class='tcode_in_codeblock'>int</span> has same lifetime as <span class='tcode_in_codeblock'>b</span></span>
<span class='keyword'>int</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> c <span class='operator'>=</span> cond <span class='operator'>?</span> id<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span><span class='curlybracket'>}</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span> <span class='operator'>:</span> <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
                                            <span class='comment'>// exactly one of the two temporaries is lifetime-extended</span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='class.temporary-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.temporary-note-4'>4</a></i>:&ensp;<div id='class.temporary-6.sentence-3' class='sentence'>An explicit type conversion (<a href='expr.type.conv' title='7.6.1.4&emsp;Explicit type conversion (functional notation)'>[expr.<span class='shy'></span>type.<span class='shy'></span>conv]</a>, <a href='expr.cast' title='7.6.3&emsp;Explicit type conversion (cast notation)'>[expr.<span class='shy'></span>cast]</a>)
is interpreted as
a sequence of elementary casts,
covered above<a class='hidden_link' href='#class.temporary-6.sentence-3'>.</a></div> <div id='class.temporary-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.temporary-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> x <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='literal'>1</span>;   <span class='comment'>// temporary for value 1 has same lifetime as x</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div> <div id='class.temporary-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.temporary-note-5'>5</a></i>:&ensp;<div id='class.temporary-6.sentence-4' class='sentence'>If a temporary object has a reference member initialized by another temporary object,
lifetime extension applies recursively to such a member's initializer<a class='hidden_link' href='#class.temporary-6.sentence-4'>.</a></div> <div id='class.temporary-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.temporary-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> m;
<span class='curlybracket'>}</span>;
<span class='keyword'>const</span> S<span class='operator'>&amp;</span> s <span class='operator'>=</span> S<span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>;              <span class='comment'>// both <span class='tcode_in_codeblock'>S</span> and <span class='tcode_in_codeblock'>int</span> temporaries have lifetime of <span class='tcode_in_codeblock'>s</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div><div class='texpara'><div id='class.temporary-6.sentence-5' class='sentence'>The exceptions to this lifetime rule are:
<ul class='itemize'><li id='class.temporary-6.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-6.9'>(6.9)</a></div><div class='texpara'><div id='class.temporary-6.9.sentence-1' class='sentence'>A temporary object bound to a reference parameter in a function call (<a href='expr.call' title='7.6.1.3&emsp;Function call'>[expr.<span class='shy'></span>call]</a>)
persists until the completion of the full-expression containing the call<a class='hidden_link' href='#class.temporary-6.9.sentence-1'>.</a></div></div></li><li id='class.temporary-6.10'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-6.10'>(6.10)</a></div><div class='texpara'><div id='class.temporary-6.10.sentence-1' class='sentence'>A temporary object bound to a reference element of
an aggregate of class type initialized from
a parenthesized <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list'><span class='textsf'><i >expression-list</i></span></span></a> (<a href='dcl.init' title='9.5&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>)
persists until the completion of the full-expression
containing the <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list_'><span class='textsf'><i >expression-list</i></span></span></a><a class='hidden_link' href='#class.temporary-6.10.sentence-1'>.</a></div></div></li><li id='class.temporary-6.11'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.temporary-6.11'>(6.11)</a></div><div class='texpara'><div id='class.temporary-6.11.sentence-1' class='sentence'>A temporary bound to a reference in a <a href='expr.new#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer_'><span class='textsf'><i >new-initializer</i></span></span></a> (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>) persists until the completion of the full-expression containing the <a href='expr.new#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer__'><span class='textsf'><i >new-initializer</i></span></span></a><a class='hidden_link' href='#class.temporary-6.11.sentence-1'>.</a></div> <div id='class.temporary-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.temporary-note-6'>6</a></i>:&ensp;<div id='class.temporary-6.11.sentence-2' class='sentence'>This might introduce a dangling reference<a class='hidden_link' href='#class.temporary-6.11.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='class.temporary-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.temporary-example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>int</span> mi; <span class='keyword'>const</span> std<span class='operator'>::</span>pair<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> mp; <span class='curlybracket'>}</span>;
S a <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='curlybracket'>{</span><span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;
S<span class='operator'>*</span> p <span class='operator'>=</span> <span class='keyword'>new</span> S<span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='curlybracket'>{</span><span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;       <span class='comment'>// creates dangling reference</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li></ul></div></div></div><div class='para' id='class.temporary-7'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4709'>#</a></div><div class='texpara'><div id='class.temporary-7.sentence-1' class='sentence'>The fourth context is when a temporary object
is created in the <a href='stmt.iter.general#nt:for-range-initializer' title='8.6.1&emsp;General&emsp;[stmt.iter.general]'><span id='ntref:for-range-initializer'><span class='textsf'><i >for-range-initializer</i></span></span></a> of a range-based <span id=':for'><span class='texttt'><span class='keyword'>for</span></span></span> statement<a class='hidden_link' href='#class.temporary-7.sentence-1'>.</a></div> <div id='class.temporary-7.sentence-2' class='sentence'>If such a temporary object would otherwise be destroyed
at the end of the <a href='stmt.iter.general#nt:for-range-initializer' title='8.6.1&emsp;General&emsp;[stmt.iter.general]'><span id='ntref:for-range-initializer_'><span class='textsf'><i >for-range-initializer</i></span></span></a> full-expression,
the object persists for the lifetime of the reference
initialized by the <a href='stmt.iter.general#nt:for-range-initializer' title='8.6.1&emsp;General&emsp;[stmt.iter.general]'><span id='ntref:for-range-initializer__'><span class='textsf'><i >for-range-initializer</i></span></span></a><a class='hidden_link' href='#class.temporary-7.sentence-2'>.</a></div></div></div><div class='para' id='class.temporary-8'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4717'>#</a></div><div class='texpara'><div id='class.temporary-8.sentence-1' class='sentence'>The fifth context is when a temporary object
is created in a structured binding declaration (<a href='dcl.struct.bind' title='9.7&emsp;Structured binding declarations'>[dcl.<span class='shy'></span>struct.<span class='shy'></span>bind]</a>)<a class='hidden_link' href='#class.temporary-8.sentence-1'>.</a></div> <div id='class.temporary-8.sentence-2' class='sentence'>Any temporary objects introduced by
the <a href='dcl.init.general#nt:initializer' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer'><span class='textsf'><i >initializer</i></span></span></a><i >s</i> for the variables
with unique names
are destroyed at the end of the structured binding declaration<a class='hidden_link' href='#class.temporary-8.sentence-2'>.</a></div></div></div><div class='para' id='class.temporary-9'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4725'>#</a></div><div class='texpara'><div id='class.temporary-9.sentence-1' class='sentence'>Let <span class='texttt'>x</span> and <span class='texttt'>y</span> each be either
a temporary object whose lifetime is not extended, or
a function parameter<a class='hidden_link' href='#class.temporary-9.sentence-1'>.</a></div> <div id='class.temporary-9.sentence-2' class='sentence'>If the lifetimes of <span class='texttt'>x</span> and <span class='texttt'>y</span> end at
the end of the same full-expression, and
<span class='texttt'>x</span> is initialized before <span class='texttt'>y</span>, then
the destruction of <span class='texttt'>y</span> is sequenced before that of <span class='texttt'>x</span><a class='hidden_link' href='#class.temporary-9.sentence-2'>.</a></div> <div id='class.temporary-9.sentence-3' class='sentence'>If the lifetime of two or more temporaries
with lifetimes extending beyond the full-expressions in which they were created
ends at the same point,
these temporaries are destroyed at that point in the reverse order of the
completion of their construction<a class='hidden_link' href='#class.temporary-9.sentence-3'>.</a></div> <div id='class.temporary-9.sentence-4' class='sentence'>In addition, the destruction of such temporaries shall
take into account the ordering of destruction of objects with static, thread, or
automatic storage duration (<a href='#basic.stc.static' title='6.7.6.2&emsp;Static storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>static]</a>, <a href='#basic.stc.thread' title='6.7.6.3&emsp;Thread storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>thread]</a>, <a href='#basic.stc.auto' title='6.7.6.4&emsp;Automatic storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>auto]</a>);
that is, if
<span class='texttt'>obj1</span>
is an object with the same storage duration as the temporary and
created before the temporary is created
the temporary shall be destroyed before
<span class='texttt'>obj1</span>
is destroyed;
if
<span class='texttt'>obj2</span>
is an object with the same storage duration as the temporary and
created after the temporary is created
the temporary shall be destroyed after
<span class='texttt'>obj2</span>
is destroyed<a class='hidden_link' href='#class.temporary-9.sentence-4'>.</a></div></div></div><div class='para nonNormativeOnly' id='class.temporary-10'><div class='marginalizedparent'><a class='marginalized' href='#class.temporary-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3bce8f7f15164dc455240e53acce596eeba97d45/source/basic.tex#L4756'>#</a></div><div class='texpara'><div id='class.temporary-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.temporary-example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  S<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  <span class='keyword'>friend</span> S <span class='keyword'>operator</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>const</span> S<span class='operator'>&amp;</span>, <span class='keyword'>const</span> S<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
  <span class='operator'>~</span>S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
S obj1;
<span class='keyword'>const</span> S<span class='operator'>&amp;</span> cr <span class='operator'>=</span> S<span class='parenthesis'>(</span><span class='literal'>16</span><span class='parenthesis'>)</span><span class='operator'>+</span>S<span class='parenthesis'>(</span><span class='literal'>23</span><span class='parenthesis'>)</span>;
S obj2;
</span></div><div class='texpara'><div id='class.temporary-10.sentence-1' class='sentence'>The expression
<span class='texttt'>S<span class='parenthesis'>(</span><span class='literal'>16</span><span class='parenthesis'>)</span> <span class='operator'>+</span> S<span class='parenthesis'>(</span><span class='literal'>23</span><span class='parenthesis'>)</span></span>
creates three temporaries:
a first temporary
<span class='texttt'>T1</span>
to hold the result of the expression
<span class='texttt'>S<span class='parenthesis'>(</span><span class='literal'>16</span><span class='parenthesis'>)</span></span>,
a second temporary
<span class='texttt'>T2</span>
to hold the result of the expression
<span class='texttt'>S<span class='parenthesis'>(</span><span class='literal'>23</span><span class='parenthesis'>)</span></span>,
and a third temporary
<span class='texttt'>T3</span>
to hold the result of the addition of these two expressions<a class='hidden_link' href='#class.temporary-10.sentence-1'>.</a></div> <div id='class.temporary-10.sentence-2' class='sentence'>The temporary
<span class='texttt'>T3</span>
is then bound to the reference
<span class='texttt'>cr</span><a class='hidden_link' href='#class.temporary-10.sentence-2'>.</a></div> <div id='class.temporary-10.sentence-3' class='sentence'>It is unspecified whether
<span class='texttt'>T1</span>
or
<span class='texttt'>T2</span>
is created first<a class='hidden_link' href='#class.temporary-10.sentence-3'>.</a></div> <div id='class.temporary-10.sentence-4' class='sentence'>On an implementation where
<span class='texttt'>T1</span>
is created before
<span class='texttt'>T2</span>,
<span class='texttt'>T2</span>
shall be destroyed before
<span class='texttt'>T1</span><a class='hidden_link' href='#class.temporary-10.sentence-4'>.</a></div> <div id='class.temporary-10.sentence-5' class='sentence'>The temporaries
<span class='texttt'>T1</span>
and
<span class='texttt'>T2</span>
are bound to the reference parameters of
<span class='texttt'><span id=':operator_______________'><span class='texttt'><span class='keyword'>operator</span></span></span><span class='operator'>+</span></span>;
these temporaries are destroyed at the end of the full-expression
containing the call to
<span class='texttt'><span id=':operator________________'><span class='texttt'><span class='keyword'>operator</span></span></span><span class='operator'>+</span></span><a class='hidden_link' href='#class.temporary-10.sentence-5'>.</a></div> <div id='class.temporary-10.sentence-6' class='sentence'>The temporary
<span class='texttt'>T3</span>
bound to the reference
<span class='texttt'>cr</span>
is destroyed at the end of
<span class='texttt'>cr</span>'s
lifetime, that is, at the end of the program<a class='hidden_link' href='#class.temporary-10.sentence-6'>.</a></div> <div id='class.temporary-10.sentence-7' class='sentence'>In addition, the order in which
<span class='texttt'>T3</span>
is destroyed takes into account the destruction order of other objects with
static storage duration<a class='hidden_link' href='#class.temporary-10.sentence-7'>.</a></div> <div id='class.temporary-10.sentence-8' class='sentence'>That is, because
<span class='texttt'>obj1</span>
is constructed before
<span class='texttt'>T3</span>,
and
<span class='texttt'>T3</span>
is constructed before
<span class='texttt'>obj2</span>,
<span class='texttt'>obj2</span>
shall be destroyed before
<span class='texttt'>T3</span>,
and
<span class='texttt'>T3</span>
shall be destroyed before
<span class='texttt'>obj1</span><a class='hidden_link' href='#class.temporary-10.sentence-8'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-25'><div class='texpara'><a class='footnotenum' href='#footnote-25'>25)</a><a class='footnoteBacklink' href='#footnoteref-25'>25)</a> <div id='footnote-25.sentence-1' class='sentence'>The same rules apply to initialization of an
  <span class='texttt'>initializer_<span class='shy'></span>list</span> object (<a href='dcl.init.list' title='9.5.5&emsp;List-initialization'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>) with its
  underlying temporary array<a class='hidden_link' href='#footnote-25.sentence-1'>.</a></div></div></div></div></div></body></html>