<!DOCTYPE html><html lang='en'><head><title>[temp.names]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>17</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>17.2</a> Names of template specializations <a class='abbr_ref'>[temp.names]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e8e0fc6c0ec75b6ea4bbdc0134251bbc60870e25/source/templates.tex#L552'>#</a></div><p >A <a href='temp.spec'>template specialization</a> can be referred to by a
<i ><a href='temp.names#nt:template-id'>template-id</a></i>:</p><pre class='bnf'><a class='nontermdef' id='nt:simple-template-id'>simple-template-id:</a>
&#9;<i ><a href='temp.names#nt:template-name'>template-name</a></i> <span class='terminal'>&lt;</span> <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>&gt;</span>
</pre><pre class='bnf'><a class='nontermdef' id='nt:template-id'>template-id:</a>
&#9;<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
&#9;<i ><a href='over.oper#nt:operator-function-id'>operator-function-id</a></i> <span class='terminal'>&lt;</span> <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>&gt;</span>
&#9;<i ><a href='over.literal#nt:literal-operator-id'>literal-operator-id</a></i> <span class='terminal'>&lt;</span> <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>&gt;</span>
</pre><pre class='bnf'><a class='nontermdef' id='nt:template-name'>template-name:</a>
&#9;<i ><a href='lex.name#nt:identifier'>identifier</a></i>
</pre><pre class='bnf'><a class='nontermdef' id='nt:template-argument-list'>template-argument-list:</a>
&#9;<i ><a href='temp.names#nt:template-argument'>template-argument</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i> <span class='terminal'>,</span> <i ><a href='temp.names#nt:template-argument'>template-argument</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' id='nt:template-argument'>template-argument:</a>
&#9;<i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i>
&#9;<i ><a href='dcl.name#nt:type-id'>type-id</a></i>
&#9;<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>
</pre><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
The <a href='basic.lookup'>name lookup</a> rules are used to associate the use of
a name with a template declaration;
that is, to identify a name as a
<i ><a href='temp.names#nt:template-name'>template-name</a></i>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e8e0fc6c0ec75b6ea4bbdc0134251bbc60870e25/source/templates.tex#L593'>#</a></div><p >For a
<i ><a href='temp.names#nt:template-name'>template-name</a></i>
to be explicitly qualified by the template arguments,
the name must be known to refer to a template.</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e8e0fc6c0ec75b6ea4bbdc0134251bbc60870e25/source/templates.tex#L599'>#</a></div><p ><span class='indexparent'><a class='index' id=':<,template_and'></a></span>After <a href='basic.lookup'>name lookup</a> finds that a name is a
<i ><a href='temp.names#nt:template-name'>template-name</a></i>
or that an <i ><a href='over.oper#nt:operator-function-id'>operator-function-id</a></i> or a <i ><a href='over.literal#nt:literal-operator-id'>literal-operator-id</a></i> refers to a set of
overloaded functions any member of which is a function template,
if this is followed by a
<span class='texttt'>&lt;</span>,
the
<span class='texttt'>&lt;</span>
is always taken as the delimiter of a
<i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i>
and never as the less-than operator.
When parsing a <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i>,
the first non-nested
<span class='texttt'>&gt;</span><a class='footnotenum' href='#footnote-136'>136</a>
is taken as the ending delimiter
rather than a greater-than operator.
Similarly, the first non-nested <span class='texttt'>&gt;&gt;</span> is treated as two
consecutive but distinct <span class='texttt'>&gt;</span> tokens, the first of which is taken
as the end of the <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i> and completes
the <i ><a href='temp.names#nt:template-id'>template-id</a></i>. [<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>  The second <span class='texttt'>&gt;</span>
token produced by this replacement rule may terminate an enclosing
<i ><a href='temp.names#nt:template-id'>template-id</a></i> construct or it may be part of a different
construct (e.g. a cast).<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> </p><pre class='codeblock'>
template&lt;int i&gt; class X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };

X&lt; 1&gt;2 &gt; x1;                            <span class='comment'>// syntax error
</span>X&lt;(1&gt;2)&gt; x2;                            <span class='comment'>// OK
</span>
template&lt;class T&gt; class Y { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
Y&lt;X&lt;1&gt;&gt; x3;                             <span class='comment'>// OK, same as <span class='tcode_in_codeblock'>Y&lt;X&lt;1&gt; &gt; x3;</span>
</span>Y&lt;X&lt;6&gt;&gt;1&gt;&gt; x4;                          <span class='comment'>// syntax error
</span>Y&lt;X&lt;(6&gt;&gt;1)&gt;&gt; x5;                        <span class='comment'>// OK
</span></pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e8e0fc6c0ec75b6ea4bbdc0134251bbc60870e25/source/templates.tex#L644'>#</a></div><p >The keyword <span class='texttt'>template</span> is said to appear at the top level in
a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
if it appears outside of a <i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i> or
<i ><a href='dcl.type.simple#nt:decltype-specifier'>decltype-specifier</a></i>.
In a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> of a <i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i> or
in a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> formed by a <i ><a href='class#nt:class-head-name'>class-head-name</a></i> or
<i ><a href='dcl.enum#nt:enum-head-name'>enum-head-name</a></i>,
the keyword <span class='texttt'>template</span> shall not appear at the top level.
In a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> used as the name in a
<i ><a href='temp.res#nt:typename-specifier'>typename-specifier</a></i>,
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i>,
<i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>, or
<i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i>,
an optional keyword <span class='texttt'>template</span> appearing at the top level is ignored.
In these contexts, a <span class='texttt'>&lt;</span> token is always assumed to introduce a
<i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i>.
In all other contexts, when naming a template specialization of
a member of an unknown specialization (<a href='temp.dep.type'>[temp.dep.type]</a>),
the member template name shall be prefixed by the keyword <span class='texttt'>template</span>.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> </p><pre class='codeblock'>
struct X {
  template&lt;std::size_t&gt; X* alloc();
  template&lt;std::size_t&gt; static X* adjust();
};
template&lt;class T&gt; void f(T* p) {
  T* p1 = p-&gt;alloc&lt;200&gt;();              <span class='comment'>// ill-formed: <span class='tcode_in_codeblock'>&lt;</span> means less than
</span>  T* p2 = p-&gt;template alloc&lt;200&gt;();     <span class='comment'>// OK: <span class='tcode_in_codeblock'>&lt;</span> starts template argument list
</span>  T::adjust&lt;100&gt;();                     <span class='comment'>// ill-formed: <span class='tcode_in_codeblock'>&lt;</span> means less than
</span>  T::template adjust&lt;100&gt;();            <span class='comment'>// OK: <span class='tcode_in_codeblock'>&lt;</span> starts template argument list
</span>}</pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e8e0fc6c0ec75b6ea4bbdc0134251bbc60870e25/source/templates.tex#L680'>#</a></div><p >A name prefixed by the keyword
<span class='texttt'>template</span>
shall be a <i ><a href='temp.names#nt:template-id'>template-id</a></i> or
the name shall refer to a class template or an alias template.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
The keyword
<span class='texttt'>template</span>
may not be applied to non-template members of class templates.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
As is the case with the
<span class='texttt'>typename</span>
prefix, the
<span class='texttt'>template</span>
prefix is allowed in cases where it is not strictly
necessary; i.e., when the <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> or
the expression on the left of
the
<span class='texttt'>-&gt;</span>
or
<span class='texttt'>.</span>
is not dependent on a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>, or the use does not appear in the
scope of a template.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> 
</p><pre class='codeblock'>
template &lt;class T&gt; struct A {
  void f(int);
  template &lt;class U&gt; void f(U);
};

template &lt;class T&gt; void f(T t) {
  A&lt;T&gt; a;
  a.template f&lt;&gt;(t);                    <span class='comment'>// OK: calls template
</span>  a.template f(t);                      <span class='comment'>// error: not a <i ><a href='temp.names#nt:template-id'>template-id</a></i>
</span>}

template &lt;class T&gt; struct B {
  template &lt;class T2&gt; struct C { };
};

<span class='comment'>// OK: <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;template C</span> names a class template:
</span>template &lt;class T, template &lt;class X&gt; class TT = T::template C&gt; struct D { };
D&lt;B&lt;int&gt; &gt; db;</pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e8e0fc6c0ec75b6ea4bbdc0134251bbc60870e25/source/templates.tex#L729'>#</a></div><p ><span class='indexparent'><a class='index' id=':specialization,class_template'></a></span>A
<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
that names a class template specialization is a
<i ><a href='class#nt:class-name'>class-name</a></i>.</p></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e8e0fc6c0ec75b6ea4bbdc0134251bbc60870e25/source/templates.tex#L737'>#</a></div><p >A <i ><a href='temp.names#nt:template-id'>template-id</a></i> that names an alias template
specialization is a <i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i>.</p></div><div class='footnote' id='footnote-136'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-136'>136)</a></div><p >A <span class='texttt'>&gt;</span> that encloses the <i ><a href='dcl.name#nt:type-id'>type-id</a></i>
of a <span class='texttt'>dynamic_&shy;cast</span>, <span class='texttt'>static_&shy;cast</span>, <span class='texttt'>reinterpret_&shy;cast</span>
or <span class='texttt'>const_&shy;cast</span>, or which encloses the <i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
of a subsequent <i ><a href='temp.names#nt:template-id'>template-id</a></i>, is considered nested for the purpose
of this description.
</p></div></div></body></html>