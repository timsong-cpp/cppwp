<!DOCTYPE html><html lang='en'><head><title>[over.best.ics.general]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>12</a> Overloading <a class='abbr_ref' href='./#over'>[over]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>12.2</a> Overload resolution <a class='abbr_ref' href='over.match#over.best.ics.general'>[over.match]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>12.2.4</a> Best viable function <a class='abbr_ref' href='over.match.best#over.best.ics.general'>[over.match.best]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>12.2.4.2</a> Implicit conversion sequences <a class='abbr_ref' href='over.best.ics#general'>[over.best.ics]</a></h4><h4 ><a class='secnum' style='min-width:110pt'>12.2.4.2.1</a> General <a class='abbr_ref'>[over.best.ics.general]</a></h4><div class='texpara'><a class='index' id=':overloading,resolution,implicit_conversions_and'></a>
</div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/deec10b978bb05e12b1ad5f586f3e8b21e590306/source/overloading.tex#L1813'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>An <a class='hidden_link' href='#def:conversion_sequence,implicit' title='12.2.4.2.1&emsp;General&emsp;[over.best.ics.general]'><span id='def:conversion_sequence,implicit'><i >implicit conversion sequence</i></span></a>
is a sequence of conversions used
to convert an argument in a function call to the type of the
corresponding parameter of the function being called<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>The
sequence of conversions is an implicit conversion as defined in
<a href='conv' title='7.3&emsp;Standard conversions'>[conv]</a>, which means it is governed by the rules for
initialization of an object or reference by a single
expression (<a href='dcl.init' title='9.4&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>, <a href='dcl.init.ref' title='9.4.4&emsp;References'>[dcl.<span class='shy'></span>init.<span class='shy'></span>ref]</a>)<a class='hidden_link' href='#1.sentence-2'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/deec10b978bb05e12b1ad5f586f3e8b21e590306/source/overloading.tex#L1824'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>Implicit conversion sequences are concerned only with the type,
cv-qualification, and value category of the argument and how these
are converted to match the corresponding properties of the
parameter<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='2.sentence-2' class='sentence'>Other properties, such as the lifetime, storage class,
alignment, accessibility of the argument, whether the argument is a bit-field,
and whether a function is <a href='dcl.fct.def.delete' title='9.5.3&emsp;Deleted definitions&emsp;[dcl.fct.def.delete]'>deleted</a>, are ignored<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>So, although an implicit
conversion sequence can be defined for a given argument-parameter
pair, the conversion from the argument to the parameter might still
be ill-formed in the final analysis<a class='hidden_link' href='#2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/deec10b978bb05e12b1ad5f586f3e8b21e590306/source/overloading.tex#L1839'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>A
well-formed implicit conversion
sequence is one of the following forms:
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div>a <a href='over.ics.scs' title='12.2.4.2.2&emsp;Standard conversion sequences&emsp;[over.ics.scs]'>standard conversion sequence</a>,</li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div>a <a href='over.ics.user' title='12.2.4.2.3&emsp;User-defined conversion sequences&emsp;[over.ics.user]'>user-defined conversion sequence</a>, or</li><li id='3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.3'>(3.3)</a></div>an <a href='over.ics.ellipsis' title='12.2.4.2.4&emsp;Ellipsis conversion sequences&emsp;[over.ics.ellipsis]'>ellipsis conversion sequence</a><a class='hidden_link' href='#3.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/deec10b978bb05e12b1ad5f586f3e8b21e590306/source/overloading.tex#L1852'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>However, if the target is
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.1'>(4.1)</a></div>the first parameter of a constructor or</li><li id='4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.2'>(4.2)</a></div>the implicit object parameter of a user-defined conversion function</li></ul>
and the constructor or user-defined conversion function is a candidate by
<ul class='itemize'><li id='4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.3'>(4.3)</a></div><a href='over.match.ctor' title='12.2.2.4&emsp;Initialization by constructor'>[over.<span class='shy'></span>match.<span class='shy'></span>ctor]</a>, when the argument is the temporary in the second
step of a class copy-initialization,</li><li id='4.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.4'>(4.4)</a></div><a href='over.match.copy' title='12.2.2.5&emsp;Copy-initialization of class by user-defined conversion'>[over.<span class='shy'></span>match.<span class='shy'></span>copy]</a>, <a href='over.match.conv' title='12.2.2.6&emsp;Initialization by conversion function'>[over.<span class='shy'></span>match.<span class='shy'></span>conv]</a>, or <a href='over.match.ref' title='12.2.2.7&emsp;Initialization by conversion function for direct reference binding'>[over.<span class='shy'></span>match.<span class='shy'></span>ref]</a>
(in all cases), or</li><li id='4.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.5'>(4.5)</a></div>the second phase of <a href='over.match.list' title='12.2.2.8&emsp;Initialization by list-initialization'>[over.<span class='shy'></span>match.<span class='shy'></span>list]</a>
when the initializer list has exactly one element that
is itself an initializer list, and
the target is the first parameter of a constructor of class <span class='texttt'>X</span>, and
the conversion is to <span class='texttt'>X</span> or reference to <span class='mathit'>cv</span> <span class='texttt'>X</span>,</li></ul>
user-defined conversion sequences are not considered<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>: <div id='4.sentence-2' class='sentence'>These rules prevent more than one user-defined conversion from being
applied during overload resolution, thereby avoiding infinite recursion<a class='hidden_link' href='#4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> Y<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
Y y1 <span class='operator'>=</span> A<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;         <span class='comment'>// error: <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;<span id=':operator'><span class='tcode_in_codeblock'>operator</span></span> int()</span> is not a candidate</span>

<span class='keyword'>struct</span> X <span class='curlybracket'>{</span> X<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='keyword'>operator</span> X<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
B b;
X x<span class='curlybracket'>{</span><span class='curlybracket'>{</span>b<span class='curlybracket'>}</span><span class='curlybracket'>}</span>;           <span class='comment'>// error: <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;<span id=':operator_'><span class='tcode_in_codeblock'>operator</span></span> X()</span> is not a candidate</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/deec10b978bb05e12b1ad5f586f3e8b21e590306/source/overloading.tex#L1888'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>For the case where the parameter type is a reference, see <a href='over.ics.ref' title='12.2.4.2.5&emsp;Reference binding'>[over.<span class='shy'></span>ics.<span class='shy'></span>ref]</a><a class='hidden_link' href='#5.sentence-1'>.</a></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/deec10b978bb05e12b1ad5f586f3e8b21e590306/source/overloading.tex#L1891'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>When the parameter type is not a reference, the implicit conversion
sequence models a copy-initialization of the parameter from the argument
expression<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>The implicit conversion sequence is the one required to convert the
argument expression to a prvalue of the type of
the parameter<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>: <div id='6.sentence-3' class='sentence'>When the parameter has a class type, this is a conceptual conversion
defined for the purposes of <a href='over' title='12&emsp;Overloading'>[over]</a>; the actual initialization is
defined in terms of constructors and is not a conversion<a class='hidden_link' href='#6.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='6.sentence-4' class='sentence'>
Any difference in top-level cv-qualification is
subsumed by the initialization itself and does not constitute a conversion<a class='hidden_link' href='#6.sentence-4'>.</a></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>: <div id='6.sentence-5' class='sentence'>A parameter of type
<span class='texttt'>A</span>
can be initialized from an argument of type
<span class='texttt'><span class='keyword'>const</span> A</span><a class='hidden_link' href='#6.sentence-5'>.</a></div> <div id='6.sentence-6' class='sentence'>The implicit conversion sequence for that case is the identity sequence; it
contains no “conversion” from
<span class='texttt'><span class='keyword'>const</span> A</span>
to
<span class='texttt'>A</span><a class='hidden_link' href='#6.sentence-6'>.</a></div> —&nbsp;<i>end example</i>]</div></div> <div id='6.sentence-7' class='sentence'>
When the parameter has a class type and the argument expression has the
same type, the implicit conversion sequence is an identity conversion<a class='hidden_link' href='#6.sentence-7'>.</a></div> <div id='6.sentence-8' class='sentence'>When the parameter has a class type and the argument expression has a
derived class type, the implicit conversion sequence is a
derived-to-base
<a class='index' id=':conversion,derived-to-base'></a>conversion from the derived class to the base class<a class='hidden_link' href='#6.sentence-8'>.</a></div> <div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>: <div id='6.sentence-9' class='sentence'>There is no such standard conversion; this derived-to-base conversion exists
only in the description of implicit conversion sequences<a class='hidden_link' href='#6.sentence-9'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='6.sentence-10' class='sentence'>
A derived-to-base conversion has Conversion rank (<a href='over.ics.scs' title='12.2.4.2.2&emsp;Standard conversion sequences'>[over.<span class='shy'></span>ics.<span class='shy'></span>scs]</a>)<a class='hidden_link' href='#6.sentence-10'>.</a></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/deec10b978bb05e12b1ad5f586f3e8b21e590306/source/overloading.tex#L1929'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>In all contexts, when converting to the implicit object parameter
or when converting to the left operand of an assignment operation
only standard conversion sequences are allowed<a class='hidden_link' href='#7.sentence-1'>.</a></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/deec10b978bb05e12b1ad5f586f3e8b21e590306/source/overloading.tex#L1934'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'>If no conversions are required to match an argument to a
parameter type, the implicit conversion sequence is the standard
conversion sequence consisting of the identity conversion (<a href='over.ics.scs' title='12.2.4.2.2&emsp;Standard conversion sequences'>[over.<span class='shy'></span>ics.<span class='shy'></span>scs]</a>)<a class='hidden_link' href='#8.sentence-1'>.</a></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/deec10b978bb05e12b1ad5f586f3e8b21e590306/source/overloading.tex#L1939'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'>If no sequence of conversions can be found to convert an argument
to a parameter type, an implicit conversion sequence cannot be formed<a class='hidden_link' href='#9.sentence-1'>.</a></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/deec10b978bb05e12b1ad5f586f3e8b21e590306/source/overloading.tex#L1943'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'>If there are multiple well-formed implicit conversion sequences
converting the argument to the parameter type, the implicit
conversion sequence associated with the parameter is defined to be
the unique conversion sequence designated the
<a class='hidden_link' href='#def:conversion_sequence,ambiguous' title='12.2.4.2.1&emsp;General&emsp;[over.best.ics.general]'><span id='def:conversion_sequence,ambiguous'><i >ambiguous conversion sequence</i></span></a><a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>For the purpose of ranking implicit conversion sequences as described
in <a href='over.ics.rank' title='12.2.4.3&emsp;Ranking implicit conversion sequences'>[over.<span class='shy'></span>ics.<span class='shy'></span>rank]</a>, the ambiguous conversion sequence is treated
as a user-defined conversion sequence that is indistinguishable from any
other user-defined conversion sequence<a class='hidden_link' href='#10.sentence-2'>.</a></div> <div id='note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-5'>5</a></i>: <div id='10.sentence-3' class='sentence'>This rule prevents a function from becoming non-viable because of an ambiguous
conversion sequence for one of its parameters<a class='hidden_link' href='#10.sentence-3'>.</a></div> <div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>: <span class='codeblock'><span class='keyword'>class</span> B;
<span class='keyword'>class</span> A <span class='curlybracket'>{</span> A <span class='parenthesis'>(</span>B<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;<span class='curlybracket'>}</span>;
<span class='keyword'>class</span> B <span class='curlybracket'>{</span> <span class='keyword'>operator</span> A <span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> C <span class='curlybracket'>{</span> C <span class='parenthesis'>(</span>B<span class='operator'>&amp;</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>C<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
B b;
f<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>;               <span class='comment'>// error: ambiguous because there is a conversion <span class='tcode_in_codeblock'>b</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>C</span> (via constructor)</span>
                    <span class='comment'>// and an (ambiguous) conversion <span class='tcode_in_codeblock'>b</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>A</span> (via constructor or conversion function)</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
f<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>;               <span class='comment'>// OK, unambiguous</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div> <div id='10.sentence-4' class='sentence'>
If a function that uses the ambiguous conversion sequence is selected
as the best viable function, the call will be ill-formed because the conversion
of one of the arguments in the call is ambiguous<a class='hidden_link' href='#10.sentence-4'>.</a></div></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/deec10b978bb05e12b1ad5f586f3e8b21e590306/source/overloading.tex#L1976'>#</a></div><div class='texpara'><div id='11.sentence-1' class='sentence'>The three forms of implicit conversion sequences mentioned above
are defined in the following subclauses<a class='hidden_link' href='#11.sentence-1'>.</a></div></div></div></div></body></html>