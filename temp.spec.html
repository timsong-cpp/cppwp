<!DOCTYPE html><html lang='en'><head><title>[temp.spec]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>13</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>13.9</a> Template instantiation and specialization <a class='abbr_ref'>[temp.spec]</a></h2><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:80pt'>13.9.1</a> General <a class='abbr_ref' href='temp.spec.general'>[temp.spec.general]</a></h3><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6133'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'><a class='index' id=':specialization,template'></a>The act of instantiating a function, a variable,
a class, a member of a class template, or
a member template is referred to as
<a class='hidden_link' href='#def:template_instantiation' title='13.9.1&emsp;General&emsp;[temp.spec.general]'><span id='def:template_instantiation'><i >template instantiation</i></span></a><a class='hidden_link' href='#general-1.sentence-1'>.</a></div></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6140'>#</a></div><div class='texpara'><div id='general-2.sentence-1' class='sentence'>A function instantiated from a function template is called an instantiated
function<a class='hidden_link' href='#general-2.sentence-1'>.</a></div> <div id='general-2.sentence-2' class='sentence'>A class instantiated from a class template is called an instantiated class<a class='hidden_link' href='#general-2.sentence-2'>.</a></div> <div id='general-2.sentence-3' class='sentence'>A member function, a member class, a member enumeration, or a static data member of a class template
instantiated from the member definition of the class template is called,
respectively, an instantiated member function, member class, member enumeration, or static data
member<a class='hidden_link' href='#general-2.sentence-3'>.</a></div> <div id='general-2.sentence-4' class='sentence'>A member function instantiated from a member function template is called an
instantiated member function<a class='hidden_link' href='#general-2.sentence-4'>.</a></div> <div id='general-2.sentence-5' class='sentence'>A member class instantiated from a member class template is called an
instantiated member class<a class='hidden_link' href='#general-2.sentence-5'>.</a></div> <div id='general-2.sentence-6' class='sentence'>A variable instantiated from a variable template is called an
instantiated variable<a class='hidden_link' href='#general-2.sentence-6'>.</a></div> <div id='general-2.sentence-7' class='sentence'>A static data member instantiated from a static data member template
is called an instantiated static data member<a class='hidden_link' href='#general-2.sentence-7'>.</a></div></div></div><div class='para' id='general-3'><div class='marginalizedparent'><a class='marginalized' href='#general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6157'>#</a></div><div class='texpara'><div id='general-3.sentence-1' class='sentence'>An explicit specialization may be declared for a function template,
a variable template, a class template, a member of a class template, or
a member template<a class='hidden_link' href='#general-3.sentence-1'>.</a></div> <div id='general-3.sentence-2' class='sentence'>An explicit specialization declaration is introduced by
<span class='texttt'><span id=':template'><span class='texttt'><span class='keyword'>template</span></span></span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#general-3.sentence-2'>.</a></div> <div id='general-3.sentence-3' class='sentence'>In an explicit specialization declaration for
a variable template, a class template,
a member of a class template, or a class member template,
the variable or class that is explicitly specialized
shall be specified with a <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id'><span class='textsf'><i >simple-template-id</i></span></span></a><a class='hidden_link' href='#general-3.sentence-3'>.</a></div> <div id='general-3.sentence-4' class='sentence'>In the explicit specialization declaration for a function template or
a member function template,
the function or member function explicitly specialized may be specified
using a <a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id'><span class='textsf'><i >template-id</i></span></span></a><a class='hidden_link' href='#general-3.sentence-4'>.</a></div> <div id='general-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T <span class='operator'>=</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>int</span> x;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;        <span class='comment'>// specialize for <span class='tcode_in_codeblock'>T == double</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;              <span class='comment'>// specialize for <span class='tcode_in_codeblock'>T == int</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>             <span class='comment'>// specialize for <span class='tcode_in_codeblock'>U == char</span></span>
                                        <span class='comment'>// <span class='tcode_in_codeblock'>U</span> is deduced from the parameter type</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>         <span class='comment'>// specialize for <span class='tcode_in_codeblock'>U == int</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>x <span class='operator'>=</span> <span class='literal'>0</span>;          <span class='comment'>// specialize for <span class='tcode_in_codeblock'>T == char</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T <span class='operator'>=</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>int</span> x;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> B<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>x <span class='operator'>=</span> <span class='literal'>1</span>;              <span class='comment'>// specialize for <span class='tcode_in_codeblock'>T == int</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-4'><div class='marginalizedparent'><a class='marginalized' href='#general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6193'>#</a></div><div class='texpara'><div id='general-4.sentence-1' class='sentence'>An instantiated template specialization can be either implicitly
instantiated (<a href='#temp.inst' title='13.9.2&emsp;Implicit instantiation'>[temp.<span class='shy'></span>inst]</a>) for a given argument list or be explicitly
instantiated (<a href='#temp.explicit' title='13.9.3&emsp;Explicit instantiation'>[temp.<span class='shy'></span>explicit]</a>)<a class='hidden_link' href='#general-4.sentence-1'>.</a></div> <div id='general-4.sentence-2' class='sentence'>A <a class='hidden_link' href='#def:specialization' title='13.9.1&emsp;General&emsp;[temp.spec.general]'><span id='def:specialization'><i >specialization</i></span></a> is a class, variable, function, or class member that is either
instantiated (<a href='#temp.inst' title='13.9.2&emsp;Implicit instantiation'>[temp.<span class='shy'></span>inst]</a>) from a templated entity or is an
explicit specialization (<a href='#temp.expl.spec' title='13.9.4&emsp;Explicit specialization'>[temp.<span class='shy'></span>expl.<span class='shy'></span>spec]</a>) of a templated entity<a class='hidden_link' href='#general-4.sentence-2'>.</a></div></div></div><div class='para' id='general-5'><div class='marginalizedparent'><a class='marginalized' href='#general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6201'>#</a></div><div class='texpara'><div id='general-5.sentence-1' class='sentence'>For a given template and a given set of
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument'><span class='textsf'><i >template-argument</i></span></span></a><i >s</i>,
<ul class='itemize'><li id='general-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-5.1'>(5.1)</a></div>an explicit instantiation definition shall appear at most once in a program,</li><li id='general-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-5.2'>(5.2)</a></div>an explicit specialization shall be defined at most once
in a program, as specified in <a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>, and</li><li id='general-5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-5.3'>(5.3)</a></div>both an explicit instantiation and a declaration of an
explicit specialization shall not appear in a program unless
the explicit specialization is reachable from the explicit instantiation<a class='hidden_link' href='#general-5.sentence-1'>.</a></li></ul></div> <div id='general-5.sentence-2' class='sentence'>
An implementation is not required to diagnose a violation of this rule
if neither declaration is reachable from the other<a class='hidden_link' href='#general-5.sentence-2'>.</a></div></div></div><div class='para' id='general-6'><div class='marginalizedparent'><a class='marginalized' href='#general-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6218'>#</a></div><div class='texpara'><div id='general-6.sentence-1' class='sentence'>The usual access checking rules do not apply to names
in a declaration of an explicit instantiation or explicit specialization,
with the exception of names appearing in a function body,
default argument, <a href='class.derived.general#nt:base-clause' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:base-clause'><span class='textsf'><i >base-clause</i></span></span></a>, <a href='class.mem.general#nt:member-specification' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:member-specification'><span class='textsf'><i >member-specification</i></span></span></a>, <a href='dcl.enum#nt:enumerator-list' title='9.8.1&emsp;Enumeration declarations&emsp;[dcl.enum]'><span id='ntref:enumerator-list'><span class='textsf'><i >enumerator-list</i></span></span></a>,
or static data member or variable template initializer<a class='hidden_link' href='#general-6.sentence-1'>.</a></div> <div id='general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-1'>1</a></i>:&ensp;<div id='general-6.sentence-2' class='sentence'>In particular, the template arguments and names
used in the function declarator
(including parameter types, return types and exception specifications)
can be private types or objects that would normally not be accessible<a class='hidden_link' href='#general-6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='general-7'><div class='marginalizedparent'><a class='marginalized' href='#general-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6231'>#</a></div><div class='texpara'><div id='general-7.sentence-1' class='sentence'>Each class template specialization instantiated from a template has its own
copy of any static members<a class='hidden_link' href='#general-7.sentence-1'>.</a></div> <div id='general-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> T s;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T X<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>s <span class='operator'>=</span> <span class='literal'>0</span>;
X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> aa;
X<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> bb;
</span></div><div class='texpara'><div id='general-7.sentence-2' class='sentence'><span class='texttt'>X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span></span>
has a static member
<span class='texttt'>s</span>
of type
<span class='texttt'><span class='keyword'>int</span></span>
and
<span class='texttt'>X<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span></span>
has a static member
<span class='texttt'>s</span>
of type
<span class='texttt'><span class='keyword'>char</span><span class='operator'>*</span></span><a class='hidden_link' href='#general-7.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-8'><div class='marginalizedparent'><a class='marginalized' href='#general-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6257'>#</a></div><div class='texpara'><div id='general-8.sentence-1' class='sentence'>If a function declaration acquired its function type through
a <a href='temp.dep.type' title='13.8.3.2&emsp;Dependent types&emsp;[temp.dep.type]'>dependent type</a> without using the syntactic form of
a function declarator, the program is ill-formed<a class='hidden_link' href='#general-8.sentence-1'>.</a></div> <div id='general-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> T t;
<span class='curlybracket'>}</span>;
<span class='keyword'>typedef</span> <span class='keyword'>int</span> function<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
A<span class='anglebracket'>&lt;</span>function<span class='anglebracket'>&gt;</span> a;      <span class='comment'>// error: would declare <span class='tcode_in_codeblock'>A&lt;function&gt;&#x200b;::&#x200b;t</span> as a static member function</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='temp.inst' class='section'><h3 ><a class='secnum' href='#temp.inst' style='min-width:80pt'>13.9.2</a> Implicit instantiation <a class='abbr_ref' href='temp.inst'>[temp.inst]</a></h3><div class='para' id='temp.inst-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6273'>#</a></div><div class='texpara'><div id='temp.inst-1.sentence-1' class='sentence'>A template specialization <span class='math'><span class='mathalpha'>E</span></span> is a <a class='hidden_link' href='#def:specialization,declared' title='13.9.2&emsp;Implicit instantiation&emsp;[temp.inst]'><span id='def:specialization,declared'><i >declared specialization</i></span></a>
if there is a reachable
explicit instantiation definition (<a href='#temp.explicit' title='13.9.3&emsp;Explicit instantiation'>[temp.<span class='shy'></span>explicit]</a>) or
explicit specialization declaration (<a href='#temp.expl.spec' title='13.9.4&emsp;Explicit specialization'>[temp.<span class='shy'></span>expl.<span class='shy'></span>spec]</a>)
for <span class='math'><span class='mathalpha'>E</span></span>, or
if there is a reachable explicit instantiation declaration for <span class='math'><span class='mathalpha'>E</span></span> and
<span class='math'><span class='mathalpha'>E</span></span> is not
<ul class='itemize'><li id='temp.inst-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.inst-1.1'>(1.1)</a></div>an inline function,</li><li id='temp.inst-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.inst-1.2'>(1.2)</a></div>declared with a type deduced
from its initializer or return value (<a href='dcl.spec.auto' title='9.2.9.7&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>),</li><li id='temp.inst-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.inst-1.3'>(1.3)</a></div>a potentially-constant variable (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>), or</li><li id='temp.inst-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.inst-1.4'>(1.4)</a></div>a specialization of a templated class<a class='hidden_link' href='#temp.inst-1.sentence-1'>.</a></li></ul></div> <div id='temp.inst-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.inst-note-1'>1</a></i>:&ensp;<div id='temp.inst-1.sentence-2' class='sentence'>An implicit instantiation in an importing translation unit
cannot use names with internal linkage
from an imported translation unit (<a href='basic.link' title='6.6&emsp;Program and linkage'>[basic.<span class='shy'></span>link]</a>)<a class='hidden_link' href='#temp.inst-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.inst-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6298'>#</a></div><div class='texpara'><div id='temp.inst-2.sentence-1' class='sentence'><a class='index' id=':instantiation,template_implicit'></a>Unless a class template specialization is a declared specialization,
the class template specialization is implicitly instantiated when the
specialization is referenced in a context that requires a completely-defined
object type or when the completeness of the class type affects the semantics
of the program<a class='hidden_link' href='#temp.inst-2.sentence-1'>.</a></div> <div id='temp.inst-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.inst-note-2'>2</a></i>:&ensp;<div id='temp.inst-2.sentence-2' class='sentence'>In particular, if the semantics of an expression depend on the member or
base class lists of a class template specialization, the class template
specialization is implicitly generated<a class='hidden_link' href='#temp.inst-2.sentence-2'>.</a></div> <div id='temp.inst-2.sentence-3' class='sentence'>For instance, deleting a pointer
to class type depends on whether or not the class declares a destructor,
and a conversion between pointers to class type depends on the
inheritance relationship between the two classes involved<a class='hidden_link' href='#temp.inst-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.inst-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.inst-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> D <span class='operator'>:</span> <span class='keyword'>public</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span>D<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p, D<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> pp, D<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> ppp<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;             <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>D&lt;int&gt;</span> required: call <span class='tcode_in_codeblock'>f(B&lt;int&gt;*)</span></span>
  B<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> q <span class='operator'>=</span> pp;  <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>D&lt;char&gt;</span> required: convert <span class='tcode_in_codeblock'>D&lt;char&gt;*</span> to <span class='tcode_in_codeblock'>B&lt;char&gt;*</span></span>
  <span class='keyword'>delete</span> ppp;       <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>D&lt;double&gt;</span> required</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='temp.inst-2.sentence-4' class='sentence'>
If the template selected for the specialization (<a href='temp.spec.partial.match' title='13.7.6.2&emsp;Matching of partial specializations'>[temp.<span class='shy'></span>spec.<span class='shy'></span>partial.<span class='shy'></span>match]</a>)
has been declared, but not defined,
at the point of instantiation (<a href='temp.point' title='13.8.4.1&emsp;Point of instantiation'>[temp.<span class='shy'></span>point]</a>),
the instantiation yields an incomplete class type (<a href='basic.types.general#term.incomplete.type' title='6.8.1&emsp;General'>[basic.<span class='shy'></span>types.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#temp.inst-2.sentence-4'>.</a></div> <div id='temp.inst-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.inst-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X;
X<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> ch;         <span class='comment'>// error: incomplete type <span class='tcode_in_codeblock'>X&lt;char&gt;</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='temp.inst-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.inst-note-3'>3</a></i>:&ensp;<div id='temp.inst-2.sentence-5' class='sentence'>Within a template declaration,
a <a href='class.local' title='11.6&emsp;Local class declarations&emsp;[class.local]'>local class</a> or enumeration and the members of
a local class are never considered to be entities that can be separately
instantiated (this includes their default arguments,
<a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier'><span class='textsf'><i >noexcept-specifier</i></span></span></a><i >s</i>, and non-static data member
initializers, if any,
but not their <a href='temp.param#nt:type-constraint' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:type-constraint'><span class='textsf'><i >type-constraint</i></span></span></a><i >s</i> or <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause'><span class='textsf'><i >requires-clause</i></span></span></a><i >s</i>)<a class='hidden_link' href='#temp.inst-2.sentence-5'>.</a></div> <div id='temp.inst-2.sentence-6' class='sentence'>As a result, the dependent names are looked up, the
semantic constraints are checked, and any templates used are instantiated as
part of the instantiation of the entity within which the local class or
enumeration is declared<a class='hidden_link' href='#temp.inst-2.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.inst-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6352'>#</a></div><div class='texpara'><div id='temp.inst-3.sentence-1' class='sentence'>The implicit instantiation of a class template specialization causes
<ul class='itemize'><li id='temp.inst-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.inst-3.1'>(3.1)</a></div>the implicit instantiation of the declarations, but not of the definitions,
  of the non-deleted
  class member functions,
  member classes,
  scoped member enumerations,
  static data members,
  member templates, and
  friends; and</li><li id='temp.inst-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.inst-3.2'>(3.2)</a></div>the implicit instantiation of the definitions of
  deleted member functions,
  unscoped member enumerations, and
  member anonymous unions<a class='hidden_link' href='#temp.inst-3.sentence-1'>.</a></li></ul></div> <div id='temp.inst-3.sentence-2' class='sentence'>
The implicit instantiation of a class template specialization
does not cause the implicit instantiation of
default arguments or <a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier_'><span class='textsf'><i >noexcept-specifier</i></span></span></a><i >s</i>
of the class member functions<a class='hidden_link' href='#temp.inst-3.sentence-2'>.</a></div> <div id='temp.inst-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.inst-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> T x; <span class='curlybracket'>}</span>
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
<span class='curlybracket'>}</span>;
C<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span> c;                      <span class='comment'>// OK, definition of <span class='tcode_in_codeblock'>C&lt;void&gt;&#x200b;::&#x200b;f</span> is not instantiated at this point</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> C<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> <span class='comment'>// error: redefinition of <span class='tcode_in_codeblock'>C&lt;int&gt;&#x200b;::&#x200b;g</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='temp.inst-3.sentence-3' class='sentence'>
However, for the purpose of determining whether an instantiated redeclaration
is valid according to <a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a> and <a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>,
an instantiated declaration that corresponds to a definition in the template
is considered to be a definition<a class='hidden_link' href='#temp.inst-3.sentence-3'>.</a></div> <div id='temp.inst-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.inst-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> Outer <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X, <span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Inner;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Inner<span class='anglebracket'>&lt;</span>T, Y<span class='anglebracket'>&gt;</span>;         <span class='comment'>// #1a</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Inner<span class='anglebracket'>&lt;</span>T, Y<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;     <span class='comment'>// #1b; OK, valid redeclaration of #1a</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Inner<span class='anglebracket'>&lt;</span>U, Y<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;     <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>;

Outer<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> outer;                          <span class='comment'>// error at #2</span>
</span></div><div class='texpara'><div id='temp.inst-3.sentence-4' class='sentence'><span class='texttt'>Outer<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>Inner<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, Y<span class='anglebracket'>&gt;</span></span> is redeclared at #1b<a class='hidden_link' href='#temp.inst-3.sentence-4'>.</a></div> <div id='temp.inst-3.sentence-5' class='sentence'>(It is not defined
but noted as being associated with a definition in <span class='texttt'>Outer<span class='anglebracket'>&lt;</span>T, U<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#temp.inst-3.sentence-5'>.</a>)</div> <div id='temp.inst-3.sentence-6' class='sentence'>#2
is also a redeclaration of #1a<a class='hidden_link' href='#temp.inst-3.sentence-6'>.</a></div> <div id='temp.inst-3.sentence-7' class='sentence'>It is noted as associated with a definition,
so it is an invalid redeclaration of the same partial specialization<a class='hidden_link' href='#temp.inst-3.sentence-7'>.</a></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Friendly <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
Friendly<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> fc;
Friendly<span class='anglebracket'>&lt;</span><span class='keyword'>float</span><span class='anglebracket'>&gt;</span> ff;                             <span class='comment'>// error: produces second definition of <span class='tcode_in_codeblock'>f(U)</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.inst-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6416'>#</a></div><div class='texpara'><div id='temp.inst-4.sentence-1' class='sentence'>Unless a member of a templated class is a declared specialization,
the specialization of the member is implicitly instantiated when the
specialization is referenced in a context that requires the member definition
to exist or
if the existence of the definition of the member
affects the semantics of the program;
in particular, the initialization (and any associated side effects) of a
static data member does not occur unless the static data member is itself used
in a way that requires the definition of the static data member to exist<a class='hidden_link' href='#temp.inst-4.sentence-1'>.</a></div></div></div><div class='para' id='temp.inst-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6427'>#</a></div><div class='texpara'><div id='temp.inst-5.sentence-1' class='sentence'>Unless a function template specialization is a declared specialization,
the function template specialization is implicitly instantiated when the
specialization is referenced in a context that requires a function definition
to exist or
if the existence of the definition affects the semantics of the program<a class='hidden_link' href='#temp.inst-5.sentence-1'>.</a></div> <div id='temp.inst-5.sentence-2' class='sentence'>A function whose declaration was instantiated from a friend function definition is
implicitly instantiated when it is referenced in a context that
requires a function definition to exist or
if the existence of the definition affects the semantics of the program<a class='hidden_link' href='#temp.inst-5.sentence-2'>.</a></div> <div id='temp.inst-5.sentence-3' class='sentence'>Unless a call is to a function template explicit specialization or
to a member function of an explicitly specialized class template,
a default argument for a function template or a member function of a
class template is implicitly instantiated when the function is
called in a context that requires the value of the default argument<a class='hidden_link' href='#temp.inst-5.sentence-3'>.</a></div> <div id='temp.inst-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.inst-note-4'>4</a></i>:&ensp;<div id='temp.inst-5.sentence-4' class='sentence'>An inline function
that is the subject of an explicit instantiation declaration
is not a declared specialization;
the intent is that it still be implicitly instantiated
when odr-used (<a href='basic.def.odr#term.odr.use' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>)
so that the body can be considered for inlining,
but that no out-of-line copy of it be generated in the translation unit<a class='hidden_link' href='#temp.inst-5.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.inst-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6452'>#</a></div><div class='texpara'><div id='temp.inst-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.inst-example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Z <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  Z<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> a;         <span class='comment'>// instantiation of class <span class='tcode_in_codeblock'>Z&lt;int&gt;</span> required</span>
  Z<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p;       <span class='comment'>// instantiation of class <span class='tcode_in_codeblock'>Z&lt;char&gt;</span> not required</span>
  Z<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> q;     <span class='comment'>// instantiation of class <span class='tcode_in_codeblock'>Z&lt;double&gt;</span> not required</span>

  a<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>Z&lt;int&gt;&#x200b;::&#x200b;f()</span> required</span>
  p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// instantiation of class <span class='tcode_in_codeblock'>Z&lt;char&gt;</span> required, and</span>
                    <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>Z&lt;char&gt;&#x200b;::&#x200b;g()</span> required</span>
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='temp.inst-6.sentence-1' class='sentence'>Nothing in this example requires
<span id=':class'><span class='texttt'><span class='keyword'>class</span></span></span>
<span class='texttt'>Z<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span></span>,
<span class='texttt'>Z<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
or
<span class='texttt'>Z<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
to be implicitly instantiated<a class='hidden_link' href='#temp.inst-6.sentence-1'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.inst-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6480'>#</a></div><div class='texpara'><div id='temp.inst-7.sentence-1' class='sentence'>Unless a variable template specialization is a declared specialization,
the variable template specialization is implicitly instantiated
when it is referenced in a context
that requires a variable definition to exist or
if the existence of the definition affects the semantics of the program<a class='hidden_link' href='#temp.inst-7.sentence-1'>.</a></div> <div id='temp.inst-7.sentence-2' class='sentence'>A default template argument for a variable template is implicitly instantiated
when the variable template is referenced in a context
that requires the value of the default argument<a class='hidden_link' href='#temp.inst-7.sentence-2'>.</a></div></div></div><div class='para' id='temp.inst-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6490'>#</a></div><div class='texpara'><div id='temp.inst-8.sentence-1' class='sentence'><a class='index' id=':definition,program_semantics_affected_by'></a><a class='index' id=':variable,program_semantics_affected_by_the_existence_of_a_variable_definition'></a><a class='index' id=':function,program_semantics_affected_by_the_existence_of_a_function_definition'></a><a class='index' id=':program_semantics,affected_by_the_existence_of_a_variable_or_function_definition'></a>The existence of a definition of a variable or function
is considered to affect the semantics of the program
if the variable or function
is needed for constant evaluation by an expression (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>),
even if constant evaluation of the expression is not required or
if constant expression evaluation does not use the definition<a class='hidden_link' href='#temp.inst-8.sentence-1'>.</a></div></div><div class='texpara'><div id='temp.inst-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.inst-example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> T<span class='operator'>::</span>value; <span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span> B, <span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span>B <span class='operator'>?</span> f<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> <span class='literal'>0</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span> B, <span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span> B, <span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='curlybracket'>{</span>B <span class='operator'>?</span> f<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> <span class='literal'>0</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span> B, <span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> x<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  g<span class='anglebracket'>&lt;</span><span class='literal'>false</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>; <span class='comment'>// OK, <span class='tcode_in_codeblock'>B ? f&lt;T&gt;() :&nbsp;0</span> is not potentially constant evaluated</span>
  h<span class='anglebracket'>&lt;</span><span class='literal'>false</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>; <span class='comment'>// error, instantiates <span class='tcode_in_codeblock'>f&lt;int&gt;</span> even though <span class='tcode_in_codeblock'>B</span> evaluates to <span class='tcode_in_codeblock'>false</span> and</span>
                    <span class='comment'>// list-initialization of <span class='tcode_in_codeblock'>int</span> from <span class='tcode_in_codeblock'>int</span> cannot be narrowing</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.inst-9'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6517'>#</a></div><div class='texpara'><div id='temp.inst-9.sentence-1' class='sentence'>If the function selected by <a href='over.match' title='12.2&emsp;Overload resolution&emsp;[over.match]'>overload resolution</a>
can be determined without instantiating a class template definition,
it is unspecified whether that instantiation actually takes place<a class='hidden_link' href='#temp.inst-9.sentence-1'>.</a></div> <div id='temp.inst-example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.inst-example-7'>7</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>S<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>S<span class='anglebracket'>&lt;</span><span class='keyword'>float</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span>S<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> sr<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>sr<span class='parenthesis'>)</span>;            <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>S&lt;int&gt;</span> allowed but not required</span>
                    <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>S&lt;float&gt;</span> allowed but not required</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.inst-10'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6538'>#</a></div><div class='texpara'><div id='temp.inst-10.sentence-1' class='sentence'>If a function template or a member function template specialization is used in
a way that involves overload resolution,
a declaration of the specialization is implicitly instantiated (<a href='temp.over' title='13.10.4&emsp;Overload resolution'>[temp.<span class='shy'></span>over]</a>)<a class='hidden_link' href='#temp.inst-10.sentence-1'>.</a></div></div></div><div class='para' id='temp.inst-11'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6543'>#</a></div><div class='texpara'><div id='temp.inst-11.sentence-1' class='sentence'>An implementation shall not implicitly instantiate a function template,
a variable template,
a member template, a non-virtual member function, a member class or
static data member of a templated class, or a substatement of a constexpr if
statement (<a href='stmt.if' title='8.5.2&emsp;The if statement'>[stmt.<span class='shy'></span>if]</a>), unless such instantiation is required<a class='hidden_link' href='#temp.inst-11.sentence-1'>.</a></div> <div id='temp.inst-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.inst-note-5'>5</a></i>:&ensp;<div id='temp.inst-11.sentence-2' class='sentence'>The instantiation of a generic lambda
does not require instantiation of
substatements of a constexpr if statement
within its <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement'><span class='textsf'><i >compound-statement</i></span></span></a>
unless the call operator template is instantiated<a class='hidden_link' href='#temp.inst-11.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.inst-11.sentence-3' class='sentence'>
It is unspecified whether or not an implementation implicitly instantiates a
virtual member function of a class template if the virtual member function would
not otherwise be instantiated<a class='hidden_link' href='#temp.inst-11.sentence-3'>.</a></div> <div id='temp.inst-11.sentence-4' class='sentence'>The use of a template specialization in
a default argument or default member initializer
shall not cause the template to be implicitly instantiated except
where needed to determine
the correctness of the default argument or default member initializer<a class='hidden_link' href='#temp.inst-11.sentence-4'>.</a></div> <div id='temp.inst-11.sentence-5' class='sentence'>The use of a default argument in a
function call causes specializations in the default argument to be implicitly
instantiated<a class='hidden_link' href='#temp.inst-11.sentence-5'>.</a></div> <div id='temp.inst-11.sentence-6' class='sentence'>Similarly, the use of a default member initializer
in a constructor definition or an aggregate initialization
causes specializations in the default member initializer to be instantiated<a class='hidden_link' href='#temp.inst-11.sentence-6'>.</a></div></div></div><div class='para' id='temp.inst-12'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6571'>#</a></div><div class='texpara'><div id='temp.inst-12.sentence-1' class='sentence'>If a templated function
<span class='texttt'>f</span>
is called in a way that requires a default argument to be used,
the dependent names are looked up, the semantics constraints are checked,
and the instantiation of any template used in the default argument
is done as if the default argument had been
an initializer used in a function template specialization with the same scope,
the same template parameters and the same access as that of the function template
<span class='texttt'>f</span>
used at that point, except that the scope in which a closure type is
declared (<a href='expr.prim.lambda.closure' title='7.5.6.2&emsp;Closure types'>[expr.<span class='shy'></span>prim.<span class='shy'></span>lambda.<span class='shy'></span>closure]</a>) — and therefore its associated namespaces —
remain as determined from the context of the definition for the default
argument<a class='hidden_link' href='#temp.inst-12.sentence-1'>.</a></div> <div id='temp.inst-12.sentence-2' class='sentence'>This analysis is called
<a class='hidden_link' href='#def:default_argument_instantiation' title='13.9.2&emsp;Implicit instantiation&emsp;[temp.inst]'><span id='def:default_argument_instantiation'><i >default argument instantiation</i></span></a><a class='hidden_link' href='#temp.inst-12.sentence-2'>.</a></div> <div id='temp.inst-12.sentence-3' class='sentence'>The instantiated default argument is then used as the argument of
<span class='texttt'>f</span><a class='hidden_link' href='#temp.inst-12.sentence-3'>.</a></div></div></div><div class='para' id='temp.inst-13'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6590'>#</a></div><div class='texpara'><div id='temp.inst-13.sentence-1' class='sentence'>Each default argument is instantiated independently<a class='hidden_link' href='#temp.inst-13.sentence-1'>.</a></div> <div id='temp.inst-example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.inst-example-8'>8</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T x, T y <span class='operator'>=</span> ydef<span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>, T z <span class='operator'>=</span> zdef<span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;

<span class='keyword'>class</span>  A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

A zdef<span class='parenthesis'>(</span>A<span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span>A a, A b, A c<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>a, b, c<span class='parenthesis'>)</span>;       <span class='comment'>// no default argument instantiation</span>
  f<span class='parenthesis'>(</span>a, b<span class='parenthesis'>)</span>;          <span class='comment'>// default argument <span class='tcode_in_codeblock'>z = zdef(T())</span> instantiated</span>
  f<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>;             <span class='comment'>// error: <span class='tcode_in_codeblock'>ydef</span> is not declared</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.inst-14'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6608'>#</a></div><div class='texpara'><div id='temp.inst-14.sentence-1' class='sentence'>The <a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier__'><span class='textsf'><i >noexcept-specifier</i></span></span></a> and <a href='dcl.contract.func#nt:function-contract-specifier' title='9.4.1&emsp;General&emsp;[dcl.contract.func]'><span id='ntref:function-contract-specifier'><span class='textsf'><i >function-contract-specifier</i></span></span></a><i >s</i>
of a function template specialization
are not instantiated along with the function declaration;
they are instantiated
when needed (<a href='except.spec' title='14.5&emsp;Exception specifications'>[except.<span class='shy'></span>spec]</a>, <a href='dcl.contract.func' title='9.4.1&emsp;General'>[dcl.<span class='shy'></span>contract.<span class='shy'></span>func]</a>)<a class='hidden_link' href='#temp.inst-14.sentence-1'>.</a></div> <div id='temp.inst-14.sentence-2' class='sentence'>If such a
specifier is needed but has not yet been
instantiated, the dependent names are looked up, the semantics constraints are
checked, and the instantiation of any template used in the
specifier is done as if it were being done as part
of instantiating the declaration of the specialization at that point<a class='hidden_link' href='#temp.inst-14.sentence-2'>.</a></div></div></div><div class='para nonNormativeOnly' id='temp.inst-15'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6620'>#</a></div><div class='texpara'><div id='temp.inst-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.inst-note-6'>6</a></i>:&ensp;<div id='temp.inst-15.sentence-1' class='sentence'><a href='temp.point' title='13.8.4.1&emsp;Point of instantiation'>[temp.<span class='shy'></span>point]</a> defines the point of instantiation of a template specialization<a class='hidden_link' href='#temp.inst-15.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.inst-16'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6625'>#</a></div><div class='texpara'><div id='temp.inst-16.sentence-1' class='sentence'>There is an <a class='index' id=':maximum_depth_of_recursive_template_instantiations'></a>implementation-defined quantity
that specifies the limit on the total depth of recursive instantiations (<a href='implimits' title='Annex B&emsp;(informative)&emsp;Implementation quantities'>[implimits]</a>),
which could involve more than one template<a class='hidden_link' href='#temp.inst-16.sentence-1'>.</a></div> <div id='temp.inst-16.sentence-2' class='sentence'>The result of an infinite recursion in instantiation is undefined<a class='hidden_link' href='#temp.inst-16.sentence-2'>.</a></div> <div id='temp.inst-example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.inst-example-9'>9</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  X<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> p;          <span class='comment'>// OK</span>
  X<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> a;          <span class='comment'>// implicit generation of <span class='tcode_in_codeblock'>X&lt;T&gt;</span> requires</span>
                    <span class='comment'>// the implicit instantiation of <span class='tcode_in_codeblock'>X&lt;T*&gt;</span> which requires</span>
                    <span class='comment'>// the implicit instantiation of <span class='tcode_in_codeblock'>X&lt;T**&gt;</span> which &hellip;</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.inst-17'><div class='marginalizedparent'><a class='marginalized' href='#temp.inst-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6641'>#</a></div><div class='texpara'><div id='temp.inst-17.sentence-1' class='sentence'>The <a href='temp.param#nt:type-constraint' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:type-constraint_'><span class='textsf'><i >type-constraint</i></span></span></a><i >s</i> and <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause_'><span class='textsf'><i >requires-clause</i></span></span></a>
of a template specialization or member function
are not instantiated along with the specialization or function itself,
even for a member function of a local class;
substitution into the atomic constraints formed from them is instead performed
as specified in <a href='temp.constr.decl' title='13.5.3&emsp;Constrained declarations'>[temp.<span class='shy'></span>constr.<span class='shy'></span>decl]</a> and <a href='temp.constr.atomic' title='13.5.2.3&emsp;Atomic constraints'>[temp.<span class='shy'></span>constr.<span class='shy'></span>atomic]</a>
when determining whether the constraints are satisfied
or as specified in <a href='temp.constr.decl' title='13.5.3&emsp;Constrained declarations'>[temp.<span class='shy'></span>constr.<span class='shy'></span>decl]</a> when comparing declarations<a class='hidden_link' href='#temp.inst-17.sentence-1'>.</a></div> <div id='temp.inst-note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.inst-note-7'>7</a></i>:&ensp;<div id='temp.inst-17.sentence-2' class='sentence'>The satisfaction of constraints is determined during
template argument deduction (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>) and
overload resolution (<a href='over.match' title='12.2&emsp;Overload resolution'>[over.<span class='shy'></span>match]</a>)<a class='hidden_link' href='#temp.inst-17.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.inst-example-10' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.inst-example-10'>10</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>2</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> D <span class='operator'>=</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>4</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>         <span class='comment'>// #1</span>
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>requires</span> D<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>         <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>;

S<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> s1;                     <span class='comment'>// error: no matching constructor</span>
S<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>8</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> s2;                  <span class='comment'>// OK, calls #2</span>
</span> <div id='temp.inst-17.sentence-3' class='sentence'>
When <span class='texttt'>S<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span></span> is instantiated, both constructors are part of the
specialization<a class='hidden_link' href='#temp.inst-17.sentence-3'>.</a></div> <div id='temp.inst-17.sentence-4' class='sentence'>Their constraints are not satisfied, and
they suppress the implicit declaration of a default constructor for
<span class='texttt'>S<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span></span> (<a href='class.default.ctor' title='11.4.5.2&emsp;Default constructors'>[class.<span class='shy'></span>default.<span class='shy'></span>ctor]</a>), so there is no viable constructor
for <span class='texttt'>s1</span><a class='hidden_link' href='#temp.inst-17.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div> <div id='temp.inst-example-11' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.inst-example-11'>11</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S1 <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span>
    <span class='keyword'>requires</span> <span class='literal'>false</span>
  <span class='keyword'>struct</span> Inner1;                <span class='comment'>// ill-formed, no diagnostic required</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S2 <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span>
    <span class='keyword'>requires</span> <span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='squarebracket'>[</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>1</span><span class='parenthesis'>)</span>
  <span class='keyword'>struct</span> Inner2;                <span class='comment'>// ill-formed, no diagnostic required</span>
<span class='curlybracket'>}</span>;
</span> <div id='temp.inst-17.sentence-5' class='sentence'>
The class <span class='texttt'>S1<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>Inner1</span> is ill-formed, no diagnostic required, because
it has no valid specializations<a class='hidden_link' href='#temp.inst-17.sentence-5'>.</a></div> <div id='temp.inst-17.sentence-6' class='sentence'><span class='texttt'>S2</span> is ill-formed, no diagnostic required, since no substitution into
the constraints of its <span class='texttt'>Inner2</span> template would result in a valid
expression<a class='hidden_link' href='#temp.inst-17.sentence-6'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='temp.explicit' class='section'><h3 ><a class='secnum' href='#temp.explicit' style='min-width:80pt'>13.9.3</a> Explicit instantiation <a class='abbr_ref' href='temp.explicit'>[temp.explicit]</a></h3><div class='para' id='temp.explicit-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.explicit-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6697'>#</a></div><div class='texpara'><div id='temp.explicit-1.sentence-1' class='sentence'><a class='index' id=':instantiation,explicit'></a>A class, function, variable, or member template specialization can be explicitly
instantiated from its template<a class='hidden_link' href='#temp.explicit-1.sentence-1'>.</a></div> <div id='temp.explicit-1.sentence-2' class='sentence'>A member function, member class or static data member of a class template can
be explicitly instantiated from the member definition associated with its class
template<a class='hidden_link' href='#temp.explicit-1.sentence-2'>.</a></div></div></div><div class='para' id='temp.explicit-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.explicit-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6706'>#</a></div><div class='texpara'><div id='temp.explicit-2.sentence-1' class='sentence'>The syntax for explicit instantiation is:
<div class='bnf' id='nt:explicit-instantiation'>
<a class='hidden_link' href='#nt:explicit-instantiation' title='13.9.3&emsp;Explicit instantiation&emsp;[temp.explicit]'><span id='nt:explicit-instantiation'><span id=':explicit-instantiation'>explicit-instantiation<span class='textnormal'>:</span></span></span></a><br><span id=':extern'><span class='texttt'><span class='keyword'>extern</span></span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span id=':template_'><span class='texttt'><span class='keyword'>template</span></span></span> <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration'><span class='textsf'><i >declaration</i></span></span></a>
</div></div></div><div class='texpara'><div id='temp.explicit-2.sentence-2' class='sentence'>There are two forms of explicit instantiation: an explicit instantiation
definition and an explicit instantiation declaration<a class='hidden_link' href='#temp.explicit-2.sentence-2'>.</a></div> <div id='temp.explicit-2.sentence-3' class='sentence'>An explicit instantiation
declaration begins with the <span id=':extern_'><span class='texttt'><span class='keyword'>extern</span></span></span> keyword<a class='hidden_link' href='#temp.explicit-2.sentence-3'>.</a></div></div></div><div class='para' id='temp.explicit-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.explicit-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6717'>#</a></div><div class='texpara'><div id='temp.explicit-3.sentence-1' class='sentence'>An explicit instantiation shall not use
a <a href='dcl.stc#nt:storage-class-specifier' title='9.2.2&emsp;Storage class specifiers&emsp;[dcl.stc]'><span id='ntref:storage-class-specifier'><span class='textsf'><i >storage-class-specifier</i></span></span></a> (<a href='dcl.stc' title='9.2.2&emsp;Storage class specifiers'>[dcl.<span class='shy'></span>stc]</a>)
other than <span id=':thread_local'><span class='texttt'><span class='keyword'>thread_<span class='shy'></span>local</span></span></span><a class='hidden_link' href='#temp.explicit-3.sentence-1'>.</a></div> <div id='temp.explicit-3.sentence-2' class='sentence'>An explicit instantiation of a
function template,
member function of a class template, or
variable template
shall not
use the <span id=':inline'><span class='texttt'><span class='keyword'>inline</span></span></span>, <span id=':constexpr'><span class='texttt'><span class='keyword'>constexpr</span></span></span>, or <span id=':consteval'><span class='texttt'><span class='keyword'>consteval</span></span></span> specifiers<a class='hidden_link' href='#temp.explicit-3.sentence-2'>.</a></div> <div id='temp.explicit-3.sentence-3' class='sentence'>No <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.13.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a> (<a href='dcl.attr.grammar' title='9.13.1&emsp;Attribute syntax and semantics'>[dcl.<span class='shy'></span>attr.<span class='shy'></span>grammar]</a>)
shall appertain to an explicit instantiation<a class='hidden_link' href='#temp.explicit-3.sentence-3'>.</a></div></div></div><div class='para' id='temp.explicit-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.explicit-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6730'>#</a></div><div class='texpara'><div id='temp.explicit-4.sentence-1' class='sentence'>If the explicit instantiation is for a class or member class, the
<a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.5&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a> in the <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration_'><span class='textsf'><i >declaration</i></span></span></a>
shall include a <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id_'><span class='textsf'><i >simple-template-id</i></span></span></a>;
otherwise, the <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration__'><span class='textsf'><i >declaration</i></span></span></a>
shall be a <a href='dcl.pre#nt:simple-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:simple-declaration'><span class='textsf'><i >simple-declaration</i></span></span></a> whose <a href='dcl.decl.general#nt:init-declarator-list' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:init-declarator-list'><span class='textsf'><i >init-declarator-list</i></span></span></a>
comprises a single <a href='dcl.decl.general#nt:init-declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:init-declarator'><span class='textsf'><i >init-declarator</i></span></span></a>
that does not have an <a href='dcl.init.general#nt:initializer' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer'><span class='textsf'><i >initializer</i></span></span></a><a class='hidden_link' href='#temp.explicit-4.sentence-1'>.</a></div> <div id='temp.explicit-4.sentence-2' class='sentence'>If the explicit instantiation is for a variable template specialization,
the <a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id'><span class='textsf'><i >unqualified-id</i></span></span></a> in the <a href='dcl.decl.general#nt:declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator'><span class='textsf'><i >declarator</i></span></span></a>
shall be a <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id__'><span class='textsf'><i >simple-template-id</i></span></span></a><a class='hidden_link' href='#temp.explicit-4.sentence-2'>.</a></div> <div id='temp.explicit-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.explicit-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span> <span class='keyword'>void</span> mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='keyword'>class</span> Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='keyword'>void</span> Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;       <span class='comment'>// argument is deduced here (<a href='temp.arg.explicit' title='13.10.2&emsp;Explicit template argument specification'>[temp.<span class='shy'></span>arg.<span class='shy'></span>explicit]</a>)</span>

<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> N<span class='operator'>::</span>f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.explicit-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.explicit-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6757'>#</a></div><div class='texpara'><div id='temp.explicit-5.sentence-1' class='sentence'>An explicit instantiation does not introduce a name (<a href='basic.scope.scope' title='6.4.1&emsp;General'>[basic.<span class='shy'></span>scope.<span class='shy'></span>scope]</a>)<a class='hidden_link' href='#temp.explicit-5.sentence-1'>.</a></div> <div id='temp.explicit-5.sentence-2' class='sentence'>A declaration of a function template, a variable template, a member function
or static data member
of a class template, or a member function template of a class or class
template shall be reachable from any explicit instantiation of that entity<a class='hidden_link' href='#temp.explicit-5.sentence-2'>.</a></div> <div id='temp.explicit-5.sentence-3' class='sentence'>A definition
of a class template, a member class of a class template, or a member class
template of a class or class template shall be reachable from any explicit instantiation
of that entity unless an explicit
specialization of the entity with the same template arguments
is reachable therefrom<a class='hidden_link' href='#temp.explicit-5.sentence-3'>.</a></div> <div id='temp.explicit-5.sentence-4' class='sentence'>If the <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration___'><span class='textsf'><i >declaration</i></span></span></a>
of the explicit instantiation names an implicitly-declared special member
function (<a href='special' title='11.4.4&emsp;Special member functions'>[special]</a>), the program is ill-formed<a class='hidden_link' href='#temp.explicit-5.sentence-4'>.</a></div></div></div><div class='para' id='temp.explicit-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.explicit-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6773'>#</a></div><div class='texpara'><div id='temp.explicit-6.sentence-1' class='sentence'>The <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration____'><span class='textsf'><i >declaration</i></span></span></a> in an <a href='#nt:explicit-instantiation' title='13.9.3&emsp;Explicit instantiation&emsp;[temp.explicit]'><span id='ntref:explicit-instantiation'><span class='textsf'><i >explicit-instantiation</i></span></span></a> and
the <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration_____'><span class='textsf'><i >declaration</i></span></span></a> produced by the corresponding substitution
into the templated function, variable, or class
are two declarations of the same entity<a class='hidden_link' href='#temp.explicit-6.sentence-1'>.</a></div> <div id='temp.explicit-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.explicit-note-1'>1</a></i>:&ensp;<div id='temp.explicit-6.sentence-2' class='sentence'>These declarations need to have matching types as specified in <a href='basic.link' title='6.6&emsp;Program and linkage'>[basic.<span class='shy'></span>link]</a>, except as specified in <a href='except.spec' title='14.5&emsp;Exception specifications'>[except.<span class='shy'></span>spec]</a><a class='hidden_link' href='#temp.explicit-6.sentence-2'>.</a></div> <div id='temp.explicit-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.explicit-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> T var <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='keyword'>float</span> var<span class='anglebracket'>&lt;</span><span class='keyword'>float</span><span class='anglebracket'>&gt;</span>;      <span class='comment'>// OK, instantiated variable has type <span class='tcode_in_codeblock'>float</span></span>
<span class='keyword'>template</span> <span class='keyword'>int</span> var<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='squarebracket'>[</span><span class='literal'>16</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span>;    <span class='comment'>// OK, absence of major array bound is permitted</span>
<span class='keyword'>template</span> <span class='keyword'>int</span> <span class='operator'>*</span>var<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;         <span class='comment'>// error: instantiated variable has type <span class='tcode_in_codeblock'>int</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> av <span class='operator'>=</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='keyword'>int</span> av<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;           <span class='comment'>// OK, variable with type <span class='tcode_in_codeblock'>int</span> can be redeclared with type <span id=':auto'><span class='tcode_in_codeblock'>auto</span></span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;         <span class='comment'>// error: function with deduced return type</span>
                                <span class='comment'>// redeclared with non-deduced return type (<a href='dcl.spec.auto' title='9.2.9.7&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>)</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.explicit-6.sentence-3' class='sentence'>
Despite its syntactic form, the <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration______'><span class='textsf'><i >declaration</i></span></span></a> in an <a href='#nt:explicit-instantiation' title='13.9.3&emsp;Explicit instantiation&emsp;[temp.explicit]'><span id='ntref:explicit-instantiation_'><span class='textsf'><i >explicit-instantiation</i></span></span></a> for a variable is not itself a definition and does not conflict with the definition instantiated by an explicit instantiation definition for that variable<a class='hidden_link' href='#temp.explicit-6.sentence-3'>.</a></div></div></div><div class='para' id='temp.explicit-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.explicit-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6798'>#</a></div><div class='texpara'><div id='temp.explicit-7.sentence-1' class='sentence'>For a given set of template arguments, if an explicit
instantiation of a template appears after a declaration of
an explicit specialization for that template, the explicit
instantiation has no effect<a class='hidden_link' href='#temp.explicit-7.sentence-1'>.</a></div> <div id='temp.explicit-7.sentence-2' class='sentence'>Otherwise, for an explicit instantiation
definition, the definition of a
function template, a variable template, a member
function template, or a member function or static
data member of a class template shall be present in every
translation unit in which it is explicitly instantiated<a class='hidden_link' href='#temp.explicit-7.sentence-2'>.</a></div></div></div><div class='para nonNormativeOnly' id='temp.explicit-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.explicit-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6809'>#</a></div><div class='texpara'><div id='temp.explicit-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.explicit-note-2'>2</a></i>:&ensp;<div id='temp.explicit-8.sentence-1' class='sentence'>An explicit instantiation of a constrained template needs
to satisfy that template's associated constraints (<a href='temp.constr.decl' title='13.5.3&emsp;Constrained declarations'>[temp.<span class='shy'></span>constr.<span class='shy'></span>decl]</a>)<a class='hidden_link' href='#temp.explicit-8.sentence-1'>.</a></div> <div id='temp.explicit-8.sentence-2' class='sentence'>The satisfaction of constraints is determined
when forming the template name of an explicit instantiation
in which all template arguments are specified (<a href='temp.names' title='13.3&emsp;Names of template specializations'>[temp.<span class='shy'></span>names]</a>),
or, for explicit instantiations of function templates,
during template argument deduction (<a href='temp.deduct.decl' title='13.10.3.7&emsp;Deducing template arguments from a function declaration'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>decl]</a>)
when one or more trailing template arguments are left unspecified<a class='hidden_link' href='#temp.explicit-8.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.explicit-9'><div class='marginalizedparent'><a class='marginalized' href='#temp.explicit-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6822'>#</a></div><div class='texpara'><div id='temp.explicit-9.sentence-1' class='sentence'>An explicit instantiation that names a class
template specialization is also an explicit
instantiation of the same kind (declaration or definition) of each
of its direct non-template members
that has not been previously explicitly specialized in
the translation unit containing the explicit instantiation,
provided that the associated constraints, if any,
of that member are satisfied by the template arguments of the explicit
instantiation (<a href='temp.constr.decl' title='13.5.3&emsp;Constrained declarations'>[temp.<span class='shy'></span>constr.<span class='shy'></span>decl]</a>, <a href='temp.constr.constr' title='13.5.2&emsp;Constraints'>[temp.<span class='shy'></span>constr.<span class='shy'></span>constr]</a>),
except as described below<a class='hidden_link' href='#temp.explicit-9.sentence-1'>.</a></div> <div id='temp.explicit-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.explicit-note-3'>3</a></i>:&ensp;<div id='temp.explicit-9.sentence-2' class='sentence'>In addition, it will typically be an explicit instantiation of certain
<a class='index' id=':implementation-dependent'></a>implementation-dependent data about the class<a class='hidden_link' href='#temp.explicit-9.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.explicit-10'><div class='marginalizedparent'><a class='marginalized' href='#temp.explicit-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6839'>#</a></div><div class='texpara'><div id='temp.explicit-10.sentence-1' class='sentence'>An explicit instantiation definition that names a class template
specialization explicitly instantiates the class template specialization
and is an explicit instantiation definition of only those
members that have been defined at the point of instantiation<a class='hidden_link' href='#temp.explicit-10.sentence-1'>.</a></div></div></div><div class='para' id='temp.explicit-11'><div class='marginalizedparent'><a class='marginalized' href='#temp.explicit-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6845'>#</a></div><div class='texpara'><div id='temp.explicit-11.sentence-1' class='sentence'>An explicit instantiation of a prospective destructor (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)
shall correspond to the selected destructor of the class<a class='hidden_link' href='#temp.explicit-11.sentence-1'>.</a></div></div></div><div class='para' id='temp.explicit-12'><div class='marginalizedparent'><a class='marginalized' href='#temp.explicit-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6849'>#</a></div><div class='texpara'><div id='temp.explicit-12.sentence-1' class='sentence'>If an entity is the subject of both an explicit instantiation declaration
and an explicit instantiation definition in the same translation unit, the
definition shall follow the declaration<a class='hidden_link' href='#temp.explicit-12.sentence-1'>.</a></div> <div id='temp.explicit-12.sentence-2' class='sentence'>An entity that is the subject of an
explicit instantiation declaration and that is also used
in a way that would otherwise cause an <a href='#temp.inst' title='13.9.2&emsp;Implicit instantiation&emsp;[temp.inst]'>implicit instantiation</a>
in the translation unit
shall be the subject of an explicit instantiation definition somewhere in the
program; otherwise the program is ill-formed, no diagnostic required<a class='hidden_link' href='#temp.explicit-12.sentence-2'>.</a></div> <div id='temp.explicit-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.explicit-note-4'>4</a></i>:&ensp;<div id='temp.explicit-12.sentence-3' class='sentence'>This rule does apply to inline functions even though an
explicit instantiation declaration of such an entity has no other normative
effect<a class='hidden_link' href='#temp.explicit-12.sentence-3'>.</a></div> <div id='temp.explicit-12.sentence-4' class='sentence'>This is needed to ensure that if the address of an inline function is
taken in a translation unit in which the implementation chose to suppress the
out-of-line body, another translation unit will supply the body<a class='hidden_link' href='#temp.explicit-12.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.explicit-12.sentence-5' class='sentence'>
An explicit instantiation declaration shall not name a specialization of a
template with internal linkage<a class='hidden_link' href='#temp.explicit-12.sentence-5'>.</a></div></div></div><div class='para' id='temp.explicit-13'><div class='marginalizedparent'><a class='marginalized' href='#temp.explicit-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6868'>#</a></div><div class='texpara'><div id='temp.explicit-13.sentence-1' class='sentence'>An explicit instantiation does not constitute a use of a default argument,
so default argument instantiation is not done<a class='hidden_link' href='#temp.explicit-13.sentence-1'>.</a></div> <div id='temp.explicit-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.explicit-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>char</span><span class='operator'>*</span> p <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T g<span class='parenthesis'>(</span>T x <span class='operator'>=</span> <span class='operator'>&amp;</span>p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>int</span> g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK even though <span class='tcode_in_codeblock'>&amp;p</span> isn't an <span class='tcode_in_codeblock'>int</span>.</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='temp.expl.spec' class='section'><h3 ><a class='secnum' href='#temp.expl.spec' style='min-width:80pt'>13.9.4</a> Explicit specialization <a class='abbr_ref' href='temp.expl.spec'>[temp.expl.spec]</a></h3><div class='para' id='temp.expl.spec-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6881'>#</a></div><div class='texpara'><div id='temp.expl.spec-1.sentence-1' class='sentence'><a class='index' id=':specialization,template_explicit'></a>An explicit specialization of any of the following:
<ul class='itemize'><li id='temp.expl.spec-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.expl.spec-1.1'>(1.1)</a></div>function template</li><li id='temp.expl.spec-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.expl.spec-1.2'>(1.2)</a></div>class template</li><li id='temp.expl.spec-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.expl.spec-1.3'>(1.3)</a></div>variable template</li><li id='temp.expl.spec-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.expl.spec-1.4'>(1.4)</a></div>member function of a class template</li><li id='temp.expl.spec-1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.expl.spec-1.5'>(1.5)</a></div>static data member of a class template</li><li id='temp.expl.spec-1.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.expl.spec-1.6'>(1.6)</a></div>member class of a class template</li><li id='temp.expl.spec-1.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.expl.spec-1.7'>(1.7)</a></div>member enumeration of a class template</li><li id='temp.expl.spec-1.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.expl.spec-1.8'>(1.8)</a></div>member class template of a class or class template</li><li id='temp.expl.spec-1.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.expl.spec-1.9'>(1.9)</a></div>member function template of a class or class template</li></ul>
can be declared by a declaration introduced by
<span class='texttt'><span id=':template__'><span class='texttt'><span class='keyword'>template</span></span></span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span>;
that is:
<a class='index' id=':explicit-specialization'></a>
<div class='bnf' id='nt:explicit-specialization'>
<a class='hidden_link' href='#nt:explicit-specialization' title='13.9.4&emsp;Explicit specialization&emsp;[temp.expl.spec]'><span id='nt:explicit-specialization'><span id=':explicit-specialization_'>explicit-specialization<span class='textnormal'>:</span></span></span></a><br><span id=':template___'><span class='texttt'><span class='keyword'>template</span></span></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration_______'><span class='textsf'><i >declaration</i></span></span></a>
</div></div></div><div class='texpara'><div id='temp.expl.spec-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.expl.spec-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> stream;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> stream<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;    <span class='comment'>// #1</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;         <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;            <span class='comment'>// #3 template argument is deduced (<a href='temp.arg.explicit' title='13.10.2&emsp;Explicit template argument specification'>[temp.<span class='shy'></span>arg.<span class='shy'></span>explicit]</a>)</span>
</span></div><div class='texpara'><div id='temp.expl.spec-1.sentence-2' class='sentence'>Given these declarations,
#1 will be used as the definition of streams of
<span class='texttt'><span class='keyword'>char</span></span>s;
other streams will be handled by class template specializations instantiated
from the class template<a class='hidden_link' href='#temp.expl.spec-1.sentence-2'>.</a></div> <div id='temp.expl.spec-1.sentence-3' class='sentence'>Similarly,
#2 will be used as the sort function for arguments of
type <span class='texttt'>Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span></span> and
#3 will be used for arguments
of type
<span class='texttt'>Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span></span>;
other
<span class='texttt'>Array</span>
types will be sorted by functions generated from the function template<a class='hidden_link' href='#temp.expl.spec-1.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.expl.spec-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6943'>#</a></div><div class='texpara'><div id='temp.expl.spec-2.sentence-1' class='sentence'>The <a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration________'><span class='textsf'><i >declaration</i></span></span></a> in an <a href='#nt:explicit-specialization' title='13.9.4&emsp;Explicit specialization&emsp;[temp.expl.spec]'><span id='ntref:explicit-specialization'><span class='textsf'><i >explicit-specialization</i></span></span></a>
shall not be an <a href='module.interface#nt:export-declaration' title='10.2&emsp;Export declaration&emsp;[module.interface]'><span id='ntref:export-declaration'><span class='textsf'><i >export-declaration</i></span></span></a><a class='hidden_link' href='#temp.expl.spec-2.sentence-1'>.</a></div> <div id='temp.expl.spec-2.sentence-2' class='sentence'>An explicit specialization shall not use
a <a href='dcl.stc#nt:storage-class-specifier' title='9.2.2&emsp;Storage class specifiers&emsp;[dcl.stc]'><span id='ntref:storage-class-specifier_'><span class='textsf'><i >storage-class-specifier</i></span></span></a> (<a href='dcl.stc' title='9.2.2&emsp;Storage class specifiers'>[dcl.<span class='shy'></span>stc]</a>)
other than <span id=':thread_local_'><span class='texttt'><span class='keyword'>thread_<span class='shy'></span>local</span></span></span><a class='hidden_link' href='#temp.expl.spec-2.sentence-2'>.</a></div></div></div><div class='para' id='temp.expl.spec-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6950'>#</a></div><div class='texpara'><div id='temp.expl.spec-3.sentence-1' class='sentence'>An explicit specialization
may be declared in any scope in which the corresponding primary template
may be defined (<a href='dcl.meaning' title='9.3.4&emsp;Meaning of declarators'>[dcl.<span class='shy'></span>meaning]</a>, <a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>, <a href='temp.mem' title='13.7.3&emsp;Member templates'>[temp.<span class='shy'></span>mem]</a>)<a class='hidden_link' href='#temp.expl.spec-3.sentence-1'>.</a></div></div></div><div class='para' id='temp.expl.spec-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6955'>#</a></div><div class='texpara'><div id='temp.expl.spec-4.sentence-1' class='sentence'>An explicit specialization does not introduce a name (<a href='basic.scope.scope' title='6.4.1&emsp;General'>[basic.<span class='shy'></span>scope.<span class='shy'></span>scope]</a>)<a class='hidden_link' href='#temp.expl.spec-4.sentence-1'>.</a></div> <div id='temp.expl.spec-4.sentence-2' class='sentence'>A declaration of a function template, class template, or variable template being explicitly
specialized shall be reachable from the declaration of
the explicit specialization<a class='hidden_link' href='#temp.expl.spec-4.sentence-2'>.</a></div> <div id='temp.expl.spec-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.expl.spec-note-1'>1</a></i>:&ensp;<div id='temp.expl.spec-4.sentence-3' class='sentence'>A declaration, but not a definition of the template is needed<a class='hidden_link' href='#temp.expl.spec-4.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.expl.spec-4.sentence-4' class='sentence'>
The definition of a class or class template shall be reachable from the
declaration of an explicit specialization for a member template of the class
or class template<a class='hidden_link' href='#temp.expl.spec-4.sentence-4'>.</a></div> <div id='temp.expl.spec-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.expl.spec-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;          <span class='comment'>// error: <span class='tcode_in_codeblock'>X</span> not a template</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;        <span class='comment'>// OK, <span class='tcode_in_codeblock'>X</span> is a template</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.expl.spec-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6976'>#</a></div><div class='texpara'><div id='temp.expl.spec-5.sentence-1' class='sentence'>A member function, a member function template, a member class,
a member enumeration, a
member class template,
a static data member, or a static data member template of a class template
may be explicitly specialized for a class specialization that is implicitly
instantiated;
in this case, the definition of the class template shall
be reachable from the explicit specialization for the member of the class
template<a class='hidden_link' href='#temp.expl.spec-5.sentence-1'>.</a></div> <div id='temp.expl.spec-5.sentence-2' class='sentence'>If such an explicit specialization for the member of a class template names an
implicitly-declared special member function (<a href='special' title='11.4.4&emsp;Special member functions'>[special]</a>),
the program is ill-formed<a class='hidden_link' href='#temp.expl.spec-5.sentence-2'>.</a></div></div></div><div class='para' id='temp.expl.spec-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L6990'>#</a></div><div class='texpara'><div id='temp.expl.spec-6.sentence-1' class='sentence'>A member of an explicitly specialized class is not implicitly
instantiated from the member declaration of the class template;
instead, the member of the class template specialization shall itself be
explicitly defined if its definition is required<a class='hidden_link' href='#temp.expl.spec-6.sentence-1'>.</a></div> <div id='temp.expl.spec-6.sentence-2' class='sentence'>The definition of the class template explicit specialization
shall be reachable from the definition of any member of it<a class='hidden_link' href='#temp.expl.spec-6.sentence-2'>.</a></div> <div id='temp.expl.spec-6.sentence-3' class='sentence'>The definition of an explicitly specialized class is unrelated to the
definition of a generated specialization<a class='hidden_link' href='#temp.expl.spec-6.sentence-3'>.</a></div> <div id='temp.expl.spec-6.sentence-4' class='sentence'>That is, its members need
not have the same names, types, etc.&nbsp;as the members of a generated
specialization<a class='hidden_link' href='#temp.expl.spec-6.sentence-4'>.</a></div> <div id='temp.expl.spec-6.sentence-5' class='sentence'>Members of an explicitly specialized
class template are defined in the same manner as members of normal classes, and
not using the <span class='texttt'><span id=':template____'><span class='texttt'><span class='keyword'>template</span></span></span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span> syntax<a class='hidden_link' href='#temp.expl.spec-6.sentence-5'>.</a></div> <div id='temp.expl.spec-6.sentence-6' class='sentence'>The same is true when defining a member of an explicitly specialized member
class<a class='hidden_link' href='#temp.expl.spec-6.sentence-6'>.</a></div> <div id='temp.expl.spec-6.sentence-7' class='sentence'>However, <span class='texttt'><span id=':template_____'><span class='texttt'><span class='keyword'>template</span></span></span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span> is used in defining a member of an explicitly
specialized member class template that is specialized as a class template<a class='hidden_link' href='#temp.expl.spec-6.sentence-7'>.</a></div> <div id='temp.expl.spec-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.expl.spec-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> a;
  a<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='literal'>16</span><span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;int&gt;&#x200b;::&#x200b;f</span> must be defined somewhere</span>
<span class='curlybracket'>}</span>

<span class='comment'>// <span class='tcode_in_codeblock'><span id=':template______'><span class='tcode_in_codeblock'>template</span></span>&lt;&gt;</span> not used for a member of an explicitly specialized class template</span>
<span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='comment'>// <span class='tcode_in_codeblock'><span id=':template_______'><span class='tcode_in_codeblock'>template</span></span>&lt;&gt;</span> also not used when defining a member of an explicitly specialized member class</span>
<span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>C <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='comment'>// <span class='tcode_in_codeblock'><span id=':template________'><span class='tcode_in_codeblock'>template</span></span>&lt;&gt;</span> is used when defining a member of an explicitly specialized member class template</span>
<span class='comment'>// specialized as a class template</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>C<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>              <span class='comment'>// error: <span class='tcode_in_codeblock'><span id=':template_________'><span class='tcode_in_codeblock'>template</span></span>&lt;&gt;</span> not permitted</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>C <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>C<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>    <span class='comment'>// error: <span class='tcode_in_codeblock'><span id=':template__________'><span class='tcode_in_codeblock'>template</span></span>&lt;&gt;</span> required</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.expl.spec-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L7053'>#</a></div><div class='texpara'><div id='temp.expl.spec-7.sentence-1' class='sentence'>If a template, a member template or a member of a class template is explicitly
specialized, a declaration of that specialization shall be reachable from
every use of
that specialization that would cause an implicit instantiation to take place,
in every translation unit in which such a use occurs;
no diagnostic is required<a class='hidden_link' href='#temp.expl.spec-7.sentence-1'>.</a></div> <div id='temp.expl.spec-7.sentence-2' class='sentence'>If the program does not provide a definition for an explicit specialization and
either the specialization is used in a way that would cause an implicit
instantiation to take place or the member is a virtual member function,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#temp.expl.spec-7.sentence-2'>.</a></div> <div id='temp.expl.spec-7.sentence-3' class='sentence'>An implicit instantiation is never generated for an explicit specialization
that is declared but not defined<a class='hidden_link' href='#temp.expl.spec-7.sentence-3'>.</a></div> <div id='temp.expl.spec-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.expl.spec-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> String <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>String<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  sort<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;          <span class='comment'>// use primary template <span class='tcode_in_codeblock'>sort(Array&lt;T&gt;&amp;)</span>, <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>String</span></span>
<span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='anglebracket'>&lt;</span>String<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>String<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span>;     <span class='comment'>// error: specialization after use of primary template</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span>;            <span class='comment'>// OK, <span class='tcode_in_codeblock'>sort&lt;char*&gt;</span> not yet used</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>enum</span> E <span class='operator'>:</span> T;
  <span class='keyword'>enum</span> <span class='keyword'>class</span> S <span class='operator'>:</span> T;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>enum</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>E <span class='operator'>:</span> <span class='keyword'>int</span> <span class='curlybracket'>{</span> eint <span class='curlybracket'>}</span>;           <span class='comment'>// OK</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>enum</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>S <span class='operator'>:</span> <span class='keyword'>int</span> <span class='curlybracket'>{</span> sint <span class='curlybracket'>}</span>;     <span class='comment'>// OK</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>enum</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>E <span class='operator'>:</span> T <span class='curlybracket'>{</span> eT <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>enum</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>S <span class='operator'>:</span> T <span class='curlybracket'>{</span> sT <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>enum</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>E <span class='operator'>:</span> <span class='keyword'>char</span> <span class='curlybracket'>{</span> echar <span class='curlybracket'>}</span>;        <span class='comment'>// error: <span class='tcode_in_codeblock'>A&lt;char&gt;&#x200b;::&#x200b;E</span> was instantiated</span>
                                                    <span class='comment'>// when <span class='tcode_in_codeblock'>A&lt;char&gt;</span> was instantiated</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>enum</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>S <span class='operator'>:</span> <span class='keyword'>char</span> <span class='curlybracket'>{</span> schar <span class='curlybracket'>}</span>;  <span class='comment'>// OK</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.expl.spec-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L7092'>#</a></div><div class='texpara'><div id='temp.expl.spec-8.sentence-1' class='sentence'>The placement of explicit specialization declarations for function templates, class
templates, variable templates,
member functions of class templates, static data members of class
templates, member classes of class templates, member enumerations of class
templates, member class templates of class
templates, member function templates of class templates,
static data member templates of class templates,
member functions of
member templates of class templates, member functions of member templates of
non-template classes,
static data member templates of non-template classes,
member function templates of member classes of class
templates, etc., and the placement of partial specialization declarations
of class templates, variable templates,
member class templates of non-template classes,
static data member templates of non-template classes, member
class templates of class templates, etc., can affect whether a program is
well-formed according to the relative positioning of the explicit specialization
declarations and their points of instantiation in the translation unit as
specified above and below<a class='hidden_link' href='#temp.expl.spec-8.sentence-1'>.</a></div> <div id='temp.expl.spec-8.sentence-2' class='sentence'>When writing a specialization, be careful about its location;
or to make it compile will be such a trial as to kindle its self-immolation<a class='hidden_link' href='#temp.expl.spec-8.sentence-2'>.</a></div></div></div><div class='para' id='temp.expl.spec-9'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L7116'>#</a></div><div class='texpara'><div id='temp.expl.spec-9.sentence-1' class='sentence'>A
<a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id___'><span class='textsf'><i >simple-template-id</i></span></span></a>
that names a class template explicit specialization that has been declared but
not defined can be used exactly like the names of other incompletely-defined
classes (<a href='basic.types' title='6.8&emsp;Types'>[basic.<span class='shy'></span>types]</a>)<a class='hidden_link' href='#temp.expl.spec-9.sentence-1'>.</a></div> <div id='temp.expl.spec-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.expl.spec-example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X;                      <span class='comment'>// <span class='tcode_in_codeblock'>X</span> is a class template</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;

X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p;                                      <span class='comment'>// OK, pointer to declared class <span class='tcode_in_codeblock'>X&lt;int&gt;</span></span>
X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> x;                                       <span class='comment'>// error: object of incomplete class <span class='tcode_in_codeblock'>X&lt;int&gt;</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.expl.spec-10'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L7132'>#</a></div><div class='texpara'><div id='temp.expl.spec-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.expl.spec-note-2'>2</a></i>:&ensp;<div id='temp.expl.spec-10.sentence-1' class='sentence'>An explicit specialization of a constrained template needs
to satisfy that template's associated constraints (<a href='temp.constr.decl' title='13.5.3&emsp;Constrained declarations'>[temp.<span class='shy'></span>constr.<span class='shy'></span>decl]</a>)<a class='hidden_link' href='#temp.expl.spec-10.sentence-1'>.</a></div> <div id='temp.expl.spec-10.sentence-2' class='sentence'>The satisfaction of constraints is determined
when forming the template name of an explicit specialization
in which all template arguments are specified (<a href='temp.names' title='13.3&emsp;Names of template specializations'>[temp.<span class='shy'></span>names]</a>),
or, for explicit specializations of function templates,
during template argument deduction (<a href='temp.deduct.decl' title='13.10.3.7&emsp;Deducing template arguments from a function declaration'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>decl]</a>)
when one or more trailing template arguments are left unspecified<a class='hidden_link' href='#temp.expl.spec-10.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.expl.spec-11'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L7144'>#</a></div><div class='texpara'><div id='temp.expl.spec-11.sentence-1' class='sentence'>A function with the same name as a template and a type that exactly matches that
of a template specialization is not an explicit specialization (<a href='temp.fct' title='13.7.7&emsp;Function templates'>[temp.<span class='shy'></span>fct]</a>)<a class='hidden_link' href='#temp.expl.spec-11.sentence-1'>.</a></div></div></div><div class='para' id='temp.expl.spec-12'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L7148'>#</a></div><div class='texpara'><div id='temp.expl.spec-12.sentence-1' class='sentence'>Whether an explicit specialization of a function or variable template
is inline, constexpr, constinit, or consteval
is determined by the explicit specialization and
is independent of those properties of the template<a class='hidden_link' href='#temp.expl.spec-12.sentence-1'>.</a></div> <div id='temp.expl.spec-12.sentence-2' class='sentence'>Similarly,
attributes and <a href='dcl.contract.func#nt:function-contract-specifier' title='9.4.1&emsp;General&emsp;[dcl.contract.func]'><span id='ntref:function-contract-specifier_'><span class='textsf'><i >function-contract-specifier</i></span></span></a><i >s</i>
appearing in the declaration of a template
have no effect on an explicit specialization of that template<a class='hidden_link' href='#temp.expl.spec-12.sentence-2'>.</a></div> <div id='temp.expl.spec-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.expl.spec-example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>inline</span> T g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>inline</span> <span class='keyword'>void</span> f<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>   <span class='comment'>// OK, inline</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> g<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>           <span class='comment'>// OK, not inline</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='anglebracket'>&gt;</span> <span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>[</span>maybe_unused<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>int</span> i<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='comment'>// Implementations are expected not to warn that the function returns</span>
    <span class='comment'>// but can warn about the unused parameter.</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.expl.spec-13'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L7173'>#</a></div><div class='texpara'><div id='temp.expl.spec-13.sentence-1' class='sentence'>An explicit specialization of a static data member of a template
or an explicit specialization of a static data member template is a
definition if the declaration includes an initializer;
otherwise, it is a declaration<a class='hidden_link' href='#temp.expl.spec-13.sentence-1'>.</a></div> <div id='temp.expl.spec-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.expl.spec-note-3'>3</a></i>:&ensp;<div id='temp.expl.spec-13.sentence-2' class='sentence'>The definition of a static data member of a template
for which default-initialization is desired
can use functional cast notation (<a href='expr.type.conv' title='7.6.1.4&emsp;Explicit type conversion (functional notation)'>[expr.<span class='shy'></span>type.<span class='shy'></span>conv]</a>):
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> X Q<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>x;                         <span class='comment'>// declaration</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> X Q<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>x <span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                      <span class='comment'>// error: declares a function</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> X Q<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>x <span class='operator'>=</span> X<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                   <span class='comment'>// definition</span>
</span></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.expl.spec-14'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L7189'>#</a></div><div class='texpara'><div id='temp.expl.spec-14.sentence-1' class='sentence'>A member or a member template of a class template may be explicitly specialized
for a given implicit instantiation of the class template, even if the member
or member template is defined in the class template definition<a class='hidden_link' href='#temp.expl.spec-14.sentence-1'>.</a></div> <div id='temp.expl.spec-14.sentence-2' class='sentence'>An explicit specialization of a member or member template is specified using the
syntax for explicit specialization<a class='hidden_link' href='#temp.expl.spec-14.sentence-2'>.</a></div> <div id='temp.expl.spec-example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.expl.spec-example-7'>7</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X1<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g1<span class='parenthesis'>(</span>T, X1<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X2<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g2<span class='parenthesis'>(</span>T, X2<span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> h<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='comment'>// specialization</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;

<span class='comment'>// out of class member template definition</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X1<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>g1<span class='parenthesis'>(</span>T, X1<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='comment'>// member template specialization</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X1<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>g1<span class='parenthesis'>(</span><span class='keyword'>int</span>, X1<span class='parenthesis'>)</span>;

<span class='comment'>// member template specialization</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>g1<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>char</span><span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>X1</span> deduced as <span class='tcode_in_codeblock'>char</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>g2<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>char</span><span class='parenthesis'>)</span>;     <span class='comment'>// <span class='tcode_in_codeblock'>X2</span> specified as <span class='tcode_in_codeblock'>char</span></span>

<span class='comment'>// member specialization even if defined in class definition</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.expl.spec-15'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L7224'>#</a></div><div class='texpara'><div id='temp.expl.spec-15.sentence-1' class='sentence'>A member or a member template may be nested within many enclosing class
templates<a class='hidden_link' href='#temp.expl.spec-15.sentence-1'>.</a></div> <div id='temp.expl.spec-15.sentence-2' class='sentence'>In an explicit specialization for such a member,
the member declaration shall be preceded by a
<span class='texttt'><span id=':template___________'><span class='texttt'><span class='keyword'>template</span></span></span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span>
for each enclosing class template that is explicitly specialized<a class='hidden_link' href='#temp.expl.spec-15.sentence-2'>.</a></div> <div id='temp.expl.spec-example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.expl.spec-example-8'>8</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span>
    <span class='keyword'>void</span> mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.expl.spec-16'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L7243'>#</a></div><div class='texpara'><div id='temp.expl.spec-16.sentence-1' class='sentence'>In an explicit specialization declaration for a member of a class template or
a member template that appears in namespace scope,
the member template and some of its enclosing class templates may remain
unspecialized,
except that the declaration shall not explicitly specialize a class member
template if its enclosing class templates are not explicitly specialized
as well<a class='hidden_link' href='#temp.expl.spec-16.sentence-1'>.</a></div> <div id='temp.expl.spec-16.sentence-2' class='sentence'>In such an explicit specialization declaration, the keyword
<span id=':template____________'><span class='texttt'><span class='keyword'>template</span></span></span>
followed by a
<a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list'><span class='textsf'><i >template-parameter-list</i></span></span></a>
shall be provided instead of the
<span class='texttt'><span id=':template_____________'><span class='texttt'><span class='keyword'>template</span></span></span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span>
preceding the explicit specialization declaration of the member<a class='hidden_link' href='#temp.expl.spec-16.sentence-2'>.</a></div> <div id='temp.expl.spec-16.sentence-3' class='sentence'>The types of the
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter'><span class='textsf'><i >template-parameter</i></span></span></a><i >s</i>
in the
<a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list_'><span class='textsf'><i >template-parameter-list</i></span></span></a>
shall be the same as those specified in the primary template definition<a class='hidden_link' href='#temp.expl.spec-16.sentence-3'>.</a></div> <div id='temp.expl.spec-example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.expl.spec-example-9'>9</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T3<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> mf1<span class='parenthesis'>(</span>T3<span class='parenthesis'>)</span>;
    <span class='keyword'>void</span> mf2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X<span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B <span class='curlybracket'>{</span>
      <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> mf1<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>mf1<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>mf2<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>       <span class='comment'>// error: <span class='tcode_in_codeblock'>B&lt;double&gt;</span> is specialized but</span>
                                        <span class='comment'>// its enclosing class template <span class='tcode_in_codeblock'>A</span> is not</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.expl.spec-17'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L7283'>#</a></div><div class='texpara'><div id='temp.expl.spec-17.sentence-1' class='sentence'>A specialization of a member function template, member class template,
or static data member template of
a non-specialized class template is itself a template<a class='hidden_link' href='#temp.expl.spec-17.sentence-1'>.</a></div></div></div><div class='para' id='temp.expl.spec-18'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L7288'>#</a></div><div class='texpara'><div id='temp.expl.spec-18.sentence-1' class='sentence'>An explicit specialization declaration shall not be a friend declaration<a class='hidden_link' href='#temp.expl.spec-18.sentence-1'>.</a></div></div></div><div class='para' id='temp.expl.spec-19'><div class='marginalizedparent'><a class='marginalized' href='#temp.expl.spec-19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/templates.tex#L7291'>#</a></div><div class='texpara'><div id='temp.expl.spec-19.sentence-1' class='sentence'>Default function arguments shall not be specified in a declaration or
a definition for one of the following explicit specializations:
<ul class='itemize'><li id='temp.expl.spec-19.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.expl.spec-19.1'>(19.1)</a></div>the explicit specialization of a function template;</li><li id='temp.expl.spec-19.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.expl.spec-19.2'>(19.2)</a></div>the explicit specialization of a member function template;</li><li id='temp.expl.spec-19.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.expl.spec-19.3'>(19.3)</a></div>the explicit specialization of a member function of a class template where
the class template specialization to which the member function specialization
belongs is implicitly instantiated<a class='hidden_link' href='#temp.expl.spec-19.sentence-1'>.</a> <div class='texpara'><div id='temp.expl.spec-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.expl.spec-note-4'>4</a></i>:&ensp;<div id='temp.expl.spec-19.3.sentence-2' class='sentence'>Default function arguments can be specified in the declaration or
definition of a member function of a class template specialization that is
explicitly specialized<a class='hidden_link' href='#temp.expl.spec-19.3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li></ul></div></div></div></div></div></body></html>