<!DOCTYPE html><html lang='en'><head><title>[class.init]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>11</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>11.9</a> Initialization <a class='abbr_ref'>[class.init]</a></h2><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:80pt'>11.9.1</a> General <a class='abbr_ref' href='class.init.general'>[class.init.general]</a></h3><div class='texpara'><a class='index' id=':initialization,class_object'></a><a class='index' id=':initialization,default_constructor_and'></a><a class='index' id=':initialization,constructor_and'></a></div><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5274'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'>When no initializer is specified for an object of (possibly
cv-qualified) class type (or array thereof), or the initializer has
the form
<span class='texttt'><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
the object is initialized as specified in <a href='dcl.init' title='9.5&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a><a class='hidden_link' href='#general-1.sentence-1'>.</a></div></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5281'>#</a></div><div class='texpara'><div id='general-2.sentence-1' class='sentence'>An object of class type (or array thereof) can be explicitly initialized;
see <a href='#class.expl.init' title='11.9.2&emsp;Explicit initialization'>[class.<span class='shy'></span>expl.<span class='shy'></span>init]</a> and <a href='#class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a><a class='hidden_link' href='#general-2.sentence-1'>.</a></div></div></div><div class='para' id='general-3'><div class='marginalizedparent'><a class='marginalized' href='#general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5285'>#</a></div><div class='texpara'><div id='general-3.sentence-1' class='sentence'><a class='index' id=':order_of_execution,constructor_and_array'></a>When an array of class objects is initialized
(either explicitly or implicitly) and the elements are initialized by constructor,
the constructor shall be called for each element of the array,
following the subscript order; see <a href='dcl.array' title='9.3.4.5&emsp;Arrays'>[dcl.<span class='shy'></span>array]</a><a class='hidden_link' href='#general-3.sentence-1'>.</a></div> <div id='general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-1'>1</a></i>:&ensp;<div id='general-3.sentence-2' class='sentence'>Destructors for the array elements are called in reverse order of their
construction<a class='hidden_link' href='#general-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='class.expl.init' class='section'><h3 ><a class='secnum' href='#class.expl.init' style='min-width:80pt'>11.9.2</a> Explicit initialization <a class='abbr_ref' href='class.expl.init'>[class.expl.init]</a></h3><div class='texpara'><a class='index' id=':initialization,explicit'></a><a class='index' id=':initialization,constructor_and_'></a></div><div class='para' id='class.expl.init-1'><div class='marginalizedparent'><a class='marginalized' href='#class.expl.init-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5300'>#</a></div><div class='texpara'><div id='class.expl.init-1.sentence-1' class='sentence'>An object of class type can be initialized with a parenthesized
<a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list'><span class='textsf'><i >expression-list</i></span></span></a>,
where the
<a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list_'><span class='textsf'><i >expression-list</i></span></span></a>
is construed as an argument list for a constructor
that is called to initialize the object<a class='hidden_link' href='#class.expl.init-1.sentence-1'>.</a></div> <div id='class.expl.init-1.sentence-2' class='sentence'>Alternatively, a single
<a href='expr.assign#nt:assignment-expression' title='7.6.19&emsp;Assignment and compound assignment operators&emsp;[expr.assign]'><span id='ntref:assignment-expression'><span class='textsf'><i >assignment-expression</i></span></span></a>
can be specified as an
<a href='dcl.init.general#nt:initializer' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer'><span class='textsf'><i >initializer</i></span></span></a>
using the
<span class='texttt'><span class='operator'>=</span></span>
form of initialization<a class='hidden_link' href='#class.expl.init-1.sentence-2'>.</a></div> <div id='class.expl.init-1.sentence-3' class='sentence'>Either direct-initialization semantics or copy-initialization semantics apply;
see <a href='dcl.init' title='9.5&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a><a class='hidden_link' href='#class.expl.init-1.sentence-3'>.</a></div> <div id='class.expl.init-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.expl.init-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> complex <span class='curlybracket'>{</span>
  complex<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  complex<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span>;
  complex<span class='parenthesis'>(</span><span class='keyword'>double</span>,<span class='keyword'>double</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

complex sqrt<span class='parenthesis'>(</span>complex,complex<span class='parenthesis'>)</span>;

complex a<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                   <span class='comment'>// initialized by calling <span class='tcode_in_codeblock'>complex(double)</span> with argument <span class='tcode_in_codeblock'>1</span></span>
complex b <span class='operator'>=</span> a;                  <span class='comment'>// initialized as a copy of <span class='tcode_in_codeblock'>a</span></span>
complex c <span class='operator'>=</span> complex<span class='parenthesis'>(</span><span class='literal'>1</span>,<span class='literal'>2</span><span class='parenthesis'>)</span>;       <span class='comment'>// initialized by calling <span class='tcode_in_codeblock'>complex(double,double)</span> with arguments <span class='tcode_in_codeblock'>1</span> and <span class='tcode_in_codeblock'>2</span></span>
complex d <span class='operator'>=</span> sqrt<span class='parenthesis'>(</span>b,c<span class='parenthesis'>)</span>;          <span class='comment'>// initialized by calling <span class='tcode_in_codeblock'>sqrt(complex,complex)</span> with <span class='tcode_in_codeblock'>d</span> as its result object</span>
complex e;                      <span class='comment'>// initialized by calling <span class='tcode_in_codeblock'>complex()</span></span>
complex f <span class='operator'>=</span> <span class='literal'>3</span>;                  <span class='comment'>// initialized by calling <span class='tcode_in_codeblock'>complex(double)</span> with argument <span class='tcode_in_codeblock'>3</span></span>
complex g <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>;           <span class='comment'>// initialized by calling <span class='tcode_in_codeblock'>complex(double, double)</span> with arguments <span class='tcode_in_codeblock'>1</span> and <span class='tcode_in_codeblock'>2</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='class.expl.init-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.expl.init-note-1'>1</a></i>:&ensp;<div id='class.expl.init-1.sentence-4' class='sentence'><a class='index' id=':initialization,overloaded_assignment_and'></a>Overloading of the assignment operator (<a href='over.assign' title='12.4.3.2&emsp;Simple assignment'>[over.<span class='shy'></span>assign]</a>)
has no effect on initialization<a class='hidden_link' href='#class.expl.init-1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='class.expl.init-2'><div class='marginalizedparent'><a class='marginalized' href='#class.expl.init-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5341'>#</a></div><div class='texpara'><div id='class.expl.init-2.sentence-1' class='sentence'><a class='index' id=':initialization,array_of_class_objects'></a><a class='index' id=':constructor,array_of_class_objects_and'></a>An object of class type can also be initialized by a
<a href='dcl.init.general#nt:braced-init-list' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list'><span class='textsf'><i >braced-init-list</i></span></span></a><a class='hidden_link' href='#class.expl.init-2.sentence-1'>.</a></div> <div id='class.expl.init-2.sentence-2' class='sentence'>List-initialization semantics apply;
see <a href='dcl.init' title='9.5&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a> and <a href='dcl.init.list' title='9.5.5&emsp;List-initialization'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a><a class='hidden_link' href='#class.expl.init-2.sentence-2'>.</a></div> <div id='class.expl.init-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.expl.init-example-2'>2</a></i>:&ensp;<span class='codeblock'>complex v<span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, complex<span class='parenthesis'>(</span><span class='literal'>1</span>,<span class='literal'>2</span><span class='parenthesis'>)</span>, complex<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='class.expl.init-2.sentence-3' class='sentence'>Here,
<span class='texttt'>complex<span class='operator'>&#x200b;::&#x200b;</span>complex<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span></span>
is called for the initialization of
<span class='texttt'>v<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span>
and
<span class='texttt'>v<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span></span>,
<span class='texttt'>complex<span class='operator'>&#x200b;::&#x200b;</span>complex<span class='parenthesis'>(</span>&#x200b;<span class='keyword'>double</span>, <span class='keyword'>double</span><span class='parenthesis'>)</span></span>
is called for the initialization of
<span class='texttt'>v<span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span></span>,
<span class='texttt'>complex<span class='operator'>&#x200b;::&#x200b;</span>complex<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
is called for the initialization of
<span class='texttt'>v<span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span></span>,
<span class='texttt'>v<span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span></span>,
and
<span class='texttt'>v<span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#class.expl.init-2.sentence-3'>.</a></div> <div id='class.expl.init-2.sentence-4' class='sentence'>For another example,</div></div><div class='texpara'><span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i;
  <span class='keyword'>float</span> f;
  complex c;
<span class='curlybracket'>}</span> x <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>99</span>, <span class='literal'>88.8</span>, <span class='literal'>77.7</span> <span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='class.expl.init-2.sentence-5' class='sentence'>Here,
<span class='texttt'>x<span class='operator'>.</span>i</span>
is initialized with 99,
<span class='texttt'>x<span class='operator'>.</span>f</span>
is initialized with 88.8, and
<span class='texttt'>complex<span class='operator'>&#x200b;::&#x200b;</span>complex<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span></span>
is called for the initialization of
<span class='texttt'>x<span class='operator'>.</span>c</span><a class='hidden_link' href='#class.expl.init-2.sentence-5'>.</a></div> —&nbsp;<i>end example</i>]</div></div> <div id='class.expl.init-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.expl.init-note-2'>2</a></i>:&ensp;<div id='class.expl.init-2.sentence-6' class='sentence'>Braces can be elided in the
<a href='dcl.init.general#nt:initializer-list' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list'><span class='textsf'><i >initializer-list</i></span></span></a>
for any aggregate, even if the aggregate has members of a class type with
user-defined type conversions; see <a href='dcl.init.aggr' title='9.5.2&emsp;Aggregates'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a><a class='hidden_link' href='#class.expl.init-2.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='class.expl.init-3'><div class='marginalizedparent'><a class='marginalized' href='#class.expl.init-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5393'>#</a></div><div class='texpara'><div id='class.expl.init-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.expl.init-note-3'>3</a></i>:&ensp;<div id='class.expl.init-3.sentence-1' class='sentence'>If
<span class='texttt'>T</span>
is a class type with no default constructor,
any initializing declaration of an object of type
<span class='texttt'>T</span>
(or array thereof) is ill-formed if no
<a href='dcl.init.general#nt:initializer' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer_'><span class='textsf'><i >initializer</i></span></span></a>
is explicitly specified (see [class.<span class='shy'></span>init] and <a href='dcl.init' title='9.5&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#class.expl.init-3.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='class.expl.init-4'><div class='marginalizedparent'><a class='marginalized' href='#class.expl.init-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5405'>#</a></div><div class='texpara'><div id='class.expl.init-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.expl.init-note-4'>4</a></i>:&ensp;<div id='class.expl.init-4.sentence-1' class='sentence'><a class='index' id=':order_of_execution,constructor_and_static_data_members'></a>The order in which objects with static or thread storage duration
are initialized is described in <a href='basic.start.dynamic' title='6.9.3.3&emsp;Dynamic initialization of non-block variables'>[basic.<span class='shy'></span>start.<span class='shy'></span>dynamic]</a> and <a href='stmt.dcl' title='8.9&emsp;Declaration statement'>[stmt.<span class='shy'></span>dcl]</a><a class='hidden_link' href='#class.expl.init-4.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='class.base.init' class='section'><h3 ><a class='secnum' href='#class.base.init' style='min-width:80pt'>11.9.3</a> Initializing bases and members <a class='abbr_ref' href='class.base.init'>[class.base.init]</a></h3><div class='texpara'><a class='index' id=':initialization,base_class'></a><a class='index' id=':initialization,member'></a></div><div class='para' id='class.base.init-1'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5416'>#</a></div><div class='texpara'><div id='class.base.init-1.sentence-1' class='sentence'>In the definition of a constructor for a class,
initializers for direct and virtual base class subobjects and
non-static data members can be specified by a
<a href='#nt:ctor-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer'><span class='textsf'><i >ctor-initializer</i></span></span></a>,
which has the form
<div class='bnf' id='nt:ctor-initializer'>
<a class='hidden_link' href='#nt:ctor-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='nt:ctor-initializer'><span id=':ctor-initializer'>ctor-initializer<span class='textnormal'>:</span></span></span></a><br><span class='terminal'><span class='operator'>:</span></span> <a href='#nt:mem-initializer-list' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-list'><span class='textsf'><i >mem-initializer-list</i></span></span></a>
</div></div></div><div class='texpara'><div class='bnf' id='nt:mem-initializer-list'>
<a class='hidden_link' href='#nt:mem-initializer-list' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='nt:mem-initializer-list'><span id=':mem-initializer-list'>mem-initializer-list<span class='textnormal'>:</span></span></span></a><br><a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer'><span class='textsf'><i >mem-initializer</i></span></span></a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span><br><a href='#nt:mem-initializer-list' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-list_'><span class='textsf'><i >mem-initializer-list</i></span></span></a> <span class='terminal'>,</span> <a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer_'><span class='textsf'><i >mem-initializer</i></span></span></a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:mem-initializer'>
<a class='hidden_link' href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='nt:mem-initializer'><span id=':mem-initializer'>mem-initializer<span class='textnormal'>:</span></span></span></a><br><a href='#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-id'><span class='textsf'><i >mem-initializer-id</i></span></span></a> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list__'><span class='textsf'><i >expression-list</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>)</span></span><br><a href='#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-id_'><span class='textsf'><i >mem-initializer-id</i></span></span></a> <a href='dcl.init.general#nt:braced-init-list' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list_'><span class='textsf'><i >braced-init-list</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:mem-initializer-id'>
<a class='hidden_link' href='#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='nt:mem-initializer-id'><span id=':mem-initializer-id'>mem-initializer-id<span class='textnormal'>:</span></span></span></a><br><a href='class.derived.general#nt:class-or-decltype' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:class-or-decltype'><span class='textsf'><i >class-or-decltype</i></span></span></a><br><a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier'><span class='textsf'><i >identifier</i></span></span></a>
</div></div></div><div class='para' id='class.base.init-2'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5445'>#</a></div><div class='texpara'><div id='class.base.init-2.sentence-1' class='sentence'>Lookup for an unqualified name in a <a href='#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-id__'><span class='textsf'><i >mem-initializer-id</i></span></span></a>
ignores the constructor's function parameter scope<a class='hidden_link' href='#class.base.init-2.sentence-1'>.</a></div> <div id='class.base.init-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.base.init-note-1'>1</a></i>:&ensp;<div id='class.base.init-2.sentence-2' class='sentence'>If the constructor's class contains a member with the same name as a direct
or virtual base class of the class, a
<a href='#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-id___'><span class='textsf'><i >mem-initializer-id</i></span></span></a>
naming the member or base class and composed of a single identifier
refers to the class member<a class='hidden_link' href='#class.base.init-2.sentence-2'>.</a></div> <div id='class.base.init-2.sentence-3' class='sentence'>A
<a href='#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-id____'><span class='textsf'><i >mem-initializer-id</i></span></span></a>
for the hidden base class can be specified using a qualified name<a class='hidden_link' href='#class.base.init-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='class.base.init-2.sentence-4' class='sentence'>
Unless the
<a href='#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-id_____'><span class='textsf'><i >mem-initializer-id</i></span></span></a>
names the constructor's class,
a non-static data member of the constructor's class, or
a direct or virtual base of that class,
the
<a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer__'><span class='textsf'><i >mem-initializer</i></span></span></a>
is ill-formed<a class='hidden_link' href='#class.base.init-2.sentence-4'>.</a></div></div></div><div class='para' id='class.base.init-3'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5467'>#</a></div><div class='texpara'><div id='class.base.init-3.sentence-1' class='sentence'>A
<a href='#nt:mem-initializer-list' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-list__'><span class='textsf'><i >mem-initializer-list</i></span></span></a>
can initialize a base class using any <a href='class.derived.general#nt:class-or-decltype' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:class-or-decltype_'><span class='textsf'><i >class-or-decltype</i></span></span></a> that denotes that base class type<a class='hidden_link' href='#class.base.init-3.sentence-1'>.</a></div> <div id='class.base.init-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.base.init-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span> A<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>typedef</span> A global_A;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C<span class='operator'>:</span> <span class='keyword'>public</span> A, <span class='keyword'>public</span> B <span class='curlybracket'>{</span> C<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
C<span class='operator'>::</span>C<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>:</span> global_A<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>          <span class='comment'>// mem-initializer for base <span class='tcode_in_codeblock'>A</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.base.init-4'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5481'>#</a></div><div class='texpara'><div id='class.base.init-4.sentence-1' class='sentence'>If a
<a href='#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-id______'><span class='textsf'><i >mem-initializer-id</i></span></span></a>
is ambiguous because it designates both a direct non-virtual base class and
an indirect virtual base class, the
<a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer___'><span class='textsf'><i >mem-initializer</i></span></span></a>
is ill-formed<a class='hidden_link' href='#class.base.init-4.sentence-1'>.</a></div> <div id='class.base.init-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.base.init-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span> A<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B<span class='operator'>:</span> <span class='keyword'>public</span> <span class='keyword'>virtual</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C<span class='operator'>:</span> <span class='keyword'>public</span> A, <span class='keyword'>public</span> B <span class='curlybracket'>{</span> C<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
C<span class='operator'>::</span>C<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>:</span> A<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>                 <span class='comment'>// error: which <span class='tcode_in_codeblock'>A</span>?</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.base.init-5'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5497'>#</a></div><div class='texpara'><div id='class.base.init-5.sentence-1' class='sentence'>A
<a href='#nt:ctor-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer_'><span class='textsf'><i >ctor-initializer</i></span></span></a>
may initialize a variant member of the
constructor's class<a class='hidden_link' href='#class.base.init-5.sentence-1'>.</a></div> <div id='class.base.init-5.sentence-2' class='sentence'>If a
<a href='#nt:ctor-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer__'><span class='textsf'><i >ctor-initializer</i></span></span></a>
specifies more than one
<a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer____'><span class='textsf'><i >mem-initializer</i></span></span></a>
for the same member or for the same base class,
the
<a href='#nt:ctor-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer___'><span class='textsf'><i >ctor-initializer</i></span></span></a>
is ill-formed<a class='hidden_link' href='#class.base.init-5.sentence-2'>.</a></div></div></div><div class='para' id='class.base.init-6'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5511'>#</a></div><div class='texpara'><div id='class.base.init-6.sentence-1' class='sentence'>A <a href='#nt:mem-initializer-list' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-list___'><span class='textsf'><i >mem-initializer-list</i></span></span></a> can delegate to another
constructor of the constructor's class using any
<a href='class.derived.general#nt:class-or-decltype' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:class-or-decltype__'><span class='textsf'><i >class-or-decltype</i></span></span></a> that denotes the constructor's class itself<a class='hidden_link' href='#class.base.init-6.sentence-1'>.</a></div> <div id='class.base.init-6.sentence-2' class='sentence'>If a
<a href='#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-id_______'><span class='textsf'><i >mem-initializer-id</i></span></span></a> designates the constructor's class,
it shall be the only <a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer_____'><span class='textsf'><i >mem-initializer</i></span></span></a>; the constructor
is a <a class='hidden_link' href='#def:constructor,delegating' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='def:constructor,delegating'><i >delegating constructor</i></span></a>, and the constructor selected by the
<a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer______'><span class='textsf'><i >mem-initializer</i></span></span></a> is the <a class='hidden_link' href='#def:constructor,target' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='def:constructor,target'><i >target constructor</i></span></a><a class='hidden_link' href='#class.base.init-6.sentence-2'>.</a></div> <div id='class.base.init-6.sentence-3' class='sentence'>The target constructor is selected by overload resolution<a class='hidden_link' href='#class.base.init-6.sentence-3'>.</a></div> <div id='class.base.init-6.sentence-4' class='sentence'>Once the target constructor returns, the body of the delegating constructor
is executed<a class='hidden_link' href='#class.base.init-6.sentence-4'>.</a></div> <div id='class.base.init-6.sentence-5' class='sentence'>If a constructor delegates to itself directly or indirectly,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#class.base.init-6.sentence-5'>.</a></div> <div id='class.base.init-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.base.init-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  C<span class='parenthesis'>(</span> <span class='keyword'>int</span> <span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>                  <span class='comment'>// #1: non-delegating constructor</span>
  C<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>:</span> C<span class='parenthesis'>(</span><span class='literal'>42</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>                <span class='comment'>// #2: delegates to #1</span>
  C<span class='parenthesis'>(</span> <span class='keyword'>char</span> c <span class='parenthesis'>)</span> <span class='operator'>:</span> C<span class='parenthesis'>(</span><span class='literal'>42.0</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>     <span class='comment'>// #3: ill-formed due to recursion with #4</span>
  C<span class='parenthesis'>(</span> <span class='keyword'>double</span> d <span class='parenthesis'>)</span> <span class='operator'>:</span> C<span class='parenthesis'>(</span><span class='literal'>'a'</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>    <span class='comment'>// #4: ill-formed due to recursion with #3</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.base.init-7'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5534'>#</a></div><div class='texpara'><div id='class.base.init-7.sentence-1' class='sentence'><a class='index' id=':initialization,base_class_'></a><a class='index' id=':initialization,member_object'></a>The
<a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list___'><span class='textsf'><i >expression-list</i></span></span></a>
or <a href='dcl.init.general#nt:braced-init-list' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list__'><span class='textsf'><i >braced-init-list</i></span></span></a>
in a
<a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer_______'><span class='textsf'><i >mem-initializer</i></span></span></a>
is used to initialize the
designated subobject (or, in the case of a delegating constructor, the complete class object)
according to the initialization rules of <a href='dcl.init' title='9.5&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a> for direct-initialization<a class='hidden_link' href='#class.base.init-7.sentence-1'>.</a></div> <div id='class.base.init-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.base.init-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> B1 <span class='curlybracket'>{</span> B1<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>; <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B2 <span class='curlybracket'>{</span> B2<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>; <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D <span class='operator'>:</span> B1, B2 <span class='curlybracket'>{</span>
  D<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  B1 b;
  <span class='keyword'>const</span> <span class='keyword'>int</span> c;
<span class='curlybracket'>}</span>;

D<span class='operator'>::</span>D<span class='parenthesis'>(</span><span class='keyword'>int</span> a<span class='parenthesis'>)</span> <span class='operator'>:</span> B2<span class='parenthesis'>(</span>a<span class='operator'>+</span><span class='literal'>1</span><span class='parenthesis'>)</span>, B1<span class='parenthesis'>(</span>a<span class='operator'>+</span><span class='literal'>2</span><span class='parenthesis'>)</span>, c<span class='parenthesis'>(</span>a<span class='operator'>+</span><span class='literal'>3</span><span class='parenthesis'>)</span>, b<span class='parenthesis'>(</span>a<span class='operator'>+</span><span class='literal'>4</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
D d<span class='parenthesis'>(</span><span class='literal'>10</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div> <div id='class.base.init-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.base.init-note-2'>2</a></i>:&ensp;<div id='class.base.init-7.sentence-2' class='sentence'>The initialization
performed by each <a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer________'><span class='textsf'><i >mem-initializer</i></span></span></a>
constitutes a full-expression (<a href='intro.execution' title='6.9.1&emsp;Sequential execution'>[intro.<span class='shy'></span>execution]</a>)<a class='hidden_link' href='#class.base.init-7.sentence-2'>.</a></div> <div id='class.base.init-7.sentence-3' class='sentence'>Any expression in
a
<a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer_________'><span class='textsf'><i >mem-initializer</i></span></span></a>
is evaluated as part of the full-expression that performs the initialization<a class='hidden_link' href='#class.base.init-7.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='class.base.init-7.sentence-4' class='sentence'>
A <a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer__________'><span class='textsf'><i >mem-initializer</i></span></span></a> where the <a href='#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-id________'><span class='textsf'><i >mem-initializer-id</i></span></span></a> denotes
a virtual base class is ignored during execution of a constructor of any class that is
not the most derived class<a class='hidden_link' href='#class.base.init-7.sentence-4'>.</a></div></div></div><div class='para' id='class.base.init-8'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5572'>#</a></div><div class='texpara'><div id='class.base.init-8.sentence-1' class='sentence'>A temporary expression bound to a reference member in a <a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer___________'><span class='textsf'><i >mem-initializer</i></span></span></a>
is ill-formed<a class='hidden_link' href='#class.base.init-8.sentence-1'>.</a></div> <div id='class.base.init-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.base.init-example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  A<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> v<span class='parenthesis'>(</span><span class='literal'>42</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>   <span class='comment'>// error</span>
  <span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> v;
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.base.init-9'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5584'>#</a></div><div class='texpara'><div id='class.base.init-9.sentence-1' class='sentence'>In a non-delegating constructor
other than an implicitly-defined copy/move constructor (<a href='class.copy.ctor' title='11.4.5.3&emsp;Copy/move constructors'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>),
if a given potentially constructed subobject is not designated by a
<a href='#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-id_________'><span class='textsf'><i >mem-initializer-id</i></span></span></a>
(including the case where there is no
<a href='#nt:mem-initializer-list' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-list____'><span class='textsf'><i >mem-initializer-list</i></span></span></a>
because the constructor has no
<a href='#nt:ctor-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer____'><span class='textsf'><i >ctor-initializer</i></span></span></a>),
then
<ul class='itemize'><li id='class.base.init-9.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.base.init-9.1'>(9.1)</a></div>if the entity is a non-static data member that has
a default member initializer (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>) and either
<ul class='itemize'><li id='class.base.init-9.1.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#class.base.init-9.1.1'>(9.1.1)</a></div>the constructor's class is a union (<a href='class.union' title='11.5&emsp;Unions'>[class.<span class='shy'></span>union]</a>), and no other variant
member of that union is designated by a <a href='#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-id__________'><span class='textsf'><i >mem-initializer-id</i></span></span></a> or</li><li id='class.base.init-9.1.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#class.base.init-9.1.2'>(9.1.2)</a></div>the constructor's class is not a union, and, if the entity is a member of an
anonymous union, no other member of that union is designated by a
<a href='#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-id___________'><span class='textsf'><i >mem-initializer-id</i></span></span></a>,</li></ul>
the entity is initialized from its default member initializer
as specified in <a href='dcl.init' title='9.5&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>;</li><li id='class.base.init-9.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.base.init-9.2'>(9.2)</a></div>otherwise, if the entity is an anonymous union or a variant member (<a href='class.union.anon' title='11.5.2&emsp;Anonymous unions'>[class.<span class='shy'></span>union.<span class='shy'></span>anon]</a>), no initialization is performed;</li><li id='class.base.init-9.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.base.init-9.3'>(9.3)</a></div>otherwise, the entity is default-initialized (<a href='dcl.init' title='9.5&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#class.base.init-9.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='class.base.init-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.base.init-note-3'>3</a></i>:&ensp;<div id='class.base.init-9.sentence-2' class='sentence'>An abstract class (<a href='class.abstract' title='11.7.4&emsp;Abstract classes'>[class.<span class='shy'></span>abstract]</a>) is never a most derived
class, thus its constructors never initialize virtual base classes, therefore the
corresponding <a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer____________'><span class='textsf'><i >mem-initializer</i></span></span></a><i >s</i> can be omitted<a class='hidden_link' href='#class.base.init-9.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='class.base.init-9.sentence-3' class='sentence'>
An attempt to initialize more than one non-static data member of a union renders the
program ill-formed<a class='hidden_link' href='#class.base.init-9.sentence-3'>.</a></div> <a class='index' id=':initialization,const_member'></a><a class='index' id=':initialization,reference_member'></a><div id='class.base.init-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.base.init-note-4'>4</a></i>:&ensp;<div id='class.base.init-9.sentence-4' class='sentence'>After the call to a constructor for class
<span class='texttt'>X</span>
for an object with automatic or dynamic storage duration
has completed, if
the constructor was not invoked as part of value-initialization and
a member of
<span class='texttt'>X</span>
is neither initialized nor
given a value
during execution of the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement'><span class='textsf'><i >compound-statement</i></span></span></a> of the body of the constructor,
the member has an indeterminate or erroneous value (<a href='basic.indet' title='6.7.5&emsp;Indeterminate and erroneous values'>[basic.<span class='shy'></span>indet]</a>)<a class='hidden_link' href='#class.base.init-9.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div>
<div id='class.base.init-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.base.init-example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  A<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  B<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  C<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>               <span class='comment'>// initializes members as follows:</span>
  A a;                  <span class='comment'>// OK, calls <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;A()</span></span>
  <span class='keyword'>const</span> B b;            <span class='comment'>// error: <span class='tcode_in_codeblock'>B</span> has no default constructor</span>
  <span class='keyword'>int</span> i;                <span class='comment'>// OK, <span class='tcode_in_codeblock'>i</span> has indeterminate or erroneous value</span>
  <span class='keyword'>int</span> j <span class='operator'>=</span> <span class='literal'>5</span>;            <span class='comment'>// OK, <span class='tcode_in_codeblock'>j</span> has the value <span class='tcode_in_codeblock'>5</span></span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.base.init-10'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5655'>#</a></div><div class='texpara'><div id='class.base.init-10.sentence-1' class='sentence'>If a given non-static data member has both a default member initializer
and a <a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer_____________'><span class='textsf'><i >mem-initializer</i></span></span></a>, the initialization specified by the
<a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer______________'><span class='textsf'><i >mem-initializer</i></span></span></a> is performed, and the non-static data member's
default member initializer is ignored<a class='hidden_link' href='#class.base.init-10.sentence-1'>.</a></div> <div id='class.base.init-example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.base.init-example-7'>7</a></i>:&ensp;<div id='class.base.init-10.sentence-2' class='sentence'>Given
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='comment'>/* some integer expression with side effects */</span> ;
  A<span class='parenthesis'>(</span><span class='keyword'>int</span> arg<span class='parenthesis'>)</span> <span class='operator'>:</span> i<span class='parenthesis'>(</span>arg<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
  <span class='comment'>// ...</span>
<span class='curlybracket'>}</span>;
</span>
the <span class='texttt'>A<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span></span> constructor will simply initialize <span class='texttt'>i</span> to the value of
<span class='texttt'>arg</span>, and the
<a class='index' id=':side_effects'></a>side effects in <span class='texttt'>i</span>'s default member initializer
will not take place<a class='hidden_link' href='#class.base.init-10.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.base.init-11'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5679'>#</a></div><div class='texpara'><div id='class.base.init-11.sentence-1' class='sentence'>A temporary expression bound to a reference member from a
default member initializer is ill-formed<a class='hidden_link' href='#class.base.init-11.sentence-1'>.</a></div> <div id='class.base.init-example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.base.init-example-8'>8</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  A<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;        <span class='comment'>// OK</span>
  A<span class='parenthesis'>(</span><span class='keyword'>int</span> v<span class='parenthesis'>)</span> <span class='operator'>:</span> v<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>   <span class='comment'>// OK</span>
  <span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> v <span class='operator'>=</span> <span class='literal'>42</span>;    <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>;
A a1;                   <span class='comment'>// error: ill-formed binding of temporary to reference</span>
A a2<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                <span class='comment'>// OK, unfortunately</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.base.init-12'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5694'>#</a></div><div class='texpara'><div id='class.base.init-12.sentence-1' class='sentence'>In a non-delegating constructor, the destructor for each potentially constructed
subobject of class type is potentially invoked (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)<a class='hidden_link' href='#class.base.init-12.sentence-1'>.</a></div> <div id='class.base.init-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.base.init-note-5'>5</a></i>:&ensp;<div id='class.base.init-12.sentence-2' class='sentence'>This provision ensures that destructors can be called for fully-constructed
subobjects in case an exception is thrown (<a href='except.ctor' title='14.3&emsp;Stack unwinding'>[except.<span class='shy'></span>ctor]</a>)<a class='hidden_link' href='#class.base.init-12.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='class.base.init-13'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5702'>#</a></div><div class='texpara'><div id='class.base.init-13.sentence-1' class='sentence'>In a non-delegating constructor, initialization
proceeds in the following order:
<ul class='itemize'><li id='class.base.init-13.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.base.init-13.1'>(13.1)</a></div><div class='texpara'><div id='class.base.init-13.1.sentence-1' class='sentence'><a class='index' id=':initialization,order_of_virtual_base_class'></a>First, and only for the constructor of the most derived class (<a href='intro.object' title='6.7.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>),
virtual base classes are initialized in the order they appear on a
depth-first left-to-right traversal of the directed acyclic graph of
base classes,
where “left-to-right” is the order of appearance of the base classes
in the derived class
<a href='class.derived.general#nt:base-specifier-list' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:base-specifier-list'><span class='textsf'><i >base-specifier-list</i></span></span></a><a class='hidden_link' href='#class.base.init-13.1.sentence-1'>.</a></div></div></li><li id='class.base.init-13.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.base.init-13.2'>(13.2)</a></div><div class='texpara'><div id='class.base.init-13.2.sentence-1' class='sentence'><a class='index' id=':initialization,order_of_base_class'></a>Then, direct base classes are initialized in declaration order
as they appear in the
<a href='class.derived.general#nt:base-specifier-list' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:base-specifier-list_'><span class='textsf'><i >base-specifier-list</i></span></span></a>
(regardless of the order of the
<a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer_______________'><span class='textsf'><i >mem-initializer</i></span></span></a><i >s</i>)<a class='hidden_link' href='#class.base.init-13.2.sentence-1'>.</a></div></div></li><li id='class.base.init-13.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.base.init-13.3'>(13.3)</a></div><div class='texpara'><div id='class.base.init-13.3.sentence-1' class='sentence'><a class='index' id=':initialization,order_of_member'></a>Then, non-static data members are initialized in the order
they were declared in the class definition
(again regardless of the order of the
<a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer________________'><span class='textsf'><i >mem-initializer</i></span></span></a><i >s</i>)<a class='hidden_link' href='#class.base.init-13.3.sentence-1'>.</a></div></div></li><li id='class.base.init-13.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.base.init-13.4'>(13.4)</a></div><div class='texpara'><div id='class.base.init-13.4.sentence-1' class='sentence'>Finally, the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement_'><span class='textsf'><i >compound-statement</i></span></span></a> of the constructor
body  is executed<a class='hidden_link' href='#class.base.init-13.4.sentence-1'>.</a></div></div></li></ul></div></div><div class='texpara'><div id='class.base.init-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.base.init-note-6'>6</a></i>:&ensp;<div id='class.base.init-13.sentence-2' class='sentence'>The declaration order is mandated to ensure that base and member
subobjects are destroyed in the reverse order of initialization<a class='hidden_link' href='#class.base.init-13.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='class.base.init-14'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5738'>#</a></div><div class='texpara'><div id='class.base.init-example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.base.init-example-9'>9</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> V <span class='curlybracket'>{</span>
  V<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  V<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> A <span class='operator'>:</span> <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span>
  A<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  A<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> B <span class='operator'>:</span> <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span>
  B<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  B<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> C <span class='operator'>:</span> A, B, <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span>
  C<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  C<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

A<span class='operator'>::</span>A<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='operator'>:</span> V<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
B<span class='operator'>::</span>B<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
C<span class='operator'>::</span>C<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

V v<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;             <span class='comment'>// use <span class='tcode_in_codeblock'>V(int)</span></span>
A a<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span>;             <span class='comment'>// use <span class='tcode_in_codeblock'>V(int)</span></span>
B b<span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span>;             <span class='comment'>// use <span class='tcode_in_codeblock'>V()</span></span>
C c<span class='parenthesis'>(</span><span class='literal'>4</span><span class='parenthesis'>)</span>;             <span class='comment'>// use <span class='tcode_in_codeblock'>V()</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.base.init-15'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5772'>#</a></div><div class='texpara'><a class='index' id=':initializer,scope_of_member'></a><div id='class.base.init-note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.base.init-note-7'>7</a></i>:&ensp;<div id='class.base.init-15.sentence-1' class='sentence'>The <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list____'><span class='textsf'><i >expression-list</i></span></span></a> or <a href='dcl.init.general#nt:braced-init-list' title='9.5.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list___'><span class='textsf'><i >braced-init-list</i></span></span></a>
of a <a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer_________________'><span class='textsf'><i >mem-initializer</i></span></span></a>
is in the function parameter scope of the constructor
and can use <span id=':this'><span class='texttt'><span class='keyword'>this</span></span></span> to refer to the object being initialized<a class='hidden_link' href='#class.base.init-15.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div>
<div id='class.base.init-example-10' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.base.init-example-10'>10</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a;
  <span class='keyword'>int</span> b;
  <span class='keyword'>int</span> i;
  <span class='keyword'>int</span> j;
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> r;
  X<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span><span class='operator'>:</span> r<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>, b<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>, i<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>, j<span class='parenthesis'>(</span><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='class.base.init-15.sentence-2' class='sentence'>initializes
<span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>r</span>
to refer to
<span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>a</span>,
initializes
<span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>b</span>
with the value of the constructor parameter
<span class='texttt'>i</span>,
initializes
<span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>i</span>
with the value of the constructor parameter
<span class='texttt'>i</span>,
and initializes
<span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>j</span>
with the value of
<span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>i</span>;
this takes place each time an object of class
<span class='texttt'>X</span>
is created<a class='hidden_link' href='#class.base.init-15.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.base.init-16'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5814'>#</a></div><div class='texpara'><div id='class.base.init-16.sentence-1' class='sentence'><a class='index' id=':initialization,member_function_call_during'></a>Member functions (including virtual member functions, <a href='class.virtual' title='11.7.3&emsp;Virtual functions'>[class.<span class='shy'></span>virtual]</a>) can be
called for an object under construction or destruction<a class='hidden_link' href='#class.base.init-16.sentence-1'>.</a></div> <div id='class.base.init-16.sentence-2' class='sentence'>Similarly, an object under construction or destruction can be the operand of the
<span class='texttt'><span class='keyword'>typeid</span></span>
operator (<a href='expr.typeid' title='7.6.1.8&emsp;Type identification'>[expr.<span class='shy'></span>typeid]</a>) or of a
<span id=':dynamic_cast'><span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span></span></span> (<a href='expr.dynamic.cast' title='7.6.1.7&emsp;Dynamic cast'>[expr.<span class='shy'></span>dynamic.<span class='shy'></span>cast]</a>)<a class='hidden_link' href='#class.base.init-16.sentence-2'>.</a></div> <div id='class.base.init-16.sentence-3' class='sentence'>However, if these operations are performed
during evaluation of
<ul class='itemize'><li id='class.base.init-16.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.base.init-16.1'>(16.1)</a></div>a <a href='#nt:ctor-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer_____'><span class='textsf'><i >ctor-initializer</i></span></span></a>
(or in a function called directly or indirectly from a
<a href='#nt:ctor-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer______'><span class='textsf'><i >ctor-initializer</i></span></span></a>)
before all the
<a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer__________________'><span class='textsf'><i >mem-initializer</i></span></span></a><i >s</i>
for base classes have completed,</li><li id='class.base.init-16.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.base.init-16.2'>(16.2)</a></div>a precondition assertion of a constructor, or</li><li id='class.base.init-16.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.base.init-16.3'>(16.3)</a></div>a postcondition assertion of a destructor (<a href='dcl.contract.func' title='9.4.1&emsp;General'>[dcl.<span class='shy'></span>contract.<span class='shy'></span>func]</a>),</li></ul>
the program has undefined behavior<a class='hidden_link' href='#class.base.init-16.sentence-3'>.</a></div> <div id='class.base.init-example-11' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.base.init-example-11'>11</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> A <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  A<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> B <span class='operator'>:</span> <span class='keyword'>public</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> j;
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  B<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> A<span class='parenthesis'>(</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>,     <span class='comment'>// undefined behavior: calls member function but base <span class='tcode_in_codeblock'>A</span> not yet initialized</span>
  j<span class='parenthesis'>(</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>        <span class='comment'>// well-defined: bases are all initialized</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> C <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  C<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> D <span class='operator'>:</span> <span class='keyword'>public</span> B, C <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i;
<span class='keyword'>public</span><span class='operator'>:</span>
  D<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> C<span class='parenthesis'>(</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>,     <span class='comment'>// undefined behavior: calls member function but base <span class='tcode_in_codeblock'>C</span> not yet initialized</span>
  i<span class='parenthesis'>(</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>        <span class='comment'>// well-defined: bases are all initialized</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='class.base.init-17'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5867'>#</a></div><div class='texpara'><div id='class.base.init-note-8' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.base.init-note-8'>8</a></i>:&ensp;<div id='class.base.init-17.sentence-1' class='sentence'><a href='#class.cdtor' title='11.9.5&emsp;Construction and destruction'>[class.<span class='shy'></span>cdtor]</a> describes the results of virtual function calls,
<span class='texttt'><span class='keyword'>typeid</span></span>
and
<span id=':dynamic_cast_'><span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span></span></span>s
during construction for the well-defined cases;
that is, describes the polymorphic behavior
of an object under construction<a class='hidden_link' href='#class.base.init-17.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='class.base.init-18'><div class='marginalizedparent'><a class='marginalized' href='#class.base.init-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5878'>#</a></div><div class='texpara'><div id='class.base.init-18.sentence-1' class='sentence'><a class='index' id=':initializer,pack_expansion'></a>A <a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer___________________'><span class='textsf'><i >mem-initializer</i></span></span></a> followed by an ellipsis is
a pack expansion (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>) that initializes the base
classes specified by a pack expansion in the <a href='class.derived.general#nt:base-specifier-list' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:base-specifier-list__'><span class='textsf'><i >base-specifier-list</i></span></span></a>
for the class<a class='hidden_link' href='#class.base.init-18.sentence-1'>.</a></div> <div id='class.base.init-example-12' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.base.init-example-12'>12</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Mixins<span class='anglebracket'>&gt;</span>
<span class='keyword'>class</span> X <span class='operator'>:</span> <span class='keyword'>public</span> Mixins<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  X<span class='parenthesis'>(</span><span class='keyword'>const</span> Mixins<span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> mixins<span class='parenthesis'>)</span> <span class='operator'>:</span> Mixins<span class='parenthesis'>(</span>mixins<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='class.inhctor.init' class='section'><h3 ><a class='secnum' href='#class.inhctor.init' style='min-width:80pt'>11.9.4</a> Initialization by inherited constructor <a class='abbr_ref' href='class.inhctor.init'>[class.inhctor.init]</a></h3><div class='texpara'><a class='index' id=':initialization,by_inherited_constructor'></a></div><div class='para' id='class.inhctor.init-1'><div class='marginalizedparent'><a class='marginalized' href='#class.inhctor.init-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5897'>#</a></div><div class='texpara'><div id='class.inhctor.init-1.sentence-1' class='sentence'>When a constructor for type <span class='texttt'>B</span> is invoked
to initialize an object of a different type <span class='texttt'>D</span>
(that is, when the constructor was inherited (<a href='namespace.udecl' title='9.10&emsp;The using declaration'>[namespace.<span class='shy'></span>udecl]</a>)),
initialization proceeds as if a defaulted default constructor
were used to initialize the <span class='texttt'>D</span> object and
each base class subobject from which the constructor was inherited,
except that the <span class='texttt'>B</span> subobject is initialized
by the inherited constructor
if the base class subobject were to be initialized
as part of the <span class='texttt'>D</span> object (<a href='#class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#class.inhctor.init-1.sentence-1'>.</a></div> <div id='class.inhctor.init-1.sentence-2' class='sentence'>The invocation of the inherited constructor,
including the evaluation of any arguments,
is omitted if the <span class='texttt'>B</span> subobject is not to be initialized
as part of the <span class='texttt'>D</span> object<a class='hidden_link' href='#class.inhctor.init-1.sentence-2'>.</a></div> <div id='class.inhctor.init-1.sentence-3' class='sentence'>The complete initialization is considered to be a single function call;
in particular, unless omitted,
the initialization of the inherited constructor's parameters
is sequenced before the initialization of any part of the <span class='texttt'>D</span> object<a class='hidden_link' href='#class.inhctor.init-1.sentence-3'>.</a></div> <div id='class.inhctor.init-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.inhctor.init-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> B1 <span class='curlybracket'>{</span>
  B1<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> B2 <span class='curlybracket'>{</span>
  B2<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

<span class='keyword'>struct</span> D1 <span class='operator'>:</span> B1 <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> B1<span class='operator'>::</span>B1;     <span class='comment'>// inherits <span class='tcode_in_codeblock'>B1(int, ...)</span></span>
  <span class='keyword'>int</span> x;
  <span class='keyword'>int</span> y <span class='operator'>=</span> get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> test<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  D1 d<span class='parenthesis'>(</span><span class='literal'>2</span>, <span class='literal'>3</span>, <span class='literal'>4</span><span class='parenthesis'>)</span>;    <span class='comment'>// OK, <span class='tcode_in_codeblock'>B1</span> is initialized by calling <span class='tcode_in_codeblock'>B1(2, 3, 4)</span>,</span>
                    <span class='comment'>// then <span class='tcode_in_codeblock'>d.x</span> is default-initialized (no initialization is performed),</span>
                    <span class='comment'>// then <span class='tcode_in_codeblock'>d.y</span> is initialized by calling <span class='tcode_in_codeblock'>get()</span></span>
  D1 e;             <span class='comment'>// error: <span class='tcode_in_codeblock'>D1</span> has no default constructor</span>
<span class='curlybracket'>}</span>

<span class='keyword'>struct</span> D2 <span class='operator'>:</span> B2 <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> B2<span class='operator'>::</span>B2;
  B1 b;
<span class='curlybracket'>}</span>;

D2 f<span class='parenthesis'>(</span><span class='literal'>1.0</span><span class='parenthesis'>)</span>;          <span class='comment'>// error: <span class='tcode_in_codeblock'>B1</span> has no default constructor</span>

<span class='keyword'>struct</span> W <span class='curlybracket'>{</span> W<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> X <span class='operator'>:</span> <span class='keyword'>virtual</span> W <span class='curlybracket'>{</span> <span class='keyword'>using</span> W<span class='operator'>::</span>W; X<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Y <span class='operator'>:</span> X <span class='curlybracket'>{</span> <span class='keyword'>using</span> X<span class='operator'>::</span>X; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Z <span class='operator'>:</span> Y, <span class='keyword'>virtual</span> W <span class='curlybracket'>{</span> <span class='keyword'>using</span> Y<span class='operator'>::</span>Y; <span class='curlybracket'>}</span>;
Z z<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;             <span class='comment'>// OK, initialization of <span class='tcode_in_codeblock'>Y</span> does not invoke default constructor of <span class='tcode_in_codeblock'>X</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Log <span class='operator'>:</span> T <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> T<span class='operator'>::</span>T;       <span class='comment'>// inherits all constructors from class <span class='tcode_in_codeblock'>T</span></span>
  <span class='operator'>~</span>Log<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> std<span class='operator'>::</span>clog <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>"Destroying wrapper"</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> std<span class='operator'>::</span>endl; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> <div id='class.inhctor.init-1.sentence-4' class='sentence'>
Class template <span class='texttt'>Log</span> wraps any class and forwards all of its constructors,
while writing a message to the standard log
whenever an object of class <span class='texttt'>Log</span> is destroyed<a class='hidden_link' href='#class.inhctor.init-1.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'><div id='class.inhctor.init-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.inhctor.init-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> V <span class='curlybracket'>{</span> V<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>; V<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Q <span class='curlybracket'>{</span> Q<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> A <span class='operator'>:</span> <span class='keyword'>virtual</span> V, Q <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> V<span class='operator'>::</span>V;
  A<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>int</span> bar<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>42</span>; <span class='curlybracket'>}</span>
<span class='keyword'>struct</span> B <span class='operator'>:</span> A <span class='curlybracket'>{</span>
  B<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> A<span class='parenthesis'>(</span>bar<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span> <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C <span class='operator'>:</span> B <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>void</span> foo<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> C c; <span class='curlybracket'>}</span> <span class='comment'>// <span class='tcode_in_codeblock'>bar</span> is not invoked, because the <span class='tcode_in_codeblock'>V</span> subobject is not initialized as part of <span class='tcode_in_codeblock'>B</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.inhctor.init-2'><div class='marginalizedparent'><a class='marginalized' href='#class.inhctor.init-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L5981'>#</a></div><div class='texpara'><div id='class.inhctor.init-2.sentence-1' class='sentence'>If the constructor was inherited from multiple base class subobjects
of type <span class='texttt'>B</span>, the program is ill-formed<a class='hidden_link' href='#class.inhctor.init-2.sentence-1'>.</a></div> <div id='class.inhctor.init-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.inhctor.init-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span> A<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> A <span class='curlybracket'>{</span> <span class='keyword'>using</span> A<span class='operator'>::</span>A; <span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> C1 <span class='operator'>:</span> B <span class='curlybracket'>{</span> <span class='keyword'>using</span> B<span class='operator'>::</span>B; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C2 <span class='operator'>:</span> B <span class='curlybracket'>{</span> <span class='keyword'>using</span> B<span class='operator'>::</span>B; <span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> D1 <span class='operator'>:</span> C1, C2 <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> C1<span class='operator'>::</span>C1;
  <span class='keyword'>using</span> C2<span class='operator'>::</span>C2;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> V1 <span class='operator'>:</span> <span class='keyword'>virtual</span> B <span class='curlybracket'>{</span> <span class='keyword'>using</span> B<span class='operator'>::</span>B; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> V2 <span class='operator'>:</span> <span class='keyword'>virtual</span> B <span class='curlybracket'>{</span> <span class='keyword'>using</span> B<span class='operator'>::</span>B; <span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> D2 <span class='operator'>:</span> V1, V2 <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> V1<span class='operator'>::</span>V1;
  <span class='keyword'>using</span> V2<span class='operator'>::</span>V2;
<span class='curlybracket'>}</span>;

D1 d1<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;           <span class='comment'>// error: ambiguous</span>
D2 d2<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK, initializes virtual <span class='tcode_in_codeblock'>B</span> base class, which initializes the <span class='tcode_in_codeblock'>A</span> base class</span>
                    <span class='comment'>// then initializes the <span class='tcode_in_codeblock'>V1</span> and <span class='tcode_in_codeblock'>V2</span> base classes as if by a defaulted default constructor</span>

<span class='keyword'>struct</span> M <span class='curlybracket'>{</span> M<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; M<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> N <span class='operator'>:</span> M <span class='curlybracket'>{</span> <span class='keyword'>using</span> M<span class='operator'>::</span>M; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> O <span class='operator'>:</span> M <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> P <span class='operator'>:</span> N, O <span class='curlybracket'>{</span> <span class='keyword'>using</span> N<span class='operator'>::</span>N; <span class='keyword'>using</span> O<span class='operator'>::</span>O; <span class='curlybracket'>}</span>;
P p<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;             <span class='comment'>// OK, use <span class='tcode_in_codeblock'>M(0)</span> to initialize <span class='tcode_in_codeblock'>N</span>'s base class,</span>
                    <span class='comment'>// use <span class='tcode_in_codeblock'>M()</span> to initialize <span class='tcode_in_codeblock'>O</span>'s base class</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.inhctor.init-3'><div class='marginalizedparent'><a class='marginalized' href='#class.inhctor.init-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L6018'>#</a></div><div class='texpara'><div id='class.inhctor.init-3.sentence-1' class='sentence'>When an object is initialized by an inherited constructor,
initialization of the object is complete
when the initialization of all subobjects is complete<a class='hidden_link' href='#class.inhctor.init-3.sentence-1'>.</a></div> </div></div></div><div id='class.cdtor' class='section'><h3 ><a class='secnum' href='#class.cdtor' style='min-width:80pt'>11.9.5</a> Construction and destruction <a class='abbr_ref' href='class.cdtor'>[class.cdtor]</a></h3><div class='texpara'><a class='index' id=':construction'></a><a class='index' id=':destruction'></a></div><div class='para' id='class.cdtor-1'><div class='marginalizedparent'><a class='marginalized' href='#class.cdtor-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L6028'>#</a></div><div class='texpara'><div id='class.cdtor-1.sentence-1' class='sentence'><a class='index' id=':construction,member_access'></a><a class='index' id=':destruction,member_access'></a>For an object with a non-trivial constructor, referring to any non-static member
or base class of the object before the constructor begins execution results in
undefined behavior<a class='hidden_link' href='#class.cdtor-1.sentence-1'>.</a></div> <div id='class.cdtor-1.sentence-2' class='sentence'>For an object with a non-trivial destructor, referring to
any non-static member or base class of the object after the destructor finishes
execution results in undefined behavior<a class='hidden_link' href='#class.cdtor-1.sentence-2'>.</a></div> <div id='class.cdtor-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.cdtor-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>int</span> i; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Y <span class='operator'>:</span> X <span class='curlybracket'>{</span> Y<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;                  <span class='comment'>// non-trivial</span>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>int</span> a; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> <span class='keyword'>public</span> A <span class='curlybracket'>{</span> <span class='keyword'>int</span> j; Y y; <span class='curlybracket'>}</span>;    <span class='comment'>// non-trivial</span>

<span class='keyword'>extern</span> B bobj;
B<span class='operator'>*</span> pb <span class='operator'>=</span> <span class='operator'>&amp;</span>bobj;                          <span class='comment'>// OK</span>
<span class='keyword'>int</span><span class='operator'>*</span> p1 <span class='operator'>=</span> <span class='operator'>&amp;</span>bobj<span class='operator'>.</span>a;                      <span class='comment'>// undefined behavior: refers to base class member</span>
<span class='keyword'>int</span><span class='operator'>*</span> p2 <span class='operator'>=</span> <span class='operator'>&amp;</span>bobj<span class='operator'>.</span>y<span class='operator'>.</span>i;                    <span class='comment'>// undefined behavior: refers to member's member</span>

A<span class='operator'>*</span> pa <span class='operator'>=</span> <span class='operator'>&amp;</span>bobj;                          <span class='comment'>// undefined behavior: upcast to a base class type</span>
B bobj;                                 <span class='comment'>// definition of <span class='tcode_in_codeblock'>bobj</span></span>

<span class='keyword'>extern</span> X xobj;
<span class='keyword'>int</span><span class='operator'>*</span> p3 <span class='operator'>=</span> <span class='operator'>&amp;</span>xobj<span class='operator'>.</span>i;                      <span class='comment'>// OK, all constructors of <span class='tcode_in_codeblock'>X</span> are trivial</span>
X xobj;
</span> <div id='class.cdtor-1.sentence-3' class='sentence'>
For another example,
<span class='codeblock'><span class='keyword'>struct</span> W <span class='curlybracket'>{</span> <span class='keyword'>int</span> j; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> X <span class='operator'>:</span> <span class='keyword'>public</span> <span class='keyword'>virtual</span> W <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Y <span class='curlybracket'>{</span>
  <span class='keyword'>int</span><span class='operator'>*</span> p;
  X x;
  Y<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> p<span class='parenthesis'>(</span><span class='operator'>&amp;</span>x<span class='operator'>.</span>j<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>   <span class='comment'>// undefined, <span class='tcode_in_codeblock'>x</span> is not yet constructed</span>
    <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.cdtor-2'><div class='marginalizedparent'><a class='marginalized' href='#class.cdtor-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L6068'>#</a></div><div class='texpara'><div id='class.cdtor-2.sentence-1' class='sentence'>During the construction of an object,
if the value of any of its subobjects
or any element of its object representation
is accessed through a glvalue that is not obtained, directly or indirectly, from
the constructor's
<span id=':this_'><span class='texttt'><span class='keyword'>this</span></span></span>
pointer, the value thus obtained is unspecified<a class='hidden_link' href='#class.cdtor-2.sentence-1'>.</a></div> <div id='class.cdtor-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.cdtor-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> C;
<span class='keyword'>void</span> no_opt<span class='parenthesis'>(</span>C<span class='operator'>*</span><span class='parenthesis'>)</span>;

<span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> c;
  C<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> c<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> no_opt<span class='parenthesis'>(</span><span class='keyword'>this</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>const</span> C cobj;

<span class='keyword'>void</span> no_opt<span class='parenthesis'>(</span>C<span class='operator'>*</span> cptr<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> cobj<span class='operator'>.</span>c <span class='operator'>*</span> <span class='literal'>100</span>;         <span class='comment'>// value of <span class='tcode_in_codeblock'>cobj.c</span> is unspecified</span>
  cptr<span class='operator'>-</span><span class='anglebracket'>&gt;</span>c <span class='operator'>=</span> <span class='literal'>1</span>;
  cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> cobj<span class='operator'>.</span>c <span class='operator'>*</span> <span class='literal'>100</span>          <span class='comment'>// value of <span class='tcode_in_codeblock'>cobj.c</span> is unspecified</span>
       <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>'\n'</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>extern</span> <span class='keyword'>struct</span> D d;
<span class='keyword'>struct</span> D <span class='curlybracket'>{</span>
  D<span class='parenthesis'>(</span><span class='keyword'>int</span> a<span class='parenthesis'>)</span> <span class='operator'>:</span> a<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>, b<span class='parenthesis'>(</span>d<span class='operator'>.</span>a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
  <span class='keyword'>int</span> a, b;
<span class='curlybracket'>}</span>;
D d <span class='operator'>=</span> D<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                     <span class='comment'>// value of <span class='tcode_in_codeblock'>d.b</span> is unspecified</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.cdtor-3'><div class='marginalizedparent'><a class='marginalized' href='#class.cdtor-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L6104'>#</a></div><div class='texpara'><div id='class.cdtor-3.sentence-1' class='sentence'><a class='index' id=':construction,pointer_to_member_or_base'></a><a class='index' id=':destruction,pointer_to_member_or_base'></a>To explicitly or implicitly convert a pointer (a glvalue) referring to
an object of class
<span class='texttt'>X</span>
to a pointer (reference) to a direct or indirect base class
<span class='texttt'>B</span>
of
<span class='texttt'>X</span>,
the construction of
<span class='texttt'>X</span>
and the construction of all of its direct or indirect bases that directly or
indirectly derive from
<span class='texttt'>B</span>
shall have started and the destruction of these classes shall not have
completed, otherwise the conversion results in undefined behavior<a class='hidden_link' href='#class.cdtor-3.sentence-1'>.</a></div> <div id='class.cdtor-3.sentence-2' class='sentence'>To form a pointer to (or access the value of) a direct non-static member of
an object
<span class='texttt'>obj</span>,
the construction of
<span class='texttt'>obj</span>
shall have started and its destruction shall not have completed,
otherwise the computation of the pointer value (or accessing the member
value) results in undefined behavior<a class='hidden_link' href='#class.cdtor-3.sentence-2'>.</a></div> <div id='class.cdtor-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.cdtor-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> <span class='keyword'>virtual</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C <span class='operator'>:</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D <span class='operator'>:</span> <span class='keyword'>virtual</span> A <span class='curlybracket'>{</span> D<span class='parenthesis'>(</span>A<span class='operator'>*</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span> X<span class='parenthesis'>(</span>A<span class='operator'>*</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> E <span class='operator'>:</span> C, D, X <span class='curlybracket'>{</span>
  E<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> D<span class='parenthesis'>(</span><span class='keyword'>this</span><span class='parenthesis'>)</span>,    <span class='comment'>// undefined behavior: upcast from <span class='tcode_in_codeblock'>E*</span> to <span class='tcode_in_codeblock'>A*</span> might use path <span class='tcode_in_codeblock'>E*</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>D*</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>A*</span></span>
                    <span class='comment'>// but <span class='tcode_in_codeblock'>D</span> is not constructed</span>

                    <span class='comment'>// “<span class='tcode_in_codeblock'>D((C*)this)</span>'' would be defined: <span class='tcode_in_codeblock'>E*</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>C*</span> is defined because <span class='tcode_in_codeblock'>E()</span> has started,</span>
                    <span class='comment'>// and <span class='tcode_in_codeblock'>C*</span> <span class='math'>→</span> <span class='tcode_in_codeblock'>A*</span> is defined because <span class='tcode_in_codeblock'>C</span> is fully constructed</span>

  X<span class='parenthesis'>(</span><span class='keyword'>this</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>        <span class='comment'>// defined: upon construction of <span class='tcode_in_codeblock'>X</span>, <span class='tcode_in_codeblock'>C/B/D/A</span> sublattice is fully constructed</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.cdtor-4'><div class='marginalizedparent'><a class='marginalized' href='#class.cdtor-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L6149'>#</a></div><div class='texpara'><div id='class.cdtor-4.sentence-1' class='sentence'><a class='index' id=':virtual_function_call,constructor_and'></a><a class='index' id=':virtual_function_call,destructor_and'></a><a class='index' id=':construction,virtual_function_call'></a><a class='index' id=':destruction,virtual_function_call'></a>Member functions, including virtual functions (<a href='class.virtual' title='11.7.3&emsp;Virtual functions'>[class.<span class='shy'></span>virtual]</a>), can be called
during construction or destruction (<a href='#class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#class.cdtor-4.sentence-1'>.</a></div> <div id='class.cdtor-4.sentence-2' class='sentence'>When a virtual function is called directly or indirectly from a constructor
or from a destructor,
including during the construction or destruction of the class's non-static data
members,
or during the evaluation of
a postcondition assertion of a constructor or
a precondition assertion of a destructor (<a href='dcl.contract.func' title='9.4.1&emsp;General'>[dcl.<span class='shy'></span>contract.<span class='shy'></span>func]</a>),
and the object to which the call applies is the object (call it <span class='texttt'>x</span>) under construction or
destruction,
the function called is the
final overrider in the constructor's or destructor's class and not one
overriding it in a more-derived class<a class='hidden_link' href='#class.cdtor-4.sentence-2'>.</a></div> <div id='class.cdtor-4.sentence-3' class='sentence'>If the virtual function call uses an explicit class member access (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>)
and the object expression refers to
the complete object of <span class='texttt'>x</span> or one of that object's base class subobjects
but not <span class='texttt'>x</span> or one of its base class subobjects, the behavior
is undefined<a class='hidden_link' href='#class.cdtor-4.sentence-3'>.</a></div> <div id='class.cdtor-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.cdtor-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> V <span class='curlybracket'>{</span>
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> A <span class='operator'>:</span> <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span>
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> B <span class='operator'>:</span> <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span>
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  B<span class='parenthesis'>(</span>V<span class='operator'>*</span>, A<span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> D <span class='operator'>:</span> A, B <span class='curlybracket'>{</span>
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  D<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> B<span class='parenthesis'>(</span><span class='parenthesis'>(</span>A<span class='operator'>*</span><span class='parenthesis'>)</span><span class='keyword'>this</span>, <span class='keyword'>this</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

B<span class='operator'>::</span>B<span class='parenthesis'>(</span>V<span class='operator'>*</span> v, A<span class='operator'>*</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// calls <span class='tcode_in_codeblock'>V&#x200b;::&#x200b;f</span>, not <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span></span>
  g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// calls <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;g</span>, not <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;g</span></span>
  v<span class='operator'>-</span><span class='anglebracket'>&gt;</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>v</span> is base of <span class='tcode_in_codeblock'>B</span>, the call is well-defined, calls <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;g</span></span>
  a<span class='operator'>-</span><span class='anglebracket'>&gt;</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// undefined behavior: <span class='tcode_in_codeblock'>a</span>'s type not a base of <span class='tcode_in_codeblock'>B</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='class.cdtor-5'><div class='marginalizedparent'><a class='marginalized' href='#class.cdtor-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L6204'>#</a></div><div class='texpara'><div id='class.cdtor-5.sentence-1' class='sentence'><a class='index' id=':construction,typeid_operator'></a><a class='index' id=':destruction,typeid_operator'></a><a class='index' id=':typeid,construction_and'></a><a class='index' id=':typeid,destruction_and'></a>The
<span class='texttt'><span class='keyword'>typeid</span></span>
operator (<a href='expr.typeid' title='7.6.1.8&emsp;Type identification'>[expr.<span class='shy'></span>typeid]</a>) can be used during construction or destruction (<a href='#class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#class.cdtor-5.sentence-1'>.</a></div> <div id='class.cdtor-5.sentence-2' class='sentence'>When
<span class='texttt'><span class='keyword'>typeid</span></span>
is used in a constructor (including the
<a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer____________________'><span class='textsf'><i >mem-initializer</i></span></span></a> or default member initializer (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>)
for a non-static data member)
or in a destructor, or used in a function called (directly or indirectly) from
a constructor or destructor, if the operand of
<span class='texttt'><span class='keyword'>typeid</span></span>
refers to the object under construction or destruction,
<span class='texttt'><span class='keyword'>typeid</span></span>
yields the
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>type_<span class='shy'></span>info</span>
object representing the constructor or destructor's class<a class='hidden_link' href='#class.cdtor-5.sentence-2'>.</a></div> <div id='class.cdtor-5.sentence-3' class='sentence'>If the operand of
<span class='texttt'><span class='keyword'>typeid</span></span>
refers to the object under construction or destruction and the static type of
the operand is neither the constructor or destructor's class nor one of its
bases, the behavior is undefined<a class='hidden_link' href='#class.cdtor-5.sentence-3'>.</a></div></div></div><div class='para' id='class.cdtor-6'><div class='marginalizedparent'><a class='marginalized' href='#class.cdtor-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L6231'>#</a></div><div class='texpara'><div id='class.cdtor-6.sentence-1' class='sentence'><a class='index' id=':construction,dynamic_cast_and'></a><a class='index' id=':destruction,dynamic_cast_and'></a><a class='index' id=':cast,dynamic,construction_and'></a><a class='index' id=':cast,dynamic,destruction_and'></a><span id=':dynamic_cast__'><span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span></span></span>s (<a href='expr.dynamic.cast' title='7.6.1.7&emsp;Dynamic cast'>[expr.<span class='shy'></span>dynamic.<span class='shy'></span>cast]</a>) can be used during construction
or destruction (<a href='#class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#class.cdtor-6.sentence-1'>.</a></div> <div id='class.cdtor-6.sentence-2' class='sentence'>When a
<span id=':dynamic_cast___'><span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span></span></span>
is used in a constructor (including the
<a href='#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer_____________________'><span class='textsf'><i >mem-initializer</i></span></span></a> or default member initializer
for a non-static data member)
or in a destructor, or used in a function called (directly or indirectly) from
a constructor or destructor, if the operand of the
<span id=':dynamic_cast____'><span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span></span></span>
refers to the object under construction or destruction, this object is
considered to be a most derived object that has the type of the constructor or
destructor's class<a class='hidden_link' href='#class.cdtor-6.sentence-2'>.</a></div> <div id='class.cdtor-6.sentence-3' class='sentence'>If the operand of the
<span id=':dynamic_cast_____'><span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span></span></span>
refers to the object under construction or destruction and the static type of
the operand is not a pointer to or object of the constructor or destructor's
own class or one of its bases, the
<span id=':dynamic_cast______'><span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span></span></span>
results in undefined behavior<a class='hidden_link' href='#class.cdtor-6.sentence-3'>.</a></div> <div id='class.cdtor-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.cdtor-example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> V <span class='curlybracket'>{</span>
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> A <span class='operator'>:</span> <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> B <span class='operator'>:</span> <span class='keyword'>virtual</span> V <span class='curlybracket'>{</span>
  B<span class='parenthesis'>(</span>V<span class='operator'>*</span>, A<span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> D <span class='operator'>:</span> A, B <span class='curlybracket'>{</span>
  D<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> B<span class='parenthesis'>(</span><span class='parenthesis'>(</span>A<span class='operator'>*</span><span class='parenthesis'>)</span><span class='keyword'>this</span>, <span class='keyword'>this</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

B<span class='operator'>::</span>B<span class='parenthesis'>(</span>V<span class='operator'>*</span> v, A<span class='operator'>*</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typeid</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span>;                <span class='comment'>// <span class='tcode_in_codeblock'>type_<span class='shy'></span>info</span> for <span class='tcode_in_codeblock'>B</span></span>
  <span class='keyword'>typeid</span><span class='parenthesis'>(</span><span class='operator'>*</span>v<span class='parenthesis'>)</span>;                   <span class='comment'>// well-defined: <span class='tcode_in_codeblock'>*v</span> has type <span class='tcode_in_codeblock'>V</span>, a base of <span class='tcode_in_codeblock'>B</span> yields <span class='tcode_in_codeblock'>type_<span class='shy'></span>info</span> for <span class='tcode_in_codeblock'>B</span></span>
  <span class='keyword'>typeid</span><span class='parenthesis'>(</span><span class='operator'>*</span>a<span class='parenthesis'>)</span>;                   <span class='comment'>// undefined behavior: type <span class='tcode_in_codeblock'>A</span> not a base of <span class='tcode_in_codeblock'>B</span></span>
  <span class='keyword'>dynamic_cast</span><span class='anglebracket'>&lt;</span>B<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;          <span class='comment'>// well-defined: <span class='tcode_in_codeblock'>v</span> of type <span class='tcode_in_codeblock'>V*</span>, <span class='tcode_in_codeblock'>V</span> base of <span class='tcode_in_codeblock'>B</span> results in <span class='tcode_in_codeblock'>B*</span></span>
  <span class='keyword'>dynamic_cast</span><span class='anglebracket'>&lt;</span>B<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>;          <span class='comment'>// undefined behavior: <span class='tcode_in_codeblock'>a</span> has type <span class='tcode_in_codeblock'>A*</span>, <span class='tcode_in_codeblock'>A</span> not a base of <span class='tcode_in_codeblock'>B</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> </div></div></div><div id='class.copy.elision' class='section'><h3 ><a class='secnum' href='#class.copy.elision' style='min-width:80pt'>11.9.6</a> Copy/move elision <a class='abbr_ref' href='class.copy.elision'>[class.copy.elision]</a></h3><div class='para' id='class.copy.elision-1'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.elision-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L6285'>#</a></div><div class='texpara'><div id='class.copy.elision-1.sentence-1' class='sentence'><a class='index' id=':temporary,elimination_of'></a><a class='index' id=':constructor,copy,elision'></a><a class='index' id=':constructor,move,elision'></a>When certain criteria are met, an implementation is
allowed to omit the creation of a class object from
a source object of the same type (ignoring cv-qualification),
even if the selected constructor and/or the
destructor for the object have
<a class='index' id=':side_effects_'></a>side effects<a class='hidden_link' href='#class.copy.elision-1.sentence-1'>.</a></div> <div id='class.copy.elision-1.sentence-2' class='sentence'>In such cases, the
implementation treats the source and target of the
omitted initialization as simply two different ways of
referring to the same object<a class='hidden_link' href='#class.copy.elision-1.sentence-2'>.</a></div> <div id='class.copy.elision-1.sentence-3' class='sentence'>If the first parameter of the
selected constructor is an rvalue reference to the object's type,
the destruction of that object occurs when the target would have been destroyed;
otherwise, the destruction occurs at the later of the times when the
two objects would have been destroyed without the
optimization<a class='hidden_link' href='#class.copy.elision-1.sentence-3'>.</a></div> <div id='class.copy.elision-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.copy.elision-note-1'>1</a></i>:&ensp;<div id='class.copy.elision-1.sentence-4' class='sentence'>Because only one object is destroyed instead of two,
and the creation of one object is omitted,
there is still one object destroyed for each one constructed<a class='hidden_link' href='#class.copy.elision-1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='class.copy.elision-1.sentence-5' class='sentence'>
This elision of object creation, called
<a class='index' id='def:copy_elision|seeconstructor,_copy,_elision'></a><a class='index' id='def:elision,copy|seeconstructor,_copy,_elision'></a><a class='index' id='def:constructor,copy,elision'></a><a class='index' id='def:constructor,move,elision'></a><a class='hidden_link' href='#def:copy_elision' id='def:copy_elision'><i>copy elision</i></a>,
is permitted in the
following circumstances (which may be combined to
eliminate multiple copies):
<ul class='itemize'><li id='class.copy.elision-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.copy.elision-1.1'>(1.1)</a></div>in a <span class='texttt'><span class='keyword'>return</span></span> statement (<a href='stmt.return' title='8.7.4&emsp;The return statement'>[stmt.<span class='shy'></span>return]</a>) in
a function with a class return type,
when the <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression'><span class='textsf'><i >expression</i></span></span></a> is the name of a non-volatile
object <span class='math'><span class='mathalpha'>o</span></span> with automatic storage duration (other than a function parameter or a variable
introduced by the <a href='except.pre#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration'><span class='textsf'><i >exception-declaration</i></span></span></a> of a
<a href='except.pre#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler'><span class='textsf'><i >handler</i></span></span></a> (<a href='except.handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>)),
the copy-initialization of the result object can be
omitted by constructing <span class='math'><span class='mathalpha'>o</span></span> directly
into the function call's result object;</li><li id='class.copy.elision-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.copy.elision-1.2'>(1.2)</a></div>in a <a href='expr.throw#nt:throw-expression' title='7.6.18&emsp;Throwing an exception&emsp;[expr.throw]'><span id='ntref:throw-expression'><span class='textsf'><i >throw-expression</i></span></span></a> (<a href='expr.throw' title='7.6.18&emsp;Throwing an exception'>[expr.<span class='shy'></span>throw]</a>), when the operand
is the name of a non-volatile object <span class='math'><span class='mathalpha'>o</span></span> with automatic storage duration
(other than a function parameter or
a variable introduced by
the <a href='except.pre#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration_'><span class='textsf'><i >exception-declaration</i></span></span></a> of a <a href='except.pre#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler_'><span class='textsf'><i >handler</i></span></span></a>)
that belongs to a scope that does not contain
the innermost enclosing <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement__'><span class='textsf'><i >compound-statement</i></span></span></a>
associated with a <a href='except.pre#nt:try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:try-block'><span class='textsf'><i >try-block</i></span></span></a> (if there is one),
the copy-initialization of the exception object can be omitted by
constructing <span class='math'><span class='mathalpha'>o</span></span> directly into the exception object;</li><li id='class.copy.elision-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.copy.elision-1.3'>(1.3)</a></div>in a <a href='dcl.fct.def.coroutine' title='9.6.4&emsp;Coroutine definitions&emsp;[dcl.fct.def.coroutine]'>coroutine</a>, a copy of a coroutine parameter
can be omitted and references to that copy replaced with references to the
corresponding parameter if the meaning of the program will be unchanged except for
the execution of a constructor and destructor for the parameter copy object;</li><li id='class.copy.elision-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#class.copy.elision-1.4'>(1.4)</a></div>when the <a href='except.pre#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration__'><span class='textsf'><i >exception-declaration</i></span></span></a> of a
<a href='except.pre#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler__'><span class='textsf'><i >handler</i></span></span></a> (<a href='except.handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>) declares an object <span class='math'><span class='mathalpha'>o</span></span>,
the copy-initialization of <span class='math'><span class='mathalpha'>o</span></span> can be omitted by treating
the <a href='except.pre#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration___'><span class='textsf'><i >exception-declaration</i></span></span></a> as an alias for the exception
object if the meaning of the program will be unchanged except for the execution
of constructors and destructors for the object declared by the
<a href='except.pre#nt:exception-declaration' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:exception-declaration____'><span class='textsf'><i >exception-declaration</i></span></span></a><a class='hidden_link' href='#class.copy.elision-1.sentence-5'>.</a> <div class='texpara'><div id='class.copy.elision-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.copy.elision-note-2'>2</a></i>:&ensp;<div id='class.copy.elision-1.4.sentence-2' class='sentence'>There cannot be a move from the exception object because it is
always an lvalue<a class='hidden_link' href='#class.copy.elision-1.4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li></ul></div> <div id='class.copy.elision-1.sentence-6' class='sentence'>
Copy elision is not permitted
where an expression is evaluated in a context
requiring a constant expression (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)
and in constant initialization (<a href='basic.start.static' title='6.9.3.2&emsp;Static initialization'>[basic.<span class='shy'></span>start.<span class='shy'></span>static]</a>)<a class='hidden_link' href='#class.copy.elision-1.sentence-6'>.</a></div> <div id='class.copy.elision-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#class.copy.elision-note-3'>3</a></i>:&ensp;<div id='class.copy.elision-1.sentence-7' class='sentence'>It is possible that copy elision is performed
if the same expression
is evaluated in another context<a class='hidden_link' href='#class.copy.elision-1.sentence-7'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='class.copy.elision-2'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.elision-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L6367'>#</a></div><div class='texpara'><div id='class.copy.elision-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.copy.elision-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> Thing <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  Thing<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='operator'>~</span>Thing<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  Thing<span class='parenthesis'>(</span><span class='keyword'>const</span> Thing<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

Thing f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  Thing t;
  <span class='keyword'>return</span> t;
<span class='curlybracket'>}</span>

Thing t2 <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> <span class='operator'>*</span>p;
  <span class='keyword'>constexpr</span> A<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>:</span> p<span class='parenthesis'>(</span><span class='keyword'>this</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>constexpr</span> A g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A loc;
  <span class='keyword'>return</span> loc;
<span class='curlybracket'>}</span>

<span class='keyword'>constexpr</span> A a;          <span class='comment'>// well-formed, <span class='tcode_in_codeblock'>a.p</span> points to <span class='tcode_in_codeblock'>a</span></span>
<span class='keyword'>constexpr</span> A b <span class='operator'>=</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;    <span class='comment'>// error: <span class='tcode_in_codeblock'>b.p</span> would be dangling (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)</span>

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A c <span class='operator'>=</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// well-formed, <span class='tcode_in_codeblock'>c.p</span> can point to <span class='tcode_in_codeblock'>c</span> or be dangling</span>
<span class='curlybracket'>}</span>
</span> <div id='class.copy.elision-2.sentence-1' class='sentence'>
Here the criteria for elision can eliminate
the copying of the object <span class='texttt'>t</span> with automatic storage duration
into the result object for the function call <span class='texttt'>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
which is the non-local object <span class='texttt'>t2</span><a class='hidden_link' href='#class.copy.elision-2.sentence-1'>.</a></div> <div id='class.copy.elision-2.sentence-2' class='sentence'>Effectively, the construction of <span class='texttt'>t</span>
can be viewed as directly initializing <span class='texttt'>t2</span>,
and that object's destruction will occur at program exit<a class='hidden_link' href='#class.copy.elision-2.sentence-2'>.</a></div> <div id='class.copy.elision-2.sentence-3' class='sentence'>Adding a move constructor to <span class='texttt'>Thing</span> has the same effect, but it is the
move construction from the object with automatic storage duration to <span class='texttt'>t2</span> that is elided<a class='hidden_link' href='#class.copy.elision-2.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='class.copy.elision-3'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.elision-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L6412'>#</a></div><div class='texpara'><div id='class.copy.elision-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.copy.elision-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> Thing <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  Thing<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='operator'>~</span>Thing<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  Thing<span class='parenthesis'>(</span>Thing<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>private</span><span class='operator'>:</span>
  Thing<span class='parenthesis'>(</span><span class='keyword'>const</span> Thing<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

Thing f<span class='parenthesis'>(</span><span class='keyword'>bool</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  Thing t;
  <span class='keyword'>if</span> <span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>
    <span class='keyword'>throw</span> t;            <span class='comment'>// OK, <span class='tcode_in_codeblock'>Thing(Thing&amp;&amp;)</span> used (or elided) to throw <span class='tcode_in_codeblock'>t</span></span>
  <span class='keyword'>return</span> t;             <span class='comment'>// OK, <span class='tcode_in_codeblock'>Thing(Thing&amp;&amp;)</span> used (or elided) to return <span class='tcode_in_codeblock'>t</span></span>
<span class='curlybracket'>}</span>

Thing t2 <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>false</span><span class='parenthesis'>)</span>;    <span class='comment'>// OK, no extra copy/move performed, <span class='tcode_in_codeblock'>t2</span> constructed by call to <span class='tcode_in_codeblock'>f</span></span>

<span class='keyword'>struct</span> Weird <span class='curlybracket'>{</span>
  Weird<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  Weird<span class='parenthesis'>(</span>Weird<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

Weird g<span class='parenthesis'>(</span><span class='keyword'>bool</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> Weird w1;
  Weird w2;
  <span class='keyword'>if</span> <span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>
    <span class='keyword'>return</span> w1;  <span class='comment'>// OK, uses <span class='tcode_in_codeblock'>Weird(Weird&amp;)</span></span>
  <span class='keyword'>else</span>
    <span class='keyword'>return</span> w2;  <span class='comment'>// error: <span class='tcode_in_codeblock'>w2</span> in this context is an xvalue</span>
<span class='curlybracket'>}</span>

<span class='keyword'>int</span><span class='operator'>&amp;</span> h<span class='parenthesis'>(</span><span class='keyword'>bool</span> b, <span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>int</span> s;
  <span class='keyword'>if</span> <span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>
    <span class='keyword'>return</span> s;   <span class='comment'>// OK</span>
  <span class='keyword'>else</span>
    <span class='keyword'>return</span> i;   <span class='comment'>// error: <span class='tcode_in_codeblock'>i</span> is an xvalue</span>
<span class='curlybracket'>}</span>

<span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='parenthesis'>)</span> h2<span class='parenthesis'>(</span>Thing t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> t;     <span class='comment'>// OK, <span class='tcode_in_codeblock'>t</span> is an xvalue and <span class='tcode_in_codeblock'>h2</span>'s return type is <span class='tcode_in_codeblock'>Thing</span></span>
<span class='curlybracket'>}</span>

<span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='parenthesis'>)</span> h3<span class='parenthesis'>(</span>Thing t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='parenthesis'>(</span>t<span class='parenthesis'>)</span>;   <span class='comment'>// OK, <span class='tcode_in_codeblock'>(t)</span> is an xvalue and <span class='tcode_in_codeblock'>h3</span>'s return type is <span class='tcode_in_codeblock'>Thing&amp;&amp;</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='class.copy.elision-4'><div class='marginalizedparent'><a class='marginalized' href='#class.copy.elision-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac78ae76c579883a32a9eb5b00346150a41e8e47/source/classes.tex#L6465'>#</a></div><div class='texpara'><div id='class.copy.elision-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#class.copy.elision-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  T x;
  <span class='keyword'>try</span> <span class='curlybracket'>{</span>
    T y;
    <span class='keyword'>try</span> <span class='curlybracket'>{</span> g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>
    <span class='keyword'>catch</span> <span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      <span class='keyword'>if</span> <span class='parenthesis'>(</span><span class='comment'>/*...*/</span><span class='parenthesis'>)</span>
        <span class='keyword'>throw</span> x;        <span class='comment'>// does not move</span>
      <span class='keyword'>throw</span> y;          <span class='comment'>// moves</span>
    <span class='curlybracket'>}</span>
    g<span class='parenthesis'>(</span>y<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span> <span class='keyword'>catch</span><span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;
    g<span class='parenthesis'>(</span>y<span class='parenthesis'>)</span>;               <span class='comment'>// error: <span class='tcode_in_codeblock'>y</span> is not in scope</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></div></body></html>