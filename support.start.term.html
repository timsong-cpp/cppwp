<!DOCTYPE html><html lang='en'><head><title>[support.start.term]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>21</a> Language support library <a class='abbr_ref' href='./#language.support'>[language.support]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>21.5</a> Start and termination <a class='abbr_ref'>[support.start.term]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1591'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':<cstdlib>'></a></span><div id='1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-2' class='sentence'>The header <a href='cstdlib.syn'><span class='texttt'>&lt;cstdlib&gt;</span></a>
declares the functions described in this subclause<a class='hidden_link' href='#1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> <span class='indexparent'><a class='index' id='lib:_Exit'></a></span></div></div><div id='sentence-1' class='sentence'><code class='itemdecl'>[[noreturn]] void _Exit(int status) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1604'>#</a></div><div id='2.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
This function has the semantics specified in the C standard library<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1608'>#</a></div><div id='3.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
The program is terminated without executing destructors for objects of automatic,
thread, or static storage duration and without calling functions passed to
<span class='texttt'>atexit()</span> (<a href='basic.start.term'>[basic.start.term]</a>)<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':signal-safe,_Exit'></a></span>The function <span class='texttt'>_&shy;Exit</span> is signal-safe (<a href='csignal.syn'>[csignal.syn]</a>)<a class='hidden_link' href='#3.sentence-2'>.</a></div></div></div><div id='sentence-1' class='sentence'><span class='indexparent'><a class='index' id='lib:abort'></a></span></div><div id='sentence-1' class='sentence'><code class='itemdecl'>[[noreturn]] void abort() noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1623'>#</a></div><div id='4.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
This function has the semantics specified in the C standard library<a class='hidden_link' href='#4.sentence-1'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1627'>#</a></div><div id='5.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
The program is terminated without executing destructors for objects of
automatic, thread, or static storage
duration and without calling functions passed to
<span class='texttt'>atexit()</span> (<a href='basic.start.term'>[basic.start.term]</a>)<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':signal-safe,abort'></a></span>The function <span class='texttt'>abort</span> is signal-safe (<a href='csignal.syn'>[csignal.syn]</a>)<a class='hidden_link' href='#5.sentence-2'>.</a></div></div></div><div id='sentence-1' class='sentence'><span class='indexparent'><a class='index' id='lib:atexit'></a></span></div><div id='sentence-1' class='sentence'><code class='itemdecl'>int atexit(<span class='textit'>c-atexit-handler</span>* f) noexcept;
int atexit(<span class='textit'>atexit-handler</span>* f) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1644'>#</a></div><div id='6.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
The
<span class='texttt'>atexit()</span>
functions register the function pointed to by <span class='texttt'>f</span>
to be called without arguments at normal program termination<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>It is unspecified whether a call to <span class='texttt'>atexit()</span> that does not
<a href='intro.multithread#def:happens_before'>happen before</a>
a call to <span class='texttt'>exit()</span> will succeed<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'><div id='6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.sentence-4' class='sentence'>The <span class='texttt'>atexit()</span> functions do not introduce a data
race (<a href='res.on.data.races'>[res.on.data.races]</a>)<a class='hidden_link' href='#6.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1656'>#</a></div><div id='7.sentence-1' class='sentence'><span class='textit'>Implementation limits:</span> 
The implementation shall support the registration of at least 32 functions<a class='hidden_link' href='#7.sentence-1'>.</a></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1660'>#</a></div><div id='8.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
The
<span class='texttt'>atexit()</span>
function returns zero if the registration succeeds,
nonzero if it fails<a class='hidden_link' href='#8.sentence-1'>.</a></div></div></div><div id='sentence-1' class='sentence'><div id='lib:exit'>
<code class='itemdecl'>[[noreturn]] void exit(int status);
</code>
</div></div><div class='itemdescr'></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1675'>#</a></div><div id='9.sentence-1' class='sentence'><span class='textit'>Effects:</span> 
<ul class='itemize'><li id='9.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#9.1'>(9.1)</a></div><div id='9.1.sentence-2' class='sentence'>First, objects with thread storage duration and associated with the current thread
are destroyed<a class='hidden_link' href='#9.1.sentence-2'>.</a></div> <div id='9.1.sentence-3' class='sentence'>Next, objects with static storage duration are destroyed
and functions registered by calling
<span class='texttt'>atexit</span>
are called<a class='hidden_link' href='#9.1.sentence-3'>.</a><a class='footnotenum' href='#footnote-215'>215</a></div> <div id='9.1.sentence-4' class='sentence'>
See <a href='basic.start.term'>[basic.start.term]</a> for the order of destructions and calls<a class='hidden_link' href='#9.1.sentence-4'>.</a></div> <div id='9.1.sentence-5' class='sentence'>(Automatic objects are not destroyed as a result of calling
<span class='texttt'>exit()</span><a class='hidden_link' href='#9.1.sentence-5'>.</a>)<a class='footnotenum' href='#footnote-216'>216</a></div> <div id='9.1.sentence-6' class='sentence'>If control leaves a registered function called by <span class='texttt'>exit</span> because the function does
not provide a handler for a thrown exception, <span class='texttt'>std&#x200b;::&#x200b;terminate()</span> shall be called (<a href='except.terminate'>[except.terminate]</a>)<a class='hidden_link' href='#9.1.sentence-6'>.</a></div> <div id='9.1.sentence-7' class='sentence'><span class='indexparent'><a class='index' id='lib:terminate'></a></span></div></li><li id='9.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#9.2'>(9.2)</a></div><div id='9.2.sentence-8' class='sentence'>Next, all open C streams (as mediated by the function
signatures declared in
<span class='texttt'>&lt;cstdio&gt;</span>)
with unwritten buffered data are flushed, all open C
streams are closed, and all files created by calling
<span class='texttt'>tmpfile()</span>
are removed<a class='hidden_link' href='#9.2.sentence-8'>.</a></div></li><li id='9.3'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#9.3'>(9.3)</a></div><div id='9.3.sentence-9' class='sentence'>Finally, control is returned to the host environment<a class='hidden_link' href='#9.3.sentence-9'>.</a></div> <div id='9.3.sentence-10' class='sentence'>If <span class='texttt'>status</span> is zero or
<span class='texttt'>EXIT_&shy;SUCCESS</span>,
an <span class='indexparent'><a class='index' id=':exit_status'></a></span>implementation-defined
form of the status
<a class='hidden_link' href='#def:successful_termination' id='def:successful_termination'><i>successful termination</i></a>
is returned<a class='hidden_link' href='#9.3.sentence-10'>.</a></div> <div id='9.3.sentence-11' class='sentence'>If <span class='texttt'>status</span> is
<span class='texttt'>EXIT_&shy;FAILURE</span>,
an <span class='indexparent'><a class='index' id=':exit_status_'></a></span>implementation-defined form of the status
<a class='hidden_link' href='#def:unsuccessful_termination' id='def:unsuccessful_termination'><i>unsuccessful termination</i></a>
is returned<a class='hidden_link' href='#9.3.sentence-11'>.</a></div> <div id='9.3.sentence-12' class='sentence'>Otherwise the status returned is <span class='indexparent'><a class='index' id=':exit_status__'></a></span>implementation-defined<a class='hidden_link' href='#9.3.sentence-12'>.</a><a class='footnotenum' href='#footnote-217'>217</a></div></li></ul></div></div></div><div id='sentence-1' class='sentence'><span class='indexparent'><a class='index' id='lib:at_quick_exit'></a></span></div><div id='sentence-1' class='sentence'><code class='itemdecl'>int at_quick_exit(<span class='textit'>c-atexit-handler</span>* f) noexcept;
int at_quick_exit(<span class='textit'>atexit-handler</span>* f) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1737'>#</a></div><div id='10.sentence-1' class='sentence'><span class='textit'>Effects:</span> The <span class='texttt'>at_&shy;quick_&shy;exit()</span> functions register the function pointed to by <span class='texttt'>f</span>
to be called without arguments when <span class='texttt'>quick_&shy;exit</span> is called<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>It is unspecified whether a call to <span class='texttt'>at_&shy;quick_&shy;exit()</span> that does not
<a href='intro.multithread#def:happens_before'>happen before</a>
all calls to <span class='texttt'>quick_&shy;exit</span> will succeed<a class='hidden_link' href='#10.sentence-2'>.</a></div> <div id='10.sentence-3' class='sentence'><div id='10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='10.sentence-6' class='sentence'>The
<span class='texttt'>at_&shy;quick_&shy;exit()</span> functions do not introduce a
data race (<a href='res.on.data.races'>[res.on.data.races]</a>)<a class='hidden_link' href='#10.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div> <div id='10.sentence-4' class='sentence'><div id='10.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#10.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='10.sentence-7' class='sentence'>The order of registration may be indeterminate if <span class='texttt'>at_&shy;quick_&shy;exit</span> was called from more
than one thread<a class='hidden_link' href='#10.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div> <div id='10.sentence-5' class='sentence'><div id='10.note-3' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#10.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='10.sentence-8' class='sentence'>The
<span class='texttt'>at_&shy;quick_&shy;exit</span> registrations are distinct from the <span class='texttt'>atexit</span> registrations,
and applications may need to call both registration functions with the same argument<a class='hidden_link' href='#10.sentence-8'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1754'>#</a></div><div id='11.sentence-1' class='sentence'><span class='textit'>Implementation limits:</span> 
The implementation shall support the registration of at least 32 functions<a class='hidden_link' href='#11.sentence-1'>.</a></div></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1758'>#</a></div><div id='12.sentence-1' class='sentence'><span class='textit'>Returns:</span> Zero if the registration succeeds, nonzero if it fails<a class='hidden_link' href='#12.sentence-1'>.</a></div></div></div><div id='sentence-1' class='sentence'><span class='indexparent'><a class='index' id='lib:quick_exit'></a></span></div><div id='sentence-1' class='sentence'><code class='itemdecl'>[[noreturn]] void quick_exit(int status) noexcept;
</code></div><div class='itemdescr'></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1768'>#</a></div><div id='13.sentence-1' class='sentence'><span class='textit'>Effects:</span> Functions registered by calls to <span class='texttt'>at_&shy;quick_&shy;exit</span> are called in the
reverse order of their registration, except that a function shall be called after any
previously registered functions that had already been called at the time it was
registered<a class='hidden_link' href='#13.sentence-1'>.</a></div> <div id='13.sentence-2' class='sentence'>Objects shall not be destroyed as a result of calling <span class='texttt'>quick_&shy;exit</span><a class='hidden_link' href='#13.sentence-2'>.</a></div> <div id='13.sentence-3' class='sentence'>If control leaves a registered function called by <span class='texttt'>quick_&shy;exit</span> because the
function does not provide a handler for a thrown exception, <span class='texttt'>std&#x200b;::&#x200b;terminate()</span> shall
be called<a class='hidden_link' href='#13.sentence-3'>.</a></div> <div id='13.sentence-4' class='sentence'><span class='indexparent'><a class='index' id='lib:terminate_'></a></span>
<div id='13.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#13.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='13.sentence-6' class='sentence'>A function registered via <span class='texttt'>at_&shy;quick_&shy;exit</span>
is invoked by the thread that calls <span class='texttt'>quick_&shy;exit</span>,
which can be a different thread
than the one that registered it, so registered functions should not rely on the identity
of objects with thread storage duration<a class='hidden_link' href='#13.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> 
After calling registered functions, <span class='texttt'>quick_&shy;exit</span> shall call <span class='texttt'>_&shy;Exit(status)</span><a class='hidden_link' href='#13.sentence-4'>.</a></div> <div id='13.sentence-5' class='sentence'><div id='13.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#13.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='13.sentence-7' class='sentence'>The standard file buffers are not flushed<a class='hidden_link' href='#13.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/82796606a63a7c62b05785593f651fba105f1c2c/source/support.tex#L1788'>#</a></div><div id='14.sentence-1' class='sentence'><span class='textit'>Remarks:</span> 
<span class='indexparent'><a class='index' id=':signal-safe,quick_exit'></a></span>The function <span class='texttt'>quick_&shy;exit</span> is signal-safe (<a href='csignal.syn'>[csignal.syn]</a>)
when the functions registered with <span class='texttt'>at_&shy;quick_&shy;exit</span> are<a class='hidden_link' href='#14.sentence-1'>.</a></div></div></div><div id='sentence-1' class='sentence'><span class='textsc'>See also:</span> ISO C 7<a class='hidden_link' href='#sentence-1'>.</a></div> <div id='sentence-2' class='sentence'>22<a class='hidden_link' href='#sentence-2'>.</a></div> <div id='sentence-3' class='sentence'>4</div><div class='footnote' id='footnote-215'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-215'>215)</a></div><div id='footnote-215.sentence-1' class='sentence'>A function is called for every time it is registered<a class='hidden_link' href='#footnote-215.sentence-1'>.</a></div></div><div class='footnote' id='footnote-216'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-216'>216)</a></div><div id='footnote-216.sentence-1' class='sentence'>Objects with automatic storage duration are all destroyed in a program whose
<a href='basic.start.main'><span class='texttt'>main</span> function</a>
contains no automatic objects and executes the call to
<span class='texttt'>exit()</span><a class='hidden_link' href='#footnote-216.sentence-1'>.</a></div> <div id='footnote-216.sentence-2' class='sentence'>Control can be transferred directly to such a
<span class='texttt'>main</span> function
by throwing an exception that is caught in
<span class='texttt'>main</span><a class='hidden_link' href='#footnote-216.sentence-2'>.</a></div></div><div class='footnote' id='footnote-217'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-217'>217)</a></div><div id='footnote-217.sentence-1' class='sentence'>The macros
<span class='texttt'>EXIT_&shy;FAILURE</span>
and
<span class='texttt'>EXIT_&shy;SUCCESS</span>
are defined in
<span class='texttt'>&lt;cstdlib&gt;</span><a class='hidden_link' href='#footnote-217.sentence-1'>.</a></div></div></div></body></html>