<!DOCTYPE html><html lang='en'><head><title>[expr.pre]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>7.1</a> Preamble <a class='abbr_ref'>[expr.pre]</a></h2><div class='para nonNormativeOnly' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/expressions.tex#L18'>#</a></div><div class='texpara'><a class='index' id=':expression'></a><div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='1.sentence-1' class='sentence'><a href='expr' title='7&emsp;Expressions'>[expr]</a> defines the syntax, order of evaluation, and meaning
of expressions<a class='hidden_link' href='#1.sentence-1'>.</a><a class='footnoteref' href='#footnote-40' id='footnoteref-40' title='The precedence of operators is not directly specified, but it can be derived from the syntax.'>40</a></div> <div id='1.sentence-2' class='sentence'>
An expression is a sequence of operators and operands that specifies a
computation<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>An expression can result in a value and can cause side
effects<a class='hidden_link' href='#1.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/expressions.tex#L32'>#</a></div><div class='texpara'><a class='index' id=':operator,overloaded'></a><div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='2.sentence-1' class='sentence'>Operators can be overloaded, that is, given meaning when applied to
expressions of <a href='class' title='11&emsp;Classes&emsp;[class]'>class</a> type or
<a href='dcl.enum' title='9.7.1&emsp;Enumeration declarations&emsp;[dcl.enum]'>enumeration</a> type<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Uses of overloaded operators are transformed into
function calls as described in <a href='over.oper' title='12.4&emsp;Overloaded operators'>[over.<span class='shy'></span>oper]</a><a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>Overloaded operators
obey the rules for syntax and evaluation order specified in <a href='expr.compound' title='7.6&emsp;Compound expressions'>[expr.<span class='shy'></span>compound]</a>,
but the requirements of operand type and value category are replaced
by the rules for function call<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>Relations between operators, such as
<span class='texttt'><span class='operator'>+</span><span class='operator'>+</span>a</span> meaning <span class='texttt'>a<span class='operator'>+</span><span class='operator'>=</span><span class='literal'>1</span></span>, are not guaranteed for <a href='over.oper' title='12.4&emsp;Overloaded operators&emsp;[over.oper]'>overloaded
operators</a><a class='hidden_link' href='#2.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/expressions.tex#L46'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>Subclause <a href='expr.compound' title='7.6&emsp;Compound expressions'>[expr.<span class='shy'></span>compound]</a> defines the effects of operators when applied to types
for which they have not been overloaded<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>Operator overloading shall not
modify the rules for the <a class='hidden_link' href='#def:operators,built-in' title='7.1&emsp;Preamble&emsp;[expr.pre]'><span id='def:operators,built-in'><i >built-in operators</i></span></a>,
that is, for operators applied to types for which they are defined by this
Standard<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>However, these built-in operators participate in overload
resolution, and as part of that process user-defined conversions will be
considered where necessary to convert the operands to types appropriate
for the built-in operator<a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='3.sentence-4' class='sentence'>If a built-in operator is selected, such
conversions will be applied to the operands before the operation is
considered further according to the rules in subclause <a href='expr.compound' title='7.6&emsp;Compound expressions'>[expr.<span class='shy'></span>compound]</a>;
see <a href='over.match.oper' title='12.2.2.3&emsp;Operators in expressions'>[over.<span class='shy'></span>match.<span class='shy'></span>oper]</a>, <a href='over.built' title='12.5&emsp;Built-in operators'>[over.<span class='shy'></span>built]</a><a class='hidden_link' href='#3.sentence-4'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/expressions.tex#L59'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'><a class='index' id=':exception,arithmetic'></a><a class='index' id=':exception,undefined_arithmetic'></a><a class='index' id=':overflow,undefined'></a><a class='index' id=':zero,division_by_undefined'></a><a class='index' id=':zero,remainder_undefined'></a>If during the evaluation of an expression, the result is not
mathematically defined or not in the range of representable values for
its type, the behavior is undefined<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='4.sentence-2' class='sentence'><a class='index' id=':overflow'></a>Treatment of division by zero, forming a remainder using a zero divisor,
and all floating-point exceptions varies among machines, and is sometimes
adjustable by a library function<a class='hidden_link' href='#4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/expressions.tex#L75'>#</a></div><div class='texpara'><a class='index' id=':operator,precedence_of'></a><a class='index' id=':expression,order_of_evaluation_of'></a><div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>:&ensp;<div id='5.sentence-1' class='sentence'>The implementation can regroup operators according to
the usual mathematical rules only
where the operators really are associative or commutative<a class='hidden_link' href='#5.sentence-1'>.</a><a class='footnoteref' href='#footnote-41' id='footnoteref-41' title='Overloaded operators are never assumed to be associative or commutative.'>41</a></div> <div id='5.sentence-2' class='sentence'>
For example, in the following fragment
<span class='codeblock'><span class='keyword'>int</span> a, b;
<span class='comment'>/* ... */</span>
a <span class='operator'>=</span> a <span class='operator'>+</span> <span class='literal'>32760</span> <span class='operator'>+</span> b <span class='operator'>+</span> <span class='literal'>5</span>;
</span>
the expression statement behaves exactly the same as
<span class='codeblock'>a <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>a <span class='operator'>+</span> <span class='literal'>32760</span><span class='parenthesis'>)</span> <span class='operator'>+</span> b<span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='literal'>5</span><span class='parenthesis'>)</span>;
</span>
due to the associativity and precedence of these operators<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>Thus, the
result of the sum <span class='texttt'><span class='parenthesis'>(</span>a <span class='operator'>+</span> <span class='literal'>32760</span><span class='parenthesis'>)</span></span> is next added to <span class='texttt'>b</span>, and
that result is then added to 5 which results in the value assigned to
<span class='texttt'>a</span><a class='hidden_link' href='#5.sentence-3'>.</a></div> <div id='5.sentence-4' class='sentence'>On a machine in which overflows produce an exception and in
which the range of values representable by an <span class='texttt'><span class='keyword'>int</span></span> is
[<span class='texttt'><span class='operator'>-</span><span class='literal'>32768</span>, <span class='operator'>+</span><span class='literal'>32767</span></span>], the implementation cannot rewrite this
expression as
<span class='codeblock'>a <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='parenthesis'>(</span>a <span class='operator'>+</span> b<span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='literal'>32765</span><span class='parenthesis'>)</span>;
</span>
since if the values for <span class='texttt'>a</span> and <span class='texttt'>b</span> were, respectively,
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">32754</span></span></span></span></span> and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">15</span></span></span></span></span>, the sum <span class='texttt'>a <span class='operator'>+</span> b</span> would produce an exception while
the original expression would not; nor can the expression be rewritten
as either
<span class='codeblock'>a <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='parenthesis'>(</span>a <span class='operator'>+</span> <span class='literal'>32765</span><span class='parenthesis'>)</span> <span class='operator'>+</span> b<span class='parenthesis'>)</span>;
</span>
or
<span class='codeblock'>a <span class='operator'>=</span> <span class='parenthesis'>(</span>a <span class='operator'>+</span> <span class='parenthesis'>(</span>b <span class='operator'>+</span> <span class='literal'>32765</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span>
since the values for <span class='texttt'>a</span> and <span class='texttt'>b</span> might have been,
respectively, 4 and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">8</span></span></span></span></span> or <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">17</span></span></span></span></span> and 12<a class='hidden_link' href='#5.sentence-4'>.</a></div> <div id='5.sentence-5' class='sentence'>However on a machine in which
overflows do not produce an exception and in which the results of
overflows are reversible, the above expression statement can be
rewritten by the implementation in any of the above ways because the
same result will occur<a class='hidden_link' href='#5.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/expressions.tex#L125'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>The values of the floating-point operands and
the results of floating-point expressions
may be represented in greater precision and range than that
required by the type; the types are not changed
thereby<a class='hidden_link' href='#6.sentence-1'>.</a><a class='footnoteref' href='#footnote-42' id='footnoteref-42' title='The cast and assignment operators must still perform their specific conversions as described in [expr.type.conv], [expr.cast], [expr.static.cast] and [expr.ass].'>42</a></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-40'><div class='texpara'><a class='footnotenum' href='#footnote-40'>40)</a><a class='footnoteBacklink' href='#footnoteref-40'>40)</a> <div id='footnote-40.sentence-1' class='sentence'>The precedence of operators is not directly specified, but it can be
derived from the syntax<a class='hidden_link' href='#footnote-40.sentence-1'>.</a></div></div></div><div class='footnote' id='footnote-41'><div class='texpara'><a class='footnotenum' href='#footnote-41'>41)</a><a class='footnoteBacklink' href='#footnoteref-41'>41)</a> <div id='footnote-41.sentence-1' class='sentence'>Overloaded
operators are never assumed to be associative or commutative<a class='hidden_link' href='#footnote-41.sentence-1'>.</a></div></div></div><div class='footnote' id='footnote-42'><div class='texpara'><a class='footnotenum' href='#footnote-42'>42)</a><a class='footnoteBacklink' href='#footnoteref-42'>42)</a> <div id='footnote-42.sentence-1' class='sentence'>The cast and assignment operators must still perform their specific
conversions as described in <a href='expr.type.conv' title='7.6.1.4&emsp;Explicit type conversion (functional notation)'>[expr.<span class='shy'></span>type.<span class='shy'></span>conv]</a>, <a href='expr.cast' title='7.6.3&emsp;Explicit type conversion (cast notation)'>[expr.<span class='shy'></span>cast]</a>,
<a href='expr.static.cast' title='7.6.1.9&emsp;Static cast'>[expr.<span class='shy'></span>static.<span class='shy'></span>cast]</a> and <a href='expr.ass' title='7.6.19&emsp;Assignment and compound assignment operators'>[expr.<span class='shy'></span>ass]</a><a class='hidden_link' href='#footnote-42.sentence-1'>.</a></div></div></div></div></body></html>