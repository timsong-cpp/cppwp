<!DOCTYPE html><html lang='en'><head><title>[temp.over]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>13</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>13.10</a> Function template specializations <a class='abbr_ref' href='temp.fct.spec#temp.over'>[temp.fct.spec]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>13.10.4</a> Overload resolution <a class='abbr_ref'>[temp.over]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/templates.tex#L8714'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':overloading,resolution,function_template'></a>When a call of a function or function template
is written (explicitly, or implicitly using the
operator notation), template argument deduction (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>)
and checking of any explicit template arguments (<a href='temp.arg' title='13.4&emsp;Template arguments'>[temp.<span class='shy'></span>arg]</a>) are performed
for each function template to find the template argument values (if any) that
can be used with that function template to instantiate a function template
specialization that can be invoked with the call arguments or,
for conversion function templates, that can convert to the required type<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>For each function template:
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.1'>(1.1)</a></div><div class='texpara'><div id='1.1.sentence-1' class='sentence'>If the argument deduction and checking succeeds, the
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument'><span class='textsf'><i >template-argument</i></span></span></a><i >s</i>
(deduced and/or explicit)
are used to synthesize the declaration of
a single function template specialization which is
added to the candidate functions set to be used in overload resolution<a class='hidden_link' href='#1.1.sentence-1'>.</a></div></div></li><li id='1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.2'>(1.2)</a></div><div class='texpara'><div id='1.2.sentence-1' class='sentence'>If the argument deduction fails or
the synthesized function template specialization would be ill-formed,
no such function is added to the set of candidate functions for that template<a class='hidden_link' href='#1.2.sentence-1'>.</a></div></div></li></ul></div> <div id='1.sentence-3' class='sentence'>
The complete set of candidate functions includes all the synthesized
declarations and all of the non-template functions found by name lookup<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>The synthesized declarations are
treated like any other functions in
the remainder of overload resolution, except as explicitly noted
in <a href='over.match.best' title='12.2.4&emsp;Best viable function'>[over.<span class='shy'></span>match.<span class='shy'></span>best]</a><a class='hidden_link' href='#1.sentence-4'>.</a><a class='footnoteref' href='#footnote-129' id='footnoteref-129' title='The parameters of function template specializations contain no template parameter types. The set of conversions allowed on deduced arguments is limited, because the argument deduction process produces function templates with parameters that either match the call arguments exactly or differ only in ways that can be bridged by the allowed limited conversions. Non-deduced arguments allow the full range of conversions. Note also that [over.match.best] specifies that a non-template function will be given preference over a template specialization if the two functions are otherwise equally good candidates for an overload match.'>129</a></div></div></div><div class='para nonNormativeOnly' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/templates.tex#L8756'>#</a></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T max<span class='parenthesis'>(</span>T a, T b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a<span class='anglebracket'>&gt;</span>b<span class='operator'>?</span>a<span class='operator'>:</span>b; <span class='curlybracket'>}</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> a, <span class='keyword'>int</span> b, <span class='keyword'>char</span> c, <span class='keyword'>char</span> d<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> m1 <span class='operator'>=</span> max<span class='parenthesis'>(</span>a,b<span class='parenthesis'>)</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>max(int a, int b)</span></span>
  <span class='keyword'>char</span> m2 <span class='operator'>=</span> max<span class='parenthesis'>(</span>c,d<span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>max(char a, char b)</span></span>
  <span class='keyword'>int</span> m3 <span class='operator'>=</span> max<span class='parenthesis'>(</span>a,c<span class='parenthesis'>)</span>;            <span class='comment'>// error: cannot generate <span class='tcode_in_codeblock'>max(int,char)</span></span>
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='2.sentence-1' class='sentence'>Adding the non-template function
<span class='codeblock'><span class='keyword'>int</span> max<span class='parenthesis'>(</span><span class='keyword'>int</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;
</span>
to the example above would resolve the third call, by providing a function that
can be called for
<span class='texttt'>max<span class='parenthesis'>(</span>a,c<span class='parenthesis'>)</span></span>
after using the standard conversion of
<span class='texttt'><span class='keyword'>char</span></span>
to
<span class='texttt'><span class='keyword'>int</span></span>
for
<span class='texttt'>c</span><a class='hidden_link' href='#2.sentence-1'>.</a></div> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/templates.tex#L8783'>#</a></div><div class='texpara'><div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<div id='3.sentence-1' class='sentence'>Here is an example involving conversions on a function argument involved in
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument_'><span class='textsf'><i >template-argument</i></span></span></a>
deduction:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> D <span class='operator'>:</span> <span class='keyword'>public</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> bi, D<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> di<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>bi<span class='parenthesis'>)</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>f(bi)</span></span>
  f<span class='parenthesis'>(</span>di<span class='parenthesis'>)</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>f((B&lt;int&gt;&amp;)di)</span></span>
<span class='curlybracket'>}</span>
</span></div> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/templates.tex#L8800'>#</a></div><div class='texpara'><div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>:&ensp;<div id='4.sentence-1' class='sentence'>Here is an example involving conversions on a function argument not involved in
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter'><span class='textsf'><i >template-parameter</i></span></span></a>
deduction:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>*</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;       <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T,<span class='keyword'>char</span><span class='parenthesis'>)</span>;       <span class='comment'>// #2</span>

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>*</span> pi, <span class='keyword'>int</span> i, <span class='keyword'>char</span> c<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>pi,i<span class='parenthesis'>)</span>;          <span class='comment'>// #1: <span class='tcode_in_codeblock'>f&lt;int&gt;(pi,i)</span></span>
  f<span class='parenthesis'>(</span>pi,c<span class='parenthesis'>)</span>;          <span class='comment'>// #2: <span class='tcode_in_codeblock'>f&lt;int*&gt;(pi,c)</span></span>

  f<span class='parenthesis'>(</span>i,c<span class='parenthesis'>)</span>;           <span class='comment'>// #2: <span class='tcode_in_codeblock'>f&lt;int&gt;(i,c);</span></span>
  f<span class='parenthesis'>(</span>i,i<span class='parenthesis'>)</span>;           <span class='comment'>// #2: <span class='tcode_in_codeblock'>f&lt;int&gt;(i,char(i))</span></span>
<span class='curlybracket'>}</span>
</span></div> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f52ffc9054913f3f9a4c5dc6973f6c5c3e7f1096/source/templates.tex#L8819'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>Only the signature of a function template specialization is needed to enter the
specialization in a set of candidate functions<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>Therefore only the function template declaration is needed to resolve a call
for which a template specialization is a candidate<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;    <span class='comment'>// declaration</span>

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>"Annemarie"</span><span class='parenthesis'>)</span>;               <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;const char*&gt;</span></span>
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='5.sentence-3' class='sentence'>The call to
<span class='texttt'>f</span>
is well-formed even if the template
<span class='texttt'>f</span>
is only declared and not defined at the point of the call<a class='hidden_link' href='#5.sentence-3'>.</a></div> <div id='5.sentence-4' class='sentence'>The program will be ill-formed unless a specialization for
<span class='texttt'>f<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span></span>
is explicitly instantiated in some translation unit (<a href='temp.pre' title='13.1&emsp;Preamble'>[temp.<span class='shy'></span>pre]</a>)<a class='hidden_link' href='#5.sentence-4'>.</a></div> â€”&nbsp;<i>end example</i>]</div></div></div><div class='texpara'></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-129'><div class='texpara'><a class='footnotenum' href='#footnote-129'>129)</a><a class='footnoteBacklink' href='#footnoteref-129'>129)</a> <div id='footnote-129.sentence-1' class='sentence'>The parameters of function template
specializations contain no
template parameter types<a class='hidden_link' href='#footnote-129.sentence-1'>.</a></div> <div id='footnote-129.sentence-2' class='sentence'>The set of conversions allowed on deduced arguments is limited, because the
argument deduction process produces function templates with parameters that
either match the call arguments exactly or differ only in ways that can be
bridged by the allowed limited conversions<a class='hidden_link' href='#footnote-129.sentence-2'>.</a></div> <div id='footnote-129.sentence-3' class='sentence'>Non-deduced arguments allow the full range of conversions<a class='hidden_link' href='#footnote-129.sentence-3'>.</a></div> <div id='footnote-129.sentence-4' class='sentence'>Note also that <a href='over.match.best' title='12.2.4&emsp;Best viable function'>[over.<span class='shy'></span>match.<span class='shy'></span>best]</a> specifies that a non-template function will
be given preference over a template specialization if the two functions
are otherwise equally good candidates for an overload match<a class='hidden_link' href='#footnote-129.sentence-4'>.</a></div></div></div></div></body></html>