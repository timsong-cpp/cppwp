From 5598ee504e9db364ab1b4e02f01047613a59c3a9 Mon Sep 17 00:00:00 2001
From: timsong-cpp <rs2740@gmail.com>
Date: Sun, 1 Jan 2017 16:12:50 +0100
Subject: [PATCH 1/3] Use floattable for [optional] tables.

---
 source/tables.tex | 31 ++++---------------------------
 1 file changed, 4 insertions(+), 27 deletions(-)

diff --git a/source/tables.tex b/source/tables.tex
index 9a6adaf..2caff12 100644
--- a/source/tables.tex
+++ b/source/tables.tex
@@ -677,36 +677,13 @@
 % tables.
 \newenvironment{lib2dtab2base}[7]
 {
- %% no lines in the top-left cell, and leave a gap around the headers
- %% FIXME: I tried to use hhline here, but it doesn't appear to support
- %% the join between the leftmost top header and the topmost left header,
- %% so we fake it with an empty row and column.
- \newcommand{\topline}{\cline{3-4}}
- \newcommand{\rowsep}{\cline{1-1}\cline{3-4}}
- \newcommand{\capsep}{
-  \topline
-  \multicolumn{4}{c}{}\\[-0.8\normalbaselineskip]
-  \rowsep
- }
- \newcommand{\bottomline}{\rowsep}
- \newcommand{\hdstyle}[1]{\textbf{##1}}
- \newcommand{\rowhdr}[1]{\hdstyle{##1}&}
- \newcommand{\colhdr}[1]{\multicolumn{1}{|>{\centering}m{#6}|}{\hdstyle{##1}}}
- %% FIXME: figure out a way to reuse floattable here
- \begin{table}[htbp]
- \caption{\label{#2}#1}
- \begin{center}
- \begin{tabular}{|>{\centering}m{#5}|@{}p{0.2\normalbaselineskip}@{}|m{#6}|m{#7}|}
- %% table header
+ \newcommand{\rowhdr}[1]{\textbf{##1}}
+ \begin{floattable}{#1}{#2}{p{#5}|p{#6}|p{#7}}
  \topline
- \multicolumn{1}{c}{}&&\colhdr{#3}&\colhdr{#4}\\
- \capsep
+  & \chdr{#3} & \rhdr{#4} \\ \rowsep
 }
 {
- \bottomline
- \end{tabular}
- \end{center}
- \end{table}
+ \end{floattable}
 }
 
 \newenvironment{lib2dtab2}[4]{
-- 
2.7.4


From d39a5c34b1d69b05bceb56d00eb63986612f39f7 Mon Sep 17 00:00:00 2001
From: Eelis van der Weegen <eelis@eelis.net>
Date: Thu, 5 Jan 2017 01:13:49 +0100
Subject: [PATCH 2/3] Avoid \, inside \mbox inside math, because MathJax does
 not support it. See https://github.com/mathjax/MathJax/issues/569

---
 source/numerics.tex | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/source/numerics.tex b/source/numerics.tex
index 480d328..4368060 100644
--- a/source/numerics.tex
+++ b/source/numerics.tex
@@ -10583,7 +10583,7 @@ of their respective arguments
   \mathsf{B}(x, y) =
   \frac{ \Gamma(x) \, \Gamma(y) }
        { \Gamma(x+y) },
-       \quad \mbox{for $x > 0$,\, $y > 0$}
+       \quad \mbox{for }x > 0,\, y > 0
 \]
 where
 $x$ is \tcode{x} and
-- 
2.7.4


From 88b0c74fc425689b72e4490fae30cd083c20ad1f Mon Sep 17 00:00:00 2001
From: Eelis van der Weegen <eelis@eelis.net>
Date: Thu, 5 Jan 2017 01:50:52 +0100
Subject: [PATCH 3/3] Use \[...\] instead of $$...$$, because HaTeX does not
 support the latter.

---
 source/numerics.tex | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/source/numerics.tex b/source/numerics.tex
index 4368060..481a232 100644
--- a/source/numerics.tex
+++ b/source/numerics.tex
@@ -8025,7 +8025,7 @@ the
 template, which is one-dimensional.
 The set of one-dimensional index values specified by a
 \tcode{gslice}
-are $$k = s + \sum_ji_jd_j$$
+are \[k = s + \sum_ji_jd_j\]
 % \$k = s + sum from j \{ i sub j d sub j \}\$
 where the multidimensional indices $i_j$ range in value from
 0 to $l_{ij} - 1$.
@@ -8042,7 +8042,7 @@ stride = {19, 4, 1}
 \end{codeblock}
 yields the sequence of one-dimensional indices
 
-$$k = 3 + (0,1) \times 19 + (0,1,2,3) \times 4 + (0,1,2) \times 1$$
+\[k = 3 + (0,1) \times 19 + (0,1,2,3) \times 4 + (0,1,2) \times 1\]
 
 which are ordered as shown in the following table:
 
-- 
2.7.4

