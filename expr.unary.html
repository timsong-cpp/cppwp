<!DOCTYPE html><html lang='en'><head><title>[expr.unary]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>7.6</a> Compound expressions <a class='abbr_ref' href='expr.compound#expr.unary'>[expr.compound]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>7.6.2</a> Unary expressions <a class='abbr_ref'>[expr.unary]</a></h3><div id='general' class='section'><h4 ><a class='secnum' href='#general' style='min-width:95pt'>7.6.2.1</a> General <a class='abbr_ref' href='expr.unary.general'>[expr.unary.general]</a></h4><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4593'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'><a class='index' id=':expression,unary'></a>Expressions with unary operators group right-to-left<a class='hidden_link' href='#general-1.sentence-1'>.</a></div></div><div class='texpara'><a class='index' id=':expression,unary_'></a><a class='index' id=':operator,unary'></a><a class='index' id=':operator,sizeof'></a><a class='index' id=':operator,cast'></a><div class='bnf' id='nt:unary-expression'>

<a class='hidden_link' href='#nt:unary-expression' title='7.6.2.1&emsp;General&emsp;[expr.unary.general]'><span id='nt:unary-expression'><span id=':unary-expression'>unary-expression<span class='textnormal'>:</span></span></span></a><br/><a href='expr.post.general#nt:postfix-expression' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:postfix-expression'><span class='textsf'><i >postfix-expression</i></span></span></a><br/><a href='#nt:unary-operator' title='7.6.2.1&emsp;General&emsp;[expr.unary.general]'><span id='ntref:unary-operator'><span class='textsf'><i >unary-operator</i></span></span></a> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression'><span class='textsf'><i >cast-expression</i></span></span></a><br/><span class='terminal'><span class='operator'>+</span><span class='operator'>+</span></span> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression_'><span class='textsf'><i >cast-expression</i></span></span></a><br/><span class='terminal'><span class='operator'>-</span><span class='operator'>-</span></span> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression__'><span class='textsf'><i >cast-expression</i></span></span></a><br/><a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression'><span class='textsf'><i >await-expression</i></span></span></a><br/><span id=':sizeof'><span class='texttt'><span class='keyword'>sizeof</span></span></span> <a href='#nt:unary-expression' title='7.6.2.1&emsp;General&emsp;[expr.unary.general]'><span id='ntref:unary-expression'><span class='textsf'><i >unary-expression</i></span></span></a><br/><span id=':sizeof_'><span class='texttt'><span class='keyword'>sizeof</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id'><span class='textsf'><i >type-id</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':sizeof__'><span class='texttt'><span class='keyword'>sizeof</span></span></span> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier'><span class='textsf'><i >identifier</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span id=':alignof'><span class='texttt'><span class='keyword'>alignof</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id_'><span class='textsf'><i >type-id</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><a href='#nt:noexcept-expression' title='7.6.2.7&emsp;noexcept operator&emsp;[expr.unary.noexcept]'><span id='ntref:noexcept-expression'><span class='textsf'><i >noexcept-expression</i></span></span></a><br/><a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression'><span class='textsf'><i >new-expression</i></span></span></a><br/><a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression'><span class='textsf'><i >delete-expression</i></span></span></a>
</div></div><div class='texpara'><a class='index' id=':operator,indirection'></a><a class='index' id=':operator,address-of'></a><a class='index' id=':operator,unary_minus'></a><a class='index' id=':operator,unary_plus'></a><a class='index' id=':operator,logical_negation'></a><a class='index' id=':operator,ones&#39;_complement'></a><a class='index' id=':operator,increment'></a><a class='index' id=':operator,decrement'></a><div class='bnf' id='nt:unary-operator'>

<a class='hidden_link' href='#nt:unary-operator' title='7.6.2.1&emsp;General&emsp;[expr.unary.general]'><span id='nt:unary-operator'><span id=':unary-operator'>unary-operator<span class='textnormal'>:</span></span></span></a> <span class='textnormal'>one of</span><br/><span class='terminal'><span class='operator'>*</span>  <span class='operator'>&amp;</span>  <span class='operator'>+</span>  <span class='operator'>-</span>  <span class='operator'>!</span>  <span class='operator'>~</span></span>
</div></div></div></div><div id='op' class='section'><h4 ><a class='secnum' href='#op' style='min-width:95pt'>7.6.2.2</a> Unary operators <a class='abbr_ref' href='expr.unary.op'>[expr.unary.op]</a></h4><div class='para' id='op-1'><div class='marginalizedparent'><a class='marginalized' href='#op-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4644'>#</a></div><div class='texpara'><div id='op-1.sentence-1' class='sentence'><a class='index' id=':expression,unary_operator'></a><a class='index' id=':operator,unary_'></a>The unary <span class='texttt'><span class='operator'>*</span></span> operator performs <a class='hidden_link' href='#def:indirection' title='7.6.2.2&emsp;Unary operators&emsp;[expr.unary.op]'><span id='def:indirection'><i >indirection</i></span></a><a class='hidden_link' href='#op-1.sentence-1'>.</a></div> <div id='op-1.sentence-2' class='sentence'>Its operand shall be a prvalue of type “pointer to <span class='texttt'>T</span>”,
where <span class='texttt'>T</span> is an object or function type<a class='hidden_link' href='#op-1.sentence-2'>.</a></div> <div id='op-1.sentence-3' class='sentence'>The operator yields an lvalue of type <span class='texttt'>T</span><a class='hidden_link' href='#op-1.sentence-3'>.</a></div> <div id='op-1.sentence-4' class='sentence'>If the operand points to an object or function,
the result denotes that object or function;
otherwise, the behavior is undefined except as specified in <a href='expr.typeid' title='7.6.1.8&emsp;Type identification'>[expr.<span class='shy'></span>typeid]</a><a class='hidden_link' href='#op-1.sentence-4'>.</a></div> <div id='op-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#op-note-1'>1</a></i>:&ensp;<div id='op-1.sentence-5' class='sentence'><a class='index' id=':type,incomplete'></a>Indirection through a pointer to an incomplete type (other than
<span class='mathit'>cv</span> <span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span>) is valid<a class='hidden_link' href='#op-1.sentence-5'>.</a></div> <div id='op-1.sentence-6' class='sentence'>The lvalue thus obtained can be
used in limited ways (to initialize a reference, for example); this
lvalue must not be converted to a prvalue, see <a href='conv.lval' title='7.3.2&emsp;Lvalue-to-rvalue conversion'>[conv.<span class='shy'></span>lval]</a><a class='hidden_link' href='#op-1.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='op-2'><div class='marginalizedparent'><a class='marginalized' href='#op-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4663'>#</a></div><div class='texpara'><div id='op-2.sentence-1' class='sentence'>Each of the following unary operators yields a prvalue<a class='hidden_link' href='#op-2.sentence-1'>.</a></div></div></div><div class='para' id='op-3'><div class='marginalizedparent'><a class='marginalized' href='#op-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4666'>#</a></div><div class='texpara'><div id='op-3.sentence-1' class='sentence'><a class='index' id=':name,address_of_cv-qualified'></a><a class='index' id=':expression,pointer-to-member_constant'></a>The operand of the unary <span class='texttt'><span class='operator'>&amp;</span></span> operator
shall be an lvalue of some type <span class='texttt'>T</span><a class='hidden_link' href='#op-3.sentence-1'>.</a></div> <ul class='itemize'><li id='op-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#op-3.1'>(3.1)</a></div><div class='texpara'><div id='op-3.1.sentence-1' class='sentence'>If the operand is a <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id'><span class='textsf'><i >qualified-id</i></span></span></a> naming a non-static or variant member <span class='texttt'>m</span>
of some class <span class='texttt'>C</span>, other than an explicit object member function, the result has type “pointer to member
of class <span class='texttt'>C</span> of type <span class='texttt'>T</span>” and designates <span class='texttt'>C<span class='operator'>&#x200b;::&#x200b;</span>m</span><a class='hidden_link' href='#op-3.1.sentence-1'>.</a></div></div></li><li id='op-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#op-3.2'>(3.2)</a></div><div class='texpara'><div id='op-3.2.sentence-1' class='sentence'>Otherwise, the result has type “pointer to <span class='texttt'>T</span>” and points to
the designated object (<a href='intro.memory' title='6.7.1&emsp;Memory model'>[intro.<span class='shy'></span>memory]</a>) or function (<a href='basic.compound' title='6.8.4&emsp;Compound types'>[basic.<span class='shy'></span>compound]</a>)<a class='hidden_link' href='#op-3.2.sentence-1'>.</a></div> <div id='op-3.2.sentence-2' class='sentence'>If the operand names an explicit object member function (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>),
the operand shall be a <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_'><span class='textsf'><i >qualified-id</i></span></span></a><a class='hidden_link' href='#op-3.2.sentence-2'>.</a></div> <div id='op-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#op-note-2'>2</a></i>:&ensp;<div id='op-3.2.sentence-3' class='sentence'>In particular, taking the address of a variable of type “<span class='mathit'>cv</span> <span class='texttt'>T</span>”
yields a pointer of type “pointer to <span class='mathit'>cv</span> <span class='texttt'>T</span>”<a class='hidden_link' href='#op-3.2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li></ul> <div id='op-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#op-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>int</span> i; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='operator'>&amp;</span>B<span class='operator'>::</span>i <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>       <span class='comment'>// has type <span class='tcode_in_codeblock'>int A&#x200b;::&#x200b;*</span></span>
<span class='keyword'>int</span> a;
<span class='keyword'>int</span><span class='operator'>*</span> p1 <span class='operator'>=</span> <span class='operator'>&amp;</span>a;
<span class='keyword'>int</span><span class='operator'>*</span> p2 <span class='operator'>=</span> p1 <span class='operator'>+</span> <span class='literal'>1</span>;   <span class='comment'>// defined behavior</span>
<span class='keyword'>bool</span> b <span class='operator'>=</span> p2 <span class='anglebracket'>&gt;</span> p1;   <span class='comment'>// defined behavior, with value <span class='tcode_in_codeblock'>true</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='op-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#op-note-3'>3</a></i>:&ensp;<div id='op-3.sentence-2' class='sentence'>A pointer to member formed from a <span id=':mutable'><span class='texttt'><span class='keyword'>mutable</span></span></span> non-static data
member (<a href='dcl.stc' title='9.2.2&emsp;Storage class specifiers'>[dcl.<span class='shy'></span>stc]</a>) does not reflect the <span id=':mutable_'><span class='texttt'><span class='keyword'>mutable</span></span></span> specifier
associated with the non-static data member<a class='hidden_link' href='#op-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='op-4'><div class='marginalizedparent'><a class='marginalized' href='#op-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4703'>#</a></div><div class='texpara'><div id='op-4.sentence-1' class='sentence'>A pointer to member is only formed when an explicit <span class='texttt'><span class='operator'>&amp;</span></span> is used
and its operand is a <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id__'><span class='textsf'><i >qualified-id</i></span></span></a> not enclosed in
parentheses<a class='hidden_link' href='#op-4.sentence-1'>.</a></div> <div id='op-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#op-note-4'>4</a></i>:&ensp;<div id='op-4.sentence-2' class='sentence'>That is, the expression <span class='texttt'><span class='operator'>&amp;</span><span class='parenthesis'>(</span>qualified<span class='operator'>-</span>id<span class='parenthesis'>)</span></span>, where the
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id___'><span class='textsf'><i >qualified-id</i></span></span></a> is enclosed in parentheses, does not form an
expression of type “pointer to member”<a class='hidden_link' href='#op-4.sentence-2'>.</a></div> <div id='op-4.sentence-3' class='sentence'>Neither does
<span class='texttt'>qualified<span class='operator'>-</span>id</span>, because there is no implicit conversion from a
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id____'><span class='textsf'><i >qualified-id</i></span></span></a> for a non-static member function to the type
“pointer to member function” as there is from an lvalue of function
type to the type “pointer to function” (<a href='conv.func' title='7.3.4&emsp;Function-to-pointer conversion'>[conv.<span class='shy'></span>func]</a>)<a class='hidden_link' href='#op-4.sentence-3'>.</a></div> <div id='op-4.sentence-4' class='sentence'>Nor is
<span class='texttt'><span class='operator'>&amp;</span>unqualified<span class='operator'>-</span>id</span> a pointer to member, even within the scope of
the <a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id'><span class='textsf'><i >unqualified-id</i></span></span></a>'s class<a class='hidden_link' href='#op-4.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='op-5'><div class='marginalizedparent'><a class='marginalized' href='#op-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4719'>#</a></div><div class='texpara'><div id='op-5.sentence-1' class='sentence'>If <span class='texttt'><span class='operator'>&amp;</span></span> is applied to an lvalue of incomplete class type and the
complete type declares <span class='texttt'><span id=':operator'><span class='texttt'><span class='keyword'>operator</span></span></span><span class='operator'>&amp;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, it is unspecified whether
the operator has the built-in meaning or the operator function is
called<a class='hidden_link' href='#op-5.sentence-1'>.</a></div> <div id='op-5.sentence-2' class='sentence'>The operand of <span class='texttt'><span class='operator'>&amp;</span></span> shall not be a bit-field<a class='hidden_link' href='#op-5.sentence-2'>.</a></div></div></div><div class='para nonNormativeOnly' id='op-6'><div class='marginalizedparent'><a class='marginalized' href='#op-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4725'>#</a></div><div class='texpara'><a class='index' id=':overloaded_function,address_of'></a><div id='op-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#op-note-5'>5</a></i>:&ensp;<div id='op-6.sentence-1' class='sentence'>The address of an overload set (<a href='over' title='12&emsp;Overloading'>[over]</a>) can be taken
only in a context that uniquely determines
which function is referred to (see <a href='over.over' title='12.3&emsp;Address of an overload set'>[over.<span class='shy'></span>over]</a>)<a class='hidden_link' href='#op-6.sentence-1'>.</a></div> <div id='op-6.sentence-2' class='sentence'>Since the context can affect whether the operand is a static or
non-static member function, the context can also affect whether the
expression has type “pointer to function” or “pointer to member
function”<a class='hidden_link' href='#op-6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='op-7'><div class='marginalizedparent'><a class='marginalized' href='#op-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4737'>#</a></div><div class='texpara'><div id='op-7.sentence-1' class='sentence'><a class='index' id=':operator,unary_plus_'></a>The operand of the unary <span class='texttt'><span class='operator'>+</span></span> operator shall be a prvalue of
arithmetic, unscoped
enumeration, or pointer type and the result is the value of the
argument<a class='hidden_link' href='#op-7.sentence-1'>.</a></div> <div id='op-7.sentence-2' class='sentence'>Integral promotion is performed on integral or enumeration
operands<a class='hidden_link' href='#op-7.sentence-2'>.</a></div> <div id='op-7.sentence-3' class='sentence'>The type of the result is the type of the promoted operand<a class='hidden_link' href='#op-7.sentence-3'>.</a></div></div></div><div class='para' id='op-8'><div class='marginalizedparent'><a class='marginalized' href='#op-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4745'>#</a></div><div class='texpara'><div id='op-8.sentence-1' class='sentence'><a class='index' id=':operator,unary_minus_'></a>The operand of the unary <span class='texttt'><span class='operator'>-</span></span> operator shall be a prvalue of
arithmetic or unscoped
enumeration type and the result is the negative of its operand<a class='hidden_link' href='#op-8.sentence-1'>.</a></div> <div id='op-8.sentence-2' class='sentence'>Integral
promotion is performed on integral or enumeration operands<a class='hidden_link' href='#op-8.sentence-2'>.</a></div> <div id='op-8.sentence-3' class='sentence'>The negative
of an unsigned quantity is computed by subtracting its value from <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.591em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span></span>,
where <span class='math'><span class='mathalpha'>n</span></span> is the number of bits in the promoted operand<a class='hidden_link' href='#op-8.sentence-3'>.</a></div> <div id='op-8.sentence-4' class='sentence'>The type of the
result is the type of the promoted operand<a class='hidden_link' href='#op-8.sentence-4'>.</a></div> <div id='op-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#op-note-6'>6</a></i>:&ensp;<div id='op-8.sentence-5' class='sentence'>The result is the two's complement of the operand
(where operand and result are considered as unsigned)<a class='hidden_link' href='#op-8.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='op-9'><div class='marginalizedparent'><a class='marginalized' href='#op-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4759'>#</a></div><div class='texpara'><div id='op-9.sentence-1' class='sentence'><a class='index' id=':operator,logical_negation_'></a>The operand of the logical negation operator <span class='texttt'><span class='operator'>!</span></span> is contextually
converted to <span id=':bool'><span class='texttt'><span class='keyword'>bool</span></span></span> (<a href='conv' title='7.3&emsp;Standard conversions'>[conv]</a>);
its value is <span id=':true'><span class='texttt'><span class='literal'>true</span></span></span>
if the converted operand is <span id=':false'><span class='texttt'><span class='literal'>false</span></span></span> and <span id=':false_'><span class='texttt'><span class='literal'>false</span></span></span> otherwise<a class='hidden_link' href='#op-9.sentence-1'>.</a></div> <div id='op-9.sentence-2' class='sentence'>The type of the result is <span id=':bool_'><span class='texttt'><span class='keyword'>bool</span></span></span><a class='hidden_link' href='#op-9.sentence-2'>.</a></div></div></div><div class='para' id='op-10'><div class='marginalizedparent'><a class='marginalized' href='#op-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4767'>#</a></div><div class='texpara'><div id='op-10.sentence-1' class='sentence'><a class='index' id=':operator,ones&#39;_complement_'></a>The operand of the <span class='texttt'><span class='operator'>~</span></span> operator shall be a prvalue of
integral or unscoped enumeration type<a class='hidden_link' href='#op-10.sentence-1'>.</a></div> <div id='op-10.sentence-2' class='sentence'>Integral promotions are performed<a class='hidden_link' href='#op-10.sentence-2'>.</a></div> <div id='op-10.sentence-3' class='sentence'>The type of the result is the type of the promoted operand<a class='hidden_link' href='#op-10.sentence-3'>.</a></div> <div id='op-10.sentence-4' class='sentence'>Given the coefficients <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.225em;">x</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span>
of the base-2 representation (<a href='basic.fundamental' title='6.8.2&emsp;Fundamental types'>[basic.<span class='shy'></span>fundamental]</a>)
of the promoted operand <span class='texttt'>x</span>,
the coefficient <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.225em;">r</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span>
of the base-2 representation of the result <span class='texttt'>r</span>
is 1 if <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.225em;">x</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span> is 0, and 0 otherwise<a class='hidden_link' href='#op-10.sentence-4'>.</a></div> <div id='op-note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#op-note-7'>7</a></i>:&ensp;<div id='op-10.sentence-5' class='sentence'>The result is the ones' complement of the operand
(where operand and result are considered as unsigned)<a class='hidden_link' href='#op-10.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='op-10.sentence-6' class='sentence'>
There is an ambiguity
in the grammar when <span class='texttt'><span class='operator'>~</span></span> is followed by
a <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name'><span class='textsf'><i >type-name</i></span></span></a> or <a href='dcl.type.simple#nt:computed-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:computed-type-specifier'><span class='textsf'><i >computed-type-specifier</i></span></span></a><a class='hidden_link' href='#op-10.sentence-6'>.</a></div> <div id='op-10.sentence-7' class='sentence'>The ambiguity is resolved by treating <span class='texttt'><span class='operator'>~</span></span> as the
operator rather than as the start of an <a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id_'><span class='textsf'><i >unqualified-id</i></span></span></a>
naming a destructor<a class='hidden_link' href='#op-10.sentence-7'>.</a></div> <div id='op-note-8' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#op-note-8'>8</a></i>:&ensp;<div id='op-10.sentence-8' class='sentence'>Because the grammar does not permit an operator to follow the
<span class='texttt'><span class='operator'>.</span></span>, <span class='texttt'><span class='operator'>-</span><span class='anglebracket'>&gt;</span></span>, or <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span></span> tokens, a <span class='texttt'><span class='operator'>~</span></span> followed by
a <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name_'><span class='textsf'><i >type-name</i></span></span></a> or <a href='dcl.type.simple#nt:computed-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:computed-type-specifier_'><span class='textsf'><i >computed-type-specifier</i></span></span></a> in a
member access expression or <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_____'><span class='textsf'><i >qualified-id</i></span></span></a> is
unambiguously parsed as a destructor name<a class='hidden_link' href='#op-10.sentence-8'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='expr.pre.incr' class='section'><h4 ><a class='secnum' href='#expr.pre.incr' style='min-width:95pt'>7.6.2.3</a> Increment and decrement <a class='abbr_ref' href='expr.pre.incr'>[expr.pre.incr]</a></h4><div class='para' id='expr.pre.incr-1'><div class='marginalizedparent'><a class='marginalized' href='#expr.pre.incr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4800'>#</a></div><div class='texpara'><div id='expr.pre.incr-1.sentence-1' class='sentence'><a class='index' id=':expression,increment'></a><a class='index' id=':expression,decrement'></a><a class='index' id=':operator,increment_'></a><a class='index' id=':operator,decrement_'></a><a class='index' id=':prefix_++'></a><a class='index' id=':prefix_--'></a>The operand of prefix <span class='texttt'><span class='operator'>+</span><span class='operator'>+</span></span> or <span class='texttt'><span class='operator'>-</span><span class='operator'>-</span></span>
shall not be of type <span class='mathit'>cv</span> <span class='texttt'><span class='keyword'>bool</span></span><a class='hidden_link' href='#expr.pre.incr-1.sentence-1'>.</a></div> <div id='expr.pre.incr-1.sentence-2' class='sentence'>An operand with volatile-qualified type is deprecated;
see <a href='depr.volatile.type' title='D.4&emsp;Deprecated volatile types'>[depr.<span class='shy'></span>volatile.<span class='shy'></span>type]</a><a class='hidden_link' href='#expr.pre.incr-1.sentence-2'>.</a></div> <div id='expr.pre.incr-1.sentence-3' class='sentence'>The expression <span class='texttt'><span class='operator'>+</span><span class='operator'>+</span>x</span> is otherwise equivalent to <span class='texttt'>x<span class='operator'>+</span><span class='operator'>=</span><span class='literal'>1</span></span> and
the expression <span class='texttt'><span class='operator'>-</span><span class='operator'>-</span>x</span> is otherwise equivalent to <span class='texttt'>x<span class='operator'>-</span><span class='operator'>=</span><span class='literal'>1</span></span> (<a href='expr.ass' title='7.6.19&emsp;Assignment and compound assignment operators'>[expr.<span class='shy'></span>ass]</a>)<a class='hidden_link' href='#expr.pre.incr-1.sentence-3'>.</a></div> <div id='expr.pre.incr-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.pre.incr-note-1'>1</a></i>:&ensp;<div id='expr.pre.incr-1.sentence-4' class='sentence'>For postfix increment and decrement, see <a href='expr.post.incr' title='7.6.1.6&emsp;Increment and decrement'>[expr.<span class='shy'></span>post.<span class='shy'></span>incr]</a><a class='hidden_link' href='#expr.pre.incr-1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='expr.await' class='section'><h4 ><a class='secnum' href='#expr.await' style='min-width:95pt'>7.6.2.4</a> Await <a class='abbr_ref' href='expr.await'>[expr.await]</a></h4><div class='texpara'><a class='index' id=':expression,await'></a><a class='index' id=':co_await'></a></div><div class='para' id='expr.await-1'><div class='marginalizedparent'><a class='marginalized' href='#expr.await-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4821'>#</a></div><div class='texpara'><div id='expr.await-1.sentence-1' class='sentence'>The <span id=':co_await_'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>await</span></span></span> expression is used to suspend evaluation of a
coroutine (<a href='dcl.fct.def.coroutine' title='9.5.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>) while awaiting completion of
the computation represented by the operand expression<a class='hidden_link' href='#expr.await-1.sentence-1'>.</a></div> <div id='expr.await-1.sentence-2' class='sentence'>Suspending the evaluation of a coroutine
transfers control to its caller or resumer<a class='hidden_link' href='#expr.await-1.sentence-2'>.</a></div></div><div class='texpara'><div class='bnf' id='nt:await-expression'>
<a class='hidden_link' href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='nt:await-expression'><span id=':await-expression'>await-expression<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='keyword'>co_await</span></span> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression___'><span class='textsf'><i >cast-expression</i></span></span></a>
</div></div></div><div class='para' id='expr.await-2'><div class='marginalizedparent'><a class='marginalized' href='#expr.await-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4833'>#</a></div><div class='texpara'><div id='expr.await-2.sentence-1' class='sentence'>An <a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression_'><span class='textsf'><i >await-expression</i></span></span></a> shall appear only as a potentially-evaluated
expression within the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement'><span class='textsf'><i >compound-statement</i></span></span></a> of a
<a href='dcl.fct.def.general#nt:function-body' title='9.5.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-body'><span class='textsf'><i >function-body</i></span></span></a> or <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression'><span class='textsf'><i >lambda-expression</i></span></span></a>,
in either case
outside of a <a href='except.pre#nt:handler' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:handler'><span class='textsf'><i >handler</i></span></span></a> (<a href='except.pre' title='14.1&emsp;Preamble'>[except.<span class='shy'></span>pre]</a>)<a class='hidden_link' href='#expr.await-2.sentence-1'>.</a></div> <div id='expr.await-2.sentence-2' class='sentence'>In a <a href='stmt.dcl#nt:declaration-statement' title='8.8&emsp;Declaration statement&emsp;[stmt.dcl]'><span id='ntref:declaration-statement'><span class='textsf'><i >declaration-statement</i></span></span></a> or in the
<a href='dcl.pre#nt:simple-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:simple-declaration'><span class='textsf'><i >simple-declaration</i></span></span></a> (if any)
of an <a href='stmt.pre#nt:init-statement' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:init-statement'><span class='textsf'><i >init-statement</i></span></span></a>, an <a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression__'><span class='textsf'><i >await-expression</i></span></span></a>
shall appear only in an <a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer'><span class='textsf'><i >initializer</i></span></span></a> of that
<a href='stmt.dcl#nt:declaration-statement' title='8.8&emsp;Declaration statement&emsp;[stmt.dcl]'><span id='ntref:declaration-statement_'><span class='textsf'><i >declaration-statement</i></span></span></a> or <a href='dcl.pre#nt:simple-declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:simple-declaration_'><span class='textsf'><i >simple-declaration</i></span></span></a><a class='hidden_link' href='#expr.await-2.sentence-2'>.</a></div> <div id='expr.await-2.sentence-3' class='sentence'>An <a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression___'><span class='textsf'><i >await-expression</i></span></span></a> shall not appear in a
default argument (<a href='dcl.fct.default' title='9.3.4.7&emsp;Default arguments'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>default]</a>)<a class='hidden_link' href='#expr.await-2.sentence-3'>.</a></div> <div id='expr.await-2.sentence-4' class='sentence'>An <a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression____'><span class='textsf'><i >await-expression</i></span></span></a> shall not appear in the initializer of
a block variable with static or thread storage duration<a class='hidden_link' href='#expr.await-2.sentence-4'>.</a></div> <div id='expr.await-2.sentence-5' class='sentence'>A context within a function where an <a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression_____'><span class='textsf'><i >await-expression</i></span></span></a> can appear
is called a <a class='hidden_link' href='#def:suspension_context' id='def:suspension_context'><i>suspension context</i></a> of the function<a class='hidden_link' href='#expr.await-2.sentence-5'>.</a></div></div></div><div class='para' id='expr.await-3'><div class='marginalizedparent'><a class='marginalized' href='#expr.await-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4851'>#</a></div><div class='texpara'><div id='expr.await-3.sentence-1' class='sentence'>Evaluation of an <a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression______'><span class='textsf'><i >await-expression</i></span></span></a> involves the following
auxiliary types, expressions, and objects:
<ul class='itemize'><li id='expr.await-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.await-3.1'>(3.1)</a></div><div class='texpara'><div id='expr.await-3.1.sentence-1' class='sentence'><i >p</i> is an lvalue naming the promise
object (<a href='dcl.fct.def.coroutine' title='9.5.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>)
of the enclosing coroutine and <span class='texttt'>P</span> is the type of that object<a class='hidden_link' href='#expr.await-3.1.sentence-1'>.</a></div></div></li><li id='expr.await-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.await-3.2'>(3.2)</a></div><div class='texpara'><div id='expr.await-3.2.sentence-1' class='sentence'>Unless
the <a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression_______'><span class='textsf'><i >await-expression</i></span></span></a> was implicitly produced by
a <a href='expr.yield#nt:yield-expression' title='7.6.17&emsp;Yielding a value&emsp;[expr.yield]'><span id='ntref:yield-expression'><span class='textsf'><i >yield-expression</i></span></span></a> (<a href='expr.yield' title='7.6.17&emsp;Yielding a value'>[expr.<span class='shy'></span>yield]</a>),
an initial await expression,
or a final await expression (<a href='dcl.fct.def.coroutine' title='9.5.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>),
a search is performed for the name <span class='texttt'>await_<span class='shy'></span>transform</span>
in the scope of <span class='texttt'>P</span>  (<a href='class.member.lookup' title='6.5.2&emsp;Member name lookup'>[class.<span class='shy'></span>member.<span class='shy'></span>lookup]</a>)<a class='hidden_link' href='#expr.await-3.2.sentence-1'>.</a></div> <div id='expr.await-3.2.sentence-2' class='sentence'>If this search is performed and finds at least one declaration,
then <i >a</i> is
<span class='mbox'><i >p</i><span class='texttt'><span class='operator'>.</span>await_<span class='shy'></span>transform<span class='parenthesis'>(</span></span><a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression____'><span class='textsf'><i >cast-expression</i></span></span></a><span class='texttt'><span class='parenthesis'>)</span></span></span>;
otherwise, <i >a</i> is the  <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression_____'><span class='textsf'><i >cast-expression</i></span></span></a><a class='hidden_link' href='#expr.await-3.2.sentence-2'>.</a></div></div></li><li id='expr.await-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.await-3.3'>(3.3)</a></div><div class='texpara'><div id='expr.await-3.3.sentence-1' class='sentence'><i >o</i> is determined by enumerating the applicable
<span class='texttt'><span id=':operator_'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':co_await__'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>await</span></span></span></span> functions for an argument
<i >a</i> (<a href='over.match.oper' title='12.2.2.3&emsp;Operators in expressions'>[over.<span class='shy'></span>match.<span class='shy'></span>oper]</a>), and choosing the best one through
overload resolution (<a href='over.match' title='12.2&emsp;Overload resolution'>[over.<span class='shy'></span>match]</a>)<a class='hidden_link' href='#expr.await-3.3.sentence-1'>.</a></div> <div id='expr.await-3.3.sentence-2' class='sentence'>If overload resolution is ambiguous,
the program is ill-formed<a class='hidden_link' href='#expr.await-3.3.sentence-2'>.</a></div> <div id='expr.await-3.3.sentence-3' class='sentence'>If no viable functions are found, <i >o</i> is <i >a</i><a class='hidden_link' href='#expr.await-3.3.sentence-3'>.</a></div> <div id='expr.await-3.3.sentence-4' class='sentence'>Otherwise, <i >o</i> is a call to the selected function
with the argument <i >a</i><a class='hidden_link' href='#expr.await-3.3.sentence-4'>.</a></div> <div id='expr.await-3.3.sentence-5' class='sentence'>If <i >o</i> would be a prvalue,
the temporary materialization conversion (<a href='conv.rval' title='7.3.5&emsp;Temporary materialization conversion'>[conv.<span class='shy'></span>rval]</a>) is applied<a class='hidden_link' href='#expr.await-3.3.sentence-5'>.</a></div></div></li><li id='expr.await-3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.await-3.4'>(3.4)</a></div><div class='texpara'><div id='expr.await-3.4.sentence-1' class='sentence'><i >e</i> is an lvalue
referring to the result of evaluating
the (possibly-converted) <i >o</i><a class='hidden_link' href='#expr.await-3.4.sentence-1'>.</a></div></div></li><li id='expr.await-3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.await-3.5'>(3.5)</a></div><div class='texpara'><div id='expr.await-3.5.sentence-1' class='sentence'><i >h</i> is an object of type
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>coroutine_<span class='shy'></span>handle<span class='anglebracket'>&lt;</span>P<span class='anglebracket'>&gt;</span></span>
referring to the enclosing coroutine<a class='hidden_link' href='#expr.await-3.5.sentence-1'>.</a></div></div></li><li id='expr.await-3.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.await-3.6'>(3.6)</a></div><div class='texpara'><div id='expr.await-3.6.sentence-1' class='sentence'><i >await-ready</i> is the expression
<i >e</i><span class='texttt'><span class='operator'>.</span>await_<span class='shy'></span>ready<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
contextually converted to <span class='texttt'><span class='keyword'>bool</span></span><a class='hidden_link' href='#expr.await-3.6.sentence-1'>.</a></div></div></li><li id='expr.await-3.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.await-3.7'>(3.7)</a></div><div class='texpara'><div id='expr.await-3.7.sentence-1' class='sentence'><i >await-suspend</i> is the expression
<i >e</i><span class='texttt'><span class='operator'>.</span>await_<span class='shy'></span>suspend<span class='parenthesis'>(</span></span><i >h</i><span class='texttt'><span class='parenthesis'>)</span></span>,
which shall be a prvalue of type <span id=':void_'><span class='texttt'><span class='keyword'>void</span></span></span>, <span id=':bool__'><span class='texttt'><span class='keyword'>bool</span></span></span>, or
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>coroutine_<span class='shy'></span>handle<span class='anglebracket'>&lt;</span>Z<span class='anglebracket'>&gt;</span></span> for some type <span class='texttt'>Z</span><a class='hidden_link' href='#expr.await-3.7.sentence-1'>.</a></div></div></li><li id='expr.await-3.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.await-3.8'>(3.8)</a></div><div class='texpara'><div id='expr.await-3.8.sentence-1' class='sentence'><i >await-resume</i> is the expression
<i >e</i><span class='texttt'><span class='operator'>.</span>await_<span class='shy'></span>resume<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#expr.await-3.8.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='expr.await-4'><div class='marginalizedparent'><a class='marginalized' href='#expr.await-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4914'>#</a></div><div class='texpara'><div id='expr.await-4.sentence-1' class='sentence'>The <a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression________'><span class='textsf'><i >await-expression</i></span></span></a> has the same type and value category
as the <i >await-resume</i> expression<a class='hidden_link' href='#expr.await-4.sentence-1'>.</a></div></div></div><div class='para' id='expr.await-5'><div class='marginalizedparent'><a class='marginalized' href='#expr.await-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4918'>#</a></div><div class='texpara'><div id='expr.await-5.sentence-1' class='sentence'>The <a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression_________'><span class='textsf'><i >await-expression</i></span></span></a> evaluates
the (possibly-converted) <i >o</i> expression and
the <i >await-ready</i> expression, then:
<ul class='itemize'><li id='expr.await-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.await-5.1'>(5.1)</a></div><div class='texpara'><div id='expr.await-5.1.sentence-1' class='sentence'>If the result of <i >await-ready</i> is <span id=':false__'><span class='texttt'><span class='literal'>false</span></span></span>,
the coroutine is considered suspended<a class='hidden_link' href='#expr.await-5.1.sentence-1'>.</a></div> <div id='expr.await-5.1.sentence-2' class='sentence'>Then:
<ul class='itemize'><li id='expr.await-5.1.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#expr.await-5.1.1'>(5.1.1)</a></div><div class='texpara'><div id='expr.await-5.1.1.sentence-1' class='sentence'>If the type of <i >await-suspend</i>
is <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>coroutine_<span class='shy'></span>handle<span class='anglebracket'>&lt;</span>Z<span class='anglebracket'>&gt;</span></span>,
<i >await-suspend</i><span class='texttt'><span class='operator'>.</span>resume<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is evaluated<a class='hidden_link' href='#expr.await-5.1.1.sentence-1'>.</a></div> <div id='expr.await-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.await-note-1'>1</a></i>:&ensp;<div id='expr.await-5.1.1.sentence-2' class='sentence'>This resumes the coroutine referred to
by the result of <i >await-suspend</i><a class='hidden_link' href='#expr.await-5.1.1.sentence-2'>.</a></div> <div id='expr.await-5.1.1.sentence-3' class='sentence'>Any number of coroutines can be successively resumed in this fashion,
eventually returning control flow to the current coroutine caller or
resumer (<a href='dcl.fct.def.coroutine' title='9.5.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>)<a class='hidden_link' href='#expr.await-5.1.1.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='expr.await-5.1.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#expr.await-5.1.2'>(5.1.2)</a></div><div class='texpara'><div id='expr.await-5.1.2.sentence-1' class='sentence'>Otherwise, if the type of <i >await-suspend</i>
is <span id=':bool___'><span class='texttt'><span class='keyword'>bool</span></span></span>,
<i >await-suspend</i> is evaluated,
and the coroutine is resumed if the result is <span id=':false___'><span class='texttt'><span class='literal'>false</span></span></span><a class='hidden_link' href='#expr.await-5.1.2.sentence-1'>.</a></div></div></li><li id='expr.await-5.1.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#expr.await-5.1.3'>(5.1.3)</a></div><div class='texpara'><div id='expr.await-5.1.3.sentence-1' class='sentence'>Otherwise, <i >await-suspend</i> is evaluated<a class='hidden_link' href='#expr.await-5.1.3.sentence-1'>.</a></div></div></li></ul></div> <div id='expr.await-5.1.sentence-3' class='sentence'>
If the evaluation of <i >await-suspend</i>
exits via an exception, the exception is caught,
the coroutine is resumed, and the exception is immediately
rethrown (<a href='except.throw' title='14.2&emsp;Throwing an exception'>[except.<span class='shy'></span>throw]</a>)<a class='hidden_link' href='#expr.await-5.1.sentence-3'>.</a></div> <div id='expr.await-5.1.sentence-4' class='sentence'>Otherwise, control flow returns
to the current coroutine caller or resumer (<a href='dcl.fct.def.coroutine' title='9.5.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>)
without exiting any scopes (<a href='stmt.jump' title='8.7&emsp;Jump statements'>[stmt.<span class='shy'></span>jump]</a>)<a class='hidden_link' href='#expr.await-5.1.sentence-4'>.</a></div> <div id='expr.await-5.1.sentence-5' class='sentence'><a class='index' id=':coroutine,suspend_point'></a>The point in the coroutine
immediately prior to control returning to its caller or resumer
is a coroutine <a class='hidden_link' href='#def:suspend_point' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='def:suspend_point'><i >suspend point</i></span></a><a class='hidden_link' href='#expr.await-5.1.sentence-5'>.</a></div></div></li><li id='expr.await-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.await-5.2'>(5.2)</a></div><div class='texpara'><div id='expr.await-5.2.sentence-1' class='sentence'>If the result of <i >await-ready</i> is <span id=':true_'><span class='texttt'><span class='literal'>true</span></span></span>,
or when the coroutine is resumed
other than by rethrowing an exception from <i >await-suspend</i>,
the <i >await-resume</i> expression is evaluated, and
its result is the result of the <a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression__________'><span class='textsf'><i >await-expression</i></span></span></a><a class='hidden_link' href='#expr.await-5.2.sentence-1'>.</a></div></div></li></ul></div> <div id='expr.await-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.await-note-2'>2</a></i>:&ensp;<div id='expr.await-5.sentence-2' class='sentence'>With respect to sequencing,
an <a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression___________'><span class='textsf'><i >await-expression</i></span></span></a> is indivisible (<a href='intro.execution' title='6.9.1&emsp;Sequential execution'>[intro.<span class='shy'></span>execution]</a>)<a class='hidden_link' href='#expr.await-5.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='expr.await-6'><div class='marginalizedparent'><a class='marginalized' href='#expr.await-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L4972'>#</a></div><div class='texpara'><div id='expr.await-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#expr.await-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> my_future <span class='curlybracket'>{</span>
  <span class='comment'>/* ... */</span>
  <span class='keyword'>bool</span> await_ready<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> await_suspend<span class='parenthesis'>(</span>std<span class='operator'>::</span>coroutine_handle<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
  T await_resume<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Rep, <span class='keyword'>class</span> Period<span class='anglebracket'>&gt;</span>
<span class='keyword'>auto</span> <span class='keyword'>operator</span> <span class='keyword'>co_await</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>chrono<span class='operator'>::</span>duration<span class='anglebracket'>&lt;</span>Rep, Period<span class='anglebracket'>&gt;</span> d<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> awaiter <span class='curlybracket'>{</span>
    std<span class='operator'>::</span>chrono<span class='operator'>::</span>system_clock<span class='operator'>::</span>duration duration;
    <span class='comment'>/* ... */</span>
    awaiter<span class='parenthesis'>(</span>std<span class='operator'>::</span>chrono<span class='operator'>::</span>system_clock<span class='operator'>::</span>duration d<span class='parenthesis'>)</span> <span class='operator'>:</span> duration<span class='parenthesis'>(</span>d<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    <span class='keyword'>bool</span> await_ready<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> duration<span class='operator'>.</span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span><span class='operator'>=</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>
    <span class='keyword'>void</span> await_resume<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    <span class='keyword'>void</span> await_suspend<span class='parenthesis'>(</span>std<span class='operator'>::</span>coroutine_handle<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> h<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span>;
  <span class='keyword'>return</span> awaiter<span class='curlybracket'>{</span>d<span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>using</span> <span class='keyword'>namespace</span> std<span class='operator'>::</span>chrono;

my_future<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

my_future<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>"just about to go to sleep...\n"</span>;
  <span class='keyword'>co_await</span> <span class='literal'>10ms</span>;
  std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>"resumed\n"</span>;
  <span class='keyword'>co_await</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>auto</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> x <span class='operator'>=</span> <span class='keyword'>co_await</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;   <span class='comment'>// error: <a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression____________'><span class='textsf'><i >await-expression</i></span></span></a> outside of function suspension context</span>
<span class='keyword'>int</span> a<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='keyword'>co_await</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>}</span>;     <span class='comment'>// error: <a href='#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression_____________'><span class='textsf'><i >await-expression</i></span></span></a> outside of function suspension context</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='expr.sizeof' class='section'><h4 ><a class='secnum' href='#expr.sizeof' style='min-width:95pt'>7.6.2.5</a> Sizeof <a class='abbr_ref' href='expr.sizeof'>[expr.sizeof]</a></h4><div class='para' id='expr.sizeof-1'><div class='marginalizedparent'><a class='marginalized' href='#expr.sizeof-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5014'>#</a></div><div class='texpara'><div id='expr.sizeof-1.sentence-1' class='sentence'><a class='index' id=':expression,sizeof'></a><a class='index' id=':operator,sizeof_'></a><a class='index' id=':byte'></a>The <span id=':sizeof_____'><span class='texttt'><span class='keyword'>sizeof</span></span></span> operator yields the number of bytes
occupied by a non-potentially-overlapping object of the type
of its operand<a class='hidden_link' href='#expr.sizeof-1.sentence-1'>.</a></div> <div id='expr.sizeof-1.sentence-2' class='sentence'>The operand is either an expression,
which is an <a href='expr.context#def:unevaluated_operand' title='7.2.3&emsp;Context dependence&emsp;[expr.context]'>unevaluated operand</a>, or a parenthesized
<a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id__'><span class='textsf'><i >type-id</i></span></span></a><a class='hidden_link' href='#expr.sizeof-1.sentence-2'>.</a></div> <div id='expr.sizeof-1.sentence-3' class='sentence'><a class='index' id=':type,incomplete_'></a>The <span id=':sizeof______'><span class='texttt'><span class='keyword'>sizeof</span></span></span> operator shall not be applied to an expression that
has function or incomplete type,
to the parenthesized name of such
types, or to a glvalue that designates a bit-field<a class='hidden_link' href='#expr.sizeof-1.sentence-3'>.</a></div> <div id='expr.sizeof-1.sentence-4' class='sentence'>The result of <span id=':sizeof_______'><span class='texttt'><span class='keyword'>sizeof</span></span></span>
applied to any of the narrow character types is <span class='texttt'><span class='literal'>1</span></span><a class='hidden_link' href='#expr.sizeof-1.sentence-4'>.</a></div> <div id='expr.sizeof-1.sentence-5' class='sentence'>The result of
<span id=':sizeof________'><span class='texttt'><span class='keyword'>sizeof</span></span></span> applied to any other fundamental
type (<a href='basic.fundamental' title='6.8.2&emsp;Fundamental types'>[basic.<span class='shy'></span>fundamental]</a>) is <a class='index' id=':sizeof_applied_to_fundamental_types_other_than_char,_signed_char,_and_unsigned_char'></a>implementation-defined<a class='hidden_link' href='#expr.sizeof-1.sentence-5'>.</a></div> <div id='expr.sizeof-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.sizeof-note-1'>1</a></i>:&ensp;<div id='expr.sizeof-1.sentence-6' class='sentence'>In particular, the values of <span class='texttt'><span id=':sizeof_________'><span class='texttt'><span class='keyword'>sizeof</span></span></span><span class='parenthesis'>(</span><span id=':bool_____'><span class='texttt'><span class='keyword'>bool</span></span></span><span class='parenthesis'>)</span></span>, <span class='texttt'><span id=':sizeof__________'><span class='texttt'><span class='keyword'>sizeof</span></span></span><span class='parenthesis'>(</span><span id=':char16_t'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span><span class='parenthesis'>)</span></span>,
<span class='texttt'><span id=':sizeof___________'><span class='texttt'><span class='keyword'>sizeof</span></span></span><span class='parenthesis'>(</span><span id=':char32_t'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span><span class='parenthesis'>)</span></span>, and <span class='texttt'><span id=':sizeof____________'><span class='texttt'><span class='keyword'>sizeof</span></span></span><span class='parenthesis'>(</span><span id=':wchar_t'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span><span class='parenthesis'>)</span></span> are
implementation-defined<a class='hidden_link' href='#expr.sizeof-1.sentence-6'>.</a><a class='footnoteref' href='#footnote-58' id='footnoteref-58' title='sizeof(bool) is not required to be 1.'>58</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='expr.sizeof-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.sizeof-note-2'>2</a></i>:&ensp;<div id='expr.sizeof-1.sentence-7' class='sentence'>See <a href='intro.memory' title='6.7.1&emsp;Memory model'>[intro.<span class='shy'></span>memory]</a> for the definition of byte
and <a href='basic.types.general#term.object.representation' title='6.8.1&emsp;General'>[basic.<span class='shy'></span>types.<span class='shy'></span>general]</a> for the definition of object representation<a class='hidden_link' href='#expr.sizeof-1.sentence-7'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='expr.sizeof-2'><div class='marginalizedparent'><a class='marginalized' href='#expr.sizeof-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5048'>#</a></div><div class='texpara'><div id='expr.sizeof-2.sentence-1' class='sentence'><a class='index' id=':reference,sizeof'></a>When applied to a reference type, the result is the size
of the referenced type<a class='hidden_link' href='#expr.sizeof-2.sentence-1'>.</a></div> <div id='expr.sizeof-2.sentence-2' class='sentence'><a class='index' id=':class_object,sizeof'></a>When applied to a class, the result is the number of bytes in an object
of that class including any padding required for placing objects of that
type in an array<a class='hidden_link' href='#expr.sizeof-2.sentence-2'>.</a></div> <div id='expr.sizeof-2.sentence-3' class='sentence'>The result of applying <span id=':sizeof_____________'><span class='texttt'><span class='keyword'>sizeof</span></span></span> to a
potentially-overlapping subobject is
the size of the type, not the size of the subobject<a class='hidden_link' href='#expr.sizeof-2.sentence-3'>.</a><a class='footnoteref' href='#footnote-59' id='footnoteref-59' title='The actual size of a potentially-overlapping subobject can be less than the result of applying sizeof to the subobject, due to virtual base classes and less strict padding requirements on potentially-overlapping subobjects.'>59</a></div> <div id='expr.sizeof-2.sentence-4' class='sentence'><a class='index' id=':array,sizeof'></a>When applied to an array, the result is the total number of bytes in the
array<a class='hidden_link' href='#expr.sizeof-2.sentence-4'>.</a></div> <div id='expr.sizeof-2.sentence-5' class='sentence'>This implies that the size of an array of <span class='math'><span class='mathalpha'>n</span></span> elements is
<span class='math'><span class='mathalpha'>n</span></span> times the size of an element<a class='hidden_link' href='#expr.sizeof-2.sentence-5'>.</a></div></div></div><div class='para' id='expr.sizeof-3'><div class='marginalizedparent'><a class='marginalized' href='#expr.sizeof-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5070'>#</a></div><div class='texpara'><div id='expr.sizeof-3.sentence-1' class='sentence'>The lvalue-to-rvalue (<a href='conv.lval' title='7.3.2&emsp;Lvalue-to-rvalue conversion'>[conv.<span class='shy'></span>lval]</a>),
array-to-pointer (<a href='conv.array' title='7.3.3&emsp;Array-to-pointer conversion'>[conv.<span class='shy'></span>array]</a>), and
function-to-pointer (<a href='conv.func' title='7.3.4&emsp;Function-to-pointer conversion'>[conv.<span class='shy'></span>func]</a>) standard conversions are not
applied to the operand of <span id=':sizeof______________'><span class='texttt'><span class='keyword'>sizeof</span></span></span><a class='hidden_link' href='#expr.sizeof-3.sentence-1'>.</a></div> <div id='expr.sizeof-3.sentence-2' class='sentence'>If the operand is a prvalue,
the <a href='conv.rval' title='7.3.5&emsp;Temporary materialization conversion&emsp;[conv.rval]'>temporary materialization conversion</a>
is applied<a class='hidden_link' href='#expr.sizeof-3.sentence-2'>.</a></div></div></div><div class='para' id='expr.sizeof-4'><div class='marginalizedparent'><a class='marginalized' href='#expr.sizeof-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5079'>#</a></div><div class='texpara'><div id='expr.sizeof-4.sentence-1' class='sentence'>The <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_'><span class='textsf'><i >identifier</i></span></span></a> in a <span class='texttt'><span id=':sizeof_______________'><span class='texttt'><span class='keyword'>sizeof</span></span></span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> expression shall name a
pack<a class='hidden_link' href='#expr.sizeof-4.sentence-1'>.</a></div> <div id='expr.sizeof-4.sentence-2' class='sentence'>The <span class='texttt'><span id=':sizeof________________'><span class='texttt'><span class='keyword'>sizeof</span></span></span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> operator yields the number of elements
in the pack (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>)<a class='hidden_link' href='#expr.sizeof-4.sentence-2'>.</a></div> <div id='expr.sizeof-4.sentence-3' class='sentence'>A <span class='texttt'><span id=':sizeof_________________'><span class='texttt'><span class='keyword'>sizeof</span></span></span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> expression is a pack expansion (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>)<a class='hidden_link' href='#expr.sizeof-4.sentence-3'>.</a></div> <div id='expr.sizeof-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#expr.sizeof-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> count <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>constexpr</span> std<span class='operator'>::</span>size_t value <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>(</span>Types<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='expr.sizeof-5'><div class='marginalizedparent'><a class='marginalized' href='#expr.sizeof-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5093'>#</a></div><div class='texpara'><div id='expr.sizeof-5.sentence-1' class='sentence'><a class='index' id=':size_t'></a><a class='index' id='lib:size_t'></a>The result of <span id=':sizeof__________________'><span class='texttt'><span class='keyword'>sizeof</span></span></span> and <span class='texttt'><span id=':sizeof___________________'><span class='texttt'><span class='keyword'>sizeof</span></span></span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> is a prvalue of type
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span><a class='hidden_link' href='#expr.sizeof-5.sentence-1'>.</a></div> <div id='expr.sizeof-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.sizeof-note-3'>3</a></i>:&ensp;<div id='expr.sizeof-5.sentence-2' class='sentence'>A <span id=':sizeof____________________'><span class='texttt'><span class='keyword'>sizeof</span></span></span> expression
is an integral constant expression (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)<a class='hidden_link' href='#expr.sizeof-5.sentence-2'>.</a></div> <div id='expr.sizeof-5.sentence-3' class='sentence'>The type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span> is defined in the standard header
<a href='cstddef.syn#header:%3ccstddef%3e' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis&emsp;[cstddef.syn]'><span id='headerref:<cstddef>'><span class='texttt'>&lt;cstddef&gt;</span></span></a> (<a href='cstddef.syn' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis'>[cstddef.<span class='shy'></span>syn]</a>, <a href='support.types.layout' title='17.2.4&emsp;Sizes, alignments, and offsets'>[support.<span class='shy'></span>types.<span class='shy'></span>layout]</a>)<a class='hidden_link' href='#expr.sizeof-5.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-58'><div class='texpara'><a class='footnotenum' href='#footnote-58'>58)</a><a class='footnoteBacklink' href='#footnoteref-58'>58)</a> <div id='footnote-58.sentence-1' class='sentence'><span class='texttt'><span id=':sizeof___'><span class='texttt'><span class='keyword'>sizeof</span></span></span><span class='parenthesis'>(</span><span id=':bool____'><span class='texttt'><span class='keyword'>bool</span></span></span><span class='parenthesis'>)</span></span> is not required to be <span class='texttt'><span class='literal'>1</span></span><a class='hidden_link' href='#footnote-58.sentence-1'>.</a></div></div></div><div class='footnote' id='footnote-59'><div class='texpara'><a class='footnotenum' href='#footnote-59'>59)</a><a class='footnoteBacklink' href='#footnoteref-59'>59)</a> <div id='footnote-59.sentence-1' class='sentence'>The actual size of a potentially-overlapping subobject
can be less than the result of
applying <span id=':sizeof____'><span class='texttt'><span class='keyword'>sizeof</span></span></span> to the subobject, due to virtual base classes
and less strict padding requirements on potentially-overlapping subobjects<a class='hidden_link' href='#footnote-59.sentence-1'>.</a></div></div></div></div><div id='expr.alignof' class='section'><h4 ><a class='secnum' href='#expr.alignof' style='min-width:95pt'>7.6.2.6</a> Alignof <a class='abbr_ref' href='expr.alignof'>[expr.alignof]</a></h4><div class='para' id='expr.alignof-1'><div class='marginalizedparent'><a class='marginalized' href='#expr.alignof-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5107'>#</a></div><div class='texpara'><div id='expr.alignof-1.sentence-1' class='sentence'><a class='index' id=':alignof_'></a><a class='index' id=':expression,alignof'></a>An <span id=':alignof__'><span class='texttt'><span class='keyword'>alignof</span></span></span> expression yields the alignment requirement
of its operand type<a class='hidden_link' href='#expr.alignof-1.sentence-1'>.</a></div> <div id='expr.alignof-1.sentence-2' class='sentence'>The operand shall be a <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id___'><span class='textsf'><i >type-id</i></span></span></a>
representing a complete object type, or an array thereof, or a reference
to one of those types<a class='hidden_link' href='#expr.alignof-1.sentence-2'>.</a></div></div></div><div class='para' id='expr.alignof-2'><div class='marginalizedparent'><a class='marginalized' href='#expr.alignof-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5115'>#</a></div><div class='texpara'><div id='expr.alignof-2.sentence-1' class='sentence'>The result is a prvalue of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span><a class='hidden_link' href='#expr.alignof-2.sentence-1'>.</a></div> <div id='expr.alignof-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.alignof-note-1'>1</a></i>:&ensp;<div id='expr.alignof-2.sentence-2' class='sentence'>An <span id=':alignof___'><span class='texttt'><span class='keyword'>alignof</span></span></span> expression
is an integral constant expression (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)<a class='hidden_link' href='#expr.alignof-2.sentence-2'>.</a></div> <div id='expr.alignof-2.sentence-3' class='sentence'>The type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span> is defined in the standard header
<a href='cstddef.syn#header:%3ccstddef%3e' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis&emsp;[cstddef.syn]'><span id='headerref:<cstddef>_'><span class='texttt'>&lt;cstddef&gt;</span></span></a> (<a href='cstddef.syn' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis'>[cstddef.<span class='shy'></span>syn]</a>, <a href='support.types.layout' title='17.2.4&emsp;Sizes, alignments, and offsets'>[support.<span class='shy'></span>types.<span class='shy'></span>layout]</a>)<a class='hidden_link' href='#expr.alignof-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='expr.alignof-3'><div class='marginalizedparent'><a class='marginalized' href='#expr.alignof-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5124'>#</a></div><div class='texpara'><div id='expr.alignof-3.sentence-1' class='sentence'>When <span id=':alignof____'><span class='texttt'><span class='keyword'>alignof</span></span></span> is applied to a reference type, the result
is the alignment of the referenced type<a class='hidden_link' href='#expr.alignof-3.sentence-1'>.</a></div> <div id='expr.alignof-3.sentence-2' class='sentence'>When <span id=':alignof_____'><span class='texttt'><span class='keyword'>alignof</span></span></span>
is applied to an array type, the result is the alignment of the
element type<a class='hidden_link' href='#expr.alignof-3.sentence-2'>.</a></div></div></div></div><div id='noexcept' class='section'><h4 ><a class='secnum' href='#noexcept' style='min-width:95pt'>7.6.2.7</a> <span class='texttt'>noexcept</span> operator <a class='abbr_ref' href='expr.unary.noexcept'>[expr.unary.noexcept]</a></h4><div class='texpara'><a class='index' id=':noexcept'></a><a class='index' id=':expression,noexcept'></a>
<div class='bnf' id='nt:noexcept-expression'>
<a class='hidden_link' href='#nt:noexcept-expression' title='7.6.2.7&emsp;noexcept operator&emsp;[expr.unary.noexcept]'><span id='nt:noexcept-expression'><span id=':noexcept-expression'>noexcept-expression<span class='textnormal'>:</span></span></span></a><br/><span id=':noexcept_'><span class='texttt'><span class='keyword'>noexcept</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression'><span class='textsf'><i >expression</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span>
</div></div><div class='para' id='noexcept-1'><div class='marginalizedparent'><a class='marginalized' href='#noexcept-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5140'>#</a></div><div class='texpara'><div id='noexcept-1.sentence-1' class='sentence'>The operand of the <span id=':noexcept__'><span class='texttt'><span class='keyword'>noexcept</span></span></span> operator
is an unevaluated operand (<a href='expr.context#term.unevaluated.operand' title='7.2.3&emsp;Context dependence'>[expr.<span class='shy'></span>context]</a>)<a class='hidden_link' href='#noexcept-1.sentence-1'>.</a></div> <div id='noexcept-1.sentence-2' class='sentence'>If the operand is a prvalue,
the temporary materialization conversion (<a href='conv.rval' title='7.3.5&emsp;Temporary materialization conversion'>[conv.<span class='shy'></span>rval]</a>) is applied<a class='hidden_link' href='#noexcept-1.sentence-2'>.</a></div></div></div><div class='para' id='noexcept-2'><div class='marginalizedparent'><a class='marginalized' href='#noexcept-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5146'>#</a></div><div class='texpara'><div id='noexcept-2.sentence-1' class='sentence'>The result of the <span id=':noexcept___'><span class='texttt'><span class='keyword'>noexcept</span></span></span> operator is a prvalue of type <span id=':bool______'><span class='texttt'><span class='keyword'>bool</span></span></span><a class='hidden_link' href='#noexcept-2.sentence-1'>.</a></div> <div id='noexcept-2.sentence-2' class='sentence'>The result is <span class='texttt'><span class='literal'>false</span></span> if
the full-expression of the operand is potentially-throwing (<a href='except.spec' title='14.5&emsp;Exception specifications'>[except.<span class='shy'></span>spec]</a>), and
<span class='texttt'><span class='literal'>true</span></span> otherwise<a class='hidden_link' href='#noexcept-2.sentence-2'>.</a></div> <div id='noexcept-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#noexcept-note-1'>1</a></i>:&ensp;<div id='noexcept-2.sentence-3' class='sentence'>A <a href='#nt:noexcept-expression' title='7.6.2.7&emsp;noexcept operator&emsp;[expr.unary.noexcept]'><span id='ntref:noexcept-expression_'><span class='textsf'><i >noexcept-expression</i></span></span></a>
is an integral constant expression (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)<a class='hidden_link' href='#noexcept-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> </div></div></div><div id='expr.new' class='section'><h4 ><a class='secnum' href='#expr.new' style='min-width:95pt'>7.6.2.8</a> New <a class='abbr_ref' href='expr.new'>[expr.new]</a></h4><div class='para' id='expr.new-1'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5159'>#</a></div><div class='texpara'><div id='expr.new-1.sentence-1' class='sentence'><a class='index' id=':expression,new'></a><a class='index' id=':new'></a>The <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_'><span class='textsf'><i >new-expression</i></span></span></a> attempts to create an object of the
<a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id____'><span class='textsf'><i >type-id</i></span></span></a> or <a href='#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-type-id'><span class='textsf'><i >new-type-id</i></span></span></a> (<a href='dcl.name' title='9.3.2&emsp;Type names'>[dcl.<span class='shy'></span>name]</a>) to which
it is applied<a class='hidden_link' href='#expr.new-1.sentence-1'>.</a></div> <div id='expr.new-1.sentence-2' class='sentence'>The type of that object is the <a class='hidden_link' href='#def:type,allocated' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='def:type,allocated'><i >allocated type</i></span></a><a class='hidden_link' href='#expr.new-1.sentence-2'>.</a></div> <div id='expr.new-1.sentence-3' class='sentence'><a class='index' id=':type,incomplete__'></a>This type shall be a complete object type (<a href='basic.types.general#term.incomplete.type' title='6.8.1&emsp;General'>[basic.<span class='shy'></span>types.<span class='shy'></span>general]</a>),
but not an abstract class type (<a href='class.abstract' title='11.7.4&emsp;Abstract classes'>[class.<span class='shy'></span>abstract]</a>) or array
thereof (<a href='intro.object' title='6.7.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>)<a class='hidden_link' href='#expr.new-1.sentence-3'>.</a></div> <div id='expr.new-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.new-note-1'>1</a></i>:&ensp;<div id='expr.new-1.sentence-4' class='sentence'>Because references are not objects, references cannot be created by
<a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression__'><span class='textsf'><i >new-expression</i></span></span></a><i >s</i><a class='hidden_link' href='#expr.new-1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='expr.new-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.new-note-2'>2</a></i>:&ensp;<div id='expr.new-1.sentence-5' class='sentence'>The <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id_____'><span class='textsf'><i >type-id</i></span></span></a> can be a cv-qualified type, in which case the
object created by the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression___'><span class='textsf'><i >new-expression</i></span></span></a> has a cv-qualified type<a class='hidden_link' href='#expr.new-1.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div><div class='texpara'><div class='bnf' id='nt:new-expression'>
<a class='hidden_link' href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='nt:new-expression'><span id=':new-expression'>new-expression<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='operator'>::</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span id=':new_'><span class='texttt'><span class='keyword'>new</span></span></span> <a href='#nt:new-placement' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-placement'><span class='textsf'><i >new-placement</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-type-id_'><span class='textsf'><i >new-type-id</i></span></span></a> <a href='#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer_'><span class='textsf'><i >new-initializer</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <br/><span class='terminal'><span class='operator'>::</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span id=':new__'><span class='texttt'><span class='keyword'>new</span></span></span> <a href='#nt:new-placement' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-placement_'><span class='textsf'><i >new-placement</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id______'><span class='textsf'><i >type-id</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span> <a href='#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer__'><span class='textsf'><i >new-initializer</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span>
</div></div><div class='texpara'><a class='index' id=':new,storage_allocation'></a><div class='bnf' id='nt:new-placement'>
<a class='hidden_link' href='#nt:new-placement' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='nt:new-placement'><span id=':new-placement'>new-placement<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list'><span class='textsf'><i >expression-list</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:new-type-id'>
<a class='hidden_link' href='#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='nt:new-type-id'><span id=':new-type-id'>new-type-id<span class='textnormal'>:</span></span></span></a><br/><a href='dcl.type.general#nt:type-specifier-seq' title='9.2.9.1&emsp;General&emsp;[dcl.type.general]'><span id='ntref:type-specifier-seq'><span class='textsf'><i >type-specifier-seq</i></span></span></a> <a href='#nt:new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-declarator'><span class='textsf'><i >new-declarator</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:new-declarator'>
<a class='hidden_link' href='#nt:new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='nt:new-declarator'><span id=':new-declarator'>new-declarator<span class='textnormal'>:</span></span></span></a><br/><a href='dcl.decl.general#nt:ptr-operator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:ptr-operator'><span class='textsf'><i >ptr-operator</i></span></span></a> <a href='#nt:new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-declarator_'><span class='textsf'><i >new-declarator</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <br/><a href='#nt:noptr-new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:noptr-new-declarator'><span class='textsf'><i >noptr-new-declarator</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:noptr-new-declarator'>
<a class='hidden_link' href='#nt:noptr-new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='nt:noptr-new-declarator'><span id=':noptr-new-declarator'>noptr-new-declarator<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='squarebracket'>[</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression_'><span class='textsf'><i >expression</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='squarebracket'>]</span></span> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span><br/><a href='#nt:noptr-new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:noptr-new-declarator_'><span class='textsf'><i >noptr-new-declarator</i></span></span></a> <span class='terminal'><span class='squarebracket'>[</span></span> <a href='expr.const#nt:constant-expression' title='7.7&emsp;Constant expressions&emsp;[expr.const]'><span id='ntref:constant-expression'><span class='textsf'><i >constant-expression</i></span></span></a> <span class='terminal'><span class='squarebracket'>]</span></span> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:new-initializer'>
<a class='hidden_link' href='#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='nt:new-initializer'><span id=':new-initializer'>new-initializer<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list_'><span class='textsf'><i >expression-list</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>)</span></span><br/><a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list'><span class='textsf'><i >braced-init-list</i></span></span></a>
</div></div></div><div class='para' id='expr.new-2'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5220'>#</a></div><div class='texpara'><div id='expr.new-2.sentence-1' class='sentence'>If a <a href='dcl.spec.auto' title='9.2.9.7&emsp;Placeholder type specifiers&emsp;[dcl.spec.auto]'>placeholder type</a> or
a placeholder for a deduced class type (<a href='dcl.type.class.deduct' title='9.2.9.8&emsp;Deduced class template specialization types'>[dcl.<span class='shy'></span>type.<span class='shy'></span>class.<span class='shy'></span>deduct]</a>)
appears in the
<a href='dcl.type.general#nt:type-specifier-seq' title='9.2.9.1&emsp;General&emsp;[dcl.type.general]'><span id='ntref:type-specifier-seq_'><span class='textsf'><i >type-specifier-seq</i></span></span></a> of a <a href='#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-type-id__'><span class='textsf'><i >new-type-id</i></span></span></a> or
<a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id_______'><span class='textsf'><i >type-id</i></span></span></a> of a <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression____'><span class='textsf'><i >new-expression</i></span></span></a>,
the allocated type is deduced as follows:
Let
<i >init</i> be the <a href='#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer___'><span class='textsf'><i >new-initializer</i></span></span></a>, if any,
and
<span class='texttt'>T</span> be the <a href='#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-type-id___'><span class='textsf'><i >new-type-id</i></span></span></a> or <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id________'><span class='textsf'><i >type-id</i></span></span></a> of
the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_____'><span class='textsf'><i >new-expression</i></span></span></a>, then the allocated type is the type
deduced for the variable <span class='texttt'>x</span> in the invented
declaration (<a href='dcl.spec.auto' title='9.2.9.7&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>):
<span class='codeblock'>T x <span class='textrm'><i >init</i></span> ;
</span></div></div><div class='texpara'><div id='expr.new-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#expr.new-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>new</span> <span class='keyword'>auto</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                    <span class='comment'>// allocated type is <span class='tcode_in_codeblock'>int</span></span>
<span class='keyword'>auto</span> x <span class='operator'>=</span> <span class='keyword'>new</span> <span class='keyword'>auto</span><span class='parenthesis'>(</span><span class='literal'>'a'</span><span class='parenthesis'>)</span>;         <span class='comment'>// allocated type is <span class='tcode_in_codeblock'>char</span>, <span class='tcode_in_codeblock'>x</span> is of type <span class='tcode_in_codeblock'>char*</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> A<span class='parenthesis'>(</span>T, T<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>auto</span> y <span class='operator'>=</span> <span class='keyword'>new</span> A<span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span>;           <span class='comment'>// allocated type is <span class='tcode_in_codeblock'>A&lt;int&gt;</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='expr.new-3'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5248'>#</a></div><div class='texpara'><div id='expr.new-3.sentence-1' class='sentence'>The <a href='#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-type-id____'><span class='textsf'><i >new-type-id</i></span></span></a> in a <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression______'><span class='textsf'><i >new-expression</i></span></span></a> is the longest
possible sequence of <a href='#nt:new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-declarator__'><span class='textsf'><i >new-declarator</i></span></span></a><i >s</i><a class='hidden_link' href='#expr.new-3.sentence-1'>.</a></div> <div id='expr.new-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.new-note-3'>3</a></i>:&ensp;<div id='expr.new-3.sentence-2' class='sentence'>This prevents ambiguities between the declarator operators <span class='texttt'><span class='operator'>&amp;</span></span>, <span class='texttt'><span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>,
<span class='texttt'><span class='operator'>*</span></span>, and <span class='texttt'><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> and their expression counterparts<a class='hidden_link' href='#expr.new-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='expr.new-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#expr.new-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>new</span> <span class='keyword'>int</span> <span class='operator'>*</span> i;                    <span class='comment'>// syntax error: parsed as <span class='tcode_in_codeblock'>(new int*) i</span>, not as <span class='tcode_in_codeblock'>(new int)*i</span></span>
</span> <div id='expr.new-3.sentence-3' class='sentence'>
The <span class='texttt'><span class='operator'>*</span></span> is the pointer declarator and not the multiplication
operator<a class='hidden_link' href='#expr.new-3.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='expr.new-4'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5263'>#</a></div><div class='texpara'><div id='expr.new-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.new-note-4'>4</a></i>:&ensp;<div id='expr.new-4.sentence-1' class='sentence'><a class='index' id=':ambiguity,parentheses_and'></a>Parentheses in a <a href='#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-type-id_____'><span class='textsf'><i >new-type-id</i></span></span></a> of a <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_______'><span class='textsf'><i >new-expression</i></span></span></a>
can have surprising effects<a class='hidden_link' href='#expr.new-4.sentence-1'>.</a></div> <div id='expr.new-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#expr.new-example-3'>3</a></i>:&ensp;<div id='expr.new-4.sentence-2' class='sentence'><span class='codeblock'><span class='keyword'>new</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;               <span class='comment'>// error</span>
</span>
is ill-formed because the binding is
<span class='codeblock'><span class='parenthesis'>(</span><span class='keyword'>new</span> <span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// error</span>
</span></div></div><div class='texpara'><div id='expr.new-4.sentence-3' class='sentence'>Instead, the explicitly parenthesized version of the <span id=':new___'><span class='texttt'><span class='keyword'>new</span></span></span>
operator can be used to create objects of compound
types (<a href='basic.compound' title='6.8.4&emsp;Compound types'>[basic.<span class='shy'></span>compound]</a>):</div></div><div class='texpara'><div id='expr.new-4.sentence-4' class='sentence'><span class='codeblock'><span class='keyword'>new</span> <span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span>
allocates an array of <span class='texttt'><span class='literal'>10</span></span> pointers to functions (taking no
argument and returning <span class='texttt'><span class='keyword'>int</span></span>)<a class='hidden_link' href='#expr.new-4.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='expr.new-5'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5289'>#</a></div><div class='texpara'><div id='expr.new-5.sentence-1' class='sentence'>The <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq__'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a> in a <a href='#nt:noptr-new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:noptr-new-declarator__'><span class='textsf'><i >noptr-new-declarator</i></span></span></a> appertains
to the associated array type<a class='hidden_link' href='#expr.new-5.sentence-1'>.</a></div></div></div><div class='para' id='expr.new-6'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5293'>#</a></div><div class='texpara'><div id='expr.new-6.sentence-1' class='sentence'>Every <a href='expr.const#nt:constant-expression' title='7.7&emsp;Constant expressions&emsp;[expr.const]'><span id='ntref:constant-expression_'><span class='textsf'><i >constant-expression</i></span></span></a> in a
<a href='#nt:noptr-new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:noptr-new-declarator___'><span class='textsf'><i >noptr-new-declarator</i></span></span></a> shall be a converted constant
expression (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>) of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span> and
its value shall be greater than zero<a class='hidden_link' href='#expr.new-6.sentence-1'>.</a></div> <div id='expr.new-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#expr.new-example-4'>4</a></i>:&ensp;<div id='expr.new-6.sentence-2' class='sentence'>Given the definition <span class='texttt'><span class='keyword'>int</span> n <span class='operator'>=</span> <span class='literal'>42</span></span>,
<span class='texttt'><span class='keyword'>new</span> <span class='keyword'>float</span><span class='squarebracket'>[</span>n<span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span></span> is well-formed (because <span class='texttt'>n</span> is the
<a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression__'><span class='textsf'><i >expression</i></span></span></a> of a <a href='#nt:noptr-new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:noptr-new-declarator____'><span class='textsf'><i >noptr-new-declarator</i></span></span></a>), but
<span class='texttt'><span class='keyword'>new</span> <span class='keyword'>float</span><span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span>n<span class='squarebracket'>]</span></span> is ill-formed (because <span class='texttt'>n</span> is not a
constant expression)<a class='hidden_link' href='#expr.new-6.sentence-2'>.</a></div> <div id='expr.new-6.sentence-3' class='sentence'>Furthermore,
<span class='texttt'><span class='keyword'>new</span> <span class='keyword'>float</span><span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span> is well-formed
(because <span class='texttt'><span class='literal'>0</span></span> is the <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression___'><span class='textsf'><i >expression</i></span></span></a>
of a <a href='#nt:noptr-new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:noptr-new-declarator_____'><span class='textsf'><i >noptr-new-declarator</i></span></span></a>,
where a value of zero results in the allocation of an array with no elements),
but <span class='texttt'><span class='keyword'>new</span> <span class='keyword'>float</span><span class='squarebracket'>[</span>n<span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span> is ill-formed
(because <span class='texttt'><span class='literal'>0</span></span> is the <a href='expr.const#nt:constant-expression' title='7.7&emsp;Constant expressions&emsp;[expr.const]'><span id='ntref:constant-expression__'><span class='textsf'><i >constant-expression</i></span></span></a>
of a <a href='#nt:noptr-new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:noptr-new-declarator______'><span class='textsf'><i >noptr-new-declarator</i></span></span></a>,
where only values greater than zero are allowed)<a class='hidden_link' href='#expr.new-6.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='expr.new-7'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5315'>#</a></div><div class='texpara'><div id='expr.new-7.sentence-1' class='sentence'>If the <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id_________'><span class='textsf'><i >type-id</i></span></span></a> or <a href='#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-type-id______'><span class='textsf'><i >new-type-id</i></span></span></a>
denotes an array type of unknown bound (<a href='dcl.array' title='9.3.4.5&emsp;Arrays'>[dcl.<span class='shy'></span>array]</a>),
the <a href='#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer____'><span class='textsf'><i >new-initializer</i></span></span></a> shall not be omitted;
the allocated object is an array with <span class='texttt'>n</span> elements,
where <span class='texttt'>n</span> is determined from the number of initial elements
supplied in
the <a href='#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer_____'><span class='textsf'><i >new-initializer</i></span></span></a> (<a href='dcl.init.aggr' title='9.4.2&emsp;Aggregates'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a>, <a href='dcl.init.string' title='9.4.3&emsp;Character arrays'>[dcl.<span class='shy'></span>init.<span class='shy'></span>string]</a>)<a class='hidden_link' href='#expr.new-7.sentence-1'>.</a></div></div></div><div class='para' id='expr.new-8'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5324'>#</a></div><div class='texpara'><div id='expr.new-8.sentence-1' class='sentence'><a class='index' id=':new____'></a>If the <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression____'><span class='textsf'><i >expression</i></span></span></a> in a <a href='#nt:noptr-new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:noptr-new-declarator_______'><span class='textsf'><i >noptr-new-declarator</i></span></span></a>
is present, it is implicitly converted to <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span><a class='hidden_link' href='#expr.new-8.sentence-1'>.</a></div> <div id='expr.new-8.sentence-2' class='sentence'><a class='index' id=':function,allocation'></a>The value of the <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression_____'><span class='textsf'><i >expression</i></span></span></a> is invalid if
<ul class='itemize'><li id='expr.new-8.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-8.1'>(8.1)</a></div>the expression is of non-class type and its value before converting to
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span> is less than zero;</li><li id='expr.new-8.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-8.2'>(8.2)</a></div>the expression is of class type and its value before application of the second
standard conversion (<a href='over.ics.user' title='12.2.4.2.3&emsp;User-defined conversion sequences'>[over.<span class='shy'></span>ics.<span class='shy'></span>user]</a>)<a class='footnoteref' href='#footnote-60' id='footnoteref-60' title='If the conversion function returns a signed integer type, the second standard conversion converts to the unsigned type std&#x200b;::&#x200b;size_&shy;t and thus thwarts any attempt to detect a negative value afterwards.'>60</a>
is less than zero;</li><li id='expr.new-8.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-8.3'>(8.3)</a></div>its value is such that the size of the allocated object would exceed the
<a class='index' id=':maximum_size_of_an_allocated_object'></a>implementation-defined <a href='implimits' title='Annex B&emsp;(informative)&emsp;Implementation quantities&emsp;[implimits]'>limit</a>; or</li><li id='expr.new-8.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-8.4'>(8.4)</a></div>the <a href='#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer______'><span class='textsf'><i >new-initializer</i></span></span></a> is a <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list_'><span class='textsf'><i >braced-init-list</i></span></span></a> and the
number of array elements for which initializers are provided (including the
terminating <span class='texttt'>'\<span class='literal'>0</span>'</span> in a <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal'><span class='textsf'><i >string-literal</i></span></span></a> (<a href='lex.string' title='5.13.5&emsp;String literals'>[lex.<span class='shy'></span>string]</a>)) exceeds the
number of elements to initialize<a class='hidden_link' href='#expr.new-8.sentence-2'>.</a></li></ul></div></div><div class='texpara'><div id='expr.new-8.sentence-3' class='sentence'>If the value of the <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression______'><span class='textsf'><i >expression</i></span></span></a> is invalid after converting to <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span>:
<ul class='itemize'><li id='expr.new-8.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-8.5'>(8.5)</a></div>if the <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression_______'><span class='textsf'><i >expression</i></span></span></a> is a potentially-evaluated core constant expression,
the program is ill-formed;</li><li id='expr.new-8.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-8.6'>(8.6)</a></div>otherwise, an allocation function is not called; instead
<ul class='itemize'><li id='expr.new-8.6.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#expr.new-8.6.1'>(8.6.1)</a></div>if the allocation function that would have been called
has a non-throwing exception specification (<a href='except.spec' title='14.5&emsp;Exception specifications'>[except.<span class='shy'></span>spec]</a>),
the value of the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression________'><span class='textsf'><i >new-expression</i></span></span></a>
is the null pointer value of the required result type;</li><li id='expr.new-8.6.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#expr.new-8.6.2'>(8.6.2)</a></div>otherwise, the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_________'><span class='textsf'><i >new-expression</i></span></span></a> terminates by throwing an
exception of a type that would match a handler (<a href='except.handle' title='14.4&emsp;Handling an exception'>[except.<span class='shy'></span>handle]</a>) of type
<a href='new.badlength' title='17.6.4.2&emsp;Class bad_&shy;array_&shy;new_&shy;length&emsp;[new.badlength]'><span class='texttt'>std&#x200b;::&#x200b;bad_<span class='shy'></span>array_<span class='shy'></span>new_<span class='shy'></span>length</span></a><a class='hidden_link' href='#expr.new-8.sentence-3'>.</a></li></ul></li></ul></div> <div id='expr.new-8.sentence-4' class='sentence'>
When the value of the <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression________'><span class='textsf'><i >expression</i></span></span></a> is zero, the allocation
function is called to allocate an array with no elements<a class='hidden_link' href='#expr.new-8.sentence-4'>.</a></div></div></div><div class='para' id='expr.new-9'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5379'>#</a></div><div class='texpara'><div id='expr.new-9.sentence-1' class='sentence'>If the allocated type is an array,
the <a href='#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer_______'><span class='textsf'><i >new-initializer</i></span></span></a> is a <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list__'><span class='textsf'><i >braced-init-list</i></span></span></a>, and
the <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression_________'><span class='textsf'><i >expression</i></span></span></a>
is potentially-evaluated and not a core constant expression,
the semantic constraints of copy-initializing a hypothetical element of
the array from an empty initializer list
are checked (<a href='dcl.init.list' title='9.4.5&emsp;List-initialization'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>)<a class='hidden_link' href='#expr.new-9.sentence-1'>.</a></div> <div id='expr.new-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.new-note-5'>5</a></i>:&ensp;<div id='expr.new-9.sentence-2' class='sentence'>The array can contain more elements than there are
elements in the <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list___'><span class='textsf'><i >braced-init-list</i></span></span></a>,
requiring initialization of the remainder of the array elements from
an empty initializer list<a class='hidden_link' href='#expr.new-9.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='expr.new-10'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5394'>#</a></div><div class='texpara'><div id='expr.new-10.sentence-1' class='sentence'><a class='index' id=':storage_duration,dynamic'></a>Objects created by a <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression__________'><span class='textsf'><i >new-expression</i></span></span></a> have dynamic storage
duration (<a href='basic.stc.dynamic' title='6.7.5.5&emsp;Dynamic storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic]</a>)<a class='hidden_link' href='#expr.new-10.sentence-1'>.</a></div> <div id='expr.new-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.new-note-6'>6</a></i>:&ensp;<div id='expr.new-10.sentence-2' class='sentence'><a class='index' id=':new,scoping_and'></a>The lifetime of such an object is not necessarily restricted to the
scope in which it is created<a class='hidden_link' href='#expr.new-10.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='expr.new-11'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5404'>#</a></div><div class='texpara'><div id='expr.new-11.sentence-1' class='sentence'><a class='index' id=':array,new'></a>When the allocated type is “array of <span class='texttt'>N</span> <span class='texttt'>T</span>”
(that is, the <a href='#nt:noptr-new-declarator' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:noptr-new-declarator________'><span class='textsf'><i >noptr-new-declarator</i></span></span></a> syntax is used or the
<a href='#nt:new-type-id' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-type-id_______'><span class='textsf'><i >new-type-id</i></span></span></a> or <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id__________'><span class='textsf'><i >type-id</i></span></span></a> denotes an array type),
the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression___________'><span class='textsf'><i >new-expression</i></span></span></a> yields a prvalue of type “pointer to <span class='texttt'>T</span>”
that points to the initial element (if any) of the array<a class='hidden_link' href='#expr.new-11.sentence-1'>.</a></div> <div id='expr.new-11.sentence-2' class='sentence'>Otherwise, let <span class='texttt'>T</span> be the allocated type;
the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression____________'><span class='textsf'><i >new-expression</i></span></span></a>
is a prvalue of type “pointer to T”
that points to the object created<a class='hidden_link' href='#expr.new-11.sentence-2'>.</a></div> <div id='expr.new-note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.new-note-7'>7</a></i>:&ensp;<div id='expr.new-11.sentence-3' class='sentence'>Both <span class='texttt'><span id=':new_____'><span class='texttt'><span class='keyword'>new</span></span></span> <span id=':int'><span class='texttt'><span class='keyword'>int</span></span></span></span> and <span class='texttt'><span id=':new______'><span class='texttt'><span class='keyword'>new</span></span></span> <span id=':int_'><span class='texttt'><span class='keyword'>int</span></span></span><span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span></span> have type <span class='texttt'><span id=':int__'><span class='texttt'><span class='keyword'>int</span></span></span><span class='operator'>*</span></span> and
the type of <span class='texttt'><span id=':new_______'><span class='texttt'><span class='keyword'>new</span></span></span> <span id=':int___'><span class='texttt'><span class='keyword'>int</span></span></span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span></span> is <span class='texttt'><span id=':int____'><span class='texttt'><span class='keyword'>int</span></span></span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#expr.new-11.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='expr.new-12'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5420'>#</a></div><div class='texpara'><div id='expr.new-12.sentence-1' class='sentence'>A <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_____________'><span class='textsf'><i >new-expression</i></span></span></a> may obtain storage for the object by calling an
allocation function (<a href='basic.stc.dynamic.allocation' title='6.7.5.5.2&emsp;Allocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>allocation]</a>)<a class='hidden_link' href='#expr.new-12.sentence-1'>.</a></div> <div id='expr.new-12.sentence-2' class='sentence'>If
the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression______________'><span class='textsf'><i >new-expression</i></span></span></a> terminates by throwing an exception, it
may release storage by calling a <a href='basic.stc.dynamic.deallocation' title='6.7.5.5.3&emsp;Deallocation functions&emsp;[basic.stc.dynamic.deallocation]'>deallocation
function</a><a class='hidden_link' href='#expr.new-12.sentence-2'>.</a></div> <div id='expr.new-12.sentence-3' class='sentence'>If the allocated type
is a non-array type, the allocation function's name is
<a class='index' id=':operator_new'></a><a class='index' id=':operator_delete'></a><span class='texttt'><span id=':operator__'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':new________'><span class='texttt'><span class='keyword'>new</span></span></span></span> and the deallocation function's name is
<span class='texttt'><span id=':operator___'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':delete'><span class='texttt'><span class='keyword'>delete</span></span></span></span><a class='hidden_link' href='#expr.new-12.sentence-3'>.</a></div> <div id='expr.new-12.sentence-4' class='sentence'>If the allocated type is an array type, the
allocation function's name is
<a class='index' id=':operator_new_'></a><a class='index' id=':operator_delete_'></a><span class='texttt'><span id=':operator____'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':new_________'><span class='texttt'><span class='keyword'>new</span></span></span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>
and the deallocation function's name is
<span class='texttt'><span id=':operator_____'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':delete_'><span class='texttt'><span class='keyword'>delete</span></span></span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#expr.new-12.sentence-4'>.</a></div> <div id='expr.new-note-8' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.new-note-8'>8</a></i>:&ensp;<div id='expr.new-12.sentence-5' class='sentence'>An implementation is expected to provide default definitions for the global
allocation
functions (<a href='basic.stc.dynamic' title='6.7.5.5&emsp;Dynamic storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic]</a>, <a href='new.delete.single' title='17.6.3.2&emsp;Single-object forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>single]</a>, <a href='new.delete.array' title='17.6.3.3&emsp;Array forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>array]</a>)<a class='hidden_link' href='#expr.new-12.sentence-5'>.</a></div> <div id='expr.new-12.sentence-6' class='sentence'>A C++ program can provide alternative definitions of
these functions (<a href='replacement.functions' title='16.4.5.6&emsp;Replacement functions'>[replacement.<span class='shy'></span>functions]</a>) and/or class-specific
versions (<a href='class.free' title='11.4.11&emsp;Allocation and deallocation functions'>[class.<span class='shy'></span>free]</a>)<a class='hidden_link' href='#expr.new-12.sentence-6'>.</a></div> <div id='expr.new-12.sentence-7' class='sentence'>The set of allocation and deallocation functions that can be called
by a <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_______________'><span class='textsf'><i >new-expression</i></span></span></a>
can include functions that do not perform allocation or deallocation;
for example, see <a href='new.delete.placement' title='17.6.3.4&emsp;Non-allocating forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>placement]</a><a class='hidden_link' href='#expr.new-12.sentence-7'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='expr.new-13'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5450'>#</a></div><div class='texpara'><div id='expr.new-13.sentence-1' class='sentence'><a class='index' id=':operator,scope_resolution'></a>If the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression________________'><span class='textsf'><i >new-expression</i></span></span></a>
does not begin with a unary <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span></span> operator and
the allocated type is a class type <span class='texttt'>T</span> or array thereof,
a search is performed for the allocation function's name in the scope
of <span class='texttt'>T</span> (<a href='class.member.lookup' title='6.5.2&emsp;Member name lookup'>[class.<span class='shy'></span>member.<span class='shy'></span>lookup]</a>)<a class='hidden_link' href='#expr.new-13.sentence-1'>.</a></div> <div id='expr.new-13.sentence-2' class='sentence'>Otherwise, or if nothing is found,
the allocation function's name is looked up by
searching for it in the global scope<a class='hidden_link' href='#expr.new-13.sentence-2'>.</a></div></div></div><div class='para' id='expr.new-14'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5461'>#</a></div><div class='texpara'><div id='expr.new-14.sentence-1' class='sentence'>An implementation is allowed to omit a call to a replaceable global allocation
function (<a href='new.delete.single' title='17.6.3.2&emsp;Single-object forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>single]</a>, <a href='new.delete.array' title='17.6.3.3&emsp;Array forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>array]</a>)<a class='hidden_link' href='#expr.new-14.sentence-1'>.</a></div> <div id='expr.new-14.sentence-2' class='sentence'>When it does so,
the storage is instead provided by the implementation or provided by extending
the allocation of another <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_________________'><span class='textsf'><i >new-expression</i></span></span></a><a class='hidden_link' href='#expr.new-14.sentence-2'>.</a></div></div></div><div class='para' id='expr.new-15'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5467'>#</a></div><div class='texpara'><div id='expr.new-15.sentence-1' class='sentence'>During an evaluation of a constant expression,
a call to a replaceable allocation function is always omitted (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)<a class='hidden_link' href='#expr.new-15.sentence-1'>.</a></div></div></div><div class='para' id='expr.new-16'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5471'>#</a></div><div class='texpara'><div id='expr.new-16.sentence-1' class='sentence'>The implementation may
extend the allocation of a <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression__________________'><span class='textsf'><i >new-expression</i></span></span></a> <span class='texttt'>e1</span> to provide
storage for a <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression___________________'><span class='textsf'><i >new-expression</i></span></span></a> <span class='texttt'>e2</span> if the
following would be true were the allocation not extended:
<ul class='itemize'><li id='expr.new-16.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-16.1'>(16.1)</a></div>the evaluation of <span class='texttt'>e1</span> is sequenced before the evaluation of
<span class='texttt'>e2</span>, and</li><li id='expr.new-16.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-16.2'>(16.2)</a></div><span class='texttt'>e2</span> is evaluated whenever <span class='texttt'>e1</span> obtains storage, and</li><li id='expr.new-16.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-16.3'>(16.3)</a></div>both <span class='texttt'>e1</span> and <span class='texttt'>e2</span> invoke the same replaceable global
allocation function, and</li><li id='expr.new-16.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-16.4'>(16.4)</a></div>if the allocation function invoked by <span class='texttt'>e1</span> and <span class='texttt'>e2</span> is
throwing, any exceptions thrown in the evaluation of either <span class='texttt'>e1</span> or
<span class='texttt'>e2</span> would be first caught in the same handler, and</li><li id='expr.new-16.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-16.5'>(16.5)</a></div>the pointer values produced by <span class='texttt'>e1</span> and <span class='texttt'>e2</span> are operands to
evaluated <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_'><span class='textsf'><i >delete-expression</i></span></span></a><i >s</i>, and</li><li id='expr.new-16.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-16.6'>(16.6)</a></div>the evaluation of <span class='texttt'>e2</span> is sequenced before the evaluation of the
<a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression__'><span class='textsf'><i >delete-expression</i></span></span></a> whose operand is the pointer value produced
by <span class='texttt'>e1</span><a class='hidden_link' href='#expr.new-16.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='expr.new-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#expr.new-example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> can_merge<span class='parenthesis'>(</span><span class='keyword'>int</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='comment'>// These allocations are safe for merging:</span>
  std<span class='operator'>::</span>unique_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> a<span class='curlybracket'>{</span><span class='keyword'>new</span> <span class='parenthesis'>(</span>std<span class='operator'>::</span>nothrow<span class='parenthesis'>)</span> <span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>8</span><span class='squarebracket'>]</span><span class='curlybracket'>}</span>;
  std<span class='operator'>::</span>unique_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> b<span class='curlybracket'>{</span><span class='keyword'>new</span> <span class='parenthesis'>(</span>std<span class='operator'>::</span>nothrow<span class='parenthesis'>)</span> <span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>8</span><span class='squarebracket'>]</span><span class='curlybracket'>}</span>;
  std<span class='operator'>::</span>unique_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> c<span class='curlybracket'>{</span><span class='keyword'>new</span> <span class='parenthesis'>(</span>std<span class='operator'>::</span>nothrow<span class='parenthesis'>)</span> <span class='keyword'>char</span><span class='squarebracket'>[</span>x<span class='squarebracket'>]</span><span class='curlybracket'>}</span>;

  g<span class='parenthesis'>(</span>a<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, b<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, c<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>void</span> cannot_merge<span class='parenthesis'>(</span><span class='keyword'>int</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  std<span class='operator'>::</span>unique_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> a<span class='curlybracket'>{</span><span class='keyword'>new</span> <span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>8</span><span class='squarebracket'>]</span><span class='curlybracket'>}</span>;
  <span class='keyword'>try</span> <span class='curlybracket'>{</span>
    <span class='comment'>// Merging this allocation would change its catch handler.</span>
    std<span class='operator'>::</span>unique_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> b<span class='curlybracket'>{</span><span class='keyword'>new</span> <span class='keyword'>char</span><span class='squarebracket'>[</span>x<span class='squarebracket'>]</span><span class='curlybracket'>}</span>;
  <span class='curlybracket'>}</span> <span class='keyword'>catch</span> <span class='parenthesis'>(</span><span class='keyword'>const</span> std<span class='operator'>::</span>bad_alloc<span class='operator'>&amp;</span> e<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    std<span class='operator'>::</span>cerr <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>"Allocation failed: "</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> e<span class='operator'>.</span>what<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> std<span class='operator'>::</span>endl;
    <span class='keyword'>throw</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='expr.new-17'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5521'>#</a></div><div class='texpara'><div id='expr.new-17.sentence-1' class='sentence'>When a <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression____________________'><span class='textsf'><i >new-expression</i></span></span></a> calls an allocation function and that
allocation has not been extended, the
<a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_____________________'><span class='textsf'><i >new-expression</i></span></span></a> passes the amount of space requested to the
allocation function as the first argument of type
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span><a class='hidden_link' href='#expr.new-17.sentence-1'>.</a></div> <div id='expr.new-17.sentence-2' class='sentence'>That argument shall be no less than the size
of the object being created; it may be greater than the size of the
object being created only if the object is an array and
the allocation function is not a non-allocating form (<a href='new.delete.placement' title='17.6.3.4&emsp;Non-allocating forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>placement]</a>)<a class='hidden_link' href='#expr.new-17.sentence-2'>.</a></div> <div id='expr.new-17.sentence-3' class='sentence'>For arrays of
<span id=':char'><span class='texttt'><span class='keyword'>char</span></span></span>, <span class='texttt'><span id=':unsigned'><span class='texttt'><span class='keyword'>unsigned</span></span></span> <span id=':char_'><span class='texttt'><span class='keyword'>char</span></span></span></span>, and <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>byte</span>,
the difference between the
result of the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression______________________'><span class='textsf'><i >new-expression</i></span></span></a> and the address returned by the
allocation function shall be an integral multiple of the
strictest fundamental
<a href='basic.align' title='6.7.6&emsp;Alignment&emsp;[basic.align]'>alignment requirement</a> of any object type whose size
is no greater than the size of the array being created<a class='hidden_link' href='#expr.new-17.sentence-3'>.</a></div> <div id='expr.new-note-9' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.new-note-9'>9</a></i>:&ensp;<div id='expr.new-17.sentence-4' class='sentence'><a class='index' id=':allocation,alignment_storage'></a>Because allocation functions are assumed to return pointers to storage
that is appropriately aligned for objects of any type
with fundamental alignment, this constraint
on array allocation overhead permits the common idiom of allocating
character arrays into which objects of other types will later be placed<a class='hidden_link' href='#expr.new-17.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='expr.new-18'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5547'>#</a></div><div class='texpara'><div id='expr.new-18.sentence-1' class='sentence'>When a <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_______________________'><span class='textsf'><i >new-expression</i></span></span></a> calls an allocation function and that
allocation has been extended, the size argument to the allocation call shall
be no greater than the sum of the sizes for the omitted calls as specified
above, plus the size for the extended call had it not been extended, plus any
padding necessary to align the allocated objects within the allocated memory<a class='hidden_link' href='#expr.new-18.sentence-1'>.</a></div></div></div><div class='para' id='expr.new-19'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5554'>#</a></div><div class='texpara'><div id='expr.new-19.sentence-1' class='sentence'>The <a href='#nt:new-placement' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-placement__'><span class='textsf'><i >new-placement</i></span></span></a> syntax is used to supply additional
arguments to an allocation function; such an expression is called
a <a class='hidden_link' href='#def:new-expression,placement' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='def:new-expression,placement'><i >placement <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression________________________'><span class='textsf'><i >new-expression</i></span></span></a></i></span></a><a class='hidden_link' href='#expr.new-19.sentence-1'>.</a></div></div></div><div class='para' id='expr.new-20'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-20'>20</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5560'>#</a></div><div class='texpara'><div id='expr.new-20.sentence-1' class='sentence'>Overload resolution is
performed on a function call created by assembling an argument list<a class='hidden_link' href='#expr.new-20.sentence-1'>.</a></div> <div id='expr.new-20.sentence-2' class='sentence'>The first argument is
the amount of space requested,
and has type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span><a class='hidden_link' href='#expr.new-20.sentence-2'>.</a></div> <div id='expr.new-20.sentence-3' class='sentence'>If the type of the allocated object has new-extended alignment,
the next argument is
the type's alignment,
and has type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>align_<span class='shy'></span>val_<span class='shy'></span>t</span><a class='hidden_link' href='#expr.new-20.sentence-3'>.</a></div> <div id='expr.new-20.sentence-4' class='sentence'>If the <a href='#nt:new-placement' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-placement___'><span class='textsf'><i >new-placement</i></span></span></a> syntax is used,
the <a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause'><span class='textsf'><i >initializer-clause</i></span></span></a><i >s</i>
in its <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list__'><span class='textsf'><i >expression-list</i></span></span></a>
are the succeeding arguments<a class='hidden_link' href='#expr.new-20.sentence-4'>.</a></div> <div id='expr.new-20.sentence-5' class='sentence'>If no matching function is found then
<ul class='itemize'><li id='expr.new-20.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-20.1'>(20.1)</a></div>if the allocated object type has new-extended alignment,
the alignment argument is removed from the argument list;</li><li id='expr.new-20.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-20.2'>(20.2)</a></div>otherwise, an argument that
is the type's alignment and has type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>align_<span class='shy'></span>val_<span class='shy'></span>t</span>
is added into the argument list immediately after the first argument;</li></ul>
and then overload resolution is performed again<a class='hidden_link' href='#expr.new-20.sentence-5'>.</a></div></div></div><div class='para nonNormativeOnly' id='expr.new-21'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-21'>21</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5588'>#</a></div><div class='texpara'><div id='expr.new-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#expr.new-example-6'>6</a></i>:&ensp;<ul class='itemize'><li id='expr.new-21.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-21.1'>(21.1)</a></div><span class='texttt'><span class='keyword'>new</span> T</span> results in one of the following calls:
<span class='codeblock'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span>
<span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>, std<span class='operator'>::</span>align_val_t<span class='parenthesis'>(</span><span class='keyword'>alignof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
</span></li><li id='expr.new-21.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-21.2'>(21.2)</a></div><span class='texttt'><span class='keyword'>new</span><span class='parenthesis'>(</span><span class='literal'>2</span>,f<span class='parenthesis'>)</span> T</span> results in one of the following calls:
<span class='codeblock'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>, <span class='literal'>2</span>, f<span class='parenthesis'>)</span>
<span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>, std<span class='operator'>::</span>align_val_t<span class='parenthesis'>(</span><span class='keyword'>alignof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span>, <span class='literal'>2</span>, f<span class='parenthesis'>)</span>
</span></li><li id='expr.new-21.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-21.3'>(21.3)</a></div><span class='texttt'><span class='keyword'>new</span> T<span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span></span> results in one of the following calls:
<span class='codeblock'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>*</span> <span class='literal'>5</span> <span class='operator'>+</span> x<span class='parenthesis'>)</span>
<span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>*</span> <span class='literal'>5</span> <span class='operator'>+</span> x, std<span class='operator'>::</span>align_val_t<span class='parenthesis'>(</span><span class='keyword'>alignof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
</span></li><li id='expr.new-21.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-21.4'>(21.4)</a></div><span class='texttt'><span class='keyword'>new</span><span class='parenthesis'>(</span><span class='literal'>2</span>,f<span class='parenthesis'>)</span> T<span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span></span> results in one of the following calls:
<span class='codeblock'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>*</span> <span class='literal'>5</span> <span class='operator'>+</span> x, <span class='literal'>2</span>, f<span class='parenthesis'>)</span>
<span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>*</span> <span class='literal'>5</span> <span class='operator'>+</span> x, std<span class='operator'>::</span>align_val_t<span class='parenthesis'>(</span><span class='keyword'>alignof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span>, <span class='literal'>2</span>, f<span class='parenthesis'>)</span>
</span></li></ul>
Here, each instance of <span class='texttt'>x</span> is a non-negative unspecified value
representing array allocation overhead; the result of the
<a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_________________________'><span class='textsf'><i >new-expression</i></span></span></a> will be offset by this amount from the value
returned by <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>. <div id='expr.new-21.sentence-1' class='sentence'>This overhead may be applied in all
array <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression__________________________'><span class='textsf'><i >new-expression</i></span></span></a><i >s</i>, including those referencing
a placement allocation function, except when referencing
the library function <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t, <span class='keyword'>void</span><span class='operator'>*</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#expr.new-21.sentence-1'>.</a></div> <div id='expr.new-21.sentence-2' class='sentence'>The amount of overhead may vary from one
invocation of <span id=':new__________'><span class='texttt'><span class='keyword'>new</span></span></span> to another<a class='hidden_link' href='#expr.new-21.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='expr.new-22'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-22'>22</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5623'>#</a></div><div class='texpara'><div id='expr.new-note-10' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.new-note-10'>10</a></i>:&ensp;<div id='expr.new-22.sentence-1' class='sentence'>Unless an allocation function has a non-throwing
<a href='except.spec' title='14.5&emsp;Exception specifications&emsp;[except.spec]'>exception specification</a>,
it indicates failure to allocate storage by throwing a
<a class='index' id=':bad_alloc'></a><a class='index' id='lib:bad_alloc'></a><span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>bad_<span class='shy'></span>alloc</span>
exception (<a href='basic.stc.dynamic.allocation' title='6.7.5.5.2&emsp;Allocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>allocation]</a>, <a href='except' title='14&emsp;Exception handling'>[except]</a>, <a href='bad.alloc' title='17.6.4.1&emsp;Class bad_&shy;alloc'>[bad.<span class='shy'></span>alloc]</a>);
it returns a non-null pointer otherwise<a class='hidden_link' href='#expr.new-22.sentence-1'>.</a></div> <div id='expr.new-22.sentence-2' class='sentence'>If the allocation function
has a non-throwing exception specification,
it returns null to indicate failure to allocate storage
and a non-null pointer otherwise<a class='hidden_link' href='#expr.new-22.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='expr.new-22.sentence-3' class='sentence'>
If the allocation function is a non-allocating
form (<a href='new.delete.placement' title='17.6.3.4&emsp;Non-allocating forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>placement]</a>) that returns null,
the behavior is undefined<a class='hidden_link' href='#expr.new-22.sentence-3'>.</a></div> <div id='expr.new-22.sentence-4' class='sentence'>Otherwise,
if the allocation function returns null, initialization shall not be
done, the deallocation function shall not be called, and the value of
the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression___________________________'><span class='textsf'><i >new-expression</i></span></span></a> shall be null<a class='hidden_link' href='#expr.new-22.sentence-4'>.</a></div></div></div><div class='para nonNormativeOnly' id='expr.new-23'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-23'>23</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5645'>#</a></div><div class='texpara'><div id='expr.new-note-11' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.new-note-11'>11</a></i>:&ensp;<div id='expr.new-23.sentence-1' class='sentence'>When the allocation function returns a value other than null, it must be
a pointer to a block of storage in which space for the object has been
reserved<a class='hidden_link' href='#expr.new-23.sentence-1'>.</a></div> <div id='expr.new-23.sentence-2' class='sentence'>The block of storage is assumed to be
appropriately aligned (<a href='basic.align' title='6.7.6&emsp;Alignment'>[basic.<span class='shy'></span>align]</a>)
and of the requested size<a class='hidden_link' href='#expr.new-23.sentence-2'>.</a></div> <div id='expr.new-23.sentence-3' class='sentence'>The address of the created object will not
necessarily be the same as that of the block if the object is an array<a class='hidden_link' href='#expr.new-23.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='expr.new-24'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-24'>24</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5655'>#</a></div><div class='texpara'><div id='expr.new-24.sentence-1' class='sentence'><a class='index' id=':new,array_of_class_objects_and'></a><a class='index' id=':new,initialization_and'></a><a class='index' id=':new,constructor_and'></a><a class='index' id=':new,default_constructor_and'></a>A <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression____________________________'><span class='textsf'><i >new-expression</i></span></span></a> that creates an object of type <span class='texttt'>T</span>
initializes that object as follows:
<ul class='itemize'><li id='expr.new-24.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-24.1'>(24.1)</a></div><div class='texpara'><div id='expr.new-24.1.sentence-1' class='sentence'>If the <a href='#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer________'><span class='textsf'><i >new-initializer</i></span></span></a> is omitted, the object is
default-initialized (<a href='dcl.init' title='9.4&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#expr.new-24.1.sentence-1'>.</a></div> <div id='expr.new-note-12' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.new-note-12'>12</a></i>:&ensp;<div id='expr.new-24.1.sentence-2' class='sentence'>If no initialization
is performed, the object has an indeterminate value<a class='hidden_link' href='#expr.new-24.1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='expr.new-24.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.new-24.2'>(24.2)</a></div><div class='texpara'><div id='expr.new-24.2.sentence-1' class='sentence'>Otherwise, the <a href='#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer_________'><span class='textsf'><i >new-initializer</i></span></span></a> is interpreted according to
the initialization rules of <a href='dcl.init' title='9.4&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a> for direct-initialization<a class='hidden_link' href='#expr.new-24.2.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='expr.new-25'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-25'>25</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5674'>#</a></div><div class='texpara'><div id='expr.new-25.sentence-1' class='sentence'><a class='index' id=':new,unspecified_order_of_evaluation'></a><a class='index' id=':new,unspecified_constructor_and'></a>The invocation of the allocation function is sequenced before
the evaluations of expressions in the <a href='#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer__________'><span class='textsf'><i >new-initializer</i></span></span></a><a class='hidden_link' href='#expr.new-25.sentence-1'>.</a></div> <div id='expr.new-25.sentence-2' class='sentence'>Initialization of
the allocated object is sequenced before the
<a class='index' id=':value_computation'></a>value computation of the
<a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_____________________________'><span class='textsf'><i >new-expression</i></span></span></a><a class='hidden_link' href='#expr.new-25.sentence-2'>.</a></div></div></div><div class='para' id='expr.new-26'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-26'>26</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5684'>#</a></div><div class='texpara'><div id='expr.new-26.sentence-1' class='sentence'>If the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression______________________________'><span class='textsf'><i >new-expression</i></span></span></a>
creates an array of objects of class type, the destructor is potentially
invoked (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)<a class='hidden_link' href='#expr.new-26.sentence-1'>.</a></div></div></div><div class='para' id='expr.new-27'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-27'>27</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5689'>#</a></div><div class='texpara'><div id='expr.new-27.sentence-1' class='sentence'><a class='index' id=':new,exception_and'></a>If any part of the object initialization described above<a class='footnoteref' href='#footnote-61' id='footnoteref-61' title='This can include evaluating a new-initializer and/or calling a constructor.'>61</a>
terminates by throwing an exception and a suitable deallocation function
can be found, the deallocation function is called to free the memory in
which the object was being constructed, after which the exception
continues to propagate in the context of the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_______________________________'><span class='textsf'><i >new-expression</i></span></span></a><a class='hidden_link' href='#expr.new-27.sentence-1'>.</a></div> <div id='expr.new-27.sentence-2' class='sentence'>If no unambiguous matching deallocation function can be found,
propagating the exception does not cause the object's memory to be
freed<a class='hidden_link' href='#expr.new-27.sentence-2'>.</a></div> <div id='expr.new-note-13' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.new-note-13'>13</a></i>:&ensp;<div id='expr.new-27.sentence-3' class='sentence'>This is appropriate when the called allocation function does not
allocate memory; otherwise, it is likely to result in a memory leak<a class='hidden_link' href='#expr.new-27.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='expr.new-28'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-28'>28</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5709'>#</a></div><div class='texpara'><div id='expr.new-28.sentence-1' class='sentence'>If the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression________________________________'><span class='textsf'><i >new-expression</i></span></span></a> does not begin with
a unary <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span></span> operator and
the allocated type is a class type <span class='texttt'>T</span> or an array thereof,
a search is performed for the deallocation function's name
in the scope of <span class='texttt'>T</span><a class='hidden_link' href='#expr.new-28.sentence-1'>.</a></div> <div id='expr.new-28.sentence-2' class='sentence'>Otherwise, or if nothing is found,
the deallocation function's name is looked up by
searching for it in the global scope<a class='hidden_link' href='#expr.new-28.sentence-2'>.</a></div></div></div><div class='para' id='expr.new-29'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-29'>29</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5719'>#</a></div><div class='texpara'><div id='expr.new-29.sentence-1' class='sentence'>A declaration of a placement deallocation function matches the
declaration of a placement allocation function if it has the same number
of parameters and, after parameter transformations (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>), all
parameter types except the first are identical<a class='hidden_link' href='#expr.new-29.sentence-1'>.</a></div> <div id='expr.new-29.sentence-2' class='sentence'>If
the lookup finds a single matching deallocation function, that function
will be called; otherwise, no deallocation function will be called<a class='hidden_link' href='#expr.new-29.sentence-2'>.</a></div> <div id='expr.new-29.sentence-3' class='sentence'>If
the lookup finds a usual deallocation
function
and that function,
considered as a placement deallocation function, would have been
selected as a match for the allocation function, the program is
ill-formed<a class='hidden_link' href='#expr.new-29.sentence-3'>.</a></div> <div id='expr.new-29.sentence-4' class='sentence'>For a non-placement allocation function, the normal deallocation
function lookup is used to find the matching deallocation
function (<a href='#expr.delete' title='7.6.2.9&emsp;Delete'>[expr.<span class='shy'></span>delete]</a>)<a class='hidden_link' href='#expr.new-29.sentence-4'>.</a></div> <div id='expr.new-29.sentence-5' class='sentence'>In any case,
the matching deallocation function (if any) shall be non-deleted and
accessible from the point where the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_________________________________'><span class='textsf'><i >new-expression</i></span></span></a> appears<a class='hidden_link' href='#expr.new-29.sentence-5'>.</a></div> <div id='expr.new-example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#expr.new-example-7'>7</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='comment'>// Placement allocation function:</span>
  <span class='keyword'>static</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t, std<span class='operator'>::</span>size_t<span class='parenthesis'>)</span>;

  <span class='comment'>// Usual (non-placement) deallocation function:</span>
  <span class='keyword'>static</span> <span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span>, std<span class='operator'>::</span>size_t<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

S<span class='operator'>*</span> p <span class='operator'>=</span> <span class='keyword'>new</span> <span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span> S;   <span class='comment'>// error: non-placement deallocation function matches</span>
                    <span class='comment'>// placement allocation function</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='expr.new-30'><div class='marginalizedparent'><a class='marginalized' href='#expr.new-30'>30</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5752'>#</a></div><div class='texpara'><div id='expr.new-30.sentence-1' class='sentence'>If a <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression__________________________________'><span class='textsf'><i >new-expression</i></span></span></a> calls a deallocation function, it passes
the value returned from the allocation function call as the first
argument of type <span class='texttt'><span id=':void__'><span class='texttt'><span class='keyword'>void</span></span></span><span class='operator'>*</span></span><a class='hidden_link' href='#expr.new-30.sentence-1'>.</a></div> <div id='expr.new-30.sentence-2' class='sentence'>If a placement deallocation function is
called, it is passed the same additional arguments as were passed to the
placement allocation function, that is, the same arguments as those
specified with the <a href='#nt:new-placement' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-placement____'><span class='textsf'><i >new-placement</i></span></span></a> syntax<a class='hidden_link' href='#expr.new-30.sentence-2'>.</a></div> <div id='expr.new-30.sentence-3' class='sentence'>If the implementation is allowed
to introduce a temporary object or make a copy of any argument
as part of the call to the allocation function,
it is unspecified whether the same object is used in the call
to both the allocation and deallocation functions<a class='hidden_link' href='#expr.new-30.sentence-3'>.</a></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-60'><div class='texpara'><a class='footnotenum' href='#footnote-60'>60)</a><a class='footnoteBacklink' href='#footnoteref-60'>60)</a> <div id='footnote-60.sentence-1' class='sentence'>If the conversion function
returns a signed integer type, the second standard conversion converts to the
unsigned type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span> and thus thwarts any attempt to detect a
negative value afterwards<a class='hidden_link' href='#footnote-60.sentence-1'>.</a></div></div></div><div class='footnote' id='footnote-61'><div class='texpara'><a class='footnotenum' href='#footnote-61'>61)</a><a class='footnoteBacklink' href='#footnoteref-61'>61)</a> <div id='footnote-61.sentence-1' class='sentence'>This can
include evaluating a <a href='#nt:new-initializer' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-initializer'><span class='textsf'><i >new-initializer</i></span></span></a> and/or calling
a constructor<a class='hidden_link' href='#footnote-61.sentence-1'>.</a></div></div></div></div><div id='expr.delete' class='section'><h4 ><a class='secnum' href='#expr.delete' style='min-width:95pt'>7.6.2.9</a> Delete <a class='abbr_ref' href='expr.delete'>[expr.delete]</a></h4><div class='para' id='expr.delete-1'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5767'>#</a></div><div class='texpara'><div id='expr.delete-1.sentence-1' class='sentence'><a class='index' id=':expression,delete'></a><a class='index' id=':delete___'></a>The <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression___'><span class='textsf'><i >delete-expression</i></span></span></a> operator destroys a
<a href='intro.object#def:most_derived_object' title='6.7.2&emsp;Object model&emsp;[intro.object]'>most derived object</a> or array created by a
<a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression____________________________________'><span class='textsf'><i >new-expression</i></span></span></a><a class='hidden_link' href='#expr.delete-1.sentence-1'>.</a></div></div><div class='texpara'><div class='bnf' id='nt:delete-expression'>
<a class='hidden_link' href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='nt:delete-expression'><span id=':delete-expression'>delete-expression<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='operator'>::</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span id=':delete____'><span class='texttt'><span class='keyword'>delete</span></span></span> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression______'><span class='textsf'><i >cast-expression</i></span></span></a><br/><span class='terminal'><span class='operator'>::</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span id=':delete_____'><span class='texttt'><span class='keyword'>delete</span></span></span> <span class='terminal'><span class='squarebracket'>[</span></span> <span class='terminal'><span class='squarebracket'>]</span></span> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression_______'><span class='textsf'><i >cast-expression</i></span></span></a>
</div></div><div class='texpara'><div id='expr.delete-1.sentence-2' class='sentence'>The first alternative is a
<a class='hidden_link' href='#def:delete,single-object' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='def:delete,single-object'><i >single-object delete expression</i></span></a>, and the
second is an <a class='hidden_link' href='#def:delete,array' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='def:delete,array'><i >array delete expression</i></span></a><a class='hidden_link' href='#expr.delete-1.sentence-2'>.</a></div> <div id='expr.delete-1.sentence-3' class='sentence'>Whenever the <span id=':delete______'><span class='texttt'><span class='keyword'>delete</span></span></span> keyword is immediately followed by empty square
brackets, it shall be interpreted as the second alternative<a class='hidden_link' href='#expr.delete-1.sentence-3'>.</a><a class='footnoteref' href='#footnote-62' id='footnoteref-62' title='A lambda-expression with a lambda-introducer that consists of empty square brackets can follow the delete keyword if the lambda-expression is enclosed in parentheses.'>62</a></div> <div id='expr.delete-1.sentence-4' class='sentence'>
If the operand is of
class type, it is contextually implicitly converted (<a href='conv' title='7.3&emsp;Standard conversions'>[conv]</a>)
to a pointer to object
type
and the converted operand is used in place of the original operand
for the remainder of this subclause<a class='hidden_link' href='#expr.delete-1.sentence-4'>.</a></div> <div id='expr.delete-1.sentence-5' class='sentence'>Otherwise, it shall be a prvalue of pointer to object type<a class='hidden_link' href='#expr.delete-1.sentence-5'>.</a></div> <div id='expr.delete-1.sentence-6' class='sentence'>The <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression____'><span class='textsf'><i >delete-expression</i></span></span></a> has type
<span id=':void___'><span class='texttt'><span class='keyword'>void</span></span></span><a class='hidden_link' href='#expr.delete-1.sentence-6'>.</a></div></div></div><div class='para' id='expr.delete-2'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5801'>#</a></div><div class='texpara'><div id='expr.delete-2.sentence-1' class='sentence'><a class='index' id=':delete,single-object'></a>In a single-object delete expression, the value of the operand of
<span id=':delete_______'><span class='texttt'><span class='keyword'>delete</span></span></span> may be a null pointer value,
a pointer value
that resulted from a previous non-array <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_____________________________________'><span class='textsf'><i >new-expression</i></span></span></a>, or
a pointer to a base class subobject
of an object created by such a <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression______________________________________'><span class='textsf'><i >new-expression</i></span></span></a><a class='hidden_link' href='#expr.delete-2.sentence-1'>.</a></div> <div id='expr.delete-2.sentence-2' class='sentence'>If not, the behavior is undefined<a class='hidden_link' href='#expr.delete-2.sentence-2'>.</a></div> <div id='expr.delete-2.sentence-3' class='sentence'><a class='index' id=':array,delete'></a>In an array delete expression, the value of the operand of <span id=':delete________'><span class='texttt'><span class='keyword'>delete</span></span></span>
may be a null pointer value or a pointer value that resulted from
a previous array <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_______________________________________'><span class='textsf'><i >new-expression</i></span></span></a> whose
allocation function was not a non-allocating form (<a href='new.delete.placement' title='17.6.3.4&emsp;Non-allocating forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>placement]</a>)<a class='hidden_link' href='#expr.delete-2.sentence-3'>.</a><a class='footnoteref' href='#footnote-63' id='footnoteref-63' title='For nonzero-length arrays, this is the same as a pointer to the first element of the array created by that new-expression. Zero-length arrays do not have a first element.'>63</a></div> <div id='expr.delete-2.sentence-4' class='sentence'>
If not, the behavior is undefined<a class='hidden_link' href='#expr.delete-2.sentence-4'>.</a></div> <div id='expr.delete-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.delete-note-1'>1</a></i>:&ensp;<div id='expr.delete-2.sentence-5' class='sentence'>This means that the syntax of the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_____'><span class='textsf'><i >delete-expression</i></span></span></a> must
match the type of the object allocated by <span id=':new___________'><span class='texttt'><span class='keyword'>new</span></span></span>, not the syntax of the
<a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression________________________________________'><span class='textsf'><i >new-expression</i></span></span></a><a class='hidden_link' href='#expr.delete-2.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='expr.delete-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.delete-note-2'>2</a></i>:&ensp;<div id='expr.delete-2.sentence-6' class='sentence'>A pointer to a <span id=':const'><span class='texttt'><span class='keyword'>const</span></span></span> type can be the operand of a
<a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression______'><span class='textsf'><i >delete-expression</i></span></span></a>; it is not necessary to cast away the
constness (<a href='expr.const.cast' title='7.6.1.11&emsp;Const cast'>[expr.<span class='shy'></span>const.<span class='shy'></span>cast]</a>) of the pointer expression before it is
used as the operand of the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_______'><span class='textsf'><i >delete-expression</i></span></span></a><a class='hidden_link' href='#expr.delete-2.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='expr.delete-3'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5834'>#</a></div><div class='texpara'><div id='expr.delete-3.sentence-1' class='sentence'><a class='index' id=':delete,undefined'></a>In a single-object delete expression, if the static type of the object to be
deleted is not similar (<a href='conv.qual' title='7.3.6&emsp;Qualification conversions'>[conv.<span class='shy'></span>qual]</a>) to its dynamic type
and the selected deallocation function (see below)
is not a destroying operator delete,
the static type shall be a base
class of the dynamic type of the object to be deleted and the static type shall
have a virtual destructor or the behavior is undefined<a class='hidden_link' href='#expr.delete-3.sentence-1'>.</a></div> <div id='expr.delete-3.sentence-2' class='sentence'>In an array delete
expression, if the dynamic type of the object to be deleted is not similar to
its static type, the behavior is undefined<a class='hidden_link' href='#expr.delete-3.sentence-2'>.</a></div></div></div><div class='para' id='expr.delete-4'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5846'>#</a></div><div class='texpara'><div id='expr.delete-4.sentence-1' class='sentence'><a class='index' id=':type,incomplete___'></a>If the object being deleted has incomplete class type at the point of deletion,
the program is ill-formed<a class='hidden_link' href='#expr.delete-4.sentence-1'>.</a></div></div></div><div class='para' id='expr.delete-5'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5851'>#</a></div><div class='texpara'><div id='expr.delete-5.sentence-1' class='sentence'><a class='index' id=':delete,destructor_and'></a>If the value of the operand of the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression________'><span class='textsf'><i >delete-expression</i></span></span></a> is not a
null pointer value
and the selected deallocation function (see below)
is not a destroying operator delete,
evaluating the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_________'><span class='textsf'><i >delete-expression</i></span></span></a> invokes the
destructor (if any) for the object or the elements of the array being
deleted<a class='hidden_link' href='#expr.delete-5.sentence-1'>.</a></div> <div id='expr.delete-5.sentence-2' class='sentence'>The destructor shall be accessible from the point where
the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression__________'><span class='textsf'><i >delete-expression</i></span></span></a> appears<a class='hidden_link' href='#expr.delete-5.sentence-2'>.</a></div> <div id='expr.delete-5.sentence-3' class='sentence'>In the case of an array, the elements are destroyed in
order of decreasing address (that is, in reverse order of the completion
of their constructor; see <a href='class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#expr.delete-5.sentence-3'>.</a></div></div></div><div class='para' id='expr.delete-6'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5866'>#</a></div><div class='texpara'><div id='expr.delete-6.sentence-1' class='sentence'>If the value of the operand of the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression___________'><span class='textsf'><i >delete-expression</i></span></span></a> is not a
null pointer value, then:
<ul class='itemize'><li id='expr.delete-6.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.delete-6.1'>(6.1)</a></div><div class='texpara'><div id='expr.delete-6.1.sentence-1' class='sentence'>If the allocation call for the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_________________________________________'><span class='textsf'><i >new-expression</i></span></span></a> for the object to
be deleted was not omitted and the allocation was not extended (<a href='#expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>), the
<a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression____________'><span class='textsf'><i >delete-expression</i></span></span></a> shall call a <a href='basic.stc.dynamic.deallocation' title='6.7.5.5.3&emsp;Deallocation functions&emsp;[basic.stc.dynamic.deallocation]'>deallocation
function</a><a class='hidden_link' href='#expr.delete-6.1.sentence-1'>.</a></div> <div id='expr.delete-6.1.sentence-2' class='sentence'>The value returned from the
allocation call of the <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression__________________________________________'><span class='textsf'><i >new-expression</i></span></span></a> shall be passed as the
first argument to the deallocation function<a class='hidden_link' href='#expr.delete-6.1.sentence-2'>.</a></div></div></li><li id='expr.delete-6.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.delete-6.2'>(6.2)</a></div><div class='texpara'><div id='expr.delete-6.2.sentence-1' class='sentence'>Otherwise, if the allocation was extended or was provided by extending the
allocation of another <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression___________________________________________'><span class='textsf'><i >new-expression</i></span></span></a>, and the
<a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_____________'><span class='textsf'><i >delete-expression</i></span></span></a> for every other pointer value produced by a
<a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression____________________________________________'><span class='textsf'><i >new-expression</i></span></span></a> that had storage provided by the extended
<a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_____________________________________________'><span class='textsf'><i >new-expression</i></span></span></a> has been evaluated, the
<a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression______________'><span class='textsf'><i >delete-expression</i></span></span></a> shall call a deallocation function<a class='hidden_link' href='#expr.delete-6.2.sentence-1'>.</a></div> <div id='expr.delete-6.2.sentence-2' class='sentence'>The value
returned from the allocation call of the extended <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression______________________________________________'><span class='textsf'><i >new-expression</i></span></span></a>
shall be passed as the first argument to the deallocation function<a class='hidden_link' href='#expr.delete-6.2.sentence-2'>.</a></div></div></li><li id='expr.delete-6.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.delete-6.3'>(6.3)</a></div><div class='texpara'><div id='expr.delete-6.3.sentence-1' class='sentence'>Otherwise, the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_______________'><span class='textsf'><i >delete-expression</i></span></span></a> will not call a
deallocation function<a class='hidden_link' href='#expr.delete-6.3.sentence-1'>.</a></div></div></li></ul></div> <div id='expr.delete-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.delete-note-3'>3</a></i>:&ensp;<div id='expr.delete-6.sentence-2' class='sentence'>The deallocation function is called regardless of whether the destructor
for the object or some element of the array throws an exception<a class='hidden_link' href='#expr.delete-6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='expr.delete-6.sentence-3' class='sentence'>
If the value of the operand of the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression________________'><span class='textsf'><i >delete-expression</i></span></span></a> is a
null pointer value, it is unspecified whether a deallocation function will be
called as described above<a class='hidden_link' href='#expr.delete-6.sentence-3'>.</a></div></div></div><div class='para' id='expr.delete-7'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5900'>#</a></div><div class='texpara'><div id='expr.delete-7.sentence-1' class='sentence'>If a deallocation function is called,
it is <span class='texttt'><span id=':operator______'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':delete_________'><span class='texttt'><span class='keyword'>delete</span></span></span></span> for a single-object delete expression or
<span class='texttt'><span id=':operator_______'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':delete__________'><span class='texttt'><span class='keyword'>delete</span></span></span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> for an array delete expression<a class='hidden_link' href='#expr.delete-7.sentence-1'>.</a></div> <div id='expr.delete-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.delete-note-4'>4</a></i>:&ensp;<div id='expr.delete-7.sentence-2' class='sentence'><a class='index' id=':operator_delete__'></a>An implementation provides default definitions of the global
deallocation functions (<a href='new.delete.single' title='17.6.3.2&emsp;Single-object forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>single]</a>, <a href='new.delete.array' title='17.6.3.3&emsp;Array forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>array]</a>)<a class='hidden_link' href='#expr.delete-7.sentence-2'>.</a></div> <div id='expr.delete-7.sentence-3' class='sentence'>A C++ program can provide alternative definitions of these
functions (<a href='replacement.functions' title='16.4.5.6&emsp;Replacement functions'>[replacement.<span class='shy'></span>functions]</a>), and/or class-specific
versions (<a href='class.free' title='11.4.11&emsp;Allocation and deallocation functions'>[class.<span class='shy'></span>free]</a>)<a class='hidden_link' href='#expr.delete-7.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='expr.delete-8'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5913'>#</a></div><div class='texpara'><div id='expr.delete-8.sentence-1' class='sentence'>If the keyword <span id=':delete___________'><span class='texttt'><span class='keyword'>delete</span></span></span> in a <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_________________'><span class='textsf'><i >delete-expression</i></span></span></a>
is not preceded by the unary <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span></span> operator and the type of the operand is
a pointer to a (possibly cv-qualified) class type <span class='texttt'>T</span>
or (possibly multidimensional) array thereof:
<ul class='itemize'><li id='expr.delete-8.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.delete-8.1'>(8.1)</a></div><div class='texpara'><div id='expr.delete-8.1.sentence-1' class='sentence'>For a single-object delete expression,
if the operand is a pointer to <span class='mathit'>cv</span> <span class='texttt'>T</span> and
<span class='texttt'>T</span> has a virtual destructor,
the deallocation function is the one selected at the point of definition of
the dynamic type's virtual destructor (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)<a class='hidden_link' href='#expr.delete-8.1.sentence-1'>.</a></div></div></li><li id='expr.delete-8.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.delete-8.2'>(8.2)</a></div><div class='texpara'><div id='expr.delete-8.2.sentence-1' class='sentence'>Otherwise,
a search is performed for the deallocation function's name
in the scope of <span class='texttt'>T</span><a class='hidden_link' href='#expr.delete-8.2.sentence-1'>.</a></div></div></li></ul></div> <div id='expr.delete-8.sentence-2' class='sentence'>
Otherwise, or if nothing is found,
the deallocation function's name is looked up by
searching for it in the global scope<a class='hidden_link' href='#expr.delete-8.sentence-2'>.</a></div> <div id='expr.delete-8.sentence-3' class='sentence'>In any case, any declarations
other than of usual deallocation functions (<a href='basic.stc.dynamic.deallocation' title='6.7.5.5.3&emsp;Deallocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>deallocation]</a>)
are discarded<a class='hidden_link' href='#expr.delete-8.sentence-3'>.</a></div> <div id='expr.delete-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.delete-note-5'>5</a></i>:&ensp;<div id='expr.delete-8.sentence-4' class='sentence'>If only a placement deallocation function is found in a class,
the program is ill-formed because the lookup set is empty (<a href='basic.lookup' title='6.5&emsp;Name lookup'>[basic.<span class='shy'></span>lookup]</a>)<a class='hidden_link' href='#expr.delete-8.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='expr.delete-9'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5941'>#</a></div><div class='texpara'><div id='expr.delete-9.sentence-1' class='sentence'>The deallocation function to be called is selected as follows:
<ul class='itemize'><li id='expr.delete-9.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.delete-9.1'>(9.1)</a></div><div class='texpara'><div id='expr.delete-9.1.sentence-1' class='sentence'>If any of the deallocation functions is a destroying operator delete,
all deallocation functions that are not destroying operator deletes
are eliminated from further consideration<a class='hidden_link' href='#expr.delete-9.1.sentence-1'>.</a></div></div></li><li id='expr.delete-9.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.delete-9.2'>(9.2)</a></div><div class='texpara'><div id='expr.delete-9.2.sentence-1' class='sentence'>If the type has new-extended alignment,
a function with a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>align_<span class='shy'></span>val_<span class='shy'></span>t</span> is preferred;
otherwise a function without such a parameter is preferred<a class='hidden_link' href='#expr.delete-9.2.sentence-1'>.</a></div> <div id='expr.delete-9.2.sentence-2' class='sentence'>If any preferred functions are found,
all non-preferred functions are eliminated from further consideration<a class='hidden_link' href='#expr.delete-9.2.sentence-2'>.</a></div></div></li><li id='expr.delete-9.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.delete-9.3'>(9.3)</a></div><div class='texpara'><div id='expr.delete-9.3.sentence-1' class='sentence'>If exactly one function remains,
that function is selected and the selection process terminates<a class='hidden_link' href='#expr.delete-9.3.sentence-1'>.</a></div></div></li><li id='expr.delete-9.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.delete-9.4'>(9.4)</a></div><div class='texpara'><div id='expr.delete-9.4.sentence-1' class='sentence'>If the deallocation functions belong to a class scope,
the one without a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span> is selected<a class='hidden_link' href='#expr.delete-9.4.sentence-1'>.</a></div></div></li><li id='expr.delete-9.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.delete-9.5'>(9.5)</a></div><div class='texpara'><div id='expr.delete-9.5.sentence-1' class='sentence'>If the type is complete
and if, for an array delete expression only,
the operand is a pointer to a class type with a
non-trivial destructor or a (possibly multidimensional) array thereof,
the function with a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span> is selected<a class='hidden_link' href='#expr.delete-9.5.sentence-1'>.</a></div></div></li><li id='expr.delete-9.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#expr.delete-9.6'>(9.6)</a></div><div class='texpara'><div id='expr.delete-9.6.sentence-1' class='sentence'>Otherwise, it is unspecified
whether a deallocation function with a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span>
is selected<a class='hidden_link' href='#expr.delete-9.6.sentence-1'>.</a></div></div></li></ul></div> <div id='expr.delete-9.sentence-2' class='sentence'>
Unless the deallocation function is selected
at the point of definition of the dynamic type's virtual destructor,
the selected deallocation function shall be accessible
from the point where the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression__________________'><span class='textsf'><i >delete-expression</i></span></span></a> appears<a class='hidden_link' href='#expr.delete-9.sentence-2'>.</a></div></div></div><div class='para' id='expr.delete-10'><div class='marginalizedparent'><a class='marginalized' href='#expr.delete-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L5976'>#</a></div><div class='texpara'><div id='expr.delete-10.sentence-1' class='sentence'>For a single-object delete expression,
the deleted object is
the object <span class='math'><span class='mathalpha'>A</span></span> pointed to by the operand
if the static type of <span class='math'><span class='mathalpha'>A</span></span> does not have a virtual destructor,
and the most-derived object of <span class='math'><span class='mathalpha'>A</span></span> otherwise<a class='hidden_link' href='#expr.delete-10.sentence-1'>.</a></div> <div id='expr.delete-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.delete-note-6'>6</a></i>:&ensp;<div id='expr.delete-10.sentence-2' class='sentence'>If the deallocation function is not a destroying operator delete
and the deleted object is not the most derived object in the former case,
the behavior is undefined,
as stated above<a class='hidden_link' href='#expr.delete-10.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='expr.delete-10.sentence-3' class='sentence'>
For an array delete expression,
the deleted object is
the array object<a class='hidden_link' href='#expr.delete-10.sentence-3'>.</a></div> <div id='expr.delete-10.sentence-4' class='sentence'>When a <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression___________________'><span class='textsf'><i >delete-expression</i></span></span></a>
is executed, the selected deallocation function shall be called with
the address of the deleted object
in a single-object delete expression, or
the address of the deleted object
suitably adjusted for the array allocation
overhead (<a href='#expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>) in an array delete expression,
as its first argument<a class='hidden_link' href='#expr.delete-10.sentence-4'>.</a></div> <div id='expr.delete-note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.delete-note-7'>7</a></i>:&ensp;<div id='expr.delete-10.sentence-5' class='sentence'>Any cv-qualifiers in the type of the deleted object
are ignored when forming this argument<a class='hidden_link' href='#expr.delete-10.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='expr.delete-10.sentence-6' class='sentence'>
If a destroying operator delete is used,
an unspecified value
is passed as the argument
corresponding to the parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>destroying_<span class='shy'></span>delete_<span class='shy'></span>t</span><a class='hidden_link' href='#expr.delete-10.sentence-6'>.</a></div> <div id='expr.delete-10.sentence-7' class='sentence'>If a deallocation function
with a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>align_<span class='shy'></span>val_<span class='shy'></span>t</span>
is used,
the alignment of the type of the deleted object
is passed as the corresponding argument<a class='hidden_link' href='#expr.delete-10.sentence-7'>.</a></div> <div id='expr.delete-10.sentence-8' class='sentence'>If a deallocation function
with a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span> is used,
the size of the deleted object
in a single-object delete expression, or
of the array plus allocation overhead
in an array delete expression,
is passed as the corresponding argument<a class='hidden_link' href='#expr.delete-10.sentence-8'>.</a></div> <div id='expr.delete-note-8' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#expr.delete-note-8'>8</a></i>:&ensp;<div id='expr.delete-10.sentence-9' class='sentence'>If this results in a call to a replaceable deallocation function,
and either
the first argument was not the result of
a prior call to a replaceable allocation function or
the second or third argument was not the corresponding argument in said call,
the behavior is undefined (<a href='new.delete.single' title='17.6.3.2&emsp;Single-object forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>single]</a>, <a href='new.delete.array' title='17.6.3.3&emsp;Array forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>array]</a>)<a class='hidden_link' href='#expr.delete-10.sentence-9'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-62'><div class='texpara'><a class='footnotenum' href='#footnote-62'>62)</a><a class='footnoteBacklink' href='#footnoteref-62'>62)</a> <div id='footnote-62.sentence-1' class='sentence'>A
<a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_'><span class='textsf'><i >lambda-expression</i></span></span></a> with a <a href='expr.prim.lambda.general#nt:lambda-introducer' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-introducer'><span class='textsf'><i >lambda-introducer</i></span></span></a>
that consists of empty square brackets can follow the <span id=':delete__'><span class='texttt'><span class='keyword'>delete</span></span></span> keyword
if the <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__'><span class='textsf'><i >lambda-expression</i></span></span></a> is enclosed in parentheses<a class='hidden_link' href='#footnote-62.sentence-1'>.</a></div></div></div><div class='footnote' id='footnote-63'><div class='texpara'><a class='footnotenum' href='#footnote-63'>63)</a><a class='footnoteBacklink' href='#footnoteref-63'>63)</a> <div id='footnote-63.sentence-1' class='sentence'>For nonzero-length
arrays, this is the same as a pointer to the first
element of the array created by that <a href='#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression___________________________________'><span class='textsf'><i >new-expression</i></span></span></a><a class='hidden_link' href='#footnote-63.sentence-1'>.</a></div> <div id='footnote-63.sentence-2' class='sentence'>Zero-length arrays do not have a first element<a class='hidden_link' href='#footnote-63.sentence-2'>.</a></div></div></div></div></div></body></html>