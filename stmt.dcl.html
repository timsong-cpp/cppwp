<!DOCTYPE html><html lang='en'><head><title>[stmt.dcl]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>9</a> Statements <a class='abbr_ref' href='./#stmt.stmt'>[stmt.stmt]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>9.7</a> Declaration statement <a class='abbr_ref'>[stmt.dcl]</a></h2><p ><span class='indexparent'><a class='index' id=':statement,declaration'></a></span></p><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/statements.tex#L870'>#</a></div><p >A declaration statement introduces one or more new identifiers into a
block; it has the form</p><pre class='bnf'><a class='nontermdef' id='nt:declaration-statement'>declaration-statement:</a>
&#9;<i ><a href='dcl.dcl#nt:block-declaration'>block-declaration</a></i>
</pre><p >If an identifier introduced by a declaration was previously declared in
an outer block,
<span class='indexparent'><a class='index' id=':name_hiding'></a></span><span class='indexparent'><a class='index' id=':block_structure'></a></span>the outer declaration is hidden for the remainder of the block, after
which it resumes its force.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/statements.tex#L887'>#</a></div><p ><span class='indexparent'><a class='index' id=':block,initialization_in'></a></span><span class='indexparent'><a class='index' id=':initialization,automatic'></a></span>Variables with <a href='basic.stc.auto'>automatic storage duration</a> are
initialized each time their <i ><a href='stmt.dcl#nt:declaration-statement'>declaration-statement</a></i> is executed.
<span class='indexparent'><a class='index' id=':local_variable,destruction_of'></a></span>Variables with automatic storage duration declared in the block are
destroyed on exit from the block (<a href='stmt.jump'>[stmt.jump]</a>).</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/statements.tex#L896'>#</a></div><p ><span class='indexparent'><a class='index' id=':initialization,jump_past'></a></span><span class='indexparent'><a class='index' id=':goto,initialization_and'></a></span>It is possible to transfer into a block, but not in a way that bypasses
declarations with initialization. A program that jumps<a class='footnotenum' href='#footnote-91'>91</a>
from a point where a variable with automatic storage duration is
not in scope to a point where it is in scope is ill-formed unless the
variable has scalar type, class type with a trivial default constructor and a trivial destructor, a cv-qualified version of one of these types, or an array of one of the preceding types and is declared without an
<i ><a href='dcl.init#nt:initializer'>initializer</a></i>.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> </p><pre class='codeblock'>
void f() {
  <span class='comment'>// ...
</span>  goto lx;          <span class='comment'>// ill-formed: jump into scope of <span class='tcode_in_codeblock'>a</span>
</span>  <span class='comment'>// ...
</span>ly:
  X a = 1;
  <span class='comment'>// ...
</span>lx:
  goto ly;          <span class='comment'>// OK, jump implies destructor call for <span class='tcode_in_codeblock'>a</span> followed by
</span>                    <span class='comment'>// construction again immediately following label <span class='tcode_in_codeblock'>ly</span>
</span>}</pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/statements.tex#L923'>#</a></div><p ><span class='indexparent'><a class='index' id=':initialization,automatic_'></a></span><span class='indexparent'><a class='index' id=':initialization,dynamic_block-scope'></a></span><span class='indexparent'><a class='index' id=':initialization,local_static'></a></span><span class='indexparent'><a class='index' id=':initialization,local_thread_local'></a></span>Dynamic initialization of a block-scope variable with
<a href='basic.stc.static'>static storage duration</a> or
<a href='basic.stc.thread'>thread storage duration</a> is performed
the first time control passes through its declaration; such a variable is
considered initialized upon the completion of its initialization. If the
initialization exits by throwing an exception, the initialization is not
complete, so it will be tried again the next time control enters the
declaration.
If control enters the declaration concurrently while the variable is
being initialized, the concurrent execution shall wait for completion
of the initialization.<a class='footnotenum' href='#footnote-92'>92</a> If control
re-enters the declaration recursively while
the variable is being initialized, the behavior is undefined.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> </p><pre class='codeblock'>
int foo(int i) {
  static int s = foo(2*i);      <span class='comment'>// recursive call - undefined
</span>  return i+1;
}</pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2f118eb5c2d546aaf830f92b262039083e40576f/source/statements.tex#L954'>#</a></div><p ><span class='indexparent'><a class='index' id=':static,destruction_of_local'></a></span>The destructor for a block-scope object with static or thread storage duration will be
executed if and only if it was constructed.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
<a href='basic.start.term'>[basic.start.term]</a> describes the order in which block-scope objects with
static and thread storage duration are destroyed.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='footnote' id='footnote-91'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-91'>91)</a></div><p >The transfer from the condition of a <span class='texttt'>switch</span> statement to a
<span class='texttt'>case</span> label is considered a jump in this respect.</p></div><div class='footnote' id='footnote-92'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-92'>92)</a></div><p >The implementation must not introduce
any deadlock around execution of the initializer. Deadlocks might
still be caused by the program logic; the implementation need only
avoid deadlocks due to its own synchronization operations.</p></div></div></body></html>