<!DOCTYPE html><html lang='en'><head><title>[stmt.expand]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>8</a> Statements <a class='abbr_ref' href='./#stmt'>[stmt]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>8.7</a> Expansion statements <a class='abbr_ref'>[stmt.expand]</a></h2><div class='texpara'><a class='index' id=':statement,expansion'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/statements.tex#L790'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>Expansion statements specify repeated instantiations (<a href='temp.decls.general' title='13.7.1&emsp;General'>[temp.<span class='shy'></span>decls.<span class='shy'></span>general]</a>)
of their substatement<a class='hidden_link' href='#1.sentence-1'>.</a></div></div><div class='texpara'><div class='bnf' id='nt:expansion-statement'>
<a class='hidden_link' href='#nt:expansion-statement' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='nt:expansion-statement'><span id=':expansion-statement'>expansion-statement<span class='textnormal'>:</span></span></span></a><br><span id=':template'><span class='texttt'><span class='keyword'>template</span></span></span> <span id=':for'><span class='texttt'><span class='keyword'>for</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span>
        <a href='stmt.pre#nt:init-statement' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:init-statement'><span class='textsf'><i >init-statement</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='stmt.pre#nt:for-range-declaration' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:for-range-declaration'><span class='textsf'><i >for-range-declaration</i></span></span></a> <span class='terminal'><span class='operator'>:</span></span>
        <a href='#nt:expansion-initializer' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='ntref:expansion-initializer'><span class='textsf'><i >expansion-initializer</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span> <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement'><span class='textsf'><i >compound-statement</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:expansion-initializer'>
<a class='hidden_link' href='#nt:expansion-initializer' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='nt:expansion-initializer'><span id=':expansion-initializer'>expansion-initializer<span class='textnormal'>:</span></span></span></a><br><a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression'><span class='textsf'><i >expression</i></span></span></a><br><a href='#nt:expansion-init-list' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='ntref:expansion-init-list'><span class='textsf'><i >expansion-init-list</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:expansion-init-list'>
<a class='hidden_link' href='#nt:expansion-init-list' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='nt:expansion-init-list'><span id=':expansion-init-list'>expansion-init-list<span class='textnormal'>:</span></span></span></a><br><span class='terminal'><span class='curlybracket'>{</span></span> <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list'><span class='textsf'><i >expression-list</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='curlybracket'>}</span></span>
</div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/statements.tex#L812'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>The <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement_'><span class='textsf'><i >compound-statement</i></span></span></a> of an <a href='#nt:expansion-statement' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='ntref:expansion-statement'><span class='textsf'><i >expansion-statement</i></span></span></a>
is a control-flow-limited statement (<a href='stmt.label' title='8.2&emsp;Label'>[stmt.<span class='shy'></span>label]</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/statements.tex#L816'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>For an expression <span class='texttt'>E</span>, let the expressions
<span class='texttt'><i >begin-expr</i></span> and <span class='texttt'><i >end-expr</i></span> be determined as specified in <a href='stmt.ranged' title='8.6.5&emsp;The range-based for statement'>[stmt.<span class='shy'></span>ranged]</a><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>An expression is <a class='hidden_link' href='#def:expansion-iterable' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='def:expansion-iterable'><i >expansion-iterable</i></span></a> if it does not have array type and either
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div><span class='texttt'><i >begin-expr</i></span> and <span class='texttt'><i >end-expr</i></span> are of the form
<span class='texttt'>E<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> and <span class='texttt'>E<span class='operator'>.</span>end<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, or</li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div>argument-dependent lookups for <span class='texttt'>begin<span class='parenthesis'>(</span>E<span class='parenthesis'>)</span></span> and for <span class='texttt'>end<span class='parenthesis'>(</span>E<span class='parenthesis'>)</span></span>
each find at least one function or function template<a class='hidden_link' href='#3.sentence-2'>.</a></li></ul></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/statements.tex#L829'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>An expansion statement is
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.1'>(4.1)</a></div>an <a class='hidden_link' href='#def:expansion_statement,enumerating' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='def:expansion_statement,enumerating'><i >enumerating expansion statement</i></span></a> if its <a href='#nt:expansion-initializer' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='ntref:expansion-initializer_'><span class='textsf'><i >expansion-initializer</i></span></span></a>
is of the form <a href='#nt:expansion-init-list' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='ntref:expansion-init-list_'><span class='textsf'><i >expansion-init-list</i></span></span></a>;</li><li id='4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.2'>(4.2)</a></div>otherwise, an <a class='hidden_link' href='#def:expansion_statement,iterating' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='def:expansion_statement,iterating'><i >iterating expansion statement</i></span></a> if its <a href='#nt:expansion-initializer' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='ntref:expansion-initializer__'><span class='textsf'><i >expansion-initializer</i></span></span></a>
is an expansion-iterable expression;</li><li id='4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.3'>(4.3)</a></div>otherwise, a <a class='hidden_link' href='#def:expansion_statement,destructuring' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='def:expansion_statement,destructuring'><i >destructuring expansion statement</i></span></a><a class='hidden_link' href='#4.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/statements.tex#L842'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>An expansion statement <span class='math'><span class='mathalpha'>S</span></span> is equivalent to a <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement__'><span class='textsf'><i >compound-statement</i></span></span></a>
containing instantiations of the <a href='stmt.pre#nt:for-range-declaration' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:for-range-declaration_'><span class='textsf'><i >for-range-declaration</i></span></span></a>
(including its implied initialization),
together with the compound-statement of <span class='math'><span class='mathalpha'>S</span></span>, as follows:
<ul class='itemize'><li id='5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.1'>(5.1)</a></div>If <span class='math'><span class='mathalpha'>S</span></span> is an enumerating expansion statement, <span class='math'><span class='mathalpha'>S</span></span> is equivalent to:
<span class='codeblock'><span class='curlybracket'>{</span>
  <a href='stmt.pre#nt:init-statement' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:init-statement_'><span class='textsf'><i >init-statement</i></span></span></a>
  <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span></span></span></span></span></span></span>
  &#8942;
  <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span></span>
<span class='curlybracket'>}</span>
</span>
where <span class='math'><span class='mathalpha'>N</span></span> is the number of elements in the <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list_'><span class='textsf'><i >expression-list</i></span></span></a>,
<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span> is
<span class='codeblock'><span class='curlybracket'>{</span>
  <a href='stmt.pre#nt:for-range-declaration' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:for-range-declaration__'><span class='textsf'><i >for-range-declaration</i></span></span></a> <span class='operator'>=</span> <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span>;
  <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement___'><span class='textsf'><i >compound-statement</i></span></span></a>
<span class='curlybracket'>}</span>
</span>
and <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.026em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.026em;">E</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span> is the <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span></span></span></span> element of the <a href='expr.post.general#nt:expression-list' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:expression-list__'><span class='textsf'><i >expression-list</i></span></span></a>.</li><li id='5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.2'>(5.2)</a></div>Otherwise, if <span class='math'><span class='mathalpha'>S</span></span> is an iterating expansion statement, <span class='math'><span class='mathalpha'>S</span></span> is equivalent to:
<span class='codeblock'><span class='curlybracket'>{</span>
  <a href='stmt.pre#nt:init-statement' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:init-statement__'><span class='textsf'><i >init-statement</i></span></span></a>
  <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> <i >range</i> <span class='operator'>=</span> <a href='#nt:expansion-initializer' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='ntref:expansion-initializer___'><span class='textsf'><i >expansion-initializer</i></span></span></a>;
  <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> <i >begin</i> <span class='operator'>=</span> <i >begin-expr</i>;     <span class='comment'>// see <a href='stmt.ranged' title='8.6.5&emsp;The range-based for statement'>[stmt.<span class='shy'></span>ranged]</a></span>
  <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> <i >end</i> <span class='operator'>=</span> <i >end-expr</i>;         <span class='comment'>// see <a href='stmt.ranged' title='8.6.5&emsp;The range-based for statement'>[stmt.<span class='shy'></span>ranged]</a></span>

  <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span></span></span></span></span></span></span>
  &#8942;
  <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span></span>
<span class='curlybracket'>}</span>
</span>
where <span class='math'><span class='mathalpha'>N</span></span> is the result of evaluating the expression
<span class='codeblock'><span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='keyword'>consteval</span> <span class='curlybracket'>{</span>
  std<span class='operator'>::</span>ptrdiff_t result <span class='operator'>=</span> <span class='literal'>0</span>;
  <span class='keyword'>for</span> <span class='parenthesis'>(</span><span class='keyword'>auto</span> i <span class='operator'>=</span> <i >begin</i>; i <span class='operator'>!</span><span class='operator'>=</span> <i >end</i>; <span class='operator'>+</span><span class='operator'>+</span>i, <span class='operator'>+</span><span class='operator'>+</span>result<span class='parenthesis'>)</span>;
  <span class='keyword'>return</span> result;                                <span class='comment'>// distance from <span class='tcode_in_codeblock'><i >begin</i></span> to <span class='tcode_in_codeblock'><i >end</i></span></span>
<span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>
</span>
and <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span> is
<span class='codeblock'><span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> <i >iter</i> <span class='operator'>=</span> <i >begin</i> <span class='operator'>+</span> i;
  <a href='stmt.pre#nt:for-range-declaration' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:for-range-declaration___'><span class='textsf'><i >for-range-declaration</i></span></span></a> <span class='operator'>=</span> <span class='operator'>*</span><i >iter</i>;
  <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement____'><span class='textsf'><i >compound-statement</i></span></span></a>
<span class='curlybracket'>}</span>
</span> <div class='texpara'><div id='5.2.sentence-2' class='sentence'>
The variables <span class='texttt'><i >range</i></span>, <span class='texttt'><i >begin</i></span>, <span class='texttt'><i >end</i></span>, and <span class='texttt'><i >iter</i></span>
are defined for exposition only<a class='hidden_link' href='#5.2.sentence-2'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='5.2.sentence-3' class='sentence'>The instantiation is ill-formed if <span class='texttt'><i >range</i></span>
is not a constant expression (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)<a class='hidden_link' href='#5.2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.3'>(5.3)</a></div>Otherwise, <span class='math'><span class='mathalpha'>S</span></span> is a destructuring expansion statement and <span class='math'><span class='mathalpha'>S</span></span> is equivalent to:
<span class='codeblock'><span class='curlybracket'>{</span>
  <a href='stmt.pre#nt:init-statement' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:init-statement___'><span class='textsf'><i >init-statement</i></span></span></a>
  <span id=':constexpr'><span class='tcode_in_codeblock'><span class='keyword'>constexpr</span></span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='squarebracket'>[</span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">u</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span></span></span></span></span></span></span>, <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">u</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span></span>, <span class='math'>&hellip;</span>, <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">u</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span></span><span class='squarebracket'>]</span> <span class='operator'>=</span> <a href='#nt:expansion-initializer' title='8.7&emsp;Expansion statements&emsp;[stmt.expand]'><span id='ntref:expansion-initializer____'><span class='textsf'><i >expansion-initializer</i></span></span></a>;
  <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span></span></span></span></span></span></span>
  &#8942;
  <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span></span>
<span class='curlybracket'>}</span>
</span>
where <span class='math'><span class='mathalpha'>N</span></span> is the structured binding size of the type of the expansion-initializer and <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.032em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.032em;">S</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span> is
<span class='codeblock'><span class='curlybracket'>{</span>
  <a href='stmt.pre#nt:for-range-declaration' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:for-range-declaration____'><span class='textsf'><i >for-range-declaration</i></span></span></a> <span class='operator'>=</span> <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">u</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span></span></span>;
  <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement_____'><span class='textsf'><i >compound-statement</i></span></span></a>
<span class='curlybracket'>}</span>
</span> <div class='texpara'><div id='5.3.sentence-2' class='sentence'>
The keyword <span id=':constexpr_'><span class='texttt'><span class='keyword'>constexpr</span></span></span> is present in the declaration
of <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">u</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">u</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-mo MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.372em;">…</span></span><span class="mjx-texatom MJXc-space1"><span class="mjx-mrow"></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span><span class="mjx-msubsup MJXc-space1"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">u</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span></span> if and only if
<span id=':constexpr__'><span class='texttt'><span class='keyword'>constexpr</span></span></span> is one of the <a href='dcl.spec.general#nt:decl-specifier' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier'><span class='textsf'><i >decl-specifier</i></span></span></a><i >s</i>
of the <a href='dcl.spec.general#nt:decl-specifier-seq' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier-seq'><span class='textsf'><i >decl-specifier-seq</i></span></span></a>
of the <a href='stmt.pre#nt:for-range-declaration' title='8.1&emsp;Preamble&emsp;[stmt.pre]'><span id='ntref:for-range-declaration_____'><span class='textsf'><i >for-range-declaration</i></span></span></a><a class='hidden_link' href='#5.3.sentence-2'>.</a></div></div></li></ul></div></div></div><div class='para nonNormativeOnly' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/statements.tex#L930'>#</a></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>consteval</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>auto</span> <span class='keyword'>const</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Containers<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> result <span class='operator'>=</span> <span class='literal'>0</span>;
  <span class='keyword'>template</span> <span class='keyword'>for</span> <span class='parenthesis'>(</span><span class='keyword'>auto</span> <span class='keyword'>const</span><span class='operator'>&amp;</span> c <span class='operator'>:</span> <span class='curlybracket'>{</span>Containers<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>      <span class='comment'>// OK, enumerating expansion statement</span>
    result <span class='operator'>+</span><span class='operator'>=</span> c<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span>;
  <span class='curlybracket'>}</span>
  <span class='keyword'>return</span> result;
<span class='curlybracket'>}</span>
<span class='keyword'>constexpr</span> <span class='keyword'>int</span> c1<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span><span class='curlybracket'>}</span>;
<span class='keyword'>constexpr</span> <span class='keyword'>int</span> c2<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>4</span>, <span class='literal'>3</span>, <span class='literal'>2</span>, <span class='literal'>1</span><span class='curlybracket'>}</span>;
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>f<span class='parenthesis'>(</span>c1, c2<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>5</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/statements.tex#L946'>#</a></div><div class='texpara'><div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>consteval</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>constexpr</span> std<span class='operator'>::</span>array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='literal'>3</span><span class='anglebracket'>&gt;</span> arr <span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span><span class='curlybracket'>}</span>;
  <span class='keyword'>int</span> result <span class='operator'>=</span> <span class='literal'>0</span>;
  <span class='keyword'>template</span> <span class='keyword'>for</span> <span class='parenthesis'>(</span><span class='keyword'>constexpr</span> <span class='keyword'>int</span> s <span class='operator'>:</span> arr<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>                <span class='comment'>// OK, iterating expansion statement</span>
    result <span class='operator'>+</span><span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='squarebracket'>[</span>s<span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
  <span class='keyword'>return</span> result;
<span class='curlybracket'>}</span>
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>6</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/statements.tex#L961'>#</a></div><div class='texpara'><div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i;
  <span class='keyword'>short</span> s;
<span class='curlybracket'>}</span>;

<span class='keyword'>consteval</span> <span class='keyword'>long</span> f<span class='parenthesis'>(</span>S s<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>long</span> result <span class='operator'>=</span> <span class='literal'>0</span>;
  <span class='keyword'>template</span> <span class='keyword'>for</span> <span class='parenthesis'>(</span><span class='keyword'>auto</span> x <span class='operator'>:</span> s<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>                           <span class='comment'>// OK, destructuring expansion statement</span>
    result <span class='operator'>+</span><span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
  <span class='keyword'>return</span> result;
<span class='curlybracket'>}</span>
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>f<span class='parenthesis'>(</span>S<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>short</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'></div></div></div></body></html>