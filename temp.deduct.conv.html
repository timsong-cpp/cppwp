<!DOCTYPE html><html lang='en'><head><title>[temp.deduct.conv]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>13</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>13.10</a> Function template specializations <a class='abbr_ref' href='temp.fct.spec#temp.deduct.conv'>[temp.fct.spec]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>13.10.3</a> Template argument deduction <a class='abbr_ref' href='temp.deduct#conv'>[temp.deduct]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>13.10.3.4</a> Deducing conversion function template arguments <a class='abbr_ref'>[temp.deduct.conv]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/templates.tex#L8493'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>Template argument deduction is done by comparing the return type of
the
conversion function template
(call it
<span class='texttt'>P</span>)
with the type specified by the <a href='class.conv.fct#nt:conversion-type-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-type-id'><span class='textsf'><i >conversion-type-id</i></span></span></a> of the
<a href='class.conv.fct#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id'><span class='textsf'><i >conversion-function-id</i></span></span></a> being looked up
(call it <span class='texttt'>A</span>) as described in <a href='temp.deduct.type' title='13.10.3.6&emsp;Deducing template arguments from a type'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>type]</a><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>If the <a href='class.conv.fct#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id_'><span class='textsf'><i >conversion-function-id</i></span></span></a> is constructed during
overload resolution (<a href='over.match.funcs' title='12.2.2&emsp;Candidate functions and argument lists'>[over.<span class='shy'></span>match.<span class='shy'></span>funcs]</a>),
the rules in the remainder of this subclause apply<a class='hidden_link' href='#1.sentence-2'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/templates.tex#L8506'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>If <span class='texttt'>P</span> is a reference type, the type referred to by <span class='texttt'>P</span> is used in place
of <span class='texttt'>P</span> for type deduction and for any further references to or transformations of
<span class='texttt'>P</span> in the remainder of this subclause<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/templates.tex#L8511'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is not a reference type:
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div>If
<span class='texttt'>P</span>
is an array type, the pointer type produced by the
<a href='conv.array' title='7.3.3&emsp;Array-to-pointer conversion&emsp;[conv.array]'>array-to-pointer standard conversion</a> is used in place of
<span class='texttt'>P</span>
for type
deduction; otherwise,</li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div>If
<span class='texttt'>P</span>
is a function type, the pointer type produced by the
<a href='conv.func' title='7.3.4&emsp;Function-to-pointer conversion&emsp;[conv.func]'>function-to-pointer standard conversion</a> is used in place of
<span class='texttt'>P</span>
for
type deduction; otherwise,</li><li id='3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.3'>(3.3)</a></div>If
<span class='texttt'>P</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>P</span>'s
type are ignored for type deduction<a class='hidden_link' href='#3.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/templates.tex#L8540'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>A</span>'s
type are ignored for type deduction<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>If
<span class='texttt'>A</span>
is a
reference type, the type referred to by
<span class='texttt'>A</span>
is used for type deduction<a class='hidden_link' href='#4.sentence-2'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/templates.tex#L8553'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>In general, the deduction process attempts to find template argument
values that will make the deduced
<span class='texttt'>A</span>
identical to
<span class='texttt'>A</span><a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>However, certain attributes of <span class='texttt'>A</span> may be ignored:
<ul class='itemize'><li id='5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.1'>(5.1)</a></div><div class='texpara'><div id='5.1.sentence-1' class='sentence'>If the original <span class='texttt'>A</span> is a reference type,
any cv-qualifiers of <span class='texttt'>A</span>
(i.e., the type referred to by the reference)<a class='hidden_link' href='#5.1.sentence-1'>.</a></div></div></li><li id='5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.2'>(5.2)</a></div><div class='texpara'><div id='5.2.sentence-1' class='sentence'>If the original <span class='texttt'>A</span> is
a function pointer or pointer-to-member-function type
with a potentially-throwing exception specification (<a href='except.spec' title='14.5&emsp;Exception specifications'>[except.<span class='shy'></span>spec]</a>),
the exception specification<a class='hidden_link' href='#5.2.sentence-1'>.</a></div></div></li><li id='5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.3'>(5.3)</a></div><div class='texpara'><div id='5.3.sentence-1' class='sentence'>Any cv-qualifiers in <span class='texttt'>A</span>
that can be restored by a qualification conversion<a class='hidden_link' href='#5.3.sentence-1'>.</a></div></div></li></ul></div> <div id='5.sentence-3' class='sentence'>
These attributes are ignored only if type deduction would
otherwise fail<a class='hidden_link' href='#5.sentence-3'>.</a></div> <div id='5.sentence-4' class='sentence'>If ignoring them allows more than one possible deduced
<span class='texttt'>A</span>,
the type deduction fails<a class='hidden_link' href='#5.sentence-4'>.</a></div></div></div></div></body></html>