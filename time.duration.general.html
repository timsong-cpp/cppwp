<!DOCTYPE html><html lang='en'><head><title>[time.duration.general]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>29</a> Time library <a class='abbr_ref' href='./#time'>[time]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>29.5</a> Class template <span class='texttt'>duration</span> <a class='abbr_ref' href='time.duration#general'>[time.duration]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>29.5.1</a> General <a class='abbr_ref'>[time.duration.general]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/time.tex#L1238'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>A <span class='texttt'>duration</span> type measures time between two points in time (<span class='texttt'>time_<span class='shy'></span>point</span>s)<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>A <span class='texttt'>duration</span> has a representation which holds a count of ticks and a tick period<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>The tick period is the amount of time which occurs from one tick to the next, in units
of seconds<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>It is expressed as a rational constant using the template <span class='texttt'>ratio</span><a class='hidden_link' href='#1.sentence-4'>.</a></div></div><div class='texpara'><span id='lib:duration'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:duration'>ðŸ”—</a></div><span class='codeblock'><span class='keyword'>namespace</span> std<span class='operator'>::</span>chrono <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Rep, <span class='keyword'>class</span> Period <span class='operator'>=</span> ratio<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> duration <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> rep    <span class='operator'>=</span> Rep;
    <span class='keyword'>using</span> period <span class='operator'>=</span> <span class='keyword'>typename</span> Period<span class='operator'>::</span>type;

  <span class='keyword'>private</span><span class='operator'>:</span>
    rep rep_;       <span class='comment'>// <i >exposition only</i></span>

  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='comment'>// <a href='time.duration.cons' title='29.5.2&emsp;Constructors'>[time.<span class='shy'></span>duration.<span class='shy'></span>cons]</a>, construct/copy/destroy</span>
    <span class='keyword'>constexpr</span> duration<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Rep2<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> duration<span class='parenthesis'>(</span><span class='keyword'>const</span> Rep2<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Rep2, <span class='keyword'>class</span> Period2<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> duration<span class='parenthesis'>(</span><span class='keyword'>const</span> duration<span class='anglebracket'>&lt;</span>Rep2, Period2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> d<span class='parenthesis'>)</span>;
    <span class='operator'>~</span>duration<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
    duration<span class='parenthesis'>(</span><span class='keyword'>const</span> duration<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
    duration<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> duration<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;

    <span class='comment'>// <a href='time.duration.observer' title='29.5.3&emsp;Observer'>[time.<span class='shy'></span>duration.<span class='shy'></span>observer]</a>, observer</span>
    <span class='keyword'>constexpr</span> rep count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;

    <span class='comment'>// <a href='time.duration.arithmetic' title='29.5.4&emsp;Arithmetic'>[time.<span class='shy'></span>duration.<span class='shy'></span>arithmetic]</a>, arithmetic</span>
    <span class='keyword'>constexpr</span> common_type_t<span class='anglebracket'>&lt;</span>duration<span class='anglebracket'>&gt;</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    <span class='keyword'>constexpr</span> common_type_t<span class='anglebracket'>&lt;</span>duration<span class='anglebracket'>&gt;</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    <span class='keyword'>constexpr</span> duration<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> duration  <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> duration<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> duration  <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;

    <span class='keyword'>constexpr</span> duration<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> duration<span class='operator'>&amp;</span> d<span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> duration<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> duration<span class='operator'>&amp;</span> d<span class='parenthesis'>)</span>;

    <span class='keyword'>constexpr</span> duration<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> rep<span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> duration<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>/</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> rep<span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> duration<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>%</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> rep<span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> duration<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>%</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> duration<span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='time.duration.special' title='29.5.5&emsp;Special values'>[time.<span class='shy'></span>duration.<span class='shy'></span>special]</a>, special values</span>
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> duration zero<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> duration min<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> duration max<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/time.tex#L1294'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'><span class='texttt'>Rep</span> shall be an arithmetic type or a class emulating an arithmetic type<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>If <span class='texttt'>duration</span> is instantiated with a <span class='texttt'>duration</span> type as the argument for the template
parameter <span class='texttt'>Rep</span>, the program is ill-formed<a class='hidden_link' href='#2.sentence-2'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/time.tex#L1299'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>If <span class='texttt'>Period</span> is not a specialization of <span class='texttt'>ratio</span>, the program is ill-formed<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>If <span class='texttt'>Period<span class='operator'>&#x200b;::&#x200b;</span>num</span> is not positive, the program is ill-formed<a class='hidden_link' href='#3.sentence-2'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/time.tex#L1303'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>Members of <span class='texttt'>duration</span> do not throw exceptions other than
those thrown by the indicated operations on their representations<a class='hidden_link' href='#4.sentence-1'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/time.tex#L1307'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>The defaulted copy constructor of <span class='texttt'>duration</span> shall be a
constexpr function if and only if the required initialization
of the member <span class='texttt'>rep_<span class='shy'></span></span> for copy and move, respectively, would
be constexpr-suitable (<a href='dcl.constexpr' title='9.2.6&emsp;The constexpr and consteval specifiers'>[dcl.<span class='shy'></span>constexpr]</a>)<a class='hidden_link' href='#5.sentence-1'>.</a></div></div></div><div class='para nonNormativeOnly' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/time.tex#L1313'>#</a></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'>duration<span class='anglebracket'>&lt;</span><span class='keyword'>long</span>, ratio<span class='anglebracket'>&lt;</span><span class='literal'>60</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> d0;       <span class='comment'>// holds a count of minutes using a <span class='tcode_in_codeblock'>long</span></span>
duration<span class='anglebracket'>&lt;</span><span class='keyword'>long</span> <span class='keyword'>long</span>, milli<span class='anglebracket'>&gt;</span> d1;      <span class='comment'>// holds a count of milliseconds using a <span class='tcode_in_codeblock'>long long</span></span>
duration<span class='anglebracket'>&lt;</span><span class='keyword'>double</span>, ratio<span class='anglebracket'>&lt;</span><span class='literal'>1</span>, <span class='literal'>30</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>  d2; <span class='comment'>// holds a count with a tick period of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mfrac"><span class="mjx-box MJXc-stacked" style="width: 0.849em; padding: 0px 0.12em;"><span class="mjx-numerator" style="font-size: 70.7%; width: 1.2em; top: -1.372em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span><span class="mjx-denominator" style="font-size: 70.7%; width: 1.2em; bottom: -0.687em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">30</span></span></span><span style="border-bottom: 1.3px solid; top: -0.296em; width: 0.849em;" class="mjx-line"></span></span><span style="height: 1.456em; vertical-align: -0.486em;" class="mjx-vsize"></span></span></span></span></span> of a second</span>
                                    <span class='comment'>// (30 Hz) using a <span class='tcode_in_codeblock'>double</span></span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>