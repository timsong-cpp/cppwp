<!DOCTYPE html><html lang='en'><head><title>[dcl.typedef]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>9</a> Declarations <a class='abbr_ref' href='./#dcl.dcl'>[dcl.dcl]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>9.1</a> Specifiers <a class='abbr_ref' href='dcl.spec#dcl.typedef'>[dcl.spec]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>9.1.3</a> The <span class='texttt'>typedef</span> specifier <a class='abbr_ref'>[dcl.typedef]</a></h3><span class='indexparent'><a class='index' id=':specifier,typedef'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/declarations.tex#L542'>#</a></div><div id='1.sentence-1' class='sentence'>Declarations containing the <i ><a href='dcl.spec#nt:decl-specifier'>decl-specifier</a></i> <span class='texttt'><span class='keyword'>typedef</span></span>
declare identifiers that can be used later for naming
<a href='basic.fundamental'>fundamental</a> or <a href='basic.compound'>compound</a>
types<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>The <span class='texttt'><span class='keyword'>typedef</span></span> specifier shall not be
combined in a <i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i> with any other kind of
specifier except a <i ><a href='dcl.type#nt:defining-type-specifier'>defining-type-specifier</a></i>, and it shall not be used in the
<i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i> of a
<i ><a href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a></i> nor in the
<i ><a href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a></i> of a
<i ><a href='dcl.fct.def.general#nt:function-definition'>function-definition</a></i> (<a href='dcl.fct.def'>[dcl.fct.def]</a>)<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>If a <span class='texttt'><span class='keyword'>typedef</span></span> specifier appears in a declaration without a <i ><a href='dcl.decl#nt:declarator'>declarator</a></i>,
the program is ill-formed<a class='hidden_link' href='#1.sentence-3'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:typedef-name' id='nt:typedef-name'>typedef-name:</a>
&#9;<i ><a href='lex.name#nt:identifier'>identifier</a></i>
&#9;<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
</pre><div id='1.sentence-4' class='sentence'>A name declared with the <span class='texttt'><span class='keyword'>typedef</span></span> specifier becomes a
<i ><a href='#nt:typedef-name'>typedef-name</a></i><a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>A <i ><a href='#nt:typedef-name'>typedef-name</a></i> names
the type associated with the <i ><a href='lex.name#nt:identifier'>identifier</a></i> (<a href='dcl.decl'>[dcl.decl]</a>)
or <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i> (<a href='temp'>[temp]</a>);
<span class='indexparent'><a class='index' id=':declaration,typedef_as_type'></a></span><span class='indexparent'><a class='index' id=':equivalence,type'></a></span><span class='indexparent'><a class='index' id=':synonym,type_name_as'></a></span>a <i ><a href='#nt:typedef-name'>typedef-name</a></i> is thus a synonym for another type<a class='hidden_link' href='#1.sentence-5'>.</a></div> <div id='1.sentence-6' class='sentence'>A
<i ><a href='#nt:typedef-name'>typedef-name</a></i> does not introduce a new type the way a class
declaration (<a href='class.name'>[class.name]</a>) or enum declaration (<a href='dcl.enum'>[dcl.enum]</a>) does<a class='hidden_link' href='#1.sentence-6'>.</a></div> <div id='1.example-1' class='example'>[&nbsp;<a class='example_link' href='#1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='1.sentence-7' class='sentence'>After
<pre class='codeblock'>
<span class='keyword'>typedef</span> <span class='keyword'>int</span> MILES, <span class='operator'>*</span>KLICKSP;
</pre>
the constructions
<pre class='codeblock'>
MILES distance;
<span class='keyword'>extern</span> KLICKSP metricp;
</pre>
are all correct declarations; the type of <span class='texttt'>distance</span> is
<span class='texttt'><span class='keyword'>int</span></span> and that of <span class='texttt'>metricp</span> is “pointer to <span class='texttt'><span class='keyword'>int</span></span>”<a class='hidden_link' href='#1.sentence-7'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/declarations.tex#L587'>#</a></div><div id='2.sentence-1' class='sentence'>A <i ><a href='#nt:typedef-name'>typedef-name</a></i> can also be introduced by an
<i ><a href='dcl.dcl#nt:alias-declaration'>alias-declaration</a></i><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>The <i ><a href='lex.name#nt:identifier'>identifier</a></i> following the
<span class='texttt'><span class='keyword'>using</span></span> keyword becomes a <i ><a href='#nt:typedef-name'>typedef-name</a></i>
and the optional <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> following the
<i ><a href='lex.name#nt:identifier'>identifier</a></i> appertains to that <i ><a href='#nt:typedef-name'>typedef-name</a></i><a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>Such a <i ><a href='#nt:typedef-name'>typedef-name</a></i> has the same
semantics as if it were introduced by the <span class='texttt'><span class='keyword'>typedef</span></span> specifier<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>In
particular, it does not define a new type<a class='hidden_link' href='#2.sentence-4'>.</a></div> <div id='2.example-1' class='example'>[&nbsp;<a class='example_link' href='#2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>using</span> handler_t <span class='operator'>=</span> <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>extern</span> handler_t ignore;
<span class='keyword'>extern</span> <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span>ignore<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;         <span class='comment'>// redeclare <span class='tcode_in_codeblock'>ignore</span></span>
<span class='keyword'>using</span> cell <span class='operator'>=</span> pair<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='operator'>*</span>, cell<span class='operator'>*</span><span class='anglebracket'>&gt;</span>;    <span class='comment'>// ill-formed</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='2.sentence-5' class='sentence'>
The <i ><a href='dcl.type#nt:defining-type-specifier-seq'>defining-type-specifier-seq</a></i>
of the <i ><a href='dcl.name#nt:defining-type-id'>defining-type-id</a></i> shall not define
a class or enumeration if the <i ><a href='dcl.dcl#nt:alias-declaration'>alias-declaration</a></i>
is the <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i> of a <i ><a href='temp#nt:template-declaration'>template-declaration</a></i><a class='hidden_link' href='#2.sentence-5'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/declarations.tex#L609'>#</a></div><div id='3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':redefinition,typedef'></a></span>In a given non-class scope, a <span class='texttt'><span class='keyword'>typedef</span></span> specifier can be used to
redeclare the name of any type declared in that scope to refer to the
type to which it already refers<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.example-1' class='example'>[&nbsp;<a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>typedef</span> <span class='keyword'>struct</span> s <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span> s;
<span class='keyword'>typedef</span> <span class='keyword'>int</span> I;
<span class='keyword'>typedef</span> <span class='keyword'>int</span> I;
<span class='keyword'>typedef</span> I I;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/declarations.tex#L623'>#</a></div><div id='4.sentence-1' class='sentence'>In a given class scope, a <span class='texttt'><span class='keyword'>typedef</span></span> specifier can be used to
redeclare any <i ><a href='class#nt:class-name'>class-name</a></i> declared in that scope that is not
also a <i ><a href='#nt:typedef-name'>typedef-name</a></i> to refer to the type to which it already
refers<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.example-1' class='example'>[&nbsp;<a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> A;       <span class='comment'>// OK</span>
  <span class='keyword'>typedef</span> <span class='keyword'>struct</span> B B;           <span class='comment'>// OK</span>
  <span class='keyword'>typedef</span> A A;                  <span class='comment'>// error</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/declarations.tex#L638'>#</a></div><div id='5.sentence-1' class='sentence'>If a <span class='texttt'><span class='keyword'>typedef</span></span> specifier is used to redeclare in a given scope an
entity that can be referenced using an <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i>,
the entity can continue to be referenced by an
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> or as an enumeration or class name
in an enumeration or class definition respectively<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.example-1' class='example'>[&nbsp;<a class='example_link' href='#5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> S;
<span class='keyword'>typedef</span> <span class='keyword'>struct</span> S S;
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> S<span class='operator'>*</span> p;                  <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                   <span class='comment'>// OK</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/declarations.tex#L654'>#</a></div><div id='6.sentence-1' class='sentence'>In a given scope, a <span class='texttt'><span class='keyword'>typedef</span></span> specifier shall not be used to
redeclare the name of any type declared in that scope to refer to a
different type<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.example-1' class='example'>[&nbsp;<a class='example_link' href='#6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>class</span> complex <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>typedef</span> <span class='keyword'>int</span> complex;            <span class='comment'>// error: redefinition</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/declarations.tex#L665'>#</a></div><div id='7.sentence-1' class='sentence'>Similarly, in a given scope, a class or enumeration shall not be
declared with the same name as a <i ><a href='#nt:typedef-name'>typedef-name</a></i> that is
declared in that scope and refers to a type other than the class or
enumeration itself<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.example-1' class='example'>[&nbsp;<a class='example_link' href='#7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>typedef</span> <span class='keyword'>int</span> complex;
<span class='keyword'>class</span> complex <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;    <span class='comment'>// error: redefinition</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/declarations.tex#L677'>#</a></div><div id='8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':class_name,typedef'></a></span>A <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i> is only a <i ><a href='#nt:typedef-name'>typedef-name</a></i>
if its <i ><a href='temp.names#nt:template-name'>template-name</a></i> names
an alias template or a template <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.note-1' class='note'>[&nbsp;<a class='note_link' href='#8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='8.sentence-2' class='sentence'>A <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i> that names a class template specialization
is a <i ><a href='class#nt:class-name'>class-name</a></i> (<a href='class.name'>[class.name]</a>)<a class='hidden_link' href='#8.sentence-2'>.</a></div> <div id='8.sentence-3' class='sentence'>If a <i ><a href='#nt:typedef-name'>typedef-name</a></i> is used to identify the subject of an
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i>, a class
definition (<a href='class'>[class]</a>), a constructor
declaration (<a href='class.ctor'>[class.ctor]</a>), or a destructor
declaration (<a href='class.dtor'>[class.dtor]</a>), the program is ill-formed<a class='hidden_link' href='#8.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='8.example-1' class='example'>[&nbsp;<a class='example_link' href='#8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='operator'>~</span>S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>typedef</span> <span class='keyword'>struct</span> S T;

S a <span class='operator'>=</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                      <span class='comment'>// OK</span>
<span class='keyword'>struct</span> T <span class='operator'>*</span> p;                   <span class='comment'>// error</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/declarations.tex#L705'>#</a></div><div id='9.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':class_name,typedef_'></a></span><span class='indexparent'><a class='index' id=':enum_name,typedef'></a></span><span class='indexparent'><a class='index' id=':class,unnamed'></a></span>If the typedef declaration defines an unnamed class (or enum), the first
<i ><a href='#nt:typedef-name'>typedef-name</a></i> declared by the declaration to be that class
type (or enum type) is used to denote the class type (or enum type) for
linkage purposes only (<a href='basic.link'>[basic.link]</a>)<a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='9.note-1' class='note'>[&nbsp;<a class='note_link' href='#9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='9.sentence-2' class='sentence'>A typedef declaration involving a <i ><a href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a></i>
does not itself define the associated closure type,
and so the closure type is not given a name for linkage purposes<a class='hidden_link' href='#9.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='9.example-1' class='example'>[&nbsp;<a class='example_link' href='#9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>typedef</span> <span class='keyword'>struct</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> <span class='operator'>*</span>ps, S;      <span class='comment'>// <span class='tcode_in_codeblock'>S</span> is the class name for linkage purposes</span>
<span class='keyword'>typedef</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span> C;       <span class='comment'>// the closure type has no name for linkage purposes</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/declarations.tex#L725'>#</a></div><div id='10.sentence-1' class='sentence'>An unnamed class with a typedef name for linkage purposes shall not
<ul class='itemize'><li id='10.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#10.1'>(10.1)</a></div>declare any members
  other than non-static data members, member enumerations, or member classes,</li><li id='10.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#10.2'>(10.2)</a></div>have any base classes or default member initializers, or</li><li id='10.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#10.3'>(10.3)</a></div>contain a <i ><a href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a></i>,</li></ul>
and all member classes shall also satisfy these requirements (recursively)<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.example-1' class='example'>[&nbsp;<a class='example_link' href='#10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>typedef</span> <span class='keyword'>struct</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='curlybracket'>}</span> X;                            <span class='comment'>// error: struct with typedef name for linkage has member functions</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div></body></html>