<!DOCTYPE html><html lang='en'><head><title>[diff.cpp14]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='annexnum' style='min-width:50pt'>Annex C&emsp;(informative)</a> Compatibility <a class='abbr_ref' href='./#diff'>[diff]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>C.4</a> C++ and ISO C++ 2014 <a class='abbr_ref'>[diff.cpp14]</a></h2><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:80pt'>C.4.1</a> General <a class='abbr_ref' href='diff.cpp14.general'>[diff.cpp14.general]</a></h3><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1337'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'><a class='index' id=':summary,compatibility_with_ISO_C++_2014'></a>Subclause [diff.<span class='shy'></span>cpp14] lists the differences between C++ and
ISO C++ 2014 (ISO/IEC 14882:2014, <i >Programming Languages — C++</i>),
in addition to those listed above,
by the chapters of this document<a class='hidden_link' href='#general-1.sentence-1'>.</a></div></div></div></div><div id='lex' class='section'><h3 ><a class='secnum' href='#lex' style='min-width:80pt'>C.4.2</a> <a href='lex' title='5&emsp;Lexical conventions'>[lex]</a>: lexical conventions <a class='abbr_ref' href='diff.cpp14.lex'>[diff.cpp14.lex]</a></h3><div class='para' id='lex-1'><div class='marginalizedparent'><a class='marginalized' href='#lex-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1346'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.phases'>[lex.<span class='shy'></span>phases]</a>
<a class='index' id=':trigraph_sequence'></a><br/> <div id='lex-1.sentence-1' class='sentence'><b>Change:</b> Removal of trigraph support as a required feature<a class='hidden_link' href='#lex-1.sentence-1'>.</a></div> <br/> <div id='lex-1.sentence-2' class='sentence'><b>Rationale:</b> Prevents accidental uses of trigraphs in non-raw string literals and comments<a class='hidden_link' href='#lex-1.sentence-2'>.</a></div> <br/> <div id='lex-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code that uses trigraphs may not be valid or may have different
semantics in this revision of C++<a class='hidden_link' href='#lex-1.sentence-3'>.</a></div> <div id='lex-1.sentence-4' class='sentence'>Implementations may choose to
translate trigraphs as specified in C++ 2014 if they appear outside of a raw
string literal, as part of the <a class='index' id=':mapping_input_source_file_characters_to_translation_character_set'></a>implementation-defined mapping from input source file characters to
the translation character set<a class='hidden_link' href='#lex-1.sentence-4'>.</a></div></div></div><div class='para' id='lex-2'><div class='marginalizedparent'><a class='marginalized' href='#lex-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1360'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.ppnumber'>[lex.<span class='shy'></span>ppnumber]</a>
<br/> <div id='lex-2.sentence-1' class='sentence'><b>Change:</b> <a href='lex.ppnumber#nt:pp-number' title='5.9&emsp;Preprocessing numbers&emsp;[lex.ppnumber]'><span id='ntref:pp-number'><span class='textsf'><i >pp-number</i></span></span></a> can contain <span class='texttt'>p</span> <a href='lex.fcon#nt:sign' title='5.13.4&emsp;Floating-point literals&emsp;[lex.fcon]'><span id='ntref:sign'><span class='textsf'><i >sign</i></span></span></a> and
<span class='texttt'>P</span> <a href='lex.fcon#nt:sign' title='5.13.4&emsp;Floating-point literals&emsp;[lex.fcon]'><span id='ntref:sign_'><span class='textsf'><i >sign</i></span></span></a><a class='hidden_link' href='#lex-2.sentence-1'>.</a></div> <br/> <div id='lex-2.sentence-2' class='sentence'><b>Rationale:</b> Necessary to enable <a href='lex.fcon#nt:hexadecimal-floating-point-literal' title='5.13.4&emsp;Floating-point literals&emsp;[lex.fcon]'><span id='ntref:hexadecimal-floating-point-literal'><span class='textsf'><i >hexadecimal-floating-point-literal</i></span></span></a><i >s</i><a class='hidden_link' href='#lex-2.sentence-2'>.</a></div> <br/> <div id='lex-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile or produce different results in
this revision of C++<a class='hidden_link' href='#lex-2.sentence-3'>.</a></div> <div id='lex-2.sentence-4' class='sentence'>Specifically, character sequences like <span class='texttt'><span class='literal'>0p+0</span></span>
and <span class='texttt'><span class='literal'>0e1_<span class='shy'></span>p+0</span></span> are three separate tokens each in C++ 2014, but one single token
in this revision of C++<a class='hidden_link' href='#lex-2.sentence-4'>.</a></div> <div id='lex-2.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='preprocessordirective'>#define</span> F<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> b <span class='preprocessordirective'>#</span><span class='preprocessordirective'>#</span> a
<span class='keyword'>int</span> b0p <span class='operator'>=</span> F<span class='parenthesis'>(</span><span class='literal'>0p+0</span><span class='parenthesis'>)</span>;  <span class='comment'>// ill-formed; equivalent to “<span class='tcode_in_codeblock'>int b0p = b0p + 0;</span>'' in C++ 2014</span>
</span></div></div></div></div><div id='expr' class='section'><h3 ><a class='secnum' href='#expr' style='min-width:80pt'>C.4.3</a> <a href='expr' title='7&emsp;Expressions'>[expr]</a>: expressions <a class='abbr_ref' href='diff.cpp14.expr'>[diff.cpp14.expr]</a></h3><div class='para' id='expr-1'><div class='marginalizedparent'><a class='marginalized' href='#expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1379'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='expr.post.incr'>[expr.<span class='shy'></span>post.<span class='shy'></span>incr]</a> and <a href='expr.pre.incr'>[expr.<span class='shy'></span>pre.<span class='shy'></span>incr]</a>
<br/> <div id='expr-1.sentence-1' class='sentence'><b>Change:</b> Remove increment operator with <span class='texttt'><span class='keyword'>bool</span></span> operand<a class='hidden_link' href='#expr-1.sentence-1'>.</a></div> <br/> <div id='expr-1.sentence-2' class='sentence'><b>Rationale:</b> Obsolete feature with occasionally surprising semantics<a class='hidden_link' href='#expr-1.sentence-2'>.</a></div> <br/> <div id='expr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2014 expression utilizing the increment operator on
a <span class='texttt'><span class='keyword'>bool</span></span> lvalue is ill-formed in this revision of C++<a class='hidden_link' href='#expr-1.sentence-3'>.</a></div></div></div><div class='para' id='expr-2'><div class='marginalizedparent'><a class='marginalized' href='#expr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1388'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='expr.new'>[expr.<span class='shy'></span>new]</a> and <a href='expr.delete'>[expr.<span class='shy'></span>delete]</a>
<br/> <div id='expr-2.sentence-1' class='sentence'><b>Change:</b> Dynamic allocation mechanism for over-aligned types<a class='hidden_link' href='#expr-2.sentence-1'>.</a></div> <br/> <div id='expr-2.sentence-2' class='sentence'><b>Rationale:</b> Simplify use of over-aligned types<a class='hidden_link' href='#expr-2.sentence-2'>.</a></div> <br/> <div id='expr-2.sentence-3' class='sentence'><b>Effect on original feature:</b> In C++ 2014 code that uses a <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression'><span class='textsf'><i >new-expression</i></span></span></a>
to allocate an object with an over-aligned class type,
where that class has no allocation functions of its own,
<span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t<span class='parenthesis'>)</span></span>
is used to allocate the memory<a class='hidden_link' href='#expr-2.sentence-3'>.</a></div> <div id='expr-2.sentence-4' class='sentence'>In this revision of C++,
<span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t, std<span class='operator'>&#x200b;::&#x200b;</span>align_<span class='shy'></span>val_<span class='shy'></span>t<span class='parenthesis'>)</span></span>
is used instead<a class='hidden_link' href='#expr-2.sentence-4'>.</a></div></div></div></div><div id='dcl.dcl' class='section'><h3 ><a class='secnum' href='#dcl.dcl' style='min-width:80pt'>C.4.4</a> <a href='dcl.dcl' title='9&emsp;Declarations'>[dcl.<span class='shy'></span>dcl]</a>: declarations <a class='abbr_ref' href='diff.cpp14.dcl.dcl'>[diff.cpp14.dcl.dcl]</a></h3><div class='para' id='dcl.dcl-1'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1405'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.stc'>[dcl.<span class='shy'></span>stc]</a>
<a class='index' id=':register_storage_class'></a><br/> <div id='dcl.dcl-1.sentence-1' class='sentence'><b>Change:</b> Removal of <span id=':register'><span class='texttt'><span class='keyword'>register</span></span></span> <a href='dcl.stc#nt:storage-class-specifier' title='9.2.2&emsp;Storage class specifiers&emsp;[dcl.stc]'><span id='ntref:storage-class-specifier'><span class='textsf'><i >storage-class-specifier</i></span></span></a><a class='hidden_link' href='#dcl.dcl-1.sentence-1'>.</a></div> <br/> <div id='dcl.dcl-1.sentence-2' class='sentence'><b>Rationale:</b> Enable repurposing of deprecated keyword in future revisions of C++<a class='hidden_link' href='#dcl.dcl-1.sentence-2'>.</a></div> <br/> <div id='dcl.dcl-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2014 declaration utilizing the <span id=':register_'><span class='texttt'><span class='keyword'>register</span></span></span>
<a href='dcl.stc#nt:storage-class-specifier' title='9.2.2&emsp;Storage class specifiers&emsp;[dcl.stc]'><span id='ntref:storage-class-specifier_'><span class='textsf'><i >storage-class-specifier</i></span></span></a> is ill-formed in this revision of C++<a class='hidden_link' href='#dcl.dcl-1.sentence-3'>.</a></div> <div id='dcl.dcl-1.sentence-4' class='sentence'>The specifier can simply be removed to retain the original meaning<a class='hidden_link' href='#dcl.dcl-1.sentence-4'>.</a></div></div></div><div class='para' id='dcl.dcl-2'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1416'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.spec.auto'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>
<br/> <div id='dcl.dcl-2.sentence-1' class='sentence'><b>Change:</b> <span id=':auto'><span class='texttt'><span class='keyword'>auto</span></span></span> deduction from <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list'><span class='textsf'><i >braced-init-list</i></span></span></a><a class='hidden_link' href='#dcl.dcl-2.sentence-1'>.</a></div> <br/> <div id='dcl.dcl-2.sentence-2' class='sentence'><b>Rationale:</b> More intuitive deduction behavior<a class='hidden_link' href='#dcl.dcl-2.sentence-2'>.</a></div> <br/> <div id='dcl.dcl-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile or may change meaning
in this revision of C++<a class='hidden_link' href='#dcl.dcl-2.sentence-3'>.</a></div> <div id='dcl.dcl-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>auto</span> x1<span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>;         <span class='comment'>// was <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;initializer_<span class='shy'></span>list&lt;int&gt;</span>, now <span class='tcode_in_codeblock'>int</span></span>
<span class='keyword'>auto</span> x2<span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span>;      <span class='comment'>// was <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;initializer_<span class='shy'></span>list&lt;int&gt;</span>, now ill-formed</span>
</span></div></div></div><div class='para' id='dcl.dcl-3'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1430'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.fct'>[dcl.<span class='shy'></span>fct]</a>
<br/> <div id='dcl.dcl-3.sentence-1' class='sentence'><b>Change:</b> Make exception specifications be part of the type system<a class='hidden_link' href='#dcl.dcl-3.sentence-1'>.</a></div> <br/> <div id='dcl.dcl-3.sentence-2' class='sentence'><b>Rationale:</b> Improve type-safety<a class='hidden_link' href='#dcl.dcl-3.sentence-2'>.</a></div> <br/> <div id='dcl.dcl-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile or change meaning in this
revision of C++<a class='hidden_link' href='#dcl.dcl-3.sentence-3'>.</a></div> <div id='dcl.dcl-3.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>void</span> g1<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> g2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T <span class='operator'>*</span>, T <span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> x <span class='operator'>=</span> f<span class='parenthesis'>(</span>g1, g2<span class='parenthesis'>)</span>;              <span class='comment'>// ill-formed; previously well-formed</span>
</span></div></div></div><div class='para' id='dcl.dcl-4'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1446'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.aggr'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a>
<br/> <div id='dcl.dcl-4.sentence-1' class='sentence'><b>Change:</b> Definition of an aggregate is extended
to apply to user-defined types with base classes<a class='hidden_link' href='#dcl.dcl-4.sentence-1'>.</a></div> <br/> <div id='dcl.dcl-4.sentence-2' class='sentence'><b>Rationale:</b> To increase convenience of aggregate initialization<a class='hidden_link' href='#dcl.dcl-4.sentence-2'>.</a></div> <br/> <div id='dcl.dcl-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile or produce different results in this
revision of C++; initialization from an empty initializer list will
perform aggregate initialization instead of invoking a default constructor
for the affected types<a class='hidden_link' href='#dcl.dcl-4.sentence-3'>.</a></div> <div id='dcl.dcl-4.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> derived;
<span class='keyword'>struct</span> base <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>struct</span> derived;
<span class='keyword'>private</span><span class='operator'>:</span>
  base<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> derived <span class='operator'>:</span> base <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

derived d1<span class='curlybracket'>{</span><span class='curlybracket'>}</span>;       <span class='comment'>// error; the code was well-formed in C++ 2014</span>
derived d2;         <span class='comment'>// still OK</span>
</span></div></div></div></div><div id='class' class='section'><h3 ><a class='secnum' href='#class' style='min-width:80pt'>C.4.5</a> <a href='class' title='11&emsp;Classes'>[class]</a>: classes <a class='abbr_ref' href='diff.cpp14.class'>[diff.cpp14.class]</a></h3><div class='para' id='class-1'><div class='marginalizedparent'><a class='marginalized' href='#class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1473'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.inhctor.init'>[class.<span class='shy'></span>inhctor.<span class='shy'></span>init]</a>
<br/> <div id='class-1.sentence-1' class='sentence'><b>Change:</b> Inheriting a constructor no longer injects a constructor into the derived class<a class='hidden_link' href='#class-1.sentence-1'>.</a></div> <br/> <div id='class-1.sentence-2' class='sentence'><b>Rationale:</b> Better interaction with other language features<a class='hidden_link' href='#class-1.sentence-2'>.</a></div> <br/> <div id='class-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code that uses inheriting constructors may not be valid
or may have different semantics<a class='hidden_link' href='#class-1.sentence-3'>.</a></div> <div id='class-1.sentence-4' class='sentence'>A <a href='namespace.udecl#nt:using-declaration' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declaration'><span class='textsf'><i >using-declaration</i></span></span></a>
that names a constructor now makes the corresponding base class constructors
visible to initializations of the derived class
rather than declaring additional derived class constructors<a class='hidden_link' href='#class-1.sentence-4'>.</a></div> <div id='class-1.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> A<span class='parenthesis'>(</span>T, <span class='keyword'>typename</span> T<span class='operator'>::</span>type <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span>;
  A<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> A<span class='operator'>::</span>A;
  B<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
B b<span class='parenthesis'>(</span><span class='literal'>42L</span><span class='parenthesis'>)</span>;           <span class='comment'>// now calls <span class='tcode_in_codeblock'>B(int)</span>, used to call <span class='tcode_in_codeblock'>B&lt;long&gt;(long)</span>,</span>
                    <span class='comment'>// which called <span class='tcode_in_codeblock'>A(int)</span> due to substitution failure</span>
                    <span class='comment'>// in <span class='tcode_in_codeblock'>A&lt;long&gt;(long)</span>.</span>
</span></div></div></div></div><div id='temp' class='section'><h3 ><a class='secnum' href='#temp' style='min-width:80pt'>C.4.6</a> <a href='temp' title='13&emsp;Templates'>[temp]</a>: templates <a class='abbr_ref' href='diff.cpp14.temp'>[diff.cpp14.temp]</a></h3><div class='para' id='temp-1'><div class='marginalizedparent'><a class='marginalized' href='#temp-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1501'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='temp.deduct.type'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>type]</a>
<br/> <div id='temp-1.sentence-1' class='sentence'><b>Change:</b> Allowance to deduce from the type of a non-type template argument<a class='hidden_link' href='#temp-1.sentence-1'>.</a></div> <br/> <div id='temp-1.sentence-2' class='sentence'><b>Rationale:</b> In combination with the ability to declare
non-type template arguments with placeholder types,
allows partial specializations to decompose
from the type deduced for the non-type template argument<a class='hidden_link' href='#temp-1.sentence-2'>.</a></div> <br/> <div id='temp-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile
or produce different results in this revision of C++<a class='hidden_link' href='#temp-1.sentence-3'>.</a></div> <div id='temp-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, T N<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> foo<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>N<span class='anglebracket'>&gt;</span> <span class='operator'>*</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
<span class='keyword'>void</span> foo<span class='parenthesis'>(</span><span class='keyword'>void</span> <span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> bar<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span> <span class='operator'>*</span>p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  foo<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;           <span class='comment'>// ill-formed; previously well-formed</span>
<span class='curlybracket'>}</span>
</span></div></div></div></div><div id='except' class='section'><h3 ><a class='secnum' href='#except' style='min-width:80pt'>C.4.7</a> <a href='except' title='14&emsp;Exception handling'>[except]</a>: exception handling <a class='abbr_ref' href='diff.cpp14.except'>[diff.cpp14.except]</a></h3><div class='para' id='except-1'><div class='marginalizedparent'><a class='marginalized' href='#except-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1524'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='except.spec'>[except.<span class='shy'></span>spec]</a>
<br/> <div id='except-1.sentence-1' class='sentence'><b>Change:</b> Remove dynamic exception specifications<a class='hidden_link' href='#except-1.sentence-1'>.</a></div> <br/> <div id='except-1.sentence-2' class='sentence'><b>Rationale:</b> Dynamic exception specifications were a deprecated feature
that was complex and brittle in use<a class='hidden_link' href='#except-1.sentence-2'>.</a></div> <div id='except-1.sentence-3' class='sentence'>They interacted badly with the type system,
which became a more significant issue in this revision of C++
where (non-dynamic) exception specifications are part of the function type<a class='hidden_link' href='#except-1.sentence-3'>.</a></div> <br/> <div id='except-1.sentence-4' class='sentence'><b>Effect on original feature:</b> A valid C++ 2014 function declaration,
member function declaration,
function pointer declaration,
or function reference declaration,
if it has a potentially throwing dynamic exception specification,
is rejected as ill-formed in this revision of C++<a class='hidden_link' href='#except-1.sentence-4'>.</a></div> <div id='except-1.sentence-5' class='sentence'>Violating a non-throwing dynamic exception specification
calls <span class='texttt'>terminate</span> rather than <span class='texttt'>unexpected</span>,
and it is unspecified whether stack unwinding is performed
prior to such a call<a class='hidden_link' href='#except-1.sentence-5'>.</a></div></div></div></div><div id='library' class='section'><h3 ><a class='secnum' href='#library' style='min-width:80pt'>C.4.8</a> <a href='library' title='16&emsp;Library introduction'>[library]</a>: library introduction <a class='abbr_ref' href='diff.cpp14.library'>[diff.cpp14.library]</a></h3><div class='para' id='library-1'><div class='marginalizedparent'><a class='marginalized' href='#library-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1547'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='headers'>[headers]</a>
<br/> <div id='library-1.sentence-1' class='sentence'><b>Change:</b> New headers<a class='hidden_link' href='#library-1.sentence-1'>.</a></div> <br/> <div id='library-1.sentence-2' class='sentence'><b>Rationale:</b> New functionality<a class='hidden_link' href='#library-1.sentence-2'>.</a></div> <br/> <div id='library-1.sentence-3' class='sentence'><b>Effect on original feature:</b> The following C++ headers are new:
<a href='any.synop#header:%3cany%3e' title='22.7.2&emsp;Header &lt;any&gt; synopsis&emsp;[any.synop]'><span id='headerref:<any>'><span class='texttt'>&lt;any&gt;</span></span></a>,
<a href='charconv.syn#header:%3ccharconv%3e' title='22.13.1&emsp;Header &lt;charconv&gt; synopsis&emsp;[charconv.syn]'><span id='headerref:<charconv>'><span class='texttt'>&lt;charconv&gt;</span></span></a>,
<a href='execution.syn#header:%3cexecution%3e' title='22.12.2&emsp;Header &lt;execution&gt; synopsis&emsp;[execution.syn]'><span id='headerref:<execution>'><span class='texttt'>&lt;execution&gt;</span></span></a>,
<a href='fs.filesystem.syn#header:%3cfilesystem%3e' title='31.12.4&emsp;Header &lt;filesystem&gt; synopsis&emsp;[fs.filesystem.syn]'><span id='headerref:<filesystem>'><span class='texttt'>&lt;filesystem&gt;</span></span></a>,
<a href='mem.res.syn#header:%3cmemory_resource%3e' title='20.4.1&emsp;Header &lt;memory_&shy;resource&gt; synopsis&emsp;[mem.res.syn]'><span id='headerref:<memory_resource>'><span class='texttt'>&lt;memory_<span class='shy'></span>resource&gt;</span></span></a>,
<a href='optional.syn#header:%3coptional%3e' title='22.5.2&emsp;Header &lt;optional&gt; synopsis&emsp;[optional.syn]'><span id='headerref:<optional>'><span class='texttt'>&lt;optional&gt;</span></span></a>,<br/></div> <div id='library-1.sentence-4' class='sentence'><a href='string.view.synop#header:%3cstring_view%3e' title='23.3.2&emsp;Header &lt;string_&shy;view&gt; synopsis&emsp;[string.view.synop]'><span id='headerref:<string_view>'><span class='texttt'>&lt;string_<span class='shy'></span>view&gt;</span></span></a>,
and
<a href='variant.syn#header:%3cvariant%3e' title='22.6.2&emsp;Header &lt;variant&gt; synopsis&emsp;[variant.syn]'><span id='headerref:<variant>'><span class='texttt'>&lt;variant&gt;</span></span></a><a class='hidden_link' href='#library-1.sentence-4'>.</a></div> <div id='library-1.sentence-5' class='sentence'>Valid C++ 2014 code that <span class='texttt'><span class='preprocessordirective'>#include</span></span>s headers with these names may be
invalid in this revision of C++<a class='hidden_link' href='#library-1.sentence-5'>.</a></div></div></div><div class='para' id='library-2'><div class='marginalizedparent'><a class='marginalized' href='#library-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1566'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='namespace.future'>[namespace.<span class='shy'></span>future]</a>
<br/> <div id='library-2.sentence-1' class='sentence'><b>Change:</b> New reserved namespaces<a class='hidden_link' href='#library-2.sentence-1'>.</a></div> <br/> <div id='library-2.sentence-2' class='sentence'><b>Rationale:</b> Reserve namespaces for future revisions of the standard library
that might otherwise be incompatible with existing programs<a class='hidden_link' href='#library-2.sentence-2'>.</a></div> <br/> <div id='library-2.sentence-3' class='sentence'><b>Effect on original feature:</b> The global namespaces <span class='texttt'>std</span>
followed by an arbitrary sequence of <a href='lex.name#nt:digit' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:digit'><span class='textsf'><i >digit</i></span></span></a><i >s</i> (<a href='lex.name' title='5.10&emsp;Identifiers'>[lex.<span class='shy'></span>name]</a>)
are reserved for future standardization<a class='hidden_link' href='#library-2.sentence-3'>.</a></div> <div id='library-2.sentence-4' class='sentence'>Valid C++ 2014 code that uses such a top-level namespace,
e.g., <span class='texttt'>std2</span>, may be invalid in this revision of C++<a class='hidden_link' href='#library-2.sentence-4'>.</a></div></div></div></div><div id='utilities' class='section'><h3 ><a class='secnum' href='#utilities' style='min-width:80pt'>C.4.9</a> <a href='utilities' title='22&emsp;General utilities library'>[utilities]</a>: general utilities library <a class='abbr_ref' href='diff.cpp14.utilities'>[diff.cpp14.utilities]</a></h3><div class='para' id='utilities-1'><div class='marginalizedparent'><a class='marginalized' href='#utilities-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1581'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='func.wrap'>[func.<span class='shy'></span>wrap]</a>
<br/> <div id='utilities-1.sentence-1' class='sentence'><b>Change:</b> Constructors taking allocators removed<a class='hidden_link' href='#utilities-1.sentence-1'>.</a></div> <br/> <div id='utilities-1.sentence-2' class='sentence'><b>Rationale:</b> No implementation consensus<a class='hidden_link' href='#utilities-1.sentence-2'>.</a></div> <br/> <div id='utilities-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile or may change meaning in this
revision of C++<a class='hidden_link' href='#utilities-1.sentence-3'>.</a></div> <div id='utilities-1.sentence-4' class='sentence'>Specifically, constructing a <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>function</span> with
an allocator is ill-formed and uses-allocator construction will not pass an
allocator to <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>function</span> constructors in this revision of C++<a class='hidden_link' href='#utilities-1.sentence-4'>.</a></div></div></div><div class='para' id='utilities-2'><div class='marginalizedparent'><a class='marginalized' href='#utilities-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1592'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='util.smartptr.shared'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared]</a>
<br/> <div id='utilities-2.sentence-1' class='sentence'><b>Change:</b> Different constraint on conversions from <span class='texttt'>unique_<span class='shy'></span>ptr</span><a class='hidden_link' href='#utilities-2.sentence-1'>.</a></div> <br/> <div id='utilities-2.sentence-2' class='sentence'><b>Rationale:</b> Adding array support to <span class='texttt'>shared_<span class='shy'></span>ptr</span>,
via the syntax <span class='texttt'>shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span></span> and <span class='texttt'>shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#utilities-2.sentence-2'>.</a></div> <br/> <div id='utilities-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile or may change meaning in this
revision of C++<a class='hidden_link' href='#utilities-2.sentence-3'>.</a></div> <div id='utilities-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>memory<span class='anglebracket'>&gt;</span>
std<span class='operator'>::</span>unique_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> arr<span class='parenthesis'>(</span><span class='keyword'>new</span> <span class='keyword'>int</span><span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
std<span class='operator'>::</span>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> ptr<span class='parenthesis'>(</span>std<span class='operator'>::</span>move<span class='parenthesis'>(</span>arr<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;   <span class='comment'>// error: <span class='tcode_in_codeblock'>int(*)[]</span> is not compatible with <span class='tcode_in_codeblock'>int*</span></span>
</span></div></div></div></div><div id='string' class='section'><h3 ><a class='secnum' href='#string' style='min-width:80pt'>C.4.10</a> <a href='strings' title='23&emsp;Strings library'>[strings]</a>: strings library <a class='abbr_ref' href='diff.cpp14.string'>[diff.cpp14.string]</a></h3><div class='para' id='string-1'><div class='marginalizedparent'><a class='marginalized' href='#string-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1610'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='basic.string'>[basic.<span class='shy'></span>string]</a>
<br/> <div id='string-1.sentence-1' class='sentence'><b>Change:</b> Non-const <span class='texttt'><span class='operator'>.</span>data<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> member added<a class='hidden_link' href='#string-1.sentence-1'>.</a></div> <br/> <div id='string-1.sentence-2' class='sentence'><b>Rationale:</b> The lack of a non-const <span class='texttt'><span class='operator'>.</span>data<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
differed from the similar member of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>vector</span><a class='hidden_link' href='#string-1.sentence-2'>.</a></div> <div id='string-1.sentence-3' class='sentence'>This change regularizes behavior<a class='hidden_link' href='#string-1.sentence-3'>.</a></div> <br/> <div id='string-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Overloaded functions which have differing code paths
for <span class='texttt'><span class='keyword'>char</span><span class='operator'>*</span></span> and <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span></span> arguments
will execute differently
when called with a non-const string's <span class='texttt'><span class='operator'>.</span>data<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> member
in this revision of C++<a class='hidden_link' href='#string-1.sentence-4'>.</a></div> <div id='string-1.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>char</span> <span class='operator'>*</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>char</span> <span class='operator'>*</span><span class='parenthesis'>)</span>;
string s;
<span class='keyword'>int</span> x <span class='operator'>=</span> f<span class='parenthesis'>(</span>s<span class='operator'>.</span>data<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;            <span class='comment'>// ill-formed; previously well-formed</span>
</span></div></div></div></div><div id='containers' class='section'><h3 ><a class='secnum' href='#containers' style='min-width:80pt'>C.4.11</a> <a href='containers' title='24&emsp;Containers library'>[containers]</a>: containers library <a class='abbr_ref' href='diff.cpp14.containers'>[diff.cpp14.containers]</a></h3><div class='para' id='containers-1'><div class='marginalizedparent'><a class='marginalized' href='#containers-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1633'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='associative.reqmts'>[associative.<span class='shy'></span>reqmts]</a>
<br/> <div id='containers-1.sentence-1' class='sentence'><b>Change:</b> Requirements change:
<br/></div> <div id='containers-1.sentence-2' class='sentence'><b>Rationale:</b> Increase portability, clarification of associative container requirements<a class='hidden_link' href='#containers-1.sentence-2'>.</a></div> <br/> <div id='containers-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code that attempts to use associative containers
having a comparison object with non-const function call operator
may fail to compile in this revision of C++<a class='hidden_link' href='#containers-1.sentence-3'>.</a></div> <div id='containers-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>set<span class='anglebracket'>&gt;</span>

<span class='keyword'>struct</span> compare
<span class='curlybracket'>{</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span> a, <span class='keyword'>int</span> b<span class='parenthesis'>)</span>
  <span class='curlybracket'>{</span>
    <span class='keyword'>return</span> a <span class='anglebracket'>&lt;</span> b;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> std<span class='operator'>::</span>set<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, compare<span class='anglebracket'>&gt;</span> s;
  s<span class='operator'>.</span>find<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div></div></div></div><div id='depr' class='section'><h3 ><a class='secnum' href='#depr' style='min-width:80pt'>C.4.12</a> <a href='depr' title='Annex D&emsp;(normative)&emsp;Compatibility features'>[depr]</a>: compatibility features <a class='abbr_ref' href='diff.cpp14.depr'>[diff.cpp14.depr]</a></h3><div class='para' id='depr-1'><div class='marginalizedparent'><a class='marginalized' href='#depr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1663'>#</a></div><div class='texpara'><div id='depr-1.sentence-1' class='sentence'><b>Change:</b> The class templates
<span class='texttt'>auto_<span class='shy'></span>ptr</span>,
<span class='texttt'>unary_<span class='shy'></span>function</span>, and
<span class='texttt'>binary_<span class='shy'></span>function</span>,
the function templates
<span class='texttt'>random_<span class='shy'></span>shuffle</span>,
and the function templates (and their return types)
<span class='texttt'>ptr_<span class='shy'></span>fun</span>,
<span class='texttt'>mem_<span class='shy'></span>fun</span>,
<span class='texttt'>mem_<span class='shy'></span>fun_<span class='shy'></span>ref</span>,
<span class='texttt'>bind1st</span>, and
<span class='texttt'>bind2nd</span>
are not defined<a class='hidden_link' href='#depr-1.sentence-1'>.</a></div> <br/> <div id='depr-1.sentence-2' class='sentence'><b>Rationale:</b> Superseded by new features<a class='hidden_link' href='#depr-1.sentence-2'>.</a></div> <br/> <div id='depr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code that uses these class templates
and function templates may fail to compile in this revision of C++<a class='hidden_link' href='#depr-1.sentence-3'>.</a></div></div></div><div class='para' id='depr-2'><div class='marginalizedparent'><a class='marginalized' href='#depr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/compatibility.tex#L1684'>#</a></div><div class='texpara'><div id='depr-2.sentence-1' class='sentence'><b>Change:</b> Remove old iostreams members [depr.ios.members]<a class='hidden_link' href='#depr-2.sentence-1'>.</a></div> <br/> <div id='depr-2.sentence-2' class='sentence'><b>Rationale:</b> Redundant feature for compatibility with pre-standard code
has served its time<a class='hidden_link' href='#depr-2.sentence-2'>.</a></div> <br/> <div id='depr-2.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2014 program using these identifiers
may be ill-formed in this revision of C++<a class='hidden_link' href='#depr-2.sentence-3'>.</a></div></div></div></div></div></body></html>