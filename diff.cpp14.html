<!DOCTYPE html><html lang='en'><head><title>[diff.cpp14]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='annexnum' style='min-width:73pt'>Annex C&emsp;(informative)</a> Compatibility <a class='abbr_ref' href='./#diff'>[diff]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>C.4</a> C++ and ISO C++ 2014 <a class='abbr_ref'>[diff.cpp14]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/0c0e0c3a740c133e1d25bfdbe141a3128d77a381/source/compatibility.tex#L1504'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':summary,compatibility_with_ISO_C++_2014'></a></span>This subclause lists the differences between C++ and
ISO C++ 2014 (ISO/IEC 14882:2014, <span class='textit'>Programming Languages — C++</span>),
by the chapters of this document<a class='hidden_link' href='#1.sentence-1'>.</a></div></div><div id='lex' class='section'><h3 ><a class='secnum' href='#lex' style='min-width:103pt'>C.4.1</a> <a href='lex'>[lex]</a>: lexical conventions <a class='abbr_ref' href='diff.cpp14.lex'>[diff.cpp14.lex]</a></h3><div class='para' id='lex-1'><div class='marginalizedparent'><a class='marginalized' href='#lex-1'>1</a></div><div id='lex-1.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='lex.phases'>[lex.phases]</a>
<span class='indexparent'><a class='index' id=':trigraph_sequence'></a></span><br/><b>Change:</b> Removal of trigraph support as a required feature<a class='hidden_link' href='#lex-1.sentence-1'>.</a></div> <div id='lex-1.sentence-2' class='sentence'><br/><b>Rationale:</b> Prevents accidental uses of trigraphs in non-raw string literals and comments<a class='hidden_link' href='#lex-1.sentence-2'>.</a></div> <div id='lex-1.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> 
Valid C++ 2014 code that uses trigraphs may not be valid or may have different
semantics in this International Standard<a class='hidden_link' href='#lex-1.sentence-3'>.</a></div> <div id='lex-1.sentence-4' class='sentence'>Implementations may choose to
translate trigraphs as specified in C++ 2014 if they appear outside of a raw
string literal, as part of the <span class='indexparent'><a class='index' id=':mapping_from_physical_source_file_characters_to_basic_source_character_set'></a></span>implementation-defined mapping from physical source file characters to
the basic source character set<a class='hidden_link' href='#lex-1.sentence-4'>.</a></div></div><div class='para' id='lex-2'><div class='marginalizedparent'><a class='marginalized' href='#lex-2'>2</a></div><div id='lex-2.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='lex.ppnumber'>[lex.ppnumber]</a>
<br/><b>Change:</b> <i ><a href='lex.ppnumber#nt:pp-number'>pp-number</a></i> can contain <span class='texttt'>p</span> <i ><a href='lex.fcon#nt:sign'>sign</a></i> and
<span class='texttt'>P</span> <i ><a href='lex.fcon#nt:sign'>sign</a></i><a class='hidden_link' href='#lex-2.sentence-1'>.</a></div> <div id='lex-2.sentence-2' class='sentence'><br/><b>Rationale:</b> Necessary to enable hexadecimal floating literals<a class='hidden_link' href='#lex-2.sentence-2'>.</a></div> <div id='lex-2.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> 
Valid C++ 2014 code may fail to compile or produce different results in
this International Standard<a class='hidden_link' href='#lex-2.sentence-3'>.</a></div> <div id='lex-2.sentence-4' class='sentence'>Specifically, character sequences like <span class='texttt'>0p+0</span>
and <span class='texttt'>0e1_&shy;p+0</span> are three separate tokens each in C++ 2014, but one single token
in this International Standard<a class='hidden_link' href='#lex-2.sentence-4'>.</a></div><pre class='codeblock'>
#define F(a) b ## a
int b0p = F(0p+0);  <span class='comment'>// ill-formed; equivalent to “<span class='tcode_in_codeblock'>int b0p = b0p + 0;</span>” in C++ 2014
</span></pre></div></div><div id='expr' class='section'><h3 ><a class='secnum' href='#expr' style='min-width:103pt'>C.4.2</a> <a href='expr'>[expr]</a>: expressions <a class='abbr_ref' href='diff.cpp14.expr'>[diff.cpp14.expr]</a></h3><div class='para' id='expr-1'><div class='marginalizedparent'><a class='marginalized' href='#expr-1'>1</a></div><div id='expr-1.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='expr.post.incr'>[expr.post.incr]</a>, <a href='expr.pre.incr'>[expr.pre.incr]</a>
<br/><b>Change:</b> 
Remove increment operator with <span class='texttt'>bool</span> operand<a class='hidden_link' href='#expr-1.sentence-1'>.</a></div> <div id='expr-1.sentence-2' class='sentence'><br/><b>Rationale:</b> Obsolete feature with occasionally surprising semantics<a class='hidden_link' href='#expr-1.sentence-2'>.</a></div> <div id='expr-1.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> A valid C++ 2014 expression utilizing the increment operator on
a <span class='texttt'>bool</span> lvalue is ill-formed in this International Standard<a class='hidden_link' href='#expr-1.sentence-3'>.</a></div> <div id='expr-1.sentence-4' class='sentence'>Note that this might occur when the lvalue has a type given by a template
parameter<a class='hidden_link' href='#expr-1.sentence-4'>.</a></div></div><div class='para' id='expr-2'><div class='marginalizedparent'><a class='marginalized' href='#expr-2'>2</a></div><div id='expr-2.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='expr.new'>[expr.new]</a>, <a href='expr.delete'>[expr.delete]</a>
<br/><b>Change:</b> Dynamic allocation mechanism for over-aligned types<a class='hidden_link' href='#expr-2.sentence-1'>.</a></div> <div id='expr-2.sentence-2' class='sentence'><br/><b>Rationale:</b> Simplify use of over-aligned types<a class='hidden_link' href='#expr-2.sentence-2'>.</a></div> <div id='expr-2.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> In C++ 2014 code that uses a <i ><a href='expr.new#nt:new-expression'>new-expression</a></i>
to allocate an object with an over-aligned class type,
where that class has no allocation functions of its own,
<span class='texttt'>&#x200b;::&#x200b;operator new(std&#x200b;::&#x200b;size_&shy;t)</span>
is used to allocate the memory<a class='hidden_link' href='#expr-2.sentence-3'>.</a></div> <div id='expr-2.sentence-4' class='sentence'>In this International Standard,
<span class='texttt'>&#x200b;::&#x200b;operator new(std&#x200b;::&#x200b;size_&shy;t, std&#x200b;::&#x200b;align_&shy;val_&shy;t)</span>
is used instead<a class='hidden_link' href='#expr-2.sentence-4'>.</a></div></div></div><div id='dcl.dcl' class='section'><h3 ><a class='secnum' href='#dcl.dcl' style='min-width:103pt'>C.4.3</a> <a href='dcl.dcl'>[dcl.dcl]</a>: declarations <a class='abbr_ref' href='diff.cpp14.dcl.dcl'>[diff.cpp14.dcl.dcl]</a></h3><div class='para' id='dcl.dcl-1'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-1'>1</a></div><div id='dcl.dcl-1.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='dcl.stc'>[dcl.stc]</a>
<span class='indexparent'><a class='index' id=':register_storage_class'></a></span><br/><b>Change:</b> Removal of <span class='texttt'>register</span> <i ><a href='dcl.stc#nt:storage-class-specifier'>storage-class-specifier</a></i><a class='hidden_link' href='#dcl.dcl-1.sentence-1'>.</a></div> <div id='dcl.dcl-1.sentence-2' class='sentence'><br/><b>Rationale:</b> Enable repurposing of deprecated keyword in future revisions of this International Standard<a class='hidden_link' href='#dcl.dcl-1.sentence-2'>.</a></div> <div id='dcl.dcl-1.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> 
A valid C++ 2014 declaration utilizing the <span class='texttt'>register</span>
<i ><a href='dcl.stc#nt:storage-class-specifier'>storage-class-specifier</a></i> is ill-formed in this International Standard<a class='hidden_link' href='#dcl.dcl-1.sentence-3'>.</a></div> <div id='dcl.dcl-1.sentence-4' class='sentence'>The specifier can simply be removed to retain the original meaning<a class='hidden_link' href='#dcl.dcl-1.sentence-4'>.</a></div></div><div class='para' id='dcl.dcl-2'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-2'>2</a></div><div id='dcl.dcl-2.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='dcl.spec.auto'>[dcl.spec.auto]</a>
<br/><b>Change:</b> <span class='texttt'>auto</span> deduction from <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i><a class='hidden_link' href='#dcl.dcl-2.sentence-1'>.</a></div> <div id='dcl.dcl-2.sentence-2' class='sentence'><br/><b>Rationale:</b> More intuitive deduction behavior<a class='hidden_link' href='#dcl.dcl-2.sentence-2'>.</a></div> <div id='dcl.dcl-2.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> 
Valid C++ 2014 code may fail to compile or may change meaning
in this International Standard<a class='hidden_link' href='#dcl.dcl-2.sentence-3'>.</a></div> <div id='dcl.dcl-2.sentence-4' class='sentence'>For example:
<pre class='codeblock'>
auto x1{1};    <span class='comment'>// was <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;initializer_&shy;list&lt;int&gt;</span>, now <span class='tcode_in_codeblock'>int</span>
</span>auto x2{1, 2}; <span class='comment'>// was <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;initializer_&shy;list&lt;int&gt;</span>, now ill-formed
</span></pre></div></div></div><div id='decl' class='section'><h3 ><a class='secnum' href='#decl' style='min-width:103pt'>C.4.4</a> <a href='dcl.decl'>[dcl.decl]</a>: declarators <a class='abbr_ref' href='diff.cpp14.decl'>[diff.cpp14.decl]</a></h3><div class='para' id='decl-1'><div class='marginalizedparent'><a class='marginalized' href='#decl-1'>1</a></div><div id='decl-1.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='dcl.fct'>[dcl.fct]</a>
<br/><b>Change:</b> Make exception specifications be part of the type system<a class='hidden_link' href='#decl-1.sentence-1'>.</a></div> <div id='decl-1.sentence-2' class='sentence'><br/><b>Rationale:</b> Improve type-safety<a class='hidden_link' href='#decl-1.sentence-2'>.</a></div> <div id='decl-1.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> 
Valid C++ 2014 code may fail to compile or change meaning in this
International Standard:</div><pre class='codeblock'>
void g1() noexcept;
void g2();
template&lt;class T&gt; int f(T *, T *);
int x = f(g1, g2);    <span class='comment'>// ill-formed; previously well-formed
</span></pre></div><div class='para' id='decl-2'><div class='marginalizedparent'><a class='marginalized' href='#decl-2'>2</a></div><div id='decl-2.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='dcl.init.aggr'>[dcl.init.aggr]</a>
<br/><b>Change:</b> Definition of an aggregate is extended
to apply to user-defined types with base classes<a class='hidden_link' href='#decl-2.sentence-1'>.</a></div> <div id='decl-2.sentence-2' class='sentence'><br/><b>Rationale:</b> To increase convenience of aggregate initialization<a class='hidden_link' href='#decl-2.sentence-2'>.</a></div> <div id='decl-2.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> 
Valid C++ 2014 code may fail to compile or produce different results in this
International Standard; initialization from an empty initializer list will
perform aggregate initialization instead of invoking a default constructor
for the affected types:
<pre class='codeblock'>
struct derived;
struct base {
  friend struct derived;
private:
  base();
};
struct derived : base {};

derived d1{};       <span class='comment'>// error; the code was well-formed in C++ 2014
</span>derived d2;         <span class='comment'>// still OK
</span></pre></div></div></div><div id='special' class='section'><h3 ><a class='secnum' href='#special' style='min-width:103pt'>C.4.5</a> <a href='special'>[special]</a>: special member functions <a class='abbr_ref' href='diff.cpp14.special'>[diff.cpp14.special]</a></h3><div class='para' id='special-1'><div class='marginalizedparent'><a class='marginalized' href='#special-1'>1</a></div><div id='special-1.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='class.inhctor.init'>[class.inhctor.init]</a>
<br/><b>Change:</b> 
Inheriting a constructor no longer injects a constructor into the derived class<a class='hidden_link' href='#special-1.sentence-1'>.</a></div> <div id='special-1.sentence-2' class='sentence'><br/><b>Rationale:</b> 
Better interaction with other language features<a class='hidden_link' href='#special-1.sentence-2'>.</a></div> <div id='special-1.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> 
Valid C++ 2014 code that uses inheriting constructors may not be valid
or may have different semantics<a class='hidden_link' href='#special-1.sentence-3'>.</a></div> <div id='special-1.sentence-4' class='sentence'>A <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i>
that names a constructor now makes the corresponding base class constructors
visible to initializations of the derived class
rather than declaring additional derived class constructors<a class='hidden_link' href='#special-1.sentence-4'>.</a></div> <pre class='codeblock'>
struct A {
  template&lt;typename T&gt; A(T, typename T::type = 0);
  A(int);
};
struct B : A {
  using A::A;
  B(int);
};
B b(42L); <span class='comment'>// now calls <span class='tcode_in_codeblock'>B(int)</span>, used to call <span class='tcode_in_codeblock'>B&lt;long&gt;(long)</span>,
</span>          <span class='comment'>// which called <span class='tcode_in_codeblock'>A(int)</span> due to substitution failure
</span>          <span class='comment'>// in <span class='tcode_in_codeblock'>A&lt;long&gt;(long)</span>.
</span></pre></div></div><div id='temp' class='section'><h3 ><a class='secnum' href='#temp' style='min-width:103pt'>C.4.6</a> <a href='temp'>[temp]</a>: templates <a class='abbr_ref' href='diff.cpp14.temp'>[diff.cpp14.temp]</a></h3><div class='para' id='temp-1'><div class='marginalizedparent'><a class='marginalized' href='#temp-1'>1</a></div><div id='temp-1.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='temp.deduct.type'>[temp.deduct.type]</a>
<br/><b>Change:</b> Allowance to deduce from the type of a non-type template argument<a class='hidden_link' href='#temp-1.sentence-1'>.</a></div> <div id='temp-1.sentence-2' class='sentence'><br/><b>Rationale:</b> In combination with the ability to declare
non-type template arguments with placeholder types,
allows partial specializations to decompose
from the type deduced for the non-type template argument<a class='hidden_link' href='#temp-1.sentence-2'>.</a></div> <div id='temp-1.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile
or produce different results in this International Standard:
<pre class='codeblock'>
template &lt;int N&gt; struct A;
template &lt;typename T, T N&gt; int foo(A&lt;N&gt; *) = delete;
void foo(void *);
void bar(A&lt;0&gt; *p) {
  foo(p); <span class='comment'>// ill-formed; previously well-formed
</span>}</pre></div></div></div><div id='except' class='section'><h3 ><a class='secnum' href='#except' style='min-width:103pt'>C.4.7</a> <a href='except'>[except]</a>: exception handling <a class='abbr_ref' href='diff.cpp14.except'>[diff.cpp14.except]</a></h3><div class='para' id='except-1'><div class='marginalizedparent'><a class='marginalized' href='#except-1'>1</a></div><div id='except-1.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='except.spec'>[except.spec]</a>
<br/><b>Change:</b> Remove dynamic exception specifications<a class='hidden_link' href='#except-1.sentence-1'>.</a></div> <div id='except-1.sentence-2' class='sentence'><br/><b>Rationale:</b> Dynamic exception specifications were a deprecated feature
that was complex and brittle in use<a class='hidden_link' href='#except-1.sentence-2'>.</a></div> <div id='except-1.sentence-3' class='sentence'>They interacted badly with the type system,
which became a more significant issue in this International Standard
where (non-dynamic) exception specifications are part of the function type<a class='hidden_link' href='#except-1.sentence-3'>.</a></div> <div id='except-1.sentence-4' class='sentence'><br/><b>Effect on original feature:</b> 
A valid C++ 2014 function declaration,
member function declaration,
function pointer declaration,
or function reference declaration,
if it has a potentially throwing dynamic exception specification,
will be rejected as ill-formed in this International Standard<a class='hidden_link' href='#except-1.sentence-4'>.</a></div> <div id='except-1.sentence-5' class='sentence'>Violating a non-throwing dynamic exception specification
will call <span class='texttt'>terminate</span>
rather than <span class='texttt'>unexpected</span>
and might not perform stack unwinding prior to such a call<a class='hidden_link' href='#except-1.sentence-5'>.</a></div></div></div><div id='library' class='section'><h3 ><a class='secnum' href='#library' style='min-width:103pt'>C.4.8</a> <a href='library'>[library]</a>: library introduction <a class='abbr_ref' href='diff.cpp14.library'>[diff.cpp14.library]</a></h3><div class='para' id='library-1'><div class='marginalizedparent'><a class='marginalized' href='#library-1'>1</a></div><div id='library-1.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='headers'>[headers]</a>
<br/><b>Change:</b> New headers<a class='hidden_link' href='#library-1.sentence-1'>.</a></div> <div id='library-1.sentence-2' class='sentence'><br/><b>Rationale:</b> New functionality<a class='hidden_link' href='#library-1.sentence-2'>.</a></div> <div id='library-1.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> 
The following C++ headers are new:
<span class='texttt'>&lt;any&gt;</span>,
<span class='texttt'>&lt;execution&gt;</span>,
<span class='texttt'>&lt;filesystem&gt;</span>,
<span class='texttt'>&lt;memory_&shy;resource&gt;</span>,
<span class='texttt'>&lt;optional&gt;</span>,
<span class='texttt'>&lt;string_&shy;view&gt;</span>,
and
<span class='texttt'>&lt;variant&gt;</span><a class='hidden_link' href='#library-1.sentence-3'>.</a></div> <div id='library-1.sentence-4' class='sentence'>Valid C++ 2014 code that <span class='texttt'>#include</span>s headers with these names may be
invalid in this International Standard<a class='hidden_link' href='#library-1.sentence-4'>.</a></div></div><div class='para' id='library-2'><div class='marginalizedparent'><a class='marginalized' href='#library-2'>2</a></div><div id='library-2.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='namespace.future'>[namespace.future]</a>
<br/><b>Change:</b> New reserved namespaces<a class='hidden_link' href='#library-2.sentence-1'>.</a></div> <div id='library-2.sentence-2' class='sentence'><br/><b>Rationale:</b> Reserve namespaces for future revisions of the standard library
that might otherwise be incompatible with existing programs<a class='hidden_link' href='#library-2.sentence-2'>.</a></div> <div id='library-2.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> 
The global namespaces <span class='texttt'>std</span>
followed by an arbitrary sequence of digits
is reserved for future standardization<a class='hidden_link' href='#library-2.sentence-3'>.</a></div> <div id='library-2.sentence-4' class='sentence'>Valid C++ 2014 code that uses such a top-level namespace,
e.g., <span class='texttt'>std2</span>, may be invalid in this International Standard<a class='hidden_link' href='#library-2.sentence-4'>.</a></div></div></div><div id='utilities' class='section'><h3 ><a class='secnum' href='#utilities' style='min-width:103pt'>C.4.9</a> <a href='utilities'>[utilities]</a>: general utilities library <a class='abbr_ref' href='diff.cpp14.utilities'>[diff.cpp14.utilities]</a></h3><div class='para' id='utilities-1'><div class='marginalizedparent'><a class='marginalized' href='#utilities-1'>1</a></div><div id='utilities-1.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='func.wrap'>[func.wrap]</a>
<br/><b>Change:</b> Constructors taking allocators removed<a class='hidden_link' href='#utilities-1.sentence-1'>.</a></div> <div id='utilities-1.sentence-2' class='sentence'><br/><b>Rationale:</b> No implementation consensus<a class='hidden_link' href='#utilities-1.sentence-2'>.</a></div> <div id='utilities-1.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> 
Valid C++ 2014 code may fail to compile or may change meaning in this
International Standard<a class='hidden_link' href='#utilities-1.sentence-3'>.</a></div> <div id='utilities-1.sentence-4' class='sentence'>Specifically, constructing a <span class='texttt'>std&#x200b;::&#x200b;function</span> with
an allocator is ill-formed and uses-allocator construction will not pass an
allocator to <span class='texttt'>std&#x200b;::&#x200b;function</span> constructors in this International Standard<a class='hidden_link' href='#utilities-1.sentence-4'>.</a></div></div><div class='para' id='utilities-2'><div class='marginalizedparent'><a class='marginalized' href='#utilities-2'>2</a></div><div id='utilities-2.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='util.smartptr.shared'>[util.smartptr.shared]</a>
<br/><b>Change:</b> Different constraint on conversions from <span class='texttt'>unique_&shy;ptr</span><a class='hidden_link' href='#utilities-2.sentence-1'>.</a></div> <div id='utilities-2.sentence-2' class='sentence'><br/><b>Rationale:</b> Adding array support to <span class='texttt'>shared_&shy;ptr</span>,
via the syntax <span class='texttt'>shared_&shy;ptr&lt;T[]&gt;</span> and <span class='texttt'>shared_&shy;ptr&lt;T[N]&gt;</span><a class='hidden_link' href='#utilities-2.sentence-2'>.</a></div> <div id='utilities-2.sentence-3' class='sentence'><br/><b>Effect on original feature:</b> 
Valid C++ 2014 code may fail to compile or may change meaning in this
International Standard<a class='hidden_link' href='#utilities-2.sentence-3'>.</a></div> <div id='utilities-2.sentence-4' class='sentence'>For example:</div><pre class='codeblock'>
#include &lt;memory&gt;
std::unique_ptr&lt;int[]&gt; arr(new int[1]);
std::shared_ptr&lt;int&gt; ptr(std::move(arr)); <span class='comment'>// error: <span class='tcode_in_codeblock'>int(*)[]</span> is not compatible with <span class='tcode_in_codeblock'>int*</span>
</span></pre></div></div><div id='string' class='section'><h3 ><a class='secnum' href='#string' style='min-width:103pt'>C.4.10</a> <a href='strings'>[strings]</a>: strings library <a class='abbr_ref' href='diff.cpp14.string'>[diff.cpp14.string]</a></h3><div class='para' id='string-1'><div class='marginalizedparent'><a class='marginalized' href='#string-1'>1</a></div><div id='string-1.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='basic.string'>[basic.string]</a>
<br/><b>Change:</b> Non-const <span class='texttt'>.data()</span> member added<a class='hidden_link' href='#string-1.sentence-1'>.</a></div> <div id='string-1.sentence-2' class='sentence'><br/><b>Rationale:</b> The lack of a non-const <span class='texttt'>.data()</span>
differed from the similar member of <span class='texttt'>std&#x200b;::&#x200b;vector</span><a class='hidden_link' href='#string-1.sentence-2'>.</a></div> <div id='string-1.sentence-3' class='sentence'>This change regularizes behavior for this International Standard<a class='hidden_link' href='#string-1.sentence-3'>.</a></div> <div id='string-1.sentence-4' class='sentence'><br/><b>Effect on original feature:</b> 
Overloaded functions which have differing code paths
for <span class='texttt'>char*</span> and <span class='texttt'>const char*</span> arguments
will execute differently
when called with a non-const string's <span class='texttt'>.data()</span> member
in this International Standard<a class='hidden_link' href='#string-1.sentence-4'>.</a></div><pre class='codeblock'>
int f(char *) = delete;
int f(const char *);
string s;
int x = f(s.data()); <span class='comment'>// ill-formed; previously well-formed
</span></pre></div></div><div id='containers' class='section'><h3 ><a class='secnum' href='#containers' style='min-width:103pt'>C.4.11</a> <a href='containers'>[containers]</a>: containers library <a class='abbr_ref' href='diff.cpp14.containers'>[diff.cpp14.containers]</a></h3><div class='para' id='containers-1'><div class='marginalizedparent'><a class='marginalized' href='#containers-1'>1</a></div><div id='containers-1.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='associative.reqmts'>[associative.reqmts]</a>
<br/><b>Change:</b> Requirements change:
<br/><b>Rationale:</b> Increase portability, clarification of associative container requirements<a class='hidden_link' href='#containers-1.sentence-1'>.</a></div> <div id='containers-1.sentence-2' class='sentence'><br/><b>Effect on original feature:</b> 
Valid C++ 2014 code that attempts to use associative containers
having a comparison object with non-const function call operator
may fail to compile in this International Standard:</div><pre class='codeblock'>
#include &lt;set&gt;

struct compare
{
  bool operator()(int a, int b)
  {
    return a &lt; b;
  }
};

int main() {
  const std::set&lt;int, compare&gt; s;
  s.find(0);
}</pre></div></div><div id='depr' class='section'><h3 ><a class='secnum' href='#depr' style='min-width:103pt'>C.4.12</a> <a href='depr'>[depr]</a>: compatibility features <a class='abbr_ref' href='diff.cpp14.depr'>[diff.cpp14.depr]</a></h3><div id='depr-sentence-1' class='sentence'><br/><b>Change:</b> 
The class templates
<span class='texttt'>auto_&shy;ptr</span>,
<span class='texttt'>unary_&shy;function</span>, and
<span class='texttt'>binary_&shy;function</span>,
the function templates
<span class='texttt'>random_&shy;shuffle</span>,
and the function templates (and their return types)
<span class='texttt'>ptr_&shy;fun</span>,
<span class='texttt'>mem_&shy;fun</span>,
<span class='texttt'>mem_&shy;fun_&shy;ref</span>,
<span class='texttt'>bind1st</span>, and
<span class='texttt'>bind2nd</span>
are not defined<a class='hidden_link' href='#depr-sentence-1'>.</a></div> <div id='depr-sentence-2' class='sentence'><br/><b>Rationale:</b> Superseded by new features<a class='hidden_link' href='#depr-sentence-2'>.</a></div> <div id='depr-sentence-3' class='sentence'><br/><b>Effect on original feature:</b> Valid C++ 2014 code that uses these class templates
and function templates may fail to compile in this International Standard<a class='hidden_link' href='#depr-sentence-3'>.</a></div><div style='height:0.6em;display:block'></div><div id='depr-sentence-4' class='sentence'><br/><b>Change:</b> 
Remove old iostreams members [depr<a class='hidden_link' href='#depr-sentence-4'>.</a></div> <div id='depr-sentence-5' class='sentence'>ios<a class='hidden_link' href='#depr-sentence-5'>.</a></div> <div id='depr-sentence-6' class='sentence'>members]<a class='hidden_link' href='#depr-sentence-6'>.</a></div> <div id='depr-sentence-7' class='sentence'><br/><b>Rationale:</b> Redundant feature for compatibility with pre-standard code
has served its time<a class='hidden_link' href='#depr-sentence-7'>.</a></div> <div id='depr-sentence-8' class='sentence'><br/><b>Effect on original feature:</b> A valid C++ 2014 program using these identifiers
may be ill-formed in this International Standard<a class='hidden_link' href='#depr-sentence-8'>.</a></div></div></div></body></html>