<!DOCTYPE html><html lang='en'><head><title>[diff.iso]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='annexnum' style='min-width:50pt'>Annex C&emsp;(informative)</a> Compatibility <a class='abbr_ref' href='./#diff'>[diff]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>C.7</a> C++ and ISO C <a class='abbr_ref'>[diff.iso]</a></h2><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:80pt'>C.7.1</a> General <a class='abbr_ref' href='diff.iso.general'>[diff.iso.general]</a></h3><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2206'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'><a class='index' id=':summary,compatibility_with_ISO_C'></a>Subclause [diff.<span class='shy'></span>iso] lists the differences between C++ and ISO C,
in addition to those listed above,
by the chapters of this document<a class='hidden_link' href='#general-1.sentence-1'>.</a></div></div></div></div><div id='diff.lex' class='section'><h3 ><a class='secnum' href='#diff.lex' style='min-width:80pt'>C.7.2</a> <a href='lex' title='5&emsp;Lexical conventions'>[lex]</a>: lexical conventions <a class='abbr_ref' href='diff.lex'>[diff.lex]</a></h3><div class='para' id='diff.lex-1'><div class='marginalizedparent'><a class='marginalized' href='#diff.lex-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2214'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.key'>[lex.<span class='shy'></span>key]</a>
<br/> <div id='diff.lex-1.sentence-1' class='sentence'><b>Change:</b> New Keywords<br/></div> <div id='diff.lex-1.sentence-2' class='sentence'>
New keywords are added to C++;
see <a href='lex.key' title='5.11&emsp;Keywords'>[lex.<span class='shy'></span>key]</a><a class='hidden_link' href='#diff.lex-1.sentence-2'>.</a></div> <br/> <div id='diff.lex-1.sentence-3' class='sentence'><b>Rationale:</b> These keywords were added in order to implement the new
semantics of C++<a class='hidden_link' href='#diff.lex-1.sentence-3'>.</a></div> <br/> <div id='diff.lex-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#diff.lex-1.sentence-4'>.</a></div> <div id='diff.lex-1.sentence-5' class='sentence'>Any ISO C programs that used any of these keywords as identifiers
are not valid C++ programs<a class='hidden_link' href='#diff.lex-1.sentence-5'>.</a></div> <br/> <div id='diff.lex-1.sentence-6' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#diff.lex-1.sentence-6'>.</a></div> <div id='diff.lex-1.sentence-7' class='sentence'>Converting one specific program is easy<a class='hidden_link' href='#diff.lex-1.sentence-7'>.</a></div> <div id='diff.lex-1.sentence-8' class='sentence'>Converting a large collection
of related programs takes more work<a class='hidden_link' href='#diff.lex-1.sentence-8'>.</a></div> <br/> <div id='diff.lex-1.sentence-9' class='sentence'><b>How widely used:</b> Common<a class='hidden_link' href='#diff.lex-1.sentence-9'>.</a></div></div></div><div class='para' id='diff.lex-2'><div class='marginalizedparent'><a class='marginalized' href='#diff.lex-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2234'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.ccon'>[lex.<span class='shy'></span>ccon]</a>
<br/> <div id='diff.lex-2.sentence-1' class='sentence'><b>Change:</b> Type of <a href='lex.ccon#nt:character-literal' title='5.13.3&emsp;Character literals&emsp;[lex.ccon]'><span id='ntref:character-literal'><span class='textsf'><i >character-literal</i></span></span></a> is changed from <span class='texttt'><span class='keyword'>int</span></span> to <span class='texttt'><span class='keyword'>char</span></span><a class='hidden_link' href='#diff.lex-2.sentence-1'>.</a></div> <br/> <div id='diff.lex-2.sentence-2' class='sentence'><b>Rationale:</b> This is needed for improved overloaded function argument type
matching<a class='hidden_link' href='#diff.lex-2.sentence-2'>.</a></div> <div id='diff.lex-2.sentence-3' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>int</span> function<span class='parenthesis'>(</span> <span class='keyword'>int</span> i <span class='parenthesis'>)</span>;
<span class='keyword'>int</span> function<span class='parenthesis'>(</span> <span class='keyword'>char</span> c <span class='parenthesis'>)</span>;

function<span class='parenthesis'>(</span> <span class='literal'>'x'</span> <span class='parenthesis'>)</span>;
</span></div> <div id='diff.lex-2.sentence-4' class='sentence'>
It is preferable that this call match the second version of
function rather than the first<a class='hidden_link' href='#diff.lex-2.sentence-4'>.</a></div> <br/> <div id='diff.lex-2.sentence-5' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#diff.lex-2.sentence-5'>.</a></div> <div id='diff.lex-2.sentence-6' class='sentence'>ISO C programs which depend on
<span class='codeblock'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='literal'>'x'</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>
</span>
will not work the same as C++ programs<a class='hidden_link' href='#diff.lex-2.sentence-6'>.</a></div> <br/> <div id='diff.lex-2.sentence-7' class='sentence'><b>Difficulty of converting:</b> Simple<a class='hidden_link' href='#diff.lex-2.sentence-7'>.</a></div> <br/> <div id='diff.lex-2.sentence-8' class='sentence'><b>How widely used:</b> Programs which depend upon <span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='literal'>'x'</span><span class='parenthesis'>)</span></span> are probably rare<a class='hidden_link' href='#diff.lex-2.sentence-8'>.</a></div></div></div><div class='para' id='diff.lex-3'><div class='marginalizedparent'><a class='marginalized' href='#diff.lex-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2260'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.string'>[lex.<span class='shy'></span>string]</a>
<br/> <div id='diff.lex-3.sentence-1' class='sentence'><b>Change:</b> Concatenated <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal'><span class='textsf'><i >string-literal</i></span></span></a><i >s</i> can no longer have
conflicting <a href='lex.ccon#nt:encoding-prefix' title='5.13.3&emsp;Character literals&emsp;[lex.ccon]'><span id='ntref:encoding-prefix'><span class='textsf'><i >encoding-prefix</i></span></span></a>es<a class='hidden_link' href='#diff.lex-3.sentence-1'>.</a></div> <br/> <div id='diff.lex-3.sentence-2' class='sentence'><b>Rationale:</b> Removal of non-portable feature<a class='hidden_link' href='#diff.lex-3.sentence-2'>.</a></div> <br/> <div id='diff.lex-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Concatenation of <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal_'><span class='textsf'><i >string-literal</i></span></span></a><i >s</i>
with different <a href='lex.ccon#nt:encoding-prefix' title='5.13.3&emsp;Character literals&emsp;[lex.ccon]'><span id='ntref:encoding-prefix_'><span class='textsf'><i >encoding-prefix</i></span></span></a>es
is now ill-formed<a class='hidden_link' href='#diff.lex-3.sentence-3'>.</a></div> <br/> <div id='diff.lex-3.sentence-4' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#diff.lex-3.sentence-4'>.</a></div> <br/> <div id='diff.lex-3.sentence-5' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.lex-3.sentence-5'>.</a></div></div></div><div class='para' id='diff.lex-4'><div class='marginalizedparent'><a class='marginalized' href='#diff.lex-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2275'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.string'>[lex.<span class='shy'></span>string]</a>
<br/> <div id='diff.lex-4.sentence-1' class='sentence'><b>Change:</b> String literals made const<a class='hidden_link' href='#diff.lex-4.sentence-1'>.</a></div> <br/> <div id='diff.lex-4.sentence-2' class='sentence'>
The type of a <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal__'><span class='textsf'><i >string-literal</i></span></span></a> is changed
from “array of <span class='texttt'><span class='keyword'>char</span></span>”
to “array of <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>char</span></span>”<a class='hidden_link' href='#diff.lex-4.sentence-2'>.</a></div> <div id='diff.lex-4.sentence-3' class='sentence'><a class='index' id=':UTF-8'></a>The type of a UTF-8 string literal is changed
from “array of <span class='texttt'><span class='keyword'>char</span></span>”
to “array of <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>char8_<span class='shy'></span>t</span></span>”<a class='hidden_link' href='#diff.lex-4.sentence-3'>.</a></div> <div id='diff.lex-4.sentence-4' class='sentence'><a class='index' id=':UTF-16'></a>The type of a UTF-16 string literal is changed
from “array of <i >some-integer-type</i>”
to “array of <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>char16_<span class='shy'></span>t</span></span>”<a class='hidden_link' href='#diff.lex-4.sentence-4'>.</a></div> <div id='diff.lex-4.sentence-5' class='sentence'><a class='index' id=':UTF-32'></a>The type of a UTF-32 string literal is changed
from “array of <i >some-integer-type</i>”
to “array of <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>char32_<span class='shy'></span>t</span></span>”<a class='hidden_link' href='#diff.lex-4.sentence-5'>.</a></div> <div id='diff.lex-4.sentence-6' class='sentence'>The type of a wide string literal is changed
from “array of <span id=':wchar_t'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>”
to “array of <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>wchar_<span class='shy'></span>t</span></span>”<a class='hidden_link' href='#diff.lex-4.sentence-6'>.</a></div> <br/> <div id='diff.lex-4.sentence-7' class='sentence'><b>Rationale:</b> This avoids calling an inappropriate overloaded function,
which might expect to be able to modify its argument<a class='hidden_link' href='#diff.lex-4.sentence-7'>.</a></div> <br/> <div id='diff.lex-4.sentence-8' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#diff.lex-4.sentence-8'>.</a></div> <br/> <div id='diff.lex-4.sentence-9' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#diff.lex-4.sentence-9'>.</a></div> <div id='diff.lex-4.sentence-10' class='sentence'>The fix is to add a cast:
<span class='codeblock'><span class='keyword'>char</span><span class='operator'>*</span> p <span class='operator'>=</span> <span class='literal'>"abc"</span>;                <span class='comment'>// valid in C, invalid in C++</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>char</span><span class='operator'>*</span> p <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>"abc"</span>;       <span class='comment'>// OK, cast added</span>
  f<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;
  f<span class='parenthesis'>(</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>"def"</span><span class='parenthesis'>)</span>;              <span class='comment'>// OK, cast added</span>
<span class='curlybracket'>}</span>
</span>
<br/></div> <div id='diff.lex-4.sentence-11' class='sentence'><b>How widely used:</b> Programs that have a legitimate reason to treat string literal objects
as potentially modifiable memory are probably rare<a class='hidden_link' href='#diff.lex-4.sentence-11'>.</a></div></div></div></div><div id='diff.basic' class='section'><h3 ><a class='secnum' href='#diff.basic' style='min-width:80pt'>C.7.3</a> <a href='basic' title='6&emsp;Basics'>[basic]</a>: basics <a class='abbr_ref' href='diff.basic'>[diff.basic]</a></h3><div class='para' id='diff.basic-1'><div class='marginalizedparent'><a class='marginalized' href='#diff.basic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2317'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='basic.def'>[basic.<span class='shy'></span>def]</a>
<br/> <div id='diff.basic-1.sentence-1' class='sentence'><b>Change:</b> C++ does not have “tentative definitions” as in C<a class='hidden_link' href='#diff.basic-1.sentence-1'>.</a><br/></div> <div id='diff.basic-1.sentence-2' class='sentence'>
E.g., at file scope,
<span class='codeblock'><span class='keyword'>int</span> i;
<span class='keyword'>int</span> i;
</span>
is valid in C, invalid in C++<a class='hidden_link' href='#diff.basic-1.sentence-2'>.</a></div> <div id='diff.basic-1.sentence-3' class='sentence'>This makes it impossible to define
mutually referential file-local objects with static storage duration,
if initializers are restricted to the syntactic forms of C<a class='hidden_link' href='#diff.basic-1.sentence-3'>.</a></div> <div id='diff.basic-1.sentence-4' class='sentence'>For example,
<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>int</span> i; <span class='keyword'>struct</span> X<span class='operator'>*</span> next; <span class='curlybracket'>}</span>;

<span class='keyword'>static</span> <span class='keyword'>struct</span> X a;
<span class='keyword'>static</span> <span class='keyword'>struct</span> X b <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>0</span>, <span class='operator'>&amp;</span>a <span class='curlybracket'>}</span>;
<span class='keyword'>static</span> <span class='keyword'>struct</span> X a <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='operator'>&amp;</span>b <span class='curlybracket'>}</span>;
</span>
<br/></div> <div id='diff.basic-1.sentence-5' class='sentence'><b>Rationale:</b> This avoids having different initialization rules for
fundamental types and user-defined types<a class='hidden_link' href='#diff.basic-1.sentence-5'>.</a></div> <br/> <div id='diff.basic-1.sentence-6' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.basic-1.sentence-6'>.</a></div> <br/> <div id='diff.basic-1.sentence-7' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.basic-1.sentence-7'>.</a></div> <div id='diff.basic-1.sentence-8' class='sentence'>In C++, the initializer for one of a set of
mutually-referential file-local objects with static storage
duration must invoke a function
call to achieve the initialization<a class='hidden_link' href='#diff.basic-1.sentence-8'>.</a></div> <br/> <div id='diff.basic-1.sentence-9' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.basic-1.sentence-9'>.</a></div></div></div><div class='para' id='diff.basic-2'><div class='marginalizedparent'><a class='marginalized' href='#diff.basic-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2351'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='basic.scope'>[basic.<span class='shy'></span>scope]</a>
<br/> <div id='diff.basic-2.sentence-1' class='sentence'><b>Change:</b> A <span id=':struct'><span class='texttt'><span class='keyword'>struct</span></span></span> is a scope in C++, not in C.
For example,
<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='keyword'>int</span> a; <span class='curlybracket'>}</span> b;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Y c;
</span>
is valid in C but not in C++, which would require <span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>Y c;</span><a class='hidden_link' href='#diff.basic-2.sentence-1'>.</a></div> <br/> <div id='diff.basic-2.sentence-2' class='sentence'><b>Rationale:</b> Class scope is crucial to C++, and a struct is a class<a class='hidden_link' href='#diff.basic-2.sentence-2'>.</a></div> <br/> <div id='diff.basic-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#diff.basic-2.sentence-3'>.</a></div> <br/> <div id='diff.basic-2.sentence-4' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.basic-2.sentence-4'>.</a></div> <br/> <div id='diff.basic-2.sentence-5' class='sentence'><b>How widely used:</b> C programs use <span id=':struct_'><span class='texttt'><span class='keyword'>struct</span></span></span> extremely frequently, but the
change is only noticeable when <span id=':struct__'><span class='texttt'><span class='keyword'>struct</span></span></span>, enumeration, or enumerator
names are referred to outside the <span id=':struct___'><span class='texttt'><span class='keyword'>struct</span></span></span><a class='hidden_link' href='#diff.basic-2.sentence-5'>.</a></div> <div id='diff.basic-2.sentence-6' class='sentence'>The latter is probably rare<a class='hidden_link' href='#diff.basic-2.sentence-6'>.</a></div></div></div><div class='para' id='diff.basic-3'><div class='marginalizedparent'><a class='marginalized' href='#diff.basic-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2374'>#</a></div><div class='texpara'><div id='diff.basic-3.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='basic.link'>[basic.<span class='shy'></span>link]</a> [also <a href='dcl.type' title='9.2.9&emsp;Type specifiers'>[dcl.<span class='shy'></span>type]</a>]
<br/></div> <div id='diff.basic-3.sentence-2' class='sentence'><b>Change:</b> A name of file scope that is explicitly declared <span id=':const'><span class='texttt'><span class='keyword'>const</span></span></span>, and not explicitly
declared <span id=':extern'><span class='texttt'><span class='keyword'>extern</span></span></span>, has internal linkage, while in C it would have external linkage<a class='hidden_link' href='#diff.basic-3.sentence-2'>.</a></div> <br/> <div id='diff.basic-3.sentence-3' class='sentence'><b>Rationale:</b> Because const objects may be used as values during translation in
C++, this feature urges programmers to provide an explicit initializer
for each const object<a class='hidden_link' href='#diff.basic-3.sentence-3'>.</a></div> <div id='diff.basic-3.sentence-4' class='sentence'>This feature allows the user to put const objects in source files that are included
in more than one translation unit<a class='hidden_link' href='#diff.basic-3.sentence-4'>.</a></div> <br/> <div id='diff.basic-3.sentence-5' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#diff.basic-3.sentence-5'>.</a></div> <br/> <div id='diff.basic-3.sentence-6' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.basic-3.sentence-6'>.</a></div> <br/> <div id='diff.basic-3.sentence-7' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.basic-3.sentence-7'>.</a></div></div></div><div class='para' id='diff.basic-4'><div class='marginalizedparent'><a class='marginalized' href='#diff.basic-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2391'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='basic.start.main'>[basic.<span class='shy'></span>start.<span class='shy'></span>main]</a>
<br/> <div id='diff.basic-4.sentence-1' class='sentence'><b>Change:</b> The <span class='texttt'>main</span> function cannot be called recursively and cannot have its address taken<a class='hidden_link' href='#diff.basic-4.sentence-1'>.</a></div> <br/> <div id='diff.basic-4.sentence-2' class='sentence'><b>Rationale:</b> The <span class='texttt'>main</span> function may require special actions<a class='hidden_link' href='#diff.basic-4.sentence-2'>.</a></div> <br/> <div id='diff.basic-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.basic-4.sentence-3'>.</a></div> <br/> <div id='diff.basic-4.sentence-4' class='sentence'><b>Difficulty of converting:</b> Trivial: create an intermediary function such as
<span class='texttt'>mymain<span class='parenthesis'>(</span>argc, argv<span class='parenthesis'>)</span></span><a class='hidden_link' href='#diff.basic-4.sentence-4'>.</a></div> <br/> <div id='diff.basic-4.sentence-5' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.basic-4.sentence-5'>.</a></div></div></div><div class='para' id='diff.basic-5'><div class='marginalizedparent'><a class='marginalized' href='#diff.basic-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2404'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='basic.types'>[basic.<span class='shy'></span>types]</a>
<br/> <div id='diff.basic-5.sentence-1' class='sentence'><b>Change:</b> C allows “compatible types” in several places, C++ does not<a class='hidden_link' href='#diff.basic-5.sentence-1'>.</a></div> <br/> <div id='diff.basic-5.sentence-2' class='sentence'>
For example,
otherwise-identical <span id=':struct____'><span class='texttt'><span class='keyword'>struct</span></span></span> types with different tag names
are “compatible” in C but are distinctly different types
in C++<a class='hidden_link' href='#diff.basic-5.sentence-2'>.</a></div> <br/> <div id='diff.basic-5.sentence-3' class='sentence'><b>Rationale:</b> Stricter type checking is essential for C++<a class='hidden_link' href='#diff.basic-5.sentence-3'>.</a></div> <br/> <div id='diff.basic-5.sentence-4' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.basic-5.sentence-4'>.</a></div> <br/> <div id='diff.basic-5.sentence-5' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.basic-5.sentence-5'>.</a></div> <div id='diff.basic-5.sentence-6' class='sentence'>The “typesafe linkage” mechanism will find many, but not all,
of such problems<a class='hidden_link' href='#diff.basic-5.sentence-6'>.</a></div> <div id='diff.basic-5.sentence-7' class='sentence'>Those problems not found by typesafe linkage will continue to
function properly,
according to the “layout compatibility rules” of this
document<a class='hidden_link' href='#diff.basic-5.sentence-7'>.</a></div> <br/> <div id='diff.basic-5.sentence-8' class='sentence'><b>How widely used:</b> Common<a class='hidden_link' href='#diff.basic-5.sentence-8'>.</a></div></div></div></div><div id='diff.expr' class='section'><h3 ><a class='secnum' href='#diff.expr' style='min-width:80pt'>C.7.4</a> <a href='expr' title='7&emsp;Expressions'>[expr]</a>: expressions <a class='abbr_ref' href='diff.expr'>[diff.expr]</a></h3><div class='para' id='diff.expr-1'><div class='marginalizedparent'><a class='marginalized' href='#diff.expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2428'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='conv.ptr'>[conv.<span class='shy'></span>ptr]</a>
<br/> <div id='diff.expr-1.sentence-1' class='sentence'><b>Change:</b> Converting <span class='texttt'><span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span><span class='operator'>*</span></span> to a pointer-to-object type requires casting<a class='hidden_link' href='#diff.expr-1.sentence-1'>.</a></div> <span class='codeblock'><span class='keyword'>char</span> a<span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span>;
<span class='keyword'>void</span><span class='operator'>*</span> b<span class='operator'>=</span>a;
<span class='keyword'>void</span> foo<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>char</span><span class='operator'>*</span> c<span class='operator'>=</span>b;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='diff.expr-1.sentence-2' class='sentence'>ISO C accepts this usage of pointer to <span id=':void_'><span class='texttt'><span class='keyword'>void</span></span></span> being assigned
to a pointer to object type<a class='hidden_link' href='#diff.expr-1.sentence-2'>.</a></div> <div id='diff.expr-1.sentence-3' class='sentence'>C++ does not<a class='hidden_link' href='#diff.expr-1.sentence-3'>.</a></div> <br/> <div id='diff.expr-1.sentence-4' class='sentence'><b>Rationale:</b> C++ tries harder than C to enforce compile-time type safety<a class='hidden_link' href='#diff.expr-1.sentence-4'>.</a></div> <br/> <div id='diff.expr-1.sentence-5' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.expr-1.sentence-5'>.</a></div> <br/> <div id='diff.expr-1.sentence-6' class='sentence'><b>Difficulty of converting:</b> Can be automated<a class='hidden_link' href='#diff.expr-1.sentence-6'>.</a></div> <div id='diff.expr-1.sentence-7' class='sentence'>Violations will be diagnosed by the C++ translator<a class='hidden_link' href='#diff.expr-1.sentence-7'>.</a></div> <div id='diff.expr-1.sentence-8' class='sentence'>The
fix is to add a  cast<a class='hidden_link' href='#diff.expr-1.sentence-8'>.</a></div> <div id='diff.expr-1.sentence-9' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>char</span><span class='operator'>*</span> c <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span> b;
</span></div></div><div class='texpara'><br/> <div id='diff.expr-1.sentence-10' class='sentence'><b>How widely used:</b> This is fairly widely used but it is good
programming practice to add the cast when assigning pointer-to-void to pointer-to-object<a class='hidden_link' href='#diff.expr-1.sentence-10'>.</a></div> <div id='diff.expr-1.sentence-11' class='sentence'>Some ISO C translators will give a warning
if the cast is not used<a class='hidden_link' href='#diff.expr-1.sentence-11'>.</a></div></div></div><div class='para' id='diff.expr-2'><div class='marginalizedparent'><a class='marginalized' href='#diff.expr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2462'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='expr.post.incr'>[expr.<span class='shy'></span>post.<span class='shy'></span>incr]</a> and <a href='expr.pre.incr'>[expr.<span class='shy'></span>pre.<span class='shy'></span>incr]</a>
<br/> <div id='diff.expr-2.sentence-1' class='sentence'><b>Change:</b> Decrement operator is not allowed with <span id=':bool'><span class='texttt'><span class='keyword'>bool</span></span></span> operand<a class='hidden_link' href='#diff.expr-2.sentence-1'>.</a></div> <br/> <div id='diff.expr-2.sentence-2' class='sentence'><b>Rationale:</b> Feature with surprising semantics<a class='hidden_link' href='#diff.expr-2.sentence-2'>.</a></div> <br/> <div id='diff.expr-2.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid ISO C expression utilizing the decrement operator on
a <span id=':bool_'><span class='texttt'><span class='keyword'>bool</span></span></span> lvalue
(for instance, via the C typedef in <a href='depr.c.macros#header:%3cstdbool.h%3e' title='D.12&emsp;Deprecated C macros&emsp;[depr.c.macros]'><span id='headerref:<stdbool.h>'><span class='texttt'>&lt;stdbool.h&gt;</span></span></a>)
is ill-formed in C++<a class='hidden_link' href='#diff.expr-2.sentence-3'>.</a></div></div></div><div class='para' id='diff.expr-3'><div class='marginalizedparent'><a class='marginalized' href='#diff.expr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2473'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='expr.sizeof'>[expr.<span class='shy'></span>sizeof]</a> and <a href='expr.cast'>[expr.<span class='shy'></span>cast]</a>
<br/> <div id='diff.expr-3.sentence-1' class='sentence'><b>Change:</b> In C++, types can only be defined in declarations, not in expressions<a class='hidden_link' href='#diff.expr-3.sentence-1'>.</a></div> <br/> <div id='diff.expr-3.sentence-2' class='sentence'>
In C, a <span id=':sizeof'><span class='texttt'><span class='keyword'>sizeof</span></span></span> expression or cast expression may define a new type<a class='hidden_link' href='#diff.expr-3.sentence-2'>.</a></div> <div id='diff.expr-3.sentence-3' class='sentence'>For example,
<span class='codeblock'>p <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>struct</span> x <span class='curlybracket'>{</span><span class='keyword'>int</span> i;<span class='curlybracket'>}</span> <span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>0</span>;
</span>
defines a new type, struct <span class='texttt'>x</span><a class='hidden_link' href='#diff.expr-3.sentence-3'>.</a></div> <br/> <div id='diff.expr-3.sentence-4' class='sentence'><b>Rationale:</b> This prohibition helps to clarify the location of
definitions in the source code<a class='hidden_link' href='#diff.expr-3.sentence-4'>.</a></div> <br/> <div id='diff.expr-3.sentence-5' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.expr-3.sentence-5'>.</a></div> <br/> <div id='diff.expr-3.sentence-6' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#diff.expr-3.sentence-6'>.</a></div> <br/> <div id='diff.expr-3.sentence-7' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.expr-3.sentence-7'>.</a></div></div></div><div class='para' id='diff.expr-4'><div class='marginalizedparent'><a class='marginalized' href='#diff.expr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2492'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='expr.cond'>[expr.<span class='shy'></span>cond]</a>, <a href='expr.ass'>[expr.<span class='shy'></span>ass]</a>, and <a href='expr.comma'>[expr.<span class='shy'></span>comma]</a>
<a class='index' id=':conversion,lvalue-to-rvalue'></a><a class='index' id=':rvalue,lvalue_conversion_to'></a><a class='index' id=':lvalue'></a><br/> <div id='diff.expr-4.sentence-1' class='sentence'><b>Change:</b> The result of a conditional expression, an assignment expression, or a comma expression may be an lvalue<a class='hidden_link' href='#diff.expr-4.sentence-1'>.</a></div> <br/> <div id='diff.expr-4.sentence-2' class='sentence'><b>Rationale:</b> C++ is an object-oriented language, placing relatively
more emphasis on lvalues<a class='hidden_link' href='#diff.expr-4.sentence-2'>.</a></div> <div id='diff.expr-4.sentence-3' class='sentence'>For example, function calls may
yield lvalues<a class='hidden_link' href='#diff.expr-4.sentence-3'>.</a></div> <br/> <div id='diff.expr-4.sentence-4' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#diff.expr-4.sentence-4'>.</a></div> <div id='diff.expr-4.sentence-5' class='sentence'>Some C
expressions that implicitly rely on lvalue-to-rvalue
conversions will yield different results<a class='hidden_link' href='#diff.expr-4.sentence-5'>.</a></div> <div id='diff.expr-4.sentence-6' class='sentence'>For example,
<span class='codeblock'><span class='keyword'>char</span> arr<span class='squarebracket'>[</span><span class='literal'>100</span><span class='squarebracket'>]</span>;
<span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='literal'>0</span>, arr<span class='parenthesis'>)</span>
</span>
yields
<span class='texttt'><span class='literal'>100</span></span>
in C++ and
<span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span></span>
in C<a class='hidden_link' href='#diff.expr-4.sentence-6'>.</a><br/></div> <div id='diff.expr-4.sentence-7' class='sentence'><b>Difficulty of converting:</b> Programs must add explicit casts to the appropriate rvalue<a class='hidden_link' href='#diff.expr-4.sentence-7'>.</a></div> <br/> <div id='diff.expr-4.sentence-8' class='sentence'><b>How widely used:</b> Rare<a class='hidden_link' href='#diff.expr-4.sentence-8'>.</a></div></div></div></div><div id='diff.stat' class='section'><h3 ><a class='secnum' href='#diff.stat' style='min-width:80pt'>C.7.5</a> <a href='stmt.stmt' title='8&emsp;Statements'>[stmt.<span class='shy'></span>stmt]</a>: statements <a class='abbr_ref' href='diff.stat'>[diff.stat]</a></h3><div class='para' id='diff.stat-1'><div class='marginalizedparent'><a class='marginalized' href='#diff.stat-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2523'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='stmt.switch'>[stmt.<span class='shy'></span>switch]</a> and <a href='stmt.goto'>[stmt.<span class='shy'></span>goto]</a>
<br/> <div id='diff.stat-1.sentence-1' class='sentence'><b>Change:</b> It is now invalid to jump past a declaration with explicit or implicit initializer (except across entire block not entered)<a class='hidden_link' href='#diff.stat-1.sentence-1'>.</a></div> <br/> <div id='diff.stat-1.sentence-2' class='sentence'><b>Rationale:</b> Constructors used in initializers may allocate
resources which need to be de-allocated upon leaving the
block<a class='hidden_link' href='#diff.stat-1.sentence-2'>.</a></div> <div id='diff.stat-1.sentence-3' class='sentence'>Allowing jump past initializers would require
complicated runtime determination of allocation<a class='hidden_link' href='#diff.stat-1.sentence-3'>.</a></div> <div id='diff.stat-1.sentence-4' class='sentence'>Furthermore, many operations on such an uninitialized object
have undefined behavior<a class='hidden_link' href='#diff.stat-1.sentence-4'>.</a></div> <div id='diff.stat-1.sentence-5' class='sentence'>With this simple compile-time rule, C++ assures that
if an initialized variable is in scope, then it has assuredly been
initialized<a class='hidden_link' href='#diff.stat-1.sentence-5'>.</a></div> <br/> <div id='diff.stat-1.sentence-6' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.stat-1.sentence-6'>.</a></div> <br/> <div id='diff.stat-1.sentence-7' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.stat-1.sentence-7'>.</a></div> <br/> <div id='diff.stat-1.sentence-8' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.stat-1.sentence-8'>.</a></div></div></div><div class='para' id='diff.stat-2'><div class='marginalizedparent'><a class='marginalized' href='#diff.stat-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2544'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='stmt.return'>[stmt.<span class='shy'></span>return]</a>
<br/> <div id='diff.stat-2.sentence-1' class='sentence'><b>Change:</b> It is now invalid to return (explicitly or implicitly) from a function which is
declared to return a value without actually returning a value<a class='hidden_link' href='#diff.stat-2.sentence-1'>.</a></div> <br/> <div id='diff.stat-2.sentence-2' class='sentence'><b>Rationale:</b> The caller and callee may assume fairly elaborate
return-value mechanisms for the return of class objects<a class='hidden_link' href='#diff.stat-2.sentence-2'>.</a></div> <div id='diff.stat-2.sentence-3' class='sentence'>If
some flow paths execute a return without specifying any value,
the implementation must embody many more complications<a class='hidden_link' href='#diff.stat-2.sentence-3'>.</a></div> <div id='diff.stat-2.sentence-4' class='sentence'>Besides,
promising to return a value of a given type, and then not returning
such a value, has always been recognized to be a questionable
practice, tolerated only because very-old C had no distinction between
functions with <span id=':void__'><span class='texttt'><span class='keyword'>void</span></span></span> and <span id=':int'><span class='texttt'><span class='keyword'>int</span></span></span> return types<a class='hidden_link' href='#diff.stat-2.sentence-4'>.</a></div> <br/> <div id='diff.stat-2.sentence-5' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.stat-2.sentence-5'>.</a></div> <br/> <div id='diff.stat-2.sentence-6' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.stat-2.sentence-6'>.</a></div> <div id='diff.stat-2.sentence-7' class='sentence'>Add an appropriate return value to the source code, such as zero<a class='hidden_link' href='#diff.stat-2.sentence-7'>.</a></div> <br/> <div id='diff.stat-2.sentence-8' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.stat-2.sentence-8'>.</a></div> <div id='diff.stat-2.sentence-9' class='sentence'>For several years, many existing C implementations have produced warnings in
this case<a class='hidden_link' href='#diff.stat-2.sentence-9'>.</a></div></div></div></div><div id='diff.dcl' class='section'><h3 ><a class='secnum' href='#diff.dcl' style='min-width:80pt'>C.7.6</a> <a href='dcl.dcl' title='9&emsp;Declarations'>[dcl.<span class='shy'></span>dcl]</a>: declarations <a class='abbr_ref' href='diff.dcl'>[diff.dcl]</a></h3><div class='para' id='diff.dcl-1'><div class='marginalizedparent'><a class='marginalized' href='#diff.dcl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2571'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.stc'>[dcl.<span class='shy'></span>stc]</a>
<br/> <div id='diff.dcl-1.sentence-1' class='sentence'><b>Change:</b> In C++, the <span id=':static'><span class='texttt'><span class='keyword'>static</span></span></span> or <span id=':extern_'><span class='texttt'><span class='keyword'>extern</span></span></span> specifiers can only be applied to names of objects or functions<a class='hidden_link' href='#diff.dcl-1.sentence-1'>.</a></div> <br/> <div id='diff.dcl-1.sentence-2' class='sentence'>
Using these specifiers with type declarations is illegal in C++<a class='hidden_link' href='#diff.dcl-1.sentence-2'>.</a></div> <div id='diff.dcl-1.sentence-3' class='sentence'>In C, these specifiers are ignored when used on type declarations<a class='hidden_link' href='#diff.dcl-1.sentence-3'>.</a></div></div><div class='texpara'><div id='diff.dcl-1.sentence-4' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>static</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span>               <span class='comment'>// valid C, invalid in C++</span>
  <span class='keyword'>int</span> i;
<span class='curlybracket'>}</span>;
</span></div></div><div class='texpara'><br/> <div id='diff.dcl-1.sentence-5' class='sentence'><b>Rationale:</b> Storage class specifiers don't have any meaning when associated
with a type<a class='hidden_link' href='#diff.dcl-1.sentence-5'>.</a></div> <div id='diff.dcl-1.sentence-6' class='sentence'>In C++, class members can be declared with the <span id=':static_'><span class='texttt'><span class='keyword'>static</span></span></span> storage
class specifier<a class='hidden_link' href='#diff.dcl-1.sentence-6'>.</a></div> <div id='diff.dcl-1.sentence-7' class='sentence'>Storage class specifiers on type
declarations can be confusing for users<a class='hidden_link' href='#diff.dcl-1.sentence-7'>.</a></div> <br/> <div id='diff.dcl-1.sentence-8' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.dcl-1.sentence-8'>.</a></div> <br/> <div id='diff.dcl-1.sentence-9' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#diff.dcl-1.sentence-9'>.</a></div> <br/> <div id='diff.dcl-1.sentence-10' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.dcl-1.sentence-10'>.</a></div></div></div><div class='para' id='diff.dcl-2'><div class='marginalizedparent'><a class='marginalized' href='#diff.dcl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2598'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.stc'>[dcl.<span class='shy'></span>stc]</a>
<br/> <div id='diff.dcl-2.sentence-1' class='sentence'><b>Change:</b> In C++, <span id=':register'><span class='texttt'><span class='keyword'>register</span></span></span> is not a storage class specifier<a class='hidden_link' href='#diff.dcl-2.sentence-1'>.</a></div> <br/> <div id='diff.dcl-2.sentence-2' class='sentence'><b>Rationale:</b> The storage class specifier had no effect in C++<a class='hidden_link' href='#diff.dcl-2.sentence-2'>.</a></div> <br/> <div id='diff.dcl-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.dcl-2.sentence-3'>.</a></div> <br/> <div id='diff.dcl-2.sentence-4' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#diff.dcl-2.sentence-4'>.</a></div> <br/> <div id='diff.dcl-2.sentence-5' class='sentence'><b>How widely used:</b> Common<a class='hidden_link' href='#diff.dcl-2.sentence-5'>.</a></div></div></div><div class='para' id='diff.dcl-3'><div class='marginalizedparent'><a class='marginalized' href='#diff.dcl-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2610'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.typedef'>[dcl.<span class='shy'></span>typedef]</a>
<br/> <div id='diff.dcl-3.sentence-1' class='sentence'><b>Change:</b> A C++ <a href='dcl.typedef#nt:typedef-name' title='9.2.4&emsp;The typedef specifier&emsp;[dcl.typedef]'><span id='ntref:typedef-name'><span class='textsf'><i >typedef-name</i></span></span></a> must be different from any class type name declared
in the same scope (except if the typedef is a synonym of the class name with the
same name)<a class='hidden_link' href='#diff.dcl-3.sentence-1'>.</a></div> <div id='diff.dcl-3.sentence-2' class='sentence'>In C, a <a href='dcl.typedef#nt:typedef-name' title='9.2.4&emsp;The typedef specifier&emsp;[dcl.typedef]'><span id='ntref:typedef-name_'><span class='textsf'><i >typedef-name</i></span></span></a> and a struct tag name declared in the same scope
can have the same name (because they have different name spaces)<a class='hidden_link' href='#diff.dcl-3.sentence-2'>.</a></div></div><div class='texpara'><div id='diff.dcl-3.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>typedef</span> <span class='keyword'>struct</span> name1 <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span> name1;         <span class='comment'>// valid C and C++</span>
<span class='keyword'>struct</span> name <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>typedef</span> <span class='keyword'>int</span> name;               <span class='comment'>// valid C, invalid C++</span>
</span></div></div><div class='texpara'><br/> <div id='diff.dcl-3.sentence-4' class='sentence'><b>Rationale:</b> For ease of use, C++ doesn't require that a type name be prefixed
with the keywords <span id=':class'><span class='texttt'><span class='keyword'>class</span></span></span>, <span id=':struct_____'><span class='texttt'><span class='keyword'>struct</span></span></span> or <span id=':union'><span class='texttt'><span class='keyword'>union</span></span></span> when used in object
declarations or type casts<a class='hidden_link' href='#diff.dcl-3.sentence-4'>.</a></div></div><div class='texpara'><div id='diff.dcl-3.sentence-5' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>class</span> name <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
name i;                         <span class='comment'>// <span class='tcode_in_codeblock'>i</span> has type <span class='tcode_in_codeblock'>class name</span></span>
</span></div></div><div class='texpara'><br/> <div id='diff.dcl-3.sentence-6' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.dcl-3.sentence-6'>.</a></div> <br/> <div id='diff.dcl-3.sentence-7' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.dcl-3.sentence-7'>.</a></div> <div id='diff.dcl-3.sentence-8' class='sentence'>One of the 2 types has to be renamed<a class='hidden_link' href='#diff.dcl-3.sentence-8'>.</a></div> <br/> <div id='diff.dcl-3.sentence-9' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.dcl-3.sentence-9'>.</a></div></div></div><div class='para' id='diff.dcl-4'><div class='marginalizedparent'><a class='marginalized' href='#diff.dcl-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2643'>#</a></div><div class='texpara'><div id='diff.dcl-4.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='dcl.type'>[dcl.<span class='shy'></span>type]</a> [see also <a href='basic.link' title='6.6&emsp;Program and linkage'>[basic.<span class='shy'></span>link]</a>]
<br/></div> <div id='diff.dcl-4.sentence-2' class='sentence'><b>Change:</b> Const objects must be initialized in C++ but can be left uninitialized in C<a class='hidden_link' href='#diff.dcl-4.sentence-2'>.</a><br/></div> <div id='diff.dcl-4.sentence-3' class='sentence'><b>Rationale:</b> A const object cannot be assigned to so it must be initialized
to hold a useful value<a class='hidden_link' href='#diff.dcl-4.sentence-3'>.</a></div> <br/> <div id='diff.dcl-4.sentence-4' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.dcl-4.sentence-4'>.</a></div> <br/> <div id='diff.dcl-4.sentence-5' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.dcl-4.sentence-5'>.</a></div> <br/> <div id='diff.dcl-4.sentence-6' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.dcl-4.sentence-6'>.</a></div></div></div><div class='para' id='diff.dcl-5'><div class='marginalizedparent'><a class='marginalized' href='#diff.dcl-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2656'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.spec.auto'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>
<br/> <div id='diff.dcl-5.sentence-1' class='sentence'><b>Change:</b> The keyword <span id=':auto'><span class='texttt'><span class='keyword'>auto</span></span></span> cannot be used as a storage class specifier<a class='hidden_link' href='#diff.dcl-5.sentence-1'>.</a></div></div><div class='texpara'><div id='diff.dcl-5.sentence-2' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>auto</span> <span class='keyword'>int</span> x;       <span class='comment'>// valid C, invalid C++</span>
<span class='curlybracket'>}</span>
</span></div></div><div class='texpara'><br/> <div id='diff.dcl-5.sentence-3' class='sentence'><b>Rationale:</b> Allowing the use of <span id=':auto_'><span class='texttt'><span class='keyword'>auto</span></span></span> to deduce the type
of a variable from its initializer results in undesired interpretations of
<span id=':auto__'><span class='texttt'><span class='keyword'>auto</span></span></span> as a storage class specifier in certain contexts<a class='hidden_link' href='#diff.dcl-5.sentence-3'>.</a></div> <br/> <div id='diff.dcl-5.sentence-4' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.dcl-5.sentence-4'>.</a></div> <br/> <div id='diff.dcl-5.sentence-5' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#diff.dcl-5.sentence-5'>.</a></div> <br/> <div id='diff.dcl-5.sentence-6' class='sentence'><b>How widely used:</b> Rare<a class='hidden_link' href='#diff.dcl-5.sentence-6'>.</a></div></div></div><div class='para' id='diff.dcl-6'><div class='marginalizedparent'><a class='marginalized' href='#diff.dcl-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2678'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.fct'>[dcl.<span class='shy'></span>fct]</a>
<br/> <div id='diff.dcl-6.sentence-1' class='sentence'><b>Change:</b> In C++, a function declared with an empty parameter list takes no arguments<a class='hidden_link' href='#diff.dcl-6.sentence-1'>.</a></div> <div id='diff.dcl-6.sentence-2' class='sentence'>In C, an empty parameter list means that the number and type of the function arguments are unknown<a class='hidden_link' href='#diff.dcl-6.sentence-2'>.</a></div></div><div class='texpara'><div id='diff.dcl-6.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// means   <span class='tcode_in_codeblock'>int f(void)</span> in C++</span>
                    <span class='comment'>// <span class='tcode_in_codeblock'>int f(</span> unknown <span class='tcode_in_codeblock'>)</span> in C</span>
</span></div></div><div class='texpara'><br/> <div id='diff.dcl-6.sentence-4' class='sentence'><b>Rationale:</b> This is to avoid erroneous function calls (i.e., function calls
with the wrong number or type of arguments)<a class='hidden_link' href='#diff.dcl-6.sentence-4'>.</a></div> <br/> <div id='diff.dcl-6.sentence-5' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#diff.dcl-6.sentence-5'>.</a></div> <div id='diff.dcl-6.sentence-6' class='sentence'>This feature was marked as “obsolescent” in C<a class='hidden_link' href='#diff.dcl-6.sentence-6'>.</a><br/></div> <div id='diff.dcl-6.sentence-7' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#diff.dcl-6.sentence-7'>.</a></div> <div id='diff.dcl-6.sentence-8' class='sentence'>The function declarations using C incomplete declaration style must
be completed to become full prototype declarations<a class='hidden_link' href='#diff.dcl-6.sentence-8'>.</a></div> <div id='diff.dcl-6.sentence-9' class='sentence'>A program may need to be updated further if different calls to the
same (non-prototype) function have different numbers of arguments or
if the type of corresponding arguments differed<a class='hidden_link' href='#diff.dcl-6.sentence-9'>.</a></div> <br/> <div id='diff.dcl-6.sentence-10' class='sentence'><b>How widely used:</b> Common<a class='hidden_link' href='#diff.dcl-6.sentence-10'>.</a></div></div></div><div class='para' id='diff.dcl-7'><div class='marginalizedparent'><a class='marginalized' href='#diff.dcl-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2705'>#</a></div><div class='texpara'><div id='diff.dcl-7.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='dcl.fct'>[dcl.<span class='shy'></span>fct]</a> [see <a href='expr.sizeof' title='7.6.2.5&emsp;Sizeof'>[expr.<span class='shy'></span>sizeof]</a>]
<br/></div> <div id='diff.dcl-7.sentence-2' class='sentence'><b>Change:</b> In C++, types may not be defined in return or parameter types<a class='hidden_link' href='#diff.dcl-7.sentence-2'>.</a></div> <div id='diff.dcl-7.sentence-3' class='sentence'>In C, these type definitions are allowed<a class='hidden_link' href='#diff.dcl-7.sentence-3'>.</a></div></div><div class='texpara'><div id='diff.dcl-7.sentence-4' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>int</span> a; <span class='curlybracket'>}</span> arg <span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>    <span class='comment'>// valid C, invalid C++</span>
<span class='keyword'>enum</span> E <span class='curlybracket'>{</span> A, B, C <span class='curlybracket'>}</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>               <span class='comment'>// valid C, invalid C++</span>
</span></div></div><div class='texpara'><br/> <div id='diff.dcl-7.sentence-5' class='sentence'><b>Rationale:</b> When comparing types in different translation units, C++ relies
on name equivalence when C relies on structural equivalence<a class='hidden_link' href='#diff.dcl-7.sentence-5'>.</a></div> <div id='diff.dcl-7.sentence-6' class='sentence'>Regarding parameter types: since the type defined in a parameter list
would be in the scope of the function, the only legal calls in C++
would be from within the function itself<a class='hidden_link' href='#diff.dcl-7.sentence-6'>.</a></div> <br/> <div id='diff.dcl-7.sentence-7' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.dcl-7.sentence-7'>.</a></div> <br/> <div id='diff.dcl-7.sentence-8' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.dcl-7.sentence-8'>.</a></div> <div id='diff.dcl-7.sentence-9' class='sentence'>The type definitions must be moved to file scope, or in header files<a class='hidden_link' href='#diff.dcl-7.sentence-9'>.</a></div> <br/> <div id='diff.dcl-7.sentence-10' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.dcl-7.sentence-10'>.</a></div> <div id='diff.dcl-7.sentence-11' class='sentence'>This style of type definition is seen as poor coding style<a class='hidden_link' href='#diff.dcl-7.sentence-11'>.</a></div></div></div><div class='para' id='diff.dcl-8'><div class='marginalizedparent'><a class='marginalized' href='#diff.dcl-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2731'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.fct.def'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def]</a>
<br/> <div id='diff.dcl-8.sentence-1' class='sentence'><b>Change:</b> In C++, the syntax for function definition excludes the “old-style” C function<a class='hidden_link' href='#diff.dcl-8.sentence-1'>.</a></div> <div id='diff.dcl-8.sentence-2' class='sentence'>In C, “old-style” syntax is allowed, but deprecated as “obsolescent”<a class='hidden_link' href='#diff.dcl-8.sentence-2'>.</a></div> <br/> <div id='diff.dcl-8.sentence-3' class='sentence'><b>Rationale:</b> Prototypes are essential to type safety<a class='hidden_link' href='#diff.dcl-8.sentence-3'>.</a></div> <br/> <div id='diff.dcl-8.sentence-4' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.dcl-8.sentence-4'>.</a></div> <br/> <div id='diff.dcl-8.sentence-5' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#diff.dcl-8.sentence-5'>.</a></div> <br/> <div id='diff.dcl-8.sentence-6' class='sentence'><b>How widely used:</b> Common in old programs, but already known to be obsolescent<a class='hidden_link' href='#diff.dcl-8.sentence-6'>.</a></div></div></div><div class='para' id='diff.dcl-9'><div class='marginalizedparent'><a class='marginalized' href='#diff.dcl-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2744'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.aggr'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a>
<br/> <div id='diff.dcl-9.sentence-1' class='sentence'><b>Change:</b> In C++, designated initialization support is restricted
compared to the corresponding functionality in C<a class='hidden_link' href='#diff.dcl-9.sentence-1'>.</a></div> <div id='diff.dcl-9.sentence-2' class='sentence'>In C++,
designators for non-static data members
must be specified in declaration order,
designators for array elements and nested designators
are not supported,
and
designated and non-designated initializers
cannot be mixed in the same initializer list<a class='hidden_link' href='#diff.dcl-9.sentence-2'>.</a></div></div><div class='texpara'><div id='diff.dcl-9.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>int</span> x, y; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='keyword'>struct</span> A a; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> A a <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='operator'>.</span>y <span class='operator'>=</span> <span class='literal'>1</span>, <span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>2</span><span class='curlybracket'>}</span>;  <span class='comment'>// valid C, invalid C++</span>
<span class='keyword'>int</span> arr<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='literal'>5</span><span class='curlybracket'>}</span>;         <span class='comment'>// valid C, invalid C++</span>
<span class='keyword'>struct</span> B b <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='operator'>.</span>a<span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>0</span><span class='curlybracket'>}</span>;        <span class='comment'>// valid C, invalid C++</span>
<span class='keyword'>struct</span> A c <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span>;       <span class='comment'>// valid C, invalid C++</span>
</span>
<br/></div> <div id='diff.dcl-9.sentence-4' class='sentence'><b>Rationale:</b> In C++, members are destroyed in reverse construction order
and the elements of an initializer list are evaluated in lexical order,
so field initializers must be specified in order<a class='hidden_link' href='#diff.dcl-9.sentence-4'>.</a></div> <div id='diff.dcl-9.sentence-5' class='sentence'>Array designators conflict with <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression'><span class='textsf'><i >lambda-expression</i></span></span></a> syntax<a class='hidden_link' href='#diff.dcl-9.sentence-5'>.</a></div> <div id='diff.dcl-9.sentence-6' class='sentence'>Nested designators are seldom used<a class='hidden_link' href='#diff.dcl-9.sentence-6'>.</a></div> <br/> <div id='diff.dcl-9.sentence-7' class='sentence'><b>Effect on original feature:</b> Deletion of feature that is incompatible with C++<a class='hidden_link' href='#diff.dcl-9.sentence-7'>.</a></div> <br/> <div id='diff.dcl-9.sentence-8' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#diff.dcl-9.sentence-8'>.</a></div> <br/> <div id='diff.dcl-9.sentence-9' class='sentence'><b>How widely used:</b> Out-of-order initializers are common<a class='hidden_link' href='#diff.dcl-9.sentence-9'>.</a></div> <div id='diff.dcl-9.sentence-10' class='sentence'>The other features are seldom used<a class='hidden_link' href='#diff.dcl-9.sentence-10'>.</a></div></div></div><div class='para' id='diff.dcl-10'><div class='marginalizedparent'><a class='marginalized' href='#diff.dcl-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2780'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.string'>[dcl.<span class='shy'></span>init.<span class='shy'></span>string]</a>
<br/> <div id='diff.dcl-10.sentence-1' class='sentence'><b>Change:</b> In C++, when initializing an array of character with a string, the number of
characters in the string (including the terminating <span class='texttt'>'\<span class='literal'>0</span>'</span>) must not exceed the
number of elements in the array<a class='hidden_link' href='#diff.dcl-10.sentence-1'>.</a></div> <div id='diff.dcl-10.sentence-2' class='sentence'>In C, an array can be initialized with a string even if
the array is not large enough to contain the string-terminating <span class='texttt'>'\<span class='literal'>0</span>'</span><a class='hidden_link' href='#diff.dcl-10.sentence-2'>.</a></div></div><div class='texpara'><div id='diff.dcl-10.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>char</span> array<span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='literal'>"abcd"</span>;         <span class='comment'>// valid C, invalid C++</span>
</span>
<br/></div> <div id='diff.dcl-10.sentence-4' class='sentence'><b>Rationale:</b> When these non-terminated arrays are manipulated by standard
string functions, there is potential for major catastrophe<a class='hidden_link' href='#diff.dcl-10.sentence-4'>.</a></div> <br/> <div id='diff.dcl-10.sentence-5' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.dcl-10.sentence-5'>.</a></div> <br/> <div id='diff.dcl-10.sentence-6' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.dcl-10.sentence-6'>.</a></div> <div id='diff.dcl-10.sentence-7' class='sentence'>The arrays must be declared one element bigger to contain the
string terminating <span class='texttt'>'\<span class='literal'>0</span>'</span><a class='hidden_link' href='#diff.dcl-10.sentence-7'>.</a></div> <br/> <div id='diff.dcl-10.sentence-8' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.dcl-10.sentence-8'>.</a></div> <div id='diff.dcl-10.sentence-9' class='sentence'>This style of array initialization is seen as poor coding style<a class='hidden_link' href='#diff.dcl-10.sentence-9'>.</a></div></div></div><div class='para' id='diff.dcl-11'><div class='marginalizedparent'><a class='marginalized' href='#diff.dcl-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2804'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.enum'>[dcl.<span class='shy'></span>enum]</a>
<br/> <div id='diff.dcl-11.sentence-1' class='sentence'><b>Change:</b> C++ objects of enumeration type can only be assigned values of the same enumeration type<a class='hidden_link' href='#diff.dcl-11.sentence-1'>.</a></div> <div id='diff.dcl-11.sentence-2' class='sentence'>In C, objects of enumeration type can be assigned values of any integral type<a class='hidden_link' href='#diff.dcl-11.sentence-2'>.</a></div></div><div class='texpara'><div id='diff.dcl-11.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>enum</span> color <span class='curlybracket'>{</span> red, blue, green <span class='curlybracket'>}</span>;
<span class='keyword'>enum</span> color c <span class='operator'>=</span> <span class='literal'>1</span>;               <span class='comment'>// valid C, invalid C++</span>
</span></div></div><div class='texpara'><br/> <div id='diff.dcl-11.sentence-4' class='sentence'><b>Rationale:</b> The type-safe nature of C++<a class='hidden_link' href='#diff.dcl-11.sentence-4'>.</a></div> <br/> <div id='diff.dcl-11.sentence-5' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.dcl-11.sentence-5'>.</a></div> <br/> <div id='diff.dcl-11.sentence-6' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#diff.dcl-11.sentence-6'>.</a></div> <div id='diff.dcl-11.sentence-7' class='sentence'>(The type error produced by the assignment can be automatically
corrected by applying an explicit cast<a class='hidden_link' href='#diff.dcl-11.sentence-7'>.</a>)</div> <br/> <div id='diff.dcl-11.sentence-8' class='sentence'><b>How widely used:</b> Common<a class='hidden_link' href='#diff.dcl-11.sentence-8'>.</a></div></div></div><div class='para' id='diff.dcl-12'><div class='marginalizedparent'><a class='marginalized' href='#diff.dcl-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2826'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.enum'>[dcl.<span class='shy'></span>enum]</a>
<br/> <div id='diff.dcl-12.sentence-1' class='sentence'><b>Change:</b> In C++, the type of an enumerator is its enumeration<a class='hidden_link' href='#diff.dcl-12.sentence-1'>.</a></div> <div id='diff.dcl-12.sentence-2' class='sentence'>In C, the type of an enumerator is <span id=':int_'><span class='texttt'><span class='keyword'>int</span></span></span><a class='hidden_link' href='#diff.dcl-12.sentence-2'>.</a></div></div><div class='texpara'><div id='diff.dcl-12.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>enum</span> e <span class='curlybracket'>{</span> A <span class='curlybracket'>}</span>;
<span class='keyword'>sizeof</span><span class='parenthesis'>(</span>A<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>        <span class='comment'>// in C</span>
<span class='keyword'>sizeof</span><span class='parenthesis'>(</span>A<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>e<span class='parenthesis'>)</span>          <span class='comment'>// in C++</span>
<span class='comment'>/* and <span class='tcode_in_codeblock'>sizeof(int)</span> is not necessarily equal to <span class='tcode_in_codeblock'>sizeof(e)</span> */</span>
</span></div></div><div class='texpara'><br/> <div id='diff.dcl-12.sentence-4' class='sentence'><b>Rationale:</b> In C++, an enumeration is a distinct type<a class='hidden_link' href='#diff.dcl-12.sentence-4'>.</a></div> <br/> <div id='diff.dcl-12.sentence-5' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#diff.dcl-12.sentence-5'>.</a></div> <br/> <div id='diff.dcl-12.sentence-6' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.dcl-12.sentence-6'>.</a></div> <br/> <div id='diff.dcl-12.sentence-7' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.dcl-12.sentence-7'>.</a></div> <div id='diff.dcl-12.sentence-8' class='sentence'>The only time this affects existing C code is when the size of an
enumerator is taken<a class='hidden_link' href='#diff.dcl-12.sentence-8'>.</a></div> <div id='diff.dcl-12.sentence-9' class='sentence'>Taking the size of an enumerator is not a
common C coding practice<a class='hidden_link' href='#diff.dcl-12.sentence-9'>.</a></div></div></div><div class='para' id='diff.dcl-13'><div class='marginalizedparent'><a class='marginalized' href='#diff.dcl-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2851'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.align'>[dcl.<span class='shy'></span>align]</a>
<br/> <div id='diff.dcl-13.sentence-1' class='sentence'><b>Change:</b> In C++,
an <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier'><span class='textsf'><i >alignment-specifier</i></span></span></a> is an <a href='dcl.attr.grammar#nt:attribute-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier'><span class='textsf'><i >attribute-specifier</i></span></span></a><a class='hidden_link' href='#diff.dcl-13.sentence-1'>.</a></div> <div id='diff.dcl-13.sentence-2' class='sentence'>In C, an <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier_'><span class='textsf'><i >alignment-specifier</i></span></span></a> is a <span class='textsf'><i >declaration-specifier</i></span><a class='hidden_link' href='#diff.dcl-13.sentence-2'>.</a></div></div><div class='texpara'><div id='diff.dcl-13.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>stdalign<span class='operator'>.</span>h<span class='anglebracket'>&gt;</span>
<span class='keyword'>unsigned</span> <span class='keyword'>alignas</span><span class='parenthesis'>(</span><span class='literal'>8</span><span class='parenthesis'>)</span> <span class='keyword'>int</span> x;      <span class='comment'>// valid C, invalid C++</span>
<span class='keyword'>unsigned</span> <span class='keyword'>int</span> y <span class='keyword'>alignas</span><span class='parenthesis'>(</span><span class='literal'>8</span><span class='parenthesis'>)</span>;      <span class='comment'>// valid C++, invalid C</span>
</span>
<br/></div> <div id='diff.dcl-13.sentence-4' class='sentence'><b>Rationale:</b> C++ requires unambiguous placement of the <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier__'><span class='textsf'><i >alignment-specifier</i></span></span></a><a class='hidden_link' href='#diff.dcl-13.sentence-4'>.</a></div> <br/> <div id='diff.dcl-13.sentence-5' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.dcl-13.sentence-5'>.</a></div> <br/> <div id='diff.dcl-13.sentence-6' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#diff.dcl-13.sentence-6'>.</a></div> <br/> <div id='diff.dcl-13.sentence-7' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.dcl-13.sentence-7'>.</a></div></div></div></div><div id='diff.class' class='section'><h3 ><a class='secnum' href='#diff.class' style='min-width:80pt'>C.7.7</a> <a href='class' title='11&emsp;Classes'>[class]</a>: classes <a class='abbr_ref' href='diff.class'>[diff.class]</a></h3><div class='para' id='diff.class-1'><div class='marginalizedparent'><a class='marginalized' href='#diff.class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2874'>#</a></div><div class='texpara'><div id='diff.class-1.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='class.name'>[class.<span class='shy'></span>name]</a> [see also <a href='dcl.typedef' title='9.2.4&emsp;The typedef specifier'>[dcl.<span class='shy'></span>typedef]</a>]
<br/></div> <div id='diff.class-1.sentence-2' class='sentence'><b>Change:</b> In C++, a class declaration introduces the class name into the scope where it is
declared and hides any object, function or other declaration of that name in an enclosing
scope<a class='hidden_link' href='#diff.class-1.sentence-2'>.</a></div> <div id='diff.class-1.sentence-3' class='sentence'>In C, an inner scope declaration of a struct tag name never hides the name of an
object or function in an outer scope<a class='hidden_link' href='#diff.class-1.sentence-3'>.</a></div></div><div class='texpara'><div id='diff.class-1.sentence-4' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>int</span> x<span class='squarebracket'>[</span><span class='literal'>99</span><span class='squarebracket'>]</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> x <span class='curlybracket'>{</span> <span class='keyword'>int</span> a; <span class='curlybracket'>}</span>;
  <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;  <span class='comment'>/* size of the array in C */</span>
  <span class='comment'>/* size of the struct in <span class='tcode_in_codeblock'><i ><span class='textrm'>C++</span></i></span> */</span>
<span class='curlybracket'>}</span>
</span>
<br/></div> <div id='diff.class-1.sentence-5' class='sentence'><b>Rationale:</b> This is one of the few incompatibilities between C and C++ that
can be attributed to the new C++ name space definition where a
name can be declared as a type and as a non-type in a single scope
causing the non-type name to hide the type name and requiring that
the keywords <span id=':class_'><span class='texttt'><span class='keyword'>class</span></span></span>, <span id=':struct______'><span class='texttt'><span class='keyword'>struct</span></span></span>, <span id=':union_'><span class='texttt'><span class='keyword'>union</span></span></span> or <span id=':enum'><span class='texttt'><span class='keyword'>enum</span></span></span> be used to refer to the type name<a class='hidden_link' href='#diff.class-1.sentence-5'>.</a></div> <div id='diff.class-1.sentence-6' class='sentence'>This new name space definition provides important notational
conveniences to C++ programmers and helps making the use of the
user-defined types as similar as possible to the use of fundamental
types<a class='hidden_link' href='#diff.class-1.sentence-6'>.</a></div> <div id='diff.class-1.sentence-7' class='sentence'>The advantages of the new name space definition were judged to
outweigh by far the incompatibility with C described above<a class='hidden_link' href='#diff.class-1.sentence-7'>.</a></div> <br/> <div id='diff.class-1.sentence-8' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#diff.class-1.sentence-8'>.</a></div> <br/> <div id='diff.class-1.sentence-9' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.class-1.sentence-9'>.</a></div> <div id='diff.class-1.sentence-10' class='sentence'>If the hidden name that needs to be accessed is at global scope,
the <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span></span> C++ operator can be used<a class='hidden_link' href='#diff.class-1.sentence-10'>.</a></div> <div id='diff.class-1.sentence-11' class='sentence'>If the hidden name is at block scope, either the type or the struct
tag has to be renamed<a class='hidden_link' href='#diff.class-1.sentence-11'>.</a></div> <br/> <div id='diff.class-1.sentence-12' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.class-1.sentence-12'>.</a></div></div></div><div class='para' id='diff.class-2'><div class='marginalizedparent'><a class='marginalized' href='#diff.class-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2913'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.copy.ctor'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>
<br/> <div id='diff.class-2.sentence-1' class='sentence'><b>Change:</b> Copying volatile objects<a class='hidden_link' href='#diff.class-2.sentence-1'>.</a></div></div><div class='texpara'><div id='diff.class-2.sentence-2' class='sentence'>The implicitly-declared copy constructor and
implicitly-declared copy assignment operator
cannot make a copy of a volatile lvalue<a class='hidden_link' href='#diff.class-2.sentence-2'>.</a></div> <div id='diff.class-2.sentence-3' class='sentence'>For example, the following is valid in ISO C:
<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>int</span> i; <span class='curlybracket'>}</span>;
<span class='keyword'>volatile</span> <span class='keyword'>struct</span> X x1 <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>0</span><span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> X x2 <span class='operator'>=</span> x1;               <span class='comment'>// invalid C++</span>
<span class='keyword'>struct</span> X x3;
x3 <span class='operator'>=</span> x1;                        <span class='comment'>// also invalid C++</span>
</span></div></div><div class='texpara'><br/> <div id='diff.class-2.sentence-4' class='sentence'><b>Rationale:</b> Several alternatives were debated at length<a class='hidden_link' href='#diff.class-2.sentence-4'>.</a></div> <div id='diff.class-2.sentence-5' class='sentence'>Changing the parameter to
<span id=':volatile'><span class='texttt'><span class='keyword'>volatile</span></span></span>
<span id=':const_'><span class='texttt'><span class='keyword'>const</span></span></span>
<span class='texttt'>X<span class='operator'>&amp;</span></span>
would greatly complicate the generation of
efficient code for class objects<a class='hidden_link' href='#diff.class-2.sentence-5'>.</a></div> <div id='diff.class-2.sentence-6' class='sentence'>Discussion of
providing two alternative signatures for these
implicitly-defined operations raised
unanswered concerns about creating
ambiguities and complicating
the rules that specify the formation of
these operators according to the bases and
members<a class='hidden_link' href='#diff.class-2.sentence-6'>.</a></div> <br/> <div id='diff.class-2.sentence-7' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.class-2.sentence-7'>.</a></div> <br/> <div id='diff.class-2.sentence-8' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.class-2.sentence-8'>.</a></div> <div id='diff.class-2.sentence-9' class='sentence'>If volatile semantics are required for the copy,
a user-declared constructor or assignment must
be provided<a class='hidden_link' href='#diff.class-2.sentence-9'>.</a></div> <div id='diff.class-2.sentence-10' class='sentence'>If non-volatile semantics are required,
an explicit
<span id=':const_cast'><span class='texttt'><span class='keyword'>const_<span class='shy'></span>cast</span></span></span>
can be used<a class='hidden_link' href='#diff.class-2.sentence-10'>.</a></div> <br/> <div id='diff.class-2.sentence-11' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.class-2.sentence-11'>.</a></div></div></div><div class='para' id='diff.class-3'><div class='marginalizedparent'><a class='marginalized' href='#diff.class-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2959'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.bit'>[class.<span class='shy'></span>bit]</a>
<br/> <div id='diff.class-3.sentence-1' class='sentence'><b>Change:</b> <a class='index' id=':bit-field,implementation-defined_sign_of'></a>Bit-fields of type plain <span id=':int__'><span class='texttt'><span class='keyword'>int</span></span></span> are signed<a class='hidden_link' href='#diff.class-3.sentence-1'>.</a></div> <br/> <div id='diff.class-3.sentence-2' class='sentence'><b>Rationale:</b> The signedness needs to be consistent among template specializations<a class='hidden_link' href='#diff.class-3.sentence-2'>.</a></div> <div id='diff.class-3.sentence-3' class='sentence'>For consistency,
the implementation freedom was eliminated for non-dependent types,
too<a class='hidden_link' href='#diff.class-3.sentence-3'>.</a></div> <br/> <div id='diff.class-3.sentence-4' class='sentence'><b>Effect on original feature:</b> The choice is implementation-defined in C, but not so in C++<a class='hidden_link' href='#diff.class-3.sentence-4'>.</a></div> <br/> <div id='diff.class-3.sentence-5' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#diff.class-3.sentence-5'>.</a></div> <br/> <div id='diff.class-3.sentence-6' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.class-3.sentence-6'>.</a></div></div></div><div class='para' id='diff.class-4'><div class='marginalizedparent'><a class='marginalized' href='#diff.class-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2975'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.nest'>[class.<span class='shy'></span>nest]</a>
<br/> <div id='diff.class-4.sentence-1' class='sentence'><b>Change:</b> In C++, the name of a nested class is local to its enclosing class<a class='hidden_link' href='#diff.class-4.sentence-1'>.</a></div> <div id='diff.class-4.sentence-2' class='sentence'>In C
the name of the nested class belongs to the same scope as the name of the outermost enclosing class<a class='hidden_link' href='#diff.class-4.sentence-2'>.</a></div></div><div class='texpara'><div id='diff.class-4.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span> y;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Y yy;                    <span class='comment'>// valid C, invalid C++</span>
</span>
<br/></div> <div id='diff.class-4.sentence-4' class='sentence'><b>Rationale:</b> C++ classes have member functions which require that classes
establish scopes<a class='hidden_link' href='#diff.class-4.sentence-4'>.</a></div> <div id='diff.class-4.sentence-5' class='sentence'>The C rule would leave classes as an incomplete scope mechanism
which would prevent C++ programmers from maintaining locality
within a class<a class='hidden_link' href='#diff.class-4.sentence-5'>.</a></div> <div id='diff.class-4.sentence-6' class='sentence'>A coherent set of scope rules for C++ based on the C rule would
be very complicated and C++ programmers would be unable to predict
reliably the meanings of nontrivial examples involving nested or
local functions<a class='hidden_link' href='#diff.class-4.sentence-6'>.</a></div> <br/> <div id='diff.class-4.sentence-7' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#diff.class-4.sentence-7'>.</a></div> <br/> <div id='diff.class-4.sentence-8' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.class-4.sentence-8'>.</a></div> <div id='diff.class-4.sentence-9' class='sentence'>To make the struct type name visible in the scope of the enclosing
struct, the struct tag can be declared in the scope of the
enclosing struct, before the enclosing struct is defined<a class='hidden_link' href='#diff.class-4.sentence-9'>.</a></div> <div id='diff.class-4.sentence-10' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>struct</span> Y;                       <span class='comment'>// <span class='tcode_in_codeblock'>struct Y</span> and <span class='tcode_in_codeblock'>struct X</span> are at the same scope</span>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span> y;
<span class='curlybracket'>}</span>;
</span></div></div><div class='texpara'><div id='diff.class-4.sentence-11' class='sentence'>All the definitions of C struct types enclosed in other struct
definitions and accessed outside the scope of the enclosing
struct can be exported to the scope of the enclosing struct<a class='hidden_link' href='#diff.class-4.sentence-11'>.</a></div> <div id='diff.class-4.sentence-12' class='sentence'>Note: this is a consequence of the difference in scope rules,
which is documented in <a href='basic.scope' title='6.4&emsp;Scope'>[basic.<span class='shy'></span>scope]</a><a class='hidden_link' href='#diff.class-4.sentence-12'>.</a></div> <br/> <div id='diff.class-4.sentence-13' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.class-4.sentence-13'>.</a></div></div></div><div class='para' id='diff.class-5'><div class='marginalizedparent'><a class='marginalized' href='#diff.class-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3020'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.member.lookup'>[class.<span class='shy'></span>member.<span class='shy'></span>lookup]</a>
<br/> <div id='diff.class-5.sentence-1' class='sentence'><b>Change:</b> In C++, a <a href='dcl.typedef#nt:typedef-name' title='9.2.4&emsp;The typedef specifier&emsp;[dcl.typedef]'><span id='ntref:typedef-name__'><span class='textsf'><i >typedef-name</i></span></span></a> may not be redeclared in a class definition after being used in that definition<a class='hidden_link' href='#diff.class-5.sentence-1'>.</a></div></div><div class='texpara'><div id='diff.class-5.sentence-2' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>typedef</span> <span class='keyword'>int</span> I;
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  I i;
  <span class='keyword'>int</span> I;            <span class='comment'>// valid C, invalid C++</span>
<span class='curlybracket'>}</span>;
</span>
<br/></div> <div id='diff.class-5.sentence-3' class='sentence'><b>Rationale:</b> When classes become complicated, allowing such a redefinition
after the type has been used can create confusion for C++
programmers as to what the meaning of <span class='texttt'>I</span> really is<a class='hidden_link' href='#diff.class-5.sentence-3'>.</a></div> <br/> <div id='diff.class-5.sentence-4' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#diff.class-5.sentence-4'>.</a></div> <br/> <div id='diff.class-5.sentence-5' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.class-5.sentence-5'>.</a></div> <div id='diff.class-5.sentence-6' class='sentence'>Either the type or the struct member has to be renamed<a class='hidden_link' href='#diff.class-5.sentence-6'>.</a></div> <br/> <div id='diff.class-5.sentence-7' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#diff.class-5.sentence-7'>.</a></div></div></div></div><div id='diff.cpp' class='section'><h3 ><a class='secnum' href='#diff.cpp' style='min-width:80pt'>C.7.8</a> <a href='cpp' title='15&emsp;Preprocessing directives'>[cpp]</a>: preprocessing directives <a class='abbr_ref' href='diff.cpp'>[diff.cpp]</a></h3><div class='para' id='diff.cpp-1'><div class='marginalizedparent'><a class='marginalized' href='#diff.cpp-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3046'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='cpp.predefined'>[cpp.<span class='shy'></span>predefined]</a>
<br/> <div id='diff.cpp-1.sentence-1' class='sentence'><b>Change:</b> Whether <span class='texttt'>__STDC__</span> is defined and if so, what its value is, are
<a class='index' id=':definition_and_meaning_of___STDC__'></a>implementation-defined<a class='hidden_link' href='#diff.cpp-1.sentence-1'>.</a></div> <br/> <div id='diff.cpp-1.sentence-2' class='sentence'><b>Rationale:</b> C++ is not identical to ISO C<a class='hidden_link' href='#diff.cpp-1.sentence-2'>.</a></div> <div id='diff.cpp-1.sentence-3' class='sentence'>Mandating that <span class='texttt'>__STDC__</span>
be defined would require that translators make an incorrect claim<a class='hidden_link' href='#diff.cpp-1.sentence-3'>.</a></div> <br/> <div id='diff.cpp-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#diff.cpp-1.sentence-4'>.</a></div> <br/> <div id='diff.cpp-1.sentence-5' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#diff.cpp-1.sentence-5'>.</a></div> <br/> <div id='diff.cpp-1.sentence-6' class='sentence'><b>How widely used:</b> Programs and headers that reference <span class='texttt'>__STDC__</span> are
quite common<a class='hidden_link' href='#diff.cpp-1.sentence-6'>.</a></div></div></div></div></div></body></html>