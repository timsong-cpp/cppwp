<!DOCTYPE html><html lang='en'><head><title>[io_context.io_context.members]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>14</a> Basic I/O services <a class='abbr_ref' href='./#io_context'>[io_context]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>14.2</a> Class <span class='texttt'>io_context</span> <a class='abbr_ref' href='io_context.io_context#members'>[io_context.io_context]</a></h2><div id='io_context.io_context.members'><h3 ><a class='secnum' style='min-width:103pt'>14.2.1</a> <span class='texttt'>io_context</span> members <a class='abbr_ref'>[io_context.io_context.members]</a></h3><p ><span class='indexparent'><a class='index' id='io_context,constructor'></a></span><code class='itemdecl'>
io_context();
explicit io_context(int concurrency_hint);
</code></p><div class='itemdescr'></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='itemdescr'><p ><i>Effects:</i> Creates an object of class <span class='texttt'>io_context</span>.</p></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><p ><i>Remarks:</i> The <span class='texttt'>concurrency_hint</span> parameter is a suggestion to the implementation on the number of threads that should process asynchronous operations and execute function objects.
</p></div></div><p ><span class='indexparent'><a class='index' id='get_executor,io_context'></a></span><span class='indexparent'><a class='index' id='io_context,get_executor'></a></span><code class='itemdecl'>
executor_type get_executor() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i> An executor that may be used for submitting function objects to the <span class='texttt'>io_context</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='run,io_context'></a></span><span class='indexparent'><a class='index' id='io_context,run'></a></span><code class='itemdecl'>
count_type run();
</code></p><div class='itemdescr'></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><p ><i>Effects:</i> Equivalent to:
</p><pre class='codeblock'>
count_type n = 0;
while (run_one())
  if (n != numeric_limits&lt;count_type&gt;::max())
    ++n;
</pre></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>n</span>.</p></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><p >[&nbsp;<i>Note:</i>
Calling <span class='texttt'>run</span> from a thread that is currently calling a run function
can introduce the potential for deadlock.
It is the caller's responsibility to avoid such deadlocks.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]
</p></div></div><p ><span class='indexparent'><a class='index' id='run_for,io_context'></a></span><span class='indexparent'><a class='index' id='io_context,run_for'></a></span><code class='itemdecl'>
template&lt;class Rep, class Period&gt;
  count_type run_for(const chrono::duration&lt;Rep, Period&gt;&amp; rel_time);
</code></p><div class='itemdescr'></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><p ><i>Effects:</i> Equivalent to:
</p><pre class='codeblock'>
return run_until(chrono::steady_clock::now() + rel_time);
</pre></div></div><p ><span class='indexparent'><a class='index' id='run_until,io_context'></a></span><span class='indexparent'><a class='index' id='io_context,run_until'></a></span><code class='itemdecl'>
template&lt;class Clock, class Duration&gt;
  count_type run_until(const chrono::time_point&lt;Clock, Duration&gt;&amp; abs_time);
</code></p><div class='itemdescr'></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='itemdescr'><p ><i>Effects:</i> Equivalent to:
</p><pre class='codeblock'>
count_type n = 0;
while (run_one_until(abs_time))
  if (n != numeric_limits&lt;count_type&gt;::max())
    ++n;
</pre></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>n</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='run_one,io_context'></a></span><span class='indexparent'><a class='index' id='io_context,run_one'></a></span><code class='itemdecl'>
count_type run_one();
</code></p><div class='itemdescr'></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='itemdescr'><p ><i>Effects:</i> If the <span class='texttt'>io_context</span> object has no outstanding work, performs <span class='texttt'>stop()</span>. Otherwise, blocks while the io_context has outstanding work, or until the <span class='texttt'>io_context</span> is stopped, or until one function object has been executed.</p></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='itemdescr'><p >If an executed function object throws an exception, the exception propagates to the caller of <span class='texttt'>run_one()</span>. The <span class='texttt'>io_context</span> state is as if the function object had returned normally.</p></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>1</span> if a function object was executed, otherwise <span class='texttt'>0</span>.</p></div></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='itemdescr'><p ><i>Remarks:</i> This function may invoke additional function objects through nested calls to the <span class='texttt'>io_context</span> executor's <span class='texttt'>dispatch</span> member function. These do not count towards the return value.</p></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='itemdescr'><p >[&nbsp;<i>Note:</i>
Calling <span class='texttt'>run_one</span> from a thread that is currently calling a run function
can introduce the potential for deadlock.
It is the caller's responsibility to avoid such deadlocks.
<i>&nbsp;—&nbsp;end note</i>&nbsp;]
</p></div></div><p ><span class='indexparent'><a class='index' id='run_one_for,io_context'></a></span><span class='indexparent'><a class='index' id='io_context,run_one_for'></a></span><code class='itemdecl'>
template&lt;class Rep, class Period&gt;
  count_type run_one_for(const chrono::duration&lt;Rep, Period&gt;&amp; rel_time);
</code></p><div class='itemdescr'></div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='itemdescr'><p ><i>Effects:</i> Equivalent to:
</p><pre class='codeblock'>
return run_one_until(chrono::steady_clock::now() + rel_time);
</pre></div></div><p ><span class='indexparent'><a class='index' id='run_one_until,io_context'></a></span><span class='indexparent'><a class='index' id='io_context,run_one_until'></a></span><code class='itemdecl'>
template&lt;class Clock, class Duration&gt;
  count_type run_one_until(const chrono::time_point&lt;Clock, Duration&gt;&amp; abs_time);
</code></p><div class='itemdescr'></div><div class='para' id='16'><div class='marginalizedparent'><a class='marginalized' href='#16'>16</a></div><div class='itemdescr'><p ><i>Effects:</i> If the <span class='texttt'>io_context</span> object has no outstanding work, performs <span class='texttt'>stop()</span>. Otherwise, blocks while the io_context has outstanding work, or until the expiration of the absolute timeout (C++ 2014 [thread.req.timing]) specified by <span class='texttt'>abs_time</span>, or until the <span class='texttt'>io_context</span> is stopped, or until one function object has been executed.</p></div></div><div class='para' id='17'><div class='marginalizedparent'><a class='marginalized' href='#17'>17</a></div><div class='itemdescr'><p >If an executed function object throws an exception, the exception propagates to the caller of <span class='texttt'>run_one()</span>. The <span class='texttt'>io_context</span> state is as if the function object had returned normally.</p></div></div><div class='para' id='18'><div class='marginalizedparent'><a class='marginalized' href='#18'>18</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>1</span> if a function object was executed, otherwise <span class='texttt'>0</span>.</p></div></div><div class='para' id='19'><div class='marginalizedparent'><a class='marginalized' href='#19'>19</a></div><div class='itemdescr'><p ><i>Remarks:</i> This function may invoke additional function objects through nested calls to the <span class='texttt'>io_context</span> executor's <span class='texttt'>dispatch</span> member function. These do not count towards the return value.
</p></div></div><p ><span class='indexparent'><a class='index' id='poll,io_context'></a></span><span class='indexparent'><a class='index' id='io_context,poll'></a></span><code class='itemdecl'>
count_type poll();
</code></p><div class='itemdescr'></div><div class='para' id='20'><div class='marginalizedparent'><a class='marginalized' href='#20'>20</a></div><div class='itemdescr'><p ><i>Effects:</i> Equivalent to:
</p><pre class='codeblock'>
count_type n = 0;
while (poll_one())
  if (n != numeric_limits&lt;count_type&gt;::max())
    ++n;
</pre></div></div><div class='para' id='21'><div class='marginalizedparent'><a class='marginalized' href='#21'>21</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>n</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='poll_one,io_context'></a></span><span class='indexparent'><a class='index' id='io_context,poll_one'></a></span><code class='itemdecl'>
count_type poll_one();
</code></p><div class='itemdescr'></div><div class='para' id='22'><div class='marginalizedparent'><a class='marginalized' href='#22'>22</a></div><div class='itemdescr'><p ><i>Effects:</i> If the <span class='texttt'>io_context</span> object has no outstanding work, performs <span class='texttt'>stop()</span>. Otherwise, if there is a function object ready for immediate execution, executes it.</p></div></div><div class='para' id='23'><div class='marginalizedparent'><a class='marginalized' href='#23'>23</a></div><div class='itemdescr'><p >If an executed function object throws an exception, the exception propagates to the caller of <span class='texttt'>poll_one()</span>. The <span class='texttt'>io_context</span> state is as if the function object had returned normally.</p></div></div><div class='para' id='24'><div class='marginalizedparent'><a class='marginalized' href='#24'>24</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>1</span> if a function object was invoked, otherwise <span class='texttt'>0</span>.</p></div></div><div class='para' id='25'><div class='marginalizedparent'><a class='marginalized' href='#25'>25</a></div><div class='itemdescr'><p ><i>Remarks:</i> This function may invoke additional function objects through nested calls to the <span class='texttt'>io_context</span> executor's <span class='texttt'>dispatch</span> member function. These do not count towards the return value.
</p></div></div><p ><span class='indexparent'><a class='index' id='stop,io_context'></a></span><span class='indexparent'><a class='index' id='io_context,stop'></a></span><code class='itemdecl'>
void stop();
</code></p><div class='itemdescr'></div><div class='para' id='26'><div class='marginalizedparent'><a class='marginalized' href='#26'>26</a></div><div class='itemdescr'><p ><i>Effects:</i> Stops the <span class='texttt'>io_context</span>. Concurrent calls to any run function will end as soon as possible. If a call to a run function is currently executing a function object, the call will end only after completion of that function object. The call to <span class='texttt'>stop()</span> returns without waiting for concurrent calls to run functions to complete.</p></div></div><div class='para' id='27'><div class='marginalizedparent'><a class='marginalized' href='#27'>27</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>stopped() == true</span>.</p></div></div><div class='para' id='28'><div class='marginalizedparent'><a class='marginalized' href='#28'>28</a></div><div class='itemdescr'><p >[&nbsp;<i>Note:</i> When <span class='texttt'>stopped() == true</span>, subsequent calls to a run function will exit immediately with a return value of <span class='texttt'>0</span>, without executing any function objects. An <span class='texttt'>io_context</span> remains in the stopped state until a call to <span class='texttt'>restart()</span>. <i>&nbsp;—&nbsp;end note</i>&nbsp;]
</p></div></div><p ><span class='indexparent'><a class='index' id='stopped,io_context'></a></span><span class='indexparent'><a class='index' id='io_context,stopped'></a></span><code class='itemdecl'>
bool stopped() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='29'><div class='marginalizedparent'><a class='marginalized' href='#29'>29</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>true</span> if the <span class='texttt'>io_context</span> is stopped.
</p></div></div><p ><span class='indexparent'><a class='index' id='restart,io_context'></a></span><span class='indexparent'><a class='index' id='io_context,restart'></a></span><code class='itemdecl'>
void restart();
</code></p><div class='itemdescr'></div><div class='para' id='30'><div class='marginalizedparent'><a class='marginalized' href='#30'>30</a></div><div class='itemdescr'><p ><i>Postconditions:</i> <span class='texttt'>stopped() == false</span>.
</p></div></div></div></div></body></html>