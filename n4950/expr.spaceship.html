<!DOCTYPE html><html lang='en'><head><title>[expr.spaceship]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>7.6</a> Compound expressions <a class='abbr_ref' href='expr.compound#expr.spaceship'>[expr.compound]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>7.6.8</a> Three-way comparison operator <a class='abbr_ref'>[expr.spaceship]</a></h3><div class='texpara'><a class='index' id=':expression,three-way_comparison'></a><a class='index' id=':expression,spaceship'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/expressions.tex#L6320'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>The three-way comparison operator groups left-to-right<a class='hidden_link' href='#1.sentence-1'>.</a></div></div><div class='texpara'><a class='index' id=':operator,three-way_comparison'></a><a class='index' id=':operator,spaceship'></a>
<div class='bnf' id='nt:compare-expression'>
<a class='hidden_link' href='#nt:compare-expression' title='7.6.8&emsp;Three-way comparison operator&emsp;[expr.spaceship]'><span id='nt:compare-expression'><span id=':compare-expression'>compare-expression<span class='textnormal'>:</span></span></span></a><br/><a href='expr.shift#nt:shift-expression' title='7.6.7&emsp;Shift operators&emsp;[expr.shift]'><span id='ntref:shift-expression'><span class='textsf'><i >shift-expression</i></span></span></a><br/><a href='#nt:compare-expression' title='7.6.8&emsp;Three-way comparison operator&emsp;[expr.spaceship]'><span id='ntref:compare-expression'><span class='textsf'><i >compare-expression</i></span></span></a> <span class='terminal'><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span></span> <a href='expr.shift#nt:shift-expression' title='7.6.7&emsp;Shift operators&emsp;[expr.shift]'><span id='ntref:shift-expression_'><span class='textsf'><i >shift-expression</i></span></span></a>
</div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/expressions.tex#L6333'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>The expression <span class='texttt'>p <span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span> q</span> is a prvalue indicating whether
<span class='texttt'>p</span> is less than, equal to, greater than, or incomparable with
<span class='texttt'>q</span><a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/expressions.tex#L6338'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>If one of the operands is of type <span id=':bool'><span class='texttt'><span class='keyword'>bool</span></span></span>
and the other is not, the program is ill-formed<a class='hidden_link' href='#3.sentence-1'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/expressions.tex#L6342'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>If both operands have arithmetic types,
or one operand has integral type and
the other operand has unscoped enumeration type,
the usual arithmetic conversions (<a href='expr.arith.conv' title='7.4&emsp;Usual arithmetic conversions'>[expr.<span class='shy'></span>arith.<span class='shy'></span>conv]</a>) are applied to the operands<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>Then:</div></div><div class='texpara'><ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.1'>(4.1)</a></div><div class='texpara'><div id='4.1.sentence-1' class='sentence'>If a narrowing conversion (<a href='dcl.init.list' title='9.4.5&emsp;List-initialization'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>) is required,
other than from an integral type to a floating-point type,
the program is ill-formed<a class='hidden_link' href='#4.1.sentence-1'>.</a></div></div></li><li id='4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.2'>(4.2)</a></div><div class='texpara'><div id='4.2.sentence-1' class='sentence'>Otherwise, if the operands have integral type,
the result is of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_<span class='shy'></span>ordering</span><a class='hidden_link' href='#4.2.sentence-1'>.</a></div> <div id='4.2.sentence-2' class='sentence'>The result is
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_<span class='shy'></span>ordering<span class='operator'>&#x200b;::&#x200b;</span>equal</span>
if both operands are arithmetically equal,
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_<span class='shy'></span>ordering<span class='operator'>&#x200b;::&#x200b;</span>less</span>
if the first operand is arithmetically
less than the second operand,
and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_<span class='shy'></span>ordering<span class='operator'>&#x200b;::&#x200b;</span>greater</span>
otherwise<a class='hidden_link' href='#4.2.sentence-2'>.</a></div></div></li><li id='4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.3'>(4.3)</a></div><div class='texpara'><div id='4.3.sentence-1' class='sentence'>Otherwise, the operands have floating-point type, and
the result is of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>partial_<span class='shy'></span>ordering</span><a class='hidden_link' href='#4.3.sentence-1'>.</a></div> <div id='4.3.sentence-2' class='sentence'>The expression <span class='texttt'>a <span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span> b</span> yields
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>partial_<span class='shy'></span>ordering<span class='operator'>&#x200b;::&#x200b;</span>less</span>
if <span class='texttt'>a</span> is less than <span class='texttt'>b</span>,
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>partial_<span class='shy'></span>ordering<span class='operator'>&#x200b;::&#x200b;</span>greater</span>
if <span class='texttt'>a</span> is greater than <span class='texttt'>b</span>,
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>partial_<span class='shy'></span>ordering<span class='operator'>&#x200b;::&#x200b;</span>equivalent</span>
if <span class='texttt'>a</span> is equivalent to <span class='texttt'>b</span>,
and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>partial_<span class='shy'></span>ordering<span class='operator'>&#x200b;::&#x200b;</span>unordered</span> otherwise<a class='hidden_link' href='#4.3.sentence-2'>.</a></div></div></li></ul></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/expressions.tex#L6381'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>If both operands have the same enumeration type <span class='texttt'>E</span>,
the operator yields the result of
converting the operands to the underlying type of <span class='texttt'>E</span>
and applying <span class='texttt'><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span></span> to the converted operands<a class='hidden_link' href='#5.sentence-1'>.</a></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/expressions.tex#L6387'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>If at least one of the operands is of object pointer type and
the other operand is of object pointer or array type,
array-to-pointer conversions (<a href='conv.array' title='7.3.3&emsp;Array-to-pointer conversion'>[conv.<span class='shy'></span>array]</a>),
pointer conversions (<a href='conv.ptr' title='7.3.12&emsp;Pointer conversions'>[conv.<span class='shy'></span>ptr]</a>),
and
qualification conversions (<a href='conv.qual' title='7.3.6&emsp;Qualification conversions'>[conv.<span class='shy'></span>qual]</a>)
are performed on both operands
to bring them to their composite pointer type (<a href='expr.type' title='7.2.2&emsp;Type'>[expr.<span class='shy'></span>type]</a>)<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>After the conversions, the operands shall have the same type<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='6.sentence-3' class='sentence'>If both of the operands are arrays,
array-to-pointer conversions (<a href='conv.array' title='7.3.3&emsp;Array-to-pointer conversion'>[conv.<span class='shy'></span>array]</a>) are not applied<a class='hidden_link' href='#6.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='6.sentence-4' class='sentence'>
In this case,
<span class='texttt'>p <span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span> q</span> is of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_<span class='shy'></span>ordering</span> and
the result is defined by the following rules:
<ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#6.1'>(6.1)</a></div>If two pointer operands <span class='texttt'>p</span> and <span class='texttt'>q</span> compare equal (<a href='expr.eq' title='7.6.10&emsp;Equality operators'>[expr.<span class='shy'></span>eq]</a>),
<span class='texttt'>p <span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span> q</span> yields <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_<span class='shy'></span>ordering<span class='operator'>&#x200b;::&#x200b;</span>equal</span>;</li><li id='6.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#6.2'>(6.2)</a></div>otherwise, if <span class='texttt'>p</span> and <span class='texttt'>q</span> compare unequal,
<span class='texttt'>p <span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span> q</span> yields
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_<span class='shy'></span>ordering<span class='operator'>&#x200b;::&#x200b;</span>less</span>
if <span class='texttt'>q</span> compares greater than <span class='texttt'>p</span>
and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_<span class='shy'></span>ordering<span class='operator'>&#x200b;::&#x200b;</span>greater</span>
if <span class='texttt'>p</span> compares greater than <span class='texttt'>q</span> (<a href='expr.rel' title='7.6.9&emsp;Relational operators'>[expr.<span class='shy'></span>rel]</a>);</li><li id='6.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#6.3'>(6.3)</a></div>otherwise, the result is unspecified<a class='hidden_link' href='#6.sentence-4'>.</a></li></ul></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/expressions.tex#L6420'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>Otherwise, the program is ill-formed<a class='hidden_link' href='#7.sentence-1'>.</a></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/expressions.tex#L6423'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'>The three comparison category types (<a href='cmp.categories' title='17.11.2&emsp;Comparison category types'>[cmp.<span class='shy'></span>categories]</a>)
(the types
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>strong_<span class='shy'></span>ordering</span>,
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>weak_<span class='shy'></span>ordering</span>, and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>partial_<span class='shy'></span>ordering</span>)
are not predefined;
if a standard library declaration (<a href='compare.syn' title='17.11.1&emsp;Header &lt;compare&gt; synopsis'>[compare.<span class='shy'></span>syn]</a>, <a href='std.modules' title='16.4.2.4&emsp;Modules'>[std.<span class='shy'></span>modules]</a>)
of such a class type does not precede (<a href='basic.lookup.general' title='6.5.1&emsp;General'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>general]</a>)
a use of that type —
even an implicit use in which the type is not named
(e.g., via the <span id=':auto'><span class='texttt'><span class='keyword'>auto</span></span></span> specifier (<a href='dcl.spec.auto' title='9.2.9.6&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>)
in a defaulted three-way comparison (<a href='class.spaceship' title='11.10.3&emsp;Three-way comparison'>[class.<span class='shy'></span>spaceship]</a>)
or use of the built-in operator) — the program is ill-formed<a class='hidden_link' href='#8.sentence-1'>.</a></div></div></div></div></body></html>