<!DOCTYPE html><html lang='en'><head><title>[class.copy.ctor]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>11</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>11.4</a> Class members <a class='abbr_ref' href='class.mem#class.copy.ctor'>[class.mem]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>11.4.5</a> Constructors <a class='abbr_ref' href='class.ctor#class.copy.ctor'>[class.ctor]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>11.4.5.3</a> Copy/move constructors <a class='abbr_ref'>[class.copy.ctor]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1349'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':constructor,copy'></a><a class='index' id=':constructor,move'></a>A non-template constructor for class
<span class='texttt'>X</span>
is
a
copy
constructor if its first parameter is of type
<span class='texttt'>X<span class='operator'>&amp;</span></span>,
<span class='texttt'><span class='keyword'>const</span> X<span class='operator'>&amp;</span></span>,
<span class='texttt'><span class='keyword'>volatile</span> X<span class='operator'>&amp;</span></span>
or
<span class='texttt'><span class='keyword'>const</span> <span class='keyword'>volatile</span> X<span class='operator'>&amp;</span></span>,
and either there are no other parameters
or else all other parameters have default arguments (<a href='dcl.fct.default' title='9.3.4.7&emsp;Default arguments'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>default]</a>)<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<div id='1.sentence-2' class='sentence'><span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>X<span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='parenthesis'>)</span></span>
and
<span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>X<span class='parenthesis'>(</span>X<span class='operator'>&amp;</span>,<span class='keyword'>int</span><span class='operator'>=</span><span class='literal'>1</span><span class='parenthesis'>)</span></span>
are copy constructors<a class='hidden_link' href='#1.sentence-2'>.</a></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  X<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  X<span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span>, <span class='keyword'>int</span> <span class='operator'>=</span> <span class='literal'>1</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
X a<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;             <span class='comment'>// calls <span class='tcode_in_codeblock'>X(int);</span></span>
X b<span class='parenthesis'>(</span>a, <span class='literal'>0</span><span class='parenthesis'>)</span>;          <span class='comment'>// calls <span class='tcode_in_codeblock'>X(const X&amp;, int);</span></span>
X c <span class='operator'>=</span> b;            <span class='comment'>// calls <span class='tcode_in_codeblock'>X(const X&amp;, int);</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1384'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>A non-template constructor for class <span class='texttt'>X</span> is a move constructor if its
first parameter is of type <span class='texttt'>X<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>, <span class='texttt'><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>,
<span class='texttt'><span class='keyword'>volatile</span> X<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>, or <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>volatile</span> X<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>, and either there are
no other parameters or else all other parameters have default
arguments (<a href='dcl.fct.default' title='9.3.4.7&emsp;Default arguments'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>default]</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<div id='2.sentence-2' class='sentence'><span class='texttt'>Y<span class='operator'>&#x200b;::&#x200b;</span>Y<span class='parenthesis'>(</span>Y<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span></span> is a move constructor<a class='hidden_link' href='#2.sentence-2'>.</a></div> <span class='codeblock'><span class='keyword'>struct</span> Y <span class='curlybracket'>{</span>
  Y<span class='parenthesis'>(</span><span class='keyword'>const</span> Y<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
  Y<span class='parenthesis'>(</span>Y<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>extern</span> Y f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
Y d<span class='parenthesis'>(</span>f<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;          <span class='comment'>// calls <span class='tcode_in_codeblock'>Y(Y&amp;&amp;)</span></span>
Y e <span class='operator'>=</span> d;            <span class='comment'>// calls <span class='tcode_in_codeblock'>Y(const Y&amp;)</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1403'>#</a></div><div class='texpara'><div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='3.sentence-1' class='sentence'>All forms of copy/move constructor can be declared for a class<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  X<span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
  X<span class='parenthesis'>(</span>X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;            <span class='comment'>// OK</span>
  X<span class='parenthesis'>(</span>X<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
  X<span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;     <span class='comment'>// OK, but possibly not sensible</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1418'>#</a></div><div class='texpara'><div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='4.sentence-1' class='sentence'>If a class
<span class='texttt'>X</span>
only has a copy constructor with a parameter of type
<span class='texttt'>X<span class='operator'>&amp;</span></span>,
an initializer of type
<span id=':const'><span class='texttt'><span class='keyword'>const</span></span></span>
<span class='texttt'>X</span>
or
<span class='texttt'><span class='keyword'>volatile</span></span>
<span class='texttt'>X</span>
cannot initialize an object of type
<span class='mathit'>cv</span> <span class='texttt'>X</span><a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  X<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// default constructor</span>
  X<span class='parenthesis'>(</span>X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;            <span class='comment'>// copy constructor with a non-const parameter</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>const</span> X cx;
X x <span class='operator'>=</span> cx;           <span class='comment'>// error: <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;X(X&amp;)</span> cannot copy <span class='tcode_in_codeblock'>cx</span> into <span class='tcode_in_codeblock'>x</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1444'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>A declaration of a constructor for a class
<span class='texttt'>X</span>
is ill-formed if its first parameter is of type
<span class='mathit'>cv</span> <span class='texttt'>X</span>
and either there are no other parameters or else all other parameters have
default arguments<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>A member function template is never instantiated to
produce such a constructor signature<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> S<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

S g;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  S a<span class='parenthesis'>(</span>g<span class='parenthesis'>)</span>;           <span class='comment'>// does not instantiate the member template to produce <span class='tcode_in_codeblock'>S&#x200b;::&#x200b;S&lt;S&gt;(S)</span>;</span>
                    <span class='comment'>// uses the implicitly declared copy constructor</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1469'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>If the class definition does not explicitly declare a copy constructor,
a non-explicit one is declared <a class='hidden_link' href='#def:constructor,copy,implicitly_declared' title='11.4.5.3&emsp;Copy/move constructors&emsp;[class.copy.ctor]'><span id='def:constructor,copy,implicitly_declared'><i >implicitly</i></span></a><a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>If the class definition declares a move
constructor or move assignment operator, the implicitly declared copy
constructor is defined as deleted; otherwise, it is
defaulted (<a href='dcl.fct.def' title='9.5&emsp;Function definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def]</a>)<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>The latter case is deprecated if the class has a user-declared copy assignment
operator or a user-declared destructor  (<a href='depr.impldec' title='D.8&emsp;Implicit declaration of copy functions'>[depr.<span class='shy'></span>impldec]</a>)<a class='hidden_link' href='#6.sentence-3'>.</a></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1479'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>The implicitly-declared copy constructor for a class
<span class='texttt'>X</span>
will have the form
<span class='codeblock'>X<span class='operator'>::</span>X<span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>
</span>
if each potentially constructed subobject of a class type
<span class='texttt'>M</span>
(or array thereof)
has a copy constructor whose first parameter is of type
<span id=':const_'><span class='texttt'><span class='keyword'>const</span></span></span>
<span class='texttt'>M<span class='operator'>&amp;</span></span>
or
<span id=':const__'><span class='texttt'><span class='keyword'>const</span></span></span>
<span class='texttt'><span class='keyword'>volatile</span></span>
<span class='texttt'>M<span class='operator'>&amp;</span></span><a class='hidden_link' href='#7.sentence-1'>.</a><a class='footnoteref' href='#footnote-94' id='footnoteref-94' title='This implies that the reference parameter of the implicitly-declared copy constructor cannot bind to a volatile lvalue; see [diff.class].'>94</a></div> <div id='7.sentence-2' class='sentence'>
Otherwise, the implicitly-declared copy constructor will have the form
<span class='codeblock'>X<span class='operator'>::</span>X<span class='parenthesis'>(</span>X<span class='operator'>&amp;</span><span class='parenthesis'>)</span>
</span></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1508'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'><a class='index' id=':constructor,move,implicitly_declared'></a>If the definition of a class <span class='texttt'>X</span> does not explicitly declare
a move constructor, a non-explicit one will be
implicitly declared as defaulted if and only if
<ul class='itemize'><li id='8.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#8.1'>(8.1)</a></div><span class='texttt'>X</span> does not have a user-declared copy constructor,</li><li id='8.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#8.2'>(8.2)</a></div><span class='texttt'>X</span> does not have a user-declared copy assignment operator,</li><li id='8.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#8.3'>(8.3)</a></div><span class='texttt'>X</span> does not have a user-declared move assignment operator, and</li><li id='8.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#8.4'>(8.4)</a></div><span class='texttt'>X</span> does not have a user-declared destructor<a class='hidden_link' href='#8.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='8.sentence-2' class='sentence'>When the move constructor is not implicitly declared or explicitly supplied,
expressions that otherwise would have invoked the move constructor might instead invoke
a copy constructor<a class='hidden_link' href='#8.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1533'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'>The implicitly-declared move constructor for class <span class='texttt'>X</span> will have the form
<span class='codeblock'>X<span class='operator'>::</span>X<span class='parenthesis'>(</span>X<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>
</span></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1539'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'>An implicitly-declared copy/move constructor is an
inline public member of its class<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>A defaulted copy/&#x200b;move constructor for a class
  <span class='texttt'>X</span> is defined as deleted (<a href='dcl.fct.def.delete' title='9.5.3&emsp;Deleted definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>delete]</a>) if <span class='texttt'>X</span> has:
<ul class='itemize'><li id='10.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#10.1'>(10.1)</a></div>a potentially constructed subobject of type
  <span class='texttt'>M</span> (or array thereof) that cannot be copied/moved because
  overload resolution (<a href='over.match' title='12.2&emsp;Overload resolution'>[over.<span class='shy'></span>match]</a>), as applied to find
  <span class='texttt'>M</span>'s
  corresponding constructor, results in an ambiguity or
  a function that is deleted or inaccessible from the
  defaulted constructor,</li><li id='10.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#10.2'>(10.2)</a></div>a variant member whose corresponding constructor
  as selected by overload resolution is non-trivial,</li><li id='10.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#10.3'>(10.3)</a></div>any potentially constructed subobject of a type
  with a destructor that is deleted or inaccessible from the defaulted
  constructor, or,</li><li id='10.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#10.4'>(10.4)</a></div>for the copy constructor, a non-static data member of rvalue reference type<a class='hidden_link' href='#10.sentence-2'>.</a></li></ul></div></div><div class='texpara'><div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>:&ensp;<div id='10.sentence-3' class='sentence'>A defaulted move constructor that is defined as deleted is ignored by overload
resolution (<a href='over.match' title='12.2&emsp;Overload resolution'>[over.<span class='shy'></span>match]</a>, <a href='over.over' title='12.3&emsp;Address of an overload set'>[over.<span class='shy'></span>over]</a>)<a class='hidden_link' href='#10.sentence-3'>.</a></div> <div id='10.sentence-4' class='sentence'>Such a constructor would otherwise interfere with initialization from
an rvalue which can use the copy constructor instead<a class='hidden_link' href='#10.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1570'>#</a></div><div class='texpara'><div id='11.sentence-1' class='sentence'><a class='index' id=':constructor,copy,trivial'></a><a class='index' id=':constructor,move,trivial'></a>A copy/move constructor for class
<span class='texttt'>X</span>
is
trivial
if it is not user-provided and if:
<ul class='itemize'><li id='11.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#11.1'>(11.1)</a></div>class
<span class='texttt'>X</span>
has no virtual functions (<a href='class.virtual' title='11.7.3&emsp;Virtual functions'>[class.<span class='shy'></span>virtual]</a>)
and no virtual base classes (<a href='class.mi' title='11.7.2&emsp;Multiple base classes'>[class.<span class='shy'></span>mi]</a>), and</li><li id='11.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#11.2'>(11.2)</a></div>the constructor selected to copy/move each direct base class subobject is trivial, and</li><li id='11.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#11.3'>(11.3)</a></div>for each non-static data member of
<span class='texttt'>X</span>
that is of class type (or array thereof),
the constructor selected to copy/move that member is trivial;</li></ul></div></div><div class='texpara'><div id='11.sentence-2' class='sentence'><a class='index' id=':constructor,move,non-trivial'></a>otherwise the copy/move constructor is
<a class='hidden_link' href='#def:constructor,copy,nontrivial' title='11.4.5.3&emsp;Copy/move constructors&emsp;[class.copy.ctor]'><span id='def:constructor,copy,nontrivial'><i >non-trivial</i></span></a><a class='hidden_link' href='#11.sentence-2'>.</a></div></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1599'>#</a></div><div class='texpara'><div id='note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-5'>5</a></i>:&ensp;<div id='12.sentence-1' class='sentence'>The copy/move constructor is implicitly defined even if the implementation elided
its odr-use (<a href='basic.def.odr#term.odr.use' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>, <a href='class.temporary' title='6.7.7&emsp;Temporary objects'>[class.<span class='shy'></span>temporary]</a>)<a class='hidden_link' href='#12.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='12.sentence-2' class='sentence'>
If an implicitly-defined (<a href='dcl.fct.def.default' title='9.5.2&emsp;Explicitly-defaulted functions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>default]</a>) constructor would be constexpr-suitable (<a href='dcl.constexpr' title='9.2.6&emsp;The constexpr and consteval specifiers'>[dcl.<span class='shy'></span>constexpr]</a>),
the implicitly-defined
constructor is <span id=':constexpr'><span class='texttt'><span class='keyword'>constexpr</span></span></span><a class='hidden_link' href='#12.sentence-2'>.</a></div></div></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1608'>#</a></div><div class='texpara'><div id='13.sentence-1' class='sentence'>Before the defaulted copy/move constructor for a class is
implicitly defined,
all non-user-provided copy/move constructors for its
potentially constructed subobjects
are implicitly defined<a class='hidden_link' href='#13.sentence-1'>.</a></div> <div id='note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-6'>6</a></i>:&ensp;<div id='13.sentence-2' class='sentence'>An implicitly-declared copy/move constructor has an
implied exception specification (<a href='except.spec' title='14.5&emsp;Exception specifications'>[except.<span class='shy'></span>spec]</a>)<a class='hidden_link' href='#13.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1619'>#</a></div><div class='texpara'><div id='14.sentence-1' class='sentence'>The implicitly-defined copy/move constructor for a non-union class
<span class='texttt'>X</span>
performs a memberwise copy/move of its bases and members<a class='hidden_link' href='#14.sentence-1'>.</a></div> <div id='note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-7'>7</a></i>:&ensp;<div id='14.sentence-2' class='sentence'>Default member initializers of non-static data members are ignored<a class='hidden_link' href='#14.sentence-2'>.</a></div> <div id='14.sentence-3' class='sentence'>See also the example in <a href='class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a><a class='hidden_link' href='#14.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='14.sentence-4' class='sentence'>
The order of initialization is the same as the order of initialization of bases
and members in a user-defined constructor (see <a href='class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#14.sentence-4'>.</a></div> <div id='14.sentence-5' class='sentence'>Let <span class='texttt'>x</span> be either the parameter of the constructor or, for the move constructor, an
xvalue referring to the parameter<a class='hidden_link' href='#14.sentence-5'>.</a></div> <div id='14.sentence-6' class='sentence'>Each base or non-static data member
is copied/moved in the manner appropriate to its type:
<ul class='itemize'><li id='14.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.1'>(14.1)</a></div>if the member is an array, each element is
direct-initialized with the corresponding subobject of <span class='texttt'>x</span>;</li><li id='14.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.2'>(14.2)</a></div>if a member <span class='texttt'>m</span> has rvalue reference type <span class='texttt'>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>, it is direct-initialized with
<span class='texttt'><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>x<span class='operator'>.</span>m<span class='parenthesis'>)</span></span>;</li><li id='14.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#14.3'>(14.3)</a></div>otherwise, the base or member is direct-initialized with the corresponding base or member of <span class='texttt'>x</span><a class='hidden_link' href='#14.sentence-6'>.</a></li></ul></div></div><div class='texpara'><div id='14.sentence-7' class='sentence'><a class='index' id=':initialization,virtual_base_class'></a>Virtual base class subobjects shall be initialized only once by
the implicitly-defined copy/move constructor (see <a href='class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#14.sentence-7'>.</a></div></div></div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/classes.tex#L1649'>#</a></div><div class='texpara'><div id='15.sentence-1' class='sentence'>The implicitly-defined copy/move constructor for a union
<span class='texttt'>X</span> copies the object representation (<a href='basic.types.general#term.object.representation' title='6.8.1&emsp;General'>[basic.<span class='shy'></span>types.<span class='shy'></span>general]</a>) of <span class='texttt'>X</span><a class='hidden_link' href='#15.sentence-1'>.</a></div> <div id='15.sentence-2' class='sentence'>For each object nested within (<a href='intro.object' title='6.7.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>)
the object that is the source of the copy,
a corresponding object <span class='math'><span class='mathalpha'>o</span></span> nested within the destination
is identified (if the object is a subobject) or created (otherwise),
and the lifetime of <span class='math'><span class='mathalpha'>o</span></span> begins before the copy is performed<a class='hidden_link' href='#15.sentence-2'>.</a></div> 
</div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-94'><div class='texpara'><a class='footnotenum' href='#footnote-94'>94)</a><a class='footnoteBacklink' href='#footnoteref-94'>94)</a> <div id='footnote-94.sentence-1' class='sentence'>This implies that the reference parameter of the
implicitly-declared copy constructor
cannot bind to a
<span class='texttt'><span class='keyword'>volatile</span></span>
lvalue; see <a href='diff.class' title='C.6.7&emsp;[class]: classes'>[diff.<span class='shy'></span>class]</a><a class='hidden_link' href='#footnote-94.sentence-1'>.</a></div></div></div></div></body></html>