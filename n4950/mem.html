<!DOCTYPE html><html lang='en'><head><title>[mem]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>20</a> Memory management library <a class='abbr_ref' href='./#mem'>[mem]</a></h1><div id='general' class='section'><h2 ><a class='secnum' href='#general' style='min-width:65pt'>20.1</a> General <a class='abbr_ref' href='mem.general'>[mem.general]</a></h2><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'>This Clause describes components for memory management<a class='hidden_link' href='#general-1.sentence-1'>.</a></div></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L9'>#</a></div><div class='texpara'><div id='general-2.sentence-1' class='sentence'>The following subclauses describe general memory management facilities,
smart pointers, memory resources, and scoped allocators,
as summarized in Table <a href='#tab:mem.summary' title='Table 43: Memory management library summary'>43</a><a class='hidden_link' href='#general-2.sentence-1'>.</a></div></div><div class='texpara'><div class='numberedTable' id='tab:mem.summary'>Table <a href='#tab:mem.summary'>43</a>: Memory management library summary&emsp;<a href='./tab:mem.summary'>[tab:mem.summary]</a><br><table ><tr id='tab:mem.summary-row-1' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:mem.summary-row-1'>🔗</a></div></td><td class='empty left'></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-1-column-2-sentence-1' class='sentence'><b>Subclause</b></div></div></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-1-column-3-sentence-1' class='sentence'><b>Header</b></div></div></td></tr><tr id='tab:mem.summary-row-2' class='capsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:mem.summary-row-2'>🔗</a></div></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-2-column-1-sentence-1' class='sentence'><a href='#memory' title='20.2&emsp;Memory'>[memory]</a></div></div></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-2-column-2-sentence-1' class='sentence'>Memory</div></div></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-2-column-3-sentence-1' class='sentence'><span class='texttt'><span class='anglebracket'>&lt;</span>cstdlib<span class='anglebracket'>&gt;</span></span>, <span class='texttt'><span class='anglebracket'>&lt;</span>memory<span class='anglebracket'>&gt;</span></span></div></div></td></tr><tr id='tab:mem.summary-row-3' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:mem.summary-row-3'>🔗</a></div></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-3-column-1-sentence-1' class='sentence'><a href='#smartptr' title='20.3&emsp;Smart pointers'>[smartptr]</a></div></div></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-3-column-2-sentence-1' class='sentence'>Smart pointers</div></div></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-3-column-3-sentence-1' class='sentence'><span class='texttt'><span class='anglebracket'>&lt;</span>memory<span class='anglebracket'>&gt;</span></span></div></div></td></tr><tr id='tab:mem.summary-row-4' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:mem.summary-row-4'>🔗</a></div></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-4-column-1-sentence-1' class='sentence'><a href='#res' title='20.4&emsp;Memory resources'>[mem.<span class='shy'></span>res]</a></div></div></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-4-column-2-sentence-1' class='sentence'>Memory resources</div></div></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-4-column-3-sentence-1' class='sentence'><span class='texttt'><span class='anglebracket'>&lt;</span>memory_<span class='shy'></span>resource<span class='anglebracket'>&gt;</span></span></div></div></td></tr><tr id='tab:mem.summary-row-5' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:mem.summary-row-5'>🔗</a></div></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-5-column-1-sentence-1' class='sentence'><a href='#allocator.adaptor' title='20.5&emsp;Class template scoped_&shy;allocator_&shy;adaptor'>[allocator.<span class='shy'></span>adaptor]</a></div></div></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-5-column-2-sentence-1' class='sentence'>Scoped allocators</div></div></td><td class='left'><div class='texpara'><div id='tab:mem.summary-row-5-column-3-sentence-1' class='sentence'><span class='texttt'><span class='anglebracket'>&lt;</span>scoped_<span class='shy'></span>allocator<span class='anglebracket'>&gt;</span></span></div></div></td></tr></table></div></div></div></div><div id='memory' class='section'><h2 ><a class='secnum' href='#memory' style='min-width:65pt'>20.2</a> Memory <a class='abbr_ref' href='memory'>[memory]</a></h2><div id='memory.general' class='section'><h3 ><a class='secnum' href='#memory.general' style='min-width:80pt'>20.2.1</a> In general <a class='abbr_ref' href='memory.general'>[memory.general]</a></h3><div class='para' id='memory.general-1'><div class='marginalizedparent'><a class='marginalized' href='#memory.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L25'>#</a></div><div class='texpara'><div id='memory.general-1.sentence-1' class='sentence'>Subclause <a href='#memory' title='20.2&emsp;Memory'>[memory]</a> describes the contents of the header
<a href='#header:%3cmemory%3e' title='20.2.2&emsp;Header &lt;memory&gt; synopsis&emsp;[memory.syn]'><span id='headerref:<memory>'><span class='texttt'>&lt;memory&gt;</span></span></a> and some
of the contents of the header <a href='cstdlib.syn#header:%3ccstdlib%3e' title='17.2.2&emsp;Header &lt;cstdlib&gt; synopsis&emsp;[cstdlib.syn]'><span id='headerref:<cstdlib>'><span class='texttt'>&lt;cstdlib&gt;</span></span></a><a class='hidden_link' href='#memory.general-1.sentence-1'>.</a></div></div></div></div><div id='memory.syn' class='section'><h3 ><a class='secnum' href='#memory.syn' style='min-width:80pt'>20.2.2</a> Header <span class='texttt'>&lt;memory&gt;</span> synopsis <a class='abbr_ref' href='memory.syn'>[memory.syn]</a></h3><div class='para' id='memory.syn-1'><div class='marginalizedparent'><a class='marginalized' href='#memory.syn-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L32'>#</a></div><div class='texpara'><div id='memory.syn-1.sentence-1' class='sentence'>The header <span id='header:<memory>'><span class='texttt'><span class='anglebracket'>&lt;</span>memory<span class='anglebracket'>&gt;</span></span></span> defines several types and function templates that
describe properties of pointers and pointer-like types, manage memory
for containers and other template types, destroy objects, and
construct objects in
uninitialized memory
buffers (<a href='#pointer.traits' title='20.2.3&emsp;Pointer traits'>[pointer.<span class='shy'></span>traits]</a>–<a href='#specialized.addressof' title='20.2.11&emsp;addressof'>[specialized.<span class='shy'></span>addressof]</a> and <a href='specialized.algorithms' title='27.11&emsp;Specialized &lt;memory&gt; algorithms'>[specialized.<span class='shy'></span>algorithms]</a>)<a class='hidden_link' href='#memory.syn-1.sentence-1'>.</a></div> <div id='memory.syn-1.sentence-2' class='sentence'>The header also defines the templates
<span class='texttt'>unique_<span class='shy'></span>ptr</span>, <span class='texttt'>shared_<span class='shy'></span>ptr</span>, <span class='texttt'>weak_<span class='shy'></span>ptr</span>,
<span class='texttt'>out_<span class='shy'></span>ptr_<span class='shy'></span>t</span>, <span class='texttt'>inout_<span class='shy'></span>ptr_<span class='shy'></span>t</span>, and various function
templates that operate on objects of these types (<a href='#smartptr' title='20.3&emsp;Smart pointers'>[smartptr]</a>)<a class='hidden_link' href='#memory.syn-1.sentence-2'>.</a></div></div></div><div class='para' id='memory.syn-2'><div class='marginalizedparent'><a class='marginalized' href='#memory.syn-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L44'>#</a></div><div class='texpara'><div id='memory.syn-2.sentence-1' class='sentence'>Let <span class='texttt'><span class='texttt'><i >POINTER_<span class='shy'></span>OF</i></span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span> denote a type that is
<ul class='itemize'><li id='memory.syn-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#memory.syn-2.1'>(2.1)</a></div><span class='texttt'>T<span class='operator'>&#x200b;::&#x200b;</span>pointer</span> if the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>T<span class='operator'>&#x200b;::&#x200b;</span>pointer</span>
is valid and denotes a type,</li><li id='memory.syn-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#memory.syn-2.2'>(2.2)</a></div>otherwise, <span class='texttt'>T<span class='operator'>&#x200b;::&#x200b;</span>element_<span class='shy'></span>type<span class='operator'>*</span></span>
if the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>T<span class='operator'>&#x200b;::&#x200b;</span>element_<span class='shy'></span>type</span>
is valid and denotes a type,</li><li id='memory.syn-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#memory.syn-2.3'>(2.3)</a></div>otherwise, <span class='texttt'>pointer_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>element_<span class='shy'></span>type<span class='operator'>*</span></span><a class='hidden_link' href='#memory.syn-2.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='memory.syn-3'><div class='marginalizedparent'><a class='marginalized' href='#memory.syn-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L58'>#</a></div><div class='texpara'><div id='memory.syn-3.sentence-1' class='sentence'>Let <span class='texttt'><span class='texttt'><i >POINTER_<span class='shy'></span>OF_<span class='shy'></span>OR</i></span><span class='parenthesis'>(</span>T, U<span class='parenthesis'>)</span></span> denote a type that is:
<ul class='itemize'><li id='memory.syn-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#memory.syn-3.1'>(3.1)</a></div><span class='texttt'><span class='texttt'><i >POINTER_<span class='shy'></span>OF</i></span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span>
if <span class='texttt'><span class='texttt'><i >POINTER_<span class='shy'></span>OF</i></span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span> is valid and denotes a type,</li><li id='memory.syn-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#memory.syn-3.2'>(3.2)</a></div>otherwise, <span class='texttt'>U</span><a class='hidden_link' href='#memory.syn-3.sentence-1'>.</a></li></ul></div></div><div class='texpara'><span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>compare<span class='anglebracket'>&gt;</span>              <span class='comment'>// see <a href='compare.syn' title='17.11.1&emsp;Header &lt;compare&gt; synopsis'>[compare.<span class='shy'></span>syn]</a></span>

<span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='comment'>// <a href='#pointer.traits' title='20.2.3&emsp;Pointer traits'>[pointer.<span class='shy'></span>traits]</a>, pointer traits</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Ptr<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> pointer_traits;                                        <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> pointer_traits<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span>;                                      <span class='comment'>// freestanding</span>

  <span class='comment'>// <a href='#pointer.conversion' title='20.2.4&emsp;Pointer conversion'>[pointer.<span class='shy'></span>conversion]</a>, pointer conversion</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> T<span class='operator'>*</span> to_address<span class='parenthesis'>(</span>T<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;                                         <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Ptr<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> to_address<span class='parenthesis'>(</span><span class='keyword'>const</span> Ptr<span class='operator'>&amp;</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;                               <span class='comment'>// freestanding</span>

  <span class='comment'>// <a href='#ptr.align' title='20.2.5&emsp;Pointer alignment'>[ptr.<span class='shy'></span>align]</a>, pointer alignment</span>
  <span class='keyword'>void</span><span class='operator'>*</span> align<span class='parenthesis'>(</span>size_t alignment, size_t size, <span class='keyword'>void</span><span class='operator'>*</span><span class='operator'>&amp;</span> ptr, size_t<span class='operator'>&amp;</span> space<span class='parenthesis'>)</span>;            <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>size_t N, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> T<span class='operator'>*</span> assume_aligned<span class='parenthesis'>(</span>T<span class='operator'>*</span> ptr<span class='parenthesis'>)</span>;                              <span class='comment'>// freestanding</span>

  <span class='comment'>// <a href='#obj.lifetime' title='20.2.6&emsp;Explicit lifetime management'>[obj.<span class='shy'></span>lifetime]</a>, explicit lifetime management</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T<span class='operator'>*</span> start_lifetime_as<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;                                         <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>const</span> T<span class='operator'>*</span> start_lifetime_as<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>void</span><span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;                             <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>volatile</span> T<span class='operator'>*</span> start_lifetime_as<span class='parenthesis'>(</span><span class='keyword'>volatile</span> <span class='keyword'>void</span><span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;                       <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>const</span> <span class='keyword'>volatile</span> T<span class='operator'>*</span> start_lifetime_as<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>void</span><span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;           <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    T<span class='operator'>*</span> start_lifetime_as_array<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p, size_t n<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;                         <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>const</span> T<span class='operator'>*</span> start_lifetime_as_array<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>void</span><span class='operator'>*</span> p, size_t n<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;             <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>volatile</span> T<span class='operator'>*</span> start_lifetime_as_array<span class='parenthesis'>(</span><span class='keyword'>volatile</span> <span class='keyword'>void</span><span class='operator'>*</span> p, size_t n<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;       <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>const</span> <span class='keyword'>volatile</span> T<span class='operator'>*</span> start_lifetime_as_array<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>void</span><span class='operator'>*</span> p,               <span class='comment'>// freestanding</span>
	                                      size_t n<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#allocator.tag' title='20.2.7&emsp;Allocator argument tag'>[allocator.<span class='shy'></span>tag]</a>, allocator argument tag</span>
  <span class='keyword'>struct</span> allocator_arg_t <span class='curlybracket'>{</span>                                                          <span class='comment'>// freestanding</span>
      <span class='keyword'>explicit</span> allocator_arg_t<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;                                         <span class='comment'>// freestanding</span>
  <span class='curlybracket'>}</span>;
  <span class='keyword'>inline</span> <span class='keyword'>constexpr</span> allocator_arg_t allocator_arg<span class='curlybracket'>{</span><span class='curlybracket'>}</span>;                                 <span class='comment'>// freestanding</span>

  <span class='comment'>// <a href='#allocator.uses' title='20.2.8&emsp;uses_&shy;allocator'>[allocator.<span class='shy'></span>uses]</a>, <span class='tcode_in_codeblock'>uses_<span class='shy'></span>allocator</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> uses_allocator;                             <span class='comment'>// freestanding</span>

  <span class='comment'>// <a href='#allocator.uses.trait' title='20.2.8.1&emsp;uses_&shy;allocator trait'>[allocator.<span class='shy'></span>uses.<span class='shy'></span>trait]</a>, <span class='tcode_in_codeblock'>uses_<span class='shy'></span>allocator</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span id='lib:uses_allocator_v'><a class='hidden_link' href='#lib:uses_allocator_v' title='20.2.2&emsp;Header &lt;memory&gt; synopsis&emsp;[memory.syn]'>uses_allocator_v</a></span> <span class='operator'>=</span> uses_allocator<span class='anglebracket'>&lt;</span>T, Alloc<span class='anglebracket'>&gt;</span><span class='operator'>::</span>value;              <span class='comment'>// freestanding</span>

  <span class='comment'>// <a href='#allocator.uses.construction' title='20.2.8.2&emsp;Uses-allocator construction'>[allocator.<span class='shy'></span>uses.<span class='shy'></span>construction]</a>, uses-allocator construction</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,             <span class='comment'>// freestanding</span>
                                                    Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> Tuple1, <span class='keyword'>class</span> Tuple2<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,             <span class='comment'>// freestanding</span>
                                                    piecewise_construct_t,
                                                    Tuple1<span class='operator'>&amp;</span><span class='operator'>&amp;</span> x, Tuple2<span class='operator'>&amp;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;   <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> U, <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,             <span class='comment'>// freestanding</span>
                                                    U<span class='operator'>&amp;</span><span class='operator'>&amp;</span> u, V<span class='operator'>&amp;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> U, <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,             <span class='comment'>// freestanding</span>
                                                    pair<span class='anglebracket'>&lt;</span>U, V<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> pr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> U, <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,             <span class='comment'>// freestanding</span>
                                                    <span class='keyword'>const</span> pair<span class='anglebracket'>&lt;</span>U, V<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> pr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> U, <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,             <span class='comment'>// freestanding</span>
                                                    pair<span class='anglebracket'>&lt;</span>U, V<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> pr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> U, <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,             <span class='comment'>// freestanding</span>
                                                    <span class='keyword'>const</span> pair<span class='anglebracket'>&lt;</span>U, V<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> pr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <a href='tuple.syn#concept:pair-like' title='22.4.2&emsp;Header &lt;tuple&gt; synopsis&emsp;[tuple.syn]'><span id='conceptref:pair-like'><span class='tcode_in_codeblock'><i >pair-like</i></span></span></a> P<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,             <span class='comment'>// freestanding</span>
                                                    P<span class='operator'>&amp;</span><span class='operator'>&amp;</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,             <span class='comment'>// freestanding</span>
                                                    U<span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> T make_obj_using_allocator<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;       <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> T<span class='operator'>*</span> uninitialized_construct_using_allocator<span class='parenthesis'>(</span>T<span class='operator'>*</span> p,                      <span class='comment'>// freestanding</span>
                                                         <span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;

  <span class='comment'>// <a href='#allocator.traits' title='20.2.9&emsp;Allocator traits'>[allocator.<span class='shy'></span>traits]</a>, allocator traits</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Alloc<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> allocator_traits;                                    <span class='comment'>// freestanding</span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Pointer, <span class='keyword'>class</span> SizeType <span class='operator'>=</span> size_t<span class='anglebracket'>&gt;</span>
  <span class='keyword'>struct</span> allocation_result <span class='curlybracket'>{</span>                                                        <span class='comment'>// freestanding</span>
    Pointer ptr;
    SizeType count;
  <span class='curlybracket'>}</span>;

  <span class='comment'>// <a href='#default.allocator' title='20.2.10&emsp;The default allocator'>[default.<span class='shy'></span>allocator]</a>, the default allocator</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> allocator;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> allocator<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> allocator<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#specialized.addressof' title='20.2.11&emsp;addressof'>[specialized.<span class='shy'></span>addressof]</a>, addressof</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> T<span class='operator'>*</span> addressof<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;                                          <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>const</span> T<span class='operator'>*</span> addressof<span class='parenthesis'>(</span><span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;                                         <span class='comment'>// freestanding</span>

  <span class='comment'>// <a href='specialized.algorithms' title='27.11&emsp;Specialized &lt;memory&gt; algorithms'>[specialized.<span class='shy'></span>algorithms]</a>, specialized algorithms</span>
  <span class='comment'>// <a href='special.mem.concepts' title='27.11.2&emsp;Special memory concepts'>[special.<span class='shy'></span>mem.<span class='shy'></span>concepts]</a>, special memory concepts</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> I<span class='anglebracket'>&gt;</span>
    <span class='keyword'>concept</span> <a href='special.mem.concepts#concept:nothrow-input-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-input-iterator'><span class='tcode_in_codeblock'><i >nothrow-input-iterator</i></span></span></a> <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;    <span class='comment'>// <i >exposition only</i></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> I<span class='anglebracket'>&gt;</span>
    <span class='keyword'>concept</span> <a href='special.mem.concepts#concept:nothrow-forward-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-iterator'><span class='tcode_in_codeblock'><i >nothrow-forward-iterator</i></span></span></a> <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;  <span class='comment'>// <i >exposition only</i></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> S, <span class='keyword'>class</span> I<span class='anglebracket'>&gt;</span>
    <span class='keyword'>concept</span> <a href='special.mem.concepts#concept:nothrow-sentinel-for' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-sentinel-for'><span class='tcode_in_codeblock'><i >nothrow-sentinel-for</i></span></span></a> <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;      <span class='comment'>// <i >exposition only</i></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> R<span class='anglebracket'>&gt;</span>
    <span class='keyword'>concept</span> <a href='special.mem.concepts#concept:nothrow-input-range' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-input-range'><span class='tcode_in_codeblock'><i >nothrow-input-range</i></span></span></a> <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;       <span class='comment'>// <i >exposition only</i></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> R<span class='anglebracket'>&gt;</span>
    <span class='keyword'>concept</span> <a href='special.mem.concepts#concept:nothrow-forward-range' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-range'><span class='tcode_in_codeblock'><i >nothrow-forward-range</i></span></span></a> <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;     <span class='comment'>// <i >exposition only</i></span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> uninitialized_default_construct<span class='parenthesis'>(</span>NoThrowForwardIterator first,              <span class='comment'>// freestanding</span>
                                         NoThrowForwardIterator last<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> ExecutionPolicy, <span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> uninitialized_default_construct<span class='parenthesis'>(</span>ExecutionPolicy<span class='operator'>&amp;</span><span class='operator'>&amp;</span> exec,                    <span class='comment'>// see <a href='algorithms.parallel.overloads' title='27.3.5&emsp;ExecutionPolicy algorithm overloads'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>overloads]</a></span>
                                         NoThrowForwardIterator first,
                                         NoThrowForwardIterator last<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> NoThrowForwardIterator, <span class='keyword'>class</span> Size<span class='anglebracket'>&gt;</span>
    NoThrowForwardIterator
      uninitialized_default_construct_n<span class='parenthesis'>(</span>NoThrowForwardIterator first, Size n<span class='parenthesis'>)</span>;      <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> ExecutionPolicy, <span class='keyword'>class</span> NoThrowForwardIterator, <span class='keyword'>class</span> Size<span class='anglebracket'>&gt;</span>
    NoThrowForwardIterator
      uninitialized_default_construct_n<span class='parenthesis'>(</span>ExecutionPolicy<span class='operator'>&amp;</span><span class='operator'>&amp;</span> exec,                     <span class='comment'>// see <a href='algorithms.parallel.overloads' title='27.3.5&emsp;ExecutionPolicy algorithm overloads'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>overloads]</a></span>
                                        NoThrowForwardIterator first, Size n<span class='parenthesis'>)</span>;

  <span class='keyword'>namespace</span> ranges <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='special.mem.concepts#concept:nothrow-forward-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-iterator_'><span class='tcode_in_codeblock'><i >nothrow-forward-iterator</i></span></span></a> I, <a href='special.mem.concepts#concept:nothrow-sentinel-for' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-sentinel-for_'><span class='tcode_in_codeblock'><i >nothrow-sentinel-for</i></span></span></a><span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span> S<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.default.init#concept:default_initializable' title='18.4.12&emsp;Concept default_&shy;initializable&emsp;[concept.default.init]'><span id='conceptref:default_initializable'><span class='tcode_in_codeblock'>default_<span class='shy'></span>initializable</span></span></a><span class='anglebracket'>&lt;</span>iter_value_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        I uninitialized_default_construct<span class='parenthesis'>(</span>I first, S last<span class='parenthesis'>)</span>;                         <span class='comment'>// freestanding</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='special.mem.concepts#concept:nothrow-forward-range' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-range_'><span class='tcode_in_codeblock'><i >nothrow-forward-range</i></span></span></a> R<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.default.init#concept:default_initializable' title='18.4.12&emsp;Concept default_&shy;initializable&emsp;[concept.default.init]'><span id='conceptref:default_initializable_'><span class='tcode_in_codeblock'>default_<span class='shy'></span>initializable</span></span></a><span class='anglebracket'>&lt;</span>range_value_t<span class='anglebracket'>&lt;</span>R<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        borrowed_iterator_t<span class='anglebracket'>&lt;</span>R<span class='anglebracket'>&gt;</span> uninitialized_default_construct<span class='parenthesis'>(</span>R<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;              <span class='comment'>// freestanding</span>

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='special.mem.concepts#concept:nothrow-forward-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-iterator__'><span class='tcode_in_codeblock'><i >nothrow-forward-iterator</i></span></span></a> I<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.default.init#concept:default_initializable' title='18.4.12&emsp;Concept default_&shy;initializable&emsp;[concept.default.init]'><span id='conceptref:default_initializable__'><span class='tcode_in_codeblock'>default_<span class='shy'></span>initializable</span></span></a><span class='anglebracket'>&lt;</span>iter_value_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        I uninitialized_default_construct_n<span class='parenthesis'>(</span>I first, iter_difference_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span> n<span class='parenthesis'>)</span>;       <span class='comment'>// freestanding</span>
  <span class='curlybracket'>}</span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> uninitialized_value_construct<span class='parenthesis'>(</span>NoThrowForwardIterator first,                <span class='comment'>// freestanding</span>
                                       NoThrowForwardIterator last<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> ExecutionPolicy, <span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> uninitialized_value_construct<span class='parenthesis'>(</span>ExecutionPolicy<span class='operator'>&amp;</span><span class='operator'>&amp;</span> exec,                      <span class='comment'>// see <a href='algorithms.parallel.overloads' title='27.3.5&emsp;ExecutionPolicy algorithm overloads'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>overloads]</a></span>
                                       NoThrowForwardIterator first,
                                       NoThrowForwardIterator last<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> NoThrowForwardIterator, <span class='keyword'>class</span> Size<span class='anglebracket'>&gt;</span>
    NoThrowForwardIterator
      uninitialized_value_construct_n<span class='parenthesis'>(</span>NoThrowForwardIterator first, Size n<span class='parenthesis'>)</span>;        <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> ExecutionPolicy, <span class='keyword'>class</span> NoThrowForwardIterator, <span class='keyword'>class</span> Size<span class='anglebracket'>&gt;</span>
    NoThrowForwardIterator
      uninitialized_value_construct_n<span class='parenthesis'>(</span>ExecutionPolicy<span class='operator'>&amp;</span><span class='operator'>&amp;</span> exec,                       <span class='comment'>// see <a href='algorithms.parallel.overloads' title='27.3.5&emsp;ExecutionPolicy algorithm overloads'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>overloads]</a></span>
                                      NoThrowForwardIterator first, Size n<span class='parenthesis'>)</span>;

  <span class='keyword'>namespace</span> ranges <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='special.mem.concepts#concept:nothrow-forward-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-iterator___'><span class='tcode_in_codeblock'><i >nothrow-forward-iterator</i></span></span></a> I, <a href='special.mem.concepts#concept:nothrow-sentinel-for' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-sentinel-for__'><span class='tcode_in_codeblock'><i >nothrow-sentinel-for</i></span></span></a><span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span> S<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.default.init#concept:default_initializable' title='18.4.12&emsp;Concept default_&shy;initializable&emsp;[concept.default.init]'><span id='conceptref:default_initializable___'><span class='tcode_in_codeblock'>default_<span class='shy'></span>initializable</span></span></a><span class='anglebracket'>&lt;</span>iter_value_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        I uninitialized_value_construct<span class='parenthesis'>(</span>I first, S last<span class='parenthesis'>)</span>;                           <span class='comment'>// freestanding</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='special.mem.concepts#concept:nothrow-forward-range' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-range__'><span class='tcode_in_codeblock'><i >nothrow-forward-range</i></span></span></a> R<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.default.init#concept:default_initializable' title='18.4.12&emsp;Concept default_&shy;initializable&emsp;[concept.default.init]'><span id='conceptref:default_initializable____'><span class='tcode_in_codeblock'>default_<span class='shy'></span>initializable</span></span></a><span class='anglebracket'>&lt;</span>range_value_t<span class='anglebracket'>&lt;</span>R<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        borrowed_iterator_t<span class='anglebracket'>&lt;</span>R<span class='anglebracket'>&gt;</span> uninitialized_value_construct<span class='parenthesis'>(</span>R<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;                <span class='comment'>// freestanding</span>

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='special.mem.concepts#concept:nothrow-forward-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-iterator____'><span class='tcode_in_codeblock'><i >nothrow-forward-iterator</i></span></span></a> I<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.default.init#concept:default_initializable' title='18.4.12&emsp;Concept default_&shy;initializable&emsp;[concept.default.init]'><span id='conceptref:default_initializable_____'><span class='tcode_in_codeblock'>default_<span class='shy'></span>initializable</span></span></a><span class='anglebracket'>&lt;</span>iter_value_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        I uninitialized_value_construct_n<span class='parenthesis'>(</span>I first, iter_difference_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span> n<span class='parenthesis'>)</span>;         <span class='comment'>// freestanding</span>
  <span class='curlybracket'>}</span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> InputIterator, <span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    NoThrowForwardIterator uninitialized_copy<span class='parenthesis'>(</span>InputIterator first,                  <span class='comment'>// freestanding</span>
                                              InputIterator last,
                                              NoThrowForwardIterator result<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> ExecutionPolicy, <span class='keyword'>class</span> ForwardIterator, <span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    NoThrowForwardIterator uninitialized_copy<span class='parenthesis'>(</span>ExecutionPolicy<span class='operator'>&amp;</span><span class='operator'>&amp;</span> exec,               <span class='comment'>// see <a href='algorithms.parallel.overloads' title='27.3.5&emsp;ExecutionPolicy algorithm overloads'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>overloads]</a></span>
                                              ForwardIterator first, ForwardIterator last,
                                              NoThrowForwardIterator result<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> InputIterator, <span class='keyword'>class</span> Size, <span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    NoThrowForwardIterator uninitialized_copy_n<span class='parenthesis'>(</span>InputIterator first, Size n,        <span class='comment'>// freestanding</span>
                                                NoThrowForwardIterator result<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> ExecutionPolicy, <span class='keyword'>class</span> ForwardIterator, <span class='keyword'>class</span> Size,
           <span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    NoThrowForwardIterator uninitialized_copy_n<span class='parenthesis'>(</span>ExecutionPolicy<span class='operator'>&amp;</span><span class='operator'>&amp;</span> exec,             <span class='comment'>// see <a href='algorithms.parallel.overloads' title='27.3.5&emsp;ExecutionPolicy algorithm overloads'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>overloads]</a></span>
                                                ForwardIterator first, Size n,
                                                NoThrowForwardIterator result<span class='parenthesis'>)</span>;

  <span class='keyword'>namespace</span> ranges <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> I, <span class='keyword'>class</span> O<span class='anglebracket'>&gt;</span>
      <span class='keyword'>using</span> uninitialized_copy_result <span class='operator'>=</span> in_out_result<span class='anglebracket'>&lt;</span>I, O<span class='anglebracket'>&gt;</span>;                        <span class='comment'>// freestanding</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='iterator.concept.input#concept:input_iterator' title='25.3.4.9&emsp;Concept input_&shy;iterator&emsp;[iterator.concept.input]'><span id='conceptref:input_iterator'><span class='tcode_in_codeblock'>input_<span class='shy'></span>iterator</span></span></a> I, <a href='iterator.concept.sentinel#concept:sentinel_for' title='25.3.4.7&emsp;Concept sentinel_&shy;for&emsp;[iterator.concept.sentinel]'><span id='conceptref:sentinel_for'><span class='tcode_in_codeblock'>sentinel_<span class='shy'></span>for</span></span></a><span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span> S1,
             <a href='special.mem.concepts#concept:nothrow-forward-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-iterator_____'><span class='tcode_in_codeblock'><i >nothrow-forward-iterator</i></span></span></a> O, <a href='special.mem.concepts#concept:nothrow-sentinel-for' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-sentinel-for___'><span class='tcode_in_codeblock'><i >nothrow-sentinel-for</i></span></span></a><span class='anglebracket'>&lt;</span>O<span class='anglebracket'>&gt;</span> S2<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.constructible#concept:constructible_from' title='18.4.11&emsp;Concept constructible_&shy;from&emsp;[concept.constructible]'><span id='conceptref:constructible_from'><span class='tcode_in_codeblock'>constructible_<span class='shy'></span>from</span></span></a><span class='anglebracket'>&lt;</span>iter_value_t<span class='anglebracket'>&lt;</span>O<span class='anglebracket'>&gt;</span>, iter_reference_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        uninitialized_copy_result<span class='anglebracket'>&lt;</span>I, O<span class='anglebracket'>&gt;</span>
          uninitialized_copy<span class='parenthesis'>(</span>I ifirst, S1 ilast, O ofirst, S2 olast<span class='parenthesis'>)</span>;               <span class='comment'>// freestanding</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='range.refinements#concept:input_range' title='26.4.5&emsp;Other range refinements&emsp;[range.refinements]'><span id='conceptref:input_range'><span class='tcode_in_codeblock'>input_<span class='shy'></span>range</span></span></a> IR, <a href='special.mem.concepts#concept:nothrow-forward-range' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-range___'><span class='tcode_in_codeblock'><i >nothrow-forward-range</i></span></span></a> OR<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.constructible#concept:constructible_from' title='18.4.11&emsp;Concept constructible_&shy;from&emsp;[concept.constructible]'><span id='conceptref:constructible_from_'><span class='tcode_in_codeblock'>constructible_<span class='shy'></span>from</span></span></a><span class='anglebracket'>&lt;</span>range_value_t<span class='anglebracket'>&lt;</span>OR<span class='anglebracket'>&gt;</span>, range_reference_t<span class='anglebracket'>&lt;</span>IR<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        uninitialized_copy_result<span class='anglebracket'>&lt;</span>borrowed_iterator_t<span class='anglebracket'>&lt;</span>IR<span class='anglebracket'>&gt;</span>, borrowed_iterator_t<span class='anglebracket'>&lt;</span>OR<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
          uninitialized_copy<span class='parenthesis'>(</span>IR<span class='operator'>&amp;</span><span class='operator'>&amp;</span> in_range, OR<span class='operator'>&amp;</span><span class='operator'>&amp;</span> out_range<span class='parenthesis'>)</span>;                        <span class='comment'>// freestanding</span>

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> I, <span class='keyword'>class</span> O<span class='anglebracket'>&gt;</span>
      <span class='keyword'>using</span> uninitialized_copy_n_result <span class='operator'>=</span> in_out_result<span class='anglebracket'>&lt;</span>I, O<span class='anglebracket'>&gt;</span>;                      <span class='comment'>// freestanding</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='iterator.concept.input#concept:input_iterator' title='25.3.4.9&emsp;Concept input_&shy;iterator&emsp;[iterator.concept.input]'><span id='conceptref:input_iterator_'><span class='tcode_in_codeblock'>input_<span class='shy'></span>iterator</span></span></a> I, <a href='special.mem.concepts#concept:nothrow-forward-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-iterator______'><span class='tcode_in_codeblock'><i >nothrow-forward-iterator</i></span></span></a> O, <a href='special.mem.concepts#concept:nothrow-sentinel-for' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-sentinel-for____'><span class='tcode_in_codeblock'><i >nothrow-sentinel-for</i></span></span></a><span class='anglebracket'>&lt;</span>O<span class='anglebracket'>&gt;</span> S<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.constructible#concept:constructible_from' title='18.4.11&emsp;Concept constructible_&shy;from&emsp;[concept.constructible]'><span id='conceptref:constructible_from__'><span class='tcode_in_codeblock'>constructible_<span class='shy'></span>from</span></span></a><span class='anglebracket'>&lt;</span>iter_value_t<span class='anglebracket'>&lt;</span>O<span class='anglebracket'>&gt;</span>, iter_reference_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        uninitialized_copy_n_result<span class='anglebracket'>&lt;</span>I, O<span class='anglebracket'>&gt;</span>
          uninitialized_copy_n<span class='parenthesis'>(</span>I ifirst, iter_difference_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span> n,                    <span class='comment'>// freestanding</span>
                               O ofirst, S olast<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> InputIterator, <span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    NoThrowForwardIterator uninitialized_move<span class='parenthesis'>(</span>InputIterator first,                  <span class='comment'>// freestanding</span>
                                              InputIterator last,
                                              NoThrowForwardIterator result<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> ExecutionPolicy, <span class='keyword'>class</span> ForwardIterator, <span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    NoThrowForwardIterator uninitialized_move<span class='parenthesis'>(</span>ExecutionPolicy<span class='operator'>&amp;</span><span class='operator'>&amp;</span> exec,               <span class='comment'>// see <a href='algorithms.parallel.overloads' title='27.3.5&emsp;ExecutionPolicy algorithm overloads'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>overloads]</a></span>
                                              ForwardIterator first, ForwardIterator last,
                                              NoThrowForwardIterator result<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> InputIterator, <span class='keyword'>class</span> Size, <span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    pair<span class='anglebracket'>&lt;</span>InputIterator, NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
      uninitialized_move_n<span class='parenthesis'>(</span>InputIterator first, Size n,                             <span class='comment'>// freestanding</span>
                           NoThrowForwardIterator result<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> ExecutionPolicy, <span class='keyword'>class</span> ForwardIterator, <span class='keyword'>class</span> Size,
           <span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    pair<span class='anglebracket'>&lt;</span>ForwardIterator, NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
      uninitialized_move_n<span class='parenthesis'>(</span>ExecutionPolicy<span class='operator'>&amp;</span><span class='operator'>&amp;</span> exec,                                  <span class='comment'>// see <a href='algorithms.parallel.overloads' title='27.3.5&emsp;ExecutionPolicy algorithm overloads'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>overloads]</a></span>
                           ForwardIterator first, Size n, NoThrowForwardIterator result<span class='parenthesis'>)</span>;

  <span class='keyword'>namespace</span> ranges <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> I, <span class='keyword'>class</span> O<span class='anglebracket'>&gt;</span>
      <span class='keyword'>using</span> uninitialized_move_result <span class='operator'>=</span> in_out_result<span class='anglebracket'>&lt;</span>I, O<span class='anglebracket'>&gt;</span>;                        <span class='comment'>// freestanding</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='iterator.concept.input#concept:input_iterator' title='25.3.4.9&emsp;Concept input_&shy;iterator&emsp;[iterator.concept.input]'><span id='conceptref:input_iterator__'><span class='tcode_in_codeblock'>input_<span class='shy'></span>iterator</span></span></a> I, <a href='iterator.concept.sentinel#concept:sentinel_for' title='25.3.4.7&emsp;Concept sentinel_&shy;for&emsp;[iterator.concept.sentinel]'><span id='conceptref:sentinel_for_'><span class='tcode_in_codeblock'>sentinel_<span class='shy'></span>for</span></span></a><span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span> S1,
             <a href='special.mem.concepts#concept:nothrow-forward-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-iterator_______'><span class='tcode_in_codeblock'><i >nothrow-forward-iterator</i></span></span></a> O, <a href='special.mem.concepts#concept:nothrow-sentinel-for' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-sentinel-for_____'><span class='tcode_in_codeblock'><i >nothrow-sentinel-for</i></span></span></a><span class='anglebracket'>&lt;</span>O<span class='anglebracket'>&gt;</span> S2<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.constructible#concept:constructible_from' title='18.4.11&emsp;Concept constructible_&shy;from&emsp;[concept.constructible]'><span id='conceptref:constructible_from___'><span class='tcode_in_codeblock'>constructible_<span class='shy'></span>from</span></span></a><span class='anglebracket'>&lt;</span>iter_value_t<span class='anglebracket'>&lt;</span>O<span class='anglebracket'>&gt;</span>, iter_rvalue_reference_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        uninitialized_move_result<span class='anglebracket'>&lt;</span>I, O<span class='anglebracket'>&gt;</span>
          uninitialized_move<span class='parenthesis'>(</span>I ifirst, S1 ilast, O ofirst, S2 olast<span class='parenthesis'>)</span>;               <span class='comment'>// freestanding</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='range.refinements#concept:input_range' title='26.4.5&emsp;Other range refinements&emsp;[range.refinements]'><span id='conceptref:input_range_'><span class='tcode_in_codeblock'>input_<span class='shy'></span>range</span></span></a> IR, <a href='special.mem.concepts#concept:nothrow-forward-range' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-range____'><span class='tcode_in_codeblock'><i >nothrow-forward-range</i></span></span></a> OR<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.constructible#concept:constructible_from' title='18.4.11&emsp;Concept constructible_&shy;from&emsp;[concept.constructible]'><span id='conceptref:constructible_from____'><span class='tcode_in_codeblock'>constructible_<span class='shy'></span>from</span></span></a><span class='anglebracket'>&lt;</span>range_value_t<span class='anglebracket'>&lt;</span>OR<span class='anglebracket'>&gt;</span>, range_rvalue_reference_t<span class='anglebracket'>&lt;</span>IR<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        uninitialized_move_result<span class='anglebracket'>&lt;</span>borrowed_iterator_t<span class='anglebracket'>&lt;</span>IR<span class='anglebracket'>&gt;</span>, borrowed_iterator_t<span class='anglebracket'>&lt;</span>OR<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
          uninitialized_move<span class='parenthesis'>(</span>IR<span class='operator'>&amp;</span><span class='operator'>&amp;</span> in_range, OR<span class='operator'>&amp;</span><span class='operator'>&amp;</span> out_range<span class='parenthesis'>)</span>;                        <span class='comment'>// freestanding</span>

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> I, <span class='keyword'>class</span> O<span class='anglebracket'>&gt;</span>
      <span class='keyword'>using</span> uninitialized_move_n_result <span class='operator'>=</span> in_out_result<span class='anglebracket'>&lt;</span>I, O<span class='anglebracket'>&gt;</span>;                      <span class='comment'>// freestanding</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='iterator.concept.input#concept:input_iterator' title='25.3.4.9&emsp;Concept input_&shy;iterator&emsp;[iterator.concept.input]'><span id='conceptref:input_iterator___'><span class='tcode_in_codeblock'>input_<span class='shy'></span>iterator</span></span></a> I,
             <a href='special.mem.concepts#concept:nothrow-forward-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-iterator________'><span class='tcode_in_codeblock'><i >nothrow-forward-iterator</i></span></span></a> O, <a href='special.mem.concepts#concept:nothrow-sentinel-for' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-sentinel-for______'><span class='tcode_in_codeblock'><i >nothrow-sentinel-for</i></span></span></a><span class='anglebracket'>&lt;</span>O<span class='anglebracket'>&gt;</span> S<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.constructible#concept:constructible_from' title='18.4.11&emsp;Concept constructible_&shy;from&emsp;[concept.constructible]'><span id='conceptref:constructible_from_____'><span class='tcode_in_codeblock'>constructible_<span class='shy'></span>from</span></span></a><span class='anglebracket'>&lt;</span>iter_value_t<span class='anglebracket'>&lt;</span>O<span class='anglebracket'>&gt;</span>, iter_rvalue_reference_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        uninitialized_move_n_result<span class='anglebracket'>&lt;</span>I, O<span class='anglebracket'>&gt;</span>
          uninitialized_move_n<span class='parenthesis'>(</span>I ifirst, iter_difference_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span> n,                    <span class='comment'>// freestanding</span>
                               O ofirst, S olast<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> NoThrowForwardIterator, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> uninitialized_fill<span class='parenthesis'>(</span>NoThrowForwardIterator first,                           <span class='comment'>// freestanding</span>
                            NoThrowForwardIterator last, <span class='keyword'>const</span> T<span class='operator'>&amp;</span> x<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> ExecutionPolicy, <span class='keyword'>class</span> NoThrowForwardIterator, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> uninitialized_fill<span class='parenthesis'>(</span>ExecutionPolicy<span class='operator'>&amp;</span><span class='operator'>&amp;</span> exec,                                 <span class='comment'>// see <a href='algorithms.parallel.overloads' title='27.3.5&emsp;ExecutionPolicy algorithm overloads'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>overloads]</a></span>
                            NoThrowForwardIterator first, NoThrowForwardIterator last,
                            <span class='keyword'>const</span> T<span class='operator'>&amp;</span> x<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> NoThrowForwardIterator, <span class='keyword'>class</span> Size, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    NoThrowForwardIterator
      uninitialized_fill_n<span class='parenthesis'>(</span>NoThrowForwardIterator first, Size n, <span class='keyword'>const</span> T<span class='operator'>&amp;</span> x<span class='parenthesis'>)</span>;       <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> ExecutionPolicy, <span class='keyword'>class</span> NoThrowForwardIterator, <span class='keyword'>class</span> Size, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    NoThrowForwardIterator
      uninitialized_fill_n<span class='parenthesis'>(</span>ExecutionPolicy<span class='operator'>&amp;</span><span class='operator'>&amp;</span> exec,                                  <span class='comment'>// see <a href='algorithms.parallel.overloads' title='27.3.5&emsp;ExecutionPolicy algorithm overloads'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>overloads]</a></span>
                           NoThrowForwardIterator first, Size n, <span class='keyword'>const</span> T<span class='operator'>&amp;</span> x<span class='parenthesis'>)</span>;

  <span class='keyword'>namespace</span> ranges <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='special.mem.concepts#concept:nothrow-forward-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-iterator_________'><span class='tcode_in_codeblock'><i >nothrow-forward-iterator</i></span></span></a> I, <a href='special.mem.concepts#concept:nothrow-sentinel-for' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-sentinel-for_______'><span class='tcode_in_codeblock'><i >nothrow-sentinel-for</i></span></span></a><span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span> S, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.constructible#concept:constructible_from' title='18.4.11&emsp;Concept constructible_&shy;from&emsp;[concept.constructible]'><span id='conceptref:constructible_from______'><span class='tcode_in_codeblock'>constructible_<span class='shy'></span>from</span></span></a><span class='anglebracket'>&lt;</span>iter_value_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span>, <span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span>
        I uninitialized_fill<span class='parenthesis'>(</span>I first, S last, <span class='keyword'>const</span> T<span class='operator'>&amp;</span> x<span class='parenthesis'>)</span>;                          <span class='comment'>// freestanding</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='special.mem.concepts#concept:nothrow-forward-range' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-range_____'><span class='tcode_in_codeblock'><i >nothrow-forward-range</i></span></span></a> R, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.constructible#concept:constructible_from' title='18.4.11&emsp;Concept constructible_&shy;from&emsp;[concept.constructible]'><span id='conceptref:constructible_from_______'><span class='tcode_in_codeblock'>constructible_<span class='shy'></span>from</span></span></a><span class='anglebracket'>&lt;</span>range_value_t<span class='anglebracket'>&lt;</span>R<span class='anglebracket'>&gt;</span>, <span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span>
        borrowed_iterator_t<span class='anglebracket'>&lt;</span>R<span class='anglebracket'>&gt;</span> uninitialized_fill<span class='parenthesis'>(</span>R<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r, <span class='keyword'>const</span> T<span class='operator'>&amp;</span> x<span class='parenthesis'>)</span>;               <span class='comment'>// freestanding</span>

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='special.mem.concepts#concept:nothrow-forward-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-forward-iterator__________'><span class='tcode_in_codeblock'><i >nothrow-forward-iterator</i></span></span></a> I, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.constructible#concept:constructible_from' title='18.4.11&emsp;Concept constructible_&shy;from&emsp;[concept.constructible]'><span id='conceptref:constructible_from________'><span class='tcode_in_codeblock'>constructible_<span class='shy'></span>from</span></span></a><span class='anglebracket'>&lt;</span>iter_value_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span>, <span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span>
        I uninitialized_fill_n<span class='parenthesis'>(</span>I first, iter_difference_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span> n, <span class='keyword'>const</span> T<span class='operator'>&amp;</span> x<span class='parenthesis'>)</span>;        <span class='comment'>// freestanding</span>
  <span class='curlybracket'>}</span>

  <span class='comment'>// <a href='specialized.construct' title='27.11.8&emsp;construct_&shy;at'>[specialized.<span class='shy'></span>construct]</a>, <span class='tcode_in_codeblock'>construct_<span class='shy'></span>at</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> T<span class='operator'>*</span> construct_at<span class='parenthesis'>(</span>T<span class='operator'>*</span> location, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;                         <span class='comment'>// freestanding</span>

  <span class='keyword'>namespace</span> ranges <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> T<span class='operator'>*</span> construct_at<span class='parenthesis'>(</span>T<span class='operator'>*</span> location, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;                       <span class='comment'>// freestanding</span>
  <span class='curlybracket'>}</span>

  <span class='comment'>// <a href='specialized.destroy' title='27.11.9&emsp;destroy'>[specialized.<span class='shy'></span>destroy]</a>, <span class='tcode_in_codeblock'>destroy</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> destroy_at<span class='parenthesis'>(</span>T<span class='operator'>*</span> location<span class='parenthesis'>)</span>;                                         <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> destroy<span class='parenthesis'>(</span>NoThrowForwardIterator first,                            <span class='comment'>// freestanding</span>
                           NoThrowForwardIterator last<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> ExecutionPolicy, <span class='keyword'>class</span> NoThrowForwardIterator<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> destroy<span class='parenthesis'>(</span>ExecutionPolicy<span class='operator'>&amp;</span><span class='operator'>&amp;</span> exec,                                            <span class='comment'>// see <a href='algorithms.parallel.overloads' title='27.3.5&emsp;ExecutionPolicy algorithm overloads'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>overloads]</a></span>
                 NoThrowForwardIterator first, NoThrowForwardIterator last<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> NoThrowForwardIterator, <span class='keyword'>class</span> Size<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> NoThrowForwardIterator destroy_n<span class='parenthesis'>(</span>NoThrowForwardIterator first,        <span class='comment'>// freestanding</span>
                                               Size n<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> ExecutionPolicy, <span class='keyword'>class</span> NoThrowForwardIterator, <span class='keyword'>class</span> Size<span class='anglebracket'>&gt;</span>
    NoThrowForwardIterator destroy_n<span class='parenthesis'>(</span>ExecutionPolicy<span class='operator'>&amp;</span><span class='operator'>&amp;</span> exec,                        <span class='comment'>// see <a href='algorithms.parallel.overloads' title='27.3.5&emsp;ExecutionPolicy algorithm overloads'>[algorithms.<span class='shy'></span>parallel.<span class='shy'></span>overloads]</a></span>
                                     NoThrowForwardIterator first, Size n<span class='parenthesis'>)</span>;

  <span class='keyword'>namespace</span> ranges <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='concept.destructible#concept:destructible' title='18.4.10&emsp;Concept destructible&emsp;[concept.destructible]'><span id='conceptref:destructible'><span class='tcode_in_codeblock'>destructible</span></span></a> T<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> <span class='keyword'>void</span> destroy_at<span class='parenthesis'>(</span>T<span class='operator'>*</span> location<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;                              <span class='comment'>// freestanding</span>

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='special.mem.concepts#concept:nothrow-input-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-input-iterator_'><span class='tcode_in_codeblock'><i >nothrow-input-iterator</i></span></span></a> I, <a href='special.mem.concepts#concept:nothrow-sentinel-for' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-sentinel-for________'><span class='tcode_in_codeblock'><i >nothrow-sentinel-for</i></span></span></a><span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span> S<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.destructible#concept:destructible' title='18.4.10&emsp;Concept destructible&emsp;[concept.destructible]'><span id='conceptref:destructible_'><span class='tcode_in_codeblock'>destructible</span></span></a><span class='anglebracket'>&lt;</span>iter_value_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        <span class='keyword'>constexpr</span> I destroy<span class='parenthesis'>(</span>I first, S last<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;                              <span class='comment'>// freestanding</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='special.mem.concepts#concept:nothrow-input-range' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-input-range_'><span class='tcode_in_codeblock'><i >nothrow-input-range</i></span></span></a> R<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.destructible#concept:destructible' title='18.4.10&emsp;Concept destructible&emsp;[concept.destructible]'><span id='conceptref:destructible__'><span class='tcode_in_codeblock'>destructible</span></span></a><span class='anglebracket'>&lt;</span>range_value_t<span class='anglebracket'>&lt;</span>R<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        <span class='keyword'>constexpr</span> borrowed_iterator_t<span class='anglebracket'>&lt;</span>R<span class='anglebracket'>&gt;</span> destroy<span class='parenthesis'>(</span>R<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;                   <span class='comment'>// freestanding</span>

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><a href='special.mem.concepts#concept:nothrow-input-iterator' title='27.11.2&emsp;Special memory concepts&emsp;[special.mem.concepts]'><span id='conceptref:nothrow-input-iterator__'><span class='tcode_in_codeblock'><i >nothrow-input-iterator</i></span></span></a> I<span class='anglebracket'>&gt;</span>
      <span class='keyword'>requires</span> <a href='concept.destructible#concept:destructible' title='18.4.10&emsp;Concept destructible&emsp;[concept.destructible]'><span id='conceptref:destructible___'><span class='tcode_in_codeblock'>destructible</span></span></a><span class='anglebracket'>&lt;</span>iter_value_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
        <span class='keyword'>constexpr</span> I destroy_n<span class='parenthesis'>(</span>I first, iter_difference_t<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span> n<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;            <span class='comment'>// freestanding</span>
  <span class='curlybracket'>}</span>

  <span class='comment'>// <a href='#unique.ptr' title='20.3.1&emsp;Unique-ownership pointers'>[unique.<span class='shy'></span>ptr]</a>, class template <span class='tcode_in_codeblock'>unique_<span class='shy'></span>ptr</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> default_delete;                                          <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> default_delete<span class='anglebracket'>&lt;</span>T<span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span>;                                     <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D <span class='operator'>=</span> default_delete<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> unique_ptr;                  <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> unique_ptr<span class='anglebracket'>&lt;</span>T<span class='squarebracket'>[</span><span class='squarebracket'>]</span>, D<span class='anglebracket'>&gt;</span>;                              <span class='comment'>// freestanding</span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> unique_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_unique<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;                        <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is not array</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> unique_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_unique<span class='parenthesis'>(</span>size_t n<span class='parenthesis'>)</span>;                              <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[]</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
    <i ><span class='texttt'>unspecified</span></i> make_unique<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;                                <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[N]</span></span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> unique_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_unique_for_overwrite<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                        <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is not array</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> unique_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_unique_for_overwrite<span class='parenthesis'>(</span>size_t n<span class='parenthesis'>)</span>;                <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[]</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
    <i ><span class='texttt'>unspecified</span></i> make_unique_for_overwrite<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;                  <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[N]</span></span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;         <span class='comment'>// freestanding</span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> D1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span> D2<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x,                          <span class='comment'>// freestanding</span>
                              <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> D1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span> D2<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;       <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> D1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span> D2<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;       <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> D1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span> D2<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;      <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> D1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span> D2<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&gt;</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;      <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> D1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span> D2<span class='anglebracket'>&gt;</span>
    <span class='keyword'>requires</span> <a href='cmp.concept#concept:three_way_comparable_with' title='17.11.4&emsp;Concept three_&shy;way_&shy;comparable&emsp;[cmp.concept]'><span id='conceptref:three_way_comparable_with'><span class='tcode_in_codeblock'>three_<span class='shy'></span>way_<span class='shy'></span>comparable_<span class='shy'></span>with</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer,
                                       <span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer<span class='anglebracket'>&gt;</span>
    compare_three_way_result_t<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer,
                               <span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer<span class='anglebracket'>&gt;</span>
      <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;        <span class='comment'>// freestanding</span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;       <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span>;                 <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span>nullptr_t, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;                 <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span>;                 <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>nullptr_t, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;                 <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span>;                <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='parenthesis'>(</span>nullptr_t, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;                <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&gt;</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span>;                <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&gt;</span><span class='operator'>=</span><span class='parenthesis'>(</span>nullptr_t, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;                <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    <span class='keyword'>requires</span> <a href='cmp.concept#concept:three_way_comparable' title='17.11.4&emsp;Concept three_&shy;way_&shy;comparable&emsp;[cmp.concept]'><span id='conceptref:three_way_comparable'><span class='tcode_in_codeblock'>three_<span class='shy'></span>way_<span class='shy'></span>comparable</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> compare_three_way_result_t<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer<span class='anglebracket'>&gt;</span>
      <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span>;                            <span class='comment'>// freestanding</span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E, <span class='keyword'>class</span> T, <span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    basic_ostream<span class='anglebracket'>&lt;</span>E, T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span>basic_ostream<span class='anglebracket'>&lt;</span>E, T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> os, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>Y, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> p<span class='parenthesis'>)</span>;

  <span class='comment'>// <a href='#util.smartptr.weak.bad' title='20.3.2.1&emsp;Class bad_&shy;weak_&shy;ptr'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>weak.<span class='shy'></span>bad]</a>, class <span class='tcode_in_codeblock'>bad_<span class='shy'></span>weak_<span class='shy'></span>ptr</span></span>
  <span class='keyword'>class</span> bad_weak_ptr;

  <span class='comment'>// <a href='#util.smartptr.shared' title='20.3.2.2&emsp;Class template shared_&shy;ptr'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared]</a>, class template <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> shared_ptr;

  <span class='comment'>// <a href='#util.smartptr.shared.create' title='20.3.2.2.7&emsp;Creation'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>create]</a>, <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> creation</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;                                  <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is not array</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;                  <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is not array</span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span>size_t N<span class='parenthesis'>)</span>;                                        <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[]</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, size_t N<span class='parenthesis'>)</span>;                        <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[]</span></span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                                                <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[N]</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>;                                  <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[N]</span></span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span>size_t N, <span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[]</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, size_t N,
                                  <span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;                 <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[]</span></span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;                     <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[N]</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, <span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;     <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[N]</span></span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared_for_overwrite<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                                  <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is not <span class='tcode_in_codeblock'>U[]</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared_for_overwrite<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>;                    <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is not <span class='tcode_in_codeblock'>U[]</span></span>

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared_for_overwrite<span class='parenthesis'>(</span>size_t N<span class='parenthesis'>)</span>;                          <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[]</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared_for_overwrite<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, size_t N<span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>U[]</span></span>

  <span class='comment'>// <a href='#util.smartptr.shared.cmp' title='20.3.2.2.8&emsp;Comparison'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>cmp]</a>, <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> comparisons</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    strong_ordering <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    strong_ordering <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#util.smartptr.shared.spec' title='20.3.2.2.9&emsp;Specialized algorithms'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>spec]</a>, <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> specialized algorithms</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#util.smartptr.shared.cast' title='20.3.2.2.10&emsp;Casts'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>cast]</a>, <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> casts</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> static_pointer_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> static_pointer_cast<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> dynamic_pointer_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> dynamic_pointer_cast<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> const_pointer_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> const_pointer_cast<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> reinterpret_pointer_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> reinterpret_pointer_cast<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#util.smartptr.getdeleter' title='20.3.2.2.11&emsp;get_&shy;deleter'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>getdeleter]</a>, <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> <span class='tcode_in_codeblock'>get_<span class='shy'></span>deleter</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> D, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    D<span class='operator'>*</span> get_deleter<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#util.smartptr.shared.io' title='20.3.2.2.12&emsp;I/O'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>io]</a>, <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> I/O</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E, <span class='keyword'>class</span> T, <span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
    basic_ostream<span class='anglebracket'>&lt;</span>E, T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span>basic_ostream<span class='anglebracket'>&lt;</span>E, T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> os, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> p<span class='parenthesis'>)</span>;

  <span class='comment'>// <a href='#util.smartptr.weak' title='20.3.2.3&emsp;Class template weak_&shy;ptr'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>weak]</a>, class template <span class='tcode_in_codeblock'>weak_<span class='shy'></span>ptr</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> weak_ptr;

  <span class='comment'>// <a href='#util.smartptr.weak.spec' title='20.3.2.3.7&emsp;Specialized algorithms'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>weak.<span class='shy'></span>spec]</a>, <span class='tcode_in_codeblock'>weak_<span class='shy'></span>ptr</span> specialized algorithms</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#util.smartptr.ownerless' title='20.3.2.4&emsp;Class template owner_&shy;less'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>ownerless]</a>, class template <span class='tcode_in_codeblock'>owner_<span class='shy'></span>less</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T <span class='operator'>=</span> <span class='keyword'>void</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> owner_less;

  <span class='comment'>// <a href='#util.smartptr.enab' title='20.3.2.5&emsp;Class template enable_&shy;shared_&shy;from_&shy;this'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>enab]</a>, class template <span class='tcode_in_codeblock'>enable_<span class='shy'></span>shared_<span class='shy'></span>from_<span class='shy'></span>this</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> enable_shared_from_this;

  <span class='comment'>// <a href='#util.smartptr.hash' title='20.3.3&emsp;Smart pointer hash support'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>hash]</a>, hash support</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> hash;                                                    <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> hash<span class='anglebracket'>&lt;</span>unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>;                         <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> hash<span class='anglebracket'>&lt;</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>;

  <span class='comment'>// <a href='util.smartptr.atomic' title='33.5.8.7&emsp;Partial specializations for smart pointers'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>atomic]</a>, atomic smart pointers</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic;                                                  <span class='comment'>// freestanding</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic<span class='anglebracket'>&lt;</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic<span class='anglebracket'>&lt;</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>;

  <span class='comment'>// <a href='#out.ptr.t' title='20.3.4.1&emsp;Class template out_&shy;ptr_&shy;t'>[out.<span class='shy'></span>ptr.<span class='shy'></span>t]</a>, class template <span class='tcode_in_codeblock'>out_<span class='shy'></span>ptr_<span class='shy'></span>t</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Smart, <span class='keyword'>class</span> Pointer, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
    <span class='keyword'>class</span> out_ptr_t;

  <span class='comment'>// <a href='#out.ptr' title='20.3.4.2&emsp;Function template out_&shy;ptr'>[out.<span class='shy'></span>ptr]</a>, function template <span class='tcode_in_codeblock'>out_<span class='shy'></span>ptr</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Pointer <span class='operator'>=</span> <span class='keyword'>void</span>, <span class='keyword'>class</span> Smart, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
    <span class='keyword'>auto</span> out_ptr<span class='parenthesis'>(</span>Smart<span class='operator'>&amp;</span> s, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;

  <span class='comment'>// <a href='#inout.ptr.t' title='20.3.4.3&emsp;Class template inout_&shy;ptr_&shy;t'>[inout.<span class='shy'></span>ptr.<span class='shy'></span>t]</a>, class template <span class='tcode_in_codeblock'>inout_<span class='shy'></span>ptr_<span class='shy'></span>t</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Smart, <span class='keyword'>class</span> Pointer, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
    <span class='keyword'>class</span> inout_ptr_t;

  <span class='comment'>// <a href='#inout.ptr' title='20.3.4.4&emsp;Function template inout_&shy;ptr'>[inout.<span class='shy'></span>ptr]</a>, function template <span class='tcode_in_codeblock'>inout_<span class='shy'></span>ptr</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Pointer <span class='operator'>=</span> <span class='keyword'>void</span>, <span class='keyword'>class</span> Smart, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
    <span class='keyword'>auto</span> inout_ptr<span class='parenthesis'>(</span>Smart<span class='operator'>&amp;</span> s, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div></div></div><div id='pointer.traits' class='section'><h3 ><a class='secnum' href='#pointer.traits' style='min-width:80pt'>20.2.3</a> Pointer traits <a class='abbr_ref' href='pointer.traits'>[pointer.traits]</a></h3><div id='pointer.traits.general' class='section'><h4 ><a class='secnum' href='#pointer.traits.general' style='min-width:95pt'>20.2.3.1</a> General <a class='abbr_ref' href='pointer.traits.general'>[pointer.traits.general]</a></h4><div class='para' id='pointer.traits.general-1'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L589'>#</a></div><div class='texpara'><div id='pointer.traits.general-1.sentence-1' class='sentence'>The class template <span class='texttt'>pointer_<span class='shy'></span>traits</span> supplies a uniform interface to certain
attributes of pointer-like types<a class='hidden_link' href='#pointer.traits.general-1.sentence-1'>.</a></div></div><div class='texpara'><span id='lib:pointer_traits'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:pointer_traits'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Ptr<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> pointer_traits <span class='curlybracket'>{</span>
    <i ><span class='texttt'>see below</span></i>;
  <span class='curlybracket'>}</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> pointer_traits<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> pointer         <span class='operator'>=</span> T<span class='operator'>*</span>;
    <span class='keyword'>using</span> element_type    <span class='operator'>=</span> T;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> ptrdiff_t;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> rebind <span class='operator'>=</span> U<span class='operator'>*</span>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> pointer pointer_to<span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div></div></div><div id='pointer.traits.types' class='section'><h4 ><a class='secnum' href='#pointer.traits.types' style='min-width:95pt'>20.2.3.2</a> Member types <a class='abbr_ref' href='pointer.traits.types'>[pointer.traits.types]</a></h4><div class='para' id='pointer.traits.types-1'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.types-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L614'>#</a></div><div class='texpara'><div id='pointer.traits.types-1.sentence-1' class='sentence'>The definitions in this subclause make use of
the following exposition-only class template and concept:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> <i >ptr-traits-elem</i>          <span class='comment'>// <i >exposition only</i></span>
<span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>requires</span> <span class='keyword'>requires</span> <span class='curlybracket'>{</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>element_type; <span class='curlybracket'>}</span>
<span class='keyword'>struct</span> <i >ptr-traits-elem</i><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>
<span class='curlybracket'>{</span> <span class='keyword'>using</span> type <span class='operator'>=</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>element_type; <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> SomePointer, <span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> <span class='parenthesis'>(</span><span class='operator'>!</span><span class='keyword'>requires</span> <span class='curlybracket'>{</span> <span class='keyword'>typename</span> SomePointer<span class='anglebracket'>&lt;</span>T, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>element_type; <span class='curlybracket'>}</span><span class='parenthesis'>)</span>
<span class='keyword'>struct</span> <i >ptr-traits-elem</i><span class='anglebracket'>&lt;</span>SomePointer<span class='anglebracket'>&lt;</span>T, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>
<span class='curlybracket'>{</span> <span class='keyword'>using</span> type <span class='operator'>=</span> T; <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Ptr<span class='anglebracket'>&gt;</span>
  <span class='keyword'>concept</span> <a class='hidden_link' href='#concept:has-elem-type' title='20.2.3.2&emsp;Member types&emsp;[pointer.traits.types]'><span id='concept:has-elem-type'><span class='tcode_in_codeblock'><i >has-elem-type</i></span></span></a> <span class='operator'>=</span>       <span class='comment'>// <i >exposition only</i></span>
    <span class='keyword'>requires</span> <span class='curlybracket'>{</span> <span class='keyword'>typename</span> <i >ptr-traits-elem</i><span class='anglebracket'>&lt;</span>Ptr<span class='anglebracket'>&gt;</span><span class='operator'>::</span>type; <span class='curlybracket'>}</span>
</span></div></div></div><div class='para' id='pointer.traits.types-2'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.types-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L636'>#</a></div><div class='texpara'><div id='pointer.traits.types-2.sentence-1' class='sentence'>If <span class='texttt'>Ptr</span> satisfies <a href='#concept:has-elem-type' title='20.2.3.2&emsp;Member types&emsp;[pointer.traits.types]'><span id='conceptref:has-elem-type'><span class='texttt'><i >has-elem-type</i></span></span></a>,
a specialization <span class='texttt'>pointer_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>Ptr<span class='anglebracket'>&gt;</span></span>
generated from the <span class='texttt'>pointer_<span class='shy'></span>traits</span> primary template
has the following members
as well as those described in <a href='#pointer.traits.functions' title='20.2.3.3&emsp;Member functions'>[pointer.<span class='shy'></span>traits.<span class='shy'></span>functions]</a>;
otherwise, such a specialization has no members by any of those names<a class='hidden_link' href='#pointer.traits.types-2.sentence-1'>.</a></div></div></div><div class='texpara'><div id='lib:pointer_traits,pointer'><div id='lib:pointer,pointer_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:pointer,pointer_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> pointer <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='pointer.traits.types-3'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.types-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L650'>#</a></div><div class='texpara'><div id='pointer.traits.types-3.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>Ptr</span><a class='hidden_link' href='#pointer.traits.types-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:pointer_traits,element_type'><div id='lib:element_type,pointer_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:element_type,pointer_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> element_type <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='pointer.traits.types-4'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.types-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L660'>#</a></div><div class='texpara'><div id='pointer.traits.types-4.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'><span class='keyword'>typename</span> <span class='texttt'><i >ptr-traits-elem</i></span><span class='anglebracket'>&lt;</span>Ptr<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>type</span><a class='hidden_link' href='#pointer.traits.types-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:pointer_traits,difference_type'><div id='lib:difference_type,pointer_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:difference_type,pointer_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> difference_type <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='pointer.traits.types-5'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.types-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L670'>#</a></div><div class='texpara'><div id='pointer.traits.types-5.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>Ptr<span class='operator'>&#x200b;::&#x200b;</span>difference_<span class='shy'></span>type</span> if
the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id__'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>Ptr<span class='operator'>&#x200b;::&#x200b;</span>difference_<span class='shy'></span>type</span> is valid and denotes a
type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>); otherwise,
<span class='texttt'>ptrdiff_<span class='shy'></span>t</span><a class='hidden_link' href='#pointer.traits.types-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:pointer_traits,rebind'><div id='lib:rebind,pointer_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:rebind,pointer_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> rebind <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='pointer.traits.types-6'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.types-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L683'>#</a></div><div class='texpara'><div id='pointer.traits.types-6.sentence-1' class='sentence'><i >Alias template</i>: <span class='texttt'>Ptr<span class='operator'>&#x200b;::&#x200b;</span>rebind<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> if
the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id___'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>Ptr<span class='operator'>&#x200b;::&#x200b;</span>rebind<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> is valid and denotes a
type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>); otherwise,
<span class='texttt'>SomePointer<span class='anglebracket'>&lt;</span>U, Args<span class='anglebracket'>&gt;</span></span> if
<span class='texttt'>Ptr</span> is a class template instantiation of the form <span class='texttt'>SomePointer<span class='anglebracket'>&lt;</span>T, Args<span class='anglebracket'>&gt;</span></span>,
where <span class='texttt'>Args</span> is zero or more type arguments; otherwise, the instantiation of
<span class='texttt'>rebind</span> is ill-formed<a class='hidden_link' href='#pointer.traits.types-6.sentence-1'>.</a></div></div></div></div></div><div id='pointer.traits.functions' class='section'><h4 ><a class='secnum' href='#pointer.traits.functions' style='min-width:95pt'>20.2.3.3</a> Member functions <a class='abbr_ref' href='pointer.traits.functions'>[pointer.traits.functions]</a></h4><div class='texpara'><div id='lib:pointer_traits,pointer_to'><div id='lib:pointer_to,pointer_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:pointer_to,pointer_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>static</span> pointer pointer_traits<span class='operator'>::</span>pointer_to<span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i> r<span class='parenthesis'>)</span>;
<span class='keyword'>static</span> <span class='keyword'>constexpr</span> pointer pointer_traits<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer_to<span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='pointer.traits.functions-1'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.functions-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L702'>#</a></div><div class='texpara'><div id='pointer.traits.functions-1.sentence-1' class='sentence'><i >Mandates</i>: For the first member function,
<span class='texttt'>Ptr<span class='operator'>&#x200b;::&#x200b;</span>pointer_<span class='shy'></span>to<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span> is well-formed<a class='hidden_link' href='#pointer.traits.functions-1.sentence-1'>.</a></div></div></div></div><div class='para' id='pointer.traits.functions-2'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.functions-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L707'>#</a></div><div class='texpara'><div id='pointer.traits.functions-2.sentence-1' class='sentence'><i >Preconditions</i>: For the first member function,
<span class='texttt'>Ptr<span class='operator'>&#x200b;::&#x200b;</span>pointer_<span class='shy'></span>to<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span> returns a pointer to <span class='texttt'>r</span>
through which indirection is valid<a class='hidden_link' href='#pointer.traits.functions-2.sentence-1'>.</a></div></div></div></div><div class='para' id='pointer.traits.functions-3'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.functions-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L713'>#</a></div><div class='texpara'><div id='pointer.traits.functions-3.sentence-1' class='sentence'><i >Returns</i>: The first member function returns <span class='texttt'>Ptr<span class='operator'>&#x200b;::&#x200b;</span>pointer_<span class='shy'></span>to<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span><a class='hidden_link' href='#pointer.traits.functions-3.sentence-1'>.</a></div> <div id='pointer.traits.functions-3.sentence-2' class='sentence'>The second member function returns <span class='texttt'>addressof<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span><a class='hidden_link' href='#pointer.traits.functions-3.sentence-2'>.</a></div></div></div></div><div class='para' id='pointer.traits.functions-4'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.functions-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L718'>#</a></div><div class='texpara'><div id='pointer.traits.functions-4.sentence-1' class='sentence'><i >Remarks</i>: If <span class='texttt'>element_<span class='shy'></span>type</span> is <span class='mathit'>cv</span> <span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span>, the type of
<span class='texttt'>r</span> is unspecified; otherwise, it is <span class='texttt'>element_<span class='shy'></span>type<span class='operator'>&amp;</span></span><a class='hidden_link' href='#pointer.traits.functions-4.sentence-1'>.</a></div></div></div></div></div><div id='pointer.traits.optmem' class='section'><h4 ><a class='secnum' href='#pointer.traits.optmem' style='min-width:95pt'>20.2.3.4</a> Optional members <a class='abbr_ref' href='pointer.traits.optmem'>[pointer.traits.optmem]</a></h4><div class='para' id='pointer.traits.optmem-1'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.optmem-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L726'>#</a></div><div class='texpara'><div id='pointer.traits.optmem-1.sentence-1' class='sentence'>Specializations of <span class='texttt'>pointer_<span class='shy'></span>traits</span> may define the member declared
in this subclause to customize the behavior of the standard library<a class='hidden_link' href='#pointer.traits.optmem-1.sentence-1'>.</a></div> <div id='pointer.traits.optmem-1.sentence-2' class='sentence'>A specialization generated from the <span class='texttt'>pointer_<span class='shy'></span>traits</span> primary template
has no member by this name<a class='hidden_link' href='#pointer.traits.optmem-1.sentence-2'>.</a></div></div></div><div class='texpara'><div id='lib:pointer_traits,to_address'><div id='lib:to_address,pointer_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:to_address,pointer_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>static</span> element_type<span class='operator'>*</span> to_address<span class='parenthesis'>(</span>pointer p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='pointer.traits.optmem-2'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.optmem-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L738'>#</a></div><div class='texpara'><div id='pointer.traits.optmem-2.sentence-1' class='sentence'><i >Returns</i>: A pointer of type <span class='texttt'>element_<span class='shy'></span>type<span class='operator'>*</span></span> that references
the same location as the argument <span class='texttt'>p</span><a class='hidden_link' href='#pointer.traits.optmem-2.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='pointer.traits.optmem-3'><div class='marginalizedparent'><a class='marginalized' href='#pointer.traits.optmem-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L743'>#</a></div><div class='texpara'><div id='pointer.traits.optmem-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#pointer.traits.optmem-note-1'>1</a></i>:&ensp;<div id='pointer.traits.optmem-3.sentence-1' class='sentence'>This function is intended to be the inverse of <span class='texttt'>pointer_<span class='shy'></span>to</span><a class='hidden_link' href='#pointer.traits.optmem-3.sentence-1'>.</a></div> <div id='pointer.traits.optmem-3.sentence-2' class='sentence'>If defined, it customizes the behavior of
the non-member function
<span class='texttt'>to_<span class='shy'></span>address</span> (<a href='#pointer.conversion' title='20.2.4&emsp;Pointer conversion'>[pointer.<span class='shy'></span>conversion]</a>)<a class='hidden_link' href='#pointer.traits.optmem-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></div></div><div id='pointer.conversion' class='section'><h3 ><a class='secnum' href='#pointer.conversion' style='min-width:80pt'>20.2.4</a> Pointer conversion <a class='abbr_ref' href='pointer.conversion'>[pointer.conversion]</a></h3><div class='texpara'><div id='lib:to_address'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:to_address'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> T<span class='operator'>*</span> to_address<span class='parenthesis'>(</span>T<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='pointer.conversion-1'><div class='marginalizedparent'><a class='marginalized' href='#pointer.conversion-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L760'>#</a></div><div class='texpara'><div id='pointer.conversion-1.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>T</span> is not a function type<a class='hidden_link' href='#pointer.conversion-1.sentence-1'>.</a></div></div></div></div><div class='para' id='pointer.conversion-2'><div class='marginalizedparent'><a class='marginalized' href='#pointer.conversion-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L764'>#</a></div><div class='texpara'><div id='pointer.conversion-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>p</span><a class='hidden_link' href='#pointer.conversion-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:to_address_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:to_address_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Ptr<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> to_address<span class='parenthesis'>(</span><span class='keyword'>const</span> Ptr<span class='operator'>&amp;</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='pointer.conversion-3'><div class='marginalizedparent'><a class='marginalized' href='#pointer.conversion-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L775'>#</a></div><div class='texpara'><div id='pointer.conversion-3.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>pointer_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>Ptr<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>to_<span class='shy'></span>address<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> if that expression is well-formed
(see <a href='#pointer.traits.optmem' title='20.2.3.4&emsp;Optional members'>[pointer.<span class='shy'></span>traits.<span class='shy'></span>optmem]</a>),
otherwise <span class='texttt'>to_<span class='shy'></span>address<span class='parenthesis'>(</span>p<span class='operator'>.</span><span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#pointer.conversion-3.sentence-1'>.</a></div></div></div></div></div><div id='ptr.align' class='section'><h3 ><a class='secnum' href='#ptr.align' style='min-width:80pt'>20.2.5</a> Pointer alignment <a class='abbr_ref' href='ptr.align'>[ptr.align]</a></h3><div class='texpara'><div id='lib:align'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:align'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span><span class='operator'>*</span> align<span class='parenthesis'>(</span>size_t alignment, size_t size, <span class='keyword'>void</span><span class='operator'>*</span><span class='operator'>&amp;</span> ptr, size_t<span class='operator'>&amp;</span> space<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='ptr.align-1'><div class='marginalizedparent'><a class='marginalized' href='#ptr.align-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L790'>#</a></div><div class='texpara'><div id='ptr.align-1.sentence-1' class='sentence'><i >Preconditions</i>: <ul class='itemize'><li id='ptr.align-1.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#ptr.align-1.1'>(1.1)</a></div><span class='texttt'>alignment</span> is a power of two</li><li id='ptr.align-1.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#ptr.align-1.2'>(1.2)</a></div><span class='texttt'>ptr</span> represents the address of contiguous storage of at least
<span class='texttt'>space</span> bytes</li></ul></div></div></div></div><div class='para' id='ptr.align-2'><div class='marginalizedparent'><a class='marginalized' href='#ptr.align-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L801'>#</a></div><div class='texpara'><div id='ptr.align-2.sentence-1' class='sentence'><i >Effects</i>: If it is possible to fit <span class='texttt'>size</span> bytes
of storage aligned by <span class='texttt'>alignment</span> into the buffer pointed to by
<span class='texttt'>ptr</span> with length <span class='texttt'>space</span>, the function updates
<span class='texttt'>ptr</span> to represent the first possible address of such storage
and decreases <span class='texttt'>space</span> by the number of bytes used for alignment<a class='hidden_link' href='#ptr.align-2.sentence-1'>.</a></div> <div id='ptr.align-2.sentence-2' class='sentence'>Otherwise, the function does nothing<a class='hidden_link' href='#ptr.align-2.sentence-2'>.</a></div></div></div></div><div class='para' id='ptr.align-3'><div class='marginalizedparent'><a class='marginalized' href='#ptr.align-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L810'>#</a></div><div class='texpara'><div id='ptr.align-3.sentence-1' class='sentence'><i >Returns</i>: A null pointer if the requested aligned buffer
would not fit into the available space, otherwise the adjusted value
of <span class='texttt'>ptr</span><a class='hidden_link' href='#ptr.align-3.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='ptr.align-4'><div class='marginalizedparent'><a class='marginalized' href='#ptr.align-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L816'>#</a></div><div class='texpara'><div id='ptr.align-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#ptr.align-note-1'>1</a></i>:&ensp;<div id='ptr.align-4.sentence-1' class='sentence'>The function updates its <span class='texttt'>ptr</span>
and <span class='texttt'>space</span> arguments so that it can be called repeatedly
with possibly different <span class='texttt'>alignment</span> and <span class='texttt'>size</span>
arguments for the same buffer<a class='hidden_link' href='#ptr.align-4.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:assume_aligned'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:assume_aligned'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span>size_t N, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> T<span class='operator'>*</span> assume_aligned<span class='parenthesis'>(</span>T<span class='operator'>*</span> ptr<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='ptr.align-5'><div class='marginalizedparent'><a class='marginalized' href='#ptr.align-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L832'>#</a></div><div class='texpara'><div id='ptr.align-5.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>N</span> is a power of two<a class='hidden_link' href='#ptr.align-5.sentence-1'>.</a></div></div></div></div><div class='para' id='ptr.align-6'><div class='marginalizedparent'><a class='marginalized' href='#ptr.align-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L836'>#</a></div><div class='texpara'><div id='ptr.align-6.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>ptr</span> points to an object <span class='texttt'>X</span> of
a type similar (<a href='conv.qual' title='7.3.6&emsp;Qualification conversions'>[conv.<span class='shy'></span>qual]</a>) to <span class='texttt'>T</span>,
where <span class='texttt'>X</span> has alignment <span class='texttt'>N</span> (<a href='basic.align' title='6.7.6&emsp;Alignment'>[basic.<span class='shy'></span>align]</a>)<a class='hidden_link' href='#ptr.align-6.sentence-1'>.</a></div></div></div></div><div class='para' id='ptr.align-7'><div class='marginalizedparent'><a class='marginalized' href='#ptr.align-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L842'>#</a></div><div class='texpara'><div id='ptr.align-7.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>ptr</span><a class='hidden_link' href='#ptr.align-7.sentence-1'>.</a></div></div></div></div><div class='para' id='ptr.align-8'><div class='marginalizedparent'><a class='marginalized' href='#ptr.align-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L846'>#</a></div><div class='texpara'><div id='ptr.align-8.sentence-1' class='sentence'><i >Throws</i>: Nothing<a class='hidden_link' href='#ptr.align-8.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='ptr.align-9'><div class='marginalizedparent'><a class='marginalized' href='#ptr.align-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L850'>#</a></div><div class='texpara'><div id='ptr.align-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#ptr.align-note-2'>2</a></i>:&ensp;<div id='ptr.align-9.sentence-1' class='sentence'>The alignment assumption on an object <span class='texttt'>X</span>
expressed by a call to <span class='texttt'>assume_<span class='shy'></span>aligned</span>
might result in generation of more efficient code<a class='hidden_link' href='#ptr.align-9.sentence-1'>.</a></div> <div id='ptr.align-9.sentence-2' class='sentence'>It is up to the program to ensure that the assumption actually holds<a class='hidden_link' href='#ptr.align-9.sentence-2'>.</a></div> <div id='ptr.align-9.sentence-3' class='sentence'>The call does not cause the implementation to verify or enforce this<a class='hidden_link' href='#ptr.align-9.sentence-3'>.</a></div> <div id='ptr.align-9.sentence-4' class='sentence'>An implementation might only make the assumption
for those operations on <span class='texttt'>X</span> that access <span class='texttt'>X</span>
through the pointer returned by <span class='texttt'>assume_<span class='shy'></span>aligned</span><a class='hidden_link' href='#ptr.align-9.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></div><div id='obj.lifetime' class='section'><h3 ><a class='secnum' href='#obj.lifetime' style='min-width:80pt'>20.2.6</a> Explicit lifetime management <a class='abbr_ref' href='obj.lifetime'>[obj.lifetime]</a></h3><div class='texpara'><div id='lib:start_lifetime_as'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:start_lifetime_as'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  T<span class='operator'>*</span> start_lifetime_as<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>const</span> T<span class='operator'>*</span> start_lifetime_as<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>void</span><span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>volatile</span> T<span class='operator'>*</span> start_lifetime_as<span class='parenthesis'>(</span><span class='keyword'>volatile</span> <span class='keyword'>void</span><span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>const</span> <span class='keyword'>volatile</span> T<span class='operator'>*</span> start_lifetime_as<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>void</span><span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='obj.lifetime-1'><div class='marginalizedparent'><a class='marginalized' href='#obj.lifetime-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L878'>#</a></div><div class='texpara'><div id='obj.lifetime-1.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>T</span> is an implicit-lifetime type (<a href='basic.types.general' title='6.8.1&emsp;General'>[basic.<span class='shy'></span>types.<span class='shy'></span>general]</a>)
and not an incomplete type (<a href='basic.types.general#term.incomplete.type' title='6.8.1&emsp;General'>[basic.<span class='shy'></span>types.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#obj.lifetime-1.sentence-1'>.</a></div></div></div></div><div class='para' id='obj.lifetime-2'><div class='marginalizedparent'><a class='marginalized' href='#obj.lifetime-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L883'>#</a></div><div class='texpara'><div id='obj.lifetime-2.sentence-1' class='sentence'><i >Preconditions</i>: [<span class='texttt'>p, <span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span>p <span class='operator'>+</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span>) denotes a region of allocated storage
that is
a subset of the region of storage
reachable through (<a href='basic.compound' title='6.8.4&emsp;Compound types'>[basic.<span class='shy'></span>compound]</a>) <span class='texttt'>p</span> and
suitably aligned for the type <span class='texttt'>T</span><a class='hidden_link' href='#obj.lifetime-2.sentence-1'>.</a></div></div></div></div><div class='para' id='obj.lifetime-3'><div class='marginalizedparent'><a class='marginalized' href='#obj.lifetime-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L891'>#</a></div><div class='texpara'><div id='obj.lifetime-3.sentence-1' class='sentence'><i >Effects</i>: Implicitly creates objects (<a href='intro.object' title='6.7.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>) within the denoted region
consisting of an object <i >a</i> of type <span class='texttt'>T</span>
whose address is <span class='texttt'>p</span>, and
objects nested within <i >a</i>,
as follows:
The object representation of <i >a</i>
is the contents of the storage prior to the call to <span class='texttt'>start_<span class='shy'></span>lifetime_<span class='shy'></span>as</span><a class='hidden_link' href='#obj.lifetime-3.sentence-1'>.</a></div> <div id='obj.lifetime-3.sentence-2' class='sentence'>The value of each created object <i >o</i>
of trivially-copyable type <span class='texttt'>U</span>
is determined in the same manner as for a call
to <span class='texttt'>bit_<span class='shy'></span>cast<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>E<span class='parenthesis'>)</span></span> (<a href='bit.cast' title='22.15.3&emsp;Function template bit_&shy;cast'>[bit.<span class='shy'></span>cast]</a>),
where <span class='texttt'>E</span> is an lvalue of type <span class='texttt'>U</span> denoting <i >o</i>,
except that the storage is not accessed<a class='hidden_link' href='#obj.lifetime-3.sentence-2'>.</a></div> <div id='obj.lifetime-3.sentence-3' class='sentence'>The value of any other created object is unspecified<a class='hidden_link' href='#obj.lifetime-3.sentence-3'>.</a></div> <div id='obj.lifetime-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#obj.lifetime-note-1'>1</a></i>:&ensp;<div id='obj.lifetime-3.sentence-4' class='sentence'>The unspecified value can be indeterminate<a class='hidden_link' href='#obj.lifetime-3.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='obj.lifetime-4'><div class='marginalizedparent'><a class='marginalized' href='#obj.lifetime-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L911'>#</a></div><div class='texpara'><div id='obj.lifetime-4.sentence-1' class='sentence'><i >Returns</i>: A pointer to the <i >a</i> defined in the <i >Effects</i> paragraph<a class='hidden_link' href='#obj.lifetime-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:start_lifetime_as_array'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:start_lifetime_as_array'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  T<span class='operator'>*</span> start_lifetime_as_array<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p, size_t n<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>const</span> T<span class='operator'>*</span> start_lifetime_as_array<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>void</span><span class='operator'>*</span> p, size_t n<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>volatile</span> T<span class='operator'>*</span> start_lifetime_as_array<span class='parenthesis'>(</span><span class='keyword'>volatile</span> <span class='keyword'>void</span><span class='operator'>*</span> p, size_t n<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>const</span> <span class='keyword'>volatile</span> T<span class='operator'>*</span> start_lifetime_as_array<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>void</span><span class='operator'>*</span> p, size_t n<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='obj.lifetime-5'><div class='marginalizedparent'><a class='marginalized' href='#obj.lifetime-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L930'>#</a></div><div class='texpara'><div id='obj.lifetime-5.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>T</span> is a complete type<a class='hidden_link' href='#obj.lifetime-5.sentence-1'>.</a></div></div></div></div><div class='para' id='obj.lifetime-6'><div class='marginalizedparent'><a class='marginalized' href='#obj.lifetime-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L934'>#</a></div><div class='texpara'><div id='obj.lifetime-6.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>p</span> is suitably aligned for an array of <span class='texttt'>T</span> or is null<a class='hidden_link' href='#obj.lifetime-6.sentence-1'>.</a></div> <div id='obj.lifetime-6.sentence-2' class='sentence'><span class='texttt'>n <span class='anglebracket'>&lt;</span><span class='operator'>=</span> size_<span class='shy'></span>t<span class='parenthesis'>(</span><span class='operator'>-</span><span class='literal'>1</span><span class='parenthesis'>)</span> <span class='operator'>/</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#obj.lifetime-6.sentence-2'>.</a></div> <div id='obj.lifetime-6.sentence-3' class='sentence'>If <span class='texttt'>n <span class='anglebracket'>&gt;</span> <span class='literal'>0</span></span> is <span class='texttt'><span class='literal'>true</span></span>,
[<span class='texttt'><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span>p, <span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span>p <span class='operator'>+</span> <span class='parenthesis'>(</span>n <span class='operator'>*</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>) denotes
a region of allocated storage that is
a subset of the region of storage
reachable through (<a href='basic.compound' title='6.8.4&emsp;Compound types'>[basic.<span class='shy'></span>compound]</a>) <span class='texttt'>p</span><a class='hidden_link' href='#obj.lifetime-6.sentence-3'>.</a></div></div></div></div><div class='para' id='obj.lifetime-7'><div class='marginalizedparent'><a class='marginalized' href='#obj.lifetime-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L944'>#</a></div><div class='texpara'><div id='obj.lifetime-7.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>n <span class='anglebracket'>&gt;</span> <span class='literal'>0</span></span> is <span class='texttt'><span class='literal'>true</span></span>,
equivalent to
<span class='texttt'>start_<span class='shy'></span>lifetime_<span class='shy'></span>as<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span>
where <span class='texttt'>U</span> is the type “array of <span class='texttt'>n</span> <span class='texttt'>T</span>”<a class='hidden_link' href='#obj.lifetime-7.sentence-1'>.</a></div> <div id='obj.lifetime-7.sentence-2' class='sentence'>Otherwise, there are no effects<a class='hidden_link' href='#obj.lifetime-7.sentence-2'>.</a></div></div></div></div><div class='para' id='obj.lifetime-8'><div class='marginalizedparent'><a class='marginalized' href='#obj.lifetime-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L952'>#</a></div><div class='texpara'><div id='obj.lifetime-8.sentence-1' class='sentence'><i >Returns</i>: A pointer to the first element of the created array,
if any;
otherwise,
a pointer that compares equal to <span class='texttt'>p</span> (<a href='expr.eq' title='7.6.10&emsp;Equality operators'>[expr.<span class='shy'></span>eq]</a>)<a class='hidden_link' href='#obj.lifetime-8.sentence-1'>.</a></div></div></div></div></div><div id='allocator.tag' class='section'><h3 ><a class='secnum' href='#allocator.tag' style='min-width:80pt'>20.2.7</a> Allocator argument tag <a class='abbr_ref' href='allocator.tag'>[allocator.tag]</a></h3><div class='texpara'><div id='lib:allocator_arg'><div id='lib:allocator_arg_t'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocator_arg_t'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> allocator_arg_t <span class='curlybracket'>{</span> <span class='keyword'>explicit</span> allocator_arg_t<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>; <span class='curlybracket'>}</span>;
  <span class='keyword'>inline</span> <span class='keyword'>constexpr</span> allocator_arg_t allocator_arg<span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</code></div></div></div></div><div class='para' id='allocator.tag-1'><div class='marginalizedparent'><a class='marginalized' href='#allocator.tag-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L971'>#</a></div><div class='texpara'><div id='allocator.tag-1.sentence-1' class='sentence'>The <span class='texttt'>allocator_<span class='shy'></span>arg_<span class='shy'></span>t</span> struct is an empty class type used as a unique type to
disambiguate constructor and function overloading<a class='hidden_link' href='#allocator.tag-1.sentence-1'>.</a></div> <div id='allocator.tag-1.sentence-2' class='sentence'>Specifically, several types (see
<span class='texttt'>tuple</span> <a href='tuple' title='22.4&emsp;Tuples'>[tuple]</a>) have constructors with <span class='texttt'>allocator_<span class='shy'></span>arg_<span class='shy'></span>t</span> as the first
argument, immediately followed by an argument of a type that meets the
<i >Cpp17Allocator</i> requirements (<a href='allocator.requirements.general' title='16.4.4.6.1&emsp;General'>[allocator.<span class='shy'></span>requirements.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#allocator.tag-1.sentence-2'>.</a></div></div></div></div><div id='allocator.uses' class='section'><h3 ><a class='secnum' href='#allocator.uses' style='min-width:80pt'>20.2.8</a> <span class='texttt'>uses_<span class='shy'></span>allocator</span> <a class='abbr_ref' href='allocator.uses'>[allocator.uses]</a></h3><div id='allocator.uses.trait' class='section'><h4 ><a class='secnum' href='#allocator.uses.trait' style='min-width:95pt'>20.2.8.1</a> <span class='texttt'>uses_<span class='shy'></span>allocator</span> trait <a class='abbr_ref' href='allocator.uses.trait'>[allocator.uses.trait]</a></h4><div class='texpara'><div id='lib:uses_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:uses_allocator'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> uses_allocator;
</code></div></div></div><div class='para' id='allocator.uses.trait-1'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.trait-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L988'>#</a></div><div class='texpara'><div id='allocator.uses.trait-1.sentence-1' class='sentence'><i >Remarks</i>: Automatically detects whether <span class='texttt'>T</span> has a nested <span class='texttt'>allocator_<span class='shy'></span>type</span> that
is convertible from <span class='texttt'>Alloc</span><a class='hidden_link' href='#allocator.uses.trait-1.sentence-1'>.</a></div> <div id='allocator.uses.trait-1.sentence-2' class='sentence'>Meets the <i >Cpp17BinaryTypeTrait</i>
requirements (<a href='meta.rqmts' title='21.3.2&emsp;Requirements'>[meta.<span class='shy'></span>rqmts]</a>)<a class='hidden_link' href='#allocator.uses.trait-1.sentence-2'>.</a></div> <div id='allocator.uses.trait-1.sentence-3' class='sentence'>The implementation shall provide a definition that is
derived from <span class='texttt'>true_<span class='shy'></span>type</span> if the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id____'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>T<span class='operator'>&#x200b;::&#x200b;</span>allocator_<span class='shy'></span>type</span>
is valid and denotes a type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>) and
<span class='texttt'>is_<span class='shy'></span>convertible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>Alloc, T<span class='operator'>&#x200b;::&#x200b;</span>allocator_<span class='shy'></span>type<span class='anglebracket'>&gt;</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>false</span></span>, otherwise it shall be
derived from <span class='texttt'>false_<span class='shy'></span>type</span><a class='hidden_link' href='#allocator.uses.trait-1.sentence-3'>.</a></div> <div id='allocator.uses.trait-1.sentence-4' class='sentence'>A program may specialize this template to derive from
<span class='texttt'>true_<span class='shy'></span>type</span> for a program-defined type <span class='texttt'>T</span> that does not have a nested
<span class='texttt'>allocator_<span class='shy'></span>type</span> but nonetheless can be constructed with an allocator where
either:
<ul class='itemize'><li id='allocator.uses.trait-1.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#allocator.uses.trait-1.1'>(1.1)</a></div>the first argument of a constructor has type <span class='texttt'>allocator_<span class='shy'></span>arg_<span class='shy'></span>t</span> and the
second argument has type <span class='texttt'>Alloc</span> or</li><li id='allocator.uses.trait-1.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#allocator.uses.trait-1.2'>(1.2)</a></div>the last argument of a constructor has type <span class='texttt'>Alloc</span><a class='hidden_link' href='#allocator.uses.trait-1.sentence-4'>.</a></li></ul></div></div></div></div></div><div id='allocator.uses.construction' class='section'><h4 ><a class='secnum' href='#allocator.uses.construction' style='min-width:95pt'>20.2.8.2</a> Uses-allocator construction <a class='abbr_ref' href='allocator.uses.construction'>[allocator.uses.construction]</a></h4><div class='para' id='allocator.uses.construction-1'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1010'>#</a></div><div class='texpara'><div id='allocator.uses.construction-1.sentence-1' class='sentence'><a class='hidden_link' href='#def:uses-allocator_construction' title='20.2.8.2&emsp;Uses-allocator construction&emsp;[allocator.uses.construction]'><span id='def:uses-allocator_construction'><i >Uses-allocator construction</i></span></a>
with allocator <span class='texttt'>alloc</span> and constructor arguments <span class='texttt'>args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span>
refers to the construction of an object of type <span class='texttt'>T</span>
such that <span class='texttt'>alloc</span> is passed to the constructor of <span class='texttt'>T</span>
if <span class='texttt'>T</span> uses an allocator type compatible with <span class='texttt'>alloc</span><a class='hidden_link' href='#allocator.uses.construction-1.sentence-1'>.</a></div> <div id='allocator.uses.construction-1.sentence-2' class='sentence'>When applied to the construction of an object of type <span class='texttt'>T</span>,
it is equivalent to initializing it with the value of the expression
<span class='texttt'>make_<span class='shy'></span>obj_<span class='shy'></span>using_<span class='shy'></span>allocator<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>alloc, args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>, described below<a class='hidden_link' href='#allocator.uses.construction-1.sentence-2'>.</a></div></div></div><div class='para' id='allocator.uses.construction-2'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1020'>#</a></div><div class='texpara'><div id='allocator.uses.construction-2.sentence-1' class='sentence'>The following utility functions support
three conventions for passing <span class='texttt'>alloc</span> to a constructor:
<ul class='itemize'><li id='allocator.uses.construction-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#allocator.uses.construction-2.1'>(2.1)</a></div><div class='texpara'><div id='allocator.uses.construction-2.1.sentence-1' class='sentence'>If <span class='texttt'>T</span> does not use an allocator compatible with <span class='texttt'>alloc</span>,
  then <span class='texttt'>alloc</span> is ignored<a class='hidden_link' href='#allocator.uses.construction-2.1.sentence-1'>.</a></div></div></li><li id='allocator.uses.construction-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#allocator.uses.construction-2.2'>(2.2)</a></div><div class='texpara'><div id='allocator.uses.construction-2.2.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> has a constructor invocable as
  <span class='texttt'>T<span class='parenthesis'>(</span>allocator_<span class='shy'></span>arg, alloc, args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span> (leading-allocator convention),
  then uses-allocator construction chooses this constructor form<a class='hidden_link' href='#allocator.uses.construction-2.2.sentence-1'>.</a></div></div></li><li id='allocator.uses.construction-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#allocator.uses.construction-2.3'>(2.3)</a></div><div class='texpara'><div id='allocator.uses.construction-2.3.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> has a constructor invocable as
  <span class='texttt'>T<span class='parenthesis'>(</span>args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>, alloc<span class='parenthesis'>)</span></span> (trailing-allocator convention),
  then uses-allocator construction chooses this constructor form<a class='hidden_link' href='#allocator.uses.construction-2.3.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='allocator.uses.construction-3'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1037'>#</a></div><div class='texpara'><div id='allocator.uses.construction-3.sentence-1' class='sentence'>The <span class='texttt'>uses_<span class='shy'></span>allocator_<span class='shy'></span>construction_<span class='shy'></span>args</span> function template
takes an allocator and argument list and
produces (as a tuple) a new argument list matching one of the above conventions<a class='hidden_link' href='#allocator.uses.construction-3.sentence-1'>.</a></div> <div id='allocator.uses.construction-3.sentence-2' class='sentence'>Additionally, overloads are provided
that treat specializations of <span class='texttt'>pair</span>
such that uses-allocator construction is applied individually
to the <span class='texttt'>first</span> and <span class='texttt'>second</span> data members<a class='hidden_link' href='#allocator.uses.construction-3.sentence-2'>.</a></div> <div id='allocator.uses.construction-3.sentence-3' class='sentence'>The <span class='texttt'>make_<span class='shy'></span>obj_<span class='shy'></span>using_<span class='shy'></span>allocator</span> and
<span class='texttt'>uninitialized_<span class='shy'></span>construct_<span class='shy'></span>using_<span class='shy'></span>allocator</span> function templates
apply the modified constructor arguments
to construct an object of type <span class='texttt'>T</span>
as a return value or in-place, respectively<a class='hidden_link' href='#allocator.uses.construction-3.sentence-3'>.</a></div> <div id='allocator.uses.construction-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#allocator.uses.construction-note-1'>1</a></i>:&ensp;<div id='allocator.uses.construction-3.sentence-4' class='sentence'>For <span class='texttt'>uses_<span class='shy'></span>allocator_<span class='shy'></span>construction_<span class='shy'></span>args</span> and
<span class='texttt'>make_<span class='shy'></span>obj_<span class='shy'></span>using_<span class='shy'></span>allocator</span>, type <span class='texttt'>T</span>
is not deduced and must therefore be specified explicitly by the caller<a class='hidden_link' href='#allocator.uses.construction-3.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='texpara'><div id='lib:uses_allocator_construction_args'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:uses_allocator_construction_args'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,
                                                  Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='allocator.uses.construction-4'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1064'>#</a></div><div class='texpara'><div id='allocator.uses.construction-4.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is not a specialization of <span class='texttt'>pair</span><a class='hidden_link' href='#allocator.uses.construction-4.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.uses.construction-5'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1068'>#</a></div><div class='texpara'><div id='allocator.uses.construction-5.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>tuple</span> value determined as follows:
<ul class='itemize'><li id='allocator.uses.construction-5.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#allocator.uses.construction-5.1'>(5.1)</a></div><div class='texpara'><div id='allocator.uses.construction-5.1.sentence-1' class='sentence'>If <span class='texttt'>uses_<span class='shy'></span>allocator_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>, Alloc<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span> and
  <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T,<br/>Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>,
  return <span class='texttt'>forward_<span class='shy'></span>as_<span class='shy'></span>tuple<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.uses.construction-5.1.sentence-1'>.</a></div></div></li><li id='allocator.uses.construction-5.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#allocator.uses.construction-5.2'>(5.2)</a></div><div class='texpara'><div id='allocator.uses.construction-5.2.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>uses_<span class='shy'></span>allocator_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>, Alloc<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span> and
  <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T, allocator_<span class='shy'></span>arg_<span class='shy'></span>t, <span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span>, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span></span>
  is <span class='texttt'><span class='literal'>true</span></span>,
  return
<span class='codeblock'>tuple<span class='anglebracket'>&lt;</span>allocator_arg_t, <span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span>, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>
  allocator_arg, alloc, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>
</span></div></div></li><li id='allocator.uses.construction-5.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#allocator.uses.construction-5.3'>(5.3)</a></div><div class='texpara'><div id='allocator.uses.construction-5.3.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>uses_<span class='shy'></span>allocator_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>, Alloc<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span> and
  <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>, <span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>,
  return <span class='texttt'>forward_<span class='shy'></span>as_<span class='shy'></span>tuple<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>, alloc<span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.uses.construction-5.3.sentence-1'>.</a></div></div></li><li id='allocator.uses.construction-5.4'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#allocator.uses.construction-5.4'>(5.4)</a></div><div class='texpara'><div id='allocator.uses.construction-5.4.sentence-1' class='sentence'>Otherwise, the program is ill-formed<a class='hidden_link' href='#allocator.uses.construction-5.4.sentence-1'>.</a></div></div></li></ul></div> <div id='allocator.uses.construction-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#allocator.uses.construction-note-2'>2</a></i>:&ensp;<div id='allocator.uses.construction-5.sentence-2' class='sentence'>This definition prevents a silent failure
to pass the allocator to a constructor of a type for which
<span class='texttt'>uses_<span class='shy'></span>allocator_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T, Alloc<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#allocator.uses.construction-5.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:uses_allocator_construction_args_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:uses_allocator_construction_args_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> Tuple1, <span class='keyword'>class</span> Tuple2<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc, piecewise_construct_t,
                                                  Tuple1<span class='operator'>&amp;</span><span class='operator'>&amp;</span> x, Tuple2<span class='operator'>&amp;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='allocator.uses.construction-6'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1107'>#</a></div><div class='texpara'><div id='allocator.uses.construction-6.sentence-1' class='sentence'>Let <span class='texttt'>T1</span> be <span class='texttt'>T<span class='operator'>&#x200b;::&#x200b;</span>first_<span class='shy'></span>type</span><a class='hidden_link' href='#allocator.uses.construction-6.sentence-1'>.</a></div> <div id='allocator.uses.construction-6.sentence-2' class='sentence'>Let <span class='texttt'>T2</span> be <span class='texttt'>T<span class='operator'>&#x200b;::&#x200b;</span>second_<span class='shy'></span>type</span><a class='hidden_link' href='#allocator.uses.construction-6.sentence-2'>.</a></div></div></div></div><div class='para' id='allocator.uses.construction-7'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1111'>#</a></div><div class='texpara'><div id='allocator.uses.construction-7.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is a specialization of <span class='texttt'>pair</span><a class='hidden_link' href='#allocator.uses.construction-7.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.uses.construction-8'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1115'>#</a></div><div class='texpara'><div id='allocator.uses.construction-8.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> make_tuple<span class='parenthesis'>(</span>
  piecewise_construct,
  apply<span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='operator'>&amp;</span>alloc<span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args1<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
          <span class='keyword'>return</span> uses_allocator_construction_args<span class='anglebracket'>&lt;</span>T1<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>
            alloc, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span>args1<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args1<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
        <span class='curlybracket'>}</span>, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>Tuple1<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span><span class='parenthesis'>)</span>,
  apply<span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='operator'>&amp;</span>alloc<span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args2<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
          <span class='keyword'>return</span> uses_allocator_construction_args<span class='anglebracket'>&lt;</span>T2<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>
            alloc, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span>args2<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args2<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
        <span class='curlybracket'>}</span>, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>Tuple2<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>y<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:uses_allocator_construction_args__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:uses_allocator_construction_args__'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='allocator.uses.construction-9'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1139'>#</a></div><div class='texpara'><div id='allocator.uses.construction-9.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is a specialization of <span class='texttt'>pair</span><a class='hidden_link' href='#allocator.uses.construction-9.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.uses.construction-10'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1143'>#</a></div><div class='texpara'><div id='allocator.uses.construction-10.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> uses_allocator_construction_args<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>alloc, piecewise_construct,
                                           tuple<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span>, tuple<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:uses_allocator_construction_args___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:uses_allocator_construction_args___'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> U, <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,
                                                  U<span class='operator'>&amp;</span><span class='operator'>&amp;</span> u, V<span class='operator'>&amp;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='allocator.uses.construction-11'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1160'>#</a></div><div class='texpara'><div id='allocator.uses.construction-11.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is a specialization of <span class='texttt'>pair</span><a class='hidden_link' href='#allocator.uses.construction-11.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.uses.construction-12'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1164'>#</a></div><div class='texpara'><div id='allocator.uses.construction-12.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> uses_allocator_construction_args<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>alloc, piecewise_construct,
                                           forward_as_tuple<span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>u<span class='parenthesis'>)</span><span class='parenthesis'>)</span>,
                                           forward_as_tuple<span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>V<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>v<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:uses_allocator_construction_args____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:uses_allocator_construction_args____'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> U, <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,
                                                  pair<span class='anglebracket'>&lt;</span>U, V<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> pr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> U, <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,
                                                  <span class='keyword'>const</span> pair<span class='anglebracket'>&lt;</span>U, V<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> pr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='allocator.uses.construction-13'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1185'>#</a></div><div class='texpara'><div id='allocator.uses.construction-13.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is a specialization of <span class='texttt'>pair</span><a class='hidden_link' href='#allocator.uses.construction-13.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.uses.construction-14'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1189'>#</a></div><div class='texpara'><div id='allocator.uses.construction-14.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> uses_allocator_construction_args<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>alloc, piecewise_construct,
                                           forward_as_tuple<span class='parenthesis'>(</span>pr<span class='operator'>.</span>first<span class='parenthesis'>)</span>,
                                           forward_as_tuple<span class='parenthesis'>(</span>pr<span class='operator'>.</span>second<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:uses_allocator_construction_args_____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:uses_allocator_construction_args_____'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> U, <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,
                                                  pair<span class='anglebracket'>&lt;</span>U, V<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> pr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> U, <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc,
                                                  <span class='keyword'>const</span> pair<span class='anglebracket'>&lt;</span>U, V<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> pr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='allocator.uses.construction-15'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1210'>#</a></div><div class='texpara'><div id='allocator.uses.construction-15.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is a specialization of <span class='texttt'>pair</span><a class='hidden_link' href='#allocator.uses.construction-15.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.uses.construction-16'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1214'>#</a></div><div class='texpara'><div id='allocator.uses.construction-16.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> uses_allocator_construction_args<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>alloc, piecewise_construct,
                                           forward_as_tuple<span class='parenthesis'>(</span>get<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>move<span class='parenthesis'>(</span>pr<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>,
                                           forward_as_tuple<span class='parenthesis'>(</span>get<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>move<span class='parenthesis'>(</span>pr<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:uses_allocator_construction_args______'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:uses_allocator_construction_args______'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <a href='tuple.syn#concept:pair-like' title='22.4.2&emsp;Header &lt;tuple&gt; synopsis&emsp;[tuple.syn]'><span id='conceptref:pair-like_'><span class='texttt'><i >pair-like</i></span></span></a> P<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc, P<span class='operator'>&amp;</span><span class='operator'>&amp;</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='allocator.uses.construction-17'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1231'>#</a></div><div class='texpara'><div id='allocator.uses.construction-17.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is a specialization of <span class='texttt'>pair</span> and
<span class='texttt'>remove_<span class='shy'></span>cvref_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>P<span class='anglebracket'>&gt;</span></span> is not a specialization of <span class='texttt'>ranges<span class='operator'>&#x200b;::&#x200b;</span>subrange</span><a class='hidden_link' href='#allocator.uses.construction-17.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.uses.construction-18'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1236'>#</a></div><div class='texpara'><div id='allocator.uses.construction-18.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> uses_allocator_construction_args<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>alloc, piecewise_construct,
                                           forward_as_tuple<span class='parenthesis'>(</span>get<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>P<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>,
                                           forward_as_tuple<span class='parenthesis'>(</span>get<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>P<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:uses_allocator_construction_args_______'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:uses_allocator_construction_args_______'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> uses_allocator_construction_args<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc, U<span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='allocator.uses.construction-19'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1253'>#</a></div><div class='texpara'><div id='allocator.uses.construction-19.sentence-1' class='sentence'>Let <span class='texttt'><i >FUN</i></span> be the function template:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> A, <span class='keyword'>class</span> B<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> <i >FUN</i><span class='parenthesis'>(</span><span class='keyword'>const</span> pair<span class='anglebracket'>&lt;</span>A, B<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='para' id='allocator.uses.construction-20'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1260'>#</a></div><div class='texpara'><div id='allocator.uses.construction-20.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is a specialization of <span class='texttt'>pair</span>, and either:
<ul class='itemize'><li id='allocator.uses.construction-20.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#allocator.uses.construction-20.1'>(20.1)</a></div><span class='texttt'>remove_<span class='shy'></span>cvref_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> is a specialization of <span class='texttt'>ranges<span class='operator'>&#x200b;::&#x200b;</span>subrange</span>, or</li><li id='allocator.uses.construction-20.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#allocator.uses.construction-20.2'>(20.2)</a></div><span class='texttt'>U</span> does not satisfy <a href='tuple.syn#concept:pair-like' title='22.4.2&emsp;Header &lt;tuple&gt; synopsis&emsp;[tuple.syn]'><span id='conceptref:pair-like__'><span class='texttt'><i >pair-like</i></span></span></a> and
the expression <span class='texttt'><span class='texttt'><i >FUN</i></span><span class='parenthesis'>(</span>u<span class='parenthesis'>)</span></span> is not well-formed
when considered as an unevaluated operand<a class='hidden_link' href='#allocator.uses.construction-20.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='allocator.uses.construction-21'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1272'>#</a></div><div class='texpara'><div id='allocator.uses.construction-21.sentence-1' class='sentence'>Let <span class='texttt'><i >pair-constructor</i></span> be an exposition-only class defined as follows:</div></div><div class='texpara'><span class='codeblock'><span class='keyword'>class</span> <i >pair-constructor</i> <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> <i >pair-type</i> <span class='operator'>=</span> remove_cv_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;                             <span class='comment'>// <i >exposition only</i></span>

  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> <i >do-construct</i><span class='parenthesis'>(</span><span class='keyword'>const</span> <i >pair-type</i><span class='operator'>&amp;</span> p<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span>       <span class='comment'>// <i >exposition only</i></span>
    <span class='keyword'>return</span> make_obj_using_allocator<span class='anglebracket'>&lt;</span><i >pair-type</i><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><i >alloc_</i>, p<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>auto</span> <i >do-construct</i><span class='parenthesis'>(</span><i >pair-type</i><span class='operator'>&amp;</span><span class='operator'>&amp;</span> p<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span>            <span class='comment'>// <i >exposition only</i></span>
    <span class='keyword'>return</span> make_obj_using_allocator<span class='anglebracket'>&lt;</span><i >pair-type</i><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><i >alloc_</i>, std<span class='operator'>::</span>move<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>

  <span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> <i >alloc_</i>;  <span class='comment'>// <i >exposition only</i></span>
  U<span class='operator'>&amp;</span> <i >u_</i>;                <span class='comment'>// <i >exposition only</i></span>

<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>operator</span> <i >pair-type</i><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span>
    <span class='keyword'>return</span> <i >do-construct</i><span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><i >u_</i><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span></div></div></div><div class='para' id='allocator.uses.construction-22'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1296'>#</a></div><div class='texpara'><div id='allocator.uses.construction-22.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>make_<span class='shy'></span>tuple<span class='parenthesis'>(</span>pc<span class='parenthesis'>)</span></span>,
where <span class='texttt'>pc</span> is a <span class='texttt'><i >pair-constructor</i></span> object
whose <span class='texttt'><i >alloc_<span class='shy'></span></i></span> member is initialized with <span class='texttt'>alloc</span> and
whose <span class='texttt'><i >u_<span class='shy'></span></i></span> member is initialized with <span class='texttt'>u</span><a class='hidden_link' href='#allocator.uses.construction-22.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:make_obj_using_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_obj_using_allocator'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> T make_obj_using_allocator<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='allocator.uses.construction-23'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1311'>#</a></div><div class='texpara'><div id='allocator.uses.construction-23.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> make_from_tuple<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>uses_allocator_construction_args<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>
                            alloc, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:uninitialized_construct_using_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:uninitialized_construct_using_allocator'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> Alloc, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> T<span class='operator'>*</span> uninitialized_construct_using_allocator<span class='parenthesis'>(</span>T<span class='operator'>*</span> p, <span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> alloc, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='allocator.uses.construction-24'><div class='marginalizedparent'><a class='marginalized' href='#allocator.uses.construction-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1327'>#</a></div><div class='texpara'><div id='allocator.uses.construction-24.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> apply<span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> xs<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
       <span class='keyword'>return</span> construct_at<span class='parenthesis'>(</span>p, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>xs<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
     <span class='curlybracket'>}</span>, uses_allocator_construction_args<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>alloc, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div></div></div></div></div></div><div id='allocator.traits' class='section'><h3 ><a class='secnum' href='#allocator.traits' style='min-width:80pt'>20.2.9</a> Allocator traits <a class='abbr_ref' href='allocator.traits'>[allocator.traits]</a></h3><div id='allocator.traits.general' class='section'><h4 ><a class='secnum' href='#allocator.traits.general' style='min-width:95pt'>20.2.9.1</a> General <a class='abbr_ref' href='allocator.traits.general'>[allocator.traits.general]</a></h4><div class='para' id='allocator.traits.general-1'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1341'>#</a></div><div class='texpara'><div id='allocator.traits.general-1.sentence-1' class='sentence'>The class template <span class='texttt'>allocator_<span class='shy'></span>traits</span> supplies a uniform interface to all
allocator types<a class='hidden_link' href='#allocator.traits.general-1.sentence-1'>.</a></div> <div id='allocator.traits.general-1.sentence-2' class='sentence'>An allocator cannot be a non-class type, however, even if <span class='texttt'>allocator_<span class='shy'></span>traits</span>
supplies the entire required interface<a class='hidden_link' href='#allocator.traits.general-1.sentence-2'>.</a></div> <div id='allocator.traits.general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#allocator.traits.general-note-1'>1</a></i>:&ensp;<div id='allocator.traits.general-1.sentence-3' class='sentence'>Thus, it is always possible to create
a derived class from an allocator<a class='hidden_link' href='#allocator.traits.general-1.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='allocator.traits.general-1.sentence-4' class='sentence'>
If a program declares
an explicit or partial specialization of <span class='texttt'>allocator_<span class='shy'></span>traits</span>,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#allocator.traits.general-1.sentence-4'>.</a></div></div><div class='texpara'><span id='lib:allocator_traits'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocator_traits'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Alloc<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> allocator_traits <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> allocator_type     <span class='operator'>=</span> Alloc;

    <span class='keyword'>using</span> value_type         <span class='operator'>=</span> <span class='keyword'>typename</span> Alloc<span class='operator'>::</span>value_type;

    <span class='keyword'>using</span> pointer            <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>using</span> const_pointer      <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>using</span> void_pointer       <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>using</span> const_void_pointer <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;

    <span class='keyword'>using</span> difference_type    <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>using</span> size_type          <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;

    <span class='keyword'>using</span> propagate_on_container_copy_assignment <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>using</span> propagate_on_container_move_assignment <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>using</span> propagate_on_container_swap            <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>using</span> is_always_equal                        <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> rebind_alloc <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> rebind_traits <span class='operator'>=</span> allocator_traits<span class='anglebracket'>&lt;</span>rebind_alloc<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>;

    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>static</span> <span class='keyword'>constexpr</span> pointer allocate<span class='parenthesis'>(</span>Alloc<span class='operator'>&amp;</span> a, size_type n<span class='parenthesis'>)</span>;
    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>static</span> <span class='keyword'>constexpr</span> pointer allocate<span class='parenthesis'>(</span>Alloc<span class='operator'>&amp;</span> a, size_type n,
                                                    const_void_pointer hint<span class='parenthesis'>)</span>;
    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>static</span> <span class='keyword'>constexpr</span> allocation_result<span class='anglebracket'>&lt;</span>pointer, size_type<span class='anglebracket'>&gt;</span>
      allocate_at_least<span class='parenthesis'>(</span>Alloc<span class='operator'>&amp;</span> a, size_type n<span class='parenthesis'>)</span>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> deallocate<span class='parenthesis'>(</span>Alloc<span class='operator'>&amp;</span> a, pointer p, size_type n<span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> construct<span class='parenthesis'>(</span>Alloc<span class='operator'>&amp;</span> a, T<span class='operator'>*</span> p, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
      <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> destroy<span class='parenthesis'>(</span>Alloc<span class='operator'>&amp;</span> a, T<span class='operator'>*</span> p<span class='parenthesis'>)</span>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> size_type max_size<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> Alloc select_on_container_copy_construction<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div></div></div><div id='allocator.traits.types' class='section'><h4 ><a class='secnum' href='#allocator.traits.types' style='min-width:95pt'>20.2.9.2</a> Member types <a class='abbr_ref' href='allocator.traits.types'>[allocator.traits.types]</a></h4><div class='texpara'><div id='lib:allocator_traits,pointer'><div id='lib:pointer,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:pointer,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> pointer <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.traits.types-1'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.types-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1407'>#</a></div><div class='texpara'><div id='allocator.traits.types-1.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>pointer</span> if
the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_____'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>pointer</span> is valid and denotes a
type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>); otherwise, <span class='texttt'>value_<span class='shy'></span>type<span class='operator'>*</span></span><a class='hidden_link' href='#allocator.traits.types-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,const_pointer'><div id='lib:const_pointer,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:const_pointer,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> const_pointer <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.traits.types-2'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.types-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1419'>#</a></div><div class='texpara'><div id='allocator.traits.types-2.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>const_<span class='shy'></span>pointer</span> if
the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id______'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>const_<span class='shy'></span>pointer</span> is valid and denotes a
type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>); otherwise,
<span class='texttt'>pointer_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>pointer<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>rebind<span class='anglebracket'>&lt;</span>&#x200b;<span class='keyword'>const</span> value_<span class='shy'></span>type<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#allocator.traits.types-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,void_pointer'><div id='lib:void_pointer,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:void_pointer,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> void_pointer <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.traits.types-3'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.types-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1432'>#</a></div><div class='texpara'><div id='allocator.traits.types-3.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>void_<span class='shy'></span>pointer</span> if
the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_______'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>void_<span class='shy'></span>pointer</span> is valid and denotes a
type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>); otherwise,
<span class='texttt'>pointer_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>pointer<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>rebind<span class='anglebracket'>&lt;</span>&#x200b;<span class='keyword'>void</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#allocator.traits.types-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,const_void_pointer'><div id='lib:const_void_pointer,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:const_void_pointer,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> const_void_pointer <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.traits.types-4'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.types-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1445'>#</a></div><div class='texpara'><div id='allocator.traits.types-4.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>const_<span class='shy'></span>void_<span class='shy'></span>pointer</span> if
the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id________'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>const_<span class='shy'></span>void_<span class='shy'></span>pointer</span> is valid and denotes a
type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>); otherwise,
<span class='texttt'>pointer_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>pointer<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>&#x200b;rebind<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>void</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#allocator.traits.types-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,difference_type'><div id='lib:difference_type,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:difference_type,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> difference_type <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.traits.types-5'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.types-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1458'>#</a></div><div class='texpara'><div id='allocator.traits.types-5.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>difference_<span class='shy'></span>type</span> if
the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_________'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>difference_<span class='shy'></span>type</span> is valid and denotes a
type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>); otherwise,
<span class='texttt'>pointer_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>pointer<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>difference_<span class='shy'></span>type</span><a class='hidden_link' href='#allocator.traits.types-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,size_type'><div id='lib:size_type,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:size_type,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> size_type <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.traits.types-6'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.types-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1471'>#</a></div><div class='texpara'><div id='allocator.traits.types-6.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>type</span> if
the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id__________'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>type</span> is valid and denotes a
type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>); otherwise,
<span class='texttt'>make_<span class='shy'></span>unsigned_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>difference_<span class='shy'></span>type<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#allocator.traits.types-6.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,propagate_on_container_copy_assignment'><div id='lib:propagate_on_container_copy_assignment,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:propagate_on_container_copy_assignment,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> propagate_on_container_copy_assignment <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.traits.types-7'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.types-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1484'>#</a></div><div class='texpara'><div id='allocator.traits.types-7.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>propagate_<span class='shy'></span>on_<span class='shy'></span>container_<span class='shy'></span>copy_<span class='shy'></span>assignment</span> if
the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id___________'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>propagate_<span class='shy'></span>on_<span class='shy'></span>container_<span class='shy'></span>copy_<span class='shy'></span>assignment</span> is valid and denotes a
type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>); otherwise
<span class='texttt'>false_<span class='shy'></span>type</span><a class='hidden_link' href='#allocator.traits.types-7.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,propagate_on_container_move_assignment'><div id='lib:propagate_on_container_move_assignment,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:propagate_on_container_move_assignment,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> propagate_on_container_move_assignment <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.traits.types-8'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.types-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1497'>#</a></div><div class='texpara'><div id='allocator.traits.types-8.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>propagate_<span class='shy'></span>on_<span class='shy'></span>container_<span class='shy'></span>move_<span class='shy'></span>assignment</span> if
the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id____________'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>propagate_<span class='shy'></span>on_<span class='shy'></span>container_<span class='shy'></span>move_<span class='shy'></span>assignment</span> is valid and denotes a
type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>); otherwise
<span class='texttt'>false_<span class='shy'></span>type</span><a class='hidden_link' href='#allocator.traits.types-8.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,propagate_on_container_swap'><div id='lib:propagate_on_container_swap,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:propagate_on_container_swap,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> propagate_on_container_swap <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.traits.types-9'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.types-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1510'>#</a></div><div class='texpara'><div id='allocator.traits.types-9.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>propagate_<span class='shy'></span>on_<span class='shy'></span>container_<span class='shy'></span>swap</span> if
the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_____________'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>propagate_<span class='shy'></span>on_<span class='shy'></span>container_<span class='shy'></span>swap</span> is valid and denotes a
type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>); otherwise
<span class='texttt'>false_<span class='shy'></span>type</span><a class='hidden_link' href='#allocator.traits.types-9.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,is_always_equal'><div id='lib:is_always_equal,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:is_always_equal,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> is_always_equal <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.traits.types-10'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.types-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1523'>#</a></div><div class='texpara'><div id='allocator.traits.types-10.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>is_<span class='shy'></span>always_<span class='shy'></span>equal</span> if
the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id______________'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>is_<span class='shy'></span>always_<span class='shy'></span>equal</span>
is valid and denotes a type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>);
otherwise <span class='texttt'>is_<span class='shy'></span>empty<span class='anglebracket'>&lt;</span>Alloc<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>type</span><a class='hidden_link' href='#allocator.traits.types-10.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,rebind_alloc'><div id='lib:rebind_alloc,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:rebind_alloc,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> rebind_alloc <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.traits.types-11'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.types-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1536'>#</a></div><div class='texpara'><div id='allocator.traits.types-11.sentence-1' class='sentence'><i >Alias template</i>: <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>rebind<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>other</span> if
the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_______________'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>Alloc<span class='operator'>&#x200b;::&#x200b;</span>rebind<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>other</span> is valid and denotes a
type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>); otherwise,
<span class='texttt'>Alloc<span class='anglebracket'>&lt;</span>T, Args<span class='anglebracket'>&gt;</span></span> if <span class='texttt'>Alloc</span> is a class template instantiation
of the form <span class='texttt'>Alloc<span class='anglebracket'>&lt;</span>U, Args<span class='anglebracket'>&gt;</span></span>, where <span class='texttt'>Args</span> is zero or more type arguments;
otherwise, the instantiation of <span class='texttt'>rebind_<span class='shy'></span>alloc</span> is ill-formed<a class='hidden_link' href='#allocator.traits.types-11.sentence-1'>.</a></div></div></div></div></div><div id='allocator.traits.members' class='section'><h4 ><a class='secnum' href='#allocator.traits.members' style='min-width:95pt'>20.2.9.3</a> Static member functions <a class='abbr_ref' href='allocator.traits.members'>[allocator.traits.members]</a></h4><div class='texpara'><div id='lib:allocator_traits,allocate'><div id='lib:allocate,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocate,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>static</span> <span class='keyword'>constexpr</span> pointer allocate<span class='parenthesis'>(</span>Alloc<span class='operator'>&amp;</span> a, size_type n<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.traits.members-1'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.members-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1553'>#</a></div><div class='texpara'><div id='allocator.traits.members-1.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>a<span class='operator'>.</span>allocate<span class='parenthesis'>(</span>n<span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.traits.members-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,allocate_'><div id='lib:allocate,allocator_traits_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocate,allocator_traits_'>🔗</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>static</span> <span class='keyword'>constexpr</span> pointer allocate<span class='parenthesis'>(</span>Alloc<span class='operator'>&amp;</span> a, size_type n, const_void_pointer hint<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.traits.members-2'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.members-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1564'>#</a></div><div class='texpara'><div id='allocator.traits.members-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>a<span class='operator'>.</span>allocate<span class='parenthesis'>(</span>n, hint<span class='parenthesis'>)</span></span> if that expression is well-formed; otherwise, <span class='texttt'>a<span class='operator'>.</span>allocate<span class='parenthesis'>(</span>n<span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.traits.members-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,allocate_at_least'><div id='lib:allocate_at_least,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocate_at_least,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>static</span> <span class='keyword'>constexpr</span> allocation_result<span class='anglebracket'>&lt;</span>pointer, size_type<span class='anglebracket'>&gt;</span>
  allocate_at_least<span class='parenthesis'>(</span>Alloc<span class='operator'>&amp;</span> a, size_type n<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.traits.members-3'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.members-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1576'>#</a></div><div class='texpara'><div id='allocator.traits.members-3.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>a<span class='operator'>.</span>allocate_<span class='shy'></span>at_<span class='shy'></span>least<span class='parenthesis'>(</span>n<span class='parenthesis'>)</span></span> if that expression is well-formed;
otherwise, <span class='texttt'><span class='curlybracket'>{</span>a<span class='operator'>.</span>allocate<span class='parenthesis'>(</span>n<span class='parenthesis'>)</span>, n<span class='curlybracket'>}</span></span><a class='hidden_link' href='#allocator.traits.members-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,deallocate'><div id='lib:deallocate,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:deallocate,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> deallocate<span class='parenthesis'>(</span>Alloc<span class='operator'>&amp;</span> a, pointer p, size_type n<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.traits.members-4'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.members-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1588'>#</a></div><div class='texpara'><div id='allocator.traits.members-4.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'>a<span class='operator'>.</span>deallocate<span class='parenthesis'>(</span>p, n<span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.traits.members-4.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.traits.members-5'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.members-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1592'>#</a></div><div class='texpara'><div id='allocator.traits.members-5.sentence-1' class='sentence'><i >Throws</i>: Nothing<a class='hidden_link' href='#allocator.traits.members-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,construct'><div id='lib:construct,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:construct,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> construct<span class='parenthesis'>(</span>Alloc<span class='operator'>&amp;</span> a, T<span class='operator'>*</span> p, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.traits.members-6'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.members-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1604'>#</a></div><div class='texpara'><div id='allocator.traits.members-6.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'>a<span class='operator'>.</span>construct<span class='parenthesis'>(</span>p, std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>
if that call is well-formed;
otherwise, invokes <span class='texttt'>construct_<span class='shy'></span>at<span class='parenthesis'>(</span>p, std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.traits.members-6.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,destroy'><div id='lib:destroy,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:destroy,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> destroy<span class='parenthesis'>(</span>Alloc<span class='operator'>&amp;</span> a, T<span class='operator'>*</span> p<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.traits.members-7'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.members-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1618'>#</a></div><div class='texpara'><div id='allocator.traits.members-7.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'>a<span class='operator'>.</span>destroy<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> if that call is well-formed; otherwise, invokes
<span class='texttt'>destroy_<span class='shy'></span>at<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.traits.members-7.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,max_size'><div id='lib:max_size,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:max_size,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>static</span> <span class='keyword'>constexpr</span> size_type max_size<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='allocator.traits.members-8'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.members-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1630'>#</a></div><div class='texpara'><div id='allocator.traits.members-8.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>a<span class='operator'>.</span>max_<span class='shy'></span>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> if that expression is well-formed; otherwise,
<span class='texttt'>numeric_<span class='shy'></span>limits<span class='anglebracket'>&lt;</span>size_<span class='shy'></span>type<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>&#x200b;max<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>/</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>value_<span class='shy'></span>type<span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.traits.members-8.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator_traits,select_on_container_copy_construction'><div id='lib:select_on_container_copy_construction,allocator_traits'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:select_on_container_copy_construction,allocator_traits'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>static</span> <span class='keyword'>constexpr</span> Alloc select_on_container_copy_construction<span class='parenthesis'>(</span><span class='keyword'>const</span> Alloc<span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.traits.members-9'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.members-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1642'>#</a></div><div class='texpara'><div id='allocator.traits.members-9.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>rhs<span class='operator'>.</span>select_<span class='shy'></span>on_<span class='shy'></span>container_<span class='shy'></span>copy_<span class='shy'></span>construction<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> if that expression is
well-formed; otherwise, <span class='texttt'>rhs</span><a class='hidden_link' href='#allocator.traits.members-9.sentence-1'>.</a></div></div></div></div></div><div id='allocator.traits.other' class='section'><h4 ><a class='secnum' href='#allocator.traits.other' style='min-width:95pt'>20.2.9.4</a> Other <a class='abbr_ref' href='allocator.traits.other'>[allocator.traits.other]</a></h4><div class='para' id='allocator.traits.other-1'><div class='marginalizedparent'><a class='marginalized' href='#allocator.traits.other-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1650'>#</a></div><div class='texpara'><div id='allocator.traits.other-1.sentence-1' class='sentence'>The class template <span class='texttt'>allocation_<span class='shy'></span>result</span> has
the template parameters, data members, and special members specified above<a class='hidden_link' href='#allocator.traits.other-1.sentence-1'>.</a></div> <div id='allocator.traits.other-1.sentence-2' class='sentence'>It has no base classes or members other than those specified<a class='hidden_link' href='#allocator.traits.other-1.sentence-2'>.</a></div></div></div></div></div><div id='default.allocator' class='section'><h3 ><a class='secnum' href='#default.allocator' style='min-width:80pt'>20.2.10</a> The default allocator <a class='abbr_ref' href='default.allocator'>[default.allocator]</a></h3><div id='default.allocator.general' class='section'><h4 ><a class='secnum' href='#default.allocator.general' style='min-width:95pt'>20.2.10.1</a> General <a class='abbr_ref' href='default.allocator.general'>[default.allocator.general]</a></h4><div class='para' id='default.allocator.general-1'><div class='marginalizedparent'><a class='marginalized' href='#default.allocator.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1659'>#</a></div><div class='texpara'><div id='default.allocator.general-1.sentence-1' class='sentence'>All specializations of the default allocator meet the
allocator completeness requirements (<a href='allocator.requirements.completeness' title='16.4.4.6.2&emsp;Allocator completeness requirements'>[allocator.<span class='shy'></span>requirements.<span class='shy'></span>completeness]</a>)<a class='hidden_link' href='#default.allocator.general-1.sentence-1'>.</a></div></div><div class='texpara'><span id='lib:allocator,operator='><span id='lib:operator=,allocator'><span id='lib:allocator,propagate_on_container_move_assignment'><span id='lib:propagate_on_container_move_assignment,allocator'><span id='lib:allocator,difference_type'><span id='lib:difference_type,allocator'><span id='lib:allocator,size_type'><span id='lib:size_type,allocator'><span id='lib:allocator,value_type'><span id='lib:value_type,allocator'><span id='lib:allocator'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocator'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> allocator <span class='curlybracket'>{</span>
   <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> value_type                             <span class='operator'>=</span> T;
    <span class='keyword'>using</span> size_type                              <span class='operator'>=</span> size_t;
    <span class='keyword'>using</span> difference_type                        <span class='operator'>=</span> ptrdiff_t;
    <span class='keyword'>using</span> propagate_on_container_move_assignment <span class='operator'>=</span> true_type;

    <span class='keyword'>constexpr</span> allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> allocator<span class='parenthesis'>(</span><span class='keyword'>const</span> allocator<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> allocator<span class='parenthesis'>(</span><span class='keyword'>const</span> allocator<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='operator'>~</span>allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> allocator<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> allocator<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;

    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> T<span class='operator'>*</span> allocate<span class='parenthesis'>(</span>size_t n<span class='parenthesis'>)</span>;
    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> allocation_result<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> allocate_at_least<span class='parenthesis'>(</span>size_t n<span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> deallocate<span class='parenthesis'>(</span>T<span class='operator'>*</span> p, size_t n<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></span></span></span></span></span></span></span></span></span></span></div></div><div class='para' id='default.allocator.general-2'><div class='marginalizedparent'><a class='marginalized' href='#default.allocator.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1691'>#</a></div><div class='texpara'><div id='default.allocator.general-2.sentence-1' class='sentence'><span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>allocator<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>is_<span class='shy'></span>always_<span class='shy'></span>equal<span class='operator'>&#x200b;::&#x200b;</span>value</span>
is <span class='texttt'><span class='literal'>true</span></span> for any <span class='texttt'>T</span><a class='hidden_link' href='#default.allocator.general-2.sentence-1'>.</a></div></div></div></div><div id='allocator.members' class='section'><h4 ><a class='secnum' href='#allocator.members' style='min-width:95pt'>20.2.10.2</a> Members <a class='abbr_ref' href='allocator.members'>[allocator.members]</a></h4><div class='para' id='allocator.members-1'><div class='marginalizedparent'><a class='marginalized' href='#allocator.members-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1697'>#</a></div><div class='texpara'><div id='allocator.members-1.sentence-1' class='sentence'>Except for the destructor, member functions of the default allocator shall not introduce
data races (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>) as a result of concurrent calls to those member
functions from different threads<a class='hidden_link' href='#allocator.members-1.sentence-1'>.</a></div> <div id='allocator.members-1.sentence-2' class='sentence'>Calls to these functions that allocate or deallocate a
particular unit of storage shall occur in a single total order, and each such
deallocation call shall happen before the next allocation (if any) in this order<a class='hidden_link' href='#allocator.members-1.sentence-2'>.</a></div></div></div><div class='texpara'><div id='lib:allocator,allocate'><div id='lib:allocate,allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocate,allocator'>🔗</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> T<span class='operator'>*</span> allocate<span class='parenthesis'>(</span>size_t n<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.members-2'><div class='marginalizedparent'><a class='marginalized' href='#allocator.members-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1710'>#</a></div><div class='texpara'><div id='allocator.members-2.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>T</span> is not an incomplete type (<a href='basic.types.general#term.incomplete.type' title='6.8.1&emsp;General'>[basic.<span class='shy'></span>types.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#allocator.members-2.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.members-3'><div class='marginalizedparent'><a class='marginalized' href='#allocator.members-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1714'>#</a></div><div class='texpara'><div id='allocator.members-3.sentence-1' class='sentence'><i >Returns</i>: A pointer to the initial element of an array of <span class='texttt'>n</span> <span class='texttt'>T</span><a class='hidden_link' href='#allocator.members-3.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.members-4'><div class='marginalizedparent'><a class='marginalized' href='#allocator.members-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1718'>#</a></div><div class='texpara'><div id='allocator.members-4.sentence-1' class='sentence'><i >Throws</i>: <span class='texttt'>bad_<span class='shy'></span>array_<span class='shy'></span>new_<span class='shy'></span>length</span> if
<span class='texttt'>numeric_<span class='shy'></span>limits<span class='anglebracket'>&lt;</span>size_<span class='shy'></span>t<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>max<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>/</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span> n</span>, or
<span class='texttt'>bad_<span class='shy'></span>alloc</span> if the storage cannot be obtained<a class='hidden_link' href='#allocator.members-4.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.members-5'><div class='marginalizedparent'><a class='marginalized' href='#allocator.members-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1724'>#</a></div><div class='texpara'><div id='allocator.members-5.sentence-1' class='sentence'><i >Remarks</i>: The storage for the array
is obtained by calling <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span> <span class='keyword'>new</span></span> (<a href='new.delete' title='17.6.3&emsp;Storage allocation and deallocation'>[new.<span class='shy'></span>delete]</a>),
but it is unspecified when or how often this
function is called<a class='hidden_link' href='#allocator.members-5.sentence-1'>.</a></div> <div id='allocator.members-5.sentence-2' class='sentence'>This function starts the lifetime of the array object,
but not that of any of the array elements<a class='hidden_link' href='#allocator.members-5.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator,allocate_at_least'><div id='lib:allocate_at_least,allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocate_at_least,allocator'>🔗</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> allocation_result<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> allocate_at_least<span class='parenthesis'>(</span>size_t n<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.members-6'><div class='marginalizedparent'><a class='marginalized' href='#allocator.members-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1740'>#</a></div><div class='texpara'><div id='allocator.members-6.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>T</span> is not an incomplete type (<a href='basic.types.general#term.incomplete.type' title='6.8.1&emsp;General'>[basic.<span class='shy'></span>types.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#allocator.members-6.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.members-7'><div class='marginalizedparent'><a class='marginalized' href='#allocator.members-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1744'>#</a></div><div class='texpara'><div id='allocator.members-7.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>allocation_<span class='shy'></span>result<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='curlybracket'>{</span>ptr, count<span class='curlybracket'>}</span></span>,
where <span class='texttt'>ptr</span> is a pointer to
the initial element of an array of <span class='texttt'>count</span> <span class='texttt'>T</span> and
<span class='math'><span class='texttt'>count</span> &ensp;≥&ensp;<span class='texttt'>n</span></span><a class='hidden_link' href='#allocator.members-7.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.members-8'><div class='marginalizedparent'><a class='marginalized' href='#allocator.members-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1751'>#</a></div><div class='texpara'><div id='allocator.members-8.sentence-1' class='sentence'><i >Throws</i>: <span class='texttt'>bad_<span class='shy'></span>array_<span class='shy'></span>new_<span class='shy'></span>length</span>
if <span class='math'><span class='texttt'>numeric_<span class='shy'></span>limits<span class='anglebracket'>&lt;</span>size_<span class='shy'></span>t<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>max<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>/</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span> &lt; <span class='texttt'>n</span></span>,
or <span class='texttt'>bad_<span class='shy'></span>alloc</span> if the storage cannot be obtained<a class='hidden_link' href='#allocator.members-8.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.members-9'><div class='marginalizedparent'><a class='marginalized' href='#allocator.members-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1757'>#</a></div><div class='texpara'><div id='allocator.members-9.sentence-1' class='sentence'><i >Remarks</i>: The storage for the array is obtained by calling <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span> <span class='keyword'>new</span></span>,
but it is unspecified when or how often this function is called<a class='hidden_link' href='#allocator.members-9.sentence-1'>.</a></div> <div id='allocator.members-9.sentence-2' class='sentence'>This function starts the lifetime of the array object,
but not that of any of the array elements<a class='hidden_link' href='#allocator.members-9.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:allocator,deallocate'><div id='lib:deallocate,allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:deallocate,allocator'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>void</span> deallocate<span class='parenthesis'>(</span>T<span class='operator'>*</span> p, size_t n<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.members-10'><div class='marginalizedparent'><a class='marginalized' href='#allocator.members-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1771'>#</a></div><div class='texpara'><div id='allocator.members-10.sentence-1' class='sentence'><i >Preconditions</i>: <ul class='itemize'><li id='allocator.members-10.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#allocator.members-10.1'>(10.1)</a></div><div class='texpara'><div id='allocator.members-10.1.sentence-1' class='sentence'>If <span class='texttt'>p</span> is memory that was obtained by a call to <span class='texttt'>allocate_<span class='shy'></span>at_<span class='shy'></span>least</span>,
let <span class='texttt'>ret</span> be the value returned and
<span class='texttt'>req</span> be the value passed as the first argument to that call<a class='hidden_link' href='#allocator.members-10.1.sentence-1'>.</a></div> <div id='allocator.members-10.1.sentence-2' class='sentence'><span class='texttt'>p</span> is equal to <span class='texttt'>ret<span class='operator'>.</span>ptr</span> and
<span class='texttt'>n</span> is a value such that <span class='math'><span class='texttt'>req</span> &ensp;≤&ensp;<span class='texttt'>n</span> &ensp;≤&ensp;<span class='texttt'>ret<span class='operator'>.</span>count</span></span><a class='hidden_link' href='#allocator.members-10.1.sentence-2'>.</a></div></div></li><li id='allocator.members-10.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#allocator.members-10.2'>(10.2)</a></div><div class='texpara'><div id='allocator.members-10.2.sentence-1' class='sentence'>Otherwise, <span class='texttt'>p</span> is a pointer value obtained from <span class='texttt'>allocate</span><a class='hidden_link' href='#allocator.members-10.2.sentence-1'>.</a></div> <div id='allocator.members-10.2.sentence-2' class='sentence'><span class='texttt'>n</span> equals the value passed as the first argument
to the invocation of <span class='texttt'>allocate</span> which returned <span class='texttt'>p</span><a class='hidden_link' href='#allocator.members-10.2.sentence-2'>.</a></div></div></li></ul></div></div></div></div><div class='para' id='allocator.members-11'><div class='marginalizedparent'><a class='marginalized' href='#allocator.members-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1786'>#</a></div><div class='texpara'><div id='allocator.members-11.sentence-1' class='sentence'><i >Effects</i>: Deallocates the storage referenced by <span class='texttt'>p</span><a class='hidden_link' href='#allocator.members-11.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.members-12'><div class='marginalizedparent'><a class='marginalized' href='#allocator.members-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1790'>#</a></div><div class='texpara'><div id='allocator.members-12.sentence-1' class='sentence'><i >Remarks</i>: Uses
<span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span> <span class='keyword'>delete</span></span> (<a href='new.delete' title='17.6.3&emsp;Storage allocation and deallocation'>[new.<span class='shy'></span>delete]</a>),
but it is unspecified
when this function is called<a class='hidden_link' href='#allocator.members-12.sentence-1'>.</a></div></div></div></div></div><div id='allocator.globals' class='section'><h4 ><a class='secnum' href='#allocator.globals' style='min-width:95pt'>20.2.10.3</a> Operators <a class='abbr_ref' href='allocator.globals'>[allocator.globals]</a></h4><div class='texpara'><div id='lib:allocator,operator=='><div id='lib:operator==,allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator==,allocator'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> allocator<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> allocator<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='allocator.globals-1'><div class='marginalizedparent'><a class='marginalized' href='#allocator.globals-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1807'>#</a></div><div class='texpara'><div id='allocator.globals-1.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#allocator.globals-1.sentence-1'>.</a></div></div></div></div></div></div><div id='specialized.addressof' class='section'><h3 ><a class='secnum' href='#specialized.addressof' style='min-width:80pt'>20.2.11</a> <span class='texttt'>addressof</span> <a class='abbr_ref' href='specialized.addressof'>[specialized.addressof]</a></h3><div class='texpara'><div id='lib:addressof'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:addressof'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> T<span class='operator'>*</span> addressof<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='specialized.addressof-1'><div class='marginalizedparent'><a class='marginalized' href='#specialized.addressof-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1820'>#</a></div><div class='texpara'><div id='specialized.addressof-1.sentence-1' class='sentence'><i >Returns</i>: The actual address of the object or function referenced by <span class='texttt'>r</span>, even in the
presence of an overloaded <span class='texttt'><span class='keyword'>operator</span><span class='operator'>&amp;</span></span><a class='hidden_link' href='#specialized.addressof-1.sentence-1'>.</a></div></div></div></div><div class='para' id='specialized.addressof-2'><div class='marginalizedparent'><a class='marginalized' href='#specialized.addressof-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1825'>#</a></div><div class='texpara'><div id='specialized.addressof-2.sentence-1' class='sentence'><i >Remarks</i>: An expression <span class='texttt'>addressof<span class='parenthesis'>(</span>E<span class='parenthesis'>)</span></span>
is a constant subexpression (<a href='defns.const.subexpr' title='3.14&emsp;constant subexpression'>[defns.<span class='shy'></span>const.<span class='shy'></span>subexpr]</a>)
if <span class='texttt'>E</span> is an lvalue constant subexpression<a class='hidden_link' href='#specialized.addressof-2.sentence-1'>.</a></div></div></div></div></div><div id='c.malloc' class='section'><h3 ><a class='secnum' href='#c.malloc' style='min-width:80pt'>20.2.12</a> C library memory allocation <a class='abbr_ref' href='c.malloc'>[c.malloc]</a></h3><div class='para nonNormativeOnly' id='c.malloc-1'><div class='marginalizedparent'><a class='marginalized' href='#c.malloc-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1834'>#</a></div><div class='texpara'><div id='c.malloc-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#c.malloc-note-1'>1</a></i>:&ensp;<div id='c.malloc-1.sentence-1' class='sentence'>The header <a href='cstdlib.syn#header:%3ccstdlib%3e' title='17.2.2&emsp;Header &lt;cstdlib&gt; synopsis&emsp;[cstdlib.syn]'><span id='headerref:<cstdlib>_'><span class='texttt'>&lt;cstdlib&gt;</span></span></a>
declares the functions described in this subclause<a class='hidden_link' href='#c.malloc-1.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='texpara'><div id='lib:realloc'><div id='lib:malloc'><div id='lib:calloc'><div id='lib:aligned_alloc'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:aligned_alloc'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span><span class='operator'>*</span> aligned_alloc<span class='parenthesis'>(</span>size_t alignment, size_t size<span class='parenthesis'>)</span>;
<span class='keyword'>void</span><span class='operator'>*</span> calloc<span class='parenthesis'>(</span>size_t nmemb, size_t size<span class='parenthesis'>)</span>;
<span class='keyword'>void</span><span class='operator'>*</span> malloc<span class='parenthesis'>(</span>size_t size<span class='parenthesis'>)</span>;
<span class='keyword'>void</span><span class='operator'>*</span> realloc<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, size_t size<span class='parenthesis'>)</span>;
</code></div></div></div></div></div></div><div class='para' id='c.malloc-2'><div class='marginalizedparent'><a class='marginalized' href='#c.malloc-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1852'>#</a></div><div class='texpara'><div id='c.malloc-2.sentence-1' class='sentence'><i >Effects</i>: These functions have the semantics specified in the C standard library<a class='hidden_link' href='#c.malloc-2.sentence-1'>.</a></div></div></div></div><div class='para' id='c.malloc-3'><div class='marginalizedparent'><a class='marginalized' href='#c.malloc-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1856'>#</a></div><div class='texpara'><div id='c.malloc-3.sentence-1' class='sentence'><i >Remarks</i>: These functions do not attempt to allocate
storage by calling <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> (<a href='new.delete' title='17.6.3&emsp;Storage allocation and deallocation'>[new.<span class='shy'></span>delete]</a>)<a class='hidden_link' href='#c.malloc-3.sentence-1'>.</a></div> <a class='index' id='lib:new,operator'></a><a class='index' id='lib:operator,new'></a></div></div></div><div class='para' id='c.malloc-4'><div class='marginalizedparent'><a class='marginalized' href='#c.malloc-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1862'>#</a></div><div class='texpara'><div id='c.malloc-4.sentence-1' class='sentence'>These functions implicitly create objects (<a href='intro.object' title='6.7.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>)
in the returned region of storage and
return a pointer to a suitable created object<a class='hidden_link' href='#c.malloc-4.sentence-1'>.</a></div> <div id='c.malloc-4.sentence-2' class='sentence'>In the case of <span class='texttt'>calloc</span> and <span class='texttt'>realloc</span>,
the objects are created before the storage is zeroed or copied, respectively<a class='hidden_link' href='#c.malloc-4.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:free'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:free'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> free<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='c.malloc-5'><div class='marginalizedparent'><a class='marginalized' href='#c.malloc-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1876'>#</a></div><div class='texpara'><div id='c.malloc-5.sentence-1' class='sentence'><i >Effects</i>: This function has the semantics specified in the C standard library<a class='hidden_link' href='#c.malloc-5.sentence-1'>.</a></div></div></div></div><div class='para' id='c.malloc-6'><div class='marginalizedparent'><a class='marginalized' href='#c.malloc-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1880'>#</a></div><div class='texpara'><div id='c.malloc-6.sentence-1' class='sentence'><i >Remarks</i>: This function does not attempt to
deallocate storage by calling
<span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='index' id='lib:delete,operator'></a><a class='index' id='lib:operator,delete'></a><a class='hidden_link' href='#c.malloc-6.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='c.malloc-sentence-1' class='sentence'><span class='textsc'>See also:</span>  ISO/IEC 9899:2018, 7.22.3</div></div></div></div><div id='smartptr' class='section'><h2 ><a class='secnum' href='#smartptr' style='min-width:65pt'>20.3</a> Smart pointers <a class='abbr_ref' href='smartptr'>[smartptr]</a></h2><div id='unique.ptr' class='section'><h3 ><a class='secnum' href='#unique.ptr' style='min-width:80pt'>20.3.1</a> Unique-ownership pointers <a class='abbr_ref' href='unique.ptr'>[unique.ptr]</a></h3><div id='unique.ptr.general' class='section'><h4 ><a class='secnum' href='#unique.ptr.general' style='min-width:95pt'>20.3.1.1</a> General <a class='abbr_ref' href='unique.ptr.general'>[unique.ptr.general]</a></h4><div class='para' id='unique.ptr.general-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1895'>#</a></div><div class='texpara'><div id='unique.ptr.general-1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:unique_pointer' title='20.3.1.1&emsp;General&emsp;[unique.ptr.general]'><span id='def:unique_pointer'><i >unique pointer</i></span></a> is an object that owns another object and
manages that other object through a pointer<a class='hidden_link' href='#unique.ptr.general-1.sentence-1'>.</a></div> <div id='unique.ptr.general-1.sentence-2' class='sentence'>More precisely, a unique pointer
is an object <i >u</i> that stores a pointer to a second object <i >p</i> and
will dispose of <i >p</i> when <i >u</i> is itself destroyed (e.g., when
leaving block scope (<a href='stmt.dcl' title='8.8&emsp;Declaration statement'>[stmt.<span class='shy'></span>dcl]</a>))<a class='hidden_link' href='#unique.ptr.general-1.sentence-2'>.</a></div> <div id='unique.ptr.general-1.sentence-3' class='sentence'>In this context, <i >u</i> is said
to <a class='hidden_link' href='#def:own' title='20.3.1.1&emsp;General&emsp;[unique.ptr.general]'><span id='def:own'><i >own</i></span></a> <span class='texttt'>p</span><a class='hidden_link' href='#unique.ptr.general-1.sentence-3'>.</a></div></div></div><div class='para' id='unique.ptr.general-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1903'>#</a></div><div class='texpara'><div id='unique.ptr.general-2.sentence-1' class='sentence'>The mechanism by which <i >u</i> disposes of <i >p</i> is known as
<i >p</i>'s associated <a class='hidden_link' href='#def:deleter' title='20.3.1.1&emsp;General&emsp;[unique.ptr.general]'><span id='def:deleter'><i >deleter</i></span></a>, a function object whose correct
invocation results in <i >p</i>'s appropriate disposition (typically its deletion)<a class='hidden_link' href='#unique.ptr.general-2.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.general-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1908'>#</a></div><div class='texpara'><div id='unique.ptr.general-3.sentence-1' class='sentence'>Let the notation <i >u.p</i> denote the pointer stored by <i >u</i>, and
let <i >u.d</i> denote the associated deleter<a class='hidden_link' href='#unique.ptr.general-3.sentence-1'>.</a></div> <div id='unique.ptr.general-3.sentence-2' class='sentence'>Upon request, <i >u</i> can
<a class='hidden_link' href='#def:reset' title='20.3.1.1&emsp;General&emsp;[unique.ptr.general]'><span id='def:reset'><i >reset</i></span></a> (replace) <i >u.p</i> and <i >u.d</i> with another pointer and
deleter, but properly disposes of its owned object via the associated
deleter before such replacement is considered completed<a class='hidden_link' href='#unique.ptr.general-3.sentence-2'>.</a></div></div></div><div class='para' id='unique.ptr.general-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1915'>#</a></div><div class='texpara'><div id='unique.ptr.general-4.sentence-1' class='sentence'>Each object of a type <span class='texttt'>U</span> instantiated from the <span class='texttt'>unique_<span class='shy'></span>ptr</span> template
specified in <a href='#unique.ptr' title='20.3.1&emsp;Unique-ownership pointers'>[unique.<span class='shy'></span>ptr]</a> has the strict ownership semantics, specified above,
of a unique pointer<a class='hidden_link' href='#unique.ptr.general-4.sentence-1'>.</a></div> <div id='unique.ptr.general-4.sentence-2' class='sentence'>In partial satisfaction of these semantics, each such <span class='texttt'>U</span>
is <i >Cpp17MoveConstructible</i> and <i >Cpp17MoveAssignable</i>, but is not
<i >Cpp17CopyConstructible</i> nor <i >Cpp17CopyAssignable</i><a class='hidden_link' href='#unique.ptr.general-4.sentence-2'>.</a></div> <div id='unique.ptr.general-4.sentence-3' class='sentence'>The template parameter <span class='texttt'>T</span> of <span class='texttt'>unique_<span class='shy'></span>ptr</span> may be an incomplete type<a class='hidden_link' href='#unique.ptr.general-4.sentence-3'>.</a></div></div></div><div class='para nonNormativeOnly' id='unique.ptr.general-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1923'>#</a></div><div class='texpara'><div id='unique.ptr.general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#unique.ptr.general-note-1'>1</a></i>:&ensp;<div id='unique.ptr.general-5.sentence-1' class='sentence'>The uses
of <span class='texttt'>unique_<span class='shy'></span>ptr</span> include providing exception safety for
dynamically allocated memory, passing ownership of dynamically allocated
memory to a function, and returning dynamically allocated memory from a
function<a class='hidden_link' href='#unique.ptr.general-5.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='unique.ptr.dltr' class='section'><h4 ><a class='secnum' href='#unique.ptr.dltr' style='min-width:95pt'>20.3.1.2</a> Default deleters <a class='abbr_ref' href='unique.ptr.dltr'>[unique.ptr.dltr]</a></h4><div id='unique.ptr.dltr.general' class='section'><h4 ><a class='secnum' href='#unique.ptr.dltr.general' style='min-width:110pt'>20.3.1.2.1</a> In general <a class='abbr_ref' href='unique.ptr.dltr.general'>[unique.ptr.dltr.general]</a></h4><div class='para' id='unique.ptr.dltr.general-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1936'>#</a></div><div class='texpara'><div id='unique.ptr.dltr.general-1.sentence-1' class='sentence'>The class template <span class='texttt'>default_<span class='shy'></span>delete</span> serves as the default deleter (destruction policy)
for the class template <span class='texttt'>unique_<span class='shy'></span>ptr</span><a class='hidden_link' href='#unique.ptr.dltr.general-1.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.dltr.general-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1940'>#</a></div><div class='texpara'><div id='unique.ptr.dltr.general-2.sentence-1' class='sentence'>The template parameter <span class='texttt'>T</span> of <span class='texttt'>default_<span class='shy'></span>delete</span> may be
an incomplete type<a class='hidden_link' href='#unique.ptr.dltr.general-2.sentence-1'>.</a></div></div></div></div><div id='unique.ptr.dltr.dflt' class='section'><h4 ><a class='secnum' href='#unique.ptr.dltr.dflt' style='min-width:110pt'>20.3.1.2.2</a> <span class='texttt'>default_<span class='shy'></span>delete</span> <a class='abbr_ref' href='unique.ptr.dltr.dflt'>[unique.ptr.dltr.dflt]</a></h4><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> default_delete <span class='curlybracket'>{</span>
    <span class='keyword'>constexpr</span> default_delete<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> default_delete<span class='parenthesis'>(</span><span class='keyword'>const</span> default_delete<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='lib:default_delete,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:default_delete,constructor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> default_delete<span class='parenthesis'>(</span><span class='keyword'>const</span> default_delete<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='unique.ptr.dltr.dflt-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1962'>#</a></div><div class='texpara'><div id='unique.ptr.dltr.dflt-1.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>U<span class='operator'>*</span></span> is implicitly convertible to <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#unique.ptr.dltr.dflt-1.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.dltr.dflt-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1966'>#</a></div><div class='texpara'><div id='unique.ptr.dltr.dflt-2.sentence-1' class='sentence'><i >Effects</i>: Constructs a <span class='texttt'>default_<span class='shy'></span>delete</span> object
from another <span class='texttt'>default_<span class='shy'></span>delete<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> object<a class='hidden_link' href='#unique.ptr.dltr.dflt-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:default_delete,operator()'><div id='lib:operator(),default_delete'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator(),default_delete'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='operator'>*</span> ptr<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.dltr.dflt-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1978'>#</a></div><div class='texpara'><div id='unique.ptr.dltr.dflt-3.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>T</span> is a complete type<a class='hidden_link' href='#unique.ptr.dltr.dflt-3.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.dltr.dflt-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L1982'>#</a></div><div class='texpara'><div id='unique.ptr.dltr.dflt-4.sentence-1' class='sentence'><i >Effects</i>: Calls <span id=':delete'><span class='texttt'><span class='keyword'>delete</span></span></span> on <span class='texttt'>ptr</span><a class='hidden_link' href='#unique.ptr.dltr.dflt-4.sentence-1'>.</a></div></div></div></div></div><div id='unique.ptr.dltr.dflt1' class='section'><h4 ><a class='secnum' href='#unique.ptr.dltr.dflt1' style='min-width:110pt'>20.3.1.2.3</a> <span class='texttt'>default_<span class='shy'></span>delete&lt;T[]&gt;</span> <a class='abbr_ref' href='unique.ptr.dltr.dflt1'>[unique.ptr.dltr.dflt1]</a></h4><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> default_delete<span class='anglebracket'>&lt;</span>T<span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>constexpr</span> default_delete<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> default_delete<span class='parenthesis'>(</span><span class='keyword'>const</span> default_delete<span class='anglebracket'>&lt;</span>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>U<span class='operator'>*</span> ptr<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='lib:default_delete,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:default_delete,constructor_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> default_delete<span class='parenthesis'>(</span><span class='keyword'>const</span> default_delete<span class='anglebracket'>&lt;</span>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='unique.ptr.dltr.dflt1-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt1-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2005'>#</a></div><div class='texpara'><div id='unique.ptr.dltr.dflt1-1.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>U<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>T<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#unique.ptr.dltr.dflt1-1.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.dltr.dflt1-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt1-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2009'>#</a></div><div class='texpara'><div id='unique.ptr.dltr.dflt1-2.sentence-1' class='sentence'><i >Effects</i>: Constructs a <span class='texttt'>default_<span class='shy'></span>delete</span> object from another <span class='texttt'>default_<span class='shy'></span>delete<span class='anglebracket'>&lt;</span>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span></span> object<a class='hidden_link' href='#unique.ptr.dltr.dflt1-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:default_delete,operator()_'><div id='lib:operator(),default_delete_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator(),default_delete_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>U<span class='operator'>*</span> ptr<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.dltr.dflt1-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt1-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2020'>#</a></div><div class='texpara'><div id='unique.ptr.dltr.dflt1-3.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>U<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>T<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#unique.ptr.dltr.dflt1-3.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.dltr.dflt1-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt1-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2024'>#</a></div><div class='texpara'><div id='unique.ptr.dltr.dflt1-4.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>U</span> is a complete type<a class='hidden_link' href='#unique.ptr.dltr.dflt1-4.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.dltr.dflt1-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.dltr.dflt1-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2028'>#</a></div><div class='texpara'><div id='unique.ptr.dltr.dflt1-5.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'><span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> on <span class='texttt'>ptr</span><a class='hidden_link' href='#unique.ptr.dltr.dflt1-5.sentence-1'>.</a></div></div></div></div></div></div><div id='unique.ptr.single' class='section'><h4 ><a class='secnum' href='#unique.ptr.single' style='min-width:95pt'>20.3.1.3</a> <span class='texttt'>unique_<span class='shy'></span>ptr</span> for single objects <a class='abbr_ref' href='unique.ptr.single'>[unique.ptr.single]</a></h4><div id='unique.ptr.single.general' class='section'><h4 ><a class='secnum' href='#unique.ptr.single.general' style='min-width:110pt'>20.3.1.3.1</a> General <a class='abbr_ref' href='unique.ptr.single.general'>[unique.ptr.single.general]</a></h4><div class='texpara'><span id='lib:unique_ptr'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:unique_ptr'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D <span class='operator'>=</span> default_delete<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> unique_ptr <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> pointer      <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>using</span> element_type <span class='operator'>=</span> T;
    <span class='keyword'>using</span> deleter_type <span class='operator'>=</span> D;

    <span class='comment'>// <a href='#unique.ptr.single.ctor' title='20.3.1.3.2&emsp;Constructors'>[unique.<span class='shy'></span>ptr.<span class='shy'></span>single.<span class='shy'></span>ctor]</a>, constructors</span>
    <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> unique_ptr<span class='parenthesis'>(</span>type_identity_t<span class='anglebracket'>&lt;</span>pointer<span class='anglebracket'>&gt;</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>type_identity_t<span class='anglebracket'>&lt;</span>pointer<span class='anglebracket'>&gt;</span> p, <i ><span class='texttt'>see below</span></i> d1<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>type_identity_t<span class='anglebracket'>&lt;</span>pointer<span class='anglebracket'>&gt;</span> p, <i ><span class='texttt'>see below</span></i> d2<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>unique_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>U, E<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// <a href='#unique.ptr.single.dtor' title='20.3.1.3.3&emsp;Destructor'>[unique.<span class='shy'></span>ptr.<span class='shy'></span>single.<span class='shy'></span>dtor]</a>, destructor</span>
    <span class='keyword'>constexpr</span> <span class='operator'>~</span>unique_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#unique.ptr.single.asgn' title='20.3.1.3.4&emsp;Assignment'>[unique.<span class='shy'></span>ptr.<span class='shy'></span>single.<span class='shy'></span>asgn]</a>, assignment</span>
    <span class='keyword'>constexpr</span> unique_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>unique_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> unique_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>U, E<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> unique_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// <a href='#unique.ptr.single.observers' title='20.3.1.3.5&emsp;Observers'>[unique.<span class='shy'></span>ptr.<span class='shy'></span>single.<span class='shy'></span>observers]</a>, observers</span>
    <span class='keyword'>constexpr</span> add_lvalue_reference_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><i ><span class='texttt'>see below</span></i><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> pointer <span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> pointer get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> deleter_type<span class='operator'>&amp;</span> get_deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> deleter_type<span class='operator'>&amp;</span> get_deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> <span class='keyword'>operator</span> <span class='keyword'>bool</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// <a href='#unique.ptr.single.modifiers' title='20.3.1.3.6&emsp;Modifiers'>[unique.<span class='shy'></span>ptr.<span class='shy'></span>single.<span class='shy'></span>modifiers]</a>, modifiers</span>
    <span class='keyword'>constexpr</span> pointer release<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>pointer p <span class='operator'>=</span> pointer<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>unique_ptr<span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// disable copy from lvalue</span>
    unique_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    unique_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div><div class='para' id='unique.ptr.single.general-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2085'>#</a></div><div class='texpara'><div id='unique.ptr.single.general-1.sentence-1' class='sentence'>The default type for the template parameter <span class='texttt'>D</span> is
<span class='texttt'>default_<span class='shy'></span>delete</span><a class='hidden_link' href='#unique.ptr.single.general-1.sentence-1'>.</a></div> <div id='unique.ptr.single.general-1.sentence-2' class='sentence'>A client-supplied template argument
<span class='texttt'>D</span> shall be a function
object type (<a href='function.objects' title='22.10&emsp;Function objects'>[function.<span class='shy'></span>objects]</a>), lvalue reference to function, or
lvalue reference to function object type
for which, given
a value <span class='texttt'>d</span> of type <span class='texttt'>D</span> and a value
<span class='texttt'>ptr</span> of type <span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span>, the expression
<span class='texttt'>d<span class='parenthesis'>(</span>ptr<span class='parenthesis'>)</span></span> is valid and has the effect of disposing of the
pointer as appropriate for that deleter<a class='hidden_link' href='#unique.ptr.single.general-1.sentence-2'>.</a></div></div></div><div class='para' id='unique.ptr.single.general-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2097'>#</a></div><div class='texpara'><div id='unique.ptr.single.general-2.sentence-1' class='sentence'>If the deleter's type <span class='texttt'>D</span> is not a reference type, <span class='texttt'>D</span> shall meet
the <i >Cpp17Destructible</i> requirements (Table <a href='utility.arg.requirements#tab:cpp17.destructible' title='Table 35: Cpp17Destructible requirements'>35</a>)<a class='hidden_link' href='#unique.ptr.single.general-2.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.single.general-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2101'>#</a></div><div class='texpara'><div id='unique.ptr.single.general-3.sentence-1' class='sentence'>If the <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id________________'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='texttt'>remove_<span class='shy'></span>reference_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span> is valid and denotes a
type (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>), then <span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T,
D<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span> shall be a synonym for <span class='texttt'>remove_<span class='shy'></span>reference_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span><a class='hidden_link' href='#unique.ptr.single.general-3.sentence-1'>.</a></div> <div id='unique.ptr.single.general-3.sentence-2' class='sentence'>Otherwise
<span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span> shall be a synonym for <span class='texttt'>element_<span class='shy'></span>type<span class='operator'>*</span></span><a class='hidden_link' href='#unique.ptr.single.general-3.sentence-2'>.</a></div> <div id='unique.ptr.single.general-3.sentence-3' class='sentence'>The type <span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T,
D<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span> shall
meet the <i >Cpp17NullablePointer</i> requirements (Table <a href='nullablepointer.requirements#tab:cpp17.nullablepointer' title='Table 36: Cpp17NullablePointer requirements'>36</a>)<a class='hidden_link' href='#unique.ptr.single.general-3.sentence-3'>.</a></div></div></div><div class='para nonNormativeOnly' id='unique.ptr.single.general-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2109'>#</a></div><div class='texpara'><div id='unique.ptr.single.general-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#unique.ptr.single.general-example-1'>1</a></i>:&ensp;<div id='unique.ptr.single.general-4.sentence-1' class='sentence'>Given an allocator type <span class='texttt'>X</span> (<a href='allocator.requirements.general' title='16.4.4.6.1&emsp;General'>[allocator.<span class='shy'></span>requirements.<span class='shy'></span>general]</a>) and
letting <span class='texttt'>A</span> be a synonym for <span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span></span>, the types <span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>pointer</span>,
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>const_<span class='shy'></span>pointer</span>, <span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>void_<span class='shy'></span>pointer</span>, and <span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>const_<span class='shy'></span>void_<span class='shy'></span>pointer</span>
may be used as <span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span><a class='hidden_link' href='#unique.ptr.single.general-4.sentence-1'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='unique.ptr.single.ctor' class='section'><h4 ><a class='secnum' href='#unique.ptr.single.ctor' style='min-width:110pt'>20.3.1.3.2</a> Constructors <a class='abbr_ref' href='unique.ptr.single.ctor'>[unique.ptr.single.ctor]</a></h4><div class='texpara'><div id='lib:unique_ptr,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:unique_ptr,constructor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='unique.ptr.single.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2126'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-1.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>pointer_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>deleter_<span class='shy'></span>type<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span> and
<span class='texttt'>is_<span class='shy'></span>default_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>deleter_<span class='shy'></span>type<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#unique.ptr.single.ctor-1.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2131'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-2.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>D</span> meets the <i >Cpp17DefaultConstructible</i> requirements (Table <a href='utility.arg.requirements#tab:cpp17.defaultconstructible' title='Table 30: Cpp17DefaultConstructible requirements'>30</a>),
and that construction does not throw an exception<a class='hidden_link' href='#unique.ptr.single.ctor-2.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2136'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-3.sentence-1' class='sentence'><i >Effects</i>: Constructs a <span class='texttt'>unique_<span class='shy'></span>ptr</span> object that owns
nothing, value-initializing the stored pointer and the stored deleter<a class='hidden_link' href='#unique.ptr.single.ctor-3.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2141'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-4.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#unique.ptr.single.ctor-4.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-4.sentence-2' class='sentence'><span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
returns a reference to the stored deleter<a class='hidden_link' href='#unique.ptr.single.ctor-4.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:unique_ptr,constructor_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> unique_ptr<span class='parenthesis'>(</span>type_identity_t<span class='anglebracket'>&lt;</span>pointer<span class='anglebracket'>&gt;</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='unique.ptr.single.ctor-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2153'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-5.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>pointer_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>deleter_<span class='shy'></span>type<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span> and
<span class='texttt'>is_<span class='shy'></span>default_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>deleter_<span class='shy'></span>type<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#unique.ptr.single.ctor-5.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.ctor-6'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2158'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-6.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>D</span> meets the <i >Cpp17DefaultConstructible</i> requirements (Table <a href='utility.arg.requirements#tab:cpp17.defaultconstructible' title='Table 30: Cpp17DefaultConstructible requirements'>30</a>),
and that construction does not throw an exception<a class='hidden_link' href='#unique.ptr.single.ctor-6.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.ctor-7'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2163'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-7.sentence-1' class='sentence'><i >Effects</i>: Constructs a <span class='texttt'>unique_<span class='shy'></span>ptr</span> which owns
<span class='texttt'>p</span>, initializing the stored pointer with <span class='texttt'>p</span> and
value-initializing the stored deleter<a class='hidden_link' href='#unique.ptr.single.ctor-7.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.ctor-8'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2169'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-8.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> p</span><a class='hidden_link' href='#unique.ptr.single.ctor-8.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-8.sentence-2' class='sentence'><span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
returns a reference to the stored deleter<a class='hidden_link' href='#unique.ptr.single.ctor-8.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,constructor__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:unique_ptr,constructor__'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>type_identity_t<span class='anglebracket'>&lt;</span>pointer<span class='anglebracket'>&gt;</span> p, <span class='keyword'>const</span> D<span class='operator'>&amp;</span> d<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>type_identity_t<span class='anglebracket'>&lt;</span>pointer<span class='anglebracket'>&gt;</span> p, remove_reference_t<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> d<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='unique.ptr.single.ctor-9'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2182'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-9.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>D, <span class='keyword'>decltype</span><span class='parenthesis'>(</span>d<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#unique.ptr.single.ctor-9.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.ctor-10'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2186'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-10.sentence-1' class='sentence'><i >Preconditions</i>: For the first constructor, if <span class='texttt'>D</span> is not a reference type,
<span class='texttt'>D</span> meets the <i >Cpp17CopyConstructible</i> requirements and
such construction does not exit via an exception<a class='hidden_link' href='#unique.ptr.single.ctor-10.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-10.sentence-2' class='sentence'>For the second constructor, if <span class='texttt'>D</span> is not a reference type,
<span class='texttt'>D</span> meets the <i >Cpp17MoveConstructible</i> requirements and
such construction does not exit via an exception<a class='hidden_link' href='#unique.ptr.single.ctor-10.sentence-2'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.ctor-11'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2195'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-11.sentence-1' class='sentence'><i >Effects</i>: Constructs a <span class='texttt'>unique_<span class='shy'></span>ptr</span> object which owns <span class='texttt'>p</span>, initializing
the stored pointer with <span class='texttt'>p</span> and initializing the deleter
from <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span>d<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>d<span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.single.ctor-11.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.ctor-12'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2201'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-12.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> p</span><a class='hidden_link' href='#unique.ptr.single.ctor-12.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-12.sentence-2' class='sentence'><span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> returns a reference to the stored
deleter<a class='hidden_link' href='#unique.ptr.single.ctor-12.sentence-2'>.</a></div> <div id='unique.ptr.single.ctor-12.sentence-3' class='sentence'>If <span class='texttt'>D</span> is a reference type then <span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
returns a reference to the lvalue <span class='texttt'>d</span><a class='hidden_link' href='#unique.ptr.single.ctor-12.sentence-3'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.ctor-13'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2208'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-13.sentence-1' class='sentence'><i >Remarks</i>: If <span class='texttt'>D</span> is a reference type,
the second constructor is defined as deleted<a class='hidden_link' href='#unique.ptr.single.ctor-13.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='unique.ptr.single.ctor-14'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2213'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#unique.ptr.single.ctor-example-1'>1</a></i>:&ensp;<span class='codeblock'>D d;
unique_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, D<span class='anglebracket'>&gt;</span> p1<span class='parenthesis'>(</span><span class='keyword'>new</span> <span class='keyword'>int</span>, D<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;        <span class='comment'>// <span class='tcode_in_codeblock'>D</span> must be <i >Cpp17MoveConstructible</i></span>
unique_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, D<span class='anglebracket'>&gt;</span> p2<span class='parenthesis'>(</span><span class='keyword'>new</span> <span class='keyword'>int</span>, d<span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>D</span> must be <i >Cpp17CopyConstructible</i></span>
unique_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, D<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span> p3<span class='parenthesis'>(</span><span class='keyword'>new</span> <span class='keyword'>int</span>, d<span class='parenthesis'>)</span>;         <span class='comment'>// <span class='tcode_in_codeblock'>p3</span> holds a reference to <span class='tcode_in_codeblock'>d</span></span>
unique_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>const</span> D<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span> p4<span class='parenthesis'>(</span><span class='keyword'>new</span> <span class='keyword'>int</span>, D<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>; <span class='comment'>// error: rvalue deleter object combined</span>
                                            <span class='comment'>// with reference deleter type</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,constructor___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:unique_ptr,constructor___'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>unique_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='unique.ptr.single.ctor-15'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2232'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-15.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#unique.ptr.single.ctor-15.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.ctor-16'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2236'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-16.sentence-1' class='sentence'><i >Preconditions</i>: If <span class='texttt'>D</span> is not a reference type,
<span class='texttt'>D</span> meets the <i >Cpp17MoveConstructible</i>
requirements (Table <a href='utility.arg.requirements#tab:cpp17.moveconstructible' title='Table 31: Cpp17MoveConstructible requirements'>31</a>)<a class='hidden_link' href='#unique.ptr.single.ctor-16.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-16.sentence-2' class='sentence'>Construction
of the deleter from an rvalue of type <span class='texttt'>D</span> does not
throw an exception<a class='hidden_link' href='#unique.ptr.single.ctor-16.sentence-2'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.ctor-17'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2245'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-17.sentence-1' class='sentence'><i >Effects</i>: Constructs a <span class='texttt'>unique_<span class='shy'></span>ptr</span> from
<span class='texttt'>u</span><a class='hidden_link' href='#unique.ptr.single.ctor-17.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-17.sentence-2' class='sentence'>If <span class='texttt'>D</span> is a reference type, this
deleter is copy constructed from <span class='texttt'>u</span>'s deleter; otherwise, this
deleter is move constructed from <span class='texttt'>u</span>'s deleter<a class='hidden_link' href='#unique.ptr.single.ctor-17.sentence-2'>.</a></div> <div id='unique.ptr.single.ctor-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#unique.ptr.single.ctor-note-1'>1</a></i>:&ensp;<div id='unique.ptr.single.ctor-17.sentence-3' class='sentence'>The
construction of the deleter can be implemented with <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#unique.ptr.single.ctor-17.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='unique.ptr.single.ctor-18'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2256'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-18.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> yields the value <span class='texttt'>u<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
yielded before the construction<a class='hidden_link' href='#unique.ptr.single.ctor-18.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-18.sentence-2' class='sentence'><span class='texttt'>u<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#unique.ptr.single.ctor-18.sentence-2'>.</a></div> <div id='unique.ptr.single.ctor-18.sentence-3' class='sentence'><span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> returns a reference
to the stored deleter that was constructed from
<span class='texttt'>u<span class='operator'>.</span>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.single.ctor-18.sentence-3'>.</a></div> <div id='unique.ptr.single.ctor-18.sentence-4' class='sentence'>If <span class='texttt'>D</span> is a reference type then
<span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> and <span class='texttt'>u<span class='operator'>.</span>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> both reference
the same lvalue deleter<a class='hidden_link' href='#unique.ptr.single.ctor-18.sentence-4'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,constructor____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:unique_ptr,constructor____'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>U, E<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='unique.ptr.single.ctor-19'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2273'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-19.sentence-1' class='sentence'><i >Constraints</i>: <ul class='itemize'><li id='unique.ptr.single.ctor-19.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.single.ctor-19.1'>(19.1)</a></div><span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>U, E<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span> is implicitly convertible to <span class='texttt'>pointer</span>,</li><li id='unique.ptr.single.ctor-19.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.single.ctor-19.2'>(19.2)</a></div><span class='texttt'>U</span> is not an array type, and</li><li id='unique.ptr.single.ctor-19.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.single.ctor-19.3'>(19.3)</a></div>either <span class='texttt'>D</span> is a reference type and <span class='texttt'>E</span> is the same type as <span class='texttt'>D</span>, or
<span class='texttt'>D</span> is not a reference type and <span class='texttt'>E</span> is implicitly convertible to <span class='texttt'>D</span><a class='hidden_link' href='#unique.ptr.single.ctor-19.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='unique.ptr.single.ctor-20'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2282'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-20.sentence-1' class='sentence'><i >Preconditions</i>: If <span class='texttt'>E</span> is not a reference type,
construction of the deleter from an rvalue of type <span class='texttt'>E</span>
is well-formed and does not throw an exception<a class='hidden_link' href='#unique.ptr.single.ctor-20.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-20.sentence-2' class='sentence'>Otherwise, <span class='texttt'>E</span> is a reference type and
construction of the deleter from an lvalue of type <span class='texttt'>E</span>
is well-formed and does not throw an exception<a class='hidden_link' href='#unique.ptr.single.ctor-20.sentence-2'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.ctor-21'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2291'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-21.sentence-1' class='sentence'><i >Effects</i>: Constructs a <span class='texttt'>unique_<span class='shy'></span>ptr</span> from <span class='texttt'>u</span><a class='hidden_link' href='#unique.ptr.single.ctor-21.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-21.sentence-2' class='sentence'>If <span class='texttt'>E</span> is a reference type, this deleter is copy constructed from
<span class='texttt'>u</span>'s deleter; otherwise, this deleter is move constructed from <span class='texttt'>u</span>'s
deleter<a class='hidden_link' href='#unique.ptr.single.ctor-21.sentence-2'>.</a></div> <div id='unique.ptr.single.ctor-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#unique.ptr.single.ctor-note-2'>2</a></i>:&ensp;<div id='unique.ptr.single.ctor-21.sentence-3' class='sentence'>The deleter constructor can be implemented with
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>E<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#unique.ptr.single.ctor-21.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='unique.ptr.single.ctor-22'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.ctor-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2302'>#</a></div><div class='texpara'><div id='unique.ptr.single.ctor-22.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> yields the value <span class='texttt'>u<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
yielded before the construction<a class='hidden_link' href='#unique.ptr.single.ctor-22.sentence-1'>.</a></div> <div id='unique.ptr.single.ctor-22.sentence-2' class='sentence'><span class='texttt'>u<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#unique.ptr.single.ctor-22.sentence-2'>.</a></div> <div id='unique.ptr.single.ctor-22.sentence-3' class='sentence'><span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> returns a reference
to the stored deleter that was constructed from
<span class='texttt'>u<span class='operator'>.</span>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.single.ctor-22.sentence-3'>.</a></div></div></div></div></div><div id='unique.ptr.single.dtor' class='section'><h4 ><a class='secnum' href='#unique.ptr.single.dtor' style='min-width:110pt'>20.3.1.3.3</a> Destructor <a class='abbr_ref' href='unique.ptr.single.dtor'>[unique.ptr.single.dtor]</a></h4><div class='texpara'><div id='lib:unique_ptr,destructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:unique_ptr,destructor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='operator'>~</span>unique_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='unique.ptr.single.dtor-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.dtor-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2319'>#</a></div><div class='texpara'><div id='unique.ptr.single.dtor-1.sentence-2' class='sentence'><i >Effects</i>: Equivalent to:
<span class='texttt'><span class='keyword'>if</span> <span class='parenthesis'>(</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;</span>
<div id='unique.ptr.single.dtor-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#unique.ptr.single.dtor-note-1'>1</a></i>:&ensp;<div id='unique.ptr.single.dtor-1.sentence-1' class='sentence'>The use of <span class='texttt'>default_<span class='shy'></span>delete</span> requires <span class='texttt'>T</span> to be a complete type<a class='hidden_link' href='#unique.ptr.single.dtor-1.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></div><div class='para' id='unique.ptr.single.dtor-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.dtor-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2327'>#</a></div><div class='texpara'><div id='unique.ptr.single.dtor-2.sentence-1' class='sentence'><i >Remarks</i>: The behavior is undefined
if the evaluation of <span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> throws an exception<a class='hidden_link' href='#unique.ptr.single.dtor-2.sentence-1'>.</a></div></div></div></div></div><div id='unique.ptr.single.asgn' class='section'><h4 ><a class='secnum' href='#unique.ptr.single.asgn' style='min-width:110pt'>20.3.1.3.4</a> Assignment <a class='abbr_ref' href='unique.ptr.single.asgn'>[unique.ptr.single.asgn]</a></h4><div class='texpara'><div id='lib:unique_ptr,operator='><div id='lib:operator=,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> unique_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>unique_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.single.asgn-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2341'>#</a></div><div class='texpara'><div id='unique.ptr.single.asgn-1.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#unique.ptr.single.asgn-1.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.asgn-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2345'>#</a></div><div class='texpara'><div id='unique.ptr.single.asgn-2.sentence-1' class='sentence'><i >Preconditions</i>: If <span class='texttt'>D</span> is not a reference type, <span class='texttt'>D</span> meets the
<i >Cpp17MoveAssignable</i> requirements (Table <a href='utility.arg.requirements#tab:cpp17.moveassignable' title='Table 33: Cpp17MoveAssignable requirements'>33</a>) and assignment
of the deleter from an rvalue of type <span class='texttt'>D</span> does not throw an exception<a class='hidden_link' href='#unique.ptr.single.asgn-2.sentence-1'>.</a></div> <div id='unique.ptr.single.asgn-2.sentence-2' class='sentence'>Otherwise, <span class='texttt'>D</span> is a reference type;
<span class='texttt'>remove_<span class='shy'></span>reference_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span></span> meets the <i >Cpp17CopyAssignable</i>
requirements and assignment of the deleter from an
lvalue of type <span class='texttt'>D</span> does not throw an exception<a class='hidden_link' href='#unique.ptr.single.asgn-2.sentence-2'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.asgn-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2355'>#</a></div><div class='texpara'><div id='unique.ptr.single.asgn-3.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'>reset<span class='parenthesis'>(</span>u<span class='operator'>.</span>release<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> followed by
<span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>u<span class='operator'>.</span>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.single.asgn-3.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.asgn-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2360'>#</a></div><div class='texpara'><div id='unique.ptr.single.asgn-4.sentence-1' class='sentence'><i >Postconditions</i>: If <span class='texttt'><span class='keyword'>this</span> <span class='operator'>!</span><span class='operator'>=</span> addressof<span class='parenthesis'>(</span>u<span class='parenthesis'>)</span></span>,
<span class='texttt'>u<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span>,
otherwise <span class='texttt'>u<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is unchanged<a class='hidden_link' href='#unique.ptr.single.asgn-4.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.asgn-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2366'>#</a></div><div class='texpara'><div id='unique.ptr.single.asgn-5.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#unique.ptr.single.asgn-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator=_'><div id='lib:operator=,unique_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,unique_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> unique_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>U, E<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.single.asgn-6'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2377'>#</a></div><div class='texpara'><div id='unique.ptr.single.asgn-6.sentence-1' class='sentence'><i >Constraints</i>: <ul class='itemize'><li id='unique.ptr.single.asgn-6.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.single.asgn-6.1'>(6.1)</a></div><span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>U, E<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span> is implicitly convertible to <span class='texttt'>pointer</span>, and</li><li id='unique.ptr.single.asgn-6.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.single.asgn-6.2'>(6.2)</a></div><span class='texttt'>U</span> is not an array type, and</li><li id='unique.ptr.single.asgn-6.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.single.asgn-6.3'>(6.3)</a></div><span class='texttt'>is_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>D<span class='operator'>&amp;</span>, E<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#unique.ptr.single.asgn-6.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='unique.ptr.single.asgn-7'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2385'>#</a></div><div class='texpara'><div id='unique.ptr.single.asgn-7.sentence-1' class='sentence'><i >Preconditions</i>: If <span class='texttt'>E</span> is not a reference type,
assignment of the deleter from an rvalue of type <span class='texttt'>E</span>
is well-formed and does not throw an exception<a class='hidden_link' href='#unique.ptr.single.asgn-7.sentence-1'>.</a></div> <div id='unique.ptr.single.asgn-7.sentence-2' class='sentence'>Otherwise, <span class='texttt'>E</span> is a reference type and
assignment of the deleter from an lvalue of type <span class='texttt'>E</span>
is well-formed and does not throw an exception<a class='hidden_link' href='#unique.ptr.single.asgn-7.sentence-2'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.asgn-8'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2394'>#</a></div><div class='texpara'><div id='unique.ptr.single.asgn-8.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'>reset<span class='parenthesis'>(</span>u<span class='operator'>.</span>release<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> followed by
<span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>E<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>u<span class='operator'>.</span>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.single.asgn-8.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.asgn-9'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2399'>#</a></div><div class='texpara'><div id='unique.ptr.single.asgn-9.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>u<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#unique.ptr.single.asgn-9.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.asgn-10'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2403'>#</a></div><div class='texpara'><div id='unique.ptr.single.asgn-10.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#unique.ptr.single.asgn-10.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator=__'><div id='lib:operator=,unique_ptr__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,unique_ptr__'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> unique_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.single.asgn-11'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2414'>#</a></div><div class='texpara'><div id='unique.ptr.single.asgn-11.sentence-1' class='sentence'><i >Effects</i>: As if by <span class='texttt'>reset<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.single.asgn-11.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.asgn-12'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2418'>#</a></div><div class='texpara'><div id='unique.ptr.single.asgn-12.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#unique.ptr.single.asgn-12.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.asgn-13'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.asgn-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2422'>#</a></div><div class='texpara'><div id='unique.ptr.single.asgn-13.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#unique.ptr.single.asgn-13.sentence-1'>.</a></div></div></div></div></div><div id='unique.ptr.single.observers' class='section'><h4 ><a class='secnum' href='#unique.ptr.single.observers' style='min-width:110pt'>20.3.1.3.5</a> Observers <a class='abbr_ref' href='unique.ptr.single.observers'>[unique.ptr.single.observers]</a></h4><div class='texpara'><div id='lib:unique_ptr,operator*'><div id='lib:operator*,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator*,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> add_lvalue_reference_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='operator'>*</span>declval<span class='anglebracket'>&lt;</span>pointer<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.single.observers-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2435'>#</a></div><div class='texpara'><div id='unique.ptr.single.observers-1.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#unique.ptr.single.observers-1.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.observers-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2439'>#</a></div><div class='texpara'><div id='unique.ptr.single.observers-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.single.observers-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator->'><div id='lib:operator->,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator-%3e,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> pointer <span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.single.observers-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2451'>#</a></div><div class='texpara'><div id='unique.ptr.single.observers-3.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#unique.ptr.single.observers-3.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.observers-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2455'>#</a></div><div class='texpara'><div id='unique.ptr.single.observers-4.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.single.observers-4.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='unique.ptr.single.observers-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2459'>#</a></div><div class='texpara'><div id='unique.ptr.single.observers-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#unique.ptr.single.observers-note-1'>1</a></i>:&ensp;<div id='unique.ptr.single.observers-5.sentence-1' class='sentence'>The use of this function typically requires that <span class='texttt'>T</span> be a complete type<a class='hidden_link' href='#unique.ptr.single.observers-5.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,get'><div id='lib:get,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:get,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> pointer get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.single.observers-6'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2471'>#</a></div><div class='texpara'><div id='unique.ptr.single.observers-6.sentence-1' class='sentence'><i >Returns</i>: The stored pointer<a class='hidden_link' href='#unique.ptr.single.observers-6.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,get_deleter'><div id='lib:get_deleter,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:get_deleter,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> deleter_type<span class='operator'>&amp;</span> get_deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>constexpr</span> <span class='keyword'>const</span> deleter_type<span class='operator'>&amp;</span> get_deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.single.observers-7'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2483'>#</a></div><div class='texpara'><div id='unique.ptr.single.observers-7.sentence-1' class='sentence'><i >Returns</i>: A reference to the stored deleter<a class='hidden_link' href='#unique.ptr.single.observers-7.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator_bool'><div id='lib:operator_bool,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator_bool,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> <span class='keyword'>operator</span> <span class='keyword'>bool</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.single.observers-8'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.observers-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2494'>#</a></div><div class='texpara'><div id='unique.ptr.single.observers-8.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#unique.ptr.single.observers-8.sentence-1'>.</a></div></div></div></div></div><div id='unique.ptr.single.modifiers' class='section'><h4 ><a class='secnum' href='#unique.ptr.single.modifiers' style='min-width:110pt'>20.3.1.3.6</a> Modifiers <a class='abbr_ref' href='unique.ptr.single.modifiers'>[unique.ptr.single.modifiers]</a></h4><div class='texpara'><div id='lib:unique_ptr,release'><div id='lib:release,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:release,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> pointer release<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.single.modifiers-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2507'>#</a></div><div class='texpara'><div id='unique.ptr.single.modifiers-1.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#unique.ptr.single.modifiers-1.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.modifiers-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2511'>#</a></div><div class='texpara'><div id='unique.ptr.single.modifiers-2.sentence-1' class='sentence'><i >Returns</i>: The value <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> had at the start of
the call to <span class='texttt'>release</span><a class='hidden_link' href='#unique.ptr.single.modifiers-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,reset'><div id='lib:reset,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reset,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>pointer p <span class='operator'>=</span> pointer<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.single.modifiers-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2523'>#</a></div><div class='texpara'><div id='unique.ptr.single.modifiers-3.sentence-2' class='sentence'><i >Effects</i>: Assigns <span class='texttt'>p</span> to the stored pointer, and then,
with the old value of the stored pointer, <span class='texttt'>old_<span class='shy'></span>p</span>,
evaluates <span class='texttt'><span class='keyword'>if</span> <span class='parenthesis'>(</span>old_<span class='shy'></span>p<span class='parenthesis'>)</span> get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>old_<span class='shy'></span>p<span class='parenthesis'>)</span>;</span>
<div id='unique.ptr.single.modifiers-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#unique.ptr.single.modifiers-note-1'>1</a></i>:&ensp;<div id='unique.ptr.single.modifiers-3.sentence-1' class='sentence'>The order of these operations is significant
because the call to <span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> might destroy <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#unique.ptr.single.modifiers-3.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></div><div class='para' id='unique.ptr.single.modifiers-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2533'>#</a></div><div class='texpara'><div id='unique.ptr.single.modifiers-4.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> p</span><a class='hidden_link' href='#unique.ptr.single.modifiers-4.sentence-1'>.</a></div> <div id='unique.ptr.single.modifiers-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#unique.ptr.single.modifiers-note-2'>2</a></i>:&ensp;<div id='unique.ptr.single.modifiers-4.sentence-2' class='sentence'>The postcondition does not hold if the call to <span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
destroys <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> since <span class='texttt'><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is no longer a valid expression<a class='hidden_link' href='#unique.ptr.single.modifiers-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='unique.ptr.single.modifiers-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2541'>#</a></div><div class='texpara'><div id='unique.ptr.single.modifiers-5.sentence-1' class='sentence'><i >Remarks</i>: The behavior is undefined
if the evaluation of <span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>old_<span class='shy'></span>p<span class='parenthesis'>)</span></span> throws an exception<a class='hidden_link' href='#unique.ptr.single.modifiers-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,swap'><div id='lib:swap,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:swap,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>unique_ptr<span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.single.modifiers-6'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2553'>#</a></div><div class='texpara'><div id='unique.ptr.single.modifiers-6.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is swappable (<a href='swappable.requirements' title='16.4.4.3&emsp;Swappable requirements'>[swappable.<span class='shy'></span>requirements]</a>) and
does not throw an exception under <span class='texttt'>swap</span><a class='hidden_link' href='#unique.ptr.single.modifiers-6.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.single.modifiers-7'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.single.modifiers-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2558'>#</a></div><div class='texpara'><div id='unique.ptr.single.modifiers-7.sentence-1' class='sentence'><i >Effects</i>: Invokes <span class='texttt'>swap</span> on the stored pointers and on the stored
deleters of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> and <span class='texttt'>u</span><a class='hidden_link' href='#unique.ptr.single.modifiers-7.sentence-1'>.</a></div></div></div></div></div></div><div id='unique.ptr.runtime' class='section'><h4 ><a class='secnum' href='#unique.ptr.runtime' style='min-width:95pt'>20.3.1.4</a> <span class='texttt'>unique_<span class='shy'></span>ptr</span> for array objects with a runtime length <a class='abbr_ref' href='unique.ptr.runtime'>[unique.ptr.runtime]</a></h4><div id='unique.ptr.runtime.general' class='section'><h4 ><a class='secnum' href='#unique.ptr.runtime.general' style='min-width:110pt'>20.3.1.4.1</a> General <a class='abbr_ref' href='unique.ptr.runtime.general'>[unique.ptr.runtime.general]</a></h4><div class='texpara'><span id='lib:unique_ptr_'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:unique_ptr_'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> unique_ptr<span class='anglebracket'>&lt;</span>T<span class='squarebracket'>[</span><span class='squarebracket'>]</span>, D<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> pointer      <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>using</span> element_type <span class='operator'>=</span> T;
    <span class='keyword'>using</span> deleter_type <span class='operator'>=</span> D;

    <span class='comment'>// <a href='#unique.ptr.runtime.ctor' title='20.3.1.4.2&emsp;Constructors'>[unique.<span class='shy'></span>ptr.<span class='shy'></span>runtime.<span class='shy'></span>ctor]</a>, constructors</span>
    <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> unique_ptr<span class='parenthesis'>(</span>U p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>U p, <i ><span class='texttt'>see below</span></i> d<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>U p, <i ><span class='texttt'>see below</span></i> d<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>unique_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>U, E<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// destructor</span>
    <span class='keyword'>constexpr</span> <span class='operator'>~</span>unique_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    <span class='comment'>// assignment</span>
    <span class='keyword'>constexpr</span> unique_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>unique_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span>
      <span class='keyword'>constexpr</span> unique_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>U, E<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> unique_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// <a href='#unique.ptr.runtime.observers' title='20.3.1.4.4&emsp;Observers'>[unique.<span class='shy'></span>ptr.<span class='shy'></span>runtime.<span class='shy'></span>observers]</a>, observers</span>
    <span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>size_t i<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    <span class='keyword'>constexpr</span> pointer get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> deleter_type<span class='operator'>&amp;</span> get_deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>const</span> deleter_type<span class='operator'>&amp;</span> get_deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> <span class='keyword'>operator</span> <span class='keyword'>bool</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// <a href='#unique.ptr.runtime.modifiers' title='20.3.1.4.5&emsp;Modifiers'>[unique.<span class='shy'></span>ptr.<span class='shy'></span>runtime.<span class='shy'></span>modifiers]</a>, modifiers</span>
    <span class='keyword'>constexpr</span> pointer release<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>U p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>nullptr_t <span class='operator'>=</span> <span class='literal'>nullptr</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>unique_ptr<span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// disable copy from lvalue</span>
    unique_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    unique_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div><div class='para' id='unique.ptr.runtime.general-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2616'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.general-1.sentence-1' class='sentence'>A specialization for array types is provided with a slightly altered
interface<a class='hidden_link' href='#unique.ptr.runtime.general-1.sentence-1'>.</a></div></div><div class='texpara'><ul class='itemize'><li id='unique.ptr.runtime.general-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#unique.ptr.runtime.general-1.1'>(1.1)</a></div><div class='texpara'><div id='unique.ptr.runtime.general-1.1.sentence-1' class='sentence'>Conversions between different types of
<span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='squarebracket'>[</span><span class='squarebracket'>]</span>, D<span class='anglebracket'>&gt;</span></span>
that would be disallowed for the corresponding pointer-to-array types,
and conversions to or from the non-array forms of
<span class='texttt'>unique_<span class='shy'></span>ptr</span>, produce an ill-formed program<a class='hidden_link' href='#unique.ptr.runtime.general-1.1.sentence-1'>.</a></div></div></li><li id='unique.ptr.runtime.general-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#unique.ptr.runtime.general-1.2'>(1.2)</a></div><div class='texpara'><div id='unique.ptr.runtime.general-1.2.sentence-1' class='sentence'>Pointers to types derived from <span class='texttt'>T</span> are
rejected by the constructors, and by <span class='texttt'>reset</span><a class='hidden_link' href='#unique.ptr.runtime.general-1.2.sentence-1'>.</a></div></div></li><li id='unique.ptr.runtime.general-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#unique.ptr.runtime.general-1.3'>(1.3)</a></div><div class='texpara'><div id='unique.ptr.runtime.general-1.3.sentence-1' class='sentence'>The observers <span class='texttt'><span class='keyword'>operator</span><span class='operator'>*</span></span> and
<span class='texttt'><span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span></span> are not provided<a class='hidden_link' href='#unique.ptr.runtime.general-1.3.sentence-1'>.</a></div></div></li><li id='unique.ptr.runtime.general-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#unique.ptr.runtime.general-1.4'>(1.4)</a></div><div class='texpara'><div id='unique.ptr.runtime.general-1.4.sentence-1' class='sentence'>The indexing observer <span class='texttt'><span class='keyword'>operator</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> is provided<a class='hidden_link' href='#unique.ptr.runtime.general-1.4.sentence-1'>.</a></div></div></li><li id='unique.ptr.runtime.general-1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#unique.ptr.runtime.general-1.5'>(1.5)</a></div><div class='texpara'><div id='unique.ptr.runtime.general-1.5.sentence-1' class='sentence'>The default deleter will call <span class='texttt'><span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#unique.ptr.runtime.general-1.5.sentence-1'>.</a></div></div></li></ul></div></div><div class='para' id='unique.ptr.runtime.general-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2638'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.general-2.sentence-1' class='sentence'>Descriptions are provided below only for members that
differ from the primary template<a class='hidden_link' href='#unique.ptr.runtime.general-2.sentence-1'>.</a></div></div></div><div class='para' id='unique.ptr.runtime.general-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2642'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.general-3.sentence-1' class='sentence'>The template argument <span class='texttt'>T</span> shall be a complete type<a class='hidden_link' href='#unique.ptr.runtime.general-3.sentence-1'>.</a></div></div></div></div><div id='unique.ptr.runtime.ctor' class='section'><h4 ><a class='secnum' href='#unique.ptr.runtime.ctor' style='min-width:110pt'>20.3.1.4.2</a> Constructors <a class='abbr_ref' href='unique.ptr.runtime.ctor'>[unique.ptr.runtime.ctor]</a></h4><div class='texpara'><div id='lib:unique_ptr,constructor_____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:unique_ptr,constructor_____'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>explicit</span> unique_ptr<span class='parenthesis'>(</span>U p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='unique.ptr.runtime.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.ctor-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2653'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.ctor-1.sentence-1' class='sentence'>This constructor behaves the same as
the constructor in the primary template that
takes a single parameter of type <span class='texttt'>pointer</span><a class='hidden_link' href='#unique.ptr.runtime.ctor-1.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.runtime.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.ctor-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2658'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.ctor-2.sentence-1' class='sentence'><i >Constraints</i>: <ul class='itemize'><li id='unique.ptr.runtime.ctor-2.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.ctor-2.1'>(2.1)</a></div><span class='texttt'>U</span> is the same type as <span class='texttt'>pointer</span>, or</li><li id='unique.ptr.runtime.ctor-2.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.ctor-2.2'>(2.2)</a></div><span class='texttt'>pointer</span> is the same type as <span class='texttt'>element_<span class='shy'></span>type<span class='operator'>*</span></span>,
<span class='texttt'>U</span> is a pointer type <span class='texttt'>V<span class='operator'>*</span></span>, and
<span class='texttt'>V<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>element_<span class='shy'></span>type<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#unique.ptr.runtime.ctor-2.sentence-1'>.</a></li></ul></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,constructor______'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:unique_ptr,constructor______'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>U p, <i ><span class='texttt'>see below</span></i> d<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>U p, <i ><span class='texttt'>see below</span></i> d<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='unique.ptr.runtime.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.ctor-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2675'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.ctor-3.sentence-1' class='sentence'>These constructors behave the same as
the constructors in the primary template that
take a parameter of type <span class='texttt'>pointer</span> and a second parameter<a class='hidden_link' href='#unique.ptr.runtime.ctor-3.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.runtime.ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.ctor-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2680'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.ctor-4.sentence-1' class='sentence'><i >Constraints</i>: <ul class='itemize'><li id='unique.ptr.runtime.ctor-4.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.ctor-4.1'>(4.1)</a></div><span class='texttt'>U</span> is the same type as <span class='texttt'>pointer</span>,</li><li id='unique.ptr.runtime.ctor-4.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.ctor-4.2'>(4.2)</a></div><span class='texttt'>U</span> is <span class='texttt'>nullptr_<span class='shy'></span>t</span>, or</li><li id='unique.ptr.runtime.ctor-4.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.ctor-4.3'>(4.3)</a></div><span class='texttt'>pointer</span> is the same type as <span class='texttt'>element_<span class='shy'></span>type<span class='operator'>*</span></span>,
      <span class='texttt'>U</span> is a pointer type <span class='texttt'>V<span class='operator'>*</span></span>, and
      <span class='texttt'>V<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>element_<span class='shy'></span>type<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#unique.ptr.runtime.ctor-4.sentence-1'>.</a></li></ul></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,constructor_______'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:unique_ptr,constructor_______'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> unique_ptr<span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>U, E<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='unique.ptr.runtime.ctor-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.ctor-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2697'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.ctor-5.sentence-1' class='sentence'>This constructor behaves the same as in the primary template<a class='hidden_link' href='#unique.ptr.runtime.ctor-5.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.runtime.ctor-6'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.ctor-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2700'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.ctor-6.sentence-1' class='sentence'><i >Constraints</i>: Where <span class='texttt'>UP</span> is <span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>U, E<span class='anglebracket'>&gt;</span></span>:
<ul class='itemize'><li id='unique.ptr.runtime.ctor-6.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.ctor-6.1'>(6.1)</a></div><span class='texttt'>U</span> is an array type, and</li><li id='unique.ptr.runtime.ctor-6.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.ctor-6.2'>(6.2)</a></div><span class='texttt'>pointer</span> is the same type as <span class='texttt'>element_<span class='shy'></span>type<span class='operator'>*</span></span>, and</li><li id='unique.ptr.runtime.ctor-6.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.ctor-6.3'>(6.3)</a></div><span class='texttt'>UP<span class='operator'>&#x200b;::&#x200b;</span>pointer</span> is the same type as <span class='texttt'>UP<span class='operator'>&#x200b;::&#x200b;</span>element_<span class='shy'></span>type<span class='operator'>*</span></span>, and</li><li id='unique.ptr.runtime.ctor-6.4'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.ctor-6.4'>(6.4)</a></div><span class='texttt'>UP<span class='operator'>&#x200b;::&#x200b;</span>element_<span class='shy'></span>type<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>element_<span class='shy'></span>type<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>, and</li><li id='unique.ptr.runtime.ctor-6.5'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.ctor-6.5'>(6.5)</a></div>either <span class='texttt'>D</span> is a reference type and <span class='texttt'>E</span> is the same type as <span class='texttt'>D</span>,
      or <span class='texttt'>D</span> is not a reference type and <span class='texttt'>E</span> is implicitly convertible to <span class='texttt'>D</span><a class='hidden_link' href='#unique.ptr.runtime.ctor-6.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='unique.ptr.runtime.ctor-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#unique.ptr.runtime.ctor-note-1'>1</a></i>:&ensp;<div id='unique.ptr.runtime.ctor-6.sentence-2' class='sentence'>This replaces the <i >Constraints</i>: specification of the primary template<a class='hidden_link' href='#unique.ptr.runtime.ctor-6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></div><div id='unique.ptr.runtime.asgn' class='section'><h4 ><a class='secnum' href='#unique.ptr.runtime.asgn' style='min-width:110pt'>20.3.1.4.3</a> Assignment <a class='abbr_ref' href='unique.ptr.runtime.asgn'>[unique.ptr.runtime.asgn]</a></h4><div class='texpara'><div id='lib:unique_ptr,operator=___'><div id='lib:operator=,unique_ptr___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,unique_ptr___'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span> E<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> unique_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>U, E<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.runtime.asgn-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.asgn-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2725'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.asgn-1.sentence-1' class='sentence'>This operator behaves the same as in the primary template<a class='hidden_link' href='#unique.ptr.runtime.asgn-1.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.runtime.asgn-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.asgn-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2728'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.asgn-2.sentence-1' class='sentence'><i >Constraints</i>: Where <span class='texttt'>UP</span> is <span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>U, E<span class='anglebracket'>&gt;</span></span>:
<ul class='itemize'><li id='unique.ptr.runtime.asgn-2.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.asgn-2.1'>(2.1)</a></div><span class='texttt'>U</span> is an array type, and</li><li id='unique.ptr.runtime.asgn-2.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.asgn-2.2'>(2.2)</a></div><span class='texttt'>pointer</span> is the same type as <span class='texttt'>element_<span class='shy'></span>type<span class='operator'>*</span></span>, and</li><li id='unique.ptr.runtime.asgn-2.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.asgn-2.3'>(2.3)</a></div><span class='texttt'>UP<span class='operator'>&#x200b;::&#x200b;</span>pointer</span> is the same type as <span class='texttt'>UP<span class='operator'>&#x200b;::&#x200b;</span>element_<span class='shy'></span>type<span class='operator'>*</span></span>, and</li><li id='unique.ptr.runtime.asgn-2.4'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.asgn-2.4'>(2.4)</a></div><span class='texttt'>UP<span class='operator'>&#x200b;::&#x200b;</span>element_<span class='shy'></span>type<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>element_<span class='shy'></span>type<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>, and</li><li id='unique.ptr.runtime.asgn-2.5'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.asgn-2.5'>(2.5)</a></div><span class='texttt'>is_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>D<span class='operator'>&amp;</span>, E<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#unique.ptr.runtime.asgn-2.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='unique.ptr.runtime.asgn-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#unique.ptr.runtime.asgn-note-1'>1</a></i>:&ensp;<div id='unique.ptr.runtime.asgn-2.sentence-2' class='sentence'>This replaces the <i >Constraints</i>: specification of the primary template<a class='hidden_link' href='#unique.ptr.runtime.asgn-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></div><div id='unique.ptr.runtime.observers' class='section'><h4 ><a class='secnum' href='#unique.ptr.runtime.observers' style='min-width:110pt'>20.3.1.4.4</a> Observers <a class='abbr_ref' href='unique.ptr.runtime.observers'>[unique.ptr.runtime.observers]</a></h4><div class='texpara'><div id='lib:unique_ptr,operator[]'><div id='lib:operator[],unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%5b%5d,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>size_t i<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.runtime.observers-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.observers-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2752'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.observers-1.sentence-1' class='sentence'><i >Preconditions</i>: <span class='math'><span class='texttt'>i</span> &lt;</span> the
number of elements in the array to which
the stored pointer points<a class='hidden_link' href='#unique.ptr.runtime.observers-1.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.runtime.observers-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.observers-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2758'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.observers-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span></span><a class='hidden_link' href='#unique.ptr.runtime.observers-2.sentence-1'>.</a></div></div></div></div></div><div id='unique.ptr.runtime.modifiers' class='section'><h4 ><a class='secnum' href='#unique.ptr.runtime.modifiers' style='min-width:110pt'>20.3.1.4.5</a> Modifiers <a class='abbr_ref' href='unique.ptr.runtime.modifiers'>[unique.ptr.runtime.modifiers]</a></h4><div class='texpara'><div id='lib:unique_ptr,reset_'><div id='lib:reset,unique_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reset,unique_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>nullptr_t p <span class='operator'>=</span> <span class='literal'>nullptr</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.runtime.modifiers-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.modifiers-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2771'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.modifiers-1.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>reset<span class='parenthesis'>(</span>pointer<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.runtime.modifiers-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,reset__'><div id='lib:reset,unique_ptr__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reset,unique_ptr__'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>U p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.runtime.modifiers-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.modifiers-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2782'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.modifiers-2.sentence-1' class='sentence'>This function behaves the same as
the <span class='texttt'>reset</span> member of the primary template<a class='hidden_link' href='#unique.ptr.runtime.modifiers-2.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.runtime.modifiers-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.runtime.modifiers-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2786'>#</a></div><div class='texpara'><div id='unique.ptr.runtime.modifiers-3.sentence-1' class='sentence'><i >Constraints</i>: <ul class='itemize'><li id='unique.ptr.runtime.modifiers-3.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.modifiers-3.1'>(3.1)</a></div><span class='texttt'>U</span> is the same type as <span class='texttt'>pointer</span>, or</li><li id='unique.ptr.runtime.modifiers-3.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.runtime.modifiers-3.2'>(3.2)</a></div><span class='texttt'>pointer</span> is the same type as <span class='texttt'>element_<span class='shy'></span>type<span class='operator'>*</span></span>,
      <span class='texttt'>U</span> is a pointer type <span class='texttt'>V<span class='operator'>*</span></span>, and
      <span class='texttt'>V<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>element_<span class='shy'></span>type<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#unique.ptr.runtime.modifiers-3.sentence-1'>.</a></li></ul></div></div></div></div></div></div><div id='unique.ptr.create' class='section'><h4 ><a class='secnum' href='#unique.ptr.create' style='min-width:95pt'>20.3.1.5</a> Creation <a class='abbr_ref' href='unique.ptr.create'>[unique.ptr.create]</a></h4><div class='texpara'><div id='lib:make_unique'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_unique'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> unique_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_unique<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='unique.ptr.create-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2804'>#</a></div><div class='texpara'><div id='unique.ptr.create-1.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is not an array type<a class='hidden_link' href='#unique.ptr.create-1.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.create-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2808'>#</a></div><div class='texpara'><div id='unique.ptr.create-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>new</span> T<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.create-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:make_unique_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_unique_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> unique_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_unique<span class='parenthesis'>(</span>size_t n<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='unique.ptr.create-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2820'>#</a></div><div class='texpara'><div id='unique.ptr.create-3.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is an array of unknown bound<a class='hidden_link' href='#unique.ptr.create-3.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.create-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2824'>#</a></div><div class='texpara'><div id='unique.ptr.create-4.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>new</span> remove_<span class='shy'></span>extent_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span>n<span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.create-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:make_unique__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_unique__'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span> <i ><span class='texttt'>unspecified</span></i> make_unique<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
</code></div></div></div><div class='para' id='unique.ptr.create-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2836'>#</a></div><div class='texpara'><div id='unique.ptr.create-5.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is an array of known bound<a class='hidden_link' href='#unique.ptr.create-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:make_unique___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_unique___'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> unique_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_unique_for_overwrite<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='unique.ptr.create-6'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2848'>#</a></div><div class='texpara'><div id='unique.ptr.create-6.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is not an array type<a class='hidden_link' href='#unique.ptr.create-6.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.create-7'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2852'>#</a></div><div class='texpara'><div id='unique.ptr.create-7.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>new</span> T<span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.create-7.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:make_unique____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_unique____'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> unique_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_unique_for_overwrite<span class='parenthesis'>(</span>size_t n<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='unique.ptr.create-8'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2863'>#</a></div><div class='texpara'><div id='unique.ptr.create-8.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is an array of unknown bound<a class='hidden_link' href='#unique.ptr.create-8.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.create-9'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2867'>#</a></div><div class='texpara'><div id='unique.ptr.create-9.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>new</span> remove_<span class='shy'></span>extent_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span>n<span class='squarebracket'>]</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.create-9.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:make_unique_____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_unique_____'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span> <i ><span class='texttt'>unspecified</span></i> make_unique_for_overwrite<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
</code></div></div></div><div class='para' id='unique.ptr.create-10'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.create-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2878'>#</a></div><div class='texpara'><div id='unique.ptr.create-10.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is an array of known bound<a class='hidden_link' href='#unique.ptr.create-10.sentence-1'>.</a></div></div></div></div></div><div id='unique.ptr.special' class='section'><h4 ><a class='secnum' href='#unique.ptr.special' style='min-width:95pt'>20.3.1.6</a> Specialized algorithms <a class='abbr_ref' href='unique.ptr.special'>[unique.ptr.special]</a></h4><div class='texpara'><div id='lib:swap(unique_ptr&amp;,_unique_ptr&amp;)'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:swap(unique_ptr&amp;,_unique_ptr&amp;)'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='unique.ptr.special-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2891'>#</a></div><div class='texpara'><div id='unique.ptr.special-1.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>swappable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#unique.ptr.special-1.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.special-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2895'>#</a></div><div class='texpara'><div id='unique.ptr.special-2.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'>x<span class='operator'>.</span>swap<span class='parenthesis'>(</span>y<span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.special-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator=='><div id='lib:operator==,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator==,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> D1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span> D2<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.special-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2907'>#</a></div><div class='texpara'><div id='unique.ptr.special-3.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>x<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> y<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.special-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator<'><div id='lib:operator<,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3c,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> D1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span> D2<span class='anglebracket'>&gt;</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.special-4'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2919'>#</a></div><div class='texpara'><div id='unique.ptr.special-4.sentence-1' class='sentence'>Let <span class='texttt'>CT</span> denote
<span class='codeblock'>common_type_t<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer,
              <span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer<span class='anglebracket'>&gt;</span>
</span></div></div></div></div><div class='para' id='unique.ptr.special-5'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2926'>#</a></div><div class='texpara'><div id='unique.ptr.special-5.sentence-1' class='sentence'><i >Mandates</i>: <ul class='itemize'><li id='unique.ptr.special-5.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.special-5.1'>(5.1)</a></div><span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span> is implicitly convertible to <span class='texttt'>CT</span> and</li><li id='unique.ptr.special-5.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#unique.ptr.special-5.2'>(5.2)</a></div><span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span> is implicitly convertible to <span class='texttt'>CT</span><a class='hidden_link' href='#unique.ptr.special-5.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='unique.ptr.special-6'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2933'>#</a></div><div class='texpara'><div id='unique.ptr.special-6.sentence-1' class='sentence'><i >Preconditions</i>: The specialization
<span class='texttt'>less<span class='anglebracket'>&lt;</span>CT<span class='anglebracket'>&gt;</span></span> is a function object type (<a href='function.objects' title='22.10&emsp;Function objects'>[function.<span class='shy'></span>objects]</a>) that
induces a strict weak ordering (<a href='alg.sorting' title='27.8&emsp;Sorting and related operations'>[alg.<span class='shy'></span>sorting]</a>) on the pointer values<a class='hidden_link' href='#unique.ptr.special-6.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.special-7'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2939'>#</a></div><div class='texpara'><div id='unique.ptr.special-7.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>less<span class='anglebracket'>&lt;</span>CT<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>x<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, y<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.special-7.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator>'><div id='lib:operator>,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3e,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> D1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span> D2<span class='anglebracket'>&gt;</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.special-8'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2951'>#</a></div><div class='texpara'><div id='unique.ptr.special-8.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>y <span class='anglebracket'>&lt;</span> x</span><a class='hidden_link' href='#unique.ptr.special-8.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator<='><div id='lib:operator<=,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3c=,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> D1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span> D2<span class='anglebracket'>&gt;</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.special-9'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2963'>#</a></div><div class='texpara'><div id='unique.ptr.special-9.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>!</span><span class='parenthesis'>(</span>y <span class='anglebracket'>&lt;</span> x<span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.special-9.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator>='><div id='lib:operator>=,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3e=,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> D1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span> D2<span class='anglebracket'>&gt;</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&gt;</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.special-10'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2975'>#</a></div><div class='texpara'><div id='unique.ptr.special-10.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>!</span><span class='parenthesis'>(</span>x <span class='anglebracket'>&lt;</span> y<span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.special-10.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator<=>'><div id='lib:operator<=>,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3c=%3e,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> D1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span> D2<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> <a href='cmp.concept#concept:three_way_comparable_with' title='17.11.4&emsp;Concept three_&shy;way_&shy;comparable&emsp;[cmp.concept]'><span id='conceptref:three_way_comparable_with_'><span class='texttt'>three_<span class='shy'></span>way_<span class='shy'></span>comparable_<span class='shy'></span>with</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer,
                                     <span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer<span class='anglebracket'>&gt;</span>
  compare_three_way_result_t<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer,
                             <span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer<span class='anglebracket'>&gt;</span>
    <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T1, D1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T2, D2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.special-11'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L2991'>#</a></div><div class='texpara'><div id='unique.ptr.special-11.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>compare_<span class='shy'></span>three_<span class='shy'></span>way<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>x<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, y<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.special-11.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator==_'><div id='lib:operator==,unique_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator==,unique_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.special-12'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3003'>#</a></div><div class='texpara'><div id='unique.ptr.special-12.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>!</span>x</span><a class='hidden_link' href='#unique.ptr.special-12.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator<_'><div id='lib:operator<,unique_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3c,unique_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span>nullptr_t, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.special-13'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3017'>#</a></div><div class='texpara'><div id='unique.ptr.special-13.sentence-1' class='sentence'><i >Preconditions</i>: The specialization <span class='texttt'>less<span class='anglebracket'>&lt;</span>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer<span class='anglebracket'>&gt;</span></span> is
a function object type (<a href='function.objects' title='22.10&emsp;Function objects'>[function.<span class='shy'></span>objects]</a>) that induces a strict weak
ordering (<a href='alg.sorting' title='27.8&emsp;Sorting and related operations'>[alg.<span class='shy'></span>sorting]</a>) on the pointer values<a class='hidden_link' href='#unique.ptr.special-13.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.special-14'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3023'>#</a></div><div class='texpara'><div id='unique.ptr.special-14.sentence-1' class='sentence'><i >Returns</i>: The first function template returns
<span class='codeblock'>less<span class='anglebracket'>&lt;</span>unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>x<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, <span class='literal'>nullptr</span><span class='parenthesis'>)</span>
</span></div> <div id='unique.ptr.special-14.sentence-2' class='sentence'>
The second function template returns
<span class='codeblock'>less<span class='anglebracket'>&lt;</span>unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='literal'>nullptr</span>, x<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
</span></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator>_'><div id='lib:operator>,unique_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3e,unique_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>nullptr_t, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.special-15'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3044'>#</a></div><div class='texpara'><div id='unique.ptr.special-15.sentence-1' class='sentence'><i >Returns</i>: The first function template returns <span class='texttt'><span class='literal'>nullptr</span> <span class='anglebracket'>&lt;</span> x</span><a class='hidden_link' href='#unique.ptr.special-15.sentence-1'>.</a></div> <div id='unique.ptr.special-15.sentence-2' class='sentence'>The second function template returns <span class='texttt'>x <span class='anglebracket'>&lt;</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#unique.ptr.special-15.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator<=_'><div id='lib:operator<=,unique_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3c=,unique_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='parenthesis'>(</span>nullptr_t, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.special-16'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3059'>#</a></div><div class='texpara'><div id='unique.ptr.special-16.sentence-1' class='sentence'><i >Returns</i>: The first function template returns <span class='texttt'><span class='operator'>!</span><span class='parenthesis'>(</span><span class='literal'>nullptr</span> <span class='anglebracket'>&lt;</span> x<span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.special-16.sentence-1'>.</a></div> <div id='unique.ptr.special-16.sentence-2' class='sentence'>The second function template returns <span class='texttt'><span class='operator'>!</span><span class='parenthesis'>(</span>x <span class='anglebracket'>&lt;</span> <span class='literal'>nullptr</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.special-16.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator>=_'><div id='lib:operator>=,unique_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3e=,unique_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&gt;</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&gt;</span><span class='operator'>=</span><span class='parenthesis'>(</span>nullptr_t, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.special-17'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3074'>#</a></div><div class='texpara'><div id='unique.ptr.special-17.sentence-1' class='sentence'><i >Returns</i>: The first function template returns <span class='texttt'><span class='operator'>!</span><span class='parenthesis'>(</span>x <span class='anglebracket'>&lt;</span> <span class='literal'>nullptr</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.special-17.sentence-1'>.</a></div> <div id='unique.ptr.special-17.sentence-2' class='sentence'>The second function template returns <span class='texttt'><span class='operator'>!</span><span class='parenthesis'>(</span><span class='literal'>nullptr</span> <span class='anglebracket'>&lt;</span> x<span class='parenthesis'>)</span></span><a class='hidden_link' href='#unique.ptr.special-17.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr,operator<=>_'><div id='lib:operator<=>,unique_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3c=%3e,unique_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> <a href='cmp.concept#concept:three_way_comparable' title='17.11.4&emsp;Concept three_&shy;way_&shy;comparable&emsp;[cmp.concept]'><span id='conceptref:three_way_comparable_'><span class='texttt'>three_<span class='shy'></span>way_<span class='shy'></span>comparable</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> compare_three_way_result_t<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer<span class='anglebracket'>&gt;</span>
    <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> x, nullptr_t<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.special-18'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.special-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3089'>#</a></div><div class='texpara'><div id='unique.ptr.special-18.sentence-1' class='sentence'><i >Returns</i>: <span class='codeblock'>compare_three_way<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>x<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='operator'>::</span>pointer<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>nullptr</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='operator'>.</span>
</span></div></div></div></div></div><div id='unique.ptr.io' class='section'><h4 ><a class='secnum' href='#unique.ptr.io' style='min-width:95pt'>20.3.1.7</a> I/O <a class='abbr_ref' href='unique.ptr.io'>[unique.ptr.io]</a></h4><div class='texpara'><div id='lib:unique_ptr,operator<<'><div id='lib:operator<<,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3c%3c,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E, <span class='keyword'>class</span> T, <span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
  basic_ostream<span class='anglebracket'>&lt;</span>E, T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span>basic_ostream<span class='anglebracket'>&lt;</span>E, T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> os, <span class='keyword'>const</span> unique_ptr<span class='anglebracket'>&lt;</span>Y, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> p<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='unique.ptr.io-1'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.io-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3105'>#</a></div><div class='texpara'><div id='unique.ptr.io-1.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>os <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> p<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is a valid expression<a class='hidden_link' href='#unique.ptr.io-1.sentence-1'>.</a></div></div></div></div><div class='para' id='unique.ptr.io-2'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.io-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3109'>#</a></div><div class='texpara'><div id='unique.ptr.io-2.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'>os <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> p<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;</span></div></div></div></div><div class='para' id='unique.ptr.io-3'><div class='marginalizedparent'><a class='marginalized' href='#unique.ptr.io-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3113'>#</a></div><div class='texpara'><div id='unique.ptr.io-3.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>os</span><a class='hidden_link' href='#unique.ptr.io-3.sentence-1'>.</a></div></div></div></div></div></div><div id='util.sharedptr' class='section'><h3 ><a class='secnum' href='#util.sharedptr' style='min-width:80pt'>20.3.2</a> Shared-ownership pointers <a class='abbr_ref' href='util.sharedptr'>[util.sharedptr]</a></h3><div id='util.smartptr.weak.bad' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.bad' style='min-width:95pt'>20.3.2.1</a> Class <span class='texttt'>bad_<span class='shy'></span>weak_<span class='shy'></span>ptr</span> <a class='abbr_ref' href='util.smartptr.weak.bad'>[util.smartptr.weak.bad]</a></h4><div class='texpara'><a class='index' id=':smart_pointers'></a>
<span id='lib:bad_weak_ptr'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:bad_weak_ptr'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> bad_weak_ptr <span class='operator'>:</span> <span class='keyword'>public</span> exception <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='comment'>// see <a href='exception' title='17.9.3&emsp;Class exception'>[exception]</a> for the specification of the special member functions</span>
    <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> what<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='keyword'>override</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div><div class='para' id='util.smartptr.weak.bad-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.bad-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3134'>#</a></div><div class='texpara'><div id='util.smartptr.weak.bad-1.sentence-1' class='sentence'>An exception of type <span class='texttt'>bad_<span class='shy'></span>weak_<span class='shy'></span>ptr</span> is thrown by the <span class='texttt'>shared_<span class='shy'></span>ptr</span>
constructor taking a <span class='texttt'>weak_<span class='shy'></span>ptr</span><a class='hidden_link' href='#util.smartptr.weak.bad-1.sentence-1'>.</a></div></div></div><div class='texpara'><div id='lib:bad_weak_ptr,what'><div id='lib:what,bad_weak_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:what,bad_weak_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> what<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='keyword'>override</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.weak.bad-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.bad-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3144'>#</a></div><div class='texpara'><div id='util.smartptr.weak.bad-2.sentence-1' class='sentence'><i >Returns</i>: An <a class='index' id=':return_value_of_bad_weak_ptr::what'></a>implementation-defined <span class='textsc'>ntbs</span><a class='hidden_link' href='#util.smartptr.weak.bad-2.sentence-1'>.</a></div></div></div></div></div><div id='util.smartptr.shared' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared' style='min-width:95pt'>20.3.2.2</a> Class template <span class='texttt'>shared_<span class='shy'></span>ptr</span> <a class='abbr_ref' href='util.smartptr.shared'>[util.smartptr.shared]</a></h4><div id='util.smartptr.shared.general' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.general' style='min-width:110pt'>20.3.2.2.1</a> General <a class='abbr_ref' href='util.smartptr.shared.general'>[util.smartptr.shared.general]</a></h4><div class='para' id='util.smartptr.shared.general-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3153'>#</a></div><div class='texpara'><div id='util.smartptr.shared.general-1.sentence-1' class='sentence'><a class='index' id='lib:shared_ptr'></a>The <span class='texttt'>shared_<span class='shy'></span>ptr</span> class template stores a pointer, usually obtained
via <span id=':new'><span class='texttt'><span class='keyword'>new</span></span></span><a class='hidden_link' href='#util.smartptr.shared.general-1.sentence-1'>.</a></div> <div id='util.smartptr.shared.general-1.sentence-2' class='sentence'><span class='texttt'>shared_<span class='shy'></span>ptr</span> implements semantics of shared ownership;
the last remaining owner of the pointer is responsible for destroying
the object, or otherwise releasing the resources associated with the stored pointer<a class='hidden_link' href='#util.smartptr.shared.general-1.sentence-2'>.</a></div> <div id='util.smartptr.shared.general-1.sentence-3' class='sentence'>A
<span class='texttt'>shared_<span class='shy'></span>ptr</span> is said to be empty if it does not own a pointer<a class='hidden_link' href='#util.smartptr.shared.general-1.sentence-3'>.</a></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> shared_ptr <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> element_type <span class='operator'>=</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
    <span class='keyword'>using</span> weak_type    <span class='operator'>=</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;

    <span class='comment'>// <a href='#util.smartptr.shared.const' title='20.3.2.2.2&emsp;Constructors'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>const]</a>, constructors</span>
    <span class='keyword'>constexpr</span> shared_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> shared_ptr<span class='parenthesis'>(</span>nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span> <span class='operator'>:</span> shared_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      <span class='keyword'>explicit</span> shared_ptr<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d, A a<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>nullptr_t p, D d<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> D, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>nullptr_t p, D d, A a<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r, element_type<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r, element_type<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    shared_ptr<span class='parenthesis'>(</span>shared_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      <span class='keyword'>explicit</span> shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>Y, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#util.smartptr.shared.dest' title='20.3.2.2.3&emsp;Destructor'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>dest]</a>, destructor</span>
    <span class='operator'>~</span>shared_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#util.smartptr.shared.assign' title='20.3.2.2.4&emsp;Assignment'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>assign]</a>, assignment</span>
    shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>shared_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
      shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>Y, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#util.smartptr.shared.mod' title='20.3.2.2.5&emsp;Modifiers'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>mod]</a>, modifiers</span>
    <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>shared_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> reset<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
      <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
      <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d, A a<span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#util.smartptr.shared.obs' title='20.3.2.2.6&emsp;Observers'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>obs]</a>, observers</span>
    element_type<span class='operator'>*</span> get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    element_type<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>ptrdiff_t i<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    <span class='keyword'>long</span> use_count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>explicit</span> <span class='keyword'>operator</span> <span class='keyword'>bool</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
      <span class='keyword'>bool</span> owner_before<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
      <span class='keyword'>bool</span> owner_before<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span>
    shared_ptr<span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>
</span></div></div><div class='para' id='util.smartptr.shared.general-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3239'>#</a></div><div class='texpara'><div id='util.smartptr.shared.general-2.sentence-1' class='sentence'>Specializations of <span class='texttt'>shared_<span class='shy'></span>ptr</span> shall be <i >Cpp17CopyConstructible</i>,
<i >Cpp17CopyAssignable</i>, and <i >Cpp17LessThanComparable</i>, allowing their use in standard
containers<a class='hidden_link' href='#util.smartptr.shared.general-2.sentence-1'>.</a></div> <div id='util.smartptr.shared.general-2.sentence-2' class='sentence'>Specializations of <span class='texttt'>shared_<span class='shy'></span>ptr</span> shall be
contextually convertible to <span class='texttt'><span class='keyword'>bool</span></span>,
allowing their use in boolean expressions and declarations in conditions<a class='hidden_link' href='#util.smartptr.shared.general-2.sentence-2'>.</a></div></div></div><div class='para' id='util.smartptr.shared.general-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3246'>#</a></div><div class='texpara'><div id='util.smartptr.shared.general-3.sentence-1' class='sentence'>The template parameter <span class='texttt'>T</span> of <span class='texttt'>shared_<span class='shy'></span>ptr</span>
may be an incomplete type<a class='hidden_link' href='#util.smartptr.shared.general-3.sentence-1'>.</a></div> <div id='util.smartptr.shared.general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.general-note-1'>1</a></i>:&ensp;<div id='util.smartptr.shared.general-3.sentence-2' class='sentence'><span class='texttt'>T</span> can be a function type<a class='hidden_link' href='#util.smartptr.shared.general-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.general-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3253'>#</a></div><div class='texpara'><div id='util.smartptr.shared.general-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#util.smartptr.shared.general-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span> px <span class='operator'>=</span> dynamic_pointer_cast<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>py<span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='comment'>// do something with <span class='tcode_in_codeblock'>px</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='util.smartptr.shared.general-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3262'>#</a></div><div class='texpara'><div id='util.smartptr.shared.general-5.sentence-1' class='sentence'>For purposes of determining the presence of a data race, member functions shall
access and modify only the <span class='texttt'>shared_<span class='shy'></span>ptr</span> and <span class='texttt'>weak_<span class='shy'></span>ptr</span> objects
themselves and not objects they refer to<a class='hidden_link' href='#util.smartptr.shared.general-5.sentence-1'>.</a></div> <div id='util.smartptr.shared.general-5.sentence-2' class='sentence'>Changes in <span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> do not
reflect modifications that can introduce data races<a class='hidden_link' href='#util.smartptr.shared.general-5.sentence-2'>.</a></div></div></div><div class='para' id='util.smartptr.shared.general-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.general-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3268'>#</a></div><div class='texpara'><div id='util.smartptr.shared.general-6.sentence-1' class='sentence'>For the purposes of subclause <a href='#smartptr' title='20.3&emsp;Smart pointers'>[smartptr]</a>,
a pointer type <span class='texttt'>Y<span class='operator'>*</span></span> is said to be
<a class='hidden_link' href='#def:compatible_with,shared_ptr' title='20.3.2.2.1&emsp;General&emsp;[util.smartptr.shared.general]'><span id='def:compatible_with,shared_ptr'><i >compatible with</i></span></a>
a pointer type <span class='texttt'>T<span class='operator'>*</span></span> when either
<span class='texttt'>Y<span class='operator'>*</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span> or
<span class='texttt'>Y</span> is <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> and <span class='texttt'>T</span> is <span class='mathit'>cv</span> <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#util.smartptr.shared.general-6.sentence-1'>.</a></div></div></div></div><div id='util.smartptr.shared.const' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.const' style='min-width:110pt'>20.3.2.2.2</a> Constructors <a class='abbr_ref' href='util.smartptr.shared.const'>[util.smartptr.shared.const]</a></h4><div class='para' id='util.smartptr.shared.const-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3278'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-1.sentence-1' class='sentence'>In the constructor definitions below,
enables <span class='texttt'>shared_<span class='shy'></span>from_<span class='shy'></span>this</span> with <span class='texttt'>p</span>,
for a pointer <span class='texttt'>p</span> of type <span class='texttt'>Y<span class='operator'>*</span></span>,
means that if <span class='texttt'>Y</span> has an unambiguous and accessible base class
that is a specialization of <span class='texttt'>enable_<span class='shy'></span>shared_<span class='shy'></span>from_<span class='shy'></span>this</span> (<a href='#util.smartptr.enab' title='20.3.2.5&emsp;Class template enable_&shy;shared_&shy;from_&shy;this'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>enab]</a>),
then <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>*</span></span> shall be implicitly convertible to <span class='texttt'>T<span class='operator'>*</span></span> and
the constructor evaluates the statement:
<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span>p <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>nullptr</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>weak_this<span class='operator'>.</span>expired<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
  p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>weak_this <span class='operator'>=</span> shared_ptr<span class='anglebracket'>&lt;</span>remove_cv_t<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span>, <span class='keyword'>const_cast</span><span class='anglebracket'>&lt;</span>remove_cv_t<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div> <div id='util.smartptr.shared.const-1.sentence-2' class='sentence'>
The assignment to the <span class='texttt'>weak_<span class='shy'></span>this</span> member is not atomic and
conflicts with any potentially concurrent access to the same object (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)<a class='hidden_link' href='#util.smartptr.shared.const-1.sentence-2'>.</a></div></div></div><div class='texpara'><div id='lib:shared_ptr,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> shared_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='util.smartptr.shared.const-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3299'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-2.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#util.smartptr.shared.const-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>explicit</span> shared_ptr<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='util.smartptr.shared.const-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3310'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-3.sentence-1' class='sentence'><i >Constraints</i>: When <span class='texttt'>T</span> is an array type,
the expression <span class='texttt'><span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span> p</span> is well-formed and either
<span class='texttt'>T</span> is <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> and <span class='texttt'>Y<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span>, or
<span class='texttt'>T</span> is <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> and <span class='texttt'>Y<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#util.smartptr.shared.const-3.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-3.sentence-2' class='sentence'>When <span class='texttt'>T</span> is not an array type,
the expression <span class='texttt'><span class='keyword'>delete</span> p</span> is well-formed and
<span class='texttt'>Y<span class='operator'>*</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#util.smartptr.shared.const-3.sentence-2'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3320'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-4.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>Y</span> is a complete type<a class='hidden_link' href='#util.smartptr.shared.const-4.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3324'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-5.sentence-1' class='sentence'><i >Preconditions</i>: The expression
<span class='texttt'><span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span> p</span>, when <span class='texttt'>T</span> is an array type, or
<span class='texttt'><span class='keyword'>delete</span> p</span>, when <span class='texttt'>T</span> is not an array type,
has well-defined behavior, and
does not throw exceptions<a class='hidden_link' href='#util.smartptr.shared.const-5.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3332'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-6.sentence-1' class='sentence'><i >Effects</i>: When <span class='texttt'>T</span> is not an array type,
constructs a <span class='texttt'>shared_<span class='shy'></span>ptr</span> object
that owns the pointer <span class='texttt'>p</span><a class='hidden_link' href='#util.smartptr.shared.const-6.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-6.sentence-2' class='sentence'>Otherwise, constructs a <span class='texttt'>shared_<span class='shy'></span>ptr</span>
that owns <span class='texttt'>p</span> and a deleter of an
unspecified type that calls <span class='texttt'><span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span> p</span><a class='hidden_link' href='#util.smartptr.shared.const-6.sentence-2'>.</a></div> <div id='util.smartptr.shared.const-6.sentence-3' class='sentence'>When <span class='texttt'>T</span> is not an array type,
enables <span class='texttt'>shared_<span class='shy'></span>from_<span class='shy'></span>this</span> with <span class='texttt'>p</span><a class='hidden_link' href='#util.smartptr.shared.const-6.sentence-3'>.</a></div> <div id='util.smartptr.shared.const-6.sentence-4' class='sentence'>If an exception is thrown, <span class='texttt'><span class='keyword'>delete</span> p</span> is called
when <span class='texttt'>T</span> is not an array type, <span class='texttt'><span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span> p</span> otherwise<a class='hidden_link' href='#util.smartptr.shared.const-6.sentence-4'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3345'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-7.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> p</span><a class='hidden_link' href='#util.smartptr.shared.const-7.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3349'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-8.sentence-1' class='sentence'><i >Throws</i>: <span class='texttt'>bad_<span class='shy'></span>alloc</span>, or an <a class='index' id=':exception_type_when_shared_ptr_constructor_fails'></a>implementation-defined exception when a resource other than memory cannot be obtained<a class='hidden_link' href='#util.smartptr.shared.const-8.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,constructor__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor__'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d, A a<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>nullptr_t p, D d<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> D, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>nullptr_t p, D d, A a<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='util.smartptr.shared.const-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3364'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-9.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>, and
<span class='texttt'>d<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> is a well-formed expression<a class='hidden_link' href='#util.smartptr.shared.const-9.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-9.sentence-2' class='sentence'>For the first two overloads:</div></div><div class='texpara'><ul class='itemize'><li id='util.smartptr.shared.const-9.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.const-9.1'>(9.1)</a></div><div class='texpara'><div id='util.smartptr.shared.const-9.1.sentence-1' class='sentence'>If <span class='texttt'>T</span> is an array type, then either
<span class='texttt'>T</span> is <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> and <span class='texttt'>Y<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span>, or
<span class='texttt'>T</span> is <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> and <span class='texttt'>Y<span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#util.smartptr.shared.const-9.1.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.const-9.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.const-9.2'>(9.2)</a></div><div class='texpara'><div id='util.smartptr.shared.const-9.2.sentence-1' class='sentence'>If <span class='texttt'>T</span> is not an array type, then <span class='texttt'>Y<span class='operator'>*</span></span> is convertible to <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#util.smartptr.shared.const-9.2.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='util.smartptr.shared.const-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3380'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-10.sentence-1' class='sentence'><i >Preconditions</i>: Construction of <span class='texttt'>d</span> and a deleter of type <span class='texttt'>D</span>
initialized with <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>d<span class='parenthesis'>)</span></span> do not throw exceptions<a class='hidden_link' href='#util.smartptr.shared.const-10.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-10.sentence-2' class='sentence'>The expression <span class='texttt'>d<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span>
has well-defined behavior and does not throw exceptions<a class='hidden_link' href='#util.smartptr.shared.const-10.sentence-2'>.</a></div> <div id='util.smartptr.shared.const-10.sentence-3' class='sentence'><span class='texttt'>A</span> meets
the <i >Cpp17Allocator</i> requirements (<a href='allocator.requirements.general' title='16.4.4.6.1&emsp;General'>[allocator.<span class='shy'></span>requirements.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#util.smartptr.shared.const-10.sentence-3'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3389'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-11.sentence-1' class='sentence'><i >Effects</i>: Constructs a <span class='texttt'>shared_<span class='shy'></span>ptr</span> object that owns the
object <span class='texttt'>p</span> and the deleter <span class='texttt'>d</span><a class='hidden_link' href='#util.smartptr.shared.const-11.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-11.sentence-2' class='sentence'>When <span class='texttt'>T</span> is not an array type,
the first and second constructors enable <span class='texttt'>shared_<span class='shy'></span>from_<span class='shy'></span>this</span> with <span class='texttt'>p</span><a class='hidden_link' href='#util.smartptr.shared.const-11.sentence-2'>.</a></div> <div id='util.smartptr.shared.const-11.sentence-3' class='sentence'>The second and fourth constructors shall use a copy of <span class='texttt'>a</span> to
allocate memory for internal use<a class='hidden_link' href='#util.smartptr.shared.const-11.sentence-3'>.</a></div> <div id='util.smartptr.shared.const-11.sentence-4' class='sentence'>If an exception is thrown, <span class='texttt'>d<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> is called<a class='hidden_link' href='#util.smartptr.shared.const-11.sentence-4'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3399'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-12.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> p</span><a class='hidden_link' href='#util.smartptr.shared.const-12.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-13'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3403'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-13.sentence-1' class='sentence'><i >Throws</i>: <span class='texttt'>bad_<span class='shy'></span>alloc</span>, or an <a class='index' id=':exception_type_when_shared_ptr_constructor_fails_'></a>implementation-defined exception
when a resource other than memory cannot be obtained<a class='hidden_link' href='#util.smartptr.shared.const-13.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,constructor___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor___'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r, element_type<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r, element_type<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='util.smartptr.shared.const-14'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3417'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-14.sentence-1' class='sentence'><i >Effects</i>: Constructs a <span class='texttt'>shared_<span class='shy'></span>ptr</span> instance that
stores <span class='texttt'>p</span> and shares ownership with
the initial value of <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.shared.const-14.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-15'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3423'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-15.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> p</span><a class='hidden_link' href='#util.smartptr.shared.const-15.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-15.sentence-2' class='sentence'>For the second overload,
<span class='texttt'>r</span> is empty and <span class='texttt'>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#util.smartptr.shared.const-15.sentence-2'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.const-16'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3429'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.const-note-1'>1</a></i>:&ensp;<div id='util.smartptr.shared.const-16.sentence-1' class='sentence'>Use of this constructor leads to a dangling pointer
unless <span class='texttt'>p</span> remains valid
at least until the ownership group of <span class='texttt'>r</span> is destroyed<a class='hidden_link' href='#util.smartptr.shared.const-16.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.const-17'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3436'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.const-note-2'>2</a></i>:&ensp;<div id='util.smartptr.shared.const-17.sentence-1' class='sentence'>This constructor allows creation of an empty
<span class='texttt'>shared_<span class='shy'></span>ptr</span> instance with a non-null stored pointer<a class='hidden_link' href='#util.smartptr.shared.const-17.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,constructor____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor____'>🔗</a></div><code class='itemdeclcode'>shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='util.smartptr.shared.const-18'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3450'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-18.sentence-1' class='sentence'><i >Constraints</i>: For the second constructor, <span class='texttt'>Y<span class='operator'>*</span></span> is compatible with <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#util.smartptr.shared.const-18.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-19'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3454'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-19.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>r</span> is empty, constructs
an empty <span class='texttt'>shared_<span class='shy'></span>ptr</span> object; otherwise, constructs
a <span class='texttt'>shared_<span class='shy'></span>ptr</span> object that shares ownership with <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.shared.const-19.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-20'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3460'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-20.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> r<span class='operator'>.</span>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.const-20.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,constructor_____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor_____'>🔗</a></div><code class='itemdeclcode'>shared_ptr<span class='parenthesis'>(</span>shared_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='util.smartptr.shared.const-21'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3472'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-21.sentence-1' class='sentence'><i >Constraints</i>: For the second constructor, <span class='texttt'>Y<span class='operator'>*</span></span> is compatible with <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#util.smartptr.shared.const-21.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-22'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3476'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-22.sentence-1' class='sentence'><i >Effects</i>: Move constructs a <span class='texttt'>shared_<span class='shy'></span>ptr</span> instance from <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.shared.const-22.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-23'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3480'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-23.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains the old value of
<span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.shared.const-23.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-23.sentence-2' class='sentence'><span class='texttt'>r</span> is empty, and <span class='texttt'>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#util.smartptr.shared.const-23.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:weak_ptr'><div id='lib:shared_ptr,constructor______'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor______'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>explicit</span> shared_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.const-24'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3493'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-24.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>Y<span class='operator'>*</span></span> is compatible with <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#util.smartptr.shared.const-24.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-25'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3497'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-25.sentence-1' class='sentence'><i >Effects</i>: Constructs a <span class='texttt'>shared_<span class='shy'></span>ptr</span> object that shares ownership with
<span class='texttt'>r</span> and stores a copy of the pointer stored in <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.shared.const-25.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-25.sentence-2' class='sentence'>If an exception is thrown, the constructor has no effect<a class='hidden_link' href='#util.smartptr.shared.const-25.sentence-2'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-26'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3503'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-26.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> r<span class='operator'>.</span>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.const-26.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-27'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-27'>27</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3507'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-27.sentence-1' class='sentence'><i >Throws</i>: <span class='texttt'>bad_<span class='shy'></span>weak_<span class='shy'></span>ptr</span> when <span class='texttt'>r<span class='operator'>.</span>expired<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.const-27.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unique_ptr__'><div id='lib:shared_ptr,constructor_______'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,constructor_______'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> shared_ptr<span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>Y, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.const-28'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-28'>28</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3519'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-28.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>Y<span class='operator'>*</span></span> is compatible with <span class='texttt'>T<span class='operator'>*</span></span> and
<span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>Y, D<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>pointer</span> is convertible to <span class='texttt'>element_<span class='shy'></span>type<span class='operator'>*</span></span><a class='hidden_link' href='#util.smartptr.shared.const-28.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.const-29'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.const-29'>29</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3524'>#</a></div><div class='texpara'><div id='util.smartptr.shared.const-29.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span>, equivalent to <span class='texttt'>shared_<span class='shy'></span>ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.const-29.sentence-1'>.</a></div> <div id='util.smartptr.shared.const-29.sentence-2' class='sentence'>Otherwise, if <span class='texttt'>D</span> is not a reference type,
equivalent to <span class='texttt'>shared_<span class='shy'></span>ptr<span class='parenthesis'>(</span>r<span class='operator'>.</span>release<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='operator'>.</span>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.const-29.sentence-2'>.</a></div> <div id='util.smartptr.shared.const-29.sentence-3' class='sentence'>Otherwise, equivalent to <span class='texttt'>shared_<span class='shy'></span>ptr<span class='parenthesis'>(</span>r<span class='operator'>.</span>release<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, ref<span class='parenthesis'>(</span>r<span class='operator'>.</span>get_<span class='shy'></span>deleter<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.const-29.sentence-3'>.</a></div> <div id='util.smartptr.shared.const-29.sentence-4' class='sentence'>If an exception is thrown, the constructor has no effect<a class='hidden_link' href='#util.smartptr.shared.const-29.sentence-4'>.</a></div></div></div></div></div><div id='util.smartptr.shared.dest' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.dest' style='min-width:110pt'>20.3.2.2.3</a> Destructor <a class='abbr_ref' href='util.smartptr.shared.dest'>[util.smartptr.shared.dest]</a></h4><div class='texpara'><div id='lib:shared_ptr,destructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr,destructor'>🔗</a></div><code class='itemdeclcode'><span class='operator'>~</span>shared_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='util.smartptr.shared.dest-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.dest-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3541'>#</a></div><div class='texpara'><div id='util.smartptr.shared.dest-1.sentence-1' class='sentence'><i >Effects</i>: <ul class='itemize'><li id='util.smartptr.shared.dest-1.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.dest-1.1'>(1.1)</a></div><div class='texpara'><div id='util.smartptr.shared.dest-1.1.sentence-1' class='sentence'>If <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> is empty or shares ownership with another
<span class='texttt'>shared_<span class='shy'></span>ptr</span> instance (<span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>1</span></span>), there are no side effects<a class='hidden_link' href='#util.smartptr.shared.dest-1.1.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.dest-1.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.dest-1.2'>(1.2)</a></div><div class='texpara'><div id='util.smartptr.shared.dest-1.2.sentence-1' class='sentence'>Otherwise, if <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> owns an object
<span class='texttt'>p</span> and a deleter <span class='texttt'>d</span>, <span class='texttt'>d<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> is called<a class='hidden_link' href='#util.smartptr.shared.dest-1.2.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.dest-1.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.dest-1.3'>(1.3)</a></div><div class='texpara'><div id='util.smartptr.shared.dest-1.3.sentence-1' class='sentence'>Otherwise, <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> owns a pointer <span class='texttt'>p</span>,
and <span class='texttt'><span class='keyword'>delete</span> p</span> is called<a class='hidden_link' href='#util.smartptr.shared.dest-1.3.sentence-1'>.</a></div></div></li></ul></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.dest-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.dest-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3556'>#</a></div><div class='texpara'><div id='util.smartptr.shared.dest-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.dest-note-1'>1</a></i>:&ensp;<div id='util.smartptr.shared.dest-2.sentence-1' class='sentence'>Since the destruction of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
decreases the number of instances that share ownership with <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
by one,
after <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> has been destroyed
all <span class='texttt'>shared_<span class='shy'></span>ptr</span> instances that shared ownership with
<span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> will report a <span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> that is one less
than its previous value<a class='hidden_link' href='#util.smartptr.shared.dest-2.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='util.smartptr.shared.assign' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.assign' style='min-width:110pt'>20.3.2.2.4</a> Assignment <a class='abbr_ref' href='util.smartptr.shared.assign'>[util.smartptr.shared.assign]</a></h4><div class='texpara'><div id='lib:shared_ptr,operator='><div id='lib:operator=,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,shared_ptr'>🔗</a></div><code class='itemdeclcode'>shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.assign-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3576'>#</a></div><div class='texpara'><div id='util.smartptr.shared.assign-1.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>shared_<span class='shy'></span>ptr<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.assign-1.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.assign-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3580'>#</a></div><div class='texpara'><div id='util.smartptr.shared.assign-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#util.smartptr.shared.assign-2.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.assign-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3584'>#</a></div><div class='texpara'><div id='util.smartptr.shared.assign-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.assign-note-1'>1</a></i>:&ensp;<div id='util.smartptr.shared.assign-3.sentence-1' class='sentence'>The use count updates caused by the temporary object
construction and destruction are not observable side
effects, so the implementation can meet the effects (and the
implied guarantees) via different means, without creating a
temporary<a class='hidden_link' href='#util.smartptr.shared.assign-3.sentence-1'>.</a></div> <div id='util.smartptr.shared.assign-3.sentence-2' class='sentence'>In particular, in the example:
<span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> p<span class='parenthesis'>(</span><span class='keyword'>new</span> <span class='keyword'>int</span><span class='parenthesis'>)</span>;
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span> q<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;
p <span class='operator'>=</span> p;
q <span class='operator'>=</span> p;
</span>
both assignments can be no-ops<a class='hidden_link' href='#util.smartptr.shared.assign-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,operator=_'><div id='lib:operator=,shared_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,shared_ptr_'>🔗</a></div><code class='itemdeclcode'>shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>shared_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.assign-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3608'>#</a></div><div class='texpara'><div id='util.smartptr.shared.assign-4.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>shared_<span class='shy'></span>ptr<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.assign-4.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.assign-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3612'>#</a></div><div class='texpara'><div id='util.smartptr.shared.assign-5.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#util.smartptr.shared.assign-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,operator=__'><div id='lib:operator=,shared_ptr__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,shared_ptr__'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> shared_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>unique_ptr<span class='anglebracket'>&lt;</span>Y, D<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.assign-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3623'>#</a></div><div class='texpara'><div id='util.smartptr.shared.assign-6.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>shared_<span class='shy'></span>ptr<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.assign-6.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.assign-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.assign-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3627'>#</a></div><div class='texpara'><div id='util.smartptr.shared.assign-7.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#util.smartptr.shared.assign-7.sentence-1'>.</a></div></div></div></div></div><div id='util.smartptr.shared.mod' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.mod' style='min-width:110pt'>20.3.2.2.5</a> Modifiers <a class='abbr_ref' href='util.smartptr.shared.mod'>[util.smartptr.shared.mod]</a></h4><div class='texpara'><div id='lib:shared_ptr,swap'><div id='lib:swap,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:swap,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> swap<span class='parenthesis'>(</span>shared_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.mod-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.mod-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3641'>#</a></div><div class='texpara'><div id='util.smartptr.shared.mod-1.sentence-1' class='sentence'><i >Effects</i>: Exchanges the contents of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> and <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.shared.mod-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,reset'><div id='lib:reset,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reset,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> reset<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.mod-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.mod-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3652'>#</a></div><div class='texpara'><div id='util.smartptr.shared.mod-2.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>shared_<span class='shy'></span>ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.mod-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,reset_'><div id='lib:reset,shared_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reset,shared_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.mod-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.mod-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3663'>#</a></div><div class='texpara'><div id='util.smartptr.shared.mod-3.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>shared_<span class='shy'></span>ptr<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.mod-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,reset__'><div id='lib:reset,shared_ptr__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reset,shared_ptr__'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.mod-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.mod-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3674'>#</a></div><div class='texpara'><div id='util.smartptr.shared.mod-4.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>shared_<span class='shy'></span>ptr<span class='parenthesis'>(</span>p, d<span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.mod-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,reset___'><div id='lib:reset,shared_ptr___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reset,shared_ptr___'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y, <span class='keyword'>class</span> D, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> reset<span class='parenthesis'>(</span>Y<span class='operator'>*</span> p, D d, A a<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.mod-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.mod-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3685'>#</a></div><div class='texpara'><div id='util.smartptr.shared.mod-5.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>shared_<span class='shy'></span>ptr<span class='parenthesis'>(</span>p, d, a<span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.mod-5.sentence-1'>.</a></div></div></div></div></div><div id='util.smartptr.shared.obs' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.obs' style='min-width:110pt'>20.3.2.2.6</a> Observers <a class='abbr_ref' href='util.smartptr.shared.obs'>[util.smartptr.shared.obs]</a></h4><div class='texpara'><div id='lib:shared_ptr,get'><div id='lib:get,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:get,shared_ptr'>🔗</a></div><code class='itemdeclcode'>element_type<span class='operator'>*</span> get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.obs-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3697'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-1.sentence-1' class='sentence'><i >Returns</i>: The stored pointer<a class='hidden_link' href='#util.smartptr.shared.obs-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,operator*'><div id='lib:operator*,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator*,shared_ptr'>🔗</a></div><code class='itemdeclcode'>T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.obs-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3708'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-2.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#util.smartptr.shared.obs-2.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.obs-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3712'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-3.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.obs-3.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.obs-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3716'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-4.sentence-1' class='sentence'><i >Remarks</i>: When <span class='texttt'>T</span> is an array type or <span class='mathit'>cv</span> <span id=':void_'><span class='texttt'><span class='keyword'>void</span></span></span>,
it is unspecified whether this
member function is declared<a class='hidden_link' href='#util.smartptr.shared.obs-4.sentence-1'>.</a></div> <div id='util.smartptr.shared.obs-4.sentence-2' class='sentence'>If it is declared, it is unspecified what its
return type is, except that the declaration (although not necessarily the
definition) of the function shall be well-formed<a class='hidden_link' href='#util.smartptr.shared.obs-4.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,operator->'><div id='lib:operator->,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator-%3e,shared_ptr'>🔗</a></div><code class='itemdeclcode'>T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.obs-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3731'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-5.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#util.smartptr.shared.obs-5.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.obs-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3735'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-6.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.obs-6.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.obs-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3739'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-7.sentence-1' class='sentence'><i >Remarks</i>: When <span class='texttt'>T</span> is an array type,
it is unspecified whether this member function is declared<a class='hidden_link' href='#util.smartptr.shared.obs-7.sentence-1'>.</a></div> <div id='util.smartptr.shared.obs-7.sentence-2' class='sentence'>If it is declared, it is unspecified what its return type is,
except that the declaration (although not necessarily the definition)
of the function shall be well-formed<a class='hidden_link' href='#util.smartptr.shared.obs-7.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,operator[]'><div id='lib:operator[],shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%5b%5d,shared_ptr'>🔗</a></div><code class='itemdeclcode'>element_type<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>ptrdiff_t i<span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.obs-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3754'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-8.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>nullptr</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> i <span class='anglebracket'>&gt;</span><span class='operator'>=</span> <span class='literal'>0</span></span><a class='hidden_link' href='#util.smartptr.shared.obs-8.sentence-1'>.</a></div> <div id='util.smartptr.shared.obs-8.sentence-2' class='sentence'>If <span class='texttt'>T</span> is <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span>, <span class='texttt'>i <span class='anglebracket'>&lt;</span> N</span><a class='hidden_link' href='#util.smartptr.shared.obs-8.sentence-2'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.obs-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3759'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-9.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span></span><a class='hidden_link' href='#util.smartptr.shared.obs-9.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.obs-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3763'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-10.sentence-1' class='sentence'><i >Throws</i>: Nothing<a class='hidden_link' href='#util.smartptr.shared.obs-10.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.obs-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3767'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-11.sentence-1' class='sentence'><i >Remarks</i>: When <span class='texttt'>T</span> is not an array type,
it is unspecified whether this member function is declared<a class='hidden_link' href='#util.smartptr.shared.obs-11.sentence-1'>.</a></div> <div id='util.smartptr.shared.obs-11.sentence-2' class='sentence'>If it is declared, it is unspecified what its return type is,
except that the declaration (although not necessarily the definition)
of the function shall be well-formed<a class='hidden_link' href='#util.smartptr.shared.obs-11.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,use_count'><div id='lib:use_count,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:use_count,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>long</span> use_count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.obs-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3782'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-12.sentence-1' class='sentence'><i >Synchronization</i>: None<a class='hidden_link' href='#util.smartptr.shared.obs-12.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.obs-13'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3786'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-13.sentence-1' class='sentence'><i >Returns</i>: The number of <span class='texttt'>shared_<span class='shy'></span>ptr</span> objects, <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> included,
that share ownership with <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>, or <span class='texttt'><span class='literal'>0</span></span> when <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> is
empty<a class='hidden_link' href='#util.smartptr.shared.obs-13.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.obs-14'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3792'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.obs-note-1'>1</a></i>:&ensp;<div id='util.smartptr.shared.obs-14.sentence-1' class='sentence'><span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span>
does not imply a specific return value of <span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.obs-14.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.obs-15'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3798'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.obs-note-2'>2</a></i>:&ensp;<div id='util.smartptr.shared.obs-15.sentence-1' class='sentence'><span class='texttt'>weak_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>lock<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
can affect the return value of <span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.obs-15.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.obs-16'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3804'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.obs-note-3'>3</a></i>:&ensp;<div id='util.smartptr.shared.obs-16.sentence-1' class='sentence'>When multiple threads
might affect the return value of <span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
the result is approximate<a class='hidden_link' href='#util.smartptr.shared.obs-16.sentence-1'>.</a></div> <div id='util.smartptr.shared.obs-16.sentence-2' class='sentence'>In particular, <span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span></span> does not imply that accesses through
a previously destroyed <span class='texttt'>shared_<span class='shy'></span>ptr</span> have in any sense completed<a class='hidden_link' href='#util.smartptr.shared.obs-16.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,operator_bool'><div id='lib:operator_bool,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator_bool,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>explicit</span> <span class='keyword'>operator</span> <span class='keyword'>bool</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.obs-17'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3820'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-17.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#util.smartptr.shared.obs-17.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,owner_before'><div id='lib:owner_before,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:owner_before,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>bool</span> owner_before<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>bool</span> owner_before<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.obs-18'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.obs-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3832'>#</a></div><div class='texpara'><div id='util.smartptr.shared.obs-18.sentence-1' class='sentence'><i >Returns</i>: An unspecified value such that
<ul class='itemize'><li id='util.smartptr.shared.obs-18.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.obs-18.1'>(18.1)</a></div><span class='texttt'>x<span class='operator'>.</span>owner_<span class='shy'></span>before<span class='parenthesis'>(</span>y<span class='parenthesis'>)</span></span> defines a strict weak ordering as defined in <a href='alg.sorting' title='27.8&emsp;Sorting and related operations'>[alg.<span class='shy'></span>sorting]</a>;</li><li id='util.smartptr.shared.obs-18.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.obs-18.2'>(18.2)</a></div>under the equivalence relation defined by <span class='texttt'>owner_<span class='shy'></span>before</span>,
<span class='texttt'><span class='operator'>!</span>a<span class='operator'>.</span>owner_<span class='shy'></span>before<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>!</span>b<span class='operator'>.</span>owner_<span class='shy'></span>before<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span></span>, two <span class='texttt'>shared_<span class='shy'></span>ptr</span> or
<span class='texttt'>weak_<span class='shy'></span>ptr</span> instances are equivalent if and only if they share ownership or
are both empty<a class='hidden_link' href='#util.smartptr.shared.obs-18.sentence-1'>.</a></li></ul></div></div></div></div></div><div id='util.smartptr.shared.create' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.create' style='min-width:110pt'>20.3.2.2.7</a> Creation <a class='abbr_ref' href='util.smartptr.shared.create'>[util.smartptr.shared.create]</a></h4><div class='para' id='util.smartptr.shared.create-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3848'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-1.sentence-1' class='sentence'>The common requirements that apply to all
<span class='texttt'>make_<span class='shy'></span>shared</span>,
<span class='texttt'>allocate_<span class='shy'></span>shared</span>,
<span class='texttt'>make_<span class='shy'></span>shared_<span class='shy'></span>for_<span class='shy'></span>overwrite</span>, and
<span class='texttt'>allocate_<span class='shy'></span>shared_<span class='shy'></span>for_<span class='shy'></span>overwrite</span> overloads,
unless specified otherwise, are described below<a class='hidden_link' href='#util.smartptr.shared.create-1.sentence-1'>.</a></div></div></div><div class='texpara'><div id='lib:allocate_shared'><div id='lib:make_shared'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span><i >args</i><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, <i >args</i><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared_for_overwrite<span class='parenthesis'>(</span><i >args</i><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared_for_overwrite<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, <i >args</i><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.create-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3870'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-2.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>A</span> meets
the <i >Cpp17Allocator</i> requirements (<a href='allocator.requirements.general' title='16.4.4.6.1&emsp;General'>[allocator.<span class='shy'></span>requirements.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#util.smartptr.shared.create-2.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.create-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3875'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-3.sentence-1' class='sentence'><i >Effects</i>: Allocates memory for an object of type <span class='texttt'>T</span>
(or <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> when <span class='texttt'>T</span> is <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>,
where <span class='texttt'>N</span> is determined from <i >args</i> as specified by the concrete overload)<a class='hidden_link' href='#util.smartptr.shared.create-3.sentence-1'>.</a></div> <div id='util.smartptr.shared.create-3.sentence-2' class='sentence'>The object is initialized from <i >args</i> as specified by the concrete overload<a class='hidden_link' href='#util.smartptr.shared.create-3.sentence-2'>.</a></div> <div id='util.smartptr.shared.create-3.sentence-3' class='sentence'>The <span class='texttt'>allocate_<span class='shy'></span>shared</span> and <span class='texttt'>allocate_<span class='shy'></span>shared_<span class='shy'></span>for_<span class='shy'></span>overwrite</span> templates
use a copy of <span class='texttt'>a</span>
(rebound for an unspecified <span class='texttt'>value_<span class='shy'></span>type</span>) to allocate memory<a class='hidden_link' href='#util.smartptr.shared.create-3.sentence-3'>.</a></div> <div id='util.smartptr.shared.create-3.sentence-4' class='sentence'>If an exception is thrown, the functions have no effect<a class='hidden_link' href='#util.smartptr.shared.create-3.sentence-4'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.create-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3886'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-4.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>nullptr</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='operator'>.</span>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span></span>,
where <span class='texttt'>r</span> is the return value<a class='hidden_link' href='#util.smartptr.shared.create-4.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.create-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3891'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-5.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> instance that stores and owns the address of
the newly constructed object<a class='hidden_link' href='#util.smartptr.shared.create-5.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.create-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3896'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-6.sentence-1' class='sentence'><i >Throws</i>: <span class='texttt'>bad_<span class='shy'></span>alloc</span>, or
an exception thrown from <span class='texttt'>allocate</span> or from the initialization of the object<a class='hidden_link' href='#util.smartptr.shared.create-6.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.create-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L3901'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-7.sentence-1' class='sentence'><i >Remarks</i>: <ul class='itemize'><li id='util.smartptr.shared.create-7.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.create-7.1'>(7.1)</a></div><div class='texpara'><div id='util.smartptr.shared.create-7.1.sentence-1' class='sentence'>Implementations should perform no more than one memory allocation<a class='hidden_link' href='#util.smartptr.shared.create-7.1.sentence-1'>.</a></div> <div id='util.smartptr.shared.create-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.create-note-1'>1</a></i>:&ensp;<div id='util.smartptr.shared.create-7.1.sentence-2' class='sentence'>This provides efficiency equivalent to an intrusive smart pointer<a class='hidden_link' href='#util.smartptr.shared.create-7.1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='util.smartptr.shared.create-7.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.create-7.2'>(7.2)</a></div><div class='texpara'><div id='util.smartptr.shared.create-7.2.sentence-1' class='sentence'>When an object of an array type <span class='texttt'>U</span> is specified to have
  an initial value of <span class='texttt'>u</span> (of the same type),
  this shall be interpreted to mean that
  each array element of the object has as its initial value
  the corresponding element from <span class='texttt'>u</span><a class='hidden_link' href='#util.smartptr.shared.create-7.2.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.create-7.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.create-7.3'>(7.3)</a></div><div class='texpara'><div id='util.smartptr.shared.create-7.3.sentence-1' class='sentence'>When an object of an array type is specified to have
  a default initial value,
  this shall be interpreted to mean that each array element of the object
  has a default initial value<a class='hidden_link' href='#util.smartptr.shared.create-7.3.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.create-7.4'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.create-7.4'>(7.4)</a></div><div class='texpara'><div id='util.smartptr.shared.create-7.4.sentence-1' class='sentence'>When a (sub)object of a non-array type <span class='texttt'>U</span> is specified to have
  an initial value of <span class='texttt'>v</span>, or <span class='texttt'>U<span class='parenthesis'>(</span>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>,
  where <span class='texttt'>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> is a list of constructor arguments,
  <span class='texttt'>make_<span class='shy'></span>shared</span> shall initialize this (sub)object
  via the expression <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>new</span><span class='parenthesis'>(</span>pv<span class='parenthesis'>)</span> U<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span></span> or <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>new</span><span class='parenthesis'>(</span>pv<span class='parenthesis'>)</span> U<span class='parenthesis'>(</span>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span> respectively,
  where <span class='texttt'>pv</span> has type <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> and points to storage
  suitable to hold an object of type <span class='texttt'>U</span><a class='hidden_link' href='#util.smartptr.shared.create-7.4.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.create-7.5'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.create-7.5'>(7.5)</a></div><div class='texpara'><div id='util.smartptr.shared.create-7.5.sentence-1' class='sentence'>When a (sub)object of a non-array type <span class='texttt'>U</span> is specified to have
  an initial value of <span class='texttt'>v</span>, or <span class='texttt'>U<span class='parenthesis'>(</span>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>,
  where <span class='texttt'>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> is a list of constructor arguments,
  <span class='texttt'>allocate_<span class='shy'></span>shared</span> shall initialize this (sub)object
  via the expression
  <ul class='itemize'><li id='util.smartptr.shared.create-7.5.1'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#util.smartptr.shared.create-7.5.1'>(7.5.1)</a></div><span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A2<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>construct<span class='parenthesis'>(</span>a2, pv, v<span class='parenthesis'>)</span></span> or</li><li id='util.smartptr.shared.create-7.5.2'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#util.smartptr.shared.create-7.5.2'>(7.5.2)</a></div><span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A2<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>construct<span class='parenthesis'>(</span>a2, pv, l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span></li></ul>
  respectively,
  where <span class='texttt'>pv</span> points to storage
  suitable to hold an object of type <span class='texttt'>U</span> and
  <span class='texttt'>a2</span> of type <span class='texttt'>A2</span> is a rebound copy of
  the allocator <span class='texttt'>a</span> passed to <span class='texttt'>allocate_<span class='shy'></span>shared</span>
  such that its <span class='texttt'>value_<span class='shy'></span>type</span> is <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#util.smartptr.shared.create-7.5.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.create-7.6'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.create-7.6'>(7.6)</a></div><div class='texpara'><div id='util.smartptr.shared.create-7.6.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span> is specified to have
  a default initial value,
  <span class='texttt'>make_<span class='shy'></span>shared</span> shall initialize this (sub)object
  via the expression <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>new</span><span class='parenthesis'>(</span>pv<span class='parenthesis'>)</span> U<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
  where <span class='texttt'>pv</span> has type <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> and points to storage
  suitable to hold an object of type <span class='texttt'>U</span><a class='hidden_link' href='#util.smartptr.shared.create-7.6.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.create-7.7'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.create-7.7'>(7.7)</a></div><div class='texpara'><div id='util.smartptr.shared.create-7.7.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span> is specified to have
  a default initial value,
  <span class='texttt'>allocate_<span class='shy'></span>shared</span> shall initialize this (sub)object
  via the expression <span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A2<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>construct<span class='parenthesis'>(</span>a2, pv<span class='parenthesis'>)</span></span>,
  where <span class='texttt'>pv</span> points to storage
  suitable to hold an object of type <span class='texttt'>U</span> and
  <span class='texttt'>a2</span> of type <span class='texttt'>A2</span> is a rebound copy of
  the allocator <span class='texttt'>a</span> passed to <span class='texttt'>allocate_<span class='shy'></span>shared</span>
  such that its <span class='texttt'>value_<span class='shy'></span>type</span> is <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#util.smartptr.shared.create-7.7.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.create-7.8'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.create-7.8'>(7.8)</a></div><div class='texpara'><div id='util.smartptr.shared.create-7.8.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span> is initialized by
  <span class='texttt'>make_<span class='shy'></span>shared_<span class='shy'></span>for_<span class='shy'></span>overwrite</span> or<br/>  <span class='texttt'>allocate_<span class='shy'></span>shared_<span class='shy'></span>for_<span class='shy'></span>overwrite</span>,
  it is initialized via the expression <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>new</span><span class='parenthesis'>(</span>pv<span class='parenthesis'>)</span> U</span>,
  where <span class='texttt'>pv</span> has type <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> and
  points to storage suitable to hold an object of type <span class='texttt'>U</span><a class='hidden_link' href='#util.smartptr.shared.create-7.8.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.create-7.9'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.create-7.9'>(7.9)</a></div><div class='texpara'><div id='util.smartptr.shared.create-7.9.sentence-1' class='sentence'>Array elements are initialized in ascending order of their addresses<a class='hidden_link' href='#util.smartptr.shared.create-7.9.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.create-7.10'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.create-7.10'>(7.10)</a></div><div class='texpara'><div id='util.smartptr.shared.create-7.10.sentence-1' class='sentence'>When the lifetime of the object managed by the return value ends, or
  when the initialization of an array element throws an exception,
  the initialized elements are destroyed in the reverse order
  of their original construction<a class='hidden_link' href='#util.smartptr.shared.create-7.10.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.create-7.11'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.create-7.11'>(7.11)</a></div><div class='texpara'><div id='util.smartptr.shared.create-7.11.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span>
  that was initialized by <span class='texttt'>make_<span class='shy'></span>shared</span> is to be destroyed,
  it is destroyed via the expression <span class='texttt'>pv<span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='operator'>~</span>U<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> where
  <span class='texttt'>pv</span> points to that object of type <span class='texttt'>U</span><a class='hidden_link' href='#util.smartptr.shared.create-7.11.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.create-7.12'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.create-7.12'>(7.12)</a></div><div class='texpara'><div id='util.smartptr.shared.create-7.12.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span>
  that was initialized by <span class='texttt'>allocate_<span class='shy'></span>shared</span> is to be destroyed,
  it is destroyed via the expression
  <span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A2<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>destroy<span class='parenthesis'>(</span>a2, pv<span class='parenthesis'>)</span></span> where
  <span class='texttt'>pv</span> points to that object of type <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> and
  <span class='texttt'>a2</span> of type <span class='texttt'>A2</span> is a rebound copy of
  the allocator <span class='texttt'>a</span> passed to <span class='texttt'>allocate_<span class='shy'></span>shared</span>
  such that its <span class='texttt'>value_<span class='shy'></span>type</span> is <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#util.smartptr.shared.create-7.12.sentence-1'>.</a></div></div></li></ul></div> <div id='util.smartptr.shared.create-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.create-note-2'>2</a></i>:&ensp;<div id='util.smartptr.shared.create-7.sentence-2' class='sentence'>These functions will typically allocate more memory than <span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span> to
allow for internal bookkeeping structures such as reference counts<a class='hidden_link' href='#util.smartptr.shared.create-7.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared_'><div id='lib:make_shared_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;                    <span class='comment'>// <span class='texttt'>T</span> is not array</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;    <span class='comment'>// <span class='texttt'>T</span> is not array</span>
</code></div></div></div></div><div class='para' id='util.smartptr.shared.create-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4006'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-8.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is not an array type<a class='hidden_link' href='#util.smartptr.shared.create-8.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.create-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4010'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-9.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>T</span>
with an initial value <span class='texttt'>T<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.create-9.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.create-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4015'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-10.sentence-1' class='sentence'><i >Remarks</i>: The <span class='texttt'>shared_<span class='shy'></span>ptr</span> constructors called by these functions
enable <span class='texttt'>shared_<span class='shy'></span>from_<span class='shy'></span>this</span>
with the address of the newly constructed object of type <span class='texttt'>T</span><a class='hidden_link' href='#util.smartptr.shared.create-10.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.create-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4021'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#util.smartptr.shared.create-example-1'>1</a></i>:&ensp;<span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to <span class='tcode_in_codeblock'>int()</span></span>
shared_ptr<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>16</span>, <span class='literal'>1</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to vector of <span class='tcode_in_codeblock'>16</span> elements with value <span class='tcode_in_codeblock'>1</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared__'><div id='lib:make_shared__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared__'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>
  make_shared<span class='parenthesis'>(</span>size_t N<span class='parenthesis'>)</span>;                                        <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, size_t N<span class='parenthesis'>)</span>;          <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span></span>
</code></div></div></div></div><div class='para' id='util.smartptr.shared.create-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4041'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-12.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is of the form <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#util.smartptr.shared.create-12.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.create-13'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4045'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-13.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span>
with a default initial value,
where <span class='texttt'>U</span> is <span class='texttt'>remove_<span class='shy'></span>extent_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#util.smartptr.shared.create-13.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.create-14'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4051'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#util.smartptr.shared.create-example-2'>2</a></i>:&ensp;<span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1024</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[1024]</span></span>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>6</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[6][2][2]</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared___'><div id='lib:make_shared___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared___'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                                  <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>;                    <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span></span>
</code></div></div></div></div><div class='para' id='util.smartptr.shared.create-15'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4072'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-15.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is of the form <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span><a class='hidden_link' href='#util.smartptr.shared.create-15.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.create-16'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4076'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-16.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>T</span>
with a default initial value<a class='hidden_link' href='#util.smartptr.shared.create-16.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.create-17'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4081'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#util.smartptr.shared.create-example-3'>3</a></i>:&ensp;<span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[1024]</span></span>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[6][2][2]</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared____'><div id='lib:make_shared____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared____'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span>size_t N,
                            <span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;       <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, size_t N,
                                <span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;   <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span></span>
</code></div></div></div></div><div class='para' id='util.smartptr.shared.create-18'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4104'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-18.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is of the form <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#util.smartptr.shared.create-18.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.create-19'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4108'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-19.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span>,
where <span class='texttt'>U</span> is <span class='texttt'>remove_<span class='shy'></span>extent_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> and
each array element has an initial value of <span class='texttt'>u</span><a class='hidden_link' href='#util.smartptr.shared.create-19.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.create-20'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4114'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#util.smartptr.shared.create-example-4'>4</a></i>:&ensp;<span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1024</span>, <span class='literal'>1.0</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a <span class='tcode_in_codeblock'>double[1024]</span>, where each element is <span class='tcode_in_codeblock'>1.0</span></span>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>6</span>, <span class='curlybracket'>{</span><span class='literal'>1.0</span>, <span class='literal'>0.0</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a <span class='tcode_in_codeblock'>double[6][2]</span>, where each <span class='tcode_in_codeblock'>double[2]</span> element is <span class='tcode_in_codeblock'>{1.0, 0.0}</span></span>
shared_ptr<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> r <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>4</span>, <span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a <span class='tcode_in_codeblock'>vector&lt;int&gt;[4]</span>, where each vector has contents <span class='tcode_in_codeblock'>{1, 2}</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared_____'><div id='lib:make_shared_____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared_____'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;       <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a,
                                <span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;   <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span></span>
</code></div></div></div></div><div class='para' id='util.smartptr.shared.create-21'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4138'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-21.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is of the form <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span><a class='hidden_link' href='#util.smartptr.shared.create-21.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.create-22'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4142'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-22.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>T</span>,
where each array element of type <span class='texttt'>remove_<span class='shy'></span>extent_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
has an initial value of <span class='texttt'>u</span><a class='hidden_link' href='#util.smartptr.shared.create-22.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.create-23'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4148'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#util.smartptr.shared.create-example-5'>5</a></i>:&ensp;<span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1.0</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a <span class='tcode_in_codeblock'>double[1024]</span>, where each element is <span class='tcode_in_codeblock'>1.0</span></span>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1.0</span>, <span class='literal'>0.0</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a <span class='tcode_in_codeblock'>double[6][2]</span>, where each double[2] element is <span class='tcode_in_codeblock'>{1.0, 0.0}</span></span>
shared_ptr<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> r <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a <span class='tcode_in_codeblock'>vector&lt;int&gt;[4]</span>, where each vector has contents <span class='tcode_in_codeblock'>{1, 2}</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared______'><div id='lib:make_shared______'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared______'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared_for_overwrite<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared_for_overwrite<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.create-24'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4171'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-24.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is not an array of unknown bound<a class='hidden_link' href='#util.smartptr.shared.create-24.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.create-25'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4175'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-25.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>T</span><a class='hidden_link' href='#util.smartptr.shared.create-25.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.create-26'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4179'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#util.smartptr.shared.create-example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>double</span> data<span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span>; <span class='curlybracket'>}</span>;
shared_ptr<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared_for_overwrite<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a default-initialized <span class='tcode_in_codeblock'>X</span>, where each element in <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;data</span> has an indeterminate value</span>

shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared_for_overwrite<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a default-initialized <span class='tcode_in_codeblock'>double[1024]</span>, where each element has an indeterminate value</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared_______'><div id='lib:make_shared_______'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared_______'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared_for_overwrite<span class='parenthesis'>(</span>size_t N<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared_for_overwrite<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, size_t N<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.create-27'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-27'>27</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4202'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-27.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is an array of unknown bound<a class='hidden_link' href='#util.smartptr.shared.create-27.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.create-28'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-28'>28</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4206'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-28.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span>,
where <span class='texttt'>U</span> is <span class='texttt'>remove_<span class='shy'></span>extent_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#util.smartptr.shared.create-28.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.create-29'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.create-29'>29</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4211'>#</a></div><div class='texpara'><div id='util.smartptr.shared.create-example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#util.smartptr.shared.create-example-7'>7</a></i>:&ensp;<span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared_for_overwrite<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1024</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a default-initialized <span class='tcode_in_codeblock'>double[1024]</span>, where each element has an indeterminate value</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></div><div id='util.smartptr.shared.cmp' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.cmp' style='min-width:110pt'>20.3.2.2.8</a> Comparison <a class='abbr_ref' href='util.smartptr.shared.cmp'>[util.smartptr.shared.cmp]</a></h4><div class='texpara'><div id='lib:shared_ptr,operator=='><div id='lib:operator==,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator==,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.cmp-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4229'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cmp-1.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>a<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> b<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.cmp-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,operator==_'><div id='lib:operator==,shared_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator==,shared_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.cmp-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4241'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cmp-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>!</span>a</span><a class='hidden_link' href='#util.smartptr.shared.cmp-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,operator<=>'><div id='lib:operator<=>,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3c=%3e,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  strong_ordering <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.cmp-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4253'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cmp-3.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>compare_<span class='shy'></span>three_<span class='shy'></span>way<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>a<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, b<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.cmp-3.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.cmp-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4257'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cmp-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.cmp-note-1'>1</a></i>:&ensp;<div id='util.smartptr.shared.cmp-4.sentence-1' class='sentence'>Defining a comparison operator function allows <span class='texttt'>shared_<span class='shy'></span>ptr</span> objects
to be used as keys in associative containers<a class='hidden_link' href='#util.smartptr.shared.cmp-4.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,operator<=>_'><div id='lib:operator<=>,shared_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3c=%3e,shared_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  strong_ordering <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.cmp-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cmp-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4271'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cmp-5.sentence-1' class='sentence'><i >Returns</i>: <span class='codeblock'>compare_three_way<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>a<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>element_type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>nullptr</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
</span></div></div></div></div></div><div id='util.smartptr.shared.spec' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.spec' style='min-width:110pt'>20.3.2.2.9</a> Specialized algorithms <a class='abbr_ref' href='util.smartptr.shared.spec'>[util.smartptr.shared.spec]</a></h4><div class='texpara'><div id='lib:shared_ptr,swap_'><div id='lib:swap,shared_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:swap,shared_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.spec-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.spec-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4287'>#</a></div><div class='texpara'><div id='util.smartptr.shared.spec-1.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>a<span class='operator'>.</span>swap<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.spec-1.sentence-1'>.</a></div></div></div></div></div><div id='util.smartptr.shared.cast' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.cast' style='min-width:110pt'>20.3.2.2.10</a> Casts <a class='abbr_ref' href='util.smartptr.shared.cast'>[util.smartptr.shared.cast]</a></h4><div class='texpara'><div id='lib:shared_ptr,static_pointer_cast'><div id='lib:static_pointer_cast,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:static_pointer_cast,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> static_pointer_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> static_pointer_cast<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.cast-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4303'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cast-1.sentence-1' class='sentence'><i >Mandates</i>: The expression <span class='texttt'><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>U<span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>nullptr</span><span class='parenthesis'>)</span></span> is well-formed<a class='hidden_link' href='#util.smartptr.shared.cast-1.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.cast-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4307'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cast-2.sentence-1' class='sentence'><i >Returns</i>: <span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><i >R</i>, <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>element_type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
</span>
where <span class='texttt'><i >R</i></span> is <span class='texttt'>r</span> for the first overload, and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span> for the second<a class='hidden_link' href='#util.smartptr.shared.cast-2.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.cast-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4315'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cast-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.cast-note-1'>1</a></i>:&ensp;<div id='util.smartptr.shared.cast-3.sentence-1' class='sentence'>The seemingly equivalent expression
<span class='texttt'>shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
will eventually result in undefined behavior, attempting to delete the
same object twice<a class='hidden_link' href='#util.smartptr.shared.cast-3.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,dynamic_pointer_cast'><div id='lib:dynamic_pointer_cast,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:dynamic_pointer_cast,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> dynamic_pointer_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> dynamic_pointer_cast<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.cast-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4333'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cast-4.sentence-1' class='sentence'><i >Mandates</i>: The expression <span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>U<span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>nullptr</span><span class='parenthesis'>)</span></span> is well-formed<a class='hidden_link' href='#util.smartptr.shared.cast-4.sentence-1'>.</a></div> <div id='util.smartptr.shared.cast-4.sentence-2' class='sentence'>The expression <span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>element_<span class='shy'></span>type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> is well-formed<a class='hidden_link' href='#util.smartptr.shared.cast-4.sentence-2'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.cast-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4338'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cast-5.sentence-1' class='sentence'><i >Preconditions</i>: The expression <span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>element_<span class='shy'></span>type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> has well-defined behavior<a class='hidden_link' href='#util.smartptr.shared.cast-5.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.cast-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4342'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cast-6.sentence-1' class='sentence'><i >Returns</i>: <ul class='itemize'><li id='util.smartptr.shared.cast-6.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.cast-6.1'>(6.1)</a></div><div class='texpara'><div id='util.smartptr.shared.cast-6.1.sentence-1' class='sentence'>When <span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>element_<span class='shy'></span>type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
  returns a non-null value <span class='texttt'>p</span>,
  <span class='texttt'>shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><i >R</i>, p<span class='parenthesis'>)</span></span>,
  where <span class='texttt'><i >R</i></span> is <span class='texttt'>r</span> for the first overload, and
  <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span> for the second<a class='hidden_link' href='#util.smartptr.shared.cast-6.1.sentence-1'>.</a></div></div></li><li id='util.smartptr.shared.cast-6.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.shared.cast-6.2'>(6.2)</a></div><div class='texpara'><div id='util.smartptr.shared.cast-6.2.sentence-1' class='sentence'>Otherwise, <span class='texttt'>shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.shared.cast-6.2.sentence-1'>.</a></div></div></li></ul></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.cast-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4353'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cast-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.cast-note-2'>2</a></i>:&ensp;<div id='util.smartptr.shared.cast-7.sentence-1' class='sentence'>The seemingly equivalent expression
<span class='texttt'>shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>dynamic_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> will eventually result in
undefined behavior, attempting to delete the same object twice<a class='hidden_link' href='#util.smartptr.shared.cast-7.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,const_pointer_cast'><div id='lib:const_pointer_cast,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:const_pointer_cast,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> const_pointer_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> const_pointer_cast<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.cast-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4370'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cast-8.sentence-1' class='sentence'><i >Mandates</i>: The expression <span class='texttt'><span class='keyword'>const_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>U<span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>nullptr</span><span class='parenthesis'>)</span></span> is well-formed<a class='hidden_link' href='#util.smartptr.shared.cast-8.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.cast-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4374'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cast-9.sentence-1' class='sentence'><i >Returns</i>: <span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><i >R</i>, <span class='keyword'>const_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>element_type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
</span>
where <span class='texttt'><i >R</i></span> is <span class='texttt'>r</span> for the first overload, and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span> for the second<a class='hidden_link' href='#util.smartptr.shared.cast-9.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.cast-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4382'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cast-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.cast-note-3'>3</a></i>:&ensp;<div id='util.smartptr.shared.cast-10.sentence-1' class='sentence'>The seemingly equivalent expression
<span class='texttt'>shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> will eventually result in
undefined behavior, attempting to delete the same object twice<a class='hidden_link' href='#util.smartptr.shared.cast-10.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,reinterpret_pointer_cast'><div id='lib:reinterpret_pointer_cast,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reinterpret_pointer_cast,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> reinterpret_pointer_cast<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> reinterpret_pointer_cast<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.cast-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4399'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cast-11.sentence-1' class='sentence'><i >Mandates</i>: The expression <span class='texttt'><span class='keyword'>reinterpret_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>U<span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>nullptr</span><span class='parenthesis'>)</span></span> is well-formed<a class='hidden_link' href='#util.smartptr.shared.cast-11.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.shared.cast-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4403'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cast-12.sentence-1' class='sentence'><i >Returns</i>: <span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><i >R</i>, <span class='keyword'>reinterpret_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>element_type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
</span>
where <span class='texttt'><i >R</i></span> is <span class='texttt'>r</span> for the first overload, and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span> for the second<a class='hidden_link' href='#util.smartptr.shared.cast-12.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.shared.cast-13'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.cast-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4411'>#</a></div><div class='texpara'><div id='util.smartptr.shared.cast-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.shared.cast-note-4'>4</a></i>:&ensp;<div id='util.smartptr.shared.cast-13.sentence-1' class='sentence'>The seemingly equivalent expression
<span class='texttt'>shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>reinterpret_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> will eventually result in
undefined behavior, attempting to delete the same object twice<a class='hidden_link' href='#util.smartptr.shared.cast-13.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></div><div id='util.smartptr.getdeleter' class='section'><h4 ><a class='secnum' href='#util.smartptr.getdeleter' style='min-width:110pt'>20.3.2.2.11</a> <span class='texttt'>get_<span class='shy'></span>deleter</span> <a class='abbr_ref' href='util.smartptr.getdeleter'>[util.smartptr.getdeleter]</a></h4><div class='texpara'><div id='lib:shared_ptr,get_deleter'><div id='lib:get_deleter,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:get_deleter,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> D, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  D<span class='operator'>*</span> get_deleter<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.getdeleter-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.getdeleter-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4428'>#</a></div><div class='texpara'><div id='util.smartptr.getdeleter-1.sentence-1' class='sentence'><i >Returns</i>: If <span class='texttt'>p</span> owns a deleter <span class='texttt'>d</span> of type cv-unqualified
<span class='texttt'>D</span>, returns <span class='texttt'>addressof<span class='parenthesis'>(</span>d<span class='parenthesis'>)</span></span>; otherwise returns <span id=':nullptr'><span class='texttt'><span class='literal'>nullptr</span></span></span><a class='hidden_link' href='#util.smartptr.getdeleter-1.sentence-1'>.</a></div> <div id='util.smartptr.getdeleter-1.sentence-2' class='sentence'>The returned
pointer remains valid as long as there exists a <span class='texttt'>shared_<span class='shy'></span>ptr</span> instance
that owns <span class='texttt'>d</span><a class='hidden_link' href='#util.smartptr.getdeleter-1.sentence-2'>.</a></div> <div id='util.smartptr.getdeleter-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.getdeleter-note-1'>1</a></i>:&ensp;<div id='util.smartptr.getdeleter-1.sentence-3' class='sentence'>It is unspecified whether the pointer
remains valid longer than that<a class='hidden_link' href='#util.smartptr.getdeleter-1.sentence-3'>.</a></div> <div id='util.smartptr.getdeleter-1.sentence-4' class='sentence'>This can happen if the implementation doesn't destroy
the deleter until all <span class='texttt'>weak_<span class='shy'></span>ptr</span> instances that share ownership with
<span class='texttt'>p</span> have been destroyed<a class='hidden_link' href='#util.smartptr.getdeleter-1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></div><div id='util.smartptr.shared.io' class='section'><h4 ><a class='secnum' href='#util.smartptr.shared.io' style='min-width:110pt'>20.3.2.2.12</a> I/O <a class='abbr_ref' href='util.smartptr.shared.io'>[util.smartptr.shared.io]</a></h4><div class='texpara'><div id='lib:shared_ptr,operator<<'><div id='lib:operator<<,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator%3c%3c,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E, <span class='keyword'>class</span> T, <span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
  basic_ostream<span class='anglebracket'>&lt;</span>E, T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span>basic_ostream<span class='anglebracket'>&lt;</span>E, T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> os, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> p<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.shared.io-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.io-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4452'>#</a></div><div class='texpara'><div id='util.smartptr.shared.io-1.sentence-1' class='sentence'><i >Effects</i>: As if by: <span class='texttt'>os <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> p<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;</span></div></div></div></div><div class='para' id='util.smartptr.shared.io-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.shared.io-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4456'>#</a></div><div class='texpara'><div id='util.smartptr.shared.io-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>os</span><a class='hidden_link' href='#util.smartptr.shared.io-2.sentence-1'>.</a></div></div></div></div></div></div><div id='util.smartptr.weak' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak' style='min-width:95pt'>20.3.2.3</a> Class template <span class='texttt'>weak_<span class='shy'></span>ptr</span> <a class='abbr_ref' href='util.smartptr.weak'>[util.smartptr.weak]</a></h4><div id='util.smartptr.weak.general' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.general' style='min-width:110pt'>20.3.2.3.1</a> General <a class='abbr_ref' href='util.smartptr.weak.general'>[util.smartptr.weak.general]</a></h4><div class='para' id='util.smartptr.weak.general-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4465'>#</a></div><div class='texpara'><div id='util.smartptr.weak.general-1.sentence-1' class='sentence'><a class='index' id='lib:weak_ptr_'></a>The <span class='texttt'>weak_<span class='shy'></span>ptr</span> class template stores a weak reference to an object
that is already managed by a <span class='texttt'>shared_<span class='shy'></span>ptr</span><a class='hidden_link' href='#util.smartptr.weak.general-1.sentence-1'>.</a></div> <div id='util.smartptr.weak.general-1.sentence-2' class='sentence'>To access the object, a
<span class='texttt'>weak_<span class='shy'></span>ptr</span> can be converted to a <span class='texttt'>shared_<span class='shy'></span>ptr</span> using the member
function <span class='texttt'>lock</span><a class='hidden_link' href='#util.smartptr.weak.general-1.sentence-2'>.</a></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> weak_ptr <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> element_type <span class='operator'>=</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;

    <span class='comment'>// <a href='#util.smartptr.weak.const' title='20.3.2.3.2&emsp;Constructors'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>weak.<span class='shy'></span>const]</a>, constructors</span>
    <span class='keyword'>constexpr</span> weak_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      weak_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    weak_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      weak_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    weak_ptr<span class='parenthesis'>(</span>weak_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      weak_ptr<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// <a href='#util.smartptr.weak.dest' title='20.3.2.3.3&emsp;Destructor'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>weak.<span class='shy'></span>dest]</a>, destructor</span>
    <span class='operator'>~</span>weak_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    <span class='comment'>// <a href='#util.smartptr.weak.assign' title='20.3.2.3.4&emsp;Assignment'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>weak.<span class='shy'></span>assign]</a>, assignment</span>
    weak_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      weak_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      weak_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    weak_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>weak_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span>
      weak_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// <a href='#util.smartptr.weak.mod' title='20.3.2.3.5&emsp;Modifiers'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>weak.<span class='shy'></span>mod]</a>, modifiers</span>
    <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>weak_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> reset<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// <a href='#util.smartptr.weak.obs' title='20.3.2.3.6&emsp;Observers'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>weak.<span class='shy'></span>obs]</a>, observers</span>
    <span class='keyword'>long</span> use_count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> expired<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> lock<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
      <span class='keyword'>bool</span> owner_before<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
      <span class='keyword'>bool</span> owner_before<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    weak_ptr<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>
</span></div></div><div class='para' id='util.smartptr.weak.general-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4521'>#</a></div><div class='texpara'><div id='util.smartptr.weak.general-2.sentence-1' class='sentence'>Specializations of <span class='texttt'>weak_<span class='shy'></span>ptr</span> shall be <i >Cpp17CopyConstructible</i> and
<i >Cpp17CopyAssignable</i>, allowing their use in standard
containers<a class='hidden_link' href='#util.smartptr.weak.general-2.sentence-1'>.</a></div> <div id='util.smartptr.weak.general-2.sentence-2' class='sentence'>The template parameter <span class='texttt'>T</span> of <span class='texttt'>weak_<span class='shy'></span>ptr</span> may be an
incomplete type<a class='hidden_link' href='#util.smartptr.weak.general-2.sentence-2'>.</a></div></div></div></div><div id='util.smartptr.weak.const' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.const' style='min-width:110pt'>20.3.2.3.2</a> Constructors <a class='abbr_ref' href='util.smartptr.weak.const'>[util.smartptr.weak.const]</a></h4><div class='texpara'><div id='lib:weak_ptr,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:weak_ptr,constructor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> weak_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='util.smartptr.weak.const-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4535'>#</a></div><div class='texpara'><div id='util.smartptr.weak.const-1.sentence-1' class='sentence'><i >Effects</i>: Constructs an empty <span class='texttt'>weak_<span class='shy'></span>ptr</span> object that stores a null pointer value<a class='hidden_link' href='#util.smartptr.weak.const-1.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.weak.const-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4539'>#</a></div><div class='texpara'><div id='util.smartptr.weak.const-2.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span></span><a class='hidden_link' href='#util.smartptr.weak.const-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:weak_ptr,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:weak_ptr,constructor_'>🔗</a></div><code class='itemdeclcode'>weak_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> weak_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> weak_ptr<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='util.smartptr.weak.const-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4552'>#</a></div><div class='texpara'><div id='util.smartptr.weak.const-3.sentence-1' class='sentence'><i >Constraints</i>: For the second and third constructors, <span class='texttt'>Y<span class='operator'>*</span></span> is compatible with <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#util.smartptr.weak.const-3.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.weak.const-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4556'>#</a></div><div class='texpara'><div id='util.smartptr.weak.const-4.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>r</span> is empty, constructs
an empty <span class='texttt'>weak_<span class='shy'></span>ptr</span> object that stores a null pointer value;
otherwise, constructs
a <span class='texttt'>weak_<span class='shy'></span>ptr</span> object that shares ownership
with <span class='texttt'>r</span> and stores a copy of the pointer stored in <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.weak.const-4.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.weak.const-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4564'>#</a></div><div class='texpara'><div id='util.smartptr.weak.const-5.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> r<span class='operator'>.</span>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.weak.const-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:weak_ptr,constructor__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:weak_ptr,constructor__'>🔗</a></div><code class='itemdeclcode'>weak_ptr<span class='parenthesis'>(</span>weak_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> weak_ptr<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='util.smartptr.weak.const-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4576'>#</a></div><div class='texpara'><div id='util.smartptr.weak.const-6.sentence-1' class='sentence'><i >Constraints</i>: For the second constructor, <span class='texttt'>Y<span class='operator'>*</span></span> is compatible with <span class='texttt'>T<span class='operator'>*</span></span><a class='hidden_link' href='#util.smartptr.weak.const-6.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.weak.const-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4580'>#</a></div><div class='texpara'><div id='util.smartptr.weak.const-7.sentence-1' class='sentence'><i >Effects</i>: Move constructs a <span class='texttt'>weak_<span class='shy'></span>ptr</span> instance from <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.weak.const-7.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.weak.const-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.const-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4584'>#</a></div><div class='texpara'><div id='util.smartptr.weak.const-8.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> contains the old value of <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.weak.const-8.sentence-1'>.</a></div> <div id='util.smartptr.weak.const-8.sentence-2' class='sentence'><span class='texttt'>r</span> is empty, stores a null pointer value, and <span class='texttt'>r<span class='operator'>.</span>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span></span><a class='hidden_link' href='#util.smartptr.weak.const-8.sentence-2'>.</a></div></div></div></div></div><div id='util.smartptr.weak.dest' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.dest' style='min-width:110pt'>20.3.2.3.3</a> Destructor <a class='abbr_ref' href='util.smartptr.weak.dest'>[util.smartptr.weak.dest]</a></h4><div class='texpara'><div id='lib:weak_ptr,destructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:weak_ptr,destructor'>🔗</a></div><code class='itemdeclcode'><span class='operator'>~</span>weak_ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='util.smartptr.weak.dest-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.dest-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4598'>#</a></div><div class='texpara'><div id='util.smartptr.weak.dest-1.sentence-1' class='sentence'><i >Effects</i>: Destroys this <span class='texttt'>weak_<span class='shy'></span>ptr</span> object but has no
effect on the object its stored pointer points to<a class='hidden_link' href='#util.smartptr.weak.dest-1.sentence-1'>.</a></div></div></div></div></div><div id='util.smartptr.weak.assign' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.assign' style='min-width:110pt'>20.3.2.3.4</a> Assignment <a class='abbr_ref' href='util.smartptr.weak.assign'>[util.smartptr.weak.assign]</a></h4><div class='texpara'><div id='lib:weak_ptr,operator='><div id='lib:operator=,weak_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,weak_ptr'>🔗</a></div><code class='itemdeclcode'>weak_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> weak_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> weak_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.weak.assign-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.assign-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4614'>#</a></div><div class='texpara'><div id='util.smartptr.weak.assign-1.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>weak_<span class='shy'></span>ptr<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.weak.assign-1.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.weak.assign-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.assign-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4618'>#</a></div><div class='texpara'><div id='util.smartptr.weak.assign-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#util.smartptr.weak.assign-2.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.weak.assign-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.assign-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4622'>#</a></div><div class='texpara'><div id='util.smartptr.weak.assign-3.sentence-1' class='sentence'><i >Remarks</i>: The implementation may meet the effects (and the
implied guarantees) via different means, without creating a temporary object<a class='hidden_link' href='#util.smartptr.weak.assign-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:weak_ptr,operator=_'><div id='lib:operator=,weak_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,weak_ptr_'>🔗</a></div><code class='itemdeclcode'>weak_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>weak_ptr<span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> weak_ptr<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.weak.assign-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.assign-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4635'>#</a></div><div class='texpara'><div id='util.smartptr.weak.assign-4.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>weak_<span class='shy'></span>ptr<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.weak.assign-4.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.weak.assign-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.assign-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4639'>#</a></div><div class='texpara'><div id='util.smartptr.weak.assign-5.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#util.smartptr.weak.assign-5.sentence-1'>.</a></div></div></div></div></div><div id='util.smartptr.weak.mod' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.mod' style='min-width:110pt'>20.3.2.3.5</a> Modifiers <a class='abbr_ref' href='util.smartptr.weak.mod'>[util.smartptr.weak.mod]</a></h4><div class='texpara'><div id='lib:weak_ptr,swap'><div id='lib:swap,weak_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:swap,weak_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> swap<span class='parenthesis'>(</span>weak_ptr<span class='operator'>&amp;</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.weak.mod-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.mod-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4651'>#</a></div><div class='texpara'><div id='util.smartptr.weak.mod-1.sentence-1' class='sentence'><i >Effects</i>: Exchanges the contents of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> and <span class='texttt'>r</span><a class='hidden_link' href='#util.smartptr.weak.mod-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:weak_ptr,reset'><div id='lib:reset,weak_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:reset,weak_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> reset<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.weak.mod-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.mod-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4662'>#</a></div><div class='texpara'><div id='util.smartptr.weak.mod-2.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>weak_<span class='shy'></span>ptr<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>swap<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.weak.mod-2.sentence-1'>.</a></div></div></div></div></div><div id='util.smartptr.weak.obs' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.obs' style='min-width:110pt'>20.3.2.3.6</a> Observers <a class='abbr_ref' href='util.smartptr.weak.obs'>[util.smartptr.weak.obs]</a></h4><div class='texpara'><div id='lib:weak_ptr,use_count'><div id='lib:use_count,weak_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:use_count,weak_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>long</span> use_count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.weak.obs-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.obs-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4674'>#</a></div><div class='texpara'><div id='util.smartptr.weak.obs-1.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='literal'>0</span></span> if <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> is empty;
otherwise, the number of <span class='texttt'>shared_<span class='shy'></span>ptr</span> instances
that share ownership with <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#util.smartptr.weak.obs-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:weak_ptr,expired'><div id='lib:expired,weak_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:expired,weak_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> expired<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.weak.obs-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.obs-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4687'>#</a></div><div class='texpara'><div id='util.smartptr.weak.obs-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span></span><a class='hidden_link' href='#util.smartptr.weak.obs-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:weak_ptr,lock'><div id='lib:lock,weak_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:lock,weak_ptr'>🔗</a></div><code class='itemdeclcode'>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> lock<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.weak.obs-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.obs-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4698'>#</a></div><div class='texpara'><div id='util.smartptr.weak.obs-3.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>expired<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>?</span>&nbsp;shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span>&nbsp;shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span>, executed atomically<a class='hidden_link' href='#util.smartptr.weak.obs-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:weak_ptr,owner_before'><div id='lib:owner_before,weak_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:owner_before,weak_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>bool</span> owner_before<span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>bool</span> owner_before<span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.weak.obs-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.obs-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4710'>#</a></div><div class='texpara'><div id='util.smartptr.weak.obs-4.sentence-1' class='sentence'><i >Returns</i>: An unspecified value such that
<ul class='itemize'><li id='util.smartptr.weak.obs-4.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.weak.obs-4.1'>(4.1)</a></div><span class='texttt'>x<span class='operator'>.</span>owner_<span class='shy'></span>before<span class='parenthesis'>(</span>y<span class='parenthesis'>)</span></span> defines a strict weak ordering as defined in <a href='alg.sorting' title='27.8&emsp;Sorting and related operations'>[alg.<span class='shy'></span>sorting]</a>;</li><li id='util.smartptr.weak.obs-4.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.weak.obs-4.2'>(4.2)</a></div>under the equivalence relation defined by <span class='texttt'>owner_<span class='shy'></span>before</span>,
<span class='texttt'><span class='operator'>!</span>a<span class='operator'>.</span>owner_<span class='shy'></span>before<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>!</span>b<span class='operator'>.</span>owner_<span class='shy'></span>before<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span></span>, two <span class='texttt'>shared_<span class='shy'></span>ptr</span> or
<span class='texttt'>weak_<span class='shy'></span>ptr</span> instances are equivalent if and only if they share ownership or are
both empty<a class='hidden_link' href='#util.smartptr.weak.obs-4.sentence-1'>.</a></li></ul></div></div></div></div></div><div id='util.smartptr.weak.spec' class='section'><h4 ><a class='secnum' href='#util.smartptr.weak.spec' style='min-width:110pt'>20.3.2.3.7</a> Specialized algorithms <a class='abbr_ref' href='util.smartptr.weak.spec'>[util.smartptr.weak.spec]</a></h4><div class='texpara'><div id='lib:weak_ptr,swap_'><div id='lib:swap,weak_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:swap,weak_ptr_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> swap<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.weak.spec-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.weak.spec-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4733'>#</a></div><div class='texpara'><div id='util.smartptr.weak.spec-1.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>a<span class='operator'>.</span>swap<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.weak.spec-1.sentence-1'>.</a></div></div></div></div></div></div><div id='util.smartptr.ownerless' class='section'><h4 ><a class='secnum' href='#util.smartptr.ownerless' style='min-width:95pt'>20.3.2.4</a> Class template <span class='texttt'>owner_<span class='shy'></span>less</span> <a class='abbr_ref' href='util.smartptr.ownerless'>[util.smartptr.ownerless]</a></h4><div class='para' id='util.smartptr.ownerless-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.ownerless-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4740'>#</a></div><div class='texpara'><div id='util.smartptr.ownerless-1.sentence-1' class='sentence'>The class template <span class='texttt'>owner_<span class='shy'></span>less</span> allows ownership-based mixed comparisons of shared
and weak pointers<a class='hidden_link' href='#util.smartptr.ownerless-1.sentence-1'>.</a></div></div><div class='texpara'><span id='lib:owner_less'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:owner_less'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T <span class='operator'>=</span> <span class='keyword'>void</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> owner_less;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> owner_less<span class='anglebracket'>&lt;</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> owner_less<span class='anglebracket'>&lt;</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> owner_less<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
      <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
      <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
      <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> shared_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
      <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> weak_ptr<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>using</span> is_transparent <span class='operator'>=</span> <i ><span class='texttt'>unspecified</span></i>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span><a class='index' id='lib:operator(),owner_less'></a><a class='index' id='lib:owner_less,operator()'></a></div></div><div class='para' id='util.smartptr.ownerless-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.ownerless-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4777'>#</a></div><div class='texpara'><div id='util.smartptr.ownerless-2.sentence-1' class='sentence'><span class='texttt'><span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>x, y<span class='parenthesis'>)</span></span> returns <span class='texttt'>x<span class='operator'>.</span>owner_<span class='shy'></span>before<span class='parenthesis'>(</span>y<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.ownerless-2.sentence-1'>.</a></div> <div id='util.smartptr.ownerless-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.ownerless-note-1'>1</a></i>:&ensp;<div id='util.smartptr.ownerless-2.sentence-2' class='sentence'>Note that
<ul class='itemize'><li id='util.smartptr.ownerless-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#util.smartptr.ownerless-2.1'>(2.1)</a></div><span class='texttt'><span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> defines a strict weak ordering as defined in <a href='alg.sorting' title='27.8&emsp;Sorting and related operations'>[alg.<span class='shy'></span>sorting]</a>;</li><li id='util.smartptr.ownerless-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#util.smartptr.ownerless-2.2'>(2.2)</a></div>two <span class='texttt'>shared_<span class='shy'></span>ptr</span> or <span class='texttt'>weak_<span class='shy'></span>ptr</span> instances are equivalent
under the equivalence relation defined by <span class='texttt'><span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
<span class='texttt'><span class='operator'>!</span><span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>a, b<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>!</span><span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>b, a<span class='parenthesis'>)</span></span>,
if and only if they share ownership or are both empty<a class='hidden_link' href='#util.smartptr.ownerless-2.sentence-2'>.</a></li></ul></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='util.smartptr.enab' class='section'><h4 ><a class='secnum' href='#util.smartptr.enab' style='min-width:95pt'>20.3.2.5</a> Class template <span class='texttt'>enable_<span class='shy'></span>shared_<span class='shy'></span>from_<span class='shy'></span>this</span> <a class='abbr_ref' href='util.smartptr.enab'>[util.smartptr.enab]</a></h4><div class='para' id='util.smartptr.enab-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4794'>#</a></div><div class='texpara'><div id='util.smartptr.enab-1.sentence-1' class='sentence'><a class='index' id='lib:enable_shared_from_this'></a>A class <span class='texttt'>T</span> can inherit from <span class='texttt'>enable_<span class='shy'></span>shared_<span class='shy'></span>from_<span class='shy'></span>this<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
to inherit the <span class='texttt'>shared_<span class='shy'></span>from_<span class='shy'></span>this</span> member functions that obtain
a <span class='texttt'>shared_<span class='shy'></span>ptr</span> instance pointing to <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#util.smartptr.enab-1.sentence-1'>.</a></div></div></div><div class='para' id='util.smartptr.enab-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4800'>#</a></div><div class='texpara'><div id='util.smartptr.enab-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#util.smartptr.enab-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> X<span class='operator'>:</span> <span class='keyword'>public</span> enable_shared_from_this<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  shared_ptr<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span> p<span class='parenthesis'>(</span><span class='keyword'>new</span> X<span class='parenthesis'>)</span>;
  shared_ptr<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>shared_from_this<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  assert<span class='parenthesis'>(</span>p <span class='operator'>=</span><span class='operator'>=</span> q<span class='parenthesis'>)</span>;
  assert<span class='parenthesis'>(</span><span class='operator'>!</span>p<span class='operator'>.</span>owner_before<span class='parenthesis'>(</span>q<span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>!</span>q<span class='operator'>.</span>owner_before<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='parenthesis'>)</span>; <span class='comment'>// p and q share ownership</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> enable_shared_from_this <span class='curlybracket'>{</span>
  <span class='keyword'>protected</span><span class='operator'>:</span>
    <span class='keyword'>constexpr</span> enable_shared_from_this<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    enable_shared_from_this<span class='parenthesis'>(</span><span class='keyword'>const</span> enable_shared_from_this<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    enable_shared_from_this<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> enable_shared_from_this<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='operator'>~</span>enable_shared_from_this<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

  <span class='keyword'>public</span><span class='operator'>:</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> shared_from_this<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    shared_ptr<span class='anglebracket'>&lt;</span>T <span class='keyword'>const</span><span class='anglebracket'>&gt;</span> shared_from_this<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> weak_from_this<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    weak_ptr<span class='anglebracket'>&lt;</span>T <span class='keyword'>const</span><span class='anglebracket'>&gt;</span> weak_from_this<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    <span class='keyword'>mutable</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> weak_this;  <span class='comment'>// <i >exposition only</i></span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div></div><div class='para' id='util.smartptr.enab-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4835'>#</a></div><div class='texpara'><div id='util.smartptr.enab-3.sentence-1' class='sentence'>The template parameter <span class='texttt'>T</span> of <span class='texttt'>enable_<span class='shy'></span>shared_<span class='shy'></span>from_<span class='shy'></span>this</span>
may be an incomplete type<a class='hidden_link' href='#util.smartptr.enab-3.sentence-1'>.</a></div></div></div><div class='texpara'><div id='lib:enable_shared_from_this,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:enable_shared_from_this,constructor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> enable_shared_from_this<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
enable_shared_from_this<span class='parenthesis'>(</span><span class='keyword'>const</span> enable_shared_from_this<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='util.smartptr.enab-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4846'>#</a></div><div class='texpara'><div id='util.smartptr.enab-4.sentence-1' class='sentence'><i >Effects</i>: Value-initializes <span class='texttt'>weak_<span class='shy'></span>this</span><a class='hidden_link' href='#util.smartptr.enab-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:enable_shared_from_this,operator='><div id='lib:operator=,enable_shared_from_this'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,enable_shared_from_this'>🔗</a></div><code class='itemdeclcode'>enable_shared_from_this<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> enable_shared_from_this<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.enab-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4857'>#</a></div><div class='texpara'><div id='util.smartptr.enab-5.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#util.smartptr.enab-5.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.enab-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4861'>#</a></div><div class='texpara'><div id='util.smartptr.enab-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.enab-note-1'>1</a></i>:&ensp;<div id='util.smartptr.enab-6.sentence-1' class='sentence'><span class='texttt'>weak_<span class='shy'></span>this</span> is not changed<a class='hidden_link' href='#util.smartptr.enab-6.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:enable_shared_from_this,shared_from_this'><div id='lib:shared_from_this,enable_shared_from_this'><div id='lib:shared_ptr_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:shared_ptr_'>🔗</a></div><code class='itemdeclcode'>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>       shared_from_this<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
shared_ptr<span class='anglebracket'>&lt;</span>T <span class='keyword'>const</span><span class='anglebracket'>&gt;</span> shared_from_this<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div></div></div><div class='para' id='util.smartptr.enab-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4875'>#</a></div><div class='texpara'><div id='util.smartptr.enab-7.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>weak_<span class='shy'></span>this<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.enab-7.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:enable_shared_from_this,weak_from_this'><div id='lib:weak_from_this,enable_shared_from_this'><div id='lib:weak_ptr__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:weak_ptr__'>🔗</a></div><code class='itemdeclcode'>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>       weak_from_this<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
weak_ptr<span class='anglebracket'>&lt;</span>T <span class='keyword'>const</span><span class='anglebracket'>&gt;</span> weak_from_this<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div><div class='para' id='util.smartptr.enab-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.enab-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4888'>#</a></div><div class='texpara'><div id='util.smartptr.enab-8.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>weak_<span class='shy'></span>this</span><a class='hidden_link' href='#util.smartptr.enab-8.sentence-1'>.</a></div></div></div></div></div></div><div id='util.smartptr.hash' class='section'><h3 ><a class='secnum' href='#util.smartptr.hash' style='min-width:80pt'>20.3.3</a> Smart pointer hash support <a class='abbr_ref' href='util.smartptr.hash'>[util.smartptr.hash]</a></h3><div class='texpara'><div id='lib:unique_ptr,hash'><div id='lib:hash,unique_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:hash,unique_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> hash<span class='anglebracket'>&lt;</span>unique_ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.hash-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.hash-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4901'>#</a></div><div class='texpara'><div id='util.smartptr.hash-1.sentence-1' class='sentence'>Letting <span class='texttt'>UP</span> be <span class='texttt'>unique_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T, D<span class='anglebracket'>&gt;</span></span>,
the specialization <span class='texttt'>hash<span class='anglebracket'>&lt;</span>UP<span class='anglebracket'>&gt;</span></span> is enabled (<a href='unord.hash' title='22.10.19&emsp;Class template hash'>[unord.<span class='shy'></span>hash]</a>)
if and only if <span class='texttt'>hash<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> UP<span class='operator'>&#x200b;::&#x200b;</span>pointer<span class='anglebracket'>&gt;</span></span> is enabled<a class='hidden_link' href='#util.smartptr.hash-1.sentence-1'>.</a></div> <div id='util.smartptr.hash-1.sentence-2' class='sentence'>When enabled, for an object <span class='texttt'>p</span> of type <span class='texttt'>UP</span>,
<span class='texttt'>hash<span class='anglebracket'>&lt;</span>UP<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> evaluates to
the same value as <span class='texttt'>hash<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> UP<span class='operator'>&#x200b;::&#x200b;</span>pointer<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>p<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.hash-1.sentence-2'>.</a></div> <div id='util.smartptr.hash-1.sentence-3' class='sentence'>The member functions are not guaranteed to be <span id=':noexcept'><span class='texttt'><span class='keyword'>noexcept</span></span></span><a class='hidden_link' href='#util.smartptr.hash-1.sentence-3'>.</a></div></div></div></div><div class='texpara'><div id='lib:shared_ptr,hash'><div id='lib:hash,shared_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:hash,shared_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> hash<span class='anglebracket'>&lt;</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.hash-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.hash-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4917'>#</a></div><div class='texpara'><div id='util.smartptr.hash-2.sentence-1' class='sentence'>For an object <span class='texttt'>p</span> of type <span class='texttt'>shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>,
<span class='texttt'>hash<span class='anglebracket'>&lt;</span>shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> evaluates to
the same value as <span class='texttt'>hash<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>element_<span class='shy'></span>type<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>p<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.hash-2.sentence-1'>.</a></div></div></div></div><div class='texpara'></div></div><div id='smartptr.adapt' class='section'><h3 ><a class='secnum' href='#smartptr.adapt' style='min-width:80pt'>20.3.4</a> Smart pointer adaptors <a class='abbr_ref' href='smartptr.adapt'>[smartptr.adapt]</a></h3><div id='out.ptr.t' class='section'><h4 ><a class='secnum' href='#out.ptr.t' style='min-width:95pt'>20.3.4.1</a> Class template <span class='texttt'>out_<span class='shy'></span>ptr_<span class='shy'></span>t</span> <a class='abbr_ref' href='out.ptr.t'>[out.ptr.t]</a></h4><div class='para' id='out.ptr.t-1'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4928'>#</a></div><div class='texpara'><div id='out.ptr.t-1.sentence-1' class='sentence'><span class='texttt'>out_<span class='shy'></span>ptr_<span class='shy'></span>t</span> is a class template used to adapt types
such as smart pointers (<a href='#smartptr' title='20.3&emsp;Smart pointers'>[smartptr]</a>)
for functions that use output pointer parameters<a class='hidden_link' href='#out.ptr.t-1.sentence-1'>.</a></div></div></div><div class='para' id='out.ptr.t-2'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4933'>#</a></div><div class='texpara'><div id='out.ptr.t-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#out.ptr.t-example-1'>1</a></i>:&ensp;<div id='out.ptr.t-2.sentence-1' class='sentence'><span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>memory<span class='anglebracket'>&gt;</span>
<span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>cstdio<span class='anglebracket'>&gt;</span>

<span class='keyword'>int</span> fopen_s<span class='parenthesis'>(</span>std<span class='operator'>::</span>FILE<span class='operator'>*</span><span class='operator'>*</span> f, <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> name, <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> mode<span class='parenthesis'>)</span>;

<span class='keyword'>struct</span> fclose_deleter <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>FILE<span class='operator'>*</span> f<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='curlybracket'>{</span>
    std<span class='operator'>::</span>fclose<span class='parenthesis'>(</span>f<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>char</span><span class='operator'>*</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> file_name <span class='operator'>=</span> <span class='literal'>"ow.o"</span>;
  std<span class='operator'>::</span>unique_ptr<span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>FILE, fclose_deleter<span class='anglebracket'>&gt;</span> file_ptr;
  <span class='keyword'>int</span> err <span class='operator'>=</span> fopen_s<span class='parenthesis'>(</span>std<span class='operator'>::</span>out_ptr<span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>FILE<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>file_ptr<span class='parenthesis'>)</span>, file_name, <span class='literal'>"r+b"</span><span class='parenthesis'>)</span>;
  <span class='keyword'>if</span> <span class='parenthesis'>(</span>err <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span>
    <span class='keyword'>return</span> <span class='literal'>1</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>*file_<span class='shy'></span>ptr</span> is valid</span>
  <span class='keyword'>return</span> <span class='literal'>0</span>;
<span class='curlybracket'>}</span>
</span>
<span class='texttt'>unique_<span class='shy'></span>ptr</span> can be used with <span class='texttt'>out_<span class='shy'></span>ptr</span>
to be passed into an output pointer-style function,
without needing to hold onto an intermediate pointer value and
manually delete it on error or failure<a class='hidden_link' href='#out.ptr.t-2.sentence-1'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'><span id='lib:out_ptr_t'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:out_ptr_t'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Smart, <span class='keyword'>class</span> Pointer, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> out_ptr_t <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>explicit</span> out_ptr_t<span class='parenthesis'>(</span>Smart<span class='operator'>&amp;</span>, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    out_ptr_t<span class='parenthesis'>(</span><span class='keyword'>const</span> out_ptr_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='operator'>~</span>out_ptr_t<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    <span class='keyword'>operator</span> Pointer<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <span class='keyword'>void</span><span class='operator'>*</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    Smart<span class='operator'>&amp;</span> s;                   <span class='comment'>// <i >exposition only</i></span>
    tuple<span class='anglebracket'>&lt;</span>Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> a;           <span class='comment'>// <i >exposition only</i></span>
    Pointer p;                  <span class='comment'>// <i >exposition only</i></span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div></div><div class='para' id='out.ptr.t-3'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4985'>#</a></div><div class='texpara'><div id='out.ptr.t-3.sentence-1' class='sentence'><span class='texttt'>Pointer</span> shall meet the <i >Cpp17NullablePointer</i> requirements<a class='hidden_link' href='#out.ptr.t-3.sentence-1'>.</a></div> <div id='out.ptr.t-3.sentence-2' class='sentence'>If <span class='texttt'>Smart</span> is a specialization of <span class='texttt'>shared_<span class='shy'></span>ptr</span> and
<span class='texttt'><span class='keyword'>sizeof</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>(</span>Args<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span></span>,
the program is ill-formed<a class='hidden_link' href='#out.ptr.t-3.sentence-2'>.</a></div> <div id='out.ptr.t-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#out.ptr.t-note-1'>1</a></i>:&ensp;<div id='out.ptr.t-3.sentence-3' class='sentence'>It is typically a user error to reset a <span class='texttt'>shared_<span class='shy'></span>ptr</span>
without specifying a deleter,
as <span class='texttt'>shared_<span class='shy'></span>ptr</span> will replace a custom deleter upon usage of <span class='texttt'>reset</span>,
as specified in <a href='#util.smartptr.shared.mod' title='20.3.2.2.5&emsp;Modifiers'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared.<span class='shy'></span>mod]</a><a class='hidden_link' href='#out.ptr.t-3.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='out.ptr.t-4'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L4997'>#</a></div><div class='texpara'><div id='out.ptr.t-4.sentence-1' class='sentence'>Program-defined specializations of <span class='texttt'>out_<span class='shy'></span>ptr_<span class='shy'></span>t</span>
that depend on at least one program-defined type
need not meet the requirements for the primary template<a class='hidden_link' href='#out.ptr.t-4.sentence-1'>.</a></div></div></div><div class='para' id='out.ptr.t-5'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5002'>#</a></div><div class='texpara'><div id='out.ptr.t-5.sentence-1' class='sentence'>Evaluations of the conversion functions
on the same object may conflict (<a href='intro.races' title='6.9.2.2&emsp;Data races'>[intro.<span class='shy'></span>races]</a>)<a class='hidden_link' href='#out.ptr.t-5.sentence-1'>.</a></div></div></div><div class='texpara'><div id='lib:out_ptr_t,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:out_ptr_t,constructor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>explicit</span> out_ptr_t<span class='parenthesis'>(</span>Smart<span class='operator'>&amp;</span> smart, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='out.ptr.t-6'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5012'>#</a></div><div class='texpara'><div id='out.ptr.t-6.sentence-1' class='sentence'><i >Effects</i>: Initializes <span class='texttt'>s</span> with <span class='texttt'>smart</span>,
<span class='texttt'>a</span> with <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span>, and
value-initializes <span class='texttt'>p</span><a class='hidden_link' href='#out.ptr.t-6.sentence-1'>.</a></div> <div id='out.ptr.t-6.sentence-2' class='sentence'>Then, equivalent to:
<ul class='itemize'><li id='out.ptr.t-6.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#out.ptr.t-6.1'>(6.1)</a></div><span class='codeblock'>s<span class='operator'>.</span>reset<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span>
if the expression <span class='texttt'>s<span class='operator'>.</span>reset<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is well-formed;</li><li id='out.ptr.t-6.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#out.ptr.t-6.2'>(6.2)</a></div>otherwise,
<span class='codeblock'>s <span class='operator'>=</span> Smart<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span>
if <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>Smart<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>;</li><li id='out.ptr.t-6.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#out.ptr.t-6.3'>(6.3)</a></div>otherwise, the program is ill-formed<a class='hidden_link' href='#out.ptr.t-6.sentence-2'>.</a></li></ul></div></div></div></div><div class='para nonNormativeOnly' id='out.ptr.t-7'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5036'>#</a></div><div class='texpara'><div id='out.ptr.t-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#out.ptr.t-note-2'>2</a></i>:&ensp;<div id='out.ptr.t-7.sentence-1' class='sentence'>The constructor is not <span class='texttt'><span class='keyword'>noexcept</span></span>
to allow for a variety of non-terminating and safe implementation strategies<a class='hidden_link' href='#out.ptr.t-7.sentence-1'>.</a></div> <div id='out.ptr.t-7.sentence-2' class='sentence'>For example, an implementation can allocate
a <span class='texttt'>shared_<span class='shy'></span>ptr</span>'s internal node in the constructor and
let implementation-defined exceptions escape safely<a class='hidden_link' href='#out.ptr.t-7.sentence-2'>.</a></div> <div id='out.ptr.t-7.sentence-3' class='sentence'>The destructor can then move the allocated control block in directly and
avoid any other exceptions<a class='hidden_link' href='#out.ptr.t-7.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:out_ptr_t,destructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:out_ptr_t,destructor'>🔗</a></div><code class='itemdeclcode'><span class='operator'>~</span>out_ptr_t<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='out.ptr.t-8'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5054'>#</a></div><div class='texpara'><div id='out.ptr.t-8.sentence-1' class='sentence'>Let <span class='texttt'>SP</span> be
<span class='texttt'><span class='texttt'><i >POINTER_<span class='shy'></span>OF_<span class='shy'></span>OR</i></span><span class='parenthesis'>(</span>Smart, Pointer<span class='parenthesis'>)</span></span> (<a href='#memory.general' title='20.2.1&emsp;In general'>[memory.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#out.ptr.t-8.sentence-1'>.</a></div></div></div></div><div class='para' id='out.ptr.t-9'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5058'>#</a></div><div class='texpara'><div id='out.ptr.t-9.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<ul class='itemize'><li id='out.ptr.t-9.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#out.ptr.t-9.1'>(9.1)</a></div><span class='mbox'></span><span class='vspace'>-<span class='baselineskip'></span></span><span class='vspace'>-<span class='parskip'></span></span>
<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span>p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  apply<span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    s<span class='operator'>.</span>reset<span class='parenthesis'>(</span><span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>SP<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>, std<span class='operator'>::</span>move<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span>
if the expression
<span class='texttt'>s<span class='operator'>.</span>reset<span class='parenthesis'>(</span><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>SP<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>, std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>
is well-<br/>formed;</li><li id='out.ptr.t-9.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#out.ptr.t-9.2'>(9.2)</a></div>otherwise,
<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span>p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  apply<span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    s <span class='operator'>=</span> Smart<span class='parenthesis'>(</span><span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>SP<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>, std<span class='operator'>::</span>move<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span>
if <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>Smart, SP, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>;</li><li id='out.ptr.t-9.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#out.ptr.t-9.3'>(9.3)</a></div>otherwise, the program is ill-formed<a class='hidden_link' href='#out.ptr.t-9.sentence-1'>.</a></li></ul></div></div></div></div><div class='texpara'><div class='itemdecl' id='out.ptr.t-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#out.ptr.t-itemdecl:3'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>operator</span> Pointer<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div><div class='para' id='out.ptr.t-10'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5093'>#</a></div><div class='texpara'><div id='out.ptr.t-10.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>void</span><span class='operator'>*</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> has not been called on <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#out.ptr.t-10.sentence-1'>.</a></div></div></div></div><div class='para' id='out.ptr.t-11'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5097'>#</a></div><div class='texpara'><div id='out.ptr.t-11.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>addressof<span class='parenthesis'>(</span><span class='keyword'>const_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>Pointer<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#out.ptr.t-11.sentence-1'>.</a></div></div></div></div><div class='texpara'><div class='itemdecl' id='out.ptr.t-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#out.ptr.t-itemdecl:4'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>operator</span> <span class='keyword'>void</span><span class='operator'>*</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div><div class='para' id='out.ptr.t-12'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5107'>#</a></div><div class='texpara'><div id='out.ptr.t-12.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>same_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>Pointer, <span class='keyword'>void</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#out.ptr.t-12.sentence-1'>.</a></div></div></div></div><div class='para' id='out.ptr.t-13'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5111'>#</a></div><div class='texpara'><div id='out.ptr.t-13.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>is_<span class='shy'></span>pointer_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>Pointer<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#out.ptr.t-13.sentence-1'>.</a></div></div></div></div><div class='para' id='out.ptr.t-14'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5115'>#</a></div><div class='texpara'><div id='out.ptr.t-14.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'><span class='keyword'>operator</span> Pointer<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> has not been called on <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#out.ptr.t-14.sentence-1'>.</a></div></div></div></div><div class='para' id='out.ptr.t-15'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5119'>#</a></div><div class='texpara'><div id='out.ptr.t-15.sentence-1' class='sentence'><i >Returns</i>: A pointer value <span class='texttt'>v</span> such that:
<ul class='itemize'><li id='out.ptr.t-15.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#out.ptr.t-15.1'>(15.1)</a></div>the initial value <span class='texttt'><span class='operator'>*</span>v</span> is equivalent to <span class='texttt'><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> and</li><li id='out.ptr.t-15.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#out.ptr.t-15.2'>(15.2)</a></div>any modification of <span class='texttt'><span class='operator'>*</span>v</span>
that is not followed by a subsequent modification of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
affects the value of <span class='texttt'>p</span> during the destruction of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>,
such that <span class='texttt'><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='operator'>*</span>v</span><a class='hidden_link' href='#out.ptr.t-15.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='out.ptr.t-16'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5132'>#</a></div><div class='texpara'><div id='out.ptr.t-16.sentence-1' class='sentence'><i >Remarks</i>: Accessing <span class='texttt'><span class='operator'>*</span>v</span> outside the lifetime of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
has undefined behavior<a class='hidden_link' href='#out.ptr.t-16.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='out.ptr.t-17'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr.t-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5137'>#</a></div><div class='texpara'><div id='out.ptr.t-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#out.ptr.t-note-3'>3</a></i>:&ensp;<div id='out.ptr.t-17.sentence-1' class='sentence'><span class='texttt'><span class='keyword'>reinterpret_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='operator'>*</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>Pointer<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
can be a viable implementation strategy for some implementations<a class='hidden_link' href='#out.ptr.t-17.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></div><div id='out.ptr' class='section'><h4 ><a class='secnum' href='#out.ptr' style='min-width:95pt'>20.3.4.2</a> Function template <span class='texttt'>out_<span class='shy'></span>ptr</span> <a class='abbr_ref' href='out.ptr'>[out.ptr]</a></h4><div class='texpara'><div id='lib:out_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:out_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Pointer <span class='operator'>=</span> <span class='keyword'>void</span>, <span class='keyword'>class</span> Smart, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>auto</span> out_ptr<span class='parenthesis'>(</span>Smart<span class='operator'>&amp;</span> s, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='out.ptr-1'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5153'>#</a></div><div class='texpara'><div id='out.ptr-1.sentence-1' class='sentence'>Let <span class='texttt'>P</span> be <span class='texttt'>Pointer</span>
if <span class='texttt'>is_<span class='shy'></span>void_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>Pointer<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>,
otherwise <span class='texttt'><span class='texttt'><i >POINTER_<span class='shy'></span>OF</i></span><span class='parenthesis'>(</span>Smart<span class='parenthesis'>)</span></span><a class='hidden_link' href='#out.ptr-1.sentence-1'>.</a></div></div></div></div><div class='para' id='out.ptr-2'><div class='marginalizedparent'><a class='marginalized' href='#out.ptr-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5158'>#</a></div><div class='texpara'><div id='out.ptr-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>out_<span class='shy'></span>ptr_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>Smart, P, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>s, std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span></div></div></div></div></div><div id='inout.ptr.t' class='section'><h4 ><a class='secnum' href='#inout.ptr.t' style='min-width:95pt'>20.3.4.3</a> Class template <span class='texttt'>inout_<span class='shy'></span>ptr_<span class='shy'></span>t</span> <a class='abbr_ref' href='inout.ptr.t'>[inout.ptr.t]</a></h4><div class='para' id='inout.ptr.t-1'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5165'>#</a></div><div class='texpara'><div id='inout.ptr.t-1.sentence-1' class='sentence'><span class='texttt'>inout_<span class='shy'></span>ptr_<span class='shy'></span>t</span> is a class template used to adapt types
such as smart pointers (<a href='#smartptr' title='20.3&emsp;Smart pointers'>[smartptr]</a>)
for functions that use output pointer parameters
whose dereferenced values may first be deleted
before being set to another allocated value<a class='hidden_link' href='#inout.ptr.t-1.sentence-1'>.</a></div></div></div><div class='para' id='inout.ptr.t-2'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5172'>#</a></div><div class='texpara'><div id='inout.ptr.t-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#inout.ptr.t-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>memory<span class='anglebracket'>&gt;</span>

<span class='keyword'>struct</span> star_fish<span class='operator'>*</span> star_fish_alloc<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> star_fish_populate<span class='parenthesis'>(</span><span class='keyword'>struct</span> star_fish<span class='operator'>*</span><span class='operator'>*</span> ps, <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> description<span class='parenthesis'>)</span>;

<span class='keyword'>struct</span> star_fish_deleter <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='parenthesis'>(</span><span class='keyword'>struct</span> star_fish<span class='operator'>*</span> c<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>using</span> star_fish_ptr <span class='operator'>=</span> std<span class='operator'>::</span>unique_ptr<span class='anglebracket'>&lt;</span>star_fish, star_fish_deleter<span class='anglebracket'>&gt;</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>char</span><span class='operator'>*</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  star_fish_ptr peach<span class='parenthesis'>(</span>star_fish_alloc<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
  <span class='comment'>// ...</span>
  <span class='comment'>// used, need to re-make</span>
  <span class='keyword'>int</span> err <span class='operator'>=</span> star_fish_populate<span class='parenthesis'>(</span>std<span class='operator'>::</span>inout_ptr<span class='parenthesis'>(</span>peach<span class='parenthesis'>)</span>, <span class='literal'>"caring clown-fish liker"</span><span class='parenthesis'>)</span>;
  <span class='keyword'>return</span> err;
<span class='curlybracket'>}</span>
</span> <div id='inout.ptr.t-2.sentence-1' class='sentence'>
A <span class='texttt'>unique_<span class='shy'></span>ptr</span> can be used with <span class='texttt'>inout_<span class='shy'></span>ptr</span>
to be passed into an output pointer-style function<a class='hidden_link' href='#inout.ptr.t-2.sentence-1'>.</a></div> <div id='inout.ptr.t-2.sentence-2' class='sentence'>The original value will be properly deleted
according to the function it is used with and
a new value reset in its place<a class='hidden_link' href='#inout.ptr.t-2.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'><span id='lib:inout_ptr_t'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:inout_ptr_t'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Smart, <span class='keyword'>class</span> Pointer, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> inout_ptr_t <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>explicit</span> inout_ptr_t<span class='parenthesis'>(</span>Smart<span class='operator'>&amp;</span>, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    inout_ptr_t<span class='parenthesis'>(</span><span class='keyword'>const</span> inout_ptr_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='operator'>~</span>inout_ptr_t<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    <span class='keyword'>operator</span> Pointer<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <span class='keyword'>void</span><span class='operator'>*</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    Smart<span class='operator'>&amp;</span> s;                   <span class='comment'>// <i >exposition only</i></span>
    tuple<span class='anglebracket'>&lt;</span>Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> a;           <span class='comment'>// <i >exposition only</i></span>
    Pointer p;                  <span class='comment'>// <i >exposition only</i></span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div></div><div class='para' id='inout.ptr.t-3'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5223'>#</a></div><div class='texpara'><div id='inout.ptr.t-3.sentence-1' class='sentence'><span class='texttt'>Pointer</span> shall meet the <i >Cpp17NullablePointer</i> requirements<a class='hidden_link' href='#inout.ptr.t-3.sentence-1'>.</a></div> <div id='inout.ptr.t-3.sentence-2' class='sentence'>If <span class='texttt'>Smart</span> is a specialization of <span class='texttt'>shared_<span class='shy'></span>ptr</span>,
the program is ill-formed<a class='hidden_link' href='#inout.ptr.t-3.sentence-2'>.</a></div> <div id='inout.ptr.t-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#inout.ptr.t-note-1'>1</a></i>:&ensp;<div id='inout.ptr.t-3.sentence-3' class='sentence'>It is impossible to properly acquire unique ownership of the managed resource
from a <span class='texttt'>shared_<span class='shy'></span>ptr</span> given its shared ownership model<a class='hidden_link' href='#inout.ptr.t-3.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='inout.ptr.t-4'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5232'>#</a></div><div class='texpara'><div id='inout.ptr.t-4.sentence-1' class='sentence'>Program-defined specializations of <span class='texttt'>inout_<span class='shy'></span>ptr_<span class='shy'></span>t</span>
that depend on at least one program-defined type
need not meet the requirements for the primary template<a class='hidden_link' href='#inout.ptr.t-4.sentence-1'>.</a></div></div></div><div class='para' id='inout.ptr.t-5'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5237'>#</a></div><div class='texpara'><div id='inout.ptr.t-5.sentence-1' class='sentence'>Evaluations of the conversion functions on the same object
may conflict (<a href='intro.races' title='6.9.2.2&emsp;Data races'>[intro.<span class='shy'></span>races]</a>)<a class='hidden_link' href='#inout.ptr.t-5.sentence-1'>.</a></div></div></div><div class='texpara'><div id='lib:inout_ptr_t,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:inout_ptr_t,constructor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>explicit</span> inout_ptr_t<span class='parenthesis'>(</span>Smart<span class='operator'>&amp;</span> smart, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='inout.ptr.t-6'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5247'>#</a></div><div class='texpara'><div id='inout.ptr.t-6.sentence-1' class='sentence'><i >Effects</i>: Initializes <span class='texttt'>s</span> with <span class='texttt'>smart</span>,
<span class='texttt'>a</span> with <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span>, and
<span class='texttt'>p</span> to either
<ul class='itemize'><li id='inout.ptr.t-6.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#inout.ptr.t-6.1'>(6.1)</a></div><span class='texttt'>smart</span> if <span class='texttt'>is_<span class='shy'></span>pointer_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>Smart<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>,</li><li id='inout.ptr.t-6.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#inout.ptr.t-6.2'>(6.2)</a></div>otherwise, <span class='texttt'>smart<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#inout.ptr.t-6.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='inout.ptr.t-7'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5257'>#</a></div><div class='texpara'><div id='inout.ptr.t-7.sentence-1' class='sentence'><i >Remarks</i>: An implementation can call <span class='texttt'>s<span class='operator'>.</span>release<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#inout.ptr.t-7.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='inout.ptr.t-8'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5261'>#</a></div><div class='texpara'><div id='inout.ptr.t-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#inout.ptr.t-note-2'>2</a></i>:&ensp;<div id='inout.ptr.t-8.sentence-1' class='sentence'>The constructor is not <span class='texttt'><span class='keyword'>noexcept</span></span>
to allow for a variety of non-terminating and safe implementation strategies<a class='hidden_link' href='#inout.ptr.t-8.sentence-1'>.</a></div> <div id='inout.ptr.t-8.sentence-2' class='sentence'>For example, an intrusive pointer implementation with a control block
can allocate in the constructor and safely fail with an exception<a class='hidden_link' href='#inout.ptr.t-8.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:inout_ptr_t,destructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:inout_ptr_t,destructor'>🔗</a></div><code class='itemdeclcode'><span class='operator'>~</span>inout_ptr_t<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='inout.ptr.t-9'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5276'>#</a></div><div class='texpara'><div id='inout.ptr.t-9.sentence-1' class='sentence'>Let <span class='texttt'>SP</span> be
<span class='texttt'><span class='texttt'><i >POINTER_<span class='shy'></span>OF_<span class='shy'></span>OR</i></span><span class='parenthesis'>(</span>Smart, Pointer<span class='parenthesis'>)</span></span> (<a href='#memory.general' title='20.2.1&emsp;In general'>[memory.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#inout.ptr.t-9.sentence-1'>.</a></div></div></div></div><div class='para' id='inout.ptr.t-10'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5280'>#</a></div><div class='texpara'><div id='inout.ptr.t-10.sentence-1' class='sentence'>Let <span class='texttt'><i >release-statement</i></span> be <span class='texttt'>s<span class='operator'>.</span>release<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;</span>
if an implementation does not call <span class='texttt'>s<span class='operator'>.</span>release<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> in the constructor<a class='hidden_link' href='#inout.ptr.t-10.sentence-1'>.</a></div> <div id='inout.ptr.t-10.sentence-2' class='sentence'>Otherwise, it is empty<a class='hidden_link' href='#inout.ptr.t-10.sentence-2'>.</a></div></div></div></div><div class='para' id='inout.ptr.t-11'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5285'>#</a></div><div class='texpara'><div id='inout.ptr.t-11.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<ul class='itemize'><li id='inout.ptr.t-11.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#inout.ptr.t-11.1'>(11.1)</a></div><span class='mbox'></span><span class='vspace'>-<span class='baselineskip'></span></span><span class='vspace'>-<span class='parskip'></span></span>
<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span>p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  apply<span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    s <span class='operator'>=</span> Smart<span class='parenthesis'>(</span> <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>SP<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>, std<span class='operator'>::</span>move<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span>
if <span class='texttt'>is_<span class='shy'></span>pointer_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>Smart<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>;</li><li id='inout.ptr.t-11.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#inout.ptr.t-11.2'>(11.2)</a></div>otherwise,
<span class='codeblock'><i >release-statement</i>;
<span class='keyword'>if</span> <span class='parenthesis'>(</span>p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  apply<span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    s<span class='operator'>.</span>reset<span class='parenthesis'>(</span><span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>SP<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>, std<span class='operator'>::</span>move<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span>
if the expression
<span class='texttt'>s<span class='operator'>.</span>reset<span class='parenthesis'>(</span><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>SP<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>, std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>
is well-<br>formed;</li><li id='inout.ptr.t-11.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#inout.ptr.t-11.3'>(11.3)</a></div>otherwise,
<span class='codeblock'><i >release-statement</i>;
<span class='keyword'>if</span> <span class='parenthesis'>(</span>p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  apply<span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    s <span class='operator'>=</span> Smart<span class='parenthesis'>(</span><span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>SP<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>, std<span class='operator'>::</span>move<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span>
if <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>Smart, SP, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span>;</li><li id='inout.ptr.t-11.4'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#inout.ptr.t-11.4'>(11.4)</a></div>otherwise, the program is ill-formed<a class='hidden_link' href='#inout.ptr.t-11.sentence-1'>.</a></li></ul></div></div></div></div><div class='texpara'><div class='itemdecl' id='inout.ptr.t-itemdecl:3'><div class='marginalizedparent'><a class='itemDeclLink' href='#inout.ptr.t-itemdecl:3'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>operator</span> Pointer<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div><div class='para' id='inout.ptr.t-12'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5331'>#</a></div><div class='texpara'><div id='inout.ptr.t-12.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>void</span><span class='operator'>*</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> has not been called on <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#inout.ptr.t-12.sentence-1'>.</a></div></div></div></div><div class='para' id='inout.ptr.t-13'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5335'>#</a></div><div class='texpara'><div id='inout.ptr.t-13.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>addressof<span class='parenthesis'>(</span><span class='keyword'>const_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>Pointer<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#inout.ptr.t-13.sentence-1'>.</a></div></div></div></div><div class='texpara'><div class='itemdecl' id='inout.ptr.t-itemdecl:4'><div class='marginalizedparent'><a class='itemDeclLink' href='#inout.ptr.t-itemdecl:4'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>operator</span> <span class='keyword'>void</span><span class='operator'>*</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div><div class='para' id='inout.ptr.t-14'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5345'>#</a></div><div class='texpara'><div id='inout.ptr.t-14.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>same_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>Pointer, <span class='keyword'>void</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#inout.ptr.t-14.sentence-1'>.</a></div></div></div></div><div class='para' id='inout.ptr.t-15'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5349'>#</a></div><div class='texpara'><div id='inout.ptr.t-15.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>is_<span class='shy'></span>pointer_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>Pointer<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#inout.ptr.t-15.sentence-1'>.</a></div></div></div></div><div class='para' id='inout.ptr.t-16'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5353'>#</a></div><div class='texpara'><div id='inout.ptr.t-16.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'><span class='keyword'>operator</span> Pointer<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> has not been called on <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#inout.ptr.t-16.sentence-1'>.</a></div></div></div></div><div class='para' id='inout.ptr.t-17'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5357'>#</a></div><div class='texpara'><div id='inout.ptr.t-17.sentence-1' class='sentence'><i >Returns</i>: A pointer value <span class='texttt'>v</span> such that:
<ul class='itemize'><li id='inout.ptr.t-17.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#inout.ptr.t-17.1'>(17.1)</a></div>the initial value <span class='texttt'><span class='operator'>*</span>v</span> is equivalent to <span class='texttt'><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span></span> and</li><li id='inout.ptr.t-17.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#inout.ptr.t-17.2'>(17.2)</a></div>any modification of <span class='texttt'><span class='operator'>*</span>v</span>
that is not followed by subsequent modification of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
affects the value of <span class='texttt'>p</span> during the destruction of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>,
such that <span class='texttt'><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='operator'>*</span>v</span><a class='hidden_link' href='#inout.ptr.t-17.sentence-1'>.</a></li></ul></div></div></div></div><div class='para' id='inout.ptr.t-18'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5370'>#</a></div><div class='texpara'><div id='inout.ptr.t-18.sentence-1' class='sentence'><i >Remarks</i>: Accessing <span class='texttt'><span class='operator'>*</span>v</span> outside the lifetime of <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
has undefined behavior<a class='hidden_link' href='#inout.ptr.t-18.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='inout.ptr.t-19'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr.t-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5375'>#</a></div><div class='texpara'><div id='inout.ptr.t-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#inout.ptr.t-note-3'>3</a></i>:&ensp;<div id='inout.ptr.t-19.sentence-1' class='sentence'><span class='texttt'><span class='keyword'>reinterpret_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='operator'>*</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>Pointer<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
can be a viable implementation strategy for some implementations<a class='hidden_link' href='#inout.ptr.t-19.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></div><div id='inout.ptr' class='section'><h4 ><a class='secnum' href='#inout.ptr' style='min-width:95pt'>20.3.4.4</a> Function template <span class='texttt'>inout_<span class='shy'></span>ptr</span> <a class='abbr_ref' href='inout.ptr'>[inout.ptr]</a></h4><div class='texpara'><div id='lib:inout_ptr'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:inout_ptr'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Pointer <span class='operator'>=</span> <span class='keyword'>void</span>, <span class='keyword'>class</span> Smart, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>auto</span> inout_ptr<span class='parenthesis'>(</span>Smart<span class='operator'>&amp;</span> s, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='inout.ptr-1'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5391'>#</a></div><div class='texpara'><div id='inout.ptr-1.sentence-1' class='sentence'>Let <span class='texttt'>P</span> be <span class='texttt'>Pointer</span> if <span class='texttt'>is_<span class='shy'></span>void_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>Pointer<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>false</span></span>,
otherwise <span class='texttt'><span class='texttt'><i >POINTER_<span class='shy'></span>OF</i></span><span class='parenthesis'>(</span>Smart<span class='parenthesis'>)</span></span><a class='hidden_link' href='#inout.ptr-1.sentence-1'>.</a></div></div></div></div><div class='para' id='inout.ptr-2'><div class='marginalizedparent'><a class='marginalized' href='#inout.ptr-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5395'>#</a></div><div class='texpara'><div id='inout.ptr-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>inout_<span class='shy'></span>ptr_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>Smart, P, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>s, std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#inout.ptr-2.sentence-1'>.</a></div></div></div></div></div></div></div><div id='res' class='section'><h2 ><a class='secnum' href='#res' style='min-width:65pt'>20.4</a> Memory resources <a class='abbr_ref' href='mem.res'>[mem.res]</a></h2><div id='res.syn' class='section'><h3 ><a class='secnum' href='#res.syn' style='min-width:80pt'>20.4.1</a> Header <span class='texttt'>&lt;memory_<span class='shy'></span>resource&gt;</span> synopsis <a class='abbr_ref' href='mem.res.syn'>[mem.res.syn]</a></h3><div class='texpara'><span id='header:<memory_resource>'><div class='marginalizedparent'><a class='itemDeclLink' href='#header:%3cmemory_resource%3e'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std<span class='operator'>::</span>pmr <span class='curlybracket'>{</span>
  <span class='comment'>// <a href='#res.class' title='20.4.2&emsp;Class memory_&shy;resource'>[mem.<span class='shy'></span>res.<span class='shy'></span>class]</a>, class <span class='tcode_in_codeblock'>memory_<span class='shy'></span>resource</span></span>
  <span class='keyword'>class</span> memory_resource;

  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span> a, <span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#poly.allocator.class' title='20.4.3&emsp;Class template polymorphic_&shy;allocator'>[mem.<span class='shy'></span>poly.<span class='shy'></span>allocator.<span class='shy'></span>class]</a>, class template <span class='tcode_in_codeblock'>polymorphic_<span class='shy'></span>allocator</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Tp <span class='operator'>=</span> byte<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> polymorphic_allocator;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> polymorphic_allocator<span class='anglebracket'>&lt;</span>T1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a,
                    <span class='keyword'>const</span> polymorphic_allocator<span class='anglebracket'>&lt;</span>T2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#res.global' title='20.4.4&emsp;Access to program-wide memory_&shy;resource objects'>[mem.<span class='shy'></span>res.<span class='shy'></span>global]</a>, global memory resources</span>
  memory_resource<span class='operator'>*</span> new_delete_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  memory_resource<span class='operator'>*</span> null_memory_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  memory_resource<span class='operator'>*</span> set_default_resource<span class='parenthesis'>(</span>memory_resource<span class='operator'>*</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  memory_resource<span class='operator'>*</span> get_default_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#res.pool' title='20.4.5&emsp;Pool resource classes'>[mem.<span class='shy'></span>res.<span class='shy'></span>pool]</a>, pool resource classes</span>
  <span class='keyword'>struct</span> pool_options;
  <span class='keyword'>class</span> synchronized_pool_resource;
  <span class='keyword'>class</span> unsynchronized_pool_resource;
  <span class='keyword'>class</span> monotonic_buffer_resource;
<span class='curlybracket'>}</span>
</span></span></div></div><div id='res.class' class='section'><h3 ><a class='secnum' href='#res.class' style='min-width:80pt'>20.4.2</a> Class <span class='texttt'>memory_<span class='shy'></span>resource</span> <a class='abbr_ref' href='mem.res.class'>[mem.res.class]</a></h3><div id='res.class.general' class='section'><h4 ><a class='secnum' href='#res.class.general' style='min-width:95pt'>20.4.2.1</a> General <a class='abbr_ref' href='mem.res.class.general'>[mem.res.class.general]</a></h4><div class='para' id='res.class.general-1'><div class='marginalizedparent'><a class='marginalized' href='#res.class.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5437'>#</a></div><div class='texpara'><div id='res.class.general-1.sentence-1' class='sentence'>The <span class='texttt'>memory_<span class='shy'></span>resource</span> class is an abstract interface to an unbounded set of classes encapsulating memory resources<a class='hidden_link' href='#res.class.general-1.sentence-1'>.</a></div></div><div class='texpara'><span id='lib:memory_resource,operator='><span id='lib:operator=,memory_resource'><span id='lib:memory_resource'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:memory_resource'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std<span class='operator'>::</span>pmr <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> memory_resource <span class='curlybracket'>{</span>
    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> size_t max_align <span class='operator'>=</span> <span class='keyword'>alignof</span><span class='parenthesis'>(</span>max_align_t<span class='parenthesis'>)</span>;   <span class='comment'>// <i >exposition only</i></span>

  <span class='keyword'>public</span><span class='operator'>:</span>
    memory_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
    memory_resource<span class='parenthesis'>(</span><span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
    <span class='keyword'>virtual</span> <span class='operator'>~</span>memory_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    memory_resource<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;

    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> allocate<span class='parenthesis'>(</span>size_t bytes, size_t alignment <span class='operator'>=</span> max_align<span class='parenthesis'>)</span>;
    <span class='keyword'>void</span> deallocate<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p, size_t bytes, size_t alignment <span class='operator'>=</span> max_align<span class='parenthesis'>)</span>;

    <span class='keyword'>bool</span> is_equal<span class='parenthesis'>(</span><span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    <span class='keyword'>virtual</span> <span class='keyword'>void</span><span class='operator'>*</span> do_allocate<span class='parenthesis'>(</span>size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='literal'>0</span>;
    <span class='keyword'>virtual</span> <span class='keyword'>void</span> do_deallocate<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p, size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='literal'>0</span>;

    <span class='keyword'>virtual</span> <span class='keyword'>bool</span> do_is_equal<span class='parenthesis'>(</span><span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='operator'>=</span> <span class='literal'>0</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></span></span></div></div></div><div id='res.public' class='section'><h4 ><a class='secnum' href='#res.public' style='min-width:95pt'>20.4.2.2</a> Public member functions <a class='abbr_ref' href='mem.res.public'>[mem.res.public]</a></h4><div class='texpara'><div id='lib:memory_resource,destructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:memory_resource,destructor'>🔗</a></div><code class='itemdeclcode'><span class='operator'>~</span>memory_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='res.public-1'><div class='marginalizedparent'><a class='marginalized' href='#res.public-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5477'>#</a></div><div class='texpara'><div id='res.public-1.sentence-1' class='sentence'><i >Effects</i>: Destroys this <span class='texttt'>memory_<span class='shy'></span>resource</span><a class='hidden_link' href='#res.public-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:memory_resource,allocate'><div id='lib:allocate,memory_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocate,memory_resource'>🔗</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> allocate<span class='parenthesis'>(</span>size_t bytes, size_t alignment <span class='operator'>=</span> max_align<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='res.public-2'><div class='marginalizedparent'><a class='marginalized' href='#res.public-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5488'>#</a></div><div class='texpara'><div id='res.public-2.sentence-1' class='sentence'><i >Effects</i>: Allocates storage by calling <span class='texttt'>do_<span class='shy'></span>allocate<span class='parenthesis'>(</span>bytes, alignment<span class='parenthesis'>)</span></span> and
implicitly creates objects within the allocated region of storage<a class='hidden_link' href='#res.public-2.sentence-1'>.</a></div></div></div></div><div class='para' id='res.public-3'><div class='marginalizedparent'><a class='marginalized' href='#res.public-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5493'>#</a></div><div class='texpara'><div id='res.public-3.sentence-1' class='sentence'><i >Returns</i>: A pointer to a suitable created object (<a href='intro.object' title='6.7.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>)
in the allocated region of storage<a class='hidden_link' href='#res.public-3.sentence-1'>.</a></div></div></div></div><div class='para' id='res.public-4'><div class='marginalizedparent'><a class='marginalized' href='#res.public-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5498'>#</a></div><div class='texpara'><div id='res.public-4.sentence-1' class='sentence'><i >Throws</i>: What and when the call to <span class='texttt'>do_<span class='shy'></span>allocate</span> throws<a class='hidden_link' href='#res.public-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:memory_resource,deallocate'><div id='lib:deallocate,memory_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:deallocate,memory_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> deallocate<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p, size_t bytes, size_t alignment <span class='operator'>=</span> max_align<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='res.public-5'><div class='marginalizedparent'><a class='marginalized' href='#res.public-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5509'>#</a></div><div class='texpara'><div id='res.public-5.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>do_<span class='shy'></span>deallocate<span class='parenthesis'>(</span>p, bytes, alignment<span class='parenthesis'>)</span></span><a class='hidden_link' href='#res.public-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:memory_resource,is_equal'><div id='lib:is_equal,memory_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:is_equal,memory_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> is_equal<span class='parenthesis'>(</span><span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='res.public-6'><div class='marginalizedparent'><a class='marginalized' href='#res.public-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5520'>#</a></div><div class='texpara'><div id='res.public-6.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> do_<span class='shy'></span>is_<span class='shy'></span>equal<span class='parenthesis'>(</span>other<span class='parenthesis'>)</span>;</span></div></div></div></div></div><div id='res.private' class='section'><h4 ><a class='secnum' href='#res.private' style='min-width:95pt'>20.4.2.3</a> Private virtual member functions <a class='abbr_ref' href='mem.res.private'>[mem.res.private]</a></h4><div class='texpara'><div id='lib:memory_resource,do_allocate'><div id='lib:do_allocate,memory_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:do_allocate,memory_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>virtual</span> <span class='keyword'>void</span><span class='operator'>*</span> do_allocate<span class='parenthesis'>(</span>size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='literal'>0</span>;
</code></div></div></div></div><div class='para' id='res.private-1'><div class='marginalizedparent'><a class='marginalized' href='#res.private-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5534'>#</a></div><div class='texpara'><div id='res.private-1.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>alignment</span> is a power of two<a class='hidden_link' href='#res.private-1.sentence-1'>.</a></div></div></div></div><div class='para' id='res.private-2'><div class='marginalizedparent'><a class='marginalized' href='#res.private-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5538'>#</a></div><div class='texpara'><div id='res.private-2.sentence-1' class='sentence'><i >Returns</i>: A derived class shall implement this function to
return a pointer to allocated storage (<a href='basic.stc.dynamic.allocation' title='6.7.5.5.2&emsp;Allocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>allocation]</a>)
with a size of at least <span class='texttt'>bytes</span>,
aligned to the specified <span class='texttt'>alignment</span><a class='hidden_link' href='#res.private-2.sentence-1'>.</a></div></div></div></div><div class='para' id='res.private-3'><div class='marginalizedparent'><a class='marginalized' href='#res.private-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5545'>#</a></div><div class='texpara'><div id='res.private-3.sentence-1' class='sentence'><i >Throws</i>: A derived class implementation shall throw an appropriate exception if it is unable to allocate memory with the requested size and alignment<a class='hidden_link' href='#res.private-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:memory_resource,do_deallocate'><div id='lib:do_deallocate,memory_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:do_deallocate,memory_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>virtual</span> <span class='keyword'>void</span> do_deallocate<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p, size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='literal'>0</span>;
</code></div></div></div></div><div class='para' id='res.private-4'><div class='marginalizedparent'><a class='marginalized' href='#res.private-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5556'>#</a></div><div class='texpara'><div id='res.private-4.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>p</span> was returned from a prior call to <span class='texttt'>allocate<span class='parenthesis'>(</span>bytes, alignment<span class='parenthesis'>)</span></span>
on a memory resource equal to <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>,
and the storage at <span class='texttt'>p</span> has not yet been deallocated<a class='hidden_link' href='#res.private-4.sentence-1'>.</a></div></div></div></div><div class='para' id='res.private-5'><div class='marginalizedparent'><a class='marginalized' href='#res.private-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5562'>#</a></div><div class='texpara'><div id='res.private-5.sentence-1' class='sentence'><i >Effects</i>: A derived class shall implement this function to dispose of allocated storage<a class='hidden_link' href='#res.private-5.sentence-1'>.</a></div></div></div></div><div class='para' id='res.private-6'><div class='marginalizedparent'><a class='marginalized' href='#res.private-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5566'>#</a></div><div class='texpara'><div id='res.private-6.sentence-1' class='sentence'><i >Throws</i>: Nothing<a class='hidden_link' href='#res.private-6.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:memory_resource,do_is_equal'><div id='lib:do_is_equal,memory_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:do_is_equal,memory_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>virtual</span> <span class='keyword'>bool</span> do_is_equal<span class='parenthesis'>(</span><span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='operator'>=</span> <span class='literal'>0</span>;
</code></div></div></div></div><div class='para' id='res.private-7'><div class='marginalizedparent'><a class='marginalized' href='#res.private-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5577'>#</a></div><div class='texpara'><div id='res.private-7.sentence-1' class='sentence'><i >Returns</i>: A derived class shall implement this function to return <span class='texttt'><span class='literal'>true</span></span> if memory allocated from <span id=':this'><span class='texttt'><span class='keyword'>this</span></span></span> can be deallocated from <span class='texttt'>other</span> and vice-versa,
otherwise <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#res.private-7.sentence-1'>.</a></div> <div id='res.private-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#res.private-note-1'>1</a></i>:&ensp;<div id='res.private-7.sentence-2' class='sentence'>It is possible that the most-derived type of <span class='texttt'>other</span> does not match the type of <span id=':this_'><span class='texttt'><span class='keyword'>this</span></span></span><a class='hidden_link' href='#res.private-7.sentence-2'>.</a></div> <div id='res.private-7.sentence-3' class='sentence'>For a derived class <span class='texttt'>D</span>, an implementation of this function
can immediately return <span class='texttt'><span class='literal'>false</span></span>
if <span class='texttt'><span class='keyword'>dynamic_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> D<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span>other<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>nullptr</span></span><a class='hidden_link' href='#res.private-7.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></div><div id='res.eq' class='section'><h4 ><a class='secnum' href='#res.eq' style='min-width:95pt'>20.4.2.4</a> Equality <a class='abbr_ref' href='mem.res.eq'>[mem.res.eq]</a></h4><div class='texpara'><div id='lib:memory_resource,operator=='><div id='lib:operator==,memory_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator==,memory_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span> a, <span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='res.eq-1'><div class='marginalizedparent'><a class='marginalized' href='#res.eq-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5597'>#</a></div><div class='texpara'><div id='res.eq-1.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>&amp;</span>a <span class='operator'>=</span><span class='operator'>=</span> <span class='operator'>&amp;</span>b <span class='operator'>|</span><span class='operator'>|</span> a<span class='operator'>.</span>is_<span class='shy'></span>equal<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span></span><a class='hidden_link' href='#res.eq-1.sentence-1'>.</a></div></div></div></div></div></div><div id='poly.allocator.class' class='section'><h3 ><a class='secnum' href='#poly.allocator.class' style='min-width:80pt'>20.4.3</a> Class template <span class='texttt'>polymorphic_<span class='shy'></span>allocator</span> <a class='abbr_ref' href='mem.poly.allocator.class'>[mem.poly.allocator.class]</a></h3><div id='poly.allocator.class.general' class='section'><h4 ><a class='secnum' href='#poly.allocator.class.general' style='min-width:95pt'>20.4.3.1</a> General <a class='abbr_ref' href='mem.poly.allocator.class.general'>[mem.poly.allocator.class.general]</a></h4><div class='para' id='poly.allocator.class.general-1'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.class.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5606'>#</a></div><div class='texpara'><div id='poly.allocator.class.general-1.sentence-1' class='sentence'>A specialization of class template <span class='texttt'>pmr<span class='operator'>&#x200b;::&#x200b;</span>polymorphic_<span class='shy'></span>allocator</span> meets
the <i >Cpp17Allocator</i> requirements (<a href='allocator.requirements.general' title='16.4.4.6.1&emsp;General'>[allocator.<span class='shy'></span>requirements.<span class='shy'></span>general]</a>)
if its template argument is a <span class='mathit'>cv</span>-unqualified object type<a class='hidden_link' href='#poly.allocator.class.general-1.sentence-1'>.</a></div> <div id='poly.allocator.class.general-1.sentence-2' class='sentence'>Constructed with different memory resources,
different instances of the same specialization of <span class='texttt'>pmr<span class='operator'>&#x200b;::&#x200b;</span>polymorphic_<span class='shy'></span>allocator</span>
can exhibit entirely different allocation behavior<a class='hidden_link' href='#poly.allocator.class.general-1.sentence-2'>.</a></div> <div id='poly.allocator.class.general-1.sentence-3' class='sentence'>This runtime polymorphism allows objects that use <span class='texttt'>polymorphic_<span class='shy'></span>allocator</span>
to behave as if they used different allocator types at run time
even though they use the same static allocator type<a class='hidden_link' href='#poly.allocator.class.general-1.sentence-3'>.</a></div></div></div><div class='para' id='poly.allocator.class.general-2'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.class.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5617'>#</a></div><div class='texpara'><div id='poly.allocator.class.general-2.sentence-1' class='sentence'>A specialization of class template <span class='texttt'>pmr<span class='operator'>&#x200b;::&#x200b;</span>polymorphic_<span class='shy'></span>allocator</span>
meets the allocator completeness requirements (<a href='allocator.requirements.completeness' title='16.4.4.6.2&emsp;Allocator completeness requirements'>[allocator.<span class='shy'></span>requirements.<span class='shy'></span>completeness]</a>)
if its template argument is a <span class='mathit'>cv</span>-unqualified object type<a class='hidden_link' href='#poly.allocator.class.general-2.sentence-1'>.</a></div></div><div class='texpara'><span id='lib:polymorphic_allocator,value_type'><span id='lib:value_type,polymorphic_allocator'><span id='lib:polymorphic_allocator'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:polymorphic_allocator'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std<span class='operator'>::</span>pmr <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Tp <span class='operator'>=</span> byte<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> polymorphic_allocator <span class='curlybracket'>{</span>
    memory_resource<span class='operator'>*</span> memory_rsrc;       <span class='comment'>// <i >exposition only</i></span>

  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> Tp;

    <span class='comment'>// <a href='#poly.allocator.ctor' title='20.4.3.2&emsp;Constructors'>[mem.<span class='shy'></span>poly.<span class='shy'></span>allocator.<span class='shy'></span>ctor]</a>, constructors</span>
    polymorphic_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    polymorphic_allocator<span class='parenthesis'>(</span>memory_resource<span class='operator'>*</span> r<span class='parenthesis'>)</span>;

    polymorphic_allocator<span class='parenthesis'>(</span><span class='keyword'>const</span> polymorphic_allocator<span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
      polymorphic_allocator<span class='parenthesis'>(</span><span class='keyword'>const</span> polymorphic_allocator<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    polymorphic_allocator<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> polymorphic_allocator<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='comment'>// <a href='#poly.allocator.mem' title='20.4.3.3&emsp;Member functions'>[mem.<span class='shy'></span>poly.<span class='shy'></span>allocator.<span class='shy'></span>mem]</a>, member functions</span>
    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> Tp<span class='operator'>*</span> allocate<span class='parenthesis'>(</span>size_t n<span class='parenthesis'>)</span>;
    <span class='keyword'>void</span> deallocate<span class='parenthesis'>(</span>Tp<span class='operator'>*</span> p, size_t n<span class='parenthesis'>)</span>;

    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> allocate_bytes<span class='parenthesis'>(</span>size_t nbytes, size_t alignment <span class='operator'>=</span> <span class='keyword'>alignof</span><span class='parenthesis'>(</span>max_align_t<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
    <span class='keyword'>void</span> deallocate_bytes<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p, size_t nbytes, size_t alignment <span class='operator'>=</span> <span class='keyword'>alignof</span><span class='parenthesis'>(</span>max_align_t<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> T<span class='operator'>*</span> allocate_object<span class='parenthesis'>(</span>size_t n <span class='operator'>=</span> <span class='literal'>1</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> deallocate_object<span class='parenthesis'>(</span>T<span class='operator'>*</span> p, size_t n <span class='operator'>=</span> <span class='literal'>1</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> CtorArgs<span class='anglebracket'>&gt;</span> <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> T<span class='operator'>*</span> new_object<span class='parenthesis'>(</span>CtorArgs<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> ctor_args<span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> delete_object<span class='parenthesis'>(</span>T<span class='operator'>*</span> p<span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>void</span> construct<span class='parenthesis'>(</span>T<span class='operator'>*</span> p, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;

    polymorphic_allocator select_on_container_copy_construction<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;

    memory_resource<span class='operator'>*</span> resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;

    <span class='comment'>// friends</span>
    <span class='keyword'>friend</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> polymorphic_allocator<span class='operator'>&amp;</span> a,
                           <span class='keyword'>const</span> polymorphic_allocator<span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span> <span class='curlybracket'>{</span>
      <span class='keyword'>return</span> <span class='operator'>*</span>a<span class='operator'>.</span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='operator'>*</span>b<span class='operator'>.</span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></span></span></div></div></div><div id='poly.allocator.ctor' class='section'><h4 ><a class='secnum' href='#poly.allocator.ctor' style='min-width:95pt'>20.4.3.2</a> Constructors <a class='abbr_ref' href='mem.poly.allocator.ctor'>[mem.poly.allocator.ctor]</a></h4><div class='texpara'><div id='lib:polymorphic_allocator,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:polymorphic_allocator,constructor'>🔗</a></div><code class='itemdeclcode'>polymorphic_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='poly.allocator.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.ctor-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5678'>#</a></div><div class='texpara'><div id='poly.allocator.ctor-1.sentence-1' class='sentence'><i >Effects</i>: Sets <span class='texttt'>memory_<span class='shy'></span>rsrc</span> to <span class='texttt'>get_<span class='shy'></span>default_<span class='shy'></span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#poly.allocator.ctor-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:polymorphic_allocator,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:polymorphic_allocator,constructor_'>🔗</a></div><code class='itemdeclcode'>polymorphic_allocator<span class='parenthesis'>(</span>memory_resource<span class='operator'>*</span> r<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='poly.allocator.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.ctor-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5689'>#</a></div><div class='texpara'><div id='poly.allocator.ctor-2.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>r</span> is non-null<a class='hidden_link' href='#poly.allocator.ctor-2.sentence-1'>.</a></div></div></div></div><div class='para' id='poly.allocator.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.ctor-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5693'>#</a></div><div class='texpara'><div id='poly.allocator.ctor-3.sentence-1' class='sentence'><i >Effects</i>: Sets <span class='texttt'>memory_<span class='shy'></span>rsrc</span> to <span class='texttt'>r</span><a class='hidden_link' href='#poly.allocator.ctor-3.sentence-1'>.</a></div></div></div></div><div class='para' id='poly.allocator.ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.ctor-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5697'>#</a></div><div class='texpara'><div id='poly.allocator.ctor-4.sentence-1' class='sentence'><i >Throws</i>: Nothing<a class='hidden_link' href='#poly.allocator.ctor-4.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='poly.allocator.ctor-5'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.ctor-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5701'>#</a></div><div class='texpara'><div id='poly.allocator.ctor-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#poly.allocator.ctor-note-1'>1</a></i>:&ensp;<div id='poly.allocator.ctor-5.sentence-1' class='sentence'>This constructor provides an implicit conversion from <span class='texttt'>memory_<span class='shy'></span>resource<span class='operator'>*</span></span><a class='hidden_link' href='#poly.allocator.ctor-5.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:polymorphic_allocator,constructor__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:polymorphic_allocator,constructor__'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> polymorphic_allocator<span class='parenthesis'>(</span><span class='keyword'>const</span> polymorphic_allocator<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='poly.allocator.ctor-6'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.ctor-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5713'>#</a></div><div class='texpara'><div id='poly.allocator.ctor-6.sentence-1' class='sentence'><i >Effects</i>: Sets <span class='texttt'>memory_<span class='shy'></span>rsrc</span> to <span class='texttt'>other<span class='operator'>.</span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#poly.allocator.ctor-6.sentence-1'>.</a></div></div></div></div></div><div id='poly.allocator.mem' class='section'><h4 ><a class='secnum' href='#poly.allocator.mem' style='min-width:95pt'>20.4.3.3</a> Member functions <a class='abbr_ref' href='mem.poly.allocator.mem'>[mem.poly.allocator.mem]</a></h4><div class='texpara'><div id='lib:polymorphic_allocator,allocate'><div id='lib:allocate,polymorphic_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocate,polymorphic_allocator'>🔗</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> Tp<span class='operator'>*</span> allocate<span class='parenthesis'>(</span>size_t n<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='poly.allocator.mem-1'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5727'>#</a></div><div class='texpara'><div id='poly.allocator.mem-1.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>numeric_<span class='shy'></span>limits<span class='anglebracket'>&lt;</span>size_<span class='shy'></span>t<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>max<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>/</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>Tp<span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span> n</span>,
throws <span class='texttt'>bad_<span class='shy'></span>array_<span class='shy'></span>new_<span class='shy'></span>length</span><a class='hidden_link' href='#poly.allocator.mem-1.sentence-1'>.</a></div> <div id='poly.allocator.mem-1.sentence-2' class='sentence'>Otherwise equivalent to:
<span class='codeblock'><span class='keyword'>return</span> <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>Tp<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>memory_rsrc<span class='operator'>-</span><span class='anglebracket'>&gt;</span>allocate<span class='parenthesis'>(</span>n <span class='operator'>*</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>Tp<span class='parenthesis'>)</span>, <span class='keyword'>alignof</span><span class='parenthesis'>(</span>Tp<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:polymorphic_allocator,deallocate'><div id='lib:deallocate,polymorphic_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:deallocate,polymorphic_allocator'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> deallocate<span class='parenthesis'>(</span>Tp<span class='operator'>*</span> p, size_t n<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='poly.allocator.mem-2'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5743'>#</a></div><div class='texpara'><div id='poly.allocator.mem-2.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>p</span> was allocated from a memory resource <span class='texttt'>x</span>,
equal to <span class='texttt'><span class='operator'>*</span>memory_<span class='shy'></span>rsrc</span>,
using <span class='texttt'>x<span class='operator'>.</span>allocate<span class='parenthesis'>(</span>n <span class='operator'>*</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>Tp<span class='parenthesis'>)</span>, <span class='keyword'>alignof</span><span class='parenthesis'>(</span>Tp<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#poly.allocator.mem-2.sentence-1'>.</a></div></div></div></div><div class='para' id='poly.allocator.mem-3'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5749'>#</a></div><div class='texpara'><div id='poly.allocator.mem-3.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>memory_<span class='shy'></span>rsrc<span class='operator'>-</span><span class='anglebracket'>&gt;</span>deallocate<span class='parenthesis'>(</span>p, n <span class='operator'>*</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>Tp<span class='parenthesis'>)</span>, <span class='keyword'>alignof</span><span class='parenthesis'>(</span>Tp<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#poly.allocator.mem-3.sentence-1'>.</a></div></div></div></div><div class='para' id='poly.allocator.mem-4'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5753'>#</a></div><div class='texpara'><div id='poly.allocator.mem-4.sentence-1' class='sentence'><i >Throws</i>: Nothing<a class='hidden_link' href='#poly.allocator.mem-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:polymorphic_allocator,allocate_bytes'><div id='lib:allocate_bytes,polymorphic_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocate_bytes,polymorphic_allocator'>🔗</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> allocate_bytes<span class='parenthesis'>(</span>size_t nbytes, size_t alignment <span class='operator'>=</span> <span class='keyword'>alignof</span><span class='parenthesis'>(</span>max_align_t<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='poly.allocator.mem-5'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5764'>#</a></div><div class='texpara'><div id='poly.allocator.mem-5.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> memory_<span class='shy'></span>rsrc<span class='operator'>-</span><span class='anglebracket'>&gt;</span>allocate<span class='parenthesis'>(</span>nbytes, alignment<span class='parenthesis'>)</span>;</span></div></div></div></div><div class='para nonNormativeOnly' id='poly.allocator.mem-6'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5768'>#</a></div><div class='texpara'><div id='poly.allocator.mem-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#poly.allocator.mem-note-1'>1</a></i>:&ensp;<div id='poly.allocator.mem-6.sentence-1' class='sentence'>The return type is <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> (rather than, e.g., <span class='texttt'>byte<span class='operator'>*</span></span>)
to support conversion to an arbitrary pointer type <span class='texttt'>U<span class='operator'>*</span></span>
by <span class='texttt'><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>U<span class='operator'>*</span><span class='anglebracket'>&gt;</span></span>, thus facilitating construction of a <span class='texttt'>U</span>
object in the allocated memory<a class='hidden_link' href='#poly.allocator.mem-6.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:polymorphic_allocator,deallocate_bytes'><div id='lib:deallocate_bytes,polymorphic_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:deallocate_bytes,polymorphic_allocator'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> deallocate_bytes<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p, size_t nbytes, size_t alignment <span class='operator'>=</span> <span class='keyword'>alignof</span><span class='parenthesis'>(</span>max_align_t<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='poly.allocator.mem-7'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5783'>#</a></div><div class='texpara'><div id='poly.allocator.mem-7.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>memory_<span class='shy'></span>rsrc<span class='operator'>-</span><span class='anglebracket'>&gt;</span>deallocate<span class='parenthesis'>(</span>p, nbytes, alignment<span class='parenthesis'>)</span></span><a class='hidden_link' href='#poly.allocator.mem-7.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:polymorphic_allocator,allocate_object'><div id='lib:allocate_object,polymorphic_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocate_object,polymorphic_allocator'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> T<span class='operator'>*</span> allocate_object<span class='parenthesis'>(</span>size_t n <span class='operator'>=</span> <span class='literal'>1</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='poly.allocator.mem-8'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5795'>#</a></div><div class='texpara'><div id='poly.allocator.mem-8.sentence-1' class='sentence'><i >Effects</i>: Allocates memory suitable for holding
an array of <span class='texttt'>n</span> objects of type <span class='texttt'>T</span>, as follows:
<ul class='itemize'><li id='poly.allocator.mem-8.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#poly.allocator.mem-8.1'>(8.1)</a></div>if <span class='texttt'>numeric_<span class='shy'></span>limits<span class='anglebracket'>&lt;</span>size_<span class='shy'></span>t<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>max<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>/</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span> n</span>,
  throws <span class='texttt'>bad_<span class='shy'></span>array_<span class='shy'></span>new_<span class='shy'></span>length</span>,</li><li id='poly.allocator.mem-8.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#poly.allocator.mem-8.2'>(8.2)</a></div>otherwise equivalent to:
<span class='codeblock'><span class='keyword'>return</span> <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>allocate_bytes<span class='parenthesis'>(</span>n<span class='operator'>*</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>, <span class='keyword'>alignof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></li></ul></div></div></div></div><div class='para nonNormativeOnly' id='poly.allocator.mem-9'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5810'>#</a></div><div class='texpara'><div id='poly.allocator.mem-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#poly.allocator.mem-note-2'>2</a></i>:&ensp;<div id='poly.allocator.mem-9.sentence-1' class='sentence'><span class='texttt'>T</span> is not deduced and must therefore be provided as a template argument<a class='hidden_link' href='#poly.allocator.mem-9.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:polymorphic_allocator,deallocate_object'><div id='lib:deallocate_object,polymorphic_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:deallocate_object,polymorphic_allocator'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> deallocate_object<span class='parenthesis'>(</span>T<span class='operator'>*</span> p, size_t n <span class='operator'>=</span> <span class='literal'>1</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='poly.allocator.mem-10'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5823'>#</a></div><div class='texpara'><div id='poly.allocator.mem-10.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>deallocate_<span class='shy'></span>bytes<span class='parenthesis'>(</span>p, n<span class='operator'>*</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>, <span class='keyword'>alignof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#poly.allocator.mem-10.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:polymorphic_allocator,new_object'><div id='lib:new_object,polymorphic_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:new_object,polymorphic_allocator'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> CtorArgs<span class='anglebracket'>&gt;</span>
  <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> T<span class='operator'>*</span> new_object<span class='parenthesis'>(</span>CtorArgs<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> ctor_args<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='poly.allocator.mem-11'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5835'>#</a></div><div class='texpara'><div id='poly.allocator.mem-11.sentence-1' class='sentence'><i >Effects</i>: Allocates and constructs an object of type <span class='texttt'>T</span>, as follows<a class='hidden_link' href='#poly.allocator.mem-11.sentence-1'>.</a></div> <div id='poly.allocator.mem-11.sentence-2' class='sentence'><br>Equivalent to:
<span class='codeblock'>T<span class='operator'>*</span> p <span class='operator'>=</span> allocate_object<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>try</span> <span class='curlybracket'>{</span>
  construct<span class='parenthesis'>(</span>p, std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>CtorArgs<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>ctor_args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span> <span class='keyword'>catch</span> <span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  deallocate_object<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;
  <span class='keyword'>throw</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>return</span> p;
</span></div></div></div></div><div class='para nonNormativeOnly' id='poly.allocator.mem-12'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5850'>#</a></div><div class='texpara'><div id='poly.allocator.mem-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#poly.allocator.mem-note-3'>3</a></i>:&ensp;<div id='poly.allocator.mem-12.sentence-1' class='sentence'><span class='texttt'>T</span> is not deduced and must therefore be provided as a template argument<a class='hidden_link' href='#poly.allocator.mem-12.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:polymorphic_allocator,new_object_'><div id='lib:new_object,polymorphic_allocator_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:new_object,polymorphic_allocator_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> delete_object<span class='parenthesis'>(</span>T<span class='operator'>*</span> p<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='poly.allocator.mem-13'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5863'>#</a></div><div class='texpara'><div id='poly.allocator.mem-13.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'>allocator_traits<span class='anglebracket'>&lt;</span>polymorphic_allocator<span class='anglebracket'>&gt;</span><span class='operator'>::</span>destroy<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span>, p<span class='parenthesis'>)</span>;
deallocate_object<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:polymorphic_allocator,construct'><div id='lib:construct,polymorphic_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:construct,polymorphic_allocator'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> construct<span class='parenthesis'>(</span>T<span class='operator'>*</span> p, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='poly.allocator.mem-14'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5879'>#</a></div><div class='texpara'><div id='poly.allocator.mem-14.sentence-1' class='sentence'><i >Mandates</i>: Uses-allocator construction of <span class='texttt'>T</span>
with allocator <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> (see <a href='#allocator.uses.construction' title='20.2.8.2&emsp;Uses-allocator construction'>[allocator.<span class='shy'></span>uses.<span class='shy'></span>construction]</a>)
and constructor arguments <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> is well-formed<a class='hidden_link' href='#poly.allocator.mem-14.sentence-1'>.</a></div></div></div></div><div class='para' id='poly.allocator.mem-15'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5885'>#</a></div><div class='texpara'><div id='poly.allocator.mem-15.sentence-1' class='sentence'><i >Effects</i>: Construct a <span class='texttt'>T</span> object in the storage
whose address is represented by <span class='texttt'>p</span>
by uses-allocator construction with allocator <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>
and constructor arguments <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><a class='hidden_link' href='#poly.allocator.mem-15.sentence-1'>.</a></div></div></div></div><div class='para' id='poly.allocator.mem-16'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5892'>#</a></div><div class='texpara'><div id='poly.allocator.mem-16.sentence-1' class='sentence'><i >Throws</i>: Nothing unless the constructor for <span class='texttt'>T</span> throws<a class='hidden_link' href='#poly.allocator.mem-16.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:polymorphic_allocator,select_on_container_copy_construction'><div id='lib:select_on_container_copy_construction,polymorphic_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:select_on_container_copy_construction,polymorphic_allocator'>🔗</a></div><code class='itemdeclcode'>polymorphic_allocator select_on_container_copy_construction<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div></div><div class='para' id='poly.allocator.mem-17'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5903'>#</a></div><div class='texpara'><div id='poly.allocator.mem-17.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>polymorphic_<span class='shy'></span>allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#poly.allocator.mem-17.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='poly.allocator.mem-18'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5907'>#</a></div><div class='texpara'><div id='poly.allocator.mem-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#poly.allocator.mem-note-4'>4</a></i>:&ensp;<div id='poly.allocator.mem-18.sentence-1' class='sentence'>The memory resource is not propagated<a class='hidden_link' href='#poly.allocator.mem-18.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:polymorphic_allocator,resource'><div id='lib:resource,polymorphic_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:resource,polymorphic_allocator'>🔗</a></div><code class='itemdeclcode'>memory_resource<span class='operator'>*</span> resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div></div><div class='para' id='poly.allocator.mem-19'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.mem-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5919'>#</a></div><div class='texpara'><div id='poly.allocator.mem-19.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>memory_<span class='shy'></span>rsrc</span><a class='hidden_link' href='#poly.allocator.mem-19.sentence-1'>.</a></div></div></div></div></div><div id='poly.allocator.eq' class='section'><h4 ><a class='secnum' href='#poly.allocator.eq' style='min-width:95pt'>20.4.3.4</a> Equality <a class='abbr_ref' href='mem.poly.allocator.eq'>[mem.poly.allocator.eq]</a></h4><div class='texpara'><div id='lib:polymorphic_allocator,operator=='><div id='lib:operator==,polymorphic_allocator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator==,polymorphic_allocator'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> polymorphic_allocator<span class='anglebracket'>&lt;</span>T1<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a,
                  <span class='keyword'>const</span> polymorphic_allocator<span class='anglebracket'>&lt;</span>T2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='poly.allocator.eq-1'><div class='marginalizedparent'><a class='marginalized' href='#poly.allocator.eq-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5934'>#</a></div><div class='texpara'><div id='poly.allocator.eq-1.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span>a<span class='operator'>.</span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='operator'>*</span>b<span class='operator'>.</span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#poly.allocator.eq-1.sentence-1'>.</a></div></div></div></div></div></div><div id='res.global' class='section'><h3 ><a class='secnum' href='#res.global' style='min-width:80pt'>20.4.4</a> Access to program-wide <span class='texttt'>memory_<span class='shy'></span>resource</span> objects <a class='abbr_ref' href='mem.res.global'>[mem.res.global]</a></h3><div class='texpara'><div id='lib:new_delete_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:new_delete_resource'>🔗</a></div><code class='itemdeclcode'>memory_resource<span class='operator'>*</span> new_delete_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='res.global-1'><div class='marginalizedparent'><a class='marginalized' href='#res.global-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5947'>#</a></div><div class='texpara'><div id='res.global-1.sentence-1' class='sentence'><i >Returns</i>: A pointer to a static-duration object of a type derived from <span class='texttt'>memory_<span class='shy'></span>resource</span>
that can serve as a resource for allocating memory
using <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span> <span class='keyword'>new</span></span> and <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span> <span class='keyword'>delete</span></span><a class='hidden_link' href='#res.global-1.sentence-1'>.</a></div> <div id='res.global-1.sentence-2' class='sentence'>The same value is returned every time this function is called<a class='hidden_link' href='#res.global-1.sentence-2'>.</a></div> <div id='res.global-1.sentence-3' class='sentence'>For a return value <span class='texttt'>p</span> and a memory resource <span class='texttt'>r</span>,
<span class='texttt'>p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>is_<span class='shy'></span>equal<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span> returns <span class='texttt'><span class='operator'>&amp;</span>r <span class='operator'>=</span><span class='operator'>=</span> p</span><a class='hidden_link' href='#res.global-1.sentence-3'>.</a></div></div></div></div><div class='texpara'><div id='lib:null_memory_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:null_memory_resource'>🔗</a></div><code class='itemdeclcode'>memory_resource<span class='operator'>*</span> null_memory_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='res.global-2'><div class='marginalizedparent'><a class='marginalized' href='#res.global-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5963'>#</a></div><div class='texpara'><div id='res.global-2.sentence-1' class='sentence'><i >Returns</i>: A pointer to a static-duration object of a type derived from <span class='texttt'>memory_<span class='shy'></span>resource</span>
for which <span class='texttt'>allocate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> always throws <span class='texttt'>bad_<span class='shy'></span>alloc</span> and
for which <span class='texttt'>deallocate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> has no effect<a class='hidden_link' href='#res.global-2.sentence-1'>.</a></div> <div id='res.global-2.sentence-2' class='sentence'>The same value is returned every time this function is called<a class='hidden_link' href='#res.global-2.sentence-2'>.</a></div> <div id='res.global-2.sentence-3' class='sentence'>For a return value <span class='texttt'>p</span> and a memory resource <span class='texttt'>r</span>,
<span class='texttt'>p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>is_<span class='shy'></span>equal<span class='parenthesis'>(</span>r<span class='parenthesis'>)</span></span> returns <span class='texttt'><span class='operator'>&amp;</span>r <span class='operator'>=</span><span class='operator'>=</span> p</span><a class='hidden_link' href='#res.global-2.sentence-3'>.</a></div></div></div></div><div class='para' id='res.global-3'><div class='marginalizedparent'><a class='marginalized' href='#res.global-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5973'>#</a></div><div class='texpara'><div id='res.global-3.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:default_memory_resource_pointer' title='20.4.4&emsp;Access to program-wide memory_&shy;resource objects&emsp;[mem.res.global]'><span id='def:default_memory_resource_pointer'><i >default memory resource pointer</i></span></a> is a pointer to a memory resource
that is used by certain facilities when an explicit memory resource
is not supplied through the interface<a class='hidden_link' href='#res.global-3.sentence-1'>.</a></div> <div id='res.global-3.sentence-2' class='sentence'>Its initial value is the return value of <span class='texttt'>new_<span class='shy'></span>delete_<span class='shy'></span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#res.global-3.sentence-2'>.</a></div></div></div><div class='texpara'><div id='lib:set_default_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:set_default_resource'>🔗</a></div><code class='itemdeclcode'>memory_resource<span class='operator'>*</span> set_default_resource<span class='parenthesis'>(</span>memory_resource<span class='operator'>*</span> r<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='res.global-4'><div class='marginalizedparent'><a class='marginalized' href='#res.global-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5985'>#</a></div><div class='texpara'><div id='res.global-4.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>r</span> is non-null,
sets the value of the default memory resource pointer to <span class='texttt'>r</span>,
otherwise sets the default memory resource pointer to <span class='texttt'>new_<span class='shy'></span>delete_<span class='shy'></span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#res.global-4.sentence-1'>.</a></div></div></div></div><div class='para' id='res.global-5'><div class='marginalizedparent'><a class='marginalized' href='#res.global-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5991'>#</a></div><div class='texpara'><div id='res.global-5.sentence-1' class='sentence'><i >Returns</i>: The previous value of the default memory resource pointer<a class='hidden_link' href='#res.global-5.sentence-1'>.</a></div></div></div></div><div class='para' id='res.global-6'><div class='marginalizedparent'><a class='marginalized' href='#res.global-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L5995'>#</a></div><div class='texpara'><div id='res.global-6.sentence-1' class='sentence'><i >Remarks</i>: Calling the <span class='texttt'>set_<span class='shy'></span>default_<span class='shy'></span>resource</span> and
<span class='texttt'>get_<span class='shy'></span>default_<span class='shy'></span>resource</span> functions shall not incur a data race<a class='hidden_link' href='#res.global-6.sentence-1'>.</a></div> <div id='res.global-6.sentence-2' class='sentence'>A call to the <span class='texttt'>set_<span class='shy'></span>default_<span class='shy'></span>resource</span> function
shall synchronize with subsequent calls to
the <span class='texttt'>set_<span class='shy'></span>default_<span class='shy'></span>resource</span> and <span class='texttt'>get_<span class='shy'></span>default_<span class='shy'></span>resource</span> functions<a class='hidden_link' href='#res.global-6.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:get_default_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:get_default_resource'>🔗</a></div><code class='itemdeclcode'>memory_resource<span class='operator'>*</span> get_default_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='res.global-7'><div class='marginalizedparent'><a class='marginalized' href='#res.global-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6010'>#</a></div><div class='texpara'><div id='res.global-7.sentence-1' class='sentence'><i >Returns</i>: The current value of the default memory resource pointer<a class='hidden_link' href='#res.global-7.sentence-1'>.</a></div></div></div></div></div><div id='res.pool' class='section'><h3 ><a class='secnum' href='#res.pool' style='min-width:80pt'>20.4.5</a> Pool resource classes <a class='abbr_ref' href='mem.res.pool'>[mem.res.pool]</a></h3><div id='res.pool.overview' class='section'><h4 ><a class='secnum' href='#res.pool.overview' style='min-width:95pt'>20.4.5.1</a> Classes <span class='texttt'>synchronized_<span class='shy'></span>pool_<span class='shy'></span>resource</span> and <span class='texttt'>unsynchronized_<span class='shy'></span>pool_<span class='shy'></span>resource</span> <a class='abbr_ref' href='mem.res.pool.overview'>[mem.res.pool.overview]</a></h4><div class='para' id='res.pool.overview-1'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.overview-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6019'>#</a></div><div class='texpara'><div id='res.pool.overview-1.sentence-1' class='sentence'>The <span class='texttt'>synchronized_<span class='shy'></span>pool_<span class='shy'></span>resource</span> and
<span class='texttt'>unsynchronized_<span class='shy'></span>pool_<span class='shy'></span>resource</span> classes
(collectively called <a class='hidden_link' href='#def:pool_resource_classes' title='20.4.5.1&emsp;Classes synchronized_&shy;pool_&shy;resource and unsynchronized_&shy;pool_&shy;resource&emsp;[mem.res.pool.overview]'><span id='def:pool_resource_classes'><i >pool resource classes</i></span></a>)
are general-purpose memory resources having the following qualities:
<ul class='itemize'><li id='res.pool.overview-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#res.pool.overview-1.1'>(1.1)</a></div><div class='texpara'><div id='res.pool.overview-1.1.sentence-1' class='sentence'>Each resource frees its allocated memory on destruction,
even if <span class='texttt'>deallocate</span> has not been called for some of the allocated blocks<a class='hidden_link' href='#res.pool.overview-1.1.sentence-1'>.</a></div></div></li><li id='res.pool.overview-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#res.pool.overview-1.2'>(1.2)</a></div><div class='texpara'><div id='res.pool.overview-1.2.sentence-1' class='sentence'>A pool resource consists of a collection of <a class='hidden_link' href='#def:pools' title='20.4.5.1&emsp;Classes synchronized_&shy;pool_&shy;resource and unsynchronized_&shy;pool_&shy;resource&emsp;[mem.res.pool.overview]'><span id='def:pools'><i >pools</i></span></a>,
serving requests for different block sizes<a class='hidden_link' href='#res.pool.overview-1.2.sentence-1'>.</a></div> <div id='res.pool.overview-1.2.sentence-2' class='sentence'>Each individual pool manages a collection of <a class='hidden_link' href='#def:chunks' title='20.4.5.1&emsp;Classes synchronized_&shy;pool_&shy;resource and unsynchronized_&shy;pool_&shy;resource&emsp;[mem.res.pool.overview]'><span id='def:chunks'><i >chunks</i></span></a>
that are in turn divided into blocks of uniform size,
returned via calls to <span class='texttt'>do_<span class='shy'></span>allocate</span><a class='hidden_link' href='#res.pool.overview-1.2.sentence-2'>.</a></div> <div id='res.pool.overview-1.2.sentence-3' class='sentence'>Each call to <span class='texttt'>do_<span class='shy'></span>allocate<span class='parenthesis'>(</span>size, alignment<span class='parenthesis'>)</span></span> is dispatched
to the pool serving the smallest blocks accommodating at least <span class='texttt'>size</span> bytes<a class='hidden_link' href='#res.pool.overview-1.2.sentence-3'>.</a></div></div></li><li id='res.pool.overview-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#res.pool.overview-1.3'>(1.3)</a></div><div class='texpara'><div id='res.pool.overview-1.3.sentence-1' class='sentence'>When a particular pool is exhausted,
allocating a block from that pool results in the allocation
of an additional chunk of memory from the <a class='hidden_link' href='#def:upstream_allocator' title='20.4.5.1&emsp;Classes synchronized_&shy;pool_&shy;resource and unsynchronized_&shy;pool_&shy;resource&emsp;[mem.res.pool.overview]'><span id='def:upstream_allocator'><i >upstream allocator</i></span></a>
(supplied at construction), thus replenishing the pool<a class='hidden_link' href='#res.pool.overview-1.3.sentence-1'>.</a></div> <div id='res.pool.overview-1.3.sentence-2' class='sentence'>With each successive replenishment,
the chunk size obtained increases geometrically<a class='hidden_link' href='#res.pool.overview-1.3.sentence-2'>.</a></div> <div id='res.pool.overview-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#res.pool.overview-note-1'>1</a></i>:&ensp;<div id='res.pool.overview-1.3.sentence-3' class='sentence'>By allocating memory in chunks,
the pooling strategy increases the chance that consecutive allocations
will be close together in memory<a class='hidden_link' href='#res.pool.overview-1.3.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='res.pool.overview-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#res.pool.overview-1.4'>(1.4)</a></div><div class='texpara'><div id='res.pool.overview-1.4.sentence-1' class='sentence'>Allocation requests that exceed the largest block size of any pool
are fulfilled directly from the upstream allocator<a class='hidden_link' href='#res.pool.overview-1.4.sentence-1'>.</a></div></div></li><li id='res.pool.overview-1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#res.pool.overview-1.5'>(1.5)</a></div><div class='texpara'><div id='res.pool.overview-1.5.sentence-1' class='sentence'>A <span class='texttt'>pool_<span class='shy'></span>options</span> struct may be passed to the pool resource constructors
to tune the largest block size and the maximum chunk size<a class='hidden_link' href='#res.pool.overview-1.5.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='res.pool.overview-2'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.overview-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6056'>#</a></div><div class='texpara'><div id='res.pool.overview-2.sentence-1' class='sentence'>A <span class='texttt'>synchronized_<span class='shy'></span>pool_<span class='shy'></span>resource</span> may be accessed from multiple threads
without external synchronization
and may have thread-specific pools to reduce synchronization costs<a class='hidden_link' href='#res.pool.overview-2.sentence-1'>.</a></div> <div id='res.pool.overview-2.sentence-2' class='sentence'>An <span class='texttt'>unsynchronized_<span class='shy'></span>pool_<span class='shy'></span>resource</span> class may not be accessed
from multiple threads simultaneously
and thus avoids the cost of synchronization entirely
in single-threaded applications<a class='hidden_link' href='#res.pool.overview-2.sentence-2'>.</a></div></div><div class='texpara'><span id='lib:unsynchronized_pool_resource'><span id='lib:synchronized_pool_resource'><span id='lib:pool_options'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:pool_options'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std<span class='operator'>::</span>pmr <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> pool_options <span class='curlybracket'>{</span>
    size_t max_blocks_per_chunk <span class='operator'>=</span> <span class='literal'>0</span>;
    size_t largest_required_pool_block <span class='operator'>=</span> <span class='literal'>0</span>;
  <span class='curlybracket'>}</span>;

  <span class='keyword'>class</span> synchronized_pool_resource <span class='operator'>:</span> <span class='keyword'>public</span> memory_resource <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    synchronized_pool_resource<span class='parenthesis'>(</span><span class='keyword'>const</span> pool_options<span class='operator'>&amp;</span> opts, memory_resource<span class='operator'>*</span> upstream<span class='parenthesis'>)</span>;

    synchronized_pool_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
        <span class='operator'>:</span> synchronized_pool_resource<span class='parenthesis'>(</span>pool_options<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, get_default_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    <span class='keyword'>explicit</span> synchronized_pool_resource<span class='parenthesis'>(</span>memory_resource<span class='operator'>*</span> upstream<span class='parenthesis'>)</span>
        <span class='operator'>:</span> synchronized_pool_resource<span class='parenthesis'>(</span>pool_options<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, upstream<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    <span class='keyword'>explicit</span> synchronized_pool_resource<span class='parenthesis'>(</span><span class='keyword'>const</span> pool_options<span class='operator'>&amp;</span> opts<span class='parenthesis'>)</span>
        <span class='operator'>:</span> synchronized_pool_resource<span class='parenthesis'>(</span>opts, get_default_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>

    synchronized_pool_resource<span class='parenthesis'>(</span><span class='keyword'>const</span> synchronized_pool_resource<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    <span class='keyword'>virtual</span> <span class='operator'>~</span>synchronized_pool_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    synchronized_pool_resource<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> synchronized_pool_resource<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> release<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    memory_resource<span class='operator'>*</span> upstream_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    pool_options options<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;

  <span class='keyword'>protected</span><span class='operator'>:</span>
    <span class='keyword'>void</span><span class='operator'>*</span> do_allocate<span class='parenthesis'>(</span>size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='keyword'>override</span>;
    <span class='keyword'>void</span> do_deallocate<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p, size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='keyword'>override</span>;

    <span class='keyword'>bool</span> do_is_equal<span class='parenthesis'>(</span><span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='keyword'>override</span>;
  <span class='curlybracket'>}</span>;

  <span class='keyword'>class</span> unsynchronized_pool_resource <span class='operator'>:</span> <span class='keyword'>public</span> memory_resource <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    unsynchronized_pool_resource<span class='parenthesis'>(</span><span class='keyword'>const</span> pool_options<span class='operator'>&amp;</span> opts, memory_resource<span class='operator'>*</span> upstream<span class='parenthesis'>)</span>;

    unsynchronized_pool_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
        <span class='operator'>:</span> unsynchronized_pool_resource<span class='parenthesis'>(</span>pool_options<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, get_default_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    <span class='keyword'>explicit</span> unsynchronized_pool_resource<span class='parenthesis'>(</span>memory_resource<span class='operator'>*</span> upstream<span class='parenthesis'>)</span>
        <span class='operator'>:</span> unsynchronized_pool_resource<span class='parenthesis'>(</span>pool_options<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, upstream<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    <span class='keyword'>explicit</span> unsynchronized_pool_resource<span class='parenthesis'>(</span><span class='keyword'>const</span> pool_options<span class='operator'>&amp;</span> opts<span class='parenthesis'>)</span>
        <span class='operator'>:</span> unsynchronized_pool_resource<span class='parenthesis'>(</span>opts, get_default_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>

    unsynchronized_pool_resource<span class='parenthesis'>(</span><span class='keyword'>const</span> unsynchronized_pool_resource<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    <span class='keyword'>virtual</span> <span class='operator'>~</span>unsynchronized_pool_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    unsynchronized_pool_resource<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> unsynchronized_pool_resource<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> release<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    memory_resource<span class='operator'>*</span> upstream_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
    pool_options options<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;

  <span class='keyword'>protected</span><span class='operator'>:</span>
    <span class='keyword'>void</span><span class='operator'>*</span> do_allocate<span class='parenthesis'>(</span>size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='keyword'>override</span>;
    <span class='keyword'>void</span> do_deallocate<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p, size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='keyword'>override</span>;

    <span class='keyword'>bool</span> do_is_equal<span class='parenthesis'>(</span><span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='keyword'>override</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></span></span></div></div></div><div id='res.pool.options' class='section'><h4 ><a class='secnum' href='#res.pool.options' style='min-width:95pt'>20.4.5.2</a> <span class='texttt'>pool_<span class='shy'></span>options</span> data members <a class='abbr_ref' href='mem.res.pool.options'>[mem.res.pool.options]</a></h4><div class='para' id='res.pool.options-1'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.options-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6133'>#</a></div><div class='texpara'><div id='res.pool.options-1.sentence-1' class='sentence'>The members of <span class='texttt'>pool_<span class='shy'></span>options</span>
comprise a set of constructor options for pool resources<a class='hidden_link' href='#res.pool.options-1.sentence-1'>.</a></div> <div id='res.pool.options-1.sentence-2' class='sentence'>The effect of each option on the pool resource behavior is described below:</div></div></div><div class='texpara'><div id='lib:max_blocks_per_chunk,pool_options'><div id='lib:pool_options,max_blocks_per_chunk'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:pool_options,max_blocks_per_chunk'>🔗</a></div><code class='itemdeclcode'>size_t max_blocks_per_chunk;
</code></div></div></div></div><div class='para' id='res.pool.options-2'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.options-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6144'>#</a></div><div class='texpara'><div id='res.pool.options-2.sentence-1' class='sentence'>The maximum number of blocks that will be allocated at once
from the upstream memory resource (<a href='#res.monotonic.buffer' title='20.4.6&emsp;Class monotonic_&shy;buffer_&shy;resource'>[mem.<span class='shy'></span>res.<span class='shy'></span>monotonic.<span class='shy'></span>buffer]</a>)
to replenish a pool<a class='hidden_link' href='#res.pool.options-2.sentence-1'>.</a></div> <div id='res.pool.options-2.sentence-2' class='sentence'>If the value of <span class='texttt'>max_<span class='shy'></span>blocks_<span class='shy'></span>per_<span class='shy'></span>chunk</span> is zero or
is greater than an <a class='index' id=':largest_supported_value_to_configure_the_maximum_number_of_blocks_to_replenish_a_pool'></a>implementation-defined
limit, that limit is used instead<a class='hidden_link' href='#res.pool.options-2.sentence-2'>.</a></div> <div id='res.pool.options-2.sentence-3' class='sentence'>The implementation
may choose to use a smaller value than is specified in this field and
may use different values for different pools<a class='hidden_link' href='#res.pool.options-2.sentence-3'>.</a></div></div></div></div><div class='texpara'><div id='lib:largest_required_pool_block,pool_options'><div id='lib:pool_options,largest_required_pool_block'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:pool_options,largest_required_pool_block'>🔗</a></div><code class='itemdeclcode'>size_t largest_required_pool_block;
</code></div></div></div></div><div class='para' id='res.pool.options-3'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.options-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6162'>#</a></div><div class='texpara'><div id='res.pool.options-3.sentence-1' class='sentence'>The largest allocation size that is required to be fulfilled
using the pooling mechanism<a class='hidden_link' href='#res.pool.options-3.sentence-1'>.</a></div> <div id='res.pool.options-3.sentence-2' class='sentence'>Attempts to allocate a single block larger than this threshold
will be allocated directly from the upstream memory resource<a class='hidden_link' href='#res.pool.options-3.sentence-2'>.</a></div> <div id='res.pool.options-3.sentence-3' class='sentence'>If <span class='texttt'>largest_<span class='shy'></span>required_<span class='shy'></span>pool_<span class='shy'></span>block</span> is zero or
is greater than an <a class='index' id=':largest_supported_value_to_configure_the_largest_allocation_satisfied_directly_by_a_pool'></a>implementation-defined
limit, that limit is used instead<a class='hidden_link' href='#res.pool.options-3.sentence-3'>.</a></div> <div id='res.pool.options-3.sentence-4' class='sentence'>The implementation may choose a pass-through threshold
larger than specified in this field<a class='hidden_link' href='#res.pool.options-3.sentence-4'>.</a></div></div></div></div></div><div id='res.pool.ctor' class='section'><h4 ><a class='secnum' href='#res.pool.ctor' style='min-width:95pt'>20.4.5.3</a> Constructors and destructors <a class='abbr_ref' href='mem.res.pool.ctor'>[mem.res.pool.ctor]</a></h4><div class='texpara'><div id='lib:unsynchronized_pool_resource,constructor'><div id='lib:synchronized_pool_resource,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:synchronized_pool_resource,constructor'>🔗</a></div><code class='itemdeclcode'>synchronized_pool_resource<span class='parenthesis'>(</span><span class='keyword'>const</span> pool_options<span class='operator'>&amp;</span> opts, memory_resource<span class='operator'>*</span> upstream<span class='parenthesis'>)</span>;
unsynchronized_pool_resource<span class='parenthesis'>(</span><span class='keyword'>const</span> pool_options<span class='operator'>&amp;</span> opts, memory_resource<span class='operator'>*</span> upstream<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='res.pool.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.ctor-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6184'>#</a></div><div class='texpara'><div id='res.pool.ctor-1.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>upstream</span> is the address of a valid memory resource<a class='hidden_link' href='#res.pool.ctor-1.sentence-1'>.</a></div></div></div></div><div class='para' id='res.pool.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.ctor-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6188'>#</a></div><div class='texpara'><div id='res.pool.ctor-2.sentence-1' class='sentence'><i >Effects</i>: Constructs a pool resource object that will obtain memory from <span class='texttt'>upstream</span>
whenever the pool resource is unable to satisfy a memory request
from its own internal data structures<a class='hidden_link' href='#res.pool.ctor-2.sentence-1'>.</a></div> <div id='res.pool.ctor-2.sentence-2' class='sentence'>The resulting object will hold a copy of <span class='texttt'>upstream</span>,
but will not own the resource to which <span class='texttt'>upstream</span> points<a class='hidden_link' href='#res.pool.ctor-2.sentence-2'>.</a></div> <div id='res.pool.ctor-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#res.pool.ctor-note-1'>1</a></i>:&ensp;<div id='res.pool.ctor-2.sentence-3' class='sentence'>The intention is that calls to <span class='texttt'>upstream<span class='operator'>-</span><span class='anglebracket'>&gt;</span>allocate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
will be substantially fewer than calls to <span class='texttt'><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>allocate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
in most cases<a class='hidden_link' href='#res.pool.ctor-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='res.pool.ctor-2.sentence-4' class='sentence'>
The behavior of the pooling mechanism is tuned
according to the value of the <span class='texttt'>opts</span> argument<a class='hidden_link' href='#res.pool.ctor-2.sentence-4'>.</a></div></div></div></div><div class='para' id='res.pool.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.ctor-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6203'>#</a></div><div class='texpara'><div id='res.pool.ctor-3.sentence-1' class='sentence'><i >Throws</i>: Nothing unless <span class='texttt'>upstream<span class='operator'>-</span><span class='anglebracket'>&gt;</span>allocate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> throws<a class='hidden_link' href='#res.pool.ctor-3.sentence-1'>.</a></div> <div id='res.pool.ctor-3.sentence-2' class='sentence'>It is unspecified if, or under what conditions,
this constructor calls <span class='texttt'>upstream<span class='operator'>-</span><span class='anglebracket'>&gt;</span>allocate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#res.pool.ctor-3.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:unsynchronized_pool_resource,destructor'><div id='lib:synchronized_pool_resource,destructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:synchronized_pool_resource,destructor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>virtual</span> <span class='operator'>~</span>synchronized_pool_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>virtual</span> <span class='operator'>~</span>unsynchronized_pool_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='res.pool.ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.ctor-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6218'>#</a></div><div class='texpara'><div id='res.pool.ctor-4.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'>release<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#res.pool.ctor-4.sentence-1'>.</a></div></div></div></div></div><div id='res.pool.mem' class='section'><h4 ><a class='secnum' href='#res.pool.mem' style='min-width:95pt'>20.4.5.4</a> Members <a class='abbr_ref' href='mem.res.pool.mem'>[mem.res.pool.mem]</a></h4><div class='texpara'><div id='lib:unsynchronized_pool_resource,release'><div id='lib:release,unsynchronized_pool_resource'><div id='lib:synchronized_pool_resource,release'><div id='lib:release,synchronized_pool_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:release,synchronized_pool_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> release<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div></div></div></div><div class='para' id='res.pool.mem-1'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.mem-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6232'>#</a></div><div class='texpara'><div id='res.pool.mem-1.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'>upstream_<span class='shy'></span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>deallocate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> as necessary
to release all allocated memory<a class='hidden_link' href='#res.pool.mem-1.sentence-1'>.</a></div> <div id='res.pool.mem-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#res.pool.mem-note-1'>1</a></i>:&ensp;<div id='res.pool.mem-1.sentence-2' class='sentence'>The memory is released back to <span class='texttt'>upstream_<span class='shy'></span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
even if <span class='texttt'>deallocate</span> has not been called
for some of the allocated blocks<a class='hidden_link' href='#res.pool.mem-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:unsynchronized_pool_resource,upstream_resource'><div id='lib:upstream_resource,unsynchronized_pool_resource'><div id='lib:synchronized_pool_resource,upstream_resource'><div id='lib:upstream_resource,synchronized_pool_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:upstream_resource,synchronized_pool_resource'>🔗</a></div><code class='itemdeclcode'>memory_resource<span class='operator'>*</span> upstream_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div></div></div></div><div class='para' id='res.pool.mem-2'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.mem-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6250'>#</a></div><div class='texpara'><div id='res.pool.mem-2.sentence-1' class='sentence'><i >Returns</i>: The value of the <span class='texttt'>upstream</span> argument
provided to the constructor of this object<a class='hidden_link' href='#res.pool.mem-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unsynchronized_pool_resource,options'><div id='lib:options,unsynchronized_pool_resource'><div id='lib:synchronized_pool_resource,options'><div id='lib:options,synchronized_pool_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:options,synchronized_pool_resource'>🔗</a></div><code class='itemdeclcode'>pool_options options<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div></div></div></div><div class='para' id='res.pool.mem-3'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.mem-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6263'>#</a></div><div class='texpara'><div id='res.pool.mem-3.sentence-1' class='sentence'><i >Returns</i>: The options that control the pooling behavior of this resource<a class='hidden_link' href='#res.pool.mem-3.sentence-1'>.</a></div> <div id='res.pool.mem-3.sentence-2' class='sentence'>The values in the returned struct may differ
from those supplied to the pool resource constructor in that
values of zero will be replaced with <a class='index' id=':default_configuration_of_a_pool'></a>implementation-defined
defaults, and sizes may be rounded to unspecified granularity<a class='hidden_link' href='#res.pool.mem-3.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:unsynchronized_pool_resource,do_allocate'><div id='lib:do_allocate,unsynchronized_pool_resource'><div id='lib:synchronized_pool_resource,do_allocate'><div id='lib:do_allocate,synchronized_pool_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:do_allocate,synchronized_pool_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span><span class='operator'>*</span> do_allocate<span class='parenthesis'>(</span>size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='keyword'>override</span>;
</code></div></div></div></div></div></div><div class='para' id='res.pool.mem-4'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.mem-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6279'>#</a></div><div class='texpara'><div id='res.pool.mem-4.sentence-1' class='sentence'><i >Effects</i>: If the pool selected for a block of size <span class='texttt'>bytes</span>
is unable to satisfy the memory request from its own internal data structures,
it will call <span class='texttt'>upstream_<span class='shy'></span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>allocate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> to obtain more memory<a class='hidden_link' href='#res.pool.mem-4.sentence-1'>.</a></div> <div id='res.pool.mem-4.sentence-2' class='sentence'>If <span class='texttt'>bytes</span> is larger than that which the largest pool can handle,
then memory will be allocated using <span class='texttt'>upstream_<span class='shy'></span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>allocate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#res.pool.mem-4.sentence-2'>.</a></div></div></div></div><div class='para' id='res.pool.mem-5'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.mem-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6287'>#</a></div><div class='texpara'><div id='res.pool.mem-5.sentence-1' class='sentence'><i >Returns</i>: A pointer to allocated storage (<a href='basic.stc.dynamic.allocation' title='6.7.5.5.2&emsp;Allocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>allocation]</a>)
with a size of at least <span class='texttt'>bytes</span><a class='hidden_link' href='#res.pool.mem-5.sentence-1'>.</a></div> <div id='res.pool.mem-5.sentence-2' class='sentence'>The size and alignment of the allocated memory shall meet the requirements
for a class derived from <span class='texttt'>memory_<span class='shy'></span>resource</span> (<a href='#res.class' title='20.4.2&emsp;Class memory_&shy;resource'>[mem.<span class='shy'></span>res.<span class='shy'></span>class]</a>)<a class='hidden_link' href='#res.pool.mem-5.sentence-2'>.</a></div></div></div></div><div class='para' id='res.pool.mem-6'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.mem-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6294'>#</a></div><div class='texpara'><div id='res.pool.mem-6.sentence-1' class='sentence'><i >Throws</i>: Nothing unless <span class='texttt'>upstream_<span class='shy'></span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>allocate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> throws<a class='hidden_link' href='#res.pool.mem-6.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unsynchronized_pool_resource,do_deallocate'><div id='lib:do_deallocate,unsynchronized_pool_resource'><div id='lib:synchronized_pool_resource,do_deallocate'><div id='lib:do_deallocate,synchronized_pool_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:do_deallocate,synchronized_pool_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> do_deallocate<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p, size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='keyword'>override</span>;
</code></div></div></div></div></div></div><div class='para' id='res.pool.mem-7'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.mem-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6306'>#</a></div><div class='texpara'><div id='res.pool.mem-7.sentence-1' class='sentence'><i >Effects</i>: Returns the memory at <span class='texttt'>p</span> to the pool<a class='hidden_link' href='#res.pool.mem-7.sentence-1'>.</a></div> <div id='res.pool.mem-7.sentence-2' class='sentence'>It is unspecified if, or under what circumstances,
this operation will result in a call to <span class='texttt'>upstream_<span class='shy'></span>resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>deallocate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#res.pool.mem-7.sentence-2'>.</a></div></div></div></div><div class='para' id='res.pool.mem-8'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.mem-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6312'>#</a></div><div class='texpara'><div id='res.pool.mem-8.sentence-1' class='sentence'><i >Throws</i>: Nothing<a class='hidden_link' href='#res.pool.mem-8.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:unsynchronized_pool_resource,do_is_equal'><div id='lib:do_is_equal,unsynchronized_pool_resource'><div id='lib:synchronized_pool_resource,do_is_equal'><div id='lib:do_is_equal,synchronized_pool_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:do_is_equal,synchronized_pool_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> do_is_equal<span class='parenthesis'>(</span><span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='keyword'>override</span>;
</code></div></div></div></div></div></div><div class='para' id='res.pool.mem-9'><div class='marginalizedparent'><a class='marginalized' href='#res.pool.mem-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6324'>#</a></div><div class='texpara'><div id='res.pool.mem-9.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='keyword'>this</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='operator'>&amp;</span>other</span><a class='hidden_link' href='#res.pool.mem-9.sentence-1'>.</a></div></div></div></div></div></div><div id='res.monotonic.buffer' class='section'><h3 ><a class='secnum' href='#res.monotonic.buffer' style='min-width:80pt'>20.4.6</a> Class <span class='texttt'>monotonic_<span class='shy'></span>buffer_<span class='shy'></span>resource</span> <a class='abbr_ref' href='mem.res.monotonic.buffer'>[mem.res.monotonic.buffer]</a></h3><div id='res.monotonic.buffer.general' class='section'><h4 ><a class='secnum' href='#res.monotonic.buffer.general' style='min-width:95pt'>20.4.6.1</a> General <a class='abbr_ref' href='mem.res.monotonic.buffer.general'>[mem.res.monotonic.buffer.general]</a></h4><div class='para' id='res.monotonic.buffer.general-1'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6333'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.general-1.sentence-1' class='sentence'>A <span class='texttt'>monotonic_<span class='shy'></span>buffer_<span class='shy'></span>resource</span> is a special-purpose memory resource
intended for very fast memory allocations in situations
where memory is used to build up a few objects
and then is released all at once when the memory resource object is destroyed<a class='hidden_link' href='#res.monotonic.buffer.general-1.sentence-1'>.</a></div></div><div class='texpara'><span id='lib:monotonic_buffer_resource'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:monotonic_buffer_resource'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std<span class='operator'>::</span>pmr <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> monotonic_buffer_resource <span class='operator'>:</span> <span class='keyword'>public</span> memory_resource <span class='curlybracket'>{</span>
    memory_resource<span class='operator'>*</span> upstream_rsrc;     <span class='comment'>// <i >exposition only</i></span>
    <span class='keyword'>void</span><span class='operator'>*</span> current_buffer;               <span class='comment'>// <i >exposition only</i></span>
    size_t next_buffer_size;            <span class='comment'>// <i >exposition only</i></span>

  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>explicit</span> monotonic_buffer_resource<span class='parenthesis'>(</span>memory_resource<span class='operator'>*</span> upstream<span class='parenthesis'>)</span>;
    monotonic_buffer_resource<span class='parenthesis'>(</span>size_t initial_size, memory_resource<span class='operator'>*</span> upstream<span class='parenthesis'>)</span>;
    monotonic_buffer_resource<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> buffer, size_t buffer_size, memory_resource<span class='operator'>*</span> upstream<span class='parenthesis'>)</span>;

    monotonic_buffer_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
      <span class='operator'>:</span> monotonic_buffer_resource<span class='parenthesis'>(</span>get_default_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    <span class='keyword'>explicit</span> monotonic_buffer_resource<span class='parenthesis'>(</span>size_t initial_size<span class='parenthesis'>)</span>
      <span class='operator'>:</span> monotonic_buffer_resource<span class='parenthesis'>(</span>initial_size, get_default_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    monotonic_buffer_resource<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> buffer, size_t buffer_size<span class='parenthesis'>)</span>
      <span class='operator'>:</span> monotonic_buffer_resource<span class='parenthesis'>(</span>buffer, buffer_size, get_default_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>

    monotonic_buffer_resource<span class='parenthesis'>(</span><span class='keyword'>const</span> monotonic_buffer_resource<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>virtual</span> <span class='operator'>~</span>monotonic_buffer_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    monotonic_buffer_resource<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> monotonic_buffer_resource<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> release<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    memory_resource<span class='operator'>*</span> upstream_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;

  <span class='keyword'>protected</span><span class='operator'>:</span>
    <span class='keyword'>void</span><span class='operator'>*</span> do_allocate<span class='parenthesis'>(</span>size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='keyword'>override</span>;
    <span class='keyword'>void</span> do_deallocate<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p, size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='keyword'>override</span>;

    <span class='keyword'>bool</span> do_is_equal<span class='parenthesis'>(</span><span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='keyword'>override</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div></div></div><div id='res.monotonic.buffer.ctor' class='section'><h4 ><a class='secnum' href='#res.monotonic.buffer.ctor' style='min-width:95pt'>20.4.6.2</a> Constructors and destructor <a class='abbr_ref' href='mem.res.monotonic.buffer.ctor'>[mem.res.monotonic.buffer.ctor]</a></h4><div class='texpara'><div id='lib:monotonic_buffer_resource,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:monotonic_buffer_resource,constructor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>explicit</span> monotonic_buffer_resource<span class='parenthesis'>(</span>memory_resource<span class='operator'>*</span> upstream<span class='parenthesis'>)</span>;
monotonic_buffer_resource<span class='parenthesis'>(</span>size_t initial_size, memory_resource<span class='operator'>*</span> upstream<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='res.monotonic.buffer.ctor-1'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.ctor-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6386'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.ctor-1.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>upstream</span> is the address of a valid memory resource<a class='hidden_link' href='#res.monotonic.buffer.ctor-1.sentence-1'>.</a></div> <div id='res.monotonic.buffer.ctor-1.sentence-2' class='sentence'><span class='texttt'>initial_<span class='shy'></span>size</span>, if specified, is greater than zero<a class='hidden_link' href='#res.monotonic.buffer.ctor-1.sentence-2'>.</a></div></div></div></div><div class='para' id='res.monotonic.buffer.ctor-2'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.ctor-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6391'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.ctor-2.sentence-1' class='sentence'><i >Effects</i>: Sets <span class='texttt'>upstream_<span class='shy'></span>rsrc</span> to <span class='texttt'>upstream</span> and
<span class='texttt'>current_<span class='shy'></span>buffer</span> to <span id=':nullptr_'><span class='texttt'><span class='literal'>nullptr</span></span></span><a class='hidden_link' href='#res.monotonic.buffer.ctor-2.sentence-1'>.</a></div> <div id='res.monotonic.buffer.ctor-2.sentence-2' class='sentence'>If <span class='texttt'>initial_<span class='shy'></span>size</span> is specified,
sets <span class='texttt'>next_<span class='shy'></span>buffer_<span class='shy'></span>size</span> to at least <span class='texttt'>initial_<span class='shy'></span>size</span>;
otherwise sets <span class='texttt'>next_<span class='shy'></span>buffer_<span class='shy'></span>size</span> to an
<a class='index' id=':default_next_buffer_size_for_a_monotonic_buffer_resource'></a>implementation-defined size<a class='hidden_link' href='#res.monotonic.buffer.ctor-2.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:monotonic_buffer_resource,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:monotonic_buffer_resource,constructor_'>🔗</a></div><code class='itemdeclcode'>monotonic_buffer_resource<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> buffer, size_t buffer_size, memory_resource<span class='operator'>*</span> upstream<span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='res.monotonic.buffer.ctor-3'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.ctor-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6407'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.ctor-3.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>upstream</span> is the address of a valid memory resource<a class='hidden_link' href='#res.monotonic.buffer.ctor-3.sentence-1'>.</a></div> <div id='res.monotonic.buffer.ctor-3.sentence-2' class='sentence'><span class='texttt'>buffer_<span class='shy'></span>size</span> is no larger than the number of bytes in <span class='texttt'>buffer</span><a class='hidden_link' href='#res.monotonic.buffer.ctor-3.sentence-2'>.</a></div></div></div></div><div class='para' id='res.monotonic.buffer.ctor-4'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.ctor-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6412'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.ctor-4.sentence-1' class='sentence'><i >Effects</i>: Sets <span class='texttt'>upstream_<span class='shy'></span>rsrc</span> to <span class='texttt'>upstream</span>,
<span class='texttt'>current_<span class='shy'></span>buffer</span> to <span class='texttt'>buffer</span>, and
<span class='texttt'>next_<span class='shy'></span>buffer_<span class='shy'></span>size</span> to <span class='texttt'>buffer_<span class='shy'></span>size</span> (but not less than 1),
then increases <span class='texttt'>next_<span class='shy'></span>buffer_<span class='shy'></span>size</span>
by an <a class='index' id=':growth_factor_for_monotonic_buffer_resource'></a>implementation-defined growth factor (which need not be integral)<a class='hidden_link' href='#res.monotonic.buffer.ctor-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:monotonic_buffer_resource,destructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:monotonic_buffer_resource,destructor'>🔗</a></div><code class='itemdeclcode'><span class='operator'>~</span>monotonic_buffer_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='res.monotonic.buffer.ctor-5'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.ctor-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6427'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.ctor-5.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'>release<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#res.monotonic.buffer.ctor-5.sentence-1'>.</a></div></div></div></div></div><div id='res.monotonic.buffer.mem' class='section'><h4 ><a class='secnum' href='#res.monotonic.buffer.mem' style='min-width:95pt'>20.4.6.3</a> Members <a class='abbr_ref' href='mem.res.monotonic.buffer.mem'>[mem.res.monotonic.buffer.mem]</a></h4><div class='texpara'><div id='lib:monotonic_buffer_resource,release'><div id='lib:release,monotonic_buffer_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:release,monotonic_buffer_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> release<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='res.monotonic.buffer.mem-1'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.mem-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6441'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.mem-1.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'>upstream_<span class='shy'></span>rsrc<span class='operator'>-</span><span class='anglebracket'>&gt;</span>deallocate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> as necessary
to release all allocated memory<a class='hidden_link' href='#res.monotonic.buffer.mem-1.sentence-1'>.</a></div> <div id='res.monotonic.buffer.mem-1.sentence-2' class='sentence'>Resets <span class='texttt'>current_<span class='shy'></span>buffer</span> and <span class='texttt'>next_<span class='shy'></span>buffer_<span class='shy'></span>size</span>
to their initial values at construction<a class='hidden_link' href='#res.monotonic.buffer.mem-1.sentence-2'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='res.monotonic.buffer.mem-2'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.mem-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6448'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.mem-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#res.monotonic.buffer.mem-note-1'>1</a></i>:&ensp;<div id='res.monotonic.buffer.mem-2.sentence-1' class='sentence'>The memory is released back to <span class='texttt'>upstream_<span class='shy'></span>rsrc</span>
even if some blocks that were allocated from <span id=':this__'><span class='texttt'><span class='keyword'>this</span></span></span>
have not been deallocated from <span id=':this___'><span class='texttt'><span class='keyword'>this</span></span></span><a class='hidden_link' href='#res.monotonic.buffer.mem-2.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:monotonic_buffer_resource,upstream_resource'><div id='lib:upstream_resource,monotonic_buffer_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:upstream_resource,monotonic_buffer_resource'>🔗</a></div><code class='itemdeclcode'>memory_resource<span class='operator'>*</span> upstream_resource<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div></div><div class='para' id='res.monotonic.buffer.mem-3'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.mem-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6462'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.mem-3.sentence-1' class='sentence'><i >Returns</i>: The value of <span class='texttt'>upstream_<span class='shy'></span>rsrc</span><a class='hidden_link' href='#res.monotonic.buffer.mem-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:monotonic_buffer_resource,do_allocate'><div id='lib:do_allocate,monotonic_buffer_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:do_allocate,monotonic_buffer_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span><span class='operator'>*</span> do_allocate<span class='parenthesis'>(</span>size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='keyword'>override</span>;
</code></div></div></div></div><div class='para' id='res.monotonic.buffer.mem-4'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.mem-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6473'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.mem-4.sentence-1' class='sentence'><i >Effects</i>: If the unused space in <span class='texttt'>current_<span class='shy'></span>buffer</span>
can fit a block with the specified <span class='texttt'>bytes</span> and <span class='texttt'>alignment</span>,
then allocate the return block from <span class='texttt'>current_<span class='shy'></span>buffer</span>;
otherwise set <span class='texttt'>current_<span class='shy'></span>buffer</span> to <span class='texttt'>upstream_<span class='shy'></span>rsrc<span class='operator'>-</span><span class='anglebracket'>&gt;</span>allocate<span class='parenthesis'>(</span>n, m<span class='parenthesis'>)</span></span>,
where <span class='texttt'>n</span> is not less than <span class='texttt'>max<span class='parenthesis'>(</span>bytes, next_<span class='shy'></span>buffer_<span class='shy'></span>size<span class='parenthesis'>)</span></span> and
<span class='texttt'>m</span> is not less than <span class='texttt'>alignment</span>,
and increase <span class='texttt'>next_<span class='shy'></span>buffer_<span class='shy'></span>size</span>
by an <a class='index' id=':growth_factor_for_monotonic_buffer_resource_'></a>implementation-defined growth factor (which need not be integral),
then allocate the return block from the newly-allocated <span class='texttt'>current_<span class='shy'></span>buffer</span><a class='hidden_link' href='#res.monotonic.buffer.mem-4.sentence-1'>.</a></div></div></div></div><div class='para' id='res.monotonic.buffer.mem-5'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.mem-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6485'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.mem-5.sentence-1' class='sentence'><i >Returns</i>: A pointer to allocated storage (<a href='basic.stc.dynamic.allocation' title='6.7.5.5.2&emsp;Allocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>allocation]</a>)
with a size of at least <span class='texttt'>bytes</span><a class='hidden_link' href='#res.monotonic.buffer.mem-5.sentence-1'>.</a></div> <div id='res.monotonic.buffer.mem-5.sentence-2' class='sentence'>The size and alignment of the allocated memory shall meet the requirements
for a class derived from <span class='texttt'>memory_<span class='shy'></span>resource</span> (<a href='#res.class' title='20.4.2&emsp;Class memory_&shy;resource'>[mem.<span class='shy'></span>res.<span class='shy'></span>class]</a>)<a class='hidden_link' href='#res.monotonic.buffer.mem-5.sentence-2'>.</a></div></div></div></div><div class='para' id='res.monotonic.buffer.mem-6'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.mem-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6492'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.mem-6.sentence-1' class='sentence'><i >Throws</i>: Nothing unless <span class='texttt'>upstream_<span class='shy'></span>rsrc<span class='operator'>-</span><span class='anglebracket'>&gt;</span>allocate<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> throws<a class='hidden_link' href='#res.monotonic.buffer.mem-6.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:monotonic_buffer_resource,do_deallocate'><div id='lib:do_deallocate,monotonic_buffer_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:do_deallocate,monotonic_buffer_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> do_deallocate<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> p, size_t bytes, size_t alignment<span class='parenthesis'>)</span> <span class='keyword'>override</span>;
</code></div></div></div></div><div class='para' id='res.monotonic.buffer.mem-7'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.mem-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6503'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.mem-7.sentence-1' class='sentence'><i >Effects</i>: None<a class='hidden_link' href='#res.monotonic.buffer.mem-7.sentence-1'>.</a></div></div></div></div><div class='para' id='res.monotonic.buffer.mem-8'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.mem-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6507'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.mem-8.sentence-1' class='sentence'><i >Throws</i>: Nothing<a class='hidden_link' href='#res.monotonic.buffer.mem-8.sentence-1'>.</a></div></div></div></div><div class='para' id='res.monotonic.buffer.mem-9'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.mem-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6511'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.mem-9.sentence-1' class='sentence'><i >Remarks</i>: Memory used by this resource increases monotonically until its destruction<a class='hidden_link' href='#res.monotonic.buffer.mem-9.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:monotonic_buffer_resource,do_is_equal'><div id='lib:do_is_equal,monotonic_buffer_resource'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:do_is_equal,monotonic_buffer_resource'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> do_is_equal<span class='parenthesis'>(</span><span class='keyword'>const</span> memory_resource<span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='keyword'>override</span>;
</code></div></div></div></div><div class='para' id='res.monotonic.buffer.mem-10'><div class='marginalizedparent'><a class='marginalized' href='#res.monotonic.buffer.mem-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6522'>#</a></div><div class='texpara'><div id='res.monotonic.buffer.mem-10.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='keyword'>this</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='operator'>&amp;</span>other</span><a class='hidden_link' href='#res.monotonic.buffer.mem-10.sentence-1'>.</a></div></div></div></div></div></div></div><div id='allocator.adaptor' class='section'><h2 ><a class='secnum' href='#allocator.adaptor' style='min-width:65pt'>20.5</a> Class template <span class='texttt'>scoped_<span class='shy'></span>allocator_<span class='shy'></span>adaptor</span> <a class='abbr_ref' href='allocator.adaptor'>[allocator.adaptor]</a></h2><div id='allocator.adaptor.syn' class='section'><h3 ><a class='secnum' href='#allocator.adaptor.syn' style='min-width:80pt'>20.5.1</a> Header <span class='texttt'>&lt;scoped_<span class='shy'></span>allocator&gt;</span> synopsis <a class='abbr_ref' href='allocator.adaptor.syn'>[allocator.adaptor.syn]</a></h3><div class='texpara'><span id='header:<scoped_allocator>'><div class='marginalizedparent'><a class='itemDeclLink' href='#header:%3cscoped_allocator%3e'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='comment'>// class template <span class='tcode_in_codeblock'>scoped_<span class='shy'></span>allocator_<span class='shy'></span>adaptor</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> OuterAlloc, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> InnerAlloc<span class='anglebracket'>&gt;</span>
    <span class='keyword'>class</span> scoped_allocator_adaptor;

  <span class='comment'>// <a href='#scoped.adaptor.operators' title='20.5.5&emsp;Operators'>[scoped.<span class='shy'></span>adaptor.<span class='shy'></span>operators]</a>, scoped allocator operators</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> OuterA1, <span class='keyword'>class</span> OuterA2, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> InnerAllocs<span class='anglebracket'>&gt;</span>
    <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> scoped_allocator_adaptor<span class='anglebracket'>&lt;</span>OuterA1, InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a,
                    <span class='keyword'>const</span> scoped_allocator_adaptor<span class='anglebracket'>&lt;</span>OuterA2, InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='curlybracket'>}</span>
</span></span></div><div class='para' id='allocator.adaptor.syn-1'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.syn-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6546'>#</a></div><div class='texpara'><div id='allocator.adaptor.syn-1.sentence-1' class='sentence'>The class template <span class='texttt'>scoped_<span class='shy'></span>allocator_<span class='shy'></span>adaptor</span> is an allocator template that
specifies an allocator resource (the outer allocator) to be used by a container (as any
other allocator does) and also specifies an inner allocator resource to be passed to the
constructor of every element within the container<a class='hidden_link' href='#allocator.adaptor.syn-1.sentence-1'>.</a></div> <div id='allocator.adaptor.syn-1.sentence-2' class='sentence'>This adaptor is instantiated with one
outer and zero or more inner allocator types<a class='hidden_link' href='#allocator.adaptor.syn-1.sentence-2'>.</a></div> <div id='allocator.adaptor.syn-1.sentence-3' class='sentence'>If instantiated with only one allocator
type, the inner allocator becomes the <span class='texttt'>scoped_<span class='shy'></span>allocator_<span class='shy'></span>adaptor</span> itself, thus
using the same allocator resource for the container and every element within the
container and, if the elements themselves are containers, each of their elements
recursively<a class='hidden_link' href='#allocator.adaptor.syn-1.sentence-3'>.</a></div> <div id='allocator.adaptor.syn-1.sentence-4' class='sentence'>If instantiated with more than one allocator, the first allocator is the
outer allocator for use by the container, the second allocator is passed to the
constructors of the container's elements, and, if the elements themselves are
containers, the third allocator is passed to the elements' elements, and so on<a class='hidden_link' href='#allocator.adaptor.syn-1.sentence-4'>.</a></div> <div id='allocator.adaptor.syn-1.sentence-5' class='sentence'>If
containers are nested to a depth greater than the number of allocators, the last
allocator is used repeatedly, as in the single-allocator case, for any remaining
recursions<a class='hidden_link' href='#allocator.adaptor.syn-1.sentence-5'>.</a></div> <div id='allocator.adaptor.syn-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#allocator.adaptor.syn-note-1'>1</a></i>:&ensp;<div id='allocator.adaptor.syn-1.sentence-6' class='sentence'>The <span class='texttt'>scoped_<span class='shy'></span>allocator_<span class='shy'></span>adaptor</span> is derived from the outer
allocator type so it can be substituted for the outer allocator type in most
expressions<a class='hidden_link' href='#allocator.adaptor.syn-1.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div><div class='texpara'><span id='lib:scoped_allocator_adaptor,const_void_pointer'><span id='lib:const_void_pointer,scoped_allocator_adaptor'><span id='lib:scoped_allocator_adaptor,void_pointer'><span id='lib:void_pointer,scoped_allocator_adaptor'><span id='lib:scoped_allocator_adaptor,const_pointer'><span id='lib:const_pointer,scoped_allocator_adaptor'><span id='lib:scoped_allocator_adaptor,pointer'><span id='lib:pointer,scoped_allocator_adaptor'><span id='lib:scoped_allocator_adaptor,difference_type'><span id='lib:difference_type,scoped_allocator_adaptor'><span id='lib:scoped_allocator_adaptor,size_type'><span id='lib:size_type,scoped_allocator_adaptor'><span id='lib:scoped_allocator_adaptor,value_type'><span id='lib:value_type,scoped_allocator_adaptor'><span id='lib:scoped_allocator_adaptor,outer_allocator_type'><span id='lib:outer_allocator_type,scoped_allocator_adaptor'><span id='lib:scoped_allocator_adaptor'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:scoped_allocator_adaptor'>🔗</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> OuterAlloc, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> InnerAllocs<span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> scoped_allocator_adaptor <span class='operator'>:</span> <span class='keyword'>public</span> OuterAlloc <span class='curlybracket'>{</span>
  <span class='keyword'>private</span><span class='operator'>:</span>
    <span class='keyword'>using</span> OuterTraits <span class='operator'>=</span> allocator_traits<span class='anglebracket'>&lt;</span>OuterAlloc<span class='anglebracket'>&gt;</span>;   <span class='comment'>// <i >exposition only</i></span>
    scoped_allocator_adaptor<span class='anglebracket'>&lt;</span>InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> inner;     <span class='comment'>// <i >exposition only</i></span>

  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='keyword'>using</span> outer_allocator_type <span class='operator'>=</span> OuterAlloc;
    <span class='keyword'>using</span> inner_allocator_type <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;

    <span class='keyword'>using</span> value_type           <span class='operator'>=</span> <span class='keyword'>typename</span> OuterTraits<span class='operator'>::</span>value_type;
    <span class='keyword'>using</span> size_type            <span class='operator'>=</span> <span class='keyword'>typename</span> OuterTraits<span class='operator'>::</span>size_type;
    <span class='keyword'>using</span> difference_type      <span class='operator'>=</span> <span class='keyword'>typename</span> OuterTraits<span class='operator'>::</span>difference_type;
    <span class='keyword'>using</span> pointer              <span class='operator'>=</span> <span class='keyword'>typename</span> OuterTraits<span class='operator'>::</span>pointer;
    <span class='keyword'>using</span> const_pointer        <span class='operator'>=</span> <span class='keyword'>typename</span> OuterTraits<span class='operator'>::</span>const_pointer;
    <span class='keyword'>using</span> void_pointer         <span class='operator'>=</span> <span class='keyword'>typename</span> OuterTraits<span class='operator'>::</span>void_pointer;
    <span class='keyword'>using</span> const_void_pointer   <span class='operator'>=</span> <span class='keyword'>typename</span> OuterTraits<span class='operator'>::</span>const_void_pointer;

    <span class='keyword'>using</span> propagate_on_container_copy_assignment <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>using</span> propagate_on_container_move_assignment <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>using</span> propagate_on_container_swap            <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
    <span class='keyword'>using</span> is_always_equal                        <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Tp<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> rebind <span class='curlybracket'>{</span>
      <span class='keyword'>using</span> other <span class='operator'>=</span> scoped_allocator_adaptor<span class='anglebracket'>&lt;</span>
        OuterTraits<span class='operator'>::</span><span class='keyword'>template</span> rebind_alloc<span class='anglebracket'>&lt;</span>Tp<span class='anglebracket'>&gt;</span>, InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>;
    <span class='curlybracket'>}</span>;

    scoped_allocator_adaptor<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> OuterA2<span class='anglebracket'>&gt;</span>
      scoped_allocator_adaptor<span class='parenthesis'>(</span>OuterA2<span class='operator'>&amp;</span><span class='operator'>&amp;</span> outerAlloc,
                               <span class='keyword'>const</span> InnerAllocs<span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> innerAllocs<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    scoped_allocator_adaptor<span class='parenthesis'>(</span><span class='keyword'>const</span> scoped_allocator_adaptor<span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    scoped_allocator_adaptor<span class='parenthesis'>(</span>scoped_allocator_adaptor<span class='operator'>&amp;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> OuterA2<span class='anglebracket'>&gt;</span>
      scoped_allocator_adaptor<span class='parenthesis'>(</span>
        <span class='keyword'>const</span> scoped_allocator_adaptor<span class='anglebracket'>&lt;</span>OuterA2, InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> OuterA2<span class='anglebracket'>&gt;</span>
      scoped_allocator_adaptor<span class='parenthesis'>(</span>
        scoped_allocator_adaptor<span class='anglebracket'>&lt;</span>OuterA2, InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    scoped_allocator_adaptor<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> scoped_allocator_adaptor<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
    scoped_allocator_adaptor<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>scoped_allocator_adaptor<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;

    <span class='operator'>~</span>scoped_allocator_adaptor<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

    inner_allocator_type<span class='operator'>&amp;</span> inner_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>const</span> inner_allocator_type<span class='operator'>&amp;</span> inner_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    outer_allocator_type<span class='operator'>&amp;</span> outer_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>const</span> outer_allocator_type<span class='operator'>&amp;</span> outer_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> pointer allocate<span class='parenthesis'>(</span>size_type n<span class='parenthesis'>)</span>;
    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> pointer allocate<span class='parenthesis'>(</span>size_type n, const_void_pointer hint<span class='parenthesis'>)</span>;
    <span class='keyword'>void</span> deallocate<span class='parenthesis'>(</span>pointer p, size_type n<span class='parenthesis'>)</span>;
    size_type max_size<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
      <span class='keyword'>void</span> construct<span class='parenthesis'>(</span>T<span class='operator'>*</span> p, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;

    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
      <span class='keyword'>void</span> destroy<span class='parenthesis'>(</span>T<span class='operator'>*</span> p<span class='parenthesis'>)</span>;

    scoped_allocator_adaptor select_on_container_copy_construction<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
  <span class='curlybracket'>}</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> OuterAlloc, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> InnerAllocs<span class='anglebracket'>&gt;</span>
    scoped_allocator_adaptor<span class='parenthesis'>(</span>OuterAlloc, InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>
      <span class='operator'>-</span><span class='anglebracket'>&gt;</span> scoped_allocator_adaptor<span class='anglebracket'>&lt;</span>OuterAlloc, InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div></div></div><div id='allocator.adaptor.types' class='section'><h3 ><a class='secnum' href='#allocator.adaptor.types' style='min-width:80pt'>20.5.2</a> Member types <a class='abbr_ref' href='allocator.adaptor.types'>[allocator.adaptor.types]</a></h3><div class='texpara'><div id='lib:scoped_allocator_adaptor,inner_allocator_type'><div id='lib:inner_allocator_type,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:inner_allocator_type,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> inner_allocator_type <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.types-1'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.types-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6660'>#</a></div><div class='texpara'><div id='allocator.adaptor.types-1.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>scoped_<span class='shy'></span>allocator_<span class='shy'></span>adaptor<span class='anglebracket'>&lt;</span>OuterAlloc<span class='anglebracket'>&gt;</span></span> if <span class='texttt'><span class='keyword'>sizeof</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>(</span>InnerAllocs<span class='parenthesis'>)</span></span> is
zero; otherwise,<br/></div> <div id='allocator.adaptor.types-1.sentence-2' class='sentence'> <span class='texttt'>scoped_<span class='shy'></span>allocator_<span class='shy'></span>adaptor<span class='anglebracket'>&lt;</span>InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#allocator.adaptor.types-1.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,propagate_on_container_copy_assignment'><div id='lib:propagate_on_container_copy_assignment,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:propagate_on_container_copy_assignment,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> propagate_on_container_copy_assignment <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.types-2'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.types-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6671'>#</a></div><div class='texpara'><div id='allocator.adaptor.types-2.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>true_<span class='shy'></span>type</span> if
<span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>propagate_<span class='shy'></span>on_<span class='shy'></span>container_<span class='shy'></span>copy_<span class='shy'></span>assignment<span class='operator'>&#x200b;::&#x200b;</span>value</span> is
<span class='texttt'><span class='literal'>true</span></span> for any <span class='texttt'>A</span> in the set of <span class='texttt'>OuterAlloc</span> and
<span class='texttt'>InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span>; otherwise, <span class='texttt'>false_<span class='shy'></span>type</span><a class='hidden_link' href='#allocator.adaptor.types-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,propagate_on_container_move_assignment'><div id='lib:propagate_on_container_move_assignment,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:propagate_on_container_move_assignment,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> propagate_on_container_move_assignment <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.types-3'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.types-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6684'>#</a></div><div class='texpara'><div id='allocator.adaptor.types-3.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>true_<span class='shy'></span>type</span> if
<span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>propagate_<span class='shy'></span>on_<span class='shy'></span>container_<span class='shy'></span>move_<span class='shy'></span>assignment<span class='operator'>&#x200b;::&#x200b;</span>value</span> is
<span class='texttt'><span class='literal'>true</span></span> for any <span class='texttt'>A</span> in the set of <span class='texttt'>OuterAlloc</span> and
<span class='texttt'>InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span>; otherwise, <span class='texttt'>false_<span class='shy'></span>type</span><a class='hidden_link' href='#allocator.adaptor.types-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,propagate_on_container_swap'><div id='lib:propagate_on_container_swap,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:propagate_on_container_swap,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> propagate_on_container_swap <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.types-4'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.types-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6697'>#</a></div><div class='texpara'><div id='allocator.adaptor.types-4.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>true_<span class='shy'></span>type</span> if
<span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>propagate_<span class='shy'></span>on_<span class='shy'></span>container_<span class='shy'></span>swap<span class='operator'>&#x200b;::&#x200b;</span>value</span> is
<span class='texttt'><span class='literal'>true</span></span> for any <span class='texttt'>A</span> in the set of <span class='texttt'>OuterAlloc</span> and
<span class='texttt'>InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span>; otherwise, <span class='texttt'>false_<span class='shy'></span>type</span><a class='hidden_link' href='#allocator.adaptor.types-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,is_always_equal'><div id='lib:is_always_equal,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:is_always_equal,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>using</span> is_always_equal <span class='operator'>=</span> <i ><span class='texttt'>see below</span></i>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.types-5'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.types-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6710'>#</a></div><div class='texpara'><div id='allocator.adaptor.types-5.sentence-1' class='sentence'><i >Type</i>: <span class='texttt'>true_<span class='shy'></span>type</span> if
<span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>is_<span class='shy'></span>always_<span class='shy'></span>equal<span class='operator'>&#x200b;::&#x200b;</span>value</span> is
<span class='texttt'><span class='literal'>true</span></span> for every <span class='texttt'>A</span> in the set of <span class='texttt'>OuterAlloc</span> and
<span class='texttt'>InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span>; otherwise, <span class='texttt'>false_<span class='shy'></span>type</span><a class='hidden_link' href='#allocator.adaptor.types-5.sentence-1'>.</a></div></div></div></div></div><div id='allocator.adaptor.cnstr' class='section'><h3 ><a class='secnum' href='#allocator.adaptor.cnstr' style='min-width:80pt'>20.5.3</a> Constructors <a class='abbr_ref' href='allocator.adaptor.cnstr'>[allocator.adaptor.cnstr]</a></h3><div class='texpara'><div id='lib:scoped_allocator_adaptor,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:scoped_allocator_adaptor,constructor'>🔗</a></div><code class='itemdeclcode'>scoped_allocator_adaptor<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='allocator.adaptor.cnstr-1'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.cnstr-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6725'>#</a></div><div class='texpara'><div id='allocator.adaptor.cnstr-1.sentence-1' class='sentence'><i >Effects</i>: Value-initializes the <span class='texttt'>OuterAlloc</span> base class and the <span class='texttt'>inner</span> allocator
object<a class='hidden_link' href='#allocator.adaptor.cnstr-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:scoped_allocator_adaptor,constructor_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> OuterA2<span class='anglebracket'>&gt;</span>
  scoped_allocator_adaptor<span class='parenthesis'>(</span>OuterA2<span class='operator'>&amp;</span><span class='operator'>&amp;</span> outerAlloc, <span class='keyword'>const</span> InnerAllocs<span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> innerAllocs<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='allocator.adaptor.cnstr-2'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.cnstr-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6738'>#</a></div><div class='texpara'><div id='allocator.adaptor.cnstr-2.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>OuterAlloc, OuterA2<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#allocator.adaptor.cnstr-2.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.adaptor.cnstr-3'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.cnstr-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6742'>#</a></div><div class='texpara'><div id='allocator.adaptor.cnstr-3.sentence-1' class='sentence'><i >Effects</i>: Initializes the <span class='texttt'>OuterAlloc</span> base class with
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>OuterA2<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>outerAlloc<span class='parenthesis'>)</span></span> and <span class='texttt'>inner</span> with <span class='texttt'>innerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span>
(hence recursively initializing each allocator within the adaptor with the corresponding
allocator from the argument list)<a class='hidden_link' href='#allocator.adaptor.cnstr-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,constructor__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:scoped_allocator_adaptor,constructor__'>🔗</a></div><code class='itemdeclcode'>scoped_allocator_adaptor<span class='parenthesis'>(</span><span class='keyword'>const</span> scoped_allocator_adaptor<span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='allocator.adaptor.cnstr-4'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.cnstr-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6756'>#</a></div><div class='texpara'><div id='allocator.adaptor.cnstr-4.sentence-1' class='sentence'><i >Effects</i>: Initializes each allocator within the adaptor with the corresponding allocator
from <span class='texttt'>other</span><a class='hidden_link' href='#allocator.adaptor.cnstr-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,constructor___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:scoped_allocator_adaptor,constructor___'>🔗</a></div><code class='itemdeclcode'>scoped_allocator_adaptor<span class='parenthesis'>(</span>scoped_allocator_adaptor<span class='operator'>&amp;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='allocator.adaptor.cnstr-5'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.cnstr-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6768'>#</a></div><div class='texpara'><div id='allocator.adaptor.cnstr-5.sentence-1' class='sentence'><i >Effects</i>: Move constructs each allocator within the adaptor with the corresponding allocator
from <span class='texttt'>other</span><a class='hidden_link' href='#allocator.adaptor.cnstr-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,constructor____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:scoped_allocator_adaptor,constructor____'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> OuterA2<span class='anglebracket'>&gt;</span>
  scoped_allocator_adaptor<span class='parenthesis'>(</span>
    <span class='keyword'>const</span> scoped_allocator_adaptor<span class='anglebracket'>&lt;</span>OuterA2, InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='allocator.adaptor.cnstr-6'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.cnstr-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6782'>#</a></div><div class='texpara'><div id='allocator.adaptor.cnstr-6.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>OuterAlloc, <span class='keyword'>const</span> OuterA2<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#allocator.adaptor.cnstr-6.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.adaptor.cnstr-7'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.cnstr-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6786'>#</a></div><div class='texpara'><div id='allocator.adaptor.cnstr-7.sentence-1' class='sentence'><i >Effects</i>: Initializes each allocator within the adaptor with the corresponding allocator
from <span class='texttt'>other</span><a class='hidden_link' href='#allocator.adaptor.cnstr-7.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,constructor_____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:scoped_allocator_adaptor,constructor_____'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> OuterA2<span class='anglebracket'>&gt;</span>
  scoped_allocator_adaptor<span class='parenthesis'>(</span>scoped_allocator_adaptor<span class='anglebracket'>&lt;</span>OuterA2, InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='allocator.adaptor.cnstr-8'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.cnstr-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6799'>#</a></div><div class='texpara'><div id='allocator.adaptor.cnstr-8.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>is_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>OuterAlloc, OuterA2<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#allocator.adaptor.cnstr-8.sentence-1'>.</a></div></div></div></div><div class='para' id='allocator.adaptor.cnstr-9'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.cnstr-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6803'>#</a></div><div class='texpara'><div id='allocator.adaptor.cnstr-9.sentence-1' class='sentence'><i >Effects</i>: Initializes each allocator within the adaptor with the corresponding allocator rvalue
from <span class='texttt'>other</span><a class='hidden_link' href='#allocator.adaptor.cnstr-9.sentence-1'>.</a></div></div></div></div></div><div id='allocator.adaptor.members' class='section'><h3 ><a class='secnum' href='#allocator.adaptor.members' style='min-width:80pt'>20.5.4</a> Members <a class='abbr_ref' href='allocator.adaptor.members'>[allocator.adaptor.members]</a></h3><div class='para' id='allocator.adaptor.members-1'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.members-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6811'>#</a></div><div class='texpara'><div id='allocator.adaptor.members-1.sentence-1' class='sentence'>In the <span class='texttt'>construct</span> member functions,
<span class='texttt'><i >OUTERMOST</i><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span></span> is
<span class='texttt'><i >OUTERMOST</i><span class='parenthesis'>(</span>x<span class='operator'>.</span>outer_<span class='shy'></span>allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> if
the expression <span class='texttt'>x<span class='operator'>.</span>outer_<span class='shy'></span>allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is
valid  (<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>) and
<span class='texttt'>x</span> otherwise;
<span class='texttt'><i >OUTERMOST_<span class='shy'></span>ALLOC_<span class='shy'></span>TRAITS</i><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span></span> is
<span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>remove_<span class='shy'></span>reference_<span class='shy'></span>t<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><i >OUTERMOST</i><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#allocator.adaptor.members-1.sentence-1'>.</a></div> <div id='allocator.adaptor.members-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#allocator.adaptor.members-note-1'>1</a></i>:&ensp;<div id='allocator.adaptor.members-1.sentence-2' class='sentence'><span class='texttt'><i >OUTERMOST</i><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span></span> and
<span class='texttt'><i >OUTERMOST_<span class='shy'></span>ALLOC_<span class='shy'></span>TRAITS</i><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span></span> are recursive operations<a class='hidden_link' href='#allocator.adaptor.members-1.sentence-2'>.</a></div> <div id='allocator.adaptor.members-1.sentence-3' class='sentence'>It
is incumbent upon the definition of <span class='texttt'>outer_<span class='shy'></span>allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> to ensure that the
recursion terminates<a class='hidden_link' href='#allocator.adaptor.members-1.sentence-3'>.</a></div> <div id='allocator.adaptor.members-1.sentence-4' class='sentence'>It will terminate for all instantiations of
<span class='texttt'>scoped_<span class='shy'></span>allocator_<span class='shy'></span>adaptor</span><a class='hidden_link' href='#allocator.adaptor.members-1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,inner_allocator'><div id='lib:inner_allocator,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:inner_allocator,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'>inner_allocator_type<span class='operator'>&amp;</span> inner_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>const</span> inner_allocator_type<span class='operator'>&amp;</span> inner_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.members-2'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.members-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6835'>#</a></div><div class='texpara'><div id='allocator.adaptor.members-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span> if <span class='texttt'><span class='keyword'>sizeof</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>(</span>InnerAllocs<span class='parenthesis'>)</span></span> is zero; otherwise,
<span class='texttt'>inner</span><a class='hidden_link' href='#allocator.adaptor.members-2.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,outer_allocator'><div id='lib:outer_allocator,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:outer_allocator,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'>outer_allocator_type<span class='operator'>&amp;</span> outer_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.members-3'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.members-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6847'>#</a></div><div class='texpara'><div id='allocator.adaptor.members-3.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span>OuterAlloc<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.adaptor.members-3.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,outer_allocator_'><div id='lib:outer_allocator,scoped_allocator_adaptor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:outer_allocator,scoped_allocator_adaptor_'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>const</span> outer_allocator_type<span class='operator'>&amp;</span> outer_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.members-4'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.members-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6858'>#</a></div><div class='texpara'><div id='allocator.adaptor.members-4.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='keyword'>static_<span class='shy'></span>cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> OuterAlloc<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.adaptor.members-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,allocate'><div id='lib:allocate,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocate,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> pointer allocate<span class='parenthesis'>(</span>size_type n<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.members-5'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.members-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6869'>#</a></div><div class='texpara'><div id='allocator.adaptor.members-5.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>OuterAlloc<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>allocate<span class='parenthesis'>(</span>outer_<span class='shy'></span>allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, n<span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.adaptor.members-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,allocate_'><div id='lib:allocate,scoped_allocator_adaptor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:allocate,scoped_allocator_adaptor_'>🔗</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> pointer allocate<span class='parenthesis'>(</span>size_type n, const_void_pointer hint<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.members-6'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.members-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6880'>#</a></div><div class='texpara'><div id='allocator.adaptor.members-6.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>OuterAlloc<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>allocate<span class='parenthesis'>(</span>outer_<span class='shy'></span>allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, n, hint<span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.adaptor.members-6.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,deallocate'><div id='lib:deallocate,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:deallocate,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>void</span> deallocate<span class='parenthesis'>(</span>pointer p, size_type n<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.members-7'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.members-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6891'>#</a></div><div class='texpara'><div id='allocator.adaptor.members-7.sentence-1' class='sentence'><i >Effects</i>: As if by:
<span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>OuterAlloc<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>deallocate<span class='parenthesis'>(</span>outer_<span class='shy'></span>allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, p, n<span class='parenthesis'>)</span>;</span></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,max_size'><div id='lib:max_size,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:max_size,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'>size_type max_size<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.members-8'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.members-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6903'>#</a></div><div class='texpara'><div id='allocator.adaptor.members-8.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>OuterAlloc<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>max_<span class='shy'></span>size<span class='parenthesis'>(</span>outer_<span class='shy'></span>allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.adaptor.members-8.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,construct'><div id='lib:construct,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:construct,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> construct<span class='parenthesis'>(</span>T<span class='operator'>*</span> p, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.members-9'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.members-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6915'>#</a></div><div class='texpara'><div id='allocator.adaptor.members-9.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'>apply<span class='parenthesis'>(</span><span class='squarebracket'>[</span>p, <span class='keyword'>this</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> newargs<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
        <i >OUTERMOST_ALLOC_TRAITS</i><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='operator'>::</span>construct<span class='parenthesis'>(</span>
          <i >OUTERMOST</i><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span>, p,
          std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span>newargs<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>newargs<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
      <span class='curlybracket'>}</span>,
      uses_allocator_construction_args<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>inner_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span>,
                                          std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,destroy'><div id='lib:destroy,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:destroy,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> destroy<span class='parenthesis'>(</span>T<span class='operator'>*</span> p<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.members-10'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.members-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6936'>#</a></div><div class='texpara'><div id='allocator.adaptor.members-10.sentence-1' class='sentence'><i >Effects</i>: Calls <span class='texttt'><i >OUTERMOST_<span class='shy'></span>ALLOC_<span class='shy'></span>TRAITS</i><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='operator'>&#x200b;::&#x200b;</span>destroy<span class='parenthesis'>(</span><i >OUTERMOST</i><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span>, p<span class='parenthesis'>)</span></span><a class='hidden_link' href='#allocator.adaptor.members-10.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:scoped_allocator_adaptor,select_on_container_copy_construction'><div id='lib:select_on_container_copy_construction,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:select_on_container_copy_construction,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'>scoped_allocator_adaptor select_on_container_copy_construction<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
</code></div></div></div></div><div class='para' id='allocator.adaptor.members-11'><div class='marginalizedparent'><a class='marginalized' href='#allocator.adaptor.members-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6947'>#</a></div><div class='texpara'><div id='allocator.adaptor.members-11.sentence-1' class='sentence'><i >Returns</i>: A new <span class='texttt'>scoped_<span class='shy'></span>allocator_<span class='shy'></span>adaptor</span> object
where each allocator <span class='texttt'>a1</span> within the adaptor
is initialized with
<span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A1<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>select_<span class='shy'></span>on_<span class='shy'></span>container_<span class='shy'></span>copy_<span class='shy'></span>construction<span class='parenthesis'>(</span>a2<span class='parenthesis'>)</span></span>,
where <span class='texttt'>A1</span> is the type of <span class='texttt'>a1</span> and
<span class='texttt'>a2</span> is the corresponding allocator in <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span><a class='hidden_link' href='#allocator.adaptor.members-11.sentence-1'>.</a></div></div></div></div></div><div id='scoped.adaptor.operators' class='section'><h3 ><a class='secnum' href='#scoped.adaptor.operators' style='min-width:80pt'>20.5.5</a> Operators <a class='abbr_ref' href='scoped.adaptor.operators'>[scoped.adaptor.operators]</a></h3><div class='texpara'><div id='lib:scoped_allocator_adaptor,operator=='><div id='lib:operator==,scoped_allocator_adaptor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator==,scoped_allocator_adaptor'>🔗</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> OuterA1, <span class='keyword'>class</span> OuterA2, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> InnerAllocs<span class='anglebracket'>&gt;</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> scoped_allocator_adaptor<span class='anglebracket'>&lt;</span>OuterA1, InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> a,
                  <span class='keyword'>const</span> scoped_allocator_adaptor<span class='anglebracket'>&lt;</span>OuterA2, InnerAllocs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='scoped.adaptor.operators-1'><div class='marginalizedparent'><a class='marginalized' href='#scoped.adaptor.operators-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/memory.tex#L6967'>#</a></div><div class='texpara'><div id='scoped.adaptor.operators-1.sentence-1' class='sentence'><i >Returns</i>: If <span class='texttt'><span class='keyword'>sizeof</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>(</span>InnerAllocs<span class='parenthesis'>)</span></span> is zero,
<span class='codeblock'>a<span class='operator'>.</span>outer_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> b<span class='operator'>.</span>outer_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
</span>
otherwise
<span class='codeblock'>a<span class='operator'>.</span>outer_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> b<span class='operator'>.</span>outer_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> a<span class='operator'>.</span>inner_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> b<span class='operator'>.</span>inner_allocator<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
</span></div></div></div></div></div></div></div></body></html>