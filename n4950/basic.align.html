<!DOCTYPE html><html lang='en'><head><title>[basic.align]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>6.7</a> Memory and objects <a class='abbr_ref' href='basic.memobj#basic.align'>[basic.memobj]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>6.7.6</a> Alignment <a class='abbr_ref'>[basic.align]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/basic.tex#L4098'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>Object types have <a class='hidden_link' href='#def:alignment_requirement,implementation-defined' title='6.7.6&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment_requirement,implementation-defined'><i >alignment requirements</i></span></a> (<a href='basic.fundamental' title='6.8.2&emsp;Fundamental types'>[basic.<span class='shy'></span>fundamental]</a>, <a href='basic.compound' title='6.8.4&emsp;Compound types'>[basic.<span class='shy'></span>compound]</a>)
which place restrictions on the addresses at which an object of that type
may be allocated<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>An <a class='hidden_link' href='#def:alignment' title='6.7.6&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment'><i >alignment</i></span></a> is an <a class='index' id=':alignment'></a>implementation-defined
integer value representing the number of bytes between successive addresses
at which a given object can be allocated<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>An object type imposes an alignment
requirement on every object of that type; stricter alignment can be requested
using the alignment specifier (<a href='dcl.align' title='9.12.2&emsp;Alignment specifier'>[dcl.<span class='shy'></span>align]</a>)<a class='hidden_link' href='#1.sentence-3'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/basic.tex#L4107'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:alignment,fundamental' title='6.7.6&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment,fundamental'><i >fundamental alignment</i></span></a> is represented by an alignment
less than or equal to the greatest alignment supported by the implementation in
all contexts, which is equal to
<span class='texttt'><span id=':alignof'><span class='texttt'><span class='keyword'>alignof</span></span></span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>max_<span class='shy'></span>align_<span class='shy'></span>t<span class='parenthesis'>)</span></span> (<a href='support.types' title='17.2&emsp;Common definitions'>[support.<span class='shy'></span>types]</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>The alignment required for a type may be different when it is used as the type
of a complete object and when it is used as the type of a subobject<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='keyword'>long</span> <span class='keyword'>double</span> d; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D <span class='operator'>:</span> <span class='keyword'>virtual</span> B <span class='curlybracket'>{</span> <span class='keyword'>char</span> c; <span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='2.sentence-3' class='sentence'>When <span class='texttt'>D</span> is the type of a complete object, it will have a subobject of
type <span class='texttt'>B</span>, so it must be aligned appropriately for a <span class='texttt'><span id=':long'><span class='texttt'><span class='keyword'>long</span></span></span> <span id=':double'><span class='texttt'><span class='keyword'>double</span></span></span></span><a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>If <span class='texttt'>D</span> appears as a subobject of another object that also has <span class='texttt'>B</span>
as a virtual base class, the <span class='texttt'>B</span> subobject might be part of a different
subobject, reducing the alignment requirements on the <span class='texttt'>D</span> subobject<a class='hidden_link' href='#2.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div> <div id='2.sentence-5' class='sentence'>
The result of the <span id=':alignof_'><span class='texttt'><span class='keyword'>alignof</span></span></span> operator reflects the alignment
requirement of the type in the complete-object case<a class='hidden_link' href='#2.sentence-5'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/basic.tex#L4129'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>An <a class='hidden_link' href='#def:alignment,extended' title='6.7.6&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment,extended'><i >extended alignment</i></span></a> is represented by an alignment
greater than <span class='texttt'><span id=':alignof__'><span class='texttt'><span class='keyword'>alignof</span></span></span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>max_<span class='shy'></span>align_<span class='shy'></span>t<span class='parenthesis'>)</span></span><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>It is <a class='index' id=':support_for_extended_alignments'></a>implementation-defined
whether any extended alignments are supported and the contexts in which they are
supported (<a href='dcl.align' title='9.12.2&emsp;Alignment specifier'>[dcl.<span class='shy'></span>align]</a>)<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>A type having an extended alignment
requirement is an <a class='hidden_link' href='#def:type,over-aligned' title='6.7.6&emsp;Alignment&emsp;[basic.align]'><span id='def:type,over-aligned'><i >over-aligned type</i></span></a><a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='3.sentence-4' class='sentence'>Every over-aligned type is or contains a class type
to which extended alignment applies (possibly through a non-static data member)<a class='hidden_link' href='#3.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='3.sentence-5' class='sentence'>
A <a class='hidden_link' href='#def:alignment,new-extended' title='6.7.6&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment,new-extended'><i >new-extended alignment</i></span></a> is represented by
an alignment greater than <span class='texttt'>__STDCPP_<span class='shy'></span>DEFAULT_<span class='shy'></span>NEW_<span class='shy'></span>ALIGNMENT__</span> (<a href='cpp.predefined' title='15.11&emsp;Predefined macro names'>[cpp.<span class='shy'></span>predefined]</a>)<a class='hidden_link' href='#3.sentence-5'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/basic.tex#L4142'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>Alignments are represented as values of the type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span><a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>Valid alignments include only those values returned by an <span id=':alignof___'><span class='texttt'><span class='keyword'>alignof</span></span></span>
expression for the fundamental types plus an additional <a class='index' id=':alignment_additional_values'></a>implementation-defined
set of values, which may be empty<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>Every alignment value shall be a non-negative integral power of two<a class='hidden_link' href='#4.sentence-3'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/basic.tex#L4150'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>Alignments have an order from <a class='hidden_link' href='#def:alignment,weaker' title='6.7.6&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment,weaker'><i >weaker</i></span></a> to
<a class='hidden_link' href='#def:alignment,stronger' title='6.7.6&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment,stronger'><i >stronger</i></span></a> or <a class='hidden_link' href='#def:alignment,stricter' title='6.7.6&emsp;Alignment&emsp;[basic.align]'><span id='def:alignment,stricter'><i >stricter</i></span></a> alignments<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>Stricter
alignments have larger alignment values<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>An address that satisfies an alignment
requirement also satisfies any weaker valid alignment requirement<a class='hidden_link' href='#5.sentence-3'>.</a></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/basic.tex#L4156'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>The alignment requirement of a complete type can be queried using an
<span id=':alignof____'><span class='texttt'><span class='keyword'>alignof</span></span></span> expression (<a href='expr.alignof' title='7.6.2.6&emsp;Alignof'>[expr.<span class='shy'></span>alignof]</a>)<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>Furthermore,
the narrow character types (<a href='basic.fundamental' title='6.8.2&emsp;Fundamental types'>[basic.<span class='shy'></span>fundamental]</a>) shall have the weakest
alignment requirement<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='6.sentence-3' class='sentence'>This enables the ordinary character types to be used as the
underlying type for an aligned memory area (<a href='dcl.align' title='9.12.2&emsp;Alignment specifier'>[dcl.<span class='shy'></span>align]</a>)<a class='hidden_link' href='#6.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/basic.tex#L4166'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>Comparing alignments is meaningful and provides the obvious results:</div></div><div class='texpara'><ul class='itemize'><li id='7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.1'>(7.1)</a></div><div class='texpara'><div id='7.1.sentence-1' class='sentence'>Two alignments are equal when their numeric values are equal<a class='hidden_link' href='#7.1.sentence-1'>.</a></div></div></li><li id='7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.2'>(7.2)</a></div><div class='texpara'><div id='7.2.sentence-1' class='sentence'>Two alignments are different when their numeric values are not equal<a class='hidden_link' href='#7.2.sentence-1'>.</a></div></div></li><li id='7.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.3'>(7.3)</a></div><div class='texpara'><div id='7.3.sentence-1' class='sentence'>When an alignment is larger than another it represents a stricter alignment<a class='hidden_link' href='#7.3.sentence-1'>.</a></div></div></li></ul></div></div><div class='para nonNormativeOnly' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/basic.tex#L4175'>#</a></div><div class='texpara'><div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='8.sentence-1' class='sentence'>The runtime pointer alignment function (<a href='ptr.align' title='20.2.5&emsp;Pointer alignment'>[ptr.<span class='shy'></span>align]</a>)
can be used to obtain an aligned pointer within a buffer;
an <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier'><span class='textsf'><i >alignment-specifier</i></span></span></a> (<a href='dcl.align' title='9.12.2&emsp;Alignment specifier'>[dcl.<span class='shy'></span>align]</a>)
can be used to align storage explicitly<a class='hidden_link' href='#8.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/basic.tex#L4183'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'>If a request for a specific extended alignment in a specific context is not
supported by an implementation, the program is ill-formed<a class='hidden_link' href='#9.sentence-1'>.</a></div></div></div></div></body></html>