<!DOCTYPE html><html lang='en'><head><title>[over.oper.general]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>12</a> Overloading <a class='abbr_ref' href='./#over'>[over]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>12.4</a> Overloaded operators <a class='abbr_ref' href='over.oper#general'>[over.oper]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>12.4.1</a> General <a class='abbr_ref'>[over.oper.general]</a></h3><div class='texpara'><a class='index' id=':overloading,operator'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/overloading.tex#L3153'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':operator,overloaded'></a>A declaration
whose <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id'><span class='textsf'><i >declarator-id</i></span></span></a> is an <a href='#nt:operator-function-id' title='12.4.1&emsp;General&emsp;[over.oper.general]'><span id='ntref:operator-function-id'><span class='textsf'><i >operator-function-id</i></span></span></a>
shall declare a function or function template or
an explicit instantiation or specialization of a function template<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>A function so declared is an <a class='hidden_link' href='#def:function,operator' title='12.4.1&emsp;General&emsp;[over.oper.general]'><span id='def:function,operator'><i >operator function</i></span></a><a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>A function template so declared is
an <a class='hidden_link' href='#def:function,operator,template' title='12.4.1&emsp;General&emsp;[over.oper.general]'><span id='def:function,operator,template'><i >operator function template</i></span></a><a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>A specialization of an operator function template is also an operator function<a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>An operator function is said to
<a class='hidden_link' href='#def:operator,implementation' title='12.4.1&emsp;General&emsp;[over.oper.general]'><span id='def:operator,implementation'><i >implement</i></span></a>
the operator named in its
<a href='#nt:operator-function-id' title='12.4.1&emsp;General&emsp;[over.oper.general]'><span id='ntref:operator-function-id_'><span class='textsf'><i >operator-function-id</i></span></span></a><a class='hidden_link' href='#1.sentence-5'>.</a></div></div><div class='texpara'><div class='bnf' id='nt:operator-function-id'>
<a class='hidden_link' href='#nt:operator-function-id' title='12.4.1&emsp;General&emsp;[over.oper.general]'><span id='nt:operator-function-id'><span id=':operator-function-id'>operator-function-id<span class='textnormal'>:</span></span></span></a><br/><span id=':operator'><span class='texttt'><span class='keyword'>operator</span></span></span> <a href='#nt:operator' title='12.4.1&emsp;General&emsp;[over.oper.general]'><span id='ntref:operator'><span class='textsf'><i >operator</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:operator'>
<a class='hidden_link' href='#nt:operator' title='12.4.1&emsp;General&emsp;[over.oper.general]'><span id='nt:operator'><span id=':operator'>operator<span class='textnormal'>:</span></span></span></a> <span class='textnormal'>one of</span><br/><span class='terminal'><span class='keyword'>new</span>      <span class='keyword'>delete</span>   <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span>    <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='keyword'>co_await</span> <span class='parenthesis'>(</span><span class='rlap'><span style='white-space:nowrap'>&thinsp;</span><span class='parenthesis'>)</span></span>        <span class='squarebracket'>[</span><span class='rlap'><span style='white-space:nowrap'>&thinsp;</span><span class='squarebracket'>]</span></span>        <span class='operator'>-</span><span class='anglebracket'>&gt;</span>       <span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span></span><br/><span class='terminal'><span class='operator'>~</span>        <span class='operator'>!</span>        <span class='operator'>+</span>        <span class='operator'>-</span>        <span class='operator'>*</span>        <span class='operator'>/</span>        <span class='operator'>%</span>        <span class='operator'>^</span>        <span class='operator'>&amp;</span></span><br/><span class='terminal'><span class='operator'>|</span>        <span class='operator'>=</span>        <span class='operator'>+</span><span class='operator'>=</span>       <span class='operator'>-</span><span class='operator'>=</span>       <span class='operator'>*</span><span class='operator'>=</span>       <span class='operator'>/</span><span class='operator'>=</span>       <span class='operator'>%</span><span class='operator'>=</span>       <span class='operator'>^</span><span class='operator'>=</span>       <span class='operator'>&amp;</span><span class='operator'>=</span></span><br/><span class='terminal'><span class='operator'>|</span><span class='operator'>=</span>       <span class='operator'>=</span><span class='operator'>=</span>       <span class='operator'>!</span><span class='operator'>=</span>       <span class='anglebracket'>&lt;</span>        <span class='anglebracket'>&gt;</span>        <span class='anglebracket'>&lt;</span><span class='operator'>=</span>       <span class='anglebracket'>&gt;</span><span class='operator'>=</span>       <span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span>      <span class='operator'>&amp;</span><span class='operator'>&amp;</span></span><br/><span class='terminal'><span class='operator'>|</span><span class='operator'>|</span>       <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span>       <span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>       <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span>      <span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='operator'>=</span>      <span class='operator'>+</span><span class='operator'>+</span>       <span class='operator'>-</span><span class='operator'>-</span>       ,</span><br/></div>
<div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='1.sentence-6' class='sentence'>The operators
<span class='texttt'><span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>,
<span class='texttt'><span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>,
<span class='texttt'><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
and
<span class='texttt'><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>
are formed from more than one token<a class='hidden_link' href='#1.sentence-6'>.</a></div> <div id='1.sentence-7' class='sentence'>The latter two operators are <a href='expr.call' title='7.6.1.3&emsp;Function call&emsp;[expr.call]'>function call</a>
and <a href='expr.sub' title='7.6.1.2&emsp;Subscripting&emsp;[expr.sub]'>subscripting</a><a class='hidden_link' href='#1.sentence-7'>.</a></div> —&nbsp;<i>end note</i>]</div></div>
<a class='index' id=':operator,subscripting'></a><a class='index' id=':operator,function_call'></a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/overloading.tex#L3197'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>Both the unary and binary forms of
<div class='simplebnf'><span class='terminal'><span class='operator'>+</span>      <span class='operator'>-</span>      <span class='operator'>*</span>      <span class='operator'>&amp;</span></span>
</div>
can be overloaded<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para nonNormativeOnly' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/overloading.tex#L3204'>#</a></div><div class='texpara'><div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='3.sentence-1' class='sentence'><a class='index' id=':restriction,operator_overloading'></a>The following operators cannot be overloaded:
<div class='simplebnf'><span class='terminal'><span class='operator'>.</span>      <span class='operator'>.</span><span class='operator'>*</span>     <span class='operator'>::</span>     <span class='operator'>?</span><span class='operator'>:</span></span>
</div>
nor can the preprocessing symbols
<span class='texttt'><span class='preprocessordirective'>#</span></span> (<a href='cpp.stringize' title='15.6.3&emsp;The # operator'>[cpp.<span class='shy'></span>stringize]</a>)
and
<span class='texttt'><span class='preprocessordirective'>#</span><span class='preprocessordirective'>#</span></span> (<a href='cpp.concat' title='15.6.4&emsp;The ## operator'>[cpp.<span class='shy'></span>concat]</a>)<a class='hidden_link' href='#3.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/overloading.tex#L3217'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'><a class='index' id=':call,operator_function'></a>Operator functions are usually not called directly; instead they are invoked
to evaluate the operators they implement (<a href='over.unary' title='12.4.2&emsp;Unary operators'>[over.<span class='shy'></span>unary]</a> – <a href='over.inc' title='12.4.7&emsp;Increment and decrement'>[over.<span class='shy'></span>inc]</a>)<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>They can be explicitly called, however, using the
<a href='#nt:operator-function-id' title='12.4.1&emsp;General&emsp;[over.oper.general]'><span id='ntref:operator-function-id__'><span class='textsf'><i >operator-function-id</i></span></span></a>
as the name of the function in the function call syntax (<a href='expr.call' title='7.6.1.3&emsp;Function call'>[expr.<span class='shy'></span>call]</a>)<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'>complex z <span class='operator'>=</span> a<span class='operator'>.</span><span class='keyword'>operator</span><span class='operator'>+</span><span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>;     <span class='comment'>// <span class='tcode_in_codeblock'>complex z = a+b;</span></span>
<span class='keyword'>void</span><span class='operator'>*</span> p <span class='operator'>=</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='operator'>*</span>n<span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/overloading.tex#L3231'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>The allocation and deallocation functions,
<span id=':operator_'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':new'><span class='texttt'><span class='keyword'>new</span></span></span>,
<span id=':operator__'><span class='texttt'><span class='keyword'>operator</span></span></span> <span class='texttt'><span id=':new_'><span class='texttt'><span class='keyword'>new</span></span></span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>,
<span id=':operator___'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':delete'><span class='texttt'><span class='keyword'>delete</span></span></span>, and
<span id=':operator____'><span class='texttt'><span class='keyword'>operator</span></span></span> <span class='texttt'><span id=':delete_'><span class='texttt'><span class='keyword'>delete</span></span></span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>,
are described completely in <a href='basic.stc.dynamic' title='6.7.5.5&emsp;Dynamic storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic]</a><a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>The attributes and restrictions
found in the rest of <a href='over.oper' title='12.4&emsp;Overloaded operators'>[over.<span class='shy'></span>oper]</a> do not apply to them unless explicitly
stated in <a href='basic.stc.dynamic' title='6.7.5.5&emsp;Dynamic storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic]</a><a class='hidden_link' href='#5.sentence-2'>.</a></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/overloading.tex#L3242'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>The <span id=':co_await'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>await</span></span></span> operator is described completely in <a href='expr.await' title='7.6.2.4&emsp;Await'>[expr.<span class='shy'></span>await]</a><a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>The attributes and restrictions
found in the rest of <a href='over.oper' title='12.4&emsp;Overloaded operators'>[over.<span class='shy'></span>oper]</a> do not apply to it unless explicitly
stated in <a href='expr.await' title='7.6.2.4&emsp;Await'>[expr.<span class='shy'></span>await]</a><a class='hidden_link' href='#6.sentence-2'>.</a></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/overloading.tex#L3248'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'><a class='index' id=':restriction,overloading'></a>An operator function
shall either
<ul class='itemize'><li id='7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.1'>(7.1)</a></div>be a member function or</li><li id='7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.2'>(7.2)</a></div>be a non-member function that
has at least one non-object parameter whose type is a class, a reference to a class, an
enumeration, or a reference to an enumeration<a class='hidden_link' href='#7.sentence-1'>.</a></li></ul></div> <div id='7.sentence-2' class='sentence'>
It is not possible to change the precedence, grouping, or number of operands
of operators<a class='hidden_link' href='#7.sentence-2'>.</a></div> <div id='7.sentence-3' class='sentence'>The meaning of
the operators <span class='texttt'><span class='operator'>=</span></span>, (unary) <span class='texttt'><span class='operator'>&amp;</span></span>, and <span class='texttt'>,</span> (comma),
predefined for each type, can be changed for specific class types by
defining operator functions that implement these operators<a class='hidden_link' href='#7.sentence-3'>.</a></div> <div id='7.sentence-4' class='sentence'>Likewise, the meaning of the operators (unary) <span class='texttt'><span class='operator'>&amp;</span></span> and <span class='texttt'>,</span> (comma)
can be changed for specific enumeration types<a class='hidden_link' href='#7.sentence-4'>.</a></div> <div id='7.sentence-5' class='sentence'><a class='index' id=':overloaded_operator,inheritance_of'></a>Operator functions are inherited in the same manner as other base class
functions<a class='hidden_link' href='#7.sentence-5'>.</a></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/overloading.tex#L3272'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'>An operator function shall be a
prefix unary, binary, function call, subscripting, class member access, increment, or decrement
operator function<a class='hidden_link' href='#8.sentence-1'>.</a></div></div></div><div class='para nonNormativeOnly' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/overloading.tex#L3277'>#</a></div><div class='texpara'><a class='index' id=':operator'></a><div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='9.sentence-1' class='sentence'>The identities among certain predefined operators applied to basic types
(for example,
<span class='texttt'><span class='operator'>+</span><span class='operator'>+</span>a</span> <span class='math'>&equiv;</span>
<span class='texttt'>a<span class='operator'>+</span><span class='operator'>=</span><span class='literal'>1</span></span>)
need not hold for operator functions<a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='9.sentence-2' class='sentence'>Some predefined operators, such as
<span class='texttt'><span class='operator'>+</span><span class='operator'>=</span></span>,
require an operand to be an lvalue when applied to basic types;
this is not required by operator functions<a class='hidden_link' href='#9.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/overloading.tex#L3291'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'><a class='index' id=':argument,overloaded_operator_and_default'></a>An operator function cannot have <a href='dcl.fct.default' title='9.3.4.7&emsp;Default arguments&emsp;[dcl.fct.default]'>default arguments</a>,
except where explicitly stated below<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>Operator
functions cannot have more or fewer parameters than the
number required for the corresponding operator, as
described in the rest of <a href='over.oper' title='12.4&emsp;Overloaded operators'>[over.<span class='shy'></span>oper]</a><a class='hidden_link' href='#10.sentence-2'>.</a></div></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/overloading.tex#L3300'>#</a></div><div class='texpara'><div id='11.sentence-1' class='sentence'>Operators not mentioned explicitly in subclauses <a href='over.ass' title='12.4.3.2&emsp;Simple assignment'>[over.<span class='shy'></span>ass]</a> through <a href='over.inc' title='12.4.7&emsp;Increment and decrement'>[over.<span class='shy'></span>inc]</a>
act as ordinary unary and binary
operators obeying the rules of <a href='over.unary' title='12.4.2&emsp;Unary operators'>[over.<span class='shy'></span>unary]</a> or <a href='over.binary' title='12.4.3&emsp;Binary operators'>[over.<span class='shy'></span>binary]</a><a class='hidden_link' href='#11.sentence-1'>.</a></div> </div></div></div></body></html>