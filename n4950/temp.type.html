<!DOCTYPE html><html lang='en'><head><title>[temp.type]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>13</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>13.6</a> Type equivalence <a class='abbr_ref'>[temp.type]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/templates.tex#L2024'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':equivalence,template_type'></a>Two <a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id'><span class='textsf'><i >template-id</i></span></span></a><i >s</i> are the same if
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.1'>(1.1)</a></div>their <a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name'><span class='textsf'><i >template-name</i></span></span></a><i >s</i>,
<a href='over.oper.general#nt:operator-function-id' title='12.4.1&emsp;General&emsp;[over.oper.general]'><span id='ntref:operator-function-id'><span class='textsf'><i >operator-function-id</i></span></span></a><i >s</i>, or
<a href='over.literal#nt:literal-operator-id' title='12.6&emsp;User-defined literals&emsp;[over.literal]'><span id='ntref:literal-operator-id'><span class='textsf'><i >literal-operator-id</i></span></span></a><i >s</i>
refer to the same template, and</li><li id='1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.2'>(1.2)</a></div>their corresponding type <a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument'><span class='textsf'><i >template-argument</i></span></span></a><i >s</i>
are the same type, and</li><li id='1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.3'>(1.3)</a></div>their corresponding non-type <a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument_'><span class='textsf'><i >template-argument</i></span></span></a><i >s</i>
are template-argument-equivalent (see below)
after conversion to the type of the <a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter_'><span class='textsf'><i >template-parameter</i></span></span></a>, and</li><li id='1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.4'>(1.4)</a></div>their corresponding template <a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument__'><span class='textsf'><i >template-argument</i></span></span></a><i >s</i>
refer to the same template<a class='hidden_link' href='#1.sentence-1'>.</a></li></ul></div> <div id='1.sentence-2' class='sentence'>
Two <a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id_'><span class='textsf'><i >template-id</i></span></span></a><i >s</i> that are the same
refer to the same class, function, or variable<a class='hidden_link' href='#1.sentence-2'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/templates.tex#L2050'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>Two values are <a class='hidden_link' href='#def:template-argument-equivalent' title='13.6&emsp;Type equivalence&emsp;[temp.type]'><span id='def:template-argument-equivalent'><i >template-argument-equivalent</i></span></a> if
they are of the same type and
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.1'>(2.1)</a></div>they are of integral type and their values are the same, or</li><li id='2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.2'>(2.2)</a></div>they are of floating-point type and their values are identical, or</li><li id='2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.3'>(2.3)</a></div>they are of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>nullptr_<span class='shy'></span>t</span>, or</li><li id='2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.4'>(2.4)</a></div>they are of enumeration type and their values are the same,<a class='footnoteref' href='#footnote-120' id='footnoteref-120' title='The identity of enumerators is not preserved.'>120</a>
or</li><li id='2.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.5'>(2.5)</a></div>they are of pointer type and they have the same pointer value, or</li><li id='2.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.6'>(2.6)</a></div>they are of pointer-to-member type and they refer to the same class member
or are both the null member pointer value, or</li><li id='2.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.7'>(2.7)</a></div>they are of reference type and they refer to the same object or function, or</li><li id='2.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.8'>(2.8)</a></div>they are of array type and their corresponding elements are template-argument-equivalent,<a class='footnoteref' href='#footnote-121' id='footnoteref-121' title='An array as a template-parameter decays to a pointer.'>121</a>
or</li><li id='2.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.9'>(2.9)</a></div>they are of union type and either
they both have no active member or
they have the same active member and their active members are template-argument-equivalent, or</li><li id='2.10'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.10'>(2.10)</a></div>they are of class type and
their corresponding direct subobjects and reference members are template-argument-equivalent<a class='hidden_link' href='#2.sentence-1'>.</a></li></ul></div></div></div><div class='para nonNormativeOnly' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/templates.tex#L2097'>#</a></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<div id='3.sentence-1' class='sentence'><span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E, <span class='keyword'>int</span> size<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> buffer <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
buffer<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='literal'>2</span><span class='operator'>*</span><span class='literal'>512</span><span class='anglebracket'>&gt;</span> x;
buffer<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='literal'>1024</span><span class='anglebracket'>&gt;</span> y;
</span>
declares
<span class='texttt'>x</span>
and
<span class='texttt'>y</span>
to be of the same type, and
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>void</span><span class='parenthesis'>(</span><span class='operator'>*</span>err_fct<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> list <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='operator'>&amp;</span>error_handler1<span class='anglebracket'>&gt;</span> x1;
list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='operator'>&amp;</span>error_handler2<span class='anglebracket'>&gt;</span> x2;
list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='operator'>&amp;</span>error_handler2<span class='anglebracket'>&gt;</span> x3;
list<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='operator'>&amp;</span>error_handler2<span class='anglebracket'>&gt;</span> x4;
</span>
declares
<span class='texttt'>x2</span>
and
<span class='texttt'>x3</span>
to be of the same type<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>Their type differs from the types of
<span class='texttt'>x1</span>
and
<span class='texttt'>x4</span><a class='hidden_link' href='#3.sentence-2'>.</a></div></div><div class='texpara'><div id='3.sentence-3' class='sentence'><span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> Z <span class='operator'>=</span> Y<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
X<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='anglebracket'>&gt;</span> y;
X<span class='anglebracket'>&lt;</span>Z<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='anglebracket'>&gt;</span> z;
</span>
declares <span class='texttt'>y</span> and <span class='texttt'>z</span> to be of the same type<a class='hidden_link' href='#3.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/templates.tex#L2136'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>If an expression <span class='math'><span class='mathalpha'>e</span></span> is type-dependent (<a href='temp.dep.expr' title='13.8.3.3&emsp;Type-dependent expressions'>[temp.<span class='shy'></span>dep.<span class='shy'></span>expr]</a>),
<span class='texttt'><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='math'><span class='mathalpha'>e</span></span><span class='parenthesis'>)</span></span>
denotes a unique dependent type<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>Two such <a href='dcl.type.decltype#nt:decltype-specifier' title='9.2.9.5&emsp;Decltype specifiers&emsp;[dcl.type.decltype]'><span id='ntref:decltype-specifier'><span class='textsf'><i >decltype-specifier</i></span></span></a><i >s</i>
refer to the same type only if their <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression'><span class='textsf'><i >expression</i></span></span></a><i >s</i> are
equivalent (<a href='temp.over.link' title='13.7.7.2&emsp;Function template overloading'>[temp.<span class='shy'></span>over.<span class='shy'></span>link]</a>)<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='4.sentence-3' class='sentence'>However, such a type might be aliased,
e.g., by a <a href='dcl.typedef#nt:typedef-name' title='9.2.4&emsp;The typedef specifier&emsp;[dcl.typedef]'><span id='ntref:typedef-name'><span class='textsf'><i >typedef-name</i></span></span></a><a class='hidden_link' href='#4.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-120'><div class='texpara'><a class='footnotenum' href='#footnote-120'>120)</a><a class='footnoteBacklink' href='#footnoteref-120'>120)</a> <div id='footnote-120.sentence-1' class='sentence'>The identity of enumerators is not preserved<a class='hidden_link' href='#footnote-120.sentence-1'>.</a></div></div></div><div class='footnote' id='footnote-121'><div class='texpara'><a class='footnotenum' href='#footnote-121'>121)</a><a class='footnoteBacklink' href='#footnoteref-121'>121)</a> <div id='footnote-121.sentence-1' class='sentence'>An array as a <a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter'><span class='textsf'><i >template-parameter</i></span></span></a> decays to a pointer<a class='hidden_link' href='#footnote-121.sentence-1'>.</a></div></div></div></div></body></html>