<!DOCTYPE html><html lang='en'><head><title>[depr.locale.stdcvt.req]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='annexnum' style='min-width:50pt'>Annex D&emsp;(normative)</a> Compatibility features <a class='abbr_ref' href='./#depr'>[depr]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>D.26</a> Deprecated standard code conversion facets <a class='abbr_ref' href='depr.locale.stdcvt#req'>[depr.locale.stdcvt]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>D.26.3</a> Requirements <a class='abbr_ref'>[depr.locale.stdcvt.req]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/future.tex#L2106'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>For each of the three code conversion facets <span class='texttt'>codecvt_<span class='shy'></span>utf8</span>,
<span class='texttt'>codecvt_<span class='shy'></span>utf16</span>, and <span class='texttt'>codecvt_<span class='shy'></span>utf8_<span class='shy'></span>utf16</span>:
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.1'>(1.1)</a></div><div class='texpara'><div id='1.1.sentence-1' class='sentence'><span class='texttt'>Elem</span> is the wide-character type, such as
  <span id=':wchar_t'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>, <span id=':char16_t'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span>, or <span id=':char32_t'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span><a class='hidden_link' href='#1.1.sentence-1'>.</a></div></div></li><li id='1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.2'>(1.2)</a></div><div class='texpara'><div id='1.2.sentence-1' class='sentence'><span class='texttt'>Maxcode</span> is the largest wide-character code that the facet
  will read or write without reporting a conversion error<a class='hidden_link' href='#1.2.sentence-1'>.</a></div></div></li><li id='1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.3'>(1.3)</a></div><div class='texpara'><div id='1.3.sentence-1' class='sentence'>If <span class='texttt'><span class='parenthesis'>(</span>Mode <span class='operator'>&amp;</span> consume_<span class='shy'></span>header<span class='parenthesis'>)</span></span>, the facet shall consume an
  initial header sequence, if present, when reading a multibyte sequence
  to determine the endianness of the subsequent multibyte sequence to be read<a class='hidden_link' href='#1.3.sentence-1'>.</a></div></div></li><li id='1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.4'>(1.4)</a></div><div class='texpara'><div id='1.4.sentence-1' class='sentence'>If <span class='texttt'><span class='parenthesis'>(</span>Mode <span class='operator'>&amp;</span> generate_<span class='shy'></span>header<span class='parenthesis'>)</span></span>, the facet shall generate an
  initial header sequence when writing a multibyte sequence to advertise
  the endianness of the subsequent multibyte sequence to be written<a class='hidden_link' href='#1.4.sentence-1'>.</a></div></div></li><li id='1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.5'>(1.5)</a></div><div class='texpara'><div id='1.5.sentence-1' class='sentence'>If <span class='texttt'><span class='parenthesis'>(</span>Mode <span class='operator'>&amp;</span> little_<span class='shy'></span>endian<span class='parenthesis'>)</span></span>, the facet shall generate a
  multibyte sequence in little-endian order,
  as opposed to the default big-endian order<a class='hidden_link' href='#1.5.sentence-1'>.</a></div></div></li><li id='1.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.6'>(1.6)</a></div><div class='texpara'><div id='1.6.sentence-1' class='sentence'>UCS-2 is the same encoding as UTF-16,
  except that it encodes scalar values in the range
  <span class='ucode'>U+0000</span>â€“<span class='ucode'>U+ffff</span> (Basic Multilingual Plane) only<a class='hidden_link' href='#1.6.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/future.tex#L2134'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'><a class='index' id=':UTF-8'></a><a class='index' id=':UCS-2'></a><a class='index' id=':UTF-32'></a>For the facet <span class='texttt'>codecvt_<span class='shy'></span>utf8</span><a class='index' id='lib:codecvt_utf8'></a>:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.1'>(2.1)</a></div><div class='texpara'><div id='2.1.sentence-1' class='sentence'>The facet shall convert between UTF-8 multibyte sequences
  and UCS-2 or UTF-32 (depending on the size of <span class='texttt'>Elem</span>)<a class='hidden_link' href='#2.1.sentence-1'>.</a></div></div></li><li id='2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.2'>(2.2)</a></div><div class='texpara'><div id='2.2.sentence-1' class='sentence'>Endianness shall not affect how multibyte sequences are read or written<a class='hidden_link' href='#2.2.sentence-1'>.</a></div></div></li><li id='2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.3'>(2.3)</a></div><div class='texpara'><div id='2.3.sentence-1' class='sentence'>The multibyte sequences may be written as either a text or a binary file<a class='hidden_link' href='#2.3.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/future.tex#L2149'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'><a class='index' id=':UTF-16'></a><a class='index' id=':UCS-2_'></a><a class='index' id=':UTF-32_'></a>For the facet <span class='texttt'>codecvt_<span class='shy'></span>utf16</span><a class='index' id='lib:codecvt_utf16'></a>:
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div><div class='texpara'><div id='3.1.sentence-1' class='sentence'>The facet shall convert between UTF-16 multibyte sequences
  and UCS-2 or UTF-32 (depending on the size of <span class='texttt'>Elem</span>)<a class='hidden_link' href='#3.1.sentence-1'>.</a></div></div></li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div><div class='texpara'><div id='3.2.sentence-1' class='sentence'>Multibyte sequences shall be read or written
  according to the <span class='texttt'>Mode</span> flag, as set out above<a class='hidden_link' href='#3.2.sentence-1'>.</a></div></div></li><li id='3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.3'>(3.3)</a></div><div class='texpara'><div id='3.3.sentence-1' class='sentence'>The multibyte sequences may be written only as a binary file<a class='hidden_link' href='#3.3.sentence-1'>.</a></div> <div id='3.3.sentence-2' class='sentence'>Attempting to write to a text file produces undefined behavior<a class='hidden_link' href='#3.3.sentence-2'>.</a></div></div></li></ul></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/df2e6ff582d09a4100b459399f5f76ad3db5f88f/source/future.tex#L2166'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'><a class='index' id=':UTF-8_'></a><a class='index' id=':UTF-16_'></a>For the facet <span class='texttt'>codecvt_<span class='shy'></span>utf8_<span class='shy'></span>utf16</span><a class='index' id='lib:codecvt_utf8_utf16'></a>:
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.1'>(4.1)</a></div><div class='texpara'><div id='4.1.sentence-1' class='sentence'>The facet shall convert between UTF-8 multibyte sequences
  and UTF-16 (one or two 16-bit codes) within the program<a class='hidden_link' href='#4.1.sentence-1'>.</a></div></div></li><li id='4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.2'>(4.2)</a></div><div class='texpara'><div id='4.2.sentence-1' class='sentence'>Endianness shall not affect how multibyte sequences are read or written<a class='hidden_link' href='#4.2.sentence-1'>.</a></div></div></li><li id='4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.3'>(4.3)</a></div><div class='texpara'><div id='4.3.sentence-1' class='sentence'>The multibyte sequences may be written as either a text or a binary file<a class='hidden_link' href='#4.3.sentence-1'>.</a></div></div></li></ul></div></div></div></div></body></html>