<!DOCTYPE html><html lang='en'><head><title>[atomics.types.generic]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>33</a> Concurrency support library <a class='abbr_ref' href='./#thread'>[thread]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>33.5</a> Atomic operations <a class='abbr_ref' href='atomics#types.generic'>[atomics]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>33.5.8</a> Class template <span class='texttt'>atomic</span> <a class='abbr_ref'>[atomics.types.generic]</a></h3><div id='general' class='section'><h4 ><a class='secnum' href='#general' style='min-width:95pt'>33.5.8.1</a> General <a class='abbr_ref' href='atomics.types.generic.general'>[atomics.types.generic.general]</a></h4><div class='texpara'><span id='lib:atomic,value_type'><span id='lib:value_type,atomic'><span id='lib:atomic'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic'>ðŸ”—</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> T;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free'></a><i >implementation-defined</i>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='comment'>// <a href='#atomics.types.operations' title='33.5.8.2&emsp;Operations on atomic types'>[atomics.<span class='shy'></span>types.<span class='shy'></span>operations]</a>, operations on atomic types</span>
    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span>is_nothrow_default_constructible_v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    T load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    T exchange<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T exchange<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></span></span><a class='index' id='lib:atomic_'></a></div><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3684'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'>The template argument for <span class='texttt'>T</span> shall meet the
<i >Cpp17CopyConstructible</i> and <i >Cpp17CopyAssignable</i> requirements<a class='hidden_link' href='#general-1.sentence-1'>.</a></div> <div id='general-1.sentence-2' class='sentence'>The program is ill-formed if any of
<ul class='itemize'><li id='general-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-1.1'>(1.1)</a></div><span class='texttt'>is_<span class='shy'></span>trivially_<span class='shy'></span>copyable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>,</li><li id='general-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-1.2'>(1.2)</a></div><span class='texttt'>is_<span class='shy'></span>copy_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>,</li><li id='general-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-1.3'>(1.3)</a></div><span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>,</li><li id='general-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-1.4'>(1.4)</a></div><span class='texttt'>is_<span class='shy'></span>copy_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>, or</li><li id='general-1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-1.5'>(1.5)</a></div><span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span></li></ul>
is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#general-1.sentence-2'>.</a></div> <div id='general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-1'>1</a></i>:&ensp;<div id='general-1.sentence-3' class='sentence'>Type arguments that are
not also statically initializable can be difficult to use<a class='hidden_link' href='#general-1.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3701'>#</a></div><div class='texpara'><div id='general-2.sentence-1' class='sentence'>The specialization <span class='texttt'>atomic<span class='anglebracket'>&lt;</span><span class='keyword'>bool</span><span class='anglebracket'>&gt;</span></span> is a standard-layout struct<a class='hidden_link' href='#general-2.sentence-1'>.</a></div></div></div><div class='para nonNormativeOnly' id='general-3'><div class='marginalizedparent'><a class='marginalized' href='#general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3704'>#</a></div><div class='texpara'><div id='general-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-2'>2</a></i>:&ensp;<div id='general-3.sentence-1' class='sentence'>The representation of an atomic specialization
need not have the same size and alignment requirement as
its corresponding argument type<a class='hidden_link' href='#general-3.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div id='atomics.types.operations' class='section'><h4 ><a class='secnum' href='#atomics.types.operations' style='min-width:95pt'>33.5.8.2</a> Operations on atomic types <a class='abbr_ref' href='atomics.types.operations'>[atomics.types.operations]</a></h4><div class='texpara'><div id='lib:atomic<floating-point-type>,constructor'><div id='lib:atomic<integral-type>,constructor'><div id='lib:atomic<T*>,constructor'><div id='lib:atomic,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic,constructor'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span>is_nothrow_default_constructible_v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.types.operations-1'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3722'>#</a></div><div class='texpara'><div id='atomics.types.operations-1.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>is_<span class='shy'></span>default_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.operations-1.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-2'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3726'>#</a></div><div class='texpara'><div id='atomics.types.operations-2.sentence-1' class='sentence'><i >Effects</i>: Initializes the atomic object with the value of <span class='texttt'>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#atomics.types.operations-2.sentence-1'>.</a></div> <div id='atomics.types.operations-2.sentence-2' class='sentence'>Initialization is not an atomic operation (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)<a class='hidden_link' href='#atomics.types.operations-2.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<floating-point-type>,constructor_'><div id='lib:atomic<integral-type>,constructor_'><div id='lib:atomic<T*>,constructor_'><div id='lib:atomic,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic,constructor_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span>T desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.types.operations-3'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3741'>#</a></div><div class='texpara'><div id='atomics.types.operations-3.sentence-1' class='sentence'><i >Effects</i>: Initializes the object with the value <span class='texttt'>desired</span><a class='hidden_link' href='#atomics.types.operations-3.sentence-1'>.</a></div> <div id='atomics.types.operations-3.sentence-2' class='sentence'>Initialization is not an atomic operation (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)<a class='hidden_link' href='#atomics.types.operations-3.sentence-2'>.</a></div> <div id='atomics.types.operations-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.types.operations-note-1'>1</a></i>:&ensp;<div id='atomics.types.operations-3.sentence-3' class='sentence'>It is possible to have an access to an atomic object <span class='texttt'>A</span>
race with its construction, for example by communicating the address of the
just-constructed object <span class='texttt'>A</span> to another thread via
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span> operations on a suitable atomic pointer
variable, and then immediately accessing <span class='texttt'>A</span> in the receiving thread<a class='hidden_link' href='#atomics.types.operations-3.sentence-3'>.</a></div> <div id='atomics.types.operations-3.sentence-4' class='sentence'>This results in undefined behavior<a class='hidden_link' href='#atomics.types.operations-3.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,is_always_lock_free'><div id='lib:is_always_lock_free,atomic<weak_ptr<T>>'><div id='lib:atomic<shared_ptr<T>>,is_always_lock_free'><div id='lib:is_always_lock_free,atomic<shared_ptr<T>>'><div id='lib:atomic<floating-point-type>,is_always_lock_free'><div id='lib:is_always_lock_free,atomic<floating-point-type>'><div id='lib:atomic<integral-type>,is_always_lock_free'><div id='lib:is_always_lock_free,atomic<integral-type>'><div id='lib:atomic<T*>,is_always_lock_free'><div id='lib:is_always_lock_free,atomic<T*>'><div id='lib:atomic,is_always_lock_free'><div id='lib:is_always_lock_free,atomic'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:is_always_lock_free,atomic'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free_'></a><i >implementation-defined</i>;
</code></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.operations-4'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3766'>#</a></div><div class='texpara'><div id='atomics.types.operations-4.sentence-1' class='sentence'>The <span id=':static'><span class='texttt'><span class='keyword'>static</span></span></span> data member <span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span>
if the atomic type's operations are always lock-free, and <span class='texttt'><span class='literal'>false</span></span> otherwise<a class='hidden_link' href='#atomics.types.operations-4.sentence-1'>.</a></div> <div id='atomics.types.operations-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.types.operations-note-2'>2</a></i>:&ensp;<div id='atomics.types.operations-4.sentence-2' class='sentence'>The value of <span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is consistent with the value of
the corresponding <span class='texttt'>ATOMIC_<span class='shy'></span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>_<span class='shy'></span>LOCK_<span class='shy'></span>FREE</span> macro, if defined<a class='hidden_link' href='#atomics.types.operations-4.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,is_lock_free'><div id='lib:is_lock_free,atomic<weak_ptr<T>>'><div id='lib:atomic<shared_ptr<T>>,is_lock_free'><div id='lib:is_lock_free,atomic<shared_ptr<T>>'><div id='lib:atomic<floating-point-type>,is_lock_free'><div id='lib:is_lock_free,atomic<floating-point-type>'><div id='lib:atomic<integral-type>,is_lock_free'><div id='lib:is_lock_free,atomic<integral-type>'><div id='lib:atomic<T*>,is_lock_free'><div id='lib:is_lock_free,atomic<T*>'><div id='lib:atomic,is_lock_free'><div id='lib:is_lock_free,atomic'><div id='lib:atomic_is_lock_free'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic_is_lock_free'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.operations-5'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3788'>#</a></div><div class='texpara'><div id='atomics.types.operations-5.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='literal'>true</span></span> if the object's operations are lock-free, <span class='texttt'><span class='literal'>false</span></span> otherwise<a class='hidden_link' href='#atomics.types.operations-5.sentence-1'>.</a></div> <div id='atomics.types.operations-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.types.operations-note-3'>3</a></i>:&ensp;<div id='atomics.types.operations-5.sentence-2' class='sentence'>The return value of the <span class='texttt'>is_<span class='shy'></span>lock_<span class='shy'></span>free</span> member function
is consistent with the value of <span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> for the same type<a class='hidden_link' href='#atomics.types.operations-5.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:atomic<floating-point-type>,store'><div id='lib:store,atomic<floating-point-type>'><div id='lib:atomic<integral-type>,store'><div id='lib:store,atomic<integral-type>'><div id='lib:atomic<T*>,store'><div id='lib:store,atomic<T*>'><div id='lib:atomic,store'><div id='lib:store,atomic'><div id='lib:atomic_store_explicit'><div id='lib:atomic_store'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic_store'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> store<span class='parenthesis'>(</span>T desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> store<span class='parenthesis'>(</span>T desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.operations-6'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3809'>#</a></div><div class='texpara'><div id='atomics.types.operations-6.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.operations-6.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-7'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3814'>#</a></div><div class='texpara'><div id='atomics.types.operations-7.sentence-1' class='sentence'><i >Preconditions</i>: The <span class='texttt'>order</span> argument is neither <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>consume</span>,
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span>, nor <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span><a class='hidden_link' href='#atomics.types.operations-7.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-8'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3819'>#</a></div><div class='texpara'><div id='atomics.types.operations-8.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces the value pointed to by <span id=':this'><span class='texttt'><span class='keyword'>this</span></span></span>
with the value of <span class='texttt'>desired</span><a class='hidden_link' href='#atomics.types.operations-8.sentence-1'>.</a></div> <div id='atomics.types.operations-8.sentence-2' class='sentence'>Memory is affected according to the value of
<span class='texttt'>order</span><a class='hidden_link' href='#atomics.types.operations-8.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<floating-point-type>,operator='><div id='lib:operator=,atomic<floating-point-type>'><div id='lib:atomic<integral-type>,operator='><div id='lib:operator=,atomic<integral-type>'><div id='lib:atomic<T*>,operator='><div id='lib:operator=,atomic<T*>'><div id='lib:atomic,operator='><div id='lib:operator=,atomic'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,atomic'>ðŸ”—</a></div><code class='itemdeclcode'>T <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T desired<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.operations-9'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3836'>#</a></div><div class='texpara'><div id='atomics.types.operations-9.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.operations-9.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-10'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3841'>#</a></div><div class='texpara'><div id='atomics.types.operations-10.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>store<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#atomics.types.operations-10.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-11'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3845'>#</a></div><div class='texpara'><div id='atomics.types.operations-11.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>desired</span><a class='hidden_link' href='#atomics.types.operations-11.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<floating-point-type>,load'><div id='lib:load,atomic<floating-point-type>'><div id='lib:atomic<integral-type>,load'><div id='lib:load,atomic<integral-type>'><div id='lib:atomic<T*>,load'><div id='lib:load,atomic<T*>'><div id='lib:atomic,load'><div id='lib:load,atomic'><div id='lib:atomic_load_explicit'><div id='lib:atomic_load'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic_load'>ðŸ”—</a></div><code class='itemdeclcode'>T load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.operations-12'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3862'>#</a></div><div class='texpara'><div id='atomics.types.operations-12.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.operations-12.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-13'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3867'>#</a></div><div class='texpara'><div id='atomics.types.operations-13.sentence-1' class='sentence'><i >Preconditions</i>: The <span class='texttt'>order</span> argument is neither <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span><a class='hidden_link' href='#atomics.types.operations-13.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-14'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3871'>#</a></div><div class='texpara'><div id='atomics.types.operations-14.sentence-1' class='sentence'><i >Effects</i>: Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#atomics.types.operations-14.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-15'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3875'>#</a></div><div class='texpara'><div id='atomics.types.operations-15.sentence-1' class='sentence'><i >Returns</i>: Atomically returns the value pointed to by <span id=':this_'><span class='texttt'><span class='keyword'>this</span></span></span><a class='hidden_link' href='#atomics.types.operations-15.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<floating-point-type>,operator_floating-point-type'><div id='lib:operator_floating-point-type,atomic<floating-point-type>'><div id='lib:atomic<integral-type>,operator_integral-type'><div id='lib:operator_integral-type,atomic<integral-type>'><div id='lib:atomic<T*>,operator_T*'><div id='lib:operator_T*,atomic<T*>'><div id='lib:atomic,operator_type'><div id='lib:operator_type,atomic'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator_type,atomic'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>operator</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>operator</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.operations-16'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3890'>#</a></div><div class='texpara'><div id='atomics.types.operations-16.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.operations-16.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-17'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3895'>#</a></div><div class='texpara'><div id='atomics.types.operations-17.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> load<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;</span></div></div></div></div><div class='texpara'><div id='lib:atomic<floating-point-type>,exchange'><div id='lib:exchange,atomic<floating-point-type>'><div id='lib:atomic<integral-type>,exchange'><div id='lib:exchange,atomic<integral-type>'><div id='lib:atomic<T*>,exchange'><div id='lib:exchange,atomic<T*>'><div id='lib:atomic,exchange'><div id='lib:exchange,atomic'><div id='lib:atomic_exchange_explicit'><div id='lib:atomic_exchange'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic_exchange'>ðŸ”—</a></div><code class='itemdeclcode'>T exchange<span class='parenthesis'>(</span>T desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T exchange<span class='parenthesis'>(</span>T desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.operations-18'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3913'>#</a></div><div class='texpara'><div id='atomics.types.operations-18.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.operations-18.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-19'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3918'>#</a></div><div class='texpara'><div id='atomics.types.operations-19.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces the value pointed to by <span id=':this__'><span class='texttt'><span class='keyword'>this</span></span></span>
with <span class='texttt'>desired</span><a class='hidden_link' href='#atomics.types.operations-19.sentence-1'>.</a></div> <div id='atomics.types.operations-19.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#atomics.types.operations-19.sentence-2'>.</a></div> <div id='atomics.types.operations-19.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)<a class='hidden_link' href='#atomics.types.operations-19.sentence-3'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-20'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3925'>#</a></div><div class='texpara'><div id='atomics.types.operations-20.sentence-1' class='sentence'><i >Returns</i>: Atomically returns the value pointed to by <span id=':this___'><span class='texttt'><span class='keyword'>this</span></span></span> immediately before the effects<a class='hidden_link' href='#atomics.types.operations-20.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<floating-point-type>,compare_exchange_strong'><div id='lib:compare_exchange_strong,atomic<floating-point-type>'><div id='lib:atomic<integral-type>,compare_exchange_strong'><div id='lib:compare_exchange_strong,atomic<integral-type>'><div id='lib:atomic<T*>,compare_exchange_strong'><div id='lib:compare_exchange_strong,atomic<T*>'><div id='lib:atomic,compare_exchange_strong'><div id='lib:compare_exchange_strong,atomic'><div id='lib:atomic<floating-point-type>,compare_exchange_weak'><div id='lib:compare_exchange_weak,atomic<floating-point-type>'><div id='lib:atomic<integral-type>,compare_exchange_weak'><div id='lib:compare_exchange_weak,atomic<integral-type>'><div id='lib:atomic<T*>,compare_exchange_weak'><div id='lib:compare_exchange_weak,atomic<T*>'><div id='lib:atomic,compare_exchange_weak'><div id='lib:compare_exchange_weak,atomic'><div id='lib:atomic_compare_exchange_strong_explicit'><div id='lib:atomic_compare_exchange_weak_explicit'><div id='lib:atomic_compare_exchange_strong'><div id='lib:atomic_compare_exchange_weak'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic_compare_exchange_weak'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                           memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                           memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                             memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                             memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                           memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                           memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                             memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span> expected, T desired,
                             memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.operations-21'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3962'>#</a></div><div class='texpara'><div id='atomics.types.operations-21.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.operations-21.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-22'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3967'>#</a></div><div class='texpara'><div id='atomics.types.operations-22.sentence-1' class='sentence'><i >Preconditions</i>: The <span class='texttt'>failure</span> argument is neither <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span><a class='hidden_link' href='#atomics.types.operations-22.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-23'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3972'>#</a></div><div class='texpara'><div id='atomics.types.operations-23.sentence-1' class='sentence'><i >Effects</i>: Retrieves the value in <span class='texttt'>expected</span><a class='hidden_link' href='#atomics.types.operations-23.sentence-1'>.</a></div> <div id='atomics.types.operations-23.sentence-2' class='sentence'>It then atomically
compares the value representation of the value pointed to by <span id=':this____'><span class='texttt'><span class='keyword'>this</span></span></span>
for equality with that previously retrieved from <span class='texttt'>expected</span>,
and if true, replaces the value pointed to
by <span id=':this_____'><span class='texttt'><span class='keyword'>this</span></span></span> with that in <span class='texttt'>desired</span><a class='hidden_link' href='#atomics.types.operations-23.sentence-2'>.</a></div> <div id='atomics.types.operations-23.sentence-3' class='sentence'>If and only if the comparison is <span class='texttt'><span class='literal'>true</span></span>, memory is affected according to the
value of <span class='texttt'>success</span>, and if the comparison is false, memory is affected according
to the value of <span class='texttt'>failure</span><a class='hidden_link' href='#atomics.types.operations-23.sentence-3'>.</a></div> <div id='atomics.types.operations-23.sentence-4' class='sentence'>When only one <span class='texttt'>memory_<span class='shy'></span>order</span> argument is
supplied, the value of <span class='texttt'>success</span> is <span class='texttt'>order</span>, and the value of
<span class='texttt'>failure</span> is <span class='texttt'>order</span> except that a value of <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span>
shall be replaced by the value <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> and a value of
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span> shall be replaced by the value
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span><a class='hidden_link' href='#atomics.types.operations-23.sentence-4'>.</a></div> <div id='atomics.types.operations-23.sentence-5' class='sentence'>If and only if the comparison is false then, after the atomic operation,
the value in <span class='texttt'>expected</span> is replaced by the value
pointed to by <span id=':this______'><span class='texttt'><span class='keyword'>this</span></span></span> during the atomic comparison<a class='hidden_link' href='#atomics.types.operations-23.sentence-5'>.</a></div> <div id='atomics.types.operations-23.sentence-6' class='sentence'>If the operation returns <span class='texttt'><span class='literal'>true</span></span>, these
operations are atomic read-modify-write
operations (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>) on the memory
pointed to by <span id=':this_______'><span class='texttt'><span class='keyword'>this</span></span></span><a class='hidden_link' href='#atomics.types.operations-23.sentence-6'>.</a></div> <div id='atomics.types.operations-23.sentence-7' class='sentence'>Otherwise, these operations are atomic load operations on that memory<a class='hidden_link' href='#atomics.types.operations-23.sentence-7'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-24'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L3996'>#</a></div><div class='texpara'><div id='atomics.types.operations-24.sentence-1' class='sentence'><i >Returns</i>: The result of the comparison<a class='hidden_link' href='#atomics.types.operations-24.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='atomics.types.operations-25'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4000'>#</a></div><div class='texpara'><div id='atomics.types.operations-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.types.operations-note-4'>4</a></i>:&ensp;<div id='atomics.types.operations-25.sentence-1' class='sentence'>For example, the effect of
<span class='texttt'>compare_<span class='shy'></span>exchange_<span class='shy'></span>strong</span>
on objects without padding bits (<a href='basic.types.general#term.padding.bits' title='6.8.1&emsp;General'>[basic.<span class='shy'></span>types.<span class='shy'></span>general]</a>) is
<span class='codeblock'><span class='keyword'>if</span> <span class='parenthesis'>(</span>memcmp<span class='parenthesis'>(</span><span class='keyword'>this</span>, <span class='operator'>&amp;</span>expected, <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span>
  memcpy<span class='parenthesis'>(</span><span class='keyword'>this</span>, <span class='operator'>&amp;</span>desired, <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>else</span>
  memcpy<span class='parenthesis'>(</span><span class='operator'>&amp;</span>expected, <span class='keyword'>this</span>, <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span></div> â€”&nbsp;<i>end note</i>]</div></div> <div id='atomics.types.operations-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#atomics.types.operations-example-1'>1</a></i>:&ensp;<div id='atomics.types.operations-25.sentence-2' class='sentence'>The expected use of the compare-and-exchange operations is as follows<a class='hidden_link' href='#atomics.types.operations-25.sentence-2'>.</a></div> <div id='atomics.types.operations-25.sentence-3' class='sentence'>The
compare-and-exchange operations will update <span class='texttt'>expected</span> when another iteration of
the loop is needed<a class='hidden_link' href='#atomics.types.operations-25.sentence-3'>.</a></div> <span class='codeblock'>expected <span class='operator'>=</span> current<span class='operator'>.</span>load<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>do</span> <span class='curlybracket'>{</span>
  desired <span class='operator'>=</span> function<span class='parenthesis'>(</span>expected<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span> <span class='keyword'>while</span> <span class='parenthesis'>(</span><span class='operator'>!</span>current<span class='operator'>.</span>compare_exchange_weak<span class='parenthesis'>(</span>expected, desired<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span> â€”&nbsp;<i>end example</i>]</div></div> <div id='atomics.types.operations-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#atomics.types.operations-example-2'>2</a></i>:&ensp;<div id='atomics.types.operations-25.sentence-4' class='sentence'>Because the expected value is updated only on failure,
code releasing the memory containing the <span class='texttt'>expected</span> value on success will work<a class='hidden_link' href='#atomics.types.operations-25.sentence-4'>.</a></div> <div id='atomics.types.operations-25.sentence-5' class='sentence'>For example, list head insertion will act atomically and would not introduce a
data race in the following code:
<span class='codeblock'><span class='keyword'>do</span> <span class='curlybracket'>{</span>
  p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>next <span class='operator'>=</span> head;                                   <span class='comment'>// make new list node point to the current head</span>
<span class='curlybracket'>}</span> <span class='keyword'>while</span> <span class='parenthesis'>(</span><span class='operator'>!</span>head<span class='operator'>.</span>compare_exchange_weak<span class='parenthesis'>(</span>p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>next, p<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;  <span class='comment'>// try to insert</span>
</span></div> â€”&nbsp;<i>end example</i>]</div></div></div></div></div><div class='para' id='atomics.types.operations-26'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4035'>#</a></div><div class='texpara'><div id='atomics.types.operations-26.sentence-1' class='sentence'>Implementations should ensure that weak compare-and-exchange operations do not
consistently return <span class='texttt'><span class='literal'>false</span></span> unless either the atomic object has value
different from <span class='texttt'>expected</span> or there are concurrent modifications to the
atomic object<a class='hidden_link' href='#atomics.types.operations-26.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-27'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-27'>27</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4041'>#</a></div><div class='texpara'><div id='atomics.types.operations-27.sentence-1' class='sentence'><i >Remarks</i>: A weak compare-and-exchange operation may fail spuriously<a class='hidden_link' href='#atomics.types.operations-27.sentence-1'>.</a></div> <div id='atomics.types.operations-27.sentence-2' class='sentence'>That is, even when
the contents of memory referred to by <span class='texttt'>expected</span> and <span id=':this________'><span class='texttt'><span class='keyword'>this</span></span></span> are
equal, it may return <span class='texttt'><span class='literal'>false</span></span> and store back to <span class='texttt'>expected</span> the same memory
contents that were originally there<a class='hidden_link' href='#atomics.types.operations-27.sentence-2'>.</a></div> <div id='atomics.types.operations-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.types.operations-note-5'>5</a></i>:&ensp;<div id='atomics.types.operations-27.sentence-3' class='sentence'>This
spurious failure enables implementation of compare-and-exchange on a broader class of
machines, e.g., load-locked store-conditional machines<a class='hidden_link' href='#atomics.types.operations-27.sentence-3'>.</a></div> <div id='atomics.types.operations-27.sentence-4' class='sentence'>A
consequence of spurious failure is that nearly all uses of weak compare-and-exchange
will be in a loop<a class='hidden_link' href='#atomics.types.operations-27.sentence-4'>.</a></div> <div id='atomics.types.operations-27.sentence-5' class='sentence'>When a compare-and-exchange is in a loop, the weak version will yield better performance
on some platforms<a class='hidden_link' href='#atomics.types.operations-27.sentence-5'>.</a></div> <div id='atomics.types.operations-27.sentence-6' class='sentence'>When a weak compare-and-exchange would require a loop and a strong one
would not, the strong one is preferable<a class='hidden_link' href='#atomics.types.operations-27.sentence-6'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para nonNormativeOnly' id='atomics.types.operations-28'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-28'>28</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4058'>#</a></div><div class='texpara'><div id='atomics.types.operations-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.types.operations-note-6'>6</a></i>:&ensp;<div id='atomics.types.operations-28.sentence-1' class='sentence'>Under cases where the <span class='texttt'>memcpy</span> and <span class='texttt'>memcmp</span> semantics of the compare-and-exchange
operations apply, the comparisons can fail for values that compare equal with
<span class='texttt'><span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span></span> if the value representation has trap bits or alternate
representations of the same value<a class='hidden_link' href='#atomics.types.operations-28.sentence-1'>.</a></div> <div id='atomics.types.operations-28.sentence-2' class='sentence'>Notably, on implementations conforming to
ISO/IEC/IEEE 60559, floating-point <span class='texttt'><span class='operator'>-</span><span class='literal'>0.0</span></span> and <span class='texttt'><span class='operator'>+</span><span class='literal'>0.0</span></span>
will not compare equal with <span class='texttt'>memcmp</span> but will compare equal with <span class='texttt'><span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span></span>,
and NaNs with the same payload will compare equal with <span class='texttt'>memcmp</span> but will not
compare equal with <span class='texttt'><span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span></span><a class='hidden_link' href='#atomics.types.operations-28.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div> <div id='atomics.types.operations-note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.types.operations-note-7'>7</a></i>:&ensp;<div id='atomics.types.operations-28.sentence-3' class='sentence'>Because compare-and-exchange acts on an object's value representation,
padding bits that never participate in the object's value representation
are ignored<a class='hidden_link' href='#atomics.types.operations-28.sentence-3'>.</a></div> <div id='atomics.types.operations-28.sentence-4' class='sentence'>As a consequence, the following code is guaranteed to avoid
spurious failure:
<span class='codeblock'><span class='keyword'>struct</span> padded <span class='curlybracket'>{</span>
  <span class='keyword'>char</span> clank <span class='operator'>=</span> <span class='literal'>0x42</span>;
  <span class='comment'>// Padding here.</span>
  <span class='keyword'>unsigned</span> biff <span class='operator'>=</span> <span class='literal'>0xC0DEFEFE</span>;
<span class='curlybracket'>}</span>;
atomic<span class='anglebracket'>&lt;</span>padded<span class='anglebracket'>&gt;</span> pad <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

<span class='keyword'>bool</span> zap<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  padded expected, desired<span class='curlybracket'>{</span><span class='literal'>0</span>, <span class='literal'>0</span><span class='curlybracket'>}</span>;
  <span class='keyword'>return</span> pad<span class='operator'>.</span>compare_exchange_strong<span class='parenthesis'>(</span>expected, desired<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div> â€”&nbsp;<i>end note</i>]</div></div> <div id='atomics.types.operations-note-8' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.types.operations-note-8'>8</a></i>:&ensp;<div id='atomics.types.operations-28.sentence-5' class='sentence'>For a union with bits that participate in the value representation
of some members but not others, compare-and-exchange might always fail<a class='hidden_link' href='#atomics.types.operations-28.sentence-5'>.</a></div> <div id='atomics.types.operations-28.sentence-6' class='sentence'>This is because such padding bits have an indeterminate value when they
do not participate in the value representation of the active member<a class='hidden_link' href='#atomics.types.operations-28.sentence-6'>.</a></div> <div id='atomics.types.operations-28.sentence-7' class='sentence'>As a consequence, the following code is not guaranteed to ever succeed:
<span class='codeblock'><span class='keyword'>union</span> pony <span class='curlybracket'>{</span>
  <span class='keyword'>double</span> celestia <span class='operator'>=</span> <span class='literal'>0.</span>;
  <span class='keyword'>short</span> luna;       <span class='comment'>// padded</span>
<span class='curlybracket'>}</span>;
atomic<span class='anglebracket'>&lt;</span>pony<span class='anglebracket'>&gt;</span> princesses <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

<span class='keyword'>bool</span> party<span class='parenthesis'>(</span>pony desired<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  pony expected;
  <span class='keyword'>return</span> princesses<span class='operator'>.</span>compare_exchange_strong<span class='parenthesis'>(</span>expected, desired<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:atomic<floating-point-type>,wait'><div id='lib:wait,atomic<floating-point-type>'><div id='lib:atomic<integral-type>,wait'><div id='lib:wait,atomic<integral-type>'><div id='lib:atomic<T*>,wait'><div id='lib:wait,atomic<T*>'><div id='lib:atomic,wait'><div id='lib:wait,atomic'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:wait,atomic'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.operations-29'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-29'>29</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4119'>#</a></div><div class='texpara'><div id='atomics.types.operations-29.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>order</span> is neither <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span><a class='hidden_link' href='#atomics.types.operations-29.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-30'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-30'>30</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4123'>#</a></div><div class='texpara'><div id='atomics.types.operations-30.sentence-1' class='sentence'><i >Effects</i>: Repeatedly performs the following steps, in order:
<ul class='itemize'><li id='atomics.types.operations-30.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#atomics.types.operations-30.1'>(30.1)</a></div><div class='texpara'><div id='atomics.types.operations-30.1.sentence-1' class='sentence'>Evaluates <span class='texttt'>load<span class='parenthesis'>(</span>order<span class='parenthesis'>)</span></span> and
  compares its value representation for equality against that of <span class='texttt'>old</span><a class='hidden_link' href='#atomics.types.operations-30.1.sentence-1'>.</a></div></div></li><li id='atomics.types.operations-30.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#atomics.types.operations-30.2'>(30.2)</a></div><div class='texpara'><div id='atomics.types.operations-30.2.sentence-1' class='sentence'>If they compare unequal, returns<a class='hidden_link' href='#atomics.types.operations-30.2.sentence-1'>.</a></div></div></li><li id='atomics.types.operations-30.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#atomics.types.operations-30.3'>(30.3)</a></div><div class='texpara'><div id='atomics.types.operations-30.3.sentence-1' class='sentence'>Blocks until it
  is unblocked by an atomic notifying operation or is unblocked spuriously<a class='hidden_link' href='#atomics.types.operations-30.3.sentence-1'>.</a></div></div></li></ul></div></div></div></div><div class='para' id='atomics.types.operations-31'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-31'>31</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4137'>#</a></div><div class='texpara'><div id='atomics.types.operations-31.sentence-1' class='sentence'><i >Remarks</i>: This function is an atomic waiting operation (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>)<a class='hidden_link' href='#atomics.types.operations-31.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<floating-point-type>,notify_one'><div id='lib:notify_one,atomic<floating-point-type>'><div id='lib:atomic<integral-type>,notify_one'><div id='lib:notify_one,atomic<integral-type>'><div id='lib:atomic<T*>,notify_one'><div id='lib:notify_one,atomic<T*>'><div id='lib:atomic,notify_one'><div id='lib:notify_one,atomic'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:notify_one,atomic'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.operations-32'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-32'>32</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4152'>#</a></div><div class='texpara'><div id='atomics.types.operations-32.sentence-1' class='sentence'><i >Effects</i>: Unblocks the execution of at least one atomic waiting operation
that is eligible to be unblocked (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>) by this call,
if any such atomic waiting operations exist<a class='hidden_link' href='#atomics.types.operations-32.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-33'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-33'>33</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4158'>#</a></div><div class='texpara'><div id='atomics.types.operations-33.sentence-1' class='sentence'><i >Remarks</i>: This function is an atomic notifying operation (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>)<a class='hidden_link' href='#atomics.types.operations-33.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<floating-point-type>,notify_all'><div id='lib:notify_all,atomic<floating-point-type>'><div id='lib:atomic<integral-type>,notify_all'><div id='lib:notify_all,atomic<integral-type>'><div id='lib:atomic<T*>,notify_all'><div id='lib:notify_all,atomic<T*>'><div id='lib:atomic,notify_all'><div id='lib:notify_all,atomic'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:notify_all,atomic'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.operations-34'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-34'>34</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4173'>#</a></div><div class='texpara'><div id='atomics.types.operations-34.sentence-1' class='sentence'><i >Effects</i>: Unblocks the execution of all atomic waiting operations
that are eligible to be unblocked (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>) by this call<a class='hidden_link' href='#atomics.types.operations-34.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.operations-35'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.operations-35'>35</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4178'>#</a></div><div class='texpara'><div id='atomics.types.operations-35.sentence-1' class='sentence'><i >Remarks</i>: This function is an atomic notifying operation (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>)<a class='hidden_link' href='#atomics.types.operations-35.sentence-1'>.</a></div></div></div></div></div><div id='atomics.types.int' class='section'><h4 ><a class='secnum' href='#atomics.types.int' style='min-width:95pt'>33.5.8.3</a> Specializations for integers <a class='abbr_ref' href='atomics.types.int'>[atomics.types.int]</a></h4><div class='texpara'><a class='index' id='lib:atomic<integral-type>'></a></div><div class='para' id='atomics.types.int-1'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.int-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4186'>#</a></div><div class='texpara'><div id='atomics.types.int-1.sentence-1' class='sentence'>There are specializations of the <span class='texttt'>atomic</span>
class template for the integral types
<span class='texttt'><span class='keyword'>char</span></span>,
<span class='texttt'><span class='keyword'>signed</span> <span class='keyword'>char</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>char</span></span>,
<span class='texttt'><span class='keyword'>short</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>short</span></span>,
<span class='texttt'><span class='keyword'>int</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>int</span></span>,
<span class='texttt'><span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>long</span> <span class='keyword'>long</span></span>,
<span class='texttt'><span class='keyword'>unsigned</span> <span class='keyword'>long</span> <span class='keyword'>long</span></span>,
<span id=':char8_t'><span class='texttt'><span class='keyword'>char8_<span class='shy'></span>t</span></span></span>,
<span id=':char16_t'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span>,
<span id=':char32_t'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span>,
<span id=':wchar_t'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>,
and any other types needed by the typedefs in the header <a href='cstdint.syn#header:%3ccstdint%3e' title='17.4.1&emsp;Header &lt;cstdint&gt; synopsis&emsp;[cstdint.syn]'><span id='headerref:<cstdint>'><span class='texttt'>&lt;cstdint&gt;</span></span></a><a class='hidden_link' href='#atomics.types.int-1.sentence-1'>.</a></div> <div id='atomics.types.int-1.sentence-2' class='sentence'>For each such type <span class='texttt'><i >integral-type</i></span>, the specialization
<span class='texttt'>atomic<span class='anglebracket'>&lt;</span><i >integral-type</i><span class='anglebracket'>&gt;</span></span> provides additional atomic operations appropriate to integral types<a class='hidden_link' href='#atomics.types.int-1.sentence-2'>.</a></div> <div id='atomics.types.int-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.types.int-note-1'>1</a></i>:&ensp;<div id='atomics.types.int-1.sentence-3' class='sentence'>The specialization <span class='texttt'>atomic<span class='anglebracket'>&lt;</span><span class='keyword'>bool</span><span class='anglebracket'>&gt;</span></span>
uses the primary template ([atomics.<span class='shy'></span>types.<span class='shy'></span>generic])<a class='hidden_link' href='#atomics.types.int-1.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic<span class='anglebracket'>&lt;</span><i >integral-type</i><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> <i >integral-type</i>;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> value_type;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free__'></a><i >implementation-defined</i>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span><i >integral-type</i>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span><i >integral-type</i>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <i >integral-type</i><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <i >integral-type</i><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <i >integral-type</i> exchange<span class='parenthesis'>(</span><i >integral-type</i>,
                           memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> exchange<span class='parenthesis'>(</span><i >integral-type</i>,
                           memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><i >integral-type</i><span class='operator'>&amp;</span>, <i >integral-type</i>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><i >integral-type</i><span class='operator'>&amp;</span>, <i >integral-type</i>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><i >integral-type</i><span class='operator'>&amp;</span>, <i >integral-type</i>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><i >integral-type</i><span class='operator'>&amp;</span>, <i >integral-type</i>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><i >integral-type</i><span class='operator'>&amp;</span>, <i >integral-type</i>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><i >integral-type</i><span class='operator'>&amp;</span>, <i >integral-type</i>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><i >integral-type</i><span class='operator'>&amp;</span>, <i >integral-type</i>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><i >integral-type</i><span class='operator'>&amp;</span>, <i >integral-type</i>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <i >integral-type</i> fetch_add<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_add<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_sub<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_sub<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_and<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_and<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_or<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_or<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_xor<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> fetch_xor<span class='parenthesis'>(</span><i >integral-type</i>,
                            memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>&amp;</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>&amp;</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>|</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>|</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>^</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >integral-type</i> <span class='keyword'>operator</span><span class='operator'>^</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >integral-type</i><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><i >integral-type</i>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><i >integral-type</i>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div></div><div class='para' id='atomics.types.int-2'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.int-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4308'>#</a></div><div class='texpara'><div id='atomics.types.int-2.sentence-1' class='sentence'>The atomic integral specializations
are standard-layout structs<a class='hidden_link' href='#atomics.types.int-2.sentence-1'>.</a></div> <div id='atomics.types.int-2.sentence-2' class='sentence'>They each have
a trivial destructor<a class='hidden_link' href='#atomics.types.int-2.sentence-2'>.</a></div></div></div><div class='para' id='atomics.types.int-3'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.int-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4314'>#</a></div><div class='texpara'><div id='atomics.types.int-3.sentence-1' class='sentence'>Descriptions are provided below only for members that differ from the primary template<a class='hidden_link' href='#atomics.types.int-3.sentence-1'>.</a></div></div></div><div class='para' id='atomics.types.int-4'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.int-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4317'>#</a></div><div class='texpara'><div id='atomics.types.int-4.sentence-1' class='sentence'>The following operations perform arithmetic computations<a class='hidden_link' href='#atomics.types.int-4.sentence-1'>.</a></div> <div id='atomics.types.int-4.sentence-2' class='sentence'>The correspondence among key, operator, and computation is specified
in Table <a href='#tab:atomic.types.int.comp' title='Table 145: Atomic arithmetic computations'>145</a><a class='hidden_link' href='#atomics.types.int-4.sentence-2'>.</a></div></div><div class='texpara'><div class='numberedTable' id='tab:atomic.types.int.comp'>Table <a href='#tab:atomic.types.int.comp'>145</a>: Atomic arithmetic computations&emsp;<a href='./tab:atomic.types.int.comp'>[tab:atomic.types.int.comp]</a><br><table ><tr id='tab:atomic.types.int.comp-row-1' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:atomic.types.int.comp-row-1'>ðŸ”—</a></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-1-column-1-sentence-1' class='sentence'><b><span class='texttt'><i >key</i></span></b></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-1-column-2-sentence-1' class='sentence'><b>Op</b></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-1-column-3-sentence-1' class='sentence'><b>Computation</b></div></div></td><td class='border left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-1-column-4-sentence-1' class='sentence'><b><span class='texttt'><i >key</i></span></b></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-1-column-5-sentence-1' class='sentence'><b>Op</b></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-1-column-6-sentence-1' class='sentence'><b>Computation</b></div></div></td></tr><tr id='tab:atomic.types.int.comp-row-2' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:atomic.types.int.comp-row-2'>ðŸ”—</a></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-2-column-1-sentence-1' class='sentence'><span class='texttt'>add</span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-2-column-2-sentence-1' class='sentence'><span class='texttt'><span class='operator'>+</span></span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-2-column-3-sentence-1' class='sentence'>addition</div></div></td><td class='border left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-2-column-4-sentence-1' class='sentence'><span class='texttt'>sub</span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-2-column-5-sentence-1' class='sentence'><span class='texttt'><span class='operator'>-</span></span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-2-column-6-sentence-1' class='sentence'>subtraction</div></div></td></tr><tr id='tab:atomic.types.int.comp-row-3'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:atomic.types.int.comp-row-3'>ðŸ”—</a></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-3-column-1-sentence-1' class='sentence'><span class='texttt'>or</span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-3-column-2-sentence-1' class='sentence'><span class='texttt'><span class='operator'>|</span></span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-3-column-3-sentence-1' class='sentence'>bitwise inclusive or</div></div></td><td class='border left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-3-column-4-sentence-1' class='sentence'><span class='texttt'>xor</span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-3-column-5-sentence-1' class='sentence'><span class='texttt'><span class='operator'>^</span></span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-3-column-6-sentence-1' class='sentence'>bitwise exclusive or</div></div></td></tr><tr id='tab:atomic.types.int.comp-row-4'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:atomic.types.int.comp-row-4'>ðŸ”—</a></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-4-column-1-sentence-1' class='sentence'><span class='texttt'>and</span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-4-column-2-sentence-1' class='sentence'><span class='texttt'><span class='operator'>&amp;</span></span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.int.comp-row-4-column-3-sentence-1' class='sentence'>bitwise and</div></div></td><td class='empty border left'></td><td class='empty left'></td><td class='empty left'></td></tr></table></div></div></div><div class='texpara'><div id='lib:atomic<integral-type>,fetch_xor'><div id='lib:fetch_xor,atomic<integral-type>'><div id='lib:atomic<integral-type>,fetch_sub'><div id='lib:fetch_sub,atomic<integral-type>'><div id='lib:atomic<integral-type>,fetch_or'><div id='lib:fetch_or,atomic<integral-type>'><div id='lib:atomic<integral-type>,fetch_and'><div id='lib:fetch_and,atomic<integral-type>'><div id='lib:atomic<integral-type>,fetch_add'><div id='lib:fetch_add,atomic<integral-type>'><div id='lib:atomic_fetch_xor_explicit'><div id='lib:atomic_fetch_sub_explicit'><div id='lib:atomic_fetch_or_explicit'><div id='lib:atomic_fetch_and_explicit'><div id='lib:atomic_fetch_add_explicit'><div id='lib:atomic_fetch_xor'><div id='lib:atomic_fetch_sub'><div id='lib:atomic_fetch_or'><div id='lib:atomic_fetch_and'><div id='lib:atomic_fetch_add'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic_fetch_add'>ðŸ”—</a></div><code class='itemdeclcode'>T fetch_<i >key</i><span class='parenthesis'>(</span>T operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T fetch_<i >key</i><span class='parenthesis'>(</span>T operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.int-5'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.int-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4369'>#</a></div><div class='texpara'><div id='atomics.types.int-5.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.int-5.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.int-6'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.int-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4374'>#</a></div><div class='texpara'><div id='atomics.types.int-6.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces the value pointed to by
<span id=':this_________'><span class='texttt'><span class='keyword'>this</span></span></span> with the result of the computation applied to the
value pointed to by <span id=':this__________'><span class='texttt'><span class='keyword'>this</span></span></span> and the given <span class='texttt'>operand</span><a class='hidden_link' href='#atomics.types.int-6.sentence-1'>.</a></div> <div id='atomics.types.int-6.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#atomics.types.int-6.sentence-2'>.</a></div> <div id='atomics.types.int-6.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)<a class='hidden_link' href='#atomics.types.int-6.sentence-3'>.</a></div></div></div></div><div class='para' id='atomics.types.int-7'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.int-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4382'>#</a></div><div class='texpara'><div id='atomics.types.int-7.sentence-1' class='sentence'><i >Returns</i>: Atomically, the value pointed to by <span id=':this___________'><span class='texttt'><span class='keyword'>this</span></span></span> immediately before the effects<a class='hidden_link' href='#atomics.types.int-7.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.int-8'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.int-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4386'>#</a></div><div class='texpara'><div id='atomics.types.int-8.sentence-1' class='sentence'><a class='index' id=':signed_integer_representation,two&#39;s_complement'></a><i >Remarks</i>: For signed integer types,
the result is as if the object value and parameters
were converted to their corresponding unsigned types,
the computation performed on those types, and
the result converted back to the signed type<a class='hidden_link' href='#atomics.types.int-8.sentence-1'>.</a></div> <div id='atomics.types.int-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.types.int-note-2'>2</a></i>:&ensp;<div id='atomics.types.int-8.sentence-2' class='sentence'>There are no undefined results arising from the computation<a class='hidden_link' href='#atomics.types.int-8.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:atomic<integral-type>,operator^='><div id='lib:operator^=,atomic<integral-type>'><div id='lib:atomic<integral-type>,operator|='><div id='lib:operator|=,atomic<integral-type>'><div id='lib:atomic<integral-type>,operator&amp;='><div id='lib:operator&amp;=,atomic<integral-type>'><div id='lib:atomic<integral-type>,operator-='><div id='lib:operator-=,atomic<integral-type>'><div id='lib:atomic<integral-type>,operator+='><div id='lib:operator+=,atomic<integral-type>'><div id='lib:atomic<T*>,operator-='><div id='lib:operator-=,atomic<T*>'><div id='lib:atomic<T*>,operator+='><div id='lib:operator+=,atomic<T*>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator+=,atomic%3cT*%3e'>ðŸ”—</a></div><code class='itemdeclcode'>T <span class='keyword'>operator</span> <i >op</i><span class='operator'>=</span><span class='parenthesis'>(</span>T operand<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T <span class='keyword'>operator</span> <i >op</i><span class='operator'>=</span><span class='parenthesis'>(</span>T operand<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.int-9'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.int-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4413'>#</a></div><div class='texpara'><div id='atomics.types.int-9.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.int-9.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.int-10'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.int-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4418'>#</a></div><div class='texpara'><div id='atomics.types.int-10.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span><i >key</i><span class='parenthesis'>(</span>operand<span class='parenthesis'>)</span> <i >op</i> operand;</span></div></div></div></div></div><div id='atomics.types.float' class='section'><h4 ><a class='secnum' href='#atomics.types.float' style='min-width:95pt'>33.5.8.4</a> Specializations for floating-point types <a class='abbr_ref' href='atomics.types.float'>[atomics.types.float]</a></h4><div class='texpara'><a class='index' id='lib:atomic<floating-point-type>'></a></div><div class='para' id='atomics.types.float-1'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.float-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4426'>#</a></div><div class='texpara'><div id='atomics.types.float-1.sentence-1' class='sentence'>There are specializations of the <span class='texttt'>atomic</span>
class template for all cv-unqualified floating-point types<a class='hidden_link' href='#atomics.types.float-1.sentence-1'>.</a></div> <div id='atomics.types.float-1.sentence-2' class='sentence'>For each such type <span class='texttt'><i >floating-point-type</i></span>,
the specialization <span class='texttt'>atomic<span class='anglebracket'>&lt;</span><i >floating-point-type</i><span class='anglebracket'>&gt;</span></span>
provides additional atomic operations appropriate to floating-point types<a class='hidden_link' href='#atomics.types.float-1.sentence-2'>.</a></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic<span class='anglebracket'>&lt;</span><i >floating-point-type</i><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> <i >floating-point-type</i>;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> value_type;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free___'></a><i >implementation-defined</i>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><i >floating-point-type</i><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span><i >floating-point-type</i>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span><i >floating-point-type</i>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >floating-point-type</i><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >floating-point-type</i><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <i >floating-point-type</i><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> <i >floating-point-type</i><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <i >floating-point-type</i> exchange<span class='parenthesis'>(</span><i >floating-point-type</i>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> exchange<span class='parenthesis'>(</span><i >floating-point-type</i>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><i >floating-point-type</i><span class='operator'>&amp;</span>, <i >floating-point-type</i>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><i >floating-point-type</i><span class='operator'>&amp;</span>, <i >floating-point-type</i>,
                               memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><i >floating-point-type</i><span class='operator'>&amp;</span>, <i >floating-point-type</i>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><i >floating-point-type</i><span class='operator'>&amp;</span>, <i >floating-point-type</i>,
                                 memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><i >floating-point-type</i><span class='operator'>&amp;</span>, <i >floating-point-type</i>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span><i >floating-point-type</i><span class='operator'>&amp;</span>, <i >floating-point-type</i>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><i >floating-point-type</i><span class='operator'>&amp;</span>, <i >floating-point-type</i>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span><i >floating-point-type</i><span class='operator'>&amp;</span>, <i >floating-point-type</i>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <i >floating-point-type</i> fetch_add<span class='parenthesis'>(</span><i >floating-point-type</i>,
                                  memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> fetch_add<span class='parenthesis'>(</span><i >floating-point-type</i>,
                                  memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> fetch_sub<span class='parenthesis'>(</span><i >floating-point-type</i>,
                                  memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> fetch_sub<span class='parenthesis'>(</span><i >floating-point-type</i>,
                                  memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <i >floating-point-type</i> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >floating-point-type</i><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >floating-point-type</i><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >floating-point-type</i><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <i >floating-point-type</i> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span><i >floating-point-type</i><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><i >floating-point-type</i>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span><i >floating-point-type</i>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div></div><div class='para' id='atomics.types.float-2'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.float-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4503'>#</a></div><div class='texpara'><div id='atomics.types.float-2.sentence-1' class='sentence'>The atomic floating-point specializations
are standard-layout structs<a class='hidden_link' href='#atomics.types.float-2.sentence-1'>.</a></div> <div id='atomics.types.float-2.sentence-2' class='sentence'>They each have
a trivial destructor<a class='hidden_link' href='#atomics.types.float-2.sentence-2'>.</a></div></div></div><div class='para' id='atomics.types.float-3'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.float-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4509'>#</a></div><div class='texpara'><div id='atomics.types.float-3.sentence-1' class='sentence'>Descriptions are provided below only for members that differ from the primary template<a class='hidden_link' href='#atomics.types.float-3.sentence-1'>.</a></div></div></div><div class='para' id='atomics.types.float-4'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.float-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4512'>#</a></div><div class='texpara'><div id='atomics.types.float-4.sentence-1' class='sentence'>The following operations perform arithmetic addition and subtraction computations<a class='hidden_link' href='#atomics.types.float-4.sentence-1'>.</a></div> <div id='atomics.types.float-4.sentence-2' class='sentence'>The correspondence among key, operator, and computation is specified
in Table <a href='#tab:atomic.types.int.comp' title='Table 145: Atomic arithmetic computations'>145</a><a class='hidden_link' href='#atomics.types.float-4.sentence-2'>.</a></div></div></div><div class='texpara'><div id='lib:atomic<floating-point-type>,fetch_sub'><div id='lib:fetch_sub,atomic<floating-point-type>'><div id='lib:atomic<floating-point-type>,fetch_add'><div id='lib:fetch_add,atomic<floating-point-type>'><div id='lib:atomic_fetch_sub_explicit_'><div id='lib:atomic_fetch_add_explicit_'><div id='lib:atomic_fetch_sub_'><div id='lib:atomic_fetch_add_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic_fetch_add_'>ðŸ”—</a></div><code class='itemdeclcode'>T fetch_<i >key</i><span class='parenthesis'>(</span>T operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T fetch_<i >key</i><span class='parenthesis'>(</span>T operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.float-5'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.float-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4529'>#</a></div><div class='texpara'><div id='atomics.types.float-5.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.float-5.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.float-6'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.float-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4534'>#</a></div><div class='texpara'><div id='atomics.types.float-6.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces the value pointed to by <span id=':this____________'><span class='texttt'><span class='keyword'>this</span></span></span>
with the result of the computation applied to the value pointed
to by <span id=':this_____________'><span class='texttt'><span class='keyword'>this</span></span></span> and the given <span class='texttt'>operand</span><a class='hidden_link' href='#atomics.types.float-6.sentence-1'>.</a></div> <div id='atomics.types.float-6.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#atomics.types.float-6.sentence-2'>.</a></div> <div id='atomics.types.float-6.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)<a class='hidden_link' href='#atomics.types.float-6.sentence-3'>.</a></div></div></div></div><div class='para' id='atomics.types.float-7'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.float-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4542'>#</a></div><div class='texpara'><div id='atomics.types.float-7.sentence-1' class='sentence'><i >Returns</i>: Atomically, the value pointed to by <span id=':this______________'><span class='texttt'><span class='keyword'>this</span></span></span> immediately before the effects<a class='hidden_link' href='#atomics.types.float-7.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.float-8'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.float-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4546'>#</a></div><div class='texpara'><div id='atomics.types.float-8.sentence-1' class='sentence'><i >Remarks</i>: If the result is not a representable value for its type (<a href='expr.pre' title='7.1&emsp;Preamble'>[expr.<span class='shy'></span>pre]</a>)
the result is unspecified, but the operations otherwise have no undefined
behavior<a class='hidden_link' href='#atomics.types.float-8.sentence-1'>.</a></div> <div id='atomics.types.float-8.sentence-2' class='sentence'>Atomic arithmetic operations on <span class='texttt'><i >floating-point-type</i></span>
should conform to the <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>numeric_<span class='shy'></span>limits<span class='anglebracket'>&lt;</span><i >floating-point-type</i><span class='anglebracket'>&gt;</span></span>
traits associated with the floating-point type (<a href='limits.syn' title='17.3.3&emsp;Header &lt;limits&gt; synopsis'>[limits.<span class='shy'></span>syn]</a>)<a class='hidden_link' href='#atomics.types.float-8.sentence-2'>.</a></div> <div id='atomics.types.float-8.sentence-3' class='sentence'>The floating-point environment (<a href='cfenv' title='28.3&emsp;The floating-point environment'>[cfenv]</a>) for atomic arithmetic operations
on <span class='texttt'><i >floating-point-type</i></span> may be different than the
calling thread's floating-point environment<a class='hidden_link' href='#atomics.types.float-8.sentence-3'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<floating-point-type>,operator-='><div id='lib:operator-=,atomic<floating-point-type>'><div id='lib:atomic<floating-point-type>,operator+='><div id='lib:operator+=,atomic<floating-point-type>'><div id='lib:atomic<T*>,operator-=_'><div id='lib:operator-=,atomic<T*>_'><div id='lib:atomic<T*>,operator+=_'><div id='lib:operator+=,atomic<T*>_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator+=,atomic%3cT*%3e_'>ðŸ”—</a></div><code class='itemdeclcode'>T <span class='keyword'>operator</span> <i >op</i><span class='operator'>=</span><span class='parenthesis'>(</span>T operand<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T <span class='keyword'>operator</span> <i >op</i><span class='operator'>=</span><span class='parenthesis'>(</span>T operand<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.float-9'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.float-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4568'>#</a></div><div class='texpara'><div id='atomics.types.float-9.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.float-9.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.float-10'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.float-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4573'>#</a></div><div class='texpara'><div id='atomics.types.float-10.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span><i >key</i><span class='parenthesis'>(</span>operand<span class='parenthesis'>)</span> <i >op</i> operand;</span></div></div></div></div><div class='para' id='atomics.types.float-11'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.float-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4577'>#</a></div><div class='texpara'><div id='atomics.types.float-11.sentence-1' class='sentence'><i >Remarks</i>: If the result is not a representable value for its type (<a href='expr.pre' title='7.1&emsp;Preamble'>[expr.<span class='shy'></span>pre]</a>)
the result is unspecified, but the operations otherwise have no undefined
behavior<a class='hidden_link' href='#atomics.types.float-11.sentence-1'>.</a></div> <div id='atomics.types.float-11.sentence-2' class='sentence'>Atomic arithmetic operations on <span class='texttt'><i >floating-point-type</i></span>
should conform to the <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>numeric_<span class='shy'></span>limits<span class='anglebracket'>&lt;</span><i >floating-point-type</i><span class='anglebracket'>&gt;</span></span>
traits associated with the floating-point type (<a href='limits.syn' title='17.3.3&emsp;Header &lt;limits&gt; synopsis'>[limits.<span class='shy'></span>syn]</a>)<a class='hidden_link' href='#atomics.types.float-11.sentence-2'>.</a></div> <div id='atomics.types.float-11.sentence-3' class='sentence'>The floating-point environment (<a href='cfenv' title='28.3&emsp;The floating-point environment'>[cfenv]</a>) for atomic arithmetic operations
on <span class='texttt'><i >floating-point-type</i></span> may be different than the
calling thread's floating-point environment<a class='hidden_link' href='#atomics.types.float-11.sentence-3'>.</a></div></div></div></div></div><div id='atomics.types.pointer' class='section'><h4 ><a class='secnum' href='#atomics.types.pointer' style='min-width:95pt'>33.5.8.5</a> Partial specialization for pointers <a class='abbr_ref' href='atomics.types.pointer'>[atomics.types.pointer]</a></h4><div class='texpara'><a class='index' id='lib:atomic<T*>'></a>
<span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> T<span class='operator'>*</span>;
    <span class='keyword'>using</span> difference_type <span class='operator'>=</span> ptrdiff_t;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free____'></a><i >implementation-defined</i>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    atomic<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> load<span class='parenthesis'>(</span>memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> T<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> T<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    T<span class='operator'>*</span> exchange<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> exchange<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>, memory_order, memory_order<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                               memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='operator'>&amp;</span>, T<span class='operator'>*</span>,
                                 memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    T<span class='operator'>*</span> fetch_add<span class='parenthesis'>(</span>ptrdiff_t, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> fetch_add<span class='parenthesis'>(</span>ptrdiff_t, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> fetch_sub<span class='parenthesis'>(</span>ptrdiff_t, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> fetch_sub<span class='parenthesis'>(</span>ptrdiff_t, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span>ptrdiff_t<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>=</span><span class='parenthesis'>(</span>ptrdiff_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span>ptrdiff_t<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    T<span class='operator'>*</span> <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>=</span><span class='parenthesis'>(</span>ptrdiff_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>T<span class='operator'>*</span>, memory_order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span><a class='index' id='lib:atomic<T*>_'></a></div><div class='para' id='atomics.types.pointer-1'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.pointer-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4661'>#</a></div><div class='texpara'><div id='atomics.types.pointer-1.sentence-1' class='sentence'>There is a partial specialization of the <span class='texttt'>atomic</span> class template for pointers<a class='hidden_link' href='#atomics.types.pointer-1.sentence-1'>.</a></div> <div id='atomics.types.pointer-1.sentence-2' class='sentence'>Specializations of this partial specialization are standard-layout structs<a class='hidden_link' href='#atomics.types.pointer-1.sentence-2'>.</a></div> <div id='atomics.types.pointer-1.sentence-3' class='sentence'>They each have a trivial destructor<a class='hidden_link' href='#atomics.types.pointer-1.sentence-3'>.</a></div></div></div><div class='para' id='atomics.types.pointer-2'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.pointer-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4666'>#</a></div><div class='texpara'><div id='atomics.types.pointer-2.sentence-1' class='sentence'>Descriptions are provided below only for members that differ from the primary template<a class='hidden_link' href='#atomics.types.pointer-2.sentence-1'>.</a></div></div></div><div class='para' id='atomics.types.pointer-3'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.pointer-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4669'>#</a></div><div class='texpara'><div id='atomics.types.pointer-3.sentence-1' class='sentence'>The following operations perform pointer arithmetic<a class='hidden_link' href='#atomics.types.pointer-3.sentence-1'>.</a></div> <div id='atomics.types.pointer-3.sentence-2' class='sentence'>The correspondence among key, operator, and computation is specified
in Table <a href='#tab:atomic.types.pointer.comp' title='Table 146: Atomic pointer computations'>146</a><a class='hidden_link' href='#atomics.types.pointer-3.sentence-2'>.</a></div></div><div class='texpara'><div class='numberedTable' id='tab:atomic.types.pointer.comp'>Table <a href='#tab:atomic.types.pointer.comp'>146</a>: Atomic pointer computations&emsp;<a href='./tab:atomic.types.pointer.comp'>[tab:atomic.types.pointer.comp]</a><br><table ><tr id='tab:atomic.types.pointer.comp-row-1' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:atomic.types.pointer.comp-row-1'>ðŸ”—</a></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.pointer.comp-row-1-column-1-sentence-1' class='sentence'><b><span class='texttt'><i >key</i></span></b></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.pointer.comp-row-1-column-2-sentence-1' class='sentence'><b>Op</b></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.pointer.comp-row-1-column-3-sentence-1' class='sentence'><b>Computation</b></div></div></td><td class='border left'><div class='texpara'><div id='tab:atomic.types.pointer.comp-row-1-column-4-sentence-1' class='sentence'><b><span class='texttt'><i >key</i></span></b></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.pointer.comp-row-1-column-5-sentence-1' class='sentence'><b>Op</b></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.pointer.comp-row-1-column-6-sentence-1' class='sentence'><b>Computation</b></div></div></td></tr><tr id='tab:atomic.types.pointer.comp-row-2' class='rowsep'><td class='hidden'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:atomic.types.pointer.comp-row-2'>ðŸ”—</a></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.pointer.comp-row-2-column-1-sentence-1' class='sentence'><span class='texttt'>add</span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.pointer.comp-row-2-column-2-sentence-1' class='sentence'><span class='texttt'><span class='operator'>+</span></span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.pointer.comp-row-2-column-3-sentence-1' class='sentence'>addition</div></div></td><td class='border left'><div class='texpara'><div id='tab:atomic.types.pointer.comp-row-2-column-4-sentence-1' class='sentence'><span class='texttt'>sub</span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.pointer.comp-row-2-column-5-sentence-1' class='sentence'><span class='texttt'><span class='operator'>-</span></span></div></div></td><td class='left'><div class='texpara'><div id='tab:atomic.types.pointer.comp-row-2-column-6-sentence-1' class='sentence'>subtraction</div></div></td></tr></table></div></div></div><div class='texpara'><div id='lib:atomic<T*>,fetch_sub'><div id='lib:fetch_sub,atomic<T*>'><div id='lib:atomic<T*>,fetch_add'><div id='lib:fetch_add,atomic<T*>'><div id='lib:atomic_fetch_sub_explicit__'><div id='lib:atomic_fetch_add_explicit__'><div id='lib:atomic_fetch_sub__'><div id='lib:atomic_fetch_add__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic_fetch_add__'>ðŸ”—</a></div><code class='itemdeclcode'>T<span class='operator'>*</span> fetch_<i >key</i><span class='parenthesis'>(</span>ptrdiff_t operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T<span class='operator'>*</span> fetch_<i >key</i><span class='parenthesis'>(</span>ptrdiff_t operand, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div></div></div></div></div><div class='para' id='atomics.types.pointer-4'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.pointer-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4703'>#</a></div><div class='texpara'><div id='atomics.types.pointer-4.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.pointer-4.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.pointer-5'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.pointer-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4708'>#</a></div><div class='texpara'><div id='atomics.types.pointer-5.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'>T</span> is a complete object type<a class='hidden_link' href='#atomics.types.pointer-5.sentence-1'>.</a></div> <div id='atomics.types.pointer-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#atomics.types.pointer-note-1'>1</a></i>:&ensp;<div id='atomics.types.pointer-5.sentence-2' class='sentence'>Pointer arithmetic on <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> or function pointers is ill-formed<a class='hidden_link' href='#atomics.types.pointer-5.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='atomics.types.pointer-6'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.pointer-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4715'>#</a></div><div class='texpara'><div id='atomics.types.pointer-6.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces the value pointed to by
<span id=':this_______________'><span class='texttt'><span class='keyword'>this</span></span></span> with the result of the computation applied to the
value pointed to by <span id=':this________________'><span class='texttt'><span class='keyword'>this</span></span></span> and the given <span class='texttt'>operand</span><a class='hidden_link' href='#atomics.types.pointer-6.sentence-1'>.</a></div> <div id='atomics.types.pointer-6.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#atomics.types.pointer-6.sentence-2'>.</a></div> <div id='atomics.types.pointer-6.sentence-3' class='sentence'>These operations are atomic read-modify-write operations (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)<a class='hidden_link' href='#atomics.types.pointer-6.sentence-3'>.</a></div></div></div></div><div class='para' id='atomics.types.pointer-7'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.pointer-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4723'>#</a></div><div class='texpara'><div id='atomics.types.pointer-7.sentence-1' class='sentence'><i >Returns</i>: Atomically, the value pointed to by <span id=':this_________________'><span class='texttt'><span class='keyword'>this</span></span></span> immediately before the effects<a class='hidden_link' href='#atomics.types.pointer-7.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.pointer-8'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.pointer-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4727'>#</a></div><div class='texpara'><div id='atomics.types.pointer-8.sentence-1' class='sentence'><i >Remarks</i>: The result may be an undefined address,
but the operations otherwise have no undefined behavior<a class='hidden_link' href='#atomics.types.pointer-8.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<T*>,operator-=__'><div id='lib:operator-=,atomic<T*>__'><div id='lib:atomic<T*>,operator+=__'><div id='lib:operator+=,atomic<T*>__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator+=,atomic%3cT*%3e__'>ðŸ”—</a></div><code class='itemdeclcode'>T<span class='operator'>*</span> <span class='keyword'>operator</span> <i >op</i><span class='operator'>=</span><span class='parenthesis'>(</span>ptrdiff_t operand<span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
T<span class='operator'>*</span> <span class='keyword'>operator</span> <i >op</i><span class='operator'>=</span><span class='parenthesis'>(</span>ptrdiff_t operand<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.types.pointer-9'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.pointer-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4741'>#</a></div><div class='texpara'><div id='atomics.types.pointer-9.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.pointer-9.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.pointer-10'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.pointer-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4746'>#</a></div><div class='texpara'><div id='atomics.types.pointer-10.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span><i >key</i><span class='parenthesis'>(</span>operand<span class='parenthesis'>)</span> <i >op</i> operand;</span></div></div></div></div></div><div id='atomics.types.memop' class='section'><h4 ><a class='secnum' href='#atomics.types.memop' style='min-width:95pt'>33.5.8.6</a> Member operators common to integers and pointers to objects <a class='abbr_ref' href='atomics.types.memop'>[atomics.types.memop]</a></h4><div class='texpara'><div id='lib:atomic<integral-type>,operator++'><div id='lib:operator++,atomic<integral-type>'><div id='lib:atomic<T*>,operator++'><div id='lib:operator++,atomic<T*>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator++,atomic%3cT*%3e'>ðŸ”—</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
value_type <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.types.memop-1'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.memop-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4761'>#</a></div><div class='texpara'><div id='atomics.types.memop-1.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.memop-1.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.memop-2'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.memop-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4766'>#</a></div><div class='texpara'><div id='atomics.types.memop-2.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span>add<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;</span></div></div></div></div><div class='texpara'><div id='lib:atomic<integral-type>,operator--'><div id='lib:operator--,atomic<integral-type>'><div id='lib:atomic<T*>,operator--'><div id='lib:operator--,atomic<T*>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator--,atomic%3cT*%3e'>ðŸ”—</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
value_type <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.types.memop-3'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.memop-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4779'>#</a></div><div class='texpara'><div id='atomics.types.memop-3.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.memop-3.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.memop-4'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.memop-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4784'>#</a></div><div class='texpara'><div id='atomics.types.memop-4.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span>sub<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;</span></div></div></div></div><div class='texpara'><div id='lib:atomic<integral-type>,operator++_'><div id='lib:operator++,atomic<integral-type>_'><div id='lib:atomic<T*>,operator++_'><div id='lib:operator++,atomic<T*>_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator++,atomic%3cT*%3e_'>ðŸ”—</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
value_type <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.types.memop-5'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.memop-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4797'>#</a></div><div class='texpara'><div id='atomics.types.memop-5.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.memop-5.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.memop-6'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.memop-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4802'>#</a></div><div class='texpara'><div id='atomics.types.memop-6.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span>add<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='literal'>1</span>;</span></div></div></div></div><div class='texpara'><div id='lib:atomic<integral-type>,operator--_'><div id='lib:operator--,atomic<integral-type>_'><div id='lib:atomic<T*>,operator--_'><div id='lib:operator--,atomic<T*>_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator--,atomic%3cT*%3e_'>ðŸ”—</a></div><code class='itemdeclcode'>value_type <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>volatile</span> <span class='keyword'>noexcept</span>;
value_type <span class='keyword'>operator</span><span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='atomics.types.memop-7'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.memop-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4815'>#</a></div><div class='texpara'><div id='atomics.types.memop-7.sentence-1' class='sentence'><i >Constraints</i>: For the <span class='texttt'><span class='keyword'>volatile</span></span> overload of this function,
<span class='texttt'>is_<span class='shy'></span>always_<span class='shy'></span>lock_<span class='shy'></span>free</span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#atomics.types.memop-7.sentence-1'>.</a></div></div></div></div><div class='para' id='atomics.types.memop-8'><div class='marginalizedparent'><a class='marginalized' href='#atomics.types.memop-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4820'>#</a></div><div class='texpara'><div id='atomics.types.memop-8.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> fetch_<span class='shy'></span>sub<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span> <span class='operator'>-</span> <span class='literal'>1</span>;</span></div></div></div></div></div><div id='util.smartptr.atomic' class='section'><h4 ><a class='secnum' href='#util.smartptr.atomic' style='min-width:95pt'>33.5.8.7</a> Partial specializations for smart pointers <a class='abbr_ref' href='util.smartptr.atomic'>[util.smartptr.atomic]</a></h4><div class='texpara'><a class='index' id=':atomic,smart_pointers'></a></div><div id='util.smartptr.atomic.general' class='section'><h4 ><a class='secnum' href='#util.smartptr.atomic.general' style='min-width:110pt'>33.5.8.7.1</a> General <a class='abbr_ref' href='util.smartptr.atomic.general'>[util.smartptr.atomic.general]</a></h4><div class='para' id='util.smartptr.atomic.general-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4830'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.general-1.sentence-1' class='sentence'>The library provides partial specializations of the <span class='texttt'>atomic</span> template
for shared-ownership smart pointers (<a href='util.sharedptr' title='20.3.2&emsp;Shared-ownership pointers'>[util.<span class='shy'></span>sharedptr]</a>)<a class='hidden_link' href='#util.smartptr.atomic.general-1.sentence-1'>.</a></div> <div id='util.smartptr.atomic.general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.atomic.general-note-1'>1</a></i>:&ensp;<div id='util.smartptr.atomic.general-1.sentence-2' class='sentence'>The partial specializations are declared in header <a href='memory.syn#header:%3cmemory%3e' title='20.2.2&emsp;Header &lt;memory&gt; synopsis&emsp;[memory.syn]'><span id='headerref:<memory>'><span class='texttt'>&lt;memory&gt;</span></span></a><a class='hidden_link' href='#util.smartptr.atomic.general-1.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div> <div id='util.smartptr.atomic.general-1.sentence-3' class='sentence'>
The behavior of all operations is as specified in [atomics.<span class='shy'></span>types.<span class='shy'></span>generic],
unless specified otherwise<a class='hidden_link' href='#util.smartptr.atomic.general-1.sentence-3'>.</a></div> <div id='util.smartptr.atomic.general-1.sentence-4' class='sentence'>The template parameter <span class='texttt'>T</span> of these partial specializations
may be an incomplete type<a class='hidden_link' href='#util.smartptr.atomic.general-1.sentence-4'>.</a></div></div></div><div class='para' id='util.smartptr.atomic.general-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4841'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.general-2.sentence-1' class='sentence'>All changes to an atomic smart pointer in <a href='#util.smartptr.atomic' title='33.5.8.7&emsp;Partial specializations for smart pointers'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>atomic]</a>, and
all associated <span class='texttt'>use_<span class='shy'></span>count</span> increments,
are guaranteed to be performed atomically<a class='hidden_link' href='#util.smartptr.atomic.general-2.sentence-1'>.</a></div> <div id='util.smartptr.atomic.general-2.sentence-2' class='sentence'>Associated <span class='texttt'>use_<span class='shy'></span>count</span> decrements
are sequenced after the atomic operation,
but are not required to be part of it<a class='hidden_link' href='#util.smartptr.atomic.general-2.sentence-2'>.</a></div> <div id='util.smartptr.atomic.general-2.sentence-3' class='sentence'>Any associated deletion and deallocation
are sequenced after the atomic update step and
are not part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic.general-2.sentence-3'>.</a></div> <div id='util.smartptr.atomic.general-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.atomic.general-note-2'>2</a></i>:&ensp;<div id='util.smartptr.atomic.general-2.sentence-4' class='sentence'>If the atomic operation uses locks,
locks acquired by the implementation
will be held when any <span class='texttt'>use_<span class='shy'></span>count</span> adjustments are performed, and
will not be held when any destruction or deallocation
resulting from this is performed<a class='hidden_link' href='#util.smartptr.atomic.general-2.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='util.smartptr.atomic.general-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4859'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.general-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#util.smartptr.atomic.general-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> atomic_list <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> node <span class='curlybracket'>{</span>
    T t;
    shared_ptr<span class='anglebracket'>&lt;</span>node<span class='anglebracket'>&gt;</span> next;
  <span class='curlybracket'>}</span>;
  atomic<span class='anglebracket'>&lt;</span>shared_ptr<span class='anglebracket'>&lt;</span>node<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> head;

<span class='keyword'>public</span><span class='operator'>:</span>
  shared_ptr<span class='anglebracket'>&lt;</span>node<span class='anglebracket'>&gt;</span> find<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span>
    <span class='keyword'>auto</span> p <span class='operator'>=</span> head<span class='operator'>.</span>load<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>while</span> <span class='parenthesis'>(</span>p <span class='operator'>&amp;</span><span class='operator'>&amp;</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>t <span class='operator'>!</span><span class='operator'>=</span> t<span class='parenthesis'>)</span>
      p <span class='operator'>=</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>next;

    <span class='keyword'>return</span> p;
  <span class='curlybracket'>}</span>

  <span class='keyword'>void</span> push_front<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>auto</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span>node<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>t <span class='operator'>=</span> t;
    p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>next <span class='operator'>=</span> head;
    <span class='keyword'>while</span> <span class='parenthesis'>(</span><span class='operator'>!</span>head<span class='operator'>.</span>compare_exchange_weak<span class='parenthesis'>(</span>p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>next, p<span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div><div id='util.smartptr.atomic.shared' class='section'><h4 ><a class='secnum' href='#util.smartptr.atomic.shared' style='min-width:110pt'>33.5.8.7.2</a> Partial specialization for <span class='texttt'>shared_<span class='shy'></span>ptr</span> <a class='abbr_ref' href='util.smartptr.atomic.shared'>[util.smartptr.atomic.shared]</a></h4><div class='texpara'><span id='lib:atomic<shared_ptr<T>>'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic%3cshared_ptr%3cT%3e%3e'>ðŸ”—</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic<span class='anglebracket'>&lt;</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free_____'></a><i >implementation-defined</i>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span>nullptr_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span> <span class='operator'>:</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
    atomic<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> exchange<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                           memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                               memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                                 memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                               memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                                 memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> p;            <span class='comment'>// <i >exposition only</i></span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div><div class='texpara'><div id='lib:atomic<shared_ptr<T>>,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic%3cshared_ptr%3cT%3e%3e,constructor'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='util.smartptr.atomic.shared-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4936'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-1.sentence-1' class='sentence'><i >Effects</i>: Initializes <span class='texttt'>p<span class='curlybracket'>{</span><span class='curlybracket'>}</span></span><a class='hidden_link' href='#util.smartptr.atomic.shared-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<shared_ptr<T>>,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic%3cshared_ptr%3cT%3e%3e,constructor_'>ðŸ”—</a></div><code class='itemdeclcode'>atomic<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='util.smartptr.atomic.shared-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4947'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-2.sentence-1' class='sentence'><i >Effects</i>: Initializes the object with the value <span class='texttt'>desired</span><a class='hidden_link' href='#util.smartptr.atomic.shared-2.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-2.sentence-2' class='sentence'>Initialization is not an atomic operation (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)<a class='hidden_link' href='#util.smartptr.atomic.shared-2.sentence-2'>.</a></div> <div id='util.smartptr.atomic.shared-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.atomic.shared-note-1'>1</a></i>:&ensp;<div id='util.smartptr.atomic.shared-2.sentence-3' class='sentence'>It is possible to have an access to
an atomic object <span class='texttt'>A</span> race with its construction,
for example,
by communicating the address of the just-constructed object <span class='texttt'>A</span>
to another thread via <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span> operations
on a suitable atomic pointer variable, and
then immediately accessing <span class='texttt'>A</span> in the receiving thread<a class='hidden_link' href='#util.smartptr.atomic.shared-2.sentence-3'>.</a></div> <div id='util.smartptr.atomic.shared-2.sentence-4' class='sentence'>This results in undefined behavior<a class='hidden_link' href='#util.smartptr.atomic.shared-2.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:atomic<shared_ptr<T>>,store'><div id='lib:store,atomic<shared_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:store,atomic%3cshared_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> store<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4969'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-3.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>order</span> is neither
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>consume</span>,
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span>, nor
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span><a class='hidden_link' href='#util.smartptr.atomic.shared-3.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4976'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-4.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces the value pointed to by <span id=':this__________________'><span class='texttt'><span class='keyword'>this</span></span></span> with
the value of <span class='texttt'>desired</span> as if by <span class='texttt'>p<span class='operator'>.</span>swap<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.atomic.shared-4.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-4.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.shared-4.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<shared_ptr<T>>,operator='><div id='lib:operator=,atomic<shared_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,atomic%3cshared_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L4989'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-5.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>store<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.atomic.shared-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<shared_ptr<T>>,load'><div id='lib:load,atomic<shared_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:load,atomic%3cshared_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5000'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-6.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>order</span> is neither
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span><a class='hidden_link' href='#util.smartptr.atomic.shared-6.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5005'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-7.sentence-1' class='sentence'><i >Effects</i>: Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.shared-7.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5009'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-8.sentence-1' class='sentence'><i >Returns</i>: Atomically returns <span class='texttt'>p</span><a class='hidden_link' href='#util.smartptr.atomic.shared-8.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<shared_ptr<T>>,operator_shared_ptr<T>'><div id='lib:operator_shared_ptr<T>,atomic<shared_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator_shared_ptr%3cT%3e,atomic%3cshared_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>operator</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5020'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-9.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> load<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;</span></div></div></div></div><div class='texpara'><div id='lib:atomic<shared_ptr<T>>,exchange'><div id='lib:exchange,atomic<shared_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:exchange,atomic%3cshared_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> exchange<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5031'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-10.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces <span class='texttt'>p</span> with <span class='texttt'>desired</span>
as if by <span class='texttt'>p<span class='operator'>.</span>swap<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.atomic.shared-10.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-10.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.shared-10.sentence-2'>.</a></div> <div id='util.smartptr.atomic.shared-10.sentence-3' class='sentence'>This is an atomic read-modify-write operation (<a href='intro.races' title='6.9.2.2&emsp;Data races'>[intro.<span class='shy'></span>races]</a>)<a class='hidden_link' href='#util.smartptr.atomic.shared-10.sentence-3'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5038'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-11.sentence-1' class='sentence'><i >Returns</i>: Atomically returns the value of <span class='texttt'>p</span> immediately before the effects<a class='hidden_link' href='#util.smartptr.atomic.shared-11.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<shared_ptr<T>>,compare_exchange_strong'><div id='lib:compare_exchange_strong,atomic<shared_ptr<T>>'><div id='lib:atomic<shared_ptr<T>>,compare_exchange_weak'><div id='lib:compare_exchange_weak,atomic<shared_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:compare_exchange_weak,atomic%3cshared_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                           memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                             memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5053'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-12.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>failure</span> is neither
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span><a class='hidden_link' href='#util.smartptr.atomic.shared-12.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-13'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5058'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-13.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>p</span> is equivalent to <span class='texttt'>expected</span>,
assigns <span class='texttt'>desired</span> to <span class='texttt'>p</span> and
has synchronization semantics corresponding to the value of <span class='texttt'>success</span>,
otherwise assigns <span class='texttt'>p</span> to <span class='texttt'>expected</span> and
has synchronization semantics corresponding to the value of <span class='texttt'>failure</span><a class='hidden_link' href='#util.smartptr.atomic.shared-13.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-14'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5066'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-14.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='literal'>true</span></span> if <span class='texttt'>p</span> was equivalent to <span class='texttt'>expected</span>,
<span class='texttt'><span class='literal'>false</span></span> otherwise<a class='hidden_link' href='#util.smartptr.atomic.shared-14.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-15'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5071'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-15.sentence-1' class='sentence'><i >Remarks</i>: Two <span class='texttt'>shared_<span class='shy'></span>ptr</span> objects are equivalent if
they store the same pointer value and
either share ownership or are both empty<a class='hidden_link' href='#util.smartptr.atomic.shared-15.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-15.sentence-2' class='sentence'>The weak form may fail spuriously<a class='hidden_link' href='#util.smartptr.atomic.shared-15.sentence-2'>.</a></div> <div id='util.smartptr.atomic.shared-15.sentence-3' class='sentence'>See <a href='#atomics.types.operations' title='33.5.8.2&emsp;Operations on atomic types'>[atomics.<span class='shy'></span>types.<span class='shy'></span>operations]</a><a class='hidden_link' href='#util.smartptr.atomic.shared-15.sentence-3'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-16'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5078'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-16.sentence-1' class='sentence'>If the operation returns <span class='texttt'><span class='literal'>true</span></span>,
<span class='texttt'>expected</span> is not accessed after the atomic update and
the operation is an atomic read-modify-write operation (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)
on the memory pointed to by <span id=':this___________________'><span class='texttt'><span class='keyword'>this</span></span></span><a class='hidden_link' href='#util.smartptr.atomic.shared-16.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-16.sentence-2' class='sentence'>Otherwise, the operation is an atomic load operation on that memory, and
<span class='texttt'>expected</span> is updated with the existing value
read from the atomic object in the attempted atomic update<a class='hidden_link' href='#util.smartptr.atomic.shared-16.sentence-2'>.</a></div> <div id='util.smartptr.atomic.shared-16.sentence-3' class='sentence'>The <span class='texttt'>use_<span class='shy'></span>count</span> update corresponding to the write to <span class='texttt'>expected</span>
is part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic.shared-16.sentence-3'>.</a></div> <div id='util.smartptr.atomic.shared-16.sentence-4' class='sentence'>The write to <span class='texttt'>expected</span> itself
is not required to be part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic.shared-16.sentence-4'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<shared_ptr<T>>,compare_exchange_weak_'><div id='lib:compare_exchange_weak,atomic<shared_ptr<T>>_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:compare_exchange_weak,atomic%3cshared_ptr%3cT%3e%3e_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                           memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-17'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5099'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-17.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> compare_exchange_weak<span class='parenthesis'>(</span>expected, desired, order, fail_order<span class='parenthesis'>)</span>;
</span>
where <span class='texttt'>fail_<span class='shy'></span>order</span> is the same as <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span>
shall be replaced by the value <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> and
a value of <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span>
shall be replaced by the value <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span><a class='hidden_link' href='#util.smartptr.atomic.shared-17.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<shared_ptr<T>>,compare_exchange_strong_'><div id='lib:compare_exchange_strong,atomic<shared_ptr<T>>_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:compare_exchange_strong,atomic%3cshared_ptr%3cT%3e%3e_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                             memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-18'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5119'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-18.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> compare_exchange_strong<span class='parenthesis'>(</span>expected, desired, order, fail_order<span class='parenthesis'>)</span>;
</span>
where <span class='texttt'>fail_<span class='shy'></span>order</span> is the same as <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span>
shall be replaced by the value <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> and
a value of <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span>
shall be replaced by the value <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span><a class='hidden_link' href='#util.smartptr.atomic.shared-18.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<shared_ptr<T>>,wait'><div id='lib:wait,atomic<shared_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:wait,atomic%3cshared_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> wait<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-19'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5138'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-19.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>order</span> is
neither <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span><a class='hidden_link' href='#util.smartptr.atomic.shared-19.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-20'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5143'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-20.sentence-1' class='sentence'><i >Effects</i>: Repeatedly performs the following steps, in order:
<ul class='itemize'><li id='util.smartptr.atomic.shared-20.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.atomic.shared-20.1'>(20.1)</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-20.1.sentence-1' class='sentence'>Evaluates <span class='texttt'>load<span class='parenthesis'>(</span>order<span class='parenthesis'>)</span></span> and compares it to <span class='texttt'>old</span><a class='hidden_link' href='#util.smartptr.atomic.shared-20.1.sentence-1'>.</a></div></div></li><li id='util.smartptr.atomic.shared-20.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.atomic.shared-20.2'>(20.2)</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-20.2.sentence-1' class='sentence'>If the two are not equivalent, returns<a class='hidden_link' href='#util.smartptr.atomic.shared-20.2.sentence-1'>.</a></div></div></li><li id='util.smartptr.atomic.shared-20.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.atomic.shared-20.3'>(20.3)</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-20.3.sentence-1' class='sentence'>Blocks until it
  is unblocked by an atomic notifying operation or is unblocked spuriously<a class='hidden_link' href='#util.smartptr.atomic.shared-20.3.sentence-1'>.</a></div></div></li></ul></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-21'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5156'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-21.sentence-1' class='sentence'><i >Remarks</i>: Two <span class='texttt'>shared_<span class='shy'></span>ptr</span> objects are equivalent
if they store the same pointer and either share ownership or are both empty<a class='hidden_link' href='#util.smartptr.atomic.shared-21.sentence-1'>.</a></div> <div id='util.smartptr.atomic.shared-21.sentence-2' class='sentence'>This function is an atomic waiting operation (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>)<a class='hidden_link' href='#util.smartptr.atomic.shared-21.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<shared_ptr<T>>,notify_one'><div id='lib:notify_one,atomic<shared_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:notify_one,atomic%3cshared_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-22'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5169'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-22.sentence-1' class='sentence'><i >Effects</i>: Unblocks the execution of at least one atomic waiting operation
that is eligible to be unblocked (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>) by this call,
if any such atomic waiting operations exist<a class='hidden_link' href='#util.smartptr.atomic.shared-22.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-23'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5175'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-23.sentence-1' class='sentence'><i >Remarks</i>: This function is an atomic notifying operation (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>)<a class='hidden_link' href='#util.smartptr.atomic.shared-23.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<shared_ptr<T>>,notify_all'><div id='lib:notify_all,atomic<shared_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:notify_all,atomic%3cshared_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-24'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5186'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-24.sentence-1' class='sentence'><i >Effects</i>: Unblocks the execution of all atomic waiting operations
that are eligible to be unblocked (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>) by this call<a class='hidden_link' href='#util.smartptr.atomic.shared-24.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.shared-25'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.shared-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5191'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.shared-25.sentence-1' class='sentence'><i >Remarks</i>: This function is an atomic notifying operation (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>)<a class='hidden_link' href='#util.smartptr.atomic.shared-25.sentence-1'>.</a></div></div></div></div></div><div id='util.smartptr.atomic.weak' class='section'><h4 ><a class='secnum' href='#util.smartptr.atomic.weak' style='min-width:110pt'>33.5.8.7.3</a> Partial specialization for <span class='texttt'>weak_<span class='shy'></span>ptr</span> <a class='abbr_ref' href='util.smartptr.atomic.weak'>[util.smartptr.atomic.weak]</a></h4><div class='texpara'><span id='lib:atomic<weak_ptr<T>>'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic%3cweak_ptr%3cT%3e%3e'>ðŸ”—</a></div><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> atomic<span class='anglebracket'>&lt;</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
    <span class='keyword'>using</span> value_type <span class='operator'>=</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;

    <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> is_always_lock_free <span class='operator'>=</span> <a class='index' id=':whether_a_given_atomic_type&#39;s_operations_are_always_lock_free______'></a><i >implementation-defined</i>;
    <span class='keyword'>bool</span> is_lock_free<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    atomic<span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
    <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> atomic<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;

    weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>operator</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> store<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> exchange<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                         memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                               memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                                 memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                               memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                                 memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

    <span class='keyword'>void</span> wait<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
    <span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='keyword'>private</span><span class='operator'>:</span>
    weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> p;              <span class='comment'>// <i >exposition only</i></span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,constructor'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic%3cweak_ptr%3cT%3e%3e,constructor'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>constexpr</span> atomic<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='util.smartptr.atomic.weak-1'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5244'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-1.sentence-1' class='sentence'><i >Effects</i>: Initializes <span class='texttt'>p<span class='curlybracket'>{</span><span class='curlybracket'>}</span></span><a class='hidden_link' href='#util.smartptr.atomic.weak-1.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,constructor_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:atomic%3cweak_ptr%3cT%3e%3e,constructor_'>ðŸ”—</a></div><code class='itemdeclcode'>atomic<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='util.smartptr.atomic.weak-2'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5255'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-2.sentence-1' class='sentence'><i >Effects</i>: Initializes the object with the value <span class='texttt'>desired</span><a class='hidden_link' href='#util.smartptr.atomic.weak-2.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-2.sentence-2' class='sentence'>Initialization is not an atomic operation (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)<a class='hidden_link' href='#util.smartptr.atomic.weak-2.sentence-2'>.</a></div> <div id='util.smartptr.atomic.weak-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#util.smartptr.atomic.weak-note-1'>1</a></i>:&ensp;<div id='util.smartptr.atomic.weak-2.sentence-3' class='sentence'>It is possible to have an access to
an atomic object <span class='texttt'>A</span> race with its construction,
for example,
by communicating the address of the just-constructed object <span class='texttt'>A</span>
to another thread via <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span> operations
on a suitable atomic pointer variable, and
then immediately accessing <span class='texttt'>A</span> in the receiving thread<a class='hidden_link' href='#util.smartptr.atomic.weak-2.sentence-3'>.</a></div> <div id='util.smartptr.atomic.weak-2.sentence-4' class='sentence'>This results in undefined behavior<a class='hidden_link' href='#util.smartptr.atomic.weak-2.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,store'><div id='lib:store,atomic<weak_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:store,atomic%3cweak_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> store<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-3'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5277'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-3.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>order</span> is neither
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>consume</span>,
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span>, nor
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span><a class='hidden_link' href='#util.smartptr.atomic.weak-3.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-4'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5284'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-4.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces the value pointed to by <span id=':this____________________'><span class='texttt'><span class='keyword'>this</span></span></span> with
the value of <span class='texttt'>desired</span> as if by <span class='texttt'>p<span class='operator'>.</span>swap<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.atomic.weak-4.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-4.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.weak-4.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,operator='><div id='lib:operator=,atomic<weak_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator=,atomic%3cweak_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-5'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5297'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-5.sentence-1' class='sentence'><i >Effects</i>: Equivalent to <span class='texttt'>store<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.atomic.weak-5.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,load'><div id='lib:load,atomic<weak_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:load,atomic%3cweak_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> load<span class='parenthesis'>(</span>memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-6'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5308'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-6.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>order</span> is neither
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span><a class='hidden_link' href='#util.smartptr.atomic.weak-6.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-7'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5313'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-7.sentence-1' class='sentence'><i >Effects</i>: Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.weak-7.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-8'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5317'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-8.sentence-1' class='sentence'><i >Returns</i>: Atomically returns <span class='texttt'>p</span><a class='hidden_link' href='#util.smartptr.atomic.weak-8.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,operator_weak_ptr<T>'><div id='lib:operator_weak_ptr<T>,atomic<weak_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:operator_weak_ptr%3cT%3e,atomic%3cweak_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>operator</span> weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-9'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5328'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-9.sentence-1' class='sentence'><i >Effects</i>: Equivalent to: <span class='texttt'><span class='keyword'>return</span> load<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;</span></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,exchange'><div id='lib:exchange,atomic<weak_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:exchange,atomic%3cweak_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> exchange<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-10'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5339'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-10.sentence-1' class='sentence'><i >Effects</i>: Atomically replaces <span class='texttt'>p</span> with <span class='texttt'>desired</span>
as if by <span class='texttt'>p<span class='operator'>.</span>swap<span class='parenthesis'>(</span>desired<span class='parenthesis'>)</span></span><a class='hidden_link' href='#util.smartptr.atomic.weak-10.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-10.sentence-2' class='sentence'>Memory is affected according to the value of <span class='texttt'>order</span><a class='hidden_link' href='#util.smartptr.atomic.weak-10.sentence-2'>.</a></div> <div id='util.smartptr.atomic.weak-10.sentence-3' class='sentence'>This is an atomic read-modify-write operation (<a href='intro.races' title='6.9.2.2&emsp;Data races'>[intro.<span class='shy'></span>races]</a>)<a class='hidden_link' href='#util.smartptr.atomic.weak-10.sentence-3'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-11'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5346'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-11.sentence-1' class='sentence'><i >Returns</i>: Atomically returns the value of <span class='texttt'>p</span> immediately before the effects<a class='hidden_link' href='#util.smartptr.atomic.weak-11.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,compare_exchange_weak'><div id='lib:compare_exchange_weak,atomic<weak_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:compare_exchange_weak,atomic%3cweak_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                           memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                             memory_order success, memory_order failure<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-12'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5360'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-12.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>failure</span> is neither
<span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span><a class='hidden_link' href='#util.smartptr.atomic.weak-12.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-13'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5365'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-13.sentence-1' class='sentence'><i >Effects</i>: If <span class='texttt'>p</span> is equivalent to <span class='texttt'>expected</span>,
assigns <span class='texttt'>desired</span> to <span class='texttt'>p</span> and
has synchronization semantics corresponding to the value of <span class='texttt'>success</span>,
otherwise assigns <span class='texttt'>p</span> to <span class='texttt'>expected</span> and
has synchronization semantics corresponding to the value of <span class='texttt'>failure</span><a class='hidden_link' href='#util.smartptr.atomic.weak-13.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-14'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5373'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-14.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'><span class='literal'>true</span></span> if <span class='texttt'>p</span> was equivalent to <span class='texttt'>expected</span>,
<span class='texttt'><span class='literal'>false</span></span> otherwise<a class='hidden_link' href='#util.smartptr.atomic.weak-14.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-15'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5378'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-15.sentence-1' class='sentence'><i >Remarks</i>: Two <span class='texttt'>weak_<span class='shy'></span>ptr</span> objects are equivalent if
they store the same pointer value and
either share ownership or are both empty<a class='hidden_link' href='#util.smartptr.atomic.weak-15.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-15.sentence-2' class='sentence'>The weak form may fail spuriously<a class='hidden_link' href='#util.smartptr.atomic.weak-15.sentence-2'>.</a></div> <div id='util.smartptr.atomic.weak-15.sentence-3' class='sentence'>See <a href='#atomics.types.operations' title='33.5.8.2&emsp;Operations on atomic types'>[atomics.<span class='shy'></span>types.<span class='shy'></span>operations]</a><a class='hidden_link' href='#util.smartptr.atomic.weak-15.sentence-3'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-16'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5385'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-16.sentence-1' class='sentence'>If the operation returns <span class='texttt'><span class='literal'>true</span></span>,
<span class='texttt'>expected</span> is not accessed after the atomic update and
the operation is an atomic read-modify-write operation (<a href='intro.multithread' title='6.9.2&emsp;Multi-threaded executions and data races'>[intro.<span class='shy'></span>multithread]</a>)
on the memory pointed to by <span id=':this_____________________'><span class='texttt'><span class='keyword'>this</span></span></span><a class='hidden_link' href='#util.smartptr.atomic.weak-16.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-16.sentence-2' class='sentence'>Otherwise, the operation is an atomic load operation on that memory, and
<span class='texttt'>expected</span> is updated with the existing value
read from the atomic object in the attempted atomic update<a class='hidden_link' href='#util.smartptr.atomic.weak-16.sentence-2'>.</a></div> <div id='util.smartptr.atomic.weak-16.sentence-3' class='sentence'>The <span class='texttt'>use_<span class='shy'></span>count</span> update corresponding to the write to <span class='texttt'>expected</span>
is part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic.weak-16.sentence-3'>.</a></div> <div id='util.smartptr.atomic.weak-16.sentence-4' class='sentence'>The write to <span class='texttt'>expected</span> itself
is not required to be part of the atomic operation<a class='hidden_link' href='#util.smartptr.atomic.weak-16.sentence-4'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,compare_exchange_weak_'><div id='lib:compare_exchange_weak,atomic<weak_ptr<T>>_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:compare_exchange_weak,atomic%3cweak_ptr%3cT%3e%3e_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_weak<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                           memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-17'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5406'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-17.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> compare_exchange_weak<span class='parenthesis'>(</span>expected, desired, order, fail_order<span class='parenthesis'>)</span>;
</span>
where <span class='texttt'>fail_<span class='shy'></span>order</span> is the same as <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span>
shall be replaced by the value <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> and
a value of <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span>
shall be replaced by the value <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span><a class='hidden_link' href='#util.smartptr.atomic.weak-17.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,compare_exchange_strong'><div id='lib:compare_exchange_strong,atomic<weak_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:compare_exchange_strong,atomic%3cweak_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>bool</span> compare_exchange_strong<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> expected, weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> desired,
                             memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-18'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5426'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-18.sentence-1' class='sentence'><i >Effects</i>: Equivalent to:
<span class='codeblock'><span class='keyword'>return</span> compare_exchange_strong<span class='parenthesis'>(</span>expected, desired, order, fail_order<span class='parenthesis'>)</span>;
</span>
where <span class='texttt'>fail_<span class='shy'></span>order</span> is the same as <span class='texttt'>order</span>
except that a value of <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span>
shall be replaced by the value <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acquire</span> and
a value of <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span>
shall be replaced by the value <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>relaxed</span><a class='hidden_link' href='#util.smartptr.atomic.weak-18.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,wait'><div id='lib:wait,atomic<weak_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:wait,atomic%3cweak_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> wait<span class='parenthesis'>(</span>weak_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> old, memory_order order <span class='operator'>=</span> memory_order<span class='operator'>::</span>seq_cst<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-19'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5445'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-19.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>order</span> is
neither <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>release</span> nor <span class='texttt'>memory_<span class='shy'></span>order<span class='operator'>&#x200b;::&#x200b;</span>acq_<span class='shy'></span>rel</span><a class='hidden_link' href='#util.smartptr.atomic.weak-19.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-20'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5450'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-20.sentence-1' class='sentence'><i >Effects</i>: Repeatedly performs the following steps, in order:
<ul class='itemize'><li id='util.smartptr.atomic.weak-20.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.atomic.weak-20.1'>(20.1)</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-20.1.sentence-1' class='sentence'>Evaluates <span class='texttt'>load<span class='parenthesis'>(</span>order<span class='parenthesis'>)</span></span> and compares it to <span class='texttt'>old</span><a class='hidden_link' href='#util.smartptr.atomic.weak-20.1.sentence-1'>.</a></div></div></li><li id='util.smartptr.atomic.weak-20.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.atomic.weak-20.2'>(20.2)</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-20.2.sentence-1' class='sentence'>If the two are not equivalent, returns<a class='hidden_link' href='#util.smartptr.atomic.weak-20.2.sentence-1'>.</a></div></div></li><li id='util.smartptr.atomic.weak-20.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#util.smartptr.atomic.weak-20.3'>(20.3)</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-20.3.sentence-1' class='sentence'>Blocks until it
  is unblocked by an atomic notifying operation or is unblocked spuriously<a class='hidden_link' href='#util.smartptr.atomic.weak-20.3.sentence-1'>.</a></div></div></li></ul></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-21'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5463'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-21.sentence-1' class='sentence'><i >Remarks</i>: Two <span class='texttt'>weak_<span class='shy'></span>ptr</span> objects are equivalent
if they store the same pointer and either share ownership or are both empty<a class='hidden_link' href='#util.smartptr.atomic.weak-21.sentence-1'>.</a></div> <div id='util.smartptr.atomic.weak-21.sentence-2' class='sentence'>This function is an atomic waiting operation (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>)<a class='hidden_link' href='#util.smartptr.atomic.weak-21.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,notify_one'><div id='lib:notify_one,atomic<weak_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:notify_one,atomic%3cweak_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_one<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-22'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5477'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-22.sentence-1' class='sentence'><i >Effects</i>: Unblocks the execution of at least one atomic waiting operation
that is eligible to be unblocked (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>) by this call,
if any such atomic waiting operations exist<a class='hidden_link' href='#util.smartptr.atomic.weak-22.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-23'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5483'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-23.sentence-1' class='sentence'><i >Remarks</i>: This function is an atomic notifying operation (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>)<a class='hidden_link' href='#util.smartptr.atomic.weak-23.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:atomic<weak_ptr<T>>,notify_all'><div id='lib:notify_all,atomic<weak_ptr<T>>'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:notify_all,atomic%3cweak_ptr%3cT%3e%3e'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> notify_all<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-24'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5494'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-24.sentence-1' class='sentence'><i >Effects</i>: Unblocks the execution of all atomic waiting operations
that are eligible to be unblocked (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>) by this call<a class='hidden_link' href='#util.smartptr.atomic.weak-24.sentence-1'>.</a></div></div></div></div><div class='para' id='util.smartptr.atomic.weak-25'><div class='marginalizedparent'><a class='marginalized' href='#util.smartptr.atomic.weak-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/threads.tex#L5499'>#</a></div><div class='texpara'><div id='util.smartptr.atomic.weak-25.sentence-1' class='sentence'><i >Remarks</i>: This function is an atomic notifying operation (<a href='atomics.wait' title='33.5.6&emsp;Waiting and notifying'>[atomics.<span class='shy'></span>wait]</a>)<a class='hidden_link' href='#util.smartptr.atomic.weak-25.sentence-1'>.</a></div></div></div></div><div class='texpara'></div></div></div></div></body></html>