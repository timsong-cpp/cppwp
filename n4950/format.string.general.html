<!DOCTYPE html><html lang='en'><head><title>[format.string.general]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>22</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>22.14</a> Formatting <a class='abbr_ref' href='format#string.general'>[format]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>22.14.2</a> Format string <a class='abbr_ref' href='format.string#general'>[format.string]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>22.14.2.1</a> In general <a class='abbr_ref'>[format.string.general]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/utilities.tex#L14676'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:format_string' title='22.14.2.1&emsp;In general&emsp;[format.string.general]'><span id='def:format_string'><i >format string</i></span></a> for arguments <span class='texttt'>args</span> is
a (possibly empty) sequence of
<a class='hidden_link' href='#def:replacement_field,format_string' title='22.14.2.1&emsp;In general&emsp;[format.string.general]'><span id='def:replacement_field,format_string'><i >replacement fields</i></span></a>,
<a class='hidden_link' href='#def:escape_sequence,format_string' title='22.14.2.1&emsp;In general&emsp;[format.string.general]'><span id='def:escape_sequence,format_string'><i >escape sequences</i></span></a>,
and characters other than <span class='texttt'><span class='curlybracket'>{</span></span> and <span class='texttt'><span class='curlybracket'>}</span></span><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>Let <span class='texttt'>charT</span> be the character type of the format string<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>Each character that is not part of
a replacement field or an escape sequence
is copied unchanged to the output<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>An escape sequence is one of <span class='texttt'><span class='curlybracket'>{</span><span class='curlybracket'>{</span></span> or <span class='texttt'><span class='curlybracket'>}</span><span class='curlybracket'>}</span></span><a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>It is replaced with <span class='texttt'><span class='curlybracket'>{</span></span> or <span class='texttt'><span class='curlybracket'>}</span></span>, respectively, in the output<a class='hidden_link' href='#1.sentence-5'>.</a></div> <div id='1.sentence-6' class='sentence'>The syntax of replacement fields is as follows:</div></div><div class='texpara'><div class='bnf'>
<span class='sffamily'></span><i>replacement-field</i><span class='textnormal'>:</span><br/><span class='terminal'><span class='curlybracket'>{</span></span> arg-id<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> format-specifier<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='curlybracket'>}</span></span>
</div></div><div class='texpara'><div class='bnf'>
<span class='sffamily'></span><i>arg-id</i><span class='textnormal'>:</span><br/><span class='terminal'><span class='literal'>0</span></span><br/>positive-integer
</div></div><div class='texpara'><div class='bnf'>
<span class='sffamily'></span><i>positive-integer</i><span class='textnormal'>:</span><br/><a href='lex.icon#nt:nonzero-digit' title='5.13.2&emsp;Integer literals&emsp;[lex.icon]'><span id='ntref:nonzero-digit'><span class='textsf'><i >nonzero-digit</i></span></span></a><br/>positive-integer <a href='lex.name#nt:digit' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:digit'><span class='textsf'><i >digit</i></span></span></a>
</div></div><div class='texpara'><div class='bnf'>
<span class='sffamily'></span><i>nonnegative-integer</i><span class='textnormal'>:</span><br/><a href='lex.name#nt:digit' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:digit_'><span class='textsf'><i >digit</i></span></span></a><br/>nonnegative-integer <a href='lex.name#nt:digit' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:digit__'><span class='textsf'><i >digit</i></span></span></a>
</div></div><div class='texpara'><div class='bnf'>
<span class='sffamily'></span><i><a href='lex.icon#nt:nonzero-digit' title='5.13.2&emsp;Integer literals&emsp;[lex.icon]'><span class='textsf'><i >nonzero-digit</i></span></a></i><span class='textnormal'>:</span> <span class='textnormal'>one of</span><br/><span class='terminal'><span class='literal'>1</span> <span class='literal'>2</span> <span class='literal'>3</span> <span class='literal'>4</span> <span class='literal'>5</span> <span class='literal'>6</span> <span class='literal'>7</span> <span class='literal'>8</span> <span class='literal'>9</span></span>
</div></div><div class='texpara'><div class='bnf'>
<span class='sffamily'></span><i><a href='lex.name#nt:digit' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span class='textsf'><i >digit</i></span></a></i><span class='textnormal'>:</span> <span class='textnormal'>one of</span><br/><span class='terminal'><span class='literal'>0</span> <span class='literal'>1</span> <span class='literal'>2</span> <span class='literal'>3</span> <span class='literal'>4</span> <span class='literal'>5</span> <span class='literal'>6</span> <span class='literal'>7</span> <span class='literal'>8</span> <span class='literal'>9</span></span>
</div></div><div class='texpara'><div class='bnf'>
<span class='sffamily'></span><i>format-specifier</i><span class='textnormal'>:</span><br/><span class='terminal'><span class='operator'>:</span></span> format-spec
</div></div><div class='texpara'><div class='bnf'>
<span class='sffamily'></span><i>format-spec</i><span class='textnormal'>:</span><br/><span class='textnormal'>as specified by the <span class='texttt'>formatter</span> specialization for the argument type</span>
</div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/utilities.tex#L14734'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>The <span class='textsf'><i >arg-id</i></span> field specifies the index of
the argument in <span class='texttt'>args</span>
whose value is to be formatted and inserted into the output
instead of the replacement field<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>If there is no argument with
the index <span class='textsf'><i >arg-id</i></span> in <span class='texttt'>args</span>,
the string is not a format string for <span class='texttt'>args</span><a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>The optional <span class='textsf'><i >format-specifier</i></span> field
explicitly specifies a format for the replacement value<a class='hidden_link' href='#2.sentence-3'>.</a></div></div></div><div class='para nonNormativeOnly' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/utilities.tex#L14745'>#</a></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'>string s <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"{0}-{{"</span>, <span class='literal'>8</span><span class='parenthesis'>)</span>;         <span class='comment'>// value of <span class='tcode_in_codeblock'>s</span> is <span class='tcode_in_codeblock'>"8-{"</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/utilities.tex#L14752'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>If all <span class='textsf'><i >arg-id</i></span><i >s</i> in a format string are omitted
(including those in the <span class='textsf'><i >format-spec</i></span>,
as interpreted by the corresponding <span class='texttt'>formatter</span> specialization),
argument indices 0, 1, 2, &hellip; will automatically be used in that order<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>If some <span class='textsf'><i >arg-id</i></span><i >s</i> are omitted and some are present,
the string is not a format string<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='4.sentence-3' class='sentence'>A format string cannot contain a
mixture of automatic and manual indexing<a class='hidden_link' href='#4.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<span class='codeblock'>string s0 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"{} to {}"</span>,   <span class='literal'>"a"</span>, <span class='literal'>"b"</span><span class='parenthesis'>)</span>; <span class='comment'>// OK, automatic indexing</span>
string s1 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"{1} to {0}"</span>, <span class='literal'>"a"</span>, <span class='literal'>"b"</span><span class='parenthesis'>)</span>; <span class='comment'>// OK, manual indexing</span>
string s2 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"{0} to {}"</span>,  <span class='literal'>"a"</span>, <span class='literal'>"b"</span><span class='parenthesis'>)</span>; <span class='comment'>// not a format string (mixing automatic and manual indexing),</span>
                                            <span class='comment'>// ill-formed</span>
string s3 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"{} to {1}"</span>,  <span class='literal'>"a"</span>, <span class='literal'>"b"</span><span class='parenthesis'>)</span>; <span class='comment'>// not a format string (mixing automatic and manual indexing),</span>
                                            <span class='comment'>// ill-formed</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='http://github.com/timsong-cpp/draft/tree/dbd2450ef21216a8eff8e7c454db6c4e1683bbf5/source/utilities.tex#L14774'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>The <span class='textsf'><i >format-spec</i></span> field contains
<a class='hidden_link' href='#def:format_specification,format_string' title='22.14.2.1&emsp;In general&emsp;[format.string.general]'><span id='def:format_specification,format_string'><i >format specifications</i></span></a>
that define how the value should be presented<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>Each type can define its own
interpretation of the <span class='textsf'><i >format-spec</i></span> field<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>If <span class='textsf'><i >format-spec</i></span> does not conform
to the format specifications for
the argument type referred to by <span class='textsf'><i >arg-id</i></span>,
the string is not a format string for <span class='texttt'>args</span><a class='hidden_link' href='#5.sentence-3'>.</a></div> <div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>:&ensp;<ul class='itemize'><li id='5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.1'>(5.1)</a></div><div class='texpara'><div id='5.1.sentence-1' class='sentence'>For arithmetic, pointer, and string types
the <span class='textsf'><i >format-spec</i></span>
is interpreted as a <span class='textsf'><i >std-format-spec</i></span>
as described in  (<a href='format.string.std' title='22.14.2.2&emsp;Standard format specifiers'>[format.<span class='shy'></span>string.<span class='shy'></span>std]</a>)<a class='hidden_link' href='#5.1.sentence-1'>.</a></div></div></li><li id='5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.2'>(5.2)</a></div><div class='texpara'><div id='5.2.sentence-1' class='sentence'>For chrono types
the <span class='textsf'><i >format-spec</i></span>
is interpreted as a <span class='textsf'><i >chrono-format-spec</i></span>
as described in  (<a href='time.format' title='29.12&emsp;Formatting'>[time.<span class='shy'></span>format]</a>)<a class='hidden_link' href='#5.2.sentence-1'>.</a></div></div></li><li id='5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.3'>(5.3)</a></div><div class='texpara'><div id='5.3.sentence-1' class='sentence'>For user-defined <span class='texttt'>formatter</span> specializations,
the behavior of the <span class='texttt'>parse</span> member function
determines how the <span class='textsf'><i >format-spec</i></span>
is interpreted<a class='hidden_link' href='#5.3.sentence-1'>.</a></div></div></li></ul> —&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>