<!DOCTYPE html><html lang='en'><head><title>[dcl.fct.def]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>9</a> Declarations <a class='abbr_ref' href='./#dcl'>[dcl]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>9.6</a> Function definitions <a class='abbr_ref'>[dcl.fct.def]</a></h2><div class='texpara'><a class='index' id=':definition,function'></a></div><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:80pt'>9.6.1</a> General <a class='abbr_ref' href='dcl.fct.def.general'>[dcl.fct.def.general]</a></h3><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6706'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'><a class='index' id=':body,function'></a>Function definitions have the form
<a class='index' id=':function-definition'></a><div class='bnf' id='nt:function-definition'>
<a class='hidden_link' href='#nt:function-definition' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='nt:function-definition'><span id=':function-definition_'>function-definition<span class='textnormal'>:</span></span></span></a><br><a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.13.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='dcl.spec.general#nt:decl-specifier-seq' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier-seq'><span class='textsf'><i >decl-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='dcl.decl.general#nt:declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator'><span class='textsf'><i >declarator</i></span></span></a> <a href='class.mem.general#nt:virt-specifier-seq' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:virt-specifier-seq'><span class='textsf'><i >virt-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span><br>&emsp;&emsp;&emsp;<a href='dcl.contract.func#nt:function-contract-specifier-seq' title='9.4.1&emsp;General&emsp;[dcl.contract.func]'><span id='ntref:function-contract-specifier-seq'><span class='textsf'><i >function-contract-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='#nt:function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-body'><span class='textsf'><i >function-body</i></span></span></a><br><a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.13.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='dcl.spec.general#nt:decl-specifier-seq' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier-seq_'><span class='textsf'><i >decl-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='dcl.decl.general#nt:declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator_'><span class='textsf'><i >declarator</i></span></span></a> <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause'><span class='textsf'><i >requires-clause</i></span></span></a><br>&emsp;&emsp;&emsp;<a href='dcl.contract.func#nt:function-contract-specifier-seq' title='9.4.1&emsp;General&emsp;[dcl.contract.func]'><span id='ntref:function-contract-specifier-seq_'><span class='textsf'><i >function-contract-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='#nt:function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-body_'><span class='textsf'><i >function-body</i></span></span></a>
</div></div></div><div class='texpara'><div class='bnf' id='nt:function-body'>
<a class='hidden_link' href='#nt:function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='nt:function-body'><span id=':function-body'>function-body<span class='textnormal'>:</span></span></span></a><br><a href='class.base.init#nt:ctor-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer'><span class='textsf'><i >ctor-initializer</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement'><span class='textsf'><i >compound-statement</i></span></span></a><br><a href='except.pre#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block'><span class='textsf'><i >function-try-block</i></span></span></a><br><span class='terminal'><span class='operator'>=</span></span> <span id=':default'><span class='texttt'><span class='keyword'>default</span></span></span> <span class='terminal'>;</span><br><a href='#nt:deleted-function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:deleted-function-body'><span class='textsf'><i >deleted-function-body</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:deleted-function-body'>
<a class='hidden_link' href='#nt:deleted-function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='nt:deleted-function-body'><span id=':deleted-function-body'>deleted-function-body<span class='textnormal'>:</span></span></span></a><br><span class='terminal'><span class='operator'>=</span></span> <span id=':delete'><span class='texttt'><span class='keyword'>delete</span></span></span> <span class='terminal'>;</span><br><span class='terminal'><span class='operator'>=</span></span> <span id=':delete_'><span class='texttt'><span class='keyword'>delete</span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a href='lex.string.uneval#nt:unevaluated-string' title='5.13.6&emsp;Unevaluated strings&emsp;[lex.string.uneval]'><span id='ntref:unevaluated-string'><span class='textsf'><i >unevaluated-string</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span> <span class='terminal'>;</span>
</div></div><div class='texpara'><div id='general-1.sentence-2' class='sentence'>Any informal reference to the body of a function should be interpreted as a reference to
the non-terminal <a href='#nt:function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-body__'><span class='textsf'><i >function-body</i></span></span></a>,
including, for a constructor,
default member initializers or default initialization
used to initialize
a base or member subobject in the absence of
a <a href='class.base.init#nt:mem-initializer-id' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer-id'><span class='textsf'><i >mem-initializer-id</i></span></span></a> (<a href='class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#general-1.sentence-2'>.</a></div> <div id='general-1.sentence-3' class='sentence'>The optional <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.13.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq__'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a> in a <a href='#nt:function-definition' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-definition'><span class='textsf'><i >function-definition</i></span></span></a>
appertains to the function<a class='hidden_link' href='#general-1.sentence-3'>.</a></div> <div id='general-1.sentence-4' class='sentence'>A <a href='#nt:function-definition' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-definition_'><span class='textsf'><i >function-definition</i></span></span></a> with a <a href='class.mem.general#nt:virt-specifier-seq' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:virt-specifier-seq_'><span class='textsf'><i >virt-specifier-seq</i></span></span></a>
shall be a <a href='class.mem.general#nt:member-declaration' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:member-declaration'><span class='textsf'><i >member-declaration</i></span></span></a> (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>)<a class='hidden_link' href='#general-1.sentence-4'>.</a></div> <div id='general-1.sentence-5' class='sentence'>A <a href='#nt:function-definition' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-definition__'><span class='textsf'><i >function-definition</i></span></span></a> with a <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause_'><span class='textsf'><i >requires-clause</i></span></span></a>
shall define a templated function<a class='hidden_link' href='#general-1.sentence-5'>.</a></div></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6747'>#</a></div><div class='texpara'><div id='general-2.sentence-1' class='sentence'>In a <a href='#nt:function-definition' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-definition___'><span class='textsf'><i >function-definition</i></span></span></a>,
either <span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span> <a href='dcl.decl.general#nt:declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator__'><span class='textsf'><i >declarator</i></span></span></a> <span class='texttt'>;</span>
or <a href='dcl.decl.general#nt:declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator___'><span class='textsf'><i >declarator</i></span></span></a> <span class='texttt'>;</span>
shall be a well-formed function declaration
as described in <a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a><a class='hidden_link' href='#general-2.sentence-1'>.</a></div> <div id='general-2.sentence-2' class='sentence'>A function shall be defined only in namespace or class scope<a class='hidden_link' href='#general-2.sentence-2'>.</a></div> <div id='general-2.sentence-3' class='sentence'>The type of a parameter or the return type for a function
definition shall not be
a (possibly cv-qualified) class type that is
incomplete or abstract within the function body
unless the function is deleted (<a href='#delete' title='9.6.3&emsp;Deleted definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>delete]</a>)<a class='hidden_link' href='#general-2.sentence-3'>.</a></div></div></div><div class='para nonNormativeOnly' id='general-3'><div class='marginalizedparent'><a class='marginalized' href='#general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6760'>#</a></div><div class='texpara'><div id='general-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-1'>1</a></i>:&ensp;<div id='general-3.sentence-1' class='sentence'>A simple example of a complete function definition is
<span class='codeblock'><span class='keyword'>int</span> max<span class='parenthesis'>(</span><span class='keyword'>int</span> a, <span class='keyword'>int</span> b, <span class='keyword'>int</span> c<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> m <span class='operator'>=</span> <span class='parenthesis'>(</span>a <span class='anglebracket'>&gt;</span> b<span class='parenthesis'>)</span> <span class='operator'>?</span> a <span class='operator'>:</span> b;
  <span class='keyword'>return</span> <span class='parenthesis'>(</span>m <span class='anglebracket'>&gt;</span> c<span class='parenthesis'>)</span> <span class='operator'>?</span> m <span class='operator'>:</span> c;
<span class='curlybracket'>}</span>
</span></div></div><div class='texpara'><div id='general-3.sentence-2' class='sentence'>Here
<span class='texttt'><span class='keyword'>int</span></span>
is the
<a href='dcl.spec.general#nt:decl-specifier-seq' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier-seq__'><span class='textsf'><i >decl-specifier-seq</i></span></span></a>;
<span class='texttt'>max<span class='parenthesis'>(</span><span class='keyword'>int</span></span>
<span class='texttt'>a,</span>
<span class='texttt'><span class='keyword'>int</span></span>
<span class='texttt'>b,</span>
<span class='texttt'><span class='keyword'>int</span></span>
<span class='texttt'>c<span class='parenthesis'>)</span></span>
is the
<a href='dcl.decl.general#nt:declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator____'><span class='textsf'><i >declarator</i></span></span></a>;
<span class='texttt'><span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span></span>
is the
<a href='#nt:function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-body___'><span class='textsf'><i >function-body</i></span></span></a><a class='hidden_link' href='#general-3.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-4'><div class='marginalizedparent'><a class='marginalized' href='#general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6787'>#</a></div><div class='texpara'><div id='general-4.sentence-1' class='sentence'><a class='index' id=':initializer,base_class'></a><a class='index' id=':initializer,member'></a><a class='index' id=':definition,constructor'></a>A
<a href='class.base.init#nt:ctor-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer_'><span class='textsf'><i >ctor-initializer</i></span></span></a>
is used only in a constructor; see <a href='class.ctor' title='11.4.5&emsp;Constructors'>[class.<span class='shy'></span>ctor]</a> and <a href='class.init' title='11.9&emsp;Initialization'>[class.<span class='shy'></span>init]</a><a class='hidden_link' href='#general-4.sentence-1'>.</a></div></div></div><div class='para nonNormativeOnly' id='general-5'><div class='marginalizedparent'><a class='marginalized' href='#general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6795'>#</a></div><div class='texpara'><div id='general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-1'>1</a></i>:&ensp;<div id='general-5.sentence-1' class='sentence'>A <a href='dcl.decl.general#nt:cv-qualifier-seq' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:cv-qualifier-seq'><span class='textsf'><i >cv-qualifier-seq</i></span></span></a> affects the type of <span id=':this'><span class='texttt'><span class='keyword'>this</span></span></span>
in the body of a member function; see <a href='expr.prim.this' title='7.5.3&emsp;This'>[expr.<span class='shy'></span>prim.<span class='shy'></span>this]</a><a class='hidden_link' href='#general-5.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='general-6'><div class='marginalizedparent'><a class='marginalized' href='#general-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6801'>#</a></div><div class='texpara'><div id='general-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-2'>2</a></i>:&ensp;<div id='general-6.sentence-1' class='sentence'>Unused parameters need not be named<a class='hidden_link' href='#general-6.sentence-1'>.</a></div> <div id='general-6.sentence-2' class='sentence'>For example,</div></div><div class='texpara'><span class='codeblock'><span class='keyword'>void</span> print<span class='parenthesis'>(</span><span class='keyword'>int</span> a, <span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  std<span class='operator'>::</span>printf<span class='parenthesis'>(</span><span class='literal'>"a = %d\n"</span>,a<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='general-7'><div class='marginalizedparent'><a class='marginalized' href='#general-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6813'>#</a></div><div class='texpara'><div id='general-7.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:variable,function-local_predefined' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='def:variable,function-local_predefined'><i >function-local predefined variable</i></span></a> is a variable with static
storage duration that is implicitly defined in a function parameter scope<a class='hidden_link' href='#general-7.sentence-1'>.</a></div></div></div><div class='para' id='general-8'><div class='marginalizedparent'><a class='marginalized' href='#general-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6817'>#</a></div><div class='texpara'><div id='general-8.sentence-1' class='sentence'><a class='index' id=':__func__'></a>The function-local predefined variable <span class='texttt'>__func__</span> is
defined as if a definition of the form
<span class='codeblock'><span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span> __func__<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='literal'>"<i >function-name</i>"</span>;
</span>
had been provided, where <span class='texttt'><i >function-name</i></span> is an <a class='index' id=':string_resulting_from___func__'></a>implementation-defined string<a class='hidden_link' href='#general-8.sentence-1'>.</a></div> <div id='general-8.sentence-2' class='sentence'>It is unspecified whether such a variable has an address
distinct from that of any other object in the program<a class='hidden_link' href='#general-8.sentence-2'>.</a><a class='footnoteref' href='#footnote-81' id='footnoteref-81' title='Implementations are permitted to provide additional predefined variables with names that are reserved to the implementation ([lex.name]). If a predefined variable is not odr-used ([term.odr.use]), its string value need not be present in the program image.'>81</a></div> <div id='general-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> s<span class='parenthesis'>(</span>__func__<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>             <span class='comment'>// OK</span>
  <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> s;
<span class='curlybracket'>}</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> s <span class='operator'>=</span> __func__<span class='parenthesis'>)</span>;   <span class='comment'>// error: <span class='tcode_in_codeblock'>__func__</span> is undeclared</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-81'><div class='texpara'><a class='footnotenum' href='#footnote-81'>81)</a><a class='footnoteBacklink' href='#footnoteref-81'>81)</a> <div id='footnote-81.sentence-1' class='sentence'>Implementations are
permitted to provide additional predefined variables with names that are reserved to the
implementation (<a href='lex.name' title='5.11&emsp;Identifiers'>[lex.<span class='shy'></span>name]</a>)<a class='hidden_link' href='#footnote-81.sentence-1'>.</a></div> <div id='footnote-81.sentence-2' class='sentence'>If a predefined variable is not
odr-used (<a href='basic.def.odr#term.odr.use' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>), its string value need not be present in the program image<a class='hidden_link' href='#footnote-81.sentence-2'>.</a></div></div></div></div><div id='default' class='section'><h3 ><a class='secnum' href='#default' style='min-width:80pt'>9.6.2</a> Explicitly-defaulted functions <a class='abbr_ref' href='dcl.fct.def.default'>[dcl.fct.def.default]</a></h3><div class='para' id='default-1'><div class='marginalizedparent'><a class='marginalized' href='#default-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6846'>#</a></div><div class='texpara'><div id='default-1.sentence-1' class='sentence'>A function definition whose
<a href='#nt:function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-body____'><span class='textsf'><i >function-body</i></span></span></a>
is of the form
<span class='texttt'><span class='operator'>=</span> <span class='keyword'>default</span> ;</span>
is called an <a class='hidden_link' href='#def:definition,function,explicitly-defaulted' title='9.6.2&emsp;Explicitly-defaulted functions&emsp;[dcl.fct.def.default]'><span id='def:definition,function,explicitly-defaulted'><i >explicitly-defaulted</i></span></a> definition<a class='hidden_link' href='#default-1.sentence-1'>.</a></div> <div id='default-1.sentence-2' class='sentence'>A function that is explicitly defaulted shall
<ul class='itemize'><li id='default-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#default-1.1'>(1.1)</a></div>be a special member function (<a href='special' title='11.4.4&emsp;Special member functions'>[special]</a>) or
a comparison operator function (<a href='over.binary' title='12.4.3&emsp;Binary operators'>[over.<span class='shy'></span>binary]</a>, <a href='class.compare.default' title='11.10.1&emsp;Defaulted comparison operator functions'>[class.<span class='shy'></span>compare.<span class='shy'></span>default]</a>), and</li><li id='default-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#default-1.2'>(1.2)</a></div>not have default arguments (<a href='dcl.fct.default' title='9.3.4.7&emsp;Default arguments'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>default]</a>)<a class='hidden_link' href='#default-1.sentence-2'>.</a></li></ul></div></div></div><div class='para' id='default-2'><div class='marginalizedparent'><a class='marginalized' href='#default-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6859'>#</a></div><div class='texpara'><div id='default-2.sentence-1' class='sentence'>An explicitly defaulted special member function <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span>
is allowed to differ from
the corresponding special member function <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span>
that would have been implicitly declared, as follows:
<ul class='itemize'><li id='default-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#default-2.1'>(2.1)</a></div><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> and <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span> may have differing <a href='dcl.decl.general#nt:ref-qualifier' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:ref-qualifier'><span class='textsf'><i >ref-qualifier</i></span></span></a><i >s</i>;</li><li id='default-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#default-2.2'>(2.2)</a></div>if <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span> has an implicit object parameter of
  type “reference to <span class='texttt'>C</span>”,
  <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> may be an explicit object member function whose
  explicit object parameter is of (possibly different) type “reference to <span class='texttt'>C</span>”,
  in which case the type of <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> would differ from the type of <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span>
  in that the type of <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> has an additional parameter;</li><li id='default-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#default-2.3'>(2.3)</a></div><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> and <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span> may have differing exception specifications; and</li><li id='default-2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#default-2.4'>(2.4)</a></div>if <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span> has a non-object parameter of type <span class='texttt'><span class='keyword'>const</span> C<span class='operator'>&amp;</span></span>,
  the corresponding non-object parameter of <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> may be of
  type <span class='texttt'>C<span class='operator'>&amp;</span></span><a class='hidden_link' href='#default-2.sentence-1'>.</a></li></ul></div> <div id='default-2.sentence-2' class='sentence'>
If the type of <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> differs from the type of <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span> in a way
other than as allowed by the preceding rules, then:
<ul class='itemize'><li id='default-2.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#default-2.5'>(2.5)</a></div>if <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> is an assignment operator, and
  the return type of <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> differs from
  the return type of <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span></span> or
  <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span>'s non-object parameter type is not a reference,
  the program is ill-formed;</li><li id='default-2.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#default-2.6'>(2.6)</a></div>otherwise, if <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">F</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> is explicitly defaulted on its first declaration,
  it is defined as deleted;</li><li id='default-2.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#default-2.7'>(2.7)</a></div>otherwise, the program is ill-formed<a class='hidden_link' href='#default-2.sentence-2'>.</a></li></ul></div></div></div><div class='para' id='default-3'><div class='marginalizedparent'><a class='marginalized' href='#default-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6897'>#</a></div><div class='texpara'><div id='default-3.sentence-1' class='sentence'>A function explicitly defaulted on its first declaration
is implicitly inline (<a href='dcl.inline' title='9.2.8&emsp;The inline specifier'>[dcl.<span class='shy'></span>inline]</a>),
and is implicitly constexpr (<a href='dcl.constexpr' title='9.2.6&emsp;The constexpr and consteval specifiers'>[dcl.<span class='shy'></span>constexpr]</a>)
if it is constexpr-suitable<a class='hidden_link' href='#default-3.sentence-1'>.</a></div> <div id='default-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#default-note-1'>1</a></i>:&ensp;<div id='default-3.sentence-2' class='sentence'>Other defaulted functions are not implicitly constexpr<a class='hidden_link' href='#default-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='default-4'><div class='marginalizedparent'><a class='marginalized' href='#default-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6906'>#</a></div><div class='texpara'><div id='default-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#default-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  S<span class='parenthesis'>(</span><span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;               <span class='comment'>// error: default argument</span>
  <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> S<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;   <span class='comment'>// error: non-matching return type</span>
  <span class='operator'>~</span>S<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='literal'>false</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;       <span class='comment'>// OK, despite mismatched exception specification</span>
<span class='keyword'>private</span><span class='operator'>:</span>
  <span class='keyword'>int</span> i;
  S<span class='parenthesis'>(</span>S<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;                                <span class='comment'>// OK, private copy constructor</span>
<span class='curlybracket'>}</span>;
S<span class='operator'>::</span>S<span class='parenthesis'>(</span>S<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;                     <span class='comment'>// OK, defines copy constructor</span>

<span class='keyword'>struct</span> T <span class='curlybracket'>{</span>
  T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  T<span class='parenthesis'>(</span>T <span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span><span class='literal'>false</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> U <span class='curlybracket'>{</span>
  T t;
  U<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  U<span class='parenthesis'>(</span>U <span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
<span class='curlybracket'>}</span>;
U u1;
U u2 <span class='operator'>=</span> <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>U<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>u1<span class='parenthesis'>)</span>;            <span class='comment'>// OK, calls <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;terminate</span> if <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;T(T&amp;&amp;)</span> throws</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='default-5'><div class='marginalizedparent'><a class='marginalized' href='#default-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6933'>#</a></div><div class='texpara'><div id='default-5.sentence-1' class='sentence'>Explicitly-defaulted functions and implicitly-declared functions are collectively
called <a class='hidden_link' href='#def:defaulted' title='9.6.2&emsp;Explicitly-defaulted functions&emsp;[dcl.fct.def.default]'><span id='def:defaulted'><i >defaulted</i></span></a> functions, and the implementation
shall provide implicit definitions
for them (<a href='class.ctor' title='11.4.5&emsp;Constructors'>[class.<span class='shy'></span>ctor]</a>, <a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>, <a href='class.copy.ctor' title='11.4.5.3&emsp;Copy/move constructors'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>, <a href='class.copy.assign' title='11.4.6&emsp;Copy/move assignment operator'>[class.<span class='shy'></span>copy.<span class='shy'></span>assign]</a>) as described below,
including possibly defining them as deleted<a class='hidden_link' href='#default-5.sentence-1'>.</a></div> <div id='default-5.sentence-2' class='sentence'>A defaulted prospective destructor (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)
that is not a destructor is defined as deleted<a class='hidden_link' href='#default-5.sentence-2'>.</a></div> <div id='default-5.sentence-3' class='sentence'>A defaulted special member function
that is neither a prospective destructor nor
an eligible special member function (<a href='special' title='11.4.4&emsp;Special member functions'>[special]</a>)
is defined as deleted<a class='hidden_link' href='#default-5.sentence-3'>.</a></div> <div id='default-5.sentence-4' class='sentence'>A function is
<a class='hidden_link' href='#def:user-provided' title='9.6.2&emsp;Explicitly-defaulted functions&emsp;[dcl.fct.def.default]'><span id='def:user-provided'><i >user-provided</i></span></a> if it is user-declared and not explicitly
defaulted or deleted on its first declaration<a class='hidden_link' href='#default-5.sentence-4'>.</a></div> <div id='default-5.sentence-5' class='sentence'>A user-provided explicitly-defaulted function
(i.e., explicitly defaulted after its first declaration)
is implicitly defined at the point where it is explicitly defaulted; if such a function is implicitly
defined as deleted, the program is ill-formed<a class='hidden_link' href='#default-5.sentence-5'>.</a></div> <div id='default-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#default-note-2'>2</a></i>:&ensp;<div id='default-5.sentence-6' class='sentence'>Declaring a function as defaulted after its first declaration
can provide efficient execution and concise definition
while enabling a stable binary interface to an evolving code base<a class='hidden_link' href='#default-5.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='default-5.sentence-7' class='sentence'>
A non-user-provided defaulted function
(i.e., implicitly declared or explicitly defaulted in the class)
that is not defined as deleted is implicitly defined when it is odr-used (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>)
or needed for constant evaluation (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)<a class='hidden_link' href='#default-5.sentence-7'>.</a></div> <div id='default-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#default-note-3'>3</a></i>:&ensp;<div id='default-5.sentence-8' class='sentence'>The implicit definition of a non-user-provided defaulted function
does not bind any names<a class='hidden_link' href='#default-5.sentence-8'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='default-6'><div class='marginalizedparent'><a class='marginalized' href='#default-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6965'>#</a></div><div class='texpara'><div id='default-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#default-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> trivial <span class='curlybracket'>{</span>
  trivial<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  trivial<span class='parenthesis'>(</span><span class='keyword'>const</span> trivial<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  trivial<span class='parenthesis'>(</span>trivial<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  trivial<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> trivial<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  trivial<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>trivial<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  <span class='operator'>~</span>trivial<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> nontrivial1 <span class='curlybracket'>{</span>
  nontrivial1<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
nontrivial1<span class='operator'>::</span>nontrivial1<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;   <span class='comment'>// not first declaration</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='delete' class='section'><h3 ><a class='secnum' href='#delete' style='min-width:80pt'>9.6.3</a> Deleted definitions <a class='abbr_ref' href='dcl.fct.def.delete'>[dcl.fct.def.delete]</a></h3><div class='texpara'><a class='index' id=':definition,function,deleted'></a></div><div class='para' id='delete-1'><div class='marginalizedparent'><a class='marginalized' href='#delete-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6987'>#</a></div><div class='texpara'><div id='delete-1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:definition,deleted' title='9.6.3&emsp;Deleted definitions&emsp;[dcl.fct.def.delete]'><span id='def:definition,deleted'><i >deleted definition</i></span></a> of a function is a function definition
whose <a href='#nt:function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-body_____'><span class='textsf'><i >function-body</i></span></span></a> is a <a href='#nt:deleted-function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:deleted-function-body_'><span class='textsf'><i >deleted-function-body</i></span></span></a>
or an explicitly-defaulted definition of the function where the function is
defined as deleted<a class='hidden_link' href='#delete-1.sentence-1'>.</a></div> <div id='delete-1.sentence-2' class='sentence'>A <a class='hidden_link' href='#def:function,deleted' title='9.6.3&emsp;Deleted definitions&emsp;[dcl.fct.def.delete]'><span id='def:function,deleted'><i >deleted function</i></span></a> is
a function with a
deleted definition or a function that is implicitly defined as deleted<a class='hidden_link' href='#delete-1.sentence-2'>.</a></div></div></div><div class='para' id='delete-2'><div class='marginalizedparent'><a class='marginalized' href='#delete-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L6996'>#</a></div><div class='texpara'><div id='delete-2.sentence-1' class='sentence'>A program that refers to a deleted function implicitly or explicitly, other
than to declare it, is ill-formed<a class='hidden_link' href='#delete-2.sentence-1'>.</a></div></div><div class='texpara'><div id='delete-2.sentence-2' class='sentence'><i >Recommended practice</i>: The resulting diagnostic message should include
the text of the <a href='lex.string.uneval#nt:unevaluated-string' title='5.13.6&emsp;Unevaluated strings&emsp;[lex.string.uneval]'><span id='ntref:unevaluated-string_'><span class='textsf'><i >unevaluated-string</i></span></span></a>,
if one is supplied<a class='hidden_link' href='#delete-2.sentence-2'>.</a></div></div><div class='texpara'><div id='delete-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#delete-note-1'>1</a></i>:&ensp;<div id='delete-2.sentence-3' class='sentence'>This includes calling the function
implicitly or explicitly and forming a pointer or pointer-to-member to the
function<a class='hidden_link' href='#delete-2.sentence-3'>.</a></div> <div id='delete-2.sentence-4' class='sentence'>It applies even for references in expressions that are not
potentially-evaluated<a class='hidden_link' href='#delete-2.sentence-4'>.</a></div> <div id='delete-2.sentence-5' class='sentence'>For an overload set, only the
function selected by overload resolution is referenced<a class='hidden_link' href='#delete-2.sentence-5'>.</a></div> <div id='delete-2.sentence-6' class='sentence'>The implicit
odr-use (<a href='basic.def.odr#term.odr.use' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>) of a virtual function does not, by itself,
constitute a reference<a class='hidden_link' href='#delete-2.sentence-6'>.</a></div> <div id='delete-2.sentence-7' class='sentence'>The <a href='lex.string.uneval#nt:unevaluated-string' title='5.13.6&emsp;Unevaluated strings&emsp;[lex.string.uneval]'><span id='ntref:unevaluated-string__'><span class='textsf'><i >unevaluated-string</i></span></span></a>, if present,
can be used to explain the rationale for deletion and/or
to suggest an alternative<a class='hidden_link' href='#delete-2.sentence-7'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='delete-3'><div class='marginalizedparent'><a class='marginalized' href='#delete-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7018'>#</a></div><div class='texpara'><div id='delete-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#delete-example-1'>1</a></i>:&ensp;<div id='delete-3.sentence-1' class='sentence'>One can prevent default initialization and
initialization by non-<span class='texttt'><span class='keyword'>double</span></span>s with
<span class='codeblock'><span class='keyword'>struct</span> onlydouble <span class='curlybracket'>{</span>
  onlydouble<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;                <span class='comment'>// OK, but redundant</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    onlydouble<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
  onlydouble<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
</span></div> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'><div id='delete-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#delete-example-2'>2</a></i>:&ensp;<div id='delete-3.sentence-2' class='sentence'>One can prevent use of a
class in certain <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression'><span class='textsf'><i >new-expression</i></span></span></a><i >s</i> by using deleted definitions
of a user-declared <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span> for that class<a class='hidden_link' href='#delete-3.sentence-2'>.</a></div> <span class='codeblock'><span class='keyword'>struct</span> sometype <span class='curlybracket'>{</span>
  <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t<span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
  <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t<span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
<span class='curlybracket'>}</span>;
sometype<span class='operator'>*</span> p <span class='operator'>=</span> <span class='keyword'>new</span> sometype;     <span class='comment'>// error: deleted class <span class='tcode_in_codeblock'>operator new</span></span>
sometype<span class='operator'>*</span> q <span class='operator'>=</span> <span class='keyword'>new</span> sometype<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span>;  <span class='comment'>// error: deleted class <span class='tcode_in_codeblock'>operator new[]</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'><div id='delete-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#delete-example-3'>3</a></i>:&ensp;<div id='delete-3.sentence-3' class='sentence'>One can make a class uncopyable, i.e., move-only, by using deleted
definitions of the copy constructor and copy assignment operator, and then
providing defaulted definitions of the move constructor and move assignment operator<a class='hidden_link' href='#delete-3.sentence-3'>.</a></div> <span class='codeblock'><span class='keyword'>struct</span> moveonly <span class='curlybracket'>{</span>
  moveonly<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  moveonly<span class='parenthesis'>(</span><span class='keyword'>const</span> moveonly<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
  moveonly<span class='parenthesis'>(</span>moveonly<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  moveonly<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> moveonly<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
  moveonly<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='parenthesis'>(</span>moveonly<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  <span class='operator'>~</span>moveonly<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
<span class='curlybracket'>}</span>;
moveonly<span class='operator'>*</span> p;
moveonly q<span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='parenthesis'>)</span>;                 <span class='comment'>// error: deleted copy constructor</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='delete-4'><div class='marginalizedparent'><a class='marginalized' href='#delete-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7064'>#</a></div><div class='texpara'><div id='delete-4.sentence-1' class='sentence'>A deleted function is implicitly an inline function (<a href='dcl.inline' title='9.2.8&emsp;The inline specifier'>[dcl.<span class='shy'></span>inline]</a>)<a class='hidden_link' href='#delete-4.sentence-1'>.</a></div> <div id='delete-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#delete-note-2'>2</a></i>:&ensp;<div id='delete-4.sentence-2' class='sentence'>The
one-definition rule (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>) applies to deleted definitions<a class='hidden_link' href='#delete-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='delete-4.sentence-3' class='sentence'>
A deleted definition of a function shall be the first declaration of the function or,
for an explicit specialization of a function template, the first declaration of that
specialization<a class='hidden_link' href='#delete-4.sentence-3'>.</a></div> <div id='delete-4.sentence-4' class='sentence'>An implicitly declared allocation or deallocation function (<a href='basic.stc.dynamic' title='6.7.6.5&emsp;Dynamic storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic]</a>)
shall not be defined as deleted<a class='hidden_link' href='#delete-4.sentence-4'>.</a></div> <div id='delete-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#delete-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> sometype <span class='curlybracket'>{</span>
  sometype<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
sometype<span class='operator'>::</span>sometype<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;  <span class='comment'>// error: not first declaration</span>
</span> —&nbsp;<i>end example</i>]</div></div> </div></div></div><div id='coroutine' class='section'><h3 ><a class='secnum' href='#coroutine' style='min-width:80pt'>9.6.4</a> Coroutine definitions <a class='abbr_ref' href='dcl.fct.def.coroutine'>[dcl.fct.def.coroutine]</a></h3><div class='texpara'><a class='index' id=':definition,coroutine'></a></div><div class='para' id='coroutine-1'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7088'>#</a></div><div class='texpara'><div id='coroutine-1.sentence-1' class='sentence'>A function is a <a class='hidden_link' href='#def:coroutine' title='9.6.4&emsp;Coroutine definitions&emsp;[dcl.fct.def.coroutine]'><span id='def:coroutine'><i >coroutine</i></span></a> if its <a href='#nt:function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-body______'><span class='textsf'><i >function-body</i></span></span></a> encloses a
<a href='stmt.return.coroutine#nt:coroutine-return-statement' title='8.7.5&emsp;The co_&shy;return statement&emsp;[stmt.return.coroutine]'><span id='ntref:coroutine-return-statement'><span class='textsf'><i >coroutine-return-statement</i></span></span></a> (<a href='stmt.return.coroutine' title='8.7.5&emsp;The co_&shy;return statement'>[stmt.<span class='shy'></span>return.<span class='shy'></span>coroutine]</a>),
an <a href='expr.await#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression'><span class='textsf'><i >await-expression</i></span></span></a> (<a href='expr.await' title='7.6.2.4&emsp;Await'>[expr.<span class='shy'></span>await]</a>),
or a <a href='expr.yield#nt:yield-expression' title='7.6.17&emsp;Yielding a value&emsp;[expr.yield]'><span id='ntref:yield-expression'><span class='textsf'><i >yield-expression</i></span></span></a> (<a href='expr.yield' title='7.6.17&emsp;Yielding a value'>[expr.<span class='shy'></span>yield]</a>)<a class='hidden_link' href='#coroutine-1.sentence-1'>.</a></div> <div id='coroutine-1.sentence-2' class='sentence'>The <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> of the coroutine shall not
terminate with an ellipsis that is not part of
a <a href='dcl.fct#nt:parameter-declaration' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration'><span class='textsf'><i >parameter-declaration</i></span></span></a><a class='hidden_link' href='#coroutine-1.sentence-2'>.</a></div></div></div><div class='para nonNormativeOnly' id='coroutine-2'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7097'>#</a></div><div class='texpara'><div id='coroutine-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#coroutine-example-1'>1</a></i>:&ensp;<span class='codeblock'>task<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

task<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span> g1<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='keyword'>co_await</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>"f() =&gt; "</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> i <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> std<span class='operator'>::</span>endl;
<span class='curlybracket'>}</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
task<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span> g2<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>      <span class='comment'>// OK, ellipsis is a pack expansion</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='keyword'>co_await</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>"f() =&gt; "</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> i <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> std<span class='operator'>::</span>endl;
<span class='curlybracket'>}</span>

task<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span> g3<span class='parenthesis'>(</span><span class='keyword'>int</span> a, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>     <span class='comment'>// error: variable parameter list not allowed</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='keyword'>co_await</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>"f() =&gt; "</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> i <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> std<span class='operator'>::</span>endl;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='coroutine-3'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7120'>#</a></div><div class='texpara'><div id='coroutine-3.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:coroutine,promise_type' title='9.6.4&emsp;Coroutine definitions&emsp;[dcl.fct.def.coroutine]'><span id='def:coroutine,promise_type'><i >promise type</i></span></a> of a coroutine is
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>coroutine_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>R, P<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span>, <span class='math'>&hellip;</span>, P<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span></span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>promise_<span class='shy'></span>type</span>,
where
<span class='texttt'>R</span> is the return type of the function, and
<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span><span class="mjx-mo MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.372em;">…</span></span><span class="mjx-texatom MJXc-space1"><span class="mjx-mrow"></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span></span> is the sequence of types of the non-object function parameters,
preceded by the type of the object parameter (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>)
if the coroutine is a non-static member function<a class='hidden_link' href='#coroutine-3.sentence-1'>.</a></div> <div id='coroutine-3.sentence-2' class='sentence'>The promise type shall be a class type<a class='hidden_link' href='#coroutine-3.sentence-2'>.</a></div></div></div><div class='para' id='coroutine-4'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7131'>#</a></div><div class='texpara'><div id='coroutine-4.sentence-1' class='sentence'>In the following, <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.519em;">p</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.398em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span> is an lvalue of type <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span>,
where
<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.519em;">p</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.398em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> denotes the object parameter and
<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.519em;">p</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.398em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">+</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span></span> denotes the <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span></span> non-object function parameter
for an implicit object member function, and
<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.519em;">p</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.398em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span> denotes
the <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span></span> function parameter otherwise<a class='hidden_link' href='#coroutine-4.sentence-1'>.</a></div> <div id='coroutine-4.sentence-2' class='sentence'>For an implicit object member function,
<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.519em;">q</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.398em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span> is an lvalue that denotes <span class='texttt'><span class='operator'>*</span><span class='keyword'>this</span></span>;
any other <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.519em;">q</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.398em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span> is an lvalue
that denotes the parameter copy corresponding to <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.519em;">p</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.398em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span>,
as described below<a class='hidden_link' href='#coroutine-4.sentence-2'>.</a></div></div></div><div class='para' id='coroutine-5'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7145'>#</a></div><div class='texpara'><div id='coroutine-5.sentence-1' class='sentence'>A coroutine behaves as if
the top-level cv-qualifiers in all
<a href='dcl.fct#nt:parameter-declaration' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration_'><span class='textsf'><i >parameter-declaration</i></span></span></a><i >s</i> in the declarator
of its <a href='#nt:function-definition' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-definition____'><span class='textsf'><i >function-definition</i></span></span></a>
were removed and
its <a href='#nt:function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-body_______'><span class='textsf'><i >function-body</i></span></span></a> were replaced by
the following <a class='hidden_link' href='#def:body,replacement' title='9.6.4&emsp;Coroutine definitions&emsp;[dcl.fct.def.coroutine]'><span id='def:body,replacement'><i >replacement body</i></span></a>:
<div class='simplebnf'>
<span class='terminal'><span class='curlybracket'>{</span></span><br>&emsp;&emsp;&emsp;<i >promise-type</i> <span class='texttt'><i >promise</i></span> <i >promise-constructor-arguments</i> <span class='terminal'>;</span><br>&emsp;&emsp;&emsp;<span class='terminal'><span class='keyword'>try</span></span> <span class='terminal'><span class='curlybracket'>{</span></span><br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class='terminal'><span class='keyword'>co_await</span></span> <span class='terminal'><span class='texttt'><i >promise</i></span><span class='operator'>.</span>initial_suspend<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> <span class='terminal'>;</span><br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<a href='#nt:function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-body________'><span class='textsf'><i >function-body</i></span></span></a><br>&emsp;&emsp;&emsp;<span class='terminal'><span class='curlybracket'>}</span> <span class='keyword'>catch</span> <span class='parenthesis'>(</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='parenthesis'>)</span> <span class='curlybracket'>{</span></span><br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class='terminal'><span class='keyword'>if</span> <span class='parenthesis'>(</span><span class='operator'>!</span><span class='texttt'><i >initial-await-resume-called</i></span><span class='parenthesis'>)</span></span><br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class='terminal'><span class='keyword'>throw</span></span> <span class='terminal'>;</span><br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<span class='terminal'><span class='texttt'><i >promise</i></span><span class='operator'>.</span>unhandled_exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> <span class='terminal'>;</span><br>&emsp;&emsp;&emsp;<span class='terminal'><span class='curlybracket'>}</span></span><br><span class='texttt'><i >final-suspend</i></span> <span class='terminal'><span class='operator'>:</span></span><br>&emsp;&emsp;&emsp;<span class='terminal'><span class='keyword'>co_await</span></span> <span class='terminal'><span class='texttt'><i >promise</i></span><span class='operator'>.</span>final_suspend<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> <span class='terminal'>;</span><br><span class='terminal'><span class='curlybracket'>}</span></span>
</div>
where
<ul class='itemize'><li id='coroutine-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#coroutine-5.1'>(5.1)</a></div><div class='texpara'><div id='coroutine-5.1.sentence-1' class='sentence'><a class='index' id=':coroutine,await_expression'></a>the <a href='expr.await#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression_'><span class='textsf'><i >await-expression</i></span></span></a> containing
the call to <span class='texttt'>initial_<span class='shy'></span>suspend</span>
is the <a class='hidden_link' href='#def:await_expression,initial' title='9.6.4&emsp;Coroutine definitions&emsp;[dcl.fct.def.coroutine]'><span id='def:await_expression,initial'><i >initial await expression</i></span></a>, and</div></div></li><li id='coroutine-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#coroutine-5.2'>(5.2)</a></div><div class='texpara'><div id='coroutine-5.2.sentence-1' class='sentence'>the <a href='expr.await#nt:await-expression' title='7.6.2.4&emsp;Await&emsp;[expr.await]'><span id='ntref:await-expression__'><span class='textsf'><i >await-expression</i></span></span></a> containing
the call to <span class='texttt'>final_<span class='shy'></span>suspend</span>
is the <a class='hidden_link' href='#def:await_expression,final' title='9.6.4&emsp;Coroutine definitions&emsp;[dcl.fct.def.coroutine]'><span id='def:await_expression,final'><i >final await expression</i></span></a>, and</div></div></li><li id='coroutine-5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#coroutine-5.3'>(5.3)</a></div><div class='texpara'><div id='coroutine-5.3.sentence-1' class='sentence'><i >initial-await-resume-called</i>
is initially <span class='texttt'><span class='literal'>false</span></span> and is set to <span class='texttt'><span class='literal'>true</span></span>
immediately before the evaluation
of the <i >await-resume</i> expression (<a href='expr.await' title='7.6.2.4&emsp;Await'>[expr.<span class='shy'></span>await]</a>)
of the initial await expression, and</div></div></li><li id='coroutine-5.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#coroutine-5.4'>(5.4)</a></div><div class='texpara'><div id='coroutine-5.4.sentence-1' class='sentence'><i >promise-type</i> denotes the promise type, and</div></div></li><li id='coroutine-5.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#coroutine-5.5'>(5.5)</a></div><div class='texpara'><div id='coroutine-5.5.sentence-1' class='sentence'>the object denoted by the exposition-only name <span class='texttt'><i >promise</i></span>
is the <a class='hidden_link' href='#def:promise_object' title='9.6.4&emsp;Coroutine definitions&emsp;[dcl.fct.def.coroutine]'><span id='def:promise_object'><i >promise object</i></span></a> of the coroutine, and</div></div></li><li id='coroutine-5.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#coroutine-5.6'>(5.6)</a></div><div class='texpara'><div id='coroutine-5.6.sentence-1' class='sentence'>the label denoted by the name <span class='texttt'><i >final-suspend</i></span>
is defined for exposition only (<a href='stmt.return.coroutine' title='8.7.5&emsp;The co_&shy;return statement'>[stmt.<span class='shy'></span>return.<span class='shy'></span>coroutine]</a>), and</div></div></li><li id='coroutine-5.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#coroutine-5.7'>(5.7)</a></div><div class='texpara'><div id='coroutine-5.7.sentence-1' class='sentence'><i >promise-constructor-arguments</i> is determined as follows:
overload resolution is performed on a promise constructor call created by
assembling an argument list <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.519em;">q</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.398em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span><span class="mjx-mo MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.372em;">…</span></span><span class="mjx-texatom MJXc-space1"><span class="mjx-mrow"></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.519em;">q</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.398em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span></span><a class='hidden_link' href='#coroutine-5.7.sentence-1'>.</a></div> <div id='coroutine-5.7.sentence-2' class='sentence'>If a viable
constructor is found (<a href='over.match.viable' title='12.2.3&emsp;Viable functions'>[over.<span class='shy'></span>match.<span class='shy'></span>viable]</a>), then
<i >promise-constructor-arguments</i> is
<span class='texttt'><span class='parenthesis'>(</span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.519em;">q</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.398em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span>, <span class='math'>&hellip;</span>, <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.519em;">q</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.398em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span></span><span class='parenthesis'>)</span></span>, otherwise
<i >promise-constructor-arguments</i> is empty, and</div></div></li><li id='coroutine-5.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#coroutine-5.8'>(5.8)</a></div><div class='texpara'><div id='coroutine-5.8.sentence-1' class='sentence'>a coroutine is suspended at the <a class='hidden_link' href='#def:suspend_point,initial' title='9.6.4&emsp;Coroutine definitions&emsp;[dcl.fct.def.coroutine]'><span id='def:suspend_point,initial'><i >initial suspend point</i></span></a> if
it is suspended at the initial await expression, and</div></div></li><li id='coroutine-5.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#coroutine-5.9'>(5.9)</a></div><div class='texpara'><div id='coroutine-5.9.sentence-1' class='sentence'>a coroutine is suspended at a <a class='hidden_link' href='#def:suspend_point,final' title='9.6.4&emsp;Coroutine definitions&emsp;[dcl.fct.def.coroutine]'><span id='def:suspend_point,final'><i >final suspend point</i></span></a> if
it is suspended
<ul class='itemize'><li id='coroutine-5.9.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#coroutine-5.9.1'>(5.9.1)</a></div>at a final await expression or</li><li id='coroutine-5.9.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#coroutine-5.9.2'>(5.9.2)</a></div>due to an exception exiting from <span class='texttt'>unhandled_<span class='shy'></span>exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#coroutine-5.9.sentence-1'>.</a></li></ul></div></div></li></ul></div></div></div><div class='para nonNormativeOnly' id='coroutine-6'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7217'>#</a></div><div class='texpara'><div id='coroutine-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#coroutine-note-1'>1</a></i>:&ensp;<div id='coroutine-6.sentence-1' class='sentence'>An odr-use of a non-reference parameter
in a postcondition assertion
of a coroutine is ill-formed (<a href='dcl.contract.func' title='9.4.1&emsp;General'>[dcl.<span class='shy'></span>contract.<span class='shy'></span>func]</a>)<a class='hidden_link' href='#coroutine-6.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='coroutine-7'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7224'>#</a></div><div class='texpara'><div id='coroutine-7.sentence-1' class='sentence'>If searches for the names <span class='texttt'>return_<span class='shy'></span>void</span> and <span class='texttt'>return_<span class='shy'></span>value</span>
in the scope of the promise type each find any declarations,
the program is ill-formed<a class='hidden_link' href='#coroutine-7.sentence-1'>.</a></div> <div id='coroutine-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#coroutine-note-2'>2</a></i>:&ensp;<div id='coroutine-7.sentence-2' class='sentence'>If <span class='texttt'>return_<span class='shy'></span>void</span> is found, flowing off
the end of a coroutine is equivalent to a <span id=':co_return'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>return</span></span></span> with no operand<a class='hidden_link' href='#coroutine-7.sentence-2'>.</a></div> <div id='coroutine-7.sentence-3' class='sentence'>Otherwise, flowing off the end of a coroutine
results in undefined behavior (<a href='stmt.return.coroutine' title='8.7.5&emsp;The co_&shy;return statement'>[stmt.<span class='shy'></span>return.<span class='shy'></span>coroutine]</a>)<a class='hidden_link' href='#coroutine-7.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='coroutine-8'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7235'>#</a></div><div class='texpara'><div id='coroutine-8.sentence-1' class='sentence'>The expression <span class='texttt'><span class='texttt'><i >promise</i></span><span class='operator'>.</span>get_<span class='shy'></span>return_<span class='shy'></span>object<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> is used
to initialize
the returned reference or prvalue result object of a call to a coroutine<a class='hidden_link' href='#coroutine-8.sentence-1'>.</a></div> <div id='coroutine-8.sentence-2' class='sentence'>The call to <span class='texttt'>get_<span class='shy'></span>return_<span class='shy'></span>object</span>
is sequenced before
the call to <span class='texttt'>initial_<span class='shy'></span>suspend</span>
and is invoked at most once<a class='hidden_link' href='#coroutine-8.sentence-2'>.</a></div></div></div><div class='para' id='coroutine-9'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7244'>#</a></div><div class='texpara'><div id='coroutine-9.sentence-1' class='sentence'>A suspended coroutine can be resumed to continue execution by invoking
a resumption member function (<a href='coroutine.handle.resumption' title='17.13.4.6&emsp;Resumption'>[coroutine.<span class='shy'></span>handle.<span class='shy'></span>resumption]</a>)
of a coroutine handle (<a href='coroutine.handle' title='17.13.4&emsp;Class template coroutine_&shy;handle'>[coroutine.<span class='shy'></span>handle]</a>)
that refers to the coroutine<a class='hidden_link' href='#coroutine-9.sentence-1'>.</a></div> <div id='coroutine-9.sentence-2' class='sentence'>The evaluation that invoked a resumption member function is
called the <a class='hidden_link' href='#def:coroutine,resumer' title='9.6.4&emsp;Coroutine definitions&emsp;[dcl.fct.def.coroutine]'><span id='def:coroutine,resumer'><i >resumer</i></span></a><a class='hidden_link' href='#coroutine-9.sentence-2'>.</a></div> <div id='coroutine-9.sentence-3' class='sentence'>Invoking a resumption member function for a coroutine
that is not suspended results in undefined behavior<a class='hidden_link' href='#coroutine-9.sentence-3'>.</a></div></div></div><div class='para' id='coroutine-10'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7254'>#</a></div><div class='texpara'><div id='coroutine-10.sentence-1' class='sentence'>An implementation may need to allocate additional storage for a coroutine<a class='hidden_link' href='#coroutine-10.sentence-1'>.</a></div> <div id='coroutine-10.sentence-2' class='sentence'>This storage is known as the <a class='hidden_link' href='#def:coroutine_state' title='9.6.4&emsp;Coroutine definitions&emsp;[dcl.fct.def.coroutine]'><span id='def:coroutine_state'><i >coroutine state</i></span></a> and is obtained by calling
a non-array allocation function (<a href='basic.stc.dynamic.allocation' title='6.7.6.5.2&emsp;Allocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>allocation]</a>)
as part of the replacement body<a class='hidden_link' href='#coroutine-10.sentence-2'>.</a></div> <div id='coroutine-10.sentence-3' class='sentence'>The allocation function's name is looked up by searching for it in the scope of the promise type<a class='hidden_link' href='#coroutine-10.sentence-3'>.</a></div> <ul class='itemize'><li id='coroutine-10.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#coroutine-10.1'>(10.1)</a></div><div class='texpara'><div id='coroutine-10.1.sentence-1' class='sentence'>If the search finds any declarations,
overload resolution is performed on a function call created by assembling an
argument list<a class='hidden_link' href='#coroutine-10.1.sentence-1'>.</a></div> <div id='coroutine-10.1.sentence-2' class='sentence'>The first argument is the amount of space requested, and
is a prvalue of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span><a class='hidden_link' href='#coroutine-10.1.sentence-2'>.</a></div> <div id='coroutine-10.1.sentence-3' class='sentence'>The lvalues <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.519em;">p</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.398em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span><span class="mjx-mo MJXc-space1"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.372em;">…</span></span><span class="mjx-texatom MJXc-space1"><span class="mjx-mrow"></span></span><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.225em; padding-bottom: 0.519em;">p</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.398em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span></span>
with their original types (including cv-qualifiers)
are the successive arguments<a class='hidden_link' href='#coroutine-10.1.sentence-3'>.</a></div> <div id='coroutine-10.1.sentence-4' class='sentence'>If no viable function is found (<a href='over.match.viable' title='12.2.3&emsp;Viable functions'>[over.<span class='shy'></span>match.<span class='shy'></span>viable]</a>),
overload resolution is performed again
on a function call created by passing just
the amount of space required as a prvalue of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span><a class='hidden_link' href='#coroutine-10.1.sentence-4'>.</a></div></div></li><li id='coroutine-10.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#coroutine-10.2'>(10.2)</a></div><div class='texpara'><div id='coroutine-10.2.sentence-1' class='sentence'>If the search finds no declarations, a search is performed in the global scope<a class='hidden_link' href='#coroutine-10.2.sentence-1'>.</a></div> <div id='coroutine-10.2.sentence-2' class='sentence'>Overload resolution is performed on a function call created by
passing the amount of space required as a prvalue of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span><a class='hidden_link' href='#coroutine-10.2.sentence-2'>.</a></div></div></li></ul></div></div><div class='para' id='coroutine-11'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7279'>#</a></div><div class='texpara'><div id='coroutine-11.sentence-1' class='sentence'>If a search for the name <span class='texttt'>get_<span class='shy'></span>return_<span class='shy'></span>object_<span class='shy'></span>on_<span class='shy'></span>allocation_<span class='shy'></span>failure</span>
in the scope of the promise type (<a href='class.member.lookup' title='6.5.2&emsp;Member name lookup'>[class.<span class='shy'></span>member.<span class='shy'></span>lookup]</a>) finds
any declarations, then the result
of a call to an allocation function used to obtain storage for the coroutine
state is assumed to return <span id=':nullptr'><span class='texttt'><span class='literal'>nullptr</span></span></span> if it fails to obtain storage,
and if a global allocation function is selected,
the <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>size_<span class='shy'></span>t, nothrow_<span class='shy'></span>t<span class='parenthesis'>)</span></span> form is used<a class='hidden_link' href='#coroutine-11.sentence-1'>.</a></div> <div id='coroutine-11.sentence-2' class='sentence'>The allocation function used in this case shall have a non-throwing
<a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier'><span class='textsf'><i >noexcept-specifier</i></span></span></a><a class='hidden_link' href='#coroutine-11.sentence-2'>.</a></div> <div id='coroutine-11.sentence-3' class='sentence'>If the allocation function returns <span id=':nullptr_'><span class='texttt'><span class='literal'>nullptr</span></span></span>, the coroutine transfers
control to the caller of the coroutine and the return value is obtained by a
call to <span class='texttt'>T<span class='operator'>&#x200b;::&#x200b;</span>get_<span class='shy'></span>return_<span class='shy'></span>object_<span class='shy'></span>on_<span class='shy'></span>allocation_<span class='shy'></span>failure<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>, where <span class='texttt'>T</span>
is the promise type<a class='hidden_link' href='#coroutine-11.sentence-3'>.</a></div></div><div class='texpara'><div id='coroutine-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#coroutine-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>iostream<span class='anglebracket'>&gt;</span>
<span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>coroutine<span class='anglebracket'>&gt;</span>

<span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;operator new(size_<span class='shy'></span>t, nothrow_<span class='shy'></span>t)</span> will be used if allocation is needed</span>
<span class='keyword'>struct</span> generator <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> promise_type;
  <span class='keyword'>using</span> handle <span class='operator'>=</span> std<span class='operator'>::</span>coroutine_handle<span class='anglebracket'>&lt;</span>promise_type<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>struct</span> promise_type <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> current_value;
    <span class='keyword'>static</span> <span class='keyword'>auto</span> get_return_object_on_allocation_failure<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> generator<span class='curlybracket'>{</span><span class='literal'>nullptr</span><span class='curlybracket'>}</span>; <span class='curlybracket'>}</span>
    <span class='keyword'>auto</span> get_return_object<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> generator<span class='curlybracket'>{</span>handle<span class='operator'>::</span>from_promise<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='curlybracket'>}</span>; <span class='curlybracket'>}</span>
    <span class='keyword'>auto</span> initial_suspend<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> std<span class='operator'>::</span>suspend_always<span class='curlybracket'>{</span><span class='curlybracket'>}</span>; <span class='curlybracket'>}</span>
    <span class='keyword'>auto</span> final_suspend<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> std<span class='operator'>::</span>suspend_always<span class='curlybracket'>{</span><span class='curlybracket'>}</span>; <span class='curlybracket'>}</span>
    <span class='keyword'>void</span> unhandled_exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> std<span class='operator'>::</span>terminate<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>
    <span class='keyword'>void</span> return_void<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    <span class='keyword'>auto</span> yield_value<span class='parenthesis'>(</span><span class='keyword'>int</span> value<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      current_value <span class='operator'>=</span> value;
      <span class='keyword'>return</span> std<span class='operator'>::</span>suspend_always<span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
    <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span>;
  <span class='keyword'>bool</span> move_next<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> coro <span class='operator'>?</span> <span class='parenthesis'>(</span>coro<span class='operator'>.</span>resume<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, <span class='operator'>!</span>coro<span class='operator'>.</span>done<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>:</span> <span class='literal'>false</span>; <span class='curlybracket'>}</span>
  <span class='keyword'>int</span> current_value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> coro<span class='operator'>.</span>promise<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>current_value; <span class='curlybracket'>}</span>
  generator<span class='parenthesis'>(</span>generator <span class='keyword'>const</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
  generator<span class='parenthesis'>(</span>generator <span class='operator'>&amp;</span><span class='operator'>&amp;</span> rhs<span class='parenthesis'>)</span> <span class='operator'>:</span> coro<span class='parenthesis'>(</span>rhs<span class='operator'>.</span>coro<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> rhs<span class='operator'>.</span>coro <span class='operator'>=</span> <span class='literal'>nullptr</span>; <span class='curlybracket'>}</span>
  <span class='operator'>~</span>generator<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>if</span> <span class='parenthesis'>(</span>coro<span class='parenthesis'>)</span> coro<span class='operator'>.</span>destroy<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>
<span class='keyword'>private</span><span class='operator'>:</span>
  generator<span class='parenthesis'>(</span>handle h<span class='parenthesis'>)</span> <span class='operator'>:</span> coro<span class='parenthesis'>(</span>h<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
  handle coro;
<span class='curlybracket'>}</span>;
generator f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>co_yield</span> <span class='literal'>1</span>; <span class='keyword'>co_yield</span> <span class='literal'>2</span>; <span class='curlybracket'>}</span>
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>auto</span> g <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>while</span> <span class='parenthesis'>(</span>g<span class='operator'>.</span>move_next<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> g<span class='operator'>.</span>current_value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> std<span class='operator'>::</span>endl;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='coroutine-12'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7333'>#</a></div><div class='texpara'><div id='coroutine-12.sentence-1' class='sentence'>The coroutine state is destroyed when control flows off the end of the
coroutine or the <span class='texttt'>destroy</span> member
function (<a href='coroutine.handle.resumption' title='17.13.4.6&emsp;Resumption'>[coroutine.<span class='shy'></span>handle.<span class='shy'></span>resumption]</a>)
of a coroutine handle (<a href='coroutine.handle' title='17.13.4&emsp;Class template coroutine_&shy;handle'>[coroutine.<span class='shy'></span>handle]</a>)
that refers to the coroutine
is invoked<a class='hidden_link' href='#coroutine-12.sentence-1'>.</a></div> <div id='coroutine-12.sentence-2' class='sentence'>In the latter case,
control in the coroutine is considered
to be transferred out of the function (<a href='stmt.dcl' title='8.9&emsp;Declaration statement'>[stmt.<span class='shy'></span>dcl]</a>)<a class='hidden_link' href='#coroutine-12.sentence-2'>.</a></div> <div id='coroutine-12.sentence-3' class='sentence'>The storage for the coroutine state is released by calling a
non-array deallocation function (<a href='basic.stc.dynamic.deallocation' title='6.7.6.5.3&emsp;Deallocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>deallocation]</a>)<a class='hidden_link' href='#coroutine-12.sentence-3'>.</a></div> <div id='coroutine-12.sentence-4' class='sentence'>If <span class='texttt'>destroy</span> is called for a coroutine that is not suspended, the
program has undefined behavior<a class='hidden_link' href='#coroutine-12.sentence-4'>.</a></div></div></div><div class='para' id='coroutine-13'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7348'>#</a></div><div class='texpara'><div id='coroutine-13.sentence-1' class='sentence'>The deallocation function's name is looked up by searching for it in the scope of the promise type<a class='hidden_link' href='#coroutine-13.sentence-1'>.</a></div> <div id='coroutine-13.sentence-2' class='sentence'>If nothing is found, a search is performed in the
global scope<a class='hidden_link' href='#coroutine-13.sentence-2'>.</a></div> <div id='coroutine-13.sentence-3' class='sentence'>If both a usual deallocation
function with only a pointer parameter and a usual deallocation function with
both a pointer parameter and a size parameter are found, then the selected deallocation
function shall be the one with two parameters<a class='hidden_link' href='#coroutine-13.sentence-3'>.</a></div> <div id='coroutine-13.sentence-4' class='sentence'>Otherwise, the selected
deallocation function shall be the function with one parameter<a class='hidden_link' href='#coroutine-13.sentence-4'>.</a></div> <div id='coroutine-13.sentence-5' class='sentence'>If no usual
deallocation function is found, the program is ill-formed<a class='hidden_link' href='#coroutine-13.sentence-5'>.</a></div> <div id='coroutine-13.sentence-6' class='sentence'>The selected deallocation function shall be called with the address of the
block of storage to be reclaimed as its first argument<a class='hidden_link' href='#coroutine-13.sentence-6'>.</a></div> <div id='coroutine-13.sentence-7' class='sentence'>If a deallocation
function with a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span> is used, the size of
the block is passed as the corresponding argument<a class='hidden_link' href='#coroutine-13.sentence-7'>.</a></div></div></div><div class='para' id='coroutine-14'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7362'>#</a></div><div class='texpara'><div id='coroutine-14.sentence-1' class='sentence'>When a coroutine is invoked,
a copy is created for each coroutine parameter
at the beginning of the replacement body<a class='hidden_link' href='#coroutine-14.sentence-1'>.</a></div> <div id='coroutine-14.sentence-2' class='sentence'>For a parameter
whose original declaration specified the type <span class='mathit'>cv</span> <span class='texttt'>T</span>,
<ul class='itemize'><li id='coroutine-14.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#coroutine-14.1'>(14.1)</a></div>if <span class='texttt'>T</span> is a reference type,
the copy is a reference of type
<span class='mathit'>cv</span> <span class='texttt'>T</span>
bound to the same object as a parameter;</li><li id='coroutine-14.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#coroutine-14.2'>(14.2)</a></div>otherwise, the copy is a variable
of type <span class='mathit'>cv</span> <span class='texttt'>T</span>
with automatic storage duration that is direct-initialized
from an xvalue of type <span class='texttt'>T</span> referring to the parameter<a class='hidden_link' href='#coroutine-14.sentence-2'>.</a></li></ul></div> <div id='coroutine-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#coroutine-note-3'>3</a></i>:&ensp;<div id='coroutine-14.sentence-3' class='sentence'>An identifier in the <a href='#nt:function-body' title='9.6.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-body_________'><span class='textsf'><i >function-body</i></span></span></a>
that names one of these parameters
refers to the created copy,
not the original parameter (<a href='expr.prim.id.unqual' title='7.5.5.2&emsp;Unqualified names'>[expr.<span class='shy'></span>prim.<span class='shy'></span>id.<span class='shy'></span>unqual]</a>)<a class='hidden_link' href='#coroutine-14.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div><div class='texpara'><div id='coroutine-14.sentence-4' class='sentence'>The initialization and destruction of each parameter copy occurs in the
context of the called coroutine<a class='hidden_link' href='#coroutine-14.sentence-4'>.</a></div> <div id='coroutine-14.sentence-5' class='sentence'>Initializations of parameter copies are sequenced before the call to the
coroutine promise constructor and indeterminately sequenced with respect to
each other<a class='hidden_link' href='#coroutine-14.sentence-5'>.</a></div> <div id='coroutine-14.sentence-6' class='sentence'>The lifetime of parameter copies ends immediately after the lifetime of the
coroutine promise object ends<a class='hidden_link' href='#coroutine-14.sentence-6'>.</a></div> <div id='coroutine-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#coroutine-note-4'>4</a></i>:&ensp;<div id='coroutine-14.sentence-7' class='sentence'>If a coroutine has a parameter passed by reference, resuming the coroutine
after the lifetime of the entity referred to by that parameter has ended is
likely to result in undefined behavior<a class='hidden_link' href='#coroutine-14.sentence-7'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='coroutine-15'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7400'>#</a></div><div class='texpara'><div id='coroutine-15.sentence-1' class='sentence'>If the evaluation of the expression
<span class='texttt'><span class='texttt'><i >promise</i></span><span class='operator'>.</span>unhandled_<span class='shy'></span>exception<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> exits via an exception,
the coroutine is considered suspended at the final suspend point
and the exception propagates to the caller or resumer<a class='hidden_link' href='#coroutine-15.sentence-1'>.</a></div></div></div><div class='para' id='coroutine-16'><div class='marginalizedparent'><a class='marginalized' href='#coroutine-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7406'>#</a></div><div class='texpara'><div id='coroutine-16.sentence-1' class='sentence'>The expression <span id=':co_await'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>await</span></span></span> <span class='texttt'><span class='texttt'><i >promise</i></span><span class='operator'>.</span>final_<span class='shy'></span>suspend<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
shall not be potentially-throwing (<a href='except.spec' title='14.5&emsp;Exception specifications'>[except.<span class='shy'></span>spec]</a>)<a class='hidden_link' href='#coroutine-16.sentence-1'>.</a></div></div></div></div><div id='replace' class='section'><h3 ><a class='secnum' href='#replace' style='min-width:80pt'>9.6.5</a> Replaceable function definitions <a class='abbr_ref' href='dcl.fct.def.replace'>[dcl.fct.def.replace]</a></h3><div class='para' id='replace-1'><div class='marginalizedparent'><a class='marginalized' href='#replace-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2d59c792e2a0228e77a0316d39bde9e51f31d146/source/declarations.tex#L7412'>#</a></div><div class='texpara'><div id='replace-1.sentence-1' class='sentence'>Certain functions
for which a definition is supplied by the implementation
are <a class='hidden_link' href='#def:replaceable' title='9.6.5&emsp;Replaceable function definitions&emsp;[dcl.fct.def.replace]'><span id='def:replaceable'><i >replaceable</i></span></a><a class='hidden_link' href='#replace-1.sentence-1'>.</a></div> <div id='replace-1.sentence-2' class='sentence'>A C++ program may
provide a definition with the signature of a replaceable function,
called a <a class='hidden_link' href='#def:function,replacement' title='9.6.5&emsp;Replaceable function definitions&emsp;[dcl.fct.def.replace]'><span id='def:function,replacement'><i >replacement function</i></span></a><a class='hidden_link' href='#replace-1.sentence-2'>.</a></div> <div id='replace-1.sentence-3' class='sentence'>The replacement function
is used instead of the default version
supplied by the implementation<a class='hidden_link' href='#replace-1.sentence-3'>.</a></div> <div id='replace-1.sentence-4' class='sentence'>Such replacement occurs
prior to program startup (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>, <a href='basic.start' title='6.9.3&emsp;Start and termination'>[basic.<span class='shy'></span>start]</a>)<a class='hidden_link' href='#replace-1.sentence-4'>.</a></div> <div id='replace-1.sentence-5' class='sentence'>A declaration of the replacement function
<ul class='itemize'><li id='replace-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#replace-1.1'>(1.1)</a></div>shall not be inline,</li><li id='replace-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#replace-1.2'>(1.2)</a></div>shall be attached to the global module,</li><li id='replace-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#replace-1.3'>(1.3)</a></div>shall have C++ language linkage,</li><li id='replace-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#replace-1.4'>(1.4)</a></div>shall have the same return type as the replaceable function, and</li><li id='replace-1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#replace-1.5'>(1.5)</a></div>if the function is declared in a standard library header,
shall be such that it would be valid as a redeclaration
of the declaration in that header;</li></ul>
no diagnostic is required<a class='hidden_link' href='#replace-1.sentence-5'>.</a></div> <div id='replace-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#replace-note-1'>1</a></i>:&ensp;<div id='replace-1.sentence-6' class='sentence'>The one-definition rule (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>))
applies to the definitions of a replaceable function
provided by the program<a class='hidden_link' href='#replace-1.sentence-6'>.</a></div> <div id='replace-1.sentence-7' class='sentence'>The implementation-supplied function definition
is an otherwise-unnamed function with no linkage<a class='hidden_link' href='#replace-1.sentence-7'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></div></body></html>