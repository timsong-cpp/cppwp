<!DOCTYPE html><html lang='en'><head><title>[temp.res]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>17</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>17.7</a> Name resolution <a class='abbr_ref'>[temp.res]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L3924'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':overloading,resolution,template_name'></a></span><span class='indexparent'><a class='index' id=':lookup,template_name'></a></span>Three kinds of names can be used within a template definition:</div><div id='1.sentence-2' class='sentence'><ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.1'>(1.1)</a></div><div id='1.1.sentence-1' class='sentence'>The name of the template itself,
and names declared within the template itself<a class='hidden_link' href='#1.1.sentence-1'>.</a></div></li><li id='1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.2'>(1.2)</a></div><div id='1.2.sentence-1' class='sentence'>Names dependent on a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i> (<a href='temp.dep'>[temp.dep]</a>)<a class='hidden_link' href='#1.2.sentence-1'>.</a></div></li><li id='1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#1.3'>(1.3)</a></div><div id='1.3.sentence-1' class='sentence'>Names from scopes which are visible within the template definition<a class='hidden_link' href='#1.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L3940'>#</a></div><div id='2.sentence-1' class='sentence'>A name used in a template declaration or definition and that is
dependent on a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
is assumed not to name a type unless
the applicable name lookup finds a type name or the name
is qualified by the keyword
<span class='texttt'>typename</span><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// no <span class='tcode_in_codeblock'>B</span> declared here
</span>
class X;

template&lt;class T&gt; class Y {
  class Z;                      <span class='comment'>// forward declaration of member class
</span>
  void f() {
    X* a1;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>X</span>
</span>    T* a2;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>T</span>
</span>    Y* a3;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>Y&lt;T&gt;</span>
</span>    Z* a4;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>Z</span>
</span>    typedef typename T::A TA;
    TA* a5;                     <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>T</span>'s <span class='tcode_in_codeblock'>A</span>
</span>    typename T::A* a6;          <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>T</span>'s <span class='tcode_in_codeblock'>A</span>
</span>    T::A* a7;                   <span class='comment'>// <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;A</span> is not a type name:
</span>                                <span class='comment'>// multiplication of <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;A</span> by <span class='tcode_in_codeblock'>a7</span>; ill-formed, no visible declaration of <span class='tcode_in_codeblock'>a7</span>
</span>    B* a8;                      <span class='comment'>// <span class='tcode_in_codeblock'>B</span> is not a type name:
</span>                                <span class='comment'>// multiplication of <span class='tcode_in_codeblock'>B</span> by <span class='tcode_in_codeblock'>a8</span>; ill-formed, no visible declarations of <span class='tcode_in_codeblock'>B</span> and <span class='tcode_in_codeblock'>a8</span>
</span>  }
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L3975'>#</a></div><div id='3.sentence-1' class='sentence'>When a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> is intended to refer to a type
that is not a member of the current instantiation (<a href='temp.dep.type'>[temp.dep.type]</a>)
and its <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
refers to a dependent type,
it shall be
prefixed by the keyword <span class='texttt'>typename</span>, forming a
<i ><a href='temp.res#nt:typename-specifier'>typename-specifier</a></i><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>If the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> in a <i ><a href='temp.res#nt:typename-specifier'>typename-specifier</a></i>
does not denote a type
or a class template,
the program is ill-formed<a class='hidden_link' href='#3.sentence-2'>.</a></div><pre class='bnf'><a class='nontermdef' id='nt:typename-specifier'>typename-specifier:</a>
&#9;<span class='terminal'>typename</span> <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> <i ><a href='lex.name#nt:identifier'>identifier</a></i>
&#9;<span class='terminal'>typename</span> <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> <span class='terminal'>template<span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
</pre></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L3994'>#</a></div><div id='4.sentence-1' class='sentence'>If a specialization of a template is instantiated for a set of
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
such that the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
prefixed by
<span class='texttt'>typename</span>
does not denote a type
or a class template,
the specialization is ill-formed<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>The usual <a href='basic.lookup.qual'>qualified name lookup</a> is used to find the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
even in the presence of
<span class='texttt'>typename</span><a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  struct X { };
  int X;
};
struct B {
  struct X { };
};
template&lt;class T&gt; void f(T t) {
  typename T::X x;
}
void foo() {
  A a;
  B b;
  f(b);             <span class='comment'>// OK: <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;X</span> refers to <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;X</span>
</span>  f(a);             <span class='comment'>// error: <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;X</span> refers to the data member <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X</span> not the struct <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4030'>#</a></div><div id='5.sentence-1' class='sentence'>A qualified name used as the name in a
<i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i> (<a href='class.derived'>[class.derived]</a>)
or an
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i>
is implicitly assumed to name a type, without the use of the
<span class='texttt'>typename</span>
keyword<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>In a <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> that immediately contains a <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
that depends on a template parameter, the <i ><a href='lex.name#nt:identifier'>identifier</a></i> or <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
is implicitly assumed to name a type, without the use of the <span class='texttt'>typename</span> keyword<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='5.sentence-3' class='sentence'>The
<span class='texttt'>typename</span>
keyword is not permitted by the syntax of these constructs<a class='hidden_link' href='#5.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4047'>#</a></div><div id='6.sentence-1' class='sentence'>If, for a given set of template arguments, a specialization of a template is
instantiated
that refers to a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
that denotes a type
or a class template,
and the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> refers to a member of an unknown specialization,
the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> shall either be
prefixed by <span class='texttt'>typename</span> or shall be used in a context in which it
implicitly names a type as described above<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; void f(int i) {
  T::x * i;         <span class='comment'>// <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;x</span> must not be a type
</span>}

struct Foo {
  typedef int x;
};

struct Bar {
  static int const x = 5;
};

int main() {
  f&lt;Bar&gt;(1);        <span class='comment'>// OK
</span>  f&lt;Foo&gt;(1);        <span class='comment'>// error: <span class='tcode_in_codeblock'>Foo&#x200b;::&#x200b;x</span> is a type
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4079'>#</a></div><div id='7.sentence-1' class='sentence'>Within the definition of a class template or within the definition of a
member of a class template following the <i ><a href='dcl.decl#nt:declarator-id'>declarator-id</a></i>, the keyword
<span class='texttt'>typename</span>
is not required when referring to the name of a previously
declared member of the class template that declares a type
or a class template<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='7.sentence-2' class='sentence'>Such names can be found using <a href='basic.lookup.unqual'>unqualified name lookup</a>,
class member lookup (<a href='class.qual'>[class.qual]</a>) into the <a href='temp.dep.type#def:current_instantiation'>current instantiation</a>,
or class member access expression lookup (<a href='basic.lookup.classref'>[basic.lookup.classref]</a>) when the
type of the object expression is the current instantiation (<a href='temp.dep.expr'>[temp.dep.expr]</a>)<a class='hidden_link' href='#7.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  typedef int B;
  B b;              <span class='comment'>// OK, no typename required
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4101'>#</a></div><div id='8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':checking,syntax'></a></span><span class='indexparent'><a class='index' id=':checking,point_of_error'></a></span>Knowing which names are type names allows the syntax of every template
to be checked<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>The program is ill-formed, no diagnostic required, if:</div><div id='8.sentence-3' class='sentence'><ul class='itemize'><li id='8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.1'>(8.1)</a></div><div id='8.1.sentence-1' class='sentence'>no valid specialization can be generated for a template
or a substatement of a <a href='stmt.if#def:constexpr_if'>constexpr if</a> statement within a template
and the template is not instantiated, or</div></li><li id='8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.2'>(8.2)</a></div><div id='8.2.sentence-1' class='sentence'>no substitution of template arguments
into a <i ><a href='temp.param#nt:partial-concept-id'>partial-concept-id</a></i> or <i ><a href='temp#nt:requires-clause'>requires-clause</a></i>
would result in a valid expression, or</div></li><li id='8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.3'>(8.3)</a></div><div id='8.3.sentence-1' class='sentence'>every valid specialization of a variadic template requires an empty template
parameter pack, or</div></li><li id='8.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.4'>(8.4)</a></div><div id='8.4.sentence-1' class='sentence'>a hypothetical instantiation of a template
immediately following its definition
would be ill-formed
due to a construct that does not depend on a template parameter, or</div></li><li id='8.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#8.5'>(8.5)</a></div><div id='8.5.sentence-1' class='sentence'>the interpretation of such a construct
in the hypothetical instantiation
is different from
the interpretation of the corresponding construct
in any actual instantiation of the template<a class='hidden_link' href='#8.5.sentence-1'>.</a></div> <div id='8.5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#8.5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='8.5.sentence-2' class='sentence'>This can happen in situations including the following:
<ul class='itemize'><li id='8.5.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#8.5.1'>(8.5.1)</a></div><div id='8.5.1.sentence-1' class='sentence'>a type used in a non-dependent name is incomplete at the point at which a
template is defined but is complete at the point at which an instantiation is
performed, or</div></li><li id='8.5.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#8.5.2'>(8.5.2)</a></div><div id='8.5.2.sentence-1' class='sentence'>lookup for a name in the template definition found a <span class='grammarterm'>using-declaration</span>,
but the lookup in the corresponding scope in the instantiation
does not find any declarations because the <span class='grammarterm'>using-declaration</span>
was a pack expansion and the corresponding pack is empty, or</div></li><li id='8.5.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#8.5.3'>(8.5.3)</a></div><div id='8.5.3.sentence-1' class='sentence'>an instantiation uses a default argument or default template argument
that had not been defined at the point at which the template was defined, or</div></li><li id='8.5.4'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#8.5.4'>(8.5.4)</a></div><div id='8.5.4.sentence-1' class='sentence'><a href='expr.const'>constant expression evaluation</a> within the template
instantiation uses
  <ul class='itemize'><li id='8.5.4.1'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#8.5.4.1'>(8.5.4.1)</a></div><div id='8.5.4.1.sentence-1' class='sentence'>
  the value of a <span class='texttt'>const</span> object of integral or unscoped enumeration type or</div></li><li id='8.5.4.2'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#8.5.4.2'>(8.5.4.2)</a></div><div id='8.5.4.2.sentence-1' class='sentence'>the value of a <span class='texttt'>constexpr</span> object or</div></li><li id='8.5.4.3'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#8.5.4.3'>(8.5.4.3)</a></div><div id='8.5.4.3.sentence-1' class='sentence'>the value of a reference or</div></li><li id='8.5.4.4'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#8.5.4.4'>(8.5.4.4)</a></div><div id='8.5.4.4.sentence-1' class='sentence'>the definition of a constexpr function,</div></li></ul>
and that entity was not defined when the template was defined, or</div></li><li id='8.5.5'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#8.5.5'>(8.5.5)</a></div><div id='8.5.5.sentence-1' class='sentence'>a class template specialization or variable template specialization that
is specified by a non-dependent <span class='grammarterm'>simple-template-id</span> is used by
the template, and either it is instantiated from a partial specialization that
was not defined when the template was defined or it names an explicit
specialization that was not declared when the template was defined<a class='hidden_link' href='#8.5.5.sentence-1'>.</a></div></li></ul></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul></div><div id='8.sentence-4' class='sentence'>Otherwise, no diagnostic shall be issued for a template
for which a valid specialization can be generated<a class='hidden_link' href='#8.sentence-4'>.</a></div> <div id='8.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#8.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='8.sentence-5' class='sentence'>If a template is instantiated, errors will be diagnosed according
to the other rules in this International Standard<a class='hidden_link' href='#8.sentence-5'>.</a></div> <div id='8.sentence-6' class='sentence'>Exactly when these errors are diagnosed is a quality of implementation issue<a class='hidden_link' href='#8.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
int j;
template&lt;class T&gt; class X {
  void f(T t, int i, char* p) {
    t = i;          <span class='comment'>// diagnosed if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f</span> is instantiated, and the assignment to <span class='tcode_in_codeblock'>t</span> is an error
</span>    p = i;          <span class='comment'>// may be diagnosed even if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f</span> is not instantiated
</span>    p = j;          <span class='comment'>// may be diagnosed even if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f</span> is not instantiated
</span>  }
  void g(T t) {
    +;              <span class='comment'>// may be diagnosed even if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;g</span> is not instantiated
</span>  }
};

template&lt;class... T&gt; struct A {
  void operator++(int, T... t);                     <span class='comment'>// error: too many parameters
</span>};
template&lt;class... T&gt; union X : T... { };            <span class='comment'>// error: union with base class
</span>template&lt;class... T&gt; struct A : T...,  T... { };    <span class='comment'>// error: duplicate base class
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4195'>#</a></div><div id='9.sentence-1' class='sentence'>When looking for the declaration of a name used in a template definition,
the usual lookup rules (<a href='basic.lookup.unqual'>[basic.lookup.unqual]</a>, <a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>)
are used for non-dependent names<a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='9.sentence-2' class='sentence'>The lookup of names dependent on the template parameters
is postponed until the actual template argument is known (<a href='temp.dep'>[temp.dep]</a>)<a class='hidden_link' href='#9.sentence-2'>.</a></div> <div id='9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
#include &lt;iostream&gt;
using namespace std;

template&lt;class T&gt; class Set {
  T* p;
  int cnt;
public:
  Set();
  Set&lt;T&gt;(const Set&lt;T&gt;&amp;);
  void printall() {
    for (int i = 0; i&lt;cnt; i++)
      cout &lt;&lt; p[i] &lt;&lt; '\n';
  }
};</pre><div id='9.sentence-3' class='sentence'>in the example,
<span class='texttt'>i</span>
is the local variable
<span class='texttt'>i</span>
declared in
<span class='texttt'>printall</span>,
<span class='texttt'>cnt</span>
is the member
<span class='texttt'>cnt</span>
declared in
<span class='texttt'>Set</span>,
and
<span class='texttt'>cout</span>
is the standard output stream declared in
<span class='texttt'>iostream</span><a class='hidden_link' href='#9.sentence-3'>.</a></div> <div id='9.sentence-4' class='sentence'>However, not every declaration can be found this way; the resolution of
some names must be postponed
until the actual
<span class='grammarterm'>template-argument</span><span class='textit'>s</span>
are known<a class='hidden_link' href='#9.sentence-4'>.</a></div> <div id='9.sentence-5' class='sentence'>For example, even though the name
<span class='texttt'>operator&lt;&lt;</span>
is known within the definition of
<span class='texttt'>printall()</span>
and a declaration of it can be found in
<span class='texttt'>&lt;iostream&gt;</span>,
the actual declaration of
<span class='texttt'>operator&lt;&lt;</span>
needed to print
<span class='texttt'>p[i]</span>
cannot be known until it is known what type
<span class='texttt'>T</span>
is (<a href='temp.dep'>[temp.dep]</a>)<a class='hidden_link' href='#9.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4255'>#</a></div><div id='10.sentence-1' class='sentence'>If a name does not depend on a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
(as defined in <a href='temp.dep'>[temp.dep]</a>), a declaration (or set of declarations) for that
name shall be in scope at the point where the name appears in the template
definition; the name is bound to the declaration (or declarations) found
at that point and this binding is not affected by declarations that are
visible at the point of instantiation<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
void f(char);

template&lt;class T&gt; void g(T t) {
  f(1);             <span class='comment'>// <span class='tcode_in_codeblock'>f(char)</span>
</span>  f(T(1));          <span class='comment'>// dependent
</span>  f(t);             <span class='comment'>// dependent
</span>  dd++;             <span class='comment'>// not dependent; error: declaration for <span class='tcode_in_codeblock'>dd</span> not found
</span>}

enum E { e };
void f(E);

double dd;
void h() {
  g(e);             <span class='comment'>// will cause one call of <span class='tcode_in_codeblock'>f(char)</span> followed by two calls of <span class='tcode_in_codeblock'>f(E)</span>
</span>  g('a');           <span class='comment'>// will cause three calls of <span class='tcode_in_codeblock'>f(char)</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4286'>#</a></div><div id='11.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='11.sentence-1' class='sentence'>For purposes of name lookup, default arguments and
<span class='grammarterm'>noexcept-specifier</span><span class='textit'>s</span> of function templates and default
arguments and <span class='grammarterm'>noexcept-specifier</span><span class='textit'>s</span> of
member functions of class templates are considered definitions (<a href='temp.decls'>[temp.decls]</a>)<a class='hidden_link' href='#11.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='temp.local' class='section'><h3 ><a class='secnum' href='#temp.local' style='min-width:103pt'>17.7.1</a> Locally declared names <a class='abbr_ref' href='temp.local'>[temp.local]</a></h3><div class='para' id='temp.local-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4296'>#</a></div><div id='temp.local-1.sentence-1' class='sentence'>Like normal (non-template) classes, class templates have an
<a href='class#def:injected-class-name'>injected-class-name</a><a class='hidden_link' href='#temp.local-1.sentence-1'>.</a></div> <div id='temp.local-1.sentence-2' class='sentence'>The
injected-class-name can be used
as a <i ><a href='temp.names#nt:template-name'>template-name</a></i> or a <i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i><a class='hidden_link' href='#temp.local-1.sentence-2'>.</a></div> <div id='temp.local-1.sentence-3' class='sentence'>When it is used with a
<i ><a href='temp.names#nt:template-argument-list'>template-argument-list</a></i>,
as a <i ><a href='temp.names#nt:template-argument'>template-argument</a></i> for a template <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>,
or as the final identifier in the <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> of
a friend class template declaration,
it refers to the
class template itself<a class='hidden_link' href='#temp.local-1.sentence-3'>.</a></div> <div id='temp.local-1.sentence-4' class='sentence'>Otherwise, it is equivalent to the <i ><a href='temp.names#nt:template-name'>template-name</a></i>
followed by the <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i><span class='textit'>s</span> of the class template
enclosed in <span class='texttt'>&lt;&gt;</span><a class='hidden_link' href='#temp.local-1.sentence-4'>.</a></div></div><div class='para' id='temp.local-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4312'>#</a></div><div id='temp.local-2.sentence-1' class='sentence'>Within the scope of a class template specialization or
partial specialization, when the injected-class-name is
used as a <i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i>,
it is equivalent to the <i ><a href='temp.names#nt:template-name'>template-name</a></i> followed by the
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i><span class='textit'>s</span>
of the class template specialization or partial
specialization enclosed in
<span class='texttt'>&lt;&gt;</span><a class='hidden_link' href='#temp.local-2.sentence-1'>.</a></div> <div id='temp.local-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.local-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;template&lt;class&gt; class T&gt; class A { };
template&lt;class T&gt; class Y;
template&lt;&gt; class Y&lt;int&gt; {
  Y* p;                               <span class='comment'>// meaning <span class='tcode_in_codeblock'>Y&lt;int&gt;</span>
</span>  Y&lt;char&gt;* q;                         <span class='comment'>// meaning <span class='tcode_in_codeblock'>Y&lt;char&gt;</span>
</span>  A&lt;Y&gt;* a;                            <span class='comment'>// meaning <span class='tcode_in_codeblock'>A&lt;&#x200b;::&#x200b;Y&gt;</span>
</span>  class B {
    template&lt;class&gt; friend class Y;   <span class='comment'>// meaning <span class='tcode_in_codeblock'>&#x200b;::&#x200b;Y</span>
</span>  };
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.local-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4336'>#</a></div><div id='temp.local-3.sentence-1' class='sentence'>The injected-class-name of a class template or class
template specialization can be used either
as a <i ><a href='temp.names#nt:template-name'>template-name</a></i> or a <i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i>
wherever it is in scope<a class='hidden_link' href='#temp.local-3.sentence-1'>.</a></div> <div id='temp.local-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.local-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct Base {
  Base* p;
};

template &lt;class T&gt; struct Derived: public Base&lt;T&gt; {
  typename Derived::Base* p;    <span class='comment'>// meaning <span class='tcode_in_codeblock'>Derived&#x200b;::&#x200b;Base&lt;T&gt;</span>
</span>};

template&lt;class T, template&lt;class&gt; class U = T::template Base&gt; struct Third { };
Third&lt;Base&lt;int&gt; &gt; t;            <span class='comment'>// OK: default argument uses injected-class-name as a template
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.local-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4357'>#</a></div><div id='temp.local-4.sentence-1' class='sentence'>A lookup that finds an injected-class-name (<a href='class.member.lookup'>[class.member.lookup]</a>) can result in an ambiguity in
certain cases (for example, if it is found in more than one
base class)<a class='hidden_link' href='#temp.local-4.sentence-1'>.</a></div> <div id='temp.local-4.sentence-2' class='sentence'>If all of the injected-class-names that are
found refer to specializations of the same class template,
and if the name
is used as a <i ><a href='temp.names#nt:template-name'>template-name</a></i>,
the reference refers to the class template itself and not a
specialization thereof, and is not ambiguous<a class='hidden_link' href='#temp.local-4.sentence-2'>.</a></div> <div id='temp.local-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.local-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct Base { };
template &lt;class T&gt; struct Derived: Base&lt;int&gt;, Base&lt;char&gt; {
  typename Derived::Base b;             <span class='comment'>// error: ambiguous
</span>  typename Derived::Base&lt;double&gt; d;     <span class='comment'>// OK
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.local-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4378'>#</a></div><div id='temp.local-5.sentence-1' class='sentence'>When the normal name of the template (i.e., the name from
the enclosing scope, not the injected-class-name) is
used,
it always refers to the class template itself and not a
specialization of the template.
<div id='temp.local-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.local-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class X {
  X* p;             <span class='comment'>// meaning <span class='tcode_in_codeblock'>X&lt;T&gt;</span>
</span>  X&lt;T&gt;* p2;
  X&lt;int&gt;* p3;
  ::X* p4;          <span class='comment'>// error: missing template argument list
</span>                    <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;X</span> does not refer to the injected-class-name
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='temp.local-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4397'>#</a></div><div id='temp.local-6.sentence-1' class='sentence'>A
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
shall not be redeclared within its scope (including nested scopes)<a class='hidden_link' href='#temp.local-6.sentence-1'>.</a></div> <div id='temp.local-6.sentence-2' class='sentence'>A
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
shall not have the same name as the template name<a class='hidden_link' href='#temp.local-6.sentence-2'>.</a></div> <div id='temp.local-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.local-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T, int i&gt; class Y {
  int T;            <span class='comment'>// error: template-parameter redeclared
</span>  void f() {
    char T;         <span class='comment'>// error: template-parameter redeclared
</span>  }
};

template&lt;class X&gt; class X;      <span class='comment'>// error: template-parameter redeclared
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.local-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4418'>#</a></div><div id='temp.local-7.sentence-1' class='sentence'>In the definition of a member of
a class template that appears outside of the class template definition,
the name of a member of the class template hides the name of a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
of any enclosing class templates (but not a <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i> of the
member if the member is a class or function template)<a class='hidden_link' href='#temp.local-7.sentence-1'>.</a></div> <div id='temp.local-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.local-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  struct B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
  typedef void C;
  void f();
  template&lt;class U&gt; void g(U);
};

template&lt;class B&gt; void A&lt;B&gt;::f() {
  B b;              <span class='comment'>// <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>B</span>, not the template parameter
</span>}

template&lt;class B&gt; template&lt;class C&gt; void A&lt;B&gt;::g(C) {
  B b;              <span class='comment'>// <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>B</span>, not the template parameter
</span>  C c;              <span class='comment'>// the template parameter <span class='tcode_in_codeblock'>C</span>, not <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>C</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.local-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4446'>#</a></div><div id='temp.local-8.sentence-1' class='sentence'>In the definition of a member of a class template that appears outside of the
namespace containing the class template definition,
the name of a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
hides the name of a member of this namespace<a class='hidden_link' href='#temp.local-8.sentence-1'>.</a></div> <div id='temp.local-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.local-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
namespace N {
  class C { };
  template&lt;class T&gt; class B {
    void f(T);
  };
}
template&lt;class C&gt; void N::B&lt;C&gt;::f(C) {
  C b;              <span class='comment'>// <span class='tcode_in_codeblock'>C</span> is the template parameter, not <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;C</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.local-9'><div class='marginalizedparent'><a class='marginalized' href='#temp.local-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4467'>#</a></div><div id='temp.local-9.sentence-1' class='sentence'>In the definition of a class template or in the definition of a member of such
a template that appears outside of the template definition,
for each non-dependent base class (<a href='temp.dep.type'>[temp.dep.type]</a>),
if the name of the base class
or the name of a member of the
base class is the same as the name of a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>,
the base class name or member name <a href='basic.scope.hiding'>hides</a> the
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
name<a class='hidden_link' href='#temp.local-9.sentence-1'>.</a></div> <div id='temp.local-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.local-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  struct B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
  int a;
  int Y;
};

template&lt;class B, class a&gt; struct X : A {
  B b;              <span class='comment'>// <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>B</span>
</span>  a b;              <span class='comment'>// error: <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>a</span> isn't a type name
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='temp.dep' class='section'><h3 ><a class='secnum' href='#temp.dep' style='min-width:103pt'>17.7.2</a> Dependent names <a class='abbr_ref' href='temp.dep'>[temp.dep]</a></h3><div class='para' id='temp.dep-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4496'>#</a></div><div id='temp.dep-1.sentence-1' class='sentence'>Inside a template, some constructs have semantics which may differ from one
instantiation to another<a class='hidden_link' href='#temp.dep-1.sentence-1'>.</a></div> <div id='temp.dep-1.sentence-2' class='sentence'>Such a construct
depends
on the template parameters<a class='hidden_link' href='#temp.dep-1.sentence-2'>.</a></div> <div id='temp.dep-1.sentence-3' class='sentence'>In particular, types and expressions may depend on the type
and/or
value of
template parameters (as determined by the template arguments) and this determines
the context for name lookup for certain names<a class='hidden_link' href='#temp.dep-1.sentence-3'>.</a></div> <div id='temp.dep-1.sentence-4' class='sentence'>An expressions may be
<a class='hidden_link' href='#def:expression,type-dependent' id='def:expression,type-dependent'><i >type-dependent</i></a>
(that is, its type may depend on a template parameter) or
<a class='hidden_link' href='#def:expression,value-dependent' id='def:expression,value-dependent'><i >value-dependent</i></a>
(that is, its value when evaluated as a constant expression (<a href='expr.const'>[expr.const]</a>)
may depend on a template parameter)
as described in this subclause<a class='hidden_link' href='#temp.dep-1.sentence-4'>.</a></div> <div id='temp.dep-1.sentence-5' class='sentence'>In an expression of the form:</div><pre class='ncbnftab'><i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> <span class='terminal'>(</span> <i ><a href='expr.post#nt:expression-list'>expression-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>)</span>
</pre><div id='temp.dep-1.sentence-6' class='sentence'>where the
<i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i>
is an
<i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>,
the
<i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>
denotes a
<a class='hidden_link' href='#def:name,dependent' id='def:name,dependent'><i >dependent name</i></a>
if</div><div id='temp.dep-1.sentence-7' class='sentence'><ul class='itemize'><li id='temp.dep-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep-1.1'>(1.1)</a></div><div id='temp.dep-1.1.sentence-1' class='sentence'>any of the expressions in the <i ><a href='expr.post#nt:expression-list'>expression-list</a></i> is a
<a href='temp.variadic#def:pack_expansion'>pack expansion</a>,</div></li><li id='temp.dep-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep-1.2'>(1.2)</a></div><div id='temp.dep-1.2.sentence-1' class='sentence'>any of the expressions
or <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i><span class='textit'>s</span>
in the
<i ><a href='expr.post#nt:expression-list'>expression-list</a></i>
is <a href='temp.dep.expr'>type-dependent</a>, or</div></li><li id='temp.dep-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep-1.3'>(1.3)</a></div><div id='temp.dep-1.3.sentence-1' class='sentence'>the <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>
is a <i ><a href='temp.names#nt:template-id'>template-id</a></i> in which any of the template arguments depends
on a template parameter<a class='hidden_link' href='#temp.dep-1.3.sentence-1'>.</a></div></li></ul></div><div id='temp.dep-1.sentence-8' class='sentence'>If an operand of an operator is a type-dependent expression, the operator
also denotes a dependent name<a class='hidden_link' href='#temp.dep-1.sentence-8'>.</a></div> <div id='temp.dep-1.sentence-9' class='sentence'>Such names are unbound and
are looked up at the point of the template instantiation (<a href='temp.point'>[temp.point]</a>) in
both the context of the template definition and the
context of the point of instantiation<a class='hidden_link' href='#temp.dep-1.sentence-9'>.</a></div></div><div class='para' id='temp.dep-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4557'>#</a></div><div id='temp.dep-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.dep-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct X : B&lt;T&gt; {
  typename T::A* pa;
  void f(B&lt;T&gt;* pb) {
    static int i = B&lt;T&gt;::i;
    pb-&gt;j++;
  }
};</pre><div id='temp.dep-2.sentence-1' class='sentence'>the base class name
<span class='texttt'>B&lt;T&gt;</span>,
the type name
<span class='texttt'>T&#x200b;::&#x200b;A</span>,
the names
<span class='texttt'>B&lt;T&gt;&#x200b;::&#x200b;i</span>
and
<span class='texttt'>pb-&gt;j</span>
explicitly depend on the
<span class='grammarterm'>template-parameter</span><a class='hidden_link' href='#temp.dep-2.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.dep-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4581'>#</a></div><div id='temp.dep-3.sentence-1' class='sentence'>In the definition of a class or class template,
the scope of a <a href='temp.dep.type#def:base_class,dependent'>dependent base class</a>
is not examined during unqualified
name lookup either at the point of definition of the
class template or member or during an instantiation of
the class template or member<a class='hidden_link' href='#temp.dep-3.sentence-1'>.</a></div> <div id='temp.dep-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.dep-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
typedef double A;
template&lt;class T&gt; class B {
  typedef int A;
};
template&lt;class T&gt; struct X : B&lt;T&gt; {
  A a;              <span class='comment'>// <span class='tcode_in_codeblock'>a</span> has type <span class='tcode_in_codeblock'>double</span>
</span>};</pre><div id='temp.dep-3.sentence-2' class='sentence'>The type name
<span class='texttt'>A</span>
in the definition of
<span class='texttt'>X&lt;T&gt;</span>
binds to the typedef name defined in the global
namespace scope, not to the typedef name
defined in the base class
<span class='texttt'>B&lt;T&gt;</span><a class='hidden_link' href='#temp.dep-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='temp.dep-3.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.dep-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  struct B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
  int a;
  int Y;
};

int a;

template&lt;class T&gt; struct Y : T {
  struct B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
  B b;                          <span class='comment'>// The <span class='tcode_in_codeblock'>B</span> defined in <span class='tcode_in_codeblock'>Y</span>
</span>  void f(int i) { a = i; }      <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;a</span>
</span>  Y* p;                         <span class='comment'>// <span class='tcode_in_codeblock'>Y&lt;T&gt;</span>
</span>};

Y&lt;A&gt; ya;</pre><div id='temp.dep-3.sentence-3' class='sentence'>The members
<span class='texttt'>A&#x200b;::&#x200b;B</span>,
<span class='texttt'>A&#x200b;::&#x200b;a</span>,
and
<span class='texttt'>A&#x200b;::&#x200b;Y</span>
of the template argument
<span class='texttt'>A</span>
do not affect the binding of names in
<span class='texttt'>Y&lt;A&gt;</span><a class='hidden_link' href='#temp.dep-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='temp.dep.type' class='section'><h4 ><a class='secnum' href='#temp.dep.type' style='min-width:118pt'>17.7.2.1</a> Dependent types <a class='abbr_ref' href='temp.dep.type'>[temp.dep.type]</a></h4><div class='para' id='temp.dep.type-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4643'>#</a></div><div id='temp.dep.type-1.sentence-1' class='sentence'>A name refers to the
<a class='hidden_link' href='#def:current_instantiation' id='def:current_instantiation'><i >current instantiation</i></a>
if it is</div><div id='temp.dep.type-1.sentence-2' class='sentence'><ul class='itemize'><li id='temp.dep.type-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-1.1'>(1.1)</a></div><div id='temp.dep.type-1.1.sentence-1' class='sentence'>in the definition of a class template, a nested class of a class template,
a member of a class template, or a member of a nested class of a class template,
the <a href='class#def:injected-class-name'>injected-class-name</a> of the class template or nested class,</div></li><li id='temp.dep.type-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-1.2'>(1.2)</a></div><div id='temp.dep.type-1.2.sentence-1' class='sentence'>in the definition of a primary class template
or a member of a primary class template, the name of the
class template followed by the template argument list of the
primary template (as described below) enclosed in
<span class='texttt'>&lt;&gt;</span> (or an equivalent template alias specialization),</div></li><li id='temp.dep.type-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-1.3'>(1.3)</a></div><div id='temp.dep.type-1.3.sentence-1' class='sentence'>in the definition of a nested class of a class template,
the name of the nested class referenced as a member of the
current instantiation, or</div></li><li id='temp.dep.type-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-1.4'>(1.4)</a></div><div id='temp.dep.type-1.4.sentence-1' class='sentence'>in the definition of a partial specialization
or a member of a partial specialization, the name of
the class template followed by the template argument list of
the partial specialization enclosed in
<span class='texttt'>&lt;&gt;</span> (or an equivalent template alias specialization)<a class='hidden_link' href='#temp.dep.type-1.4.sentence-1'>.</a></div> <div id='temp.dep.type-1.4.sentence-2' class='sentence'>If the <span class='textit'>n</span>th template parameter is
a parameter pack, the <span class='textit'>n</span>th template argument is a
<a href='temp.variadic#def:pack_expansion'>pack expansion</a> whose pattern is the name of
the parameter pack<a class='hidden_link' href='#temp.dep.type-1.4.sentence-2'>.</a></div></li></ul></div></div><div class='para' id='temp.dep.type-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4675'>#</a></div><div id='temp.dep.type-2.sentence-1' class='sentence'>The template argument list of a primary template is a
template argument list in which the
<span class='textit'>n</span>th
template argument has the value of the
<span class='textit'>n</span>th
template parameter of the class template<a class='hidden_link' href='#temp.dep.type-2.sentence-1'>.</a></div> <div id='temp.dep.type-2.sentence-2' class='sentence'>If the <span class='textit'>n</span>th template parameter is a
<a href='temp.variadic#def:template_parameter_pack'>template parameter pack</a>, the <span class='textit'>n</span>th template argument is a
<a href='temp.variadic#def:pack_expansion'>pack expansion</a> whose pattern is the name of
the template parameter pack<a class='hidden_link' href='#temp.dep.type-2.sentence-2'>.</a></div></div><div class='para' id='temp.dep.type-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4687'>#</a></div><div id='temp.dep.type-3.sentence-1' class='sentence'>A template argument that is equivalent to a template
parameter (i.e., has the same constant value or the same type
as the template parameter) can be used in place of that
template parameter in a reference to the current
instantiation. In the case of a non-type template argument,
the argument must have been given the value of the
template parameter and not an expression in which the
template parameter appears as a subexpression.
<div id='temp.dep.type-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.dep.type-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; class A {
  A* p1;                        <span class='comment'>// <span class='tcode_in_codeblock'>A</span> is the current instantiation
</span>  A&lt;T&gt;* p2;                     <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;</span> is the current instantiation
</span>  A&lt;T*&gt; p3;                     <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T*&gt;</span> is not the current instantiation
</span>  ::A&lt;T&gt;* p4;                   <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;A&lt;T&gt;</span> is the current instantiation
</span>  class B {
    B* p1;                      <span class='comment'>// <span class='tcode_in_codeblock'>B</span> is the current instantiation
</span>    A&lt;T&gt;::B* p2;                <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;B</span> is the current instantiation
</span>    typename A&lt;T*&gt;::B* p3;      <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T*&gt;&#x200b;::&#x200b;B</span> is not the current instantiation
</span>  };
};

template &lt;class T&gt; class A&lt;T*&gt; {
  A&lt;T*&gt;* p1;                    <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T*&gt;</span> is the current instantiation
</span>  A&lt;T&gt;* p2;                     <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;</span> is not the current instantiation
</span>};

template &lt;class T1, class T2, int I&gt; struct B {
  B&lt;T1, T2, I&gt;* b1;             <span class='comment'>// refers to the current instantiation
</span>  B&lt;T2, T1, I&gt;* b2;             <span class='comment'>// not the current instantiation
</span>  typedef T1 my_T1;
  static const int my_I = I;
  static const int my_I2 = I+0;
  static const int my_I3 = my_I;
  B&lt;my_T1, T2, my_I&gt;* b3;       <span class='comment'>// refers to the current instantiation
</span>  B&lt;my_T1, T2, my_I2&gt;* b4;      <span class='comment'>// not the current instantiation
</span>  B&lt;my_T1, T2, my_I3&gt;* b5;      <span class='comment'>// refers to the current instantiation
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div class='para' id='temp.dep.type-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4729'>#</a></div><div id='temp.dep.type-4.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:base_class,dependent' id='def:base_class,dependent'><i >dependent base class</i></a> is a base class that is a dependent type and is
not the current instantiation<a class='hidden_link' href='#temp.dep.type-4.sentence-1'>.</a></div> <div id='temp.dep.type-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#temp.dep.type-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='temp.dep.type-4.sentence-2' class='sentence'>A base class can be the current instantiation in the case of a nested class
naming an enclosing class as a base<a class='hidden_link' href='#temp.dep.type-4.sentence-2'>.</a></div> <div id='temp.dep.type-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.dep.type-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct A {
  typedef int M;
  struct B {
    typedef void M;
    struct C;
  };
};

template&lt;class T&gt; struct A&lt;T&gt;::B::C : A&lt;T&gt; {
  M m;                          <span class='comment'>// OK, <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;M</span>
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.dep.type-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4753'>#</a></div><div id='temp.dep.type-5.sentence-1' class='sentence'>A name is a
<a class='hidden_link' href='#def:current_instantiation,member_of_the' id='def:current_instantiation,member_of_the'><i >member of the current instantiation</i></a>
if it is</div><div id='temp.dep.type-5.sentence-2' class='sentence'><ul class='itemize'><li id='temp.dep.type-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-5.1'>(5.1)</a></div><div id='temp.dep.type-5.1.sentence-1' class='sentence'>An unqualified name that, when looked up, refers to
at least one member of a class that is
the current instantiation or a non-dependent base class thereof<a class='hidden_link' href='#temp.dep.type-5.1.sentence-1'>.</a></div> <div id='temp.dep.type-5.1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#temp.dep.type-5.1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='temp.dep.type-5.1.sentence-2' class='sentence'>This can only occur when looking up a name in a scope enclosed by the
definition of a class template<a class='hidden_link' href='#temp.dep.type-5.1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='temp.dep.type-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-5.2'>(5.2)</a></div><div id='temp.dep.type-5.2.sentence-1' class='sentence'>A
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
in which the
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
refers to the current instantiation
and that, when looked up, refers to at least one member of a class that is
the current
instantiation or a non-dependent base class thereof<a class='hidden_link' href='#temp.dep.type-5.2.sentence-1'>.</a></div> <div id='temp.dep.type-5.2.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#temp.dep.type-5.2.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='temp.dep.type-5.2.sentence-2' class='sentence'>If no such
member is found, and the current instantiation has any dependent base classes,
then the <span class='grammarterm'>qualified-id</span> is a member of an unknown specialization;
see below<a class='hidden_link' href='#temp.dep.type-5.2.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li><li id='temp.dep.type-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-5.3'>(5.3)</a></div><div id='temp.dep.type-5.3.sentence-1' class='sentence'>An <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> denoting the member in a <a href='expr.ref'>class member access</a>
expression for which the type of the object expression is the
current instantiation, and the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>, when <a href='basic.lookup.classref'>looked
up</a>, refers to at least one member of a class
that is the current
instantiation or a non-dependent base class thereof<a class='hidden_link' href='#temp.dep.type-5.3.sentence-1'>.</a></div> <div id='temp.dep.type-5.3.note-3' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#temp.dep.type-5.3.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='temp.dep.type-5.3.sentence-2' class='sentence'>If no such
member is found, and the current instantiation has any dependent base classes,
then the <span class='grammarterm'>id-expression</span> is a member of an unknown specialization;
see below<a class='hidden_link' href='#temp.dep.type-5.3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul></div><div id='temp.dep.type-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.dep.type-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; class A {
  static const int i = 5;
  int n1[i];                    <span class='comment'>// <span class='tcode_in_codeblock'>i</span> refers to a member of the current instantiation
</span>  int n2[A::i];                 <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;i</span> refers to a member of the current instantiation
</span>  int n3[A&lt;T&gt;::i];              <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;i</span> refers to a member of the current instantiation
</span>  int f();
};

template &lt;class T&gt; int A&lt;T&gt;::f() {
  return i;                     <span class='comment'>// <span class='tcode_in_codeblock'>i</span> refers to a member of the current instantiation
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> <div id='temp.dep.type-5.sentence-3' class='sentence'>A name is a <a class='hidden_link' href='#def:current_instantiation,dependent_member_of_the' id='def:current_instantiation,dependent_member_of_the'><i >dependent member of the current instantiation</i></a> if it is a
member of the current instantiation that, when looked up, refers to at least
one member of a class that is the current instantiation<a class='hidden_link' href='#temp.dep.type-5.sentence-3'>.</a></div></div><div class='para' id='temp.dep.type-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4814'>#</a></div><div id='temp.dep.type-6.sentence-1' class='sentence'>A name is a
<a class='hidden_link' href='#def:member_of_an_unknown_specialization' id='def:member_of_an_unknown_specialization'><i >member of an unknown specialization</i></a>
if it is</div><div id='temp.dep.type-6.sentence-2' class='sentence'><ul class='itemize'><li id='temp.dep.type-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-6.1'>(6.1)</a></div><div id='temp.dep.type-6.1.sentence-1' class='sentence'>A
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
in which the
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
names a dependent type that is not the current instantiation<a class='hidden_link' href='#temp.dep.type-6.1.sentence-1'>.</a></div></li><li id='temp.dep.type-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-6.2'>(6.2)</a></div><div id='temp.dep.type-6.2.sentence-1' class='sentence'>A <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> in which the <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
refers to the current instantiation, the current instantiation has at least one
dependent base class, and name lookup of the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> does not
find any member of a class that is the current instantiation or a non-dependent
base class thereof<a class='hidden_link' href='#temp.dep.type-6.2.sentence-1'>.</a></div></li><li id='temp.dep.type-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-6.3'>(6.3)</a></div><div id='temp.dep.type-6.3.sentence-1' class='sentence'>An <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> denoting the member in a
<a href='expr.ref'>class member access</a> expression in which either
<ul class='itemize'><li id='temp.dep.type-6.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#temp.dep.type-6.3.1'>(6.3.1)</a></div><div id='temp.dep.type-6.3.1.sentence-1' class='sentence'>the type of the object expression is the current instantiation, the
current instantiation has at least one dependent base class, and name lookup
of the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> does not find a member of a class that is
the current instantiation or a non-dependent base class thereof; or</div></li><li id='temp.dep.type-6.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#temp.dep.type-6.3.2'>(6.3.2)</a></div><div id='temp.dep.type-6.3.2.sentence-1' class='sentence'>the type of the object expression is dependent and is not the current
instantiation<a class='hidden_link' href='#temp.dep.type-6.3.2.sentence-1'>.</a></div></li></ul></div></li></ul></div></div><div class='para' id='temp.dep.type-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4846'>#</a></div><div id='temp.dep.type-7.sentence-1' class='sentence'>If a <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> in which the <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
refers to the current instantiation is not a member of the current instantiation
or a member of an unknown specialization, the program is ill-formed even if the
template containing the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> is not instantiated; no
diagnostic required<a class='hidden_link' href='#temp.dep.type-7.sentence-1'>.</a></div> <div id='temp.dep.type-7.sentence-2' class='sentence'>Similarly, if the <i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i> in a class
member access expression for which the type of the object expression is the
current instantiation does not refer to a member of the current instantiation
or a member of an unknown specialization, the program is ill-formed even if the
template containing the member access expression is not instantiated; no diagnostic
required<a class='hidden_link' href='#temp.dep.type-7.sentence-2'>.</a></div> <div id='temp.dep.type-7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.dep.type-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; class A {
  typedef int type;
  void f() {
    A&lt;T&gt;::type i;               <span class='comment'>// OK: refers to a member of the current instantiation
</span>    typename A&lt;T&gt;::other j;     <span class='comment'>// error: neither a member of the current instantiation nor
</span>                                <span class='comment'>// a member of an unknown specialization
</span>  }
};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.dep.type-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4869'>#</a></div><div id='temp.dep.type-8.sentence-1' class='sentence'>If, for a given set of template arguments, a specialization of a template is
instantiated that refers to a member of the current instantiation with a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> or class member access expression, the name in the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> or class member access expression is looked up in the
template instantiation context<a class='hidden_link' href='#temp.dep.type-8.sentence-1'>.</a></div> <div id='temp.dep.type-8.sentence-2' class='sentence'>If the result of this lookup differs from the
result of name lookup in the template definition context, name lookup is
ambiguous<a class='hidden_link' href='#temp.dep.type-8.sentence-2'>.</a></div> <div id='temp.dep.type-8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.dep.type-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  int m;
};

struct B {
  int m;
};

template&lt;typename T&gt;
struct C : A, T {
  int f() { return this-&gt;m; }   <span class='comment'>// finds <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;m</span> in the template definition context
</span>  int g() { return m; }         <span class='comment'>// finds <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;m</span> in the template definition context
</span>};

template int C&lt;B&gt;::f();     <span class='comment'>// error: finds both <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;m</span> and <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;m</span>
</span>template int C&lt;B&gt;::g();     <span class='comment'>// OK: transformation to class member access syntax
</span>                            <span class='comment'>// does not occur in the template definition context; see <a href='class.mfct.non-static'>[class.mfct.non-static]</a>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.dep.type-9'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4899'>#</a></div><div id='temp.dep.type-9.sentence-1' class='sentence'>A type is dependent if it is
<ul class='itemize'><li id='temp.dep.type-9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-9.1'>(9.1)</a></div><div id='temp.dep.type-9.1.sentence-1' class='sentence'>a template parameter,</div></li><li id='temp.dep.type-9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-9.2'>(9.2)</a></div><div id='temp.dep.type-9.2.sentence-1' class='sentence'>a member of an unknown specialization,</div></li><li id='temp.dep.type-9.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-9.3'>(9.3)</a></div><div id='temp.dep.type-9.3.sentence-1' class='sentence'>a nested class or enumeration that is a dependent member of the current
instantiation,</div></li><li id='temp.dep.type-9.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-9.4'>(9.4)</a></div><div id='temp.dep.type-9.4.sentence-1' class='sentence'>a cv-qualified type where the cv-unqualified type is dependent,</div></li><li id='temp.dep.type-9.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-9.5'>(9.5)</a></div><div id='temp.dep.type-9.5.sentence-1' class='sentence'>a compound type constructed from any dependent type,</div></li><li id='temp.dep.type-9.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-9.6'>(9.6)</a></div><div id='temp.dep.type-9.6.sentence-1' class='sentence'>an array type whose element type is dependent or whose
bound (if any) is value-dependent,</div></li><li id='temp.dep.type-9.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-9.7'>(9.7)</a></div><div id='temp.dep.type-9.7.sentence-1' class='sentence'>a function type whose exception specification is value-dependent,</div></li><li id='temp.dep.type-9.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-9.8'>(9.8)</a></div><div id='temp.dep.type-9.8.sentence-1' class='sentence'>a
<i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
in which either the template name is a template parameter or any of the
template arguments is a dependent type or an expression that is type-dependent
or value-dependent or is a pack expansion
<div id='temp.dep.type-9.8.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#temp.dep.type-9.8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='temp.dep.type-9.8.sentence-2' class='sentence'>This includes an <a href='class#def:injected-class-name'>injected-class-name</a> of a class template
used without a <span class='grammarterm'>template-argument-list</span><a class='hidden_link' href='#temp.dep.type-9.8.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> , or</div></li><li id='temp.dep.type-9.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.type-9.9'>(9.9)</a></div><div id='temp.dep.type-9.9.sentence-1' class='sentence'>denoted by <span class='texttt'>decltype(</span><i ><a href='expr.comma#nt:expression'>expression</a></i><span class='texttt'>)</span>,
where <i ><a href='expr.comma#nt:expression'>expression</a></i> is <a href='temp.dep.expr'>type-dependent</a><a class='hidden_link' href='#temp.dep.type-9.9.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='temp.dep.type-10'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.type-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4932'>#</a></div><div id='temp.dep.type-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#temp.dep.type-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='temp.dep.type-10.sentence-1' class='sentence'>Because typedefs do not introduce new types, but
instead simply refer to other types, a name that refers to a
typedef that is a member of the current instantiation is dependent
only if the type referred to is dependent<a class='hidden_link' href='#temp.dep.type-10.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='temp.dep.expr' class='section'><h4 ><a class='secnum' href='#temp.dep.expr' style='min-width:118pt'>17.7.2.2</a> Type-dependent expressions <a class='abbr_ref' href='temp.dep.expr'>[temp.dep.expr]</a></h4><div class='para' id='temp.dep.expr-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4942'>#</a></div><div id='temp.dep.expr-1.sentence-1' class='sentence'>Except as described below, an expression is type-dependent if any
subexpression is type-dependent<a class='hidden_link' href='#temp.dep.expr-1.sentence-1'>.</a></div></div><div class='para' id='temp.dep.expr-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4946'>#</a></div><div id='temp.dep.expr-2.sentence-1' class='sentence'><span class='texttt'>this</span>
is type-dependent if the class type of the enclosing member function is
dependent (<a href='temp.dep.type'>[temp.dep.type]</a>)<a class='hidden_link' href='#temp.dep.expr-2.sentence-1'>.</a></div></div><div class='para' id='temp.dep.expr-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L4951'>#</a></div><div id='temp.dep.expr-3.sentence-1' class='sentence'>An
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>
is type-dependent if it contains</div><div id='temp.dep.expr-3.sentence-2' class='sentence'><ul class='itemize'><li id='temp.dep.expr-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.expr-3.1'>(3.1)</a></div><div id='temp.dep.expr-3.1.sentence-1' class='sentence'>an
<i ><a href='lex.name#nt:identifier'>identifier</a></i>
associated by name lookup with one or more declarations
declared with a dependent type,</div></li><li id='temp.dep.expr-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.expr-3.2'>(3.2)</a></div><div id='temp.dep.expr-3.2.sentence-1' class='sentence'>an
<i ><a href='lex.name#nt:identifier'>identifier</a></i>
associated by name lookup with
a non-type <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
declared with a type
that contains a <a href='dcl.spec.auto#def:placeholder_type'>placeholder type</a>,</div></li><li id='temp.dep.expr-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.expr-3.3'>(3.3)</a></div><div id='temp.dep.expr-3.3.sentence-1' class='sentence'>an <i ><a href='lex.name#nt:identifier'>identifier</a></i> associated by name lookup with one or more
declarations of member functions of the current instantiation declared
with a return type that contains a placeholder type,</div></li><li id='temp.dep.expr-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.expr-3.4'>(3.4)</a></div><div id='temp.dep.expr-3.4.sentence-1' class='sentence'>an <i ><a href='lex.name#nt:identifier'>identifier</a></i> associated by name lookup with
a <a href='dcl.struct.bind'>structured binding declaration</a> whose
<i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i> is type-dependent,</div></li><li id='temp.dep.expr-3.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.expr-3.5'>(3.5)</a></div><div id='temp.dep.expr-3.5.sentence-1' class='sentence'>the
<i ><a href='lex.name#nt:identifier'>identifier</a></i>
<a href='dcl.fct.def.general#:__func__'><span class='texttt'>_&shy;_&shy;func_&shy;_&shy;</span></a>, where any enclosing function is a
template, a member of a class template, or a generic lambda,</div></li><li id='temp.dep.expr-3.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.expr-3.6'>(3.6)</a></div><div id='temp.dep.expr-3.6.sentence-1' class='sentence'>a
<i ><a href='temp.names#nt:template-id'>template-id</a></i>
that is dependent,</div></li><li id='temp.dep.expr-3.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.expr-3.7'>(3.7)</a></div><div id='temp.dep.expr-3.7.sentence-1' class='sentence'>a
<i ><a href='class.conv.fct#nt:conversion-function-id'>conversion-function-id</a></i>
that specifies a dependent type, or</div></li><li id='temp.dep.expr-3.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.expr-3.8'>(3.8)</a></div><div id='temp.dep.expr-3.8.sentence-1' class='sentence'>a
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>
or a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
that names a member of an unknown specialization;</div></li></ul></div><div id='temp.dep.expr-3.sentence-3' class='sentence'>or if it names a dependent member of the current instantiation that is a static
data member of type
“array of unknown bound of <span class='texttt'>T</span>” for some <span class='texttt'>T</span> (<a href='temp.static'>[temp.static]</a>)<a class='hidden_link' href='#temp.dep.expr-3.sentence-3'>.</a></div> <div id='temp.dep.expr-3.sentence-4' class='sentence'>Expressions of the following forms are type-dependent only if the type
specified by the
<i ><a href='dcl.name#nt:type-id'>type-id</a></i>,
<i ><a href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a></i>
or
<i ><a href='expr.new#nt:new-type-id'>new-type-id</a></i>
is dependent, even if any subexpression is type-dependent:</div><pre class='ncbnftab'><i ><a href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a></i> <span class='terminal'>(</span> <i ><a href='expr.post#nt:expression-list'>expression-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>)</span>
<span class='terminal'>::<span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> new</span> <i ><a href='expr.new#nt:new-placement'>new-placement</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='expr.new#nt:new-type-id'>new-type-id</a></i> <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
<span class='terminal'>::<span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> new</span> <i ><a href='expr.new#nt:new-placement'>new-placement</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>(</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span> <i ><a href='expr.new#nt:new-initializer'>new-initializer</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
<span class='terminal'>dynamic_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>static_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>const_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>reinterpret_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>(</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span> <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
</pre></div><div class='para' id='temp.dep.expr-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5027'>#</a></div><div id='temp.dep.expr-4.sentence-1' class='sentence'>Expressions of the following forms are never type-dependent (because the type
of the expression cannot be dependent):</div><pre class='ncbnftab'><i ><a href='lex.literal.kinds#nt:literal'>literal</a></i>
<i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> <span class='terminal'>.</span> <i ><a href='expr.post#nt:pseudo-destructor-name'>pseudo-destructor-name</a></i>
<i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> <span class='terminal'>-&gt;</span> <i ><a href='expr.post#nt:pseudo-destructor-name'>pseudo-destructor-name</a></i>
<span class='terminal'>sizeof</span> <i ><a href='expr.unary#nt:unary-expression'>unary-expression</a></i>
<span class='terminal'>sizeof (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
<span class='terminal'>sizeof</span> <span class='terminal'>...</span> <span class='terminal'>(</span> <i ><a href='lex.name#nt:identifier'>identifier</a></i> <span class='terminal'>)</span>
<span class='terminal'>alignof (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
<span class='terminal'>typeid (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>typeid (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
<span class='terminal'>::<span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> delete</span> <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
<span class='terminal'>::<span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> delete [ ]</span> <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
<span class='terminal'>throw</span> <i ><a href='expr.ass#nt:assignment-expression'>assignment-expression</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
<span class='terminal'>noexcept</span> <span class='terminal'>(</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
</pre><div id='temp.dep.expr-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#temp.dep.expr-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='temp.dep.expr-4.sentence-2' class='sentence'>For the standard library macro <span class='texttt'>offsetof</span>,
see <a href='support.types'>[support.types]</a><a class='hidden_link' href='#temp.dep.expr-4.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.dep.expr-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5050'>#</a></div><div id='temp.dep.expr-5.sentence-1' class='sentence'>A <a href='expr.ref'>class member access expression</a> is
type-dependent if
the expression refers to a member of the current instantiation and
the type of the referenced member is dependent, or the class member access
expression refers to a member of an unknown specialization<a class='hidden_link' href='#temp.dep.expr-5.sentence-1'>.</a></div> <div id='temp.dep.expr-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#temp.dep.expr-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='temp.dep.expr-5.sentence-2' class='sentence'>In an expression of the form
<span class='texttt'>x.y</span>
or
<span class='texttt'>xp-&gt;y</span>
the type of the expression is usually the type of the member
<span class='texttt'>y</span>
of the class of
<span class='texttt'>x</span>
(or the class pointed to by
<span class='texttt'>xp</span>)<a class='hidden_link' href='#temp.dep.expr-5.sentence-2'>.</a></div> <div id='temp.dep.expr-5.sentence-3' class='sentence'>However, if
<span class='texttt'>x</span>
or
<span class='texttt'>xp</span>
refers to a dependent type that is not the current instantiation,
the type of
<span class='texttt'>y</span>
is always dependent<a class='hidden_link' href='#temp.dep.expr-5.sentence-3'>.</a></div> <div id='temp.dep.expr-5.sentence-4' class='sentence'>If
<span class='texttt'>x</span>
or <span class='texttt'>xp</span>
refers to a non-dependent type or refers to the current instantiation, the
type of
<span class='texttt'>y</span>
is the type of the class member access expression<a class='hidden_link' href='#temp.dep.expr-5.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.dep.expr-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5083'>#</a></div><div id='temp.dep.expr-6.sentence-1' class='sentence'>A <i ><a href='dcl.init#nt:braced-init-list'>braced-init-list</a></i> is type-dependent if any element is
type-dependent or is a pack expansion<a class='hidden_link' href='#temp.dep.expr-6.sentence-1'>.</a></div></div><div class='para' id='temp.dep.expr-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.expr-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5087'>#</a></div><div id='temp.dep.expr-7.sentence-1' class='sentence'>A <i ><a href='expr.prim.fold#nt:fold-expression'>fold-expression</a></i> is type-dependent<a class='hidden_link' href='#temp.dep.expr-7.sentence-1'>.</a></div></div></div><div id='temp.dep.constexpr' class='section'><h4 ><a class='secnum' href='#temp.dep.constexpr' style='min-width:118pt'>17.7.2.3</a> Value-dependent expressions <a class='abbr_ref' href='temp.dep.constexpr'>[temp.dep.constexpr]</a></h4><div class='para' id='temp.dep.constexpr-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.constexpr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5092'>#</a></div><div id='temp.dep.constexpr-1.sentence-1' class='sentence'>Except as described below, an expression used in a context where a
constant expression is required is value-dependent if any
subexpression is value-dependent<a class='hidden_link' href='#temp.dep.constexpr-1.sentence-1'>.</a></div></div><div class='para' id='temp.dep.constexpr-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.constexpr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5097'>#</a></div><div id='temp.dep.constexpr-2.sentence-1' class='sentence'>An
<i ><a href='expr.prim.id#nt:id-expression'>id-expression</a></i>
is value-dependent if:</div><div id='temp.dep.constexpr-2.sentence-2' class='sentence'><ul class='itemize'><li id='temp.dep.constexpr-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.constexpr-2.1'>(2.1)</a></div><div id='temp.dep.constexpr-2.1.sentence-1' class='sentence'>it is type-dependent,</div></li><li id='temp.dep.constexpr-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.constexpr-2.2'>(2.2)</a></div><div id='temp.dep.constexpr-2.2.sentence-1' class='sentence'>it is the name of a non-type template parameter,</div></li><li id='temp.dep.constexpr-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.constexpr-2.3'>(2.3)</a></div><div id='temp.dep.constexpr-2.3.sentence-1' class='sentence'>it names a static data member that is a dependent member of the current
instantiation and is not initialized in a <i ><a href='class.mem#nt:member-declarator'>member-declarator</a></i>,</div></li><li id='temp.dep.constexpr-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.constexpr-2.4'>(2.4)</a></div><div id='temp.dep.constexpr-2.4.sentence-1' class='sentence'>it names a static member function that is a dependent member of the current
instantiation, or</div></li><li id='temp.dep.constexpr-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.constexpr-2.5'>(2.5)</a></div><div id='temp.dep.constexpr-2.5.sentence-1' class='sentence'>it is a constant with literal type and is initialized with an
expression that is value-dependent<a class='hidden_link' href='#temp.dep.constexpr-2.5.sentence-1'>.</a></div></li></ul></div><div id='temp.dep.constexpr-2.sentence-3' class='sentence'>Expressions of the following form are value-dependent if the
<i ><a href='expr.unary#nt:unary-expression'>unary-expression</a></i> or <i ><a href='expr.comma#nt:expression'>expression</a></i>
is type-dependent or the
<i ><a href='dcl.name#nt:type-id'>type-id</a></i>
is dependent:</div><pre class='ncbnftab'><span class='terminal'>sizeof</span> <i ><a href='expr.unary#nt:unary-expression'>unary-expression</a></i>
<span class='terminal'>sizeof (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
<span class='terminal'>typeid (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>typeid (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
<span class='terminal'>alignof (</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span>
<span class='terminal'>noexcept</span> <span class='terminal'>(</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
</pre><div id='temp.dep.constexpr-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#temp.dep.constexpr-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='temp.dep.constexpr-2.sentence-4' class='sentence'>For the standard library macro <span class='texttt'>offsetof</span>,
see <a href='support.types'>[support.types]</a><a class='hidden_link' href='#temp.dep.constexpr-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='temp.dep.constexpr-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.constexpr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5136'>#</a></div><div id='temp.dep.constexpr-3.sentence-1' class='sentence'>Expressions of the following form are value-dependent if either the
<i ><a href='dcl.name#nt:type-id'>type-id</a></i>
or
<i ><a href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a></i>
is dependent or the
<i ><a href='expr.comma#nt:expression'>expression</a></i>
or
<i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
is value-dependent:</div><pre class='ncbnftab'><i ><a href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a></i> <span class='terminal'>(</span> <i ><a href='expr.post#nt:expression-list'>expression-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>)</span>
<span class='terminal'>static_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>const_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>reinterpret_cast &lt;</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>&gt; (</span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>)</span>
<span class='terminal'>(</span> <i ><a href='dcl.name#nt:type-id'>type-id</a></i> <span class='terminal'>)</span> <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
</pre></div><div class='para' id='temp.dep.constexpr-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.constexpr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5155'>#</a></div><div id='temp.dep.constexpr-4.sentence-1' class='sentence'>Expressions of the following form are value-dependent:</div><pre class='ncbnftab'><span class='terminal'>sizeof</span> <span class='terminal'>...</span> <span class='terminal'>(</span> <i ><a href='lex.name#nt:identifier'>identifier</a></i> <span class='terminal'>)</span>
<i ><a href='expr.prim.fold#nt:fold-expression'>fold-expression</a></i>
</pre></div><div class='para' id='temp.dep.constexpr-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.constexpr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5163'>#</a></div><div id='temp.dep.constexpr-5.sentence-1' class='sentence'>An expression of the form <span class='texttt'>&amp;</span><i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> where the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i> names a dependent member of the current
instantiation is value-dependent<a class='hidden_link' href='#temp.dep.constexpr-5.sentence-1'>.</a></div> <div id='temp.dep.constexpr-5.sentence-2' class='sentence'>An expression of the form <span class='texttt'>&amp;</span><i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
is also value-dependent if evaluating <i ><a href='expr.cast#nt:cast-expression'>cast-expression</a></i>
as a <a href='expr.const#def:expression,core_constant'>core constant expression</a> succeeds and
the result of the evaluation refers to a templated entity
that is an object with static or thread storage duration or a member function<a class='hidden_link' href='#temp.dep.constexpr-5.sentence-2'>.</a></div></div></div><div id='temp.dep.temp' class='section'><h4 ><a class='secnum' href='#temp.dep.temp' style='min-width:118pt'>17.7.2.4</a> Dependent template arguments <a class='abbr_ref' href='temp.dep.temp'>[temp.dep.temp]</a></h4><div class='para' id='temp.dep.temp-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.temp-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5175'>#</a></div><div id='temp.dep.temp-1.sentence-1' class='sentence'>A type
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
is dependent if the type it specifies is dependent<a class='hidden_link' href='#temp.dep.temp-1.sentence-1'>.</a></div></div><div class='para' id='temp.dep.temp-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.temp-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5180'>#</a></div><div id='temp.dep.temp-2.sentence-1' class='sentence'>A non-type
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
is dependent if its type is dependent or the constant
expression it specifies is value-dependent<a class='hidden_link' href='#temp.dep.temp-2.sentence-1'>.</a></div></div><div class='para' id='temp.dep.temp-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.temp-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5186'>#</a></div><div id='temp.dep.temp-3.sentence-1' class='sentence'>Furthermore, a non-type
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
is dependent if the corresponding non-type <i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
is of reference or pointer type and the <i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
designates or points to a member of the current instantiation or a member of
a dependent type<a class='hidden_link' href='#temp.dep.temp-3.sentence-1'>.</a></div></div><div class='para' id='temp.dep.temp-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.temp-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5194'>#</a></div><div id='temp.dep.temp-4.sentence-1' class='sentence'>A template
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
is dependent if it names a
<i ><a href='temp.param#nt:template-parameter'>template-parameter</a></i>
or is a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
that refers to a member of an unknown specialization<a class='hidden_link' href='#temp.dep.temp-4.sentence-1'>.</a></div></div></div></div><div id='temp.nondep' class='section'><h3 ><a class='secnum' href='#temp.nondep' style='min-width:103pt'>17.7.3</a> Non-dependent names <a class='abbr_ref' href='temp.nondep'>[temp.nondep]</a></h3><div class='para' id='temp.nondep-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.nondep-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5205'>#</a></div><div id='temp.nondep-1.sentence-1' class='sentence'>Non-dependent names used in a template definition are found using the
usual name lookup and bound at the point they are used<a class='hidden_link' href='#temp.nondep-1.sentence-1'>.</a></div> <div id='temp.nondep-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.nondep-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
void g(double);
void h();

template&lt;class T&gt; class Z {
public:
  void f() {
    g(1);           <span class='comment'>// calls <span class='tcode_in_codeblock'>g(double)</span>
</span>    h++;            <span class='comment'>// ill-formed: cannot increment function; this could be diagnosed
</span>                    <span class='comment'>// either here or at the point of instantiation
</span>  }
};

void g(int);        <span class='comment'>// not in scope at the point of the template definition, not considered for the call <span class='tcode_in_codeblock'>g(1)</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='temp.dep.res' class='section'><h3 ><a class='secnum' href='#temp.dep.res' style='min-width:103pt'>17.7.4</a> Dependent name resolution <a class='abbr_ref' href='temp.dep.res'>[temp.dep.res]</a></h3><div class='para' id='temp.dep.res-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.res-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5229'>#</a></div><div id='temp.dep.res-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':name,dependent'></a></span>In resolving dependent names, names from the following sources are considered:</div><div id='temp.dep.res-1.sentence-2' class='sentence'><ul class='itemize'><li id='temp.dep.res-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.res-1.1'>(1.1)</a></div><div id='temp.dep.res-1.1.sentence-1' class='sentence'>Declarations that are visible at the point of definition of the
template<a class='hidden_link' href='#temp.dep.res-1.1.sentence-1'>.</a></div></li><li id='temp.dep.res-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.res-1.2'>(1.2)</a></div><div id='temp.dep.res-1.2.sentence-1' class='sentence'>Declarations from namespaces associated with the types of the
function arguments both from the instantiation context (<a href='temp.point'>[temp.point]</a>)
and from the definition context<a class='hidden_link' href='#temp.dep.res-1.2.sentence-1'>.</a></div></li></ul></div></div><div id='temp.point' class='section'><h4 ><a class='secnum' href='#temp.point' style='min-width:118pt'>17.7.4.1</a> Point of instantiation <a class='abbr_ref' href='temp.point'>[temp.point]</a></h4><div class='para' id='temp.point-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5245'>#</a></div><div id='temp.point-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':instantiation,point_of'></a></span>For a function template specialization, a member function template
specialization, or a specialization for a member function or static data member
of a class template,
if the specialization is implicitly instantiated because it is referenced
from within another template specialization and
the context from which it is referenced depends on a template parameter,
the point of instantiation of the specialization is the point of instantiation
of the enclosing specialization<a class='hidden_link' href='#temp.point-1.sentence-1'>.</a></div> <div id='temp.point-1.sentence-2' class='sentence'>Otherwise, the point of instantiation for such a specialization immediately
follows the namespace scope declaration
or definition that refers to the specialization<a class='hidden_link' href='#temp.point-1.sentence-2'>.</a></div></div><div class='para' id='temp.point-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5259'>#</a></div><div id='temp.point-2.sentence-1' class='sentence'>If a function template or member function of a class template is called
in a way which uses the definition of a default argument of that function
template or member function,
the point of instantiation of the default argument is the point of
instantiation of the function template or member function specialization<a class='hidden_link' href='#temp.point-2.sentence-1'>.</a></div></div><div class='para' id='temp.point-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5266'>#</a></div><div id='temp.point-3.sentence-1' class='sentence'>For a <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> of a function template
specialization or specialization of a member function of a class template, if
the <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> is implicitly instantiated because
it is needed by another template specialization and the context that requires
it depends on a template parameter, the point of instantiation of the
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> is the point of instantiation of the
specialization that requires it<a class='hidden_link' href='#temp.point-3.sentence-1'>.</a></div> <div id='temp.point-3.sentence-2' class='sentence'>Otherwise, the point of instantiation for such
a <i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i> immediately follows the namespace
scope declaration or definition that requires the
<i ><a href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a></i><a class='hidden_link' href='#temp.point-3.sentence-2'>.</a></div></div><div class='para' id='temp.point-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5280'>#</a></div><div id='temp.point-4.sentence-1' class='sentence'>For a class template specialization, a class member template specialization,
or a specialization for a class member of a class template,
if the specialization is implicitly instantiated because it is referenced
from within another template specialization,
if the context from which the specialization is referenced depends on a
template parameter,
and if the specialization is not instantiated previous to the instantiation of
the enclosing template,
the point of instantiation is immediately before the point of instantiation of
the enclosing template<a class='hidden_link' href='#temp.point-4.sentence-1'>.</a></div> <div id='temp.point-4.sentence-2' class='sentence'>Otherwise, the point of instantiation for such a specialization immediately
precedes the namespace scope declaration
or definition that refers to the specialization<a class='hidden_link' href='#temp.point-4.sentence-2'>.</a></div></div><div class='para' id='temp.point-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5295'>#</a></div><div id='temp.point-5.sentence-1' class='sentence'>If a virtual function is implicitly instantiated, its point of instantiation
is immediately following the point of instantiation of its enclosing class
template specialization<a class='hidden_link' href='#temp.point-5.sentence-1'>.</a></div></div><div class='para' id='temp.point-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5300'>#</a></div><div id='temp.point-6.sentence-1' class='sentence'>An explicit instantiation definition is an instantiation
point for the specialization or specializations specified by the explicit
instantiation<a class='hidden_link' href='#temp.point-6.sentence-1'>.</a></div></div><div class='para' id='temp.point-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5305'>#</a></div><div id='temp.point-7.sentence-1' class='sentence'>The instantiation context of an expression that depends on the template
arguments is the set of declarations with external linkage declared prior to the
point of instantiation of the template specialization in the same translation
unit<a class='hidden_link' href='#temp.point-7.sentence-1'>.</a></div></div><div class='para' id='temp.point-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.point-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5311'>#</a></div><div id='temp.point-8.sentence-1' class='sentence'>A specialization for a function template, a member function template,
or of a member function or static data member of a class template may have
multiple points of instantiations within a translation unit, and in addition
to the points of instantiation described above, for any such specialization
that has a point of instantiation within the translation unit, the end of the
translation unit is also considered a point of instantiation<a class='hidden_link' href='#temp.point-8.sentence-1'>.</a></div> <div id='temp.point-8.sentence-2' class='sentence'>A specialization for a class template has at most one point of instantiation
within a translation unit<a class='hidden_link' href='#temp.point-8.sentence-2'>.</a></div> <div id='temp.point-8.sentence-3' class='sentence'>A specialization for any template may have points of instantiation in multiple
translation units<a class='hidden_link' href='#temp.point-8.sentence-3'>.</a></div> <div id='temp.point-8.sentence-4' class='sentence'>If two different points of instantiation give a template specialization
different meanings according to the <a href='basic.def.odr'>one-definition rule</a>,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#temp.point-8.sentence-4'>.</a></div></div></div><div id='temp.dep.candidate' class='section'><h4 ><a class='secnum' href='#temp.dep.candidate' style='min-width:118pt'>17.7.4.2</a> Candidate functions <a class='abbr_ref' href='temp.dep.candidate'>[temp.dep.candidate]</a></h4><div class='para' id='temp.dep.candidate-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.dep.candidate-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5328'>#</a></div><div id='temp.dep.candidate-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':functions,candidate'></a></span>For a function call where the <i ><a href='expr.post#nt:postfix-expression'>postfix-expression</a></i> is a
dependent name,
the candidate functions are found using the usual lookup
rules (<a href='basic.lookup.unqual'>[basic.lookup.unqual]</a>, <a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>) except that:</div><div id='temp.dep.candidate-1.sentence-2' class='sentence'><ul class='itemize'><li id='temp.dep.candidate-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.candidate-1.1'>(1.1)</a></div><div id='temp.dep.candidate-1.1.sentence-1' class='sentence'>For the part of the lookup using <a href='basic.lookup.unqual'>unqualified name lookup</a>,
only function declarations
from the template definition context are found<a class='hidden_link' href='#temp.dep.candidate-1.1.sentence-1'>.</a></div></li><li id='temp.dep.candidate-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#temp.dep.candidate-1.2'>(1.2)</a></div><div id='temp.dep.candidate-1.2.sentence-1' class='sentence'>For the part of the lookup using associated namespaces (<a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>),
only function declarations found in either the template
definition context or the template instantiation context are found<a class='hidden_link' href='#temp.dep.candidate-1.2.sentence-1'>.</a></div></li></ul></div><div id='temp.dep.candidate-1.sentence-3' class='sentence'>If
the call would be ill-formed or would find a better match had the lookup
within the associated namespaces considered all the function declarations with
external linkage introduced in those namespaces in all translation units,
not just considering those declarations found in the template definition and
template instantiation contexts, then the program has undefined behavior<a class='hidden_link' href='#temp.dep.candidate-1.sentence-3'>.</a></div></div></div></div><div id='temp.inject' class='section'><h3 ><a class='secnum' href='#temp.inject' style='min-width:103pt'>17.7.5</a> Friend names declared within a class template <a class='abbr_ref' href='temp.inject'>[temp.inject]</a></h3><div class='para' id='temp.inject-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.inject-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5355'>#</a></div><div id='temp.inject-1.sentence-1' class='sentence'>Friend classes or functions can be declared within a class template<a class='hidden_link' href='#temp.inject-1.sentence-1'>.</a></div> <div id='temp.inject-1.sentence-2' class='sentence'>When a template is instantiated, the names of its friends are treated
as if the specialization had been explicitly declared at its point of
instantiation<a class='hidden_link' href='#temp.inject-1.sentence-2'>.</a></div></div><div class='para' id='temp.inject-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.inject-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e3b4927ea0f4e8c8bf1f7461226c729b4e2c00be/source/templates.tex#L5361'>#</a></div><div id='temp.inject-2.sentence-1' class='sentence'>As with non-template classes, the names of namespace-scope friend
functions of a class template specialization are not visible during
an ordinary lookup unless explicitly declared at namespace scope (<a href='class.friend'>[class.friend]</a>)<a class='hidden_link' href='#temp.inject-2.sentence-1'>.</a></div> <div id='temp.inject-2.sentence-2' class='sentence'>Such names may be found under the rules for associated
classes (<a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>)<a class='hidden_link' href='#temp.inject-2.sentence-2'>.</a><a class='footnotenum' href='#footnote-141'>141</a></div> <div id='temp.inject-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#temp.inject-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; struct number {
  number(int);
  friend number gcd(number x, number y) { return 0; };
};

void g() {
  number&lt;double&gt; a(3), b(4);
  a = gcd(a,b);     <span class='comment'>// finds <span class='tcode_in_codeblock'>gcd</span> because <span class='tcode_in_codeblock'>number&lt;double&gt;</span> is an associated class,
</span>                    <span class='comment'>// making <span class='tcode_in_codeblock'>gcd</span> visible in its namespace (global scope)
</span>  b = gcd(3,4);     <span class='comment'>// ill-formed; <span class='tcode_in_codeblock'>gcd</span> is not visible
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-141'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-141'>141)</a></div><div id='footnote-141.sentence-1' class='sentence'>Friend declarations do not
introduce new names into any scope, either
when the template is declared or when it is instantiated<a class='hidden_link' href='#footnote-141.sentence-1'>.</a></div></div></div></div></body></html>