<!DOCTYPE html><html lang='en'><head><title>[temp.class.spec]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>13</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>13.7</a> Template declarations <a class='abbr_ref' href='temp.decls#temp.class.spec'>[temp.decls]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>13.7.6</a> Class template partial specializations <a class='abbr_ref'>[temp.class.spec]</a></h3><div id='general' class='section'><h4 ><a class='secnum' href='#general' style='min-width:95pt'>13.7.6.1</a> General <a class='abbr_ref' href='temp.class.spec.general'>[temp.class.spec.general]</a></h4><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3182'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'><a class='index' id=':specialization,class_template_partial'></a>A
<a class='hidden_link' href='#def:template,primary' title='13.7.6.1&emsp;General&emsp;[temp.class.spec.general]'><span id='def:template,primary'><i >primary class template</i></span></a>
declaration is one in which the class template name is an
identifier<a class='hidden_link' href='#general-1.sentence-1'>.</a></div> <div id='general-1.sentence-2' class='sentence'>A template declaration in which the class template name is a
<a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id'><span class='textsf'><i >simple-template-id</i></span></span></a>
is a
<a class='hidden_link' href='#def:specialization,class_template_partial' title='13.7.6.1&emsp;General&emsp;[temp.class.spec.general]'><span id='def:specialization,class_template_partial'><i >partial specialization</i></span></a>
of the class template named in the
<a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id_'><span class='textsf'><i >simple-template-id</i></span></span></a><a class='hidden_link' href='#general-1.sentence-2'>.</a></div> <div id='general-1.sentence-3' class='sentence'>A partial specialization of a class template provides an alternative definition
of the template that is used instead of the primary definition when the
arguments in a specialization match those given in the partial
specialization (<a href='#match' title='13.7.6.2&emsp;Matching of class template partial specializations'>[temp.<span class='shy'></span>class.<span class='shy'></span>spec.<span class='shy'></span>match]</a>)<a class='hidden_link' href='#general-1.sentence-3'>.</a></div> <div id='general-1.sentence-4' class='sentence'>The primary template shall be declared before any specializations of
that template<a class='hidden_link' href='#general-1.sentence-4'>.</a></div> <div id='general-1.sentence-5' class='sentence'>A partial specialization shall be declared before the first use of a class template
specialization that would make use of the partial specialization as the result of
an implicit or explicit instantiation in every translation unit in which such a use
occurs; no diagnostic is required<a class='hidden_link' href='#general-1.sentence-5'>.</a></div></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3206'>#</a></div><div class='texpara'><div id='general-2.sentence-1' class='sentence'>Each class template partial specialization is a distinct template and
definitions shall be provided for the members of a template partial
specialization (<a href='#mfunc' title='13.7.6.4&emsp;Members of class template specializations'>[temp.<span class='shy'></span>class.<span class='shy'></span>spec.<span class='shy'></span>mfunc]</a>)<a class='hidden_link' href='#general-2.sentence-1'>.</a></div></div></div><div class='para nonNormativeOnly' id='general-3'><div class='marginalizedparent'><a class='marginalized' href='#general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3211'>#</a></div><div class='texpara'><div id='general-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A             <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span>            <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T, T<span class='operator'>*</span>, I<span class='anglebracket'>&gt;</span>   <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T1<span class='operator'>*</span>, T2, I<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>                   <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, T<span class='operator'>*</span>, <span class='literal'>5</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T1, T2<span class='operator'>*</span>, I<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='general-3.sentence-1' class='sentence'>The first declaration declares the primary (unspecialized) class template<a class='hidden_link' href='#general-3.sentence-1'>.</a></div> <div id='general-3.sentence-2' class='sentence'>The second and subsequent declarations declare partial specializations of
the primary template<a class='hidden_link' href='#general-3.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-4'><div class='marginalizedparent'><a class='marginalized' href='#general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3226'>#</a></div><div class='texpara'><div id='general-4.sentence-1' class='sentence'>A class template partial specialization may be constrained (<a href='temp.pre' title='13.1&emsp;Preamble'>[temp.<span class='shy'></span>pre]</a>)<a class='hidden_link' href='#general-4.sentence-1'>.</a></div> <div id='general-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-2'>2</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='literal'>true</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;          <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                  <span class='comment'>// #2</span>
</span> <div id='general-4.sentence-2' class='sentence'>
Both partial specializations are more specialized than the primary template<a class='hidden_link' href='#general-4.sentence-2'>.</a></div> <div id='general-4.sentence-3' class='sentence'>#1 is more specialized because the deduction of its template arguments
from the template argument list of the class template specialization succeeds,
while the reverse does not<a class='hidden_link' href='#general-4.sentence-3'>.</a></div> <div id='general-4.sentence-4' class='sentence'>#2 is more specialized because the template arguments are equivalent,
but the partial specialization is more constrained (<a href='temp.constr.order' title='13.5.5&emsp;Partial ordering by constraints'>[temp.<span class='shy'></span>constr.<span class='shy'></span>order]</a>)<a class='hidden_link' href='#general-4.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-5'><div class='marginalizedparent'><a class='marginalized' href='#general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3244'>#</a></div><div class='texpara'><div id='general-5.sentence-1' class='sentence'>The template parameters are specified in the angle bracket enclosed list
that immediately follows the keyword
<span id=':template'><span class='texttt'><span class='keyword'>template</span></span></span><a class='hidden_link' href='#general-5.sentence-1'>.</a></div> <div id='general-5.sentence-2' class='sentence'>For partial specializations, the template argument list is explicitly
written immediately following the class template name<a class='hidden_link' href='#general-5.sentence-2'>.</a></div> <div id='general-5.sentence-3' class='sentence'>For primary templates, this list is implicitly described by the
template parameter list<a class='hidden_link' href='#general-5.sentence-3'>.</a></div> <div id='general-5.sentence-4' class='sentence'>Specifically, the order of the template arguments is the sequence in
which they appear in the template parameter list<a class='hidden_link' href='#general-5.sentence-4'>.</a></div> <div id='general-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-3'>3</a></i>: <div id='general-5.sentence-5' class='sentence'>The template argument list for the primary template in the example
above is
<span class='texttt'><span class='anglebracket'>&lt;</span>T1,</span>
<span class='texttt'>T2,</span>
<span class='texttt'>I<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#general-5.sentence-5'>.</a></div> —&nbsp;<i>end example</i>]</div></div> <div id='general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-1'>1</a></i>: <div id='general-5.sentence-6' class='sentence'>The template argument list cannot be specified in the primary template
declaration<a class='hidden_link' href='#general-5.sentence-6'>.</a></div> <div id='general-5.sentence-7' class='sentence'>For example,</div></div><div class='texpara'><span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span>
<span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T1, T2, I<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                         <span class='comment'>// error</span>
</span> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='general-6'><div class='marginalizedparent'><a class='marginalized' href='#general-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3272'>#</a></div><div class='texpara'><div id='general-6.sentence-1' class='sentence'>A class template partial specialization may be declared in any
scope in which the corresponding primary template
may be defined (<a href='namespace.memdef' title='9.8.2.3&emsp;Namespace member definitions'>[namespace.<span class='shy'></span>memdef]</a>, <a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>, <a href='temp.mem' title='13.7.3&emsp;Member templates'>[temp.<span class='shy'></span>mem]</a>)<a class='hidden_link' href='#general-6.sentence-1'>.</a></div> <div id='general-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-4'>4</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B<span class='anglebracket'>&lt;</span>T2<span class='operator'>*</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;      <span class='comment'>// partial specialization #1</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='comment'>// partial specialization of <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;C&#x200b;::&#x200b;B&lt;T2&gt;</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span>
  <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>C<span class='operator'>::</span>B<span class='anglebracket'>&lt;</span>T2<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                   <span class='comment'>// #2</span>

A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>C<span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> absip;                     <span class='comment'>// uses partial specialization #2</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-7'><div class='marginalizedparent'><a class='marginalized' href='#general-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3293'>#</a></div><div class='texpara'><div id='general-7.sentence-1' class='sentence'>Partial specialization declarations themselves are not found by name lookup<a class='hidden_link' href='#general-7.sentence-1'>.</a></div> <div id='general-7.sentence-2' class='sentence'>Rather, when the primary template name is used, any previously-declared partial
specializations of the primary template are also considered<a class='hidden_link' href='#general-7.sentence-2'>.</a></div> <div id='general-7.sentence-3' class='sentence'>One consequence is
that a
<a href='namespace.udecl#nt:using-declaration' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declaration'><span class='textsf'><i >using-declaration</i></span></span></a>
which refers to a class template does not restrict the set of partial specializations
which may be found through the
<a href='namespace.udecl#nt:using-declaration' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declaration_'><span class='textsf'><i >using-declaration</i></span></span></a><a class='hidden_link' href='#general-7.sentence-3'>.</a></div> <div id='general-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-5'>5</a></i>: <span class='codeblock'><span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;     <span class='comment'>// primary template</span>
<span class='curlybracket'>}</span>

<span class='keyword'>using</span> N<span class='operator'>::</span>A;                                     <span class='comment'>// refers to the primary template</span>

<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T, T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;         <span class='comment'>// partial specialization</span>
<span class='curlybracket'>}</span>

A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='keyword'>int</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> a;      <span class='comment'>// uses the partial specialization, which is found through the using-declaration</span>
                    <span class='comment'>// which refers to the primary template</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='general-8'><div class='marginalizedparent'><a class='marginalized' href='#general-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3320'>#</a></div><div class='texpara'><div id='general-8.sentence-1' class='sentence'>A non-type argument is non-specialized if it is the name of a non-type
parameter<a class='hidden_link' href='#general-8.sentence-1'>.</a></div> <div id='general-8.sentence-2' class='sentence'>All other non-type arguments are specialized<a class='hidden_link' href='#general-8.sentence-2'>.</a></div></div></div><div class='para' id='general-9'><div class='marginalizedparent'><a class='marginalized' href='#general-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3325'>#</a></div><div class='texpara'><div id='general-9.sentence-1' class='sentence'>Within the argument list of a class template partial specialization,
the following restrictions apply:
<ul class='itemize'><li id='general-9.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-9.1'>(9.1)</a></div><div class='texpara'><div id='general-9.1.sentence-1' class='sentence'>The type of a template parameter corresponding to a specialized non-type argument
shall not be dependent on a parameter of the specialization<a class='hidden_link' href='#general-9.1.sentence-1'>.</a></div> <div id='general-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-6'>6</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, T t<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C<span class='anglebracket'>&lt;</span>T, <span class='literal'>1</span><span class='anglebracket'>&gt;</span>;              <span class='comment'>// error</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span> <span class='keyword'>int</span> X, <span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span>array_ptr<span class='parenthesis'>)</span><span class='squarebracket'>[</span>X<span class='squarebracket'>]</span> <span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>int</span> array<span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span> <span class='keyword'>int</span> X <span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>X,<span class='operator'>&amp;</span>array<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;        <span class='comment'>// error</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='general-9.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-9.2'>(9.2)</a></div><div class='texpara'><div id='general-9.2.sentence-1' class='sentence'>The specialization shall be <a href='#def:more_specialized' title='13.7.6.3&emsp;Partial ordering of class template specializations&emsp;[temp.class.order]'>more specialized</a>
than the primary template<a class='hidden_link' href='#general-9.2.sentence-1'>.</a></div></div></li><li id='general-9.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-9.3'>(9.3)</a></div><div class='texpara'><div id='general-9.3.sentence-1' class='sentence'>The template parameter list of a specialization shall not contain default
template argument values<a class='hidden_link' href='#general-9.3.sentence-1'>.</a><a class='footnotenum' href='#footnote-138' id='footnoteref-138' title='There is no way in which they could be used.'>138</a></div></div></li><li id='general-9.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#general-9.4'>(9.4)</a></div><div class='texpara'><div id='general-9.4.sentence-1' class='sentence'>An argument shall not contain an unexpanded pack<a class='hidden_link' href='#general-9.4.sentence-1'>.</a></div> <div id='general-9.4.sentence-2' class='sentence'>If
an argument is a pack expansion (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>), it shall be
the last argument in the template argument list<a class='hidden_link' href='#general-9.4.sentence-2'>.</a></div></div></li></ul></div></div></div><div class='para' id='general-10'><div class='marginalizedparent'><a class='marginalized' href='#general-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3358'>#</a></div><div class='texpara'><div id='general-10.sentence-1' class='sentence'>The usual access checking rules do not apply to non-dependent names
used to specify template arguments of the <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id__'><span class='textsf'><i >simple-template-id</i></span></span></a>
of the partial specialization<a class='hidden_link' href='#general-10.sentence-1'>.</a></div> <div id='general-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#general-note-2'>2</a></i>: <div id='general-10.sentence-2' class='sentence'>The template arguments can be private types or
objects that would normally not be accessible<a class='hidden_link' href='#general-10.sentence-2'>.</a></div> <div id='general-10.sentence-3' class='sentence'>Dependent names cannot be checked when declaring the partial specialization,
but will be checked when substituting into the partial specialization<a class='hidden_link' href='#general-10.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='footnote' id='footnote-138'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-138'>138)</a></div><div class='texpara'><div id='footnote-138.sentence-1' class='sentence'>There is no way in which they could be used<a class='hidden_link' href='#footnote-138.sentence-1'>.</a></div>&nbsp;<a href='#footnoteref-138'>⮥</a></div></div></div><div id='match' class='section'><h4 ><a class='secnum' href='#match' style='min-width:95pt'>13.7.6.2</a> Matching of class template partial specializations <a class='abbr_ref' href='temp.class.spec.match'>[temp.class.spec.match]</a></h4><div class='para' id='match-1'><div class='marginalizedparent'><a class='marginalized' href='#match-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3371'>#</a></div><div class='texpara'><div id='match-1.sentence-1' class='sentence'>When a class template is used in a context that requires an instantiation of
the class,
it is necessary to determine whether the instantiation is to be generated
using the primary template or one of the partial specializations<a class='hidden_link' href='#match-1.sentence-1'>.</a></div> <div id='match-1.sentence-2' class='sentence'>This is done by matching the template arguments of the class template
specialization with the template argument lists of the partial
specializations<a class='hidden_link' href='#match-1.sentence-2'>.</a></div></div><div class='texpara'><ul class='itemize'><li id='match-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#match-1.1'>(1.1)</a></div><div class='texpara'><div id='match-1.1.sentence-1' class='sentence'>If exactly one matching specialization is found, the instantiation is
generated from that specialization<a class='hidden_link' href='#match-1.1.sentence-1'>.</a></div></div></li><li id='match-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#match-1.2'>(1.2)</a></div><div class='texpara'><div id='match-1.2.sentence-1' class='sentence'>If more than one matching specialization is found,
the <a href='#temp.class.order' title='13.7.6.3&emsp;Partial ordering of class template specializations&emsp;[temp.class.order]'>partial order rules</a> are used to determine
whether one of the specializations is more specialized than the
others<a class='hidden_link' href='#match-1.2.sentence-1'>.</a></div> <div id='match-1.2.sentence-2' class='sentence'>If none of the specializations is more specialized than all of the
other matching specializations, then the use of the class template
is ambiguous and the program is ill-formed<a class='hidden_link' href='#match-1.2.sentence-2'>.</a></div></div></li><li id='match-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#match-1.3'>(1.3)</a></div><div class='texpara'><div id='match-1.3.sentence-1' class='sentence'>If no matches are found, the instantiation is generated from the
primary template<a class='hidden_link' href='#match-1.3.sentence-1'>.</a></div></div></li></ul></div></div><div class='para' id='match-2'><div class='marginalizedparent'><a class='marginalized' href='#match-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3397'>#</a></div><div class='texpara'><div id='match-2.sentence-1' class='sentence'>A partial specialization matches a given actual template argument
list if the template arguments of the partial specialization can be
<a href='temp.deduct' title='13.10.3&emsp;Template argument deduction&emsp;[temp.deduct]'>deduced</a> from the actual template argument list,
and the deduced template arguments satisfy the <a href='temp.constr.decl#def:associated_constraints' title='13.5.3&emsp;Constrained declarations&emsp;[temp.constr.decl]'>associated constraints</a>
of the partial specialization, if any<a class='hidden_link' href='#match-2.sentence-1'>.</a></div> <div id='match-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#match-example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A             <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span>            <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T, T<span class='operator'>*</span>, I<span class='anglebracket'>&gt;</span>   <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T1<span class='operator'>*</span>, T2, I<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// #3</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>                   <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, T<span class='operator'>*</span>, <span class='literal'>5</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// #4</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T1, T2<span class='operator'>*</span>, I<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// #5</span>

A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span>, <span class='literal'>1</span><span class='anglebracket'>&gt;</span>   a1;                    <span class='comment'>// uses #1</span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='operator'>*</span>, <span class='literal'>1</span><span class='anglebracket'>&gt;</span>  a2;                    <span class='comment'>// uses #2, <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>I</span> is <span class='tcode_in_codeblock'>1</span></span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>char</span><span class='operator'>*</span>, <span class='literal'>5</span><span class='anglebracket'>&gt;</span> a3;                    <span class='comment'>// uses #4, <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>char</span></span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>char</span><span class='operator'>*</span>, <span class='literal'>1</span><span class='anglebracket'>&gt;</span> a4;                    <span class='comment'>// uses #5, <span class='tcode_in_codeblock'>T1</span> is <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>T2</span> is <span class='tcode_in_codeblock'>char</span>, <span class='tcode_in_codeblock'>I</span> is <span class='tcode_in_codeblock'>1</span></span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>*</span>, <span class='keyword'>int</span><span class='operator'>*</span>, <span class='literal'>2</span><span class='anglebracket'>&gt;</span> a5;                    <span class='comment'>// ambiguous: matches #3 and #5</span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='match-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#match-example-2'>2</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> t<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;      <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;          <span class='comment'>// #2</span>

<span class='keyword'>struct</span> Arg <span class='curlybracket'>{</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;

S<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> s1;                              <span class='comment'>// uses #1; the constraints of #2 are not satisfied</span>
S<span class='anglebracket'>&lt;</span>Arg<span class='anglebracket'>&gt;</span> s2;                              <span class='comment'>// uses #2; both constraints are satisfied but #2 is more specialized</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='match-3'><div class='marginalizedparent'><a class='marginalized' href='#match-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3432'>#</a></div><div class='texpara'><div id='match-3.sentence-1' class='sentence'>If the template arguments of a partial specialization cannot be deduced
because of the structure of its <a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list'><span class='textsf'><i >template-parameter-list</i></span></span></a>
and the <a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id'><span class='textsf'><i >template-id</i></span></span></a>,
the program is ill-formed<a class='hidden_link' href='#match-3.sentence-1'>.</a></div> <div id='match-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#match-example-3'>3</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I, <span class='keyword'>int</span> J<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>I<span class='operator'>+</span><span class='literal'>5</span>, I<span class='operator'>*</span><span class='literal'>2</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;     <span class='comment'>// error</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>I, I<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;         <span class='comment'>// OK</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I, <span class='keyword'>int</span> J, <span class='keyword'>int</span> K<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B<span class='anglebracket'>&lt;</span>I, I<span class='operator'>*</span><span class='literal'>2</span>, <span class='literal'>2</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;    <span class='comment'>// OK</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='match-4'><div class='marginalizedparent'><a class='marginalized' href='#match-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3449'>#</a></div><div class='texpara'><div id='match-4.sentence-1' class='sentence'>In a type name that refers to a class template specialization, (e.g.,
<span class='texttt'>A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span>, <span class='literal'>1</span><span class='anglebracket'>&gt;</span></span>)
the argument list shall match the template parameter list of the primary
template<a class='hidden_link' href='#match-4.sentence-1'>.</a></div> <div id='match-4.sentence-2' class='sentence'>The template arguments of a specialization are deduced from the arguments
of the primary template<a class='hidden_link' href='#match-4.sentence-2'>.</a></div></div></div></div><div id='temp.class.order' class='section'><h4 ><a class='secnum' href='#temp.class.order' style='min-width:95pt'>13.7.6.3</a> Partial ordering of class template specializations <a class='abbr_ref' href='temp.class.order'>[temp.class.order]</a></h4><div class='para' id='temp.class.order-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.class.order-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3459'>#</a></div><div class='texpara'><div id='temp.class.order-1.sentence-1' class='sentence'>For two class template partial specializations,
the first is <a class='hidden_link' href='#def:more_specialized,class_template' title='13.7.6.3&emsp;Partial ordering of class template specializations&emsp;[temp.class.order]'><span id='def:more_specialized,class_template'><i >more specialized</i></span></a> than the second if, given the following
rewrite to two function templates, the first function template is more
specialized than the second according to the <a href='temp.func.order' title='13.7.7.3&emsp;Partial ordering of function templates&emsp;[temp.func.order]'>ordering rules for function
templates</a>:
<ul class='itemize'><li id='temp.class.order-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.class.order-1.1'>(1.1)</a></div><div class='texpara'><div id='temp.class.order-1.1.sentence-1' class='sentence'>Each of the two
function templates has the same template parameters
and <a href='temp.constr.decl#def:associated_constraints' title='13.5.3&emsp;Constrained declarations&emsp;[temp.constr.decl]'>associated constraints</a>
as the corresponding partial specialization<a class='hidden_link' href='#temp.class.order-1.1.sentence-1'>.</a></div></div></li><li id='temp.class.order-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.class.order-1.2'>(1.2)</a></div><div class='texpara'><div id='temp.class.order-1.2.sentence-1' class='sentence'>Each function template
has a single function parameter
whose type is a class template specialization where the template arguments
are the corresponding template parameters from the function template
for each template argument
in the <a href='temp.names#nt:template-argument-list' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument-list'><span class='textsf'><i >template-argument-list</i></span></span></a>
of the <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id___'><span class='textsf'><i >simple-template-id</i></span></span></a>
of the partial specialization<a class='hidden_link' href='#temp.class.order-1.2.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para nonNormativeOnly' id='temp.class.order-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.class.order-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3482'>#</a></div><div class='texpara'><div id='temp.class.order-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.class.order-example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I, <span class='keyword'>int</span> J, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I, <span class='keyword'>int</span> J<span class='anglebracket'>&gt;</span>          <span class='keyword'>class</span> X<span class='anglebracket'>&lt;</span>I, J, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;         <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span>                 <span class='keyword'>class</span> X<span class='anglebracket'>&lt;</span>I, I, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;         <span class='comment'>// #2</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I0, <span class='keyword'>int</span> J0<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>X<span class='anglebracket'>&lt;</span>I0, J0, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;                <span class='comment'>// A</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I0<span class='anglebracket'>&gt;</span>         <span class='keyword'>void</span> f<span class='parenthesis'>(</span>X<span class='anglebracket'>&lt;</span>I0, I0, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;                <span class='comment'>// B</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>auto</span> v<span class='anglebracket'>&gt;</span>    <span class='keyword'>class</span> Y <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>auto</span><span class='operator'>*</span> p<span class='anglebracket'>&gt;</span>   <span class='keyword'>class</span> Y<span class='anglebracket'>&lt;</span>p<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                            <span class='comment'>// #3</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>auto</span><span class='operator'>*</span><span class='operator'>*</span> pp<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y<span class='anglebracket'>&lt;</span>pp<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                           <span class='comment'>// #4</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>auto</span><span class='operator'>*</span> p0<span class='anglebracket'>&gt;</span>   <span class='keyword'>void</span> g<span class='parenthesis'>(</span>Y<span class='anglebracket'>&lt;</span>p0<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;                            <span class='comment'>// C</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>auto</span><span class='operator'>*</span><span class='operator'>*</span> pp0<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>Y<span class='anglebracket'>&lt;</span>pp0<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;                           <span class='comment'>// D</span>
</span></div><div class='texpara'><div id='temp.class.order-2.sentence-1' class='sentence'>According to the ordering rules for function templates,
the function template
<i >B</i>
is more specialized than the function template
<i >A</i>
and
the function template
<i >D</i>
is more specialized than the function template
<i >C</i><a class='hidden_link' href='#temp.class.order-2.sentence-1'>.</a></div> <div id='temp.class.order-2.sentence-2' class='sentence'>Therefore, the partial specialization #2
is more specialized than the partial specialization #1
and the partial specialization #4
is more specialized than the partial specialization #3<a class='hidden_link' href='#temp.class.order-2.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div> <div id='temp.class.order-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.class.order-example-2'>2</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> t<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> D <span class='operator'>=</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> t<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> S <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;   <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>D T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;   <span class='comment'>// #2</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;     <span class='comment'>// A</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>D T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;     <span class='comment'>// B</span>
</span> <div id='temp.class.order-2.sentence-3' class='sentence'>
The partial specialization #2 is more specialized than #1
because <span class='texttt'>B</span> is more specialized than <span class='texttt'>A</span><a class='hidden_link' href='#temp.class.order-2.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='mfunc' class='section'><h4 ><a class='secnum' href='#mfunc' style='min-width:95pt'>13.7.6.4</a> Members of class template specializations <a class='abbr_ref' href='temp.class.spec.mfunc'>[temp.class.spec.mfunc]</a></h4><div class='para' id='mfunc-1'><div class='marginalizedparent'><a class='marginalized' href='#mfunc-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3533'>#</a></div><div class='texpara'><div id='mfunc-1.sentence-1' class='sentence'>The template parameter list of a member of a class template partial
specialization shall match the template parameter list of the class template
partial specialization<a class='hidden_link' href='#mfunc-1.sentence-1'>.</a></div> <div id='mfunc-1.sentence-2' class='sentence'>The template argument list of a member of a class template partial
specialization shall match the template argument list of the class template
partial specialization<a class='hidden_link' href='#mfunc-1.sentence-2'>.</a></div> <div id='mfunc-1.sentence-3' class='sentence'>A class template partial specialization is a distinct template<a class='hidden_link' href='#mfunc-1.sentence-3'>.</a></div> <div id='mfunc-1.sentence-4' class='sentence'>The members of the class template partial specialization are
unrelated to the members of the primary template<a class='hidden_link' href='#mfunc-1.sentence-4'>.</a></div> <div id='mfunc-1.sentence-5' class='sentence'>Class template partial specialization members that are used in a way that
requires a definition shall be defined; the definitions of members of the
primary template are never used as definitions for members of a class
template partial specialization<a class='hidden_link' href='#mfunc-1.sentence-5'>.</a></div> <div id='mfunc-1.sentence-6' class='sentence'>An explicit specialization of a member of a class template partial
specialization is declared in the same way as an explicit specialization of
the primary template<a class='hidden_link' href='#mfunc-1.sentence-6'>.</a></div> <div id='mfunc-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#mfunc-example-1'>1</a></i>: <span class='codeblock'><span class='comment'>// primary class template</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='comment'>// member of primary class template</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>T,I<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='comment'>// class template partial specialization</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>T,<span class='literal'>2</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='comment'>// member of class template partial specialization</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>T,<span class='literal'>2</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='comment'>// explicit specialization</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='literal'>2</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='literal'>0</span><span class='anglebracket'>&gt;</span> a0;
  A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='literal'>2</span><span class='anglebracket'>&gt;</span> a2;
  a0<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK, uses definition of primary template's member</span>
  a2<span class='operator'>.</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK, uses definition of partial specialization's member</span>
  a2<span class='operator'>.</span>h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK, uses definition of explicit specialization's member</span>
  a2<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// error: no definition of <span class='tcode_in_codeblock'>f</span> for <span class='tcode_in_codeblock'>A&lt;T,2&gt;</span>; the primary template is not used here</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='mfunc-2'><div class='marginalizedparent'><a class='marginalized' href='#mfunc-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/templates.tex#L3584'>#</a></div><div class='texpara'><div id='mfunc-2.sentence-1' class='sentence'>If a member template of a class template is partially specialized,
the member template partial specializations are member templates of
the enclosing class template;
if the enclosing class template is instantiated (<a href='temp.inst' title='13.9.2&emsp;Implicit instantiation'>[temp.<span class='shy'></span>inst]</a>, <a href='temp.explicit' title='13.9.3&emsp;Explicit instantiation'>[temp.<span class='shy'></span>explicit]</a>),
a declaration for every member template partial specialization is also
instantiated as part of creating the members of the class template
specialization<a class='hidden_link' href='#mfunc-2.sentence-1'>.</a></div> <div id='mfunc-2.sentence-2' class='sentence'>If the primary member template is explicitly specialized for a given
(implicit) specialization of the enclosing class template,
the partial specializations of the member template are ignored for this
specialization of the enclosing class template<a class='hidden_link' href='#mfunc-2.sentence-2'>.</a></div> <div id='mfunc-2.sentence-3' class='sentence'>If a partial specialization of the member template is explicitly specialized
for a given (implicit) specialization of the enclosing class template,
the primary member template and its other partial specializations are
still considered for this specialization of the enclosing class template<a class='hidden_link' href='#mfunc-2.sentence-3'>.</a></div> <div id='mfunc-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#mfunc-example-2'>2</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;                               <span class='comment'>// #1</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B<span class='anglebracket'>&lt;</span>T2<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;                          <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;            <span class='comment'>// #3</span>

A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span>  abcip;                                        <span class='comment'>// uses #2</span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> absip;                                        <span class='comment'>// uses #3</span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>  abci;                                          <span class='comment'>// uses #1</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></div></body></html>