<!DOCTYPE html><html lang='en'><head><title>[support.dynamic]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>17</a> Language support library <a class='abbr_ref' href='./#support'>[support]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>17.6</a> Dynamic memory management <a class='abbr_ref'>[support.dynamic]</a></h2><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:80pt'>17.6.1</a> General <a class='abbr_ref' href='support.dynamic.general'>[support.dynamic.general]</a></h3><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2093'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'>The header <span id='header:<new>'><span id=':<new>'><span class='texttt'><span class='anglebracket'>&lt;</span><span class='keyword'>new</span><span class='anglebracket'>&gt;</span></span></span></span> defines several
functions that manage the allocation of dynamic storage in a program<a class='hidden_link' href='#general-1.sentence-1'>.</a></div> <div id='general-1.sentence-2' class='sentence'>It also defines components for reporting storage management errors<a class='hidden_link' href='#general-1.sentence-2'>.</a></div></div></div></div><div id='new.syn' class='section'><h3 ><a class='secnum' href='#new.syn' style='min-width:80pt'>17.6.2</a> Header <span class='texttt'>&lt;new&gt;</span> synopsis <a class='abbr_ref' href='new.syn'>[new.syn]</a></h3><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='comment'>// <a href='#alloc.errors' title='17.6.4&emsp;Storage allocation errors'>[alloc.<span class='shy'></span>errors]</a>, storage allocation errors</span>
  <span class='keyword'>class</span> bad_alloc;
  <span class='keyword'>class</span> bad_array_new_length;

  <span class='keyword'>struct</span> destroying_delete_t <span class='curlybracket'>{</span>
    <span class='keyword'>explicit</span> destroying_delete_t<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  <span class='curlybracket'>}</span>;
  <span class='keyword'>inline</span> <span class='keyword'>constexpr</span> destroying_delete_t destroying_delete<span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

  <span class='comment'>// global <span class='tcode_in_codeblock'>operator new</span> control  <a class='index' id='lib:align_val_t'></a>  <a class='index' id='lib:destroying_delete_t'></a>  <a class='index' id='lib:destroying_delete'></a>  <a class='index' id='lib:nothrow_t'></a>  <a class='index' id='lib:nothrow'></a></span>
  <span class='keyword'>enum</span> <span class='keyword'>class</span> align_val_t <span class='operator'>:</span> size_t <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

  <span class='keyword'>struct</span> nothrow_t <span class='curlybracket'>{</span> <span class='keyword'>explicit</span> nothrow_t<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>; <span class='curlybracket'>}</span>;
  <span class='keyword'>extern</span> <span class='keyword'>const</span> nothrow_t nothrow;

  <span class='keyword'>using</span> new_handler <span class='operator'>=</span> <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  new_handler get_new_handler<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
  new_handler set_new_handler<span class='parenthesis'>(</span>new_handler new_p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#ptr.launder' title='17.6.5&emsp;Pointer optimization barrier'>[ptr.<span class='shy'></span>launder]</a>, pointer optimization barrier</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> T<span class='operator'>*</span> launder<span class='parenthesis'>(</span>T<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

  <span class='comment'>// <a href='#hardware.interference' title='17.6.6&emsp;Hardware interference size'>[hardware.<span class='shy'></span>interference]</a>, hardware interference size</span>
  <span class='keyword'>inline</span> <span class='keyword'>constexpr</span> size_t hardware_destructive_interference_size <span class='operator'>=</span> <i >implementation-defined</i>;
  <span class='keyword'>inline</span> <span class='keyword'>constexpr</span> size_t hardware_constructive_interference_size <span class='operator'>=</span> <i >implementation-defined</i>;
<span class='curlybracket'>}</span>

<span class='comment'>// <a href='#new.delete' title='17.6.3&emsp;Storage allocation and deallocation'>[new.<span class='shy'></span>delete]</a>, storage allocation and deallocation</span>
<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size<span class='parenthesis'>)</span>;
<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, std<span class='operator'>::</span>align_val_t alignment<span class='parenthesis'>)</span>;
<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, std<span class='operator'>::</span>align_val_t alignment,
                                 <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>size_t size<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>align_val_t alignment<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>size_t size, std<span class='operator'>::</span>align_val_t alignment<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>align_val_t alignment, <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size<span class='parenthesis'>)</span>;
<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, std<span class='operator'>::</span>align_val_t alignment<span class='parenthesis'>)</span>;
<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, std<span class='operator'>::</span>align_val_t alignment,
                                   <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>size_t size<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>align_val_t alignment<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>size_t size, std<span class='operator'>::</span>align_val_t alignment<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>align_val_t alignment, <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;

<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span>  <span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, <span class='keyword'>void</span><span class='operator'>*</span> ptr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, <span class='keyword'>void</span><span class='operator'>*</span> ptr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span>  <span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, <span class='keyword'>void</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span>  <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, <span class='keyword'>void</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</span></div></div><div id='new.delete' class='section'><h3 ><a class='secnum' href='#new.delete' style='min-width:80pt'>17.6.3</a> Storage allocation and deallocation <a class='abbr_ref' href='new.delete'>[new.delete]</a></h3><div id='new.delete.general' class='section'><h4 ><a class='secnum' href='#new.delete.general' style='min-width:95pt'>17.6.3.1</a> General <a class='abbr_ref' href='new.delete.general'>[new.delete.general]</a></h4><div class='para' id='new.delete.general-1'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2170'>#</a></div><div class='texpara'><div id='new.delete.general-1.sentence-1' class='sentence'>Except where otherwise specified, the provisions of <a href='basic.stc.dynamic' title='6.7.5.5&emsp;Dynamic storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic]</a>
apply to the library versions of <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span> and <span class='texttt'><span class='keyword'>operator</span>
<span class='keyword'>delete</span></span><a class='hidden_link' href='#new.delete.general-1.sentence-1'>.</a></div> <div id='new.delete.general-1.sentence-2' class='sentence'>If the value of an alignment argument
passed to any of these functions
is not a valid alignment value,
the behavior is undefined<a class='hidden_link' href='#new.delete.general-1.sentence-2'>.</a></div></div></div></div><div id='new.delete.single' class='section'><h4 ><a class='secnum' href='#new.delete.single' style='min-width:95pt'>17.6.3.2</a> Single-object forms <a class='abbr_ref' href='new.delete.single'>[new.delete.single]</a></h4><div class='texpara'><div id='lib:operator,new'><div id='lib:new,operator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:new,operator'>ðŸ”—</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size<span class='parenthesis'>)</span>;
<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, std<span class='operator'>::</span>align_val_t alignment<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='new.delete.single-1'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2194'>#</a></div><div class='texpara'><div id='new.delete.single-1.sentence-1' class='sentence'><i >Effects</i>: The
<a href='basic.stc.dynamic.allocation' title='6.7.5.5.2&emsp;Allocation functions&emsp;[basic.stc.dynamic.allocation]'>allocation functions</a>
called by a
<a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression'><span class='textsf'><i >new-expression</i></span></span></a> (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>)
to allocate
<span class='texttt'>size</span> bytes of storage<a class='hidden_link' href='#new.delete.single-1.sentence-1'>.</a></div> <div id='new.delete.single-1.sentence-2' class='sentence'>The second form is called for a type with new-extended alignment, and
the first form is called otherwise<a class='hidden_link' href='#new.delete.single-1.sentence-2'>.</a></div></div></div></div><div class='para' id='new.delete.single-2'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2205'>#</a></div><div class='texpara'><div id='new.delete.single-2.sentence-1' class='sentence'><i >Replaceable</i>: A C++ program may define functions with either of these function signatures,
and thereby displace the default versions defined by the
C++ standard library<a class='hidden_link' href='#new.delete.single-2.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.single-3'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2209'>#</a></div><div class='texpara'><div id='new.delete.single-3.sentence-1' class='sentence'><i >Required behavior</i>: Return a non-null pointer to suitably aligned storage (<a href='basic.stc.dynamic' title='6.7.5.5&emsp;Dynamic storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic]</a>),
or else throw a
<span class='texttt'>bad_&shy;alloc</span>
<a class='index' id='lib:bad_alloc'></a>exception<a class='hidden_link' href='#new.delete.single-3.sentence-1'>.</a></div> <div id='new.delete.single-3.sentence-2' class='sentence'>This requirement is binding on any replacement versions of these functions<a class='hidden_link' href='#new.delete.single-3.sentence-2'>.</a></div></div></div></div><div class='para' id='new.delete.single-4'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2218'>#</a></div><div class='texpara'><div id='new.delete.single-4.sentence-1' class='sentence'><i >Default behavior</i>: <ul class='itemize'><li id='new.delete.single-4.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#new.delete.single-4.1'>(4.1)</a></div><div class='texpara'><div id='new.delete.single-4.1.sentence-1' class='sentence'>Executes a loop:
Within the loop, the function first attempts to allocate the requested storage<a class='hidden_link' href='#new.delete.single-4.1.sentence-1'>.</a></div> <div id='new.delete.single-4.1.sentence-2' class='sentence'>Whether the attempt involves a call to the C standard library functions
<span class='texttt'>malloc</span> or <span class='texttt'>aligned_&shy;alloc</span>
is unspecified<a class='hidden_link' href='#new.delete.single-4.1.sentence-2'>.</a></div> <a class='index' id=':unspecified'></a></div></li><li id='new.delete.single-4.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#new.delete.single-4.2'>(4.2)</a></div><div class='texpara'><div id='new.delete.single-4.2.sentence-1' class='sentence'>Returns a pointer to the allocated storage if the attempt is successful<a class='hidden_link' href='#new.delete.single-4.2.sentence-1'>.</a></div> <div id='new.delete.single-4.2.sentence-2' class='sentence'>Otherwise, if the
current <span class='texttt'>new_&shy;handler</span> (<a href='#get.new.handler' title='17.6.4.5&emsp;get_&shy;new_&shy;handler'>[get.<span class='shy'></span>new.<span class='shy'></span>handler]</a>) is
a null pointer value, throws
<span class='texttt'>bad_&shy;alloc</span><a class='hidden_link' href='#new.delete.single-4.2.sentence-2'>.</a></div></div></li><li id='new.delete.single-4.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#new.delete.single-4.3'>(4.3)</a></div><div class='texpara'><div id='new.delete.single-4.3.sentence-1' class='sentence'>Otherwise, the function calls the current
<a href='#new.handler' title='17.6.4.3&emsp;Type new_&shy;handler&emsp;[new.handler]'><span class='texttt'>new_&shy;handler</span></a> function<a class='hidden_link' href='#new.delete.single-4.3.sentence-1'>.</a></div> <div id='new.delete.single-4.3.sentence-2' class='sentence'>If the called function returns, the loop repeats<a class='hidden_link' href='#new.delete.single-4.3.sentence-2'>.</a></div></div></li><li id='new.delete.single-4.4'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#new.delete.single-4.4'>(4.4)</a></div><div class='texpara'><div id='new.delete.single-4.4.sentence-1' class='sentence'>The loop terminates when an attempt to allocate the requested storage is
successful or when a called
<span class='texttt'>new_&shy;handler</span>
function does not return<a class='hidden_link' href='#new.delete.single-4.4.sentence-1'>.</a></div></div></li></ul></div></div></div></div><div class='texpara'><div id='lib:operator,new_'><div id='lib:new,operator_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:new,operator_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, std<span class='operator'>::</span>align_val_t alignment,
                                 <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='new.delete.single-5'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2254'>#</a></div><div class='texpara'><div id='new.delete.single-5.sentence-1' class='sentence'><i >Effects</i>: Same as above, except that these are called by a placement version of a
<a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_'><span class='textsf'><i >new-expression</i></span></span></a>
when a C++ program prefers a null pointer result as an error indication,
instead of a
<span class='texttt'>bad_&shy;alloc</span>
exception<a class='hidden_link' href='#new.delete.single-5.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.single-6'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2263'>#</a></div><div class='texpara'><div id='new.delete.single-6.sentence-1' class='sentence'><i >Replaceable</i>: A C++ program may define functions with either of these function signatures,
and thereby displace the default versions defined by the
C++ standard library<a class='hidden_link' href='#new.delete.single-6.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.single-7'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2267'>#</a></div><div class='texpara'><div id='new.delete.single-7.sentence-1' class='sentence'><i >Required behavior</i>: Return a non-null pointer to suitably aligned storage (<a href='basic.stc.dynamic' title='6.7.5.5&emsp;Dynamic storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic]</a>),
or else return a null pointer<a class='hidden_link' href='#new.delete.single-7.sentence-1'>.</a></div> <div id='new.delete.single-7.sentence-2' class='sentence'>Each of these nothrow versions of
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span>
returns a pointer obtained as if
acquired from the (possibly replaced)
corresponding non-placement function<a class='hidden_link' href='#new.delete.single-7.sentence-2'>.</a></div> <div id='new.delete.single-7.sentence-3' class='sentence'>This requirement is binding on any replacement versions of these functions<a class='hidden_link' href='#new.delete.single-7.sentence-3'>.</a></div></div></div></div><div class='para' id='new.delete.single-8'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2278'>#</a></div><div class='texpara'><div id='new.delete.single-8.sentence-1' class='sentence'><i >Default behavior</i>: Calls <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>size<span class='parenthesis'>)</span></span>,
or <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>size, alignment<span class='parenthesis'>)</span></span>,
respectively<a class='hidden_link' href='#new.delete.single-8.sentence-1'>.</a></div> <div id='new.delete.single-8.sentence-2' class='sentence'>If the call returns normally,
returns the result of that call<a class='hidden_link' href='#new.delete.single-8.sentence-2'>.</a></div> <div id='new.delete.single-8.sentence-3' class='sentence'>Otherwise, returns a null pointer<a class='hidden_link' href='#new.delete.single-8.sentence-3'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='new.delete.single-9'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2287'>#</a></div><div class='texpara'><div id='new.delete.single-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#new.delete.single-example-1'>1</a></i>: <span class='codeblock'>T<span class='operator'>*</span> p1 <span class='operator'>=</span> <span class='keyword'>new</span> T;                  <span class='comment'>// throws <span class='tcode_in_codeblock'>bad_&shy;alloc</span> if it fails</span>
T<span class='operator'>*</span> p2 <span class='operator'>=</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>nothrow<span class='parenthesis'>)</span> T;         <span class='comment'>// returns <span class='tcode_in_codeblock'>nullptr</span> if it fails</span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:operator,delete'><div id='lib:delete,operator'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:delete,operator'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>size_t size<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>align_val_t alignment<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>size_t size, std<span class='operator'>::</span>align_val_t alignment<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='new.delete.single-10'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2305'>#</a></div><div class='texpara'><div id='new.delete.single-10.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>ptr</span> is a null pointer or
its value represents the address of
a block of memory allocated by
an earlier call to a (possibly replaced)
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_&shy;t<span class='parenthesis'>)</span></span>
or
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_&shy;t, std<span class='operator'>&#x200b;::&#x200b;</span>align_&shy;val_&shy;t<span class='parenthesis'>)</span></span>
which has not been invalidated by an intervening call to
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span></span><a class='hidden_link' href='#new.delete.single-10.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.single-11'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2317'>#</a></div><div class='texpara'><div id='new.delete.single-11.sentence-1' class='sentence'>If an implementation has strict pointer safety (<a href='basic.stc.dynamic.safety' title='6.7.5.5.4&emsp;Safely-derived pointers'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>safety]</a>)
then <span class='texttt'>ptr</span> is a safely-derived pointer<a class='hidden_link' href='#new.delete.single-11.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.single-12'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2321'>#</a></div><div class='texpara'><div id='new.delete.single-12.sentence-1' class='sentence'>If the <span class='texttt'>alignment</span> parameter is not present,
<span class='texttt'>ptr</span> was returned by an allocation function
without an <span class='texttt'>alignment</span> parameter<a class='hidden_link' href='#new.delete.single-12.sentence-1'>.</a></div> <div id='new.delete.single-12.sentence-2' class='sentence'>If present, the <span class='texttt'>alignment</span> argument
is equal to the <span class='texttt'>alignment</span> argument
passed to the allocation function that returned <span class='texttt'>ptr</span><a class='hidden_link' href='#new.delete.single-12.sentence-2'>.</a></div> <div id='new.delete.single-12.sentence-3' class='sentence'>If present, the <span class='texttt'>size</span> argument
is equal to the <span class='texttt'>size</span> argument
passed to the allocation function that returned <span class='texttt'>ptr</span><a class='hidden_link' href='#new.delete.single-12.sentence-3'>.</a></div></div></div></div><div class='para' id='new.delete.single-13'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2332'>#</a></div><div class='texpara'><div id='new.delete.single-13.sentence-1' class='sentence'><i >Effects</i>: The
deallocation functions (<a href='basic.stc.dynamic.deallocation' title='6.7.5.5.3&emsp;Deallocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>deallocation]</a>)
called by a
<a href='expr.delete#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression'><span class='textsf'><i >delete-expression</i></span></span></a> (<a href='expr.delete' title='7.6.2.9&emsp;Delete'>[expr.<span class='shy'></span>delete]</a>)
to render the value of <span class='texttt'>ptr</span> invalid<a class='hidden_link' href='#new.delete.single-13.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.single-14'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2340'>#</a></div><div class='texpara'><div id='new.delete.single-14.sentence-1' class='sentence'><i >Replaceable</i>: A C++ program may define functions with any of these function signatures,
and thereby displace the default versions defined by the
C++ standard library<a class='hidden_link' href='#new.delete.single-14.sentence-1'>.</a></div> <div id='new.delete.single-14.sentence-2' class='sentence'>If a function without a <span class='texttt'>size</span> parameter is defined,
the program should also define
the corresponding function with a <span class='texttt'>size</span> parameter<a class='hidden_link' href='#new.delete.single-14.sentence-2'>.</a></div> <div id='new.delete.single-14.sentence-3' class='sentence'>If a function with a <span class='texttt'>size</span> parameter is defined,
the program shall also define
the corresponding version without the <span class='texttt'>size</span> parameter<a class='hidden_link' href='#new.delete.single-14.sentence-3'>.</a></div> <div id='new.delete.single-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#new.delete.single-note-1'>1</a></i>: <div id='new.delete.single-14.sentence-4' class='sentence'>The default behavior below might change in the future, which will require
replacing both deallocation functions when replacing the allocation function<a class='hidden_link' href='#new.delete.single-14.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='new.delete.single-15'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2354'>#</a></div><div class='texpara'><div id='new.delete.single-15.sentence-1' class='sentence'><i >Required behavior</i>: A call to an <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span></span>
with a <span class='texttt'>size</span> parameter
may be changed to
a call to the corresponding <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span></span>
without a <span class='texttt'>size</span> parameter,
without affecting memory allocation<a class='hidden_link' href='#new.delete.single-15.sentence-1'>.</a></div> <div id='new.delete.single-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#new.delete.single-note-2'>2</a></i>: <div id='new.delete.single-15.sentence-2' class='sentence'>A conforming implementation is for
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>&#x200b;::&#x200b;</span>size_&shy;t size<span class='parenthesis'>)</span></span> to simply call
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span>ptr<span class='parenthesis'>)</span></span><a class='hidden_link' href='#new.delete.single-15.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='new.delete.single-16'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2368'>#</a></div><div class='texpara'><div id='new.delete.single-16.sentence-1' class='sentence'><i >Default behavior</i>: The functions that have a <span class='texttt'>size</span> parameter
forward their other parameters
to the corresponding function without a <span class='texttt'>size</span> parameter<a class='hidden_link' href='#new.delete.single-16.sentence-1'>.</a></div> <div id='new.delete.single-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#new.delete.single-note-3'>3</a></i>: <div id='new.delete.single-16.sentence-2' class='sentence'>See the note in the above <i >Replaceable</i>: paragraph<a class='hidden_link' href='#new.delete.single-16.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='new.delete.single-17'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2377'>#</a></div><div class='texpara'><div id='new.delete.single-17.sentence-1' class='sentence'><i >Default behavior</i>: If <span class='texttt'>ptr</span> is null, does nothing<a class='hidden_link' href='#new.delete.single-17.sentence-1'>.</a></div> <div id='new.delete.single-17.sentence-2' class='sentence'>Otherwise, reclaims the
storage allocated by the earlier call to <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span><a class='hidden_link' href='#new.delete.single-17.sentence-2'>.</a></div></div></div></div><div class='para' id='new.delete.single-18'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2382'>#</a></div><div class='texpara'><div id='new.delete.single-18.sentence-1' class='sentence'><i >Remarks</i>: It is unspecified under what conditions part or all of such
<a class='index' id=':unspecified_'></a>reclaimed storage will be allocated by subsequent
calls to
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span>
or any of
<span class='texttt'>aligned_&shy;alloc</span>,
<span class='texttt'>calloc</span>,
<span class='texttt'>malloc</span>,
or
<span class='texttt'>realloc</span>,
declared in <a href='cstdlib.syn#header:%3ccstdlib%3e' title='17.2.2&emsp;Header &lt;cstdlib&gt; synopsis&emsp;[cstdlib.syn]'><span id='headerref:<cstdlib>'><span id=':<cstdlib>'><span class='texttt'>&lt;cstdlib&gt;</span></span></span></a><a class='hidden_link' href='#new.delete.single-18.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:operator,delete_'><div id='lib:delete,operator_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:delete,operator_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>align_val_t alignment, <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='new.delete.single-19'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2405'>#</a></div><div class='texpara'><div id='new.delete.single-19.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>ptr</span> is a null pointer or
its value represents the address of
a block of memory allocated by
an earlier call to a (possibly replaced)
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_&shy;t<span class='parenthesis'>)</span></span>
or
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_&shy;t, std<span class='operator'>&#x200b;::&#x200b;</span>align_&shy;val_&shy;t<span class='parenthesis'>)</span></span>
which has not been invalidated by an intervening call to
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span></span><a class='hidden_link' href='#new.delete.single-19.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.single-20'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2417'>#</a></div><div class='texpara'><div id='new.delete.single-20.sentence-1' class='sentence'>If an implementation has strict pointer safety (<a href='basic.stc.dynamic.safety' title='6.7.5.5.4&emsp;Safely-derived pointers'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>safety]</a>)
then <span class='texttt'>ptr</span> is a safely-derived pointer<a class='hidden_link' href='#new.delete.single-20.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.single-21'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2421'>#</a></div><div class='texpara'><div id='new.delete.single-21.sentence-1' class='sentence'>If the <span class='texttt'>alignment</span> parameter is not present,
<span class='texttt'>ptr</span> was returned by an allocation function
without an <span class='texttt'>alignment</span> parameter<a class='hidden_link' href='#new.delete.single-21.sentence-1'>.</a></div> <div id='new.delete.single-21.sentence-2' class='sentence'>If present, the <span class='texttt'>alignment</span> argument
is equal to the <span class='texttt'>alignment</span> argument
passed to the allocation function that returned <span class='texttt'>ptr</span><a class='hidden_link' href='#new.delete.single-21.sentence-2'>.</a></div></div></div></div><div class='para' id='new.delete.single-22'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2429'>#</a></div><div class='texpara'><div id='new.delete.single-22.sentence-1' class='sentence'><i >Effects</i>: The
deallocation functions (<a href='basic.stc.dynamic.deallocation' title='6.7.5.5.3&emsp;Deallocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>deallocation]</a>)
called by the implementation
to render the value of <span class='texttt'>ptr</span> invalid
when the constructor invoked from a nothrow
placement version of the <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression__'><span class='textsf'><i >new-expression</i></span></span></a> throws an exception<a class='hidden_link' href='#new.delete.single-22.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.single-23'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2438'>#</a></div><div class='texpara'><div id='new.delete.single-23.sentence-1' class='sentence'><i >Replaceable</i>: A C++ program may define functions with either of these function signatures,
and thereby displace the default versions defined by the
C++ standard library<a class='hidden_link' href='#new.delete.single-23.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.single-24'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.single-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2442'>#</a></div><div class='texpara'><div id='new.delete.single-24.sentence-1' class='sentence'><i >Default behavior</i>: Calls <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span>ptr<span class='parenthesis'>)</span></span>,
or <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span>ptr, alignment<span class='parenthesis'>)</span></span>,
respectively<a class='hidden_link' href='#new.delete.single-24.sentence-1'>.</a></div></div></div></div></div><div id='new.delete.array' class='section'><h4 ><a class='secnum' href='#new.delete.array' style='min-width:95pt'>17.6.3.3</a> Array forms <a class='abbr_ref' href='new.delete.array'>[new.delete.array]</a></h4><div class='texpara'><div id='lib:operator,new__'><div id='lib:new,operator__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:new,operator__'>ðŸ”—</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size<span class='parenthesis'>)</span>;
<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, std<span class='operator'>::</span>align_val_t alignment<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='new.delete.array-1'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2458'>#</a></div><div class='texpara'><div id='new.delete.array-1.sentence-1' class='sentence'><i >Effects</i>: The
<a href='basic.stc.dynamic.allocation' title='6.7.5.5.2&emsp;Allocation functions&emsp;[basic.stc.dynamic.allocation]'>allocation functions</a>
called by the array form of a
<a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression___'><span class='textsf'><i >new-expression</i></span></span></a> (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>)
to allocate
<span class='texttt'>size</span> bytes of storage<a class='hidden_link' href='#new.delete.array-1.sentence-1'>.</a></div> <div id='new.delete.array-1.sentence-2' class='sentence'>The second form is called for a type with new-extended alignment, and
the first form is called otherwise<a class='hidden_link' href='#new.delete.array-1.sentence-2'>.</a><a class='footnotenum' href='#footnote-219' id='footnoteref-219' title='It is not the direct responsibility of operator new[] or operator delete[] to note the repetition count or element size of the array. Those operations are performed elsewhere in the array new and delete expressions. The array new expression, can, however, increase the size argument to operator new[] to obtain space to store supplemental information.'>219</a></div></div></div></div><div class='para' id='new.delete.array-2'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2486'>#</a></div><div class='texpara'><div id='new.delete.array-2.sentence-1' class='sentence'><i >Replaceable</i>: A C++ program may define functions with either of these function signatures,
and thereby displace the default versions defined by the
C++ standard library<a class='hidden_link' href='#new.delete.array-2.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.array-3'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2490'>#</a></div><div class='texpara'><div id='new.delete.array-3.sentence-1' class='sentence'><i >Required behavior</i>: Same as for
the corresponding single-object forms<a class='hidden_link' href='#new.delete.array-3.sentence-1'>.</a></div> <div id='new.delete.array-3.sentence-2' class='sentence'>This requirement is binding on any replacement versions of these functions<a class='hidden_link' href='#new.delete.array-3.sentence-2'>.</a></div></div></div></div><div class='para' id='new.delete.array-4'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2496'>#</a></div><div class='texpara'><div id='new.delete.array-4.sentence-1' class='sentence'><i >Default behavior</i>: Returns
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>size<span class='parenthesis'>)</span></span>,
or
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>size, alignment<span class='parenthesis'>)</span></span>,
respectively<a class='hidden_link' href='#new.delete.array-4.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:operator,new___'><div id='lib:new,operator___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:new,operator___'>ðŸ”—</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, std<span class='operator'>::</span>align_val_t alignment,
                                   <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='new.delete.array-5'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2513'>#</a></div><div class='texpara'><div id='new.delete.array-5.sentence-1' class='sentence'><i >Effects</i>: Same as above, except that these are called by a placement version of a
<a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression____'><span class='textsf'><i >new-expression</i></span></span></a>
when a C++ program prefers a null pointer result as an error indication,
instead of a
<span class='texttt'>bad_&shy;alloc</span>
exception<a class='hidden_link' href='#new.delete.array-5.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.array-6'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2522'>#</a></div><div class='texpara'><div id='new.delete.array-6.sentence-1' class='sentence'><i >Replaceable</i>: A C++ program may define functions with either of these function signatures,
and thereby displace the default versions defined by the
C++ standard library<a class='hidden_link' href='#new.delete.array-6.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.array-7'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2526'>#</a></div><div class='texpara'><div id='new.delete.array-7.sentence-1' class='sentence'><i >Required behavior</i>: Return a non-null pointer to suitably aligned storage (<a href='basic.stc.dynamic' title='6.7.5.5&emsp;Dynamic storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic]</a>),
or else return a null pointer<a class='hidden_link' href='#new.delete.array-7.sentence-1'>.</a></div> <div id='new.delete.array-7.sentence-2' class='sentence'>Each of these nothrow versions of
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>
returns a pointer obtained as if
acquired from the (possibly replaced)
corresponding non-placement function<a class='hidden_link' href='#new.delete.array-7.sentence-2'>.</a></div> <div id='new.delete.array-7.sentence-3' class='sentence'>This requirement is binding on any replacement versions of these functions<a class='hidden_link' href='#new.delete.array-7.sentence-3'>.</a></div></div></div></div><div class='para' id='new.delete.array-8'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2537'>#</a></div><div class='texpara'><div id='new.delete.array-8.sentence-1' class='sentence'><i >Default behavior</i>: Calls <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>size<span class='parenthesis'>)</span></span>,
or <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>size, alignment<span class='parenthesis'>)</span></span>,
respectively<a class='hidden_link' href='#new.delete.array-8.sentence-1'>.</a></div> <div id='new.delete.array-8.sentence-2' class='sentence'>If the call returns normally,
returns the result of that call<a class='hidden_link' href='#new.delete.array-8.sentence-2'>.</a></div> <div id='new.delete.array-8.sentence-3' class='sentence'>Otherwise, returns a null pointer<a class='hidden_link' href='#new.delete.array-8.sentence-3'>.</a></div></div></div></div><div class='texpara'><div id='lib:operator,delete__'><div id='lib:delete,operator__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:delete,operator__'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>size_t size<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>align_val_t alignment<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>size_t size, std<span class='operator'>::</span>align_val_t alignment<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='new.delete.array-9'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2556'>#</a></div><div class='texpara'><div id='new.delete.array-9.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>ptr</span> is a null pointer or
its value represents the address of
a block of memory allocated by
an earlier call to a (possibly replaced)
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_&shy;t<span class='parenthesis'>)</span></span>
or
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_&shy;t, std<span class='operator'>&#x200b;::&#x200b;</span>align_&shy;val_&shy;t<span class='parenthesis'>)</span></span>
which has not been invalidated by an intervening call to
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#new.delete.array-9.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.array-10'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2568'>#</a></div><div class='texpara'><div id='new.delete.array-10.sentence-1' class='sentence'>If an implementation has strict pointer safety (<a href='basic.stc.dynamic.safety' title='6.7.5.5.4&emsp;Safely-derived pointers'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>safety]</a>)
then <span class='texttt'>ptr</span> is a safely-derived pointer<a class='hidden_link' href='#new.delete.array-10.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.array-11'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2572'>#</a></div><div class='texpara'><div id='new.delete.array-11.sentence-1' class='sentence'>If the <span class='texttt'>alignment</span> parameter is not present,
<span class='texttt'>ptr</span> was returned by an allocation function
without an <span class='texttt'>alignment</span> parameter<a class='hidden_link' href='#new.delete.array-11.sentence-1'>.</a></div> <div id='new.delete.array-11.sentence-2' class='sentence'>If present, the <span class='texttt'>alignment</span> argument
is equal to the <span class='texttt'>alignment</span> argument
passed to the allocation function that returned <span class='texttt'>ptr</span><a class='hidden_link' href='#new.delete.array-11.sentence-2'>.</a></div> <div id='new.delete.array-11.sentence-3' class='sentence'>If present, the <span class='texttt'>size</span> argument
is equal to the <span class='texttt'>size</span> argument
passed to the allocation function that returned <span class='texttt'>ptr</span><a class='hidden_link' href='#new.delete.array-11.sentence-3'>.</a></div></div></div></div><div class='para' id='new.delete.array-12'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2583'>#</a></div><div class='texpara'><div id='new.delete.array-12.sentence-1' class='sentence'><i >Effects</i>: The
deallocation functions (<a href='basic.stc.dynamic.deallocation' title='6.7.5.5.3&emsp;Deallocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>deallocation]</a>)
called by the array form of a
<a href='expr.delete#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_'><span class='textsf'><i >delete-expression</i></span></span></a>
to render the value of <span class='texttt'>ptr</span> invalid<a class='hidden_link' href='#new.delete.array-12.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.array-13'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2591'>#</a></div><div class='texpara'><div id='new.delete.array-13.sentence-1' class='sentence'><i >Replaceable</i>: A C++ program may define functions with any of these function signatures,
and thereby displace the default versions defined by the
C++ standard library<a class='hidden_link' href='#new.delete.array-13.sentence-1'>.</a></div> <div id='new.delete.array-13.sentence-2' class='sentence'>If a function without a <span class='texttt'>size</span> parameter is defined,
the program should also define
the corresponding function with a <span class='texttt'>size</span> parameter<a class='hidden_link' href='#new.delete.array-13.sentence-2'>.</a></div> <div id='new.delete.array-13.sentence-3' class='sentence'>If a function with a <span class='texttt'>size</span> parameter is defined,
the program shall also define
the corresponding version without the <span class='texttt'>size</span> parameter<a class='hidden_link' href='#new.delete.array-13.sentence-3'>.</a></div> <div id='new.delete.array-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#new.delete.array-note-1'>1</a></i>: <div id='new.delete.array-13.sentence-4' class='sentence'>The default behavior below might change in the future, which will require
replacing both deallocation functions when replacing the allocation function<a class='hidden_link' href='#new.delete.array-13.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='new.delete.array-14'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2605'>#</a></div><div class='texpara'><div id='new.delete.array-14.sentence-1' class='sentence'><i >Required behavior</i>: A call to an <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>
with a <span class='texttt'>size</span> parameter
may be changed to
a call to the corresponding <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>
without a <span class='texttt'>size</span> parameter,
without affecting memory allocation<a class='hidden_link' href='#new.delete.array-14.sentence-1'>.</a></div> <div id='new.delete.array-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#new.delete.array-note-2'>2</a></i>: <div id='new.delete.array-14.sentence-2' class='sentence'>A conforming implementation is for
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>&#x200b;::&#x200b;</span>size_&shy;t size<span class='parenthesis'>)</span></span> to simply call
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>ptr<span class='parenthesis'>)</span></span><a class='hidden_link' href='#new.delete.array-14.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para' id='new.delete.array-15'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2619'>#</a></div><div class='texpara'><div id='new.delete.array-15.sentence-1' class='sentence'><i >Default behavior</i>: The functions that have a <span class='texttt'>size</span> parameter
forward their other parameters
to the corresponding function without a <span class='texttt'>size</span> parameter<a class='hidden_link' href='#new.delete.array-15.sentence-1'>.</a></div> <div id='new.delete.array-15.sentence-2' class='sentence'>The functions that do not have a <span class='texttt'>size</span> parameter
forward their parameters
to the corresponding <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span></span> (single-object) function<a class='hidden_link' href='#new.delete.array-15.sentence-2'>.</a></div></div></div></div><div class='texpara'><div id='lib:operator,delete___'><div id='lib:delete,operator___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:delete,operator___'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, std<span class='operator'>::</span>align_val_t alignment, <span class='keyword'>const</span> std<span class='operator'>::</span>nothrow_t<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='new.delete.array-16'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2636'>#</a></div><div class='texpara'><div id='new.delete.array-16.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>ptr</span> is a null pointer or
its value represents the address of
a block of memory allocated by
an earlier call to a (possibly replaced)
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_&shy;t<span class='parenthesis'>)</span></span>
or
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_&shy;t, std<span class='operator'>&#x200b;::&#x200b;</span>align_&shy;val_&shy;t<span class='parenthesis'>)</span></span>
which has not been invalidated by an intervening call to
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#new.delete.array-16.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.array-17'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2648'>#</a></div><div class='texpara'><div id='new.delete.array-17.sentence-1' class='sentence'>If an implementation has strict pointer safety (<a href='basic.stc.dynamic.safety' title='6.7.5.5.4&emsp;Safely-derived pointers'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>safety]</a>)
then <span class='texttt'>ptr</span> is a safely-derived pointer<a class='hidden_link' href='#new.delete.array-17.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.array-18'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2652'>#</a></div><div class='texpara'><div id='new.delete.array-18.sentence-1' class='sentence'>If the <span class='texttt'>alignment</span> parameter is not present,
<span class='texttt'>ptr</span> was returned by an allocation function
without an <span class='texttt'>alignment</span> parameter<a class='hidden_link' href='#new.delete.array-18.sentence-1'>.</a></div> <div id='new.delete.array-18.sentence-2' class='sentence'>If present, the <span class='texttt'>alignment</span> argument
is equal to the <span class='texttt'>alignment</span> argument
passed to the allocation function that returned <span class='texttt'>ptr</span><a class='hidden_link' href='#new.delete.array-18.sentence-2'>.</a></div></div></div></div><div class='para' id='new.delete.array-19'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2660'>#</a></div><div class='texpara'><div id='new.delete.array-19.sentence-1' class='sentence'><i >Effects</i>: The
deallocation functions (<a href='basic.stc.dynamic.deallocation' title='6.7.5.5.3&emsp;Deallocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>deallocation]</a>)
called by the implementation
to render the value of <span class='texttt'>ptr</span> invalid
when the constructor invoked from a nothrow
placement version of the array <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_____'><span class='textsf'><i >new-expression</i></span></span></a> throws an exception<a class='hidden_link' href='#new.delete.array-19.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.array-20'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2669'>#</a></div><div class='texpara'><div id='new.delete.array-20.sentence-1' class='sentence'><i >Replaceable</i>: A C++ program may define functions with either of these function signatures,
and thereby displace the default versions defined by the
C++ standard library<a class='hidden_link' href='#new.delete.array-20.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.array-21'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.array-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2673'>#</a></div><div class='texpara'><div id='new.delete.array-21.sentence-1' class='sentence'><i >Default behavior</i>: Calls <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>ptr<span class='parenthesis'>)</span></span>,
or <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>ptr, alignment<span class='parenthesis'>)</span></span>,
respectively<a class='hidden_link' href='#new.delete.array-21.sentence-1'>.</a></div></div></div></div><div class='footnote' id='footnote-219'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-219'>219)</a></div><div class='texpara'><div id='footnote-219.sentence-1' class='sentence'>It is not the direct responsibility of
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>
or
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>
to note the repetition count or element size of the array<a class='hidden_link' href='#footnote-219.sentence-1'>.</a></div> <div id='footnote-219.sentence-2' class='sentence'>Those operations are performed elsewhere in the array
<span class='texttt'><span class='keyword'>new</span></span>
and
<span class='texttt'><span class='keyword'>delete</span></span>
expressions<a class='hidden_link' href='#footnote-219.sentence-2'>.</a></div> <div id='footnote-219.sentence-3' class='sentence'>The array
<span class='texttt'><span class='keyword'>new</span></span>
expression, can, however, increase the <span class='texttt'>size</span> argument to
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>
to obtain space to store supplemental information<a class='hidden_link' href='#footnote-219.sentence-3'>.</a></div>&nbsp;<a href='#footnoteref-219'>â®¥</a></div></div></div><div id='new.delete.placement' class='section'><h4 ><a class='secnum' href='#new.delete.placement' style='min-width:95pt'>17.6.3.4</a> Non-allocating forms <a class='abbr_ref' href='new.delete.placement'>[new.delete.placement]</a></h4><div class='para' id='new.delete.placement-1'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.placement-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2682'>#</a></div><div class='texpara'><div id='new.delete.placement-1.sentence-1' class='sentence'>These functions are reserved; a C++ program may not define functions that displace
the versions in the C++ standard library (<a href='constraints' title='16.4.5&emsp;Constraints on programs'>[constraints]</a>)<a class='hidden_link' href='#new.delete.placement-1.sentence-1'>.</a></div> <div id='new.delete.placement-1.sentence-2' class='sentence'>The provisions of <a href='basic.stc.dynamic' title='6.7.5.5&emsp;Dynamic storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic]</a> do not apply to these reserved
placement forms of <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span> and <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span></span><a class='hidden_link' href='#new.delete.placement-1.sentence-2'>.</a></div></div></div><div class='texpara'><div id='lib:operator,new____'><div id='lib:new,operator____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:new,operator____'>ðŸ”—</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, <span class='keyword'>void</span><span class='operator'>*</span> ptr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='new.delete.placement-2'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.placement-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2694'>#</a></div><div class='texpara'><div id='new.delete.placement-2.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>ptr</span><a class='hidden_link' href='#new.delete.placement-2.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.placement-3'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.placement-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2698'>#</a></div><div class='texpara'><div id='new.delete.placement-3.sentence-1' class='sentence'><i >Remarks</i>: Intentionally performs no other action<a class='hidden_link' href='#new.delete.placement-3.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='new.delete.placement-4'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.placement-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2702'>#</a></div><div class='texpara'><div id='new.delete.placement-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#new.delete.placement-example-1'>1</a></i>: <div id='new.delete.placement-4.sentence-1' class='sentence'>This can be useful for constructing an object at a known address:
<span class='codeblock'><span class='keyword'>void</span><span class='operator'>*</span> place <span class='operator'>=</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>Something<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
Something<span class='operator'>*</span> p <span class='operator'>=</span> <span class='keyword'>new</span> <span class='parenthesis'>(</span>place<span class='parenthesis'>)</span> Something<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</span></div> â€”&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:operator,new_____'><div id='lib:new,operator_____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:new,operator_____'>ðŸ”—</a></div><code class='itemdeclcode'><span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t size, <span class='keyword'>void</span><span class='operator'>*</span> ptr<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='new.delete.placement-5'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.placement-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2718'>#</a></div><div class='texpara'><div id='new.delete.placement-5.sentence-1' class='sentence'><i >Returns</i>: <span class='texttt'>ptr</span><a class='hidden_link' href='#new.delete.placement-5.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.placement-6'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.placement-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2722'>#</a></div><div class='texpara'><div id='new.delete.placement-6.sentence-1' class='sentence'><i >Remarks</i>: Intentionally performs no other action<a class='hidden_link' href='#new.delete.placement-6.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:operator,delete____'><div id='lib:delete,operator____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:delete,operator____'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, <span class='keyword'>void</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='new.delete.placement-7'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.placement-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2733'>#</a></div><div class='texpara'><div id='new.delete.placement-7.sentence-1' class='sentence'><i >Preconditions</i>: If an implementation has strict pointer safety (<a href='basic.stc.dynamic.safety' title='6.7.5.5.4&emsp;Safely-derived pointers'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>safety]</a>)
then <span class='texttt'>ptr</span> is a safely-derived pointer<a class='hidden_link' href='#new.delete.placement-7.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.placement-8'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.placement-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2738'>#</a></div><div class='texpara'><div id='new.delete.placement-8.sentence-1' class='sentence'><i >Effects</i>: Intentionally performs no action<a class='hidden_link' href='#new.delete.placement-8.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.placement-9'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.placement-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2742'>#</a></div><div class='texpara'><div id='new.delete.placement-9.sentence-1' class='sentence'><i >Remarks</i>: Default function called when any part of the initialization in a
placement <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression______'><span class='textsf'><i >new-expression</i></span></span></a> that invokes the library's
non-array placement operator new
terminates by throwing an exception (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>)<a class='hidden_link' href='#new.delete.placement-9.sentence-1'>.</a></div></div></div></div><div class='texpara'><div id='lib:operator,delete_____'><div id='lib:delete,operator_____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:delete,operator_____'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span> ptr, <span class='keyword'>void</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div></div><div class='para' id='new.delete.placement-10'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.placement-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2756'>#</a></div><div class='texpara'><div id='new.delete.placement-10.sentence-1' class='sentence'><i >Preconditions</i>: If an implementation has strict pointer safety (<a href='basic.stc.dynamic.safety' title='6.7.5.5.4&emsp;Safely-derived pointers'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>safety]</a>)
then <span class='texttt'>ptr</span> is a safely-derived pointer<a class='hidden_link' href='#new.delete.placement-10.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.placement-11'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.placement-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2761'>#</a></div><div class='texpara'><div id='new.delete.placement-11.sentence-1' class='sentence'><i >Effects</i>: Intentionally performs no action<a class='hidden_link' href='#new.delete.placement-11.sentence-1'>.</a></div></div></div></div><div class='para' id='new.delete.placement-12'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.placement-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2765'>#</a></div><div class='texpara'><div id='new.delete.placement-12.sentence-1' class='sentence'><i >Remarks</i>: Default function called when any part of the initialization in a
placement <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_______'><span class='textsf'><i >new-expression</i></span></span></a> that invokes the library's
array placement operator new
terminates by throwing an exception (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>)<a class='hidden_link' href='#new.delete.placement-12.sentence-1'>.</a></div></div></div></div></div><div id='new.delete.dataraces' class='section'><h4 ><a class='secnum' href='#new.delete.dataraces' style='min-width:95pt'>17.6.3.5</a> Data races <a class='abbr_ref' href='new.delete.dataraces'>[new.delete.dataraces]</a></h4><div class='para' id='new.delete.dataraces-1'><div class='marginalizedparent'><a class='marginalized' href='#new.delete.dataraces-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2775'>#</a></div><div class='texpara'><div id='new.delete.dataraces-1.sentence-1' class='sentence'>For purposes of determining the existence of data races, the library versions
of <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span>, user replacement versions of global <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span>,
the C standard library functions
<span class='texttt'>aligned_&shy;alloc</span>, <span class='texttt'>calloc</span>, and <span class='texttt'>malloc</span>,
the library
versions of <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span></span>, user replacement
versions of <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span></span>, the C standard library function
<span class='texttt'>free</span>, and the C standard library function <span class='texttt'>realloc</span> shall not
introduce a data race (<a href='res.on.data.races' title='16.4.6.10&emsp;Data race avoidance'>[res.<span class='shy'></span>on.<span class='shy'></span>data.<span class='shy'></span>races]</a>)<a class='hidden_link' href='#new.delete.dataraces-1.sentence-1'>.</a></div> <div id='new.delete.dataraces-1.sentence-2' class='sentence'>Calls to these functions that allocate or deallocate a particular unit
of storage shall occur in a single total order, and each such deallocation call
shall <a href='intro.multithread#def:happens_before' title='6.9.2&emsp;Multi-threaded executions and data races&emsp;[intro.multithread]'>happen before</a>
the next allocation (if any) in this order<a class='hidden_link' href='#new.delete.dataraces-1.sentence-2'>.</a></div></div></div></div></div><div id='alloc.errors' class='section'><h3 ><a class='secnum' href='#alloc.errors' style='min-width:80pt'>17.6.4</a> Storage allocation errors <a class='abbr_ref' href='alloc.errors'>[alloc.errors]</a></h3><div id='bad.alloc' class='section'><h4 ><a class='secnum' href='#bad.alloc' style='min-width:95pt'>17.6.4.1</a> Class <span class='texttt'>bad_&shy;alloc</span> <a class='abbr_ref' href='bad.alloc'>[bad.alloc]</a></h4><div class='texpara'><a class='index' id='lib:bad_alloc_'></a>
<span id='lib:bad_alloc,constructor'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> bad_alloc <span class='operator'>:</span> <span class='keyword'>public</span> exception <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='comment'>// see <a href='exception' title='17.9.3&emsp;Class exception'>[exception]</a> for the specification of the special member functions</span>
    <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> what<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='keyword'>override</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></span></div><div class='para' id='bad.alloc-1'><div class='marginalizedparent'><a class='marginalized' href='#bad.alloc-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2806'>#</a></div><div class='texpara'><div id='bad.alloc-1.sentence-1' class='sentence'>The class
<span class='texttt'>bad_&shy;alloc</span>
defines the type of objects thrown as
exceptions by the implementation to report a failure to allocate storage<a class='hidden_link' href='#bad.alloc-1.sentence-1'>.</a></div></div></div><div class='texpara'><div id='lib:bad_alloc,what'><div id='lib:what,bad_alloc'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:what,bad_alloc'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> what<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='keyword'>override</span>;
</code></div></div></div></div><div class='para' id='bad.alloc-2'><div class='marginalizedparent'><a class='marginalized' href='#bad.alloc-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2818'>#</a></div><div class='texpara'><div id='bad.alloc-2.sentence-1' class='sentence'><i >Returns</i>: An <a class='index' id=':return_value_of_bad_alloc::what'></a>implementation-defined <span class='textsc'>ntbs</span><a class='hidden_link' href='#bad.alloc-2.sentence-1'>.</a></div></div></div></div></div><div id='new.badlength' class='section'><h4 ><a class='secnum' href='#new.badlength' style='min-width:95pt'>17.6.4.2</a> Class <span class='texttt'>bad_&shy;array_&shy;new_&shy;length</span> <a class='abbr_ref' href='new.badlength'>[new.badlength]</a></h4><div class='texpara'><a class='index' id='lib:bad_array_new_length'></a><a class='index' id='lib:bad_array_new_length,constructor'></a>
<span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> bad_array_new_length <span class='operator'>:</span> <span class='keyword'>public</span> bad_alloc <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    <span class='comment'>// see <a href='exception' title='17.9.3&emsp;Class exception'>[exception]</a> for the specification of the special member functions</span>
    <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> what<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='keyword'>override</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span></div><div class='para' id='new.badlength-1'><div class='marginalizedparent'><a class='marginalized' href='#new.badlength-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2837'>#</a></div><div class='texpara'><div id='new.badlength-1.sentence-1' class='sentence'>The class <span class='texttt'>bad_&shy;array_&shy;new_&shy;length</span> defines the type of objects thrown as
exceptions by the implementation to report an attempt to allocate an array of size
less than zero or
greater than an <a class='index' id=':maximum_size_of_an_allocated_object'></a>implementation-defined limit (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>)<a class='hidden_link' href='#new.badlength-1.sentence-1'>.</a></div></div></div><div class='texpara'><div id='lib:bad_array_new_length,what'><div id='lib:what,bad_array_new_length'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:what,bad_array_new_length'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> what<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='keyword'>noexcept</span> <span class='keyword'>override</span>;
</code></div></div></div></div><div class='para' id='new.badlength-2'><div class='marginalizedparent'><a class='marginalized' href='#new.badlength-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2849'>#</a></div><div class='texpara'><div id='new.badlength-2.sentence-1' class='sentence'><i >Returns</i>: An <a class='index' id=':return_value_of_bad_array_new_length::what'></a>implementation-defined <span class='textsc'>ntbs</span><a class='hidden_link' href='#new.badlength-2.sentence-1'>.</a></div></div></div></div></div><div id='new.handler' class='section'><h4 ><a class='secnum' href='#new.handler' style='min-width:95pt'>17.6.4.3</a> Type <span class='texttt'>new_&shy;handler</span> <a class='abbr_ref' href='new.handler'>[new.handler]</a></h4><div class='texpara'><div id='lib:new_handler'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:new_handler'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>using</span> new_handler <span class='operator'>=</span> <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</code></div></div></div><div class='para' id='new.handler-1'><div class='marginalizedparent'><a class='marginalized' href='#new.handler-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2862'>#</a></div><div class='texpara'><div id='new.handler-1.sentence-1' class='sentence'>The type of a
<a class='hidden_link' href='#def:handler_function' id='def:handler_function'><i>handler function</i></a>
to be called by
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
or
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> (<a href='#new.delete' title='17.6.3&emsp;Storage allocation and deallocation'>[new.<span class='shy'></span>delete]</a>) when they cannot satisfy a request for additional storage<a class='hidden_link' href='#new.handler-1.sentence-1'>.</a></div></div></div></div><div class='para' id='new.handler-2'><div class='marginalizedparent'><a class='marginalized' href='#new.handler-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2870'>#</a></div><div class='texpara'><div id='new.handler-2.sentence-1' class='sentence'><i >Required behavior</i>: A <span class='texttt'>new_&shy;handler</span> shall perform one of the following:
<ul class='itemize'><li id='new.handler-2.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#new.handler-2.1'>(2.1)</a></div>make more storage available for allocation and then return;</li><li id='new.handler-2.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#new.handler-2.2'>(2.2)</a></div>throw an exception of type
<span class='texttt'>bad_&shy;alloc</span>
or a class derived from
<a class='index' id='lib:bad_alloc__'></a><span class='texttt'>bad_&shy;alloc</span>;</li><li id='new.handler-2.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#new.handler-2.3'>(2.3)</a></div>terminate execution of the program without returning to the caller<a class='hidden_link' href='#new.handler-2.sentence-1'>.</a> <div class='texpara'><a class='index' id='lib:abort'></a><a class='index' id='lib:exit'></a></div></li></ul></div></div></div></div></div><div id='set.new.handler' class='section'><h4 ><a class='secnum' href='#set.new.handler' style='min-width:95pt'>17.6.4.4</a> <span class='texttt'>set_&shy;new_&shy;handler</span> <a class='abbr_ref' href='set.new.handler'>[set.new.handler]</a></h4><div class='texpara'><div id='lib:set_new_handler'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:set_new_handler'>ðŸ”—</a></div><code class='itemdeclcode'>new_handler set_new_handler<span class='parenthesis'>(</span>new_handler new_p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='set.new.handler-1'><div class='marginalizedparent'><a class='marginalized' href='#set.new.handler-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2897'>#</a></div><div class='texpara'><div id='set.new.handler-1.sentence-1' class='sentence'><i >Effects</i>: Establishes the function designated by <span class='texttt'>new_&shy;p</span> as the current
<span class='texttt'>new_&shy;handler</span><a class='hidden_link' href='#set.new.handler-1.sentence-1'>.</a></div></div></div></div><div class='para' id='set.new.handler-2'><div class='marginalizedparent'><a class='marginalized' href='#set.new.handler-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2902'>#</a></div><div class='texpara'><div id='set.new.handler-2.sentence-1' class='sentence'><i >Returns</i>: The previous <span class='texttt'>new_&shy;handler</span><a class='hidden_link' href='#set.new.handler-2.sentence-1'>.</a></div></div></div></div><div class='para' id='set.new.handler-3'><div class='marginalizedparent'><a class='marginalized' href='#set.new.handler-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2906'>#</a></div><div class='texpara'><div id='set.new.handler-3.sentence-1' class='sentence'><i >Remarks</i>: The initial <span class='texttt'>new_&shy;handler</span> is a null pointer<a class='hidden_link' href='#set.new.handler-3.sentence-1'>.</a></div></div></div></div></div><div id='get.new.handler' class='section'><h4 ><a class='secnum' href='#get.new.handler' style='min-width:95pt'>17.6.4.5</a> <span class='texttt'>get_&shy;new_&shy;handler</span> <a class='abbr_ref' href='get.new.handler'>[get.new.handler]</a></h4><div class='texpara'><div id='lib:get_new_handler'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:get_new_handler'>ðŸ”—</a></div><code class='itemdeclcode'>new_handler get_new_handler<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='get.new.handler-1'><div class='marginalizedparent'><a class='marginalized' href='#get.new.handler-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2919'>#</a></div><div class='texpara'><div id='get.new.handler-1.sentence-1' class='sentence'><i >Returns</i>: The current <span class='texttt'>new_&shy;handler</span><a class='hidden_link' href='#get.new.handler-1.sentence-1'>.</a></div> <div id='get.new.handler-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#get.new.handler-note-1'>1</a></i>: <div id='get.new.handler-1.sentence-2' class='sentence'>This can be a null pointer value<a class='hidden_link' href='#get.new.handler-1.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div></div></div><div id='ptr.launder' class='section'><h3 ><a class='secnum' href='#ptr.launder' style='min-width:80pt'>17.6.5</a> Pointer optimization barrier <a class='abbr_ref' href='ptr.launder'>[ptr.launder]</a></h3><div class='texpara'><div id='lib:launder'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:launder'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='squarebracket'>[</span><span class='squarebracket'>[</span>nodiscard<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='keyword'>constexpr</span> T<span class='operator'>*</span> launder<span class='parenthesis'>(</span>T<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</code></div></div></div><div class='para' id='ptr.launder-1'><div class='marginalizedparent'><a class='marginalized' href='#ptr.launder-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2935'>#</a></div><div class='texpara'><div id='ptr.launder-1.sentence-1' class='sentence'><i >Mandates</i>: <span class='texttt'><span class='operator'>!</span>is_&shy;function_&shy;v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>!</span>is_&shy;void_&shy;v<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#ptr.launder-1.sentence-1'>.</a></div></div></div></div><div class='para' id='ptr.launder-2'><div class='marginalizedparent'><a class='marginalized' href='#ptr.launder-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2939'>#</a></div><div class='texpara'><div id='ptr.launder-2.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>p</span> represents the address <i >A</i> of a byte in memory<a class='hidden_link' href='#ptr.launder-2.sentence-1'>.</a></div> <div id='ptr.launder-2.sentence-2' class='sentence'>An object <i >X</i> that is within its <a href='basic.life#def:lifetime' title='6.7.3&emsp;Lifetime&emsp;[basic.life]'>lifetime</a>
and whose type is <a href='conv.qual#def:similar_types' title='7.3.6&emsp;Qualification conversions&emsp;[conv.qual]'>similar</a> to <span class='texttt'>T</span>
is located at the address <i >A</i><a class='hidden_link' href='#ptr.launder-2.sentence-2'>.</a></div> <div id='ptr.launder-2.sentence-3' class='sentence'>All bytes of storage that would be reachable through the result
are reachable through <span class='texttt'>p</span> (see below)<a class='hidden_link' href='#ptr.launder-2.sentence-3'>.</a></div></div></div></div><div class='para' id='ptr.launder-3'><div class='marginalizedparent'><a class='marginalized' href='#ptr.launder-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2948'>#</a></div><div class='texpara'><div id='ptr.launder-3.sentence-1' class='sentence'><i >Returns</i>: A value of type <span class='texttt'>T<span class='operator'>*</span></span> that points to <span class='texttt'>X</span><a class='hidden_link' href='#ptr.launder-3.sentence-1'>.</a></div></div></div></div><div class='para' id='ptr.launder-4'><div class='marginalizedparent'><a class='marginalized' href='#ptr.launder-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2952'>#</a></div><div class='texpara'><div id='ptr.launder-4.sentence-1' class='sentence'><i >Remarks</i>: An invocation of this function
may be used in a core constant expression
whenever the value of its argument
may be used in a core constant expression<a class='hidden_link' href='#ptr.launder-4.sentence-1'>.</a></div> <div id='ptr.launder-4.sentence-2' class='sentence'>A byte of storage <i >b</i> is
reachable through a pointer value
that points to an object <i >Y</i>
if there is an object <i >Z</i>,
pointer-interconvertible with <i >Y</i>,
such that <i >b</i> is within the storage occupied by
<i >Z</i>, or
the immediately-enclosing array object if <i >Z</i> is an array element<a class='hidden_link' href='#ptr.launder-4.sentence-2'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='ptr.launder-5'><div class='marginalizedparent'><a class='marginalized' href='#ptr.launder-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2967'>#</a></div><div class='texpara'><div id='ptr.launder-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#ptr.launder-note-1'>1</a></i>: <div id='ptr.launder-5.sentence-1' class='sentence'>If a new object is created
in storage occupied by an existing object of the same type,
a pointer to the original object
can be used to refer to the new object
unless its complete object is a const object or it is a base class subobject;
in the latter cases,
this function can be used to obtain a usable pointer to the new object<a class='hidden_link' href='#ptr.launder-5.sentence-1'>.</a></div> <div id='ptr.launder-5.sentence-2' class='sentence'>See <a href='basic.life' title='6.7.3&emsp;Lifetime'>[basic.<span class='shy'></span>life]</a><a class='hidden_link' href='#ptr.launder-5.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='para nonNormativeOnly' id='ptr.launder-6'><div class='marginalizedparent'><a class='marginalized' href='#ptr.launder-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2979'>#</a></div><div class='texpara'><div id='ptr.launder-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#ptr.launder-example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>int</span> n; <span class='curlybracket'>}</span>;
<span class='keyword'>const</span> X <span class='operator'>*</span>p <span class='operator'>=</span> <span class='keyword'>new</span> <span class='keyword'>const</span> X<span class='curlybracket'>{</span><span class='literal'>3</span><span class='curlybracket'>}</span>;
<span class='keyword'>const</span> <span class='keyword'>int</span> a <span class='operator'>=</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>n;
<span class='keyword'>new</span> <span class='parenthesis'>(</span><span class='keyword'>const_cast</span><span class='anglebracket'>&lt;</span>X<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> X<span class='curlybracket'>{</span><span class='literal'>5</span><span class='curlybracket'>}</span>; <span class='comment'>// <span class='tcode_in_codeblock'>p</span> does not point to new object (<a href='basic.life' title='6.7.3&emsp;Lifetime'>[basic.<span class='shy'></span>life]</a>) because its type is <span class='tcode_in_codeblock'>const</span></span>
<span class='keyword'>const</span> <span class='keyword'>int</span> b <span class='operator'>=</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>n;                 <span class='comment'>// undefined behavior</span>
<span class='keyword'>const</span> <span class='keyword'>int</span> c <span class='operator'>=</span> std<span class='operator'>::</span>launder<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>n;   <span class='comment'>// OK</span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div></div><div id='hardware.interference' class='section'><h3 ><a class='secnum' href='#hardware.interference' style='min-width:80pt'>17.6.6</a> Hardware interference size <a class='abbr_ref' href='hardware.interference'>[hardware.interference]</a></h3><div class='texpara'><div id='lib:hardware_destructive_interference_size'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:hardware_destructive_interference_size'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>inline</span> <span class='keyword'>constexpr</span> size_t hardware_destructive_interference_size <span class='operator'>=</span> <i >implementation-defined</i>;
</code></div></div></div><div class='para' id='hardware.interference-1'><div class='marginalizedparent'><a class='marginalized' href='#hardware.interference-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L2999'>#</a></div><div class='texpara'><div id='hardware.interference-1.sentence-1' class='sentence'>This number is the minimum recommended offset
between two concurrently-accessed objects
to avoid additional performance degradation due to contention
introduced by the implementation<a class='hidden_link' href='#hardware.interference-1.sentence-1'>.</a></div> <div id='hardware.interference-1.sentence-2' class='sentence'>It shall be at least <span class='texttt'><span class='keyword'>alignof</span><span class='parenthesis'>(</span>max_&shy;align_&shy;t<span class='parenthesis'>)</span></span><a class='hidden_link' href='#hardware.interference-1.sentence-2'>.</a></div></div><div class='texpara'><a class='index' id=':cats,interfering_with_canines'></a><div id='hardware.interference-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#hardware.interference-example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>struct</span> keep_apart <span class='curlybracket'>{</span>
  <span class='keyword'>alignas</span><span class='parenthesis'>(</span>hardware_destructive_interference_size<span class='parenthesis'>)</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> cat;
  <span class='keyword'>alignas</span><span class='parenthesis'>(</span>hardware_destructive_interference_size<span class='parenthesis'>)</span> atomic<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> dog;
<span class='curlybracket'>}</span>;
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='texpara'><div id='lib:hardware_constructive_interference_size'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:hardware_constructive_interference_size'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>inline</span> <span class='keyword'>constexpr</span> size_t hardware_constructive_interference_size <span class='operator'>=</span> <i >implementation-defined</i>;
</code></div></div></div><div class='para' id='hardware.interference-2'><div class='marginalizedparent'><a class='marginalized' href='#hardware.interference-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/2c6009b1c756eb2e0391e9460d8f70b29015cc9c/source/support.tex#L3021'>#</a></div><div class='texpara'><div id='hardware.interference-2.sentence-1' class='sentence'>This number is the maximum recommended size of contiguous memory
occupied by two objects accessed with temporal locality by concurrent threads<a class='hidden_link' href='#hardware.interference-2.sentence-1'>.</a></div> <div id='hardware.interference-2.sentence-2' class='sentence'>It shall be at least <span class='texttt'><span class='keyword'>alignof</span><span class='parenthesis'>(</span>max_&shy;align_&shy;t<span class='parenthesis'>)</span></span><a class='hidden_link' href='#hardware.interference-2.sentence-2'>.</a></div></div><div class='texpara'><a class='index' id=':dogs,obliviousness_to_interference'></a><div id='hardware.interference-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#hardware.interference-example-2'>2</a></i>: <span class='codeblock'><span class='keyword'>struct</span> together <span class='curlybracket'>{</span>
  atomic<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> dog;
  <span class='keyword'>int</span> puppy;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> kennel <span class='curlybracket'>{</span>
  <span class='comment'>// Other data members...</span>
  <span class='keyword'>alignas</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>together<span class='parenthesis'>)</span><span class='parenthesis'>)</span> together pack;
  <span class='comment'>// Other data members...</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>together<span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span><span class='operator'>=</span> hardware_constructive_interference_size<span class='parenthesis'>)</span>;
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div></div></body></html>