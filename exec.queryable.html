<!DOCTYPE html><html lang='en'><head><title>[exec.queryable]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>33</a> Execution control library <a class='abbr_ref' href='./#exec'>[exec]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>33.2</a> Queries and queryables <a class='abbr_ref'>[exec.queryable]</a></h2><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:80pt'>33.2.1</a> General <a class='abbr_ref' href='exec.queryable.general'>[exec.queryable.general]</a></h3><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/exec.tex#L108'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:object,queryable' title='33.2.1&emsp;General&emsp;[exec.queryable.general]'><span id='def:object,queryable'><i >queryable object</i></span></a> is
a read-only collection of key/value pair
where each key is a customization point object known as a <a class='hidden_link' href='#def:query_object' title='33.2.1&emsp;General&emsp;[exec.queryable.general]'><span id='def:query_object'><i >query object</i></span></a><a class='hidden_link' href='#general-1.sentence-1'>.</a></div> <div id='general-1.sentence-2' class='sentence'>A <a class='hidden_link' href='#def:query' title='33.2.1&emsp;General&emsp;[exec.queryable.general]'><span id='def:query'><i >query</i></span></a> is an invocation of a query object
with a queryable object as its first argument and
a (possibly empty) set of additional arguments<a class='hidden_link' href='#general-1.sentence-2'>.</a></div> <div id='general-1.sentence-3' class='sentence'>A query imposes syntactic and semantic requirements on its invocations<a class='hidden_link' href='#general-1.sentence-3'>.</a></div></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/exec.tex#L117'>#</a></div><div class='texpara'><div id='general-2.sentence-1' class='sentence'>Let <span class='texttt'>q</span> be a query object,
let <span class='texttt'>args</span> be a (possibly empty) pack of subexpressions,
let <span class='texttt'>env</span> be a subexpression
that refers to a queryable object <span class='texttt'>o</span> of type <span class='texttt'>O</span>, and
let <span class='texttt'>cenv</span> be a subexpression referring to <span class='texttt'>o</span>
such that <span class='texttt'><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>cenv<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span> is <span class='texttt'><span class='keyword'>const</span> O<span class='operator'>&amp;</span></span><a class='hidden_link' href='#general-2.sentence-1'>.</a></div> <div id='general-2.sentence-2' class='sentence'>The expression <span class='texttt'>q<span class='parenthesis'>(</span>env, args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span> is equal to (<a href='concepts.equality' title='18.2&emsp;Equality preservation'>[concepts.<span class='shy'></span>equality]</a>)
the expression <span class='texttt'>q<span class='parenthesis'>(</span>cenv, args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#general-2.sentence-2'>.</a></div></div></div><div class='para' id='general-3'><div class='marginalizedparent'><a class='marginalized' href='#general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/exec.tex#L127'>#</a></div><div class='texpara'><div id='general-3.sentence-1' class='sentence'>The type of a query expression cannot be <span class='texttt'><span class='keyword'>void</span></span><a class='hidden_link' href='#general-3.sentence-1'>.</a></div></div></div><div class='para' id='general-4'><div class='marginalizedparent'><a class='marginalized' href='#general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/exec.tex#L130'>#</a></div><div class='texpara'><div id='general-4.sentence-1' class='sentence'>The expression <span class='texttt'>q<span class='parenthesis'>(</span>env, args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span> is
equality-preserving (<a href='concepts.equality' title='18.2&emsp;Equality preservation'>[concepts.<span class='shy'></span>equality]</a>) and
does not modify the query object or the arguments<a class='hidden_link' href='#general-4.sentence-1'>.</a></div></div></div><div class='para' id='general-5'><div class='marginalizedparent'><a class='marginalized' href='#general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/exec.tex#L135'>#</a></div><div class='texpara'><div id='general-5.sentence-1' class='sentence'>If the expression <span class='texttt'>env<span class='operator'>.</span>query<span class='parenthesis'>(</span>q, args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span> is well-formed,
then it is expression-equivalent to <span class='texttt'>q<span class='parenthesis'>(</span>env, args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#general-5.sentence-1'>.</a></div></div></div><div class='para' id='general-6'><div class='marginalizedparent'><a class='marginalized' href='#general-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/exec.tex#L139'>#</a></div><div class='texpara'><div id='general-6.sentence-1' class='sentence'>Unless otherwise specified,
the result of a query is valid as long as the queryable object is valid<a class='hidden_link' href='#general-6.sentence-1'>.</a></div></div></div></div><div id='concept' class='section'><h3 ><a class='secnum' href='#concept' style='min-width:80pt'>33.2.2</a> <span class='texttt'>queryable</span> concept <a class='abbr_ref' href='exec.queryable.concept'>[exec.queryable.concept]</a></h3><div class='texpara'><span class='codeblock'><span class='keyword'>namespace</span> std <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>concept</span> <a class='hidden_link' href='#concept:queryable' title='33.2.2&emsp;queryable concept&emsp;[exec.queryable.concept]'><span id='concept:queryable'><span class='tcode_in_codeblock'><i >queryable</i></span></span></a> <span class='operator'>=</span> <a href='concept.destructible#concept:destructible' title='18.4.10&emsp;Concept destructible&emsp;[concept.destructible]'><span id='conceptref:destructible'><span class='tcode_in_codeblock'>destructible</span></span></a><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;   <span class='comment'>// <i >exposition only</i></span>
<span class='curlybracket'>}</span>
</span></div><div class='para' id='concept-1'><div class='marginalizedparent'><a class='marginalized' href='#concept-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/exec.tex#L152'>#</a></div><div class='texpara'><div id='concept-1.sentence-1' class='sentence'>The exposition-only <a href='#concept:queryable' title='33.2.2&emsp;queryable concept&emsp;[exec.queryable.concept]'><span id='conceptref:queryable'><span class='texttt'><i >queryable</i></span></span></a> concept specifies
the constraints on the types of queryable objects<a class='hidden_link' href='#concept-1.sentence-1'>.</a></div></div></div><div class='para' id='concept-2'><div class='marginalizedparent'><a class='marginalized' href='#concept-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/exec.tex#L156'>#</a></div><div class='texpara'><div id='concept-2.sentence-1' class='sentence'>Let <span class='texttt'>env</span> be an object of type <span class='texttt'>Env</span><a class='hidden_link' href='#concept-2.sentence-1'>.</a></div> <div id='concept-2.sentence-2' class='sentence'>The type <span class='texttt'>Env</span> models <a href='#concept:queryable' title='33.2.2&emsp;queryable concept&emsp;[exec.queryable.concept]'><span id='conceptref:queryable_'><span class='texttt'><i >queryable</i></span></span></a>
if for each callable object <span class='texttt'>q</span> and a pack of subexpressions <span class='texttt'>args</span>,
if <span class='texttt'><span class='keyword'>requires</span> <span class='curlybracket'>{</span> q<span class='parenthesis'>(</span>env, args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>}</span></span> is <span class='texttt'><span class='literal'>true</span></span> then
<span class='texttt'>q<span class='parenthesis'>(</span>env, args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span> meets any semantic requirements imposed by <span class='texttt'>q</span><a class='hidden_link' href='#concept-2.sentence-2'>.</a></div></div></div></div></div></body></html>