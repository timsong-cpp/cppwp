<!DOCTYPE html><html lang='en'><head><title>[basic.start.static]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>6.9</a> Program execution <a class='abbr_ref' href='basic.exec#basic.start.static'>[basic.exec]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>6.9.3</a> Start and termination <a class='abbr_ref' href='basic.start#static'>[basic.start]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>6.9.3.2</a> Static initialization <a class='abbr_ref'>[basic.start.static]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/basic.tex#L6870'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':initialization'></a><a class='index' id=':initialization,static_and_thread'></a>Variables with static storage duration
are initialized as a consequence of program initiation<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>Variables with
thread storage duration are initialized as a consequence of thread execution<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>Within each of these phases of initiation, initialization occurs as follows<a class='hidden_link' href='#1.sentence-3'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/basic.tex#L6878'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'><a class='index' id=':initialization,constant'></a><a class='hidden_link' href='#def:constant_initialization' title='6.9.3.2&emsp;Static initialization&emsp;[basic.start.static]'><span id='def:constant_initialization'><i >Constant initialization</i></span></a> is performed
if a variable or temporary object with static or thread storage duration
is constant-initialized (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'><a class='index' id=':initialization,zero-initialization'></a>If constant initialization is not performed, a variable with static
storage duration (<a href='basic.stc.static' title='6.7.5.2&emsp;Static storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>static]</a>) or thread storage
duration (<a href='basic.stc.thread' title='6.7.5.3&emsp;Thread storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>thread]</a>) is zero-initialized (<a href='dcl.init' title='9.4&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>Together, zero-initialization and constant initialization are called
<a class='hidden_link' href='#def:initialization,static' title='6.9.3.2&emsp;Static initialization&emsp;[basic.start.static]'><span id='def:initialization,static'><i >static initialization</i></span></a>;
all other initialization is <a class='hidden_link' href='#def:initialization,dynamic' title='6.9.3.2&emsp;Static initialization&emsp;[basic.start.static]'><span id='def:initialization,dynamic'><i >dynamic initialization</i></span></a><a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>All static initialization strongly happens before (<a href='intro.races' title='6.9.2.2&emsp;Data races'>[intro.<span class='shy'></span>races]</a>)
any dynamic initialization<a class='hidden_link' href='#2.sentence-4'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='2.sentence-5' class='sentence'>The dynamic initialization of non-block variables is described
in <a href='basic.start.dynamic' title='6.9.3.3&emsp;Dynamic initialization of non-block variables'>[basic.<span class='shy'></span>start.<span class='shy'></span>dynamic]</a>; that of static block variables is described
in <a href='stmt.dcl' title='8.8&emsp;Declaration statement'>[stmt.<span class='shy'></span>dcl]</a><a class='hidden_link' href='#2.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/basic.tex#L6898'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>An implementation is permitted to perform the initialization of a
variable with static or thread storage duration as a static
initialization even if such initialization is not required to be done
statically, provided that
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div>the dynamic version of the initialization does not change the
value of any other object of static or thread storage duration
prior to its initialization, and</li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div>the static version of the initialization produces the same value
in the initialized variable as would be produced by the dynamic
initialization if all variables not required to be initialized statically
were initialized dynamically<a class='hidden_link' href='#3.sentence-1'>.</a></li></ul></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='3.sentence-2' class='sentence'>As a consequence, if the initialization of an object <span class='texttt'>obj1</span> refers to an
object <span class='texttt'>obj2</span> potentially requiring dynamic initialization and defined
later in the same translation unit, it is unspecified whether the value of <span class='texttt'>obj2</span> used
will be the value of the fully initialized <span class='texttt'>obj2</span> (because <span class='texttt'>obj2</span> was statically
initialized) or will be the value of <span class='texttt'>obj2</span> merely zero-initialized<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>For example,
<span class='codeblock'><span class='keyword'>inline</span> <span class='keyword'>double</span> fd<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>1.0</span>; <span class='curlybracket'>}</span>
<span class='keyword'>extern</span> <span class='keyword'>double</span> d1;
<span class='keyword'>double</span> d2 <span class='operator'>=</span> d1;     <span class='comment'>// unspecified:</span>
                    <span class='comment'>// either statically initialized to <span class='tcode_in_codeblock'>0.0</span> or</span>
                    <span class='comment'>// dynamically initialized to <span class='tcode_in_codeblock'>0.0</span> if <span class='tcode_in_codeblock'>d1</span> is</span>
                    <span class='comment'>// dynamically initialized, or <span class='tcode_in_codeblock'>1.0</span> otherwise</span>
<span class='keyword'>double</span> d1 <span class='operator'>=</span> fd<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;   <span class='comment'>// either initialized statically or dynamically to <span class='tcode_in_codeblock'>1.0</span></span>
</span></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></body></html>