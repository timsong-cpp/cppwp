<!DOCTYPE html><html lang='en'><head><title>[temp.mem]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>17</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>17.6</a> Template declarations <a class='abbr_ref' href='temp.decls#temp.mem'>[temp.decls]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>17.6.2</a> Member templates <a class='abbr_ref'>[temp.mem]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4bfec37faf33a804c66fead7dd819d136b946e5d/source/templates.tex#L2356'>#</a></div><div id='1.sentence-1' class='sentence'>A template can be declared within a class or class template; such a template
is called a member template<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>A member template can be defined within or outside its class definition or
class template definition<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>A member template of a class template that is defined outside of its class
template definition shall be specified with
a <i ><a href='temp#nt:template-head'>template-head</a></i> equivalent to that
of the class template followed by
a <i ><a href='temp#nt:template-head'>template-head</a></i> equivalent to that
of the member template (<a href='temp.over.link'>[temp.over.link]</a>)<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;class T&gt; struct string {
  template&lt;class T2&gt; int compare(const T2&amp;);
  template&lt;class T2&gt; string(const string&lt;T2&gt;&amp; s) { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }
};

template&lt;class T&gt; template&lt;class T2&gt; int string&lt;T&gt;::compare(const T2&amp; s) {
}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='1.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#1.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template&lt;typename T&gt; concept C1 = true;
template&lt;typename T&gt; concept C2 = sizeof(T) &lt;= 4;

template&lt;C1 T&gt; struct S {
  template&lt;C2 U&gt; void f(U);
  template&lt;C2 U&gt; void g(U);
};

template&lt;C1 T&gt; template&lt;C2 U&gt;
void S&lt;T&gt;::f(U) { }             <span class='comment'>// OK
</span>template&lt;C1 T&gt; template&lt;typename U&gt;
void S&lt;T&gt;::g(U) { }             <span class='comment'>// error: no matching function in <span class='tcode_in_codeblock'>S&lt;T&gt;</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4bfec37faf33a804c66fead7dd819d136b946e5d/source/templates.tex#L2395'>#</a></div><div id='2.sentence-1' class='sentence'>A local class of non-closure type shall not have member templates<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'><a href='class.access'>Access control rules</a>
apply to member template names<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>A destructor shall not be a member
template<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>A non-template member function (<a href='dcl.fct'>[dcl.fct]</a>) with a given name
and type and a member function template of the same name, which could be
used to generate a specialization of the same type, can both be
declared in a class<a class='hidden_link' href='#2.sentence-4'>.</a></div> <div id='2.sentence-5' class='sentence'>When both exist, a use of that name and type refers to the
non-template member unless an explicit template argument list is supplied<a class='hidden_link' href='#2.sentence-5'>.</a></div> <div id='2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct A {
  void f(int);
  template &lt;class T2&gt; void f(T2);
};

template &lt;&gt; void A&lt;int&gt;::f(int) { }                 <span class='comment'>// non-template member function
</span>template &lt;&gt; template &lt;&gt; void A&lt;int&gt;::f&lt;&gt;(int) { }   <span class='comment'>// member function template specialization
</span>
int main() {
  A&lt;char&gt; ac;
  ac.f(1);                                          <span class='comment'>// non-template
</span>  ac.f('c');                                        <span class='comment'>// template
</span>  ac.f&lt;&gt;(1);                                        <span class='comment'>// template
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4bfec37faf33a804c66fead7dd819d136b946e5d/source/templates.tex#L2426'>#</a></div><div id='3.sentence-1' class='sentence'>A member function template shall not be virtual<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
template &lt;class T&gt; struct AA {
  template &lt;class C&gt; virtual void g(C);             <span class='comment'>// error
</span>  virtual void f();                                 <span class='comment'>// OK
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4bfec37faf33a804c66fead7dd819d136b946e5d/source/templates.tex#L2438'>#</a></div><div id='4.sentence-1' class='sentence'>A specialization of
a member function template does not override a virtual function from a
base class<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class B {
  virtual void f(int);
};

class D : public B {
  template &lt;class T&gt; void f(T); <span class='comment'>// does not override <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f(int)</span>
</span>  void f(int i) { f&lt;&gt;(i); }     <span class='comment'>// overriding function that calls the template instantiation
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4bfec37faf33a804c66fead7dd819d136b946e5d/source/templates.tex#L2455'>#</a></div><div id='5.sentence-1' class='sentence'>A specialization of a
conversion function template
is referenced in
the same way as a non-template conversion function that converts to
the same type<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  template &lt;class T&gt; operator T*();
};
template &lt;class T&gt; A::operator T*(){ return 0; }
template &lt;&gt; A::operator char*(){ return 0; }        <span class='comment'>// specialization
</span>template A::operator void*();                       <span class='comment'>// explicit instantiation
</span>
int main() {
  A a;
  int* ip;
  ip = a.operator int*();       <span class='comment'>// explicit call to template operator <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;operator int*()</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='5.sentence-2' class='sentence'>Because the explicit template argument list follows the function template
name, and because conversion member function templates and constructor
member function templates are called without using a function name,
there is no way to provide an explicit template argument list for these
function templates<a class='hidden_link' href='#5.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4bfec37faf33a804c66fead7dd819d136b946e5d/source/templates.tex#L2486'>#</a></div><div id='6.sentence-1' class='sentence'>A specialization of a
conversion function template
is not found by name
lookup<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>Instead, any
conversion function templates
visible in the
context of the use are considered<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>For each such operator, if argument
deduction succeeds (<a href='temp.deduct.conv'>[temp.deduct.conv]</a>), the resulting specialization is
used as if found by name lookup<a class='hidden_link' href='#6.sentence-3'>.</a></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4bfec37faf33a804c66fead7dd819d136b946e5d/source/templates.tex#L2499'>#</a></div><div id='7.sentence-1' class='sentence'>A <i ><a href='namespace.udecl#nt:using-declaration'>using-declaration</a></i> in a derived class cannot refer to a specialization
of a
conversion function template
in a base class<a class='hidden_link' href='#7.sentence-1'>.</a></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4bfec37faf33a804c66fead7dd819d136b946e5d/source/templates.tex#L2505'>#</a></div><div id='8.sentence-1' class='sentence'><a href='over.ics.rank'>Overload resolution</a> and <a href='temp.func.order'>partial
ordering</a> are used to select the best conversion function
among multiple
specializations of conversion function templates
and/or non-template
conversion functions<a class='hidden_link' href='#8.sentence-1'>.</a></div></div></div></body></html>