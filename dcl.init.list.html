<!DOCTYPE html><html lang='en'><head><title>[dcl.init.list]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>9</a> Declarations <a class='abbr_ref' href='./#dcl.dcl'>[dcl.dcl]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>9.4</a> Initializers <a class='abbr_ref' href='dcl.init#list'>[dcl.init]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>9.4.5</a> List-initialization <a class='abbr_ref'>[dcl.init.list]</a></h3><div class='texpara'><a class='index' id=':initialization,list-initialization'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/declarations.tex#L5905'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='hidden_link' href='#def:list-initialization' title='9.4.5&emsp;List-initialization&emsp;[dcl.init.list]'><span id='def:list-initialization'><i >List-initialization</i></span></a> is initialization of an object or reference from a
<a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list'><span class='textsf'><i >braced-init-list</i></span></span></a><a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>Such an initializer is called an <a class='hidden_link' href='#def:initializer_list' id='def:initializer_list'><i>initializer list</i></a>, and
the comma-separated
<a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause'><span class='textsf'><i >initializer-clause</i></span></span></a><i >s</i>
of the <a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list'><span class='textsf'><i >initializer-list</i></span></span></a>
or
<a href='dcl.init.general#nt:designated-initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:designated-initializer-clause'><span class='textsf'><i >designated-initializer-clause</i></span></span></a><i >s</i>
of the <a href='dcl.init.general#nt:designated-initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:designated-initializer-list'><span class='textsf'><i >designated-initializer-list</i></span></span></a>
are called the <a class='hidden_link' href='#def:elements' id='def:elements'><i>elements</i></a> of the initializer list<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>An initializer list may be empty<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>List-initialization can occur in direct-initialization or copy-initialization contexts;
list-initialization in a direct-initialization context is called
<a class='hidden_link' href='#def:direct-list-initialization' title='9.4.5&emsp;List-initialization&emsp;[dcl.init.list]'><span id='def:direct-list-initialization'><i >direct-list-initialization</i></span></a> and list-initialization in a
copy-initialization context is called <a class='hidden_link' href='#def:copy-list-initialization' title='9.4.5&emsp;List-initialization&emsp;[dcl.init.list]'><span id='def:copy-list-initialization'><i >copy-list-initialization</i></span></a><a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>Direct-initialization that is not list-initialization is called
<a class='hidden_link' href='#def:direct-non-list-initialization' title='9.4.5&emsp;List-initialization&emsp;[dcl.init.list]'><span id='def:direct-non-list-initialization'><i >direct-non-list-initialization</i></span></a><a class='hidden_link' href='#1.sentence-5'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='1.sentence-6' class='sentence'>List-initialization can be used
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.1'>(1.1)</a></div>as the initializer in a variable definition (<a href='dcl.init' title='9.4&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>),</li><li id='1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.2'>(1.2)</a></div>as the initializer in a <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression'><span class='textsf'><i >new-expression</i></span></span></a> (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>),</li><li id='1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.3'>(1.3)</a></div>in a <span class='texttt'><span class='keyword'>return</span></span> statement (<a href='stmt.return' title='8.7.4&emsp;The return statement'>[stmt.<span class='shy'></span>return]</a>),</li><li id='1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.4'>(1.4)</a></div>as a <a href='stmt.iter.general#nt:for-range-initializer' title='8.6.1&emsp;General&emsp;[stmt.iter.general]'><span id='ntref:for-range-initializer'><span class='textsf'><i >for-range-initializer</i></span></span></a> (<a href='stmt.iter' title='8.6&emsp;Iteration statements'>[stmt.<span class='shy'></span>iter]</a>),</li><li id='1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.5'>(1.5)</a></div>as a function argument (<a href='expr.call' title='7.6.1.3&emsp;Function call'>[expr.<span class='shy'></span>call]</a>),</li><li id='1.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.6'>(1.6)</a></div>as a template argument (<a href='temp.arg.nontype' title='13.4.3&emsp;Template non-type arguments'>[temp.<span class='shy'></span>arg.<span class='shy'></span>nontype]</a>),</li><li id='1.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.7'>(1.7)</a></div>as a subscript (<a href='expr.sub' title='7.6.1.2&emsp;Subscripting'>[expr.<span class='shy'></span>sub]</a>),</li><li id='1.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.8'>(1.8)</a></div>as an argument to a constructor invocation (<a href='dcl.init' title='9.4&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>, <a href='expr.type.conv' title='7.6.1.4&emsp;Explicit type conversion (functional notation)'>[expr.<span class='shy'></span>type.<span class='shy'></span>conv]</a>),</li><li id='1.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.9'>(1.9)</a></div>as an initializer for a non-static data member (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>),</li><li id='1.10'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.10'>(1.10)</a></div>in a <a href='class.base.init#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer'><span class='textsf'><i >mem-initializer</i></span></span></a> (<a href='class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>), or</li><li id='1.11'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.11'>(1.11)</a></div>on the right-hand side of an assignment (<a href='expr.ass' title='7.6.19&emsp;Assignment and compound assignment operators'>[expr.<span class='shy'></span>ass]</a>)<a class='hidden_link' href='#1.sentence-6'>.</a></li></ul></div></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span> a <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>;
std<span class='operator'>::</span>complex<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> z<span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span><span class='curlybracket'>}</span>;
<span class='keyword'>new</span> std<span class='operator'>::</span>vector<span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>string<span class='anglebracket'>&gt;</span><span class='curlybracket'>{</span><span class='literal'>"once"</span>, <span class='literal'>"upon"</span>, <span class='literal'>"a"</span>, <span class='literal'>"time"</span><span class='curlybracket'>}</span>;  <span class='comment'>// 4 string elements</span>
f<span class='parenthesis'>(</span> <span class='curlybracket'>{</span><span class='literal'>"Nicholas"</span>,<span class='literal'>"Annemarie"</span><span class='curlybracket'>}</span> <span class='parenthesis'>)</span>;  <span class='comment'>// pass list of two elements</span>
<span class='keyword'>return</span> <span class='curlybracket'>{</span> <span class='literal'>"Norah"</span> <span class='curlybracket'>}</span>;             <span class='comment'>// return list of one element</span>
<span class='keyword'>int</span><span class='operator'>*</span> e <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;                      <span class='comment'>// initialization to zero / null pointer</span>
x <span class='operator'>=</span> <span class='keyword'>double</span><span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>;                  <span class='comment'>// explicitly construct a <span class='tcode_in_codeblock'>double</span></span>
std<span class='operator'>::</span>map<span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>string,<span class='keyword'>int</span><span class='anglebracket'>&gt;</span> anim <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='curlybracket'>{</span><span class='literal'>"bear"</span>,<span class='literal'>4</span><span class='curlybracket'>}</span>, <span class='curlybracket'>{</span><span class='literal'>"cassowary"</span>,<span class='literal'>2</span><span class='curlybracket'>}</span>, <span class='curlybracket'>{</span><span class='literal'>"tiger"</span>,<span class='literal'>7</span><span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/declarations.tex#L5952'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>A constructor is an <a class='hidden_link' href='#def:initializer-list_constructor' title='9.4.5&emsp;List-initialization&emsp;[dcl.init.list]'><span id='def:initializer-list_constructor'><i >initializer-list constructor</i></span></a> if its first parameter is
of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_<span class='shy'></span>list<span class='anglebracket'>&lt;</span>E<span class='anglebracket'>&gt;</span></span> or reference to
<span class='mathit'>cv</span> <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_<span class='shy'></span>list<span class='anglebracket'>&lt;</span>E<span class='anglebracket'>&gt;</span></span> for some type <span class='texttt'>E</span>, and either there are no other
parameters or else all other parameters have default arguments (<a href='dcl.fct.default' title='9.3.4.7&emsp;Default arguments'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>default]</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='2.sentence-2' class='sentence'>Initializer-list constructors are favored over other constructors in
list-initialization (<a href='over.match.list' title='12.2.2.8&emsp;Initialization by list-initialization'>[over.<span class='shy'></span>match.<span class='shy'></span>list]</a>)<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>Passing an initializer list as the argument
to the constructor template <span class='texttt'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> C<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span> of a class <span class='texttt'>C</span> does not
create an initializer-list constructor, because an initializer list argument causes the
corresponding parameter to be a non-deduced context (<a href='temp.deduct.call' title='13.10.3.2&emsp;Deducing template arguments from a function call'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>call]</a>)<a class='hidden_link' href='#2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='2.sentence-4' class='sentence'>
The template
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_<span class='shy'></span>list</span> is not predefined;
if a standard library declaration (<a href='initializer.list.syn' title='17.10.2&emsp;Header &lt;initializer_&shy;list&gt; synopsis'>[initializer.<span class='shy'></span>list.<span class='shy'></span>syn]</a>, <a href='std.modules' title='16.4.2.4&emsp;Modules'>[std.<span class='shy'></span>modules]</a>)
of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_<span class='shy'></span>list</span> is not reachable from (<a href='module.reach' title='10.7&emsp;Reachability'>[module.<span class='shy'></span>reach]</a>)
a use of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_<span class='shy'></span>list</span> —
even an implicit use in which the type is not named (<a href='dcl.spec.auto' title='9.2.9.7&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>) —
the program is ill-formed<a class='hidden_link' href='#2.sentence-4'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/declarations.tex#L5972'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>List-initialization of an object or reference of type <i >cv</i> <span class='texttt'>T</span> is defined as follows:
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div><div class='texpara'><div id='3.1.sentence-1' class='sentence'>If the <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list_'><span class='textsf'><i >braced-init-list</i></span></span></a>
contains a <a href='dcl.init.general#nt:designated-initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:designated-initializer-list_'><span class='textsf'><i >designated-initializer-list</i></span></span></a> and
<span class='texttt'>T</span> is not a reference type,
<span class='texttt'>T</span> shall be an aggregate class<a class='hidden_link' href='#3.1.sentence-1'>.</a></div> <div id='3.1.sentence-2' class='sentence'>The ordered <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier'><span class='textsf'><i >identifier</i></span></span></a><i >s</i>
in the <a href='dcl.init.general#nt:designator' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:designator'><span class='textsf'><i >designator</i></span></span></a><i >s</i>
of the <a href='dcl.init.general#nt:designated-initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:designated-initializer-list__'><span class='textsf'><i >designated-initializer-list</i></span></span></a>
shall form a subsequence
of the ordered <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_'><span class='textsf'><i >identifier</i></span></span></a><i >s</i>
in the direct non-static data members of <span class='texttt'>T</span><a class='hidden_link' href='#3.1.sentence-2'>.</a></div> <div id='3.1.sentence-3' class='sentence'>Aggregate initialization is performed (<a href='dcl.init.aggr' title='9.4.2&emsp;Aggregates'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a>)<a class='hidden_link' href='#3.1.sentence-3'>.</a></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>int</span> x; <span class='keyword'>int</span> y; <span class='keyword'>int</span> z; <span class='curlybracket'>}</span>;
A a<span class='curlybracket'>{</span><span class='operator'>.</span>y <span class='operator'>=</span> <span class='literal'>2</span>, <span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>1</span><span class='curlybracket'>}</span>;                <span class='comment'>// error: designator order does not match declaration order</span>
A b<span class='curlybracket'>{</span><span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>1</span>, <span class='operator'>.</span>z <span class='operator'>=</span> <span class='literal'>2</span><span class='curlybracket'>}</span>;                <span class='comment'>// OK, <span class='tcode_in_codeblock'>b.y</span> initialized to <span class='tcode_in_codeblock'>0</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div><div class='texpara'><div id='3.2.sentence-1' class='sentence'>If <span class='texttt'>T</span> is an aggregate class and the initializer list has a single element
of type <i >cv1</i> <span class='texttt'>U</span>,
where <span class='texttt'>U</span> is <span class='texttt'>T</span> or a class derived from <span class='texttt'>T</span>,
the object is initialized from that element (by copy-initialization for
copy-list-initialization, or by direct-initialization for
direct-list-initialization)<a class='hidden_link' href='#3.2.sentence-1'>.</a></div></div></li><li id='3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.3'>(3.3)</a></div><div class='texpara'><div id='3.3.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> is a character array and the initializer list has a
single element that is an appropriately-typed <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal'><span class='textsf'><i >string-literal</i></span></span></a> (<a href='dcl.init.string' title='9.4.3&emsp;Character arrays'>[dcl.<span class='shy'></span>init.<span class='shy'></span>string]</a>),
initialization is performed as described in that subclause<a class='hidden_link' href='#3.3.sentence-1'>.</a></div></div></li><li id='3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.4'>(3.4)</a></div><div class='texpara'><div id='3.4.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> is an aggregate, aggregate initialization is
performed (<a href='dcl.init.aggr' title='9.4.2&emsp;Aggregates'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a>)<a class='hidden_link' href='#3.4.sentence-1'>.</a></div></div><div class='texpara'><div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>double</span> ad<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2.0</span> <span class='curlybracket'>}</span>;           <span class='comment'>// OK</span>
<span class='keyword'>int</span> ai<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2.0</span> <span class='curlybracket'>}</span>;              <span class='comment'>// error: narrowing</span>

<span class='keyword'>struct</span> S2 <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> m1;
  <span class='keyword'>double</span> m2, m3;
<span class='curlybracket'>}</span>;
S2 s21 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3.0</span> <span class='curlybracket'>}</span>;             <span class='comment'>// OK</span>
S2 s22 <span class='curlybracket'>{</span> <span class='literal'>1.0</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;               <span class='comment'>// error: narrowing</span>
S2 s23 <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                         <span class='comment'>// OK, default to 0,0,0</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.5'>(3.5)</a></div><div class='texpara'><div id='3.5.sentence-1' class='sentence'>Otherwise, if the initializer list has no elements and <span class='texttt'>T</span> is a class type with a
default constructor, the object is value-initialized<a class='hidden_link' href='#3.5.sentence-1'>.</a></div></div></li><li id='3.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.6'>(3.6)</a></div><div class='texpara'><div id='3.6.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> is a specialization of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_<span class='shy'></span>list</span>,
the object is constructed as described below<a class='hidden_link' href='#3.6.sentence-1'>.</a></div></div></li><li id='3.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.7'>(3.7)</a></div><div class='texpara'><div id='3.7.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> is a class type, constructors are considered<a class='hidden_link' href='#3.7.sentence-1'>.</a></div> <div id='3.7.sentence-2' class='sentence'>The applicable constructors are enumerated and
the best one is chosen through overload resolution (<a href='over.match' title='12.2&emsp;Overload resolution'>[over.<span class='shy'></span>match]</a>, <a href='over.match.list' title='12.2.2.8&emsp;Initialization by list-initialization'>[over.<span class='shy'></span>match.<span class='shy'></span>list]</a>)<a class='hidden_link' href='#3.7.sentence-2'>.</a></div> <div id='3.7.sentence-3' class='sentence'>If a narrowing
conversion (see below) is required to convert any of the arguments, the program is
ill-formed<a class='hidden_link' href='#3.7.sentence-3'>.</a></div></div><div class='texpara'><div id='example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  S<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>; <span class='comment'>// #1</span>
  S<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;    <span class='comment'>// #2</span>
  S<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span>S<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;      <span class='comment'>// #3</span>
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                              <span class='comment'>// #4</span>
  <span class='comment'>// ...</span>
<span class='curlybracket'>}</span>;
S s1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1.0</span>, <span class='literal'>2.0</span>, <span class='literal'>3.0</span> <span class='curlybracket'>}</span>;           <span class='comment'>// invoke #1</span>
S s2 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;                 <span class='comment'>// invoke #2</span>
S s3<span class='curlybracket'>{</span>s2<span class='curlybracket'>}</span>;                           <span class='comment'>// invoke #3 (not the copy constructor)</span>
S s4 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                         <span class='comment'>// invoke #4</span>
</span> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'><div id='example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> Map <span class='curlybracket'>{</span>
  Map<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>pair<span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>string,<span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
Map ship <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='curlybracket'>{</span><span class='literal'>"Sophie"</span>,<span class='literal'>14</span><span class='curlybracket'>}</span>, <span class='curlybracket'>{</span><span class='literal'>"Surprise"</span>,<span class='literal'>28</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'><div id='example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='comment'>// no initializer-list constructors</span>
  S<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>double</span>, <span class='keyword'>double</span><span class='parenthesis'>)</span>;           <span class='comment'>// #1</span>
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                              <span class='comment'>// #2</span>
  <span class='comment'>// ...</span>
<span class='curlybracket'>}</span>;
S s1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3.0</span> <span class='curlybracket'>}</span>;               <span class='comment'>// OK, invoke #1</span>
S s2 <span class='curlybracket'>{</span> <span class='literal'>1.0</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;                 <span class='comment'>// error: narrowing</span>
S s3 <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                           <span class='comment'>// OK, invoke #2</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='3.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.8'>(3.8)</a></div><div class='texpara'><div id='3.8.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> is an enumeration
with a fixed underlying type (<a href='dcl.enum' title='9.7.1&emsp;Enumeration declarations'>[dcl.<span class='shy'></span>enum]</a>) <span class='texttt'>U</span>,
the <a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list_'><span class='textsf'><i >initializer-list</i></span></span></a> has a single element <span class='texttt'>v</span> of scalar type,
<span class='texttt'>v</span> can be implicitly converted to <span class='texttt'>U</span>, and
the initialization is direct-list-initialization,
the object is initialized with the value <span class='texttt'>T<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span></span> (<a href='expr.type.conv' title='7.6.1.4&emsp;Explicit type conversion (functional notation)'>[expr.<span class='shy'></span>type.<span class='shy'></span>conv]</a>);
if a narrowing conversion is required to convert <span class='texttt'>v</span>
to <span class='texttt'>U</span>, the program is ill-formed<a class='hidden_link' href='#3.8.sentence-1'>.</a></div> <div id='example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-7'>7</a></i>:&ensp;<span class='codeblock'><span class='keyword'>enum</span> byte <span class='operator'>:</span> <span class='keyword'>unsigned</span> <span class='keyword'>char</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
byte b <span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span>;                      <span class='comment'>// OK</span>
byte c <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span>;                    <span class='comment'>// error</span>
byte d <span class='operator'>=</span> byte<span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span>;                <span class='comment'>// OK; same value as <span class='tcode_in_codeblock'>b</span></span>
byte e <span class='curlybracket'>{</span> <span class='operator'>-</span><span class='literal'>1</span> <span class='curlybracket'>}</span>;                      <span class='comment'>// error</span>

<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> byte b; <span class='curlybracket'>}</span>;
A a1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;                  <span class='comment'>// error</span>
A a2 <span class='operator'>=</span> <span class='curlybracket'>{</span> byte<span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;              <span class='comment'>// OK</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span>byte<span class='parenthesis'>)</span>;
f<span class='parenthesis'>(</span><span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                          <span class='comment'>// error</span>

<span class='keyword'>enum</span> <span class='keyword'>class</span> Handle <span class='operator'>:</span> uint32_t <span class='curlybracket'>{</span> Invalid <span class='operator'>=</span> <span class='literal'>0</span> <span class='curlybracket'>}</span>;
Handle h <span class='curlybracket'>{</span> <span class='literal'>42</span> <span class='curlybracket'>}</span>;                    <span class='comment'>// OK</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='3.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.9'>(3.9)</a></div><div class='texpara'><div id='3.9.sentence-1' class='sentence'>Otherwise, if
the initializer list
is not a <a href='dcl.init.general#nt:designated-initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:designated-initializer-list___'><span class='textsf'><i >designated-initializer-list</i></span></span></a> and
has a single element of type <span class='texttt'>E</span> and either
<span class='texttt'>T</span> is not a reference type or its referenced type is
reference-related to <span class='texttt'>E</span>, the object or reference is initialized
from that element (by copy-initialization for copy-list-initialization,
or by direct-initialization for direct-list-initialization);
if a narrowing conversion (see below) is required
to convert the element to <span class='texttt'>T</span>, the program is ill-formed<a class='hidden_link' href='#3.9.sentence-1'>.</a></div></div><div class='texpara'><div id='example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-8'>8</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span> x1 <span class='curlybracket'>{</span><span class='literal'>2</span><span class='curlybracket'>}</span>;                         <span class='comment'>// OK</span>
<span class='keyword'>int</span> x2 <span class='curlybracket'>{</span><span class='literal'>2.0</span><span class='curlybracket'>}</span>;                       <span class='comment'>// error: narrowing</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='3.10'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.10'>(3.10)</a></div><div class='texpara'><div id='3.10.sentence-1' class='sentence'>Otherwise, if <span class='texttt'>T</span> is a reference type, a prvalue is generated<a class='hidden_link' href='#3.10.sentence-1'>.</a></div> <div id='3.10.sentence-2' class='sentence'>The prvalue initializes its result object by copy-list-initialization from the initializer list<a class='hidden_link' href='#3.10.sentence-2'>.</a></div> <div id='3.10.sentence-3' class='sentence'>The prvalue is then used to direct-initialize the reference<a class='hidden_link' href='#3.10.sentence-3'>.</a></div> <div id='3.10.sentence-4' class='sentence'>The type of the prvalue is the type referenced by <span class='texttt'>T</span>,
unless <span class='texttt'>T</span> is “reference to array of unknown bound of <span class='texttt'>U</span>”,
in which case the type of the prvalue is
the type of <span class='texttt'>x</span> in the declaration <span class='texttt'>U x<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='math'><span class='mathalpha'>H</span></span></span>,
where <span class='math'><span class='mathalpha'>H</span></span> is the initializer list<a class='hidden_link' href='#3.10.sentence-4'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='3.10.sentence-5' class='sentence'>As usual, the binding will fail and the program is ill-formed if
the reference type is an lvalue reference to a non-const type<a class='hidden_link' href='#3.10.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div><div class='texpara'><div id='example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-9'>9</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  S<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>; <span class='comment'>// #1</span>
  S<span class='parenthesis'>(</span><span class='keyword'>const</span> std<span class='operator'>::</span>string<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;            <span class='comment'>// #2</span>
  <span class='comment'>// ...</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>const</span> S<span class='operator'>&amp;</span> r1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3.0</span> <span class='curlybracket'>}</span>;        <span class='comment'>// OK, invoke #1</span>
<span class='keyword'>const</span> S<span class='operator'>&amp;</span> r2 <span class='curlybracket'>{</span> <span class='literal'>"Spinach"</span> <span class='curlybracket'>}</span>;          <span class='comment'>// OK, invoke #2</span>
S<span class='operator'>&amp;</span> r3 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;                <span class='comment'>// error: initializer is not an lvalue</span>
<span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> i1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span> <span class='curlybracket'>}</span>;              <span class='comment'>// OK</span>
<span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> i2 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1.1</span> <span class='curlybracket'>}</span>;            <span class='comment'>// error: narrowing</span>
<span class='keyword'>const</span> <span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span>iar<span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>;     <span class='comment'>// OK, <span class='tcode_in_codeblock'>iar</span> is bound to temporary array</span>

<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> a;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='keyword'>explicit</span> B<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>const</span> B<span class='operator'>&amp;</span> b2<span class='curlybracket'>{</span>a<span class='curlybracket'>}</span>;                     <span class='comment'>// error: cannot copy-list-initialize <span class='tcode_in_codeblock'>B</span> temporary from <span class='tcode_in_codeblock'>A</span></span>

<span class='keyword'>struct</span> C <span class='curlybracket'>{</span> <span class='keyword'>int</span> x; <span class='curlybracket'>}</span>;
C<span class='operator'>&amp;</span><span class='operator'>&amp;</span> c <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>1</span> <span class='curlybracket'>}</span>;                 <span class='comment'>// OK</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='3.11'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.11'>(3.11)</a></div><div class='texpara'><div id='3.11.sentence-1' class='sentence'>Otherwise, if the initializer list has no elements, the object is
value-initialized<a class='hidden_link' href='#3.11.sentence-1'>.</a></div></div><div class='texpara'><div id='example-10' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-10'>10</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span><span class='operator'>*</span><span class='operator'>*</span> pp <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;                        <span class='comment'>// initialized to null pointer</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='3.12'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.12'>(3.12)</a></div><div class='texpara'><div id='3.12.sentence-1' class='sentence'>Otherwise, the program is ill-formed<a class='hidden_link' href='#3.12.sentence-1'>.</a></div></div><div class='texpara'><div id='example-11' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-11'>11</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>int</span> i; <span class='keyword'>int</span> j; <span class='curlybracket'>}</span>;
A a1 <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>;                      <span class='comment'>// aggregate initialization</span>
A a2 <span class='curlybracket'>{</span> <span class='literal'>1.2</span> <span class='curlybracket'>}</span>;                       <span class='comment'>// error: narrowing</span>
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  B<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
B b1 <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>;                      <span class='comment'>// creates <span class='tcode_in_codeblock'>initializer_<span class='shy'></span>list&lt;int&gt;</span> and calls constructor</span>
B b2 <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2.0</span> <span class='curlybracket'>}</span>;                    <span class='comment'>// error: narrowing</span>
<span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  C<span class='parenthesis'>(</span><span class='keyword'>int</span> i, <span class='keyword'>double</span> j<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
C c1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2.2</span> <span class='curlybracket'>}</span>;                  <span class='comment'>// calls constructor with arguments (1, 2.2)</span>
C c2 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1.1</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>;                  <span class='comment'>// error: narrowing</span>

<span class='keyword'>int</span> j <span class='curlybracket'>{</span> <span class='literal'>1</span> <span class='curlybracket'>}</span>;                        <span class='comment'>// initialize to 1</span>
<span class='keyword'>int</span> k <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                          <span class='comment'>// initialize to 0</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li></ul></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/declarations.tex#L6190'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>Within the <a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list__'><span class='textsf'><i >initializer-list</i></span></span></a> of a <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list__'><span class='textsf'><i >braced-init-list</i></span></span></a>,
the <a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause_'><span class='textsf'><i >initializer-clause</i></span></span></a><i >s</i>, including any that result from pack
expansions (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>), are evaluated in the order in which they
appear<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>That is, every value computation and side effect associated with a
given <a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause__'><span class='textsf'><i >initializer-clause</i></span></span></a> is sequenced before every value
computation and side effect associated with any <a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause___'><span class='textsf'><i >initializer-clause</i></span></span></a>
that follows it in the comma-separated list of the <a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list___'><span class='textsf'><i >initializer-list</i></span></span></a><a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>:&ensp;<div id='4.sentence-3' class='sentence'>This evaluation ordering holds regardless of the semantics of the
initialization; for example, it applies when the elements of the
<a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list____'><span class='textsf'><i >initializer-list</i></span></span></a> are interpreted as arguments of a constructor
call, even though ordinarily there are no sequencing constraints on the
arguments of a call<a class='hidden_link' href='#4.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/declarations.tex#L6206'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>An object of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_<span class='shy'></span>list<span class='anglebracket'>&lt;</span>E<span class='anglebracket'>&gt;</span></span> is constructed from
an initializer list as if
the implementation generated and materialized (<a href='conv.rval' title='7.3.5&emsp;Temporary materialization conversion'>[conv.<span class='shy'></span>rval]</a>)
a prvalue of type “array of <span class='math'><span class='mathalpha'>N</span></span> <span class='texttt'><span class='keyword'>const</span> E</span>”,
where <span class='math'><span class='mathalpha'>N</span></span> is the number of elements in the initializer list;
this is called the initializer list's <a class='hidden_link' href='#def:array,backing' title='9.4.5&emsp;List-initialization&emsp;[dcl.init.list]'><span id='def:array,backing'><i >backing array</i></span></a><a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>Each element of the backing array is copy-initialized with the
corresponding element of the initializer list, and the
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>initializer_<span class='shy'></span>list<span class='anglebracket'>&lt;</span>E<span class='anglebracket'>&gt;</span></span> object is constructed to refer to that array<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-5'>5</a></i>:&ensp;<div id='5.sentence-3' class='sentence'>A constructor or conversion function selected for the copy needs to be
accessible (<a href='class.access' title='11.8&emsp;Member access control'>[class.<span class='shy'></span>access]</a>) in the context of the initializer list<a class='hidden_link' href='#5.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='5.sentence-4' class='sentence'>
If a narrowing conversion is required to initialize any of the elements,
the program is ill-formed<a class='hidden_link' href='#5.sentence-4'>.</a></div> <div id='note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-6'>6</a></i>:&ensp;<div id='5.sentence-5' class='sentence'>Backing arrays are potentially non-unique objects (<a href='intro.object' title='6.7.2&emsp;Object model'>[intro.<span class='shy'></span>object]</a>)<a class='hidden_link' href='#5.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/declarations.tex#L6226'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>The backing array has the same lifetime as any other temporary
object (<a href='class.temporary' title='6.7.7&emsp;Temporary objects'>[class.<span class='shy'></span>temporary]</a>), except that initializing an
<span class='texttt'>initializer_<span class='shy'></span>list</span> object from the array extends the lifetime of
the array exactly like binding a reference to a temporary<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='example-12' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-12'>12</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> il<span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>float</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>, x, <span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>mutable</span> <span class='keyword'>int</span> i;
<span class='curlybracket'>}</span>;
<span class='keyword'>void</span> q<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> r<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  q<span class='parenthesis'>(</span><span class='curlybracket'>{</span>A<span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>, A<span class='curlybracket'>{</span><span class='literal'>2</span><span class='curlybracket'>}</span>, A<span class='curlybracket'>{</span><span class='literal'>3</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='6.sentence-2' class='sentence'>The initialization will be implemented in a way roughly equivalent to this:
<span class='codeblock'><span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>float</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> <span class='keyword'>double</span> __a<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='keyword'>double</span><span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>, <span class='keyword'>double</span><span class='curlybracket'>{</span>x<span class='curlybracket'>}</span>, <span class='keyword'>double</span><span class='curlybracket'>{</span><span class='literal'>3</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span>;              <span class='comment'>// backing array</span>
  f<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>__a, __a<span class='operator'>+</span><span class='literal'>3</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>constexpr</span> <span class='keyword'>double</span> __b<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='keyword'>double</span><span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>, <span class='keyword'>double</span><span class='curlybracket'>{</span><span class='literal'>2</span><span class='curlybracket'>}</span>, <span class='keyword'>double</span><span class='curlybracket'>{</span><span class='literal'>3</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span>;   <span class='comment'>// backing array</span>
  f<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>__b, __b<span class='operator'>+</span><span class='literal'>3</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>void</span> r<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> A __c<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span>A<span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>, A<span class='curlybracket'>{</span><span class='literal'>2</span><span class='curlybracket'>}</span>, A<span class='curlybracket'>{</span><span class='literal'>3</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span>;                                  <span class='comment'>// backing array</span>
  q<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>__c, __c<span class='operator'>+</span><span class='literal'>3</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span>
assuming that the implementation
can construct an <span class='texttt'>initializer_<span class='shy'></span>list</span> object with a pair of pointers, and
with the understanding that <span class='texttt'>__b</span> does not outlive the call to <span class='texttt'>f</span><a class='hidden_link' href='#6.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'><div id='example-13' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-13'>13</a></i>:&ensp;<span class='codeblock'><span class='keyword'>typedef</span> std<span class='operator'>::</span>complex<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> cmplx;
std<span class='operator'>::</span>vector<span class='anglebracket'>&lt;</span>cmplx<span class='anglebracket'>&gt;</span> v1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  std<span class='operator'>::</span>vector<span class='anglebracket'>&lt;</span>cmplx<span class='anglebracket'>&gt;</span> v2<span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;
  std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> i3 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> i4;
  A<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> i4<span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>            <span class='comment'>// ill-formed, would create a dangling reference</span>
<span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='6.sentence-3' class='sentence'>For <span class='texttt'>v1</span> and <span class='texttt'>v2</span>, the <span class='texttt'>initializer_<span class='shy'></span>list</span> object
is a parameter in a function call, so the array created for
<span class='texttt'><span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span></span> has full-expression lifetime<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='6.sentence-4' class='sentence'>For <span class='texttt'>i3</span>, the <span class='texttt'>initializer_<span class='shy'></span>list</span> object is a variable,
so the array persists for the lifetime of the variable<a class='hidden_link' href='#6.sentence-4'>.</a></div> <div id='6.sentence-5' class='sentence'>For <span class='texttt'>i4</span>, the <span class='texttt'>initializer_<span class='shy'></span>list</span> object is initialized in
the constructor's <a href='class.base.init#nt:ctor-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer'><span class='textsf'><i >ctor-initializer</i></span></span></a> as if by binding
a temporary array to a reference member, so the program is
ill-formed (<a href='class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#6.sentence-5'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/declarations.tex#L6297'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:conversion,narrowing' title='9.4.5&emsp;List-initialization&emsp;[dcl.init.list]'><span id='def:conversion,narrowing'><i >narrowing conversion</i></span></a> is an implicit conversion
<ul class='itemize'><li id='7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.1'>(7.1)</a></div>from a floating-point type to an integer type, or</li><li id='7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.2'>(7.2)</a></div>from a floating-point type <span class='texttt'>T</span> to another floating-point type
whose floating-point conversion rank is neither greater than nor equal to
that of <span class='texttt'>T</span>,
except where the result of the conversion is a constant expression and
either its value is finite and the conversion did not overflow, or
the values before and after the conversion are not finite, or</li><li id='7.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.3'>(7.3)</a></div>from an integer type or unscoped enumeration type to a floating-point type, except
where the source is a constant expression and the actual value after conversion will fit
into the target type and will produce the original value when converted back to the
original type, or</li><li id='7.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.4'>(7.4)</a></div>from an integer type or unscoped enumeration type to an integer type that cannot
represent all the values of the original type, except where
<ul class='itemize'><li id='7.4.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#7.4.1'>(7.4.1)</a></div>the source is a bit-field whose width <span class='math'><span class='mathalpha'>w</span></span> is less than that of its type
(or, for an enumeration type, its underlying type) and
the target type can represent all the values
of a hypothetical extended integer type
with width <span class='math'><span class='mathalpha'>w</span></span> and with the same signedness as the original type or</li><li id='7.4.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#7.4.2'>(7.4.2)</a></div>the source is a constant
expression whose value after integral promotions will fit into the target type, or</li></ul></li><li id='7.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.5'>(7.5)</a></div>from a pointer type or a pointer-to-member type to <span class='texttt'><span class='keyword'>bool</span></span><a class='hidden_link' href='#7.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-7'>7</a></i>:&ensp;<div id='7.sentence-2' class='sentence'>As indicated above, such conversions are not allowed at the top level in
list-initializations<a class='hidden_link' href='#7.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='example-14' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-14'>14</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>999</span>;                    <span class='comment'>// <span class='tcode_in_codeblock'>x</span> is not a constant expression</span>
<span class='keyword'>const</span> <span class='keyword'>int</span> y <span class='operator'>=</span> <span class='literal'>999</span>;
<span class='keyword'>const</span> <span class='keyword'>int</span> z <span class='operator'>=</span> <span class='literal'>99</span>;
<span class='keyword'>char</span> c1 <span class='operator'>=</span> x;                    <span class='comment'>// OK, though it potentially narrows (in this case, it does narrow)</span>
<span class='keyword'>char</span> c2<span class='curlybracket'>{</span>x<span class='curlybracket'>}</span>;                     <span class='comment'>// error: potentially narrows</span>
<span class='keyword'>char</span> c3<span class='curlybracket'>{</span>y<span class='curlybracket'>}</span>;                     <span class='comment'>// error: narrows (assuming <span class='tcode_in_codeblock'>char</span> is 8 bits)</span>
<span class='keyword'>char</span> c4<span class='curlybracket'>{</span>z<span class='curlybracket'>}</span>;                     <span class='comment'>// OK, no narrowing needed</span>
<span class='keyword'>unsigned</span> <span class='keyword'>char</span> uc1 <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>5</span><span class='curlybracket'>}</span>;        <span class='comment'>// OK, no narrowing needed</span>
<span class='keyword'>unsigned</span> <span class='keyword'>char</span> uc2 <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='operator'>-</span><span class='literal'>1</span><span class='curlybracket'>}</span>;       <span class='comment'>// error: narrows</span>
<span class='keyword'>unsigned</span> <span class='keyword'>int</span> ui1 <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='operator'>-</span><span class='literal'>1</span><span class='curlybracket'>}</span>;        <span class='comment'>// error: narrows</span>
<span class='keyword'>signed</span> <span class='keyword'>int</span> si1 <span class='operator'>=</span>
  <span class='curlybracket'>{</span> <span class='parenthesis'>(</span><span class='keyword'>unsigned</span> <span class='keyword'>int</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='literal'>1</span> <span class='curlybracket'>}</span>;         <span class='comment'>// error: narrows</span>
<span class='keyword'>int</span> ii <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>2.0</span><span class='curlybracket'>}</span>;                 <span class='comment'>// error: narrows</span>
<span class='keyword'>float</span> f1 <span class='curlybracket'>{</span> x <span class='curlybracket'>}</span>;                 <span class='comment'>// error: potentially narrows</span>
<span class='keyword'>float</span> f2 <span class='curlybracket'>{</span> <span class='literal'>7</span> <span class='curlybracket'>}</span>;                 <span class='comment'>// OK, 7 can be exactly represented as a <span class='tcode_in_codeblock'>float</span></span>
<span class='keyword'>bool</span> b <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>"meow"</span><span class='curlybracket'>}</span>;              <span class='comment'>// error: narrows</span>
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> a<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>2</span>, f<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span>, f<span class='parenthesis'>(</span><span class='literal'>2.0</span><span class='parenthesis'>)</span> <span class='curlybracket'>}</span>;  <span class='comment'>// OK, the <span class='tcode_in_codeblock'>double</span>-to-<span class='tcode_in_codeblock'>int</span> conversion is not at the top level</span>
</span> —&nbsp;<i>end example</i>]</div></div> </div></div></div></body></html>