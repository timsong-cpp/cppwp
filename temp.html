<!DOCTYPE html><html lang='en'><head><title>[temp]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>13</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><span class='indexparent'><a class='index' id=':template'></a></span><div id='pre' class='section'><h2 ><a class='secnum' href='#pre' style='min-width:88pt'>13.1</a> Preamble <a class='abbr_ref' href='temp.pre'>[temp.pre]</a></h2><div class='para' id='pre-1'><div class='marginalizedparent'><a class='marginalized' href='#pre-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L12'>#</a></div><div id='pre-1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:template' id='def:template'><i >template</i></a> defines a family of classes, functions, or variables,
an alias for a family of types, or a concept<a class='hidden_link' href='#pre-1.sentence-1'>.</a></div><span class='indexparent'><a class='index' id=':template'></a></span><pre class='bnf'><a class='nontermdef' href='#nt:template-declaration' id='nt:template-declaration'>template-declaration:</a>
&#9;<a class='grammarterm' href='#nt:template-head'>template-head</a> <a class='grammarterm' href='dcl.pre#nt:declaration'>declaration</a>
&#9;<a class='grammarterm' href='#nt:template-head'>template-head</a> <a class='grammarterm' href='#nt:concept-definition'>concept-definition</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:template-head' id='nt:template-head'>template-head:</a>
&#9;<span class='texttt'><span class='keyword'>template</span></span><span class='indexparent'><a class='index' id=':template_'></a></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:template-parameter-list' id='nt:template-parameter-list'>template-parameter-list:</a>
&#9;<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
&#9;<a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a> <span class='terminal'>,</span> <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:requires-clause' id='nt:requires-clause'>requires-clause:</a>
&#9;<span class='texttt'><span class='keyword'>requires</span></span><span class='indexparent'><a class='index' id=':requires'></a></span> <a class='grammarterm' href='#nt:constraint-logical-or-expression'>constraint-logical-or-expression</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:constraint-logical-or-expression' id='nt:constraint-logical-or-expression'>constraint-logical-or-expression:</a>
&#9;<a class='grammarterm' href='#nt:constraint-logical-and-expression'>constraint-logical-and-expression</a>
&#9;<a class='grammarterm' href='#nt:constraint-logical-or-expression'>constraint-logical-or-expression</a> <span class='terminal'><span class='operator'>|</span><span class='operator'>|</span></span> <a class='grammarterm' href='#nt:constraint-logical-and-expression'>constraint-logical-and-expression</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:constraint-logical-and-expression' id='nt:constraint-logical-and-expression'>constraint-logical-and-expression:</a>
&#9;<a class='grammarterm' href='expr.prim#nt:primary-expression'>primary-expression</a>
&#9;<a class='grammarterm' href='#nt:constraint-logical-and-expression'>constraint-logical-and-expression</a> <span class='terminal'><span class='operator'>&amp;</span><span class='operator'>&amp;</span></span> <a class='grammarterm' href='expr.prim#nt:primary-expression'>primary-expression</a>
</pre><div id='pre-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#pre-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='pre-1.sentence-2' class='sentence'>The <span class='texttt'><span class='anglebracket'>&gt;</span></span> token following the
<a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a> of a
<a class='grammarterm' href='#nt:template-declaration'>template-declaration</a>
may be the product of replacing a
<span class='texttt'><span class='anglebracket'>&gt;</span>&gt;</span> token by two consecutive <span class='texttt'><span class='anglebracket'>&gt;</span></span>
tokens (<a href='#names'>[temp.names]</a>)<a class='hidden_link' href='#pre-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='pre-2'><div class='marginalizedparent'><a class='marginalized' href='#pre-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L61'>#</a></div><div id='pre-2.sentence-1' class='sentence'>The
<a class='grammarterm' href='dcl.pre#nt:declaration'>declaration</a>
in a
<a class='grammarterm' href='#nt:template-declaration'>template-declaration</a>
(if any)
shall
<ul class='itemize'><li id='pre-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#pre-2.1'>(2.1)</a></div>declare or define a function, a class, or a variable, or</li><li id='pre-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#pre-2.2'>(2.2)</a></div>define a member function, a member class, a member enumeration, or a static data member of a
class template or of a class nested within a class template, or</li><li id='pre-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#pre-2.3'>(2.3)</a></div>define a member template of a class or class template, or</li><li id='pre-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#pre-2.4'>(2.4)</a></div>be a <a class='grammarterm' href='#nt:deduction-guide'>deduction-guide</a>, or</li><li id='pre-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#pre-2.5'>(2.5)</a></div>be an <a class='grammarterm' href='dcl.pre#nt:alias-declaration'>alias-declaration</a><a class='hidden_link' href='#pre-2.sentence-1'>.</a></li></ul></div></div><div class='para' id='pre-3'><div class='marginalizedparent'><a class='marginalized' href='#pre-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L81'>#</a></div><div id='pre-3.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:template-declaration'>template-declaration</a> is a <a class='grammarterm' href='dcl.pre#nt:declaration'>declaration</a><a class='hidden_link' href='#pre-3.sentence-1'>.</a></div> <div id='pre-3.sentence-2' class='sentence'>A declaration introduced by a template declaration of a
<span class='indexparent'><a class='index' id=':variable_template,definition_of'></a></span>variable is a <a class='hidden_link' href='#def:template,variable' id='def:template,variable'><i >variable template</i></a><a class='hidden_link' href='#pre-3.sentence-2'>.</a></div> <div id='pre-3.sentence-3' class='sentence'>A variable template at class scope is a
<a class='hidden_link' href='#def:template,static_data_member' id='def:template,static_data_member'><i >static data member template</i></a><a class='hidden_link' href='#pre-3.sentence-3'>.</a></div><div style='height:0.6em;display:block'></div><div id='pre-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#pre-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> T pi <span class='operator'>=</span> T<span class='parenthesis'>(</span><span class='literal'>3.1415926535897932385L</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  T circular_area<span class='parenthesis'>(</span>T r<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>return</span> pi<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>*</span> r <span class='operator'>*</span> r;
  <span class='curlybracket'>}</span>
<span class='keyword'>struct</span> matrix_constants <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>using</span> pauli <span class='operator'>=</span> hermitian_matrix<span class='anglebracket'>&lt;</span>T, <span class='literal'>2</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>static</span> pauli<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> sigma1 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='curlybracket'>{</span> <span class='literal'>0</span>, <span class='literal'>1</span> <span class='curlybracket'>}</span>, <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>0</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>static</span> pauli<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> sigma2 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='curlybracket'>{</span> <span class='literal'>0</span>, <span class='operator'>-</span><span class='literal'>1i</span> <span class='curlybracket'>}</span>, <span class='curlybracket'>{</span> <span class='literal'>1i</span>, <span class='literal'>0</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>constexpr</span> <span class='keyword'>static</span> pauli<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> sigma3 <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>0</span> <span class='curlybracket'>}</span>, <span class='curlybracket'>{</span> <span class='literal'>0</span>, <span class='operator'>-</span><span class='literal'>1</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='pre-4'><div class='marginalizedparent'><a class='marginalized' href='#pre-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L109'>#</a></div><div id='pre-4.sentence-1' class='sentence'>A
<a class='grammarterm' href='#nt:template-declaration'>template-declaration</a>
can appear only as a namespace scope or class scope declaration<a class='hidden_link' href='#pre-4.sentence-1'>.</a></div> <div id='pre-4.sentence-2' class='sentence'>Its <a class='grammarterm' href='dcl.pre#nt:declaration'>declaration</a> shall not be an
<a class='grammarterm' href='module.interface#nt:export-declaration'>export-declaration</a><a class='hidden_link' href='#pre-4.sentence-2'>.</a></div> <div id='pre-4.sentence-3' class='sentence'>In a function template declaration, the last component of the
<a class='grammarterm' href='dcl.decl#nt:declarator-id'>declarator-id</a>
shall not be a
<a class='grammarterm' href='#nt:template-id'>template-id</a><a class='hidden_link' href='#pre-4.sentence-3'>.</a></div> <div id='pre-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#pre-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='pre-4.sentence-4' class='sentence'>That last component may be an <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a>, an <a class='grammarterm' href='over.oper#nt:operator-function-id'>operator-function-id</a>,
a <a class='grammarterm' href='class.conv.fct#nt:conversion-function-id'>conversion-function-id</a>, or a <a class='grammarterm' href='over.literal#nt:literal-operator-id'>literal-operator-id</a><a class='hidden_link' href='#pre-4.sentence-4'>.</a></div> <div id='pre-4.sentence-5' class='sentence'>In
a class template declaration, if the
class name
is a
<a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>,
the declaration declares a <a href='#class.spec'>class template partial specialization</a><a class='hidden_link' href='#pre-4.sentence-5'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='pre-5'><div class='marginalizedparent'><a class='marginalized' href='#pre-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L129'>#</a></div><div id='pre-5.sentence-1' class='sentence'>In a
<a class='grammarterm' href='#nt:template-declaration'>template-declaration</a>,
explicit specialization, or explicit instantiation the
<a class='grammarterm' href='dcl.decl#nt:init-declarator-list'>init-declarator-list</a>
in the declaration shall contain at most one declarator<a class='hidden_link' href='#pre-5.sentence-1'>.</a></div> <div id='pre-5.sentence-2' class='sentence'>When such a declaration is used to declare a class template,
no declarator is permitted<a class='hidden_link' href='#pre-5.sentence-2'>.</a></div></div><div class='para' id='pre-6'><div class='marginalizedparent'><a class='marginalized' href='#pre-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L138'>#</a></div><div id='pre-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':template_name,linkage_of'></a></span>A template name has <a href='basic.link'>linkage</a><a class='hidden_link' href='#pre-6.sentence-1'>.</a></div> <div id='pre-6.sentence-2' class='sentence'>Specializations (explicit or implicit) of
a template that has internal linkage are
distinct from all specializations in other translation
units<a class='hidden_link' href='#pre-6.sentence-2'>.</a></div> <div id='pre-6.sentence-3' class='sentence'>A template, a template <a href='#expl.spec'>explicit specialization</a>, and a class
template partial specialization shall not have C linkage<a class='hidden_link' href='#pre-6.sentence-3'>.</a></div> <div id='pre-6.sentence-4' class='sentence'>Use of a linkage specification
other than <span class='texttt'><span class='literal'>"C"</span></span> or <span class='texttt'><span class='literal'>"C++"</span></span> with any of these constructs is
conditionally-supported, with
<span class='indexparent'><a class='index' id=':semantics_of_linkage_specification_on_templates'></a></span>implementation-defined semantics<a class='hidden_link' href='#pre-6.sentence-4'>.</a></div> <div id='pre-6.sentence-5' class='sentence'>Template definitions shall obey the <a href='basic.def.odr'>one-definition rule</a><a class='hidden_link' href='#pre-6.sentence-5'>.</a></div> <div id='pre-6.note-1' class='note'>[&nbsp;<a class='note_link' href='#pre-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='pre-6.sentence-6' class='sentence'>Default arguments for function templates and for member functions of
class templates are considered definitions for the purpose of template
instantiation (<a href='#decls'>[temp.decls]</a>) and must also obey the one-definition rule<a class='hidden_link' href='#pre-6.sentence-6'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='pre-7'><div class='marginalizedparent'><a class='marginalized' href='#pre-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L157'>#</a></div><div id='pre-7.sentence-1' class='sentence'>A class template shall not have the same name as any other
template, class, function, variable, enumeration, enumerator, namespace, or
type in the same scope (<a href='basic.scope'>[basic.scope]</a>), except as specified in <a href='#class.spec'>[temp.class.spec]</a><a class='hidden_link' href='#pre-7.sentence-1'>.</a></div> <div id='pre-7.sentence-2' class='sentence'>Except that a function template can be overloaded either by non-template
functions (<a href='dcl.fct'>[dcl.fct]</a>) with the same name or by other function templates
with the same name (<a href='#over'>[temp.over]</a>),
a template name declared in namespace scope or in class scope shall be unique
in that scope<a class='hidden_link' href='#pre-7.sentence-2'>.</a></div></div><div class='para' id='pre-8'><div class='marginalizedparent'><a class='marginalized' href='#pre-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L167'>#</a></div><div id='pre-8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':entity,templated'></a></span>An entity is <a class='hidden_link' href='#def:templated' id='def:templated'><i >templated</i></a>
if it is
<ul class='itemize'><li id='pre-8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#pre-8.1'>(8.1)</a></div>a template,</li><li id='pre-8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#pre-8.2'>(8.2)</a></div>an entity defined (<a href='basic.def'>[basic.def]</a>) or created (<a href='class.temporary'>[class.temporary]</a>)
      in a templated entity,</li><li id='pre-8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#pre-8.3'>(8.3)</a></div>a member of a templated entity,</li><li id='pre-8.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#pre-8.4'>(8.4)</a></div>an enumerator for an enumeration that is a templated entity, or</li><li id='pre-8.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#pre-8.5'>(8.5)</a></div>the closure type of a <a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a> (<a href='expr.prim.lambda.closure'>[expr.prim.lambda.closure]</a>)
      appearing in the declaration of a templated entity<a class='hidden_link' href='#pre-8.sentence-1'>.</a></li></ul></div><div id='pre-8.note-1' class='note'>[&nbsp;<a class='note_link' href='#pre-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='pre-8.sentence-2' class='sentence'>A local class, a local variable, or a friend function defined in a
templated entity is a templated entity<a class='hidden_link' href='#pre-8.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='pre-9'><div class='marginalizedparent'><a class='marginalized' href='#pre-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L186'>#</a></div><div id='pre-9.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:template-declaration'>template-declaration</a> is written
in terms of its template parameters<a class='hidden_link' href='#pre-9.sentence-1'>.</a></div> <div id='pre-9.sentence-2' class='sentence'>The optional <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a> following a
<a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a> allows the specification of
constraints (<a href='#constr.decl'>[temp.constr.decl]</a>) on template arguments (<a href='#arg'>[temp.arg]</a>)<a class='hidden_link' href='#pre-9.sentence-2'>.</a></div> <div id='pre-9.sentence-3' class='sentence'>The <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a> introduces the
<a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> that results from interpreting
the <a class='grammarterm' href='#nt:constraint-logical-or-expression'>constraint-logical-or-expression</a> as a
<a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a><a class='hidden_link' href='#pre-9.sentence-3'>.</a></div> <div id='pre-9.sentence-4' class='sentence'>The <a class='grammarterm' href='#nt:constraint-logical-or-expression'>constraint-logical-or-expression</a> of a
<a class='grammarterm' href='#nt:requires-clause'>requires-clause</a> is an unevaluated operand (<a href='expr.context'>[expr.context]</a>)<a class='hidden_link' href='#pre-9.sentence-4'>.</a></div> <div id='pre-9.note-1' class='note'>[&nbsp;<a class='note_link' href='#pre-9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='pre-9.sentence-5' class='sentence'>The expression in a <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a>
uses a restricted grammar to avoid ambiguities<a class='hidden_link' href='#pre-9.sentence-5'>.</a></div> <div id='pre-9.sentence-6' class='sentence'>Parentheses can be used to specify arbitrary expressions
in a <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a><a class='hidden_link' href='#pre-9.sentence-6'>.</a></div> <div id='pre-9.example-1' class='example'>[&nbsp;<a class='example_link' href='#pre-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>requires</span> N <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>sizeof</span> <span class='keyword'>new</span> <span class='keyword'>unsigned</span> <span class='keyword'>short</span>
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// error: parentheses required around <span class='tcode_in_codeblock'>==</span> expression</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='pre-10'><div class='marginalizedparent'><a class='marginalized' href='#pre-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L211'>#</a></div><div id='pre-10.sentence-1' class='sentence'>A definition of
a function template,
member function of a class template,
variable template,
or static data member of a class template
shall be reachable from the end of every definition domain (<a href='basic.def.odr'>[basic.def.odr]</a>)
in which it is implicitly instantiated (<a href='#inst'>[temp.inst]</a>) unless the
corresponding specialization is explicitly instantiated (<a href='#explicit'>[temp.explicit]</a>)
in some translation unit; no diagnostic is required<a class='hidden_link' href='#pre-10.sentence-1'>.</a></div></div></div><div id='param' class='section'><h2 ><a class='secnum' href='#param' style='min-width:88pt'>13.2</a> Template parameters <a class='abbr_ref' href='temp.param'>[temp.param]</a></h2><div class='para' id='param-1'><div class='marginalizedparent'><a class='marginalized' href='#param-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L224'>#</a></div><div id='param-1.sentence-1' class='sentence'>The syntax for
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>
is:</div><pre class='bnf'><a class='nontermdef' href='#nt:template-parameter' id='nt:template-parameter'>template-parameter:</a>
&#9;<a class='grammarterm' href='#nt:type-parameter'>type-parameter</a>
&#9;<a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:type-parameter' id='nt:type-parameter'>type-parameter:</a>
&#9;<a class='grammarterm' href='#nt:type-parameter-key'>type-parameter-key</a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<a class='grammarterm' href='#nt:type-parameter-key'>type-parameter-key</a> <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='operator'>=</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a>
&#9;<a class='grammarterm' href='#nt:type-constraint'>type-constraint</a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<a class='grammarterm' href='#nt:type-constraint'>type-constraint</a> <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='operator'>=</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a>
&#9;<a class='grammarterm' href='#nt:template-head'>template-head</a> <a class='grammarterm' href='#nt:type-parameter-key'>type-parameter-key</a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<a class='grammarterm' href='#nt:template-head'>template-head</a> <a class='grammarterm' href='#nt:type-parameter-key'>type-parameter-key</a> <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='operator'>=</span></span> <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:type-parameter-key' id='nt:type-parameter-key'>type-parameter-key:</a>
&#9;<span class='texttt'><span class='keyword'>class</span></span><span class='indexparent'><a class='index' id=':class'></a></span>
&#9;<span class='texttt'><span class='keyword'>typename</span></span><span class='indexparent'><a class='index' id=':typename'></a></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:type-constraint' id='nt:type-constraint'>type-constraint:</a>
&#9;<a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='#nt:concept-name'>concept-name</a>
&#9;<a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='#nt:concept-name'>concept-name</a> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='anglebracket'>&gt;</span></span>
</pre><div id='param-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#param-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='param-1.sentence-2' class='sentence'>The <span class='texttt'><span class='anglebracket'>&gt;</span></span> token following the
<a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a> of a
<a class='grammarterm' href='#nt:type-parameter'>type-parameter</a>
may be the product of replacing a
<span class='texttt'><span class='anglebracket'>&gt;</span>&gt;</span> token by two consecutive <span class='texttt'><span class='anglebracket'>&gt;</span></span>
tokens (<a href='#names'>[temp.names]</a>)<a class='hidden_link' href='#param-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='param-2'><div class='marginalizedparent'><a class='marginalized' href='#param-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L266'>#</a></div><div id='param-2.sentence-1' class='sentence'>There is no semantic difference between
<span class='texttt'><span class='keyword'>class</span></span>
and
<span class='texttt'><span class='keyword'>typename</span></span>
in a
<a class='grammarterm' href='#nt:type-parameter-key'>type-parameter-key</a><a class='hidden_link' href='#param-2.sentence-1'>.</a></div> <div id='param-2.sentence-2' class='sentence'><span class='texttt'><span class='keyword'>typename</span></span>
followed by an
<a class='grammarterm' href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a>
names a template type parameter<a class='hidden_link' href='#param-2.sentence-2'>.</a></div> <div id='param-2.sentence-3' class='sentence'><span class='texttt'><span class='keyword'>typename</span></span>
followed by a
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a>
denotes the type in a non-type<a class='footnotenum' href='#footnote-127' id='footnoteref-127'>127</a>
<a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a><a class='hidden_link' href='#param-2.sentence-3'>.</a></div> <div id='param-2.sentence-4' class='sentence'>A <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> of the form
<span class='texttt'><span class='keyword'>class</span></span> <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> is a <a class='grammarterm' href='#nt:type-parameter'>type-parameter</a><a class='hidden_link' href='#param-2.sentence-4'>.</a></div> <div id='param-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#param-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>class</span> T <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>int</span> i;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, T i<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  T t1 <span class='operator'>=</span> i;         <span class='comment'>// template-parameters <span class='tcode_in_codeblock'>T</span> and <span class='tcode_in_codeblock'>i</span></span>
  <span class='operator'>::</span>T t2 <span class='operator'>=</span> <span class='operator'>::</span>i;     <span class='comment'>// global namespace members <span class='tcode_in_codeblock'>T</span> and <span class='tcode_in_codeblock'>i</span></span>
<span class='curlybracket'>}</span>
</pre> <div id='param-2.sentence-5' class='sentence'>
Here, the template <span class='texttt'>f</span> has a <a class='grammarterm' href='#nt:type-parameter'>type-parameter</a>
called <span class='texttt'>T</span>, rather than an unnamed non-type
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> of class <span class='texttt'>T</span><a class='hidden_link' href='#param-2.sentence-5'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='param-2.sentence-6' class='sentence'>
A storage class shall not be specified in a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
declaration<a class='hidden_link' href='#param-2.sentence-6'>.</a></div> <div id='param-2.sentence-7' class='sentence'>Types shall not be defined in a <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
declaration<a class='hidden_link' href='#param-2.sentence-7'>.</a></div></div><div class='para' id='param-3'><div class='marginalizedparent'><a class='marginalized' href='#param-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L313'>#</a></div><div id='param-3.sentence-1' class='sentence'>A
<a class='grammarterm' href='#nt:type-parameter'>type-parameter</a>
whose identifier does not follow an ellipsis
defines its
<a class='grammarterm' href='lex.name#nt:identifier'>identifier</a>
to be a
<a class='grammarterm' href='dcl.typedef#nt:typedef-name'>typedef-name</a>
(if declared without
<span class='texttt'><span class='keyword'>template</span></span>)
or
<a class='grammarterm' href='#nt:template-name'>template-name</a>
(if declared with
<span class='texttt'><span class='keyword'>template</span></span>)
in the scope of the template declaration<a class='hidden_link' href='#param-3.sentence-1'>.</a></div> <div id='param-3.note-1' class='note'>[&nbsp;<a class='note_link' href='#param-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='param-3.sentence-2' class='sentence'>A template argument may be a class template or alias template<a class='hidden_link' href='#param-3.sentence-2'>.</a></div> <div id='param-3.sentence-3' class='sentence'>For example,</div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> myarray <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> K, <span class='keyword'>class</span> V, <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> C <span class='operator'>=</span> myarray<span class='anglebracket'>&gt;</span>
<span class='keyword'>class</span> Map <span class='curlybracket'>{</span>
  C<span class='anglebracket'>&lt;</span>K<span class='anglebracket'>&gt;</span> key;
  C<span class='anglebracket'>&lt;</span>V<span class='anglebracket'>&gt;</span> value;
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='param-4'><div class='marginalizedparent'><a class='marginalized' href='#param-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L343'>#</a></div><div id='param-4.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a> <span class='texttt'>Q</span> that designates a concept <span class='texttt'>C</span>
can be used to constrain a
contextually-determined type or template type parameter pack <span class='texttt'>T</span>
with a <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> <span class='texttt'>E</span> defined as follows<a class='hidden_link' href='#param-4.sentence-1'>.</a></div> <div id='param-4.sentence-2' class='sentence'>If <span class='texttt'>Q</span> is of the form <span class='texttt'>C<span class='anglebracket'>&lt;</span>A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, <span class='math'>⋯</span>, A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span><span class='anglebracket'>&gt;</span></span>,
then let <span class='texttt'>E<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base"><span class="mjx-mi"></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span></span></span></span></span></span> be <span class='texttt'>C<span class='anglebracket'>&lt;</span>T, A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, <span class='math'>⋯</span>, A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#param-4.sentence-2'>.</a></div> <div id='param-4.sentence-3' class='sentence'>Otherwise, let <span class='texttt'>E<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base"><span class="mjx-mi"></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span></span></span></span></span></span> be <span class='texttt'>C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#param-4.sentence-3'>.</a></div> <div id='param-4.sentence-4' class='sentence'>If <span class='texttt'>T</span> is not a pack,
then <span class='texttt'>E</span> is <span class='texttt'>E<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base"><span class="mjx-mi"></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span></span></span></span></span></span>,
otherwise <span class='texttt'>E</span> is <span class='texttt'><span class='parenthesis'>(</span>E<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base"><span class="mjx-mi"></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span></span></span></span></span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#param-4.sentence-4'>.</a></div> <div id='param-4.sentence-5' class='sentence'>This <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> <span class='texttt'>E</span> is called the
<a class='hidden_link' href='#def:constraint,immediately-declared' id='def:constraint,immediately-declared'><i >immediately-declared constraint</i></a>
of <span class='texttt'>Q</span> for <span class='texttt'>T</span><a class='hidden_link' href='#param-4.sentence-5'>.</a></div> <div id='param-4.sentence-6' class='sentence'>The concept designated by a <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a>
shall be a type concept (<a href='#concept'>[temp.concept]</a>)<a class='hidden_link' href='#param-4.sentence-6'>.</a></div></div><div class='para' id='param-5'><div class='marginalizedparent'><a class='marginalized' href='#param-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L360'>#</a></div><div id='param-5.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:type-parameter'>type-parameter</a> that starts with a <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a>
introduces the immediately-declared constraint
of the <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a> for the parameter<a class='hidden_link' href='#param-5.sentence-1'>.</a></div> <div id='param-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#param-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C1 <span class='operator'>=</span> <span class='literal'>true</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Ts<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C2 <span class='operator'>=</span> <span class='literal'>true</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C3 <span class='operator'>=</span> <span class='literal'>true</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C1 T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> s1;               <span class='comment'>// associates <span class='tcode_in_codeblock'>C1&lt;T&gt;</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C1<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> s2;            <span class='comment'>// associates <span class='tcode_in_codeblock'>(C1&lt;T&gt; &amp;&amp; ...)</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C2<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> s3;            <span class='comment'>// associates <span class='tcode_in_codeblock'>(C2&lt;T&gt; &amp;&amp; ...)</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C3<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> s4;          <span class='comment'>// associates <span class='tcode_in_codeblock'>C3&lt;T, int&gt;</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C3<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> s5;       <span class='comment'>// associates <span class='tcode_in_codeblock'>(C3&lt;T, int&gt; &amp;&amp; ...)</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='param-6'><div class='marginalizedparent'><a class='marginalized' href='#param-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L378'>#</a></div><div id='param-6.sentence-1' class='sentence'>A non-type <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
shall have one of the following (possibly cv-qualified) types:
<ul class='itemize'><li id='param-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-6.1'>(6.1)</a></div>a structural type (see below),</li><li id='param-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-6.2'>(6.2)</a></div>a type that contains a placeholder type (<a href='dcl.spec.auto'>[dcl.spec.auto]</a>), or</li><li id='param-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-6.3'>(6.3)</a></div>a placeholder for a deduced class type (<a href='dcl.type.class.deduct'>[dcl.type.class.deduct]</a>)<a class='hidden_link' href='#param-6.sentence-1'>.</a></li></ul></div> <div id='param-6.sentence-2' class='sentence'>
The top-level
<a class='grammarterm' href='dcl.decl#nt:cv-qualifier'>cv-qualifier</a><span class='textit'>s</span>
on the
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
are ignored when determining its type<a class='hidden_link' href='#param-6.sentence-2'>.</a></div></div><div class='para' id='param-7'><div class='marginalizedparent'><a class='marginalized' href='#param-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L392'>#</a></div><div id='param-7.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:type,structural' id='def:type,structural'><i >structural type</i></a> is one of the following:
<ul class='itemize'><li id='param-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-7.1'>(7.1)</a></div>a scalar type, or</li><li id='param-7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-7.2'>(7.2)</a></div>an lvalue reference type, or</li><li id='param-7.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#param-7.3'>(7.3)</a></div>a literal class type with the following properties:
<ul class='itemize'><li id='param-7.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#param-7.3.1'>(7.3.1)</a></div>all base classes and non-static data members are public and non-mutable and</li><li id='param-7.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#param-7.3.2'>(7.3.2)</a></div>the types of all bases classes and non-static data members are
structural types or (possibly multi-dimensional) array thereof<a class='hidden_link' href='#param-7.sentence-1'>.</a></li></ul></li></ul></div></div><div class='para' id='param-8'><div class='marginalizedparent'><a class='marginalized' href='#param-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L407'>#</a></div><div id='param-8.sentence-1' class='sentence'>An <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a> naming
a non-type <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> of class type <span class='texttt'>T</span>
denotes a static storage duration object of type <span class='texttt'><span class='keyword'>const</span> T</span>,
known as a <a class='hidden_link' href='#def:template_parameter_object' id='def:template_parameter_object'><i >template parameter object</i></a>,
whose value is that of the corresponding template argument
after it has been converted
to the type of the <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><a class='hidden_link' href='#param-8.sentence-1'>.</a></div> <div id='param-8.sentence-2' class='sentence'>All such template parameters in the program of the same type
with the same value denote the same template parameter object<a class='hidden_link' href='#param-8.sentence-2'>.</a></div> <div id='param-8.sentence-3' class='sentence'>A template parameter object shall have constant destruction (<a href='expr.const'>[expr.const]</a>)<a class='hidden_link' href='#param-8.sentence-3'>.</a></div> <div id='param-8.note-1' class='note'>[&nbsp;<a class='note_link' href='#param-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='param-8.sentence-4' class='sentence'>If an <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a> names
a non-type non-reference <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>,
then it is a prvalue if it has non-class type<a class='hidden_link' href='#param-8.sentence-4'>.</a></div> <div id='param-8.sentence-5' class='sentence'>Otherwise, if it is of class type <span class='texttt'>T</span>,
it is an lvalue and has type <span class='texttt'><span class='keyword'>const</span> T</span> (<a href='expr.prim.id.unqual'>[expr.prim.id.unqual]</a>)<a class='hidden_link' href='#param-8.sentence-5'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='param-8.example-1' class='example'>[&nbsp;<a class='example_link' href='#param-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>using</span> X <span class='operator'>=</span> <span class='keyword'>int</span>;
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> X<span class='operator'>&amp;</span> x, <span class='keyword'>int</span> i, A a<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  i<span class='operator'>+</span><span class='operator'>+</span>;                          <span class='comment'>// error: change of <span class='grammarterm'>template-parameter</span> value</span>

  <span class='operator'>&amp;</span>x;                           <span class='comment'>// OK</span>
  <span class='operator'>&amp;</span>i;                           <span class='comment'>// error: address of non-reference template-parameter</span>
  <span class='operator'>&amp;</span>a;                           <span class='comment'>// OK</span>
  <span class='keyword'>int</span><span class='operator'>&amp;</span> ri <span class='operator'>=</span> i;                  <span class='comment'>// error: non-const reference bound to temporary</span>
  <span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> cri <span class='operator'>=</span> i;           <span class='comment'>// OK: const reference bound to temporary</span>
  <span class='keyword'>const</span> A<span class='operator'>&amp;</span> ra <span class='operator'>=</span> a;              <span class='comment'>// OK: const reference bound to a template parameter object</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='param-9'><div class='marginalizedparent'><a class='marginalized' href='#param-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L442'>#</a></div><div id='param-9.note-1' class='note'>[&nbsp;<a class='note_link' href='#param-9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='param-9.sentence-1' class='sentence'>A non-type
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
cannot be declared to have type <span class='mathit'>cv</span> <span class='texttt'><span class='keyword'>void</span></span><a class='hidden_link' href='#param-9.sentence-1'>.</a></div> <div id='param-9.example-1' class='example'>[&nbsp;<a class='example_link' href='#param-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>void</span> v<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X;       <span class='comment'>// error</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='operator'>*</span> pv<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y;     <span class='comment'>// OK</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='param-10'><div class='marginalizedparent'><a class='marginalized' href='#param-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L455'>#</a></div><div id='param-10.sentence-1' class='sentence'>A non-type
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
<span class='indexparent'><a class='index' id=':array,template_parameter_of_type'></a></span>of type “array of <span class='texttt'>T</span>” or
<span class='indexparent'><a class='index' id=':function,template_parameter_of_type'></a></span>of function type <span class='texttt'>T</span>
is adjusted to be of type “pointer to <span class='texttt'>T</span>”<a class='hidden_link' href='#param-10.sentence-1'>.</a></div> <div id='param-10.example-1' class='example'>[&nbsp;<a class='example_link' href='#param-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>*</span> a<span class='anglebracket'>&gt;</span>   <span class='keyword'>struct</span> R <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> b<span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>int</span> p;
R<span class='anglebracket'>&lt;</span><span class='operator'>&amp;</span>p<span class='anglebracket'>&gt;</span> w;                        <span class='comment'>// OK</span>
S<span class='anglebracket'>&lt;</span><span class='operator'>&amp;</span>p<span class='anglebracket'>&gt;</span> x;                        <span class='comment'>// OK due to parameter adjustment</span>
<span class='keyword'>int</span> v<span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span>;
R<span class='anglebracket'>&lt;</span>v<span class='anglebracket'>&gt;</span> y;                         <span class='comment'>// OK due to implicit argument conversion</span>
S<span class='anglebracket'>&lt;</span>v<span class='anglebracket'>&gt;</span> z;                         <span class='comment'>// OK due to both adjustment and conversion</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='param-11'><div class='marginalizedparent'><a class='marginalized' href='#param-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L476'>#</a></div><div id='param-11.sentence-1' class='sentence'>A non-type template parameter declared with a type that
contains a placeholder type with a <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a>
introduces the immediately-declared constraint
of the <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a>
for the invented type corresponding to the placeholder (<a href='dcl.fct'>[dcl.fct]</a>)<a class='hidden_link' href='#param-11.sentence-1'>.</a></div></div><div class='para' id='param-12'><div class='marginalizedparent'><a class='marginalized' href='#param-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L483'>#</a></div><div id='param-12.sentence-1' class='sentence'>A
<a class='hidden_link' href='#def:template-argument,default' id='def:template-argument,default'><i >default template-argument</i></a>
is a
<a class='grammarterm' href='#nt:template-argument'>template-argument</a> (<a href='#arg'>[temp.arg]</a>) specified after
<span class='texttt'><span class='operator'>=</span></span>
in a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><a class='hidden_link' href='#param-12.sentence-1'>.</a></div> <div id='param-12.sentence-2' class='sentence'>A default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
may be specified for any kind of
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
(type, non-type, template)
that is not a <a href='#def:template_parameter_pack'>template parameter pack</a><a class='hidden_link' href='#param-12.sentence-2'>.</a></div> <div id='param-12.sentence-3' class='sentence'>A default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
may be specified in a template declaration<a class='hidden_link' href='#param-12.sentence-3'>.</a></div> <div id='param-12.sentence-4' class='sentence'>A default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
shall not be specified in the
<a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a><span class='textit'>s</span>
of the definition of a member of a class template that appears outside
of the member's class<a class='hidden_link' href='#param-12.sentence-4'>.</a></div> <div id='param-12.sentence-5' class='sentence'>A default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
shall not be specified in a friend class template declaration<a class='hidden_link' href='#param-12.sentence-5'>.</a></div> <div id='param-12.sentence-6' class='sentence'>If a friend function template declaration
specifies a default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>,
that declaration shall be a definition and shall be the only declaration of
the function template in the translation unit<a class='hidden_link' href='#param-12.sentence-6'>.</a></div></div><div class='para' id='param-13'><div class='marginalizedparent'><a class='marginalized' href='#param-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L515'>#</a></div><div id='param-13.sentence-1' class='sentence'>The set of default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
available for use is obtained by merging the default arguments
from all prior declarations of the template in the
same way default function arguments are (<a href='dcl.fct.default'>[dcl.fct.default]</a>)<a class='hidden_link' href='#param-13.sentence-1'>.</a></div> <div id='param-13.example-1' class='example'>[&nbsp;<a class='example_link' href='#param-13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='param-13.sentence-2' class='sentence'><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2 <span class='operator'>=</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1 <span class='operator'>=</span> <span class='keyword'>int</span>, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A;
</pre>
is equivalent to
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1 <span class='operator'>=</span> <span class='keyword'>int</span>, <span class='keyword'>class</span> T2 <span class='operator'>=</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A;
</pre></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='param-14'><div class='marginalizedparent'><a class='marginalized' href='#param-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L532'>#</a></div><div id='param-14.sentence-1' class='sentence'>If a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
of a class template, variable template, or alias template has a default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>,
each subsequent
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
shall either have a default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
supplied
or be a template parameter pack<a class='hidden_link' href='#param-14.sentence-1'>.</a></div> <div id='param-14.sentence-2' class='sentence'>If a <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
of a primary class template, primary variable template, or alias template
is a template parameter pack, it shall be the last
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><a class='hidden_link' href='#param-14.sentence-2'>.</a></div> <div id='param-14.sentence-3' class='sentence'>A template parameter pack of a function template shall not be followed by
another
template parameter unless that template parameter can be deduced from the
parameter-type-list (<a href='dcl.fct'>[dcl.fct]</a>) of the function template or has a
default argument (<a href='#deduct'>[temp.deduct]</a>)<a class='hidden_link' href='#param-14.sentence-3'>.</a></div> <div id='param-14.sentence-4' class='sentence'>A template parameter of a deduction guide template (<a href='#deduct.guide'>[temp.deduct.guide]</a>)
that does not have a default argument
shall be deducible
from the parameter-type-list
of the deduction guide template<a class='hidden_link' href='#param-14.sentence-4'>.</a></div> <div id='param-14.example-1' class='example'>[&nbsp;<a class='example_link' href='#param-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1 <span class='operator'>=</span> <span class='keyword'>int</span>, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B;     <span class='comment'>// error</span>

<span class='comment'>// <span class='tcode_in_codeblock'>U</span> can be neither deduced from the parameter-type-list nor specified</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>   <span class='comment'>// error</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>      <span class='comment'>// error</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='param-15'><div class='marginalizedparent'><a class='marginalized' href='#param-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L566'>#</a></div><div id='param-15.sentence-1' class='sentence'>A
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
shall
not be given default arguments by two different declarations in the same scope<a class='hidden_link' href='#param-15.sentence-1'>.</a></div> <div id='param-15.example-1' class='example'>[&nbsp;<a class='example_link' href='#param-15.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T <span class='operator'>=</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T <span class='operator'>=</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;  <span class='comment'>// error</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <span class='indexparent'><a class='index' id=':<,template_and'></a></span></div><div class='para' id='param-16'><div class='marginalizedparent'><a class='marginalized' href='#param-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L579'>#</a></div><div id='param-16.sentence-1' class='sentence'>When parsing a
default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
for a non-type
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>,
the first non-nested
<span class='texttt'><span class='anglebracket'>&gt;</span></span>
is taken as the end of the
<a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a>
rather than a greater-than operator<a class='hidden_link' href='#param-16.sentence-1'>.</a></div> <div id='param-16.example-1' class='example'>[&nbsp;<a class='example_link' href='#param-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>3</span> <span class='anglebracket'>&gt;</span> <span class='literal'>4</span> <span class='anglebracket'>&gt;</span>        <span class='comment'>// syntax error</span>
<span class='keyword'>class</span> X <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='literal'>3</span> <span class='anglebracket'>&gt;</span> <span class='literal'>4</span><span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span>      <span class='comment'>// OK</span>
<span class='keyword'>class</span> Y <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='param-17'><div class='marginalizedparent'><a class='marginalized' href='#param-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L600'>#</a></div><div id='param-17.sentence-1' class='sentence'>A
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
of a template
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
is permitted to have a default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><a class='hidden_link' href='#param-17.sentence-1'>.</a></div> <div id='param-17.sentence-2' class='sentence'>When such default arguments are specified, they apply to the template
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
in the scope of the template
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><a class='hidden_link' href='#param-17.sentence-2'>.</a></div> <div id='param-17.example-1' class='example'>[&nbsp;<a class='example_link' href='#param-17.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> TT <span class='operator'>=</span> <span class='keyword'>float</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>inline</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>inline</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> TT<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  T<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> t;            <span class='comment'>// error: <span class='tcode_in_codeblock'>TT</span> has no default template argument</span>
<span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> TT <span class='operator'>=</span> <span class='keyword'>char</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  T<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> t;            <span class='comment'>// OK, <span class='tcode_in_codeblock'>T&lt;char&gt;</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='param-18'><div class='marginalizedparent'><a class='marginalized' href='#param-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L626'>#</a></div><div id='param-18.sentence-1' class='sentence'>If a <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> is a
<a class='grammarterm' href='#nt:type-parameter'>type-parameter</a> with an ellipsis prior to its
optional <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> or is a
<a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a> that declares a
pack (<a href='dcl.fct'>[dcl.fct]</a>), then the <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
is a <a href='#def:template_parameter_pack'>template parameter pack</a><a class='hidden_link' href='#param-18.sentence-1'>.</a></div> <div id='param-18.sentence-2' class='sentence'>A template parameter pack that is a <a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a> whose type
contains one or more unexpanded packs is a pack expansion<a class='hidden_link' href='#param-18.sentence-2'>.</a></div> <div id='param-18.sentence-3' class='sentence'>Similarly,
a template parameter pack that is a <a class='grammarterm' href='#nt:type-parameter'>type-parameter</a> with a
<a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a> containing one or more unexpanded
packs is a pack expansion<a class='hidden_link' href='#param-18.sentence-3'>.</a></div> <div id='param-18.sentence-4' class='sentence'>A type parameter pack with a <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a> that
contains an unexpanded parameter pack is a pack expansion<a class='hidden_link' href='#param-18.sentence-4'>.</a></div> <div id='param-18.sentence-5' class='sentence'>A template parameter pack that is a pack
expansion shall not expand a template parameter pack declared in the same
<a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a><a class='hidden_link' href='#param-18.sentence-5'>.</a></div> <div id='param-18.example-1' class='example'>[&nbsp;<a class='example_link' href='#param-18.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span>                       <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> is a template type parameter pack</span>
   <span class='keyword'>class</span> Tuple;                                 <span class='comment'>// but not a pack expansion</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Dims<span class='anglebracket'>&gt;</span>                 <span class='comment'>// <span class='tcode_in_codeblock'>Dims</span> is a non-type template parameter pack</span>
   <span class='keyword'>struct</span> multi_array;                          <span class='comment'>// but not a pack expansion</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>struct</span> value_holder <span class='curlybracket'>{</span>
    <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span>T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Values<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> apply <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// <span class='tcode_in_codeblock'>Values</span> is a non-type template parameter pack</span>
  <span class='curlybracket'>}</span>;                                            <span class='comment'>// and a pack expansion</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T, T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Values<span class='anglebracket'>&gt;</span>              <span class='comment'>// error: <span class='tcode_in_codeblock'>Values</span> expands template type parameter</span>
  <span class='keyword'>struct</span> static_array;                          <span class='comment'>// pack <span class='tcode_in_codeblock'>T</span> within the same template parameter list</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-127'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-127'>127)</a></div><div id='footnote-127.sentence-1' class='sentence'>Since template
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>
and template
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
are treated as types for descriptive purposes, the terms
<a class='hidden_link' href='#def:non-type_parameter' id='def:non-type_parameter'><i>non-type parameter</i></a>
and
<a class='hidden_link' href='#def:non-type_argument' id='def:non-type_argument'><i>non-type argument</i></a>
are used to refer to non-type, non-template parameters and arguments<a class='hidden_link' href='#footnote-127.sentence-1'>.</a></div> <a href='#footnoteref-127'>⮥</a></div></div><div id='names' class='section'><h2 ><a class='secnum' href='#names' style='min-width:88pt'>13.3</a> Names of template specializations <a class='abbr_ref' href='temp.names'>[temp.names]</a></h2><div class='para' id='names-1'><div class='marginalizedparent'><a class='marginalized' href='#names-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L663'>#</a></div><div id='names-1.sentence-1' class='sentence'>A <a href='#spec'>template specialization</a> can be referred to by a
<a class='grammarterm' href='#nt:template-id'>template-id</a>:</div><pre class='bnf'><a class='nontermdef' href='#nt:simple-template-id' id='nt:simple-template-id'>simple-template-id:</a>
&#9;<a class='grammarterm' href='#nt:template-name'>template-name</a> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='anglebracket'>&gt;</span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:template-id' id='nt:template-id'>template-id:</a>
&#9;<a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>
&#9;<a class='grammarterm' href='over.oper#nt:operator-function-id'>operator-function-id</a> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='anglebracket'>&gt;</span></span>
&#9;<a class='grammarterm' href='over.literal#nt:literal-operator-id'>literal-operator-id</a> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='anglebracket'>&gt;</span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:template-name' id='nt:template-name'>template-name:</a>
&#9;<a class='grammarterm' href='lex.name#nt:identifier'>identifier</a>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:template-argument-list' id='nt:template-argument-list'>template-argument-list:</a>
&#9;<a class='grammarterm' href='#nt:template-argument'>template-argument</a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a> <span class='terminal'>,</span> <a class='grammarterm' href='#nt:template-argument'>template-argument</a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:template-argument' id='nt:template-argument'>template-argument:</a>
&#9;<a class='grammarterm' href='expr.const#nt:constant-expression'>constant-expression</a>
&#9;<a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a>
&#9;<a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a>
</pre><div id='names-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#names-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='names-1.sentence-2' class='sentence'>The <a href='basic.lookup'>name lookup</a> rules are used to associate the use of
a name with a template declaration;
that is, to identify a name as a
<a class='grammarterm' href='#nt:template-name'>template-name</a><a class='hidden_link' href='#names-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='names-2'><div class='marginalizedparent'><a class='marginalized' href='#names-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L704'>#</a></div><div id='names-2.sentence-1' class='sentence'>For a
<a class='grammarterm' href='#nt:template-name'>template-name</a>
to be explicitly qualified by the template arguments,
the name must be considered to refer to a template<a class='hidden_link' href='#names-2.sentence-1'>.</a></div> <div id='names-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#names-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='names-2.sentence-2' class='sentence'>Whether a name actually refers to a template
cannot be known in some cases
until after argument dependent lookup is done (<a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>)<a class='hidden_link' href='#names-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='names-2.sentence-3' class='sentence'>
A name is considered to refer to a template if
name lookup finds
a <a class='grammarterm' href='#nt:template-name'>template-name</a>
or an overload set that contains a function template<a class='hidden_link' href='#names-2.sentence-3'>.</a></div> <div id='names-2.sentence-4' class='sentence'>A name is also considered to refer to a template if
it is an <a class='grammarterm' href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a>
followed by a <span class='texttt'><span class='anglebracket'>&lt;</span></span>
and name lookup either finds one or more functions or finds nothing<a class='hidden_link' href='#names-2.sentence-4'>.</a></div></div><div class='para' id='names-3'><div class='marginalizedparent'><a class='marginalized' href='#names-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L723'>#</a></div><div id='names-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':<,template_and_'></a></span>When a name is considered to be a
<a class='grammarterm' href='#nt:template-name'>template-name</a>,
and it is followed by a <span class='texttt'><span class='anglebracket'>&lt;</span></span>,
the <span class='texttt'><span class='anglebracket'>&lt;</span></span>
is always taken as the delimiter of a
<a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a>
and never as the less-than operator<a class='hidden_link' href='#names-3.sentence-1'>.</a></div> <div id='names-3.sentence-2' class='sentence'>When parsing a <a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a>,
the first non-nested
<span class='texttt'><span class='anglebracket'>&gt;</span></span><a class='footnotenum' href='#footnote-128' id='footnoteref-128'>128</a>
is taken as the ending delimiter
rather than a greater-than operator<a class='hidden_link' href='#names-3.sentence-2'>.</a></div> <div id='names-3.sentence-3' class='sentence'>Similarly, the first non-nested <span class='texttt'><span class='anglebracket'>&gt;</span>&gt;</span> is treated as two
consecutive but distinct <span class='texttt'><span class='anglebracket'>&gt;</span></span> tokens, the first of which is taken
as the end of the <a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a> and completes
the <a class='grammarterm' href='#nt:template-id'>template-id</a><a class='hidden_link' href='#names-3.sentence-3'>.</a></div> <div id='names-3.note-1' class='note'>[&nbsp;<a class='note_link' href='#names-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='names-3.sentence-4' class='sentence'>The second <span class='texttt'><span class='anglebracket'>&gt;</span></span>
token produced by this replacement rule may terminate an enclosing
<a class='grammarterm' href='#nt:template-id'>template-id</a> construct or it may be part of a different
construct (e.g., a cast)<a class='hidden_link' href='#names-3.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='names-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#names-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;

X<span class='anglebracket'>&lt;</span> <span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='literal'>2</span> <span class='anglebracket'>&gt;</span> x1;                            <span class='comment'>// syntax error</span>
X<span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='literal'>2</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> x2;                            <span class='comment'>// OK</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
Y<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> x3;                             <span class='comment'>// OK, same as <span class='tcode_in_codeblock'>Y&lt;X&lt;1&gt; &gt; x3;</span></span>
Y<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&lt;</span><span class='literal'>6</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> x4;                          <span class='comment'>// syntax error</span>
Y<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span><span class='literal'>6</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='literal'>1</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> x5;                        <span class='comment'>// OK</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='names-4'><div class='marginalizedparent'><a class='marginalized' href='#names-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L766'>#</a></div><div id='names-4.sentence-1' class='sentence'>The keyword <span class='texttt'><span class='keyword'>template</span></span> is said to appear at the top level in
a <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a>
if it appears outside of a <a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a> or
<a class='grammarterm' href='dcl.type.decltype#nt:decltype-specifier'>decltype-specifier</a><a class='hidden_link' href='#names-4.sentence-1'>.</a></div> <div id='names-4.sentence-2' class='sentence'>In a <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> of a <a class='grammarterm' href='dcl.decl#nt:declarator-id'>declarator-id</a> or
in a <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> formed by a <a class='grammarterm' href='class.pre#nt:class-head-name'>class-head-name</a> or
<a class='grammarterm' href='dcl.enum#nt:enum-head-name'>enum-head-name</a>,
the keyword <span class='texttt'><span class='keyword'>template</span></span> shall not appear at the top level<a class='hidden_link' href='#names-4.sentence-2'>.</a></div> <div id='names-4.sentence-3' class='sentence'>In a <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> used as the name in a
<a class='grammarterm' href='#nt:typename-specifier'>typename-specifier</a>,
<a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a>,
<a class='grammarterm' href='namespace.udecl#nt:using-declaration'>using-declaration</a>, or
<a class='grammarterm' href='class.derived#nt:class-or-decltype'>class-or-decltype</a>,
an optional keyword <span class='texttt'><span class='keyword'>template</span></span> appearing at the top level is ignored<a class='hidden_link' href='#names-4.sentence-3'>.</a></div> <div id='names-4.sentence-4' class='sentence'>In these contexts, a <span class='texttt'><span class='anglebracket'>&lt;</span></span> token is always assumed to introduce a
<a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a><a class='hidden_link' href='#names-4.sentence-4'>.</a></div> <div id='names-4.sentence-5' class='sentence'>In all other contexts, when naming a template specialization of
a member of an unknown specialization (<a href='#dep.type'>[temp.dep.type]</a>),
the member template name shall be prefixed by the keyword <span class='texttt'><span class='keyword'>template</span></span><a class='hidden_link' href='#names-4.sentence-5'>.</a></div> <div id='names-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#names-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>size_t<span class='anglebracket'>&gt;</span> X<span class='operator'>*</span> alloc<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>size_t<span class='anglebracket'>&gt;</span> <span class='keyword'>static</span> X<span class='operator'>*</span> adjust<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  T<span class='operator'>*</span> p1 <span class='operator'>=</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>alloc<span class='anglebracket'>&lt;</span><span class='literal'>200</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>&lt;</span> means less than</span>
  T<span class='operator'>*</span> p2 <span class='operator'>=</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='keyword'>template</span> alloc<span class='anglebracket'>&lt;</span><span class='literal'>200</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// OK: <span class='tcode_in_codeblock'>&lt;</span> starts template argument list</span>
  T<span class='operator'>::</span>adjust<span class='anglebracket'>&lt;</span><span class='literal'>100</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                     <span class='comment'>// error: <span class='tcode_in_codeblock'>&lt;</span> means less than</span>
  T<span class='operator'>::</span><span class='keyword'>template</span> adjust<span class='anglebracket'>&lt;</span><span class='literal'>100</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// OK: <span class='tcode_in_codeblock'>&lt;</span> starts template argument list</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='names-5'><div class='marginalizedparent'><a class='marginalized' href='#names-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L801'>#</a></div><div id='names-5.sentence-1' class='sentence'>A name prefixed by the keyword
<span class='texttt'><span class='keyword'>template</span></span>
shall be a <a class='grammarterm' href='#nt:template-id'>template-id</a> or
the name shall refer to a class template or an alias template<a class='hidden_link' href='#names-5.sentence-1'>.</a></div> <div id='names-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#names-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='names-5.sentence-2' class='sentence'>The keyword
<span class='texttt'><span class='keyword'>template</span></span>
may not be applied to non-template members of class templates<a class='hidden_link' href='#names-5.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='names-5.note-2' class='note'>[&nbsp;<a class='note_link' href='#names-5.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='names-5.sentence-3' class='sentence'>As is the case with the
<span class='texttt'><span class='keyword'>typename</span></span>
prefix, the
<span class='texttt'><span class='keyword'>template</span></span>
prefix is allowed in cases where it is not strictly
necessary; i.e., when the <a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a> or
the expression on the left of
the
<span class='texttt'><span class='operator'>-</span><span class='anglebracket'>&gt;</span></span>
or
<span class='texttt'><span class='operator'>.</span></span>
is not dependent on a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>, or the use does not appear in the
scope of a template<a class='hidden_link' href='#names-5.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='names-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#names-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> a;
  a<span class='operator'>.</span><span class='keyword'>template</span> f<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>t<span class='parenthesis'>)</span>;                    <span class='comment'>// OK: calls template</span>
  a<span class='operator'>.</span><span class='keyword'>template</span> f<span class='parenthesis'>(</span>t<span class='parenthesis'>)</span>;                      <span class='comment'>// error: not a <span class='grammarterm'>template-id</span></span>
<span class='curlybracket'>}</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='comment'>// OK: <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;template C</span> names a class template:</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> TT <span class='operator'>=</span> T<span class='operator'>::</span><span class='keyword'>template</span> C<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> D <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
D<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='anglebracket'>&gt;</span> db;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='names-6'><div class='marginalizedparent'><a class='marginalized' href='#names-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L850'>#</a></div><div id='names-6.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:template-id'>template-id</a> is <a class='hidden_link' href='#def:template-id,valid' id='def:template-id,valid'><i >valid</i></a> if
<ul class='itemize'><li id='names-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#names-6.1'>(6.1)</a></div>there are at most as many arguments as there are parameters
  or a parameter is a template parameter pack (<a href='#variadic'>[temp.variadic]</a>),</li><li id='names-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#names-6.2'>(6.2)</a></div>there is an argument for each non-deducible non-pack parameter
  that does not have a default <a class='grammarterm' href='#nt:template-argument'>template-argument</a>,</li><li id='names-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#names-6.3'>(6.3)</a></div>each <a class='grammarterm' href='#nt:template-argument'>template-argument</a> matches the corresponding
  <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> (<a href='#arg'>[temp.arg]</a>),</li><li id='names-6.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#names-6.4'>(6.4)</a></div>substitution of each template argument into the following
  template parameters (if any) succeeds, and</li><li id='names-6.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#names-6.5'>(6.5)</a></div>if the <a class='grammarterm' href='#nt:template-id'>template-id</a> is non-dependent,
  the associated constraints are satisfied as specified in the next paragraph<a class='hidden_link' href='#names-6.sentence-1'>.</a></li></ul></div> <div id='names-6.sentence-2' class='sentence'>
A <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a> shall be valid unless it names a
function template specialization (<a href='#deduct'>[temp.deduct]</a>)<a class='hidden_link' href='#names-6.sentence-2'>.</a></div> <div id='names-6.example-1' class='example'>[&nbsp;<a class='example_link' href='#names-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, T<span class='operator'>::</span>type n <span class='operator'>=</span> <span class='literal'>0</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X;
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> type <span class='operator'>=</span> <span class='keyword'>int</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>using</span> T1 <span class='operator'>=</span> X<span class='anglebracket'>&lt;</span>S, <span class='keyword'>int</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;      <span class='comment'>// error: too many arguments</span>
<span class='keyword'>using</span> T2 <span class='operator'>=</span> X<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span>;                 <span class='comment'>// error: no default argument for first template parameter</span>
<span class='keyword'>using</span> T3 <span class='operator'>=</span> X<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span>;                <span class='comment'>// error: value <span class='tcode_in_codeblock'>1</span> does not match type-parameter</span>
<span class='keyword'>using</span> T4 <span class='operator'>=</span> X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;              <span class='comment'>// error: substitution failure for second template parameter</span>
<span class='keyword'>using</span> T5 <span class='operator'>=</span> X<span class='anglebracket'>&lt;</span>S<span class='anglebracket'>&gt;</span>;                <span class='comment'>// OK</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='names-7'><div class='marginalizedparent'><a class='marginalized' href='#names-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L889'>#</a></div><div id='names-7.sentence-1' class='sentence'>When the <a class='grammarterm' href='#nt:template-name'>template-name</a>
of a <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>
names a constrained non-function template
or
a constrained template <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>,
but not a member template
that is a member of an unknown specialization (<a href='#res'>[temp.res]</a>),
and
all <a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
in the <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>
are non-dependent (<a href='#dep.temp'>[temp.dep.temp]</a>),
the associated constraints (<a href='#constr.decl'>[temp.constr.decl]</a>)
of the constrained template
shall be satisfied (<a href='#constr.constr'>[temp.constr.constr]</a>)<a class='hidden_link' href='#names-7.sentence-1'>.</a></div> <div id='names-7.example-1' class='example'>[&nbsp;<a class='example_link' href='#names-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C1 <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C1 T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S1 <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C1 T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> Ptr <span class='operator'>=</span> T<span class='operator'>*</span>;

S1<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p;                         <span class='comment'>// error: constraints not satisfied</span>
Ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> p;                         <span class='comment'>// error: constraints not satisfied</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> S2 <span class='curlybracket'>{</span> Ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> x; <span class='curlybracket'>}</span>;          <span class='comment'>// ill-formed, no diagnostic required</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> S3 <span class='curlybracket'>{</span> Ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> x; <span class='curlybracket'>}</span>;            <span class='comment'>// OK, satisfaction is not required</span>

S3<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> x;                          <span class='comment'>// error: constraints not satisfied</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C1 T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> S4 <span class='curlybracket'>{</span>
  X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> x;                         <span class='comment'>// ill-formed, no diagnostic required</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C2 <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C2 T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='keyword'>struct</span> S<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span>;         <span class='comment'>// error: constraints not satisfied</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;   <span class='comment'>// error: constraints not satisfied</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='names-8'><div class='marginalizedparent'><a class='marginalized' href='#names-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L937'>#</a></div><div id='names-8.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:concept-id' id='def:concept-id'><i >concept-id</i></a> is a <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>
where the <a class='grammarterm' href='#nt:template-name'>template-name</a> is a <a class='grammarterm' href='#nt:concept-name'>concept-name</a><a class='hidden_link' href='#names-8.sentence-1'>.</a></div> <div id='names-8.sentence-2' class='sentence'>A concept-id is a prvalue of type <span class='texttt'><span class='keyword'>bool</span></span>, and
does not name a template specialization<a class='hidden_link' href='#names-8.sentence-2'>.</a></div> <div id='names-8.sentence-3' class='sentence'>A concept-id evaluates to <span class='texttt'><span class='literal'>true</span></span>
if the concept's
normalized <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a>
is satisfied (<a href='#constr.constr'>[temp.constr.constr]</a>) by the specified template arguments and
<span class='texttt'><span class='literal'>false</span></span> otherwise<a class='hidden_link' href='#names-8.sentence-3'>.</a></div> <div id='names-8.note-1' class='note'>[&nbsp;<a class='note_link' href='#names-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='names-8.sentence-4' class='sentence'>Since a <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> is an unevaluated operand,
a concept-id appearing in a <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a>
is not evaluated except as necessary
to determine whether the normalized constraints are satisfied<a class='hidden_link' href='#names-8.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='names-8.example-1' class='example'>[&nbsp;<a class='example_link' href='#names-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='literal'>true</span>;
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>C<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;      <span class='comment'>// OK</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-128'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-128'>128)</a></div><div id='footnote-128.sentence-1' class='sentence'>A <span class='texttt'><span class='anglebracket'>&gt;</span></span> that encloses the <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a>
of a <span class='texttt'><span class='keyword'>dynamic_&shy;cast</span></span>, <span class='texttt'><span class='keyword'>static_&shy;cast</span></span>, <span class='texttt'><span class='keyword'>reinterpret_&shy;cast</span></span>
or <span class='texttt'><span class='keyword'>const_&shy;cast</span></span>, or which encloses the <a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
of a subsequent <a class='grammarterm' href='#nt:template-id'>template-id</a>, is considered nested for the purpose
of this description<a class='hidden_link' href='#footnote-128.sentence-1'>.</a></div> <a href='#footnoteref-128'>⮥</a></div></div><div id='arg' class='section'><h2 ><a class='secnum' href='#arg' style='min-width:88pt'>13.4</a> Template arguments <a class='abbr_ref' href='temp.arg'>[temp.arg]</a></h2><div class='para' id='arg-1'><div class='marginalizedparent'><a class='marginalized' href='#arg-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L962'>#</a></div><div id='arg-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':argument,template'></a></span>There are three forms of
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>,
corresponding to the three forms of
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>:
type, non-type and template<a class='hidden_link' href='#arg-1.sentence-1'>.</a></div> <div id='arg-1.sentence-2' class='sentence'>The type and form of each
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
specified in a
<a class='grammarterm' href='#nt:template-id'>template-id</a>
shall match the type and form specified for the corresponding
parameter declared by the template in its
<a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a><a class='hidden_link' href='#arg-1.sentence-2'>.</a></div> <div id='arg-1.sentence-3' class='sentence'>When the parameter declared by the template is a
<a href='#def:template_parameter_pack'>template parameter pack</a>, it will correspond to zero or more
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span><a class='hidden_link' href='#arg-1.sentence-3'>.</a></div> <div id='arg-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span>
  T<span class='operator'>*</span> v;
  <span class='keyword'>int</span> sz;
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>explicit</span> Array<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  T<span class='operator'>&amp;</span> elem<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> v<span class='squarebracket'>[</span>i<span class='squarebracket'>]</span>; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> v1<span class='parenthesis'>(</span><span class='literal'>20</span><span class='parenthesis'>)</span>;
<span class='keyword'>typedef</span> std<span class='operator'>::</span>complex<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> dcomplex;  <span class='comment'>// <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;complex</span> is a standard library template</span>
Array<span class='anglebracket'>&lt;</span>dcomplex<span class='anglebracket'>&gt;</span> v2<span class='parenthesis'>(</span><span class='literal'>30</span><span class='parenthesis'>)</span>;
Array<span class='anglebracket'>&lt;</span>dcomplex<span class='anglebracket'>&gt;</span> v3<span class='parenthesis'>(</span><span class='literal'>40</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> bar<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  v1<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='literal'>7</span>;
  v2<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> v3<span class='operator'>.</span>elem<span class='parenthesis'>(</span><span class='literal'>4</span><span class='parenthesis'>)</span> <span class='operator'>=</span> dcomplex<span class='parenthesis'>(</span><span class='literal'>7</span>,<span class='literal'>8</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='arg-2'><div class='marginalizedparent'><a class='marginalized' href='#arg-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1002'>#</a></div><div id='arg-2.sentence-1' class='sentence'>In a
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>,
an ambiguity between a
<a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a>
and an expression is resolved to a
<a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a>,
regardless of the form of the corresponding
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><a class='hidden_link' href='#arg-2.sentence-1'>.</a><a class='footnotenum' href='#footnote-129' id='footnoteref-129'>129</a></div> <div id='arg-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;       <span class='comment'>// <span class='tcode_in_codeblock'>int()</span> is a type-id: call the first <span class='tcode_in_codeblock'>f()</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='arg-3'><div class='marginalizedparent'><a class='marginalized' href='#arg-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1027'>#</a></div><div id='arg-3.sentence-1' class='sentence'>The name of a
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
shall be accessible at the point where it is used as a
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><a class='hidden_link' href='#arg-3.sentence-1'>.</a></div> <div id='arg-3.note-1' class='note'>[&nbsp;<a class='note_link' href='#arg-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg-3.sentence-2' class='sentence'>If the name of the
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
is accessible at the point where it is used as a
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>,
there is no further access restriction in the resulting instantiation where the
corresponding
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
name is used<a class='hidden_link' href='#arg-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='arg-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> T t;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
<span class='keyword'>private</span><span class='operator'>:</span>
  <span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
  X<span class='anglebracket'>&lt;</span>S<span class='anglebracket'>&gt;</span> x;           <span class='comment'>// OK: <span class='tcode_in_codeblock'>S</span> is accessible</span>
                    <span class='comment'>// <span class='tcode_in_codeblock'>X&lt;Y&#x200b;::&#x200b;S&gt;</span> has a static member of type <span class='tcode_in_codeblock'>Y&#x200b;::&#x200b;S</span></span>
                    <span class='comment'>// OK: even though <span class='tcode_in_codeblock'>Y&#x200b;::&#x200b;S</span> is private</span>
<span class='curlybracket'>}</span>;

X<span class='anglebracket'>&lt;</span>Y<span class='operator'>::</span>S<span class='anglebracket'>&gt;</span> y;          <span class='comment'>// error: <span class='tcode_in_codeblock'>S</span> not accessible</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='arg-3.sentence-3' class='sentence'>
For a
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
that is a class type or a class template, the template
definition has no special access rights to the
members of the <a class='grammarterm' href='#nt:template-argument'>template-argument</a><a class='hidden_link' href='#arg-3.sentence-3'>.</a></div> <div id='arg-3.example-2' class='example'>[&nbsp;<a class='example_link' href='#arg-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> TT<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>typename</span> T<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>S s;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span>
<span class='keyword'>private</span><span class='operator'>:</span>
  <span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

A<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span> b;             <span class='comment'>// error: <span class='tcode_in_codeblock'>A</span> has no access to <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;S</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='arg-4'><div class='marginalizedparent'><a class='marginalized' href='#arg-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1079'>#</a></div><div id='arg-4.sentence-1' class='sentence'>When template argument packs or default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
are used, a
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
list can be empty<a class='hidden_link' href='#arg-4.sentence-1'>.</a></div> <div id='arg-4.sentence-2' class='sentence'>In that case the empty
<span class='texttt'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span>
brackets shall still be used as the
<a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a><a class='hidden_link' href='#arg-4.sentence-2'>.</a></div> <div id='arg-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T <span class='operator'>=</span> <span class='keyword'>char</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> String;
String<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p;                    <span class='comment'>// OK: <span class='tcode_in_codeblock'>String&lt;char&gt;</span></span>
String<span class='operator'>*</span> q;                      <span class='comment'>// syntax error</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Elements<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Tuple;
Tuple<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> t;                     <span class='comment'>// OK: <span class='tcode_in_codeblock'>Elements</span> is empty</span>
Tuple<span class='operator'>*</span> u;                       <span class='comment'>// syntax error</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='arg-5'><div class='marginalizedparent'><a class='marginalized' href='#arg-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1100'>#</a></div><div id='arg-5.sentence-1' class='sentence'>An explicit destructor call (<a href='class.dtor'>[class.dtor]</a>) for an object that has a type
that is a class template specialization may explicitly specify the
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span><a class='hidden_link' href='#arg-5.sentence-1'>.</a></div> <div id='arg-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='operator'>~</span>A<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p, A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> q<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span><span class='operator'>~</span>A<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// OK: destructor call</span>
  q<span class='operator'>-</span><span class='anglebracket'>&gt;</span>A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span><span class='operator'>~</span>A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;         <span class='comment'>// OK: destructor call</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='arg-6'><div class='marginalizedparent'><a class='marginalized' href='#arg-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1116'>#</a></div><div id='arg-6.sentence-1' class='sentence'>If the use of a
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
gives rise to an ill-formed construct in the instantiation of a
template specialization, the program is ill-formed<a class='hidden_link' href='#arg-6.sentence-1'>.</a></div></div><div class='para' id='arg-7'><div class='marginalizedparent'><a class='marginalized' href='#arg-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1122'>#</a></div><div id='arg-7.sentence-1' class='sentence'>When name lookup for the name in a
<a class='grammarterm' href='#nt:template-id'>template-id</a>
finds an overload set, both non-template functions in the overload
set and function templates in the overload set for
which the
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
do not match the
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>
are ignored<a class='hidden_link' href='#arg-7.sentence-1'>.</a></div> <div id='arg-7.sentence-2' class='sentence'>If none of the function templates have matching
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>,
the program is ill-formed<a class='hidden_link' href='#arg-7.sentence-2'>.</a></div></div><div class='para' id='arg-8'><div class='marginalizedparent'><a class='marginalized' href='#arg-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1136'>#</a></div><div id='arg-8.sentence-1' class='sentence'>When a <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a> does not name a function,
a default <a class='grammarterm' href='#nt:template-argument'>template-argument</a> is
<a href='#inst'>implicitly instantiated</a>
when the value of that default argument is needed<a class='hidden_link' href='#arg-8.sentence-1'>.</a></div> <div id='arg-8.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>typename</span> U <span class='operator'>=</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
S<span class='anglebracket'>&lt;</span><span class='keyword'>bool</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p;         <span class='comment'>// the type of <span class='tcode_in_codeblock'>p</span> is <span class='tcode_in_codeblock'>S&lt;bool, int&gt;*</span></span>
</pre> <div id='arg-8.sentence-2' class='sentence'>
The default argument for <span class='texttt'>U</span> is instantiated to form the type <span class='texttt'>S<span class='anglebracket'>&lt;</span><span class='keyword'>bool</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span></span><a class='hidden_link' href='#arg-8.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='arg-9'><div class='marginalizedparent'><a class='marginalized' href='#arg-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1149'>#</a></div><div id='arg-9.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:template-argument'>template-argument</a> followed by an ellipsis is
a <a href='#def:pack_expansion'>pack expansion</a><a class='hidden_link' href='#arg-9.sentence-1'>.</a></div></div><div class='footnote' id='footnote-129'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-129'>129)</a></div><div id='footnote-129.sentence-1' class='sentence'>There is no such ambiguity in a default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
because the form of the
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
determines the allowable forms of the
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><a class='hidden_link' href='#footnote-129.sentence-1'>.</a></div> <a href='#footnoteref-129'>⮥</a></div><div id='arg.type' class='section'><h3 ><a class='secnum' href='#arg.type' style='min-width:103pt'>13.4.1</a> Template type arguments <a class='abbr_ref' href='temp.arg.type'>[temp.arg.type]</a></h3><div class='para' id='arg.type-1'><div class='marginalizedparent'><a class='marginalized' href='#arg.type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1155'>#</a></div><div id='arg.type-1.sentence-1' class='sentence'>A
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
for a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
which is a type
shall be a
<a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a><a class='hidden_link' href='#arg.type-1.sentence-1'>.</a></div></div><div class='para' id='arg.type-2'><div class='marginalizedparent'><a class='marginalized' href='#arg.type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1164'>#</a></div><div id='arg.type-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg.type-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>struct</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> unnamed_obj;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>enum</span> <span class='curlybracket'>{</span> e1 <span class='curlybracket'>}</span>;
  <span class='keyword'>typedef</span> <span class='keyword'>struct</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> B;
  B b;
  X<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span> x1;          <span class='comment'>// OK</span>
  X<span class='anglebracket'>&lt;</span>A<span class='operator'>*</span><span class='anglebracket'>&gt;</span> x2;         <span class='comment'>// OK</span>
  X<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span> x3;          <span class='comment'>// OK</span>
  f<span class='parenthesis'>(</span>e1<span class='parenthesis'>)</span>;            <span class='comment'>// OK</span>
  f<span class='parenthesis'>(</span>unnamed_obj<span class='parenthesis'>)</span>;   <span class='comment'>// OK</span>
  f<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>;             <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='arg.type-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#arg.type-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.type-2.sentence-1' class='sentence'>A template type argument may be an <a href='basic.types#def:type,incomplete'>incomplete type</a><a class='hidden_link' href='#arg.type-2.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div id='arg.nontype' class='section'><h3 ><a class='secnum' href='#arg.nontype' style='min-width:103pt'>13.4.2</a> Template non-type arguments <a class='abbr_ref' href='temp.arg.nontype'>[temp.arg.nontype]</a></h3><div class='para' id='arg.nontype-1'><div class='marginalizedparent'><a class='marginalized' href='#arg.nontype-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1191'>#</a></div><div id='arg.nontype-1.sentence-1' class='sentence'>If the type <span class='texttt'>T</span> of a <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
contains a placeholder type (<a href='dcl.spec.auto'>[dcl.spec.auto]</a>)
or a placeholder for a deduced class type (<a href='dcl.type.class.deduct'>[dcl.type.class.deduct]</a>),
the type of the parameter is the type deduced
for the variable <span class='texttt'>x</span> in the invented declaration
<pre class='codeblock'>
T x <span class='operator'>=</span> <span class='indexparent'><a class='index' id=':template-argument'></a></span><span class='textsf'><span class='textit'>template-argument</span></span> ;
</pre></div> <div id='arg.nontype-1.sentence-2' class='sentence'>
If a deduced parameter type is not permitted
for a <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> declaration (<a href='#param'>[temp.param]</a>),
the program is ill-formed<a class='hidden_link' href='#arg.nontype-1.sentence-2'>.</a></div></div><div class='para' id='arg.nontype-2'><div class='marginalizedparent'><a class='marginalized' href='#arg.nontype-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1204'>#</a></div><div id='arg.nontype-2.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:template-argument'>template-argument</a>
for a non-type <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
shall be a converted constant expression (<a href='expr.const'>[expr.const]</a>)
of the type of the <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><a class='hidden_link' href='#arg.nontype-2.sentence-1'>.</a></div> <div id='arg.nontype-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#arg.nontype-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.nontype-2.sentence-2' class='sentence'>If the <a class='grammarterm' href='#nt:template-argument'>template-argument</a>
is an overload set
(or the address of such, including forming a pointer-to-member),
the matching function is selected from the set (<a href='over.over'>[over.over]</a>)<a class='hidden_link' href='#arg.nontype-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='arg.nontype-3'><div class='marginalizedparent'><a class='marginalized' href='#arg.nontype-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1216'>#</a></div><div id='arg.nontype-3.sentence-1' class='sentence'>For a non-type <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> of reference or pointer type,
or for each non-static data member of reference or pointer type
in a non-type <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> of class type or subobject thereof,
the reference or pointer value shall not refer to
or be the address of (respectively):
<ul class='itemize'><li id='arg.nontype-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.nontype-3.1'>(3.1)</a></div>a temporary object (<a href='class.temporary'>[class.temporary]</a>),</li><li id='arg.nontype-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.nontype-3.2'>(3.2)</a></div>a string literal object (<a href='lex.string'>[lex.string]</a>),</li><li id='arg.nontype-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.nontype-3.3'>(3.3)</a></div>the result of a <span class='texttt'><span class='keyword'>typeid</span></span> expression (<a href='expr.typeid'>[expr.typeid]</a>),</li><li id='arg.nontype-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.nontype-3.4'>(3.4)</a></div>a predefined <span class='texttt'>__func__</span> variable (<a href='dcl.fct.def.general'>[dcl.fct.def.general]</a>), or</li><li id='arg.nontype-3.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.nontype-3.5'>(3.5)</a></div>a subobject (<a href='intro.object'>[intro.object]</a>) of one of the above<a class='hidden_link' href='#arg.nontype-3.sentence-1'>.</a></li></ul></div></div><div class='para' id='arg.nontype-4'><div class='marginalizedparent'><a class='marginalized' href='#arg.nontype-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1230'>#</a></div><div id='arg.nontype-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg.nontype-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>*</span> pci<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>int</span> ai<span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span>;
X<span class='anglebracket'>&lt;</span>ai<span class='anglebracket'>&gt;</span> xi;                       <span class='comment'>// array to pointer and qualification conversions</span>

<span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> Y<span class='operator'>&amp;</span> b<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Z <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
Y y;
Z<span class='anglebracket'>&lt;</span>y<span class='anglebracket'>&gt;</span> z;                         <span class='comment'>// no conversion, but note extra cv-qualification</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span>pa<span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> W <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>int</span> b<span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span>;
W<span class='anglebracket'>&lt;</span>b<span class='anglebracket'>&gt;</span> w;                         <span class='comment'>// no conversion</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span>pf<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;

A<span class='anglebracket'>&lt;</span><span class='operator'>&amp;</span>f<span class='anglebracket'>&gt;</span> a;                        <span class='comment'>// selects <span class='tcode_in_codeblock'>f(int)</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>auto</span> n<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
B<span class='anglebracket'>&lt;</span><span class='literal'>5</span><span class='anglebracket'>&gt;</span> b1;                        <span class='comment'>// OK, template parameter type is <span class='tcode_in_codeblock'>int</span></span>
B<span class='anglebracket'>&lt;</span><span class='literal'>'a'</span><span class='anglebracket'>&gt;</span> b2;                      <span class='comment'>// OK, template parameter type is <span class='tcode_in_codeblock'>char</span></span>
B<span class='anglebracket'>&lt;</span><span class='literal'>2.5</span><span class='anglebracket'>&gt;</span> b3;                      <span class='comment'>// OK, template parameter type is <span class='tcode_in_codeblock'>double</span></span>
B<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> b4;                  <span class='comment'>// error: template parameter type cannot be <span class='tcode_in_codeblock'>void</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='arg.nontype-5'><div class='marginalizedparent'><a class='marginalized' href='#arg.nontype-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1261'>#</a></div><div id='arg.nontype-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#arg.nontype-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.nontype-5.sentence-1' class='sentence'>A <a class='grammarterm' href='lex.string#nt:string-literal'>string-literal</a> is
not an acceptable <a class='grammarterm' href='#nt:template-argument'>template-argument</a>
for a <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> of non-class type<a class='hidden_link' href='#arg.nontype-5.sentence-1'>.</a></div> <div id='arg.nontype-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg.nontype-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, T p<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='comment'>/* ... */</span>
<span class='curlybracket'>}</span>;

X<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span>, <span class='literal'>"Studebaker"</span><span class='anglebracket'>&gt;</span> x; <span class='comment'>// error: string literal object as <span class='grammarterm'>template-argument</span></span>
X<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span>, <span class='literal'>"Knope"</span> <span class='operator'>+</span> <span class='literal'>1</span><span class='anglebracket'>&gt;</span> x2; <span class='comment'>// error: subobject of string literal object as <span class='grammarterm'>template-argument</span></span>

<span class='keyword'>const</span> <span class='keyword'>char</span> p<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='literal'>"Vivisectionist"</span>;
X<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span>, p<span class='anglebracket'>&gt;</span> y;            <span class='comment'>// OK</span>

<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>constexpr</span> A<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

X<span class='anglebracket'>&lt;</span>A, <span class='literal'>"Pyrophoricity"</span><span class='anglebracket'>&gt;</span> z;        <span class='comment'>// OK, <span class='grammarterm'>string-literal</span> is a constructor argument to <span class='tcode_in_codeblock'>A</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='arg.nontype-6'><div class='marginalizedparent'><a class='marginalized' href='#arg.nontype-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1287'>#</a></div><div id='arg.nontype-6.note-1' class='note'>[&nbsp;<a class='note_link' href='#arg.nontype-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.nontype-6.sentence-1' class='sentence'>A temporary object
is not an acceptable
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
when the corresponding
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
has reference type<a class='hidden_link' href='#arg.nontype-6.sentence-1'>.</a></div> <div id='arg.nontype-6.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg.nontype-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span> CRI<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;

B<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span> b1;                        <span class='comment'>// error: temporary would be required for template argument</span>

<span class='keyword'>int</span> c <span class='operator'>=</span> <span class='literal'>1</span>;
B<span class='anglebracket'>&lt;</span>c<span class='anglebracket'>&gt;</span> b2;                        <span class='comment'>// OK</span>

<span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>int</span> n; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='keyword'>const</span> <span class='keyword'>int</span> <span class='operator'>&amp;</span>r; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>Y y<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
C<span class='anglebracket'>&lt;</span>Y<span class='curlybracket'>{</span>X<span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span><span class='operator'>.</span>n<span class='curlybracket'>}</span><span class='anglebracket'>&gt;</span> c;                 <span class='comment'>// error: subobject of temporary object used to initialize</span>
                                <span class='comment'>// reference member of template parameter</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div id='arg.template' class='section'><h3 ><a class='secnum' href='#arg.template' style='min-width:103pt'>13.4.3</a> Template template arguments <a class='abbr_ref' href='temp.arg.template'>[temp.arg.template]</a></h3><div class='para' id='arg.template-1'><div class='marginalizedparent'><a class='marginalized' href='#arg.template-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1315'>#</a></div><div id='arg.template-1.sentence-1' class='sentence'>A
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
for a template
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
shall be the name of a class template or an alias template, expressed as
<a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a><a class='hidden_link' href='#arg.template-1.sentence-1'>.</a></div> <div id='arg.template-1.sentence-2' class='sentence'>When the <a class='grammarterm' href='#nt:template-argument'>template-argument</a> names a class
template, only primary class templates are considered when matching the template template
argument with the corresponding parameter; partial specializations are not
considered even if their parameter lists match that of the template template
parameter<a class='hidden_link' href='#arg.template-1.sentence-2'>.</a></div></div><div class='para' id='arg.template-2'><div class='marginalizedparent'><a class='marginalized' href='#arg.template-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1328'>#</a></div><div id='arg.template-2.sentence-1' class='sentence'>Any <a href='#class.spec'>partial specializations</a> associated with the
primary class template or primary variable template are considered when a
specialization based on the template
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
is instantiated<a class='hidden_link' href='#arg.template-2.sentence-1'>.</a></div> <div id='arg.template-2.sentence-2' class='sentence'>If a specialization is not visible at the point of instantiation,
and it would have been selected had it been visible, the program is ill-formed,
no diagnostic required<a class='hidden_link' href='#arg.template-2.sentence-2'>.</a></div> <div id='arg.template-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg.template-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span>     <span class='comment'>// primary template</span>
  <span class='keyword'>int</span> x;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>// partial specialization</span>
  <span class='keyword'>long</span> x;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> C <span class='curlybracket'>{</span>
  V<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>  y;
  V<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> z;
<span class='curlybracket'>}</span>;
C<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span> c;             <span class='comment'>// <span class='tcode_in_codeblock'>V&lt;int&gt;</span> within <span class='tcode_in_codeblock'>C&lt;A&gt;</span> uses the primary template, so <span class='tcode_in_codeblock'>c.y.x</span> has type <span class='tcode_in_codeblock'>int</span></span>
                    <span class='comment'>// <span class='tcode_in_codeblock'>V&lt;int*&gt;</span> within <span class='tcode_in_codeblock'>C&lt;A&gt;</span> uses the partial specialization, so <span class='tcode_in_codeblock'>c.z.x</span> has type <span class='tcode_in_codeblock'>long</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='arg.template-3'><div class='marginalizedparent'><a class='marginalized' href='#arg.template-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1354'>#</a></div><div id='arg.template-3.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:template-argument'>template-argument</a> matches a template
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> <span class='texttt'>P</span> when
<span class='texttt'>P</span> is at least as specialized as the <a class='grammarterm' href='#nt:template-argument'>template-argument</a> <span class='texttt'>A</span><a class='hidden_link' href='#arg.template-3.sentence-1'>.</a></div> <div id='arg.template-3.sentence-2' class='sentence'>In this comparison, if <span class='texttt'>P</span> is unconstrained,
the constraints on <span class='texttt'>A</span> are not considered<a class='hidden_link' href='#arg.template-3.sentence-2'>.</a></div> <div id='arg.template-3.sentence-3' class='sentence'>If <span class='texttt'>P</span> contains a template parameter pack, then <span class='texttt'>A</span> also matches <span class='texttt'>P</span>
if each of <span class='texttt'>A</span>'s template parameters
matches the corresponding template parameter in the
<a class='grammarterm' href='#nt:template-head'>template-head</a> of <span class='texttt'>P</span><a class='hidden_link' href='#arg.template-3.sentence-3'>.</a></div> <div id='arg.template-3.sentence-4' class='sentence'>Two template parameters match if they are of the same kind (type, non-type, template),
for non-type <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>, their types are
equivalent (<a href='#over.link'>[temp.over.link]</a>), and for template <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>,
each of their corresponding <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span> matches, recursively<a class='hidden_link' href='#arg.template-3.sentence-4'>.</a></div> <div id='arg.template-3.sentence-5' class='sentence'>When <span class='texttt'>P</span>'s <a class='grammarterm' href='#nt:template-head'>template-head</a> contains a template parameter
pack (<a href='#variadic'>[temp.variadic]</a>), the template parameter pack will match zero or more template
parameters or template parameter packs in the <a class='grammarterm' href='#nt:template-head'>template-head</a> of
<span class='texttt'>A</span> with the same type and form as the template parameter pack in <span class='texttt'>P</span>
(ignoring whether those template parameters are template parameter packs)<a class='hidden_link' href='#arg.template-3.sentence-5'>.</a></div><div style='height:0.6em;display:block'></div><div id='arg.template-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg.template-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U <span class='operator'>=</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> C <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>auto</span> n<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> D <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> P<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Q<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> R<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Z <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;

X<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span> xa;            <span class='comment'>// OK</span>
X<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span> xb;            <span class='comment'>// OK</span>
X<span class='anglebracket'>&lt;</span>C<span class='anglebracket'>&gt;</span> xc;            <span class='comment'>// OK</span>
Y<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span> ya;            <span class='comment'>// OK</span>
Y<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span> yb;            <span class='comment'>// OK</span>
Y<span class='anglebracket'>&lt;</span>C<span class='anglebracket'>&gt;</span> yc;            <span class='comment'>// OK</span>
Z<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span> zd;            <span class='comment'>// OK</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='arg.template-3.example-2' class='example'>[&nbsp;<a class='example_link' href='#arg.template-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> eval;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span>, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> TT, <span class='keyword'>class</span> T1, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Rest<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> eval<span class='anglebracket'>&lt;</span>TT<span class='anglebracket'>&lt;</span>T1, Rest<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> D;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> N <span class='operator'>=</span> <span class='literal'>17</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> E;

eval<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> eA;            <span class='comment'>// OK: matches partial specialization of <span class='tcode_in_codeblock'>eval</span></span>
eval<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>float</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> eB;     <span class='comment'>// OK: matches partial specialization of <span class='tcode_in_codeblock'>eval</span></span>
eval<span class='anglebracket'>&lt;</span>C<span class='anglebracket'>&lt;</span><span class='literal'>17</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> eC;             <span class='comment'>// error: <span class='tcode_in_codeblock'>C</span> does not match <span class='tcode_in_codeblock'>TT</span> in partial specialization</span>
eval<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='literal'>17</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> eD;        <span class='comment'>// error: <span class='tcode_in_codeblock'>D</span> does not match <span class='tcode_in_codeblock'>TT</span> in partial specialization</span>
eval<span class='anglebracket'>&lt;</span>E<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>float</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> eE;     <span class='comment'>// error: <span class='tcode_in_codeblock'>E</span> does not match <span class='tcode_in_codeblock'>TT</span> in partial specialization</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='arg.template-3.example-3' class='example'>[&nbsp;<a class='example_link' href='#arg.template-3.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> t<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> D <span class='operator'>=</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> t<span class='operator'>.</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> P<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Z <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

S<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span> s1;            <span class='comment'>// OK, <span class='tcode_in_codeblock'>X</span> and <span class='tcode_in_codeblock'>P</span> have equivalent constraints</span>
S<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span> s2;            <span class='comment'>// error: <span class='tcode_in_codeblock'>P</span> is not at least as specialized as <span class='tcode_in_codeblock'>Y</span></span>
S<span class='anglebracket'>&lt;</span>Z<span class='anglebracket'>&gt;</span> s3;            <span class='comment'>// OK, <span class='tcode_in_codeblock'>P</span> is at least as specialized as <span class='tcode_in_codeblock'>Z</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='arg.template-4'><div class='marginalizedparent'><a class='marginalized' href='#arg.template-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1430'>#</a></div><div id='arg.template-4.sentence-1' class='sentence'>A template <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> <span class='texttt'>P</span> is
at least as specialized as a template <a class='grammarterm' href='#nt:template-argument'>template-argument</a> <span class='texttt'>A</span>
if, given the following rewrite to two function templates,
the function template corresponding to <span class='texttt'>P</span>
is at least as specialized as
the function template corresponding to <span class='texttt'>A</span>
according to the <a href='#func.order'>partial ordering rules
for function templates</a><a class='hidden_link' href='#arg.template-4.sentence-1'>.</a></div> <div id='arg.template-4.sentence-2' class='sentence'>Given an invented class template <span class='texttt'>X</span>
with the <a class='grammarterm' href='#nt:template-head'>template-head</a> of <span class='texttt'>A</span> (including default arguments
and <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a>, if any):</div><ul class='itemize'><li id='arg.template-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.template-4.1'>(4.1)</a></div><div id='arg.template-4.1.sentence-1' class='sentence'>Each of the two function templates has the same template parameters
and <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a> (if any),
respectively, as <span class='texttt'>P</span> or <span class='texttt'>A</span><a class='hidden_link' href='#arg.template-4.1.sentence-1'>.</a></div></li><li id='arg.template-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.template-4.2'>(4.2)</a></div><div id='arg.template-4.2.sentence-1' class='sentence'>Each function template has a single function parameter
whose type is a specialization of <span class='texttt'>X</span>
with template arguments corresponding to the template parameters
from the respective function template where,
for each template parameter <span class='texttt'>PP</span>
in the <a class='grammarterm' href='#nt:template-head'>template-head</a> of the function template,
a corresponding template argument <span class='texttt'>AA</span> is formed<a class='hidden_link' href='#arg.template-4.2.sentence-1'>.</a></div> <div id='arg.template-4.2.sentence-2' class='sentence'>If <span class='texttt'>PP</span> declares a template parameter pack,
then <span class='texttt'>AA</span> is the pack expansion <span class='texttt'>PP<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> (<a href='#variadic'>[temp.variadic]</a>);
otherwise, <span class='texttt'>AA</span> is the <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a> <span class='texttt'>PP</span><a class='hidden_link' href='#arg.template-4.2.sentence-2'>.</a></div></li></ul> <div id='arg.template-4.sentence-3' class='sentence'>
If the rewrite produces an invalid type,
then <span class='texttt'>P</span> is not at least as specialized as <span class='texttt'>A</span><a class='hidden_link' href='#arg.template-4.sentence-3'>.</a></div></div></div></div><div id='constr' class='section'><h2 ><a class='secnum' href='#constr' style='min-width:88pt'>13.5</a> Template constraints <a class='abbr_ref' href='temp.constr'>[temp.constr]</a></h2><div class='para' id='constr-1'><div class='marginalizedparent'><a class='marginalized' href='#constr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1465'>#</a></div><div id='constr-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#constr-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr-1.sentence-1' class='sentence'>This subclause defines the meaning of constraints on template arguments<a class='hidden_link' href='#constr-1.sentence-1'>.</a></div> <div id='constr-1.sentence-2' class='sentence'>The abstract syntax and satisfaction rules are defined
in <a href='#constr.constr'>[temp.constr.constr]</a><a class='hidden_link' href='#constr-1.sentence-2'>.</a></div> <div id='constr-1.sentence-3' class='sentence'>Constraints are associated with declarations in <a href='#constr.decl'>[temp.constr.decl]</a><a class='hidden_link' href='#constr-1.sentence-3'>.</a></div> <div id='constr-1.sentence-4' class='sentence'>Declarations are partially ordered by their associated constraints (<a href='#constr.order'>[temp.constr.order]</a>)<a class='hidden_link' href='#constr-1.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div id='constr.constr' class='section'><h3 ><a class='secnum' href='#constr.constr' style='min-width:103pt'>13.5.1</a> Constraints <a class='abbr_ref' href='temp.constr.constr'>[temp.constr.constr]</a></h3><div class='para' id='constr.constr-1'><div class='marginalizedparent'><a class='marginalized' href='#constr.constr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1478'>#</a></div><div id='constr.constr-1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:constraint' id='def:constraint'><i >constraint</i></a> is a sequence of logical operations and
operands that specifies requirements on template arguments<a class='hidden_link' href='#constr.constr-1.sentence-1'>.</a></div> <div id='constr.constr-1.sentence-2' class='sentence'>The operands of a logical operation are constraints<a class='hidden_link' href='#constr.constr-1.sentence-2'>.</a></div> <div id='constr.constr-1.sentence-3' class='sentence'>There are three different kinds of constraints:
<ul class='itemize'><li id='constr.constr-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.constr-1.1'>(1.1)</a></div><a href='#def:conjunction'>conjunctions</a>,</li><li id='constr.constr-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.constr-1.2'>(1.2)</a></div><a href='#def:disjunction'>disjunctions</a>, and</li><li id='constr.constr-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.constr-1.3'>(1.3)</a></div><a href='#def:atomic_constraint'>atomic constraints</a><a class='hidden_link' href='#constr.constr-1.sentence-3'>.</a></li></ul></div></div><div class='para' id='constr.constr-2'><div class='marginalizedparent'><a class='marginalized' href='#constr.constr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1489'>#</a></div><div id='constr.constr-2.sentence-1' class='sentence'>In order for a constrained template to be instantiated (<a href='#spec'>[temp.spec]</a>),
its <a href='#def:associated_constraints'>associated constraints</a>
shall be satisfied as described in the following subclauses<a class='hidden_link' href='#constr.constr-2.sentence-1'>.</a></div> <div id='constr.constr-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#constr.constr-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr.constr-2.sentence-2' class='sentence'>Forming the name of a specialization of
a class template,
a variable template, or
an alias template (<a href='#names'>[temp.names]</a>)
requires the satisfaction of its constraints<a class='hidden_link' href='#constr.constr-2.sentence-2'>.</a></div> <div id='constr.constr-2.sentence-3' class='sentence'><a href='over.match.viable'>Overload resolution</a>
requires the satisfaction of constraints
on functions and function templates<a class='hidden_link' href='#constr.constr-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div id='constr.op' class='section'><h4 ><a class='secnum' href='#constr.op' style='min-width:118pt'>13.5.1.1</a> Logical operations <a class='abbr_ref' href='temp.constr.op'>[temp.constr.op]</a></h4><div class='para' id='constr.op-1'><div class='marginalizedparent'><a class='marginalized' href='#constr.op-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1506'>#</a></div><div id='constr.op-1.sentence-1' class='sentence'>There are two binary logical operations on constraints: conjunction
and disjunction<a class='hidden_link' href='#constr.op-1.sentence-1'>.</a></div> <div id='constr.op-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#constr.op-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr.op-1.sentence-2' class='sentence'>These logical operations have no corresponding C++ syntax<a class='hidden_link' href='#constr.op-1.sentence-2'>.</a></div> <div id='constr.op-1.sentence-3' class='sentence'>For the purpose of exposition, conjunction is spelled
using the symbol <span class='math'>∧</span> and disjunction is spelled using the
symbol <span class='math'>∨</span><a class='hidden_link' href='#constr.op-1.sentence-3'>.</a></div> <div id='constr.op-1.sentence-4' class='sentence'>The operands of these operations are called the left
and right operands<a class='hidden_link' href='#constr.op-1.sentence-4'>.</a></div> <div id='constr.op-1.sentence-5' class='sentence'>In the constraint <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span></span></span>,
<span class='math'><span class='mathalpha'>A</span></span> is the left operand, and <span class='math'><span class='mathalpha'>B</span></span> is the right operand<a class='hidden_link' href='#constr.op-1.sentence-5'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='constr.op-2'><div class='marginalizedparent'><a class='marginalized' href='#constr.op-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1519'>#</a></div><div id='constr.op-2.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:conjunction' id='def:conjunction'><i >conjunction</i></a> is a constraint taking two
operands<a class='hidden_link' href='#constr.op-2.sentence-1'>.</a></div> <div id='constr.op-2.sentence-2' class='sentence'>To determine if a conjunction is
<a class='hidden_link' href='#def:constraint,satisfaction,conjunction' id='def:constraint,satisfaction,conjunction'><i >satisfied</i></a>,
the satisfaction of
the first operand is checked<a class='hidden_link' href='#constr.op-2.sentence-2'>.</a></div> <div id='constr.op-2.sentence-3' class='sentence'>If that is not satisfied, the conjunction is not satisfied<a class='hidden_link' href='#constr.op-2.sentence-3'>.</a></div> <div id='constr.op-2.sentence-4' class='sentence'>Otherwise, the conjunction is satisfied if and only if the second
operand is satisfied<a class='hidden_link' href='#constr.op-2.sentence-4'>.</a></div></div><div class='para' id='constr.op-3'><div class='marginalizedparent'><a class='marginalized' href='#constr.op-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1530'>#</a></div><div id='constr.op-3.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:disjunction' id='def:disjunction'><i >disjunction</i></a> is a constraint taking two
operands<a class='hidden_link' href='#constr.op-3.sentence-1'>.</a></div> <div id='constr.op-3.sentence-2' class='sentence'>To determine if a disjunction is
<a class='hidden_link' href='#def:constraint,satisfaction,disjunction' id='def:constraint,satisfaction,disjunction'><i >satisfied</i></a>,
the satisfaction of
the first operand is checked<a class='hidden_link' href='#constr.op-3.sentence-2'>.</a></div> <div id='constr.op-3.sentence-3' class='sentence'>If that is satisfied, the disjunction is satisfied<a class='hidden_link' href='#constr.op-3.sentence-3'>.</a></div> <div id='constr.op-3.sentence-4' class='sentence'>Otherwise, the disjunction is satisfied if and only if the second
operand is satisfied<a class='hidden_link' href='#constr.op-3.sentence-4'>.</a></div></div><div class='para' id='constr.op-4'><div class='marginalizedparent'><a class='marginalized' href='#constr.op-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1542'>#</a></div><div id='constr.op-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#constr.op-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> get_value<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> T<span class='operator'>::</span>value; <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> <span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>1</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='parenthesis'>(</span>get_value<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
    <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;      <span class='comment'>// has associated constraint <span class='tcode_in_codeblock'>sizeof(T) &gt; 1 <span class='math'>∧</span> get_&shy;value&lt;T&gt;()</span></span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;

f<span class='parenthesis'>(</span><span class='literal'>'a'</span><span class='parenthesis'>)</span>; <span class='comment'>// OK: calls <span class='tcode_in_codeblock'>f(int)</span></span>
</pre> <div id='constr.op-4.sentence-1' class='sentence'>
In the satisfaction of the <a href='#def:associated_constraints'>associated constraints</a>
of <span class='texttt'>f</span>, the constraint <span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>1</span></span> is not satisfied;
the second operand is not checked for satisfaction<a class='hidden_link' href='#constr.op-4.sentence-1'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='constr.op-5'><div class='marginalizedparent'><a class='marginalized' href='#constr.op-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1561'>#</a></div><div id='constr.op-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#constr.op-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr.op-5.sentence-1' class='sentence'>A logical negation expression (<a href='expr.unary.op'>[expr.unary.op]</a>) is an atomic constraint;
the negation operator is not treated as a logical operation on constraints<a class='hidden_link' href='#constr.op-5.sentence-1'>.</a></div> <div id='constr.op-5.sentence-2' class='sentence'>As a result, distinct negation <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a><span class='textit'>s</span>
that are equivalent under <a href='#over.link'>[temp.over.link]</a>
do not subsume one another under <a href='#constr.order'>[temp.constr.order]</a><a class='hidden_link' href='#constr.op-5.sentence-2'>.</a></div> <div id='constr.op-5.sentence-3' class='sentence'>Furthermore, if substitution to determine
whether an atomic constraint is satisfied (<a href='#constr.atomic'>[temp.constr.atomic]</a>)
encounters a substitution failure, the constraint is not satisfied,
regardless of the presence of a negation operator<a class='hidden_link' href='#constr.op-5.sentence-3'>.</a></div> <div id='constr.op-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#constr.op-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> sad <span class='operator'>=</span> <span class='literal'>false</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f1<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span><span class='operator'>!</span>sad<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f1<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span><span class='operator'>!</span>sad<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='literal'>true</span>;
<span class='keyword'>int</span> i1 <span class='operator'>=</span> f1<span class='parenthesis'>(</span><span class='literal'>42</span><span class='parenthesis'>)</span>;        <span class='comment'>// ambiguous, <span class='tcode_in_codeblock'>!sad&lt;T&gt;</span> atomic constraint expressions (<a href='#constr.atomic'>[temp.constr.atomic]</a>)</span>
                        <span class='comment'>// are not formed from the same <span class='grammarterm'>expression</span></span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> not_sad <span class='operator'>=</span> <span class='operator'>!</span>sad<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f2<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>requires</span> not_sad<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f2<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>requires</span> not_sad<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='literal'>true</span>;
<span class='keyword'>int</span> i2 <span class='operator'>=</span> f2<span class='parenthesis'>(</span><span class='literal'>42</span><span class='parenthesis'>)</span>;        <span class='comment'>// OK, <span class='tcode_in_codeblock'>!sad&lt;T&gt;</span> atomic constraint expressions both come from <span class='tcode_in_codeblock'>not_&shy;sad</span></span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f3<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span><span class='operator'>!</span>sad<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='operator'>::</span>type<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i3 <span class='operator'>=</span> f3<span class='parenthesis'>(</span><span class='literal'>42</span><span class='parenthesis'>)</span>;        <span class='comment'>// error: associated constraints not satisfied due to substitution failure</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> sad_nested_type <span class='operator'>=</span> sad<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='operator'>::</span>type<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f4<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span><span class='operator'>!</span>sad_nested_type<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i4 <span class='operator'>=</span> f4<span class='parenthesis'>(</span><span class='literal'>42</span><span class='parenthesis'>)</span>;        <span class='comment'>// OK, substitution failure contained within <span class='tcode_in_codeblock'>sad_&shy;nested_&shy;type</span></span>
</pre> <div id='constr.op-5.sentence-4' class='sentence'>
Here,
<span class='texttt'><span class='keyword'>requires</span> <span class='parenthesis'>(</span><span class='operator'>!</span>sad<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='operator'>&#x200b;::&#x200b;</span>type<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span></span> requires
that there is a nested <span class='texttt'>type</span> that is not <span class='texttt'>sad</span>,
whereas
<span class='texttt'><span class='keyword'>requires</span> <span class='parenthesis'>(</span><span class='operator'>!</span>sad_&shy;nested_&shy;type<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span></span> requires
that there is no <span class='texttt'>sad</span> nested <span class='texttt'>type</span><a class='hidden_link' href='#constr.op-5.sentence-4'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div id='constr.atomic' class='section'><h4 ><a class='secnum' href='#constr.atomic' style='min-width:118pt'>13.5.1.2</a> Atomic constraints <a class='abbr_ref' href='temp.constr.atomic'>[temp.constr.atomic]</a></h4><div class='para' id='constr.atomic-1'><div class='marginalizedparent'><a class='marginalized' href='#constr.atomic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1604'>#</a></div><div id='constr.atomic-1.sentence-1' class='sentence'>An <a class='hidden_link' href='#def:atomic_constraint' id='def:atomic_constraint'><i >atomic constraint</i></a> is formed from
an expression <span class='texttt'>E</span>
and a mapping from the template parameters
that appear within <span class='texttt'>E</span> to
template arguments that are formed via substitution during constraint normalization
in the declaration of a constrained entity (and, therefore, can involve the
unsubstituted template parameters of the constrained entity),
called the <a class='hidden_link' href='#def:parameter_mapping' id='def:parameter_mapping'><i >parameter mapping</i></a> (<a href='#constr.decl'>[temp.constr.decl]</a>)<a class='hidden_link' href='#constr.atomic-1.sentence-1'>.</a></div> <div id='constr.atomic-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#constr.atomic-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr.atomic-1.sentence-2' class='sentence'>Atomic constraints are formed by <a href='#def:constraint,normalization'>constraint normalization</a><a class='hidden_link' href='#constr.atomic-1.sentence-2'>.</a></div> <div id='constr.atomic-1.sentence-3' class='sentence'><span class='texttt'>E</span> is never a <a href='expr.log.and'>logical AND expression</a>
nor a <a href='expr.log.or'>logical OR expression</a><a class='hidden_link' href='#constr.atomic-1.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='constr.atomic-2'><div class='marginalizedparent'><a class='marginalized' href='#constr.atomic-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1619'>#</a></div><div id='constr.atomic-2.sentence-1' class='sentence'>Two atomic constraints, <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">e</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span> and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">e</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span>, are
<a class='hidden_link' href='#def:atomic_constraint,identical' id='def:atomic_constraint,identical'><i >identical</i></a>
if they are formed from the same appearance of the same
<a class='grammarterm' href='expr.comma#nt:expression'>expression</a>
and if, given a hypothetical template <span class='math'><span class='mathalpha'>A</span></span>
whose <a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a> consists of
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>s corresponding and equivalent (<a href='#over.link'>[temp.over.link]</a>) to
those mapped by the parameter mappings of the expression,
a <a class='grammarterm' href='#nt:template-id'>template-id</a> naming <span class='math'><span class='mathalpha'>A</span></span>
whose <a class='grammarterm' href='#nt:template-argument'>template-argument</a>s are
the targets of the parameter mapping of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">e</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>
is the same (<a href='#type'>[temp.type]</a>) as
a <a class='grammarterm' href='#nt:template-id'>template-id</a> naming <span class='math'><span class='mathalpha'>A</span></span>
whose <a class='grammarterm' href='#nt:template-argument'>template-argument</a>s are
the targets of the parameter mapping of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">e</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span><a class='hidden_link' href='#constr.atomic-2.sentence-1'>.</a></div> <div id='constr.atomic-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#constr.atomic-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr.atomic-2.sentence-2' class='sentence'>The comparison of parameter mappings of atomic constraints
operates in a manner similar to that of declaration matching
with alias template substitution (<a href='#alias'>[temp.alias]</a>)<a class='hidden_link' href='#constr.atomic-2.sentence-2'>.</a></div> <div id='constr.atomic-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#constr.atomic-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> Atomic <span class='operator'>=</span> <span class='literal'>true</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> Atomic<span class='anglebracket'>&lt;</span>N<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> Add1 <span class='operator'>=</span> C<span class='anglebracket'>&lt;</span>N <span class='operator'>+</span> <span class='literal'>1</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> AddOne <span class='operator'>=</span> C<span class='anglebracket'>&lt;</span>N <span class='operator'>+</span> <span class='literal'>1</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> M<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
  <span class='keyword'>requires</span> Add1<span class='anglebracket'>&lt;</span><span class='literal'>2</span> <span class='operator'>*</span> M<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> M<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
  <span class='keyword'>requires</span> AddOne<span class='anglebracket'>&lt;</span><span class='literal'>2</span> <span class='operator'>*</span> M<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='literal'>true</span>;

<span class='keyword'>int</span> x <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// OK, the atomic constraints from concept <span class='tcode_in_codeblock'>C</span> in both <span class='tcode_in_codeblock'>f</span>s are <span class='tcode_in_codeblock'>Atomic&lt;N&gt;</span></span>
                    <span class='comment'>// with mapping similar to <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.298em;">N</span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">↦</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char" style="padding-top: 0.446em; padding-bottom: 0.004em;"><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em; margin-right: 0.275em;"><span class='literal'>2</span> </span><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em; margin-right: 0.275em;"><span class='operator'>*</span> </span><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em; margin-right: 0.275em;">M </span><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em; margin-right: 0.275em;"><span class='operator'>+</span> </span><span class="mjx-charbox MJXc-TeX-type-R" style="padding-bottom: 0.233em;"><span class='literal'>1</span></span></span></span></span></span></span></span></span></span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> WrapN;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> Add1Ty <span class='operator'>=</span> WrapN<span class='anglebracket'>&lt;</span>N <span class='operator'>+</span> <span class='literal'>1</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> AddOneTy <span class='operator'>=</span> WrapN<span class='anglebracket'>&lt;</span>N <span class='operator'>+</span> <span class='literal'>1</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> M<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>Add1Ty<span class='anglebracket'>&lt;</span><span class='literal'>2</span> <span class='operator'>*</span> M<span class='anglebracket'>&gt;</span> <span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> M<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>AddOneTy<span class='anglebracket'>&lt;</span><span class='literal'>2</span> <span class='operator'>*</span> M<span class='anglebracket'>&gt;</span> <span class='operator'>*</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  g<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>nullptr</span><span class='parenthesis'>)</span>;    <span class='comment'>// OK, there is only one <span class='tcode_in_codeblock'>g</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='constr.atomic-2.sentence-3' class='sentence'>
This similarity includes the situation where a program is ill-formed, no diagnostic required,
when the meaning of the program depends on whether two constructs are equivalent,
and they are functionally equivalent but not equivalent<a class='hidden_link' href='#constr.atomic-2.sentence-3'>.</a></div> <div id='constr.atomic-2.example-2' class='example'>[&nbsp;<a class='example_link' href='#constr.atomic-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
  <span class='keyword'>requires</span> Add1<span class='anglebracket'>&lt;</span><span class='literal'>2</span> <span class='operator'>*</span> N<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
  <span class='keyword'>requires</span> Add1<span class='anglebracket'>&lt;</span>N <span class='operator'>*</span> <span class='literal'>2</span><span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='literal'>true</span>;
<span class='keyword'>void</span> h2<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f2<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// ill-formed, no diagnostic required:</span>
                    <span class='comment'>// requires determination of subsumption between atomic constraints that are</span>
                    <span class='comment'>// functionally equivalent but not equivalent</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='constr.atomic-3'><div class='marginalizedparent'><a class='marginalized' href='#constr.atomic-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1683'>#</a></div><div id='constr.atomic-3.sentence-1' class='sentence'>To determine if an atomic constraint is
<a class='hidden_link' href='#def:constraint,satisfaction,atomic' id='def:constraint,satisfaction,atomic'><i >satisfied</i></a>,
the parameter mapping and template arguments are
first substituted into its expression<a class='hidden_link' href='#constr.atomic-3.sentence-1'>.</a></div> <div id='constr.atomic-3.sentence-2' class='sentence'>If substitution results in an invalid type or expression,
the constraint is not satisfied<a class='hidden_link' href='#constr.atomic-3.sentence-2'>.</a></div> <div id='constr.atomic-3.sentence-3' class='sentence'>Otherwise, the <a href='conv.lval'>lvalue-to-rvalue conversion</a>
is performed if necessary,
and <span class='texttt'>E</span> shall be a constant expression of type <span class='texttt'><span class='keyword'>bool</span></span><a class='hidden_link' href='#constr.atomic-3.sentence-3'>.</a></div> <div id='constr.atomic-3.sentence-4' class='sentence'>The constraint is satisfied if and only if evaluation of <span class='texttt'>E</span>
results in <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#constr.atomic-3.sentence-4'>.</a></div> <div id='constr.atomic-3.sentence-5' class='sentence'>If, at different points in the program, the satisfaction result is different
for identical atomic constraints and template arguments,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#constr.atomic-3.sentence-5'>.</a></div> <div id='constr.atomic-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#constr.atomic-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span>
  <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>4</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>!</span><span class='literal'>true</span>;      <span class='comment'>// requires atomic constraints <span class='tcode_in_codeblock'>sizeof(T) == 4</span> and <span class='tcode_in_codeblock'>!true</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>operator</span> <span class='keyword'>bool</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>true</span>; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;                      <span class='comment'>// #1</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;                    <span class='comment'>// #2</span>

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                         <span class='comment'>// error: expression <span class='tcode_in_codeblock'>S&lt;int&gt;{}</span> does not have type <span class='tcode_in_codeblock'>bool</span></span>
<span class='curlybracket'>}</span>                               <span class='comment'>// while checking satisfaction of deduced arguments of #1;</span>
                                <span class='comment'>// call is ill-formed even though #2 is a better match</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div></div><div id='constr.decl' class='section'><h3 ><a class='secnum' href='#constr.decl' style='min-width:103pt'>13.5.2</a> Constrained declarations <a class='abbr_ref' href='temp.constr.decl'>[temp.constr.decl]</a></h3><div class='para' id='constr.decl-1'><div class='marginalizedparent'><a class='marginalized' href='#constr.decl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1720'>#</a></div><div id='constr.decl-1.sentence-1' class='sentence'>A template declaration (<a href='#pre'>[temp.pre]</a>)
or templated function declaration (<a href='dcl.fct'>[dcl.fct]</a>)
can be constrained by the use of a <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a><a class='hidden_link' href='#constr.decl-1.sentence-1'>.</a></div> <div id='constr.decl-1.sentence-2' class='sentence'>This allows the specification of constraints for that declaration as
an expression:</div><pre class='bnf'><a class='nontermdef' href='#nt:constraint-expression' id='nt:constraint-expression'>constraint-expression:</a>
&#9;<a class='grammarterm' href='expr.log.or#nt:logical-or-expression'>logical-or-expression</a>
</pre></div><div class='para' id='constr.decl-2'><div class='marginalizedparent'><a class='marginalized' href='#constr.decl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1732'>#</a></div><div id='constr.decl-2.sentence-1' class='sentence'>Constraints can also be associated with a declaration through the use of
<a class='grammarterm' href='#nt:type-constraint'>type-constraint</a><span class='textit'>s</span>
in a <a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a> or parameter-type-list<a class='hidden_link' href='#constr.decl-2.sentence-1'>.</a></div> <div id='constr.decl-2.sentence-2' class='sentence'>Each of these forms introduces additional <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a><span class='textit'>s</span>
that are used to constrain the declaration<a class='hidden_link' href='#constr.decl-2.sentence-2'>.</a></div></div><div class='para' id='constr.decl-3'><div class='marginalizedparent'><a class='marginalized' href='#constr.decl-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1739'>#</a></div><div id='constr.decl-3.sentence-1' class='sentence'>A declaration's <a class='hidden_link' href='#def:associated_constraints' id='def:associated_constraints'><i >associated constraints</i></a> are defined as follows:</div><ul class='itemize'><li id='constr.decl-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.decl-3.1'>(3.1)</a></div><div id='constr.decl-3.1.sentence-1' class='sentence'>If there are no introduced <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a><span class='textit'>s</span>,
the declaration has no associated constraints<a class='hidden_link' href='#constr.decl-3.1.sentence-1'>.</a></div></li><li id='constr.decl-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.decl-3.2'>(3.2)</a></div><div id='constr.decl-3.2.sentence-1' class='sentence'>Otherwise, if there is a single introduced <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a>,
the associated constraints are the <a href='#def:normal_form'>normal form</a>
of that expression<a class='hidden_link' href='#constr.decl-3.2.sentence-1'>.</a></div></li><li id='constr.decl-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.decl-3.3'>(3.3)</a></div><div id='constr.decl-3.3.sentence-1' class='sentence'>Otherwise, the associated constraints are the normal form of a <a href='expr.log.and'>logical
AND expression</a> whose operands are in the
following order:
<ul class='itemize'><li id='constr.decl-3.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#constr.decl-3.3.1'>(3.3.1)</a></div>the <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> introduced by
each <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a> in
the declaration's <a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a>,
in order of appearance, and</li><li id='constr.decl-3.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#constr.decl-3.3.2'>(3.3.2)</a></div>the <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> introduced by
a <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a> following
a <a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a>, and</li><li id='constr.decl-3.3.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#constr.decl-3.3.3'>(3.3.3)</a></div>the <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> introduced by
each <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a> in
the parameter-type-list of a function declaration, and</li><li id='constr.decl-3.3.4'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#constr.decl-3.3.4'>(3.3.4)</a></div>the <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> introduced by
a trailing <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a> (<a href='dcl.decl'>[dcl.decl]</a>) of
a function declaration (<a href='dcl.fct'>[dcl.fct]</a>)<a class='hidden_link' href='#constr.decl-3.3.sentence-1'>.</a></li></ul></div></li></ul><div id='constr.decl-3.sentence-2' class='sentence'>The formation of the associated constraints
establishes the order in which constraints are instantiated when checking
for satisfaction (<a href='#constr.constr'>[temp.constr.constr]</a>)<a class='hidden_link' href='#constr.decl-3.sentence-2'>.</a></div> <div id='constr.decl-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#constr.decl-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='literal'>true</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f1<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f2<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f3<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
</pre> <div id='constr.decl-3.sentence-3' class='sentence'>
The functions <span class='texttt'>f1</span>, <span class='texttt'>f2</span>, and <span class='texttt'>f3</span> have the associated
constraint <span class='texttt'>C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#constr.decl-3.sentence-3'>.</a></div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C1 <span class='operator'>=</span> <span class='literal'>true</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C2 <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>0</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C1 T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f4<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='keyword'>requires</span> C2<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>requires</span> C1<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> C2<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f5<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
</pre> <div id='constr.decl-3.sentence-4' class='sentence'>
The associated constraints of <span class='texttt'>f4</span> and <span class='texttt'>f5</span>
are <span class='texttt'>C1<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='math'>∧</span> C2<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#constr.decl-3.sentence-4'>.</a></div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C1 T<span class='anglebracket'>&gt;</span> <span class='keyword'>requires</span> C2<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f6<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C2 T<span class='anglebracket'>&gt;</span> <span class='keyword'>requires</span> C1<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f7<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</pre> <div id='constr.decl-3.sentence-5' class='sentence'>
The associated constraints of
<span class='texttt'>f6</span> are <span class='texttt'>C1<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='math'>∧</span> C2<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>,
and those of
<span class='texttt'>f7</span> are <span class='texttt'>C2<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='math'>∧</span> C1<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#constr.decl-3.sentence-5'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='constr.decl-4'><div class='marginalizedparent'><a class='marginalized' href='#constr.decl-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1812'>#</a></div><div id='constr.decl-4.sentence-1' class='sentence'>When determining whether a given introduced
<a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.045em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span> of a declaration
in an instantiated specialization of a templated class
is equivalent (<a href='#over.link'>[temp.over.link]</a>) to the corresponding
<a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.045em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span> of a declaration
outside the class body,
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.045em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span> is instantiated<a class='hidden_link' href='#constr.decl-4.sentence-1'>.</a></div> <div id='constr.decl-4.sentence-2' class='sentence'>If the instantiation results in an invalid expression,
the <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a>s are not equivalent<a class='hidden_link' href='#constr.decl-4.sentence-2'>.</a></div> <div id='constr.decl-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#constr.decl-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr.decl-4.sentence-3' class='sentence'>This can happen when determining which member template is specialized
by an explicit specialization declaration<a class='hidden_link' href='#constr.decl-4.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='constr.decl-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#constr.decl-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='literal'>true</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> U f<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span> <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='operator'>::</span>type<span class='anglebracket'>&gt;</span>;   <span class='comment'>// #1</span>
  <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> U f<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span> <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;                  <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
U A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span>U u<span class='parenthesis'>)</span> <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> u; <span class='curlybracket'>}</span>              <span class='comment'>// OK, specializes #2</span>
</pre> <div id='constr.decl-4.sentence-4' class='sentence'>
Substituting <span class='texttt'><span class='keyword'>int</span></span> for <span class='texttt'>T</span> in <span class='texttt'>C<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='operator'>&#x200b;::&#x200b;</span>type<span class='anglebracket'>&gt;</span></span>
produces an invalid expression, so the specialization does not match #1<a class='hidden_link' href='#constr.decl-4.sentence-4'>.</a></div> <div id='constr.decl-4.sentence-5' class='sentence'>Substituting <span class='texttt'><span class='keyword'>int</span></span> for <span class='texttt'>T</span> in <span class='texttt'>C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> produces <span class='texttt'>C<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span></span>,
which is equivalent to the <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> for the specialization,
so it does match #2<a class='hidden_link' href='#constr.decl-4.sentence-5'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div id='constr.normal' class='section'><h3 ><a class='secnum' href='#constr.normal' style='min-width:103pt'>13.5.3</a> Constraint normalization <a class='abbr_ref' href='temp.constr.normal'>[temp.constr.normal]</a></h3><div class='para' id='constr.normal-1'><div class='marginalizedparent'><a class='marginalized' href='#constr.normal-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1846'>#</a></div><div id='constr.normal-1.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:normal_form,constraint' id='def:normal_form,constraint'><i >normal form</i></a> of an <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='texttt'>E</span> is
a <a href='#def:constraint'>constraint</a> that is defined as follows:
<ul class='itemize'><li id='constr.normal-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.normal-1.1'>(1.1)</a></div>The normal form of an expression <span class='texttt'><span class='parenthesis'>(</span> E <span class='parenthesis'>)</span></span> is
the normal form of <span class='texttt'>E</span>.</li><li id='constr.normal-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.normal-1.2'>(1.2)</a></div>The normal form of an expression <span class='texttt'>E1 <span class='operator'>|</span><span class='operator'>|</span> E2</span> is
the <a href='#def:disjunction'>disjunction</a> of
the normal forms of <span class='texttt'>E1</span> and <span class='texttt'>E2</span>.</li><li id='constr.normal-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.normal-1.3'>(1.3)</a></div>The normal form of an expression <span class='texttt'>E1 <span class='operator'>&amp;</span><span class='operator'>&amp;</span> E2</span>
is the conjunction of
the normal forms of <span class='texttt'>E1</span> and <span class='texttt'>E2</span>.</li><li id='constr.normal-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.normal-1.4'>(1.4)</a></div>The normal form of a concept-id <span class='texttt'>C<span class='anglebracket'>&lt;</span>A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span>, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>, A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span><span class='anglebracket'>&gt;</span></span>
is the normal form of the <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> of <span class='texttt'>C</span>,
after substituting <span class='texttt'>A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span>, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>, A<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span></span> for
<span class='texttt'>C</span>'s respective template parameters in the
parameter mappings in each atomic constraint. If any such substitution results in an invalid type or expression,
the program is ill-formed; no diagnostic is required. <div id='constr.normal-1.4.example-1' class='example'>[&nbsp;<a class='example_link' href='#constr.normal-1.4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> A <span class='operator'>=</span> T<span class='operator'>::</span>value <span class='operator'>|</span><span class='operator'>|</span> <span class='literal'>true</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> B <span class='operator'>=</span> A<span class='anglebracket'>&lt;</span>U<span class='operator'>*</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> V<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> B<span class='anglebracket'>&lt;</span>V<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span>;
</pre> 
Normalization of <span class='texttt'>B</span>'s <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a>
is valid and results in
<span class='texttt'>T<span class='operator'>&#x200b;::&#x200b;</span>value</span> (with the mapping <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">T</span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">↦</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.298em;">U<span class='operator'>*</span></span></span></span></span></span></span></span>)
<span class='math'>∨</span>
<span class='texttt'><span class='literal'>true</span></span> (with an empty mapping),
despite the expression <span class='texttt'>T<span class='operator'>&#x200b;::&#x200b;</span>value</span> being ill-formed
for a pointer type <span class='texttt'>T</span>. Normalization of <span class='texttt'>C</span>'s <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a>
results in the program being ill-formed,
because it would form the invalid type <span class='texttt'>V<span class='operator'>&amp;</span><span class='operator'>*</span></span>
in the parameter mapping. —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='constr.normal-1.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.normal-1.5'>(1.5)</a></div>The normal form of any other expression <span class='texttt'>E</span> is
the atomic constraint
whose expression is <span class='texttt'>E</span> and
whose parameter mapping is the identity mapping.</li></ul></div></div><div class='para' id='constr.normal-2'><div class='marginalizedparent'><a class='marginalized' href='#constr.normal-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1899'>#</a></div><div id='constr.normal-2.sentence-1' class='sentence'>The process of obtaining the normal form of a
<a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a>
is called
<a class='hidden_link' href='#def:constraint,normalization' id='def:constraint,normalization'><i >normalization</i></a><a class='hidden_link' href='#constr.normal-2.sentence-1'>.</a></div> <div id='constr.normal-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#constr.normal-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr.normal-2.sentence-2' class='sentence'>Normalization of <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a><span class='textit'>s</span>
is performed
when determining the associated constraints (<a href='#constr.constr'>[temp.constr.constr]</a>)
of a declaration
and
when evaluating the value of an <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a>
that names a concept specialization (<a href='expr.prim.id'>[expr.prim.id]</a>)<a class='hidden_link' href='#constr.normal-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='constr.normal-3'><div class='marginalizedparent'><a class='marginalized' href='#constr.normal-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1915'>#</a></div><div id='constr.normal-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#constr.normal-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C1 <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C2 <span class='operator'>=</span> C1<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='literal'>1</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>2</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C3 <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='curlybracket'>{</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>type; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C4 <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='operator'>+</span><span class='operator'>+</span>x; <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C2 U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f1<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span>;      <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C3 U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f2<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span>;      <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C4 U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f3<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span>;      <span class='comment'>// #3</span>
</pre> <div id='constr.normal-3.sentence-1' class='sentence'>
The associated constraints of #1 are
<span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span></span> (with mapping <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">T</span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">↦</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.298em;">U</span></span></span></span></span></span></span>) <span class='math'>∧</span> <span class='texttt'><span class='literal'>1</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>2</span></span><a class='hidden_link' href='#constr.normal-3.sentence-1'>.</a></div> <br/> <div id='constr.normal-3.sentence-2' class='sentence'>
The associated constraints of #2 are
<span class='texttt'><span class='keyword'>requires</span> <span class='curlybracket'>{</span> <span class='keyword'>typename</span> T<span class='operator'>&#x200b;::&#x200b;</span>type; <span class='curlybracket'>}</span></span> (with mapping <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">T</span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">↦</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.298em;">U</span></span></span></span></span></span></span>)<a class='hidden_link' href='#constr.normal-3.sentence-2'>.</a></div> <br/> <div id='constr.normal-3.sentence-3' class='sentence'>
The associated constraints of #3 are
<span class='texttt'><span class='keyword'>requires</span> <span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='operator'>+</span><span class='operator'>+</span>x; <span class='curlybracket'>}</span></span> (with mapping <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">T</span></span></span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">↦</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.298em;">U</span></span></span></span></span></span></span>)<a class='hidden_link' href='#constr.normal-3.sentence-3'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div id='constr.order' class='section'><h3 ><a class='secnum' href='#constr.order' style='min-width:103pt'>13.5.4</a> Partial ordering by constraints <a class='abbr_ref' href='temp.constr.order'>[temp.constr.order]</a></h3><div class='para' id='constr.order-1'><div class='marginalizedparent'><a class='marginalized' href='#constr.order-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1938'>#</a></div><div id='constr.order-1.sentence-1' class='sentence'>A constraint <span class='math'><span class='mathalpha'>P</span></span> <a class='hidden_link' href='#def:constraint,subsumption' id='def:constraint,subsumption'><i >subsumes</i></a> a constraint <span class='math'><span class='mathalpha'>Q</span></span>
if and only if,
for every disjunctive clause <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>
in the disjunctive normal form<a class='footnotenum' href='#footnote-130' id='footnoteref-130'>130</a>
of <span class='math'><span class='mathalpha'>P</span></span>, <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> subsumes every conjunctive clause <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.446em;">Q</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span>
in the conjunctive normal form<a class='footnotenum' href='#footnote-131' id='footnoteref-131'>131</a>
of <span class='math'><span class='mathalpha'>Q</span></span>, where
<ul class='itemize'><li id='constr.order-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-1.1'>(1.1)</a></div>a disjunctive clause <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> subsumes a conjunctive clause <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.446em;">Q</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span> if and only
if there exists an atomic constraint <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">a</span></span></span></span></span></span></span></span></span> in <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> for which there exists
an atomic constraint <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.446em;">Q</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">b</span></span></span></span></span></span></span></span></span> in <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.446em;">Q</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span></span></span></span></span></span> such that <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.109em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.109em;">P</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">a</span></span></span></span></span></span></span></span></span> subsumes <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.446em;">Q</span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.219em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.519em;">j</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">b</span></span></span></span></span></span></span></span></span>, and</li><li id='constr.order-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-1.2'>(1.2)</a></div>an atomic constraint <span class='math'><span class='mathalpha'>A</span></span> subsumes another atomic constraint
<span class='math'><span class='mathalpha'>B</span></span> if and only if <span class='math'><span class='mathalpha'>A</span></span> and <span class='math'><span class='mathalpha'>B</span></span> are identical using the
rules described in <a href='#constr.atomic'>[temp.constr.atomic]</a><a class='hidden_link' href='#constr.order-1.sentence-1'>.</a></li></ul></div> <div id='constr.order-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#constr.order-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='constr.order-1.sentence-2' class='sentence'>Let <span class='math'><span class='mathalpha'>A</span></span> and <span class='math'><span class='mathalpha'>B</span></span> be <a href='#def:atomic_constraint'>atomic constraints</a><a class='hidden_link' href='#constr.order-1.sentence-2'>.</a></div> <div id='constr.order-1.sentence-3' class='sentence'>The constraint <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span></span></span> subsumes <span class='math'><span class='mathalpha'>A</span></span>, but <span class='math'><span class='mathalpha'>A</span></span> does not subsume <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span></span></span><a class='hidden_link' href='#constr.order-1.sentence-3'>.</a></div> <div id='constr.order-1.sentence-4' class='sentence'>The constraint <span class='math'><span class='mathalpha'>A</span></span> subsumes <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∨</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span></span></span>, but <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∨</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span></span></span></span> does not subsume <span class='math'><span class='mathalpha'>A</span></span><a class='hidden_link' href='#constr.order-1.sentence-4'>.</a></div> <div id='constr.order-1.sentence-5' class='sentence'>Also note that every constraint subsumes itself<a class='hidden_link' href='#constr.order-1.sentence-5'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='constr.order-2'><div class='marginalizedparent'><a class='marginalized' href='#constr.order-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L1988'>#</a></div><div id='constr.order-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#constr.order-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='constr.order-2.sentence-1' class='sentence'>The subsumption relation defines a partial ordering on constraints<a class='hidden_link' href='#constr.order-2.sentence-1'>.</a></div> <div id='constr.order-2.sentence-2' class='sentence'>This partial ordering is used to determine
<ul class='itemize'><li id='constr.order-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-2.1'>(2.1)</a></div>the best viable candidate of non-template functions (<a href='over.match.best'>[over.match.best]</a>),</li><li id='constr.order-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-2.2'>(2.2)</a></div>the address of a non-template function (<a href='over.over'>[over.over]</a>),</li><li id='constr.order-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-2.3'>(2.3)</a></div>the matching of <a href='#arg.template'>template template arguments</a>,</li><li id='constr.order-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-2.4'>(2.4)</a></div>the <a href='#class.order'>partial ordering of class template specializations</a>, and</li><li id='constr.order-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-2.5'>(2.5)</a></div>the <a href='#func.order'>partial ordering of function templates</a><a class='hidden_link' href='#constr.order-2.sentence-2'>.</a></li></ul></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='constr.order-3'><div class='marginalizedparent'><a class='marginalized' href='#constr.order-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2004'>#</a></div><div id='constr.order-3.sentence-1' class='sentence'>A declaration <span class='texttt'>D1</span> is
<a class='hidden_link' href='#def:at_least_as_constrained' id='def:at_least_as_constrained'><i >at least as constrained</i></a> as
a declaration <span class='texttt'>D2</span> if
<ul class='itemize'><li id='constr.order-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-3.1'>(3.1)</a></div><span class='texttt'>D1</span> and <span class='texttt'>D2</span> are both constrained declarations and
<span class='texttt'>D1</span>'s associated constraints subsume those of <span class='texttt'>D2</span>; or</li><li id='constr.order-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#constr.order-3.2'>(3.2)</a></div><span class='texttt'>D2</span> has no associated constraints.</li></ul></div></div><div class='para' id='constr.order-4'><div class='marginalizedparent'><a class='marginalized' href='#constr.order-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2015'>#</a></div><div id='constr.order-4.sentence-1' class='sentence'>A declaration <span class='texttt'>D1</span> is <a class='hidden_link' href='#def:more_constrained' id='def:more_constrained'><i >more constrained</i></a>
than another declaration <span class='texttt'>D2</span> when <span class='texttt'>D1</span> is at least as
constrained as <span class='texttt'>D2</span>, and <span class='texttt'>D2</span> is not at least as
constrained as <span class='texttt'>D1</span><a class='hidden_link' href='#constr.order-4.sentence-1'>.</a></div> <div id='constr.order-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#constr.order-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C1 <span class='operator'>=</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='operator'>-</span><span class='operator'>-</span>t; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C2 <span class='operator'>=</span> C1<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='operator'>*</span>t; <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C1 T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;       <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C2 T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;       <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>; <span class='comment'>// #3</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C1 T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;       <span class='comment'>// #4</span>

f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                           <span class='comment'>// selects #1</span>
f<span class='parenthesis'>(</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                     <span class='comment'>// selects #2</span>
g<span class='parenthesis'>(</span><span class='literal'>true</span><span class='parenthesis'>)</span>;                        <span class='comment'>// selects #3 because <span class='tcode_in_codeblock'>C1&lt;bool&gt;</span> is not satisfied</span>
g<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                           <span class='comment'>// selects #4</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-130'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-130'>130)</a></div><div id='footnote-130.sentence-1' class='sentence'>A constraint is in disjunctive normal form when it is a disjunction of
clauses where each clause is a conjunction of atomic constraints<a class='hidden_link' href='#footnote-130.sentence-1'>.</a></div> <div id='footnote-130.example-2' class='example'>[&nbsp;<a class='example_link' href='#footnote-130.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='footnote-130.sentence-2' class='sentence'>For atomic constraints <span class='math'><span class='mathalpha'>A</span></span>, <span class='math'><span class='mathalpha'>B</span></span>, and <span class='math'><span class='mathalpha'>C</span></span>, the disjunctive normal form
of the constraint
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∨</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span>
is
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∨</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#footnote-130.sentence-2'>.</a></div> <div id='footnote-130.sentence-3' class='sentence'>Its disjunctive clauses are <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#footnote-130.sentence-3'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <a href='#footnoteref-130'>⮥</a></div><div class='footnote' id='footnote-131'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-131'>131)</a></div><div id='footnote-131.sentence-1' class='sentence'>A constraint is in conjunctive normal form when it is a conjunction
of clauses where each clause is a disjunction of atomic constraints<a class='hidden_link' href='#footnote-131.sentence-1'>.</a></div> <div id='footnote-131.example-3' class='example'>[&nbsp;<a class='example_link' href='#footnote-131.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='footnote-131.sentence-2' class='sentence'>For atomic constraints <span class='math'><span class='mathalpha'>A</span></span>, <span class='math'><span class='mathalpha'>B</span></span>, and <span class='math'><span class='mathalpha'>C</span></span>, the constraint
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em;">A</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∧</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∨</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span> is in conjunctive normal form<a class='hidden_link' href='#footnote-131.sentence-2'>.</a></div> <div id='footnote-131.sentence-3' class='sentence'>Its conjunctive clauses are <span class='math'><span class='mathalpha'>A</span></span> and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">(</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">B</span></span><span class="mjx-mo MJXc-space2"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.372em;">∨</span></span><span class="mjx-texatom MJXc-space2"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.519em; padding-bottom: 0.298em; padding-right: 0.045em;">C</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.446em; padding-bottom: 0.593em;">)</span></span></span></span></span><a class='hidden_link' href='#footnote-131.sentence-3'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <a href='#footnoteref-131'>⮥</a></div></div></div><div id='type' class='section'><h2 ><a class='secnum' href='#type' style='min-width:88pt'>13.6</a> Type equivalence <a class='abbr_ref' href='temp.type'>[temp.type]</a></h2><div class='para' id='type-1'><div class='marginalizedparent'><a class='marginalized' href='#type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2039'>#</a></div><div id='type-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':equivalence,template_type'></a></span>Two <a class='grammarterm' href='#nt:template-id'>template-id</a><span class='textit'>s</span> are the same if
<ul class='itemize'><li id='type-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-1.1'>(1.1)</a></div>their <a class='grammarterm' href='#nt:template-name'>template-name</a><span class='textit'>s</span>,
<a class='grammarterm' href='over.oper#nt:operator-function-id'>operator-function-id</a><span class='textit'>s</span>, or
<a class='grammarterm' href='over.literal#nt:literal-operator-id'>literal-operator-id</a><span class='textit'>s</span>
refer to the same template, and</li><li id='type-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-1.2'>(1.2)</a></div>their corresponding type <a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
are the same type, and</li><li id='type-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-1.3'>(1.3)</a></div>their corresponding non-type <a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
are template-argument-equivalent (see below)
after conversion to the type of the <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>, and</li><li id='type-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-1.4'>(1.4)</a></div>their corresponding template <a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
refer to the same template<a class='hidden_link' href='#type-1.sentence-1'>.</a></li></ul></div> <div id='type-1.sentence-2' class='sentence'>
Two <a class='grammarterm' href='#nt:template-id'>template-id</a><span class='textit'>s</span> that are the same
refer to the same class, function, or variable<a class='hidden_link' href='#type-1.sentence-2'>.</a></div></div><div class='para' id='type-2'><div class='marginalizedparent'><a class='marginalized' href='#type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2065'>#</a></div><div id='type-2.sentence-1' class='sentence'>Two values are <a class='hidden_link' href='#def:template-argument-equivalent' id='def:template-argument-equivalent'><i >template-argument-equivalent</i></a> if
they are of the same type and
<ul class='itemize'><li id='type-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-2.1'>(2.1)</a></div>they are of integral type and their values are the same, or</li><li id='type-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-2.2'>(2.2)</a></div>they are of floating-point type and their values are identical, or</li><li id='type-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-2.3'>(2.3)</a></div>they are of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>nullptr_&shy;t</span>, or</li><li id='type-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-2.4'>(2.4)</a></div>they are of enumeration type and their values are the same,<a class='footnotenum' href='#footnote-132' id='footnoteref-132'>132</a> or</li><li id='type-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-2.5'>(2.5)</a></div>they are of pointer type and they have the same pointer value, or</li><li id='type-2.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-2.6'>(2.6)</a></div>they are of pointer-to-member type and they refer to the same class member
or are both the null member pointer value, or</li><li id='type-2.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-2.7'>(2.7)</a></div>they are of reference type and they refer to the same object or function, or</li><li id='type-2.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-2.8'>(2.8)</a></div>they are of array type and their corresponding elements are template-argument-equivalent,<a class='footnotenum' href='#footnote-133' id='footnoteref-133'>133</a> or</li><li id='type-2.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-2.9'>(2.9)</a></div>they are of union type and either
they both have no active member or
they have the same active member and their active members are template-argument-equivalent, or</li><li id='type-2.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#type-2.10'>(2.10)</a></div>they are of class type and
their corresponding direct subobjects and reference members are template-argument-equivalent<a class='hidden_link' href='#type-2.sentence-1'>.</a></li></ul></div></div><div class='para' id='type-3'><div class='marginalizedparent'><a class='marginalized' href='#type-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2106'>#</a></div><div id='type-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#type-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='type-3.sentence-1' class='sentence'><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> E, <span class='keyword'>int</span> size<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> buffer <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
buffer<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='literal'>2</span><span class='operator'>*</span><span class='literal'>512</span><span class='anglebracket'>&gt;</span> x;
buffer<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='literal'>1024</span><span class='anglebracket'>&gt;</span> y;
</pre>
declares
<span class='texttt'>x</span>
and
<span class='texttt'>y</span>
to be of the same type, and
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>void</span><span class='parenthesis'>(</span><span class='operator'>*</span>err_fct<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> list <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='operator'>&amp;</span>error_handler1<span class='anglebracket'>&gt;</span> x1;
list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='operator'>&amp;</span>error_handler2<span class='anglebracket'>&gt;</span> x2;
list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='operator'>&amp;</span>error_handler2<span class='anglebracket'>&gt;</span> x3;
list<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='operator'>&amp;</span>error_handler2<span class='anglebracket'>&gt;</span> x4;
</pre>
declares
<span class='texttt'>x2</span>
and
<span class='texttt'>x3</span>
to be of the same type<a class='hidden_link' href='#type-3.sentence-1'>.</a></div> <div id='type-3.sentence-2' class='sentence'>Their type differs from the types of
<span class='texttt'>x1</span>
and
<span class='texttt'>x4</span><a class='hidden_link' href='#type-3.sentence-2'>.</a></div><div id='type-3.sentence-3' class='sentence'><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> Z <span class='operator'>=</span> Y<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
X<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='anglebracket'>&gt;</span> y;
X<span class='anglebracket'>&lt;</span>Z<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='anglebracket'>&gt;</span> z;
</pre>
declares <span class='texttt'>y</span> and <span class='texttt'>z</span> to be of the same type<a class='hidden_link' href='#type-3.sentence-3'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='type-4'><div class='marginalizedparent'><a class='marginalized' href='#type-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2145'>#</a></div><div id='type-4.sentence-1' class='sentence'>If an expression <span class='math'><span class='mathalpha'>e</span></span> is <a href='#dep.expr'>type-dependent</a>,
<span class='texttt'><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='math'><span class='mathalpha'>e</span></span><span class='parenthesis'>)</span></span>
denotes a unique dependent type<a class='hidden_link' href='#type-4.sentence-1'>.</a></div> <div id='type-4.sentence-2' class='sentence'>Two such <a class='grammarterm' href='dcl.type.decltype#nt:decltype-specifier'>decltype-specifier</a><span class='textit'>s</span>
refer to the same type only if their <a class='grammarterm' href='expr.comma#nt:expression'>expression</a><span class='textit'>s</span> are
equivalent (<a href='#over.link'>[temp.over.link]</a>)<a class='hidden_link' href='#type-4.sentence-2'>.</a></div> <div id='type-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#type-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='type-4.sentence-3' class='sentence'>However, such a type may be aliased,
e.g., by a <a class='grammarterm' href='dcl.typedef#nt:typedef-name'>typedef-name</a><a class='hidden_link' href='#type-4.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-132'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-132'>132)</a></div><div id='footnote-132.sentence-1' class='sentence'>The identity of enumerators is not preserved<a class='hidden_link' href='#footnote-132.sentence-1'>.</a></div> <a href='#footnoteref-132'>⮥</a></div><div class='footnote' id='footnote-133'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-133'>133)</a></div><div id='footnote-133.sentence-1' class='sentence'>An array as a <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> decays to a pointer<a class='hidden_link' href='#footnote-133.sentence-1'>.</a></div> <a href='#footnoteref-133'>⮥</a></div></div><div id='decls' class='section'><h2 ><a class='secnum' href='#decls' style='min-width:88pt'>13.7</a> Template declarations <a class='abbr_ref' href='temp.decls'>[temp.decls]</a></h2><div class='para' id='decls-1'><div class='marginalizedparent'><a class='marginalized' href='#decls-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2158'>#</a></div><div id='decls-1.sentence-1' class='sentence'>A
<a class='grammarterm' href='#nt:template-id'>template-id</a>,
that is, the
<a class='grammarterm' href='#nt:template-name'>template-name</a>
followed by a
<a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a>
shall not be specified in the declaration of a primary template declaration<a class='hidden_link' href='#decls-1.sentence-1'>.</a></div> <div id='decls-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#decls-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T1, T2, I<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;     <span class='comment'>// error</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='anglebracket'>&lt;</span>T1, I<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>T1 data<span class='squarebracket'>[</span>I<span class='squarebracket'>]</span><span class='parenthesis'>)</span>;         <span class='comment'>// error</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='decls-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#decls-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='decls-1.sentence-2' class='sentence'>However, this syntax is allowed in <a href='#class.spec'>class template partial specializations</a><a class='hidden_link' href='#decls-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='decls-2'><div class='marginalizedparent'><a class='marginalized' href='#decls-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2176'>#</a></div><div id='decls-2.sentence-1' class='sentence'>For purposes of name lookup and instantiation,
default arguments,
<a class='grammarterm' href='#nt:type-constraint'>type-constraint</a><span class='textit'>s</span>,
<a class='grammarterm' href='#nt:requires-clause'>requires-clause</a><span class='textit'>s</span>,
and
<a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a><span class='textit'>s</span>
of function templates
and
of member functions of class templates
are considered definitions;
each
default argument,
<a class='grammarterm' href='#nt:type-constraint'>type-constraint</a>,
<a class='grammarterm' href='#nt:requires-clause'>requires-clause</a>,
or
<a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a>
is a separate definition
which is unrelated
to the templated function definition or
to any other
default arguments
<a class='grammarterm' href='#nt:type-constraint'>type-constraint</a><span class='textit'>s</span>,
<a class='grammarterm' href='#nt:requires-clause'>requires-clause</a><span class='textit'>s</span>,
or
<a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a><span class='textit'>s</span><a class='hidden_link' href='#decls-2.sentence-1'>.</a></div> <div id='decls-2.sentence-2' class='sentence'>For the purpose of instantiation, the substatements of a
<a href='stmt.if#def:constexpr_if'>constexpr if</a> statement are considered definitions<a class='hidden_link' href='#decls-2.sentence-2'>.</a></div></div><div class='para' id='decls-3'><div class='marginalizedparent'><a class='marginalized' href='#decls-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2205'>#</a></div><div id='decls-3.sentence-1' class='sentence'>Because an <a class='grammarterm' href='dcl.pre#nt:alias-declaration'>alias-declaration</a> cannot declare a
<a class='grammarterm' href='#nt:template-id'>template-id</a>, it is not possible to partially or
explicitly specialize an alias template<a class='hidden_link' href='#decls-3.sentence-1'>.</a></div></div><div id='class' class='section'><h3 ><a class='secnum' href='#class' style='min-width:103pt'>13.7.1</a> Class templates <a class='abbr_ref' href='temp.class'>[temp.class]</a></h3><div class='para' id='class-1'><div class='marginalizedparent'><a class='marginalized' href='#class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2212'>#</a></div><div id='class-1.sentence-1' class='sentence'>A
<a class='hidden_link' href='#def:template,class' id='def:template,class'><i >class template</i></a>
defines the layout and operations
for an unbounded set of related types<a class='hidden_link' href='#class-1.sentence-1'>.</a></div></div><div class='para' id='class-2'><div class='marginalizedparent'><a class='marginalized' href='#class-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2218'>#</a></div><div id='class-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#class-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class-2.sentence-1' class='sentence'>A single class template
<span class='texttt'>List</span>
might provide an unbounded set of class definitions:
one class <span class='texttt'>List<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> for every type <span class='texttt'>T</span>,
each describing a linked list of elements of type <span class='texttt'>T</span><a class='hidden_link' href='#class-2.sentence-1'>.</a></div> <div id='class-2.sentence-2' class='sentence'>Similarly, a class template <span class='texttt'>Array</span> describing a contiguous,
dynamic array might be defined like this:
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span>
  T<span class='operator'>*</span> v;
  <span class='keyword'>int</span> sz;
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>explicit</span> Array<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  T<span class='operator'>&amp;</span> elem<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> v<span class='squarebracket'>[</span>i<span class='squarebracket'>]</span>; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</pre></div> <div id='class-2.sentence-3' class='sentence'>
The prefix <span class='texttt'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span></span>
specifies that a template is being declared and that a
<a class='grammarterm' href='dcl.type.simple#nt:type-name'>type-name</a>
<span class='texttt'>T</span>
may be used in the declaration<a class='hidden_link' href='#class-2.sentence-3'>.</a></div> <div id='class-2.sentence-4' class='sentence'>In other words,
<span class='texttt'>Array</span>
is a parameterized type with
<span class='texttt'>T</span>
as its parameter<a class='hidden_link' href='#class-2.sentence-4'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='class-3'><div class='marginalizedparent'><a class='marginalized' href='#class-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2249'>#</a></div><div id='class-3.sentence-1' class='sentence'>When a member function, a member class, a member enumeration, a static data member or
a member template of a class
template is defined outside of the class template definition,
the member definition is defined as a template definition in which the
<a class='grammarterm' href='#nt:template-head'>template-head</a> is equivalent to that
of the class template (<a href='#over.link'>[temp.over.link]</a>)<a class='hidden_link' href='#class-3.sentence-1'>.</a></div> <div id='class-3.sentence-2' class='sentence'>The names of the template parameters used in the definition of the member may
be different from the template parameter names used in the class
template definition<a class='hidden_link' href='#class-3.sentence-2'>.</a></div> <div id='class-3.sentence-3' class='sentence'>The template argument list following the class template name in the member
definition shall name the parameters in the same order as the one used in
the template parameter list of the member<a class='hidden_link' href='#class-3.sentence-3'>.</a></div> <div id='class-3.sentence-4' class='sentence'>Each template
parameter pack shall be expanded with an ellipsis in the template
argument list<a class='hidden_link' href='#class-3.sentence-4'>.</a></div> <div id='class-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#class-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f1<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> f2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2, <span class='keyword'>class</span> T1<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>T2,T1<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f1<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>    <span class='comment'>// OK</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2, <span class='keyword'>class</span> T1<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>T1,T2<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f2<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>    <span class='comment'>// error</span>
</pre><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f3<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> f4<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> B<span class='anglebracket'>&lt;</span>Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>f3<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>   <span class='comment'>// OK</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> B<span class='anglebracket'>&lt;</span>Types<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f4<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>       <span class='comment'>// error</span>
</pre><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='literal'>true</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> D <span class='operator'>=</span> <span class='literal'>true</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>D U<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Inner;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C A<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> S<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>        <span class='comment'>// OK: <span class='grammarterm'>template-head</span><span class='textit'>s</span> match</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> <span class='comment'>// error: no matching declaration for <span class='tcode_in_codeblock'>S&lt;T&gt;</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>      <span class='comment'>// ill-formed, no diagnostic required: <span class='grammarterm'>template-head</span><span class='textit'>s</span> are</span>
<span class='keyword'>void</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>                      <span class='comment'>// functionally equivalent but not equivalent</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C X<span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>D Y<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> S<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span><span class='operator'>::</span>Inner <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                 <span class='comment'>// OK</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='class-4'><div class='marginalizedparent'><a class='marginalized' href='#class-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2307'>#</a></div><div id='class-4.sentence-1' class='sentence'>In a redeclaration, partial
specialization,
explicit specialization or explicit
instantiation of a class template, the
<a class='grammarterm' href='class.pre#nt:class-key'>class-key</a>
shall agree in kind with the original class template declaration (<a href='dcl.type.elab'>[dcl.type.elab]</a>)<a class='hidden_link' href='#class-4.sentence-1'>.</a></div></div><div id='mem.func' class='section'><h4 ><a class='secnum' href='#mem.func' style='min-width:118pt'>13.7.1.1</a> Member functions of class templates <a class='abbr_ref' href='temp.mem.func'>[temp.mem.func]</a></h4><div class='para' id='mem.func-1'><div class='marginalizedparent'><a class='marginalized' href='#mem.func-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2317'>#</a></div><div id='mem.func-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':template,member_function'></a></span>A member function
of a class template
may be defined outside of the class
template definition in which it is declared<a class='hidden_link' href='#mem.func-1.sentence-1'>.</a></div> <div id='mem.func-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#mem.func-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span>
  T<span class='operator'>*</span> v;
  <span class='keyword'>int</span> sz;
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>explicit</span> Array<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  T<span class='operator'>&amp;</span> <span class='keyword'>operator</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  T<span class='operator'>&amp;</span> elem<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> v<span class='squarebracket'>[</span>i<span class='squarebracket'>]</span>; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</pre><div id='mem.func-1.sentence-2' class='sentence'>declares three member functions of a class template<a class='hidden_link' href='#mem.func-1.sentence-2'>.</a></div> <div id='mem.func-1.sentence-3' class='sentence'>The subscript function might be defined like this:</div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T<span class='operator'>&amp;</span> Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span><span class='keyword'>operator</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>if</span> <span class='parenthesis'>(</span>i<span class='anglebracket'>&lt;</span><span class='literal'>0</span> <span class='operator'>|</span><span class='operator'>|</span> sz<span class='anglebracket'>&lt;</span><span class='operator'>=</span>i<span class='parenthesis'>)</span> error<span class='parenthesis'>(</span><span class='literal'>"Array: range error"</span><span class='parenthesis'>)</span>;
  <span class='keyword'>return</span> v<span class='squarebracket'>[</span>i<span class='squarebracket'>]</span>;
<span class='curlybracket'>}</span>
</pre><div id='mem.func-1.sentence-4' class='sentence'>A constrained member function can be defined out of line:
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typename</span> T<span class='operator'>::</span>type;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>      <span class='comment'>// OK</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>                    <span class='comment'>// error: no matching function in <span class='tcode_in_codeblock'>S&lt;T&gt;</span></span>
</pre></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='mem.func-2'><div class='marginalizedparent'><a class='marginalized' href='#mem.func-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2363'>#</a></div><div id='mem.func-2.sentence-1' class='sentence'>The
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
for a member function of a class template are determined by the
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
of the type of the object for which the member function is called<a class='hidden_link' href='#mem.func-2.sentence-1'>.</a></div> <div id='mem.func-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#mem.func-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='mem.func-2.sentence-2' class='sentence'>The
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
for
<span class='texttt'>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>
will be determined by the
<span class='texttt'>Array</span>
to which the subscripting operation is applied<a class='hidden_link' href='#mem.func-2.sentence-2'>.</a></div><pre class='codeblock'>
Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> v1<span class='parenthesis'>(</span><span class='literal'>20</span><span class='parenthesis'>)</span>;
Array<span class='anglebracket'>&lt;</span>dcomplex<span class='anglebracket'>&gt;</span> v2<span class='parenthesis'>(</span><span class='literal'>30</span><span class='parenthesis'>)</span>;

v1<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='literal'>7</span>;                              <span class='comment'>// <span class='tcode_in_codeblock'>Array&lt;int&gt;&#x200b;::&#x200b;operator[]</span></span>
v2<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> dcomplex<span class='parenthesis'>(</span><span class='literal'>7</span>,<span class='literal'>8</span><span class='parenthesis'>)</span>;                  <span class='comment'>// <span class='tcode_in_codeblock'>Array&lt;dcomplex&gt;&#x200b;::&#x200b;operator[]</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div id='deduct.guide' class='section'><h4 ><a class='secnum' href='#deduct.guide' style='min-width:118pt'>13.7.1.2</a> Deduction guides <a class='abbr_ref' href='temp.deduct.guide'>[temp.deduct.guide]</a></h4><span class='indexparent'><a class='index' id=':deduction,class_template_argument'></a></span><div class='para' id='deduct.guide-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.guide-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2390'>#</a></div><div id='deduct.guide-1.sentence-1' class='sentence'>Deduction guides are used
when a <a class='grammarterm' href='#nt:template-name'>template-name</a> appears
as a type specifier
for a deduced class type (<a href='dcl.type.class.deduct'>[dcl.type.class.deduct]</a>)<a class='hidden_link' href='#deduct.guide-1.sentence-1'>.</a></div> <div id='deduct.guide-1.sentence-2' class='sentence'>Deduction guides are not found by name lookup<a class='hidden_link' href='#deduct.guide-1.sentence-2'>.</a></div> <div id='deduct.guide-1.sentence-3' class='sentence'>Instead, when performing class template argument deduction (<a href='over.match.class.deduct'>[over.match.class.deduct]</a>),
any deduction guides declared for the class template are considered<a class='hidden_link' href='#deduct.guide-1.sentence-3'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:deduction-guide' id='nt:deduction-guide'>deduction-guide:</a>
&#9;<a class='grammarterm' href='dcl.fct.spec#nt:explicit-specifier'>explicit-specifier</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='#nt:template-name'>template-name</a> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a> <span class='terminal'><span class='parenthesis'>)</span></span> <span class='terminal'><span class='operator'>-</span><span class='anglebracket'>&gt;</span></span> <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a> <span class='terminal'>;</span>
</pre></div><div class='para' id='deduct.guide-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.guide-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2404'>#</a></div><div id='deduct.guide-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.guide-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> D <span class='operator'>=</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  T data;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
S<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> S<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> U<span class='operator'>::</span>type<span class='anglebracket'>&gt;</span>;

<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> type <span class='operator'>=</span> <span class='keyword'>short</span>;
  <span class='keyword'>operator</span> type<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
S x<span class='curlybracket'>{</span>A<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='curlybracket'>}</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>x</span> is of type <span class='tcode_in_codeblock'>S&lt;short, int&gt;</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.guide-3'><div class='marginalizedparent'><a class='marginalized' href='#deduct.guide-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2422'>#</a></div><div id='deduct.guide-3.sentence-1' class='sentence'>The same restrictions apply
to the <a class='grammarterm' href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a>
of a deduction guide
as in a function declaration (<a href='dcl.fct'>[dcl.fct]</a>)<a class='hidden_link' href='#deduct.guide-3.sentence-1'>.</a></div> <div id='deduct.guide-3.sentence-2' class='sentence'>The <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>
shall name a class template specialization<a class='hidden_link' href='#deduct.guide-3.sentence-2'>.</a></div> <div id='deduct.guide-3.sentence-3' class='sentence'>The <a class='grammarterm' href='#nt:template-name'>template-name</a>
shall be the same <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a>
as the <a class='grammarterm' href='#nt:template-name'>template-name</a>
of the <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a><a class='hidden_link' href='#deduct.guide-3.sentence-3'>.</a></div> <div id='deduct.guide-3.sentence-4' class='sentence'>A <a class='grammarterm' href='#nt:deduction-guide'>deduction-guide</a>
shall be declared
in the same scope
as the corresponding class template
and, for a member class template, with the same access<a class='hidden_link' href='#deduct.guide-3.sentence-4'>.</a></div> <div id='deduct.guide-3.sentence-5' class='sentence'>Two deduction guide declarations
in the same translation unit
for the same class template
shall not have equivalent <a class='grammarterm' href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a><span class='textit'>s</span><a class='hidden_link' href='#deduct.guide-3.sentence-5'>.</a></div></div></div><div id='mem.class' class='section'><h4 ><a class='secnum' href='#mem.class' style='min-width:118pt'>13.7.1.3</a> Member classes of class templates <a class='abbr_ref' href='temp.mem.class'>[temp.mem.class]</a></h4><div class='para' id='mem.class-1'><div class='marginalizedparent'><a class='marginalized' href='#mem.class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2445'>#</a></div><div id='mem.class-1.sentence-1' class='sentence'>A member class of a class template may be defined outside the class template
definition in which it is declared<a class='hidden_link' href='#mem.class-1.sentence-1'>.</a></div> <div id='mem.class-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#mem.class-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem.class-1.sentence-2' class='sentence'>The member class must be defined before its first use that requires
an instantiation (<a href='#inst'>[temp.inst]</a>)<a class='hidden_link' href='#mem.class-1.sentence-2'>.</a></div> <div id='mem.class-1.sentence-3' class='sentence'>For example,
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> B;
<span class='curlybracket'>}</span>;
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='operator'>*</span> b1;                          <span class='comment'>// OK: requires <span class='tcode_in_codeblock'>A</span> to be defined but not <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B  b2;                          <span class='comment'>// OK: requires <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> to be defined</span>
</pre></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div id='static' class='section'><h4 ><a class='secnum' href='#static' style='min-width:118pt'>13.7.1.4</a> Static data members of class templates <a class='abbr_ref' href='temp.static'>[temp.static]</a></h4><div class='para' id='static-1'><div class='marginalizedparent'><a class='marginalized' href='#static-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2464'>#</a></div><div id='static-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':member,template_and_static'></a></span>A definition for a static data member or static data member template may be
provided in a namespace scope enclosing the definition of the static member's
class template<a class='hidden_link' href='#static-1.sentence-1'>.</a></div> <div id='static-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#static-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> T s;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T X<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>s <span class='operator'>=</span> <span class='literal'>0</span>;

<span class='keyword'>struct</span> limits <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
    <span class='keyword'>static</span> <span class='keyword'>const</span> T min;                 <span class='comment'>// declaration</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>const</span> T limits<span class='operator'>::</span>min <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;            <span class='comment'>// definition</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='static-2'><div class='marginalizedparent'><a class='marginalized' href='#static-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2486'>#</a></div><div id='static-2.sentence-1' class='sentence'>An explicit specialization of a static data member declared as an array of unknown
bound can have a different bound from its definition, if any<a class='hidden_link' href='#static-2.sentence-1'>.</a></div> <div id='static-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#static-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>int</span> i<span class='squarebracket'>[</span><span class='squarebracket'>]</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>i<span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span>;      <span class='comment'>// 4 elements</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>i<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span> <span class='curlybracket'>}</span>;    <span class='comment'>// OK: 1 element</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div id='mem.enum' class='section'><h4 ><a class='secnum' href='#mem.enum' style='min-width:118pt'>13.7.1.5</a> Enumeration members of class templates <a class='abbr_ref' href='temp.mem.enum'>[temp.mem.enum]</a></h4><div class='para' id='mem.enum-1'><div class='marginalizedparent'><a class='marginalized' href='#mem.enum-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2501'>#</a></div><div id='mem.enum-1.sentence-1' class='sentence'>An enumeration member of a class template may be defined outside the class
template definition<a class='hidden_link' href='#mem.enum-1.sentence-1'>.</a></div> <div id='mem.enum-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#mem.enum-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>enum</span> E <span class='operator'>:</span> T;
<span class='curlybracket'>}</span>;
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> a;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>enum</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>E <span class='operator'>:</span> T <span class='curlybracket'>{</span> e1, e2 <span class='curlybracket'>}</span>;
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>E e <span class='operator'>=</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>e1;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div></div><div id='mem' class='section'><h3 ><a class='secnum' href='#mem' style='min-width:103pt'>13.7.2</a> Member templates <a class='abbr_ref' href='temp.mem'>[temp.mem]</a></h3><div class='para' id='mem-1'><div class='marginalizedparent'><a class='marginalized' href='#mem-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2517'>#</a></div><div id='mem-1.sentence-1' class='sentence'>A template can be declared within a class or class template; such a template
is called a member template<a class='hidden_link' href='#mem-1.sentence-1'>.</a></div> <div id='mem-1.sentence-2' class='sentence'>A member template can be defined within or outside its class definition or
class template definition<a class='hidden_link' href='#mem-1.sentence-2'>.</a></div> <div id='mem-1.sentence-3' class='sentence'>A member template of a class template that is defined outside of its class
template definition shall be specified with
a <a class='grammarterm' href='#nt:template-head'>template-head</a> equivalent to that
of the class template followed by
a <a class='grammarterm' href='#nt:template-head'>template-head</a> equivalent to that
of the member template (<a href='#over.link'>[temp.over.link]</a>)<a class='hidden_link' href='#mem-1.sentence-3'>.</a></div> <div id='mem-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#mem-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> string <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> compare<span class='parenthesis'>(</span><span class='keyword'>const</span> T2<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> string<span class='parenthesis'>(</span><span class='keyword'>const</span> string<span class='anglebracket'>&lt;</span>T2<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> s<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> string<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>compare<span class='parenthesis'>(</span><span class='keyword'>const</span> T2<span class='operator'>&amp;</span> s<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='mem-1.example-2' class='example'>[&nbsp;<a class='example_link' href='#mem-1.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C1 <span class='operator'>=</span> <span class='literal'>true</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C2 <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span><span class='operator'>=</span> <span class='literal'>4</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C1 T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C2 U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C2 U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C1 T<span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C2 U<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>             <span class='comment'>// OK</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C1 T<span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>g<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>             <span class='comment'>// error: no matching function in <span class='tcode_in_codeblock'>S&lt;T&gt;</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='mem-2'><div class='marginalizedparent'><a class='marginalized' href='#mem-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2556'>#</a></div><div id='mem-2.sentence-1' class='sentence'>A local class of non-closure type shall not have member templates<a class='hidden_link' href='#mem-2.sentence-1'>.</a></div> <div id='mem-2.sentence-2' class='sentence'><a href='class.access'>Access control rules</a>
apply to member template names<a class='hidden_link' href='#mem-2.sentence-2'>.</a></div> <div id='mem-2.sentence-3' class='sentence'>A destructor shall not be a member
template<a class='hidden_link' href='#mem-2.sentence-3'>.</a></div> <div id='mem-2.sentence-4' class='sentence'>A non-template member function (<a href='dcl.fct'>[dcl.fct]</a>) with a given name
and type and a member function template of the same name, which could be
used to generate a specialization of the same type, can both be
declared in a class<a class='hidden_link' href='#mem-2.sentence-4'>.</a></div> <div id='mem-2.sentence-5' class='sentence'>When both exist, a use of that name and type refers to the
non-template member unless an explicit template argument list is supplied<a class='hidden_link' href='#mem-2.sentence-5'>.</a></div> <div id='mem-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#mem-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T2<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>                 <span class='comment'>// non-template member function</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>   <span class='comment'>// member function template specialization</span>

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> ac;
  ac<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                                          <span class='comment'>// non-template</span>
  ac<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='literal'>'c'</span><span class='parenthesis'>)</span>;                                        <span class='comment'>// template</span>
  ac<span class='operator'>.</span>f<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                                        <span class='comment'>// template</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='mem-3'><div class='marginalizedparent'><a class='marginalized' href='#mem-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2587'>#</a></div><div id='mem-3.sentence-1' class='sentence'>A member function template shall not be virtual<a class='hidden_link' href='#mem-3.sentence-1'>.</a></div> <div id='mem-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#mem-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> AA <span class='curlybracket'>{</span>
  <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> C<span class='anglebracket'>&gt;</span> <span class='keyword'>virtual</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>C<span class='parenthesis'>)</span>;             <span class='comment'>// error</span>
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                                 <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='mem-4'><div class='marginalizedparent'><a class='marginalized' href='#mem-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2598'>#</a></div><div id='mem-4.sentence-1' class='sentence'>A specialization of
a member function template does not override a virtual function from a
base class<a class='hidden_link' href='#mem-4.sentence-1'>.</a></div> <div id='mem-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#mem-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>class</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>virtual</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> D <span class='operator'>:</span> <span class='keyword'>public</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>; <span class='comment'>// does not override <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f(int)</span></span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> f<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>     <span class='comment'>// overriding function that calls the template instantiation</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='mem-5'><div class='marginalizedparent'><a class='marginalized' href='#mem-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2615'>#</a></div><div id='mem-5.sentence-1' class='sentence'>A specialization of a
conversion function template
is referenced in
the same way as a non-template conversion function that converts to
the same type<a class='hidden_link' href='#mem-5.sentence-1'>.</a></div> <div id='mem-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#mem-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>operator</span> T<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> A<span class='operator'>::</span><span class='keyword'>operator</span> T<span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> A<span class='operator'>::</span><span class='keyword'>operator</span> <span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>        <span class='comment'>// specialization</span>
<span class='keyword'>template</span> A<span class='operator'>::</span><span class='keyword'>operator</span> <span class='keyword'>void</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                       <span class='comment'>// explicit instantiation</span>

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A a;
  <span class='keyword'>int</span><span class='operator'>*</span> ip;
  ip <span class='operator'>=</span> a<span class='operator'>.</span><span class='keyword'>operator</span> <span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;       <span class='comment'>// explicit call to template operator <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;operator int*()</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='mem-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#mem-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='mem-5.sentence-2' class='sentence'>There is no syntax to form a <a class='grammarterm' href='#nt:template-id'>template-id</a>
by providing an explicit template argument list (<a href='#arg.explicit'>[temp.arg.explicit]</a>)
for a conversion function template (<a href='class.conv.fct'>[class.conv.fct]</a>)<a class='hidden_link' href='#mem-5.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='mem-6'><div class='marginalizedparent'><a class='marginalized' href='#mem-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2643'>#</a></div><div id='mem-6.sentence-1' class='sentence'>A specialization of a
conversion function template
is not found by name
lookup<a class='hidden_link' href='#mem-6.sentence-1'>.</a></div> <div id='mem-6.sentence-2' class='sentence'>Instead, any
conversion function templates
visible in the
context of the use are considered<a class='hidden_link' href='#mem-6.sentence-2'>.</a></div> <div id='mem-6.sentence-3' class='sentence'>For each such operator, if argument
deduction succeeds (<a href='#deduct.conv'>[temp.deduct.conv]</a>), the resulting specialization is
used as if found by name lookup<a class='hidden_link' href='#mem-6.sentence-3'>.</a></div></div><div class='para' id='mem-7'><div class='marginalizedparent'><a class='marginalized' href='#mem-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2656'>#</a></div><div id='mem-7.sentence-1' class='sentence'>A <a class='grammarterm' href='namespace.udecl#nt:using-declaration'>using-declaration</a> in a derived class cannot refer to a specialization
of a
conversion function template
in a base class<a class='hidden_link' href='#mem-7.sentence-1'>.</a></div></div><div class='para' id='mem-8'><div class='marginalizedparent'><a class='marginalized' href='#mem-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2662'>#</a></div><div id='mem-8.sentence-1' class='sentence'><a href='over.ics.rank'>Overload resolution</a> and <a href='#func.order'>partial
ordering</a> are used to select the best conversion function
among multiple
specializations of conversion function templates
and/or non-template
conversion functions<a class='hidden_link' href='#mem-8.sentence-1'>.</a></div></div></div><div id='variadic' class='section'><h3 ><a class='secnum' href='#variadic' style='min-width:103pt'>13.7.3</a> Variadic templates <a class='abbr_ref' href='temp.variadic'>[temp.variadic]</a></h3><div class='para' id='variadic-1'><div class='marginalizedparent'><a class='marginalized' href='#variadic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2672'>#</a></div><div id='variadic-1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:template_parameter_pack' id='def:template_parameter_pack'><i >template parameter pack</i></a> is a template parameter
that accepts zero or more template arguments<a class='hidden_link' href='#variadic-1.sentence-1'>.</a></div> <div id='variadic-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#variadic-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Tuple <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

Tuple<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> t0;                     <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> contains no arguments</span>
Tuple<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> t1;                  <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> contains one argument: <span class='tcode_in_codeblock'>int</span></span>
Tuple<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>float</span><span class='anglebracket'>&gt;</span> t2;           <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> contains two arguments: <span class='tcode_in_codeblock'>int</span> and <span class='tcode_in_codeblock'>float</span></span>
Tuple<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span> error;                 <span class='comment'>// error: <span class='tcode_in_codeblock'>0</span> is not a type</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='variadic-2'><div class='marginalizedparent'><a class='marginalized' href='#variadic-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2686'>#</a></div><div id='variadic-2.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:function_parameter_pack' id='def:function_parameter_pack'><i >function parameter pack</i></a> is a function parameter
that accepts zero or more function arguments<a class='hidden_link' href='#variadic-2.sentence-1'>.</a></div> <div id='variadic-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#variadic-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;

f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                            <span class='comment'>// <span class='tcode_in_codeblock'>args</span> contains no arguments</span>
f<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                           <span class='comment'>// <span class='tcode_in_codeblock'>args</span> contains one argument: <span class='tcode_in_codeblock'>int</span></span>
f<span class='parenthesis'>(</span><span class='literal'>2</span>, <span class='literal'>1.0</span><span class='parenthesis'>)</span>;                      <span class='comment'>// <span class='tcode_in_codeblock'>args</span> contains two arguments: <span class='tcode_in_codeblock'>int</span> and <span class='tcode_in_codeblock'>double</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='variadic-3'><div class='marginalizedparent'><a class='marginalized' href='#variadic-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2699'>#</a></div><div id='variadic-3.sentence-1' class='sentence'>An <a class='hidden_link' href='#def:init-capture_pack' id='def:init-capture_pack'><i ><span class='grammarterm'>init-capture</span> pack</i></a>
is a lambda capture that introduces an <a class='grammarterm' href='expr.prim.lambda.capture#nt:init-capture'>init-capture</a>
for each of the elements in the pack expansion of its <a class='grammarterm' href='dcl.init#nt:initializer'>initializer</a><a class='hidden_link' href='#variadic-3.sentence-1'>.</a></div> <div id='variadic-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#variadic-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> foo<span class='parenthesis'>(</span>Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='squarebracket'>[</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>xs<span class='operator'>=</span>args<span class='squarebracket'>]</span><span class='curlybracket'>{</span>
        bar<span class='parenthesis'>(</span>xs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>xs</span> is an <span class='grammarterm'>init-capture</span> pack</span>
    <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>

foo<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                          <span class='comment'>// <span class='tcode_in_codeblock'>xs</span> contains zero <span class='grammarterm'>init-captures</span></span>
foo<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                         <span class='comment'>// <span class='tcode_in_codeblock'>xs</span> contains one <span class='grammarterm'>init-capture</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='variadic-4'><div class='marginalizedparent'><a class='marginalized' href='#variadic-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2717'>#</a></div><div id='variadic-4.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:pack' id='def:pack'><i >pack</i></a> is
a template parameter pack,
a function parameter pack,
or an <a class='grammarterm' href='expr.prim.lambda.capture#nt:init-capture'>init-capture</a> pack<a class='hidden_link' href='#variadic-4.sentence-1'>.</a></div> <div id='variadic-4.sentence-2' class='sentence'>The number of elements of a template parameter pack
or a function parameter pack
is the number of arguments provided for the parameter pack<a class='hidden_link' href='#variadic-4.sentence-2'>.</a></div> <div id='variadic-4.sentence-3' class='sentence'>The number of elements of an <a class='grammarterm' href='expr.prim.lambda.capture#nt:init-capture'>init-capture</a> pack
is the number of elements in the pack expansion of its <a class='grammarterm' href='dcl.init#nt:initializer'>initializer</a><a class='hidden_link' href='#variadic-4.sentence-3'>.</a></div></div><div class='para' id='variadic-5'><div class='marginalizedparent'><a class='marginalized' href='#variadic-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2728'>#</a></div><div id='variadic-5.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:pack_expansion' id='def:pack_expansion'><i >pack expansion</i></a>
consists of a <a class='hidden_link' href='#def:pack_expansion,pattern' id='def:pack_expansion,pattern'><i >pattern</i></a> and an ellipsis, the instantiation of which
produces zero or more instantiations of the pattern in a list (described below)<a class='hidden_link' href='#variadic-5.sentence-1'>.</a></div> <div id='variadic-5.sentence-2' class='sentence'>The form of the pattern
depends on the context in which the expansion occurs<a class='hidden_link' href='#variadic-5.sentence-2'>.</a></div> <div id='variadic-5.sentence-3' class='sentence'>Pack
expansions can occur in the following contexts:</div><ul class='itemize'><li id='variadic-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-5.1'>(5.1)</a></div><div id='variadic-5.1.sentence-1' class='sentence'>In a function parameter pack (<a href='dcl.fct'>[dcl.fct]</a>); the pattern is the
<a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a> without the ellipsis<a class='hidden_link' href='#variadic-5.1.sentence-1'>.</a></div></li><li id='variadic-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-5.2'>(5.2)</a></div><div id='variadic-5.2.sentence-1' class='sentence'>In a <a class='grammarterm' href='namespace.udecl#nt:using-declaration'>using-declaration</a>;
the pattern is a <a class='grammarterm' href='namespace.udecl#nt:using-declarator'>using-declarator</a><a class='hidden_link' href='#variadic-5.2.sentence-1'>.</a></div></li><li id='variadic-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-5.3'>(5.3)</a></div><div id='variadic-5.3.sentence-1' class='sentence'>In a template parameter pack that is a pack expansion (<a href='#param'>[temp.param]</a>):
<ul class='itemize'><li id='variadic-5.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#variadic-5.3.1'>(5.3.1)</a></div>if the template parameter pack is a <a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a>;
the pattern is the <a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a> without the ellipsis;</li><li id='variadic-5.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#variadic-5.3.2'>(5.3.2)</a></div>if the template parameter pack is a <a class='grammarterm' href='#nt:type-parameter'>type-parameter</a>;
the pattern is the corresponding <a class='grammarterm' href='#nt:type-parameter'>type-parameter</a>
without the ellipsis<a class='hidden_link' href='#variadic-5.3.sentence-1'>.</a></li></ul></div></li><li id='variadic-5.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-5.4'>(5.4)</a></div><div id='variadic-5.4.sentence-1' class='sentence'>In an <a class='grammarterm' href='dcl.init#nt:initializer-list'>initializer-list</a>;
the pattern is an <a class='grammarterm' href='dcl.init#nt:initializer-clause'>initializer-clause</a><a class='hidden_link' href='#variadic-5.4.sentence-1'>.</a></div></li><li id='variadic-5.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-5.5'>(5.5)</a></div><div id='variadic-5.5.sentence-1' class='sentence'>In a <a class='grammarterm' href='class.derived#nt:base-specifier-list'>base-specifier-list</a>;
the pattern is a <a class='grammarterm' href='class.derived#nt:base-specifier'>base-specifier</a><a class='hidden_link' href='#variadic-5.5.sentence-1'>.</a></div></li><li id='variadic-5.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-5.6'>(5.6)</a></div><div id='variadic-5.6.sentence-1' class='sentence'>In a <a class='grammarterm' href='class.base.init#nt:mem-initializer-list'>mem-initializer-list</a> for a
<a class='grammarterm' href='class.base.init#nt:mem-initializer'>mem-initializer</a> whose <a class='grammarterm' href='class.base.init#nt:mem-initializer-id'>mem-initializer-id</a> denotes a
base class; the pattern is the <a class='grammarterm' href='class.base.init#nt:mem-initializer'>mem-initializer</a><a class='hidden_link' href='#variadic-5.6.sentence-1'>.</a></div></li><li id='variadic-5.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-5.7'>(5.7)</a></div><div id='variadic-5.7.sentence-1' class='sentence'>In a <a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a> (<a href='#arg'>[temp.arg]</a>);
the pattern is a <a class='grammarterm' href='#nt:template-argument'>template-argument</a><a class='hidden_link' href='#variadic-5.7.sentence-1'>.</a></div></li><li id='variadic-5.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-5.8'>(5.8)</a></div><div id='variadic-5.8.sentence-1' class='sentence'>In an <a class='grammarterm' href='dcl.attr.grammar#nt:attribute-list'>attribute-list</a>; the pattern is
an <a class='grammarterm' href='dcl.attr.grammar#nt:attribute'>attribute</a><a class='hidden_link' href='#variadic-5.8.sentence-1'>.</a></div></li><li id='variadic-5.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-5.9'>(5.9)</a></div><div id='variadic-5.9.sentence-1' class='sentence'>In an <a class='grammarterm' href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifier</a> (<a href='dcl.align'>[dcl.align]</a>); the pattern is
the <a class='grammarterm' href='dcl.attr.grammar#nt:alignment-specifier'>alignment-specifier</a> without the ellipsis<a class='hidden_link' href='#variadic-5.9.sentence-1'>.</a></div></li><li id='variadic-5.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-5.10'>(5.10)</a></div><div id='variadic-5.10.sentence-1' class='sentence'>In a <a class='grammarterm' href='expr.prim.lambda.capture#nt:capture-list'>capture-list</a> (<a href='expr.prim.lambda'>[expr.prim.lambda]</a>); the pattern is
the <a class='grammarterm' href='expr.prim.lambda.capture#nt:capture'>capture</a> without the ellipses<a class='hidden_link' href='#variadic-5.10.sentence-1'>.</a></div></li><li id='variadic-5.11'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-5.11'>(5.11)</a></div><div id='variadic-5.11.sentence-1' class='sentence'>In a <a href='expr.sizeof'><span class='texttt'>sizeof...</span> expression</a>; the pattern is an
<a class='grammarterm' href='lex.name#nt:identifier'>identifier</a><a class='hidden_link' href='#variadic-5.11.sentence-1'>.</a></div></li><li id='variadic-5.12'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-5.12'>(5.12)</a></div><div id='variadic-5.12.sentence-1' class='sentence'>In a <a class='grammarterm' href='expr.prim.fold#nt:fold-expression'>fold-expression</a>;
the pattern is the <a class='grammarterm' href='expr.cast#nt:cast-expression'>cast-expression</a>
that contains an unexpanded pack<a class='hidden_link' href='#variadic-5.12.sentence-1'>.</a></div></li></ul><div id='variadic-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#variadic-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> rest<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> rest<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>rest <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;     <span class='comment'>// “<span class='tcode_in_codeblock'>&amp;rest ...</span>” is a pack expansion; “<span class='tcode_in_codeblock'>&amp;rest</span>” is its pattern</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='variadic-6'><div class='marginalizedparent'><a class='marginalized' href='#variadic-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2795'>#</a></div><div id='variadic-6.sentence-1' class='sentence'>For the purpose of determining whether a pack satisfies a rule
regarding entities other than packs, the pack is
considered to be the entity that would result from an instantiation of
the pattern in which it appears<a class='hidden_link' href='#variadic-6.sentence-1'>.</a></div></div><div class='para' id='variadic-7'><div class='marginalizedparent'><a class='marginalized' href='#variadic-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2801'>#</a></div><div id='variadic-7.sentence-1' class='sentence'>A pack whose name appears within the pattern of a pack
expansion is expanded by that pack expansion<a class='hidden_link' href='#variadic-7.sentence-1'>.</a></div> <div id='variadic-7.sentence-2' class='sentence'>An appearance of the name of
a pack is only expanded by the innermost enclosing pack expansion<a class='hidden_link' href='#variadic-7.sentence-2'>.</a></div> <div id='variadic-7.sentence-3' class='sentence'>The pattern of a pack expansion shall name one or more packs that
are not expanded by a nested pack expansion; such packs are called
<a class='hidden_link' href='#def:pack,unexpanded' id='def:pack,unexpanded'><i >unexpanded packs</i></a> in the pattern<a class='hidden_link' href='#variadic-7.sentence-3'>.</a></div> <div id='variadic-7.sentence-4' class='sentence'>All of the packs expanded
by a pack expansion shall have the same number of arguments specified<a class='hidden_link' href='#variadic-7.sentence-4'>.</a></div> <div id='variadic-7.sentence-5' class='sentence'>An
appearance of a name of a pack that is not expanded is
ill-formed<a class='hidden_link' href='#variadic-7.sentence-5'>.</a></div> <div id='variadic-7.example-1' class='example'>[&nbsp;<a class='example_link' href='#variadic-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Tuple <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T1, <span class='keyword'>typename</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Pair <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args1<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> zip <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> with <span class='curlybracket'>{</span>
    <span class='keyword'>typedef</span> Tuple<span class='anglebracket'>&lt;</span>Pair<span class='anglebracket'>&lt;</span>Args1, Args2<span class='anglebracket'>&gt;</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='anglebracket'>&gt;</span> type;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>typedef</span> zip<span class='anglebracket'>&lt;</span><span class='keyword'>short</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>with<span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> <span class='keyword'>short</span>, <span class='keyword'>unsigned</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>type T1;
    <span class='comment'>// <span class='tcode_in_codeblock'>T1</span> is <span class='tcode_in_codeblock'>Tuple&lt;Pair&lt;short, unsigned short&gt;, Pair&lt;int, unsigned&gt;&gt;</span></span>
<span class='keyword'>typedef</span> zip<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>with<span class='anglebracket'>&lt;</span><span class='keyword'>unsigned</span> <span class='keyword'>short</span>, <span class='keyword'>unsigned</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>type T2;
    <span class='comment'>// error: different number of arguments specified for <span class='tcode_in_codeblock'>Args1</span> and <span class='tcode_in_codeblock'>Args2</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span>Args <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>                   <span class='comment'>// OK: <span class='tcode_in_codeblock'>Args</span> is expanded by the function parameter pack <span class='tcode_in_codeblock'>args</span></span>
    f<span class='parenthesis'>(</span><span class='keyword'>const_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> Args<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;   <span class='comment'>// OK: “<span class='tcode_in_codeblock'>Args</span>” and “<span class='tcode_in_codeblock'>args</span>” are expanded</span>
    f<span class='parenthesis'>(</span><span class='literal'>5</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;                               <span class='comment'>// error: pattern does not contain any packs</span>
    f<span class='parenthesis'>(</span>args<span class='parenthesis'>)</span>;                                <span class='comment'>// error: pack “<span class='tcode_in_codeblock'>args</span>” is not expanded</span>
    f<span class='parenthesis'>(</span>h<span class='parenthesis'>(</span>args <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='operator'>+</span> args <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;              <span class='comment'>// OK: first “<span class='tcode_in_codeblock'>args</span>” expanded within <span class='tcode_in_codeblock'>h</span>,</span>
                                            <span class='comment'>// second “<span class='tcode_in_codeblock'>args</span>” expanded within <span class='tcode_in_codeblock'>f</span></span>
  <span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='variadic-8'><div class='marginalizedparent'><a class='marginalized' href='#variadic-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2838'>#</a></div><div id='variadic-8.sentence-1' class='sentence'>The instantiation of a pack expansion
that is neither a <span class='texttt'><span class='keyword'>sizeof</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> expression
nor a <a class='grammarterm' href='expr.prim.fold#nt:fold-expression'>fold-expression</a>
produces a
list of elements
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span></span></span></span> <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span></span></span></span> <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.004em; padding-bottom: 0.298em;">⋯</span></span><span class="mjx-texatom MJXc-space1"><span class="mjx-mrow"></span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="margin-top: -0.144em; padding-bottom: 0.519em;">,</span></span></span></span></span> <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span></span></span></span></span></span>,
where
<span class='math'><span class='mathalpha'>N</span></span> is the number of elements in the pack expansion parameters<a class='hidden_link' href='#variadic-8.sentence-1'>.</a></div> <div id='variadic-8.sentence-2' class='sentence'>Each
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is generated by instantiating the pattern and
replacing each pack expansion parameter with its <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> element<a class='hidden_link' href='#variadic-8.sentence-2'>.</a></div> <div id='variadic-8.sentence-3' class='sentence'>Such an element, in the context of the instantiation, is interpreted as
follows:
<ul class='itemize'><li id='variadic-8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-8.1'>(8.1)</a></div>if the pack is a template parameter pack, the element is a template
parameter (<a href='#param'>[temp.param]</a>) of the corresponding kind (type or
non-type) designating the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span>
corresponding type or value template argument;</li><li id='variadic-8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-8.2'>(8.2)</a></div>if the pack is a function parameter pack, the element is an
<a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a>
designating the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> function parameter
that resulted from instantiation of
the function parameter pack declaration;
otherwise</li><li id='variadic-8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-8.3'>(8.3)</a></div>if the pack is an <a class='grammarterm' href='expr.prim.lambda.capture#nt:init-capture'>init-capture</a> pack,
the element is an <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a>
designating the variable introduced by
the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> <a class='grammarterm' href='expr.prim.lambda.capture#nt:init-capture'>init-capture</a>
that resulted from instantiation of
the <a class='grammarterm' href='expr.prim.lambda.capture#nt:init-capture'>init-capture</a> pack<a class='hidden_link' href='#variadic-8.sentence-3'>.</a></li></ul></div><div id='variadic-8.sentence-4' class='sentence'>All of the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> become items in the enclosing list<a class='hidden_link' href='#variadic-8.sentence-4'>.</a></div> <div id='variadic-8.note-1' class='note'>[&nbsp;<a class='note_link' href='#variadic-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='variadic-8.sentence-5' class='sentence'>The variety of list varies with the context:
<a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a>,
<a class='grammarterm' href='class.derived#nt:base-specifier-list'>base-specifier-list</a>,
<a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a>, etc<a class='hidden_link' href='#variadic-8.sentence-5'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='variadic-8.sentence-6' class='sentence'>
When <span class='math'><span class='mathalpha'>N</span></span> is zero, the instantiation of the expansion produces an empty list<a class='hidden_link' href='#variadic-8.sentence-6'>.</a></div> <div id='variadic-8.sentence-7' class='sentence'>Such an instantiation does not alter the syntactic interpretation of the
enclosing construct, even in cases where omitting the list entirely would
otherwise be ill-formed or would result in an ambiguity in the grammar<a class='hidden_link' href='#variadic-8.sentence-7'>.</a></div> <div id='variadic-8.example-1' class='example'>[&nbsp;<a class='example_link' href='#variadic-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='operator'>:</span> T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> values<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  X<span class='anglebracket'>&lt;</span>T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> x<span class='parenthesis'>(</span>values<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>template</span> <span class='keyword'>void</span> f<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;    <span class='comment'>// OK: <span class='tcode_in_codeblock'>X&lt;&gt;</span> has no base classes</span>
                        <span class='comment'>// <span class='tcode_in_codeblock'>x</span> is a variable of type <span class='tcode_in_codeblock'>X&lt;&gt;</span> that is value-initialized</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='variadic-9'><div class='marginalizedparent'><a class='marginalized' href='#variadic-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2898'>#</a></div><div id='variadic-9.sentence-1' class='sentence'>The instantiation of a <span class='texttt'><span class='keyword'>sizeof</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> expression (<a href='expr.sizeof'>[expr.sizeof]</a>) produces
an integral constant containing the number of elements in the pack
it expands<a class='hidden_link' href='#variadic-9.sentence-1'>.</a></div></div><div class='para' id='variadic-10'><div class='marginalizedparent'><a class='marginalized' href='#variadic-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2903'>#</a></div><div id='variadic-10.sentence-1' class='sentence'>The instantiation of a <a class='grammarterm' href='expr.prim.fold#nt:fold-expression'>fold-expression</a> produces:
<ul class='itemize'><li id='variadic-10.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-10.1'>(10.1)</a></div><span class='texttt'><span class='parenthesis'>(</span><span class='parenthesis'>(</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>
           <span class='textit'>op</span> <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span><span class='texttt'><span class='parenthesis'>)</span></span>
           <span class='textit'>op</span> <span class='math'>⋯</span><span class='texttt'><span class='parenthesis'>)</span></span>
           <span class='textit'>op</span> <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span></span></span></span></span></span>
for a unary left fold,</li><li id='variadic-10.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-10.2'>(10.2)</a></div><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>     <span class='textit'>op</span>
<span class='texttt'><span class='parenthesis'>(</span></span><span class='math'>⋯</span>           <span class='textit'>op</span>
<span class='texttt'><span class='parenthesis'>(</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span> <span class='textit'>op</span>
         <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span></span></span></span></span></span><span class='texttt'><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
for a unary right fold,</li><li id='variadic-10.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-10.3'>(10.3)</a></div><span class='texttt'><span class='parenthesis'>(</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span></span><span class='math'><span class='mathtt'>E</span></span>
            <span class='textit'>op</span> <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span><span class='texttt'><span class='parenthesis'>)</span></span>
            <span class='textit'>op</span> <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">2</span></span></span></span></span></span></span><span class='texttt'><span class='parenthesis'>)</span></span>
            <span class='textit'>op</span> <span class='math'>⋯</span><span class='texttt'><span class='parenthesis'>)</span></span>
            <span class='textit'>op</span> <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span></span></span></span></span></span>
for a binary left fold, and</li><li id='variadic-10.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#variadic-10.4'>(10.4)</a></div><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>     <span class='textit'>op</span>
<span class='texttt'><span class='parenthesis'>(</span></span><span class='math'>⋯</span>           <span class='textit'>op</span>
<span class='texttt'><span class='parenthesis'>(</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.446em;">−</span></span><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span></span> <span class='textit'>op</span>
<span class='texttt'><span class='parenthesis'>(</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.085em;">N</span></span></span></span></span></span></span></span></span>   <span class='textit'>op</span>
         <span class='math'><span class='mathtt'>E</span></span><span class='texttt'><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
for a binary right fold.</li></ul></div><div id='variadic-10.sentence-2' class='sentence'>In each case,
<span class='textit'>op</span> is the <a class='grammarterm' href='expr.prim.fold#nt:fold-operator'>fold-operator</a>,
<span class='math'><span class='mathalpha'>N</span></span> is the number of elements in the pack expansion parameters,
and each <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">E</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is generated by instantiating the pattern
and replacing each pack expansion parameter with its <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> element<a class='hidden_link' href='#variadic-10.sentence-2'>.</a></div> <div id='variadic-10.sentence-3' class='sentence'>For a binary fold-expression,
<span class='math'><span class='mathtt'>E</span></span> is generated
by instantiating the <a class='grammarterm' href='expr.cast#nt:cast-expression'>cast-expression</a>
that did not contain an unexpanded pack<a class='hidden_link' href='#variadic-10.sentence-3'>.</a></div> <div id='variadic-10.example-1' class='example'>[&nbsp;<a class='example_link' href='#variadic-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>Args<span class='anglebracket'>&gt;</span>
  <span class='keyword'>bool</span> all<span class='parenthesis'>(</span>Args <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>args<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> args<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>

<span class='keyword'>bool</span> b <span class='operator'>=</span> all<span class='parenthesis'>(</span><span class='literal'>true</span>, <span class='literal'>true</span>, <span class='literal'>true</span>, <span class='literal'>false</span><span class='parenthesis'>)</span>;
</pre> <div id='variadic-10.sentence-4' class='sentence'>
Within the instantiation of <span class='texttt'>all</span>,
the returned expression expands to
<span class='texttt'><span class='parenthesis'>(</span><span class='parenthesis'>(</span><span class='literal'>true</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='literal'>true</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='literal'>true</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='literal'>false</span></span>,
which evaluates to <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#variadic-10.sentence-4'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='variadic-10.sentence-5' class='sentence'>
If <span class='math'><span class='mathalpha'>N</span></span> is zero for a unary fold-expression,
the value of the expression is shown in Table <a href='#tab:temp.fold.empty'>17</a>;
if the operator is not listed in Table <a href='#tab:temp.fold.empty'>17</a>,
the instantiation is ill-formed<a class='hidden_link' href='#variadic-10.sentence-5'>.</a></div><div class='numberedTable' id='tab:temp.fold.empty'>Table <a href='#tab:temp.fold.empty'>17</a>: Value of folding empty sequences &emsp;&ensp;[tab:temp.fold.empty]<br><table ><tr class='rowsep'><td class='center'><div id='variadic-10.sentence-6' class='sentence'><b>Operator</b></div></td><td class='center'><div id='variadic-10.sentence-7' class='sentence'><b>Value when pack is empty</b></div></td></tr><tr class='capsep'><td class='left'><div id='variadic-10.sentence-8' class='sentence'><span class='texttt'><span class='operator'>&amp;</span><span class='operator'>&amp;</span></span></div></td><td class='left'><div id='variadic-10.sentence-9' class='sentence'><span class='texttt'><span class='literal'>true</span></span></div></td></tr><tr ><td class='left'><div id='variadic-10.sentence-10' class='sentence'><span class='texttt'><span class='operator'>|</span><span class='operator'>|</span></span></div></td><td class='left'><div id='variadic-10.sentence-11' class='sentence'><span class='texttt'><span class='literal'>false</span></span></div></td></tr><tr ><td class='left'><div id='variadic-10.sentence-12' class='sentence'><span class='texttt'>,</span></div></td><td class='left'><div id='variadic-10.sentence-13' class='sentence'><span class='texttt'><span class='keyword'>void</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span></div></td></tr></table></div></div></div><div id='friend' class='section'><h3 ><a class='secnum' href='#friend' style='min-width:103pt'>13.7.4</a> Friends <a class='abbr_ref' href='temp.friend'>[temp.friend]</a></h3><div class='para' id='friend-1'><div class='marginalizedparent'><a class='marginalized' href='#friend-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L2972'>#</a></div><div id='friend-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':friend,template_and'></a></span>A friend of a class or class template can be a function template or
class template, a specialization of a function template or class
template, or a non-template function or class<a class='hidden_link' href='#friend-1.sentence-1'>.</a></div> <div id='friend-1.sentence-2' class='sentence'>For a friend function declaration that is not a template declaration:
<ul class='itemize'><li id='friend-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#friend-1.1'>(1.1)</a></div>if the name of the friend is a qualified or unqualified <a class='grammarterm' href='#nt:template-id'>template-id</a>,
the friend declaration refers to a specialization of a function
template, otherwise,</li><li id='friend-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#friend-1.2'>(1.2)</a></div>if the name of the friend is a <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> and a matching non-template
function is found in the specified class or namespace, the friend
declaration refers to that function, otherwise,</li><li id='friend-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#friend-1.3'>(1.3)</a></div>if the name of the friend is a <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> and a matching
function template
is found in the specified class
or namespace, the friend declaration refers to
the deduced specialization of that function template (<a href='#deduct.decl'>[temp.deduct.decl]</a>), otherwise,</li><li id='friend-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#friend-1.4'>(1.4)</a></div>the name shall be an <a class='grammarterm' href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a> that declares (or redeclares) a
non-template function<a class='hidden_link' href='#friend-1.sentence-2'>.</a></li></ul></div><div id='friend-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#friend-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> task;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> task<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> preempt<span class='parenthesis'>(</span>task<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> task <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>void</span> next_time<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>friend</span> <span class='keyword'>void</span> process<span class='parenthesis'>(</span>task<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span>;
  <span class='keyword'>friend</span> task<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> preempt<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>task<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> C<span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>int</span> func<span class='parenthesis'>(</span>C<span class='parenthesis'>)</span>;

  <span class='keyword'>friend</span> <span class='keyword'>class</span> task<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> P<span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>class</span> frd;
<span class='curlybracket'>}</span>;
</pre><div id='friend-1.sentence-3' class='sentence'>Here,
each specialization of the
<span class='texttt'>task</span>
class template has the function
<span class='texttt'>next_&shy;time</span>
as a friend;
because
<span class='texttt'>process</span>
does not have explicit
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>,
each specialization of the
<span class='texttt'>task</span>
class template has an appropriately typed function
<span class='texttt'>process</span>
as a friend, and this friend is not a function template specialization;
because the friend
<span class='texttt'>preempt</span>
has an explicit
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
<span class='texttt'>T</span>,
each specialization of the
<span class='texttt'>task</span>
class template has the appropriate specialization of the function
template
<span class='texttt'>preempt</span>
as a friend;
and each specialization of the
<span class='texttt'>task</span>
class template has all specializations of the function template
<span class='texttt'>func</span>
as friends<a class='hidden_link' href='#friend-1.sentence-3'>.</a></div> <div id='friend-1.sentence-4' class='sentence'>Similarly,
each specialization of the
<span class='texttt'>task</span>
class template has the class template specialization
<span class='texttt'>task<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span></span>
as a friend, and has all specializations of the class template
<span class='texttt'>frd</span>
as friends<a class='hidden_link' href='#friend-1.sentence-4'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='friend-2'><div class='marginalizedparent'><a class='marginalized' href='#friend-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3055'>#</a></div><div id='friend-2.sentence-1' class='sentence'>A friend template may be declared within a class or class template<a class='hidden_link' href='#friend-2.sentence-1'>.</a></div> <div id='friend-2.sentence-2' class='sentence'>A friend function template may be defined within a class or class
template, but a friend class template may not be defined in a class
or class template<a class='hidden_link' href='#friend-2.sentence-2'>.</a></div> <div id='friend-2.sentence-3' class='sentence'>In these cases, all specializations of the friend class or friend function
template are friends of the class or class template granting friendship<a class='hidden_link' href='#friend-2.sentence-3'>.</a></div> <div id='friend-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#friend-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>class</span> B;                 <span class='comment'>// OK</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>   <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='friend-3'><div class='marginalizedparent'><a class='marginalized' href='#friend-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3071'>#</a></div><div id='friend-3.sentence-1' class='sentence'>A template friend declaration specifies that all specializations of that
template, whether they are <a href='#inst'>implicitly instantiated</a>, <a href='#class.spec'>partially
specialized</a> or <a href='#expl.spec'>explicitly specialized</a>,
are friends of the class containing the template friend declaration<a class='hidden_link' href='#friend-3.sentence-1'>.</a></div> <div id='friend-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#friend-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>struct</span> A;
  <span class='keyword'>class</span> Y <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> X<span class='operator'>::</span>Y ab; <span class='curlybracket'>}</span>;            <span class='comment'>// OK</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> X<span class='operator'>::</span>Y ab; <span class='curlybracket'>}</span>;        <span class='comment'>// OK</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='friend-4'><div class='marginalizedparent'><a class='marginalized' href='#friend-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3088'>#</a></div><div id='friend-4.sentence-1' class='sentence'>A template friend declaration may declare
a member of a dependent type to be a friend<a class='hidden_link' href='#friend-4.sentence-1'>.</a></div> <div id='friend-4.sentence-2' class='sentence'>The friend declaration shall declare a function or
specify a type with an <a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a>,
in either case with a <a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a>
ending with a <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>, <span class='textit'>C</span>,
whose <a class='grammarterm' href='#nt:template-name'>template-name</a> names a class template<a class='hidden_link' href='#friend-4.sentence-2'>.</a></div> <div id='friend-4.sentence-3' class='sentence'>The template parameters of the template friend declaration
shall be deducible from <span class='textit'>C</span> (<a href='#deduct.type'>[temp.deduct.type]</a>)<a class='hidden_link' href='#friend-4.sentence-3'>.</a></div> <div id='friend-4.sentence-4' class='sentence'>In this case,
a member of a specialization <span class='textit'>S</span> of the class template
is a friend of the class granting friendship
if deduction of the template parameters
of <span class='textit'>C</span> from <span class='textit'>S</span> succeeds, and
substituting the deduced template arguments into the friend declaration
produces a declaration that would be a valid redeclaration
of the member of the specialization<a class='hidden_link' href='#friend-4.sentence-4'>.</a></div> <div id='friend-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#friend-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>struct</span> D <span class='curlybracket'>{</span>
    <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
  T h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>T U<span class='anglebracket'>&gt;</span> T i<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>struct</span> D <span class='curlybracket'>{</span>
    <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> i<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>float</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> <span class='operator'>*</span>h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>B;      <span class='comment'>// grants friendship to <span class='tcode_in_codeblock'>A&lt;int&gt;&#x200b;::&#x200b;B</span> even though</span>
                                                <span class='comment'>// it is not a specialization of <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;B</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;      <span class='comment'>// does not grant friendship to <span class='tcode_in_codeblock'>A&lt;int&gt;&#x200b;::&#x200b;f()</span></span>
                                                <span class='comment'>// because its return type does not match</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>D<span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;   <span class='comment'>// error: <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;D</span> does not end with a <span class='grammarterm'>simple-template-id</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>int</span> <span class='operator'>*</span>A<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// grants friendship to <span class='tcode_in_codeblock'>A&lt;int*&gt;&#x200b;::&#x200b;h()</span> and <span class='tcode_in_codeblock'>A&lt;float*&gt;&#x200b;::&#x200b;h()</span></span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span>T U<span class='anglebracket'>&gt;</span>               <span class='comment'>// grants friendship to instantiations of <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;i()</span> and</span>
    <span class='keyword'>friend</span> T A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>i<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                         <span class='comment'>// to <span class='tcode_in_codeblock'>A&lt;int&gt;&#x200b;::&#x200b;i()</span>, and thereby to all specializations</span>
<span class='curlybracket'>}</span>;                                              <span class='comment'>// of those function templates</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='friend-5'><div class='marginalizedparent'><a class='marginalized' href='#friend-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3142'>#</a></div><div id='friend-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#friend-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='friend-5.sentence-1' class='sentence'>A friend declaration may first declare a member of an enclosing namespace scope (<a href='#inject'>[temp.inject]</a>)<a class='hidden_link' href='#friend-5.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='friend-6'><div class='marginalizedparent'><a class='marginalized' href='#friend-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3147'>#</a></div><div id='friend-6.sentence-1' class='sentence'>A friend template shall not be declared in a local class<a class='hidden_link' href='#friend-6.sentence-1'>.</a></div></div><div class='para' id='friend-7'><div class='marginalizedparent'><a class='marginalized' href='#friend-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3150'>#</a></div><div id='friend-7.sentence-1' class='sentence'>Friend declarations shall not declare partial specializations<a class='hidden_link' href='#friend-7.sentence-1'>.</a></div> <div id='friend-7.example-1' class='example'>[&nbsp;<a class='example_link' href='#friend-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span>;         <span class='comment'>// error</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='friend-8'><div class='marginalizedparent'><a class='marginalized' href='#friend-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3161'>#</a></div><div id='friend-8.sentence-1' class='sentence'>When a friend declaration refers to a specialization of a function
template, the function parameter declarations shall not include
default arguments, nor shall
the <span class='texttt'><span class='keyword'>inline</span></span>, <span class='texttt'><span class='keyword'>constexpr</span></span>, or <span class='texttt'><span class='keyword'>consteval</span></span> specifiers
be used in such a declaration<a class='hidden_link' href='#friend-8.sentence-1'>.</a></div></div><div class='para' id='friend-9'><div class='marginalizedparent'><a class='marginalized' href='#friend-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3168'>#</a></div><div id='friend-9.sentence-1' class='sentence'>A non-template friend declaration
with a <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a>
shall be a definition<a class='hidden_link' href='#friend-9.sentence-1'>.</a></div> <div id='friend-9.sentence-2' class='sentence'>A friend function template
with a constraint that depends on a template parameter from an enclosing template
shall be a definition<a class='hidden_link' href='#friend-9.sentence-2'>.</a></div> <div id='friend-9.sentence-3' class='sentence'>Such a constrained friend function or function template declaration
does not declare the same function or function template as a declaration in any other scope<a class='hidden_link' href='#friend-9.sentence-3'>.</a></div></div></div><div id='class.spec' class='section'><h3 ><a class='secnum' href='#class.spec' style='min-width:103pt'>13.7.5</a> Class template partial specializations <a class='abbr_ref' href='temp.class.spec'>[temp.class.spec]</a></h3><div class='para' id='class.spec-1'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3180'>#</a></div><div id='class.spec-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':specialization,class_template_partial'></a></span>A
<a class='hidden_link' href='#def:template,primary' id='def:template,primary'><i >primary class template</i></a>
declaration is one in which the class template name is an
identifier<a class='hidden_link' href='#class.spec-1.sentence-1'>.</a></div> <div id='class.spec-1.sentence-2' class='sentence'>A template declaration in which the class template name is a
<a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>
is a
<a class='hidden_link' href='#def:specialization,class_template_partial' id='def:specialization,class_template_partial'><i >partial specialization</i></a>
of the class template named in the
<a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a><a class='hidden_link' href='#class.spec-1.sentence-2'>.</a></div> <div id='class.spec-1.sentence-3' class='sentence'>A partial specialization of a class template provides an alternative definition
of the template that is used instead of the primary definition when the
arguments in a specialization match those given in the partial
specialization (<a href='#class.spec.match'>[temp.class.spec.match]</a>)<a class='hidden_link' href='#class.spec-1.sentence-3'>.</a></div> <div id='class.spec-1.sentence-4' class='sentence'>The primary template shall be declared before any specializations of
that template<a class='hidden_link' href='#class.spec-1.sentence-4'>.</a></div> <div id='class.spec-1.sentence-5' class='sentence'>A partial specialization shall be declared before the first use of a class template
specialization that would make use of the partial specialization as the result of
an implicit or explicit instantiation in every translation unit in which such a use
occurs; no diagnostic is required<a class='hidden_link' href='#class.spec-1.sentence-5'>.</a></div></div><div class='para' id='class.spec-2'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3204'>#</a></div><div id='class.spec-2.sentence-1' class='sentence'>Each class template partial specialization is a distinct template and
definitions shall be provided for the members of a template partial
specialization (<a href='#class.spec.mfunc'>[temp.class.spec.mfunc]</a>)<a class='hidden_link' href='#class.spec-2.sentence-1'>.</a></div></div><div class='para' id='class.spec-3'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3209'>#</a></div><div id='class.spec-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.spec-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A             <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span>            <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T, T<span class='operator'>*</span>, I<span class='anglebracket'>&gt;</span>   <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T1<span class='operator'>*</span>, T2, I<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>                   <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, T<span class='operator'>*</span>, <span class='literal'>5</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T1, T2<span class='operator'>*</span>, I<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
</pre><div id='class.spec-3.sentence-1' class='sentence'>The first declaration declares the primary (unspecialized) class template<a class='hidden_link' href='#class.spec-3.sentence-1'>.</a></div> <div id='class.spec-3.sentence-2' class='sentence'>The second and subsequent declarations declare partial specializations of
the primary template<a class='hidden_link' href='#class.spec-3.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='class.spec-4'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3224'>#</a></div><div id='class.spec-4.sentence-1' class='sentence'>A class template partial specialization may be constrained (<a href='#pre'>[temp.pre]</a>)<a class='hidden_link' href='#class.spec-4.sentence-1'>.</a></div> <div id='class.spec-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.spec-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='literal'>true</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;          <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                  <span class='comment'>// #2</span>
</pre> <div id='class.spec-4.sentence-2' class='sentence'>
Both partial specializations are more specialized than the primary template<a class='hidden_link' href='#class.spec-4.sentence-2'>.</a></div> <div id='class.spec-4.sentence-3' class='sentence'>#1 is more specialized because the deduction of its template arguments
from the template argument list of the class template specialization succeeds,
while the reverse does not<a class='hidden_link' href='#class.spec-4.sentence-3'>.</a></div> <div id='class.spec-4.sentence-4' class='sentence'>#2 is more specialized because the template arguments are equivalent,
but the partial specialization is more constrained (<a href='#constr.order'>[temp.constr.order]</a>)<a class='hidden_link' href='#class.spec-4.sentence-4'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='class.spec-5'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3242'>#</a></div><div id='class.spec-5.sentence-1' class='sentence'>The template parameters are specified in the angle bracket enclosed list
that immediately follows the keyword
<span class='texttt'>template</span><a class='hidden_link' href='#class.spec-5.sentence-1'>.</a></div> <div id='class.spec-5.sentence-2' class='sentence'>For partial specializations, the template argument list is explicitly
written immediately following the class template name<a class='hidden_link' href='#class.spec-5.sentence-2'>.</a></div> <div id='class.spec-5.sentence-3' class='sentence'>For primary templates, this list is implicitly described by the
template parameter list<a class='hidden_link' href='#class.spec-5.sentence-3'>.</a></div> <div id='class.spec-5.sentence-4' class='sentence'>Specifically, the order of the template arguments is the sequence in
which they appear in the template parameter list<a class='hidden_link' href='#class.spec-5.sentence-4'>.</a></div> <div id='class.spec-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.spec-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.spec-5.sentence-5' class='sentence'>The template argument list for the primary template in the example
above is
<span class='texttt'><span class='anglebracket'>&lt;</span>T1,</span>
<span class='texttt'>T2,</span>
<span class='texttt'>I<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#class.spec-5.sentence-5'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='class.spec-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#class.spec-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.spec-5.sentence-6' class='sentence'>The template argument list cannot be specified in the primary template
declaration<a class='hidden_link' href='#class.spec-5.sentence-6'>.</a></div> <div id='class.spec-5.sentence-7' class='sentence'>For example,</div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span>
<span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T1, T2, I<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                         <span class='comment'>// error</span>
</pre> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='class.spec-6'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3270'>#</a></div><div id='class.spec-6.sentence-1' class='sentence'>A class template partial specialization may be declared in any
scope in which the corresponding primary template
may be defined (<a href='namespace.memdef'>[namespace.memdef]</a>, <a href='class.mem'>[class.mem]</a>, <a href='#mem'>[temp.mem]</a>)<a class='hidden_link' href='#class.spec-6.sentence-1'>.</a></div> <div id='class.spec-6.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.spec-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B<span class='anglebracket'>&lt;</span>T2<span class='operator'>*</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;      <span class='comment'>// partial specialization #1</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='comment'>// partial specialization of <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;C&#x200b;::&#x200b;B&lt;T2&gt;</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span>
  <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>C<span class='operator'>::</span>B<span class='anglebracket'>&lt;</span>T2<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                   <span class='comment'>// #2</span>

A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>C<span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> absip;                     <span class='comment'>// uses partial specialization #2</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='class.spec-7'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3291'>#</a></div><div id='class.spec-7.sentence-1' class='sentence'>Partial specialization declarations themselves are not found by name lookup<a class='hidden_link' href='#class.spec-7.sentence-1'>.</a></div> <div id='class.spec-7.sentence-2' class='sentence'>Rather, when the primary template name is used, any previously-declared partial
specializations of the primary template are also considered<a class='hidden_link' href='#class.spec-7.sentence-2'>.</a></div> <div id='class.spec-7.sentence-3' class='sentence'>One consequence is
that a
<a class='grammarterm' href='namespace.udecl#nt:using-declaration'>using-declaration</a>
which refers to a class template does not restrict the set of partial specializations
which may be found through the
<a class='grammarterm' href='namespace.udecl#nt:using-declaration'>using-declaration</a><a class='hidden_link' href='#class.spec-7.sentence-3'>.</a></div> <div id='class.spec-7.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.spec-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;     <span class='comment'>// primary template</span>
<span class='curlybracket'>}</span>

<span class='keyword'>using</span> N<span class='operator'>::</span>A;                                     <span class='comment'>// refers to the primary template</span>

<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T, T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;         <span class='comment'>// partial specialization</span>
<span class='curlybracket'>}</span>

A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='keyword'>int</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> a;      <span class='comment'>// uses the partial specialization, which is found through the using-declaration</span>
                    <span class='comment'>// which refers to the primary template</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='class.spec-8'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3318'>#</a></div><div id='class.spec-8.sentence-1' class='sentence'>A non-type argument is non-specialized if it is the name of a non-type
parameter<a class='hidden_link' href='#class.spec-8.sentence-1'>.</a></div> <div id='class.spec-8.sentence-2' class='sentence'>All other non-type arguments are specialized<a class='hidden_link' href='#class.spec-8.sentence-2'>.</a></div></div><div class='para' id='class.spec-9'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3323'>#</a></div><div id='class.spec-9.sentence-1' class='sentence'>Within the argument list of a class template partial specialization,
the following restrictions apply:</div><ul class='itemize'><li id='class.spec-9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec-9.1'>(9.1)</a></div><div id='class.spec-9.1.sentence-1' class='sentence'>The type of a template parameter corresponding to a specialized non-type argument
shall not be dependent on a parameter of the specialization<a class='hidden_link' href='#class.spec-9.1.sentence-1'>.</a></div> <div id='class.spec-9.1.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.spec-9.1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, T t<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C<span class='anglebracket'>&lt;</span>T, <span class='literal'>1</span><span class='anglebracket'>&gt;</span>;              <span class='comment'>// error</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span> <span class='keyword'>int</span> X, <span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span>array_ptr<span class='parenthesis'>)</span><span class='squarebracket'>[</span>X<span class='squarebracket'>]</span> <span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>int</span> array<span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span> <span class='keyword'>int</span> X <span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>X,<span class='operator'>&amp;</span>array<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;        <span class='comment'>// error</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='class.spec-9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec-9.2'>(9.2)</a></div><div id='class.spec-9.2.sentence-1' class='sentence'>The specialization shall be <a href='#def:more_specialized'>more specialized</a>
than the primary template<a class='hidden_link' href='#class.spec-9.2.sentence-1'>.</a></div></li><li id='class.spec-9.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec-9.3'>(9.3)</a></div><div id='class.spec-9.3.sentence-1' class='sentence'>The template parameter list of a specialization shall not contain default
template argument values<a class='hidden_link' href='#class.spec-9.3.sentence-1'>.</a><a class='footnotenum' href='#footnote-134' id='footnoteref-134'>134</a></div></li><li id='class.spec-9.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec-9.4'>(9.4)</a></div><div id='class.spec-9.4.sentence-1' class='sentence'>An argument shall not contain an unexpanded pack<a class='hidden_link' href='#class.spec-9.4.sentence-1'>.</a></div> <div id='class.spec-9.4.sentence-2' class='sentence'>If
an argument is a pack expansion (<a href='#variadic'>[temp.variadic]</a>), it shall be
the last argument in the template argument list<a class='hidden_link' href='#class.spec-9.4.sentence-2'>.</a></div></li></ul></div><div class='para' id='class.spec-10'><div class='marginalizedparent'><a class='marginalized' href='#class.spec-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3355'>#</a></div><div id='class.spec-10.sentence-1' class='sentence'>The usual access checking rules do not apply to non-dependent names
used to specify template arguments of the <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>
of the partial specialization<a class='hidden_link' href='#class.spec-10.sentence-1'>.</a></div> <div id='class.spec-10.note-1' class='note'>[&nbsp;<a class='note_link' href='#class.spec-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.spec-10.sentence-2' class='sentence'>The template arguments may be private types or
objects that would normally not be accessible<a class='hidden_link' href='#class.spec-10.sentence-2'>.</a></div> <div id='class.spec-10.sentence-3' class='sentence'>Dependent names cannot be checked when declaring the partial specialization,
but will be checked when substituting into the partial specialization<a class='hidden_link' href='#class.spec-10.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-134'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-134'>134)</a></div><div id='footnote-134.sentence-1' class='sentence'>There is no way in which they could be used<a class='hidden_link' href='#footnote-134.sentence-1'>.</a></div> <a href='#footnoteref-134'>⮥</a></div><div id='class.spec.match' class='section'><h4 ><a class='secnum' href='#class.spec.match' style='min-width:118pt'>13.7.5.1</a> Matching of class template partial specializations <a class='abbr_ref' href='temp.class.spec.match'>[temp.class.spec.match]</a></h4><div class='para' id='class.spec.match-1'><div class='marginalizedparent'><a class='marginalized' href='#class.spec.match-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3368'>#</a></div><div id='class.spec.match-1.sentence-1' class='sentence'>When a class template is used in a context that requires an instantiation of
the class,
it is necessary to determine whether the instantiation is to be generated
using the primary template or one of the partial specializations<a class='hidden_link' href='#class.spec.match-1.sentence-1'>.</a></div> <div id='class.spec.match-1.sentence-2' class='sentence'>This is done by matching the template arguments of the class template
specialization with the template argument lists of the partial
specializations<a class='hidden_link' href='#class.spec.match-1.sentence-2'>.</a></div><ul class='itemize'><li id='class.spec.match-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec.match-1.1'>(1.1)</a></div><div id='class.spec.match-1.1.sentence-1' class='sentence'>If exactly one matching specialization is found, the instantiation is
generated from that specialization<a class='hidden_link' href='#class.spec.match-1.1.sentence-1'>.</a></div></li><li id='class.spec.match-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec.match-1.2'>(1.2)</a></div><div id='class.spec.match-1.2.sentence-1' class='sentence'>If more than one matching specialization is found,
the <a href='#class.order'>partial order rules</a> are used to determine
whether one of the specializations is more specialized than the
others<a class='hidden_link' href='#class.spec.match-1.2.sentence-1'>.</a></div> <div id='class.spec.match-1.2.sentence-2' class='sentence'>If none of the specializations is more specialized than all of the
other matching specializations, then the use of the class template
is ambiguous and the program is ill-formed<a class='hidden_link' href='#class.spec.match-1.2.sentence-2'>.</a></div></li><li id='class.spec.match-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.spec.match-1.3'>(1.3)</a></div><div id='class.spec.match-1.3.sentence-1' class='sentence'>If no matches are found, the instantiation is generated from the
primary template<a class='hidden_link' href='#class.spec.match-1.3.sentence-1'>.</a></div></li></ul></div><div class='para' id='class.spec.match-2'><div class='marginalizedparent'><a class='marginalized' href='#class.spec.match-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3394'>#</a></div><div id='class.spec.match-2.sentence-1' class='sentence'>A partial specialization matches a given actual template argument
list if the template arguments of the partial specialization can be
<a href='#deduct'>deduced</a> from the actual template argument list,
and the deduced template arguments satisfy the <a href='#def:associated_constraints'>associated constraints</a>
of the partial specialization, if any<a class='hidden_link' href='#class.spec.match-2.sentence-1'>.</a></div> <div id='class.spec.match-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.spec.match-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A             <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span>            <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T, T<span class='operator'>*</span>, I<span class='anglebracket'>&gt;</span>   <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T1<span class='operator'>*</span>, T2, I<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// #3</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>                   <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, T<span class='operator'>*</span>, <span class='literal'>5</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// #4</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T1, T2<span class='operator'>*</span>, I<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// #5</span>

A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span>, <span class='literal'>1</span><span class='anglebracket'>&gt;</span>   a1;                    <span class='comment'>// uses #1</span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='operator'>*</span>, <span class='literal'>1</span><span class='anglebracket'>&gt;</span>  a2;                    <span class='comment'>// uses #2, <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>I</span> is <span class='tcode_in_codeblock'>1</span></span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>char</span><span class='operator'>*</span>, <span class='literal'>5</span><span class='anglebracket'>&gt;</span> a3;                    <span class='comment'>// uses #4, <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>char</span></span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>char</span><span class='operator'>*</span>, <span class='literal'>1</span><span class='anglebracket'>&gt;</span> a4;                    <span class='comment'>// uses #5, <span class='tcode_in_codeblock'>T1</span> is <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>T2</span> is <span class='tcode_in_codeblock'>char</span>, <span class='tcode_in_codeblock'>I</span> is <span class='tcode_in_codeblock'>1</span></span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>*</span>, <span class='keyword'>int</span><span class='operator'>*</span>, <span class='literal'>2</span><span class='anglebracket'>&gt;</span> a5;                    <span class='comment'>// ambiguous: matches #3 and #5</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='class.spec.match-2.example-2' class='example'>[&nbsp;<a class='example_link' href='#class.spec.match-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> t<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;      <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;          <span class='comment'>// #2</span>

<span class='keyword'>struct</span> Arg <span class='curlybracket'>{</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;

S<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> s1;                              <span class='comment'>// uses #1; the constraints of #2 are not satisfied</span>
S<span class='anglebracket'>&lt;</span>Arg<span class='anglebracket'>&gt;</span> s2;                              <span class='comment'>// uses #2; both constraints are satisfied but #2 is more specialized</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='class.spec.match-3'><div class='marginalizedparent'><a class='marginalized' href='#class.spec.match-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3429'>#</a></div><div id='class.spec.match-3.sentence-1' class='sentence'>If the template arguments of a partial specialization cannot be deduced
because of the structure of its <a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a>
and the <a class='grammarterm' href='#nt:template-id'>template-id</a>,
the program is ill-formed<a class='hidden_link' href='#class.spec.match-3.sentence-1'>.</a></div> <div id='class.spec.match-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.spec.match-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I, <span class='keyword'>int</span> J<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>I<span class='operator'>+</span><span class='literal'>5</span>, I<span class='operator'>*</span><span class='literal'>2</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;     <span class='comment'>// error</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>I, I<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;         <span class='comment'>// OK</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I, <span class='keyword'>int</span> J, <span class='keyword'>int</span> K<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B<span class='anglebracket'>&lt;</span>I, I<span class='operator'>*</span><span class='literal'>2</span>, <span class='literal'>2</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;    <span class='comment'>// OK</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='class.spec.match-4'><div class='marginalizedparent'><a class='marginalized' href='#class.spec.match-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3446'>#</a></div><div id='class.spec.match-4.sentence-1' class='sentence'>In a type name that refers to a class template specialization, (e.g.,
<span class='texttt'>A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span>, <span class='literal'>1</span><span class='anglebracket'>&gt;</span></span>)
the argument list shall match the template parameter list of the primary
template<a class='hidden_link' href='#class.spec.match-4.sentence-1'>.</a></div> <div id='class.spec.match-4.sentence-2' class='sentence'>The template arguments of a specialization are deduced from the arguments
of the primary template<a class='hidden_link' href='#class.spec.match-4.sentence-2'>.</a></div></div></div><div id='class.order' class='section'><h4 ><a class='secnum' href='#class.order' style='min-width:118pt'>13.7.5.2</a> Partial ordering of class template specializations <a class='abbr_ref' href='temp.class.order'>[temp.class.order]</a></h4><div class='para' id='class.order-1'><div class='marginalizedparent'><a class='marginalized' href='#class.order-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3456'>#</a></div><div id='class.order-1.sentence-1' class='sentence'>For two class template partial specializations,
the first is <a class='hidden_link' href='#def:more_specialized,class_template' id='def:more_specialized,class_template'><i >more specialized</i></a> than the second if, given the following
rewrite to two function templates, the first function template is more
specialized than the second according to the <a href='#func.order'>ordering rules for function
templates</a>:</div><ul class='itemize'><li id='class.order-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.order-1.1'>(1.1)</a></div><div id='class.order-1.1.sentence-1' class='sentence'>Each of the two
function templates has the same template parameters
and <a href='#def:associated_constraints'>associated constraints</a>
as the corresponding partial specialization<a class='hidden_link' href='#class.order-1.1.sentence-1'>.</a></div></li><li id='class.order-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.order-1.2'>(1.2)</a></div><div id='class.order-1.2.sentence-1' class='sentence'>Each function template
has a single function parameter
whose type is a class template specialization where the template arguments
are the corresponding template parameters from the function template
for each template argument
in the <a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a>
of the <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>
of the partial specialization<a class='hidden_link' href='#class.order-1.2.sentence-1'>.</a></div></li></ul></div><div class='para' id='class.order-2'><div class='marginalizedparent'><a class='marginalized' href='#class.order-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3480'>#</a></div><div id='class.order-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.order-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I, <span class='keyword'>int</span> J, <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I, <span class='keyword'>int</span> J<span class='anglebracket'>&gt;</span>          <span class='keyword'>class</span> X<span class='anglebracket'>&lt;</span>I, J, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;         <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span>                 <span class='keyword'>class</span> X<span class='anglebracket'>&lt;</span>I, I, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;         <span class='comment'>// #2</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I0, <span class='keyword'>int</span> J0<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>X<span class='anglebracket'>&lt;</span>I0, J0, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;                <span class='comment'>// A</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I0<span class='anglebracket'>&gt;</span>         <span class='keyword'>void</span> f<span class='parenthesis'>(</span>X<span class='anglebracket'>&lt;</span>I0, I0, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;                <span class='comment'>// B</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>auto</span> v<span class='anglebracket'>&gt;</span>    <span class='keyword'>class</span> Y <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>auto</span><span class='operator'>*</span> p<span class='anglebracket'>&gt;</span>   <span class='keyword'>class</span> Y<span class='anglebracket'>&lt;</span>p<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                            <span class='comment'>// #3</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>auto</span><span class='operator'>*</span><span class='operator'>*</span> pp<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y<span class='anglebracket'>&lt;</span>pp<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                           <span class='comment'>// #4</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>auto</span><span class='operator'>*</span> p0<span class='anglebracket'>&gt;</span>   <span class='keyword'>void</span> g<span class='parenthesis'>(</span>Y<span class='anglebracket'>&lt;</span>p0<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;                            <span class='comment'>// C</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>auto</span><span class='operator'>*</span><span class='operator'>*</span> pp0<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>Y<span class='anglebracket'>&lt;</span>pp0<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;                           <span class='comment'>// D</span>
</pre><div id='class.order-2.sentence-1' class='sentence'>According to the ordering rules for function templates,
the function template
<span class='textit'>B</span>
is more specialized than the function template
<span class='textit'>A</span>
and
the function template
<span class='textit'>D</span>
is more specialized than the function template
<span class='textit'>C</span><a class='hidden_link' href='#class.order-2.sentence-1'>.</a></div> <div id='class.order-2.sentence-2' class='sentence'>Therefore, the partial specialization #2
is more specialized than the partial specialization #1
and the partial specialization #4
is more specialized than the partial specialization #3<a class='hidden_link' href='#class.order-2.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='class.order-2.example-2' class='example'>[&nbsp;<a class='example_link' href='#class.order-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> t<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> D <span class='operator'>=</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> t<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> S <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;   <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>D T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;   <span class='comment'>// #2</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;     <span class='comment'>// A</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>D T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;     <span class='comment'>// B</span>
</pre> <div id='class.order-2.sentence-3' class='sentence'>
The partial specialization #2 is more specialized than #1
because <span class='texttt'>B</span> is more specialized than <span class='texttt'>A</span><a class='hidden_link' href='#class.order-2.sentence-3'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div id='class.spec.mfunc' class='section'><h4 ><a class='secnum' href='#class.spec.mfunc' style='min-width:118pt'>13.7.5.3</a> Members of class template specializations <a class='abbr_ref' href='temp.class.spec.mfunc'>[temp.class.spec.mfunc]</a></h4><div class='para' id='class.spec.mfunc-1'><div class='marginalizedparent'><a class='marginalized' href='#class.spec.mfunc-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3531'>#</a></div><div id='class.spec.mfunc-1.sentence-1' class='sentence'>The template parameter list of a member of a class template partial
specialization shall match the template parameter list of the class template
partial specialization<a class='hidden_link' href='#class.spec.mfunc-1.sentence-1'>.</a></div> <div id='class.spec.mfunc-1.sentence-2' class='sentence'>The template argument list of a member of a class template partial
specialization shall match the template argument list of the class template
partial specialization<a class='hidden_link' href='#class.spec.mfunc-1.sentence-2'>.</a></div> <div id='class.spec.mfunc-1.sentence-3' class='sentence'>A class template partial specialization is a distinct template<a class='hidden_link' href='#class.spec.mfunc-1.sentence-3'>.</a></div> <div id='class.spec.mfunc-1.sentence-4' class='sentence'>The members of the class template partial specialization are
unrelated to the members of the primary template<a class='hidden_link' href='#class.spec.mfunc-1.sentence-4'>.</a></div> <div id='class.spec.mfunc-1.sentence-5' class='sentence'>Class template partial specialization members that are used in a way that
requires a definition shall be defined; the definitions of members of the
primary template are never used as definitions for members of a class
template partial specialization<a class='hidden_link' href='#class.spec.mfunc-1.sentence-5'>.</a></div> <div id='class.spec.mfunc-1.sentence-6' class='sentence'>An explicit specialization of a member of a class template partial
specialization is declared in the same way as an explicit specialization of
the primary template<a class='hidden_link' href='#class.spec.mfunc-1.sentence-6'>.</a></div> <div id='class.spec.mfunc-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.spec.mfunc-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// primary class template</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='comment'>// member of primary class template</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>T,I<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='comment'>// class template partial specialization</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>T,<span class='literal'>2</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='comment'>// member of class template partial specialization</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>T,<span class='literal'>2</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='comment'>// explicit specialization</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='literal'>2</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='literal'>0</span><span class='anglebracket'>&gt;</span> a0;
  A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='literal'>2</span><span class='anglebracket'>&gt;</span> a2;
  a0<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK, uses definition of primary template's member</span>
  a2<span class='operator'>.</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK, uses definition of partial specialization's member</span>
  a2<span class='operator'>.</span>h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK, uses definition of explicit specialization's member</span>
  a2<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// error: no definition of <span class='tcode_in_codeblock'>f</span> for <span class='tcode_in_codeblock'>A&lt;T,2&gt;</span>; the primary template is not used here</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='class.spec.mfunc-2'><div class='marginalizedparent'><a class='marginalized' href='#class.spec.mfunc-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3582'>#</a></div><div id='class.spec.mfunc-2.sentence-1' class='sentence'>If a member template of a class template is partially specialized,
the member template partial specializations are member templates of
the enclosing class template;
if the enclosing class template is instantiated (<a href='#inst'>[temp.inst]</a>, <a href='#explicit'>[temp.explicit]</a>),
a declaration for every member template partial specialization is also
instantiated as part of creating the members of the class template
specialization<a class='hidden_link' href='#class.spec.mfunc-2.sentence-1'>.</a></div> <div id='class.spec.mfunc-2.sentence-2' class='sentence'>If the primary member template is explicitly specialized for a given
(implicit) specialization of the enclosing class template,
the partial specializations of the member template are ignored for this
specialization of the enclosing class template<a class='hidden_link' href='#class.spec.mfunc-2.sentence-2'>.</a></div> <div id='class.spec.mfunc-2.sentence-3' class='sentence'>If a partial specialization of the member template is explicitly specialized
for a given (implicit) specialization of the enclosing class template,
the primary member template and its other partial specializations are
still considered for this specialization of the enclosing class template<a class='hidden_link' href='#class.spec.mfunc-2.sentence-3'>.</a></div> <div id='class.spec.mfunc-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#class.spec.mfunc-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;                               <span class='comment'>// #1</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B<span class='anglebracket'>&lt;</span>T2<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;                          <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;            <span class='comment'>// #3</span>

A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span>  abcip;                                        <span class='comment'>// uses #2</span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> absip;                                        <span class='comment'>// uses #3</span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>  abci;                                          <span class='comment'>// uses #1</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div></div><div id='fct' class='section'><h3 ><a class='secnum' href='#fct' style='min-width:103pt'>13.7.6</a> Function templates <a class='abbr_ref' href='temp.fct'>[temp.fct]</a></h3><div class='para' id='fct-1'><div class='marginalizedparent'><a class='marginalized' href='#fct-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3615'>#</a></div><div id='fct-1.sentence-1' class='sentence'>A function template defines an unbounded set of related functions<a class='hidden_link' href='#fct-1.sentence-1'>.</a></div> <div id='fct-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#fct-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='fct-1.sentence-2' class='sentence'>A family of sort functions might be declared like this:</div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='fct-2'><div class='marginalizedparent'><a class='marginalized' href='#fct-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3626'>#</a></div><div id='fct-2.sentence-1' class='sentence'>A function template can be overloaded with other function templates
and with non-template functions (<a href='dcl.fct'>[dcl.fct]</a>)<a class='hidden_link' href='#fct-2.sentence-1'>.</a></div> <div id='fct-2.sentence-2' class='sentence'>A non-template function is not
related to a function template
(i.e., it is never considered to be a specialization),
even if it has the same name and type
as a potentially generated function template specialization<a class='hidden_link' href='#fct-2.sentence-2'>.</a><a class='footnotenum' href='#footnote-135' id='footnoteref-135'>135</a></div></div><div class='footnote' id='footnote-135'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-135'>135)</a></div><div id='footnote-135.sentence-1' class='sentence'>That is,
declarations of non-template functions do not merely guide
overload resolution of
function template specializations
with the same name<a class='hidden_link' href='#footnote-135.sentence-1'>.</a></div> <div id='footnote-135.sentence-2' class='sentence'>If such a non-template function is <a href='basic.def.odr'>odr-used</a> in a program, it must be defined;
it will not be implicitly instantiated using the function template definition<a class='hidden_link' href='#footnote-135.sentence-2'>.</a></div> <a href='#footnoteref-135'>⮥</a></div><div id='over.link' class='section'><h4 ><a class='secnum' href='#over.link' style='min-width:118pt'>13.7.6.1</a> Function template overloading <a class='abbr_ref' href='temp.over.link'>[temp.over.link]</a></h4><div class='para' id='over.link-1'><div class='marginalizedparent'><a class='marginalized' href='#over.link-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3643'>#</a></div><div id='over.link-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':overloading'></a></span>It is possible to overload function templates so that two different
function template specializations have the same type<a class='hidden_link' href='#over.link-1.sentence-1'>.</a></div> <div id='over.link-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#over.link-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div class='minipage'><pre class='codeblock'>
<span class='comment'>// translation unit 1:</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>; <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(int*)</span></span>
<span class='curlybracket'>}</span>
</pre></div>
<div class='minipage'><pre class='codeblock'>
<span class='comment'>// translation unit 2:</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>; <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int*&gt;(int*)</span></span>
<span class='curlybracket'>}</span>
</pre></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='over.link-2'><div class='marginalizedparent'><a class='marginalized' href='#over.link-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3672'>#</a></div><div id='over.link-2.sentence-1' class='sentence'>Such specializations are distinct functions and do not violate the
<a href='basic.def.odr'>one-definition rule</a><a class='hidden_link' href='#over.link-2.sentence-1'>.</a></div></div><div class='para' id='over.link-3'><div class='marginalizedparent'><a class='marginalized' href='#over.link-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3676'>#</a></div><div id='over.link-3.sentence-1' class='sentence'>The signature of a function template
is defined in <a href='intro.defs'>[intro.defs]</a><a class='hidden_link' href='#over.link-3.sentence-1'>.</a></div> <div id='over.link-3.sentence-2' class='sentence'>The names of the template parameters are significant only for establishing
the relationship between the template parameters and the rest of the
signature<a class='hidden_link' href='#over.link-3.sentence-2'>.</a></div> <div id='over.link-3.note-1' class='note'>[&nbsp;<a class='note_link' href='#over.link-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='over.link-3.sentence-3' class='sentence'>Two distinct function templates may have identical function return types and
function parameter lists, even if overload resolution alone cannot distinguish
them<a class='hidden_link' href='#over.link-3.sentence-3'>.</a></div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK: overloads the first template</span>
                                <span class='comment'>// distinguishable with an explicit template argument list</span>
</pre> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='over.link-4'><div class='marginalizedparent'><a class='marginalized' href='#over.link-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3694'>#</a></div><div id='over.link-4.sentence-1' class='sentence'>When an expression that references a template parameter is used in the
function parameter list or the return type in the declaration of a
function template, the expression that references the template
parameter is part of the signature of the function template<a class='hidden_link' href='#over.link-4.sentence-1'>.</a></div> <div id='over.link-4.sentence-2' class='sentence'>This is
necessary to permit a declaration of a function template in one
translation unit to be linked with another declaration of the function
template in another translation unit and, conversely, to ensure that
function templates that are intended to be distinct are not linked
with one another<a class='hidden_link' href='#over.link-4.sentence-2'>.</a></div> <div id='over.link-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#over.link-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I, <span class='keyword'>int</span> J<span class='anglebracket'>&gt;</span> A<span class='anglebracket'>&lt;</span>I<span class='operator'>+</span>J<span class='anglebracket'>&gt;</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span>, A<span class='anglebracket'>&lt;</span>J<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;   <span class='comment'>// #1</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> K, <span class='keyword'>int</span> L<span class='anglebracket'>&gt;</span> A<span class='anglebracket'>&lt;</span>K<span class='operator'>+</span>L<span class='anglebracket'>&gt;</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>K<span class='anglebracket'>&gt;</span>, A<span class='anglebracket'>&lt;</span>L<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;   <span class='comment'>// same as #1</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I, <span class='keyword'>int</span> J<span class='anglebracket'>&gt;</span> A<span class='anglebracket'>&lt;</span>I<span class='operator'>-</span>J<span class='anglebracket'>&gt;</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span>, A<span class='anglebracket'>&lt;</span>J<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;   <span class='comment'>// different from #1</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='over.link-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#over.link-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='over.link-4.sentence-3' class='sentence'>Most expressions that use template parameters use non-type template
parameters, but it is possible for an expression to reference a type
parameter<a class='hidden_link' href='#over.link-4.sentence-3'>.</a></div> <div id='over.link-4.sentence-4' class='sentence'>For example, a template type parameter can be used in the
<span class='texttt'><span class='keyword'>sizeof</span></span> operator<a class='hidden_link' href='#over.link-4.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='over.link-5'><div class='marginalizedparent'><a class='marginalized' href='#over.link-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3720'>#</a></div><div id='over.link-5.sentence-1' class='sentence'>Two expressions involving template parameters are considered
<a class='hidden_link' href='#def:equivalent,expressions' id='def:equivalent,expressions'><i >equivalent</i></a>
if two function definitions containing the expressions would satisfy
the <a href='basic.def.odr'>one-definition rule</a>, except that the tokens used
to name the template parameters may differ as long as a token used to
name a template parameter in one expression is replaced by another token
that names the same template parameter in the other expression<a class='hidden_link' href='#over.link-5.sentence-1'>.</a></div> <div id='over.link-5.sentence-2' class='sentence'>Two unevaluated operands that do not involve template parameters
are considered equivalent
if two function definitions containing the expressions
would satisfy the one-definition rule,
except that the tokens used to name types and declarations may differ
as long as they name the same entities, and
the tokens used to form concept-ids may differ
as long as the two <a class='grammarterm' href='#nt:template-id'>template-id</a><span class='textit'>s</span> are the same (<a href='#type'>[temp.type]</a>)<a class='hidden_link' href='#over.link-5.sentence-2'>.</a></div> <div id='over.link-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#over.link-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='over.link-5.sentence-3' class='sentence'>For instance, <span class='texttt'>A<span class='anglebracket'>&lt;</span><span class='literal'>42</span><span class='anglebracket'>&gt;</span></span> and <span class='texttt'>A<span class='anglebracket'>&lt;</span><span class='literal'>40</span><span class='operator'>+</span><span class='literal'>2</span><span class='anglebracket'>&gt;</span></span> name the same type<a class='hidden_link' href='#over.link-5.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='over.link-5.sentence-4' class='sentence'>
Two <a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a><span class='textit'>s</span> are never considered equivalent<a class='hidden_link' href='#over.link-5.sentence-4'>.</a></div> <div id='over.link-5.note-2' class='note'>[&nbsp;<a class='note_link' href='#over.link-5.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='over.link-5.sentence-5' class='sentence'>The intent is to avoid <a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a><span class='textit'>s</span> appearing in the
signature of a function template with external linkage<a class='hidden_link' href='#over.link-5.sentence-5'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='over.link-5.sentence-6' class='sentence'>
For determining whether two dependent names (<a href='#dep'>[temp.dep]</a>) are
equivalent, only the name itself is considered, not the result of name
lookup in the context of the template<a class='hidden_link' href='#over.link-5.sentence-6'>.</a></div> <div id='over.link-5.sentence-7' class='sentence'>If multiple declarations of the
same function template differ in the result of this name lookup, the
result for the first declaration is used<a class='hidden_link' href='#over.link-5.sentence-7'>.</a></div> <div id='over.link-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#over.link-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I, <span class='keyword'>int</span> J<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>I<span class='operator'>+</span>J<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;         <span class='comment'>// #1</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> K, <span class='keyword'>int</span> L<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>K<span class='operator'>+</span>L<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;         <span class='comment'>// same as #1</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span>g<span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span>g<span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>         <span class='comment'>// redeclaration of <span class='tcode_in_codeblock'>h()</span> uses the earlier lookup&hellip;</span>
  <span class='curlybracket'>{</span> <span class='keyword'>return</span> g<span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>                            <span class='comment'>// &hellip; although the lookup here does find <span class='tcode_in_codeblock'>g(int)</span></span>
<span class='keyword'>int</span> i <span class='operator'>=</span> h<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                               <span class='comment'>// template argument substitution fails; <span class='tcode_in_codeblock'>g(int)</span></span>
                                                <span class='comment'>// was not in scope at the first declaration of <span class='tcode_in_codeblock'>h()</span></span>

<span class='comment'>// ill-formed, no diagnostic required: the two expressions are functionally equivalent but not equivalent</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> foo<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>char</span> <span class='parenthesis'>(</span><span class='operator'>*</span>s<span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span>, N<span class='parenthesis'>)</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> foo<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>char</span> <span class='parenthesis'>(</span><span class='operator'>*</span>s<span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span>, N<span class='parenthesis'>)</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;

<span class='comment'>// two different declarations because the non-dependent portions are not considered equivalent</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> spam<span class='parenthesis'>(</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span> <span class='parenthesis'>(</span><span class='operator'>*</span>s<span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> spam<span class='parenthesis'>(</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span> <span class='parenthesis'>(</span><span class='operator'>*</span>s<span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='over.link-5.sentence-8' class='sentence'>Two potentially-evaluated expressions involving template parameters that are not equivalent are
<a class='hidden_link' href='#def:functionally_equivalent,expressions' id='def:functionally_equivalent,expressions'><i >functionally equivalent</i></a>
if, for any given set of template arguments, the evaluation of the
expression results in the same value<a class='hidden_link' href='#over.link-5.sentence-8'>.</a></div> <div id='over.link-5.sentence-9' class='sentence'>Two unevaluated operands that are not equivalent
are functionally equivalent if, for any given set of template arguments,
the expressions perform
the same operations in the same order with the same entities<a class='hidden_link' href='#over.link-5.sentence-9'>.</a></div> <div id='over.link-5.note-3' class='note'>[&nbsp;<a class='note_link' href='#over.link-5.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='over.link-5.sentence-10' class='sentence'>For instance, one could have redundant parentheses<a class='hidden_link' href='#over.link-5.sentence-10'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='over.link-6'><div class='marginalizedparent'><a class='marginalized' href='#over.link-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3784'>#</a></div><div id='over.link-6.sentence-1' class='sentence'>Two <a class='grammarterm' href='#nt:template-head'>template-head</a><span class='textit'>s</span> are
<a class='hidden_link' href='#def:equivalent,template-heads' id='def:equivalent,template-heads'><i >equivalent</i></a> if
their <a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a><span class='textit'>s</span> have the same length,
corresponding <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span> are equivalent
and such that if either <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
is declared with a <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a>,
they are both declared with <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a>s that are equivalent,
and if either <a class='grammarterm' href='#nt:template-head'>template-head</a> has a <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a>,
they both have
<a class='grammarterm' href='#nt:requires-clause'>requires-clause</a><span class='textit'>s</span> and the corresponding
<a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a><span class='textit'>s</span> are equivalent<a class='hidden_link' href='#over.link-6.sentence-1'>.</a></div> <div id='over.link-6.sentence-2' class='sentence'>Two <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span> are
<a class='hidden_link' href='#def:equivalent,template-parameters' id='def:equivalent,template-parameters'><i >equivalent</i></a>
under the following conditions:
<ul class='itemize'><li id='over.link-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#over.link-6.1'>(6.1)</a></div>they declare template parameters of the same kind,</li><li id='over.link-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#over.link-6.2'>(6.2)</a></div>if either declares a template parameter pack, they both do,</li><li id='over.link-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#over.link-6.3'>(6.3)</a></div>if they declare non-type template parameters,
they have equivalent types
ignoring the use of <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a><span class='textit'>s</span> for placeholder types, and</li><li id='over.link-6.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#over.link-6.4'>(6.4)</a></div>if they declare template template parameters, their template
parameters are equivalent<a class='hidden_link' href='#over.link-6.sentence-2'>.</a></li></ul></div> <div id='over.link-6.sentence-3' class='sentence'>
When determining whether types or <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a><span class='textit'>s</span>
are equivalent, the rules above are used to compare expressions
involving template parameters<a class='hidden_link' href='#over.link-6.sentence-3'>.</a></div> <div id='over.link-6.sentence-4' class='sentence'>Two <a class='grammarterm' href='#nt:template-head'>template-head</a><span class='textit'>s</span> are
<a class='hidden_link' href='#def:functionally_equivalent,template-heads' id='def:functionally_equivalent,template-heads'><i >functionally equivalent</i></a>
if they accept and are satisfied by (<a href='#constr.constr'>[temp.constr.constr]</a>)
the same set of template argument lists<a class='hidden_link' href='#over.link-6.sentence-4'>.</a></div></div><div class='para' id='over.link-7'><div class='marginalizedparent'><a class='marginalized' href='#over.link-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3816'>#</a></div><div id='over.link-7.sentence-1' class='sentence'>Two function templates are
<a class='hidden_link' href='#def:equivalent,function_templates' id='def:equivalent,function_templates'><i >equivalent</i></a>
if they
are declared in the same scope,
have the same name,
have equivalent <a class='grammarterm' href='#nt:template-head'>template-head</a><span class='textit'>s</span>,
and
have return types, parameter lists,
and trailing <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a><span class='textit'>s</span> (if any)
that are equivalent using the rules described above to compare
expressions involving
template parameters<a class='hidden_link' href='#over.link-7.sentence-1'>.</a></div> <div id='over.link-7.sentence-2' class='sentence'>Two function templates are
<a class='hidden_link' href='#def:functionally_equivalent,function_templates' id='def:functionally_equivalent,function_templates'><i >functionally equivalent</i></a>
if they
are declared in the same scope,
have the same name,
accept and are satisfied by the same set of template argument lists,
and
have return types and parameter lists that
are functionally equivalent using the rules described above to
compare expressions involving
template parameters<a class='hidden_link' href='#over.link-7.sentence-2'>.</a></div> <div id='over.link-7.sentence-3' class='sentence'>If the validity or meaning of the program depends on
whether two constructs are equivalent, and they are
functionally equivalent but not equivalent, the program is ill-formed,
no diagnostic required<a class='hidden_link' href='#over.link-7.sentence-3'>.</a></div></div><div class='para' id='over.link-8'><div class='marginalizedparent'><a class='marginalized' href='#over.link-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3848'>#</a></div><div id='over.link-8.note-1' class='note'>[&nbsp;<a class='note_link' href='#over.link-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='over.link-8.sentence-1' class='sentence'>This rule guarantees that equivalent declarations will be linked with
one another, while not requiring implementations to use heroic efforts
to guarantee that functionally equivalent declarations will be treated
as distinct<a class='hidden_link' href='#over.link-8.sentence-1'>.</a></div> <div id='over.link-8.sentence-2' class='sentence'>For example, the last two declarations are functionally
equivalent and would cause a program to be ill-formed:</div><pre class='codeblock'>
<span class='comment'>// guaranteed to be the same</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span>, A<span class='anglebracket'>&lt;</span>I<span class='operator'>+</span><span class='literal'>10</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span>, A<span class='anglebracket'>&lt;</span>I<span class='operator'>+</span><span class='literal'>10</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;

<span class='comment'>// guaranteed to be different</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span>, A<span class='anglebracket'>&lt;</span>I<span class='operator'>+</span><span class='literal'>10</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span>, A<span class='anglebracket'>&lt;</span>I<span class='operator'>+</span><span class='literal'>11</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;

<span class='comment'>// ill-formed, no diagnostic required</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span>, A<span class='anglebracket'>&lt;</span>I<span class='operator'>+</span><span class='literal'>10</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>I<span class='anglebracket'>&gt;</span>, A<span class='anglebracket'>&lt;</span>I<span class='operator'>+</span><span class='literal'>1</span><span class='operator'>+</span><span class='literal'>2</span><span class='operator'>+</span><span class='literal'>3</span><span class='operator'>+</span><span class='literal'>4</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div id='func.order' class='section'><h4 ><a class='secnum' href='#func.order' style='min-width:118pt'>13.7.6.2</a> Partial ordering of function templates <a class='abbr_ref' href='temp.func.order'>[temp.func.order]</a></h4><div class='para' id='func.order-1'><div class='marginalizedparent'><a class='marginalized' href='#func.order-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3874'>#</a></div><div id='func.order-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':overloading,resolution,template'></a></span>If a function template is overloaded,
the use of a function template specialization might be ambiguous because
<a href='#deduct'>template argument deduction</a> may associate the function
template specialization with more than one function template declaration<a class='hidden_link' href='#func.order-1.sentence-1'>.</a></div> <div id='func.order-1.sentence-2' class='sentence'><a class='hidden_link' href='#def:template,function,partial_ordering' id='def:template,function,partial_ordering'><i >Partial ordering</i></a>
of overloaded function template declarations is used in the following contexts
to select the function template to which a function template specialization
refers:
<ul class='itemize'><li id='func.order-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-1.1'>(1.1)</a></div>during overload resolution for a call to a function template specialization (<a href='over.match.best'>[over.match.best]</a>);</li><li id='func.order-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-1.2'>(1.2)</a></div>when the address of a function template specialization is taken;</li><li id='func.order-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-1.3'>(1.3)</a></div>when a placement operator delete that is a
function template
specialization
is selected to match a placement operator new (<a href='basic.stc.dynamic.deallocation'>[basic.stc.dynamic.deallocation]</a>, <a href='expr.new'>[expr.new]</a>);</li><li id='func.order-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-1.4'>(1.4)</a></div>when a <a href='#friend'>friend function declaration</a>, an
<a href='#explicit'>explicit instantiation</a> or an <a href='#expl.spec'>explicit specialization</a> refers to
a function template specialization<a class='hidden_link' href='#func.order-1.sentence-2'>.</a></li></ul></div></div><div class='para' id='func.order-2'><div class='marginalizedparent'><a class='marginalized' href='#func.order-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3901'>#</a></div><div id='func.order-2.sentence-1' class='sentence'>Partial ordering selects which of two function templates is more
specialized than the other by transforming each template in turn
(see next paragraph) and performing template argument deduction
using the function type<a class='hidden_link' href='#func.order-2.sentence-1'>.</a></div> <div id='func.order-2.sentence-2' class='sentence'>The deduction process determines whether
one of the templates is more specialized than the other<a class='hidden_link' href='#func.order-2.sentence-2'>.</a></div> <div id='func.order-2.sentence-3' class='sentence'>If so, the
more specialized template is the one chosen by the partial ordering
process<a class='hidden_link' href='#func.order-2.sentence-3'>.</a></div> <div id='func.order-2.sentence-4' class='sentence'>If both deductions succeed, the partial ordering selects
the more constrained template (if one exists) as determined below<a class='hidden_link' href='#func.order-2.sentence-4'>.</a></div></div><div class='para' id='func.order-3'><div class='marginalizedparent'><a class='marginalized' href='#func.order-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3913'>#</a></div><div id='func.order-3.sentence-1' class='sentence'>To produce the transformed template, for each type, non-type, or template
template parameter (including
<a href='#def:template_parameter_pack'>template parameter packs</a>
thereof) synthesize a unique type, value, or class template
respectively and substitute it for each occurrence of that parameter
in the function type of the template<a class='hidden_link' href='#func.order-3.sentence-1'>.</a></div> <div id='func.order-3.note-1' class='note'>[&nbsp;<a class='note_link' href='#func.order-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='func.order-3.sentence-2' class='sentence'>The type replacing the placeholder
in the type of the value synthesized for a non-type template parameter
is also a unique synthesized type<a class='hidden_link' href='#func.order-3.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='func.order-3.sentence-3' class='sentence'>
Each function template <span class='math'><span class='mathalpha'>M</span></span> that is a member function
is considered to have
a new first parameter of type <span class='math'><span class='mathalpha'>X</span>(<span class='mathalpha'>M</span>)</span>, described below,
inserted in its function parameter list<a class='hidden_link' href='#func.order-3.sentence-3'>.</a></div> <div id='func.order-3.sentence-4' class='sentence'>If exactly one of the function templates was considered by overload resolution
via a rewritten candidate (<a href='over.match.oper'>[over.match.oper]</a>)
with a reversed order of parameters,
then the order of the function parameters in its transformed template
is reversed<a class='hidden_link' href='#func.order-3.sentence-4'>.</a></div> <div id='func.order-3.sentence-5' class='sentence'>For a function template <span class='math'><span class='mathalpha'>M</span></span> with cv-qualifiers <span class='mathit'>cv</span>
that is a member of a class <span class='math'><span class='mathalpha'>A</span></span>:</div><ul class='itemize'><li id='func.order-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-3.1'>(3.1)</a></div><div id='func.order-3.1.sentence-1' class='sentence'>The type <span class='math'><span class='mathalpha'>X</span>(<span class='mathalpha'>M</span>)</span> is “rvalue reference to <span class='mathit'>cv</span> <span class='math'><span class='mathalpha'>A</span></span>”
if the optional <a class='grammarterm' href='dcl.decl#nt:ref-qualifier'>ref-qualifier</a> of
<span class='math'><span class='mathalpha'>M</span></span> is <span class='texttt'><span class='operator'>&amp;</span><span class='operator'>&amp;</span></span> or
if <span class='math'><span class='mathalpha'>M</span></span> has no <a class='grammarterm' href='dcl.decl#nt:ref-qualifier'>ref-qualifier</a> and
the positionally corresponding parameter of the other transformed template
has rvalue reference type;
if this determination depends recursively upon
whether <span class='math'><span class='mathalpha'>X</span>(<span class='mathalpha'>M</span>)</span> is an rvalue reference type,
it is not considered to have rvalue reference type<a class='hidden_link' href='#func.order-3.1.sentence-1'>.</a></div></li><li id='func.order-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-3.2'>(3.2)</a></div><div id='func.order-3.2.sentence-1' class='sentence'>Otherwise, <span class='math'><span class='mathalpha'>X</span>(<span class='mathalpha'>M</span>)</span> is “lvalue reference to <span class='mathit'>cv</span> <span class='math'><span class='mathalpha'>A</span></span>”<a class='hidden_link' href='#func.order-3.2.sentence-1'>.</a></div></li></ul><div id='func.order-3.note-2' class='note'>[&nbsp;<a class='note_link' href='#func.order-3.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='func.order-3.sentence-6' class='sentence'>This allows a non-static
member to be ordered with respect to a non-member function and for the results
to be equivalent to the ordering of two equivalent non-members<a class='hidden_link' href='#func.order-3.sentence-6'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='func.order-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#func.order-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> R<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span>R<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;              <span class='comment'>// #1</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> R<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> <span class='keyword'>operator</span><span class='operator'>*</span><span class='parenthesis'>(</span>T<span class='operator'>&amp;</span>, R<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;   <span class='comment'>// #2</span>

<span class='comment'>// The declaration of <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;operator*</span> is transformed into the equivalent of</span>
<span class='comment'>// <span class='tcode_in_codeblock'>template&lt;class R&gt; int operator*(B&lt;A&gt;&amp;, R&amp;);</span>&emsp;&ensp;&emsp;&ensp;&emsp;&ensp;// #1a</span>

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A a;
  B<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span> b;
  b <span class='operator'>*</span> a;                                            <span class='comment'>// calls #1</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='func.order-4'><div class='marginalizedparent'><a class='marginalized' href='#func.order-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L3978'>#</a></div><div id='func.order-4.sentence-1' class='sentence'>Using the transformed function template's function type,
perform type deduction against the other template as described in <a href='#deduct.partial'>[temp.deduct.partial]</a><a class='hidden_link' href='#func.order-4.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='func.order-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#func.order-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> A<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> T<span class='operator'>*</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> m<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>*</span> p;
  f<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>f(const T*)</span> is more specialized than <span class='tcode_in_codeblock'>f(T)</span> or <span class='tcode_in_codeblock'>f(T*)</span></span>
  <span class='keyword'>float</span> x;
  g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;             <span class='comment'>// ambiguous: <span class='tcode_in_codeblock'>g(T)</span> or <span class='tcode_in_codeblock'>g(T&amp;)</span></span>
  A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> z;
  h<span class='parenthesis'>(</span>z<span class='parenthesis'>)</span>;             <span class='comment'>// overload resolution selects <span class='tcode_in_codeblock'>h(A&lt;T&gt;&amp;)</span></span>
  <span class='keyword'>const</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> z2;
  h<span class='parenthesis'>(</span>z2<span class='parenthesis'>)</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>h(const T&amp;)</span> is called because <span class='tcode_in_codeblock'>h(A&lt;T&gt;&amp;)</span> is not callable</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='func.order-5'><div class='marginalizedparent'><a class='marginalized' href='#func.order-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4009'>#</a></div><div id='func.order-5.sentence-1' class='sentence'>If deduction against the other template succeeds for both transformed templates,
constraints can be considered as follows:
<ul class='itemize'><li id='func.order-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-5.1'>(5.1)</a></div>If their <a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a><span class='textit'>s</span>
(possibly including <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>
invented for an abbreviated function template (<a href='dcl.fct'>[dcl.fct]</a>)) or
function parameter lists differ in length,
neither template is more specialized than the other.</li><li id='func.order-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-5.2'>(5.2)</a></div>Otherwise:
<ul class='itemize'><li id='func.order-5.2.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#func.order-5.2.1'>(5.2.1)</a></div>If exactly one of the templates was considered by overload resolution
via a rewritten candidate with reversed order of parameters:
<ul class='itemize'><li id='func.order-5.2.1.1'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#func.order-5.2.1.1'>(5.2.1.1)</a></div>If, for either template, some of the <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>
are not deducible from their function parameters,
neither template is more specialized than the other.</li><li id='func.order-5.2.1.2'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#func.order-5.2.1.2'>(5.2.1.2)</a></div>If there is either no reordering or more than one reordering
of the associated <a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a>
such that
<ul class='itemize'><li id='func.order-5.2.1.2.1'><div class='marginalizedparent' style='left:-13em'><a class='marginalized' href='#func.order-5.2.1.2.1'>(5.2.1.2.1)</a></div>the corresponding <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>
of the <a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a><span class='textit'>s</span> are equivalent and</li><li id='func.order-5.2.1.2.2'><div class='marginalizedparent' style='left:-13em'><a class='marginalized' href='#func.order-5.2.1.2.2'>(5.2.1.2.2)</a></div>the function parameters that positionally correspond
between the two templates are of the same type,</li></ul>
neither template is more specialized than the other.</li></ul></li><li id='func.order-5.2.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#func.order-5.2.2'>(5.2.2)</a></div>Otherwise, if the corresponding <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>
of the <a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a><span class='textit'>s</span>
are not equivalent (<a href='#over.link'>[temp.over.link]</a>) or
if the function parameters that positionally correspond
between the two templates are not of the same type,
neither template is more specialized than the other.</li></ul></li><li id='func.order-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-5.3'>(5.3)</a></div>Otherwise, if the context in which the partial ordering is done
is that of a call to a conversion function and
the return types of the templates are not the same,
then neither template is more specialized than the other.</li><li id='func.order-5.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-5.4'>(5.4)</a></div>Otherwise,
if one template is more constrained than the other (<a href='#constr.order'>[temp.constr.order]</a>),
the more constrained template is more specialized than the other.</li><li id='func.order-5.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#func.order-5.5'>(5.5)</a></div>Otherwise, neither template is more specialized than the other.</li></ul></div> <div id='func.order-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#func.order-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>bool</span> True <span class='operator'>=</span> <span class='literal'>true</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> True<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span>C <span class='keyword'>auto</span> <span class='operator'>&amp;</span>, <span class='keyword'>auto</span> <span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span>C Q<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>Q <span class='operator'>&amp;</span>, C <span class='keyword'>auto</span> <span class='operator'>&amp;</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>struct</span> A <span class='operator'>*</span>ap, <span class='keyword'>struct</span> B <span class='operator'>*</span>bp<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='operator'>*</span>ap, <span class='operator'>*</span>bp<span class='parenthesis'>)</span>;                  <span class='comment'>// OK: Can use different methods to produce template parameters</span>
<span class='curlybracket'>}</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, C U, <span class='keyword'>typename</span> V<span class='anglebracket'>&gt;</span> <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span>X<span class='anglebracket'>&lt;</span>T, U<span class='anglebracket'>&gt;</span>, V<span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span>C T, C U, C V<span class='anglebracket'>&gt;</span>               <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span>T, X<span class='anglebracket'>&lt;</span>U, V<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  X<span class='anglebracket'>&lt;</span><span class='keyword'>void</span> <span class='operator'>*</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span>;        <span class='comment'>// OK: Correspondence of [<span class='tcode_in_codeblock'>T</span>, <span class='tcode_in_codeblock'>U</span>, <span class='tcode_in_codeblock'>V</span>] and [<span class='tcode_in_codeblock'>U</span>, <span class='tcode_in_codeblock'>V</span>, <span class='tcode_in_codeblock'>T</span>]</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='func.order-6'><div class='marginalizedparent'><a class='marginalized' href='#func.order-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4087'>#</a></div><div id='func.order-6.note-1' class='note'>[&nbsp;<a class='note_link' href='#func.order-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='func.order-6.sentence-1' class='sentence'>Since partial ordering in a call context considers only parameters
for which there are explicit call arguments, some parameters are ignored (namely,
function parameter packs, parameters with default arguments, and ellipsis
parameters)<a class='hidden_link' href='#func.order-6.sentence-1'>.</a></div> <div id='func.order-6.example-1' class='example'>[&nbsp;<a class='example_link' href='#func.order-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;                            <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>*</span>, <span class='keyword'>int</span><span class='operator'>=</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                    <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;                            <span class='comment'>// #3</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='operator'>*</span>, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;                      <span class='comment'>// #4</span>

</pre>
<pre class='codeblock'>
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span><span class='operator'>*</span> ip;
  f<span class='parenthesis'>(</span>ip<span class='parenthesis'>)</span>;                                                <span class='comment'>// calls #2</span>
  g<span class='parenthesis'>(</span>ip<span class='parenthesis'>)</span>;                                                <span class='comment'>// calls #4</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='func.order-6.example-2' class='example'>[&nbsp;<a class='example_link' href='#func.order-6.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>U, A<span class='anglebracket'>&lt;</span>U, T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> p <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span>;   <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>         <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>U, A<span class='anglebracket'>&lt;</span>U, U<span class='anglebracket'>&gt;</span><span class='operator'>*</span> p <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span>;   <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T         <span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T, T <span class='operator'>=</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;          <span class='comment'>// #3</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T, U <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;         <span class='comment'>// #4</span>

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>42</span>, <span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                          <span class='comment'>// calls #2</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>42</span><span class='parenthesis'>)</span>;                                           <span class='comment'>// error: ambiguous</span>
  g<span class='parenthesis'>(</span><span class='literal'>42</span><span class='parenthesis'>)</span>;                                                <span class='comment'>// error: ambiguous</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='func.order-6.example-3' class='example'>[&nbsp;<a class='example_link' href='#func.order-6.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T, U<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;          <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T            <span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;                <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='operator'>*</span>, U<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;         <span class='comment'>// #3</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T            <span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;                <span class='comment'>// #4</span>

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>i<span class='parenthesis'>)</span>;                                                <span class='comment'>// OK: calls #2</span>
  g<span class='parenthesis'>(</span><span class='operator'>&amp;</span>i<span class='parenthesis'>)</span>;                                                <span class='comment'>// OK: calls #3</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div></div><div id='alias' class='section'><h3 ><a class='secnum' href='#alias' style='min-width:103pt'>13.7.7</a> Alias templates <a class='abbr_ref' href='temp.alias'>[temp.alias]</a></h3><div class='para' id='alias-1'><div class='marginalizedparent'><a class='marginalized' href='#alias-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4142'>#</a></div><div id='alias-1.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:template-declaration'>template-declaration</a> in which the <a class='grammarterm' href='dcl.pre#nt:declaration'>declaration</a> is an
<a class='grammarterm' href='dcl.pre#nt:alias-declaration'>alias-declaration</a> declares the
<a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> to be an <a class='hidden_link' href='#def:template,alias' id='def:template,alias'><i >alias template</i></a><a class='hidden_link' href='#alias-1.sentence-1'>.</a></div> <div id='alias-1.sentence-2' class='sentence'>An alias template is a name for a family of
types<a class='hidden_link' href='#alias-1.sentence-2'>.</a></div> <div id='alias-1.sentence-3' class='sentence'>The name of the alias template is a <a class='grammarterm' href='#nt:template-name'>template-name</a><a class='hidden_link' href='#alias-1.sentence-3'>.</a></div></div><div class='para' id='alias-2'><div class='marginalizedparent'><a class='marginalized' href='#alias-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4149'>#</a></div><div id='alias-2.sentence-1' class='sentence'>When a <a class='grammarterm' href='#nt:template-id'>template-id</a> refers to the specialization of
an alias template, it is equivalent to the associated type obtained by
substitution of its <a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span> for the
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span> in the <a class='grammarterm' href='dcl.name#nt:defining-type-id'>defining-type-id</a> of
the alias template<a class='hidden_link' href='#alias-2.sentence-1'>.</a></div> <div id='alias-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#alias-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='alias-2.sentence-2' class='sentence'>An alias template name is never deduced<a class='hidden_link' href='#alias-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='alias-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#alias-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Alloc <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> Vec <span class='operator'>=</span> vector<span class='anglebracket'>&lt;</span>T, Alloc<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span>;
Vec<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> v;         <span class='comment'>// same as <span class='tcode_in_codeblock'>vector&lt;int, Alloc&lt;int&gt;&gt; v;</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> process<span class='parenthesis'>(</span>Vec<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span>
  <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> process<span class='parenthesis'>(</span>vector<span class='anglebracket'>&lt;</span>T, Alloc<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> w<span class='parenthesis'>)</span>
  <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>     <span class='comment'>// error: redefinition</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> TT<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>TT<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;

f<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;               <span class='comment'>// error: <span class='tcode_in_codeblock'>Vec</span> not deduced</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span>,<span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> TT<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span>TT<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, Alloc<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
g<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;               <span class='comment'>// OK: <span class='tcode_in_codeblock'>TT</span> = <span class='tcode_in_codeblock'>vector</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='alias-3'><div class='marginalizedparent'><a class='marginalized' href='#alias-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4184'>#</a></div><div id='alias-3.sentence-1' class='sentence'>However, if the <a class='grammarterm' href='#nt:template-id'>template-id</a> is dependent, subsequent template
argument substitution still applies to the <a class='grammarterm' href='#nt:template-id'>template-id</a><a class='hidden_link' href='#alias-3.sentence-1'>.</a></div> <div id='alias-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#alias-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> void_t <span class='operator'>=</span> <span class='keyword'>void</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> void_t<span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='operator'>::</span>foo<span class='anglebracket'>&gt;</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// error: <span class='tcode_in_codeblock'>int</span> does not have a nested type <span class='tcode_in_codeblock'>foo</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='alias-4'><div class='marginalizedparent'><a class='marginalized' href='#alias-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4195'>#</a></div><div id='alias-4.sentence-1' class='sentence'>The <a class='grammarterm' href='dcl.name#nt:defining-type-id'>defining-type-id</a> in an alias template declaration shall not refer to
the alias template being declared<a class='hidden_link' href='#alias-4.sentence-1'>.</a></div> <div id='alias-4.sentence-2' class='sentence'>The type produced by an alias template
specialization shall not directly or indirectly make use of that specialization<a class='hidden_link' href='#alias-4.sentence-2'>.</a></div> <div id='alias-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#alias-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> B <span class='operator'>=</span> <span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>U;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> U;
<span class='curlybracket'>}</span>;
B<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span> b;         <span class='comment'>// error: instantiation of <span class='tcode_in_codeblock'>B&lt;short&gt;</span> uses own type via <span class='tcode_in_codeblock'>A&lt;short&gt;&#x200b;::&#x200b;U</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='alias-5'><div class='marginalizedparent'><a class='marginalized' href='#alias-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4210'>#</a></div><div id='alias-5.sentence-1' class='sentence'>The type of a <a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a>
appearing in an alias template declaration
is different between instantiations of that template,
even when the <a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a> is not dependent<a class='hidden_link' href='#alias-5.sentence-1'>.</a></div> <div id='alias-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#alias-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>using</span> A <span class='operator'>=</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;   <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;int&gt;</span> and <span class='tcode_in_codeblock'>A&lt;char&gt;</span> refer to different closure types</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div id='concept' class='section'><h3 ><a class='secnum' href='#concept' style='min-width:103pt'>13.7.8</a> Concept definitions <a class='abbr_ref' href='temp.concept'>[temp.concept]</a></h3><div class='para' id='concept-1'><div class='marginalizedparent'><a class='marginalized' href='#concept-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4224'>#</a></div><div id='concept-1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:concept' id='def:concept'><i >concept</i></a> is a template
that defines constraints on its template arguments<a class='hidden_link' href='#concept-1.sentence-1'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:concept-definition' id='nt:concept-definition'>concept-definition:</a>
&#9;<span class='texttt'><span class='keyword'>concept</span></span><span class='indexparent'><a class='index' id=':concept'></a></span> <a class='grammarterm' href='#nt:concept-name'>concept-name</a> <span class='terminal'><span class='operator'>=</span></span> <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> <span class='terminal'>;</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:concept-name' id='nt:concept-name'>concept-name:</a>
&#9;<a class='grammarterm' href='lex.name#nt:identifier'>identifier</a>
</pre></div><div class='para' id='concept-2'><div class='marginalizedparent'><a class='marginalized' href='#concept-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4238'>#</a></div><div id='concept-2.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:concept-definition'>concept-definition</a>
declares a concept<a class='hidden_link' href='#concept-2.sentence-1'>.</a></div> <div id='concept-2.sentence-2' class='sentence'>Its <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> becomes a <a class='grammarterm' href='#nt:concept-name'>concept-name</a>
referring to that concept
within its scope<a class='hidden_link' href='#concept-2.sentence-2'>.</a></div> <div id='concept-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#concept-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span> x <span class='operator'>=</span><span class='operator'>=</span> x <span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> std<span class='operator'>::</span>convertible_to<span class='indexparent'><a class='index' id=':convertible_to'></a></span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span><span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>     <span class='comment'>// <span class='tcode_in_codeblock'>C</span> constrains <span class='tcode_in_codeblock'>f1(T)</span> in <span class='grammarterm'>constraint-expression</span></span>
T f1<span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>C T<span class='anglebracket'>&gt;</span>       <span class='comment'>// <span class='tcode_in_codeblock'>C</span>, as a <span class='grammarterm'>type-constraint</span>, constrains <span class='tcode_in_codeblock'>f2(T)</span></span>
T f2<span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='concept-3'><div class='marginalizedparent'><a class='marginalized' href='#concept-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4260'>#</a></div><div id='concept-3.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:concept-definition'>concept-definition</a>
shall appear at namespace scope (<a href='basic.scope.namespace'>[basic.scope.namespace]</a>)<a class='hidden_link' href='#concept-3.sentence-1'>.</a></div></div><div class='para' id='concept-4'><div class='marginalizedparent'><a class='marginalized' href='#concept-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4264'>#</a></div><div id='concept-4.sentence-1' class='sentence'>A concept shall not have <a href='#def:associated_constraints'>associated constraints</a><a class='hidden_link' href='#concept-4.sentence-1'>.</a></div></div><div class='para' id='concept-5'><div class='marginalizedparent'><a class='marginalized' href='#concept-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4267'>#</a></div><div id='concept-5.sentence-1' class='sentence'>A concept is not instantiated (<a href='#spec'>[temp.spec]</a>)<a class='hidden_link' href='#concept-5.sentence-1'>.</a></div> <div id='concept-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#concept-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='concept-5.sentence-2' class='sentence'>A concept-id (<a href='#names'>[temp.names]</a>) is evaluated as an expression<a class='hidden_link' href='#concept-5.sentence-2'>.</a></div> <div id='concept-5.sentence-3' class='sentence'>A concept cannot be
explicitly instantiated (<a href='#explicit'>[temp.explicit]</a>),
explicitly specialized (<a href='#expl.spec'>[temp.expl.spec]</a>),
or partially specialized<a class='hidden_link' href='#concept-5.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='concept-6'><div class='marginalizedparent'><a class='marginalized' href='#concept-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4277'>#</a></div><div id='concept-6.sentence-1' class='sentence'>The <a class='grammarterm' href='#nt:constraint-expression'>constraint-expression</a> of a <a class='grammarterm' href='#nt:concept-definition'>concept-definition</a>
is an unevaluated operand (<a href='expr.context'>[expr.context]</a>)<a class='hidden_link' href='#concept-6.sentence-1'>.</a></div></div><div class='para' id='concept-7'><div class='marginalizedparent'><a class='marginalized' href='#concept-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4281'>#</a></div><div id='concept-7.sentence-1' class='sentence'>The first declared template parameter of a concept definition is its
<a class='hidden_link' href='#def:prototype_parameter,concept' id='def:prototype_parameter,concept'><i >prototype parameter</i></a><a class='hidden_link' href='#concept-7.sentence-1'>.</a></div> <div id='concept-7.sentence-2' class='sentence'>A <a class='hidden_link' href='#def:concept,type' id='def:concept,type'><i >type concept</i></a>
is a concept whose prototype parameter
is a type <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><a class='hidden_link' href='#concept-7.sentence-2'>.</a></div></div></div></div><div id='res' class='section'><h2 ><a class='secnum' href='#res' style='min-width:88pt'>13.8</a> Name resolution <a class='abbr_ref' href='temp.res'>[temp.res]</a></h2><div class='para' id='res-1'><div class='marginalizedparent'><a class='marginalized' href='#res-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4291'>#</a></div><div id='res-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':overloading,resolution,template_name'></a></span><span class='indexparent'><a class='index' id=':lookup,template_name'></a></span>Three kinds of names can be used within a template definition:</div><ul class='itemize'><li id='res-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-1.1'>(1.1)</a></div><div id='res-1.1.sentence-1' class='sentence'>The name of the template itself,
and names declared within the template itself<a class='hidden_link' href='#res-1.1.sentence-1'>.</a></div></li><li id='res-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-1.2'>(1.2)</a></div><div id='res-1.2.sentence-1' class='sentence'>Names dependent on a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> (<a href='#dep'>[temp.dep]</a>)<a class='hidden_link' href='#res-1.2.sentence-1'>.</a></div></li><li id='res-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-1.3'>(1.3)</a></div><div id='res-1.3.sentence-1' class='sentence'>Names from scopes which are visible within the template definition<a class='hidden_link' href='#res-1.3.sentence-1'>.</a></div></li></ul></div><div class='para' id='res-2'><div class='marginalizedparent'><a class='marginalized' href='#res-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4307'>#</a></div><div id='res-2.sentence-1' class='sentence'>A name used in a template declaration or definition and that is
dependent on a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
is assumed not to name a type unless
the applicable name lookup finds a type name or the name
is qualified by the keyword
<span class='texttt'><span class='keyword'>typename</span></span><a class='hidden_link' href='#res-2.sentence-1'>.</a></div> <div id='res-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#res-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// no <span class='tcode_in_codeblock'>B</span> declared here</span>

<span class='keyword'>class</span> X;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> Z;                      <span class='comment'>// forward declaration of member class</span>

  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    X<span class='operator'>*</span> a1;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>X</span></span>
    T<span class='operator'>*</span> a2;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>T</span></span>
    Y<span class='operator'>*</span> a3;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>Y&lt;T&gt;</span></span>
    Z<span class='operator'>*</span> a4;                      <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>Z</span></span>
    <span class='keyword'>typedef</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>A TA;
    TA<span class='operator'>*</span> a5;                     <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>T</span>'s <span class='tcode_in_codeblock'>A</span></span>
    <span class='keyword'>typename</span> T<span class='operator'>::</span>A<span class='operator'>*</span> a6;          <span class='comment'>// declare pointer to <span class='tcode_in_codeblock'>T</span>'s <span class='tcode_in_codeblock'>A</span></span>
    T<span class='operator'>::</span>A<span class='operator'>*</span> a7;                   <span class='comment'>// error: no visible declaration of <span class='tcode_in_codeblock'>a7</span></span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;A</span> is not a type name; multiplication of <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;A</span> by <span class='tcode_in_codeblock'>a7</span></span>
    B<span class='operator'>*</span> a8;                      <span class='comment'>// error: no visible declarations of <span class='tcode_in_codeblock'>B</span> and <span class='tcode_in_codeblock'>a8</span></span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>B</span> is not a type name; multiplication of <span class='tcode_in_codeblock'>B</span> by <span class='tcode_in_codeblock'>a8</span></span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> <pre class='bnf'><a class='nontermdef' href='#nt:typename-specifier' id='nt:typename-specifier'>typename-specifier:</a>
&#9;<span class='texttt'><span class='keyword'>typename</span></span><span class='indexparent'><a class='index' id=':typename_'></a></span> <a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a> <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a>
&#9;<span class='texttt'><span class='keyword'>typename</span></span><span class='indexparent'><a class='index' id=':typename__'></a></span> <a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a> <span class='terminal'><span class='keyword'>template</span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>
</pre></div><div class='para' id='res-3'><div class='marginalizedparent'><a class='marginalized' href='#res-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4347'>#</a></div><div id='res-3.sentence-1' class='sentence'>A <a class='grammarterm' href='#nt:typename-specifier'>typename-specifier</a>
denotes the type or class template
denoted by the <a class='grammarterm' href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a>
formed by omitting the keyword <span class='texttt'><span class='keyword'>typename</span></span><a class='hidden_link' href='#res-3.sentence-1'>.</a></div> <div id='res-3.sentence-2' class='sentence'>The usual qualified name lookup (<a href='basic.lookup.qual'>[basic.lookup.qual]</a>) is used to find the
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a>
even in the presence of
<span class='texttt'><span class='keyword'>typename</span></span><a class='hidden_link' href='#res-3.sentence-2'>.</a></div> <div id='res-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#res-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>int</span> X;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typename</span> T<span class='operator'>::</span>X x;
<span class='curlybracket'>}</span>
<span class='keyword'>void</span> foo<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A a;
  B b;
  f<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>;             <span class='comment'>// OK: <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;X</span> refers to <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;X</span></span>
  f<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>;             <span class='comment'>// error: <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;X</span> refers to the data member <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X</span> not the struct <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='res-4'><div class='marginalizedparent'><a class='marginalized' href='#res-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4377'>#</a></div><div id='res-4.sentence-1' class='sentence'>A qualified name used as the name in a
<a class='grammarterm' href='class.derived#nt:class-or-decltype'>class-or-decltype</a>
or an
<a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a>
is implicitly assumed to name a type, without the use of the
<span class='texttt'><span class='keyword'>typename</span></span>
keyword<a class='hidden_link' href='#res-4.sentence-1'>.</a></div> <div id='res-4.sentence-2' class='sentence'>In a <a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a> that immediately contains a <a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a>
that depends on a template parameter, the <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> or <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>
is implicitly assumed to name a type, without the use of the <span class='texttt'><span class='keyword'>typename</span></span> keyword<a class='hidden_link' href='#res-4.sentence-2'>.</a></div> <div id='res-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#res-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='res-4.sentence-3' class='sentence'>The
<span class='texttt'><span class='keyword'>typename</span></span>
keyword is not permitted by the syntax of these constructs<a class='hidden_link' href='#res-4.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='res-5'><div class='marginalizedparent'><a class='marginalized' href='#res-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4394'>#</a></div><div id='res-5.sentence-1' class='sentence'>A <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a>
is assumed to name a type if
<ul class='itemize'><li id='res-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-5.1'>(5.1)</a></div>it is a qualified name in a type-id-only context (see below), or</li><li id='res-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-5.2'>(5.2)</a></div>it is a <a class='grammarterm' href='dcl.spec#nt:decl-specifier'>decl-specifier</a> of the <a class='grammarterm' href='dcl.spec#nt:decl-specifier-seq'>decl-specifier-seq</a> of a
<ul class='itemize'><li id='res-5.2.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-5.2.1'>(5.2.1)</a></div><a class='grammarterm' href='dcl.pre#nt:simple-declaration'>simple-declaration</a> or a <a class='grammarterm' href='dcl.fct.def.general#nt:function-definition'>function-definition</a> in namespace scope,</li><li id='res-5.2.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-5.2.2'>(5.2.2)</a></div><a class='grammarterm' href='class.mem#nt:member-declaration'>member-declaration</a>,</li><li id='res-5.2.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-5.2.3'>(5.2.3)</a></div><a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a> in a <a class='grammarterm' href='class.mem#nt:member-declaration'>member-declaration</a><a class='footnotenum' href='#footnote-136' id='footnoteref-136'>136</a>,
unless that <a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a> appears in a default argument,</li><li id='res-5.2.4'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-5.2.4'>(5.2.4)</a></div><a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a> in a <a class='grammarterm' href='dcl.decl#nt:declarator'>declarator</a>
of a function or function template declaration
whose <a class='grammarterm' href='dcl.decl#nt:declarator-id'>declarator-id</a> is qualified,
unless that <a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a>
appears in a default argument,</li><li id='res-5.2.5'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-5.2.5'>(5.2.5)</a></div><a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a> in a <a class='grammarterm' href='expr.prim.lambda#nt:lambda-declarator'>lambda-declarator</a>
or <a class='grammarterm' href='expr.prim.req#nt:requirement-parameter-list'>requirement-parameter-list</a>,
unless that <a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a> appears in a default argument, or</li><li id='res-5.2.6'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-5.2.6'>(5.2.6)</a></div><a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a> of a (non-type) <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><a class='hidden_link' href='#res-5.sentence-1'>.</a></li></ul></li></ul></div> <div id='res-5.sentence-2' class='sentence'>
A qualified name is said to be in a <a class='hidden_link' href='#def:type-id-only_context' id='def:type-id-only_context'><i >type-id-only context</i></a>
if it appears in a
<a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a>,
<a class='grammarterm' href='expr.new#nt:new-type-id'>new-type-id</a>, or
<a class='grammarterm' href='dcl.name#nt:defining-type-id'>defining-type-id</a>
and the smallest enclosing
<a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a>,
<a class='grammarterm' href='expr.new#nt:new-type-id'>new-type-id</a>, or
<a class='grammarterm' href='dcl.name#nt:defining-type-id'>defining-type-id</a>
is a
<a class='grammarterm' href='expr.new#nt:new-type-id'>new-type-id</a>,
<a class='grammarterm' href='dcl.name#nt:defining-type-id'>defining-type-id</a>,
<a class='grammarterm' href='dcl.decl#nt:trailing-return-type'>trailing-return-type</a>,
default argument of a <a class='grammarterm' href='#nt:type-parameter'>type-parameter</a> of a template, or
<a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> of a
<span class='texttt'><span class='keyword'>static_&shy;cast</span></span>,
<span class='texttt'><span class='keyword'>const_&shy;cast</span></span>,
<span class='texttt'><span class='keyword'>reinterpret_&shy;cast</span></span>, or
<span class='texttt'><span class='keyword'>dynamic_&shy;cast</span></span><a class='hidden_link' href='#res-5.sentence-2'>.</a></div> <div id='res-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#res-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T<span class='operator'>::</span>R f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;             <span class='comment'>// OK, return type of a function declaration at global scope</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>::</span>R<span class='parenthesis'>)</span>;         <span class='comment'>// ill-formed, no diagnostic required: attempt to declare</span>
                                        <span class='comment'>// a <span class='tcode_in_codeblock'>void</span> variable template</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> Ptr <span class='operator'>=</span> PtrTraits<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>Ptr;        <span class='comment'>// OK, in a <span class='grammarterm'>defining-type-id</span></span>
  T<span class='operator'>::</span>R f<span class='parenthesis'>(</span>T<span class='operator'>::</span>P p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>                      <span class='comment'>// OK, class scope</span>
    <span class='keyword'>return</span> <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>T<span class='operator'>::</span>R<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;        <span class='comment'>// OK, <span class='grammarterm'>type-id</span> of a <span class='tcode_in_codeblock'>static_&shy;cast</span></span>
  <span class='curlybracket'>}</span>
  <span class='keyword'>auto</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> S<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>Ptr;               <span class='comment'>// OK, <span class='grammarterm'>trailing-return-type</span></span>
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span>pf<span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='operator'>::</span>X<span class='parenthesis'>)</span>;                     <span class='comment'>// variable <span class='tcode_in_codeblock'>pf</span> of type <span class='tcode_in_codeblock'>void*</span> initialized with <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;X</span></span>
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='operator'>::</span>X<span class='parenthesis'>)</span>;                         <span class='comment'>// error: <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;X</span> at block scope does not denote a type</span>
                                        <span class='comment'>// (attempt to declare a <span class='tcode_in_codeblock'>void</span> variable)</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='res-6'><div class='marginalizedparent'><a class='marginalized' href='#res-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4456'>#</a></div><div id='res-6.sentence-1' class='sentence'>A <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> that refers to a member of an unknown specialization,
that is not prefixed by <span class='texttt'><span class='keyword'>typename</span></span>,
and that is not otherwise assumed to name a type (see above)
denotes a non-type<a class='hidden_link' href='#res-6.sentence-1'>.</a></div> <div id='res-6.example-1' class='example'>[&nbsp;<a class='example_link' href='#res-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  T<span class='operator'>::</span>x <span class='operator'>*</span> i;         <span class='comment'>// expression, not the declaration of a variable <span class='tcode_in_codeblock'>i</span></span>
<span class='curlybracket'>}</span>

<span class='keyword'>struct</span> Foo <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> x;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> Bar <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>int</span> <span class='keyword'>const</span> x <span class='operator'>=</span> <span class='literal'>5</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span>Bar<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;        <span class='comment'>// OK</span>
  f<span class='anglebracket'>&lt;</span>Foo<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;        <span class='comment'>// error: <span class='tcode_in_codeblock'>Foo&#x200b;::&#x200b;x</span> is a type</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='res-7'><div class='marginalizedparent'><a class='marginalized' href='#res-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4482'>#</a></div><div id='res-7.sentence-1' class='sentence'>Within the definition of a class template or within the definition of a
member of a class template following the <a class='grammarterm' href='dcl.decl#nt:declarator-id'>declarator-id</a>, the keyword
<span class='texttt'><span class='keyword'>typename</span></span>
is not required when referring to
a member of the current instantiation (<a href='#dep.type'>[temp.dep.type]</a>)<a class='hidden_link' href='#res-7.sentence-1'>.</a></div> <div id='res-7.example-1' class='example'>[&nbsp;<a class='example_link' href='#res-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> B;
  B b;              <span class='comment'>// OK, no <span class='tcode_in_codeblock'>typename</span> required</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='res-8'><div class='marginalizedparent'><a class='marginalized' href='#res-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4497'>#</a></div><div id='res-8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':checking,syntax'></a></span><span class='indexparent'><a class='index' id=':checking,point_of_error'></a></span>The validity of a template may be checked prior to any instantiation<a class='hidden_link' href='#res-8.sentence-1'>.</a></div> <div id='res-8.note-1' class='note'>[&nbsp;<a class='note_link' href='#res-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='res-8.sentence-2' class='sentence'>Knowing which names are type names allows the syntax of every template
to be checked in this way<a class='hidden_link' href='#res-8.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='res-8.sentence-3' class='sentence'>
The program is ill-formed, no diagnostic required, if:
<ul class='itemize'><li id='res-8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-8.1'>(8.1)</a></div>no valid specialization can be generated for a template
or a substatement of a <a href='stmt.if#def:constexpr_if'>constexpr if</a> statement within a template
and the template is not instantiated, or</li><li id='res-8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-8.2'>(8.2)</a></div>no substitution of template arguments
into a <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a> or <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a>
would result in a valid expression, or</li><li id='res-8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-8.3'>(8.3)</a></div>every valid specialization of a variadic template requires an empty template
parameter pack, or</li><li id='res-8.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-8.4'>(8.4)</a></div>a hypothetical instantiation of a template
immediately following its definition
would be ill-formed
due to a construct that does not depend on a template parameter, or</li><li id='res-8.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#res-8.5'>(8.5)</a></div>the interpretation of such a construct
in the hypothetical instantiation
is different from
the interpretation of the corresponding construct
in any actual instantiation of the template<a class='hidden_link' href='#res-8.sentence-3'>.</a> <div id='res-8.5.note-2' class='note'>[&nbsp;<a class='note_link' href='#res-8.5.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> This can happen in situations including the following:
<ul class='itemize'><li id='res-8.5.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-8.5.1'>(8.5.1)</a></div>a type used in a non-dependent name is incomplete at the point at which a
template is defined but is complete at the point at which an instantiation is
performed, or</li><li id='res-8.5.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-8.5.2'>(8.5.2)</a></div>lookup for a name in the template definition found a <a class='grammarterm' href='namespace.udecl#nt:using-declaration'>using-declaration</a>,
but the lookup in the corresponding scope in the instantiation
does not find any declarations because the <a class='grammarterm' href='namespace.udecl#nt:using-declaration'>using-declaration</a>
was a pack expansion and the corresponding pack is empty, or</li><li id='res-8.5.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-8.5.3'>(8.5.3)</a></div>an instantiation uses a default argument or default template argument
that had not been defined at the point at which the template was defined, or</li><li id='res-8.5.4'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-8.5.4'>(8.5.4)</a></div><a href='expr.const'>constant expression evaluation</a> within the template
instantiation uses
  <ul class='itemize'><li id='res-8.5.4.1'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#res-8.5.4.1'>(8.5.4.1)</a></div>the value of a const object of integral or unscoped enumeration type or</li><li id='res-8.5.4.2'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#res-8.5.4.2'>(8.5.4.2)</a></div>the value of a <span class='texttt'><span class='keyword'>constexpr</span></span> object or</li><li id='res-8.5.4.3'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#res-8.5.4.3'>(8.5.4.3)</a></div>the value of a reference or</li><li id='res-8.5.4.4'><div class='marginalizedparent' style='left:-11em'><a class='marginalized' href='#res-8.5.4.4'>(8.5.4.4)</a></div>the definition of a constexpr function,</li></ul>
and that entity was not defined when the template was defined, or</li><li id='res-8.5.5'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#res-8.5.5'>(8.5.5)</a></div>a class template specialization or variable template specialization that
is specified by a non-dependent <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a> is used by
the template, and either it is instantiated from a partial specialization that
was not defined when the template was defined or it names an explicit
specialization that was not declared when the template was defined.</li></ul> —&nbsp;<i>end note</i></div>&nbsp;]</div> </li></ul></div><div id='res-8.sentence-4' class='sentence'>Otherwise, no diagnostic shall be issued for a template
for which a valid specialization can be generated<a class='hidden_link' href='#res-8.sentence-4'>.</a></div> <div id='res-8.note-3' class='note'>[&nbsp;<a class='note_link' href='#res-8.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='res-8.sentence-5' class='sentence'>If a template is instantiated, errors will be diagnosed according
to the other rules in this document<a class='hidden_link' href='#res-8.sentence-5'>.</a></div> <div id='res-8.sentence-6' class='sentence'>Exactly when these errors are diagnosed is a quality of implementation issue<a class='hidden_link' href='#res-8.sentence-6'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='res-8.example-1' class='example'>[&nbsp;<a class='example_link' href='#res-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>int</span> j;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t, <span class='keyword'>int</span> i, <span class='keyword'>char</span><span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    t <span class='operator'>=</span> i;          <span class='comment'>// diagnosed if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f</span> is instantiated, and the assignment to <span class='tcode_in_codeblock'>t</span> is an error</span>
    p <span class='operator'>=</span> i;          <span class='comment'>// may be diagnosed even if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f</span> is not instantiated</span>
    p <span class='operator'>=</span> j;          <span class='comment'>// may be diagnosed even if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;f</span> is not instantiated</span>
  <span class='curlybracket'>}</span>
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='operator'>+</span>;              <span class='comment'>// may be diagnosed even if <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;g</span> is not instantiated</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> <span class='keyword'>operator</span><span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>(</span><span class='keyword'>int</span>, T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> t<span class='parenthesis'>)</span>;                     <span class='comment'>// error: too many parameters</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>union</span> X <span class='operator'>:</span> T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;            <span class='comment'>// error: union with base class</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='operator'>:</span> T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>,  T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// error: duplicate base class</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='res-9'><div class='marginalizedparent'><a class='marginalized' href='#res-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4592'>#</a></div><div id='res-9.sentence-1' class='sentence'>When looking for the declaration of a name used in a template definition,
the usual lookup rules (<a href='basic.lookup.unqual'>[basic.lookup.unqual]</a>, <a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>)
are used for non-dependent names<a class='hidden_link' href='#res-9.sentence-1'>.</a></div> <div id='res-9.sentence-2' class='sentence'>The lookup of names dependent on the template parameters
is postponed until the actual template argument is known (<a href='#dep'>[temp.dep]</a>)<a class='hidden_link' href='#res-9.sentence-2'>.</a></div> <div id='res-9.example-1' class='example'>[&nbsp;<a class='example_link' href='#res-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>iostream<span class='anglebracket'>&gt;</span>
<span class='keyword'>using</span> <span class='keyword'>namespace</span> std;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Set <span class='curlybracket'>{</span>
  T<span class='operator'>*</span> p;
  <span class='keyword'>int</span> cnt;
<span class='keyword'>public</span><span class='operator'>:</span>
  Set<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  Set<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> Set<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> printall<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>for</span> <span class='parenthesis'>(</span><span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>0</span>; i<span class='anglebracket'>&lt;</span>cnt; i<span class='operator'>+</span><span class='operator'>+</span><span class='parenthesis'>)</span>
      cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> p<span class='squarebracket'>[</span>i<span class='squarebracket'>]</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>'\n'</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</pre><div id='res-9.sentence-3' class='sentence'>In the example,
<span class='texttt'>i</span>
is the local variable
<span class='texttt'>i</span>
declared in
<span class='texttt'>printall</span>,
<span class='texttt'>cnt</span>
is the member
<span class='texttt'>cnt</span>
declared in
<span class='texttt'>Set</span>,
and
<span class='texttt'>cout</span>
is the standard output stream declared in
<span class='texttt'>iostream</span><a class='hidden_link' href='#res-9.sentence-3'>.</a></div> <div id='res-9.sentence-4' class='sentence'>However, not every declaration can be found this way; the resolution of
some names must be postponed
until the actual
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
are known<a class='hidden_link' href='#res-9.sentence-4'>.</a></div> <div id='res-9.sentence-5' class='sentence'>For example, even though the name
<span class='texttt'><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span></span>
is known within the definition of
<span class='texttt'>printall<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
and a declaration of it can be found in
<span class='indexparent'><a class='index' id=':<iostream>'></a></span><span class='texttt'><span class='anglebracket'>&lt;</span>iostream<span class='anglebracket'>&gt;</span></span>,
the actual declaration of
<span class='texttt'><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span></span>
needed to print
<span class='texttt'>p<span class='squarebracket'>[</span>i<span class='squarebracket'>]</span></span>
cannot be known until it is known what type
<span class='texttt'>T</span>
is (<a href='#dep'>[temp.dep]</a>)<a class='hidden_link' href='#res-9.sentence-5'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='res-10'><div class='marginalizedparent'><a class='marginalized' href='#res-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4651'>#</a></div><div id='res-10.sentence-1' class='sentence'>If a name does not depend on a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
(as defined in <a href='#dep'>[temp.dep]</a>), a declaration (or set of declarations) for that
name shall be in scope at the point where the name appears in the template
definition; the name is bound to the declaration (or declarations) found
at that point and this binding is not affected by declarations that are
visible at the point of instantiation<a class='hidden_link' href='#res-10.sentence-1'>.</a></div> <div id='res-10.example-1' class='example'>[&nbsp;<a class='example_link' href='#res-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>f(char)</span></span>
  f<span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;          <span class='comment'>// dependent</span>
  f<span class='parenthesis'>(</span>t<span class='parenthesis'>)</span>;             <span class='comment'>// dependent</span>
  dd<span class='operator'>+</span><span class='operator'>+</span>;             <span class='comment'>// not dependent; error: declaration for <span class='tcode_in_codeblock'>dd</span> not found</span>
<span class='curlybracket'>}</span>

<span class='keyword'>enum</span> E <span class='curlybracket'>{</span> e <span class='curlybracket'>}</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>E<span class='parenthesis'>)</span>;

<span class='keyword'>double</span> dd;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  g<span class='parenthesis'>(</span>e<span class='parenthesis'>)</span>;             <span class='comment'>// will cause one call of <span class='tcode_in_codeblock'>f(char)</span> followed by two calls of <span class='tcode_in_codeblock'>f(E)</span></span>
  g<span class='parenthesis'>(</span><span class='literal'>'a'</span><span class='parenthesis'>)</span>;           <span class='comment'>// will cause three calls of <span class='tcode_in_codeblock'>f(char)</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='res-11'><div class='marginalizedparent'><a class='marginalized' href='#res-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4681'>#</a></div><div id='res-11.note-1' class='note'>[&nbsp;<a class='note_link' href='#res-11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='res-11.sentence-1' class='sentence'>For purposes of name lookup, default arguments and
<a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a><span class='textit'>s</span> of function templates and default
arguments and <a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a><span class='textit'>s</span> of
member functions of class templates are considered definitions (<a href='#decls'>[temp.decls]</a>)<a class='hidden_link' href='#res-11.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-136'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-136'>136)</a></div><div id='footnote-136.sentence-1' class='sentence'>This includes friend function declarations<a class='hidden_link' href='#footnote-136.sentence-1'>.</a></div> <a href='#footnoteref-136'>⮥</a></div><div id='local' class='section'><h3 ><a class='secnum' href='#local' style='min-width:103pt'>13.8.1</a> Locally declared names <a class='abbr_ref' href='temp.local'>[temp.local]</a></h3><div class='para' id='local-1'><div class='marginalizedparent'><a class='marginalized' href='#local-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4691'>#</a></div><div id='local-1.sentence-1' class='sentence'>Like normal (non-template) classes, class templates have an
injected-class-name (<a href='class.pre'>[class.pre]</a>)<a class='hidden_link' href='#local-1.sentence-1'>.</a></div> <div id='local-1.sentence-2' class='sentence'>The
injected-class-name can be used
as a <a class='grammarterm' href='#nt:template-name'>template-name</a> or a <a class='grammarterm' href='dcl.type.simple#nt:type-name'>type-name</a><a class='hidden_link' href='#local-1.sentence-2'>.</a></div> <div id='local-1.sentence-3' class='sentence'>When it is used with a
<a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a>,
as a <a class='grammarterm' href='#nt:template-argument'>template-argument</a> for a template <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>,
or as the final identifier in the <a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a> of
a friend class template declaration,
it is a <a class='grammarterm' href='#nt:template-name'>template-name</a> that refers to the
class template itself<a class='hidden_link' href='#local-1.sentence-3'>.</a></div> <div id='local-1.sentence-4' class='sentence'>Otherwise, it is a <a class='grammarterm' href='dcl.type.simple#nt:type-name'>type-name</a>
equivalent to the <a class='grammarterm' href='#nt:template-name'>template-name</a>
followed by the <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span> of the class template
enclosed in <span class='texttt'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#local-1.sentence-4'>.</a></div></div><div class='para' id='local-2'><div class='marginalizedparent'><a class='marginalized' href='#local-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4709'>#</a></div><div id='local-2.sentence-1' class='sentence'>Within the scope of a class template specialization or
partial specialization, when the injected-class-name is
used as a <a class='grammarterm' href='dcl.type.simple#nt:type-name'>type-name</a>,
it is equivalent to the <a class='grammarterm' href='#nt:template-name'>template-name</a> followed by the
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
of the class template specialization or partial
specialization enclosed in
<span class='texttt'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#local-2.sentence-1'>.</a></div> <div id='local-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#local-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  Y<span class='operator'>*</span> p;                                 <span class='comment'>// meaning <span class='tcode_in_codeblock'>Y&lt;int&gt;</span></span>
  Y<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> q;                           <span class='comment'>// meaning <span class='tcode_in_codeblock'>Y&lt;char&gt;</span></span>
  A<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>*</span> a;                              <span class='comment'>// meaning <span class='tcode_in_codeblock'>A&lt;&#x200b;::&#x200b;Y&gt;</span></span>
  <span class='keyword'>class</span> B <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>class</span> Y;     <span class='comment'>// meaning <span class='tcode_in_codeblock'>&#x200b;::&#x200b;Y</span></span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='local-3'><div class='marginalizedparent'><a class='marginalized' href='#local-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4733'>#</a></div><div id='local-3.sentence-1' class='sentence'>The injected-class-name of a class template or class
template specialization can be used as either
a <a class='grammarterm' href='#nt:template-name'>template-name</a> or a <a class='grammarterm' href='dcl.type.simple#nt:type-name'>type-name</a>
wherever it is in scope<a class='hidden_link' href='#local-3.sentence-1'>.</a></div> <div id='local-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#local-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Base <span class='curlybracket'>{</span>
  Base<span class='operator'>*</span> p;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Derived<span class='operator'>:</span> <span class='keyword'>public</span> Base<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typename</span> Derived<span class='operator'>::</span>Base<span class='operator'>*</span> p;            <span class='comment'>// meaning <span class='tcode_in_codeblock'>Derived&#x200b;::&#x200b;Base&lt;T&gt;</span></span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> U <span class='operator'>=</span> T<span class='operator'>::</span><span class='keyword'>template</span> Base<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Third <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
Third<span class='anglebracket'>&lt;</span>Derived<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='anglebracket'>&gt;</span> t;                 <span class='comment'>// OK: default argument uses injected-class-name as a template</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='local-4'><div class='marginalizedparent'><a class='marginalized' href='#local-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4753'>#</a></div><div id='local-4.sentence-1' class='sentence'>A lookup that finds an injected-class-name (<a href='class.member.lookup'>[class.member.lookup]</a>) can result in an ambiguity in
certain cases (for example, if it is found in more than one
base class)<a class='hidden_link' href='#local-4.sentence-1'>.</a></div> <div id='local-4.sentence-2' class='sentence'>If all of the injected-class-names that are
found refer to specializations of the same class template,
and if the name
is used as a <a class='grammarterm' href='#nt:template-name'>template-name</a>,
the reference refers to the class template itself and not a
specialization thereof, and is not ambiguous<a class='hidden_link' href='#local-4.sentence-2'>.</a></div> <div id='local-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#local-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Base <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Derived<span class='operator'>:</span> Base<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>, Base<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typename</span> Derived<span class='operator'>::</span>Base b;             <span class='comment'>// error: ambiguous</span>
  <span class='keyword'>typename</span> Derived<span class='operator'>::</span>Base<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> d;     <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='local-5'><div class='marginalizedparent'><a class='marginalized' href='#local-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4773'>#</a></div><div id='local-5.sentence-1' class='sentence'>When the normal name of the template (i.e., the name from
the enclosing scope, not the injected-class-name) is
used,
it always refers to the class template itself and not a
specialization of the template<a class='hidden_link' href='#local-5.sentence-1'>.</a></div> <div id='local-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#local-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  X<span class='operator'>*</span> p;                                 <span class='comment'>// meaning <span class='tcode_in_codeblock'>X&lt;T&gt;</span></span>
  X<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> p2;
  X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p3;
  <span class='operator'>::</span>X<span class='operator'>*</span> p4;                              <span class='comment'>// error: missing template argument list</span>
                                        <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;X</span> does not refer to the injected-class-name</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='local-6'><div class='marginalizedparent'><a class='marginalized' href='#local-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4791'>#</a></div><div id='local-6.sentence-1' class='sentence'>The name of a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
shall not be redeclared within its scope (including nested scopes)<a class='hidden_link' href='#local-6.sentence-1'>.</a></div> <div id='local-6.sentence-2' class='sentence'>A
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
shall not have the same name as the template name<a class='hidden_link' href='#local-6.sentence-2'>.</a></div> <div id='local-6.example-1' class='example'>[&nbsp;<a class='example_link' href='#local-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> T;                                <span class='comment'>// error: template-parameter redeclared</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>char</span> T;                             <span class='comment'>// error: template-parameter redeclared</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X;              <span class='comment'>// error: template-parameter redeclared</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='local-7'><div class='marginalizedparent'><a class='marginalized' href='#local-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4811'>#</a></div><div id='local-7.sentence-1' class='sentence'>In the definition of a member of
a class template that appears outside of the class template definition,
the name of a member of the class template hides the name of a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
of any enclosing class templates (but not a <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a> of the
member if the member is a class or function template)<a class='hidden_link' href='#local-7.sentence-1'>.</a></div> <div id='local-7.example-1' class='example'>[&nbsp;<a class='example_link' href='#local-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>typedef</span> <span class='keyword'>void</span> C;
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> B<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  B b;              <span class='comment'>// <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>B</span>, not the template parameter</span>
<span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> B<span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> C<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span><span class='operator'>::</span>g<span class='parenthesis'>(</span>C<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  B b;              <span class='comment'>// <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>B</span>, not the template parameter</span>
  C c;              <span class='comment'>// the template parameter <span class='tcode_in_codeblock'>C</span>, not <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>C</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='local-8'><div class='marginalizedparent'><a class='marginalized' href='#local-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4838'>#</a></div><div id='local-8.sentence-1' class='sentence'>In the definition of a member of a class template that appears outside of the
namespace containing the class template definition,
the name of a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
hides the name of a member of this namespace<a class='hidden_link' href='#local-8.sentence-1'>.</a></div> <div id='local-8.example-1' class='example'>[&nbsp;<a class='example_link' href='#local-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> C <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span>
    <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> C<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> N<span class='operator'>::</span>B<span class='anglebracket'>&lt;</span>C<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span>C<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  C b;              <span class='comment'>// <span class='tcode_in_codeblock'>C</span> is the template parameter, not <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;C</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='local-9'><div class='marginalizedparent'><a class='marginalized' href='#local-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4858'>#</a></div><div id='local-9.sentence-1' class='sentence'>In the definition of a class template or in the definition of a member of such
a template that appears outside of the template definition,
for each non-dependent base class (<a href='#dep.type'>[temp.dep.type]</a>),
if the name of the base class
or the name of a member of the
base class is the same as the name of a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>,
the base class name or member name <a href='basic.scope.hiding'>hides</a> the
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
name<a class='hidden_link' href='#local-9.sentence-1'>.</a></div> <div id='local-9.example-1' class='example'>[&nbsp;<a class='example_link' href='#local-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>int</span> a;
  <span class='keyword'>int</span> Y;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> B, <span class='keyword'>class</span> a<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='operator'>:</span> A <span class='curlybracket'>{</span>
  B b;              <span class='comment'>// <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>B</span></span>
  a b;              <span class='comment'>// error: <span class='tcode_in_codeblock'>A</span>'s <span class='tcode_in_codeblock'>a</span> isn't a type name</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div id='dep' class='section'><h3 ><a class='secnum' href='#dep' style='min-width:103pt'>13.8.2</a> Dependent names <a class='abbr_ref' href='temp.dep'>[temp.dep]</a></h3><div class='para' id='dep-1'><div class='marginalizedparent'><a class='marginalized' href='#dep-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4886'>#</a></div><div id='dep-1.sentence-1' class='sentence'>Inside a template, some constructs have semantics which may differ from one
instantiation to another<a class='hidden_link' href='#dep-1.sentence-1'>.</a></div> <div id='dep-1.sentence-2' class='sentence'>Such a construct
depends
on the template parameters<a class='hidden_link' href='#dep-1.sentence-2'>.</a></div> <div id='dep-1.sentence-3' class='sentence'>In particular, types and expressions may depend on the type
and/or
value of
template parameters (as determined by the template arguments) and this determines
the context for name lookup for certain names<a class='hidden_link' href='#dep-1.sentence-3'>.</a></div> <div id='dep-1.sentence-4' class='sentence'>An expression may be
<a class='hidden_link' href='#def:expression,type-dependent' id='def:expression,type-dependent'><i >type-dependent</i></a>
(that is, its type may depend on a template parameter) or
<a class='hidden_link' href='#def:expression,value-dependent' id='def:expression,value-dependent'><i >value-dependent</i></a>
(that is, its value when evaluated as a constant expression (<a href='expr.const'>[expr.const]</a>)
may depend on a template parameter)
as described in this subclause<a class='hidden_link' href='#dep-1.sentence-4'>.</a></div></div><div class='para' id='dep-2'><div class='marginalizedparent'><a class='marginalized' href='#dep-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4907'>#</a></div><div id='dep-2.sentence-1' class='sentence'>In an expression of the form:
<pre class='ncsimplebnf'><a class='grammarterm' href='expr.post#nt:postfix-expression'>postfix-expression</a> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>)</span></span>
</pre>
where the
<a class='grammarterm' href='expr.post#nt:postfix-expression'>postfix-expression</a>
is an
<a class='grammarterm' href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a>,
the
<a class='grammarterm' href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a>
denotes a
<a class='hidden_link' href='#def:name,dependent' id='def:name,dependent'><i >dependent name</i></a>
if
<ul class='itemize'><li id='dep-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep-2.1'>(2.1)</a></div>any of the expressions in the <a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a> is a
<a href='#def:pack_expansion'>pack expansion</a>,</li><li id='dep-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep-2.2'>(2.2)</a></div>any of the expressions
or <a class='grammarterm' href='dcl.init#nt:braced-init-list'>braced-init-list</a><span class='textit'>s</span>
in the
<a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a>
is <a href='#dep.expr'>type-dependent</a>, or</li><li id='dep-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep-2.3'>(2.3)</a></div>the <a class='grammarterm' href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a>
is a <a class='grammarterm' href='#nt:template-id'>template-id</a> in which any of the template arguments depends
on a template parameter<a class='hidden_link' href='#dep-2.sentence-1'>.</a></li></ul></div><div id='dep-2.sentence-2' class='sentence'>If an operand of an operator is a type-dependent expression, the operator
also denotes a dependent name<a class='hidden_link' href='#dep-2.sentence-2'>.</a></div> <div id='dep-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#dep-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep-2.sentence-3' class='sentence'>Such names are unbound and
are looked up at the point of the template instantiation (<a href='#point'>[temp.point]</a>) in
both the context of the template definition and the
context of the point of instantiation (<a href='#dep.candidate'>[temp.dep.candidate]</a>)<a class='hidden_link' href='#dep-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='dep-3'><div class='marginalizedparent'><a class='marginalized' href='#dep-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4946'>#</a></div><div id='dep-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#dep-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='operator'>:</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typename</span> T<span class='operator'>::</span>A<span class='operator'>*</span> pa;
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> pb<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>static</span> <span class='keyword'>int</span> i <span class='operator'>=</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>i;
    pb<span class='operator'>-</span><span class='anglebracket'>&gt;</span>j<span class='operator'>+</span><span class='operator'>+</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</pre><div id='dep-3.sentence-1' class='sentence'>The base class name
<span class='texttt'>B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>,
the type name
<span class='texttt'>T<span class='operator'>&#x200b;::&#x200b;</span>A</span>,
the names
<span class='texttt'>B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>i</span>
and
<span class='texttt'>pb<span class='operator'>-</span><span class='anglebracket'>&gt;</span>j</span>
explicitly depend on the
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><a class='hidden_link' href='#dep-3.sentence-1'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='dep-4'><div class='marginalizedparent'><a class='marginalized' href='#dep-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L4970'>#</a></div><div id='dep-4.sentence-1' class='sentence'>In the definition of a class or class template,
the scope of a <a href='#def:base_class,dependent'>dependent base class</a>
is not examined during unqualified
name lookup either at the point of definition of the
class template or member or during an instantiation of
the class template or member<a class='hidden_link' href='#dep-4.sentence-1'>.</a></div> <div id='dep-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#dep-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>typedef</span> <span class='keyword'>double</span> A;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> A;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='operator'>:</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  A a;              <span class='comment'>// <span class='tcode_in_codeblock'>a</span> has type <span class='tcode_in_codeblock'>double</span></span>
<span class='curlybracket'>}</span>;
</pre><div id='dep-4.sentence-2' class='sentence'>The type name
<span class='texttt'>A</span>
in the definition of
<span class='texttt'>X<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
binds to the typedef name defined in the global
namespace scope, not to the typedef name
defined in the base class
<span class='texttt'>B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#dep-4.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='dep-4.example-2' class='example'>[&nbsp;<a class='example_link' href='#dep-4.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>int</span> a;
  <span class='keyword'>int</span> Y;
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> a;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Y <span class='operator'>:</span> T <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
  B b;                          <span class='comment'>// The <span class='tcode_in_codeblock'>B</span> defined in <span class='tcode_in_codeblock'>Y</span></span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> a <span class='operator'>=</span> i; <span class='curlybracket'>}</span>      <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;a</span></span>
  Y<span class='operator'>*</span> p;                         <span class='comment'>// <span class='tcode_in_codeblock'>Y&lt;T&gt;</span></span>
<span class='curlybracket'>}</span>;

Y<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span> ya;
</pre><div id='dep-4.sentence-3' class='sentence'>The members
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>B</span>,
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>a</span>,
and
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>Y</span>
of the template argument
<span class='texttt'>A</span>
do not affect the binding of names in
<span class='texttt'>Y<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#dep-4.sentence-3'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div id='dep.type' class='section'><h4 ><a class='secnum' href='#dep.type' style='min-width:118pt'>13.8.2.1</a> Dependent types <a class='abbr_ref' href='temp.dep.type'>[temp.dep.type]</a></h4><div class='para' id='dep.type-1'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5030'>#</a></div><div id='dep.type-1.sentence-1' class='sentence'>A name refers to the
<a class='hidden_link' href='#def:current_instantiation' id='def:current_instantiation'><i >current instantiation</i></a>
if it is
<ul class='itemize'><li id='dep.type-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-1.1'>(1.1)</a></div>in the definition of a class template, a nested class of a class template,
a member of a class template, or a member of a nested class of a class template,
the <a href='class.pre#def:injected-class-name'>injected-class-name</a> of the class template or nested class,</li><li id='dep.type-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-1.2'>(1.2)</a></div>in the definition of a primary class template
or a member of a primary class template, the name of the
class template followed by the template argument list of the
primary template (as described below) enclosed in
<span class='texttt'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span> (or an equivalent template alias specialization),</li><li id='dep.type-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-1.3'>(1.3)</a></div>in the definition of a nested class of a class template,
the name of the nested class referenced as a member of the
current instantiation, or</li><li id='dep.type-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-1.4'>(1.4)</a></div>in the definition of a partial specialization
or a member of a partial specialization, the name of
the class template followed by the template argument list of
the partial specialization enclosed in
<span class='texttt'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span> (or an equivalent template alias specialization)<a class='hidden_link' href='#dep.type-1.sentence-1'>.</a> If the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> template parameter is
a template parameter pack, the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> template argument is a pack
expansion (<a href='#variadic'>[temp.variadic]</a>) whose pattern is the name of
the template parameter pack.</li></ul></div></div><div class='para' id='dep.type-2'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5061'>#</a></div><div id='dep.type-2.sentence-1' class='sentence'>The template argument list of a primary template is a
template argument list in which the
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span>
template argument has the value of the
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span>
template parameter of the class template<a class='hidden_link' href='#dep.type-2.sentence-1'>.</a></div> <div id='dep.type-2.sentence-2' class='sentence'>If the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> template parameter is a
<a href='#def:template_parameter_pack'>template parameter pack</a>, the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> template argument is a
<a href='#def:pack_expansion'>pack expansion</a> whose pattern is the name of
the template parameter pack<a class='hidden_link' href='#dep.type-2.sentence-2'>.</a></div></div><div class='para' id='dep.type-3'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5073'>#</a></div><div id='dep.type-3.sentence-1' class='sentence'>A template argument that is equivalent to a template
parameter can be used in place of that
template parameter in a reference to the current instantiation<a class='hidden_link' href='#dep.type-3.sentence-1'>.</a></div> <div id='dep.type-3.sentence-2' class='sentence'>For a template <a class='grammarterm' href='#nt:type-parameter'>type-parameter</a>,
a template argument is equivalent to a template parameter
if it denotes the same type<a class='hidden_link' href='#dep.type-3.sentence-2'>.</a></div> <div id='dep.type-3.sentence-3' class='sentence'>For a non-type template parameter,
a template argument is equivalent to a template parameter
if it is an <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> that names a variable
that is equivalent to the template parameter<a class='hidden_link' href='#dep.type-3.sentence-3'>.</a></div> <div id='dep.type-3.sentence-4' class='sentence'>A variable is equivalent to a template parameter if
<ul class='itemize'><li id='dep.type-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-3.1'>(3.1)</a></div>it has the same type as the template parameter
  (ignoring cv-qualification) and</li><li id='dep.type-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-3.2'>(3.2)</a></div>its initializer consists of a single <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a>
  that names the template parameter or, recursively, such a variable<a class='hidden_link' href='#dep.type-3.sentence-4'>.</a></li></ul></div> <div id='dep.type-3.note-1' class='note'>[&nbsp;<a class='note_link' href='#dep.type-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.type-3.sentence-5' class='sentence'>Using a parenthesized variable name breaks the equivalence<a class='hidden_link' href='#dep.type-3.sentence-5'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='dep.type-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#dep.type-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  A<span class='operator'>*</span> p1;                        <span class='comment'>// <span class='tcode_in_codeblock'>A</span> is the current instantiation</span>
  A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> p2;                     <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;</span> is the current instantiation</span>
  A<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> p3;                     <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T*&gt;</span> is not the current instantiation</span>
  <span class='operator'>::</span>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> p4;                   <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;A&lt;T&gt;</span> is the current instantiation</span>
  <span class='keyword'>class</span> B <span class='curlybracket'>{</span>
    B<span class='operator'>*</span> p1;                      <span class='comment'>// <span class='tcode_in_codeblock'>B</span> is the current instantiation</span>
    A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='operator'>*</span> p2;                <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;B</span> is the current instantiation</span>
    <span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='operator'>*</span> p3;      <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T*&gt;&#x200b;::&#x200b;B</span> is not the current instantiation</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p1;                    <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T*&gt;</span> is the current instantiation</span>
  A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> p2;                     <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;</span> is not the current instantiation</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  B<span class='anglebracket'>&lt;</span>T1, T2, I<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b1;             <span class='comment'>// refers to the current instantiation</span>
  B<span class='anglebracket'>&lt;</span>T2, T1, I<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b2;             <span class='comment'>// not the current instantiation</span>
  <span class='keyword'>typedef</span> T1 my_T1;
  <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>int</span> my_I <span class='operator'>=</span> I;
  <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>int</span> my_I2 <span class='operator'>=</span> I<span class='operator'>+</span><span class='literal'>0</span>;
  <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>int</span> my_I3 <span class='operator'>=</span> my_I;
  <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>long</span> my_I4 <span class='operator'>=</span> I;
  <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>int</span> my_I5 <span class='operator'>=</span> <span class='parenthesis'>(</span>I<span class='parenthesis'>)</span>;
  B<span class='anglebracket'>&lt;</span>my_T1, T2, my_I<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b3;       <span class='comment'>// refers to the current instantiation</span>
  B<span class='anglebracket'>&lt;</span>my_T1, T2, my_I2<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b4;      <span class='comment'>// not the current instantiation</span>
  B<span class='anglebracket'>&lt;</span>my_T1, T2, my_I3<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b5;      <span class='comment'>// refers to the current instantiation</span>
  B<span class='anglebracket'>&lt;</span>my_T1, T2, my_I4<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b6;      <span class='comment'>// not the current instantiation</span>
  B<span class='anglebracket'>&lt;</span>my_T1, T2, my_I5<span class='anglebracket'>&gt;</span><span class='operator'>*</span> b7;      <span class='comment'>// not the current instantiation</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='dep.type-4'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5133'>#</a></div><div id='dep.type-4.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:base_class,dependent' id='def:base_class,dependent'><i >dependent base class</i></a> is a base class that is a dependent type and is
not the current instantiation<a class='hidden_link' href='#dep.type-4.sentence-1'>.</a></div> <div id='dep.type-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#dep.type-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.type-4.sentence-2' class='sentence'>A base class can be the current instantiation in the case of a nested class
naming an enclosing class as a base<a class='hidden_link' href='#dep.type-4.sentence-2'>.</a></div> <div id='dep.type-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#dep.type-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> M;
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
    <span class='keyword'>typedef</span> <span class='keyword'>void</span> M;
    <span class='keyword'>struct</span> C;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='operator'>::</span>C <span class='operator'>:</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  M m;                          <span class='comment'>// OK, <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;M</span></span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='dep.type-5'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5157'>#</a></div><div id='dep.type-5.sentence-1' class='sentence'>A name is a
<a class='hidden_link' href='#def:current_instantiation,member_of_the' id='def:current_instantiation,member_of_the'><i >member of the current instantiation</i></a>
if it is</div><ul class='itemize'><li id='dep.type-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-5.1'>(5.1)</a></div><div id='dep.type-5.1.sentence-1' class='sentence'>An unqualified name that, when looked up, refers to
at least one member of a class that is
the current instantiation or a non-dependent base class thereof<a class='hidden_link' href='#dep.type-5.1.sentence-1'>.</a></div> <div id='dep.type-5.1.note-1' class='note'>[&nbsp;<a class='note_link' href='#dep.type-5.1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.type-5.1.sentence-2' class='sentence'>This can only occur when looking up a name in a scope enclosed by the
definition of a class template<a class='hidden_link' href='#dep.type-5.1.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </li><li id='dep.type-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-5.2'>(5.2)</a></div><div id='dep.type-5.2.sentence-1' class='sentence'>A
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a>
in which the
<a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a>
refers to the current instantiation
and that, when looked up, refers to at least one member of a class that is
the current
instantiation or a non-dependent base class thereof<a class='hidden_link' href='#dep.type-5.2.sentence-1'>.</a></div> <div id='dep.type-5.2.note-2' class='note'>[&nbsp;<a class='note_link' href='#dep.type-5.2.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.type-5.2.sentence-2' class='sentence'>If no such
member is found, and the current instantiation has any dependent base classes,
then the <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> is a member of an unknown specialization;
see below<a class='hidden_link' href='#dep.type-5.2.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </li><li id='dep.type-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-5.3'>(5.3)</a></div><div id='dep.type-5.3.sentence-1' class='sentence'>An <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a> denoting the member in a <a href='expr.ref'>class member access</a>
expression for which the type of the object expression is the
current instantiation, and the <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a>, when <a href='basic.lookup.classref'>looked
up</a>, refers to at least one member of a class
that is the current
instantiation or a non-dependent base class thereof<a class='hidden_link' href='#dep.type-5.3.sentence-1'>.</a></div> <div id='dep.type-5.3.note-3' class='note'>[&nbsp;<a class='note_link' href='#dep.type-5.3.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.type-5.3.sentence-2' class='sentence'>If no such
member is found, and the current instantiation has any dependent base classes,
then the <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a> is a member of an unknown specialization;
see below<a class='hidden_link' href='#dep.type-5.3.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </li></ul><div id='dep.type-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#dep.type-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>5</span>;
  <span class='keyword'>int</span> n1<span class='squarebracket'>[</span>i<span class='squarebracket'>]</span>;                    <span class='comment'>// <span class='tcode_in_codeblock'>i</span> refers to a member of the current instantiation</span>
  <span class='keyword'>int</span> n2<span class='squarebracket'>[</span>A<span class='operator'>::</span>i<span class='squarebracket'>]</span>;                 <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;i</span> refers to a member of the current instantiation</span>
  <span class='keyword'>int</span> n3<span class='squarebracket'>[</span>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>i<span class='squarebracket'>]</span>;              <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;T&gt;&#x200b;::&#x200b;i</span> refers to a member of the current instantiation</span>
  <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> i;                     <span class='comment'>// <span class='tcode_in_codeblock'>i</span> refers to a member of the current instantiation</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> <div id='dep.type-5.sentence-2' class='sentence'>A name is a <a class='hidden_link' href='#def:current_instantiation,dependent_member_of_the' id='def:current_instantiation,dependent_member_of_the'><i >dependent member of the current instantiation</i></a> if it is a
member of the current instantiation that, when looked up, refers to at least
one member of a class that is the current instantiation<a class='hidden_link' href='#dep.type-5.sentence-2'>.</a></div></div><div class='para' id='dep.type-6'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5224'>#</a></div><div id='dep.type-6.sentence-1' class='sentence'>A name is a
<a class='hidden_link' href='#def:member_of_an_unknown_specialization' id='def:member_of_an_unknown_specialization'><i >member of an unknown specialization</i></a>
if it is</div><ul class='itemize'><li id='dep.type-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-6.1'>(6.1)</a></div><div id='dep.type-6.1.sentence-1' class='sentence'>A
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a>
in which the
<a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a>
names a dependent type that is not the current instantiation<a class='hidden_link' href='#dep.type-6.1.sentence-1'>.</a></div></li><li id='dep.type-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-6.2'>(6.2)</a></div><div id='dep.type-6.2.sentence-1' class='sentence'>A <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> in which the <a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a>
refers to the current instantiation, the current instantiation has at least one
dependent base class, and name lookup of the <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> does not
find any member of a class that is the current instantiation or a non-dependent
base class thereof<a class='hidden_link' href='#dep.type-6.2.sentence-1'>.</a></div></li><li id='dep.type-6.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-6.3'>(6.3)</a></div><div id='dep.type-6.3.sentence-1' class='sentence'>An <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a> denoting the member in a
<a href='expr.ref'>class member access</a> expression in which either
<ul class='itemize'><li id='dep.type-6.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#dep.type-6.3.1'>(6.3.1)</a></div>the type of the object expression is the current instantiation, the
current instantiation has at least one dependent base class, and name lookup
of the <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a> does not find a member of a class that is
the current instantiation or a non-dependent base class thereof; or</li><li id='dep.type-6.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#dep.type-6.3.2'>(6.3.2)</a></div>the type of the object expression is not the current instantiation
and the object expression is type-dependent<a class='hidden_link' href='#dep.type-6.3.sentence-1'>.</a></li></ul></div></li></ul></div><div class='para' id='dep.type-7'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5256'>#</a></div><div id='dep.type-7.sentence-1' class='sentence'>If a <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> in which the <a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a>
refers to the current instantiation is not a member of the current instantiation
or a member of an unknown specialization, the program is ill-formed even if the
template containing the <a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> is not instantiated; no
diagnostic required<a class='hidden_link' href='#dep.type-7.sentence-1'>.</a></div> <div id='dep.type-7.sentence-2' class='sentence'>Similarly, if the <a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a> in a class
member access expression for which the type of the object expression is the
current instantiation does not refer to a member of the current instantiation
or a member of an unknown specialization, the program is ill-formed even if the
template containing the member access expression is not instantiated; no diagnostic
required<a class='hidden_link' href='#dep.type-7.sentence-2'>.</a></div> <div id='dep.type-7.example-1' class='example'>[&nbsp;<a class='example_link' href='#dep.type-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> type;
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>type i;               <span class='comment'>// OK: refers to a member of the current instantiation</span>
    <span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>other j;     <span class='comment'>// error: neither a member of the current instantiation nor</span>
                                <span class='comment'>// a member of an unknown specialization</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='dep.type-8'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5280'>#</a></div><div id='dep.type-8.sentence-1' class='sentence'>If, for a given set of template arguments, a specialization of a template is
instantiated that refers to a member of the current instantiation with a
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> or class member access expression, the name in the
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> or class member access expression is looked up in the
template instantiation context<a class='hidden_link' href='#dep.type-8.sentence-1'>.</a></div> <div id='dep.type-8.sentence-2' class='sentence'>If the result of this lookup differs from the
result of name lookup in the template definition context, name lookup is
ambiguous<a class='hidden_link' href='#dep.type-8.sentence-2'>.</a></div> <div id='dep.type-8.example-1' class='example'>[&nbsp;<a class='example_link' href='#dep.type-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> m;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> m;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> C <span class='operator'>:</span> A, T <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>m; <span class='curlybracket'>}</span>   <span class='comment'>// finds <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;m</span> in the template definition context</span>
  <span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> m; <span class='curlybracket'>}</span>         <span class='comment'>// finds <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;m</span> in the template definition context</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='keyword'>int</span> C<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// error: finds both <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;m</span> and <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;m</span></span>
<span class='keyword'>template</span> <span class='keyword'>int</span> C<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span><span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// OK: transformation to class member access syntax</span>
                            <span class='comment'>// does not occur in the template definition context; see <a href='class.mfct.non-static'>[class.mfct.non-static]</a></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='dep.type-9'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5310'>#</a></div><div id='dep.type-9.sentence-1' class='sentence'>A type is dependent if it is
<ul class='itemize'><li id='dep.type-9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.1'>(9.1)</a></div>a template parameter,</li><li id='dep.type-9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.2'>(9.2)</a></div>a member of an unknown specialization,</li><li id='dep.type-9.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.3'>(9.3)</a></div>a nested class or enumeration that is a dependent member of the current
instantiation,</li><li id='dep.type-9.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.4'>(9.4)</a></div>a cv-qualified type where the cv-unqualified type is dependent,</li><li id='dep.type-9.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.5'>(9.5)</a></div>a compound type constructed from any dependent type,</li><li id='dep.type-9.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.6'>(9.6)</a></div>an array type whose element type is dependent or whose
bound (if any) is value-dependent,</li><li id='dep.type-9.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.7'>(9.7)</a></div>a function type whose exception specification is value-dependent,</li><li id='dep.type-9.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.8'>(9.8)</a></div>denoted by a <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>
in which either the template name is a template parameter or any of the
template arguments is a dependent type or an expression that is type-dependent
or value-dependent or is a pack expansion
<div id='dep.type-9.8.note-1' class='note'>[&nbsp;<a class='note_link' href='#dep.type-9.8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> This includes an <a href='class.pre#def:injected-class-name'>injected-class-name</a> of a class template
used without a <a class='grammarterm' href='#nt:template-argument-list'>template-argument-list</a>. —&nbsp;<i>end note</i></div>&nbsp;]</div> , or</li><li id='dep.type-9.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.type-9.9'>(9.9)</a></div>denoted by <span class='texttt'><span class='keyword'>decltype</span><span class='parenthesis'>(</span></span><a class='grammarterm' href='expr.comma#nt:expression'>expression</a><span class='texttt'><span class='parenthesis'>)</span></span>,
where <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> is <a href='#dep.expr'>type-dependent</a><a class='hidden_link' href='#dep.type-9.sentence-1'>.</a></li></ul></div></div><div class='para' id='dep.type-10'><div class='marginalizedparent'><a class='marginalized' href='#dep.type-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5343'>#</a></div><div id='dep.type-10.note-1' class='note'>[&nbsp;<a class='note_link' href='#dep.type-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.type-10.sentence-1' class='sentence'>Because typedefs do not introduce new types, but
instead simply refer to other types, a name that refers to a
typedef that is a member of the current instantiation is dependent
only if the type referred to is dependent<a class='hidden_link' href='#dep.type-10.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div></div><div id='dep.expr' class='section'><h4 ><a class='secnum' href='#dep.expr' style='min-width:118pt'>13.8.2.2</a> Type-dependent expressions <a class='abbr_ref' href='temp.dep.expr'>[temp.dep.expr]</a></h4><div class='para' id='dep.expr-1'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5353'>#</a></div><div id='dep.expr-1.sentence-1' class='sentence'>Except as described below, an expression is type-dependent if any
subexpression is type-dependent<a class='hidden_link' href='#dep.expr-1.sentence-1'>.</a></div></div><div class='para' id='dep.expr-2'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5357'>#</a></div><div id='dep.expr-2.sentence-1' class='sentence'><span class='texttt'><span class='keyword'>this</span></span>
is type-dependent if the class type of the enclosing member function is
dependent (<a href='#dep.type'>[temp.dep.type]</a>)<a class='hidden_link' href='#dep.expr-2.sentence-1'>.</a></div></div><div class='para' id='dep.expr-3'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5362'>#</a></div><div id='dep.expr-3.sentence-1' class='sentence'>An
<a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a>
is type-dependent if it is not a concept-id and it contains
<ul class='itemize'><li id='dep.expr-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.1'>(3.1)</a></div>an
<a class='grammarterm' href='lex.name#nt:identifier'>identifier</a>
associated by name lookup with one or more declarations
declared with a dependent type,</li><li id='dep.expr-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.2'>(3.2)</a></div>an
<a class='grammarterm' href='lex.name#nt:identifier'>identifier</a>
associated by name lookup with
a non-type <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
declared with a type
that contains a <a href='dcl.spec.auto#def:placeholder_type'>placeholder type</a>,</li><li id='dep.expr-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.3'>(3.3)</a></div>an
<a class='grammarterm' href='lex.name#nt:identifier'>identifier</a>
associated by name lookup with
a variable declared with a type that contains a placeholder type (<a href='dcl.spec.auto'>[dcl.spec.auto]</a>)
where the initializer is type-dependent,</li><li id='dep.expr-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.4'>(3.4)</a></div>an <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> associated by name lookup with one or more
declarations of member functions of the current instantiation declared
with a return type that contains a placeholder type,</li><li id='dep.expr-3.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.5'>(3.5)</a></div>an <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> associated by name lookup with
a <a href='dcl.struct.bind'>structured binding declaration</a> whose
<a class='grammarterm' href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a> is type-dependent,</li><li id='dep.expr-3.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.6'>(3.6)</a></div>the
<a class='grammarterm' href='lex.name#nt:identifier'>identifier</a>
<span class='texttt'>__func__</span> (<a href='dcl.fct.def.general'>[dcl.fct.def.general]</a>), where any enclosing function is a
template, a member of a class template, or a generic lambda,</li><li id='dep.expr-3.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.7'>(3.7)</a></div>a
<a class='grammarterm' href='#nt:template-id'>template-id</a>
that is dependent,</li><li id='dep.expr-3.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.8'>(3.8)</a></div>a
<a class='grammarterm' href='class.conv.fct#nt:conversion-function-id'>conversion-function-id</a>
that specifies a dependent type, or</li><li id='dep.expr-3.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.expr-3.9'>(3.9)</a></div>a
<a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a>
or a
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a>
that names a member of an unknown specialization;</li></ul>
or if it names a dependent member of the current instantiation that is a static
data member of type
“array of unknown bound of <span class='texttt'>T</span>” for some <span class='texttt'>T</span> (<a href='#static'>[temp.static]</a>)<a class='hidden_link' href='#dep.expr-3.sentence-1'>.</a></div> <div id='dep.expr-3.sentence-2' class='sentence'>Expressions of the following forms are type-dependent only if the type
specified by the
<a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a>,
<a class='grammarterm' href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a>
or
<a class='grammarterm' href='expr.new#nt:new-type-id'>new-type-id</a>
is dependent, even if any subexpression is type-dependent:</div><pre class='ncsimplebnf'><a class='grammarterm' href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='terminal'><span class='operator'>::</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='texttt'><span class='keyword'>new</span></span><span class='indexparent'><a class='index' id=':new'></a></span> <a class='grammarterm' href='expr.new#nt:new-placement'>new-placement</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <a class='grammarterm' href='expr.new#nt:new-type-id'>new-type-id</a> <a class='grammarterm' href='expr.new#nt:new-initializer'>new-initializer</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
<span class='terminal'><span class='operator'>::</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='texttt'><span class='keyword'>new</span></span><span class='indexparent'><a class='index' id=':new_'></a></span> <a class='grammarterm' href='expr.new#nt:new-placement'>new-placement</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='parenthesis'>)</span></span> <a class='grammarterm' href='expr.new#nt:new-initializer'>new-initializer</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
<span class='texttt'><span class='keyword'>dynamic_&shy;cast</span></span><span class='indexparent'><a class='index' id=':dynamic_cast'></a></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>static_&shy;cast</span></span><span class='indexparent'><a class='index' id=':static_cast'></a></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>const_&shy;cast</span></span><span class='indexparent'><a class='index' id=':const_cast'></a></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>reinterpret_&shy;cast</span></span><span class='indexparent'><a class='index' id=':reinterpret_cast'></a></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='parenthesis'>)</span></span> <a class='grammarterm' href='expr.cast#nt:cast-expression'>cast-expression</a>
</pre></div><div class='para' id='dep.expr-4'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5435'>#</a></div><div id='dep.expr-4.sentence-1' class='sentence'>Expressions of the following forms are never type-dependent (because the type
of the expression cannot be dependent):</div><pre class='ncsimplebnf'><a class='grammarterm' href='lex.literal.kinds#nt:literal'>literal</a>
<span class='texttt'><span class='keyword'>sizeof</span></span><span class='indexparent'><a class='index' id=':sizeof'></a></span> <a class='grammarterm' href='expr.unary#nt:unary-expression'>unary-expression</a>
<span class='texttt'><span class='keyword'>sizeof</span></span><span class='indexparent'><a class='index' id=':sizeof_'></a></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>sizeof</span></span><span class='indexparent'><a class='index' id=':sizeof__'></a></span> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>alignof</span></span><span class='indexparent'><a class='index' id=':alignof'></a></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>typeid</span></span><span class='indexparent'><a class='index' id=':typeid'></a></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>typeid</span></span><span class='indexparent'><a class='index' id=':typeid_'></a></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='terminal'><span class='operator'>::</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='texttt'><span class='keyword'>delete</span></span><span class='indexparent'><a class='index' id=':delete'></a></span> <a class='grammarterm' href='expr.cast#nt:cast-expression'>cast-expression</a>
<span class='terminal'><span class='operator'>::</span></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='texttt'><span class='keyword'>delete</span></span><span class='indexparent'><a class='index' id=':delete_'></a></span> <span class='terminal'><span class='squarebracket'>[</span></span> <span class='terminal'><span class='squarebracket'>]</span></span> <a class='grammarterm' href='expr.cast#nt:cast-expression'>cast-expression</a>
<span class='texttt'><span class='keyword'>throw</span></span><span class='indexparent'><a class='index' id=':throw'></a></span> <a class='grammarterm' href='expr.ass#nt:assignment-expression'>assignment-expression</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
<span class='texttt'><span class='keyword'>noexcept</span></span><span class='indexparent'><a class='index' id=':noexcept'></a></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'><span class='parenthesis'>)</span></span>
</pre><div id='dep.expr-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#dep.expr-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.expr-4.sentence-2' class='sentence'>For the standard library macro <span class='texttt'>offsetof</span>,
see <a href='support.types'>[support.types]</a><a class='hidden_link' href='#dep.expr-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='dep.expr-5'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5458'>#</a></div><div id='dep.expr-5.sentence-1' class='sentence'>A <a href='expr.ref'>class member access expression</a> is
type-dependent if
the expression refers to a member of the current instantiation and
the type of the referenced member is dependent, or the class member access
expression refers to a member of an unknown specialization<a class='hidden_link' href='#dep.expr-5.sentence-1'>.</a></div> <div id='dep.expr-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#dep.expr-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.expr-5.sentence-2' class='sentence'>In an expression of the form
<span class='texttt'>x<span class='operator'>.</span>y</span>
or
<span class='texttt'>xp<span class='operator'>-</span><span class='anglebracket'>&gt;</span>y</span>
the type of the expression is usually the type of the member
<span class='texttt'>y</span>
of the class of
<span class='texttt'>x</span>
(or the class pointed to by
<span class='texttt'>xp</span>)<a class='hidden_link' href='#dep.expr-5.sentence-2'>.</a></div> <div id='dep.expr-5.sentence-3' class='sentence'>However, if
<span class='texttt'>x</span>
or
<span class='texttt'>xp</span>
refers to a dependent type that is not the current instantiation,
the type of
<span class='texttt'>y</span>
is always dependent<a class='hidden_link' href='#dep.expr-5.sentence-3'>.</a></div> <div id='dep.expr-5.sentence-4' class='sentence'>If
<span class='texttt'>x</span>
or <span class='texttt'>xp</span>
refers to a non-dependent type or refers to the current instantiation, the
type of
<span class='texttt'>y</span>
is the type of the class member access expression<a class='hidden_link' href='#dep.expr-5.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='dep.expr-6'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5491'>#</a></div><div id='dep.expr-6.sentence-1' class='sentence'>A <a class='grammarterm' href='dcl.init#nt:braced-init-list'>braced-init-list</a> is type-dependent if any element is
type-dependent or is a pack expansion<a class='hidden_link' href='#dep.expr-6.sentence-1'>.</a></div></div><div class='para' id='dep.expr-7'><div class='marginalizedparent'><a class='marginalized' href='#dep.expr-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5495'>#</a></div><div id='dep.expr-7.sentence-1' class='sentence'>A <a class='grammarterm' href='expr.prim.fold#nt:fold-expression'>fold-expression</a> is type-dependent<a class='hidden_link' href='#dep.expr-7.sentence-1'>.</a></div></div></div><div id='dep.constexpr' class='section'><h4 ><a class='secnum' href='#dep.constexpr' style='min-width:118pt'>13.8.2.3</a> Value-dependent expressions <a class='abbr_ref' href='temp.dep.constexpr'>[temp.dep.constexpr]</a></h4><div class='para' id='dep.constexpr-1'><div class='marginalizedparent'><a class='marginalized' href='#dep.constexpr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5500'>#</a></div><div id='dep.constexpr-1.sentence-1' class='sentence'>Except as described below, an expression used in a context where a
constant expression is required is value-dependent if any
subexpression is value-dependent<a class='hidden_link' href='#dep.constexpr-1.sentence-1'>.</a></div></div><div class='para' id='dep.constexpr-2'><div class='marginalizedparent'><a class='marginalized' href='#dep.constexpr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5505'>#</a></div><div id='dep.constexpr-2.sentence-1' class='sentence'>An
<a class='grammarterm' href='expr.prim.id#nt:id-expression'>id-expression</a>
is value-dependent if:
<ul class='itemize'><li id='dep.constexpr-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.constexpr-2.1'>(2.1)</a></div>it is a concept-id and any of its arguments are dependent,</li><li id='dep.constexpr-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.constexpr-2.2'>(2.2)</a></div>it is type-dependent,</li><li id='dep.constexpr-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.constexpr-2.3'>(2.3)</a></div>it is the name of a non-type template parameter,</li><li id='dep.constexpr-2.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.constexpr-2.4'>(2.4)</a></div>it names a static data member that is a dependent member of the current
instantiation and is not initialized in a <a class='grammarterm' href='class.mem#nt:member-declarator'>member-declarator</a>,</li><li id='dep.constexpr-2.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.constexpr-2.5'>(2.5)</a></div>it names a static member function that is a dependent member of the current
instantiation, or</li><li id='dep.constexpr-2.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#dep.constexpr-2.6'>(2.6)</a></div>it names a potentially-constant variable (<a href='expr.const'>[expr.const]</a>)
that is initialized with an expression that is value-dependent<a class='hidden_link' href='#dep.constexpr-2.sentence-1'>.</a></li></ul></div><div id='dep.constexpr-2.sentence-2' class='sentence'>Expressions of the following form are value-dependent if the
<a class='grammarterm' href='expr.unary#nt:unary-expression'>unary-expression</a> or <a class='grammarterm' href='expr.comma#nt:expression'>expression</a>
is type-dependent or the
<a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a>
is dependent:</div><pre class='ncsimplebnf'><span class='texttt'><span class='keyword'>sizeof</span></span><span class='indexparent'><a class='index' id=':sizeof___'></a></span> <a class='grammarterm' href='expr.unary#nt:unary-expression'>unary-expression</a>
<span class='texttt'><span class='keyword'>sizeof</span></span><span class='indexparent'><a class='index' id=':sizeof____'></a></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>typeid</span></span><span class='indexparent'><a class='index' id=':typeid__'></a></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>typeid</span></span><span class='indexparent'><a class='index' id=':typeid___'></a></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>alignof</span></span><span class='indexparent'><a class='index' id=':alignof_'></a></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>noexcept</span></span><span class='indexparent'><a class='index' id=':noexcept_'></a></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'><span class='parenthesis'>)</span></span>
</pre><div id='dep.constexpr-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#dep.constexpr-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.constexpr-2.sentence-3' class='sentence'>For the standard library macro <span class='texttt'>offsetof</span>,
see <a href='support.types'>[support.types]</a><a class='hidden_link' href='#dep.constexpr-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='dep.constexpr-3'><div class='marginalizedparent'><a class='marginalized' href='#dep.constexpr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5547'>#</a></div><div id='dep.constexpr-3.sentence-1' class='sentence'>Expressions of the following form are value-dependent if either the
<a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a>
or
<a class='grammarterm' href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a>
is dependent or the
<a class='grammarterm' href='expr.comma#nt:expression'>expression</a>
or
<a class='grammarterm' href='expr.cast#nt:cast-expression'>cast-expression</a>
is value-dependent:</div><pre class='ncsimplebnf'><a class='grammarterm' href='dcl.type.simple#nt:simple-type-specifier'>simple-type-specifier</a> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.post#nt:expression-list'>expression-list</a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>static_&shy;cast</span></span><span class='indexparent'><a class='index' id=':static_cast_'></a></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>const_&shy;cast</span></span><span class='indexparent'><a class='index' id=':const_cast_'></a></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='texttt'><span class='keyword'>reinterpret_&shy;cast</span></span><span class='indexparent'><a class='index' id=':reinterpret_cast_'></a></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='dcl.name#nt:type-id'>type-id</a> <span class='terminal'><span class='parenthesis'>)</span></span> <a class='grammarterm' href='expr.cast#nt:cast-expression'>cast-expression</a>
</pre></div><div class='para' id='dep.constexpr-4'><div class='marginalizedparent'><a class='marginalized' href='#dep.constexpr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5566'>#</a></div><div id='dep.constexpr-4.sentence-1' class='sentence'>Expressions of the following form are value-dependent:</div><pre class='ncsimplebnf'><span class='texttt'><span class='keyword'>sizeof</span></span><span class='indexparent'><a class='index' id=':sizeof_____'></a></span> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> <span class='terminal'><span class='parenthesis'>(</span></span> <a class='grammarterm' href='lex.name#nt:identifier'>identifier</a> <span class='terminal'><span class='parenthesis'>)</span></span>
<a class='grammarterm' href='expr.prim.fold#nt:fold-expression'>fold-expression</a>
</pre></div><div class='para' id='dep.constexpr-5'><div class='marginalizedparent'><a class='marginalized' href='#dep.constexpr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5574'>#</a></div><div id='dep.constexpr-5.sentence-1' class='sentence'>An expression of the form <span class='texttt'><span class='operator'>&amp;</span></span><a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> where the
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> names a dependent member of the current
instantiation is value-dependent<a class='hidden_link' href='#dep.constexpr-5.sentence-1'>.</a></div> <div id='dep.constexpr-5.sentence-2' class='sentence'>An expression of the form <span class='texttt'><span class='operator'>&amp;</span></span><a class='grammarterm' href='expr.cast#nt:cast-expression'>cast-expression</a>
is also value-dependent if evaluating <a class='grammarterm' href='expr.cast#nt:cast-expression'>cast-expression</a>
as a <a href='expr.const#def:expression,core_constant'>core constant expression</a> succeeds and
the result of the evaluation refers to a templated entity
that is an object with static or thread storage duration or a member function<a class='hidden_link' href='#dep.constexpr-5.sentence-2'>.</a></div></div></div><div id='dep.temp' class='section'><h4 ><a class='secnum' href='#dep.temp' style='min-width:118pt'>13.8.2.4</a> Dependent template arguments <a class='abbr_ref' href='temp.dep.temp'>[temp.dep.temp]</a></h4><div class='para' id='dep.temp-1'><div class='marginalizedparent'><a class='marginalized' href='#dep.temp-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5586'>#</a></div><div id='dep.temp-1.sentence-1' class='sentence'>A type
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
is dependent if the type it specifies is dependent<a class='hidden_link' href='#dep.temp-1.sentence-1'>.</a></div></div><div class='para' id='dep.temp-2'><div class='marginalizedparent'><a class='marginalized' href='#dep.temp-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5591'>#</a></div><div id='dep.temp-2.sentence-1' class='sentence'>A non-type
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
is dependent if its type is dependent or the constant
expression it specifies is value-dependent<a class='hidden_link' href='#dep.temp-2.sentence-1'>.</a></div></div><div class='para' id='dep.temp-3'><div class='marginalizedparent'><a class='marginalized' href='#dep.temp-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5597'>#</a></div><div id='dep.temp-3.sentence-1' class='sentence'>Furthermore, a non-type
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
is dependent if the corresponding non-type <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
is of reference or pointer type and the <a class='grammarterm' href='#nt:template-argument'>template-argument</a>
designates or points to a member of the current instantiation or a member of
a dependent type<a class='hidden_link' href='#dep.temp-3.sentence-1'>.</a></div></div><div class='para' id='dep.temp-4'><div class='marginalizedparent'><a class='marginalized' href='#dep.temp-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5605'>#</a></div><div id='dep.temp-4.sentence-1' class='sentence'>A template
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
is dependent if it names a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
or is a
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a>
that refers to a member of an unknown specialization<a class='hidden_link' href='#dep.temp-4.sentence-1'>.</a></div></div></div></div><div id='nondep' class='section'><h3 ><a class='secnum' href='#nondep' style='min-width:103pt'>13.8.3</a> Non-dependent names <a class='abbr_ref' href='temp.nondep'>[temp.nondep]</a></h3><div class='para' id='nondep-1'><div class='marginalizedparent'><a class='marginalized' href='#nondep-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5616'>#</a></div><div id='nondep-1.sentence-1' class='sentence'>Non-dependent names used in a template definition are found using the
usual name lookup and bound at the point they are used<a class='hidden_link' href='#nondep-1.sentence-1'>.</a></div> <div id='nondep-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#nondep-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Z <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    g<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;           <span class='comment'>// calls <span class='tcode_in_codeblock'>g(double)</span></span>
    h<span class='operator'>+</span><span class='operator'>+</span>;            <span class='comment'>// ill-formed: cannot increment function; this could be diagnosed</span>
                    <span class='comment'>// either here or at the point of instantiation</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;        <span class='comment'>// not in scope at the point of the template definition, not considered for the call <span class='tcode_in_codeblock'>g(1)</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div id='dep.res' class='section'><h3 ><a class='secnum' href='#dep.res' style='min-width:103pt'>13.8.4</a> Dependent name resolution <a class='abbr_ref' href='temp.dep.res'>[temp.dep.res]</a></h3><div id='point' class='section'><h4 ><a class='secnum' href='#point' style='min-width:118pt'>13.8.4.1</a> Point of instantiation <a class='abbr_ref' href='temp.point'>[temp.point]</a></h4><div class='para' id='point-1'><div class='marginalizedparent'><a class='marginalized' href='#point-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5640'>#</a></div><div id='point-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':instantiation,point_of'></a></span>For a function template specialization, a member function template
specialization, or a specialization for a member function or static data member
of a class template,
if the specialization is implicitly instantiated because it is referenced
from within another template specialization and
the context from which it is referenced depends on a template parameter,
the point of instantiation of the specialization is the point of instantiation
of the enclosing specialization<a class='hidden_link' href='#point-1.sentence-1'>.</a></div> <div id='point-1.sentence-2' class='sentence'>Otherwise, the point of instantiation for such a specialization immediately
follows the namespace scope declaration
or definition that refers to the specialization<a class='hidden_link' href='#point-1.sentence-2'>.</a></div></div><div class='para' id='point-2'><div class='marginalizedparent'><a class='marginalized' href='#point-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5654'>#</a></div><div id='point-2.sentence-1' class='sentence'>If a function template or member function of a class template is called
in a way which uses the definition of a default argument of that function
template or member function,
the point of instantiation of the default argument is the point of
instantiation of the function template or member function specialization<a class='hidden_link' href='#point-2.sentence-1'>.</a></div></div><div class='para' id='point-3'><div class='marginalizedparent'><a class='marginalized' href='#point-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5661'>#</a></div><div id='point-3.sentence-1' class='sentence'>For a <a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a> of a function template
specialization or specialization of a member function of a class template, if
the <a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a> is implicitly instantiated because
it is needed by another template specialization and the context that requires
it depends on a template parameter, the point of instantiation of the
<a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a> is the point of instantiation of the
specialization that requires it<a class='hidden_link' href='#point-3.sentence-1'>.</a></div> <div id='point-3.sentence-2' class='sentence'>Otherwise, the point of instantiation for such
a <a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a> immediately follows the namespace
scope declaration or definition that requires the
<a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a><a class='hidden_link' href='#point-3.sentence-2'>.</a></div></div><div class='para' id='point-4'><div class='marginalizedparent'><a class='marginalized' href='#point-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5675'>#</a></div><div id='point-4.sentence-1' class='sentence'>For a class template specialization, a class member template specialization,
or a specialization for a class member of a class template,
if the specialization is implicitly instantiated because it is referenced
from within another template specialization,
if the context from which the specialization is referenced depends on a
template parameter,
and if the specialization is not instantiated previous to the instantiation of
the enclosing template,
the point of instantiation is immediately before the point of instantiation of
the enclosing template<a class='hidden_link' href='#point-4.sentence-1'>.</a></div> <div id='point-4.sentence-2' class='sentence'>Otherwise, the point of instantiation for such a specialization immediately
precedes the namespace scope declaration
or definition that refers to the specialization<a class='hidden_link' href='#point-4.sentence-2'>.</a></div></div><div class='para' id='point-5'><div class='marginalizedparent'><a class='marginalized' href='#point-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5690'>#</a></div><div id='point-5.sentence-1' class='sentence'>If a virtual function is implicitly instantiated, its point of instantiation
is immediately following the point of instantiation of its enclosing class
template specialization<a class='hidden_link' href='#point-5.sentence-1'>.</a></div></div><div class='para' id='point-6'><div class='marginalizedparent'><a class='marginalized' href='#point-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5695'>#</a></div><div id='point-6.sentence-1' class='sentence'>An explicit instantiation definition is an instantiation
point for the specialization or specializations specified by the explicit
instantiation<a class='hidden_link' href='#point-6.sentence-1'>.</a></div></div><div class='para' id='point-7'><div class='marginalizedparent'><a class='marginalized' href='#point-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5700'>#</a></div><div id='point-7.sentence-1' class='sentence'>A specialization for a function template, a member function template,
or of a member function or static data member of a class template may have
multiple points of instantiations within a translation unit, and in addition
to the points of instantiation described above,
<ul class='itemize'><li id='point-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#point-7.1'>(7.1)</a></div>for any such
specialization that has a point of instantiation within the
<a class='grammarterm' href='dcl.pre#nt:declaration-seq'>declaration-seq</a> of the
<a class='grammarterm' href='basic.link#nt:translation-unit'>translation-unit</a>,
prior to the <a class='grammarterm' href='module.private.frag#nt:private-module-fragment'>private-module-fragment</a> (if any),
the point after the <a class='grammarterm' href='dcl.pre#nt:declaration-seq'>declaration-seq</a>
of the <a class='grammarterm' href='basic.link#nt:translation-unit'>translation-unit</a>
is also considered a point of instantiation,
and</li><li id='point-7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#point-7.2'>(7.2)</a></div>for any such specialization that has a point of instantiation
within the <a class='grammarterm' href='module.private.frag#nt:private-module-fragment'>private-module-fragment</a>,
the end of the translation unit is also
considered a point of instantiation<a class='hidden_link' href='#point-7.sentence-1'>.</a></li></ul></div> <div id='point-7.sentence-2' class='sentence'>
A specialization for a class template has at most one point of instantiation
within a translation unit<a class='hidden_link' href='#point-7.sentence-2'>.</a></div> <div id='point-7.sentence-3' class='sentence'>A specialization for any template may have points of instantiation in multiple
translation units<a class='hidden_link' href='#point-7.sentence-3'>.</a></div> <div id='point-7.sentence-4' class='sentence'>If two different points of instantiation give a template specialization
different meanings according to the <a href='basic.def.odr'>one-definition rule</a>,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#point-7.sentence-4'>.</a></div></div></div><div id='dep.candidate' class='section'><h4 ><a class='secnum' href='#dep.candidate' style='min-width:118pt'>13.8.4.2</a> Candidate functions <a class='abbr_ref' href='temp.dep.candidate'>[temp.dep.candidate]</a></h4><div class='para' id='dep.candidate-1'><div class='marginalizedparent'><a class='marginalized' href='#dep.candidate-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5732'>#</a></div><div id='dep.candidate-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':functions,candidate'></a></span>For a function call where the <a class='grammarterm' href='expr.post#nt:postfix-expression'>postfix-expression</a> is a
dependent name,
the candidate functions are found using the usual lookup
rules from the template definition context
(<a href='basic.lookup.unqual'>[basic.lookup.unqual]</a>, <a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>)<a class='hidden_link' href='#dep.candidate-1.sentence-1'>.</a></div> <div id='dep.candidate-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#dep.candidate-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='dep.candidate-1.sentence-2' class='sentence'>For the part of the lookup using associated namespaces (<a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>),
function declarations found in the template instantiation context
are found by this lookup, as described in <a href='basic.lookup.argdep'>[basic.lookup.argdep]</a><a class='hidden_link' href='#dep.candidate-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='dep.candidate-1.sentence-3' class='sentence'>
If
the call would be ill-formed or would find a better match had the lookup
within the associated namespaces considered all the function declarations with
external linkage introduced in those namespaces in all translation units,
not just considering those declarations found in the template definition and
template instantiation contexts, then the program has undefined behavior<a class='hidden_link' href='#dep.candidate-1.sentence-3'>.</a></div></div><div class='para' id='dep.candidate-2'><div class='marginalizedparent'><a class='marginalized' href='#dep.candidate-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5751'>#</a></div><div id='dep.candidate-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#dep.candidate-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <p>Source file <span class='texttt'><span class='literal'>"X.h"</span></span>:<pre class='codeblock'>
<span class='keyword'>namespace</span> Q <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</pre><p>Source file <span class='texttt'><span class='literal'>"G.h"</span></span>:<pre class='codeblock'>
<span class='keyword'>namespace</span> Q <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> g_impl<span class='parenthesis'>(</span>X, X<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</pre><p>Module interface unit of <span class='texttt'>M1</span>:<pre class='codeblock'>
<span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"X.h"</span>
<span class='preprocessordirective'>#include</span> <span class='literal'>"G.h"</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> M1;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  g_impl<span class='parenthesis'>(</span>t, Q<span class='operator'>::</span>X<span class='curlybracket'>{</span> <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;   <span class='comment'>// ADL in definition context finds <span class='tcode_in_codeblock'>Q&#x200b;::&#x200b;g_&shy;impl</span>, <span class='tcode_in_codeblock'>g_&shy;impl</span> not discarded</span>
<span class='curlybracket'>}</span>
</pre><p>Module interface unit of <span class='texttt'>M2</span>:<pre class='codeblock'>
<span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"X.h"</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> M2;
<span class='keyword'>import</span> M1;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span>Q<span class='operator'>::</span>X x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
   g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;                <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='dep.candidate-3'><div class='marginalizedparent'><a class='marginalized' href='#dep.candidate-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5787'>#</a></div><div id='dep.candidate-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#dep.candidate-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <p>Module interface unit of <span class='texttt'>Std</span>:<pre class='codeblock'>
<span class='keyword'>export</span> <span class='keyword'>module</span> Std;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> Iter<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> indirect_swap<span class='parenthesis'>(</span>Iter lhs, Iter rhs<span class='parenthesis'>)</span>
<span class='curlybracket'>{</span>
  swap<span class='parenthesis'>(</span><span class='operator'>*</span>lhs, <span class='operator'>*</span>rhs<span class='parenthesis'>)</span>;     <span class='comment'>// <span class='tcode_in_codeblock'>swap</span> not found by unqualified lookup, can be found only via ADL</span>
<span class='curlybracket'>}</span>
</pre><p>Module interface unit of <span class='texttt'>M</span>:<pre class='codeblock'>
<span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>import</span> Std;

<span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='comment'>/* ...*/</span> <span class='curlybracket'>}</span>;
<span class='keyword'>void</span> swap<span class='parenthesis'>(</span>S<span class='operator'>&amp;</span>, S<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;      <span class='comment'>// #1</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span>S<span class='operator'>*</span> p, S<span class='operator'>*</span> q<span class='parenthesis'>)</span>
<span class='curlybracket'>{</span>
  indirect_swap<span class='parenthesis'>(</span>p, q<span class='parenthesis'>)</span>;  <span class='comment'>// finds #1 via ADL in instantiation context</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='dep.candidate-4'><div class='marginalizedparent'><a class='marginalized' href='#dep.candidate-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5812'>#</a></div><div id='dep.candidate-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#dep.candidate-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <p>Source file <span class='texttt'><span class='literal'>"X.h"</span></span>:<pre class='codeblock'>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
X <span class='keyword'>operator</span><span class='operator'>+</span><span class='parenthesis'>(</span>X, X<span class='parenthesis'>)</span>;
</pre><p>Module interface unit of <span class='texttt'>F</span>:<pre class='codeblock'>
<span class='keyword'>export</span> <span class='keyword'>module</span> F;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  t <span class='operator'>+</span> t;
<span class='curlybracket'>}</span>
</pre><p>Module interface unit of <span class='texttt'>M</span>:<pre class='codeblock'>
<span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"X.h"</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> M;
<span class='keyword'>import</span> F;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span>X x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;             <span class='comment'>// OK: instantiates <span class='tcode_in_codeblock'>f</span> from <span class='tcode_in_codeblock'>F</span>,</span>
                    <span class='comment'>// <span class='tcode_in_codeblock'>operator+</span> is visible in instantiation context</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='dep.candidate-5'><div class='marginalizedparent'><a class='marginalized' href='#dep.candidate-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5839'>#</a></div><div id='dep.candidate-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#dep.candidate-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <p>Module interface unit of <span class='texttt'>A</span>:<pre class='codeblock'>
<span class='keyword'>export</span> <span class='keyword'>module</span> A;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  cat<span class='parenthesis'>(</span>t, t<span class='parenthesis'>)</span>;            <span class='comment'>// #1</span>
  dog<span class='parenthesis'>(</span>t, t<span class='parenthesis'>)</span>;            <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>
</pre><p>Module interface unit of <span class='texttt'>B</span>:<pre class='codeblock'>
<span class='keyword'>export</span> <span class='keyword'>module</span> B;
<span class='keyword'>import</span> A;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span>T t, U u<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>t<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</pre><p>Source file <span class='texttt'><span class='literal'>"foo.h"</span></span>, not an importable header:<pre class='codeblock'>
<span class='keyword'>struct</span> foo <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>int</span> cat<span class='parenthesis'>(</span>foo, foo<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>int</span> dog<span class='parenthesis'>(</span>foo, foo<span class='parenthesis'>)</span>;
</pre><p>Module interface unit of <span class='texttt'>C1</span>:<pre class='codeblock'>
<span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"foo.h"</span>        <span class='comment'>// <span class='tcode_in_codeblock'>dog</span> not referenced, discarded</span>
<span class='keyword'>export</span> <span class='keyword'>module</span> C1;
<span class='keyword'>import</span> B;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> h<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  g<span class='parenthesis'>(</span>foo<span class='curlybracket'>{</span> <span class='curlybracket'>}</span>, t<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</pre><p>Translation unit:<pre class='codeblock'>
<span class='keyword'>import</span> C1;
<span class='keyword'>void</span> i<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
   h<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                <span class='comment'>// error: <span class='tcode_in_codeblock'>dog</span> not found at #2</span>
<span class='curlybracket'>}</span>
</pre><p>Importable header <span class='texttt'><span class='literal'>"bar.h"</span></span>:<pre class='codeblock'>
<span class='keyword'>struct</span> bar <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>int</span> cat<span class='parenthesis'>(</span>bar, bar<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>int</span> dog<span class='parenthesis'>(</span>bar, bar<span class='parenthesis'>)</span>;
</pre><p>Module interface unit of <span class='texttt'>C2</span>:<pre class='codeblock'>
<span class='keyword'>module</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"bar.h"</span>        <span class='comment'>// imports header unit <span class='tcode_in_codeblock'>"bar.h"</span></span>
<span class='keyword'>export</span> <span class='keyword'>module</span> C2;
<span class='keyword'>import</span> B;
<span class='keyword'>export</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> j<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  g<span class='parenthesis'>(</span>bar<span class='curlybracket'>{</span> <span class='curlybracket'>}</span>, t<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</pre><p>Translation unit:<pre class='codeblock'>
<span class='keyword'>import</span> C2;
<span class='keyword'>void</span> k<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
   j<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                <span class='comment'>// OK, <span class='tcode_in_codeblock'>dog</span> found in instantiation context:</span>
                        <span class='comment'>// visible at end of module interface unit of <span class='tcode_in_codeblock'>C2</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div></div><div id='inject' class='section'><h3 ><a class='secnum' href='#inject' style='min-width:103pt'>13.8.5</a> Friend names declared within a class template <a class='abbr_ref' href='temp.inject'>[temp.inject]</a></h3><div class='para' id='inject-1'><div class='marginalizedparent'><a class='marginalized' href='#inject-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5913'>#</a></div><div id='inject-1.sentence-1' class='sentence'>Friend classes or functions can be declared within a class template<a class='hidden_link' href='#inject-1.sentence-1'>.</a></div> <div id='inject-1.sentence-2' class='sentence'>When a template is instantiated, the names of its friends are treated
as if the specialization had been explicitly declared at its point of
instantiation<a class='hidden_link' href='#inject-1.sentence-2'>.</a></div></div><div class='para' id='inject-2'><div class='marginalizedparent'><a class='marginalized' href='#inject-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5919'>#</a></div><div id='inject-2.sentence-1' class='sentence'>As with non-template classes, the names of namespace-scope friend
functions of a class template specialization are not visible during
an ordinary lookup unless explicitly declared at namespace scope (<a href='class.friend'>[class.friend]</a>)<a class='hidden_link' href='#inject-2.sentence-1'>.</a></div> <div id='inject-2.sentence-2' class='sentence'>Such names may be found under the rules for associated
classes (<a href='basic.lookup.argdep'>[basic.lookup.argdep]</a>)<a class='hidden_link' href='#inject-2.sentence-2'>.</a><a class='footnotenum' href='#footnote-137' id='footnoteref-137'>137</a></div> <div id='inject-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#inject-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> number <span class='curlybracket'>{</span>
  number<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  <span class='keyword'>friend</span> number gcd<span class='parenthesis'>(</span>number x, number y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  number<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> a<span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span>, b<span class='parenthesis'>(</span><span class='literal'>4</span><span class='parenthesis'>)</span>;
  a <span class='operator'>=</span> gcd<span class='parenthesis'>(</span>a,b<span class='parenthesis'>)</span>;     <span class='comment'>// finds <span class='tcode_in_codeblock'>gcd</span> because <span class='tcode_in_codeblock'>number&lt;double&gt;</span> is an associated class,</span>
                    <span class='comment'>// making <span class='tcode_in_codeblock'>gcd</span> visible in its namespace (global scope)</span>
  b <span class='operator'>=</span> gcd<span class='parenthesis'>(</span><span class='literal'>3</span>,<span class='literal'>4</span><span class='parenthesis'>)</span>;     <span class='comment'>// error: <span class='tcode_in_codeblock'>gcd</span> is not visible</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-137'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-137'>137)</a></div><div id='footnote-137.sentence-1' class='sentence'>Friend declarations do not
introduce new names into any scope, either
when the template is declared or when it is instantiated<a class='hidden_link' href='#footnote-137.sentence-1'>.</a></div> <a href='#footnoteref-137'>⮥</a></div></div></div><div id='spec' class='section'><h2 ><a class='secnum' href='#spec' style='min-width:88pt'>13.9</a> Template instantiation and specialization <a class='abbr_ref' href='temp.spec'>[temp.spec]</a></h2><div class='para' id='spec-1'><div class='marginalizedparent'><a class='marginalized' href='#spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5945'>#</a></div><div id='spec-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':specialization,template'></a></span>The act of instantiating a function, a variable,
a class, a member of a class template, or
a member template is referred to as
<a class='hidden_link' href='#def:template_instantiation' id='def:template_instantiation'><i >template instantiation</i></a><a class='hidden_link' href='#spec-1.sentence-1'>.</a></div></div><div class='para' id='spec-2'><div class='marginalizedparent'><a class='marginalized' href='#spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5952'>#</a></div><div id='spec-2.sentence-1' class='sentence'>A function instantiated from a function template is called an instantiated
function<a class='hidden_link' href='#spec-2.sentence-1'>.</a></div> <div id='spec-2.sentence-2' class='sentence'>A class instantiated from a class template is called an instantiated class<a class='hidden_link' href='#spec-2.sentence-2'>.</a></div> <div id='spec-2.sentence-3' class='sentence'>A member function, a member class, a member enumeration, or a static data member of a class template
instantiated from the member definition of the class template is called,
respectively, an instantiated member function, member class, member enumeration, or static data
member<a class='hidden_link' href='#spec-2.sentence-3'>.</a></div> <div id='spec-2.sentence-4' class='sentence'>A member function instantiated from a member function template is called an
instantiated member function<a class='hidden_link' href='#spec-2.sentence-4'>.</a></div> <div id='spec-2.sentence-5' class='sentence'>A member class instantiated from a member class template is called an
instantiated member class<a class='hidden_link' href='#spec-2.sentence-5'>.</a></div> <div id='spec-2.sentence-6' class='sentence'>A variable instantiated from a variable template is called an
instantiated variable<a class='hidden_link' href='#spec-2.sentence-6'>.</a></div> <div id='spec-2.sentence-7' class='sentence'>A static data member instantiated from a static data member template
is called an instantiated static data member<a class='hidden_link' href='#spec-2.sentence-7'>.</a></div></div><div class='para' id='spec-3'><div class='marginalizedparent'><a class='marginalized' href='#spec-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L5969'>#</a></div><div id='spec-3.sentence-1' class='sentence'>An explicit specialization may be declared for a function template,
a variable template, a class template, a member of a class template, or
a member template<a class='hidden_link' href='#spec-3.sentence-1'>.</a></div> <div id='spec-3.sentence-2' class='sentence'>An explicit specialization declaration is introduced by
<span class='texttt'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#spec-3.sentence-2'>.</a></div> <div id='spec-3.sentence-3' class='sentence'>In an explicit specialization declaration for
a variable template, a class template,
a member of a class template or a class member template,
the name of the variable or class that is explicitly specialized shall be a
<a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a><a class='hidden_link' href='#spec-3.sentence-3'>.</a></div> <div id='spec-3.sentence-4' class='sentence'>In the explicit specialization declaration for a function template or
a member function template,
the name of the function or member function explicitly specialized may be a
<a class='grammarterm' href='#nt:template-id'>template-id</a><a class='hidden_link' href='#spec-3.sentence-4'>.</a></div> <div id='spec-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#spec-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T <span class='operator'>=</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>int</span> x;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;        <span class='comment'>// specialize for <span class='tcode_in_codeblock'>T == double</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;              <span class='comment'>// specialize for <span class='tcode_in_codeblock'>T == int</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>             <span class='comment'>// specialize for <span class='tcode_in_codeblock'>U == char</span></span>
                                        <span class='comment'>// <span class='tcode_in_codeblock'>U</span> is deduced from the parameter type</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>         <span class='comment'>// specialize for <span class='tcode_in_codeblock'>U == int</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>x <span class='operator'>=</span> <span class='literal'>0</span>;          <span class='comment'>// specialize for <span class='tcode_in_codeblock'>T == char</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T <span class='operator'>=</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>int</span> x;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> B<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>x <span class='operator'>=</span> <span class='literal'>1</span>;              <span class='comment'>// specialize for <span class='tcode_in_codeblock'>T == int</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='spec-4'><div class='marginalizedparent'><a class='marginalized' href='#spec-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6005'>#</a></div><div id='spec-4.sentence-1' class='sentence'>An instantiated template specialization can be either implicitly
instantiated (<a href='#inst'>[temp.inst]</a>) for a given argument list or be explicitly
instantiated (<a href='#explicit'>[temp.explicit]</a>)<a class='hidden_link' href='#spec-4.sentence-1'>.</a></div> <div id='spec-4.sentence-2' class='sentence'>A <a class='hidden_link' href='#def:specialization' id='def:specialization'><i >specialization</i></a> is a class, variable, function, or class member that is either
instantiated (<a href='#inst'>[temp.inst]</a>) from a templated entity or is an
explicit specialization (<a href='#expl.spec'>[temp.expl.spec]</a>) of a templated entity<a class='hidden_link' href='#spec-4.sentence-2'>.</a></div></div><div class='para' id='spec-5'><div class='marginalizedparent'><a class='marginalized' href='#spec-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6013'>#</a></div><div id='spec-5.sentence-1' class='sentence'>For a given template and a given set of
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>,
<ul class='itemize'><li id='spec-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#spec-5.1'>(5.1)</a></div>an explicit instantiation definition shall appear at most once in a program,</li><li id='spec-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#spec-5.2'>(5.2)</a></div>an explicit specialization shall be defined at most once
in a program, as specified in <a href='basic.def.odr'>[basic.def.odr]</a>, and</li><li id='spec-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#spec-5.3'>(5.3)</a></div>both an explicit instantiation and a declaration of an
explicit specialization shall not appear in a program unless
the explicit instantiation follows a declaration of the explicit
specialization<a class='hidden_link' href='#spec-5.sentence-1'>.</a></li></ul></div> <div id='spec-5.sentence-2' class='sentence'>
An implementation is not required to diagnose a violation of this rule<a class='hidden_link' href='#spec-5.sentence-2'>.</a></div></div><div class='para' id='spec-6'><div class='marginalizedparent'><a class='marginalized' href='#spec-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6030'>#</a></div><div id='spec-6.sentence-1' class='sentence'>The usual access checking rules do not apply to names
in a declaration of an explicit instantiation or explicit specialization,
with the exception of names appearing in a function body,
default argument, base-clause, member-specification, enumerator-list,
or static data member or variable template initializer<a class='hidden_link' href='#spec-6.sentence-1'>.</a></div> <div id='spec-6.note-1' class='note'>[&nbsp;<a class='note_link' href='#spec-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='spec-6.sentence-2' class='sentence'>In particular, the template arguments and names
used in the function declarator
(including parameter types, return types and exception specifications)
may be private types or objects that would normally not be accessible<a class='hidden_link' href='#spec-6.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='spec-7'><div class='marginalizedparent'><a class='marginalized' href='#spec-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6043'>#</a></div><div id='spec-7.sentence-1' class='sentence'>Each class template specialization instantiated from a template has its own
copy of any static members<a class='hidden_link' href='#spec-7.sentence-1'>.</a></div> <div id='spec-7.example-1' class='example'>[&nbsp;<a class='example_link' href='#spec-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> T s;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T X<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>s <span class='operator'>=</span> <span class='literal'>0</span>;
X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> aa;
X<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> bb;
</pre><div id='spec-7.sentence-2' class='sentence'><span class='texttt'>X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span></span>
has a static member
<span class='texttt'>s</span>
of type
<span class='texttt'><span class='keyword'>int</span></span>
and
<span class='texttt'>X<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span></span>
has a static member
<span class='texttt'>s</span>
of type
<span class='texttt'><span class='keyword'>char</span><span class='operator'>*</span></span><a class='hidden_link' href='#spec-7.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='spec-8'><div class='marginalizedparent'><a class='marginalized' href='#spec-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6069'>#</a></div><div id='spec-8.sentence-1' class='sentence'>If a function declaration acquired its function type through
a <a href='#dep.type'>dependent type</a> without using the syntactic form of
a function declarator, the program is ill-formed<a class='hidden_link' href='#spec-8.sentence-1'>.</a></div> <div id='spec-8.example-1' class='example'>[&nbsp;<a class='example_link' href='#spec-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> T t;
<span class='curlybracket'>}</span>;
<span class='keyword'>typedef</span> <span class='keyword'>int</span> function<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
A<span class='anglebracket'>&lt;</span>function<span class='anglebracket'>&gt;</span> a;      <span class='comment'>// error: would declare <span class='tcode_in_codeblock'>A&lt;function&gt;&#x200b;::&#x200b;t</span> as a static member function</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div id='inst' class='section'><h3 ><a class='secnum' href='#inst' style='min-width:103pt'>13.9.1</a> Implicit instantiation <a class='abbr_ref' href='temp.inst'>[temp.inst]</a></h3><div class='para' id='inst-1'><div class='marginalizedparent'><a class='marginalized' href='#inst-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6085'>#</a></div><div id='inst-1.sentence-1' class='sentence'>A template specialization <span class='math'><span class='mathalpha'>E</span></span> is a <a class='hidden_link' href='#def:specialization,declared' id='def:specialization,declared'><i >declared specialization</i></a>
if there is a reachable
explicit instantiation definition (<a href='#explicit'>[temp.explicit]</a>) or
explicit specialization declaration (<a href='#expl.spec'>[temp.expl.spec]</a>)
for <span class='math'><span class='mathalpha'>E</span></span>, or
if there is a reachable explicit instantiation declaration for <span class='math'><span class='mathalpha'>E</span></span> and
<span class='math'><span class='mathalpha'>E</span></span> is not
<ul class='itemize'><li id='inst-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#inst-1.1'>(1.1)</a></div>an inline function,</li><li id='inst-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#inst-1.2'>(1.2)</a></div>declared with a type deduced
from its initializer or return value (<a href='dcl.spec.auto'>[dcl.spec.auto]</a>),</li><li id='inst-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#inst-1.3'>(1.3)</a></div>a potentially-constant variable (<a href='expr.const'>[expr.const]</a>), or</li><li id='inst-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#inst-1.4'>(1.4)</a></div>a specialization of a templated class<a class='hidden_link' href='#inst-1.sentence-1'>.</a></li></ul></div> <div id='inst-1.note-1' class='note'>[&nbsp;<a class='note_link' href='#inst-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='inst-1.sentence-2' class='sentence'>An implicit instantiation in an importing translation unit
cannot use names with internal linkage
from an imported translation unit (<a href='basic.link'>[basic.link]</a>)<a class='hidden_link' href='#inst-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='inst-2'><div class='marginalizedparent'><a class='marginalized' href='#inst-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6110'>#</a></div><div id='inst-2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':instantiation,template_implicit'></a></span>Unless a class template specialization is a declared specialization,
the class template specialization is implicitly instantiated when the
specialization is referenced in a context that requires a completely-defined
object type or when the completeness of the class type affects the semantics
of the program<a class='hidden_link' href='#inst-2.sentence-1'>.</a></div> <div id='inst-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#inst-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='inst-2.sentence-2' class='sentence'>In particular, if the semantics of an expression depend on the member or
base class lists of a class template specialization, the class template
specialization is implicitly generated<a class='hidden_link' href='#inst-2.sentence-2'>.</a></div> <div id='inst-2.sentence-3' class='sentence'>For instance, deleting a pointer
to class type depends on whether or not the class declares a destructor,
and a conversion between pointers to class type depends on the
inheritance relationship between the two classes involved<a class='hidden_link' href='#inst-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='inst-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#inst-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> D <span class='operator'>:</span> <span class='keyword'>public</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span>D<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p, D<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> pp, D<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> ppp<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;             <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>D&lt;int&gt;</span> required: call <span class='tcode_in_codeblock'>f(B&lt;int&gt;*)</span></span>
  B<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> q <span class='operator'>=</span> pp;  <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>D&lt;char&gt;</span> required: convert <span class='tcode_in_codeblock'>D&lt;char&gt;*</span> to <span class='tcode_in_codeblock'>B&lt;char&gt;*</span></span>
  <span class='keyword'>delete</span> ppp;       <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>D&lt;double&gt;</span> required</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='inst-2.sentence-4' class='sentence'>
If a class template has been declared, but not defined,
at the <a href='#point'>point of instantiation</a>,
the instantiation yields an incomplete class type (<a href='basic.types'>[basic.types]</a>)<a class='hidden_link' href='#inst-2.sentence-4'>.</a></div> <div id='inst-2.example-2' class='example'>[&nbsp;<a class='example_link' href='#inst-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X;
X<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> ch;         <span class='comment'>// error: incomplete type <span class='tcode_in_codeblock'>X&lt;char&gt;</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='inst-2.note-2' class='note'>[&nbsp;<a class='note_link' href='#inst-2.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='inst-2.sentence-5' class='sentence'>Within a template declaration,
a <a href='class.local'>local class</a> or enumeration and the members of
a local class are never considered to be entities that can be separately
instantiated (this includes their default arguments,
<a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a><span class='textit'>s</span>, and non-static data member
initializers, if any,
but not their <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a><span class='textit'>s</span> or <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a><span class='textit'>s</span>)<a class='hidden_link' href='#inst-2.sentence-5'>.</a></div> <div id='inst-2.sentence-6' class='sentence'>As a result, the dependent names are looked up, the
semantic constraints are checked, and any templates used are instantiated as
part of the instantiation of the entity within which the local class or
enumeration is declared<a class='hidden_link' href='#inst-2.sentence-6'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='inst-3'><div class='marginalizedparent'><a class='marginalized' href='#inst-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6163'>#</a></div><div id='inst-3.sentence-1' class='sentence'>The implicit instantiation of a class template specialization causes
<ul class='itemize'><li id='inst-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#inst-3.1'>(3.1)</a></div>the implicit instantiation of the declarations, but not of the definitions,
  of the non-deleted
  class member functions,
  member classes,
  scoped member enumerations,
  static data members,
  member templates, and
  friends; and</li><li id='inst-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#inst-3.2'>(3.2)</a></div>the implicit instantiation of the definitions of
  deleted member functions,
  unscoped member enumerations, and
  member anonymous unions<a class='hidden_link' href='#inst-3.sentence-1'>.</a></li></ul></div> <div id='inst-3.sentence-2' class='sentence'>
The implicit instantiation of a class template specialization
does not cause the implicit instantiation of
default arguments or <a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a><span class='textit'>s</span>
of the class member functions<a class='hidden_link' href='#inst-3.sentence-2'>.</a></div> <div id='inst-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#inst-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> T x; <span class='curlybracket'>}</span>
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
<span class='curlybracket'>}</span>;
C<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span> c;                      <span class='comment'>// OK, definition of <span class='tcode_in_codeblock'>C&lt;void&gt;&#x200b;::&#x200b;f</span> is not instantiated at this point</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> C<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> <span class='comment'>// error: redefinition of <span class='tcode_in_codeblock'>C&lt;int&gt;&#x200b;::&#x200b;g</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='inst-3.sentence-3' class='sentence'>
However, for the purpose of determining whether an instantiated redeclaration
is valid according to <a href='basic.def.odr'>[basic.def.odr]</a> and <a href='class.mem'>[class.mem]</a>,
a declaration that corresponds to a definition in the template
is considered to be a definition<a class='hidden_link' href='#inst-3.sentence-3'>.</a></div> <div id='inst-3.example-2' class='example'>[&nbsp;<a class='example_link' href='#inst-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> Outer <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X, <span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Inner;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Inner<span class='anglebracket'>&lt;</span>T, Y<span class='anglebracket'>&gt;</span>;         <span class='comment'>// #1a</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Inner<span class='anglebracket'>&lt;</span>T, Y<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;     <span class='comment'>// #1b; OK: valid redeclaration of #1a</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Inner<span class='anglebracket'>&lt;</span>U, Y<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;     <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>;

Outer<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span> outer;                          <span class='comment'>// error at #2</span>
</pre><div id='inst-3.sentence-4' class='sentence'><span class='texttt'>Outer<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>Inner<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, Y<span class='anglebracket'>&gt;</span></span> is redeclared at #1b<a class='hidden_link' href='#inst-3.sentence-4'>.</a></div> <div id='inst-3.sentence-5' class='sentence'>(It is not defined
but noted as being associated with a definition in <span class='texttt'>Outer<span class='anglebracket'>&lt;</span>T, U<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#inst-3.sentence-5'>.</a>)</div> <div id='inst-3.sentence-6' class='sentence'>#2
is also a redeclaration of #1a<a class='hidden_link' href='#inst-3.sentence-6'>.</a></div> <div id='inst-3.sentence-7' class='sentence'>It is noted as associated with a definition,
so it is an invalid redeclaration of the same partial specialization<a class='hidden_link' href='#inst-3.sentence-7'>.</a></div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Friendly <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>friend</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
Friendly<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> fc;
Friendly<span class='anglebracket'>&lt;</span><span class='keyword'>float</span><span class='anglebracket'>&gt;</span> ff;                             <span class='comment'>// error: produces second definition of <span class='tcode_in_codeblock'>f(U)</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='inst-4'><div class='marginalizedparent'><a class='marginalized' href='#inst-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6227'>#</a></div><div id='inst-4.sentence-1' class='sentence'>Unless a member of a class template or a member template
is a declared specialization,
the specialization of the member is implicitly instantiated when the
specialization is referenced in a context that requires the member definition
to exist or
if the existence of the definition of the member
affects the semantics of the program;
in particular, the initialization (and any associated side effects) of a
static data member does not occur unless the static data member is itself used
in a way that requires the definition of the static data member to exist<a class='hidden_link' href='#inst-4.sentence-1'>.</a></div></div><div class='para' id='inst-5'><div class='marginalizedparent'><a class='marginalized' href='#inst-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6239'>#</a></div><div id='inst-5.sentence-1' class='sentence'>Unless a function template specialization is a declared specialization,
the function template specialization is implicitly instantiated when the
specialization is referenced in a context that requires a function definition
to exist or
if the existence of the definition affects the semantics of the program<a class='hidden_link' href='#inst-5.sentence-1'>.</a></div> <div id='inst-5.sentence-2' class='sentence'>A function whose declaration was instantiated from a friend function definition is
implicitly instantiated when it is referenced in a context that
requires a function definition to exist or
if the existence of the definition affects the semantics of the program<a class='hidden_link' href='#inst-5.sentence-2'>.</a></div> <div id='inst-5.sentence-3' class='sentence'>Unless a call is to a function template explicit specialization or
to a member function of an explicitly specialized class template,
a default argument for a function template or a member function of a
class template is implicitly instantiated when the function is
called in a context that requires the value of the default argument<a class='hidden_link' href='#inst-5.sentence-3'>.</a></div> <div id='inst-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#inst-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='inst-5.sentence-4' class='sentence'>An inline function
that is the subject of an explicit instantiation declaration
is not a declared specialization;
the intent is that it still be implicitly instantiated
when odr-used (<a href='basic.def.odr'>[basic.def.odr]</a>)
so that the body can be considered for inlining,
but that no out-of-line copy of it be generated in the translation unit<a class='hidden_link' href='#inst-5.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='inst-6'><div class='marginalizedparent'><a class='marginalized' href='#inst-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6264'>#</a></div><div id='inst-6.example-1' class='example'>[&nbsp;<a class='example_link' href='#inst-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Z <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  Z<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> a;         <span class='comment'>// instantiation of class <span class='tcode_in_codeblock'>Z&lt;int&gt;</span> required</span>
  Z<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p;       <span class='comment'>// instantiation of class <span class='tcode_in_codeblock'>Z&lt;char&gt;</span> not required</span>
  Z<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> q;     <span class='comment'>// instantiation of class <span class='tcode_in_codeblock'>Z&lt;double&gt;</span> not required</span>

  a<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>Z&lt;int&gt;&#x200b;::&#x200b;f()</span> required</span>
  p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// instantiation of class <span class='tcode_in_codeblock'>Z&lt;char&gt;</span> required, and</span>
                    <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>Z&lt;char&gt;&#x200b;::&#x200b;g()</span> required</span>
<span class='curlybracket'>}</span>
</pre><div id='inst-6.sentence-1' class='sentence'>Nothing in this example requires
<span class='texttt'><span class='keyword'>class</span></span>
<span class='texttt'>Z<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span></span>,
<span class='texttt'>Z<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
or
<span class='texttt'>Z<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
to be implicitly instantiated<a class='hidden_link' href='#inst-6.sentence-1'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='inst-7'><div class='marginalizedparent'><a class='marginalized' href='#inst-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6292'>#</a></div><div id='inst-7.sentence-1' class='sentence'>Unless a variable template specialization is a declared specialization,
the variable template specialization is implicitly instantiated
when it is referenced in a context
that requires a variable definition to exist or
if the existence of the definition affects the semantics of the program<a class='hidden_link' href='#inst-7.sentence-1'>.</a></div> <div id='inst-7.sentence-2' class='sentence'>A default template argument for a variable template is implicitly instantiated
when the variable template is referenced in a context
that requires the value of the default argument<a class='hidden_link' href='#inst-7.sentence-2'>.</a></div></div><div class='para' id='inst-8'><div class='marginalizedparent'><a class='marginalized' href='#inst-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6302'>#</a></div><div id='inst-8.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':definition,program_semantics_affected_by'></a></span><span class='indexparent'><a class='index' id=':variable,program_semantics_affected_by_the_existence_of_a_variable_definition'></a></span><span class='indexparent'><a class='index' id=':function,program_semantics_affected_by_the_existence_of_a_function_definition'></a></span><span class='indexparent'><a class='index' id=':program_semantics,affected_by_the_existence_of_a_variable_or_function_definition'></a></span>The existence of a definition of a variable or function
is considered to affect the semantics of the program
if the variable or function
is needed for constant evaluation by an expression (<a href='expr.const'>[expr.const]</a>),
even if constant evaluation of the expression is not required or
if constant expression evaluation does not use the definition<a class='hidden_link' href='#inst-8.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='inst-8.example-1' class='example'>[&nbsp;<a class='example_link' href='#inst-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>constexpr</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> T<span class='operator'>::</span>value; <span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span> B, <span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span>B <span class='operator'>?</span> f<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> <span class='literal'>0</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span> B, <span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span> B, <span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='curlybracket'>{</span>B <span class='operator'>?</span> f<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>:</span> <span class='literal'>0</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span> B, <span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> x<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  g<span class='anglebracket'>&lt;</span><span class='literal'>false</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>; <span class='comment'>// OK, <span class='tcode_in_codeblock'>B ? f&lt;T&gt;() :&nbsp;0</span> is not potentially constant evaluated</span>
  h<span class='anglebracket'>&lt;</span><span class='literal'>false</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>; <span class='comment'>// error, instantiates <span class='tcode_in_codeblock'>f&lt;int&gt;</span> even though <span class='tcode_in_codeblock'>B</span> evaluates to <span class='tcode_in_codeblock'>false</span> and</span>
                    <span class='comment'>// list-initialization of <span class='tcode_in_codeblock'>int</span> from <span class='tcode_in_codeblock'>int</span> cannot be narrowing</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='inst-9'><div class='marginalizedparent'><a class='marginalized' href='#inst-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6329'>#</a></div><div id='inst-9.sentence-1' class='sentence'>If the function selected by <a href='over.match'>overload resolution</a>
can be determined without instantiating a class template definition,
it is unspecified whether that instantiation actually takes place<a class='hidden_link' href='#inst-9.sentence-1'>.</a></div> <div id='inst-9.example-1' class='example'>[&nbsp;<a class='example_link' href='#inst-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>S<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>S<span class='anglebracket'>&lt;</span><span class='keyword'>float</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span>S<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> sr<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>sr<span class='parenthesis'>)</span>;            <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>S&lt;int&gt;</span> allowed but not required</span>
                    <span class='comment'>// instantiation of <span class='tcode_in_codeblock'>S&lt;float&gt;</span> allowed but not required</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='inst-10'><div class='marginalizedparent'><a class='marginalized' href='#inst-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6350'>#</a></div><div id='inst-10.sentence-1' class='sentence'>If a function template or a member function template specialization is used in
a way that involves overload resolution,
a declaration of the specialization is implicitly instantiated (<a href='#over'>[temp.over]</a>)<a class='hidden_link' href='#inst-10.sentence-1'>.</a></div></div><div class='para' id='inst-11'><div class='marginalizedparent'><a class='marginalized' href='#inst-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6355'>#</a></div><div id='inst-11.sentence-1' class='sentence'>An implementation shall not implicitly instantiate a function template,
a variable template,
a member template, a non-virtual member function, a member class, a
static data member of a class template, or a substatement of a constexpr if
statement (<a href='stmt.if'>[stmt.if]</a>), unless such instantiation is required<a class='hidden_link' href='#inst-11.sentence-1'>.</a></div> <div id='inst-11.note-1' class='note'>[&nbsp;<a class='note_link' href='#inst-11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='inst-11.sentence-2' class='sentence'>The instantiation of a generic lambda
does not require instantiation of
substatements of a constexpr if statement
within its <a class='grammarterm' href='stmt.block#nt:compound-statement'>compound-statement</a>
unless the call operator template is instantiated<a class='hidden_link' href='#inst-11.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='inst-11.sentence-3' class='sentence'>
It is unspecified whether or not an implementation implicitly instantiates a
virtual member function of a class template if the virtual member function would
not otherwise be instantiated<a class='hidden_link' href='#inst-11.sentence-3'>.</a></div> <div id='inst-11.sentence-4' class='sentence'>The use of a template specialization in a default argument
shall not cause the template to be implicitly instantiated except that a
class template may be instantiated where its complete type is needed to determine
the correctness of the default argument<a class='hidden_link' href='#inst-11.sentence-4'>.</a></div> <div id='inst-11.sentence-5' class='sentence'>The use of a default argument in a
function call causes specializations in the default argument to be implicitly
instantiated<a class='hidden_link' href='#inst-11.sentence-5'>.</a></div></div><div class='para' id='inst-12'><div class='marginalizedparent'><a class='marginalized' href='#inst-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6379'>#</a></div><div id='inst-12.sentence-1' class='sentence'>Implicitly instantiated class, function, and variable template specializations
are placed in the namespace where the template is defined<a class='hidden_link' href='#inst-12.sentence-1'>.</a></div> <div id='inst-12.sentence-2' class='sentence'>Implicitly instantiated specializations for members of a class template are
placed in the namespace where the enclosing class template is defined<a class='hidden_link' href='#inst-12.sentence-2'>.</a></div> <div id='inst-12.sentence-3' class='sentence'>Implicitly instantiated member templates are placed in the namespace where the
enclosing class or class template is defined<a class='hidden_link' href='#inst-12.sentence-3'>.</a></div> <div id='inst-12.example-1' class='example'>[&nbsp;<a class='example_link' href='#inst-12.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> List <span class='curlybracket'>{</span>
  <span class='keyword'>public</span><span class='operator'>:</span>
    T<span class='operator'>*</span> get<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> K, <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Map <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  N<span class='operator'>::</span>List<span class='anglebracket'>&lt;</span>V<span class='anglebracket'>&gt;</span> lt;
  V get<span class='parenthesis'>(</span>K<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span>Map<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span>,<span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> m<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> m<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='literal'>"Nicholas"</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</pre><div id='inst-12.sentence-4' class='sentence'>A call of
<span class='texttt'>lt<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
from
<span class='texttt'>Map<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span>,<span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
would place
<span class='texttt'>List<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
in the namespace
<span class='texttt'>N</span>
rather than in the global namespace<a class='hidden_link' href='#inst-12.sentence-4'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='inst-13'><div class='marginalizedparent'><a class='marginalized' href='#inst-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6417'>#</a></div><div id='inst-13.sentence-1' class='sentence'>If a function template
<span class='texttt'>f</span>
is called in a way that requires a default argument to be used,
the dependent names are looked up, the semantics constraints are checked,
and the instantiation of any template used in the default argument
is done as if the default argument had been
an initializer used in a function template specialization with the same scope,
the same template parameters and the same access as that of the function template
<span class='texttt'>f</span>
used at that point, except that the scope in which a closure type is
declared (<a href='expr.prim.lambda.closure'>[expr.prim.lambda.closure]</a>) – and therefore its associated namespaces –
remain as determined from the context of the definition for the default
argument<a class='hidden_link' href='#inst-13.sentence-1'>.</a></div> <div id='inst-13.sentence-2' class='sentence'>This analysis is called
<a class='hidden_link' href='#def:default_argument_instantiation' id='def:default_argument_instantiation'><i >default argument instantiation</i></a><a class='hidden_link' href='#inst-13.sentence-2'>.</a></div> <div id='inst-13.sentence-3' class='sentence'>The instantiated default argument is then used as the argument of
<span class='texttt'>f</span><a class='hidden_link' href='#inst-13.sentence-3'>.</a></div></div><div class='para' id='inst-14'><div class='marginalizedparent'><a class='marginalized' href='#inst-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6436'>#</a></div><div id='inst-14.sentence-1' class='sentence'>Each default argument is instantiated independently<a class='hidden_link' href='#inst-14.sentence-1'>.</a></div> <div id='inst-14.example-1' class='example'>[&nbsp;<a class='example_link' href='#inst-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T x, T y <span class='operator'>=</span> ydef<span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>, T z <span class='operator'>=</span> zdef<span class='parenthesis'>(</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;

<span class='keyword'>class</span>  A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

A zdef<span class='parenthesis'>(</span>A<span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span>A a, A b, A c<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>a, b, c<span class='parenthesis'>)</span>;       <span class='comment'>// no default argument instantiation</span>
  f<span class='parenthesis'>(</span>a, b<span class='parenthesis'>)</span>;          <span class='comment'>// default argument <span class='tcode_in_codeblock'>z = zdef(T())</span> instantiated</span>
  f<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>;             <span class='comment'>// error: <span class='tcode_in_codeblock'>ydef</span> is not declared</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='inst-15'><div class='marginalizedparent'><a class='marginalized' href='#inst-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6454'>#</a></div><div id='inst-15.sentence-1' class='sentence'>The <a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a> of a function template specialization
is not instantiated along with the function declaration; it is instantiated
when needed (<a href='except.spec'>[except.spec]</a>)<a class='hidden_link' href='#inst-15.sentence-1'>.</a></div> <div id='inst-15.sentence-2' class='sentence'>If such an
<a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a> is needed but has not yet been
instantiated, the dependent names are looked up, the semantics constraints are
checked, and the instantiation of any template used in the
<a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a> is done as if it were being done as part
of instantiating the declaration of the specialization at that point<a class='hidden_link' href='#inst-15.sentence-2'>.</a></div></div><div class='para' id='inst-16'><div class='marginalizedparent'><a class='marginalized' href='#inst-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6464'>#</a></div><div id='inst-16.note-1' class='note'>[&nbsp;<a class='note_link' href='#inst-16.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='inst-16.sentence-1' class='sentence'><a href='#point'>[temp.point]</a> defines the point of instantiation of a template specialization<a class='hidden_link' href='#inst-16.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='inst-17'><div class='marginalizedparent'><a class='marginalized' href='#inst-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6469'>#</a></div><div id='inst-17.sentence-1' class='sentence'>There is an <span class='indexparent'><a class='index' id=':maximum_depth_of_recursive_template_instantiations'></a></span>implementation-defined quantity
that specifies the limit on the total depth of recursive instantiations (<a href='implimits'>[implimits]</a>),
which could involve more than one template<a class='hidden_link' href='#inst-17.sentence-1'>.</a></div> <div id='inst-17.sentence-2' class='sentence'>The result of an infinite recursion in instantiation is undefined<a class='hidden_link' href='#inst-17.sentence-2'>.</a></div> <div id='inst-17.example-1' class='example'>[&nbsp;<a class='example_link' href='#inst-17.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  X<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>*</span> p;          <span class='comment'>// OK</span>
  X<span class='anglebracket'>&lt;</span>T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> a;          <span class='comment'>// implicit generation of <span class='tcode_in_codeblock'>X&lt;T&gt;</span> requires</span>
                    <span class='comment'>// the implicit instantiation of <span class='tcode_in_codeblock'>X&lt;T*&gt;</span> which requires</span>
                    <span class='comment'>// the implicit instantiation of <span class='tcode_in_codeblock'>X&lt;T**&gt;</span> which &hellip;</span>
<span class='curlybracket'>}</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='inst-18'><div class='marginalizedparent'><a class='marginalized' href='#inst-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6485'>#</a></div><div id='inst-18.sentence-1' class='sentence'>The <a class='grammarterm' href='#nt:type-constraint'>type-constraint</a><span class='textit'>s</span> and <a class='grammarterm' href='#nt:requires-clause'>requires-clause</a>
of a template specialization or member function
are not instantiated along with the specialization or function itself,
even for a member function of a local class;
substitution into the atomic constraints formed from them is instead performed
as specified in <a href='#constr.decl'>[temp.constr.decl]</a> and <a href='#constr.atomic'>[temp.constr.atomic]</a>
when determining whether the constraints are satisfied
or as specified in <a href='#constr.decl'>[temp.constr.decl]</a> when comparing declarations<a class='hidden_link' href='#inst-18.sentence-1'>.</a></div> <div id='inst-18.note-1' class='note'>[&nbsp;<a class='note_link' href='#inst-18.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='inst-18.sentence-2' class='sentence'>The satisfaction of constraints is determined during name lookup or overload
resolution (<a href='over.match'>[over.match]</a>)<a class='hidden_link' href='#inst-18.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='inst-18.example-1' class='example'>[&nbsp;<a class='example_link' href='#inst-18.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>2</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> D <span class='operator'>=</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>4</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>         <span class='comment'>// #1</span>
  S<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>requires</span> D<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>         <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>;

S<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> s1;                     <span class='comment'>// error: no matching constructor</span>
S<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>8</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> s2;                  <span class='comment'>// OK, calls #2</span>
</pre> <div id='inst-18.sentence-3' class='sentence'>
When <span class='texttt'>S<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span></span> is instantiated, both constructors are part of the
specialization<a class='hidden_link' href='#inst-18.sentence-3'>.</a></div> <div id='inst-18.sentence-4' class='sentence'>Their constraints are not satisfied, and
they suppress the implicit declaration of a default constructor for
<span class='texttt'>S<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span></span> (<a href='class.default.ctor'>[class.default.ctor]</a>), so there is no viable constructor
for <span class='texttt'>s1</span><a class='hidden_link' href='#inst-18.sentence-4'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='inst-18.example-2' class='example'>[&nbsp;<a class='example_link' href='#inst-18.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S1 <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span>
    <span class='keyword'>requires</span> <span class='literal'>false</span>
  <span class='keyword'>struct</span> Inner1;                <span class='comment'>// ill-formed, no diagnostic required</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S2 <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span>
    <span class='keyword'>requires</span> <span class='parenthesis'>(</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='squarebracket'>[</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>1</span><span class='parenthesis'>)</span>
  <span class='keyword'>struct</span> Inner2;                <span class='comment'>// ill-formed, no diagnostic required</span>
<span class='curlybracket'>}</span>;
</pre> <div id='inst-18.sentence-5' class='sentence'>
The class <span class='texttt'>S1<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>Inner1</span> is ill-formed, no diagnostic required, because
it has no valid specializations<a class='hidden_link' href='#inst-18.sentence-5'>.</a></div> <div id='inst-18.sentence-6' class='sentence'><span class='texttt'>S2</span> is ill-formed, no diagnostic required, since no substitution into
the constraints of its <span class='texttt'>Inner2</span> template would result in a valid
expression<a class='hidden_link' href='#inst-18.sentence-6'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div id='explicit' class='section'><h3 ><a class='secnum' href='#explicit' style='min-width:103pt'>13.9.2</a> Explicit instantiation <a class='abbr_ref' href='temp.explicit'>[temp.explicit]</a></h3><div class='para' id='explicit-1'><div class='marginalizedparent'><a class='marginalized' href='#explicit-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6540'>#</a></div><div id='explicit-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':instantiation,explicit'></a></span>A class, function, variable, or member template specialization can be explicitly
instantiated from its template<a class='hidden_link' href='#explicit-1.sentence-1'>.</a></div> <div id='explicit-1.sentence-2' class='sentence'>A member function, member class or static data member of a class template can
be explicitly instantiated from the member definition associated with its class
template<a class='hidden_link' href='#explicit-1.sentence-2'>.</a></div></div><div class='para' id='explicit-2'><div class='marginalizedparent'><a class='marginalized' href='#explicit-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6549'>#</a></div><div id='explicit-2.sentence-1' class='sentence'>The syntax for explicit instantiation is:</div><pre class='bnf'><a class='nontermdef' href='#nt:explicit-instantiation' id='nt:explicit-instantiation'>explicit-instantiation:</a>
&#9;<span class='texttt'><span class='keyword'>extern</span></span><span class='indexparent'><a class='index' id=':extern'></a></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='texttt'><span class='keyword'>template</span></span><span class='indexparent'><a class='index' id=':template__'></a></span> <a class='grammarterm' href='dcl.pre#nt:declaration'>declaration</a>
</pre><div id='explicit-2.sentence-2' class='sentence'>There are two forms of explicit instantiation: an explicit instantiation
definition and an explicit instantiation declaration<a class='hidden_link' href='#explicit-2.sentence-2'>.</a></div> <div id='explicit-2.sentence-3' class='sentence'>An explicit instantiation
declaration begins with the <span class='texttt'><span class='keyword'>extern</span></span> keyword<a class='hidden_link' href='#explicit-2.sentence-3'>.</a></div></div><div class='para' id='explicit-3'><div class='marginalizedparent'><a class='marginalized' href='#explicit-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6561'>#</a></div><div id='explicit-3.sentence-1' class='sentence'>An explicit instantiation shall not use
a <a class='grammarterm' href='dcl.stc#nt:storage-class-specifier'>storage-class-specifier</a>
other than <span class='texttt'><span class='keyword'>thread_&shy;local</span></span><span class='indexparent'><a class='index' id=':thread_local'></a></span><a class='hidden_link' href='#explicit-3.sentence-1'>.</a></div> <div id='explicit-3.sentence-2' class='sentence'>An explicit instantiation of a
function template,
member function of a class template, or
variable template
shall not
use the <span class='texttt'><span class='keyword'>inline</span></span>, <span class='texttt'><span class='keyword'>constexpr</span></span>, or <span class='texttt'><span class='keyword'>consteval</span></span> specifiers<a class='hidden_link' href='#explicit-3.sentence-2'>.</a></div> <div id='explicit-3.sentence-3' class='sentence'>No <a class='grammarterm' href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a>
shall appertain to an explicit instantiation<a class='hidden_link' href='#explicit-3.sentence-3'>.</a></div></div><div class='para' id='explicit-4'><div class='marginalizedparent'><a class='marginalized' href='#explicit-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6574'>#</a></div><div id='explicit-4.sentence-1' class='sentence'>If the explicit instantiation is for a class or member class, the
<a class='grammarterm' href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a> in the <a class='grammarterm' href='dcl.pre#nt:declaration'>declaration</a>
shall include a <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>;
otherwise, the <a class='grammarterm' href='dcl.pre#nt:declaration'>declaration</a>
shall be a <a class='grammarterm' href='dcl.pre#nt:simple-declaration'>simple-declaration</a> whose <a class='grammarterm' href='dcl.decl#nt:init-declarator-list'>init-declarator-list</a>
comprises a single <a class='grammarterm' href='dcl.decl#nt:init-declarator'>init-declarator</a>
that does not have an <a class='grammarterm' href='dcl.init#nt:initializer'>initializer</a><a class='hidden_link' href='#explicit-4.sentence-1'>.</a></div> <div id='explicit-4.sentence-2' class='sentence'>If the explicit instantiation is for
a function or member function,
the
<a class='grammarterm' href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a>
in the
<a class='grammarterm' href='dcl.decl#nt:declarator'>declarator</a>
shall be either a
<a class='grammarterm' href='#nt:template-id'>template-id</a>
or, where all template arguments can be deduced, a
<a class='grammarterm' href='#nt:template-name'>template-name</a> or <a class='grammarterm' href='over.oper#nt:operator-function-id'>operator-function-id</a><a class='hidden_link' href='#explicit-4.sentence-2'>.</a></div> <div id='explicit-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#explicit-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='explicit-4.sentence-3' class='sentence'>The declaration may declare a
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a>,
in which case the
<a class='grammarterm' href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a>
of the
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a>
must be a
<a class='grammarterm' href='#nt:template-id'>template-id</a><a class='hidden_link' href='#explicit-4.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='explicit-4.sentence-4' class='sentence'>
If the explicit instantiation is for a member function, a member class or
a static data member of a class template specialization,
the name of the class template specialization in the
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a>
for the member name shall be a <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a><a class='hidden_link' href='#explicit-4.sentence-4'>.</a></div> <div id='explicit-4.sentence-5' class='sentence'>If the explicit instantiation is for a variable template specialization,
the <a class='grammarterm' href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a> in the <a class='grammarterm' href='dcl.decl#nt:declarator'>declarator</a>
shall be a <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a><a class='hidden_link' href='#explicit-4.sentence-5'>.</a></div> <div id='explicit-4.sentence-6' class='sentence'>An explicit instantiation shall appear in an enclosing namespace
of its template<a class='hidden_link' href='#explicit-4.sentence-6'>.</a></div> <div id='explicit-4.sentence-7' class='sentence'>If the name declared in the explicit
instantiation is an unqualified name, the explicit instantiation
shall appear in the namespace where its template is declared or, if that
namespace is inline (<a href='namespace.def'>[namespace.def]</a>), any namespace from its enclosing
namespace set<a class='hidden_link' href='#explicit-4.sentence-7'>.</a></div> <div id='explicit-4.note-2' class='note'>[&nbsp;<a class='note_link' href='#explicit-4.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='explicit-4.sentence-8' class='sentence'>Regarding qualified names in declarators, see <a href='dcl.meaning'>[dcl.meaning]</a><a class='hidden_link' href='#explicit-4.sentence-8'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='explicit-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#explicit-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span> <span class='keyword'>void</span> mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='keyword'>class</span> Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='keyword'>void</span> Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;       <span class='comment'>// argument is deduced here</span>

<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> N<span class='operator'>::</span>f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='explicit-5'><div class='marginalizedparent'><a class='marginalized' href='#explicit-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6635'>#</a></div><div id='explicit-5.sentence-1' class='sentence'>A declaration of a function template, a variable template, a member function
or static data member
of a class template, or a member function template of a class or class
template shall precede an explicit instantiation of that entity<a class='hidden_link' href='#explicit-5.sentence-1'>.</a></div> <div id='explicit-5.sentence-2' class='sentence'>A definition
of a class template, a member class of a class template, or a member class
template of a class or class template shall precede an explicit instantiation
of that entity unless the explicit instantiation is preceded by an explicit
specialization of the entity with the same template arguments<a class='hidden_link' href='#explicit-5.sentence-2'>.</a></div> <div id='explicit-5.sentence-3' class='sentence'>If the
<a class='grammarterm' href='dcl.pre#nt:declaration'>declaration</a>
of the explicit instantiation names an implicitly-declared <a href='special'>special member
function</a>, the program is ill-formed<a class='hidden_link' href='#explicit-5.sentence-3'>.</a></div></div><div class='para' id='explicit-6'><div class='marginalizedparent'><a class='marginalized' href='#explicit-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6649'>#</a></div><div id='explicit-6.sentence-1' class='sentence'>The <a class='grammarterm' href='dcl.pre#nt:declaration'>declaration</a> in an <a class='grammarterm' href='#nt:explicit-instantiation'>explicit-instantiation</a> and
the <a class='grammarterm' href='dcl.pre#nt:declaration'>declaration</a> produced by the corresponding substitution
into the templated function, variable, or class
are two declarations of the same entity<a class='hidden_link' href='#explicit-6.sentence-1'>.</a></div> <div id='explicit-6.note-1' class='note'>[&nbsp;<a class='note_link' href='#explicit-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='explicit-6.sentence-2' class='sentence'>These declarations are required to have matching types as specified in <a href='basic.link'>[basic.link]</a>, except as specified in <a href='except.spec'>[except.spec]</a><a class='hidden_link' href='#explicit-6.sentence-2'>.</a></div> <div id='explicit-6.example-1' class='example'>[&nbsp;<a class='example_link' href='#explicit-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> T var <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='keyword'>float</span> var<span class='anglebracket'>&lt;</span><span class='keyword'>float</span><span class='anglebracket'>&gt;</span>;      <span class='comment'>// OK, instantiated variable has type <span class='tcode_in_codeblock'>float</span></span>
<span class='keyword'>template</span> <span class='keyword'>int</span> var<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='squarebracket'>[</span><span class='literal'>16</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span>;    <span class='comment'>// OK, absence of major array bound is permitted</span>
<span class='keyword'>template</span> <span class='keyword'>int</span> <span class='operator'>*</span>var<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;         <span class='comment'>// error: instantiated variable has type <span class='tcode_in_codeblock'>int</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> av <span class='operator'>=</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='keyword'>int</span> av<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;           <span class='comment'>// OK, variable with type <span class='tcode_in_codeblock'>int</span> can be redeclared with type <span class='tcode_in_codeblock'>auto</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;         <span class='comment'>// error: function with deduced return type</span>
                                <span class='comment'>// redeclared with non-deduced return type (<a href='dcl.spec.auto'>[dcl.spec.auto]</a>)</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='explicit-6.sentence-3' class='sentence'>
Despite its syntactic form, the <a class='grammarterm' href='dcl.pre#nt:declaration'>declaration</a> in an <a class='grammarterm' href='#nt:explicit-instantiation'>explicit-instantiation</a> for a variable is not itself a definition and does not conflict with the definition instantiated by an explicit instantiation definition for that variable<a class='hidden_link' href='#explicit-6.sentence-3'>.</a></div></div><div class='para' id='explicit-7'><div class='marginalizedparent'><a class='marginalized' href='#explicit-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6674'>#</a></div><div id='explicit-7.sentence-1' class='sentence'>For a given set of template arguments, if an explicit
instantiation of a template appears after a declaration of
an explicit specialization for that template, the explicit
instantiation has no effect<a class='hidden_link' href='#explicit-7.sentence-1'>.</a></div> <div id='explicit-7.sentence-2' class='sentence'>Otherwise, for an explicit instantiation
definition, the definition of a
function template, a variable template, a member
function template, or a member function or static
data member of a class template shall be present in every
translation unit in which it is explicitly instantiated<a class='hidden_link' href='#explicit-7.sentence-2'>.</a></div></div><div class='para' id='explicit-8'><div class='marginalizedparent'><a class='marginalized' href='#explicit-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6685'>#</a></div><div id='explicit-8.sentence-1' class='sentence'>An explicit instantiation of a class, function template, or variable template
specialization is
placed in the namespace in which the template is defined<a class='hidden_link' href='#explicit-8.sentence-1'>.</a></div> <div id='explicit-8.sentence-2' class='sentence'>An explicit instantiation for a member of a class template is placed in
the namespace where the enclosing class template is defined<a class='hidden_link' href='#explicit-8.sentence-2'>.</a></div> <div id='explicit-8.sentence-3' class='sentence'>An explicit instantiation for a member template is placed in the namespace
where the enclosing class or class template is defined<a class='hidden_link' href='#explicit-8.sentence-3'>.</a></div> <div id='explicit-8.example-1' class='example'>[&nbsp;<a class='example_link' href='#explicit-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y <span class='curlybracket'>{</span> <span class='keyword'>void</span> mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>template</span> <span class='keyword'>class</span> Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;          <span class='comment'>// error: class template <span class='tcode_in_codeblock'>Y</span> not visible in the global namespace</span>

<span class='keyword'>using</span> N<span class='operator'>::</span>Y;
<span class='keyword'>template</span> <span class='keyword'>class</span> Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;          <span class='comment'>// error: explicit instantiation outside of the namespace of the template</span>

<span class='keyword'>template</span> <span class='keyword'>class</span> N<span class='operator'>::</span>Y<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span>;             <span class='comment'>// OK: explicit instantiation in namespace <span class='tcode_in_codeblock'>N</span></span>
<span class='keyword'>template</span> <span class='keyword'>void</span> N<span class='operator'>::</span>Y<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK: explicit instantiation in namespace <span class='tcode_in_codeblock'>N</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='explicit-9'><div class='marginalizedparent'><a class='marginalized' href='#explicit-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6709'>#</a></div><div id='explicit-9.sentence-1' class='sentence'>A trailing
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
can be left unspecified in an explicit instantiation of a function template
specialization or of a member function template specialization provided
it can be deduced from the type of a function parameter (<a href='#deduct'>[temp.deduct]</a>)<a class='hidden_link' href='#explicit-9.sentence-1'>.</a></div> <div id='explicit-9.example-1' class='example'>[&nbsp;<a class='example_link' href='#explicit-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='comment'>// instantiate <span class='tcode_in_codeblock'>sort(Array&lt;int&gt;&amp;)</span> -- template-argument deduced</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> sort<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='explicit-10'><div class='marginalizedparent'><a class='marginalized' href='#explicit-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6725'>#</a></div><div id='explicit-10.note-1' class='note'>[&nbsp;<a class='note_link' href='#explicit-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='explicit-10.sentence-1' class='sentence'>An explicit instantiation of a constrained template is required
to satisfy that template's associated constraints (<a href='#constr.decl'>[temp.constr.decl]</a>)<a class='hidden_link' href='#explicit-10.sentence-1'>.</a></div> <div id='explicit-10.sentence-2' class='sentence'>The satisfaction of constraints is determined
when forming the template name of an explicit instantiation
in which all template arguments are specified (<a href='#names'>[temp.names]</a>),
or, for explicit instantiations of function templates,
during template argument deduction (<a href='#deduct.decl'>[temp.deduct.decl]</a>)
when one or more trailing template arguments are left unspecified<a class='hidden_link' href='#explicit-10.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='explicit-11'><div class='marginalizedparent'><a class='marginalized' href='#explicit-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6738'>#</a></div><div id='explicit-11.sentence-1' class='sentence'>An explicit instantiation that names a class
template specialization is also an explicit
instantiation of the same kind (declaration or definition) of each
of its members (not including members inherited from base classes and members
that are templates) that has not been previously explicitly specialized in
the translation unit containing the explicit instantiation,
provided that the associated constraints, if any,
of that member are satisfied by the template arguments of the explicit
instantiation (<a href='#constr.decl'>[temp.constr.decl]</a>, <a href='#constr.constr'>[temp.constr.constr]</a>),
except as described below<a class='hidden_link' href='#explicit-11.sentence-1'>.</a></div> <div id='explicit-11.note-1' class='note'>[&nbsp;<a class='note_link' href='#explicit-11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='explicit-11.sentence-2' class='sentence'>In addition, it will typically be an explicit instantiation of certain
<span class='indexparent'><a class='index' id=':implementation-dependent'></a></span>implementation-dependent data about the class<a class='hidden_link' href='#explicit-11.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='explicit-12'><div class='marginalizedparent'><a class='marginalized' href='#explicit-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6755'>#</a></div><div id='explicit-12.sentence-1' class='sentence'>An explicit instantiation definition that names a class template
specialization explicitly instantiates the class template specialization
and is an explicit instantiation definition of only those
members that have been defined at the point of instantiation<a class='hidden_link' href='#explicit-12.sentence-1'>.</a></div></div><div class='para' id='explicit-13'><div class='marginalizedparent'><a class='marginalized' href='#explicit-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6761'>#</a></div><div id='explicit-13.sentence-1' class='sentence'>An explicit instantiation of a prospective destructor (<a href='class.dtor'>[class.dtor]</a>)
shall name the selected destructor of the class<a class='hidden_link' href='#explicit-13.sentence-1'>.</a></div></div><div class='para' id='explicit-14'><div class='marginalizedparent'><a class='marginalized' href='#explicit-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6765'>#</a></div><div id='explicit-14.sentence-1' class='sentence'>If an entity is the subject of both an explicit instantiation declaration
and an explicit instantiation definition in the same translation unit, the
definition shall follow the declaration<a class='hidden_link' href='#explicit-14.sentence-1'>.</a></div> <div id='explicit-14.sentence-2' class='sentence'>An entity that is the subject of an
explicit instantiation declaration and that is also used
in a way that would otherwise cause an <a href='#inst'>implicit instantiation</a>
in the translation unit
shall be the subject of an explicit instantiation definition somewhere in the
program; otherwise the program is ill-formed, no diagnostic required<a class='hidden_link' href='#explicit-14.sentence-2'>.</a></div> <div id='explicit-14.note-1' class='note'>[&nbsp;<a class='note_link' href='#explicit-14.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='explicit-14.sentence-3' class='sentence'>This rule does apply to inline functions even though an
explicit instantiation declaration of such an entity has no other normative
effect<a class='hidden_link' href='#explicit-14.sentence-3'>.</a></div> <div id='explicit-14.sentence-4' class='sentence'>This is needed to ensure that if the address of an inline function is
taken in a translation unit in which the implementation chose to suppress the
out-of-line body, another translation unit will supply the body<a class='hidden_link' href='#explicit-14.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='explicit-14.sentence-5' class='sentence'>
An explicit instantiation declaration shall not name a specialization of a
template with internal linkage<a class='hidden_link' href='#explicit-14.sentence-5'>.</a></div></div><div class='para' id='explicit-15'><div class='marginalizedparent'><a class='marginalized' href='#explicit-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6784'>#</a></div><div id='explicit-15.sentence-1' class='sentence'>An explicit instantiation does not constitute a use of a default argument,
so default argument instantiation is not done<a class='hidden_link' href='#explicit-15.sentence-1'>.</a></div> <div id='explicit-15.example-1' class='example'>[&nbsp;<a class='example_link' href='#explicit-15.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>char</span><span class='operator'>*</span> p <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T g<span class='parenthesis'>(</span>T x <span class='operator'>=</span> <span class='operator'>&amp;</span>p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>int</span> g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK even though <span class='tcode_in_codeblock'>&amp;p</span> isn't an <span class='tcode_in_codeblock'>int</span>.</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div id='expl.spec' class='section'><h3 ><a class='secnum' href='#expl.spec' style='min-width:103pt'>13.9.3</a> Explicit specialization <a class='abbr_ref' href='temp.expl.spec'>[temp.expl.spec]</a></h3><div class='para' id='expl.spec-1'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6797'>#</a></div><div id='expl.spec-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':specialization,template_explicit'></a></span>An explicit specialization of any of the following:
<ul class='itemize'><li id='expl.spec-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.1'>(1.1)</a></div>function template</li><li id='expl.spec-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.2'>(1.2)</a></div>class template</li><li id='expl.spec-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.3'>(1.3)</a></div>variable template</li><li id='expl.spec-1.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.4'>(1.4)</a></div>member function of a class template</li><li id='expl.spec-1.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.5'>(1.5)</a></div>static data member of a class template</li><li id='expl.spec-1.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.6'>(1.6)</a></div>member class of a class template</li><li id='expl.spec-1.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.7'>(1.7)</a></div>member enumeration of a class template</li><li id='expl.spec-1.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.8'>(1.8)</a></div>member class template of a class or class template</li><li id='expl.spec-1.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-1.9'>(1.9)</a></div>member function template of a class or class template</li></ul>
can be declared by a declaration introduced by
<span class='texttt'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span>;
that is:
<span class='indexparent'><a class='index' id=':explicit-specialization'></a></span>
<pre class='bnf'><a class='nontermdef' href='#nt:explicit-specialization' id='nt:explicit-specialization'>explicit-specialization:</a>
&#9;<span class='texttt'><span class='keyword'>template</span></span><span class='indexparent'><a class='index' id=':template___'></a></span> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <a class='grammarterm' href='dcl.pre#nt:declaration'>declaration</a>
</pre></div><div id='expl.spec-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#expl.spec-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> stream;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> stream<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
</pre><div id='expl.spec-1.sentence-2' class='sentence'>Given these declarations,
<span class='texttt'>stream<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span></span>
will be used as the definition of streams of
<span class='texttt'><span class='keyword'>char</span></span>s;
other streams will be handled by class template specializations instantiated
from the class template<a class='hidden_link' href='#expl.spec-1.sentence-2'>.</a></div> <div id='expl.spec-1.sentence-3' class='sentence'>Similarly,
<span class='texttt'>sort<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span></span>
will be used as the sort function for arguments
of type
<span class='texttt'>Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span></span>;
other
<span class='texttt'>Array</span>
types will be sorted by functions generated from the template<a class='hidden_link' href='#expl.spec-1.sentence-3'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='expl.spec-2'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6858'>#</a></div><div id='expl.spec-2.sentence-1' class='sentence'>An explicit specialization shall not use
a <a class='grammarterm' href='dcl.stc#nt:storage-class-specifier'>storage-class-specifier</a>
other than <span class='texttt'><span class='keyword'>thread_&shy;local</span></span><span class='indexparent'><a class='index' id=':thread_local_'></a></span><a class='hidden_link' href='#expl.spec-2.sentence-1'>.</a></div></div><div class='para' id='expl.spec-3'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6863'>#</a></div><div id='expl.spec-3.sentence-1' class='sentence'>An explicit specialization
may be declared in any scope in which the corresponding primary template
may be defined (<a href='namespace.memdef'>[namespace.memdef]</a>, <a href='class.mem'>[class.mem]</a>, <a href='#mem'>[temp.mem]</a>)<a class='hidden_link' href='#expl.spec-3.sentence-1'>.</a></div></div><div class='para' id='expl.spec-4'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6868'>#</a></div><div id='expl.spec-4.sentence-1' class='sentence'>A declaration of a function template, class template, or variable template being explicitly
specialized shall precede the declaration of
the explicit
specialization<a class='hidden_link' href='#expl.spec-4.sentence-1'>.</a></div> <div id='expl.spec-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#expl.spec-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expl.spec-4.sentence-2' class='sentence'>A declaration, but not a definition of the template is required<a class='hidden_link' href='#expl.spec-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='expl.spec-4.sentence-3' class='sentence'>
The definition of a class or class template shall precede the
declaration of an explicit specialization for a member template of the class
or class template<a class='hidden_link' href='#expl.spec-4.sentence-3'>.</a></div> <div id='expl.spec-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#expl.spec-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;          <span class='comment'>// error: <span class='tcode_in_codeblock'>X</span> not a template</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;        <span class='comment'>// OK: <span class='tcode_in_codeblock'>X</span> is a template</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='expl.spec-5'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6889'>#</a></div><div id='expl.spec-5.sentence-1' class='sentence'>A member function, a member function template, a member class,
a member enumeration, a
member class template,
a static data member, or a static data member template of a class template
may be explicitly specialized for a class specialization that is implicitly
instantiated;
in this case, the definition of the class template shall
precede the explicit specialization for the member of the class
template<a class='hidden_link' href='#expl.spec-5.sentence-1'>.</a></div> <div id='expl.spec-5.sentence-2' class='sentence'>If such an explicit specialization for the member of a class template names an
implicitly-declared special member function (<a href='special'>[special]</a>),
the program is ill-formed<a class='hidden_link' href='#expl.spec-5.sentence-2'>.</a></div></div><div class='para' id='expl.spec-6'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6903'>#</a></div><div id='expl.spec-6.sentence-1' class='sentence'>A member of an explicitly specialized class is not implicitly
instantiated from the member declaration of the class template;
instead, the member of the class template specialization shall itself be
explicitly defined if its definition is required<a class='hidden_link' href='#expl.spec-6.sentence-1'>.</a></div> <div id='expl.spec-6.sentence-2' class='sentence'>In this case, the definition of the class template explicit specialization
shall be in scope at the point at which the member is defined<a class='hidden_link' href='#expl.spec-6.sentence-2'>.</a></div> <div id='expl.spec-6.sentence-3' class='sentence'>The definition of an explicitly specialized class is unrelated to the
definition of a generated specialization<a class='hidden_link' href='#expl.spec-6.sentence-3'>.</a></div> <div id='expl.spec-6.sentence-4' class='sentence'>That is, its members need
not have the same names, types, etc<a class='hidden_link' href='#expl.spec-6.sentence-4'>.</a></div> <div id='expl.spec-6.sentence-5' class='sentence'>as the members of a generated
specialization<a class='hidden_link' href='#expl.spec-6.sentence-5'>.</a></div> <div id='expl.spec-6.sentence-6' class='sentence'>Members of an explicitly specialized
class template are defined in the same manner as members of normal classes, and
not using the <span class='texttt'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span> syntax<a class='hidden_link' href='#expl.spec-6.sentence-6'>.</a></div> <div id='expl.spec-6.sentence-7' class='sentence'>The same is true when defining a member of an explicitly specialized member
class<a class='hidden_link' href='#expl.spec-6.sentence-7'>.</a></div> <div id='expl.spec-6.sentence-8' class='sentence'>However, <span class='texttt'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span> is used in defining a member of an explicitly
specialized member class template that is specialized as a class template<a class='hidden_link' href='#expl.spec-6.sentence-8'>.</a></div> <div id='expl.spec-6.example-1' class='example'>[&nbsp;<a class='example_link' href='#expl.spec-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> a;
  a<span class='operator'>.</span>f<span class='parenthesis'>(</span><span class='literal'>16</span><span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>A&lt;int&gt;&#x200b;::&#x200b;f</span> must be defined somewhere</span>
<span class='curlybracket'>}</span>

<span class='comment'>// <span class='tcode_in_codeblock'>template&lt;&gt;</span> not used for a member of an explicitly specialized class template</span>
<span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='comment'>// <span class='tcode_in_codeblock'>template&lt;&gt;</span> also not used when defining a member of an explicitly specialized member class</span>
<span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>C <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='comment'>// <span class='tcode_in_codeblock'>template&lt;&gt;</span> is used when defining a member of an explicitly specialized member class template</span>
<span class='comment'>// specialized as a class template</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>C<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>              <span class='comment'>// error: <span class='tcode_in_codeblock'>template&lt;&gt;</span> not permitted</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>C <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>C<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>    <span class='comment'>// error: <span class='tcode_in_codeblock'>template&lt;&gt;</span> required</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='expl.spec-7'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L6966'>#</a></div><div id='expl.spec-7.sentence-1' class='sentence'>If a template, a member template or a member of a class template is explicitly
specialized then that specialization shall be declared before the first use of
that specialization that would cause an implicit instantiation to take place,
in every translation unit in which such a use occurs;
no diagnostic is required<a class='hidden_link' href='#expl.spec-7.sentence-1'>.</a></div> <div id='expl.spec-7.sentence-2' class='sentence'>If the program does not provide a definition for an explicit specialization and
either the specialization is used in a way that would cause an implicit
instantiation to take place or the member is a virtual member function,
the program is ill-formed, no diagnostic required<a class='hidden_link' href='#expl.spec-7.sentence-2'>.</a></div> <div id='expl.spec-7.sentence-3' class='sentence'>An implicit instantiation is never generated for an explicit specialization
that is declared but not defined<a class='hidden_link' href='#expl.spec-7.sentence-3'>.</a></div> <div id='expl.spec-7.example-1' class='example'>[&nbsp;<a class='example_link' href='#expl.spec-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>class</span> String <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>String<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  sort<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;          <span class='comment'>// use primary template <span class='tcode_in_codeblock'>sort(Array&lt;T&gt;&amp;)</span>, <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>String</span></span>
<span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='anglebracket'>&lt;</span>String<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>String<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span>;     <span class='comment'>// error: specialization after use of primary template</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span>;            <span class='comment'>// OK: <span class='tcode_in_codeblock'>sort&lt;char*&gt;</span> not yet used</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>enum</span> E <span class='operator'>:</span> T;
  <span class='keyword'>enum</span> <span class='keyword'>class</span> S <span class='operator'>:</span> T;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>enum</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>E <span class='operator'>:</span> <span class='keyword'>int</span> <span class='curlybracket'>{</span> eint <span class='curlybracket'>}</span>;           <span class='comment'>// OK</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>enum</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>S <span class='operator'>:</span> <span class='keyword'>int</span> <span class='curlybracket'>{</span> sint <span class='curlybracket'>}</span>;     <span class='comment'>// OK</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>enum</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>E <span class='operator'>:</span> T <span class='curlybracket'>{</span> eT <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>enum</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>S <span class='operator'>:</span> T <span class='curlybracket'>{</span> sT <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>enum</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>E <span class='operator'>:</span> <span class='keyword'>char</span> <span class='curlybracket'>{</span> echar <span class='curlybracket'>}</span>;        <span class='comment'>// error: <span class='tcode_in_codeblock'>A&lt;char&gt;&#x200b;::&#x200b;E</span> was instantiated</span>
                                                    <span class='comment'>// when <span class='tcode_in_codeblock'>A&lt;char&gt;</span> was instantiated</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>enum</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>S <span class='operator'>:</span> <span class='keyword'>char</span> <span class='curlybracket'>{</span> schar <span class='curlybracket'>}</span>;  <span class='comment'>// OK</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='expl.spec-8'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7004'>#</a></div><div id='expl.spec-8.sentence-1' class='sentence'>The placement of explicit specialization declarations for function templates, class
templates, variable templates,
member functions of class templates, static data members of class
templates, member classes of class templates, member enumerations of class
templates, member class templates of class
templates, member function templates of class templates,
static data member templates of class templates,
member functions of
member templates of class templates, member functions of member templates of
non-template classes,
static data member templates of non-template classes,
member function templates of member classes of class
templates, etc., and the placement of partial specialization declarations
of class templates, variable templates,
member class templates of non-template classes,
static data member templates of non-template classes, member
class templates of class templates, etc., can affect whether a program is
well-formed according to the relative positioning of the explicit specialization
declarations and their points of instantiation in the translation unit as
specified above and below<a class='hidden_link' href='#expl.spec-8.sentence-1'>.</a></div> <div id='expl.spec-8.sentence-2' class='sentence'>When writing a specialization, be careful about its location;
or to make it compile will be such a trial as to kindle its self-immolation<a class='hidden_link' href='#expl.spec-8.sentence-2'>.</a></div></div><div class='para' id='expl.spec-9'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7028'>#</a></div><div id='expl.spec-9.sentence-1' class='sentence'>A template explicit specialization is in the scope of the namespace in which
the template was defined<a class='hidden_link' href='#expl.spec-9.sentence-1'>.</a></div> <div id='expl.spec-9.example-1' class='example'>[&nbsp;<a class='example_link' href='#expl.spec-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;        <span class='comment'>// OK: specialization in same namespace</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span>;                   <span class='comment'>// forward-declare intent to specialize for <span class='tcode_in_codeblock'>double</span></span>
<span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> N<span class='operator'>::</span>Y<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;    <span class='comment'>// OK: specialization in enclosing namespace</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> N<span class='operator'>::</span>Y<span class='anglebracket'>&lt;</span><span class='keyword'>short</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;     <span class='comment'>// OK: specialization in enclosing namespace</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='expl.spec-10'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7046'>#</a></div><div id='expl.spec-10.sentence-1' class='sentence'>A
<a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>
that names a class template explicit specialization that has been declared but
not defined can be used exactly like the names of other incompletely-defined
classes (<a href='basic.types'>[basic.types]</a>)<a class='hidden_link' href='#expl.spec-10.sentence-1'>.</a></div> <div id='expl.spec-10.example-1' class='example'>[&nbsp;<a class='example_link' href='#expl.spec-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X;                      <span class='comment'>// <span class='tcode_in_codeblock'>X</span> is a class template</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;

X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span> p;                                      <span class='comment'>// OK: pointer to declared class <span class='tcode_in_codeblock'>X&lt;int&gt;</span></span>
X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> x;                                       <span class='comment'>// error: object of incomplete class <span class='tcode_in_codeblock'>X&lt;int&gt;</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='expl.spec-11'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7062'>#</a></div><div id='expl.spec-11.sentence-1' class='sentence'>A trailing
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
can be left unspecified in the
<a class='grammarterm' href='#nt:template-id'>template-id</a>
naming an explicit function template specialization
provided it can be deduced from the function argument type<a class='hidden_link' href='#expl.spec-11.sentence-1'>.</a></div> <div id='expl.spec-11.example-1' class='example'>[&nbsp;<a class='example_link' href='#expl.spec-11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span>;

<span class='comment'>// explicit specialization for <span class='tcode_in_codeblock'>sort(Array&lt;int&gt;&amp;)</span></span>
<span class='comment'>// with deduced template-argument of type <span class='tcode_in_codeblock'>int</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='expl.spec-12'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7080'>#</a></div><div id='expl.spec-12.note-1' class='note'>[&nbsp;<a class='note_link' href='#expl.spec-12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expl.spec-12.sentence-1' class='sentence'>An explicit specialization of a constrained template is required
to satisfy that template's associated constraints (<a href='#constr.decl'>[temp.constr.decl]</a>)<a class='hidden_link' href='#expl.spec-12.sentence-1'>.</a></div> <div id='expl.spec-12.sentence-2' class='sentence'>The satisfaction of constraints is determined
when forming the template name of an explicit specialization
in which all template arguments are specified (<a href='#names'>[temp.names]</a>),
or, for explicit specializations of function templates,
during template argument deduction (<a href='#deduct.decl'>[temp.deduct.decl]</a>)
when one or more trailing template arguments are left unspecified<a class='hidden_link' href='#expl.spec-12.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='expl.spec-13'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7092'>#</a></div><div id='expl.spec-13.sentence-1' class='sentence'>A function with the same name as a template and a type that exactly matches that
of a template specialization is not an explicit specialization (<a href='#fct'>[temp.fct]</a>)<a class='hidden_link' href='#expl.spec-13.sentence-1'>.</a></div></div><div class='para' id='expl.spec-14'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7096'>#</a></div><div id='expl.spec-14.sentence-1' class='sentence'>Whether an explicit specialization of a function or variable template
is inline, constexpr, or an immediate function
is determined by the explicit specialization and
is independent of those properties of the template<a class='hidden_link' href='#expl.spec-14.sentence-1'>.</a></div> <div id='expl.spec-14.example-1' class='example'>[&nbsp;<a class='example_link' href='#expl.spec-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>inline</span> T g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>inline</span> <span class='keyword'>void</span> f<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>   <span class='comment'>// OK: inline</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> g<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>           <span class='comment'>// OK: not inline</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='expl.spec-15'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7111'>#</a></div><div id='expl.spec-15.sentence-1' class='sentence'>An explicit specialization of a static data member of a template
or an explicit specialization of a static data member template is a
definition if the declaration includes an initializer;
otherwise, it is a declaration<a class='hidden_link' href='#expl.spec-15.sentence-1'>.</a></div> <div id='expl.spec-15.note-1' class='note'>[&nbsp;<a class='note_link' href='#expl.spec-15.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='expl.spec-15.sentence-2' class='sentence'>The definition of a static data member of a template
that requires default-initialization must use a <a class='grammarterm' href='dcl.init#nt:braced-init-list'>braced-init-list</a>:</div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> X Q<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>x;                         <span class='comment'>// declaration</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> X Q<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>x <span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                      <span class='comment'>// error: declares a function</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> X Q<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>x <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                     <span class='comment'>// definition</span>
</pre> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='expl.spec-16'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7127'>#</a></div><div id='expl.spec-16.sentence-1' class='sentence'>A member or a member template of a class template may be explicitly specialized
for a given implicit instantiation of the class template, even if the member
or member template is defined in the class template definition<a class='hidden_link' href='#expl.spec-16.sentence-1'>.</a></div> <div id='expl.spec-16.sentence-2' class='sentence'>An explicit specialization of a member or member template is specified using the
syntax for explicit specialization<a class='hidden_link' href='#expl.spec-16.sentence-2'>.</a></div> <div id='expl.spec-16.example-1' class='example'>[&nbsp;<a class='example_link' href='#expl.spec-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X1<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g1<span class='parenthesis'>(</span>T, X1<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X2<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g2<span class='parenthesis'>(</span>T, X2<span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> h<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='comment'>// specialization</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;

<span class='comment'>// out of class member template definition</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X1<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>g1<span class='parenthesis'>(</span>T, X1<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='comment'>// member template specialization</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X1<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>g1<span class='parenthesis'>(</span><span class='keyword'>int</span>, X1<span class='parenthesis'>)</span>;

<span class='comment'>// member template specialization</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>g1<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>char</span><span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>X1</span> deduced as <span class='tcode_in_codeblock'>char</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>g2<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>char</span><span class='parenthesis'>)</span>;     <span class='comment'>// <span class='tcode_in_codeblock'>X2</span> specified as <span class='tcode_in_codeblock'>char</span></span>

<span class='comment'>// member specialization even if defined in class definition</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='expl.spec-17'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7162'>#</a></div><div id='expl.spec-17.sentence-1' class='sentence'>A member or a member template may be nested within many enclosing class
templates<a class='hidden_link' href='#expl.spec-17.sentence-1'>.</a></div> <div id='expl.spec-17.sentence-2' class='sentence'>In an explicit specialization for such a member,
the member declaration shall be preceded by a
<span class='texttt'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span>
for each enclosing class template that is explicitly specialized<a class='hidden_link' href='#expl.spec-17.sentence-2'>.</a></div> <div id='expl.spec-17.example-1' class='example'>[&nbsp;<a class='example_link' href='#expl.spec-17.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span>
    <span class='keyword'>void</span> mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='expl.spec-18'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7181'>#</a></div><div id='expl.spec-18.sentence-1' class='sentence'>In an explicit specialization declaration for a member of a class template or
a member template that appears in namespace scope,
the member template and some of its enclosing class templates may remain
unspecialized,
except that the declaration shall not explicitly specialize a class member
template if its enclosing class templates are not explicitly specialized
as well<a class='hidden_link' href='#expl.spec-18.sentence-1'>.</a></div> <div id='expl.spec-18.sentence-2' class='sentence'>In such an explicit specialization declaration, the keyword
<span class='texttt'><span class='keyword'>template</span></span>
followed by a
<a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a>
shall be provided instead of the
<span class='texttt'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span>
preceding the explicit specialization declaration of the member<a class='hidden_link' href='#expl.spec-18.sentence-2'>.</a></div> <div id='expl.spec-18.sentence-3' class='sentence'>The types of the
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>
in the
<a class='grammarterm' href='#nt:template-parameter-list'>template-parameter-list</a>
shall be the same as those specified in the primary template definition<a class='hidden_link' href='#expl.spec-18.sentence-3'>.</a></div> <div id='expl.spec-18.example-1' class='example'>[&nbsp;<a class='example_link' href='#expl.spec-18.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span>
    <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T3<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> mf1<span class='parenthesis'>(</span>T3<span class='parenthesis'>)</span>;
    <span class='keyword'>void</span> mf2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X<span class='anglebracket'>&gt;</span>
  <span class='keyword'>class</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B <span class='curlybracket'>{</span>
      <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> mf1<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>mf1<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> A<span class='anglebracket'>&lt;</span>Y<span class='anglebracket'>&gt;</span><span class='operator'>::</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>mf2<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>       <span class='comment'>// error: <span class='tcode_in_codeblock'>B&lt;double&gt;</span> is specialized but</span>
                                        <span class='comment'>// its enclosing class template <span class='tcode_in_codeblock'>A</span> is not</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='expl.spec-19'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7221'>#</a></div><div id='expl.spec-19.sentence-1' class='sentence'>A specialization of a member function template, member class template,
or static data member template of
a non-specialized class template is itself a template<a class='hidden_link' href='#expl.spec-19.sentence-1'>.</a></div></div><div class='para' id='expl.spec-20'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-20'>20</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7226'>#</a></div><div id='expl.spec-20.sentence-1' class='sentence'>An explicit specialization declaration shall not be a friend declaration<a class='hidden_link' href='#expl.spec-20.sentence-1'>.</a></div></div><div class='para' id='expl.spec-21'><div class='marginalizedparent'><a class='marginalized' href='#expl.spec-21'>21</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7229'>#</a></div><div id='expl.spec-21.sentence-1' class='sentence'>Default function arguments shall not be specified in a declaration or
a definition for one of the following explicit specializations:
<ul class='itemize'><li id='expl.spec-21.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-21.1'>(21.1)</a></div>the explicit specialization of a function template;</li><li id='expl.spec-21.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-21.2'>(21.2)</a></div>the explicit specialization of a member function template;</li><li id='expl.spec-21.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#expl.spec-21.3'>(21.3)</a></div>the explicit specialization of a member function of a class template where
the class template specialization to which the member function specialization
belongs is implicitly instantiated<a class='hidden_link' href='#expl.spec-21.sentence-1'>.</a> <div id='expl.spec-21.3.note-1' class='note'>[&nbsp;<a class='note_link' href='#expl.spec-21.3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> Default function arguments may be specified in the declaration or
definition of a member function of a class template specialization that is
explicitly specialized. —&nbsp;<i>end note</i></div>&nbsp;]</div> </li></ul></div></div></div></div><div id='fct.spec' class='section'><h2 ><a class='secnum' href='#fct.spec' style='min-width:88pt'>13.10</a> Function template specializations <a class='abbr_ref' href='temp.fct.spec'>[temp.fct.spec]</a></h2><div class='para' id='fct.spec-1'><div class='marginalizedparent'><a class='marginalized' href='#fct.spec-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7250'>#</a></div><div id='fct.spec-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':template,function'></a></span>A function instantiated from a function template is called a function template
specialization; so is an explicit specialization of a function template<a class='hidden_link' href='#fct.spec-1.sentence-1'>.</a></div> <div id='fct.spec-1.sentence-2' class='sentence'>Template arguments can be explicitly specified when naming the function
template specialization, deduced from the context (e.g.,
deduced from the function arguments in a call to the function template
specialization, see <a href='#deduct'>[temp.deduct]</a>), or obtained from default template arguments<a class='hidden_link' href='#fct.spec-1.sentence-2'>.</a></div></div><div class='para' id='fct.spec-2'><div class='marginalizedparent'><a class='marginalized' href='#fct.spec-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7259'>#</a></div><div id='fct.spec-2.sentence-1' class='sentence'>Each function template specialization instantiated from a template
has its own copy of any static variable<a class='hidden_link' href='#fct.spec-2.sentence-1'>.</a></div> <div id='fct.spec-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#fct.spec-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> T s;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span> a, <span class='keyword'>char</span><span class='operator'>*</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>a<span class='parenthesis'>)</span>;            <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(int*)</span></span>
  f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>b<span class='parenthesis'>)</span>;            <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;char*&gt;(char**)</span></span>
<span class='curlybracket'>}</span>
</pre><div id='fct.spec-2.sentence-2' class='sentence'>Here
<span class='texttt'>f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span></span>
has a static variable
<span class='texttt'>s</span>
of type
<span class='texttt'><span class='keyword'>int</span></span>
and
<span class='texttt'>f<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='operator'>*</span><span class='parenthesis'>)</span></span>
has a static variable
<span class='texttt'>s</span>
of type
<span class='texttt'><span class='keyword'>char</span><span class='operator'>*</span></span><a class='hidden_link' href='#fct.spec-2.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div id='arg.explicit' class='section'><h3 ><a class='secnum' href='#arg.explicit' style='min-width:103pt'>13.10.1</a> Explicit template argument specification <a class='abbr_ref' href='temp.arg.explicit'>[temp.arg.explicit]</a></h3><div class='para' id='arg.explicit-1'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7290'>#</a></div><div id='arg.explicit-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':specification,template_argument'></a></span>Template arguments can be specified when referring to a function
template specialization that is not a specialization of a constructor template
by qualifying the function template
name with the list of
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
in the same way as
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
are specified in uses of a class template specialization<a class='hidden_link' href='#arg.explicit-1.sentence-1'>.</a></div> <div id='arg.explicit-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg.explicit-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='arg.explicit-1.sentence-2' class='sentence'><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>dcomplex<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> cv, Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> ci<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  sort<span class='anglebracket'>&lt;</span>dcomplex<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>cv<span class='parenthesis'>)</span>;                   <span class='comment'>// <span class='tcode_in_codeblock'>sort(Array&lt;dcomplex&gt;&amp;)</span></span>
  sort<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>ci<span class='parenthesis'>)</span>;                        <span class='comment'>// <span class='tcode_in_codeblock'>sort(Array&lt;int&gt;&amp;)</span></span>
<span class='curlybracket'>}</span>
</pre>
and
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span> U convert<span class='parenthesis'>(</span>V v<span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>double</span> d<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> convert<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>d<span class='parenthesis'>)</span>;       <span class='comment'>// <span class='tcode_in_codeblock'>int convert(double)</span></span>
  <span class='keyword'>char</span> c <span class='operator'>=</span> convert<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>d<span class='parenthesis'>)</span>;     <span class='comment'>// <span class='tcode_in_codeblock'>char convert(double)</span></span>
<span class='curlybracket'>}</span>
</pre></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='arg.explicit-2'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7319'>#</a></div><div id='arg.explicit-2.sentence-1' class='sentence'>Template arguments shall not be specified
when referring to a specialization of
a constructor template (<a href='class.ctor'>[class.ctor]</a>, <a href='class.qual'>[class.qual]</a>)<a class='hidden_link' href='#arg.explicit-2.sentence-1'>.</a></div></div><div class='para' id='arg.explicit-3'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7324'>#</a></div><div id='arg.explicit-3.sentence-1' class='sentence'>A template argument list may be specified when referring to a specialization
of a function template
<ul class='itemize'><li id='arg.explicit-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.explicit-3.1'>(3.1)</a></div>when a function is called,</li><li id='arg.explicit-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.explicit-3.2'>(3.2)</a></div>when the address of a function is taken, when a function initializes a
reference to function, or when a pointer to member function is formed,</li><li id='arg.explicit-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.explicit-3.3'>(3.3)</a></div>in an explicit specialization,</li><li id='arg.explicit-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.explicit-3.4'>(3.4)</a></div>in an explicit instantiation, or</li><li id='arg.explicit-3.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#arg.explicit-3.5'>(3.5)</a></div>in a friend declaration<a class='hidden_link' href='#arg.explicit-3.sentence-1'>.</a></li></ul></div></div><div class='para' id='arg.explicit-4'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7341'>#</a></div><div id='arg.explicit-4.sentence-1' class='sentence'>Trailing template arguments that can be <a href='#deduct'>deduced</a> or
obtained from default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
may be omitted from the list of explicit
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span><a class='hidden_link' href='#arg.explicit-4.sentence-1'>.</a></div> <div id='arg.explicit-4.sentence-2' class='sentence'>A trailing template parameter pack (<a href='#variadic'>[temp.variadic]</a>) not otherwise deduced will be
deduced as an empty sequence of template arguments<a class='hidden_link' href='#arg.explicit-4.sentence-2'>.</a></div> <div id='arg.explicit-4.sentence-3' class='sentence'>If all of the template arguments can be deduced, they may all be omitted;
in this case, the empty template argument list
<span class='texttt'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span>
itself may also be omitted<a class='hidden_link' href='#arg.explicit-4.sentence-3'>.</a></div> <div id='arg.explicit-4.sentence-4' class='sentence'>In contexts where deduction is done and fails, or in contexts where
deduction is not done, if a template argument list is specified and it,
along with any default template arguments, identifies a single function
template specialization, then the
<a class='grammarterm' href='#nt:template-id'>template-id</a>
is an lvalue for the function template specialization<a class='hidden_link' href='#arg.explicit-4.sentence-4'>.</a></div> <div id='arg.explicit-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg.explicit-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X, <span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> X f<span class='parenthesis'>(</span>Y<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X, <span class='keyword'>class</span> Y, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Z<span class='anglebracket'>&gt;</span> X g<span class='parenthesis'>(</span>Y<span class='parenthesis'>)</span>;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>5.6</span><span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> deduced as <span class='tcode_in_codeblock'>double</span></span>
  <span class='keyword'>int</span> j <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>5.6</span><span class='parenthesis'>)</span>;               <span class='comment'>// error: <span class='tcode_in_codeblock'>X</span> cannot be deduced</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>bool</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;        <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> for outer <span class='tcode_in_codeblock'>f</span> deduced as <span class='tcode_in_codeblock'>int (*)(bool)</span></span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>f&lt;int&gt;</span> does not denote a single function template specialization</span>
  <span class='keyword'>int</span> k <span class='operator'>=</span> g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>5.6</span><span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> deduced as double; <span class='tcode_in_codeblock'>Z</span> deduced as an empty sequence</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>bool</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;        <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> for outer <span class='tcode_in_codeblock'>f</span> deduced as <span class='tcode_in_codeblock'>int (*)(bool)</span>,</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>Z</span> deduced as an empty sequence</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='arg.explicit-5'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7375'>#</a></div><div id='arg.explicit-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#arg.explicit-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.explicit-5.sentence-1' class='sentence'>An empty template argument list can be used to indicate that a given
use refers to a specialization of a function template even when a
non-template function (<a href='dcl.fct'>[dcl.fct]</a>) is visible that would otherwise be used<a class='hidden_link' href='#arg.explicit-5.sentence-1'>.</a></div> <div id='arg.explicit-5.sentence-2' class='sentence'>For example:</div><pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;    <span class='comment'>// #1</span>
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;                     <span class='comment'>// #2</span>
<span class='keyword'>int</span> k <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                   <span class='comment'>// uses #2</span>
<span class='keyword'>int</span> l <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                 <span class='comment'>// uses #1</span>
</pre> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='arg.explicit-6'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7390'>#</a></div><div id='arg.explicit-6.sentence-1' class='sentence'>Template arguments that are present shall be specified in the declaration
order of their corresponding
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span><a class='hidden_link' href='#arg.explicit-6.sentence-1'>.</a></div> <div id='arg.explicit-6.sentence-2' class='sentence'>The template argument list shall not specify more
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
than there are corresponding
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>
unless one of the <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span> is a template
parameter pack<a class='hidden_link' href='#arg.explicit-6.sentence-2'>.</a></div> <div id='arg.explicit-6.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg.explicit-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X, <span class='keyword'>class</span> Y, <span class='keyword'>class</span> Z<span class='anglebracket'>&gt;</span> X f<span class='parenthesis'>(</span>Y,Z<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span>,<span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>"aa"</span>,<span class='literal'>3.0</span><span class='parenthesis'>)</span>;
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>"aa"</span>,<span class='literal'>3.0</span><span class='parenthesis'>)</span>; <span class='comment'>// <span class='tcode_in_codeblock'>Z</span> deduced as <span class='tcode_in_codeblock'>double</span></span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>"aa"</span>,<span class='literal'>3.0</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> deduced as <span class='tcode_in_codeblock'>const char*</span>; <span class='tcode_in_codeblock'>Z</span> deduced as <span class='tcode_in_codeblock'>double</span></span>
  f<span class='parenthesis'>(</span><span class='literal'>"aa"</span>,<span class='literal'>3.0</span><span class='parenthesis'>)</span>;                  <span class='comment'>// error: <span class='tcode_in_codeblock'>X</span> cannot be deduced</span>
  f2<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>, <span class='keyword'>short</span>, <span class='keyword'>int</span>, <span class='keyword'>long</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='arg.explicit-7'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7414'>#</a></div><div id='arg.explicit-7.sentence-1' class='sentence'>Implicit conversions (<a href='conv'>[conv]</a>) will be performed on a function argument
to convert it to the type of the corresponding function parameter if
the parameter type contains no
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>
that participate in template argument deduction<a class='hidden_link' href='#arg.explicit-7.sentence-1'>.</a></div> <div id='arg.explicit-7.note-1' class='note'>[&nbsp;<a class='note_link' href='#arg.explicit-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.explicit-7.sentence-2' class='sentence'>Template parameters do not participate in template argument deduction if
they are explicitly specified<a class='hidden_link' href='#arg.explicit-7.sentence-2'>.</a></div> <div id='arg.explicit-7.sentence-3' class='sentence'>For example,</div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;

<span class='keyword'>class</span> Complex <span class='curlybracket'>{</span>
  Complex<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span>Complex<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;    <span class='comment'>// OK, means <span class='tcode_in_codeblock'>f&lt;Complex&gt;(Complex(1))</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='arg.explicit-8'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7438'>#</a></div><div id='arg.explicit-8.note-1' class='note'>[&nbsp;<a class='note_link' href='#arg.explicit-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='arg.explicit-8.sentence-1' class='sentence'>Because the explicit template argument list follows the function
template name, and because
constructor templates (<a href='class.ctor'>[class.ctor]</a>) are named without using a
function name (<a href='class.qual'>[class.qual]</a>), there is no way to provide an explicit
template argument list for these function templates<a class='hidden_link' href='#arg.explicit-8.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='arg.explicit-9'><div class='marginalizedparent'><a class='marginalized' href='#arg.explicit-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7447'>#</a></div><div id='arg.explicit-9.sentence-1' class='sentence'>Template argument deduction can extend the sequence of template
arguments corresponding to a template parameter pack, even when the
sequence contains explicitly specified template arguments<a class='hidden_link' href='#arg.explicit-9.sentence-1'>.</a></div> <div id='arg.explicit-9.example-1' class='example'>[&nbsp;<a class='example_link' href='#arg.explicit-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> values<span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>*</span>, <span class='keyword'>float</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span>, <span class='literal'>0</span>, <span class='literal'>0</span><span class='parenthesis'>)</span>;     <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> deduced as the sequence <span class='tcode_in_codeblock'>int*</span>, <span class='tcode_in_codeblock'>float*</span>, <span class='tcode_in_codeblock'>int</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div id='deduct' class='section'><h3 ><a class='secnum' href='#deduct' style='min-width:103pt'>13.10.2</a> Template argument deduction <a class='abbr_ref' href='temp.deduct'>[temp.deduct]</a></h3><div class='para' id='deduct-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7463'>#</a></div><div id='deduct-1.sentence-1' class='sentence'>When a
function template
specialization is referenced, all of the
template arguments shall have values<a class='hidden_link' href='#deduct-1.sentence-1'>.</a></div> <div id='deduct-1.sentence-2' class='sentence'>The values can be
explicitly specified or, in some cases, be deduced from the use
or obtained from default
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span><a class='hidden_link' href='#deduct-1.sentence-2'>.</a></div> <div id='deduct-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='deduct-1.sentence-3' class='sentence'><pre class='codeblock'>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>dcomplex<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> cv, Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> ci<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  sort<span class='parenthesis'>(</span>cv<span class='parenthesis'>)</span>;                     <span class='comment'>// calls <span class='tcode_in_codeblock'>sort(Array&lt;dcomplex&gt;&amp;)</span></span>
  sort<span class='parenthesis'>(</span>ci<span class='parenthesis'>)</span>;                     <span class='comment'>// calls <span class='tcode_in_codeblock'>sort(Array&lt;int&gt;&amp;)</span></span>
<span class='curlybracket'>}</span>
</pre>
and
<pre class='codeblock'>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>double</span> d<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> convert<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>d<span class='parenthesis'>)</span>;      <span class='comment'>// calls <span class='tcode_in_codeblock'>convert&lt;int,double&gt;(double)</span></span>
  <span class='keyword'>int</span> c <span class='operator'>=</span> convert<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>d<span class='parenthesis'>)</span>;     <span class='comment'>// calls <span class='tcode_in_codeblock'>convert&lt;char,double&gt;(double)</span></span>
<span class='curlybracket'>}</span>
</pre></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7488'>#</a></div><div id='deduct-2.sentence-1' class='sentence'>When an explicit template argument list is specified, if the
given <a class='grammarterm' href='#nt:template-id'>template-id</a> is not valid (<a href='#names'>[temp.names]</a>),
type deduction fails<a class='hidden_link' href='#deduct-2.sentence-1'>.</a></div> <div id='deduct-2.sentence-2' class='sentence'>Otherwise, the specified template argument values are substituted for the
corresponding template parameters as specified below<a class='hidden_link' href='#deduct-2.sentence-2'>.</a></div></div><div class='para' id='deduct-3'><div class='marginalizedparent'><a class='marginalized' href='#deduct-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7495'>#</a></div><div id='deduct-3.sentence-1' class='sentence'>After this substitution is performed, the function parameter type
adjustments described in <a href='dcl.fct'>[dcl.fct]</a> are performed<a class='hidden_link' href='#deduct-3.sentence-1'>.</a></div> <div id='deduct-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='deduct-3.sentence-2' class='sentence'>A parameter type of “<span class='texttt'><span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>int</span>, <span class='keyword'>int</span><span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span></span>” becomes
“<span class='texttt'><span class='keyword'>void</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span>,<span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span></span>”<a class='hidden_link' href='#deduct-3.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='deduct-3.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-3.sentence-3' class='sentence'>A top-level qualifier in a function parameter declaration does not affect
the function type but still affects the type of the function parameter
variable within the function<a class='hidden_link' href='#deduct-3.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='deduct-3.example-2' class='example'>[&nbsp;<a class='example_link' href='#deduct-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>const</span> X x<span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Z<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span>Z, Z<span class='operator'>*</span><span class='parenthesis'>)</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='comment'>// #1: function type is <span class='tcode_in_codeblock'>f(int)</span>, <span class='tcode_in_codeblock'>t</span> is non <span class='tcode_in_codeblock'>const</span></span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;

  <span class='comment'>// #2: function type is <span class='tcode_in_codeblock'>f(int)</span>, <span class='tcode_in_codeblock'>t</span> is <span class='tcode_in_codeblock'>const</span></span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;

  <span class='comment'>// #3: function type is <span class='tcode_in_codeblock'>g(int)</span>, <span class='tcode_in_codeblock'>x</span> is <span class='tcode_in_codeblock'>const</span></span>
  g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;

  <span class='comment'>// #4: function type is <span class='tcode_in_codeblock'>g(int)</span>, <span class='tcode_in_codeblock'>x</span> is <span class='tcode_in_codeblock'>const</span></span>
  g<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;

  <span class='comment'>// #5: function type is <span class='tcode_in_codeblock'>h(int, const int*)</span></span>
  h<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span>,<span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct-4'><div class='marginalizedparent'><a class='marginalized' href='#deduct-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7532'>#</a></div><div id='deduct-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-4.sentence-1' class='sentence'><span class='texttt'>f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span></span> and <span class='texttt'>f<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span></span> call distinct functions
even though both of the functions called have the same function type<a class='hidden_link' href='#deduct-4.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='deduct-5'><div class='marginalizedparent'><a class='marginalized' href='#deduct-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7538'>#</a></div><div id='deduct-5.sentence-1' class='sentence'>The resulting substituted and adjusted function type is used as
the type of the function template for template argument
deduction<a class='hidden_link' href='#deduct-5.sentence-1'>.</a></div> <div id='deduct-5.sentence-2' class='sentence'>If a template argument has not been deduced and its
corresponding template parameter has a default argument, the
template argument is determined by substituting the template
arguments determined for preceding template parameters into the
default argument<a class='hidden_link' href='#deduct-5.sentence-2'>.</a></div> <div id='deduct-5.sentence-3' class='sentence'>If the substitution results in an invalid type,
as described above, type deduction fails<a class='hidden_link' href='#deduct-5.sentence-3'>.</a></div> <div id='deduct-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U <span class='operator'>=</span> <span class='keyword'>double</span><span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t <span class='operator'>=</span> <span class='literal'>0</span>, U u <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>1</span>, <span class='literal'>'c'</span><span class='parenthesis'>)</span>;        <span class='comment'>// <span class='tcode_in_codeblock'>f&lt;int,char&gt;(1,'c')</span></span>
  f<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>f&lt;int,double&gt;(1,0)</span></span>
  f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> cannot be deduced</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;         <span class='comment'>// <span class='tcode_in_codeblock'>f&lt;int,double&gt;(0,0)</span></span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;    <span class='comment'>// <span class='tcode_in_codeblock'>f&lt;int,char&gt;(0,0)</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> <div id='deduct-5.sentence-4' class='sentence'>When all template arguments have been deduced or obtained from
default template arguments, all uses of template parameters in
the template parameter list of the template and the function type
are replaced with the corresponding deduced
or default argument values<a class='hidden_link' href='#deduct-5.sentence-4'>.</a></div> <div id='deduct-5.sentence-5' class='sentence'>If the substitution results in an
invalid type, as described above, type deduction fails<a class='hidden_link' href='#deduct-5.sentence-5'>.</a></div> <div id='deduct-5.sentence-6' class='sentence'>If the function template has associated constraints (<a href='#constr.decl'>[temp.constr.decl]</a>),
those constraints are checked for satisfaction (<a href='#constr.constr'>[temp.constr.constr]</a>)<a class='hidden_link' href='#deduct-5.sentence-6'>.</a></div> <div id='deduct-5.sentence-7' class='sentence'>If the constraints are not satisfied, type deduction fails<a class='hidden_link' href='#deduct-5.sentence-7'>.</a></div></div><div class='para' id='deduct-6'><div class='marginalizedparent'><a class='marginalized' href='#deduct-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7572'>#</a></div><div id='deduct-6.sentence-1' class='sentence'>At certain points in the template argument deduction process it is necessary
to take a function type that makes use of template parameters and replace those
template parameters with the corresponding template arguments<a class='hidden_link' href='#deduct-6.sentence-1'>.</a></div> <div id='deduct-6.sentence-2' class='sentence'>This is done at
the beginning of template argument deduction when any explicitly specified
template arguments are substituted into the function type, and again at the end
of template argument deduction when any template arguments that were deduced or
obtained from default arguments are substituted<a class='hidden_link' href='#deduct-6.sentence-2'>.</a></div></div><div class='para' id='deduct-7'><div class='marginalizedparent'><a class='marginalized' href='#deduct-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7581'>#</a></div><div id='deduct-7.sentence-1' class='sentence'>The substitution occurs in all types and expressions that are used in the function
type and in template parameter declarations<a class='hidden_link' href='#deduct-7.sentence-1'>.</a></div> <div id='deduct-7.sentence-2' class='sentence'>The expressions include not only
constant expressions such as those that appear in array bounds or as nontype
template arguments but also general expressions (i.e., non-constant expressions)
inside <span class='texttt'><span class='keyword'>sizeof</span></span>, <span class='texttt'><span class='keyword'>decltype</span></span>, and other contexts that allow non-constant
expressions<a class='hidden_link' href='#deduct-7.sentence-2'>.</a></div> <div id='deduct-7.sentence-3' class='sentence'>The substitution proceeds in lexical order and stops when
a condition that causes deduction to fail is encountered<a class='hidden_link' href='#deduct-7.sentence-3'>.</a></div> <div id='deduct-7.sentence-4' class='sentence'>If substitution into different declarations of the same function template would
cause template instantiations to occur in a different order or not at all,
the program is ill-formed; no diagnostic required<a class='hidden_link' href='#deduct-7.sentence-4'>.</a></div> <div id='deduct-7.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-7.sentence-5' class='sentence'>The equivalent substitution in exception specifications is
done only when the <a class='grammarterm' href='except.spec#nt:noexcept-specifier'>noexcept-specifier</a> is instantiated,
at which point a program is ill-formed
if the substitution results in an invalid type or expression<a class='hidden_link' href='#deduct-7.sentence-5'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='deduct-7.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>using</span> X <span class='operator'>=</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>X; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>X f<span class='parenthesis'>(</span><span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>X<span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> g<span class='parenthesis'>(</span><span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>X<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>X;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>X h<span class='parenthesis'>(</span><span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>X<span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> h<span class='parenthesis'>(</span><span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>X<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>X;   <span class='comment'>// redeclaration</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='keyword'>void</span> x<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;        <span class='comment'>// OK, substituting return type causes deduction to fail</span>
  g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;        <span class='comment'>// error, substituting parameter type instantiates <span class='tcode_in_codeblock'>A&lt;int&gt;</span></span>
  h<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;        <span class='comment'>// ill-formed, no diagnostic required</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct-8'><div class='marginalizedparent'><a class='marginalized' href='#deduct-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7617'>#</a></div><div id='deduct-8.sentence-1' class='sentence'>If a substitution results in an invalid type or expression, type deduction fails<a class='hidden_link' href='#deduct-8.sentence-1'>.</a></div> <div id='deduct-8.sentence-2' class='sentence'>An
invalid type or expression is one that would be ill-formed, with a diagnostic
required, if written using the substituted arguments<a class='hidden_link' href='#deduct-8.sentence-2'>.</a></div> <div id='deduct-8.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct-8.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-8.sentence-3' class='sentence'>If no
diagnostic is required, the program is still ill-formed<a class='hidden_link' href='#deduct-8.sentence-3'>.</a></div> <div id='deduct-8.sentence-4' class='sentence'>Access checking is done
as part of the substitution
process<a class='hidden_link' href='#deduct-8.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='deduct-8.sentence-5' class='sentence'>
Only invalid types and expressions in the immediate context of
the function type,
its template parameter types,
and its <a class='grammarterm' href='dcl.fct.spec#nt:explicit-specifier'>explicit-specifier</a>
can result in a deduction failure<a class='hidden_link' href='#deduct-8.sentence-5'>.</a></div> <div id='deduct-8.note-2' class='note'>[&nbsp;<a class='note_link' href='#deduct-8.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-8.sentence-6' class='sentence'>The substitution into types and expressions can result
in effects such as the instantiation of class template specializations and/or
function template specializations, the generation of implicitly-defined functions,
etc<a class='hidden_link' href='#deduct-8.sentence-6'>.</a></div> <div id='deduct-8.sentence-7' class='sentence'>Such effects are not in the “immediate context” and can result in the
program being ill-formed<a class='hidden_link' href='#deduct-8.sentence-7'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='deduct-9'><div class='marginalizedparent'><a class='marginalized' href='#deduct-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7640'>#</a></div><div id='deduct-9.sentence-1' class='sentence'>A <a class='grammarterm' href='expr.prim.lambda#nt:lambda-expression'>lambda-expression</a> appearing in a function type
or a template parameter is not considered part of the immediate context
for the purposes of template argument deduction<a class='hidden_link' href='#deduct-9.sentence-1'>.</a></div> <div id='deduct-9.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct-9.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-9.sentence-2' class='sentence'>The intent is to avoid requiring implementations to deal with
substitution failure involving arbitrary statements<a class='hidden_link' href='#deduct-9.sentence-2'>.</a></div> <div id='deduct-9.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>auto</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> T<span class='operator'>::</span>invalid; <span class='curlybracket'>}</span> <span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;               <span class='comment'>// error: invalid expression not part of the immediate context</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, std<span class='operator'>::</span>size_t <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> T<span class='operator'>::</span>invalid; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
g<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;               <span class='comment'>// error: invalid expression not part of the immediate context</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>auto</span> h<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span>x <span class='operator'>=</span> T<span class='operator'>::</span>invalid<span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
h<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;               <span class='comment'>// error: invalid expression not part of the immediate context</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>auto</span> i<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>invalid <span class='curlybracket'>{</span> <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> i<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
i<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;               <span class='comment'>// error: invalid expression not part of the immediate context</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>auto</span> j<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> x<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span>x<span class='operator'>.</span>invalid<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> <span class='parenthesis'>(</span>t<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;   <span class='comment'>// #1</span>
<span class='keyword'>void</span> j<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;                                                            <span class='comment'>// #2</span>
j<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;               <span class='comment'>// deduction fails on #1, calls #2</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='deduct-10'><div class='marginalizedparent'><a class='marginalized' href='#deduct-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7677'>#</a></div><div id='deduct-10.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Y <span class='curlybracket'>{</span>
  Y<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> f<span class='parenthesis'>(</span>T t1, T t2<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span>t1 <span class='operator'>+</span> t2<span class='parenthesis'>)</span>;     <span class='comment'>// #1</span>
X f<span class='parenthesis'>(</span>Y, Y<span class='parenthesis'>)</span>;                                                      <span class='comment'>// #2</span>

X x1, x2;
X x3 <span class='operator'>=</span> f<span class='parenthesis'>(</span>x1, x2<span class='parenthesis'>)</span>;   <span class='comment'>// deduction fails on #1 (cannot add <span class='tcode_in_codeblock'>X+X</span>), calls #2</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct-11'><div class='marginalizedparent'><a class='marginalized' href='#deduct-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7693'>#</a></div><div id='deduct-11.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct-11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct-11.sentence-1' class='sentence'>Type deduction may fail for the following reasons:
<ul class='itemize'><li id='deduct-11.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.1'>(11.1)</a></div>Attempting to instantiate a pack expansion containing multiple packs of differing lengths.</li><li id='deduct-11.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.2'>(11.2)</a></div>Attempting to create an array with an element type that is <span class='texttt'><span class='keyword'>void</span></span>, a
function type, or a reference type, or attempting
to create an array with a size that is zero or negative. <div id='deduct-11.2.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct-11.2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T<span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> I <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> j <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;             <span class='comment'>// invalid array</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='deduct-11.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.3'>(11.3)</a></div>Attempting to use a type that is not a class or enumeration type in a qualified name. <div id='deduct-11.3.example-2' class='example'>[&nbsp;<a class='example_link' href='#deduct-11.3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>typename</span> T<span class='operator'>::</span>B<span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='deduct-11.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.4'>(11.4)</a></div>Attempting to use a type in a <a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a> of a
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a> when
that type does not contain the specified member, or
<ul class='itemize'><li id='deduct-11.4.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#deduct-11.4.1'>(11.4.1)</a></div>the specified member is not a type where a type is required, or</li><li id='deduct-11.4.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#deduct-11.4.2'>(11.4.2)</a></div>the specified member is not a template where a template is required, or</li><li id='deduct-11.4.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#deduct-11.4.3'>(11.4.3)</a></div>the specified member is not a non-type where a non-type is required.</li></ul> <div id='deduct-11.4.example-3' class='example'>[&nbsp;<a class='example_link' href='#deduct-11.4.example-3'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Z <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>typename</span> T<span class='operator'>::</span>Y<span class='operator'>*</span><span class='parenthesis'>)</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>X<span class='anglebracket'>&lt;</span>T<span class='operator'>::</span>N<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span>Z<span class='anglebracket'>&lt;</span>T<span class='operator'>::</span><span class='keyword'>template</span> TT<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='keyword'>int</span> Y; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> N;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> TT;
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='comment'>// Deduction fails in each of these cases:</span>
  f<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>A</span> does not contain a member <span class='tcode_in_codeblock'>Y</span></span>
  f<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;          <span class='comment'>// The <span class='tcode_in_codeblock'>Y</span> member of <span class='tcode_in_codeblock'>B</span> is not a type</span>
  g<span class='anglebracket'>&lt;</span>C<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;          <span class='comment'>// The <span class='tcode_in_codeblock'>N</span> member of <span class='tcode_in_codeblock'>C</span> is not a non-type</span>
  h<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;          <span class='comment'>// The <span class='tcode_in_codeblock'>TT</span> member of <span class='tcode_in_codeblock'>D</span> is not a template</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='deduct-11.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.5'>(11.5)</a></div>Attempting to create a pointer to reference type.</li><li id='deduct-11.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.6'>(11.6)</a></div>Attempting to create a reference to <span class='texttt'><span class='keyword'>void</span></span>.</li><li id='deduct-11.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.7'>(11.7)</a></div>Attempting to create “pointer to member of <span class='texttt'>T</span>” when <span class='texttt'>T</span> is not a
class type. <div id='deduct-11.7.example-4' class='example'>[&nbsp;<a class='example_link' href='#deduct-11.7.example-4'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> T<span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='deduct-11.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.8'>(11.8)</a></div>Attempting to give an invalid type to a non-type template parameter. <div id='deduct-11.8.example-5' class='example'>[&nbsp;<a class='example_link' href='#deduct-11.8.example-5'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>S<span class='anglebracket'>&lt;</span>T, T<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>int</span> i0 <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='deduct-11.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.9'>(11.9)</a></div>Attempting to perform an invalid conversion in either a template
argument expression, or an expression used in the function
declaration. <div id='deduct-11.9.example-6' class='example'>[&nbsp;<a class='example_link' href='#deduct-11.9.example-6'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i2 <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;           <span class='comment'>// can't conv <span class='tcode_in_codeblock'>1</span> to <span class='tcode_in_codeblock'>int*</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='deduct-11.10'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct-11.10'>(11.10)</a></div>Attempting to create a function type in which a parameter has a type
of <span class='texttt'><span class='keyword'>void</span></span>, or in which the return type is a function type
or array type.</li></ul></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='deduct-12'><div class='marginalizedparent'><a class='marginalized' href='#deduct-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7796'>#</a></div><div id='deduct-12.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct-12.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='deduct-12.sentence-1' class='sentence'>In the following example,
assuming a <span class='texttt'><span class='keyword'>signed</span> <span class='keyword'>char</span></span>
cannot represent the value 1000,
a <a href='dcl.init.list#def:narrowing_conversion'>narrowing conversion</a>
would be required
to convert the <a class='grammarterm' href='#nt:template-argument'>template-argument</a>
of type <span class='texttt'><span class='keyword'>int</span></span> to <span class='texttt'><span class='keyword'>signed</span> <span class='keyword'>char</span></span>,
therefore substitution fails for the
second template (<a href='#arg.nontype'>[temp.arg.nontype]</a>)<a class='hidden_link' href='#deduct-12.sentence-1'>.</a></div><pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>signed</span> <span class='keyword'>char</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i1 <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='literal'>1000</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;            <span class='comment'>// OK</span>
<span class='keyword'>int</span> i2 <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;               <span class='comment'>// ambiguous; not narrowing</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div id='deduct.call' class='section'><h4 ><a class='secnum' href='#deduct.call' style='min-width:118pt'>13.10.2.1</a> Deducing template arguments from a function call <a class='abbr_ref' href='temp.deduct.call'>[temp.deduct.call]</a></h4><div class='para' id='deduct.call-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7818'>#</a></div><div id='deduct.call-1.sentence-1' class='sentence'>Template argument deduction is done by comparing each function
template parameter type (call it
<span class='texttt'>P</span>)
that contains <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span> that participate in template argument deduction
with the type of the corresponding argument of the call (call it
<span class='texttt'>A</span>)
as described below<a class='hidden_link' href='#deduct.call-1.sentence-1'>.</a></div> <div id='deduct.call-1.sentence-2' class='sentence'>If removing references and cv-qualifiers from <span class='texttt'>P</span> gives
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span>P</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.515em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span><span class="mjx-texatom"><span class="mjx-mrow"></span></span></span></span></span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;"><span class='anglebracket'>&gt;</span></span></span></span></span></span></span></span>
or <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.519em; padding-bottom: 0.372em;"><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span></span></span></span></span></span></span>
for some <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span></span></span></span></span> and <span class='texttt'>N</span> and the
argument is a non-empty initializer list (<a href='dcl.init.list'>[dcl.init.list]</a>), then deduction is
performed instead for each element of the initializer list independently,
taking <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span></span></span></span></span>
as separate function template parameter types <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.302em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span>
and the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> initializer element as the corresponding argument<a class='hidden_link' href='#deduct.call-1.sentence-2'>.</a></div> <div id='deduct.call-1.sentence-3' class='sentence'>In the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.519em; padding-bottom: 0.372em;"><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span></span></span></span></span></span></span> case, if <span class='texttt'>N</span> is a non-type template parameter,
<span class='texttt'>N</span> is deduced from the length of the initializer list<a class='hidden_link' href='#deduct.call-1.sentence-3'>.</a></div> <div id='deduct.call-1.sentence-4' class='sentence'>Otherwise, an initializer list argument causes the
parameter to be considered a non-deduced context (<a href='#deduct.type'>[temp.deduct.type]</a>)<a class='hidden_link' href='#deduct.call-1.sentence-4'>.</a></div> <div id='deduct.call-1.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.call-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
f<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                     <span class='comment'>// <span class='tcode_in_codeblock'>T</span> deduced as <span class='tcode_in_codeblock'>int</span></span>
f<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>"asdf"</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                  <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> deduced as both <span class='tcode_in_codeblock'>int</span> and <span class='tcode_in_codeblock'>const char*</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
g<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                     <span class='comment'>// error: no argument deduced for <span class='tcode_in_codeblock'>T</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span>T <span class='keyword'>const</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
h<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                     <span class='comment'>// <span class='tcode_in_codeblock'>T</span> deduced as <span class='tcode_in_codeblock'>int</span>; <span class='tcode_in_codeblock'>N</span> deduced as <span class='tcode_in_codeblock'>3</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> j<span class='parenthesis'>(</span>T <span class='keyword'>const</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
j<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>42</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                        <span class='comment'>// <span class='tcode_in_codeblock'>T</span> deduced as <span class='tcode_in_codeblock'>int</span>; array bound not considered</span>

<span class='keyword'>struct</span> Aggr <span class='curlybracket'>{</span> <span class='keyword'>int</span> i; <span class='keyword'>int</span> j; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> k<span class='parenthesis'>(</span>Aggr <span class='keyword'>const</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
k<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                     <span class='comment'>// error: deduction fails, no conversion from <span class='tcode_in_codeblock'>int</span> to <span class='tcode_in_codeblock'>Aggr</span></span>
k<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>,<span class='curlybracket'>{</span><span class='literal'>2</span><span class='curlybracket'>}</span>,<span class='curlybracket'>{</span><span class='literal'>3</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;               <span class='comment'>// OK, <span class='tcode_in_codeblock'>N</span> deduced as <span class='tcode_in_codeblock'>3</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> M, <span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> m<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='keyword'>const</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>M<span class='squarebracket'>]</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
m<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span><span class='curlybracket'>}</span>,<span class='curlybracket'>{</span><span class='literal'>3</span>,<span class='literal'>4</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;               <span class='comment'>// <span class='tcode_in_codeblock'>M</span> and <span class='tcode_in_codeblock'>N</span> both deduced as <span class='tcode_in_codeblock'>2</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> n<span class='parenthesis'>(</span>T <span class='keyword'>const</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span>, T<span class='parenthesis'>)</span>;
n<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>,<span class='curlybracket'>{</span><span class='literal'>2</span><span class='curlybracket'>}</span>,<span class='curlybracket'>{</span><span class='literal'>3</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span>,Aggr<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;        <span class='comment'>// OK, <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>Aggr</span>, <span class='tcode_in_codeblock'>N</span> is <span class='tcode_in_codeblock'>3</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> o<span class='parenthesis'>(</span>T <span class='parenthesis'>(</span><span class='operator'>*</span> <span class='keyword'>const</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>int</span> f1<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> f4<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>char</span> f4<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span>;
o<span class='parenthesis'>(</span><span class='curlybracket'>{</span> <span class='operator'>&amp;</span>f1, <span class='operator'>&amp;</span>f4 <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                                <span class='comment'>// OK, <span class='tcode_in_codeblock'>T</span> deduced as <span class='tcode_in_codeblock'>int</span> from first element, nothing</span>
                                                <span class='comment'>// deduced from second element, <span class='tcode_in_codeblock'>N</span> deduced as <span class='tcode_in_codeblock'>2</span></span>
o<span class='parenthesis'>(</span><span class='curlybracket'>{</span> <span class='operator'>&amp;</span>f1, <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span>f4<span class='parenthesis'>)</span> <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;    <span class='comment'>// error: conflicting deductions for <span class='tcode_in_codeblock'>T</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='deduct.call-1.sentence-5' class='sentence'>
For a function parameter pack that occurs at the end
of the <a class='grammarterm' href='dcl.fct#nt:parameter-declaration-list'>parameter-declaration-list</a>,
deduction is performed for each remaining argument of the call,
taking the type <span class='texttt'>P</span>
of the <a class='grammarterm' href='dcl.decl#nt:declarator-id'>declarator-id</a> of the function parameter pack
as the corresponding function template parameter type<a class='hidden_link' href='#deduct.call-1.sentence-5'>.</a></div> <div id='deduct.call-1.sentence-6' class='sentence'>Each deduction deduces template arguments for subsequent positions in
the template parameter packs expanded by the function parameter pack<a class='hidden_link' href='#deduct.call-1.sentence-6'>.</a></div> <div id='deduct.call-1.sentence-7' class='sentence'>When a function parameter pack appears in a non-deduced
context (<a href='#deduct.type'>[temp.deduct.type]</a>), the type of that pack is
never deduced<a class='hidden_link' href='#deduct.call-1.sentence-7'>.</a></div> <div id='deduct.call-1.example-2' class='example'>[&nbsp;<a class='example_link' href='#deduct.call-1.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>Types<span class='operator'>&amp;</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T1, Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g1<span class='parenthesis'>(</span>Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>, T1<span class='parenthesis'>)</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span> x, <span class='keyword'>float</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> <span class='keyword'>int</span> z <span class='operator'>=</span> x;
  f<span class='parenthesis'>(</span>x, y, z<span class='parenthesis'>)</span>;                   <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> deduced as <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>const int</span></span>
  g<span class='parenthesis'>(</span>x, y, z<span class='parenthesis'>)</span>;                   <span class='comment'>// <span class='tcode_in_codeblock'>T1</span> deduced as <span class='tcode_in_codeblock'>int</span>; <span class='tcode_in_codeblock'>Types</span> deduced as <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>int</span></span>
  g1<span class='parenthesis'>(</span>x, y, z<span class='parenthesis'>)</span>;                  <span class='comment'>// error: <span class='tcode_in_codeblock'>Types</span> is not deduced</span>
  g1<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>x, y, z<span class='parenthesis'>)</span>;   <span class='comment'>// OK, no deduction occurs</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.call-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7901'>#</a></div><div id='deduct.call-2.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is not a reference type:</div><ul class='itemize'><li id='deduct.call-2.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-2.1'>(2.1)</a></div><div id='deduct.call-2.1.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is an array type, the pointer type produced by the <a href='conv.array'>array-to-pointer
standard conversion</a> is used in place of
<span class='texttt'>A</span>
for type deduction;
otherwise,</div></li><li id='deduct.call-2.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-2.2'>(2.2)</a></div><div id='deduct.call-2.2.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is a function type, the pointer type produced by the
<a href='conv.func'>function-to-pointer standard conversion</a> is used in place
of
<span class='texttt'>A</span>
for type
deduction; otherwise,</div></li><li id='deduct.call-2.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-2.3'>(2.3)</a></div><div id='deduct.call-2.3.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>A</span>'s
type are ignored for type deduction<a class='hidden_link' href='#deduct.call-2.3.sentence-1'>.</a></div></li></ul></div><div class='para' id='deduct.call-3'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7932'>#</a></div><div id='deduct.call-3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':reference,forwarding'></a></span>If
<span class='texttt'>P</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>P</span>'s
type are ignored for type deduction<a class='hidden_link' href='#deduct.call-3.sentence-1'>.</a></div> <div id='deduct.call-3.sentence-2' class='sentence'>If
<span class='texttt'>P</span>
is a reference type, the type
referred to by
<span class='texttt'>P</span>
is used for type deduction<a class='hidden_link' href='#deduct.call-3.sentence-2'>.</a></div> <div id='deduct.call-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.call-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> n1 <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>5</span><span class='parenthesis'>)</span>;                  <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(const int&amp;)</span></span>
<span class='keyword'>const</span> <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='keyword'>int</span> n2 <span class='operator'>=</span> f<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>;                  <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(const int&amp;)</span></span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>volatile</span> T<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> n3 <span class='operator'>=</span> g<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>;                  <span class='comment'>// calls <span class='tcode_in_codeblock'>g&lt;const int&gt;(const volatile int&amp;)</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  <div id='deduct.call-3.sentence-3' class='sentence'>
A <a class='hidden_link' href='#def:forwarding_reference' id='def:forwarding_reference'><i >forwarding reference</i></a>
is an rvalue reference to a cv-unqualified template parameter
that does not represent a template parameter of a class template
(during class template argument deduction (<a href='over.match.class.deduct'>[over.match.class.deduct]</a>))<a class='hidden_link' href='#deduct.call-3.sentence-3'>.</a></div> <div id='deduct.call-3.sentence-4' class='sentence'>If <span class='texttt'>P</span> is a forwarding reference and the argument is an
lvalue, the type “lvalue reference to <span class='texttt'>A</span>” is used in place of <span class='texttt'>A</span> for type
deduction<a class='hidden_link' href='#deduct.call-3.sentence-4'>.</a></div> <div id='deduct.call-3.example-2' class='example'>[&nbsp;<a class='example_link' href='#deduct.call-3.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> heisenreference<span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i;
<span class='keyword'>int</span> n1 <span class='operator'>=</span> f<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>;                  <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&amp;&gt;(int&amp;)</span></span>
<span class='keyword'>int</span> n2 <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                  <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(int&amp;&amp;)</span></span>
<span class='keyword'>int</span> n3 <span class='operator'>=</span> g<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>;                  <span class='comment'>// error: would call <span class='tcode_in_codeblock'>g&lt;int&gt;(const int&amp;&amp;)</span>, which</span>
                                <span class='comment'>// would bind an rvalue reference to an lvalue</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    A<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span>, U<span class='operator'>&amp;</span><span class='operator'>&amp;</span>, <span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span>;          <span class='comment'>// #1: <span class='tcode_in_codeblock'>T&amp;&amp;</span> is not a forwarding reference.</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>U&amp;&amp;</span> is a forwarding reference.</span>
  A<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span>, <span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span>;                 <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> A<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span>, <span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;    <span class='comment'>// #3: <span class='tcode_in_codeblock'>T&amp;&amp;</span> is a forwarding reference.</span>

<span class='keyword'>int</span> <span class='operator'>*</span>ip;
A a<span class='curlybracket'>{</span>i, <span class='literal'>0</span>, ip<span class='curlybracket'>}</span>;                  <span class='comment'>// error: cannot deduce from #1</span>
A a0<span class='curlybracket'>{</span><span class='literal'>0</span>, <span class='literal'>0</span>, ip<span class='curlybracket'>}</span>;                 <span class='comment'>// uses #1 to deduce <span class='tcode_in_codeblock'>A&lt;int&gt;</span> and #1 to initialize</span>
A a2<span class='curlybracket'>{</span>i, ip<span class='curlybracket'>}</span>;                    <span class='comment'>// uses #3 to deduce <span class='tcode_in_codeblock'>A&lt;int&amp;&gt;</span> and #2 to initialize</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.call-4'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L7988'>#</a></div><div id='deduct.call-4.sentence-1' class='sentence'>In general, the deduction process attempts to find template argument
values that will make the deduced
<span class='texttt'>A</span>
identical to
<span class='texttt'>A</span>
(after
the type
<span class='texttt'>A</span>
is transformed as described above)<a class='hidden_link' href='#deduct.call-4.sentence-1'>.</a></div> <div id='deduct.call-4.sentence-2' class='sentence'>However, there are
three cases that allow a difference:</div><ul class='itemize'><li id='deduct.call-4.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-4.1'>(4.1)</a></div><div id='deduct.call-4.1.sentence-1' class='sentence'>If the original
<span class='texttt'>P</span>
is a reference type, the deduced
<span class='texttt'>A</span>
(i.e.,
the type referred to by the reference) can be more cv-qualified than
the transformed <span class='texttt'>A</span><a class='hidden_link' href='#deduct.call-4.1.sentence-1'>.</a></div></li><li id='deduct.call-4.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-4.2'>(4.2)</a></div><div id='deduct.call-4.2.sentence-1' class='sentence'>The transformed <span class='texttt'>A</span>
can be another pointer or pointer-to-member type that can be converted
to the deduced
<span class='texttt'>A</span>
via a <a href='conv.fctptr'>function pointer conversion</a> and/or
<a href='conv.qual'>qualification conversion</a><a class='hidden_link' href='#deduct.call-4.2.sentence-1'>.</a></div></li><li id='deduct.call-4.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-4.3'>(4.3)</a></div><div id='deduct.call-4.3.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is a class and
<span class='texttt'>P</span>
has the form
<a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>,
then
the transformed <span class='texttt'>A</span>
can be a derived class <span class='texttt'>D</span> of the
deduced
<span class='texttt'>A</span><a class='hidden_link' href='#deduct.call-4.3.sentence-1'>.</a></div> <div id='deduct.call-4.3.sentence-2' class='sentence'>Likewise, if
<span class='texttt'>P</span>
is a pointer to a class of the form
<a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>,
the transformed <span class='texttt'>A</span>
can be a pointer to a
derived class <span class='texttt'>D</span> pointed to by the deduced
<span class='texttt'>A</span><a class='hidden_link' href='#deduct.call-4.3.sentence-2'>.</a></div> <div id='deduct.call-4.3.sentence-3' class='sentence'>However, if there is a class <span class='texttt'>C</span> that is
a (direct or indirect) base class of <span class='texttt'>D</span> and
derived (directly or indirectly) from a class <span class='texttt'>B</span> and
that would be a valid deduced <span class='texttt'>A</span>,
the deduced <span class='texttt'>A</span> cannot be <span class='texttt'>B</span> or pointer to <span class='texttt'>B</span>,
respectively<a class='hidden_link' href='#deduct.call-4.3.sentence-3'>.</a></div> <div id='deduct.call-4.3.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.call-4.3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>typename</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Ts<span class='anglebracket'>&gt;</span>
  <span class='keyword'>struct</span> X<span class='anglebracket'>&lt;</span>T, Ts<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='operator'>:</span> X<span class='anglebracket'>&lt;</span>Ts<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D <span class='operator'>:</span> X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='anglebracket'>&lt;</span>T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> x <span class='operator'>=</span> f<span class='parenthesis'>(</span>D<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;     <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;</span>, not <span class='tcode_in_codeblock'>f&lt;&gt;</span></span>
                    <span class='comment'>// <span class='tcode_in_codeblock'>B</span> is <span class='tcode_in_codeblock'>X&lt;&gt;</span>, <span class='tcode_in_codeblock'>C</span> is <span class='tcode_in_codeblock'>X&lt;int&gt;</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li></ul></div><div class='para' id='deduct.call-5'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8060'>#</a></div><div id='deduct.call-5.sentence-1' class='sentence'>These alternatives are considered only if type deduction would
otherwise fail<a class='hidden_link' href='#deduct.call-5.sentence-1'>.</a></div> <div id='deduct.call-5.sentence-2' class='sentence'>If they yield more than one possible deduced
<span class='texttt'>A</span>,
the type deduction fails<a class='hidden_link' href='#deduct.call-5.sentence-2'>.</a></div> <div id='deduct.call-5.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct.call-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.call-5.sentence-3' class='sentence'>If a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
is not used in any of the function parameters of a function template,
or is used only in a non-deduced context, its corresponding
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
cannot be deduced from a function call and the
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
must be explicitly specified<a class='hidden_link' href='#deduct.call-5.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='deduct.call-6'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8077'>#</a></div><div id='deduct.call-6.sentence-1' class='sentence'>When
<span class='texttt'>P</span>
is a function type, function pointer type, or pointer-to-member-function type:
<ul class='itemize'><li id='deduct.call-6.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-6.1'>(6.1)</a></div>If the argument is an overload set containing one or more function templates,
the parameter is treated as a non-deduced context.</li><li id='deduct.call-6.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.call-6.2'>(6.2)</a></div>If the argument is an overload set (not containing function templates), trial
argument deduction is attempted using each of the members of the set. If
deduction succeeds for only one of the overload set members, that member is
used as the argument value for the deduction. If deduction succeeds for more than
one member of the overload set the parameter is treated as a non-deduced context.</li></ul></div></div><div class='para' id='deduct.call-7'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8093'>#</a></div><div id='deduct.call-7.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.call-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// Only one function of an overload set matches the call so the function parameter is a deduced context.</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T <span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i <span class='operator'>=</span> f<span class='parenthesis'>(</span>g<span class='parenthesis'>)</span>;       <span class='comment'>// calls <span class='tcode_in_codeblock'>f(int (*)(int))</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.call-8'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8104'>#</a></div><div id='deduct.call-8.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.call-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// Ambiguous deduction causes the second function parameter to be a non-deduced context.</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T, T <span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>char</span> g<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>1</span>, g<span class='parenthesis'>)</span>;    <span class='comment'>// calls <span class='tcode_in_codeblock'>f(int, int (*)(int))</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.call-9'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8115'>#</a></div><div id='deduct.call-9.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.call-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='comment'>// The overload set contains a template, causing the second function parameter to be a non-deduced context.</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T, T <span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>char</span> g<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>1</span>, g<span class='parenthesis'>)</span>;    <span class='comment'>// calls <span class='tcode_in_codeblock'>f(int, int (*)(int))</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.call-10'><div class='marginalizedparent'><a class='marginalized' href='#deduct.call-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8126'>#</a></div><div id='deduct.call-10.sentence-1' class='sentence'>If deduction succeeds for all parameters that contain
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span> that participate in template argument
deduction, and all template arguments are explicitly specified, deduced,
or obtained from default template arguments, remaining parameters are then
compared with the corresponding arguments<a class='hidden_link' href='#deduct.call-10.sentence-1'>.</a></div> <div id='deduct.call-10.sentence-2' class='sentence'>For each remaining parameter
<span class='texttt'>P</span> with a type that was non-dependent before substitution of any
explicitly-specified template arguments, if the corresponding argument
<span class='texttt'>A</span> cannot be implicitly converted to <span class='texttt'>P</span>, deduction fails<a class='hidden_link' href='#deduct.call-10.sentence-2'>.</a></div> <div id='deduct.call-10.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct.call-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.call-10.sentence-3' class='sentence'>Parameters with dependent types in which no <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span>
participate in template argument deduction, and parameters that became
non-dependent due to substitution of explicitly-specified template arguments,
will be checked during overload resolution<a class='hidden_link' href='#deduct.call-10.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='deduct.call-10.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.call-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Z <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>x xx;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>typename</span> Z<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>xx f<span class='parenthesis'>(</span><span class='keyword'>void</span> <span class='operator'>*</span>, T<span class='parenthesis'>)</span>;      <span class='comment'>// #1</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span>, T<span class='parenthesis'>)</span>;                      <span class='comment'>// #2</span>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span> a;
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>1</span>, a<span class='parenthesis'>)</span>;          <span class='comment'>// OK, deduction fails for #1 because there is no conversion from <span class='tcode_in_codeblock'>int</span> to <span class='tcode_in_codeblock'>void*</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div><div id='deduct.funcaddr' class='section'><h4 ><a class='secnum' href='#deduct.funcaddr' style='min-width:118pt'>13.10.2.2</a> Deducing template arguments taking the address of a function template <a class='abbr_ref' href='temp.deduct.funcaddr'>[temp.deduct.funcaddr]</a></h4><div class='para' id='deduct.funcaddr-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.funcaddr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8157'>#</a></div><div id='deduct.funcaddr-1.sentence-1' class='sentence'>Template arguments can be deduced from the type specified when taking
the address of an <a href='over.over'>overloaded function</a><a class='hidden_link' href='#deduct.funcaddr-1.sentence-1'>.</a></div> <div id='deduct.funcaddr-1.sentence-2' class='sentence'>If there is a target,
the function template's function type and the target type
are used as the types of
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>,
and the deduction is done as
described in <a href='#deduct.type'>[temp.deduct.type]</a><a class='hidden_link' href='#deduct.funcaddr-1.sentence-2'>.</a></div> <div id='deduct.funcaddr-1.sentence-3' class='sentence'>Otherwise, deduction is performed with empty sets of types P and A<a class='hidden_link' href='#deduct.funcaddr-1.sentence-3'>.</a></div></div><div class='para' id='deduct.funcaddr-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.funcaddr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8170'>#</a></div><div id='deduct.funcaddr-2.sentence-1' class='sentence'>A <a href='dcl.spec.auto#def:placeholder_type'>placeholder type</a> in the return type of a
function template is a non-deduced context<a class='hidden_link' href='#deduct.funcaddr-2.sentence-1'>.</a></div> <div id='deduct.funcaddr-2.sentence-2' class='sentence'>If template argument
deduction succeeds for such a function, the return type is determined
from instantiation of the function body<a class='hidden_link' href='#deduct.funcaddr-2.sentence-2'>.</a></div></div></div><div id='deduct.conv' class='section'><h4 ><a class='secnum' href='#deduct.conv' style='min-width:118pt'>13.10.2.3</a> Deducing conversion function template arguments <a class='abbr_ref' href='temp.deduct.conv'>[temp.deduct.conv]</a></h4><div class='para' id='deduct.conv-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.conv-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8178'>#</a></div><div id='deduct.conv-1.sentence-1' class='sentence'>Template argument deduction is done by comparing the return type of
the
conversion function template
(call it
<span class='texttt'>P</span>)
with the type that is
required as the result of the conversion (call it
<span class='texttt'>A</span>; see <a href='dcl.init'>[dcl.init]</a>, <a href='over.match.conv'>[over.match.conv]</a>, and <a href='over.match.ref'>[over.match.ref]</a>
for the determination of that type)
as described in <a href='#deduct.type'>[temp.deduct.type]</a><a class='hidden_link' href='#deduct.conv-1.sentence-1'>.</a></div></div><div class='para' id='deduct.conv-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.conv-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8190'>#</a></div><div id='deduct.conv-2.sentence-1' class='sentence'>If <span class='texttt'>P</span> is a reference type, the type referred to by <span class='texttt'>P</span> is used in place
of <span class='texttt'>P</span> for type deduction and for any further references to or transformations of
<span class='texttt'>P</span> in the remainder of this subclause<a class='hidden_link' href='#deduct.conv-2.sentence-1'>.</a></div></div><div class='para' id='deduct.conv-3'><div class='marginalizedparent'><a class='marginalized' href='#deduct.conv-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8195'>#</a></div><div id='deduct.conv-3.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is not a reference type:</div><ul class='itemize'><li id='deduct.conv-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-3.1'>(3.1)</a></div><div id='deduct.conv-3.1.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is an array type, the pointer type produced by the
<a href='conv.array'>array-to-pointer standard conversion</a> is used in place of
<span class='texttt'>P</span>
for type
deduction; otherwise,</div></li><li id='deduct.conv-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-3.2'>(3.2)</a></div><div id='deduct.conv-3.2.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is a function type, the pointer type produced by the
<a href='conv.func'>function-to-pointer standard conversion</a> is used in place of
<span class='texttt'>P</span>
for
type deduction; otherwise,</div></li><li id='deduct.conv-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-3.3'>(3.3)</a></div><div id='deduct.conv-3.3.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>P</span>'s
type are ignored for type deduction<a class='hidden_link' href='#deduct.conv-3.3.sentence-1'>.</a></div></li></ul></div><div class='para' id='deduct.conv-4'><div class='marginalizedparent'><a class='marginalized' href='#deduct.conv-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8225'>#</a></div><div id='deduct.conv-4.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>A</span>'s
type are ignored for type deduction<a class='hidden_link' href='#deduct.conv-4.sentence-1'>.</a></div> <div id='deduct.conv-4.sentence-2' class='sentence'>If
<span class='texttt'>A</span>
is a
reference type, the type referred to by
<span class='texttt'>A</span>
is used for type deduction<a class='hidden_link' href='#deduct.conv-4.sentence-2'>.</a></div></div><div class='para' id='deduct.conv-5'><div class='marginalizedparent'><a class='marginalized' href='#deduct.conv-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8238'>#</a></div><div id='deduct.conv-5.sentence-1' class='sentence'>In general, the deduction process attempts to find template argument
values that will make the deduced
<span class='texttt'>A</span>
identical to
<span class='texttt'>A</span><a class='hidden_link' href='#deduct.conv-5.sentence-1'>.</a></div> <div id='deduct.conv-5.sentence-2' class='sentence'>However, there are four cases that allow a difference:</div><ul class='itemize'><li id='deduct.conv-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-5.1'>(5.1)</a></div><div id='deduct.conv-5.1.sentence-1' class='sentence'>If the original <span class='texttt'>A</span> is a reference type,
<span class='texttt'>A</span> can be more cv-qualified than the deduced <span class='texttt'>A</span>
(i.e., the type referred to by the reference)<a class='hidden_link' href='#deduct.conv-5.1.sentence-1'>.</a></div></li><li id='deduct.conv-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-5.2'>(5.2)</a></div><div id='deduct.conv-5.2.sentence-1' class='sentence'>If the original <span class='texttt'>A</span> is a function pointer type,
<span class='texttt'>A</span> can be “pointer to function”
even if the deduced <span class='texttt'>A</span> is “pointer to <span class='texttt'><span class='keyword'>noexcept</span></span> function”<a class='hidden_link' href='#deduct.conv-5.2.sentence-1'>.</a></div></li><li id='deduct.conv-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-5.3'>(5.3)</a></div><div id='deduct.conv-5.3.sentence-1' class='sentence'>If the original <span class='texttt'>A</span> is a pointer-to-member-function type,
<span class='texttt'>A</span> can be “pointer to member of type function”
even if the deduced <span class='texttt'>A</span> is “pointer to member of type <span class='texttt'><span class='keyword'>noexcept</span></span> function”<a class='hidden_link' href='#deduct.conv-5.3.sentence-1'>.</a></div></li><li id='deduct.conv-5.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.conv-5.4'>(5.4)</a></div><div id='deduct.conv-5.4.sentence-1' class='sentence'>The deduced <span class='texttt'>A</span>
can be another pointer or pointer-to-member type that
can be converted to <span class='texttt'>A</span> via a qualification conversion<a class='hidden_link' href='#deduct.conv-5.4.sentence-1'>.</a></div></li></ul></div><div class='para' id='deduct.conv-6'><div class='marginalizedparent'><a class='marginalized' href='#deduct.conv-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8265'>#</a></div><div id='deduct.conv-6.sentence-1' class='sentence'>These alternatives are considered only if type deduction would
otherwise fail<a class='hidden_link' href='#deduct.conv-6.sentence-1'>.</a></div> <div id='deduct.conv-6.sentence-2' class='sentence'>If they yield more than one possible deduced
<span class='texttt'>A</span>,
the type deduction fails<a class='hidden_link' href='#deduct.conv-6.sentence-2'>.</a></div></div></div><div id='deduct.partial' class='section'><h4 ><a class='secnum' href='#deduct.partial' style='min-width:118pt'>13.10.2.4</a> Deducing template arguments during partial ordering <a class='abbr_ref' href='temp.deduct.partial'>[temp.deduct.partial]</a></h4><div class='para' id='deduct.partial-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8274'>#</a></div><div id='deduct.partial-1.sentence-1' class='sentence'>Template argument deduction is done by comparing certain types associated with
the two function templates being compared<a class='hidden_link' href='#deduct.partial-1.sentence-1'>.</a></div></div><div class='para' id='deduct.partial-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8278'>#</a></div><div id='deduct.partial-2.sentence-1' class='sentence'>Two sets of types are used to determine the partial ordering<a class='hidden_link' href='#deduct.partial-2.sentence-1'>.</a></div> <div id='deduct.partial-2.sentence-2' class='sentence'>For each of
the templates involved there is the original function type and the
transformed function type<a class='hidden_link' href='#deduct.partial-2.sentence-2'>.</a></div> <div id='deduct.partial-2.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct.partial-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.partial-2.sentence-3' class='sentence'>The creation of the transformed type is described in <a href='#func.order'>[temp.func.order]</a><a class='hidden_link' href='#deduct.partial-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='deduct.partial-2.sentence-4' class='sentence'>
The deduction process uses the
transformed type as the argument template and the original type of the
other template as the parameter template<a class='hidden_link' href='#deduct.partial-2.sentence-4'>.</a></div> <div id='deduct.partial-2.sentence-5' class='sentence'>This process is done twice
for each type involved in the partial ordering comparison: once using
the transformed template-1 as the argument template and template-2 as
the parameter template and again using the transformed template-2 as
the argument template and template-1 as the parameter template<a class='hidden_link' href='#deduct.partial-2.sentence-5'>.</a></div></div><div class='para' id='deduct.partial-3'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8293'>#</a></div><div id='deduct.partial-3.sentence-1' class='sentence'>The types used to determine the ordering depend on the context in which
the partial ordering is done:</div><ul class='itemize'><li id='deduct.partial-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-3.1'>(3.1)</a></div><div id='deduct.partial-3.1.sentence-1' class='sentence'>In the context of a function call, the types used are those function parameter types
for which the function call has arguments<a class='hidden_link' href='#deduct.partial-3.1.sentence-1'>.</a><a class='footnotenum' href='#footnote-138' id='footnoteref-138'>138</a></div></li><li id='deduct.partial-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-3.2'>(3.2)</a></div><div id='deduct.partial-3.2.sentence-1' class='sentence'>In the context of a call to a conversion function, the return types of
the conversion function templates are used<a class='hidden_link' href='#deduct.partial-3.2.sentence-1'>.</a></div></li><li id='deduct.partial-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-3.3'>(3.3)</a></div><div id='deduct.partial-3.3.sentence-1' class='sentence'>In <a href='#func.order'>other contexts</a> the function template's function
type is used<a class='hidden_link' href='#deduct.partial-3.3.sentence-1'>.</a></div></li></ul></div><div class='para' id='deduct.partial-4'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8311'>#</a></div><div id='deduct.partial-4.sentence-1' class='sentence'>Each type nominated above from the parameter template and the corresponding type from the
argument template are used as the types of
<span class='texttt'>P</span>
and
<span class='texttt'>A</span><a class='hidden_link' href='#deduct.partial-4.sentence-1'>.</a></div></div><div class='para' id='deduct.partial-5'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8318'>#</a></div><div id='deduct.partial-5.sentence-1' class='sentence'>Before the partial ordering is done, certain transformations are performed
on the types used for partial ordering:</div><ul class='itemize'><li id='deduct.partial-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-5.1'>(5.1)</a></div><div id='deduct.partial-5.1.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is a reference type,
<span class='texttt'>P</span>
is replaced by the type referred to<a class='hidden_link' href='#deduct.partial-5.1.sentence-1'>.</a></div></li><li id='deduct.partial-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-5.2'>(5.2)</a></div><div id='deduct.partial-5.2.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is a reference type,
<span class='texttt'>A</span>
is replaced by the type referred to<a class='hidden_link' href='#deduct.partial-5.2.sentence-1'>.</a></div></li></ul></div><div class='para' id='deduct.partial-6'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8337'>#</a></div><div id='deduct.partial-6.sentence-1' class='sentence'>If both
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>
were reference types (before being replaced with the type referred to
above), determine which of the two types (if any) is more cv-qualified
than the other; otherwise the types are considered to be equally
cv-qualified for partial ordering purposes<a class='hidden_link' href='#deduct.partial-6.sentence-1'>.</a></div> <div id='deduct.partial-6.sentence-2' class='sentence'>The result of this
determination will be used below<a class='hidden_link' href='#deduct.partial-6.sentence-2'>.</a></div></div><div class='para' id='deduct.partial-7'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8348'>#</a></div><div id='deduct.partial-7.sentence-1' class='sentence'>Remove any top-level cv-qualifiers:
<ul class='itemize'><li id='deduct.partial-7.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-7.1'>(7.1)</a></div>If
<span class='texttt'>P</span>
is a cv-qualified type,
<span class='texttt'>P</span>
is replaced by the cv-unqualified version of
<span class='texttt'>P</span>.</li><li id='deduct.partial-7.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-7.2'>(7.2)</a></div>If
<span class='texttt'>A</span>
is a cv-qualified type,
<span class='texttt'>A</span>
is replaced by the cv-unqualified version of
<span class='texttt'>A</span>.</li></ul></div></div><div class='para' id='deduct.partial-8'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8367'>#</a></div><div id='deduct.partial-8.sentence-1' class='sentence'>Using the resulting types
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>,
the deduction is then done as described in <a href='#deduct.type'>[temp.deduct.type]</a><a class='hidden_link' href='#deduct.partial-8.sentence-1'>.</a></div> <div id='deduct.partial-8.sentence-2' class='sentence'>If <span class='texttt'>P</span> is a function parameter pack, the type <span class='texttt'>A</span> of each remaining
parameter type of the argument template is compared with the type <span class='texttt'>P</span> of
the <a class='grammarterm' href='dcl.decl#nt:declarator-id'>declarator-id</a> of the function parameter pack<a class='hidden_link' href='#deduct.partial-8.sentence-2'>.</a></div> <div id='deduct.partial-8.sentence-3' class='sentence'>Each comparison
deduces template arguments for subsequent positions in the template parameter
packs expanded by the function parameter pack<a class='hidden_link' href='#deduct.partial-8.sentence-3'>.</a></div> <div id='deduct.partial-8.sentence-4' class='sentence'>Similarly, if <span class='texttt'>A</span> was transformed from a function parameter pack,
it is compared with each remaining parameter type of the parameter template<a class='hidden_link' href='#deduct.partial-8.sentence-4'>.</a></div> <div id='deduct.partial-8.sentence-5' class='sentence'>If deduction succeeds for a given type,
the type from the argument template is considered to be at least as specialized
as the type from the parameter template<a class='hidden_link' href='#deduct.partial-8.sentence-5'>.</a></div> <div id='deduct.partial-8.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.partial-8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>           <span class='keyword'>void</span> f<span class='parenthesis'>(</span>Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;         <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T1 a1, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;  <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span>      <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T1 a1, T2 a2<span class='parenthesis'>)</span>;         <span class='comment'>// #3</span>

f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                <span class='comment'>// calls #1</span>
f<span class='parenthesis'>(</span><span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span><span class='parenthesis'>)</span>;         <span class='comment'>// calls #2</span>
f<span class='parenthesis'>(</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='parenthesis'>)</span>;            <span class='comment'>// calls #3; non-variadic template #3 is more specialized</span>
                    <span class='comment'>// than the variadic templates #1 and #2</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.partial-9'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8396'>#</a></div><div id='deduct.partial-9.sentence-1' class='sentence'>If, for a given type, the
types are identical after the transformations above
and both <span class='texttt'>P</span> and <span class='texttt'>A</span> were reference types (before being replaced with the
type referred to above):
<ul class='itemize'><li id='deduct.partial-9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-9.1'>(9.1)</a></div>if the type from the argument template was an lvalue reference and the type
from the parameter template was not,
the parameter type is not considered to be
at least as specialized as the argument type; otherwise,</li><li id='deduct.partial-9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.partial-9.2'>(9.2)</a></div>if the type from
the argument template is more cv-qualified than the type from the
parameter template (as described above),
the parameter type is not considered to be
at least as specialized as the argument type<a class='hidden_link' href='#deduct.partial-9.sentence-1'>.</a></li></ul></div></div><div class='para' id='deduct.partial-10'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8413'>#</a></div><div id='deduct.partial-10.sentence-1' class='sentence'>Function template <span class='texttt'>F</span>
is <span class='textit'>at least as specialized as</span>
function template <span class='texttt'>G</span> if,
for each pair of types used to determine the ordering,
the type from <span class='texttt'>F</span>
is at least as specialized as
the type from <span class='texttt'>G</span><a class='hidden_link' href='#deduct.partial-10.sentence-1'>.</a></div> <div id='deduct.partial-10.sentence-2' class='sentence'><span class='texttt'>F</span>
is <a class='hidden_link' href='#def:more_specialized,function_template' id='def:more_specialized,function_template'><i >more specialized than</i></a>
<span class='texttt'>G</span> if
<span class='texttt'>F</span>
is at least as specialized as
<span class='texttt'>G</span> and
<span class='texttt'>G</span>
is not at least as specialized as
<span class='texttt'>F</span><a class='hidden_link' href='#deduct.partial-10.sentence-2'>.</a></div></div><div class='para' id='deduct.partial-11'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8432'>#</a></div><div id='deduct.partial-11.sentence-1' class='sentence'>If, after considering the above, function template <span class='texttt'>F</span>
is at least as specialized as function template <span class='texttt'>G</span> and vice-versa, and
if <span class='texttt'>G</span> has a trailing function parameter pack
for which <span class='texttt'>F</span> does not have a corresponding parameter, and
if <span class='texttt'>F</span> does not have a trailing function parameter pack,
then <span class='texttt'>F</span> is more specialized than <span class='texttt'>G</span><a class='hidden_link' href='#deduct.partial-11.sentence-1'>.</a></div></div><div class='para' id='deduct.partial-12'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8440'>#</a></div><div id='deduct.partial-12.sentence-1' class='sentence'>In most cases,
deduction fails if not all template parameters have values,
but for partial ordering purposes a template
parameter may remain without a value provided it is not used in the
types being used for partial ordering<a class='hidden_link' href='#deduct.partial-12.sentence-1'>.</a></div> <div id='deduct.partial-12.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct.partial-12.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.partial-12.sentence-2' class='sentence'>A template parameter used in a non-deduced context is considered used<a class='hidden_link' href='#deduct.partial-12.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='deduct.partial-12.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.partial-12.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;            <span class='comment'>// #1</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> T f<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span>;     <span class='comment'>// #2</span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                            <span class='comment'>// calls #1</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.partial-13'><div class='marginalizedparent'><a class='marginalized' href='#deduct.partial-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8459'>#</a></div><div id='deduct.partial-13.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct.partial-13.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.partial-13.sentence-1' class='sentence'>Partial ordering of function templates containing
template parameter packs is independent of the number of deduced arguments
for those template parameter packs<a class='hidden_link' href='#deduct.partial-13.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='deduct.partial-13.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.partial-13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Tuple <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span>Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;                 <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span>T1, Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;   <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span>T1, Types<span class='operator'>&amp;</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;  <span class='comment'>// #3</span>

g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;                   <span class='comment'>// calls #1</span>
g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>float</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;         <span class='comment'>// calls #2</span>
g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>float</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;        <span class='comment'>// calls #3</span>
g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;                <span class='comment'>// calls #3</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-138'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-138'>138)</a></div><div id='footnote-138.sentence-1' class='sentence'>Default arguments
are not considered to be arguments in this context; they only become arguments
after a function has been selected<a class='hidden_link' href='#footnote-138.sentence-1'>.</a></div> <a href='#footnoteref-138'>⮥</a></div></div><div id='deduct.type' class='section'><h4 ><a class='secnum' href='#deduct.type' style='min-width:118pt'>13.10.2.5</a> Deducing template arguments from a type <a class='abbr_ref' href='temp.deduct.type'>[temp.deduct.type]</a></h4><div class='para' id='deduct.type-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8481'>#</a></div><div id='deduct.type-1.sentence-1' class='sentence'>Template arguments can be deduced in several different contexts, but
in each case a type that is specified in terms of template parameters
(call it
<span class='texttt'>P</span>)
is compared with an actual type (call it
<span class='texttt'>A</span>),
and an attempt is made to find template argument values (a type for a type
parameter, a value for a non-type parameter, or a template for a
template parameter) that will make
<span class='texttt'>P</span>,
after substitution of the deduced values (call it the deduced
<span class='texttt'>A</span>),
compatible with
<span class='texttt'>A</span><a class='hidden_link' href='#deduct.type-1.sentence-1'>.</a></div></div><div class='para' id='deduct.type-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8497'>#</a></div><div id='deduct.type-2.sentence-1' class='sentence'>In some cases, the deduction is done using a single set of types
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>,
in other cases, there will be a set of corresponding types
<span class='texttt'>P</span>
and
<span class='texttt'>A</span><a class='hidden_link' href='#deduct.type-2.sentence-1'>.</a></div> <div id='deduct.type-2.sentence-2' class='sentence'>Type deduction is done
independently for each
<span class='texttt'>P<span class='operator'>/</span>A</span>
pair, and the deduced template
argument values are then combined<a class='hidden_link' href='#deduct.type-2.sentence-2'>.</a></div> <div id='deduct.type-2.sentence-3' class='sentence'>If type deduction cannot be done
for any
<span class='texttt'>P<span class='operator'>/</span>A</span>
pair, or if for any pair the deduction leads to more than
one possible set of deduced values, or if different pairs yield
different deduced values, or if any template argument remains neither
deduced nor explicitly specified, template argument deduction fails<a class='hidden_link' href='#deduct.type-2.sentence-3'>.</a></div> <div id='deduct.type-2.sentence-4' class='sentence'>The type of a type parameter
is only deduced from an array bound
if it is not otherwise deduced<a class='hidden_link' href='#deduct.type-2.sentence-4'>.</a></div></div><div class='para' id='deduct.type-3'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8522'>#</a></div><div id='deduct.type-3.sentence-1' class='sentence'>A given type
<span class='texttt'>P</span>
can be composed from a number of other
types, templates, and non-type values:</div><ul class='itemize'><li id='deduct.type-3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-3.1'>(3.1)</a></div><div id='deduct.type-3.1.sentence-1' class='sentence'>A function type includes the types of each of the function parameters
and the return type<a class='hidden_link' href='#deduct.type-3.1.sentence-1'>.</a></div></li><li id='deduct.type-3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-3.2'>(3.2)</a></div><div id='deduct.type-3.2.sentence-1' class='sentence'>A pointer-to-member type includes the type of the class object pointed to
and the type of the member pointed to<a class='hidden_link' href='#deduct.type-3.2.sentence-1'>.</a></div></li><li id='deduct.type-3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-3.3'>(3.3)</a></div><div id='deduct.type-3.3.sentence-1' class='sentence'>A type that is a specialization of a class template (e.g.,
<span class='texttt'>A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span></span>)
includes the types, templates, and non-type values referenced by the
template argument list of the specialization<a class='hidden_link' href='#deduct.type-3.3.sentence-1'>.</a></div></li><li id='deduct.type-3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-3.4'>(3.4)</a></div><div id='deduct.type-3.4.sentence-1' class='sentence'>An array type includes the array element type and the value of the
array bound<a class='hidden_link' href='#deduct.type-3.4.sentence-1'>.</a></div></li></ul></div><div class='para' id='deduct.type-4'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8545'>#</a></div><div id='deduct.type-4.sentence-1' class='sentence'>In most cases, the types, templates, and non-type values that are used
to compose
<span class='texttt'>P</span>
participate in template argument deduction<a class='hidden_link' href='#deduct.type-4.sentence-1'>.</a></div> <div id='deduct.type-4.sentence-2' class='sentence'>That is,
they may be used to determine the value of a template argument, and
template argument deduction fails if
the value so determined is not consistent with the values determined
elsewhere<a class='hidden_link' href='#deduct.type-4.sentence-2'>.</a></div> <div id='deduct.type-4.sentence-3' class='sentence'>In certain contexts, however, the value does not
participate in type deduction, but instead uses the values of template
arguments that were either deduced elsewhere or explicitly specified<a class='hidden_link' href='#deduct.type-4.sentence-3'>.</a></div> <div id='deduct.type-4.sentence-4' class='sentence'>If a template parameter is used only in non-deduced contexts and is not
explicitly specified, template argument deduction fails<a class='hidden_link' href='#deduct.type-4.sentence-4'>.</a></div> <div id='deduct.type-4.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct.type-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.type-4.sentence-5' class='sentence'>Under <a href='#deduct.call'>[temp.deduct.call]</a>,
if <span class='texttt'>P</span> contains no <a class='grammarterm' href='#nt:template-parameter'>template-parameter</a><span class='textit'>s</span> that appear
in deduced contexts, no deduction is done, so <span class='texttt'>P</span> and <span class='texttt'>A</span>
need not have the same form<a class='hidden_link' href='#deduct.type-4.sentence-5'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-5'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8567'>#</a></div><div id='deduct.type-5.sentence-1' class='sentence'>The non-deduced contexts are:</div><div id='deduct.type-5.sentence-2' class='sentence'><span class='indexparent'><a class='index' id=':context,non-deduced'></a></span><ul class='itemize'><li id='deduct.type-5.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.1'>(5.1)</a></div>The
<a class='grammarterm' href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a>
of a type that was specified using a
<a class='grammarterm' href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a>.</li><li id='deduct.type-5.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.2'>(5.2)</a></div>The <a class='grammarterm' href='expr.comma#nt:expression'>expression</a> of a <a class='grammarterm' href='dcl.type.decltype#nt:decltype-specifier'>decltype-specifier</a>.</li><li id='deduct.type-5.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.3'>(5.3)</a></div>A non-type template argument or an array bound in which a subexpression
references a template parameter.</li><li id='deduct.type-5.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.4'>(5.4)</a></div>A template parameter used in the parameter type of a function parameter that
has a default argument that is being used in the call for which argument
deduction is being done.</li><li id='deduct.type-5.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.5'>(5.5)</a></div>A function parameter for which the associated argument is an
overload set (<a href='over.over'>[over.over]</a>), and one or more of the following apply:
<ul class='itemize'><li id='deduct.type-5.5.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#deduct.type-5.5.1'>(5.5.1)</a></div>more than one function matches the function parameter type (resulting in
an ambiguous deduction), or</li><li id='deduct.type-5.5.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#deduct.type-5.5.2'>(5.5.2)</a></div>no function matches the function parameter type, or</li><li id='deduct.type-5.5.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#deduct.type-5.5.3'>(5.5.3)</a></div>the overload set supplied as an argument contains one or more function templates.</li></ul></li><li id='deduct.type-5.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.6'>(5.6)</a></div>A function parameter for which the associated argument is an initializer
list (<a href='dcl.init.list'>[dcl.init.list]</a>) but the parameter does not have
a type for which deduction from an initializer list is specified (<a href='#deduct.call'>[temp.deduct.call]</a>). <div id='deduct.type-5.6.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-5.6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
g<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                 <span class='comment'>// error: no argument deduced for <span class='tcode_in_codeblock'>T</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </li><li id='deduct.type-5.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-5.7'>(5.7)</a></div>A function parameter pack that does not occur at the end of the
<a class='grammarterm' href='dcl.fct#nt:parameter-declaration-list'>parameter-declaration-list</a>.</li></ul></div></div><div class='para' id='deduct.type-6'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8611'>#</a></div><div id='deduct.type-6.sentence-1' class='sentence'>When a type name is specified in a way that includes a non-deduced
context, all of the types that comprise that type name are also
non-deduced<a class='hidden_link' href='#deduct.type-6.sentence-1'>.</a></div> <div id='deduct.type-6.sentence-2' class='sentence'>However, a compound type can include both deduced and non-deduced types<a class='hidden_link' href='#deduct.type-6.sentence-2'>.</a></div> <div id='deduct.type-6.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='deduct.type-6.sentence-3' class='sentence'>If a type is specified as
<span class='texttt'>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>B<span class='anglebracket'>&lt;</span>T2<span class='anglebracket'>&gt;</span></span>,
both
<span class='texttt'>T</span>
and
<span class='texttt'>T2</span>
are non-deduced<a class='hidden_link' href='#deduct.type-6.sentence-3'>.</a></div> <div id='deduct.type-6.sentence-4' class='sentence'>Likewise, if a type is specified as
<span class='texttt'>A<span class='anglebracket'>&lt;</span>I<span class='operator'>+</span>J<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>X<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>,
<span class='texttt'>I</span>,
<span class='texttt'>J</span>,
and
<span class='texttt'>T</span>
are non-deduced<a class='hidden_link' href='#deduct.type-6.sentence-4'>.</a></div> <div id='deduct.type-6.sentence-5' class='sentence'>If a type is specified as
<span class='texttt'><span class='keyword'>void</span></span>
<span class='texttt'>f<span class='parenthesis'>(</span><span class='keyword'>typename</span></span>
<span class='texttt'>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>B,</span>
<span class='texttt'>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span></span>,
the
<span class='texttt'>T</span>
in
<span class='texttt'>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>B</span>
is non-deduced but
the
<span class='texttt'>T</span>
in
<span class='texttt'>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
is deduced<a class='hidden_link' href='#deduct.type-6.sentence-5'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-7'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8648'>#</a></div><div id='deduct.type-7.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='deduct.type-7.sentence-1' class='sentence'>Here is an example in which different parameter/argument pairs produce
inconsistent template argument deductions:</div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T x, T y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> A <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span>A a, B b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>a,b<span class='parenthesis'>)</span>;           <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> could be <span class='tcode_in_codeblock'>A</span> or <span class='tcode_in_codeblock'>B</span></span>
  f<span class='parenthesis'>(</span>b,a<span class='parenthesis'>)</span>;           <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> could be <span class='tcode_in_codeblock'>A</span> or <span class='tcode_in_codeblock'>B</span></span>
  f<span class='parenthesis'>(</span>a,a<span class='parenthesis'>)</span>;           <span class='comment'>// OK: <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>A</span></span>
  f<span class='parenthesis'>(</span>b,b<span class='parenthesis'>)</span>;           <span class='comment'>// OK: <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>B</span></span>
<span class='curlybracket'>}</span>
</pre><div id='deduct.type-7.sentence-2' class='sentence'>Here is an example where two template arguments are deduced from a
single function parameter/argument pair<a class='hidden_link' href='#deduct.type-7.sentence-2'>.</a></div> <div id='deduct.type-7.sentence-3' class='sentence'>This can lead to conflicts
that cause type deduction to fail:</div><pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>  T <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span> T, U, U <span class='parenthesis'>)</span>  <span class='parenthesis'>)</span>;

<span class='keyword'>int</span> g1<span class='parenthesis'>(</span> <span class='keyword'>int</span>, <span class='keyword'>float</span>, <span class='keyword'>float</span><span class='parenthesis'>)</span>;
<span class='keyword'>char</span> g2<span class='parenthesis'>(</span> <span class='keyword'>int</span>, <span class='keyword'>float</span>, <span class='keyword'>float</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> g3<span class='parenthesis'>(</span> <span class='keyword'>int</span>, <span class='keyword'>char</span>, <span class='keyword'>float</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> r<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>g1<span class='parenthesis'>)</span>;            <span class='comment'>// OK: <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>int</span> and <span class='tcode_in_codeblock'>U</span> is <span class='tcode_in_codeblock'>float</span></span>
  f<span class='parenthesis'>(</span>g2<span class='parenthesis'>)</span>;            <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> could be <span class='tcode_in_codeblock'>char</span> or <span class='tcode_in_codeblock'>int</span></span>
  f<span class='parenthesis'>(</span>g3<span class='parenthesis'>)</span>;            <span class='comment'>// error: <span class='tcode_in_codeblock'>U</span> could be <span class='tcode_in_codeblock'>char</span> or <span class='tcode_in_codeblock'>float</span></span>
<span class='curlybracket'>}</span>
</pre><div id='deduct.type-7.sentence-4' class='sentence'>Here is an example where a qualification conversion applies between the
argument type on the function call and the deduced template argument type:</div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> T<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>int</span><span class='operator'>*</span> p;
<span class='keyword'>void</span> s<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>f(const int*)</span></span>
<span class='curlybracket'>}</span>
</pre><div id='deduct.type-7.sentence-5' class='sentence'>Here is an example where the template argument is used to instantiate
a derived class type of the corresponding function parameter type:</div><pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> D <span class='operator'>:</span> <span class='keyword'>public</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D2 <span class='operator'>:</span> <span class='keyword'>public</span> B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>void</span> t<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  D<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> d;
  D2     d2;
  f<span class='parenthesis'>(</span>d<span class='parenthesis'>)</span>;             <span class='comment'>// calls <span class='tcode_in_codeblock'>f(B&lt;int&gt;&amp;)</span></span>
  f<span class='parenthesis'>(</span>d2<span class='parenthesis'>)</span>;            <span class='comment'>// calls <span class='tcode_in_codeblock'>f(B&lt;int&gt;&amp;)</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-8'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8712'>#</a></div><div id='deduct.type-8.sentence-1' class='sentence'>A template type argument
<span class='texttt'>T</span>,
a template template argument
<span class='texttt'>TT</span>
or a template non-type argument
<span class='texttt'>i</span>
can be deduced if
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>
have one of the following forms:
<pre class='codeblock'>
T
<span class='mathit'>cv</span> T
T<span class='operator'>*</span>
T<span class='operator'>&amp;</span>
T<span class='operator'>&amp;</span><span class='operator'>&amp;</span>
T<span class='squarebracket'>[</span><span class='textit'>integer-constant</span><span class='squarebracket'>]</span>
<span class='grammarterm'>template-name</span><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>  <span class='textrm'>(where <span class='tcode_in_codeblock'><span class='grammarterm'>template-name</span></span> refers to a class template)</span>
<span class='textit'>type</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
T<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
T <span class='textit'>type</span><span class='operator'>::</span><span class='operator'>*</span>
<span class='textit'>type</span> T<span class='operator'>::</span><span class='operator'>*</span>
T T<span class='operator'>::</span><span class='operator'>*</span>
T <span class='parenthesis'>(</span><span class='textit'>type</span><span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>
<span class='textit'>type</span> <span class='parenthesis'>(</span>T<span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>
<span class='textit'>type</span> <span class='parenthesis'>(</span><span class='textit'>type</span><span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
<span class='textit'>type</span> <span class='parenthesis'>(</span>T<span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
T <span class='parenthesis'>(</span><span class='textit'>type</span><span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
T <span class='parenthesis'>(</span>T<span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>
T <span class='parenthesis'>(</span>T<span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
<span class='textit'>type</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span>
<span class='grammarterm'>template-name</span><span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span>  <span class='textrm'>(where <span class='tcode_in_codeblock'><span class='grammarterm'>template-name</span></span> refers to a class template)</span>
TT<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>
TT<span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span>
TT<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span>
</pre>
where
<span class='texttt'><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span>
represents
a parameter-type-list (<a href='dcl.fct'>[dcl.fct]</a>)
where at least one parameter type contains a
<span class='texttt'>T</span>,
and
<span class='texttt'><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
represents
a parameter-type-list
where no parameter type contains a
<span class='texttt'>T</span><a class='hidden_link' href='#deduct.type-8.sentence-1'>.</a></div> <div id='deduct.type-8.sentence-2' class='sentence'>Similarly,
<span class='texttt'><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
represents template argument lists where at least one argument contains a
<span class='texttt'>T</span>,
<span class='texttt'><span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span></span>
represents template argument lists where at least one argument contains an
<span class='texttt'>i</span>
and
<span class='texttt'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span>
represents template argument lists where no argument contains a
<span class='texttt'>T</span>
or an
<span class='texttt'>i</span><a class='hidden_link' href='#deduct.type-8.sentence-2'>.</a></div></div><div class='para' id='deduct.type-9'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8777'>#</a></div><div id='deduct.type-9.sentence-1' class='sentence'>If <span class='texttt'>P</span> has a form that contains <span class='texttt'><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
or <span class='texttt'><span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span></span>, then each argument <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> of the
respective template argument list of <span class='texttt'>P</span> is compared with the
corresponding argument <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> of the corresponding
template argument list of <span class='texttt'>A</span><a class='hidden_link' href='#deduct.type-9.sentence-1'>.</a></div> <div id='deduct.type-9.sentence-2' class='sentence'>If the template argument list
of <span class='texttt'>P</span> contains a pack expansion that is not the last
template argument, the entire template argument list is a non-deduced
context<a class='hidden_link' href='#deduct.type-9.sentence-2'>.</a></div> <div id='deduct.type-9.sentence-3' class='sentence'>If <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is a pack expansion, then the pattern
of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is compared with each remaining argument in the
template argument list of <span class='texttt'>A</span><a class='hidden_link' href='#deduct.type-9.sentence-3'>.</a></div> <div id='deduct.type-9.sentence-4' class='sentence'>Each comparison deduces
template arguments for subsequent positions in the template parameter
packs expanded by <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span><a class='hidden_link' href='#deduct.type-9.sentence-4'>.</a></div> <div id='deduct.type-9.sentence-5' class='sentence'>During <a href='#deduct.partial'>partial ordering</a>, if <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> was
originally a pack expansion:
<ul class='itemize'><li id='deduct.type-9.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-9.1'>(9.1)</a></div>if <span class='texttt'>P</span> does not contain a template argument corresponding to
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> then <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is ignored;</li><li id='deduct.type-9.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-9.2'>(9.2)</a></div>otherwise, if <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is not a pack expansion, template argument
deduction fails<a class='hidden_link' href='#deduct.type-9.sentence-5'>.</a></li></ul></div> <div id='deduct.type-9.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Z<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> S;                                 <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Z<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> S<span class='anglebracket'>&lt;</span>T1, <span class='keyword'>const</span> Z<span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;            <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span>   <span class='keyword'>class</span> S<span class='anglebracket'>&lt;</span>T1, <span class='keyword'>const</span> T2<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;              <span class='comment'>// #3</span>
S<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span> s;           <span class='comment'>// both #2 and #3 match; #3 is more specialized</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> U<span class='anglebracket'>&gt;</span>            <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                  <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>T1, T2<span class='operator'>*</span>, U<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;   <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span>             <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>T1, T2<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;          <span class='comment'>// #3</span>
<span class='keyword'>template</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span>;   <span class='comment'>// selects #2</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-10'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8813'>#</a></div><div id='deduct.type-10.sentence-1' class='sentence'>Similarly, if <span class='texttt'>P</span> has a form that contains
<span class='texttt'><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span>, then each parameter type <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>
of the respective parameter-type-list (<a href='dcl.fct'>[dcl.fct]</a>) of
<span class='texttt'>P</span> is compared with the corresponding parameter type
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> of the corresponding parameter-type-list
of <span class='texttt'>A</span><a class='hidden_link' href='#deduct.type-10.sentence-1'>.</a></div> <div id='deduct.type-10.sentence-2' class='sentence'>If <span class='texttt'>P</span> and <span class='texttt'>A</span> are function types that originated from deduction when
taking the address of a function template (<a href='#deduct.funcaddr'>[temp.deduct.funcaddr]</a>) or when
deducing template arguments from a function declaration (<a href='#deduct.decl'>[temp.deduct.decl]</a>)
and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> are parameters of the top-level
parameter-type-list of <span class='texttt'>P</span> and <span class='texttt'>A</span>, respectively,
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is adjusted if it is a forwarding reference (<a href='#deduct.call'>[temp.deduct.call]</a>)
and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is an lvalue reference, in which case the type of
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is changed to be the template parameter type (i.e., <span class='texttt'>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span> is
changed to simply <span class='texttt'>T</span>)<a class='hidden_link' href='#deduct.type-10.sentence-2'>.</a></div> <div id='deduct.type-10.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct.type-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.type-10.sentence-3' class='sentence'>As a result, when <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is <span class='texttt'>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>
and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is <span class='texttt'>X<span class='operator'>&amp;</span></span>, the adjusted <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> will be <span class='texttt'>T</span>,
causing <span class='texttt'>T</span> to be deduced as <span class='texttt'>X<span class='operator'>&amp;</span></span><a class='hidden_link' href='#deduct.type-10.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='deduct.type-10.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-10.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>    <span class='comment'>// #1</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>   <span class='comment'>// #2</span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>;                         <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&amp;&gt;(int&amp;)</span>, i.e., #1</span>
  f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                         <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(int&amp;&amp;)</span>, i.e., #2</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> <div id='deduct.type-10.sentence-4' class='sentence'>If the <a class='grammarterm' href='dcl.fct#nt:parameter-declaration'>parameter-declaration</a>
corresponding to <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is a function parameter pack,
then the type of its <a class='grammarterm' href='dcl.decl#nt:declarator-id'>declarator-id</a> is compared with
each remaining parameter type in the parameter-type-list
of <span class='texttt'>A</span><a class='hidden_link' href='#deduct.type-10.sentence-4'>.</a></div> <div id='deduct.type-10.sentence-5' class='sentence'>Each comparison deduces template arguments for
subsequent positions in the template parameter packs expanded by the
function parameter pack<a class='hidden_link' href='#deduct.type-10.sentence-5'>.</a></div> <div id='deduct.type-10.sentence-6' class='sentence'>During <a href='#deduct.partial'>partial ordering</a>, if <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> was
originally a function parameter pack:
<ul class='itemize'><li id='deduct.type-10.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-10.1'>(10.1)</a></div>if <span class='texttt'>P</span> does not contain a function parameter type corresponding to
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> then <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is ignored;</li><li id='deduct.type-10.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#deduct.type-10.2'>(10.2)</a></div>otherwise, if <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is not a function parameter pack, template
argument deduction fails<a class='hidden_link' href='#deduct.type-10.sentence-6'>.</a></li></ul></div> <div id='deduct.type-10.example-2' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-10.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>*</span>, U<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>  <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>             <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>         <span class='comment'>// #2</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span>;                              <span class='comment'>// selects #1</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-11'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8870'>#</a></div><div id='deduct.type-11.sentence-1' class='sentence'>These forms can be used in the same way as
<span class='texttt'>T</span>
is for further composition of types<a class='hidden_link' href='#deduct.type-11.sentence-1'>.</a></div> <div id='deduct.type-11.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-11.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='deduct.type-11.sentence-2' class='sentence'><pre class='codeblock'>
X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>
</pre>
is of the form
<pre class='codeblock'>
<span class='grammarterm'>template-name</span><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='textit'>type</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='parenthesis'>)</span>
</pre>
which is a variant of
<pre class='codeblock'>
<span class='textit'>type</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
</pre>
where type is
<span class='texttt'>X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span></span>
and
<span class='texttt'>T</span>
is
<span class='texttt'><span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#deduct.type-11.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-12'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8894'>#</a></div><div id='deduct.type-12.sentence-1' class='sentence'>Template arguments cannot be deduced from function arguments involving
constructs other than the ones specified above<a class='hidden_link' href='#deduct.type-12.sentence-1'>.</a></div></div><div class='para' id='deduct.type-13'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8898'>#</a></div><div id='deduct.type-13.sentence-1' class='sentence'>When the value of the argument
corresponding to a non-type template parameter <span class='texttt'>P</span>
that is declared with a dependent type
is deduced from an expression,
the template parameters in the type of <span class='texttt'>P</span>
are deduced from the type of the value<a class='hidden_link' href='#deduct.type-13.sentence-1'>.</a></div> <div id='deduct.type-13.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>long</span> n<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, T n<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&lt;</span>n<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> Q <span class='operator'>=</span> T;
<span class='curlybracket'>}</span>;

<span class='keyword'>using</span> R <span class='operator'>=</span> <span class='keyword'>long</span>;
<span class='keyword'>using</span> R <span class='operator'>=</span> C<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&lt;</span><span class='literal'>2</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>Q;           <span class='comment'>// OK; <span class='tcode_in_codeblock'>T</span> was deduced as <span class='tcode_in_codeblock'>long</span> from the</span>
                                <span class='comment'>// template argument value in the type <span class='tcode_in_codeblock'>A&lt;2&gt;</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-14'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8920'>#</a></div><div id='deduct.type-14.sentence-1' class='sentence'>The type of <span class='texttt'>N</span> in the type <span class='texttt'>T<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> is <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_&shy;t</span><a class='hidden_link' href='#deduct.type-14.sentence-1'>.</a></div> <div id='deduct.type-14.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, T n<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='squarebracket'>[</span>n<span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> Q <span class='operator'>=</span> T;
<span class='curlybracket'>}</span>;

<span class='keyword'>using</span> V <span class='operator'>=</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span> <span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='keyword'>using</span> V <span class='operator'>=</span> S<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='squarebracket'>[</span><span class='literal'>42</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>Q;        <span class='comment'>// OK; <span class='tcode_in_codeblock'>T</span> was deduced as <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;size_&shy;t</span> from the type <span class='tcode_in_codeblock'>int[42]</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-15'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8934'>#</a></div><div id='deduct.type-15.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-15.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, T i<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span>a<span class='parenthesis'>)</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> v<span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;                         <span class='comment'>// OK: <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;size_&shy;t</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-16'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8945'>#</a></div><div id='deduct.type-16.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct.type-16.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.type-16.sentence-1' class='sentence'>Except for reference and pointer types, a major array bound is not part of a
function parameter type and cannot be deduced from an argument:
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f1<span class='parenthesis'>(</span><span class='keyword'>int</span> a<span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f2<span class='parenthesis'>(</span><span class='keyword'>int</span> a<span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>20</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f3<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span>a<span class='parenthesis'>)</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>20</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> v<span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>20</span><span class='squarebracket'>]</span>;
  f1<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;                        <span class='comment'>// OK: <span class='tcode_in_codeblock'>i</span> deduced as <span class='tcode_in_codeblock'>20</span></span>
  f1<span class='anglebracket'>&lt;</span><span class='literal'>20</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;                    <span class='comment'>// OK</span>
  f2<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;                        <span class='comment'>// error: cannot deduce template-argument <span class='tcode_in_codeblock'>i</span></span>
  f2<span class='anglebracket'>&lt;</span><span class='literal'>10</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;                    <span class='comment'>// OK</span>
  f3<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;                        <span class='comment'>// OK: <span class='tcode_in_codeblock'>i</span> deduced as <span class='tcode_in_codeblock'>10</span></span>
<span class='curlybracket'>}</span>
</pre></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-17'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8965'>#</a></div><div id='deduct.type-17.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct.type-17.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.type-17.sentence-1' class='sentence'>If, in the declaration of a function template with a non-type
template parameter, the non-type template parameter
is used in a subexpression in the function parameter list,
the expression is a non-deduced context as specified above<a class='hidden_link' href='#deduct.type-17.sentence-1'>.</a></div> <div id='deduct.type-17.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-17.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>i<span class='operator'>+</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span>, A<span class='anglebracket'>&lt;</span>i<span class='operator'>+</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> k<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span> a1;
  A<span class='anglebracket'>&lt;</span><span class='literal'>2</span><span class='anglebracket'>&gt;</span> a2;
  g<span class='parenthesis'>(</span>a1<span class='parenthesis'>)</span>;                        <span class='comment'>// error: deduction fails for expression <span class='tcode_in_codeblock'>i+1</span></span>
  g<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>a1<span class='parenthesis'>)</span>;                     <span class='comment'>// OK</span>
  f<span class='parenthesis'>(</span>a1, a2<span class='parenthesis'>)</span>;                    <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-18'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L8987'>#</a></div><div id='deduct.type-18.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct.type-18.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.type-18.sentence-1' class='sentence'>Template parameters do not participate in template argument deduction if
they are used only in non-deduced contexts<a class='hidden_link' href='#deduct.type-18.sentence-1'>.</a></div> <div id='deduct.type-18.sentence-2' class='sentence'>For example,</div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i, <span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
T deduce<span class='parenthesis'>(</span><span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>X x,    <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is not deduced here</span>
         T t,                   <span class='comment'>// but <span class='tcode_in_codeblock'>T</span> is deduced here</span>
         <span class='keyword'>typename</span> B<span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span><span class='operator'>::</span>Y y<span class='parenthesis'>)</span>;   <span class='comment'>// <span class='tcode_in_codeblock'>i</span> is not deduced here</span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> a;
B<span class='anglebracket'>&lt;</span><span class='literal'>77</span><span class='anglebracket'>&gt;</span>  b;

<span class='keyword'>int</span>    x <span class='operator'>=</span> deduce<span class='anglebracket'>&lt;</span><span class='literal'>77</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>a<span class='operator'>.</span>xm, <span class='literal'>62</span>, b<span class='operator'>.</span>ym<span class='parenthesis'>)</span>;
<span class='comment'>// <span class='tcode_in_codeblock'>T</span> deduced as <span class='tcode_in_codeblock'>int</span>; <span class='tcode_in_codeblock'>a.xm</span> must be convertible to <span class='tcode_in_codeblock'>A&lt;int&gt;&#x200b;::&#x200b;X</span></span>
<span class='comment'>// <span class='tcode_in_codeblock'>i</span> is explicitly specified to be <span class='tcode_in_codeblock'>77</span>; <span class='tcode_in_codeblock'>b.ym</span> must be convertible to <span class='tcode_in_codeblock'>B&lt;77&gt;&#x200b;::&#x200b;Y</span></span>
</pre> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-19'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L9007'>#</a></div><div id='deduct.type-19.sentence-1' class='sentence'>If <span class='texttt'>P</span> has a form that contains <span class='texttt'><span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span></span>, and
if the type of <span class='texttt'>i</span> differs from the type
of the corresponding template parameter
of the template named by the enclosing <a class='grammarterm' href='#nt:simple-template-id'>simple-template-id</a>,
deduction fails<a class='hidden_link' href='#deduct.type-19.sentence-1'>.</a></div> <div id='deduct.type-19.sentence-2' class='sentence'>If <span class='texttt'>P</span> has a form that contains <span class='texttt'><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span></span>, and if the type of
<span class='texttt'>i</span> is not an integral type, deduction fails<a class='hidden_link' href='#deduct.type-19.sentence-2'>.</a><a class='footnotenum' href='#footnote-139' id='footnoteref-139'>139</a></div> <div id='deduct.type-19.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-19.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>short</span> s<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>s<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> k1<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span> a;
  f<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>;             <span class='comment'>// error: deduction fails for conversion from <span class='tcode_in_codeblock'>int</span> to <span class='tcode_in_codeblock'>short</span></span>
  f<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>;          <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>short</span> cs<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>short</span> s<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span>s<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> k2<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  B<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span> b;
  g<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>;             <span class='comment'>// OK: cv-qualifiers are ignored on template parameter types</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-20'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-20'>20</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L9042'>#</a></div><div id='deduct.type-20.sentence-1' class='sentence'>A
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
can be deduced from a function, pointer to function, or
pointer-to-member-function type<a class='hidden_link' href='#deduct.type-20.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='deduct.type-20.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-20.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T,<span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> foo<span class='parenthesis'>(</span>T,<span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>char</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span>,<span class='keyword'>int</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>char</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> m<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>g<span class='parenthesis'>)</span>;            <span class='comment'>// error: ambiguous</span>
  f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>h<span class='parenthesis'>)</span>;            <span class='comment'>// OK: void <span class='tcode_in_codeblock'>h(char,int)</span> is a unique match</span>
  f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>foo<span class='parenthesis'>)</span>;          <span class='comment'>// error: type deduction fails because <span class='tcode_in_codeblock'>foo</span> is a template</span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-21'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-21'>21</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L9065'>#</a></div><div id='deduct.type-21.sentence-1' class='sentence'>A template
<a class='grammarterm' href='#nt:type-parameter'>type-parameter</a>
cannot be deduced from the type of a function default argument<a class='hidden_link' href='#deduct.type-21.sentence-1'>.</a></div> <div id='deduct.type-21.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-21.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T <span class='operator'>=</span> <span class='literal'>5</span>, T <span class='operator'>=</span> <span class='literal'>7</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;             <span class='comment'>// OK: call <span class='tcode_in_codeblock'>f&lt;int&gt;(1,7)</span></span>
  f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// error: cannot deduce <span class='tcode_in_codeblock'>T</span></span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;         <span class='comment'>// OK: call <span class='tcode_in_codeblock'>f&lt;int&gt;(5,7)</span></span>
<span class='curlybracket'>}</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-22'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-22'>22</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L9080'>#</a></div><div id='deduct.type-22.sentence-1' class='sentence'>The
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
corresponding to a template
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
is deduced from the type of the
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
of a class template specialization used in the argument list of a function call<a class='hidden_link' href='#deduct.type-22.sentence-1'>.</a></div> <div id='deduct.type-22.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-22.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
A<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span> ab;
f<span class='parenthesis'>(</span>ab<span class='parenthesis'>)</span>;              <span class='comment'>// calls <span class='tcode_in_codeblock'>f(A&lt;B&gt;)</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='deduct.type-23'><div class='marginalizedparent'><a class='marginalized' href='#deduct.type-23'>23</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L9098'>#</a></div><div id='deduct.type-23.note-1' class='note'>[&nbsp;<a class='note_link' href='#deduct.type-23.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='deduct.type-23.sentence-1' class='sentence'>Template argument deduction involving parameter
packs (<a href='#variadic'>[temp.variadic]</a>) can deduce zero or more arguments for
each parameter pack<a class='hidden_link' href='#deduct.type-23.sentence-1'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='deduct.type-23.example-1' class='example'>[&nbsp;<a class='example_link' href='#deduct.type-23.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> R, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> ArgTypes<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X<span class='anglebracket'>&lt;</span>R<span class='parenthesis'>(</span><span class='keyword'>int</span>, ArgTypes <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Y<span class='anglebracket'>&lt;</span>T, Types<span class='operator'>&amp;</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>float</span><span class='parenthesis'>)</span>;

X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> x1;                      <span class='comment'>// uses primary template</span>
X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>float</span>, <span class='keyword'>double</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> x2;  <span class='comment'>// uses partial specialization; <span class='tcode_in_codeblock'>ArgTypes</span> contains <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>double</span></span>
X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='parenthesis'>(</span><span class='keyword'>float</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> x3;          <span class='comment'>// uses primary template</span>
Y<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> y1;                         <span class='comment'>// use primary template; <span class='tcode_in_codeblock'>Types</span> is empty</span>
Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>&amp;</span>, <span class='keyword'>float</span><span class='operator'>&amp;</span>, <span class='keyword'>double</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span> y2;    <span class='comment'>// uses partial specialization; <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>int&amp;</span>, <span class='tcode_in_codeblock'>Types</span> contains <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>double</span></span>
Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>float</span>, <span class='keyword'>double</span><span class='anglebracket'>&gt;</span> y3;       <span class='comment'>// uses primary template; <span class='tcode_in_codeblock'>Types</span> contains <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>double</span></span>
<span class='keyword'>int</span> fv <span class='operator'>=</span> f<span class='parenthesis'>(</span>g<span class='parenthesis'>)</span>;                  <span class='comment'>// OK; <span class='tcode_in_codeblock'>Types</span> contains <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>float</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-139'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-139'>139)</a></div><div id='footnote-139.sentence-1' class='sentence'>Although the
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
corresponding to a
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
of type
<span class='texttt'><span class='keyword'>bool</span></span>
may be deduced from an array bound, the resulting value will always be
<span class='texttt'><span class='literal'>true</span></span>
because the array bound will be nonzero<a class='hidden_link' href='#footnote-139.sentence-1'>.</a></div> <a href='#footnoteref-139'>⮥</a></div></div><div id='deduct.decl' class='section'><h4 ><a class='secnum' href='#deduct.decl' style='min-width:118pt'>13.10.2.6</a> Deducing template arguments from a function declaration <a class='abbr_ref' href='temp.deduct.decl'>[temp.deduct.decl]</a></h4><div class='para' id='deduct.decl-1'><div class='marginalizedparent'><a class='marginalized' href='#deduct.decl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L9126'>#</a></div><div id='deduct.decl-1.sentence-1' class='sentence'>In a declaration whose <a class='grammarterm' href='dcl.decl#nt:declarator-id'>declarator-id</a> refers to a specialization
of a function template, template argument deduction is performed to identify
the specialization to which the declaration refers<a class='hidden_link' href='#deduct.decl-1.sentence-1'>.</a></div> <div id='deduct.decl-1.sentence-2' class='sentence'>Specifically, this is done
for <a href='#explicit'>explicit instantiations</a>, <a href='#expl.spec'>explicit specializations</a>,
and certain <a href='#friend'>friend declarations</a><a class='hidden_link' href='#deduct.decl-1.sentence-2'>.</a></div> <div id='deduct.decl-1.sentence-3' class='sentence'>This is also done to
determine whether a deallocation function template specialization matches a placement
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span> (<a href='basic.stc.dynamic.deallocation'>[basic.stc.dynamic.deallocation]</a>, <a href='expr.new'>[expr.new]</a>)<a class='hidden_link' href='#deduct.decl-1.sentence-3'>.</a></div> <div id='deduct.decl-1.sentence-4' class='sentence'>In all these cases, <span class='texttt'>P</span> is the type of the function template being considered
as a potential match and <span class='texttt'>A</span> is either the function type from the
declaration
or the type of the deallocation function that would match the placement
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span> as described in <a href='expr.new'>[expr.new]</a><a class='hidden_link' href='#deduct.decl-1.sentence-4'>.</a></div> <div id='deduct.decl-1.sentence-5' class='sentence'>The
deduction is done as described in <a href='#deduct.type'>[temp.deduct.type]</a><a class='hidden_link' href='#deduct.decl-1.sentence-5'>.</a></div></div><div class='para' id='deduct.decl-2'><div class='marginalizedparent'><a class='marginalized' href='#deduct.decl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L9141'>#</a></div><div id='deduct.decl-2.sentence-1' class='sentence'>If, for the set of function templates so considered, there is either no match or
more than one match after partial ordering has been considered (<a href='#func.order'>[temp.func.order]</a>),
deduction fails and, in the declaration cases, the
program is ill-formed<a class='hidden_link' href='#deduct.decl-2.sentence-1'>.</a></div></div></div></div><div id='over' class='section'><h3 ><a class='secnum' href='#over' style='min-width:103pt'>13.10.3</a> Overload resolution <a class='abbr_ref' href='temp.over'>[temp.over]</a></h3><div class='para' id='over-1'><div class='marginalizedparent'><a class='marginalized' href='#over-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L9149'>#</a></div><div id='over-1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':overloading,resolution,function_template'></a></span>When a call to the name of a function or function template
is written (explicitly, or implicitly using the
operator notation), template argument deduction (<a href='#deduct'>[temp.deduct]</a>)
and checking of any explicit template arguments (<a href='#arg'>[temp.arg]</a>) are performed
for each function template to find the template argument values (if any) that
can be used with that function template to instantiate a function template
specialization that can be invoked with the call arguments<a class='hidden_link' href='#over-1.sentence-1'>.</a></div> <div id='over-1.sentence-2' class='sentence'>For each function template, if the argument deduction and checking succeeds,
the
<a class='grammarterm' href='#nt:template-argument'>template-argument</a><span class='textit'>s</span>
(deduced and/or explicit)
are used to synthesize the declaration of
a single function template specialization which is
added to the candidate functions set to be used in overload resolution<a class='hidden_link' href='#over-1.sentence-2'>.</a></div> <div id='over-1.sentence-3' class='sentence'>If, for a given function template, argument deduction fails or
the synthesized function template specialization would be ill-formed,
no such function is added to the set of candidate functions for that template<a class='hidden_link' href='#over-1.sentence-3'>.</a></div> <div id='over-1.sentence-4' class='sentence'>The complete set of candidate functions includes all the synthesized
declarations and all of the non-template overloaded functions of
the same name<a class='hidden_link' href='#over-1.sentence-4'>.</a></div> <div id='over-1.sentence-5' class='sentence'>The synthesized declarations are
treated like any other functions in
the remainder of overload resolution, except as explicitly noted
in <a href='over.match.best'>[over.match.best]</a><a class='hidden_link' href='#over-1.sentence-5'>.</a><a class='footnotenum' href='#footnote-140' id='footnoteref-140'>140</a></div></div><div class='para' id='over-2'><div class='marginalizedparent'><a class='marginalized' href='#over-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L9186'>#</a></div><div id='over-2.example-1' class='example'>[&nbsp;<a class='example_link' href='#over-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T max<span class='parenthesis'>(</span>T a, T b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a<span class='anglebracket'>&gt;</span>b<span class='operator'>?</span>a<span class='operator'>:</span>b; <span class='curlybracket'>}</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> a, <span class='keyword'>int</span> b, <span class='keyword'>char</span> c, <span class='keyword'>char</span> d<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> m1 <span class='operator'>=</span> max<span class='parenthesis'>(</span>a,b<span class='parenthesis'>)</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>max(int a, int b)</span></span>
  <span class='keyword'>char</span> m2 <span class='operator'>=</span> max<span class='parenthesis'>(</span>c,d<span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>max(char a, char b)</span></span>
  <span class='keyword'>int</span> m3 <span class='operator'>=</span> max<span class='parenthesis'>(</span>a,c<span class='parenthesis'>)</span>;            <span class='comment'>// error: cannot generate <span class='tcode_in_codeblock'>max(int,char)</span></span>
<span class='curlybracket'>}</span>
</pre><div id='over-2.sentence-1' class='sentence'>Adding the non-template function
<pre class='codeblock'>
<span class='keyword'>int</span> max<span class='parenthesis'>(</span><span class='keyword'>int</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;
</pre>
to the example above would resolve the third call, by providing a function that
could be called for
<span class='texttt'>max<span class='parenthesis'>(</span>a,c<span class='parenthesis'>)</span></span>
after using the standard conversion of
<span class='texttt'><span class='keyword'>char</span></span>
to
<span class='texttt'><span class='keyword'>int</span></span>
for
<span class='texttt'>c</span><a class='hidden_link' href='#over-2.sentence-1'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='over-3'><div class='marginalizedparent'><a class='marginalized' href='#over-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L9213'>#</a></div><div id='over-3.example-1' class='example'>[&nbsp;<a class='example_link' href='#over-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='over-3.sentence-1' class='sentence'>Here is an example involving conversions on a function argument involved in
<a class='grammarterm' href='#nt:template-argument'>template-argument</a>
deduction:
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> D <span class='operator'>:</span> <span class='keyword'>public</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> bi, D<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> di<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>bi<span class='parenthesis'>)</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>f(bi)</span></span>
  f<span class='parenthesis'>(</span>di<span class='parenthesis'>)</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>f((B&lt;int&gt;&amp;)di)</span></span>
<span class='curlybracket'>}</span>
</pre></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='over-4'><div class='marginalizedparent'><a class='marginalized' href='#over-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L9230'>#</a></div><div id='over-4.example-1' class='example'>[&nbsp;<a class='example_link' href='#over-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='over-4.sentence-1' class='sentence'>Here is an example involving conversions on a function argument not involved in
<a class='grammarterm' href='#nt:template-parameter'>template-parameter</a>
deduction:
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>*</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;       <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T,<span class='keyword'>char</span><span class='parenthesis'>)</span>;       <span class='comment'>// #2</span>

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>*</span> pi, <span class='keyword'>int</span> i, <span class='keyword'>char</span> c<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>pi,i<span class='parenthesis'>)</span>;          <span class='comment'>// #1: <span class='tcode_in_codeblock'>f&lt;int&gt;(pi,i)</span></span>
  f<span class='parenthesis'>(</span>pi,c<span class='parenthesis'>)</span>;          <span class='comment'>// #2: <span class='tcode_in_codeblock'>f&lt;int*&gt;(pi,c)</span></span>

  f<span class='parenthesis'>(</span>i,c<span class='parenthesis'>)</span>;           <span class='comment'>// #2: <span class='tcode_in_codeblock'>f&lt;int&gt;(i,c);</span></span>
  f<span class='parenthesis'>(</span>i,i<span class='parenthesis'>)</span>;           <span class='comment'>// #2: <span class='tcode_in_codeblock'>f&lt;int&gt;(i,char(i))</span></span>
<span class='curlybracket'>}</span>
</pre></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='over-5'><div class='marginalizedparent'><a class='marginalized' href='#over-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/templates.tex#L9249'>#</a></div><div id='over-5.sentence-1' class='sentence'>Only the signature of a function template specialization is needed to enter the
specialization in a set of candidate functions<a class='hidden_link' href='#over-5.sentence-1'>.</a></div> <div id='over-5.sentence-2' class='sentence'>Therefore only the function template declaration is needed to resolve a call
for which a template specialization is a candidate<a class='hidden_link' href='#over-5.sentence-2'>.</a></div> <div id='over-5.example-1' class='example'>[&nbsp;<a class='example_link' href='#over-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;    <span class='comment'>// declaration</span>

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>"Annemarie"</span><span class='parenthesis'>)</span>;               <span class='comment'>// call of <span class='tcode_in_codeblock'>f&lt;const char*&gt;</span></span>
<span class='curlybracket'>}</span>
</pre><div id='over-5.sentence-3' class='sentence'>The call of
<span class='texttt'>f</span>
is well-formed even if the template
<span class='texttt'>f</span>
is only declared and not defined at the point of the call<a class='hidden_link' href='#over-5.sentence-3'>.</a></div> <div id='over-5.sentence-4' class='sentence'>The program will be ill-formed unless a specialization for
<span class='texttt'>f<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span></span>,
either implicitly or explicitly generated,
is present in some translation unit<a class='hidden_link' href='#over-5.sentence-4'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='footnote' id='footnote-140'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-140'>140)</a></div><div id='footnote-140.sentence-1' class='sentence'>The parameters of function template
specializations contain no
template parameter types<a class='hidden_link' href='#footnote-140.sentence-1'>.</a></div> <div id='footnote-140.sentence-2' class='sentence'>The set of conversions allowed on deduced arguments is limited, because the
argument deduction process produces function templates with parameters that
either match the call arguments exactly or differ only in ways that can be
bridged by the allowed limited conversions<a class='hidden_link' href='#footnote-140.sentence-2'>.</a></div> <div id='footnote-140.sentence-3' class='sentence'>Non-deduced arguments allow the full range of conversions<a class='hidden_link' href='#footnote-140.sentence-3'>.</a></div> <div id='footnote-140.sentence-4' class='sentence'>Note also that <a href='over.match.best'>[over.match.best]</a> specifies that a non-template function will
be given preference over a template specialization if the two functions
are otherwise equally good candidates for an overload match<a class='hidden_link' href='#footnote-140.sentence-4'>.</a></div> <a href='#footnoteref-140'>⮥</a></div></div></div></div></body></html>