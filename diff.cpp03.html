<!DOCTYPE html><html lang='en'><head><title>[diff.cpp03]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='annexnum' style='min-width:50pt'>Annex C&emsp;(informative)</a> Compatibility <a class='abbr_ref' href='./#diff'>[diff]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>C.6</a> C++ and ISO C++ 2003 <a class='abbr_ref'>[diff.cpp03]</a></h2><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:80pt'>C.6.1</a> General <a class='abbr_ref' href='diff.cpp03.general'>[diff.cpp03.general]</a></h3><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2052'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'><a class='index' id=':summary,compatibility_with_ISO_C++_2003'></a>Subclause [diff.<span class='shy'></span>cpp03] lists the differences between C++ and
ISO C++ 2003,
in addition to those listed above,
by the chapters of this document<a class='hidden_link' href='#general-1.sentence-1'>.</a></div></div></div></div><div id='lex' class='section'><h3 ><a class='secnum' href='#lex' style='min-width:80pt'>C.6.2</a> <a href='lex' title='5&emsp;Lexical conventions'>[lex]</a>: lexical conventions <a class='abbr_ref' href='diff.cpp03.lex'>[diff.cpp03.lex]</a></h3><div class='para' id='lex-1'><div class='marginalizedparent'><a class='marginalized' href='#lex-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2061'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.pptoken'>[lex.<span class='shy'></span>pptoken]</a>
<br> <div id='lex-1.sentence-1' class='sentence'><b>Change:</b> New kinds of <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal'><span class='textsf'><i >string-literal</i></span></span></a><i >s</i><a class='hidden_link' href='#lex-1.sentence-1'>.</a></div> <br> <div id='lex-1.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#lex-1.sentence-2'>.</a></div> <br> <div id='lex-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may fail to compile or produce different results in
this revision of C++<a class='hidden_link' href='#lex-1.sentence-3'>.</a></div> <div id='lex-1.sentence-4' class='sentence'>Specifically, macros named <span class='texttt'>R</span>, <span class='texttt'>u8</span>,
<span class='texttt'>u8R</span>, <span class='texttt'>u</span>, <span class='texttt'>uR</span>, <span class='texttt'>U</span>, <span class='texttt'>UR</span>, or <span class='texttt'>LR</span> will
not be expanded when adjacent to a <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal_'><span class='textsf'><i >string-literal</i></span></span></a> but will be interpreted as
part of the <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal__'><span class='textsf'><i >string-literal</i></span></span></a><a class='hidden_link' href='#lex-1.sentence-4'>.</a></div> <div id='lex-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lex-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='preprocessordirective'>#define</span> u8 <span class='literal'>"abc"</span>
<span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> s <span class='operator'>=</span> <span class='literal'>u8"def"</span>;        <span class='comment'>// Previously <span class='tcode_in_codeblock'>"abcdef"</span>, now <span class='tcode_in_codeblock'>"def"</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lex-2'><div class='marginalizedparent'><a class='marginalized' href='#lex-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2079'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.pptoken'>[lex.<span class='shy'></span>pptoken]</a>
<br> <div id='lex-2.sentence-1' class='sentence'><b>Change:</b> User-defined literal string support<a class='hidden_link' href='#lex-2.sentence-1'>.</a></div> <br> <div id='lex-2.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#lex-2.sentence-2'>.</a></div> <br> <div id='lex-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may fail to compile or produce different results in
this revision of C++<a class='hidden_link' href='#lex-2.sentence-3'>.</a></div> <div id='lex-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lex-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='preprocessordirective'>#define</span> _x <span class='literal'>"there"</span>
<span class='literal'>"hello"_x</span>           <span class='comment'>// #1</span>
</span></div><div class='texpara'><div id='lex-2.sentence-4' class='sentence'>Previously, #1 would have consisted of two separate preprocessing tokens and
the macro <span class='texttt'>_<span class='shy'></span>x</span> would have been expanded<a class='hidden_link' href='#lex-2.sentence-4'>.</a></div> <div id='lex-2.sentence-5' class='sentence'>In this revision of C++,
#1 consists of a single preprocessing token, so the macro is not expanded<a class='hidden_link' href='#lex-2.sentence-5'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lex-3'><div class='marginalizedparent'><a class='marginalized' href='#lex-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2098'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.key'>[lex.<span class='shy'></span>key]</a>
<br> <div id='lex-3.sentence-1' class='sentence'><b>Change:</b> New keywords<a class='hidden_link' href='#lex-3.sentence-1'>.</a></div> <br> <div id='lex-3.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#lex-3.sentence-2'>.</a></div> <br> <div id='lex-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Added to Table <a href='lex.key#tab:lex.key' title='Table 5: Keywords'>5</a>, the following identifiers are new keywords:
<span class='texttt'><span class='keyword'>alignas</span></span>,
<span class='texttt'><span class='keyword'>alignof</span></span>,
<span id=':char16_t'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span>,
<span id=':char32_t'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span>,
<span id=':constexpr'><span class='texttt'><span class='keyword'>constexpr</span></span></span>,
<span id=':decltype'><span class='texttt'><span class='keyword'>decltype</span></span></span>,
<span id=':noexcept'><span class='texttt'><span class='keyword'>noexcept</span></span></span>,
<span id=':nullptr'><span class='texttt'><span class='literal'>nullptr</span></span></span>,
<span id=':static_assert'><span class='texttt'><span class='keyword'>static_<span class='shy'></span>assert</span></span></span>,
and
<span id=':thread_local'><span class='texttt'><span class='keyword'>thread_<span class='shy'></span>local</span></span></span><a class='hidden_link' href='#lex-3.sentence-3'>.</a></div> <div id='lex-3.sentence-4' class='sentence'>Valid C++ 2003 code using these identifiers is invalid in this revision of C++<a class='hidden_link' href='#lex-3.sentence-4'>.</a></div></div></div><div class='para' id='lex-4'><div class='marginalizedparent'><a class='marginalized' href='#lex-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2118'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.icon'>[lex.<span class='shy'></span>icon]</a>
<br> <div id='lex-4.sentence-1' class='sentence'><b>Change:</b> Type of integer literals<a class='hidden_link' href='#lex-4.sentence-1'>.</a></div> <br> <div id='lex-4.sentence-2' class='sentence'><b>Rationale:</b> C99 compatibility<a class='hidden_link' href='#lex-4.sentence-2'>.</a></div> <br> <div id='lex-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Certain integer literals larger than can be represented by <span class='texttt'><span class='keyword'>long</span></span> could
change from an unsigned integer type to <span class='texttt'><span class='keyword'>signed</span> <span class='keyword'>long</span> <span class='keyword'>long</span></span><a class='hidden_link' href='#lex-4.sentence-3'>.</a></div></div></div></div><div id='expr' class='section'><h3 ><a class='secnum' href='#expr' style='min-width:80pt'>C.6.3</a> <a href='expr' title='7&emsp;Expressions'>[expr]</a>: expressions <a class='abbr_ref' href='diff.cpp03.expr'>[diff.cpp03.expr]</a></h3><div class='para' id='expr-1'><div class='marginalizedparent'><a class='marginalized' href='#expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2129'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='conv.ptr'>[conv.<span class='shy'></span>ptr]</a>
<br> <div id='expr-1.sentence-1' class='sentence'><b>Change:</b> Only literals are integer null pointer constants<a class='hidden_link' href='#expr-1.sentence-1'>.</a></div> <br> <div id='expr-1.sentence-2' class='sentence'><b>Rationale:</b> Removing surprising interactions with templates and constant
expressions<a class='hidden_link' href='#expr-1.sentence-2'>.</a></div> <br> <div id='expr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may fail to compile or produce different results in
this revision of C++<a class='hidden_link' href='#expr-1.sentence-3'>.</a></div> <div id='expr-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#expr-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>void</span> <span class='operator'>*</span><span class='parenthesis'>)</span>;     <span class='comment'>// #1</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;        <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='operator'>*</span>N<span class='parenthesis'>)</span>;           <span class='comment'>// calls #2; used to call #1</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='expr-2'><div class='marginalizedparent'><a class='marginalized' href='#expr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2148'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='expr.typeid'>[expr.<span class='shy'></span>typeid]</a>
<br> <div id='expr-2.sentence-1' class='sentence'><b>Change:</b> Evaluation of operands in <span id=':typeid'><span class='texttt'><span class='keyword'>typeid</span></span></span><a class='hidden_link' href='#expr-2.sentence-1'>.</a></div> <br> <div id='expr-2.sentence-2' class='sentence'><b>Rationale:</b> Introduce additional expression value categories<a class='hidden_link' href='#expr-2.sentence-2'>.</a></div> <br> <div id='expr-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that uses xvalues as operands for <span id=':typeid_'><span class='texttt'><span class='keyword'>typeid</span></span></span>
may change behavior in this revision of C++<a class='hidden_link' href='#expr-2.sentence-3'>.</a></div> <div id='expr-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#expr-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
    B<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    <span class='keyword'>virtual</span> <span class='operator'>~</span>B<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span>;

  <span class='keyword'>struct</span> C <span class='curlybracket'>{</span> B b; <span class='curlybracket'>}</span>;
  <span class='keyword'>typeid</span><span class='parenthesis'>(</span>C<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>b<span class='parenthesis'>)</span>;    <span class='comment'>// unevaluated in C++ 2003, evaluated in C++ 2011</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='expr-3'><div class='marginalizedparent'><a class='marginalized' href='#expr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2170'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='expr.mul'>[expr.<span class='shy'></span>mul]</a>
<br> <div id='expr-3.sentence-1' class='sentence'><b>Change:</b> Specify rounding for results of integer <span class='texttt'><span class='operator'>/</span></span> and <span class='texttt'><span class='operator'>%</span></span><a class='hidden_link' href='#expr-3.sentence-1'>.</a></div> <br> <div id='expr-3.sentence-2' class='sentence'><b>Rationale:</b> Increase portability, C99 compatibility<a class='hidden_link' href='#expr-3.sentence-2'>.</a></div> <br> <div id='expr-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that uses integer division rounds the result toward 0 or
toward negative infinity, whereas this revision of C++ always rounds
the result toward 0<a class='hidden_link' href='#expr-3.sentence-3'>.</a></div></div></div><div class='para' id='expr-4'><div class='marginalizedparent'><a class='marginalized' href='#expr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2180'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='expr.log.and'>[expr.<span class='shy'></span>log.<span class='shy'></span>and]</a>
<br> <div id='expr-4.sentence-1' class='sentence'><b>Change:</b> <span class='texttt'><span class='operator'>&amp;</span><span class='operator'>&amp;</span></span> is valid in a <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name'><span class='textsf'><i >type-name</i></span></span></a><a class='hidden_link' href='#expr-4.sentence-1'>.</a></div> <br> <div id='expr-4.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#expr-4.sentence-2'>.</a></div> <br> <div id='expr-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may fail to compile or produce different results in
this revision of C++<a class='hidden_link' href='#expr-4.sentence-3'>.</a></div> <div id='expr-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#expr-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>bool</span> b1 <span class='operator'>=</span> <span class='keyword'>new</span> <span class='keyword'>int</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='literal'>false</span>;             <span class='comment'>// previously <span class='tcode_in_codeblock'>false</span>, now ill-formed</span>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>bool</span> b2 <span class='operator'>=</span> <span class='operator'>&amp;</span>S<span class='operator'>::</span><span class='keyword'>operator</span> <span class='keyword'>int</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='literal'>false</span>;    <span class='comment'>// previously <span class='tcode_in_codeblock'>false</span>, now ill-formed</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='expr-5'><div class='marginalizedparent'><a class='marginalized' href='#expr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2196'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='expr.cond'>[expr.<span class='shy'></span>cond]</a>
<br> <div id='expr-5.sentence-1' class='sentence'><b>Change:</b> Fewer copies in the conditional operator<a class='hidden_link' href='#expr-5.sentence-1'>.</a></div> <br> <div id='expr-5.sentence-2' class='sentence'><b>Rationale:</b> Introduce additional expression value categories<a class='hidden_link' href='#expr-5.sentence-2'>.</a></div> <br> <div id='expr-5.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that uses xvalues as operands for the conditional operator
may change behavior in this revision of C++<a class='hidden_link' href='#expr-5.sentence-3'>.</a></div> <div id='expr-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#expr-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
    B<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
    B<span class='parenthesis'>(</span><span class='keyword'>const</span> B<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span>;
  <span class='keyword'>struct</span> D <span class='operator'>:</span> B <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

  <span class='keyword'>struct</span> BB <span class='curlybracket'>{</span> B b; <span class='curlybracket'>}</span>;
  <span class='keyword'>struct</span> DD <span class='curlybracket'>{</span> D d; <span class='curlybracket'>}</span>;

  <span class='literal'>true</span> <span class='operator'>?</span> BB<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>b <span class='operator'>:</span> DD<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>d;       <span class='comment'>// additional copy in C++ 2003, no copy or move in C++ 2011</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='dcl.dcl' class='section'><h3 ><a class='secnum' href='#dcl.dcl' style='min-width:80pt'>C.6.4</a> <a href='dcl' title='9&emsp;Declarations'>[dcl]</a>: declarations <a class='abbr_ref' href='diff.cpp03.dcl.dcl'>[diff.cpp03.dcl.dcl]</a></h3><div class='para' id='dcl.dcl-1'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2223'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.spec'>[dcl.<span class='shy'></span>spec]</a>
<br> <div id='dcl.dcl-1.sentence-1' class='sentence'><b>Change:</b> Remove <span id=':auto'><span class='texttt'><span class='keyword'>auto</span></span></span> as a storage class specifier<a class='hidden_link' href='#dcl.dcl-1.sentence-1'>.</a></div> <br> <div id='dcl.dcl-1.sentence-2' class='sentence'><b>Rationale:</b> New feature<a class='hidden_link' href='#dcl.dcl-1.sentence-2'>.</a></div> <br> <div id='dcl.dcl-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that uses the keyword <span id=':auto_'><span class='texttt'><span class='keyword'>auto</span></span></span> as a storage class
specifier
may be invalid in this revision of C++<a class='hidden_link' href='#dcl.dcl-1.sentence-3'>.</a></div> <div id='dcl.dcl-1.sentence-4' class='sentence'>In this revision of C++,
<span id=':auto__'><span class='texttt'><span class='keyword'>auto</span></span></span> indicates that the type of a variable is to be deduced
from its initializer expression<a class='hidden_link' href='#dcl.dcl-1.sentence-4'>.</a></div></div></div><div class='para' id='dcl.dcl-2'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2236'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.list'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>
<br> <div id='dcl.dcl-2.sentence-1' class='sentence'><b>Change:</b> Narrowing restrictions in aggregate initializers<a class='hidden_link' href='#dcl.dcl-2.sentence-1'>.</a></div> <br> <div id='dcl.dcl-2.sentence-2' class='sentence'><b>Rationale:</b> Catches bugs<a class='hidden_link' href='#dcl.dcl-2.sentence-2'>.</a></div> <br> <div id='dcl.dcl-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may fail to compile in this revision of C++<a class='hidden_link' href='#dcl.dcl-2.sentence-3'>.</a></div> <div id='dcl.dcl-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#dcl.dcl-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span> x<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>2.0</span> <span class='curlybracket'>}</span>;
</span> <div id='dcl.dcl-2.sentence-4' class='sentence'>
This code is valid in C++ 2003 but invalid in this
revision of C++ because <span class='texttt'><span class='keyword'>double</span></span> to <span class='texttt'><span class='keyword'>int</span></span> is a narrowing
conversion<a class='hidden_link' href='#dcl.dcl-2.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='dcl.dcl-3'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2252'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.link'>[dcl.<span class='shy'></span>link]</a>
<br> <div id='dcl.dcl-3.sentence-1' class='sentence'><b>Change:</b> Names declared in an anonymous namespace
changed from external linkage to internal linkage;
language linkage applies to names with external linkage only<a class='hidden_link' href='#dcl.dcl-3.sentence-1'>.</a></div> <br> <div id='dcl.dcl-3.sentence-2' class='sentence'><b>Rationale:</b> Alignment with user expectations<a class='hidden_link' href='#dcl.dcl-3.sentence-2'>.</a></div> <br> <div id='dcl.dcl-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may violate the one-definition rule (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>)
in this revision of C++<a class='hidden_link' href='#dcl.dcl-3.sentence-3'>.</a></div> <div id='dcl.dcl-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#dcl.dcl-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>namespace</span> <span class='curlybracket'>{</span> <span class='keyword'>extern</span> <span class='literal'>"C"</span> <span class='curlybracket'>{</span> <span class='keyword'>extern</span> <span class='keyword'>int</span> x; <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>  <span class='comment'>// #1, previously external linkage and C language linkage,</span>
                                            <span class='comment'>// now internal linkage and C++ language linkage</span>
<span class='keyword'>namespace</span> A <span class='curlybracket'>{</span> <span class='keyword'>extern</span> <span class='literal'>"C"</span> <span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>42</span>; <span class='curlybracket'>}</span>      <span class='comment'>// #2, external linkage and C language linkage</span>
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span>
</span> <div id='dcl.dcl-3.sentence-4' class='sentence'>
This code is valid in C++ 2003,
but <span class='texttt'><span class='preprocessordirective'>#</span><span class='literal'>2</span></span> is not a definition for <span class='texttt'><span class='preprocessordirective'>#</span><span class='literal'>1</span></span>
in this revision of C++, violating the one-definition rule<a class='hidden_link' href='#dcl.dcl-3.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='class' class='section'><h3 ><a class='secnum' href='#class' style='min-width:80pt'>C.6.5</a> <a href='class' title='11&emsp;Classes'>[class]</a>: classes <a class='abbr_ref' href='diff.cpp03.class'>[diff.cpp03.class]</a></h3><div class='para' id='class-1'><div class='marginalizedparent'><a class='marginalized' href='#class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2276'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='class.default.ctor'>[class.<span class='shy'></span>default.<span class='shy'></span>ctor]</a>, <a href='class.dtor'>[class.<span class='shy'></span>dtor]</a>, <a href='class.copy.ctor'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>, and <a href='class.copy.assign'>[class.<span class='shy'></span>copy.<span class='shy'></span>assign]</a>
<br> <div id='class-1.sentence-1' class='sentence'><b>Change:</b> Implicitly-declared special member functions are defined as deleted
when the implicit definition would have been ill-formed<a class='hidden_link' href='#class-1.sentence-1'>.</a></div> <br> <div id='class-1.sentence-2' class='sentence'><b>Rationale:</b> Improves template argument deduction failure<a class='hidden_link' href='#class-1.sentence-2'>.</a></div> <br> <div id='class-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2003 program that uses one of these special member functions in a
context where the definition is not required (e.g., in an expression that is
not potentially evaluated) becomes ill-formed<a class='hidden_link' href='#class-1.sentence-3'>.</a></div></div></div><div class='para' id='class-2'><div class='marginalizedparent'><a class='marginalized' href='#class-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2287'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.dtor'>[class.<span class='shy'></span>dtor]</a>
<br> <div id='class-2.sentence-1' class='sentence'><b>Change:</b> User-declared destructors have an implicit exception specification<a class='hidden_link' href='#class-2.sentence-1'>.</a></div> <br> <div id='class-2.sentence-2' class='sentence'><b>Rationale:</b> Clarification of destructor requirements<a class='hidden_link' href='#class-2.sentence-2'>.</a></div> <br> <div id='class-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may execute differently in this revision of C++<a class='hidden_link' href='#class-2.sentence-3'>.</a></div> <div id='class-2.sentence-4' class='sentence'>In
particular, destructors that throw exceptions will call <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span>
(without calling <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>unexpected</span>) if their exception specification is
non-throwing<a class='hidden_link' href='#class-2.sentence-4'>.</a></div></div></div></div><div id='temp' class='section'><h3 ><a class='secnum' href='#temp' style='min-width:80pt'>C.6.6</a> <a href='temp' title='13&emsp;Templates'>[temp]</a>: templates <a class='abbr_ref' href='diff.cpp03.temp'>[diff.cpp03.temp]</a></h3><div class='para' id='temp-1'><div class='marginalizedparent'><a class='marginalized' href='#temp-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2300'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='temp.param'>[temp.<span class='shy'></span>param]</a>
<br> <div id='temp-1.sentence-1' class='sentence'><b>Change:</b> Repurpose <span id=':export'><span class='texttt'><span class='keyword'>export</span></span></span> for modules (<a href='module' title='10&emsp;Modules'>[module]</a>, <a href='cpp.module' title='15.5&emsp;Module directive'>[cpp.<span class='shy'></span>module]</a>, <a href='cpp.import' title='15.6&emsp;Header unit importation'>[cpp.<span class='shy'></span>import]</a>)<a class='hidden_link' href='#temp-1.sentence-1'>.</a></div> <br> <div id='temp-1.sentence-2' class='sentence'><b>Rationale:</b> No implementation consensus for the C++ 2003 meaning of <span id=':export_'><span class='texttt'><span class='keyword'>export</span></span></span><a class='hidden_link' href='#temp-1.sentence-2'>.</a></div> <br> <div id='temp-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2003 program containing <span class='texttt'><span class='keyword'>export</span></span> is ill-formed in this
revision of C++<a class='hidden_link' href='#temp-1.sentence-3'>.</a></div></div></div><div class='para' id='temp-2'><div class='marginalizedparent'><a class='marginalized' href='#temp-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2309'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='temp.arg'>[temp.<span class='shy'></span>arg]</a>
<br> <div id='temp-2.sentence-1' class='sentence'><b>Change:</b> Remove whitespace requirement for nested closing template right angle
brackets<a class='hidden_link' href='#temp-2.sentence-1'>.</a></div> <br> <div id='temp-2.sentence-2' class='sentence'><b>Rationale:</b> Considered a persistent but minor annoyance<a class='hidden_link' href='#temp-2.sentence-2'>.</a></div> <div id='temp-2.sentence-3' class='sentence'>Template aliases
representing non-class types would exacerbate whitespace issues<a class='hidden_link' href='#temp-2.sentence-3'>.</a></div> <br> <div id='temp-2.sentence-4' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined expression<a class='hidden_link' href='#temp-2.sentence-4'>.</a></div> <div id='temp-2.sentence-5' class='sentence'>A valid C++ 2003 expression
containing a right angle bracket (“<span class='texttt'><span class='anglebracket'>&gt;</span></span>”) followed immediately by
another right angle bracket may now be treated as closing two templates<a class='hidden_link' href='#temp-2.sentence-5'>.</a></div> <div id='temp-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
X<span class='anglebracket'>&lt;</span> Y<span class='anglebracket'>&lt;</span> <span class='literal'>1</span> <span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='literal'>2</span> <span class='anglebracket'>&gt;</span> <span class='anglebracket'>&gt;</span> x;
</span> <div id='temp-2.sentence-6' class='sentence'>
This code is valid in C++ 2003 because “<span class='texttt'><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span></span>”
is a right-shift operator, but invalid in this revision of C++ because
“<span class='texttt'><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span></span>” closes two templates<a class='hidden_link' href='#temp-2.sentence-6'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp-3'><div class='marginalizedparent'><a class='marginalized' href='#temp-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2331'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='temp.dep.candidate'>[temp.<span class='shy'></span>dep.<span class='shy'></span>candidate]</a>
<br> <div id='temp-3.sentence-1' class='sentence'><b>Change:</b> Allow dependent calls of functions with internal linkage<a class='hidden_link' href='#temp-3.sentence-1'>.</a></div> <br> <div id='temp-3.sentence-2' class='sentence'><b>Rationale:</b> Overly constrained, simplify overload resolution rules<a class='hidden_link' href='#temp-3.sentence-2'>.</a></div> <br> <div id='temp-3.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2003 program can get a different result in this
revision of C++<a class='hidden_link' href='#temp-3.sentence-3'>.</a></div></div></div></div><div id='library' class='section'><h3 ><a class='secnum' href='#library' style='min-width:80pt'>C.6.7</a> <a href='library' title='16&emsp;Library introduction'>[library]</a>: library introduction <a class='abbr_ref' href='diff.cpp03.library'>[diff.cpp03.library]</a></h3><div class='para' id='library-1'><div class='marginalizedparent'><a class='marginalized' href='#library-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2342'>#</a></div><div class='texpara'><div id='library-1.sentence-1' class='sentence'><b>Affected:</b> <a href='library' title='16&emsp;Library introduction'>[library]</a> – <a href='exec' title='33&emsp;Execution control library'>[exec]</a>
<br></div> <div id='library-1.sentence-2' class='sentence'><b>Change:</b> New reserved identifiers<a class='hidden_link' href='#library-1.sentence-2'>.</a></div> <br> <div id='library-1.sentence-3' class='sentence'><b>Rationale:</b> Required by new features<a class='hidden_link' href='#library-1.sentence-3'>.</a></div> <br> <div id='library-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that uses any identifiers added to the C++ standard
library by later revisions of C++ may fail to compile or produce different
results in this revision of C++<a class='hidden_link' href='#library-1.sentence-4'>.</a></div> <div id='library-1.sentence-5' class='sentence'>A comprehensive list of identifiers used
by the C++ standard library can be found in the Index of Library Names in this
document<a class='hidden_link' href='#library-1.sentence-5'>.</a></div></div></div><div class='para' id='library-2'><div class='marginalizedparent'><a class='marginalized' href='#library-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2355'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='headers'>[headers]</a>
<br> <div id='library-2.sentence-1' class='sentence'><b>Change:</b> New headers<a class='hidden_link' href='#library-2.sentence-1'>.</a></div> <br> <div id='library-2.sentence-2' class='sentence'><b>Rationale:</b> New functionality<a class='hidden_link' href='#library-2.sentence-2'>.</a></div> <br> <div id='library-2.sentence-3' class='sentence'><b>Effect on original feature:</b> The following C++ headers are new:
<a href='array.syn#header:%3carray%3e' title='23.3.2&emsp;Header &lt;array&gt; synopsis&emsp;[array.syn]'><span id='headerref:<array>'><span class='texttt'>&lt;array&gt;</span></span></a>,
<a href='atomics.syn#header:%3catomic%3e' title='32.5.2&emsp;Header &lt;atomic&gt; synopsis&emsp;[atomics.syn]'><span id='headerref:<atomic>'><span class='texttt'>&lt;atomic&gt;</span></span></a>,
<a href='time.syn#header:%3cchrono%3e' title='30.2&emsp;Header &lt;chrono&gt; synopsis&emsp;[time.syn]'><span id='headerref:<chrono>'><span class='texttt'>&lt;chrono&gt;</span></span></a>,
<a href='condition.variable.syn#header:%3ccondition_variable%3e' title='32.7.2&emsp;Header &lt;condition_&shy;variable&gt; synopsis&emsp;[condition.variable.syn]'><span id='headerref:<condition_variable>'><span class='texttt'>&lt;condition_<span class='shy'></span>variable&gt;</span></span></a>,
<a href='forward.list.syn#header:%3cforward_list%3e' title='23.3.6&emsp;Header &lt;forward_&shy;list&gt; synopsis&emsp;[forward.list.syn]'><span id='headerref:<forward_list>'><span class='texttt'>&lt;forward_<span class='shy'></span>list&gt;</span></span></a>,
<a href='future.syn#header:%3cfuture%3e' title='32.10.2&emsp;Header &lt;future&gt; synopsis&emsp;[future.syn]'><span id='headerref:<future>'><span class='texttt'>&lt;future&gt;</span></span></a>,
<a class='index' id='headerref:<initializer_list>'></a><span class='texttt'><span class='anglebracket'>&lt;</span>initializer_<span class='shy'></span>list<span class='anglebracket'>&gt;</span></span> (<a href='initializer.list.syn' title='17.11.2&emsp;Header &lt;initializer_&shy;list&gt; synopsis'>[initializer.<span class='shy'></span>list.<span class='shy'></span>syn]</a>),
<a href='mutex.syn#header:%3cmutex%3e' title='32.6.2&emsp;Header &lt;mutex&gt; synopsis&emsp;[mutex.syn]'><span id='headerref:<mutex>'><span class='texttt'>&lt;mutex&gt;</span></span></a>,
<a href='rand.synopsis#header:%3crandom%3e' title='29.5.2&emsp;Header &lt;random&gt; synopsis&emsp;[rand.synopsis]'><span id='headerref:<random>'><span class='texttt'>&lt;random&gt;</span></span></a>,
<a href='ratio.syn#header:%3cratio%3e' title='21.4.2&emsp;Header &lt;ratio&gt; synopsis&emsp;[ratio.syn]'><span id='headerref:<ratio>'><span class='texttt'>&lt;ratio&gt;</span></span></a>,
<a href='re.syn#header:%3cregex%3e' title='28.6.3&emsp;Header &lt;regex&gt; synopsis&emsp;[re.syn]'><span id='headerref:<regex>'><span class='texttt'>&lt;regex&gt;</span></span></a>,
<a href='allocator.adaptor.syn#header:%3cscoped_allocator%3e' title='20.6.1&emsp;Header &lt;scoped_&shy;allocator&gt; synopsis&emsp;[allocator.adaptor.syn]'><span id='headerref:<scoped_allocator>'><span class='texttt'>&lt;scoped_<span class='shy'></span>allocator&gt;</span></span></a>,
<a href='system.error.syn#header:%3csystem_error%3e' title='19.5.2&emsp;Header &lt;system_&shy;error&gt; synopsis&emsp;[system.error.syn]'><span id='headerref:<system_error>'><span class='texttt'>&lt;system_<span class='shy'></span>error&gt;</span></span></a>,
<a href='thread.syn#header:%3cthread%3e' title='32.4.2&emsp;Header &lt;thread&gt; synopsis&emsp;[thread.syn]'><span id='headerref:<thread>'><span class='texttt'>&lt;thread&gt;</span></span></a>,
<a href='tuple.syn#header:%3ctuple%3e' title='22.4.2&emsp;Header &lt;tuple&gt; synopsis&emsp;[tuple.syn]'><span id='headerref:<tuple>'><span class='texttt'>&lt;tuple&gt;</span></span></a>,
<a class='index' id='headerref:<typeindex>'></a><span class='texttt'><span class='anglebracket'>&lt;</span>typeindex<span class='anglebracket'>&gt;</span></span> (<a href='type.index.synopsis' title='17.7.6&emsp;Header &lt;typeindex&gt; synopsis'>[type.<span class='shy'></span>index.<span class='shy'></span>synopsis]</a>),
<a href='meta.type.synop#header:%3ctype_traits%3e' title='21.3.3&emsp;Header &lt;type_&shy;traits&gt; synopsis&emsp;[meta.type.synop]'><span id='headerref:<type_traits>'><span class='texttt'>&lt;type_<span class='shy'></span>traits&gt;</span></span></a>,
<a href='unord.map.syn#header:%3cunordered_map%3e' title='23.5.2&emsp;Header &lt;unordered_&shy;map&gt; synopsis&emsp;[unord.map.syn]'><span id='headerref:<unordered_map>'><span class='texttt'>&lt;unordered_<span class='shy'></span>map&gt;</span></span></a>,
and
<a href='unord.set.syn#header:%3cunordered_set%3e' title='23.5.5&emsp;Header &lt;unordered_&shy;set&gt; synopsis&emsp;[unord.set.syn]'><span id='headerref:<unordered_set>'><span class='texttt'>&lt;unordered_<span class='shy'></span>set&gt;</span></span></a><a class='hidden_link' href='#library-2.sentence-3'>.</a></div> <div id='library-2.sentence-4' class='sentence'>In addition the following C compatibility headers are new:
<a href='cfenv.syn#header:%3ccfenv%3e' title='29.3.1&emsp;Header &lt;cfenv&gt; synopsis&emsp;[cfenv.syn]'><span id='headerref:<cfenv>'><span class='texttt'>&lt;cfenv&gt;</span></span></a>,
<a href='cinttypes.syn#header:%3ccinttypes%3e' title='31.13.2&emsp;Header &lt;cinttypes&gt; synopsis&emsp;[cinttypes.syn]'><span id='headerref:<cinttypes>'><span class='texttt'>&lt;cinttypes&gt;</span></span></a>,
<a href='cstdint.syn#header:%3ccstdint%3e' title='17.4.1&emsp;Header &lt;cstdint&gt; synopsis&emsp;[cstdint.syn]'><span id='headerref:<cstdint>'><span class='texttt'>&lt;cstdint&gt;</span></span></a>,
and
<a href='cuchar.syn#header:%3ccuchar%3e' title='28.7.4&emsp;Header &lt;cuchar&gt; synopsis&emsp;[cuchar.syn]'><span id='headerref:<cuchar>'><span class='texttt'>&lt;cuchar&gt;</span></span></a><a class='hidden_link' href='#library-2.sentence-4'>.</a></div> <div id='library-2.sentence-5' class='sentence'>Valid C++ 2003 code that <span class='texttt'><span class='preprocessordirective'>#include</span></span>s headers with these names may be
invalid in this revision of C++<a class='hidden_link' href='#library-2.sentence-5'>.</a></div></div></div><div class='para' id='library-3'><div class='marginalizedparent'><a class='marginalized' href='#library-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2391'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='swappable.requirements'>[swappable.<span class='shy'></span>requirements]</a>
<br> <div id='library-3.sentence-1' class='sentence'><b>Change:</b> Function <span class='texttt'>swap</span> moved to a different header<a class='hidden_link' href='#library-3.sentence-1'>.</a></div> <br> <div id='library-3.sentence-2' class='sentence'><b>Rationale:</b> Remove dependency on <a href='algorithm.syn#header:%3calgorithm%3e' title='26.4&emsp;Header &lt;algorithm&gt; synopsis&emsp;[algorithm.syn]'><span id='headerref:<algorithm>'><span class='texttt'>&lt;algorithm&gt;</span></span></a> for <span class='texttt'>swap</span><a class='hidden_link' href='#library-3.sentence-2'>.</a></div> <br> <div id='library-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that has been compiled expecting <span class='texttt'>swap</span> to be in
<a href='algorithm.syn#header:%3calgorithm%3e' title='26.4&emsp;Header &lt;algorithm&gt; synopsis&emsp;[algorithm.syn]'><span id='headerref:<algorithm>_'><span class='texttt'>&lt;algorithm&gt;</span></span></a> may have to instead include <a href='utility.syn#header:%3cutility%3e' title='22.2.1&emsp;Header &lt;utility&gt; synopsis&emsp;[utility.syn]'><span id='headerref:<utility>'><span class='texttt'>&lt;utility&gt;</span></span></a><a class='hidden_link' href='#library-3.sentence-3'>.</a></div></div></div><div class='para' id='library-4'><div class='marginalizedparent'><a class='marginalized' href='#library-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2400'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='namespace.posix'>[namespace.<span class='shy'></span>posix]</a>
<br> <div id='library-4.sentence-1' class='sentence'><b>Change:</b> New reserved namespace<a class='hidden_link' href='#library-4.sentence-1'>.</a></div> <br> <div id='library-4.sentence-2' class='sentence'><b>Rationale:</b> New functionality<a class='hidden_link' href='#library-4.sentence-2'>.</a></div> <br> <div id='library-4.sentence-3' class='sentence'><b>Effect on original feature:</b> The global namespace <span class='texttt'>posix</span> is now reserved for standardization<a class='hidden_link' href='#library-4.sentence-3'>.</a></div> <div id='library-4.sentence-4' class='sentence'>Valid
C++ 2003 code that uses a top-level namespace <span class='texttt'>posix</span> may be invalid in
this revision of C++<a class='hidden_link' href='#library-4.sentence-4'>.</a></div></div></div><div class='para' id='library-5'><div class='marginalizedparent'><a class='marginalized' href='#library-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2410'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='macro.names'>[macro.<span class='shy'></span>names]</a>
<br> <div id='library-5.sentence-1' class='sentence'><b>Change:</b> Additional restrictions on macro names<a class='hidden_link' href='#library-5.sentence-1'>.</a></div> <br> <div id='library-5.sentence-2' class='sentence'><b>Rationale:</b> Avoid hard to diagnose or non-portable constructs<a class='hidden_link' href='#library-5.sentence-2'>.</a></div> <br> <div id='library-5.sentence-3' class='sentence'><b>Effect on original feature:</b> Names of attribute identifiers may not be used as macro names<a class='hidden_link' href='#library-5.sentence-3'>.</a></div> <div id='library-5.sentence-4' class='sentence'>Valid C++ 2003
code that defines <span class='texttt'><span class='keyword'>override</span></span>, <span class='texttt'><span class='keyword'>final</span></span>, or
<span class='texttt'>noreturn</span> as macros is invalid in this
revision of C++<a class='hidden_link' href='#library-5.sentence-4'>.</a></div></div></div></div><div id='language.support' class='section'><h3 ><a class='secnum' href='#language.support' style='min-width:80pt'>C.6.8</a> <a href='support' title='17&emsp;Language support library'>[support]</a>:
language support library <a class='abbr_ref' href='diff.cpp03.language.support'>[diff.cpp03.language.support]</a></h3><div class='para' id='language.support-1'><div class='marginalizedparent'><a class='marginalized' href='#language.support-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2424'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='new.delete.single'>[new.<span class='shy'></span>delete.<span class='shy'></span>single]</a>
<br> <div id='language.support-1.sentence-1' class='sentence'><b>Change:</b> <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span> may throw exceptions other than
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>bad_<span class='shy'></span>alloc</span><a class='hidden_link' href='#language.support-1.sentence-1'>.</a></div> <br> <div id='language.support-1.sentence-2' class='sentence'><b>Rationale:</b> Consistent application of <span id=':noexcept_'><span class='texttt'><span class='keyword'>noexcept</span></span></span><a class='hidden_link' href='#language.support-1.sentence-2'>.</a></div> <br> <div id='language.support-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that assumes that global <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span> only
throws <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>bad_<span class='shy'></span>alloc</span> may execute differently in this revision of C++<a class='hidden_link' href='#language.support-1.sentence-3'>.</a></div> <div id='language.support-1.sentence-4' class='sentence'>Valid C++ 2003 code that replaces the global replaceable <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span>
is ill-formed in this revision of C++,
because the exception specification of <span class='texttt'><span class='keyword'>throw</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>bad_<span class='shy'></span>alloc<span class='parenthesis'>)</span></span>
was removed<a class='hidden_link' href='#language.support-1.sentence-4'>.</a></div></div></div></div><div id='diagnostics' class='section'><h3 ><a class='secnum' href='#diagnostics' style='min-width:80pt'>C.6.9</a> <a href='diagnostics' title='19&emsp;Diagnostics library'>[diagnostics]</a>: diagnostics library <a class='abbr_ref' href='diff.cpp03.diagnostics'>[diff.cpp03.diagnostics]</a></h3><div class='para' id='diagnostics-1'><div class='marginalizedparent'><a class='marginalized' href='#diagnostics-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2440'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='errno'>[errno]</a>
<br> <div id='diagnostics-1.sentence-1' class='sentence'><b>Change:</b> Thread-local error numbers<a class='hidden_link' href='#diagnostics-1.sentence-1'>.</a></div> <br> <div id='diagnostics-1.sentence-2' class='sentence'><b>Rationale:</b> Support for new thread facilities<a class='hidden_link' href='#diagnostics-1.sentence-2'>.</a></div> <br> <div id='diagnostics-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid but implementation-specific C++ 2003 code that relies on
<span class='texttt'>errno</span> being the same across threads may change behavior in this
revision of C++<a class='hidden_link' href='#diagnostics-1.sentence-3'>.</a></div></div></div></div><div id='utilities' class='section'><h3 ><a class='secnum' href='#utilities' style='min-width:80pt'>C.6.10</a> <a href='utilities' title='22&emsp;General utilities library'>[utilities]</a>: general utilities library <a class='abbr_ref' href='diff.cpp03.utilities'>[diff.cpp03.utilities]</a></h3><div class='para' id='utilities-1'><div class='marginalizedparent'><a class='marginalized' href='#utilities-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2452'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='refwrap'>[refwrap]</a>, <a href='arithmetic.operations'>[arithmetic.<span class='shy'></span>operations]</a>, <a href='comparisons'>[comparisons]</a>, <a href='logical.operations'>[logical.<span class='shy'></span>operations]</a>, and <a href='bitwise.operations'>[bitwise.<span class='shy'></span>operations]</a>
<br> <div id='utilities-1.sentence-1' class='sentence'><b>Change:</b> Standard function object types no longer derived from
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>unary_<span class='shy'></span>function</span> or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>binary_<span class='shy'></span>function</span><a class='hidden_link' href='#utilities-1.sentence-1'>.</a></div> <br> <div id='utilities-1.sentence-2' class='sentence'><b>Rationale:</b> Superseded by new feature; <span class='texttt'>unary_<span class='shy'></span>function</span> and
<span class='texttt'>binary_<span class='shy'></span>function</span> are no longer defined<a class='hidden_link' href='#utilities-1.sentence-2'>.</a></div> <br> <div id='utilities-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that depends on function object types being derived from
<span class='texttt'>unary_<span class='shy'></span>function</span> or <span class='texttt'>binary_<span class='shy'></span>function</span> may fail to compile
in this revision of C++<a class='hidden_link' href='#utilities-1.sentence-3'>.</a></div></div></div></div><div id='strings' class='section'><h3 ><a class='secnum' href='#strings' style='min-width:80pt'>C.6.11</a> <a href='strings' title='27&emsp;Strings library'>[strings]</a>: strings library <a class='abbr_ref' href='diff.cpp03.strings'>[diff.cpp03.strings]</a></h3><div class='para' id='strings-1'><div class='marginalizedparent'><a class='marginalized' href='#strings-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2466'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='string.classes'>[string.<span class='shy'></span>classes]</a>
<br> <div id='strings-1.sentence-1' class='sentence'><b>Change:</b> <span class='texttt'>basic_<span class='shy'></span>string</span> requirements no longer allow reference-counted
strings<a class='hidden_link' href='#strings-1.sentence-1'>.</a></div> <br> <div id='strings-1.sentence-2' class='sentence'><b>Rationale:</b> Invalidation is subtly different with reference-counted strings<a class='hidden_link' href='#strings-1.sentence-2'>.</a></div> <div id='strings-1.sentence-3' class='sentence'>This change regularizes behavior<a class='hidden_link' href='#strings-1.sentence-3'>.</a></div> <br> <div id='strings-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may execute differently in this revision of C++<a class='hidden_link' href='#strings-1.sentence-4'>.</a></div></div></div><div class='para' id='strings-2'><div class='marginalizedparent'><a class='marginalized' href='#strings-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2476'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='string.require'>[string.<span class='shy'></span>require]</a>
<br> <div id='strings-2.sentence-1' class='sentence'><b>Change:</b> Loosen <span class='texttt'>basic_<span class='shy'></span>string</span> invalidation rules<a class='hidden_link' href='#strings-2.sentence-1'>.</a></div> <br> <div id='strings-2.sentence-2' class='sentence'><b>Rationale:</b> Allow small-string optimization<a class='hidden_link' href='#strings-2.sentence-2'>.</a></div> <br> <div id='strings-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may execute differently in this revision of C++<a class='hidden_link' href='#strings-2.sentence-3'>.</a></div> <div id='strings-2.sentence-4' class='sentence'>Some <span id=':const'><span class='texttt'><span class='keyword'>const</span></span></span> member functions, such as <span class='texttt'>data</span> and <span class='texttt'>c_<span class='shy'></span>str</span>,
no longer invalidate iterators<a class='hidden_link' href='#strings-2.sentence-4'>.</a></div></div></div></div><div id='containers' class='section'><h3 ><a class='secnum' href='#containers' style='min-width:80pt'>C.6.12</a> <a href='containers' title='23&emsp;Containers library'>[containers]</a>: containers library <a class='abbr_ref' href='diff.cpp03.containers'>[diff.cpp03.containers]</a></h3><div class='para' id='containers-1'><div class='marginalizedparent'><a class='marginalized' href='#containers-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2488'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='container.requirements'>[container.<span class='shy'></span>requirements]</a>
<br> <div id='containers-1.sentence-1' class='sentence'><b>Change:</b> Complexity of <span class='texttt'>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> member functions now constant<a class='hidden_link' href='#containers-1.sentence-1'>.</a></div> <br> <div id='containers-1.sentence-2' class='sentence'><b>Rationale:</b> Lack of specification of complexity of <span class='texttt'>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> resulted in
divergent implementations with inconsistent performance characteristics<a class='hidden_link' href='#containers-1.sentence-2'>.</a></div> <br> <div id='containers-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Some container implementations that conform to C++ 2003 may not conform to the
specified <span class='texttt'>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> requirements in this revision of C++<a class='hidden_link' href='#containers-1.sentence-3'>.</a></div> <div id='containers-1.sentence-4' class='sentence'>Adjusting
containers such as <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>list</span> to the stricter requirements may require
incompatible changes<a class='hidden_link' href='#containers-1.sentence-4'>.</a></div></div></div><div class='para' id='containers-2'><div class='marginalizedparent'><a class='marginalized' href='#containers-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2500'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='container.requirements'>[container.<span class='shy'></span>requirements]</a>
<br> <div id='containers-2.sentence-1' class='sentence'><b>Change:</b> Requirements change: relaxation<a class='hidden_link' href='#containers-2.sentence-1'>.</a></div> <br> <div id='containers-2.sentence-2' class='sentence'><b>Rationale:</b> Clarification<a class='hidden_link' href='#containers-2.sentence-2'>.</a></div> <br> <div id='containers-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that attempts to meet the specified container requirements
may now be over-specified<a class='hidden_link' href='#containers-2.sentence-3'>.</a></div> <div id='containers-2.sentence-4' class='sentence'>Code that attempted to be portable across containers
may need to be adjusted as follows:
<ul class='itemize'><li id='containers-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#containers-2.1'>(2.1)</a></div>not all containers provide <span class='texttt'>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>; use <span class='texttt'>empty<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> instead
of <span class='texttt'>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span></span>;</li><li id='containers-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#containers-2.2'>(2.2)</a></div>not all containers are empty after construction (<span class='texttt'>array</span>);</li><li id='containers-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#containers-2.3'>(2.3)</a></div>not all containers have constant complexity for <span class='texttt'>swap<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> (<span class='texttt'>array</span>)<a class='hidden_link' href='#containers-2.sentence-4'>.</a></li></ul></div></div></div><div class='para' id='containers-3'><div class='marginalizedparent'><a class='marginalized' href='#containers-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2516'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='container.requirements'>[container.<span class='shy'></span>requirements]</a>
<br> <div id='containers-3.sentence-1' class='sentence'><b>Change:</b> Requirements change: default constructible<a class='hidden_link' href='#containers-3.sentence-1'>.</a></div> <br> <div id='containers-3.sentence-2' class='sentence'><b>Rationale:</b> Clarification of container requirements<a class='hidden_link' href='#containers-3.sentence-2'>.</a></div> <br> <div id='containers-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that attempts to explicitly instantiate a container using
a user-defined type with no default constructor may fail to compile<a class='hidden_link' href='#containers-3.sentence-3'>.</a></div></div></div><div class='para' id='containers-4'><div class='marginalizedparent'><a class='marginalized' href='#containers-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2525'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='sequence.reqmts'>[sequence.<span class='shy'></span>reqmts]</a> and <a href='associative.reqmts'>[associative.<span class='shy'></span>reqmts]</a>
<br> <div id='containers-4.sentence-1' class='sentence'><b>Change:</b> Signature changes: from <span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span> return types<a class='hidden_link' href='#containers-4.sentence-1'>.</a></div> <br> <div id='containers-4.sentence-2' class='sentence'><b>Rationale:</b> Old signature threw away useful information that may be expensive
to recalculate<a class='hidden_link' href='#containers-4.sentence-2'>.</a></div> <br> <div id='containers-4.sentence-3' class='sentence'><b>Effect on original feature:</b> The following member functions have changed:
<ul class='itemize'><li id='containers-4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#containers-4.1'>(4.1)</a></div><span class='texttt'>erase<span class='parenthesis'>(</span>iter<span class='parenthesis'>)</span></span> for <span class='texttt'>set</span>, <span class='texttt'>multiset</span>, <span class='texttt'>map</span>, <span class='texttt'>multimap</span></li><li id='containers-4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#containers-4.2'>(4.2)</a></div><span class='texttt'>erase<span class='parenthesis'>(</span>begin, end<span class='parenthesis'>)</span></span> for <span class='texttt'>set</span>, <span class='texttt'>multiset</span>, <span class='texttt'>map</span>, <span class='texttt'>multimap</span></li><li id='containers-4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#containers-4.3'>(4.3)</a></div><span class='texttt'>insert<span class='parenthesis'>(</span>pos, num, val<span class='parenthesis'>)</span></span> for <span class='texttt'>vector</span>, <span class='texttt'>deque</span>, <span class='texttt'>list</span>, <span class='texttt'>forward_<span class='shy'></span>list</span></li><li id='containers-4.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#containers-4.4'>(4.4)</a></div><span class='texttt'>insert<span class='parenthesis'>(</span>pos, beg, end<span class='parenthesis'>)</span></span> for <span class='texttt'>vector</span>, <span class='texttt'>deque</span>, <span class='texttt'>list</span>, <span class='texttt'>forward_<span class='shy'></span>list</span></li></ul></div></div><div class='texpara'><div id='containers-4.sentence-4' class='sentence'>Valid C++ 2003 code that relies on these functions returning <span id=':void_'><span class='texttt'><span class='keyword'>void</span></span></span>
(e.g., code that creates a pointer to member function that points to one
of these functions) will fail to compile with this revision of C++<a class='hidden_link' href='#containers-4.sentence-4'>.</a></div></div></div><div class='para' id='containers-5'><div class='marginalizedparent'><a class='marginalized' href='#containers-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2544'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='sequence.reqmts'>[sequence.<span class='shy'></span>reqmts]</a> and <a href='associative.reqmts'>[associative.<span class='shy'></span>reqmts]</a>
<br> <div id='containers-5.sentence-1' class='sentence'><b>Change:</b> Signature changes: from <span class='texttt'>iterator</span> to <span class='texttt'>const_<span class='shy'></span>iterator</span>
parameters<a class='hidden_link' href='#containers-5.sentence-1'>.</a></div> <br> <div id='containers-5.sentence-2' class='sentence'><b>Rationale:</b> Overspecification<a class='hidden_link' href='#containers-5.sentence-2'>.</a></div> <br> <div id='containers-5.sentence-3' class='sentence'><b>Effect on original feature:</b> The signatures of the following member functions changed from taking an
<span class='texttt'>iterator</span> to taking a <span class='texttt'>const_<span class='shy'></span>iterator</span>:
<ul class='itemize'><li id='containers-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#containers-5.1'>(5.1)</a></div><span class='texttt'>insert<span class='parenthesis'>(</span>iter, val<span class='parenthesis'>)</span></span> for <span class='texttt'>vector</span>, <span class='texttt'>deque</span>, <span class='texttt'>list</span>,
<span class='texttt'>set</span>, <span class='texttt'>multiset</span>, <span class='texttt'>map</span>, <span class='texttt'>multimap</span></li><li id='containers-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#containers-5.2'>(5.2)</a></div><span class='texttt'>insert<span class='parenthesis'>(</span>pos, beg, end<span class='parenthesis'>)</span></span> for <span class='texttt'>vector</span>, <span class='texttt'>deque</span>, <span class='texttt'>list</span>,
<span class='texttt'>forward_<span class='shy'></span>list</span></li><li id='containers-5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#containers-5.3'>(5.3)</a></div><span class='texttt'>erase<span class='parenthesis'>(</span>begin, end<span class='parenthesis'>)</span></span> for <span class='texttt'>set</span>, <span class='texttt'>multiset</span>, <span class='texttt'>map</span>, <span class='texttt'>multimap</span></li><li id='containers-5.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#containers-5.4'>(5.4)</a></div>all forms of <span class='texttt'>list<span class='operator'>&#x200b;::&#x200b;</span>splice</span></li><li id='containers-5.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#containers-5.5'>(5.5)</a></div>all forms of <span class='texttt'>list<span class='operator'>&#x200b;::&#x200b;</span>merge</span></li></ul></div></div><div class='texpara'><div id='containers-5.sentence-4' class='sentence'>Valid C++ 2003 code that uses these functions may fail to compile with this
revision of C++<a class='hidden_link' href='#containers-5.sentence-4'>.</a></div></div></div><div class='para' id='containers-6'><div class='marginalizedparent'><a class='marginalized' href='#containers-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2566'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='sequence.reqmts'>[sequence.<span class='shy'></span>reqmts]</a> and <a href='associative.reqmts'>[associative.<span class='shy'></span>reqmts]</a>
<br> <div id='containers-6.sentence-1' class='sentence'><b>Change:</b> Signature changes: <span class='texttt'>resize</span><a class='hidden_link' href='#containers-6.sentence-1'>.</a></div> <br> <div id='containers-6.sentence-2' class='sentence'><b>Rationale:</b> Performance, compatibility with move semantics<a class='hidden_link' href='#containers-6.sentence-2'>.</a></div> <br> <div id='containers-6.sentence-3' class='sentence'><b>Effect on original feature:</b> For <span class='texttt'>vector</span>, <span class='texttt'>deque</span>, and <span class='texttt'>list</span>
the fill value passed to <span class='texttt'>resize</span> is now passed by reference instead of
by value, and an additional overload of <span class='texttt'>resize</span> has been added<a class='hidden_link' href='#containers-6.sentence-3'>.</a></div> <div id='containers-6.sentence-4' class='sentence'>Valid
C++ 2003 code that uses this function may fail to compile with this revision of C++<a class='hidden_link' href='#containers-6.sentence-4'>.</a></div></div></div></div><div id='algorithms' class='section'><h3 ><a class='secnum' href='#algorithms' style='min-width:80pt'>C.6.13</a> <a href='algorithms' title='26&emsp;Algorithms library'>[algorithms]</a>: algorithms library <a class='abbr_ref' href='diff.cpp03.algorithms'>[diff.cpp03.algorithms]</a></h3><div class='para' id='algorithms-1'><div class='marginalizedparent'><a class='marginalized' href='#algorithms-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2579'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='algorithms.general'>[algorithms.<span class='shy'></span>general]</a>
<br> <div id='algorithms-1.sentence-1' class='sentence'><b>Change:</b> Result state of inputs after application of some algorithms<a class='hidden_link' href='#algorithms-1.sentence-1'>.</a></div> <br> <div id='algorithms-1.sentence-2' class='sentence'><b>Rationale:</b> Required by new feature<a class='hidden_link' href='#algorithms-1.sentence-2'>.</a></div> <br> <div id='algorithms-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2003 program may detect that an object with a valid but
unspecified state has a different valid but unspecified state with this
revision of C++<a class='hidden_link' href='#algorithms-1.sentence-3'>.</a></div> <div id='algorithms-1.sentence-4' class='sentence'>For example, <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>remove</span> and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>remove_<span class='shy'></span>if</span> may leave the tail of the input sequence with a
different set of values than previously<a class='hidden_link' href='#algorithms-1.sentence-4'>.</a></div></div></div></div><div id='numerics' class='section'><h3 ><a class='secnum' href='#numerics' style='min-width:80pt'>C.6.14</a> <a href='numerics' title='29&emsp;Numerics library'>[numerics]</a>: numerics library <a class='abbr_ref' href='diff.cpp03.numerics'>[diff.cpp03.numerics]</a></h3><div class='para' id='numerics-1'><div class='marginalizedparent'><a class='marginalized' href='#numerics-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2593'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='complex.numbers'>[complex.<span class='shy'></span>numbers]</a>
<br> <div id='numerics-1.sentence-1' class='sentence'><b>Change:</b> Specified representation of complex numbers<a class='hidden_link' href='#numerics-1.sentence-1'>.</a></div> <br> <div id='numerics-1.sentence-2' class='sentence'><b>Rationale:</b> Compatibility with C99<a class='hidden_link' href='#numerics-1.sentence-2'>.</a></div> <br> <div id='numerics-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that uses implementation-specific knowledge about the
binary representation of the required template specializations of
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>complex</span> may not be compatible with this revision of C++<a class='hidden_link' href='#numerics-1.sentence-3'>.</a></div></div></div></div><div id='locale' class='section'><h3 ><a class='secnum' href='#locale' style='min-width:80pt'>C.6.15</a> <a href='localization' title='28.3&emsp;Localization library'>[localization]</a>: localization library <a class='abbr_ref' href='diff.cpp03.locale'>[diff.cpp03.locale]</a></h3><div class='para' id='locale-1'><div class='marginalizedparent'><a class='marginalized' href='#locale-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2605'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='facet.num.get.virtuals'>[facet.<span class='shy'></span>num.<span class='shy'></span>get.<span class='shy'></span>virtuals]</a>
<br> <div id='locale-1.sentence-1' class='sentence'><b>Change:</b> The <span class='texttt'>num_<span class='shy'></span>get</span> facet recognizes hexadecimal floating point values<a class='hidden_link' href='#locale-1.sentence-1'>.</a></div> <br> <div id='locale-1.sentence-2' class='sentence'><b>Rationale:</b> Required by new feature<a class='hidden_link' href='#locale-1.sentence-2'>.</a></div> <br> <div id='locale-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may have different behavior in this revision of C++<a class='hidden_link' href='#locale-1.sentence-3'>.</a></div></div></div></div><div id='input.output' class='section'><h3 ><a class='secnum' href='#input.output' style='min-width:80pt'>C.6.16</a> <a href='input.output' title='31&emsp;Input/output library'>[input.<span class='shy'></span>output]</a>: input/output library <a class='abbr_ref' href='diff.cpp03.input.output'>[diff.cpp03.input.output]</a></h3><div class='para' id='input.output-1'><div class='marginalizedparent'><a class='marginalized' href='#input.output-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2615'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='istream.sentry'>[istream.<span class='shy'></span>sentry]</a>, <a href='ostream.sentry'>[ostream.<span class='shy'></span>sentry]</a>, and <a href='iostate.flags'>[iostate.<span class='shy'></span>flags]</a>
<br> <div id='input.output-1.sentence-1' class='sentence'><b>Change:</b> Specify use of <span id=':explicit'><span class='texttt'><span class='keyword'>explicit</span></span></span> in existing boolean conversion functions<a class='hidden_link' href='#input.output-1.sentence-1'>.</a></div> <br> <div id='input.output-1.sentence-2' class='sentence'><b>Rationale:</b> Clarify intentions, avoid workarounds<a class='hidden_link' href='#input.output-1.sentence-2'>.</a></div> <br> <div id='input.output-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that relies on implicit boolean conversions will fail to
compile with this revision of C++<a class='hidden_link' href='#input.output-1.sentence-3'>.</a></div> <div id='input.output-1.sentence-4' class='sentence'>Such conversions occur in the
following conditions:
<ul class='itemize'><li id='input.output-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#input.output-1.1'>(1.1)</a></div>passing a value to a function that takes an argument of type <span class='texttt'><span class='keyword'>bool</span></span>;</li><li id='input.output-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#input.output-1.2'>(1.2)</a></div>using <span class='texttt'><span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span></span> to compare to <span class='texttt'><span class='literal'>false</span></span> or <span class='texttt'><span class='literal'>true</span></span>;</li><li id='input.output-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#input.output-1.3'>(1.3)</a></div>returning a value from a function with a return type of <span class='texttt'><span class='keyword'>bool</span></span>;</li><li id='input.output-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#input.output-1.4'>(1.4)</a></div>initializing members of type <span class='texttt'><span class='keyword'>bool</span></span> via aggregate initialization;</li><li id='input.output-1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#input.output-1.5'>(1.5)</a></div>initializing a <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>bool</span><span class='operator'>&amp;</span></span> which would bind to a temporary object<a class='hidden_link' href='#input.output-1.sentence-4'>.</a></li></ul></div></div></div><div class='para' id='input.output-2'><div class='marginalizedparent'><a class='marginalized' href='#input.output-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2632'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='ios.failure'>[ios.<span class='shy'></span>failure]</a>
<br> <div id='input.output-2.sentence-1' class='sentence'><b>Change:</b> Change base class of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>ios_<span class='shy'></span>base<span class='operator'>&#x200b;::&#x200b;</span>failure</span><a class='hidden_link' href='#input.output-2.sentence-1'>.</a></div> <br> <div id='input.output-2.sentence-2' class='sentence'><b>Rationale:</b> More detailed error messages<a class='hidden_link' href='#input.output-2.sentence-2'>.</a></div> <br> <div id='input.output-2.sentence-3' class='sentence'><b>Effect on original feature:</b> <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>ios_<span class='shy'></span>base<span class='operator'>&#x200b;::&#x200b;</span>failure</span> is no longer derived directly from
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>exception</span>, but is now derived from <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>system_<span class='shy'></span>error</span>,
which in turn is derived from <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>runtime_<span class='shy'></span>error</span><a class='hidden_link' href='#input.output-2.sentence-3'>.</a></div> <div id='input.output-2.sentence-4' class='sentence'>Valid C++ 2003 code
that assumes that <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>ios_<span class='shy'></span>base<span class='operator'>&#x200b;::&#x200b;</span>failure</span> is derived directly from
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>exception</span> may execute differently in this revision of C++<a class='hidden_link' href='#input.output-2.sentence-4'>.</a></div></div></div><div class='para' id='input.output-3'><div class='marginalizedparent'><a class='marginalized' href='#input.output-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/compatibility.tex#L2644'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='ios.base'>[ios.<span class='shy'></span>base]</a>
<br> <div id='input.output-3.sentence-1' class='sentence'><b>Change:</b> Flag types in <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>ios_<span class='shy'></span>base</span> are now bitmasks with values
defined as constexpr static members<a class='hidden_link' href='#input.output-3.sentence-1'>.</a></div> <br> <div id='input.output-3.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#input.output-3.sentence-2'>.</a></div> <br> <div id='input.output-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that relies on <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>ios_<span class='shy'></span>base</span> flag types being
represented as <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>bitset</span> or as an integer type may fail to compile
with this revision of C++<a class='hidden_link' href='#input.output-3.sentence-3'>.</a></div> <div id='input.output-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#input.output-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>iostream<span class='anglebracket'>&gt;</span>

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> flag <span class='operator'>=</span> std<span class='operator'>::</span>ios_base<span class='operator'>::</span>hex;
  std<span class='operator'>::</span>cout<span class='operator'>.</span>setf<span class='parenthesis'>(</span>flag<span class='parenthesis'>)</span>;         <span class='comment'>// error: <span class='tcode_in_codeblock'>setf</span> does not take argument of type <span class='tcode_in_codeblock'>int</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></div></body></html>