<!DOCTYPE html><html lang='en'><head><title>[any]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>20</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><div id='any'><h2 ><a class='secnum' style='min-width:88pt'>20.8</a> Storage for any type <a class='abbr_ref'>[any]</a></h2><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5311'>#</a></div><p >This section describes components that C++ programs may use to perform operations on objects of a discriminated type.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5314'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
The discriminated type may contain values of different types but does not attempt conversion between them,
i.e. <span class='texttt'>5</span> is held strictly as an <span class='texttt'>int</span> and is not implicitly convertible either to <span class='texttt'>"5"</span> or to <span class='texttt'>5.0</span>.
This indifference to interpretation but awareness of type effectively allows safe, generic containers of single values, with no scope for surprises from ambiguous conversions.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div id='synop'><h3 ><a class='secnum' href='#synop' style='min-width:103pt'>20.8.1</a> Header <span class='texttt'>&lt;any&gt;</span> synopsis <a class='abbr_ref' href='any.synop'>[any.synop]</a></h3><p ><span class='indexparent'><a class='index' id='any'></a></span><span class='indexparent'><a class='index' id='any'></a></span>
</p><pre class='codeblock'>
namespace std {
  <span class='comment'>// <a href='any.bad_any_cast'>[any.bad_any_cast]</a>, class <span class='tcode_in_codeblock'>bad_&shy;any_&shy;cast</span>
</span>  class bad_any_cast;

  <span class='comment'>// <a href='any.class'>[any.class]</a>, class <span class='tcode_in_codeblock'>any</span>
</span>  class any;

  <span class='comment'>// <a href='any.nonmembers'>[any.nonmembers]</a>, non-member functions
</span>  void swap(any&amp; x, any&amp; y) noexcept;

  template &lt;class T, class... Args&gt;
    any make_any(Args&amp;&amp; ...args);
  template &lt;class T, class U, class... Args&gt;
    any make_any(initializer_list&lt;U&gt; il, Args&amp;&amp; ...args);

  template&lt;class T&gt;
    T any_cast(const any&amp; operand);
  template&lt;class T&gt;
    T any_cast(any&amp; operand);
  template&lt;class T&gt;
    T any_cast(any&amp;&amp; operand);

  template&lt;class T&gt;
    const T* any_cast(const any* operand) noexcept;
  template&lt;class T&gt;
    T* any_cast(any* operand) noexcept;
}</pre></div><div id='bad_any_cast'><h3 ><a class='secnum' href='#bad_any_cast' style='min-width:103pt'>20.8.2</a> Class <span class='texttt'>bad_&shy;any_&shy;cast</span> <a class='abbr_ref' href='any.bad_any_cast'>[any.bad_any_cast]</a></h3><p ><span class='indexparent'><a class='index' id='bad_any_cast'></a></span></p><pre class='codeblock'>
class bad_any_cast : public bad_cast {
public:
  const char* what() const noexcept override;
};</pre><div class='para' id='bad_any_cast-1'><div class='marginalizedparent'><a class='marginalized' href='#bad_any_cast-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5366'>#</a></div><p >Objects of type <span class='texttt'>bad_&shy;any_&shy;cast</span> are thrown by a failed <span class='texttt'>any_&shy;cast</span> (<a href='any.nonmembers'>[any.nonmembers]</a>).</p></div></div><div id='class'><h3 ><a class='secnum' href='#class' style='min-width:103pt'>20.8.3</a> Class <span class='texttt'>any</span> <a class='abbr_ref' href='any.class'>[any.class]</a></h3><pre class='codeblock'>
class any {
public:
  <span class='comment'>// <a href='any.cons'>[any.cons]</a>, construction and destruction
</span>  constexpr any() noexcept;

  any(const any&amp; other);
  any(any&amp;&amp; other) noexcept;

  template &lt;class T&gt; any(T&amp;&amp; value);

  template &lt;class T, class... Args&gt;
    explicit any(in_place_type_t&lt;T&gt;, Args&amp;&amp;...);
  template &lt;class T, class U, class... Args&gt;
    explicit any(in_place_type_t&lt;T&gt;, initializer_list&lt;U&gt;, Args&amp;&amp;...);

  ~any();

  <span class='comment'>// <a href='any.assign'>[any.assign]</a>, assignments
</span>  any&amp; operator=(const any&amp; rhs);
  any&amp; operator=(any&amp;&amp; rhs) noexcept;

  template &lt;class T&gt; any&amp; operator=(T&amp;&amp; rhs);

  <span class='comment'>// <a href='any.modifiers'>[any.modifiers]</a>, modifiers
</span>  template &lt;class T, class... Args&gt;
    void emplace(Args&amp;&amp; ...);
  template &lt;class T, class U, class... Args&gt;
    void emplace(initializer_list&lt;U&gt;, Args&amp;&amp;...);
  void reset() noexcept;
  void swap(any&amp; rhs) noexcept;

  <span class='comment'>// <a href='any.observers'>[any.observers]</a>, observers
</span>  bool has_value() const noexcept;
  const type_info&amp; type() const noexcept;
};</pre><div class='para' id='class-1'><div class='marginalizedparent'><a class='marginalized' href='#class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5409'>#</a></div><p >An object of class <span class='texttt'>any</span> stores an instance of any type that satisfies the constructor requirements or it has no value,
and this is referred to as the <a class='hidden_link' href='#def:state' id='def:state'><i>state</i></a> of the class <span class='texttt'>any</span> object.
The stored instance is called the <a class='hidden_link' href='#def:contained_object' id='def:contained_object'><i>contained object</i></a>.
Two states are equivalent if either they both have no value, or both have a value and the contained objects are equivalent.</p></div><div class='para' id='class-2'><div class='marginalizedparent'><a class='marginalized' href='#class-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5415'>#</a></div><p >The non-member <span class='texttt'>any_&shy;cast</span> functions provide type-safe access to the contained object.</p></div><div class='para' id='class-3'><div class='marginalizedparent'><a class='marginalized' href='#class-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5418'>#</a></div><p >Implementations should avoid the use of dynamically allocated memory for a small contained object.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
where the object constructed is holding only an <span class='texttt'>int</span>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]
Such small-object optimization shall only be applied to types <span class='texttt'>T</span> for which
<span class='texttt'>is_&shy;nothrow_&shy;move_&shy;constructible_&shy;v&lt;T&gt;</span> is <span class='texttt'>true</span>.</p></div><div id='cons'><h4 ><a class='secnum' href='#cons' style='min-width:118pt'>20.8.3.1</a> Construction and destruction <a class='abbr_ref' href='any.cons'>[any.cons]</a></h4><p ><span class='indexparent'><a class='index' id='any,constructor'></a></span></p><p ><code class='itemdecl'>constexpr any() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='cons-1'><div class='marginalizedparent'><a class='marginalized' href='#cons-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5434'>#</a></div><p ><span class='textit'>Postconditions:</span>
<span class='texttt'>has_&shy;value()</span> is <span class='texttt'>false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='any,constructor'></a></span></p><p ><code class='itemdecl'>any(const any&amp; other);
</code></p><div class='itemdescr'></div><div class='para' id='cons-2'><div class='marginalizedparent'><a class='marginalized' href='#cons-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5445'>#</a></div><p ><span class='textit'>Effects:</span>
Constructs an object of type <span class='texttt'>any</span> with an equivalent state as <span class='texttt'>other</span>.</p></div></div><div class='para' id='cons-3'><div class='marginalizedparent'><a class='marginalized' href='#cons-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5449'>#</a></div><p ><span class='textit'>Throws:</span>
Any exceptions arising from calling the selected constructor of the contained object.
</p></div></div><p ><span class='indexparent'><a class='index' id='any,constructor'></a></span></p><p ><code class='itemdecl'>any(any&amp;&amp; other) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='cons-4'><div class='marginalizedparent'><a class='marginalized' href='#cons-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5460'>#</a></div><p ><span class='textit'>Effects:</span>
Constructs an object of type <span class='texttt'>any</span> with a state equivalent to the original state of <span class='texttt'>other</span>.</p></div></div><div class='para' id='cons-5'><div class='marginalizedparent'><a class='marginalized' href='#cons-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5464'>#</a></div><p ><span class='textit'>Postconditions:</span>
<span class='texttt'>other</span> is left in a valid but otherwise unspecified state.
</p></div></div><p ><span class='indexparent'><a class='index' id='any,constructor'></a></span></p><p ><code class='itemdecl'>template&lt;class T&gt;
  any(T&amp;&amp; value);
</code></p><div class='itemdescr'></div><div class='para' id='cons-6'><div class='marginalizedparent'><a class='marginalized' href='#cons-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5476'>#</a></div><p >Let <span class='texttt'>VT</span> be <span class='texttt'>decay_&shy;t&lt;T&gt;</span>.</p></div></div><div class='para' id='cons-7'><div class='marginalizedparent'><a class='marginalized' href='#cons-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5479'>#</a></div><p ><span class='textit'>Requires:</span>
<span class='texttt'>VT</span> shall satisfy the <span class='texttt'>CopyConstructible</span> requirements.</p></div></div><div class='para' id='cons-8'><div class='marginalizedparent'><a class='marginalized' href='#cons-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5483'>#</a></div><p ><span class='textit'>Effects:</span>
Constructs an object of type <span class='texttt'>any</span> that contains an object of type <span class='texttt'>VT</span> direct-initialized with <span class='texttt'>std&#x200b;::&#x200b;forward&lt;T&gt;(value)</span>.</p></div></div><div class='para' id='cons-9'><div class='marginalizedparent'><a class='marginalized' href='#cons-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5487'>#</a></div><p ><span class='textit'>Remarks:</span>
This constructor shall not participate in overload resolution unless
<span class='texttt'>VT</span> is not the same type as <span class='texttt'>any</span>,
<span class='texttt'>VT</span> is not a specialization of <span class='texttt'>in_&shy;place_&shy;type_&shy;t</span>,
and <span class='texttt'>is_&shy;copy_&shy;constructible_&shy;v&lt;VT&gt;</span> is <span class='texttt'>true</span>.</p></div></div><div class='para' id='cons-10'><div class='marginalizedparent'><a class='marginalized' href='#cons-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5494'>#</a></div><p ><span class='textit'>Throws:</span>
Any exception thrown by the selected constructor of <span class='texttt'>VT</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='any,constructor'></a></span></p><p ><code class='itemdecl'>template &lt;class T, class... Args&gt;
  explicit any(in_place_type_t&lt;T&gt;, Args&amp;&amp;... args);
</code></p><div class='itemdescr'></div><div class='para' id='cons-11'><div class='marginalizedparent'><a class='marginalized' href='#cons-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5506'>#</a></div><p >Let <span class='texttt'>VT</span> be <span class='texttt'>decay_&shy;t&lt;T&gt;</span>.</p></div></div><div class='para' id='cons-12'><div class='marginalizedparent'><a class='marginalized' href='#cons-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5509'>#</a></div><p ><span class='textit'>Requires:</span> <span class='texttt'>VT</span> shall satisfy the <span class='texttt'>CopyConstructible</span> requirements.</p></div></div><div class='para' id='cons-13'><div class='marginalizedparent'><a class='marginalized' href='#cons-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5512'>#</a></div><p ><span class='textit'>Effects:</span> Initializes the contained value as if direct-non-list-initializing an object of
type <span class='texttt'>VT</span> with the arguments <span class='texttt'>std&#x200b;::&#x200b;forward&lt;Args&gt;(args)...</span>.</p></div></div><div class='para' id='cons-14'><div class='marginalizedparent'><a class='marginalized' href='#cons-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5516'>#</a></div><p ><span class='textit'>Postconditions:</span> <span class='texttt'>*this</span> contains a value of type <span class='texttt'>VT</span>.</p></div></div><div class='para' id='cons-15'><div class='marginalizedparent'><a class='marginalized' href='#cons-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5519'>#</a></div><p ><span class='textit'>Throws:</span> Any exception thrown by the selected constructor of <span class='texttt'>VT</span>.</p></div></div><div class='para' id='cons-16'><div class='marginalizedparent'><a class='marginalized' href='#cons-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5522'>#</a></div><p ><span class='textit'>Remarks:</span>
This constructor shall not participate in overload resolution unless
<span class='texttt'>is_&shy;copy_&shy;constructible_&shy;v&lt;VT&gt;</span> is <span class='texttt'>true</span> and
<span class='texttt'>is_&shy;constructible_&shy;v&lt;VT, Args...&gt;</span> is <span class='texttt'>true</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='any,constructor'></a></span></p><p ><code class='itemdecl'>template &lt;class T, class U, class... Args&gt;
  explicit any(in_place_type_t&lt;T&gt;, initializer_list&lt;U&gt; il, Args&amp;&amp;... args);
</code></p><div class='itemdescr'></div><div class='para' id='cons-17'><div class='marginalizedparent'><a class='marginalized' href='#cons-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5536'>#</a></div><p >Let <span class='texttt'>VT</span> be <span class='texttt'>decay_&shy;t&lt;T&gt;</span>.</p></div></div><div class='para' id='cons-18'><div class='marginalizedparent'><a class='marginalized' href='#cons-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5539'>#</a></div><p ><span class='textit'>Requires:</span> <span class='texttt'>VT</span> shall satisfy the <span class='texttt'>CopyConstructible</span> requirements.</p></div></div><div class='para' id='cons-19'><div class='marginalizedparent'><a class='marginalized' href='#cons-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5542'>#</a></div><p ><span class='textit'>Effects:</span> Initializes the contained value as if direct-non-list-initializing an object of
type <span class='texttt'>VT</span> with the arguments <span class='texttt'>il, std&#x200b;::&#x200b;forward&lt;Args&gt;(args)...</span>.</p></div></div><div class='para' id='cons-20'><div class='marginalizedparent'><a class='marginalized' href='#cons-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5546'>#</a></div><p ><span class='textit'>Postconditions:</span> <span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='cons-21'><div class='marginalizedparent'><a class='marginalized' href='#cons-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5549'>#</a></div><p ><span class='textit'>Throws:</span> Any exception thrown by the selected constructor of <span class='texttt'>VT</span>.</p></div></div><div class='para' id='cons-22'><div class='marginalizedparent'><a class='marginalized' href='#cons-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5552'>#</a></div><p ><span class='textit'>Remarks:</span>
This constructor shall not participate in overload resolution unless
<span class='texttt'>is_&shy;copy_&shy;constructible_&shy;v&lt;VT&gt;</span> is <span class='texttt'>true</span> and
<span class='texttt'>is_&shy;constructible_&shy;v&lt;VT, initializer_&shy;list&lt;U&gt;&amp;, Args...&gt;</span> is <span class='texttt'>true</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='any,destructor'></a></span>
</p><p ><code class='itemdecl'>~any();
</code></p><div class='itemdescr'></div><div class='para' id='cons-23'><div class='marginalizedparent'><a class='marginalized' href='#cons-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5565'>#</a></div><p ><span class='textit'>Effects:</span>
As if by <span class='texttt'>reset()</span>.
</p></div></div></div><div id='assign'><h4 ><a class='secnum' href='#assign' style='min-width:118pt'>20.8.3.2</a> Assignment <a class='abbr_ref' href='any.assign'>[any.assign]</a></h4><p ><span class='indexparent'><a class='index' id='operator=,any'></a></span><span class='indexparent'><a class='index' id='any,operator='></a></span></p><p ><code class='itemdecl'>any&amp; operator=(const any&amp; rhs);
</code></p><div class='itemdescr'></div><div class='para' id='assign-1'><div class='marginalizedparent'><a class='marginalized' href='#assign-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5578'>#</a></div><p ><span class='textit'>Effects:</span>
As if by <span class='texttt'>any(rhs).swap(*this)</span>.
No effects if an exception is thrown.</p></div></div><div class='para' id='assign-2'><div class='marginalizedparent'><a class='marginalized' href='#assign-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5583'>#</a></div><p ><span class='textit'>Returns:</span>
<span class='texttt'>*this</span>.</p></div></div><div class='para' id='assign-3'><div class='marginalizedparent'><a class='marginalized' href='#assign-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5587'>#</a></div><p ><span class='textit'>Throws:</span>
Any exceptions arising from the copy constructor of the contained object.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator=,any'></a></span><span class='indexparent'><a class='index' id='any,operator='></a></span></p><p ><code class='itemdecl'>any&amp; operator=(any&amp;&amp; rhs) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='assign-4'><div class='marginalizedparent'><a class='marginalized' href='#assign-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5598'>#</a></div><p ><span class='textit'>Effects:</span>
As if by <span class='texttt'>any(std&#x200b;::&#x200b;move(rhs)).swap(*this)</span>.</p></div></div><div class='para' id='assign-5'><div class='marginalizedparent'><a class='marginalized' href='#assign-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5602'>#</a></div><p ><span class='textit'>Returns:</span>
<span class='texttt'>*this</span>.</p></div></div><div class='para' id='assign-6'><div class='marginalizedparent'><a class='marginalized' href='#assign-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5606'>#</a></div><p ><span class='textit'>Postconditions:</span>
The state of <span class='texttt'>*this</span> is equivalent to the original state of <span class='texttt'>rhs</span>
and <span class='texttt'>rhs</span> is left in a valid but otherwise unspecified state.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator=,any'></a></span><span class='indexparent'><a class='index' id='any,operator='></a></span></p><p ><code class='itemdecl'>template&lt;class T&gt;
  any&amp; operator=(T&amp;&amp; rhs);
</code></p><div class='itemdescr'></div><div class='para' id='assign-7'><div class='marginalizedparent'><a class='marginalized' href='#assign-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5619'>#</a></div><p >Let <span class='texttt'>VT</span> be <span class='texttt'>decay_&shy;t&lt;T&gt;</span>.</p></div></div><div class='para' id='assign-8'><div class='marginalizedparent'><a class='marginalized' href='#assign-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5622'>#</a></div><p ><span class='textit'>Requires:</span>
<span class='texttt'>VT</span> shall satisfy the <span class='texttt'>CopyConstructible</span> requirements.</p></div></div><div class='para' id='assign-9'><div class='marginalizedparent'><a class='marginalized' href='#assign-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5626'>#</a></div><p ><span class='textit'>Effects:</span>
Constructs an object <span class='texttt'>tmp</span> of type <span class='texttt'>any</span> that contains an object of type <span class='texttt'>VT</span> direct-initialized with <span class='texttt'>std&#x200b;::&#x200b;forward&lt;T&gt;(rhs)</span>, and <span class='texttt'>tmp.swap(*this)</span>.
No effects if an exception is thrown.</p></div></div><div class='para' id='assign-10'><div class='marginalizedparent'><a class='marginalized' href='#assign-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5631'>#</a></div><p ><span class='textit'>Returns:</span>
<span class='texttt'>*this</span>.</p></div></div><div class='para' id='assign-11'><div class='marginalizedparent'><a class='marginalized' href='#assign-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5635'>#</a></div><p ><span class='textit'>Remarks:</span>
This operator shall not participate in overload resolution unless
<span class='texttt'>T</span> is not the same type as <span class='texttt'>any</span> and
<span class='texttt'>is_&shy;copy_&shy;constructible_&shy;v&lt;T&gt;</span> is <span class='texttt'>true</span>.</p></div></div><div class='para' id='assign-12'><div class='marginalizedparent'><a class='marginalized' href='#assign-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5641'>#</a></div><p ><span class='textit'>Throws:</span>
Any exception thrown by the selected constructor of <span class='texttt'>T</span>.
</p></div></div></div><div id='modifiers'><h4 ><a class='secnum' href='#modifiers' style='min-width:118pt'>20.8.3.3</a> Modifiers <a class='abbr_ref' href='any.modifiers'>[any.modifiers]</a></h4><p ><span class='indexparent'><a class='index' id='emplace,any'></a></span><span class='indexparent'><a class='index' id='any,emplace'></a></span></p><p ><code class='itemdecl'>template &lt;class T, class... Args&gt;
  void emplace(Args&amp;&amp;... args);
</code></p><div class='itemdescr'></div><div class='para' id='modifiers-1'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5655'>#</a></div><p >Let <span class='texttt'>VT</span> be <span class='texttt'>decay_&shy;t&lt;T&gt;</span>.</p></div></div><div class='para' id='modifiers-2'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5658'>#</a></div><p ><span class='textit'>Requires:</span>
<span class='texttt'>VT</span> shall satisfy the <span class='texttt'>CopyConstructible</span> requirements.</p></div></div><div class='para' id='modifiers-3'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5662'>#</a></div><p ><span class='textit'>Effects:</span> Calls <span class='texttt'>reset()</span>.
Then initializes the contained value as if direct-non-list-initializing
an object of type <span class='texttt'>VT</span> with the arguments <span class='texttt'>std&#x200b;::&#x200b;forward&lt;Args&gt;(args)...</span>.</p></div></div><div class='para' id='modifiers-4'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5667'>#</a></div><p ><span class='textit'>Postconditions:</span> <span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='modifiers-5'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5670'>#</a></div><p ><span class='textit'>Throws:</span> Any exception thrown by the selected constructor of <span class='texttt'>VT</span>.</p></div></div><div class='para' id='modifiers-6'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5673'>#</a></div><p ><span class='textit'>Remarks:</span> If an exception is thrown during the call to <span class='texttt'>VT</span>'s constructor,
<span class='texttt'>*this</span> does not contain a value, and any previously contained object
has been destroyed.
This function shall not participate in overload resolution unless
<span class='texttt'>is_&shy;copy_&shy;constructible_&shy;v&lt;VT&gt;</span> is <span class='texttt'>true</span> and
<span class='texttt'>is_&shy;constructible_&shy;v&lt;VT, Args...&gt;</span> is <span class='texttt'>true</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='emplace,any'></a></span><span class='indexparent'><a class='index' id='any,emplace'></a></span></p><p ><code class='itemdecl'>template &lt;class T, class U, class... Args&gt;
  void emplace(initializer_list&lt;U&gt; il, Args&amp;&amp;... args);
</code></p><div class='itemdescr'></div><div class='para' id='modifiers-7'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5689'>#</a></div><p >Let <span class='texttt'>VT</span> be <span class='texttt'>decay_&shy;t&lt;T&gt;</span>.</p></div></div><div class='para' id='modifiers-8'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5692'>#</a></div><p ><span class='textit'>Requires:</span>
<span class='texttt'>VT</span> shall satisfy the <span class='texttt'>CopyConstructible</span> requirements.</p></div></div><div class='para' id='modifiers-9'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5696'>#</a></div><p ><span class='textit'>Effects:</span> Calls <span class='texttt'>reset()</span>. Then initializes the contained value
as if direct-non-list-initializing an object of type <span class='texttt'>VT</span> with the arguments
<span class='texttt'>il, std&#x200b;::&#x200b;forward&lt;Args&gt;(args)...</span>.</p></div></div><div class='para' id='modifiers-10'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5701'>#</a></div><p ><span class='textit'>Postconditions:</span> <span class='texttt'>*this</span> contains a value.</p></div></div><div class='para' id='modifiers-11'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5704'>#</a></div><p ><span class='textit'>Throws:</span> Any exception thrown by the selected constructor of <span class='texttt'>VT</span>.</p></div></div><div class='para' id='modifiers-12'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5707'>#</a></div><p ><span class='textit'>Remarks:</span> If an exception is thrown during the call to <span class='texttt'>VT</span>'s constructor,
<span class='texttt'>*this</span> does not contain a value, and any previously contained object
has been destroyed.
The function shall not participate in overload resolution unless
<span class='texttt'>is_&shy;copy_&shy;constructible_&shy;v&lt;VT&gt;</span> is <span class='texttt'>true</span> and
<span class='texttt'>is_&shy;constructible_&shy;v&lt;VT, initializer_&shy;list&lt;U&gt;&amp;, Args...&gt;</span> is <span class='texttt'>true</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='reset,any'></a></span><span class='indexparent'><a class='index' id='any,reset'></a></span></p><p ><code class='itemdecl'>void reset() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='modifiers-13'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5722'>#</a></div><p ><span class='textit'>Effects:</span>
If <span class='texttt'>has_&shy;value()</span> is <span class='texttt'>true</span>, destroys the contained object.</p></div></div><div class='para' id='modifiers-14'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5726'>#</a></div><p ><span class='textit'>Postconditions:</span>
<span class='texttt'>has_&shy;value()</span> is <span class='texttt'>false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='swap,any'></a></span><span class='indexparent'><a class='index' id='any,swap'></a></span></p><p ><code class='itemdecl'>void swap(any&amp; rhs) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='modifiers-15'><div class='marginalizedparent'><a class='marginalized' href='#modifiers-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5738'>#</a></div><p ><span class='textit'>Effects:</span>
Exchanges the states of <span class='texttt'>*this</span> and <span class='texttt'>rhs</span>.
</p></div></div></div><div id='observers'><h4 ><a class='secnum' href='#observers' style='min-width:118pt'>20.8.3.4</a> Observers <a class='abbr_ref' href='any.observers'>[any.observers]</a></h4><p ><span class='indexparent'><a class='index' id='has_value,any'></a></span><span class='indexparent'><a class='index' id='any,has_value'></a></span></p><p ><code class='itemdecl'>bool has_value() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='observers-1'><div class='marginalizedparent'><a class='marginalized' href='#observers-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5751'>#</a></div><p ><span class='textit'>Returns:</span>
<span class='texttt'>true</span> if <span class='texttt'>*this</span> contains an object, otherwise <span class='texttt'>false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='type,any'></a></span><span class='indexparent'><a class='index' id='any,type'></a></span></p><p ><code class='itemdecl'>const type_info&amp; type() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='observers-2'><div class='marginalizedparent'><a class='marginalized' href='#observers-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5762'>#</a></div><p ><span class='textit'>Returns:</span>
<span class='texttt'>typeid(T)</span> if <span class='texttt'>*this</span> has a contained object of type <span class='texttt'>T</span>,
otherwise <span class='texttt'>typeid(void)</span>.</p></div></div><div class='para' id='observers-3'><div class='marginalizedparent'><a class='marginalized' href='#observers-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5767'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>
Useful for querying against types known either at compile time or only at runtime.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>]
</p></div></div></div></div><div id='nonmembers'><h3 ><a class='secnum' href='#nonmembers' style='min-width:103pt'>20.8.4</a> Non-member functions <a class='abbr_ref' href='any.nonmembers'>[any.nonmembers]</a></h3><p ><span class='indexparent'><a class='index' id='swap,any'></a></span></p><p ><code class='itemdecl'>void swap(any&amp; x, any&amp; y) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='nonmembers-1'><div class='marginalizedparent'><a class='marginalized' href='#nonmembers-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5781'>#</a></div><p ><span class='textit'>Effects:</span>
As if by <span class='texttt'>x.swap(y)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='make_any'></a></span></p><p ><code class='itemdecl'>template &lt;class T, class... Args&gt;
  any make_any(Args&amp;&amp; ...args);
</code></p><div class='itemdescr'></div><div class='para' id='nonmembers-2'><div class='marginalizedparent'><a class='marginalized' href='#nonmembers-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5793'>#</a></div><p ><span class='textit'>Effects:</span>
Equivalent to: <span class='texttt'>return any(in_&shy;place_&shy;type&lt;T&gt;, std&#x200b;::&#x200b;forward&lt;Args&gt;(args)...);</span>
</p></div></div><p ><span class='indexparent'><a class='index' id='make_any'></a></span></p><p ><code class='itemdecl'>template &lt;class T, class U, class... Args&gt;
  any make_any(initializer_list&lt;U&gt; il, Args&amp;&amp; ...args);
</code></p><div class='itemdescr'></div><div class='para' id='nonmembers-3'><div class='marginalizedparent'><a class='marginalized' href='#nonmembers-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5805'>#</a></div><p ><span class='textit'>Effects:</span>
Equivalent to: <span class='texttt'>return any(in_&shy;place_&shy;type&lt;T&gt;, il, std&#x200b;::&#x200b;forward&lt;Args&gt;(args)...);</span>
</p></div></div><p ><span class='indexparent'><a class='index' id='any_cast'></a></span></p><p ><code class='itemdecl'>template&lt;class T&gt;
  T any_cast(const any&amp; operand);
template&lt;class T&gt;
  T any_cast(any&amp; operand);
template&lt;class T&gt;
  T any_cast(any&amp;&amp; operand);
</code></p><div class='itemdescr'></div><div class='para' id='nonmembers-4'><div class='marginalizedparent'><a class='marginalized' href='#nonmembers-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5821'>#</a></div><p ><span class='textit'>Requires:</span>
<span class='texttt'>is_&shy;reference_&shy;v&lt;T&gt;</span> is <span class='texttt'>true</span> or <span class='texttt'>is_&shy;copy_&shy;constructible_&shy;v&lt;T&gt;</span> is <span class='texttt'>true</span>.
Otherwise the program is ill-formed.</p></div></div><div class='para' id='nonmembers-5'><div class='marginalizedparent'><a class='marginalized' href='#nonmembers-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5826'>#</a></div><p ><span class='textit'>Returns:</span>
For the first form, <span class='texttt'>*any_&shy;cast&lt;add_&shy;const_&shy;t&lt;remove_&shy;reference_&shy;t&lt;T&gt;&gt;&gt;(&amp;operand)</span>.
For the second and third forms, <span class='texttt'>*any_&shy;cast&lt;remove_&shy;reference_&shy;t&lt;T&gt;&gt;(&amp;operand)</span>.</p></div></div><div class='para' id='nonmembers-6'><div class='marginalizedparent'><a class='marginalized' href='#nonmembers-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5831'>#</a></div><p ><span class='textit'>Throws:</span>
<span class='texttt'>bad_&shy;any_&shy;cast</span> if <span class='texttt'>operand.type() != typeid(remove_&shy;reference_&shy;t&lt;T&gt;)</span>.</p></div></div><div class='para' id='nonmembers-7'><div class='marginalizedparent'><a class='marginalized' href='#nonmembers-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5835'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><pre class='codeblock'>
any x(5);                                   <span class='comment'>// <span class='tcode_in_codeblock'>x</span> holds <span class='tcode_in_codeblock'>int</span>
</span>assert(any_cast&lt;int&gt;(x) == 5);              <span class='comment'>// cast to value
</span>any_cast&lt;int&amp;&gt;(x) = 10;                     <span class='comment'>// cast to reference
</span>assert(any_cast&lt;int&gt;(x) == 10);

x = "Meow";                                 <span class='comment'>// <span class='tcode_in_codeblock'>x</span> holds <span class='tcode_in_codeblock'>const char*</span>
</span>assert(strcmp(any_cast&lt;const char*&gt;(x), "Meow") == 0);
any_cast&lt;const char*&amp;&gt;(x) = "Harry";
assert(strcmp(any_cast&lt;const char*&gt;(x), "Harry") == 0);

x = string("Meow");                         <span class='comment'>// <span class='tcode_in_codeblock'>x</span> holds <span class='tcode_in_codeblock'>string</span>
</span>string s, s2("Jane");
s = move(any_cast&lt;string&amp;&gt;(x));             <span class='comment'>// move from <span class='tcode_in_codeblock'>any</span>
</span>assert(s == "Meow");
any_cast&lt;string&amp;&gt;(x) = move(s2);            <span class='comment'>// move to <span class='tcode_in_codeblock'>any</span>
</span>assert(any_cast&lt;const string&amp;&gt;(x) == "Jane");

string cat("Meow");
const any y(cat);                           <span class='comment'>// <span class='tcode_in_codeblock'>const y</span> holds <span class='tcode_in_codeblock'>string</span>
</span>assert(any_cast&lt;const string&amp;&gt;(y) == cat);

any_cast&lt;string&amp;&gt;(y);                       <span class='comment'>// error; cannot
</span>                                            <span class='comment'>// <span class='tcode_in_codeblock'>any_&shy;cast</span> away const
</span></pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]
</p></div></div><p ><span class='indexparent'><a class='index' id='any_cast'></a></span></p><p ><code class='itemdecl'>template&lt;class T&gt;
  const T* any_cast(const any* operand) noexcept;
template&lt;class T&gt;
  T* any_cast(any* operand) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='nonmembers-8'><div class='marginalizedparent'><a class='marginalized' href='#nonmembers-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5874'>#</a></div><p ><span class='textit'>Returns:</span>
If <span class='texttt'>operand != nullptr &amp;&amp; operand-&gt;type() == typeid(T)</span>,
a pointer to the object contained by <span class='texttt'>operand</span>;
otherwise, <span class='texttt'>nullptr</span>.</p></div></div><div class='para' id='nonmembers-9'><div class='marginalizedparent'><a class='marginalized' href='#nonmembers-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/c7f6a9139872aad48a944d018ce5e4b3de15ce81/source/utilities.tex#L5880'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>
</p><pre class='codeblock'>
bool is_string(const any&amp; operand) {
  return any_cast&lt;string&gt;(&amp;operand) != nullptr;
}</pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>]
</p></div></div></div></div></div></body></html>