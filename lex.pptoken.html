<!DOCTYPE html><html lang='en'><head><title>[lex.pptoken]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>5</a> Lexical conventions <a class='abbr_ref' href='./#lex'>[lex]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>5.4</a> Preprocessing tokens <a class='abbr_ref'>[lex.pptoken]</a></h2><div class='texpara'><a class='index' id=':token,preprocessing'></a><div class='bnf' id='nt:preprocessing-token'>
<a class='hidden_link' href='#nt:preprocessing-token' title='5.4&emsp;Preprocessing tokens&emsp;[lex.pptoken]'><span id='nt:preprocessing-token'><span id=':preprocessing-token'>preprocessing-token<span class='textnormal'>:</span></span></span></a><br/><a href='lex.header#nt:header-name' title='5.8&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name'><span class='textsf'><i >header-name</i></span></span></a><br/>import-keyword<br/>module-keyword<br/>export-keyword<br/><a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier'><span class='textsf'><i >identifier</i></span></span></a><br/><a href='lex.ppnumber#nt:pp-number' title='5.9&emsp;Preprocessing numbers&emsp;[lex.ppnumber]'><span id='ntref:pp-number'><span class='textsf'><i >pp-number</i></span></span></a><br/><a href='lex.ccon#nt:character-literal' title='5.13.3&emsp;Character literals&emsp;[lex.ccon]'><span id='ntref:character-literal'><span class='textsf'><i >character-literal</i></span></span></a><br/><a href='lex.ext#nt:user-defined-character-literal' title='5.13.9&emsp;User-defined literals&emsp;[lex.ext]'><span id='ntref:user-defined-character-literal'><span class='textsf'><i >user-defined-character-literal</i></span></span></a><br/><a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal'><span class='textsf'><i >string-literal</i></span></span></a><br/><a href='lex.ext#nt:user-defined-string-literal' title='5.13.9&emsp;User-defined literals&emsp;[lex.ext]'><span id='ntref:user-defined-string-literal'><span class='textsf'><i >user-defined-string-literal</i></span></span></a><br/><a href='lex.operators#nt:preprocessing-op-or-punc' title='5.12&emsp;Operators and punctuators&emsp;[lex.operators]'><span id='ntref:preprocessing-op-or-punc'><span class='textsf'><i >preprocessing-op-or-punc</i></span></span></a><br/><span class='textnormal'>each non-whitespace character that cannot be one of the above</span>
</div></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/lex.tex#L475'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>Each preprocessing token that is converted to a <a href='lex.token' title='5.6&emsp;Tokens&emsp;[lex.token]'>token</a>
shall have the lexical form of a keyword, an identifier, a literal,
or an operator or punctuator<a class='hidden_link' href='#1.sentence-1'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/lex.tex#L480'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>A preprocessing token is the minimal lexical element of the language in translation
phases 3 through 6<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>In this document,
glyphs are used to identify
elements of the basic character set (<a href='lex.charset' title='5.3&emsp;Character sets'>[lex.<span class='shy'></span>charset]</a>)<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>The categories of preprocessing token are: header names,
placeholder tokens produced by preprocessing <span class='texttt'><span class='keyword'>import</span></span> and <span class='texttt'><span class='keyword'>module</span></span> directives
(<span id='ntref:import-keyword'><span class='textsf'><i >import-keyword</i></span></span>, <span id='ntref:module-keyword'><span class='textsf'><i >module-keyword</i></span></span>, and <span id='ntref:export-keyword'><span class='textsf'><i >export-keyword</i></span></span>),
identifiers, preprocessing numbers, character literals (including user-defined character
literals), string literals (including user-defined string literals), preprocessing
operators and punctuators, and single non-whitespace characters that do not lexically
match the other preprocessing token categories<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>If a <span class='ucode'>U+0027</span> <span class='uname'>apostrophe</span> or a <span class='ucode'>U+0022</span> <span class='uname'>quotation mark</span> character
matches the last category, the program is ill-formed<a class='hidden_link' href='#2.sentence-4'>.</a></div> <div id='2.sentence-5' class='sentence'>If any character not in the basic character set matches the last category,
the program is ill-formed<a class='hidden_link' href='#2.sentence-5'>.</a></div> <div id='2.sentence-6' class='sentence'>Preprocessing tokens can be separated by
<a class='index' id=':whitespace'></a>whitespace;
<a class='index' id=':comment'></a>this consists of comments (<a href='lex.comment' title='5.7&emsp;Comments'>[lex.<span class='shy'></span>comment]</a>), or whitespace characters
(<span class='ucode'>U+0020</span> <span class='uname'>space</span>,
<span class='ucode'>U+0009</span> <span class='uname'>character tabulation</span>,
new-line,
<span class='ucode'>U+000b</span> <span class='uname'>line tabulation</span>, and
<span class='ucode'>U+000c</span> <span class='uname'>form feed</span>), or both<a class='hidden_link' href='#2.sentence-6'>.</a></div> <div id='2.sentence-7' class='sentence'>As described in <a href='cpp' title='15&emsp;Preprocessing directives'>[cpp]</a>, in certain
circumstances during translation phase 4, whitespace (or the absence
thereof) serves as more than preprocessing token separation<a class='hidden_link' href='#2.sentence-7'>.</a></div> <div id='2.sentence-8' class='sentence'>Whitespace
can appear within a preprocessing token only as part of a header name or
between the quotation characters in a character literal or
string literal<a class='hidden_link' href='#2.sentence-8'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/lex.tex#L514'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>If the input stream has been parsed into preprocessing tokens up to a
given character:
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div><div class='texpara'><div id='3.1.sentence-1' class='sentence'><a class='index' id=':literal,string,raw'></a>If the next character begins a sequence of characters that could be the prefix
and initial double quote of a raw string literal, such as <span class='literal'><span class='texttt'>R"</span></span>, the next preprocessing
token shall be a raw string literal<a class='hidden_link' href='#3.1.sentence-1'>.</a></div> <div id='3.1.sentence-2' class='sentence'>Between the initial and final
double quote characters of the raw string, any transformations performed in phase
2 (line splicing) are reverted; this reversion
shall apply before any <a href='lex.string#nt:d-char' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:d-char'><span class='textsf'><i >d-char</i></span></span></a>, <a href='lex.string#nt:r-char' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:r-char'><span class='textsf'><i >r-char</i></span></span></a>, or delimiting
parenthesis is identified<a class='hidden_link' href='#3.1.sentence-2'>.</a></div> <div id='3.1.sentence-3' class='sentence'>The raw string literal is defined as the shortest sequence
of characters that matches the raw-string pattern
<div class='bnf'>
<a href='lex.ccon#nt:encoding-prefix' title='5.13.3&emsp;Character literals&emsp;[lex.ccon]'><span id='ntref:encoding-prefix'><span class='textsf'><i >encoding-prefix</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='literalterminal'>R</span> <a href='lex.string#nt:raw-string' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:raw-string'><span class='textsf'><i >raw-string</i></span></span></a>
</div></div></div></li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div><div class='texpara'><div id='3.2.sentence-1' class='sentence'>Otherwise, if the next three characters are <span class='texttt'><span class='anglebracket'>&lt;</span><span class='operator'>&#x200b;::&#x200b;</span></span> and the subsequent character
is neither <span class='texttt'><span class='operator'>:</span></span> nor <span class='texttt'><span class='anglebracket'>&gt;</span></span>, the <span class='texttt'><span class='anglebracket'>&lt;</span></span> is treated as a preprocessing token by
itself and not as the first character of the alternative token <span class='texttt'><span class='anglebracket'>&lt;</span><span class='operator'>:</span></span><a class='hidden_link' href='#3.2.sentence-1'>.</a></div></div></li><li id='3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.3'>(3.3)</a></div><div class='texpara'><div id='3.3.sentence-1' class='sentence'>Otherwise,
the next preprocessing token is the longest sequence of
characters that could constitute a preprocessing token, even if that
would cause further lexical analysis to fail,
except that a <a href='lex.header#nt:header-name' title='5.8&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name_'><span class='textsf'><i >header-name</i></span></span></a> (<a href='lex.header' title='5.8&emsp;Header names'>[lex.<span class='shy'></span>header]</a>) is only formed
<ul class='itemize'><li id='3.3.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.3.1'>(3.3.1)</a></div>after the <span class='texttt'>include</span> or <span class='texttt'><span class='keyword'>import</span></span> preprocessing token in an
<span class='texttt'><span class='preprocessordirective'>#include</span></span> (<a href='cpp.include' title='15.3&emsp;Source file inclusion'>[cpp.<span class='shy'></span>include]</a>) or
<span class='texttt'><span class='keyword'>import</span></span> (<a href='cpp.import' title='15.5&emsp;Header unit importation'>[cpp.<span class='shy'></span>import]</a>) directive, or</li><li id='3.3.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#3.3.2'>(3.3.2)</a></div>within a <a href='cpp.cond#nt:has-include-expression' title='15.2&emsp;Conditional inclusion&emsp;[cpp.cond]'><span id='ntref:has-include-expression'><span class='textsf'><i >has-include-expression</i></span></span></a><a class='hidden_link' href='#3.3.sentence-1'>.</a></li></ul></div></div></li></ul></div></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>: <span class='codeblock'><span class='preprocessordirective'>#define</span> R <span class='literal'>"x"</span>
<span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> s <span class='operator'>=</span> R<span class='literal'>"y"</span>;           <span class='comment'>// ill-formed raw string, not <span class='tcode_in_codeblock'>"x" "y"</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/lex.tex#L559'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>The <span id='ntref:import-keyword_'><span class='textsf'><i >import-keyword</i></span></span> is produced
by processing an <span id=':import'><span class='texttt'><span class='keyword'>import</span></span></span> directive (<a href='cpp.import' title='15.5&emsp;Header unit importation'>[cpp.<span class='shy'></span>import]</a>),
the <span id='ntref:module-keyword_'><span class='textsf'><i >module-keyword</i></span></span> is produced
by preprocessing a <span id=':module'><span class='texttt'><span class='keyword'>module</span></span></span> directive (<a href='cpp.module' title='15.4&emsp;Module directive'>[cpp.<span class='shy'></span>module]</a>), and
the <span id='ntref:export-keyword_'><span class='textsf'><i >export-keyword</i></span></span> is produced
by preprocessing either of the previous two directives<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='4.sentence-2' class='sentence'>None has any observable spelling<a class='hidden_link' href='#4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/lex.tex#L570'>#</a></div><div class='texpara'><div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>: <div id='5.sentence-1' class='sentence'>The program fragment <span class='texttt'><span class='literal'>0xe+foo</span></span> is parsed as a
preprocessing number token (one that is not a valid
<a href='lex.icon#nt:integer-literal' title='5.13.2&emsp;Integer literals&emsp;[lex.icon]'><span id='ntref:integer-literal'><span class='textsf'><i >integer-literal</i></span></span></a> or <a href='lex.fcon#nt:floating-point-literal' title='5.13.4&emsp;Floating-point literals&emsp;[lex.fcon]'><span id='ntref:floating-point-literal'><span class='textsf'><i >floating-point-literal</i></span></span></a> token),
even though a parse as three preprocessing tokens
<span class='texttt'><span class='literal'>0xe</span></span>, <span class='texttt'><span class='operator'>+</span></span>, and <span class='texttt'>foo</span> can produce a valid expression (for example,
if <span class='texttt'>foo</span> is a macro defined as <span class='texttt'><span class='literal'>1</span></span>)<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>Similarly, the
program fragment <span class='texttt'><span class='literal'>1E1</span></span> is parsed as a preprocessing number (one
that is a valid <a href='lex.fcon#nt:floating-point-literal' title='5.13.4&emsp;Floating-point literals&emsp;[lex.fcon]'><span id='ntref:floating-point-literal_'><span class='textsf'><i >floating-point-literal</i></span></span></a> token),
whether or not <span class='texttt'>E</span> is a macro name<a class='hidden_link' href='#5.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/lex.tex#L583'>#</a></div><div class='texpara'><div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>: <div id='6.sentence-1' class='sentence'>The program fragment <span class='texttt'>x<span class='operator'>+</span><span class='operator'>+</span><span class='operator'>+</span><span class='operator'>+</span><span class='operator'>+</span>y</span> is parsed as <span class='texttt'>x
<span class='operator'>+</span><span class='operator'>+</span> <span class='operator'>+</span><span class='operator'>+</span> <span class='operator'>+</span> y</span>, which, if <span class='texttt'>x</span> and <span class='texttt'>y</span> have integral types,
violates a constraint on increment operators, even though the parse
<span class='texttt'>x <span class='operator'>+</span><span class='operator'>+</span> <span class='operator'>+</span> <span class='operator'>+</span><span class='operator'>+</span> y</span> can yield a correct expression<a class='hidden_link' href='#6.sentence-1'>.</a></div> —&nbsp;<i>end example</i>]</div></div> </div></div></div></body></html>