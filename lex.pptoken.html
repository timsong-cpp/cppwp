<!DOCTYPE html><html lang='en'><head><title>[lex.pptoken]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>5</a> Lexical conventions <a class='abbr_ref' href='./#lex'>[lex]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>5.4</a> Preprocessing tokens <a class='abbr_ref'>[lex.pptoken]</a></h2><p ><span class='indexparent'><a class='index' id=':token,preprocessing'></a></span></p><pre class='bnf'><a class='nontermdef' id='nt:preprocessing-token'>preprocessing-token:</a>
&#9;<i ><a href='lex.header#nt:header-name'>header-name</a></i>
&#9;<i ><a href='lex.name#nt:identifier'>identifier</a></i>
&#9;<i ><a href='lex.ppnumber#nt:pp-number'>pp-number</a></i>
&#9;<i ><a href='lex.ccon#nt:character-literal'>character-literal</a></i>
&#9;<i ><a href='lex.ext#nt:user-defined-character-literal'>user-defined-character-literal</a></i>
&#9;<i ><a href='lex.string#nt:string-literal'>string-literal</a></i>
&#9;<i ><a href='lex.ext#nt:user-defined-string-literal'>user-defined-string-literal</a></i>
&#9;<i ><a href='lex.operators#nt:preprocessing-op-or-punc'>preprocessing-op-or-punc</a></i>
&#9;<span class='textnormal'>each non-white-space character that cannot be one of the above</span>
</pre><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ef429c6b5066a9ee09566757ca91efde2254d8d4/source/lex.tex#L265'>#</a></div><p >Each preprocessing token that is converted to a <a href='lex.token'>token</a>
shall have the lexical form of a keyword, an identifier, a literal, an
operator, or a punctuator.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ef429c6b5066a9ee09566757ca91efde2254d8d4/source/lex.tex#L270'>#</a></div><p >A preprocessing token is the minimal lexical element of the language in translation
phases 3 through 6. The categories of preprocessing token are: header names,
identifiers, preprocessing numbers, character literals (including user-defined character
literals), string literals (including user-defined string literals), preprocessing
operators and punctuators, and single non-white-space characters that do not lexically
match the other preprocessing token categories. If a <span class='texttt'>'</span> or a <span class='texttt'>"</span> character
matches the last category, the behavior is undefined. Preprocessing tokens can be
separated by
<span class='indexparent'><a class='index' id=':space,white'></a></span>white space;
<span class='indexparent'><a class='index' id=':comment'></a></span>this consists of <a href='lex.comment'>comments</a>, or white-space
characters (space, horizontal tab, new-line, vertical tab, and
form-feed), or both. As described in Clause <a href='cpp'>[cpp]</a>, in certain
circumstances during translation phase 4, white space (or the absence
thereof) serves as more than preprocessing token separation. White space
can appear within a preprocessing token only as part of a header name or
between the quotation characters in a character literal or string
literal.</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ef429c6b5066a9ee09566757ca91efde2254d8d4/source/lex.tex#L291'>#</a></div><p >If the input stream has been parsed into preprocessing tokens up to a
given character:
</p><ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.1'>(3.1)</a></div><p ><span class='indexparent'><a class='index' id=':literal,string,raw'></a></span></p><p >If the next character begins a sequence of characters that could be the prefix
and initial double quote of a raw string literal, such as <span class='texttt'>R"</span>, the next preprocessing
token shall be a raw string literal. Between the initial and final
double quote characters of the raw string, any transformations performed in phases
1 and 2 (<i ><a href='lex.charset#nt:universal-character-name'>universal-character-name</a></i><span class='textit'>s</span> and line splicing) are reverted; this reversion
shall apply before any <i ><a href='lex.string#nt:d-char'>d-char</a></i>, <i ><a href='lex.string#nt:r-char'>r-char</a></i>, or delimiting
parenthesis is identified. The raw string literal is defined as the shortest sequence
of characters that matches the raw-string pattern</p><pre class='ncbnf'><i ><a href='lex.ccon#nt:encoding-prefix'>encoding-prefix</a></i><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>R</span> <i ><a href='lex.string#nt:raw-string'>raw-string</a></i>
</pre></li><li id='3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.2'>(3.2)</a></div><p >Otherwise, if the next three characters are <span class='texttt'>&lt;&#x200b;::&#x200b;</span> and the subsequent character
is neither <span class='texttt'>:</span> nor <span class='texttt'>&gt;</span>, the <span class='texttt'>&lt;</span> is treated as a preprocessing token by
itself and not as the first character of the alternative token <span class='texttt'>&lt;:</span>.</p></li><li id='3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.3'>(3.3)</a></div><p >Otherwise,
the next preprocessing token is the longest sequence of
characters that could constitute a preprocessing token, even if that
would cause further lexical analysis to fail,
except that a <i ><a href='lex.header#nt:header-name'>header-name</a></i> is only formed
within a <a href='cpp.include'><span class='texttt'>#include</span> directive</a>.
</p></li></ul><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> 
</p><pre class='codeblock'>
#define R "x"
const char* s = R"y";           <span class='comment'>// ill-formed raw string, not <span class='tcode_in_codeblock'>"x" "y"</span>
</span></pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ef429c6b5066a9ee09566757ca91efde2254d8d4/source/lex.tex#L328'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>  The program fragment <span class='texttt'>0xe+foo</span> is parsed as a
preprocessing number token (one that is not a valid floating or integer
literal token), even though a parse as three preprocessing tokens
<span class='texttt'>0xe</span>, <span class='texttt'>+</span>, and <span class='texttt'>foo</span> might produce a valid expression (for example,
if <span class='texttt'>foo</span> were a macro defined as <span class='texttt'>1</span>). Similarly, the
program fragment <span class='texttt'>1E1</span> is parsed as a preprocessing number (one
that is a valid floating literal token), whether or not <span class='texttt'>E</span> is a
macro name. <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ef429c6b5066a9ee09566757ca91efde2254d8d4/source/lex.tex#L338'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span>  The program fragment <span class='texttt'>x+++++y</span> is parsed as <span class='texttt'>x
++ ++ + y</span>, which, if <span class='texttt'>x</span> and <span class='texttt'>y</span> have integral types,
violates a constraint on increment operators, even though the parse
<span class='texttt'>x ++ + ++ y</span> might yield a correct expression. <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div></div></body></html>