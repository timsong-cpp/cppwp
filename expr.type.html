<!DOCTYPE html><html lang='en'><head><title>[expr.type]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>7.2</a> Properties of expressions <a class='abbr_ref' href='expr.prop#expr.type'>[expr.prop]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>7.2.2</a> Type <a class='abbr_ref'>[expr.type]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/expressions.tex#L315'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':expression,reference'></a></span>If an expression initially has the type “reference to
<span class='texttt'>T</span>” (<a href='dcl.ref'>[dcl.ref]</a>, <a href='dcl.init.ref'>[dcl.init.ref]</a>), the type is adjusted to
<span class='texttt'>T</span> prior to any further analysis<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>The expression designates the
object or function denoted by the reference, and the expression
is an lvalue or an xvalue, depending on the expression<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.note-1' class='note'>[&nbsp;<a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-3' class='sentence'>Before the lifetime of the reference has started or after it has ended,
the behavior is undefined (see <a href='basic.life'>[basic.life]</a>)<a class='hidden_link' href='#1.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/expressions.tex#L327'>#</a></div><div id='2.sentence-1' class='sentence'>If a prvalue initially has the type “<span class='mathit'>cv</span> <span class='texttt'>T</span>”, where
<span class='texttt'>T</span> is a cv-unqualified non-class, non-array type, the type of
the expression is adjusted to <span class='texttt'>T</span> prior to any further analysis<a class='hidden_link' href='#2.sentence-1'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ac3fceec6107d67ed69535583ad83e35da9de218/source/expressions.tex#L332'>#</a></div><div id='3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':pointer,composite_pointer_type'></a></span>The <a class='hidden_link' href='#def:composite_pointer_type' id='def:composite_pointer_type'><i >composite pointer type</i></a> of
two operands <span class='texttt'>p1</span> and
<span class='texttt'>p2</span> having types <span class='texttt'>T1</span> and <span class='texttt'>T2</span>, respectively, where at least one is a
pointer or pointer-to-member type or
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>nullptr_&shy;t</span>, is:
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.1'>(3.1)</a></div>if both <span class='texttt'>p1</span> and <span class='texttt'>p2</span> are null pointer constants,
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>nullptr_&shy;t</span>;</li><li id='3.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.2'>(3.2)</a></div>if either <span class='texttt'>p1</span> or <span class='texttt'>p2</span> is a null pointer constant, <span class='texttt'>T2</span> or <span class='texttt'>T1</span>,
respectively;</li><li id='3.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.3'>(3.3)</a></div>if <span class='texttt'>T1</span> or <span class='texttt'>T2</span> is “pointer to <span class='textit'>cv1</span> <span class='texttt'><span class='keyword'>void</span></span>” and the
other type is “pointer to <span class='textit'>cv2</span> <span class='texttt'>T</span>”,
where <span class='texttt'>T</span> is an object type or <span class='texttt'><span class='keyword'>void</span></span>,
“pointer to <span class='textit'>cv12</span> <span class='texttt'><span class='keyword'>void</span></span>”,
where <span class='textit'>cv12</span> is the union of <span class='textit'>cv1</span> and <span class='textit'>cv2</span>;</li><li id='3.4'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.4'>(3.4)</a></div>if <span class='texttt'>T1</span> or <span class='texttt'>T2</span> is “pointer to <span class='texttt'><span class='keyword'>noexcept</span></span> function” and the
other type is “pointer to function”, where the function types are otherwise the same,
“pointer to function”;</li><li id='3.5'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.5'>(3.5)</a></div>if <span class='texttt'>T1</span> is “pointer to <span class='textit'>cv1</span> <span class='texttt'>C1</span>” and <span class='texttt'>T2</span> is “pointer to
<span class='textit'>cv2</span> <span class='texttt'>C2</span>”, where <span class='texttt'>C1</span> is <a href='dcl.init.ref#def:reference-related'>reference-related</a> to <span class='texttt'>C2</span> or <span class='texttt'>C2</span> is
reference-related to <span class='texttt'>C1</span>,
the cv-combined type (<a href='conv.qual'>[conv.qual]</a>)
of <span class='texttt'>T1</span> and <span class='texttt'>T2</span> or the cv-combined type of <span class='texttt'>T2</span> and <span class='texttt'>T1</span>,
respectively;</li><li id='3.6'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.6'>(3.6)</a></div>if <span class='texttt'>T1</span> or <span class='texttt'>T2</span> is
“pointer to member of <span class='texttt'>C1</span> of type function”,
the other type is
“pointer to member of <span class='texttt'>C2</span> of type <span class='texttt'><span class='keyword'>noexcept</span></span> function”, and
<span class='texttt'>C1</span> is reference-related to <span class='texttt'>C2</span> or
<span class='texttt'>C2</span> is reference-related to <span class='texttt'>C1</span> (<a href='dcl.init.ref'>[dcl.init.ref]</a>),
where the function types are otherwise the same,
“pointer to member of <span class='texttt'>C2</span> of type function” or
“pointer to member of <span class='texttt'>C1</span> of type function”, respectively;</li><li id='3.7'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.7'>(3.7)</a></div>if <span class='texttt'>T1</span> is
“pointer to member of <span class='texttt'>C1</span> of type <span class='textit'>cv1</span> <span class='texttt'>U</span>” and
<span class='texttt'>T2</span> is
“pointer to member of <span class='texttt'>C2</span> of type <span class='textit'>cv2</span> <span class='texttt'>U</span>”,
for some non-function type <span class='texttt'>U</span>,
where <span class='texttt'>C1</span> is
reference-related to <span class='texttt'>C2</span> or <span class='texttt'>C2</span> is reference-related to
<span class='texttt'>C1</span> (<a href='dcl.init.ref'>[dcl.init.ref]</a>), the cv-combined type of <span class='texttt'>T2</span> and <span class='texttt'>T1</span> or the cv-combined type
of <span class='texttt'>T1</span> and <span class='texttt'>T2</span>, respectively;</li><li id='3.8'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.8'>(3.8)</a></div>if <span class='texttt'>T1</span> and <span class='texttt'>T2</span> are <a href='conv.qual#def:similar_types'>similar types</a>, the cv-combined type of <span class='texttt'>T1</span> and
<span class='texttt'>T2</span>;</li><li id='3.9'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#3.9'>(3.9)</a></div>otherwise, a program that necessitates the determination of a
composite pointer type is ill-formed<a class='hidden_link' href='#3.sentence-1'>.</a></li></ul></div><div id='3.example-1' class='example'>[&nbsp;<a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>typedef</span> <span class='keyword'>void</span> <span class='operator'>*</span>p;
<span class='keyword'>typedef</span> <span class='keyword'>const</span> <span class='keyword'>int</span> <span class='operator'>*</span>q;
<span class='keyword'>typedef</span> <span class='keyword'>int</span> <span class='operator'>*</span><span class='operator'>*</span>pi;
<span class='keyword'>typedef</span> <span class='keyword'>const</span> <span class='keyword'>int</span> <span class='operator'>*</span><span class='operator'>*</span>pci;
</pre><div id='3.sentence-2' class='sentence'>The composite pointer type of <span class='texttt'>p</span> and <span class='texttt'>q</span> is “pointer to <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>void</span></span>”; the
composite pointer type of <span class='texttt'>pi</span> and <span class='texttt'>pci</span> is “pointer to <span class='texttt'><span class='keyword'>const</span></span> pointer to
<span class='texttt'><span class='keyword'>const</span> <span class='keyword'>int</span></span>”<a class='hidden_link' href='#3.sentence-2'>.</a></div> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div></body></html>