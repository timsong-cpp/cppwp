<!DOCTYPE html><html lang='en'><head><title>[expr.type]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>7.2</a> Properties of expressions <a class='abbr_ref' href='expr.prop#expr.type'>[expr.prop]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>7.2.2</a> Type <a class='abbr_ref'>[expr.type]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4b1a735f393aa5c864d0a5aba45514aec63f5a90/source/expressions.tex#L329'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':expression,reference'></a>If an expression initially has the type “reference to
<span class='texttt'>T</span>” (<a href='dcl.ref' title='9.3.4.3&emsp;References'>[dcl.<span class='shy'></span>ref]</a>, <a href='dcl.init.ref' title='9.4.4&emsp;References'>[dcl.<span class='shy'></span>init.<span class='shy'></span>ref]</a>), the type is adjusted to
<span class='texttt'>T</span> prior to any further analysis<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>The expression designates the
object or function denoted by the reference, and the expression
is an lvalue or an xvalue, depending on the expression<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='1.sentence-3' class='sentence'>Before the lifetime of the reference has started or after it has ended,
the behavior is undefined (see <a href='basic.life' title='6.7.3&emsp;Lifetime'>[basic.<span class='shy'></span>life]</a>)<a class='hidden_link' href='#1.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4b1a735f393aa5c864d0a5aba45514aec63f5a90/source/expressions.tex#L341'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>If a prvalue initially has the type “<span class='mathit'>cv</span> <span class='texttt'>T</span>”, where
<span class='texttt'>T</span> is a cv-unqualified non-class, non-array type, the type of
the expression is adjusted to <span class='texttt'>T</span> prior to any further analysis<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/4b1a735f393aa5c864d0a5aba45514aec63f5a90/source/expressions.tex#L346'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'><a class='index' id=':pointer,composite_pointer_type'></a>The <a class='hidden_link' href='#def:composite_pointer_type' title='7.2.2&emsp;Type&emsp;[expr.type]'><span id='def:composite_pointer_type'><i >composite pointer type</i></span></a> of
two operands <span class='texttt'>p1</span> and
<span class='texttt'>p2</span> having types <span class='texttt'>T1</span> and <span class='texttt'>T2</span>, respectively, where at least one is a
pointer or pointer-to-member type or
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>nullptr_&shy;t</span>, is:
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div>if both <span class='texttt'>p1</span> and <span class='texttt'>p2</span> are null pointer constants,
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>nullptr_&shy;t</span>;</li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div>if either <span class='texttt'>p1</span> or <span class='texttt'>p2</span> is a null pointer constant, <span class='texttt'>T2</span> or <span class='texttt'>T1</span>,
respectively;</li><li id='3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.3'>(3.3)</a></div>if <span class='texttt'>T1</span> or <span class='texttt'>T2</span> is “pointer to <i >cv1</i> <span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span>” and the
other type is “pointer to <i >cv2</i> <span class='texttt'>T</span>”,
where <span class='texttt'>T</span> is an object type or <span id=':void_'><span class='texttt'><span class='keyword'>void</span></span></span>,
“pointer to <i >cv12</i> <span id=':void__'><span class='texttt'><span class='keyword'>void</span></span></span>”,
where <i >cv12</i> is the union of <i >cv1</i> and <i >cv2</i>;</li><li id='3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.4'>(3.4)</a></div>if <span class='texttt'>T1</span> or <span class='texttt'>T2</span> is “pointer to <span id=':noexcept'><span class='texttt'><span class='keyword'>noexcept</span></span></span> function” and the
other type is “pointer to function”, where the function types are otherwise the same,
“pointer to function”;</li><li id='3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.5'>(3.5)</a></div>if <span class='texttt'>T1</span> is “pointer to <i >cv1</i> <span class='texttt'>C1</span>” and <span class='texttt'>T2</span> is “pointer to
<i >cv2</i> <span class='texttt'>C2</span>”, where <span class='texttt'>C1</span> is reference-related to <span class='texttt'>C2</span> or <span class='texttt'>C2</span> is
reference-related to <span class='texttt'>C1</span> (<a href='dcl.init.ref' title='9.4.4&emsp;References'>[dcl.<span class='shy'></span>init.<span class='shy'></span>ref]</a>),
the qualification-combined type (<a href='conv.qual' title='7.3.6&emsp;Qualification conversions'>[conv.<span class='shy'></span>qual]</a>)
of <span class='texttt'>T1</span> and <span class='texttt'>T2</span> or the qualification-combined type of <span class='texttt'>T2</span> and <span class='texttt'>T1</span>,
respectively;</li><li id='3.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.6'>(3.6)</a></div>if <span class='texttt'>T1</span> or <span class='texttt'>T2</span> is
“pointer to member of <span class='texttt'>C1</span> of type function”,
the other type is
“pointer to member of <span class='texttt'>C2</span> of type <span id=':noexcept_'><span class='texttt'><span class='keyword'>noexcept</span></span></span> function”, and
<span class='texttt'>C1</span> is reference-related to <span class='texttt'>C2</span> or
<span class='texttt'>C2</span> is reference-related to <span class='texttt'>C1</span> (<a href='dcl.init.ref' title='9.4.4&emsp;References'>[dcl.<span class='shy'></span>init.<span class='shy'></span>ref]</a>),
where the function types are otherwise the same,
“pointer to member of <span class='texttt'>C2</span> of type function” or
“pointer to member of <span class='texttt'>C1</span> of type function”, respectively;</li><li id='3.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.7'>(3.7)</a></div>if <span class='texttt'>T1</span> is
“pointer to member of <span class='texttt'>C1</span> of type <i >cv1</i> <span class='texttt'>U</span>” and
<span class='texttt'>T2</span> is
“pointer to member of <span class='texttt'>C2</span> of type <i >cv2</i> <span class='texttt'>U</span>”,
for some non-function type <span class='texttt'>U</span>,
where <span class='texttt'>C1</span> is
reference-related to <span class='texttt'>C2</span> or <span class='texttt'>C2</span> is reference-related to
<span class='texttt'>C1</span> (<a href='dcl.init.ref' title='9.4.4&emsp;References'>[dcl.<span class='shy'></span>init.<span class='shy'></span>ref]</a>), the qualification-combined type of <span class='texttt'>T2</span> and <span class='texttt'>T1</span> or the qualification-combined type
of <span class='texttt'>T1</span> and <span class='texttt'>T2</span>, respectively;</li><li id='3.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.8'>(3.8)</a></div>if <span class='texttt'>T1</span> and <span class='texttt'>T2</span> are similar types (<a href='conv.qual' title='7.3.6&emsp;Qualification conversions'>[conv.<span class='shy'></span>qual]</a>), the qualification-combined type of <span class='texttt'>T1</span> and
<span class='texttt'>T2</span>;</li><li id='3.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.9'>(3.9)</a></div>otherwise, a program that necessitates the determination of a
composite pointer type is ill-formed<a class='hidden_link' href='#3.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>typedef</span> <span class='keyword'>void</span> <span class='operator'>*</span>p;
<span class='keyword'>typedef</span> <span class='keyword'>const</span> <span class='keyword'>int</span> <span class='operator'>*</span>q;
<span class='keyword'>typedef</span> <span class='keyword'>int</span> <span class='operator'>*</span><span class='operator'>*</span>pi;
<span class='keyword'>typedef</span> <span class='keyword'>const</span> <span class='keyword'>int</span> <span class='operator'>*</span><span class='operator'>*</span>pci;
</span></div><div class='texpara'><div id='3.sentence-2' class='sentence'>The composite pointer type of <span class='texttt'>p</span> and <span class='texttt'>q</span> is “pointer to <span class='texttt'><span id=':const'><span class='texttt'><span class='keyword'>const</span></span></span> <span id=':void___'><span class='texttt'><span class='keyword'>void</span></span></span></span>”; the
composite pointer type of <span class='texttt'>pi</span> and <span class='texttt'>pci</span> is “pointer to <span class='texttt'><span id=':const_'><span class='texttt'><span class='keyword'>const</span></span></span></span> pointer to
<span class='texttt'><span id=':const__'><span class='texttt'><span class='keyword'>const</span></span></span> <span id=':int'><span class='texttt'><span class='keyword'>int</span></span></span></span>”<a class='hidden_link' href='#3.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>