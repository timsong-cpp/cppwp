<!DOCTYPE html><html lang='en'><head><title>[diff.cpp17]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='annexnum' style='min-width:50pt'>Annex C&emsp;(informative)</a> Compatibility <a class='abbr_ref' href='./#diff'>[diff]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>C.3</a> C++ and ISO C++ 2017 <a class='abbr_ref'>[diff.cpp17]</a></h2><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:80pt'>C.3.1</a> General <a class='abbr_ref' href='diff.cpp17.general'>[diff.cpp17.general]</a></h3><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L554'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'><a class='index' id=':summary,compatibility_with_ISO_C++_2017'></a>Subclause [diff.<span class='shy'></span>cpp17] lists the differences between C++ and
ISO C++ 2017 (ISO/IEC 14882:2017, <i >Programming Languages — C++</i>),
by the chapters of this document<a class='hidden_link' href='#general-1.sentence-1'>.</a></div></div></div></div><div id='lex' class='section'><h3 ><a class='secnum' href='#lex' style='min-width:80pt'>C.3.2</a> <a href='lex' title='5&emsp;Lexical conventions'>[lex]</a>: lexical conventions <a class='abbr_ref' href='diff.cpp17.lex'>[diff.cpp17.lex]</a></h3><div class='para' id='lex-1'><div class='marginalizedparent'><a class='marginalized' href='#lex-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L562'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='lex.pptoken'>[lex.<span class='shy'></span>pptoken]</a>, <a href='module.unit'>[module.<span class='shy'></span>unit]</a>, <a href='module.import'>[module.<span class='shy'></span>import]</a>, <a href='cpp.pre'>[cpp.<span class='shy'></span>pre]</a>, <a href='cpp.module'>[cpp.<span class='shy'></span>module]</a>, and <a href='cpp.import'>[cpp.<span class='shy'></span>import]</a>
<br/> <div id='lex-1.sentence-1' class='sentence'><b>Change:</b> New identifiers with special meaning<a class='hidden_link' href='#lex-1.sentence-1'>.</a></div> <br/> <div id='lex-1.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#lex-1.sentence-2'>.</a></div> <br/> <div id='lex-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Logical lines beginning with
<span class='texttt'><span class='keyword'>module</span></span> or <span class='texttt'><span class='keyword'>import</span></span> may
be interpreted differently
in this revision of C++<a class='hidden_link' href='#lex-1.sentence-3'>.</a></div> <div id='lex-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>class</span> <span class='keyword'>module</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>module</span> m1;          <span class='comment'>// was variable declaration; now <a href='module.unit#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration'><span class='textsf'><i >module-declaration</i></span></span></a></span>
<span class='keyword'>module</span> <span class='operator'>*</span>m2;         <span class='comment'>// variable declaration</span>

<span class='keyword'>class</span> <span class='keyword'>import</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>import</span> j1;          <span class='comment'>// was variable declaration; now <a href='module.import#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration'><span class='textsf'><i >module-import-declaration</i></span></span></a></span>
<span class='operator'>::</span><span class='keyword'>import</span> j2;        <span class='comment'>// variable declaration</span>
</span></div></div></div><div class='para' id='lex-2'><div class='marginalizedparent'><a class='marginalized' href='#lex-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L583'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.header'>[lex.<span class='shy'></span>header]</a>
<br/> <div id='lex-2.sentence-1' class='sentence'><b>Change:</b> <a href='lex.header#nt:header-name' title='5.8&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name'><span class='textsf'><i >header-name</i></span></span></a> tokens are formed in more contexts<a class='hidden_link' href='#lex-2.sentence-1'>.</a></div> <br/> <div id='lex-2.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#lex-2.sentence-2'>.</a></div> <br/> <div id='lex-2.sentence-3' class='sentence'><b>Effect on original feature:</b> When the identifier <span class='texttt'><span class='keyword'>import</span></span>
is followed by a <span class='texttt'><span class='anglebracket'>&lt;</span></span> character,
a <a href='lex.header#nt:header-name' title='5.8&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name_'><span class='textsf'><i >header-name</i></span></span></a> token may be formed<a class='hidden_link' href='#lex-2.sentence-3'>.</a></div> <div id='lex-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> <span class='keyword'>import</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>import</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                <span class='comment'>// ill-formed; previously well-formed</span>
<span class='operator'>::</span><span class='keyword'>import</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// OK</span>
</span></div></div></div><div class='para' id='lex-3'><div class='marginalizedparent'><a class='marginalized' href='#lex-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L599'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.key'>[lex.<span class='shy'></span>key]</a>
<br/> <div id='lex-3.sentence-1' class='sentence'><b>Change:</b> New keywords<a class='hidden_link' href='#lex-3.sentence-1'>.</a></div> <br/> <div id='lex-3.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#lex-3.sentence-2'>.</a></div> <ul class='itemize'><li id='lex-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lex-3.1'>(3.1)</a></div><div class='texpara'><div id='lex-3.1.sentence-1' class='sentence'><a class='index' id=':UTF-8'></a>The <span id=':char8_t'><span class='texttt'><span class='keyword'>char8_<span class='shy'></span>t</span></span></span> keyword is added to differentiate
the types of ordinary and UTF-8 literals (<a href='lex.string' title='5.13.5&emsp;String literals'>[lex.<span class='shy'></span>string]</a>)<a class='hidden_link' href='#lex-3.1.sentence-1'>.</a></div></div></li><li id='lex-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lex-3.2'>(3.2)</a></div><div class='texpara'><div id='lex-3.2.sentence-1' class='sentence'>The <span class='texttt'><span class='keyword'>concept</span></span> keyword is
added to enable the definition of concepts (<a href='temp.concept' title='13.7.9&emsp;Concept definitions'>[temp.<span class='shy'></span>concept]</a>)<a class='hidden_link' href='#lex-3.2.sentence-1'>.</a></div></div></li><li id='lex-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lex-3.3'>(3.3)</a></div><div class='texpara'><div id='lex-3.3.sentence-1' class='sentence'>The <span id=':consteval'><span class='texttt'><span class='keyword'>consteval</span></span></span> keyword is added to
declare immediate functions (<a href='dcl.constexpr' title='9.2.6&emsp;The constexpr and consteval specifiers'>[dcl.<span class='shy'></span>constexpr]</a>)<a class='hidden_link' href='#lex-3.3.sentence-1'>.</a></div></div></li><li id='lex-3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lex-3.4'>(3.4)</a></div><div class='texpara'><div id='lex-3.4.sentence-1' class='sentence'>The <span id=':constinit'><span class='texttt'><span class='keyword'>constinit</span></span></span> keyword is added to
prevent unintended dynamic initialization (<a href='dcl.constinit' title='9.2.7&emsp;The constinit specifier'>[dcl.<span class='shy'></span>constinit]</a>)<a class='hidden_link' href='#lex-3.4.sentence-1'>.</a></div></div></li><li id='lex-3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lex-3.5'>(3.5)</a></div><div class='texpara'><div id='lex-3.5.sentence-1' class='sentence'>The <span id=':co_await'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>await</span></span></span>, <span id=':co_yield'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>yield</span></span></span>, and <span id=':co_return'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>return</span></span></span> keywords are added
to enable the definition of coroutines  (<a href='dcl.fct.def.coroutine' title='9.5.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>)<a class='hidden_link' href='#lex-3.5.sentence-1'>.</a></div></div></li><li id='lex-3.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lex-3.6'>(3.6)</a></div><div class='texpara'><div id='lex-3.6.sentence-1' class='sentence'>The <span class='texttt'><span class='keyword'>requires</span></span> keyword is added
to introduce constraints through a <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause'><span class='textsf'><i >requires-clause</i></span></span></a> (<a href='temp.pre' title='13.1&emsp;Preamble'>[temp.<span class='shy'></span>pre]</a>)
or a <a href='expr.prim.req.general#nt:requires-expression' title='7.5.7.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression'><span class='textsf'><i >requires-expression</i></span></span></a> (<a href='expr.prim.req' title='7.5.7&emsp;Requires expressions'>[expr.<span class='shy'></span>prim.<span class='shy'></span>req]</a>)<a class='hidden_link' href='#lex-3.6.sentence-1'>.</a></div></div></li></ul> <div id='lex-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code using
<span id=':char8_t_'><span class='texttt'><span class='keyword'>char8_<span class='shy'></span>t</span></span></span>,
<span class='texttt'><span class='keyword'>concept</span></span>,
<span id=':consteval_'><span class='texttt'><span class='keyword'>consteval</span></span></span>,
<span id=':constinit_'><span class='texttt'><span class='keyword'>constinit</span></span></span>,
<span id=':co_await_'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>await</span></span></span>, <span id=':co_yield_'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>yield</span></span></span>, <span id=':co_return_'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>return</span></span></span>,
or <span class='texttt'><span class='keyword'>requires</span></span>
as an identifier is not valid in this revision of C++<a class='hidden_link' href='#lex-3.sentence-3'>.</a></div></div></div><div class='para' id='lex-4'><div class='marginalizedparent'><a class='marginalized' href='#lex-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L636'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.operators'>[lex.<span class='shy'></span>operators]</a>
<br/> <div id='lex-4.sentence-1' class='sentence'><b>Change:</b> New operator <span class='texttt'><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#lex-4.sentence-1'>.</a></div> <br/> <div id='lex-4.sentence-2' class='sentence'><b>Rationale:</b> Necessary for new functionality<a class='hidden_link' href='#lex-4.sentence-2'>.</a></div> <br/> <div id='lex-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that contains a <span class='texttt'><span class='anglebracket'>&lt;</span><span class='operator'>=</span></span> token
immediately followed by a <span class='texttt'><span class='anglebracket'>&gt;</span></span> token
may be ill-formed or have different semantics in this revision of C++<a class='hidden_link' href='#lex-4.sentence-3'>.</a></div> <div id='lex-4.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> X <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='parenthesis'>(</span>X, X<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span><span class='parenthesis'>(</span>X, X<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
  Y<span class='anglebracket'>&lt;</span><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span> y;              <span class='comment'>// ill-formed; previously well-formed</span>
<span class='curlybracket'>}</span>
</span></div></div></div><div class='para' id='lex-5'><div class='marginalizedparent'><a class='marginalized' href='#lex-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L655'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.literal'>[lex.<span class='shy'></span>literal]</a>
<a class='index' id=':UTF-8_'></a><br/> <div id='lex-5.sentence-1' class='sentence'><b>Change:</b> Type of UTF-8 string and character literals<a class='hidden_link' href='#lex-5.sentence-1'>.</a></div> <br/> <div id='lex-5.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#lex-5.sentence-2'>.</a></div> <div id='lex-5.sentence-3' class='sentence'>The changed types enable function overloading, template specialization, and
type deduction to distinguish ordinary and UTF-8 string and character literals<a class='hidden_link' href='#lex-5.sentence-3'>.</a></div> <br/> <div id='lex-5.sentence-4' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that depends on
UTF-8 string literals having type “array of <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>char</span></span>” and
UTF-8 character literals having type “<span class='texttt'><span class='keyword'>char</span></span>”
is not valid in this revision of C++<a class='hidden_link' href='#lex-5.sentence-4'>.</a></div> <div id='lex-5.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>const</span> <span class='keyword'>auto</span> <span class='operator'>*</span>u8s <span class='operator'>=</span> <span class='literal'>u8"text"</span>;     <span class='comment'>// <span class='tcode_in_codeblock'>u8s</span> previously deduced as <span class='tcode_in_codeblock'>const char*</span>; now deduced as <span class='tcode_in_codeblock'>const char8_<span class='shy'></span>t*</span></span>
<span class='keyword'>const</span> <span class='keyword'>char</span> <span class='operator'>*</span>ps <span class='operator'>=</span> u8s;           <span class='comment'>// ill-formed; previously well-formed</span>

<span class='keyword'>auto</span> u8c <span class='operator'>=</span> <span class='literal'>u8'c'</span>;               <span class='comment'>// <span class='tcode_in_codeblock'>u8c</span> previously deduced as <span class='tcode_in_codeblock'>char</span>; now deduced as <span id=':char8_t__'><span class='tcode_in_codeblock'>char8_<span class='shy'></span>t</span></span></span>
<span class='keyword'>char</span> <span class='operator'>*</span>pc <span class='operator'>=</span> <span class='operator'>&amp;</span>u8c;                <span class='comment'>// ill-formed; previously well-formed</span>

std<span class='operator'>::</span>string s <span class='operator'>=</span> <span class='literal'>u8"text"</span>;       <span class='comment'>// ill-formed; previously well-formed</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>char</span> <span class='operator'>*</span>s<span class='parenthesis'>)</span>;
f<span class='parenthesis'>(</span><span class='literal'>u8"text"</span><span class='parenthesis'>)</span>;                    <span class='comment'>// ill-formed; previously well-formed</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> ct;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> ct<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> type <span class='operator'>=</span> <span class='keyword'>char</span>;
<span class='curlybracket'>}</span>;
ct<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='literal'>u8'c'</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>type x;    <span class='comment'>// ill-formed; previously well-formed.</span>
</span></div></div></div></div><div id='basic' class='section'><h3 ><a class='secnum' href='#basic' style='min-width:80pt'>C.3.3</a> <a href='basic' title='6&emsp;Basics'>[basic]</a>: basics <a class='abbr_ref' href='diff.cpp17.basic'>[diff.cpp17.basic]</a></h3><div class='para' id='basic-1'><div class='marginalizedparent'><a class='marginalized' href='#basic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L690'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='basic.life'>[basic.<span class='shy'></span>life]</a>
<br/> <div id='basic-1.sentence-1' class='sentence'><b>Change:</b> A pseudo-destructor call ends the lifetime of
the object to which it is applied<a class='hidden_link' href='#basic-1.sentence-1'>.</a></div> <br/> <div id='basic-1.sentence-2' class='sentence'><b>Rationale:</b> Increase consistency of the language model<a class='hidden_link' href='#basic-1.sentence-2'>.</a></div> <br/> <div id='basic-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid ISO C++ 2017 code may be ill-formed or
have undefined behavior in this revision of C++<a class='hidden_link' href='#basic-1.sentence-3'>.</a></div> <div id='basic-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>123</span>;
  <span class='keyword'>using</span> T <span class='operator'>=</span> <span class='keyword'>int</span>;
  a<span class='operator'>.</span><span class='operator'>~</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>return</span> a;         <span class='comment'>// undefined behavior; previously returned 123</span>
<span class='curlybracket'>}</span>
</span></div></div></div><div class='para' id='basic-2'><div class='marginalizedparent'><a class='marginalized' href='#basic-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L709'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='intro.races'>[intro.<span class='shy'></span>races]</a>
<br/> <div id='basic-2.sentence-1' class='sentence'><b>Change:</b> Except for the initial release operation,
a release sequence consists solely of atomic read-modify-write operations<a class='hidden_link' href='#basic-2.sentence-1'>.</a></div> <br/> <div id='basic-2.sentence-2' class='sentence'><b>Rationale:</b> Removal of rarely used and confusing feature<a class='hidden_link' href='#basic-2.sentence-2'>.</a></div> <br/> <div id='basic-2.sentence-3' class='sentence'><b>Effect on original feature:</b> If a <span class='texttt'>memory_<span class='shy'></span>order_<span class='shy'></span>release</span> atomic store is followed
by a <span class='texttt'>memory_<span class='shy'></span>order_<span class='shy'></span>relaxed</span> store to the same variable by the same thread,
then reading the latter value with a <span class='texttt'>memory_<span class='shy'></span>order_<span class='shy'></span>acquire</span> load
no longer provides any “happens before” guarantees,
even in the absence of intervening stores by another thread<a class='hidden_link' href='#basic-2.sentence-3'>.</a></div></div></div></div><div id='expr' class='section'><h3 ><a class='secnum' href='#expr' style='min-width:80pt'>C.3.4</a> <a href='expr' title='7&emsp;Expressions'>[expr]</a>: expressions <a class='abbr_ref' href='diff.cpp17.expr'>[diff.cpp17.expr]</a></h3><div class='para' id='expr-1'><div class='marginalizedparent'><a class='marginalized' href='#expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L724'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='expr.prim.lambda.capture'>[expr.<span class='shy'></span>prim.<span class='shy'></span>lambda.<span class='shy'></span>capture]</a>
<br/> <div id='expr-1.sentence-1' class='sentence'><b>Change:</b> Implicit lambda capture may capture additional entities<a class='hidden_link' href='#expr-1.sentence-1'>.</a></div> <br/> <div id='expr-1.sentence-2' class='sentence'><b>Rationale:</b> Rule simplification, necessary to resolve interactions with constexpr if<a class='hidden_link' href='#expr-1.sentence-2'>.</a></div> <br/> <div id='expr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Lambdas with a <a href='expr.prim.lambda.capture#nt:capture-default' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default'><span class='textsf'><i >capture-default</i></span></span></a>
may capture local entities
that were not captured in C++ 2017
if those entities are only referenced in contexts
that do not result in an odr-use<a class='hidden_link' href='#expr-1.sentence-3'>.</a></div></div></div></div><div id='dcl.dcl' class='section'><h3 ><a class='secnum' href='#dcl.dcl' style='min-width:80pt'>C.3.5</a> <a href='dcl.dcl' title='9&emsp;Declarations'>[dcl.<span class='shy'></span>dcl]</a>: declarations <a class='abbr_ref' href='diff.cpp17.dcl.dcl'>[diff.cpp17.dcl.dcl]</a></h3><div class='para' id='dcl.dcl-1'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L738'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.typedef'>[dcl.<span class='shy'></span>typedef]</a>
<br/> <div id='dcl.dcl-1.sentence-1' class='sentence'><b>Change:</b> Unnamed classes with a typedef name for linkage purposes
can contain only C-compatible constructs<a class='hidden_link' href='#dcl.dcl-1.sentence-1'>.</a></div> <br/> <div id='dcl.dcl-1.sentence-2' class='sentence'><b>Rationale:</b> Necessary for implementability<a class='hidden_link' href='#dcl.dcl-1.sentence-2'>.</a></div> <br/> <div id='dcl.dcl-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may be ill-formed in this revision of C++<a class='hidden_link' href='#dcl.dcl-1.sentence-3'>.</a></div> <div id='dcl.dcl-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>typedef</span> <span class='keyword'>struct</span> <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>           <span class='comment'>// ill-formed; previously well-formed</span>
<span class='curlybracket'>}</span> S;
</span></div></div></div><div class='para' id='dcl.dcl-2'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L753'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.fct.default'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>default]</a>
<br/> <div id='dcl.dcl-2.sentence-1' class='sentence'><b>Change:</b> A function cannot have different default arguments
in different translation units<a class='hidden_link' href='#dcl.dcl-2.sentence-1'>.</a></div> <br/> <div id='dcl.dcl-2.sentence-2' class='sentence'><b>Rationale:</b> Required for modules support<a class='hidden_link' href='#dcl.dcl-2.sentence-2'>.</a></div> <br/> <div id='dcl.dcl-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may be ill-formed in this revision of C++,
with no diagnostic required<a class='hidden_link' href='#dcl.dcl-2.sentence-3'>.</a></div> <div id='dcl.dcl-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='comment'>// Translation unit 1</span>
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>42</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>

<span class='comment'>// Translation unit 2</span>
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>76</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>         <span class='comment'>// ill-formed, no diagnostic required; previously well-formed</span>
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>              <span class='comment'>// used to return 42</span>
</span></div></div></div><div class='para' id='dcl.dcl-3'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L774'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.aggr'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a>
<br/> <div id='dcl.dcl-3.sentence-1' class='sentence'><b>Change:</b> A class that has user-declared constructors is never an aggregate<a class='hidden_link' href='#dcl.dcl-3.sentence-1'>.</a></div> <br/> <div id='dcl.dcl-3.sentence-2' class='sentence'><b>Rationale:</b> Remove potentially error-prone aggregate initialization
which may apply notwithstanding the declared constructors of a class<a class='hidden_link' href='#dcl.dcl-3.sentence-2'>.</a></div> <br/> <div id='dcl.dcl-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that aggregate-initializes
a type with a user-declared constructor
may be ill-formed or have different semantics
in this revision of C++<a class='hidden_link' href='#dcl.dcl-3.sentence-3'>.</a></div> <div id='dcl.dcl-3.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>              <span class='comment'>// not an aggregate; previously an aggregate</span>
  A<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>              <span class='comment'>// not an aggregate; previously an aggregate</span>
  B<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> C <span class='curlybracket'>{</span>              <span class='comment'>// not an aggregate; previously an aggregate</span>
  C<span class='parenthesis'>(</span>C<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  <span class='keyword'>int</span> a, b;
<span class='curlybracket'>}</span>;

A a<span class='curlybracket'>{</span><span class='curlybracket'>}</span>;                  <span class='comment'>// ill-formed; previously well-formed</span>
B b <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>;              <span class='comment'>// ill-formed; previously well-formed</span>
<span class='keyword'>auto</span><span class='operator'>*</span> c <span class='operator'>=</span> <span class='keyword'>new</span> C<span class='curlybracket'>{</span><span class='literal'>2</span>, <span class='literal'>3</span><span class='curlybracket'>}</span>;  <span class='comment'>// ill-formed; previously well-formed</span>

<span class='keyword'>struct</span> Y;

<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> Y<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> Y <span class='curlybracket'>{</span>              <span class='comment'>// not an aggregate; previously an aggregate</span>
  Y<span class='parenthesis'>(</span><span class='keyword'>const</span> Y<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  X x;
<span class='curlybracket'>}</span>;

Y y<span class='curlybracket'>{</span>X<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span>;               <span class='comment'>// copy constructor call; previously aggregate-initialization</span>
</span></div></div></div><div class='para' id='dcl.dcl-4'><div class='marginalizedparent'><a class='marginalized' href='#dcl.dcl-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L819'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.list'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>
<br/> <div id='dcl.dcl-4.sentence-1' class='sentence'><b>Change:</b> Boolean conversion from a pointer or pointer-to-member type
is now a narrowing conversion<a class='hidden_link' href='#dcl.dcl-4.sentence-1'>.</a></div> <br/> <div id='dcl.dcl-4.sentence-2' class='sentence'><b>Rationale:</b> Catches bugs<a class='hidden_link' href='#dcl.dcl-4.sentence-2'>.</a></div> <br/> <div id='dcl.dcl-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may fail to compile
in this revision of C++<a class='hidden_link' href='#dcl.dcl-4.sentence-3'>.</a></div> <div id='dcl.dcl-4.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>bool</span> y<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>"bc"</span> <span class='curlybracket'>}</span>;    <span class='comment'>// ill-formed; previously well-formed</span>
</span></div></div></div></div><div id='class' class='section'><h3 ><a class='secnum' href='#class' style='min-width:80pt'>C.3.6</a> <a href='class' title='11&emsp;Classes'>[class]</a>: classes <a class='abbr_ref' href='diff.cpp17.class'>[diff.cpp17.class]</a></h3><div class='para' id='class-1'><div class='marginalizedparent'><a class='marginalized' href='#class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L835'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='class.ctor'>[class.<span class='shy'></span>ctor]</a> and <a href='class.conv.fct'>[class.<span class='shy'></span>conv.<span class='shy'></span>fct]</a>
<br/> <div id='class-1.sentence-1' class='sentence'><b>Change:</b> The class name can no longer be used parenthesized
immediately after an <span id=':explicit'><span class='texttt'><span class='keyword'>explicit</span></span></span> <a href='dcl.spec.general#nt:decl-specifier' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier'><span class='textsf'><i >decl-specifier</i></span></span></a>
in a constructor declaration<a class='hidden_link' href='#class-1.sentence-1'>.</a></div> <div id='class-1.sentence-2' class='sentence'>The <a href='class.conv.fct#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id'><span class='textsf'><i >conversion-function-id</i></span></span></a> can no longer be used parenthesized
immediately after an <span id=':explicit_'><span class='texttt'><span class='keyword'>explicit</span></span></span> <a href='dcl.spec.general#nt:decl-specifier' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier_'><span class='textsf'><i >decl-specifier</i></span></span></a>
in a conversion function declaration<a class='hidden_link' href='#class-1.sentence-2'>.</a></div> <br/> <div id='class-1.sentence-3' class='sentence'><b>Rationale:</b> Necessary for new functionality<a class='hidden_link' href='#class-1.sentence-3'>.</a></div> <br/> <div id='class-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may fail to compile
in this revision of C++<a class='hidden_link' href='#class-1.sentence-4'>.</a></div> <div id='class-1.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>explicit</span> <span class='parenthesis'>(</span>S<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>const</span> S<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;       <span class='comment'>// ill-formed; previously well-formed</span>
  <span class='keyword'>explicit</span> <span class='parenthesis'>(</span><span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;    <span class='comment'>// ill-formed; previously well-formed</span>
  <span class='keyword'>explicit</span><span class='parenthesis'>(</span><span class='literal'>true</span><span class='parenthesis'>)</span> <span class='parenthesis'>(</span>S<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;      <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>;
</span></div></div></div><div class='para' id='class-2'><div class='marginalizedparent'><a class='marginalized' href='#class-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L857'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='class.ctor'>[class.<span class='shy'></span>ctor]</a> and <a href='class.dtor'>[class.<span class='shy'></span>dtor]</a>
<br/> <div id='class-2.sentence-1' class='sentence'><b>Change:</b> A <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id'><span class='textsf'><i >simple-template-id</i></span></span></a>
is no longer valid as the <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id'><span class='textsf'><i >declarator-id</i></span></span></a> of a constructor or destructor<a class='hidden_link' href='#class-2.sentence-1'>.</a></div> <br/> <div id='class-2.sentence-2' class='sentence'><b>Rationale:</b> Remove potentially error-prone option for redundancy<a class='hidden_link' href='#class-2.sentence-2'>.</a></div> <br/> <div id='class-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may fail to compile
in this revision of C++<a class='hidden_link' href='#class-2.sentence-3'>.</a></div> <div id='class-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// error: <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id_'><span class='textsf'><i >simple-template-id</i></span></span></a> not allowed for constructor</span>
  A<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK, injected-class-name used</span>
  <span class='operator'>~</span>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// error: <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id__'><span class='textsf'><i >simple-template-id</i></span></span></a> not allowed for destructor</span>
<span class='curlybracket'>}</span>;
</span></div></div></div><div class='para' id='class-3'><div class='marginalizedparent'><a class='marginalized' href='#class-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L876'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.copy.elision'>[class.<span class='shy'></span>copy.<span class='shy'></span>elision]</a>
<br/> <div id='class-3.sentence-1' class='sentence'><b>Change:</b> A function returning an implicitly movable entity
may invoke a constructor taking an rvalue reference to a type
different from that of the returned expression<a class='hidden_link' href='#class-3.sentence-1'>.</a></div> <div id='class-3.sentence-2' class='sentence'>Function and catch-clause parameters can be thrown using move constructors<a class='hidden_link' href='#class-3.sentence-2'>.</a></div> <br/> <div id='class-3.sentence-3' class='sentence'><b>Rationale:</b> Side effect of making it easier to write
more efficient code that takes advantage of moves<a class='hidden_link' href='#class-3.sentence-3'>.</a></div> <br/> <div id='class-3.sentence-4' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may fail to compile or have different semantics
in this revision of C++<a class='hidden_link' href='#class-3.sentence-4'>.</a></div> <div id='class-3.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> base <span class='curlybracket'>{</span>
  base<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  base<span class='parenthesis'>(</span>base <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>private</span><span class='operator'>:</span>
  base<span class='parenthesis'>(</span>base <span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> derived <span class='operator'>:</span> base <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

base f<span class='parenthesis'>(</span>base b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>throw</span> b;                      <span class='comment'>// error: <span class='tcode_in_codeblock'>base(base &amp;&amp;)</span> is private</span>
  derived d;
  <span class='keyword'>return</span> d;                     <span class='comment'>// error: <span class='tcode_in_codeblock'>base(base &amp;&amp;)</span> is private</span>
<span class='curlybracket'>}</span>

<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  S<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>char</span> <span class='operator'>*</span>s<span class='parenthesis'>)</span> <span class='operator'>:</span> m<span class='parenthesis'>(</span>s<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
  S<span class='parenthesis'>(</span><span class='keyword'>const</span> S<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  S<span class='parenthesis'>(</span>S<span class='operator'>&amp;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='operator'>:</span> m<span class='parenthesis'>(</span>other<span class='operator'>.</span>m<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> other<span class='operator'>.</span>m <span class='operator'>=</span> <span class='literal'>nullptr</span>; <span class='curlybracket'>}</span>
  <span class='keyword'>const</span> <span class='keyword'>char</span> <span class='operator'>*</span> m;
<span class='curlybracket'>}</span>;

S consume<span class='parenthesis'>(</span>S<span class='operator'>&amp;</span><span class='operator'>&amp;</span> s<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> s; <span class='curlybracket'>}</span>

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  S s<span class='parenthesis'>(</span><span class='literal'>"text"</span><span class='parenthesis'>)</span>;
  consume<span class='parenthesis'>(</span><span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>S<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>s<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
  <span class='keyword'>char</span> c <span class='operator'>=</span> <span class='operator'>*</span>s<span class='operator'>.</span>m;                <span class='comment'>// undefined behavior; previously ok</span>
<span class='curlybracket'>}</span>
</span></div></div></div></div><div id='over' class='section'><h3 ><a class='secnum' href='#over' style='min-width:80pt'>C.3.7</a> <a href='over' title='12&emsp;Overloading'>[over]</a>: overloading <a class='abbr_ref' href='diff.cpp17.over'>[diff.cpp17.over]</a></h3><div class='para' id='over-1'><div class='marginalizedparent'><a class='marginalized' href='#over-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L923'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='over.match.oper'>[over.<span class='shy'></span>match.<span class='shy'></span>oper]</a>
<br/> <div id='over-1.sentence-1' class='sentence'><b>Change:</b> Equality and inequality expressions can now find
reversed and rewritten candidates<a class='hidden_link' href='#over-1.sentence-1'>.</a></div> <br/> <div id='over-1.sentence-2' class='sentence'><b>Rationale:</b> Improve consistency of equality with three-way comparison
and make it easier to write the full complement of equality operations<a class='hidden_link' href='#over-1.sentence-2'>.</a></div> <br/> <div id='over-1.sentence-3' class='sentence'><b>Effect on original feature:</b> For certain pairs of types where one is convertible to the other,
equality or inequality expressions between an object of one type
and an object of the other type invoke a different operator<a class='hidden_link' href='#over-1.sentence-3'>.</a></div> <div id='over-1.sentence-4' class='sentence'>Also, for certain types, equality or inequality expressions
between two objects of that type become ambiguous<a class='hidden_link' href='#over-1.sentence-4'>.</a></div> <div id='over-1.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span>A, <span class='keyword'>int</span><span class='parenthesis'>)</span>;        <span class='comment'>// #1</span>
<span class='comment'>// #2 is built-in candidate: <span class='tcode_in_codeblock'>bool operator==(int, int);</span></span>
<span class='comment'>// #3 is built-in candidate: <span class='tcode_in_codeblock'>bool operator!=(int, int);</span></span>

<span class='keyword'>int</span> check<span class='parenthesis'>(</span>A x, A y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='parenthesis'>(</span>x <span class='operator'>=</span><span class='operator'>=</span> y<span class='parenthesis'>)</span> <span class='operator'>+</span>             <span class='comment'>// ill-formed; previously well-formed</span>
    <span class='parenthesis'>(</span><span class='literal'>10</span> <span class='operator'>=</span><span class='operator'>=</span> x<span class='parenthesis'>)</span> <span class='operator'>+</span>                 <span class='comment'>// calls #1, previously selected #2</span>
    <span class='parenthesis'>(</span><span class='literal'>10</span> <span class='operator'>!</span><span class='operator'>=</span> x<span class='parenthesis'>)</span>;                  <span class='comment'>// calls #1, previously selected #3</span>
<span class='curlybracket'>}</span>
</span></div></div></div><div class='para' id='over-2'><div class='marginalizedparent'><a class='marginalized' href='#over-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L953'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='over.match.oper'>[over.<span class='shy'></span>match.<span class='shy'></span>oper]</a>
<br/> <div id='over-2.sentence-1' class='sentence'><b>Change:</b> Overload resolution may change for equality operators (<a href='expr.eq' title='7.6.10&emsp;Equality operators'>[expr.<span class='shy'></span>eq]</a>)<a class='hidden_link' href='#over-2.sentence-1'>.</a></div> <br/> <div id='over-2.sentence-2' class='sentence'><b>Rationale:</b> Support calling <span class='texttt'><span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span></span> with reversed order of arguments<a class='hidden_link' href='#over-2.sentence-2'>.</a></div> <br/> <div id='over-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that uses equality operators with conversion functions
may be ill-formed or have different semantics in this revision of C++<a class='hidden_link' href='#over-2.sentence-3'>.</a></div> <div id='over-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>10</span>; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span>A, <span class='keyword'>int</span><span class='parenthesis'>)</span>;        <span class='comment'>// #1</span>
<span class='comment'>// #2 is built-in candidate: <span class='tcode_in_codeblock'>bool operator==(int, int);</span></span>
<span class='keyword'>bool</span> b <span class='operator'>=</span> <span class='literal'>10</span> <span class='operator'>=</span><span class='operator'>=</span> A<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;             <span class='comment'>// calls #1 with reversed order of arguments; previously selected #2</span>

<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> B<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;    <span class='comment'>// member function with no cv-qualifier</span>
<span class='curlybracket'>}</span>;
B b1;
<span class='keyword'>bool</span> eq <span class='operator'>=</span> <span class='parenthesis'>(</span>b1 <span class='operator'>=</span><span class='operator'>=</span> b1<span class='parenthesis'>)</span>;           <span class='comment'>// ambiguous; previously well-formed</span>
</span></div></div></div></div><div id='temp' class='section'><h3 ><a class='secnum' href='#temp' style='min-width:80pt'>C.3.8</a> <a href='temp' title='13&emsp;Templates'>[temp]</a>: templates <a class='abbr_ref' href='diff.cpp17.temp'>[diff.cpp17.temp]</a></h3><div class='para' id='temp-1'><div class='marginalizedparent'><a class='marginalized' href='#temp-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L980'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='temp.names'>[temp.<span class='shy'></span>names]</a>
<br/> <div id='temp-1.sentence-1' class='sentence'><b>Change:</b> An <a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.4.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id'><span class='textsf'><i >unqualified-id</i></span></span></a>
that is followed by a <span class='texttt'><span class='anglebracket'>&lt;</span></span>
and for which name lookup
finds nothing or finds a function
will be treated as a <a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name'><span class='textsf'><i >template-name</i></span></span></a>
in order to potentially cause argument dependent lookup to be performed<a class='hidden_link' href='#temp-1.sentence-1'>.</a></div> <br/> <div id='temp-1.sentence-2' class='sentence'><b>Rationale:</b> It was problematic to call a function template
with an explicit template argument list
via argument dependent lookup
because of the need to have a template with the same name
visible via normal lookup<a class='hidden_link' href='#temp-1.sentence-2'>.</a></div> <br/> <div id='temp-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Previously valid code that uses a function name
as the left operand of a <span class='texttt'><span class='anglebracket'>&lt;</span></span> operator
would become ill-formed<a class='hidden_link' href='#temp-1.sentence-3'>.</a></div> <div id='temp-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span><span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span>fp<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>, A<span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A a;
  f <span class='anglebracket'>&lt;</span> a;    <span class='comment'>// ill-formed; previously well-formed</span>
  <span class='parenthesis'>(</span>f<span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span> a;  <span class='comment'>// still well-formed</span>
<span class='curlybracket'>}</span>
</span></div></div></div></div><div id='except' class='section'><h3 ><a class='secnum' href='#except' style='min-width:80pt'>C.3.9</a> <a href='except' title='14&emsp;Exception handling'>[except]</a>: exception handling <a class='abbr_ref' href='diff.cpp17.except'>[diff.cpp17.except]</a></h3><div class='para' id='except-1'><div class='marginalizedparent'><a class='marginalized' href='#except-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1012'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='except.spec'>[except.<span class='shy'></span>spec]</a>
<br/> <div id='except-1.sentence-1' class='sentence'><b>Change:</b> Remove <span class='texttt'><span class='keyword'>throw</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> exception specification<a class='hidden_link' href='#except-1.sentence-1'>.</a></div> <br/> <div id='except-1.sentence-2' class='sentence'><b>Rationale:</b> Removal of obsolete feature that has been replaced by <span id=':noexcept'><span class='texttt'><span class='keyword'>noexcept</span></span></span><a class='hidden_link' href='#except-1.sentence-2'>.</a></div> <br/> <div id='except-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 function declaration, member function declaration, function
pointer declaration, or function reference declaration that uses <span class='texttt'><span class='keyword'>throw</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
for its exception specification will be rejected as ill-formed in this
revision of C++<a class='hidden_link' href='#except-1.sentence-3'>.</a></div> <div id='except-1.sentence-4' class='sentence'>It should simply be replaced with <span id=':noexcept_'><span class='texttt'><span class='keyword'>noexcept</span></span></span> for no
change of meaning since C++ 2017<a class='hidden_link' href='#except-1.sentence-4'>.</a></div> <div id='except-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#except-note-1'>1</a></i>:&ensp;<div id='except-1.sentence-5' class='sentence'>There is no way to write a function declaration
that is non-throwing in this revision of C++
and is also non-throwing in C++ 2003
except by using the preprocessor to generate
a different token sequence in each case<a class='hidden_link' href='#except-1.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='library' class='section'><h3 ><a class='secnum' href='#library' style='min-width:80pt'>C.3.10</a> <a href='library' title='16&emsp;Library introduction'>[library]</a>: library introduction <a class='abbr_ref' href='diff.cpp17.library'>[diff.cpp17.library]</a></h3><div class='para' id='library-1'><div class='marginalizedparent'><a class='marginalized' href='#library-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1033'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='headers'>[headers]</a>
<br/> <div id='library-1.sentence-1' class='sentence'><b>Change:</b> New headers<a class='hidden_link' href='#library-1.sentence-1'>.</a></div> <br/> <div id='library-1.sentence-2' class='sentence'><b>Rationale:</b> New functionality<a class='hidden_link' href='#library-1.sentence-2'>.</a></div> <br/> <div id='library-1.sentence-3' class='sentence'><b>Effect on original feature:</b> The following C++ headers are new:
<a href='barrier.syn#header:%3cbarrier%3e' title='33.9.3.2&emsp;Header &lt;barrier&gt; synopsis&emsp;[barrier.syn]'><span id='headerref:<barrier>'><span class='texttt'>&lt;barrier&gt;</span></span></a>,
<a href='bit.general#header:%3cbit%3e' title='22.15.1&emsp;General&emsp;[bit.general]'><span id='headerref:<bit>'><span class='texttt'>&lt;bit&gt;</span></span></a>,
<a href='charconv.syn#header:%3ccharconv%3e' title='22.13.1&emsp;Header &lt;charconv&gt; synopsis&emsp;[charconv.syn]'><span id='headerref:<charconv>'><span class='texttt'>&lt;charconv&gt;</span></span></a>,
<a href='compare.syn#header:%3ccompare%3e' title='17.11.1&emsp;Header &lt;compare&gt; synopsis&emsp;[compare.syn]'><span id='headerref:<compare>'><span class='texttt'>&lt;compare&gt;</span></span></a>,
<a href='concepts.syn#header:%3cconcepts%3e' title='18.3&emsp;Header &lt;concepts&gt; synopsis&emsp;[concepts.syn]'><span id='headerref:<concepts>'><span class='texttt'>&lt;concepts&gt;</span></span></a>,
<a href='coroutine.syn#header:%3ccoroutine%3e' title='17.12.2&emsp;Header &lt;coroutine&gt; synopsis&emsp;[coroutine.syn]'><span id='headerref:<coroutine>'><span class='texttt'>&lt;coroutine&gt;</span></span></a>,
<a href='format.syn#header:%3cformat%3e' title='22.14.1&emsp;Header &lt;format&gt; synopsis&emsp;[format.syn]'><span id='headerref:<format>'><span class='texttt'>&lt;format&gt;</span></span></a>,
<a href='latch.syn#header:%3clatch%3e' title='33.9.2.2&emsp;Header &lt;latch&gt; synopsis&emsp;[latch.syn]'><span id='headerref:<latch>'><span class='texttt'>&lt;latch&gt;</span></span></a>,
<a href='numbers.syn#header:%3cnumbers%3e' title='28.8.1&emsp;Header &lt;numbers&gt; synopsis&emsp;[numbers.syn]'><span id='headerref:<numbers>'><span class='texttt'>&lt;numbers&gt;</span></span></a>,
<a href='ranges.syn#header:%3cranges%3e' title='26.2&emsp;Header &lt;ranges&gt; synopsis&emsp;[ranges.syn]'><span id='headerref:<ranges>'><span class='texttt'>&lt;ranges&gt;</span></span></a>,
<a href='semaphore.syn#header:%3csemaphore%3e' title='33.8.2&emsp;Header &lt;semaphore&gt; synopsis&emsp;[semaphore.syn]'><span id='headerref:<semaphore>'><span class='texttt'>&lt;semaphore&gt;</span></span></a>,
<a href='source.location.syn#header:%3csource_location%3e' title='17.8.1&emsp;Header &lt;source_&shy;location&gt; synopsis&emsp;[source.location.syn]'><span id='headerref:<source_location>'><span class='texttt'>&lt;source_<span class='shy'></span>location&gt;</span></span></a>,
<a href='span.syn#header:%3cspan%3e' title='24.7.2.1&emsp;Header &lt;span&gt; synopsis&emsp;[span.syn]'><span id='headerref:<span>'><span class='texttt'>&lt;span&gt;</span></span></a>,
<a href='thread.stoptoken.syn#header:%3cstop_token%3e' title='33.3.2&emsp;Header &lt;stop_&shy;token&gt; synopsis&emsp;[thread.stoptoken.syn]'><span id='headerref:<stop_token>'><span class='texttt'>&lt;stop_<span class='shy'></span>token&gt;</span></span></a>,
<a href='syncstream.syn#header:%3csyncstream%3e' title='31.11.1&emsp;Header &lt;syncstream&gt; synopsis&emsp;[syncstream.syn]'><span id='headerref:<syncstream>'><span class='texttt'>&lt;syncstream&gt;</span></span></a>, and
<a href='version.syn#header:%3cversion%3e' title='17.3.2&emsp;Header &lt;version&gt; synopsis&emsp;[version.syn]'><span id='headerref:<version>'><span class='texttt'>&lt;version&gt;</span></span></a><a class='hidden_link' href='#library-1.sentence-3'>.</a></div> <div id='library-1.sentence-4' class='sentence'>Valid C++ 2017 code that <span class='texttt'><span class='preprocessordirective'>#include</span></span>s headers with these names may be
invalid in this revision of C++<a class='hidden_link' href='#library-1.sentence-4'>.</a></div></div></div><div class='para' id='library-2'><div class='marginalizedparent'><a class='marginalized' href='#library-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1059'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='headers'>[headers]</a>
<br/> <div id='library-2.sentence-1' class='sentence'><b>Change:</b> Remove vacuous C++ header files<a class='hidden_link' href='#library-2.sentence-1'>.</a></div> <br/> <div id='library-2.sentence-2' class='sentence'><b>Rationale:</b> The empty headers implied a false requirement to achieve C compatibility with the C++ headers<a class='hidden_link' href='#library-2.sentence-2'>.</a></div> <br/> <div id='library-2.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that <span class='texttt'><span class='preprocessordirective'>#include</span></span>s any of the following headers may fail to compile:
<a class='index' id=':<ccomplex>,absence_thereof'></a><span class='texttt'><span class='anglebracket'>&lt;</span>ccomplex<span class='anglebracket'>&gt;</span></span>,
<a class='index' id=':<ciso646>,absence_thereof'></a><span class='texttt'><span class='anglebracket'>&lt;</span>ciso646<span class='anglebracket'>&gt;</span></span>,
<a class='index' id=':<cstdalign>,absence_thereof'></a><span class='texttt'><span class='anglebracket'>&lt;</span>cstdalign<span class='anglebracket'>&gt;</span></span>,
<a class='index' id=':<cstdbool>,absence_thereof'></a><span class='texttt'><span class='anglebracket'>&lt;</span>cstdbool<span class='anglebracket'>&gt;</span></span>, and
<a class='index' id=':<ctgmath>,absence_thereof'></a><span class='texttt'><span class='anglebracket'>&lt;</span>ctgmath<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#library-2.sentence-3'>.</a></div> <div id='library-2.sentence-4' class='sentence'>To retain the same behavior:
<ul class='itemize'><li id='library-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#library-2.1'>(2.1)</a></div>a <span class='texttt'><span class='preprocessordirective'>#include</span></span> of <a class='index' id=':<ccomplex>,absence_thereof_'></a><span class='texttt'><span class='anglebracket'>&lt;</span>ccomplex<span class='anglebracket'>&gt;</span></span> can be replaced by
a <span class='texttt'><span class='preprocessordirective'>#include</span></span> of <a href='complex.syn#header:%3ccomplex%3e' title='28.4.2&emsp;Header &lt;complex&gt; synopsis&emsp;[complex.syn]'><span id='headerref:<complex>'><span class='texttt'>&lt;complex&gt;</span></span></a>,</li><li id='library-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#library-2.2'>(2.2)</a></div>a <span class='texttt'><span class='preprocessordirective'>#include</span></span> of <a class='index' id=':<ctgmath>,absence_thereof_'></a><span class='texttt'><span class='anglebracket'>&lt;</span>ctgmath<span class='anglebracket'>&gt;</span></span> can be replaced by
a <span class='texttt'><span class='preprocessordirective'>#include</span></span> of <a href='cmath.syn#header:%3ccmath%3e' title='28.7.1&emsp;Header &lt;cmath&gt; synopsis&emsp;[cmath.syn]'><span id='headerref:<cmath>'><span class='texttt'>&lt;cmath&gt;</span></span></a> and
a <span class='texttt'><span class='preprocessordirective'>#include</span></span> of <a href='complex.syn#header:%3ccomplex%3e' title='28.4.2&emsp;Header &lt;complex&gt; synopsis&emsp;[complex.syn]'><span id='headerref:<complex>_'><span class='texttt'>&lt;complex&gt;</span></span></a>,
and</li><li id='library-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#library-2.3'>(2.3)</a></div>a <span class='texttt'><span class='preprocessordirective'>#include</span></span> of
<a class='index' id=':<ciso646>,absence_thereof_'></a><span class='texttt'><span class='anglebracket'>&lt;</span>ciso646<span class='anglebracket'>&gt;</span></span>,
<a class='index' id=':<cstdalign>,absence_thereof_'></a><span class='texttt'><span class='anglebracket'>&lt;</span>cstdalign<span class='anglebracket'>&gt;</span></span>, or
<a class='index' id=':<cstdbool>,absence_thereof_'></a><span class='texttt'><span class='anglebracket'>&lt;</span>cstdbool<span class='anglebracket'>&gt;</span></span>
can simply be removed<a class='hidden_link' href='#library-2.sentence-4'>.</a></li></ul></div></div></div></div><div id='containers' class='section'><h3 ><a class='secnum' href='#containers' style='min-width:80pt'>C.3.11</a> <a href='containers' title='24&emsp;Containers library'>[containers]</a>: containers library <a class='abbr_ref' href='diff.cpp17.containers'>[diff.cpp17.containers]</a></h3><div class='para' id='containers-1'><div class='marginalizedparent'><a class='marginalized' href='#containers-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1091'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='forward.list'>[forward.<span class='shy'></span>list]</a> and <a href='list'>[list]</a>
<br/> <div id='containers-1.sentence-1' class='sentence'><b>Change:</b> Return types of <span class='texttt'>remove</span>, <span class='texttt'>remove_<span class='shy'></span>if</span>, and <span class='texttt'>unique</span>
changed from <span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span> to <span class='texttt'>container<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>type</span><a class='hidden_link' href='#containers-1.sentence-1'>.</a></div> <br/> <div id='containers-1.sentence-2' class='sentence'><b>Rationale:</b> Improve efficiency and convenience of finding number of removed elements<a class='hidden_link' href='#containers-1.sentence-2'>.</a></div> <br/> <div id='containers-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Code that depends on the return types might have different semantics in this revision of C++<a class='hidden_link' href='#containers-1.sentence-3'>.</a></div> <div id='containers-1.sentence-4' class='sentence'>Translation units compiled against this version of C++ may be incompatible with
translation units compiled against C++ 2017, either failing to link or having undefined behavior<a class='hidden_link' href='#containers-1.sentence-4'>.</a></div></div></div></div><div id='iterators' class='section'><h3 ><a class='secnum' href='#iterators' style='min-width:80pt'>C.3.12</a> <a href='iterators' title='25&emsp;Iterators library'>[iterators]</a>: iterators library <a class='abbr_ref' href='diff.cpp17.iterators'>[diff.cpp17.iterators]</a></h3><div class='para' id='iterators-1'><div class='marginalizedparent'><a class='marginalized' href='#iterators-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1104'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='iterator.traits'>[iterator.<span class='shy'></span>traits]</a>
<br/> <div id='iterators-1.sentence-1' class='sentence'><b>Change:</b> The specialization of <span class='texttt'>iterator_<span class='shy'></span>traits</span> for <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> and
for function pointer types no longer contains any nested typedefs<a class='hidden_link' href='#iterators-1.sentence-1'>.</a></div> <br/> <div id='iterators-1.sentence-2' class='sentence'><b>Rationale:</b> Corrects an issue misidentifying pointer types that are not incrementable
as iterator types<a class='hidden_link' href='#iterators-1.sentence-2'>.</a></div> <br/> <div id='iterators-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that relies on the presence of the typedefs
may fail to compile, or have different behavior<a class='hidden_link' href='#iterators-1.sentence-3'>.</a></div></div></div></div><div id='alg.reqs' class='section'><h3 ><a class='secnum' href='#alg.reqs' style='min-width:80pt'>C.3.13</a> <a href='algorithms' title='27&emsp;Algorithms library'>[algorithms]</a>: algorithms library <a class='abbr_ref' href='diff.cpp17.alg.reqs'>[diff.cpp17.alg.reqs]</a></h3><div class='para' id='alg.reqs-1'><div class='marginalizedparent'><a class='marginalized' href='#alg.reqs-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1117'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='algorithms.requirements'>[algorithms.<span class='shy'></span>requirements]</a>
<br/> <div id='alg.reqs-1.sentence-1' class='sentence'><b>Change:</b> The number and order of deducible template parameters for algorithm declarations
is now unspecified, instead of being as-declared<a class='hidden_link' href='#alg.reqs-1.sentence-1'>.</a></div> <br/> <div id='alg.reqs-1.sentence-2' class='sentence'><b>Rationale:</b> Increase implementor freedom and allow some function templates
to be implemented as function objects with templated call operators<a class='hidden_link' href='#alg.reqs-1.sentence-2'>.</a></div> <br/> <div id='alg.reqs-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that passes explicit template arguments to
algorithms not explicitly specified to allow such in this version of C++
may fail to compile or have undefined behavior<a class='hidden_link' href='#alg.reqs-1.sentence-3'>.</a></div></div></div></div><div id='input.output' class='section'><h3 ><a class='secnum' href='#input.output' style='min-width:80pt'>C.3.14</a> <a href='input.output' title='31&emsp;Input/output library'>[input.<span class='shy'></span>output]</a>: input/output library <a class='abbr_ref' href='diff.cpp17.input.output'>[diff.cpp17.input.output]</a></h3><div class='para' id='input.output-1'><div class='marginalizedparent'><a class='marginalized' href='#input.output-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1131'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='istream.extractors'>[istream.<span class='shy'></span>extractors]</a>
<br/> <div id='input.output-1.sentence-1' class='sentence'><b>Change:</b> Character array extraction only takes array types<a class='hidden_link' href='#input.output-1.sentence-1'>.</a></div> <br/> <div id='input.output-1.sentence-2' class='sentence'><b>Rationale:</b> Increase safety via preventing buffer overflow at compile time<a class='hidden_link' href='#input.output-1.sentence-2'>.</a></div> <br/> <div id='input.output-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may fail to compile in this revision of C++<a class='hidden_link' href='#input.output-1.sentence-3'>.</a></div> <div id='input.output-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>auto</span> p <span class='operator'>=</span> <span class='keyword'>new</span> <span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>100</span><span class='squarebracket'>]</span>;
<span class='keyword'>char</span> q<span class='squarebracket'>[</span><span class='literal'>100</span><span class='squarebracket'>]</span>;
std<span class='operator'>::</span>cin <span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> std<span class='operator'>::</span>setw<span class='parenthesis'>(</span><span class='literal'>20</span><span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> p;         <span class='comment'>// ill-formed; previously well-formed</span>
std<span class='operator'>::</span>cin <span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> std<span class='operator'>::</span>setw<span class='parenthesis'>(</span><span class='literal'>20</span><span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> q;         <span class='comment'>// OK</span>
</span></div></div></div><div class='para' id='input.output-2'><div class='marginalizedparent'><a class='marginalized' href='#input.output-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1146'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='ostream.inserters.character'>[ostream.<span class='shy'></span>inserters.<span class='shy'></span>character]</a>
<a class='index' id=':UTF-8__'></a><br/> <div id='input.output-2.sentence-1' class='sentence'><b>Change:</b> Overload resolution for ostream inserters used with UTF-8 literals<a class='hidden_link' href='#input.output-2.sentence-1'>.</a></div> <br/> <div id='input.output-2.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#input.output-2.sentence-2'>.</a></div> <br/> <div id='input.output-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that passes UTF-8 literals to
<span class='texttt'>basic_<span class='shy'></span>ostream<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span></span> or
<span class='texttt'>basic_<span class='shy'></span>ostream<span class='anglebracket'>&lt;</span><span class='keyword'>wchar_<span class='shy'></span>t</span>, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span></span> is now ill-formed<a class='hidden_link' href='#input.output-2.sentence-3'>.</a></div> <div id='input.output-2.sentence-4' class='sentence'>For example:
<span class='codeblock'>std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>u8"text"</span>;          <span class='comment'>// previously called <span class='tcode_in_codeblock'>operator&lt;&lt;(const char*)</span> and printed a string;</span>
                                <span class='comment'>// now ill-formed</span>
std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>u8'X'</span>;             <span class='comment'>// previously called <span class='tcode_in_codeblock'>operator&lt;&lt;(char)</span> and printed a character;</span>
                                <span class='comment'>// now ill-formed</span>
</span></div></div></div><div class='para' id='input.output-3'><div class='marginalizedparent'><a class='marginalized' href='#input.output-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1164'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='ostream.inserters.character'>[ostream.<span class='shy'></span>inserters.<span class='shy'></span>character]</a>
<br/> <div id='input.output-3.sentence-1' class='sentence'><b>Change:</b> Overload resolution for ostream inserters
used with <span id=':wchar_t'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>, <span id=':char16_t'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span>, or <span id=':char32_t'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span> types<a class='hidden_link' href='#input.output-3.sentence-1'>.</a></div> <br/> <div id='input.output-3.sentence-2' class='sentence'><b>Rationale:</b> Removal of surprising behavior<a class='hidden_link' href='#input.output-3.sentence-2'>.</a></div> <br/> <div id='input.output-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that passes
<span id=':wchar_t_'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>, <span id=':char16_t_'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span>, or <span id=':char32_t_'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span> characters or strings
to <span class='texttt'>basic_<span class='shy'></span>ostream<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span></span> or
that passes <span id=':char16_t__'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span> or <span id=':char32_t__'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span> characters or strings
to <span class='texttt'>basic_<span class='shy'></span>ostream<span class='anglebracket'>&lt;</span><span class='keyword'>wchar_<span class='shy'></span>t</span>, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span></span> is now ill-formed<a class='hidden_link' href='#input.output-3.sentence-3'>.</a></div> <div id='input.output-3.sentence-4' class='sentence'>For example:
<span class='codeblock'>std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>u"text"</span>;           <span class='comment'>// previously formatted the string as a pointer value;</span>
                                <span class='comment'>// now ill-formed</span>
std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>u'X'</span>;              <span class='comment'>// previously formatted the character as an integer value;</span>
                                <span class='comment'>// now ill-formed</span>
</span></div></div></div><div class='para' id='input.output-4'><div class='marginalizedparent'><a class='marginalized' href='#input.output-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1184'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='fs.class.path'>[fs.<span class='shy'></span>class.<span class='shy'></span>path]</a>
<br/> <div id='input.output-4.sentence-1' class='sentence'><b>Change:</b> Return type of filesystem path format observer member functions<a class='hidden_link' href='#input.output-4.sentence-1'>.</a></div> <br/> <div id='input.output-4.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#input.output-4.sentence-2'>.</a></div> <br/> <div id='input.output-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that depends on the <span class='texttt'>u8string<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> and
<span class='texttt'>generic_<span class='shy'></span>u8string<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> member functions of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>filesystem<span class='operator'>&#x200b;::&#x200b;</span>path</span>
returning <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>string</span> is not valid in this revision of C++<a class='hidden_link' href='#input.output-4.sentence-3'>.</a></div> <div id='input.output-4.sentence-4' class='sentence'>For example:
<span class='codeblock'>std<span class='operator'>::</span>filesystem<span class='operator'>::</span>path p;
std<span class='operator'>::</span>string s1 <span class='operator'>=</span> p<span class='operator'>.</span>u8string<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// ill-formed; previously well-formed</span>
std<span class='operator'>::</span>string s2 <span class='operator'>=</span> p<span class='operator'>.</span>generic_u8string<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='comment'>// ill-formed; previously well-formed</span>
</span></div></div></div></div><div id='depr' class='section'><h3 ><a class='secnum' href='#depr' style='min-width:80pt'>C.3.15</a> <a href='depr' title='Annex D&emsp;(normative)&emsp;Compatibility features'>[depr]</a>: compatibility features <a class='abbr_ref' href='diff.cpp17.depr'>[diff.cpp17.depr]</a></h3><div class='para' id='depr-1'><div class='marginalizedparent'><a class='marginalized' href='#depr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1203'>#</a></div><div class='texpara'><div id='depr-1.sentence-1' class='sentence'><b>Change:</b> Remove <span class='texttt'>uncaught_<span class='shy'></span>exception</span><a class='hidden_link' href='#depr-1.sentence-1'>.</a></div> <br/> <div id='depr-1.sentence-2' class='sentence'><b>Rationale:</b> The function did not have a clear specification when multiple exceptions were
active, and has been superseded by <span class='texttt'>uncaught_<span class='shy'></span>exceptions</span><a class='hidden_link' href='#depr-1.sentence-2'>.</a></div> <br/> <div id='depr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that calls <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>uncaught_<span class='shy'></span>exception</span> may fail
to compile<a class='hidden_link' href='#depr-1.sentence-3'>.</a></div> <div id='depr-1.sentence-4' class='sentence'>It can be revised to use <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>uncaught_<span class='shy'></span>exceptions</span> instead,
for clear and portable semantics<a class='hidden_link' href='#depr-1.sentence-4'>.</a></div></div></div><div class='para' id='depr-2'><div class='marginalizedparent'><a class='marginalized' href='#depr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1214'>#</a></div><div class='texpara'><div id='depr-2.sentence-1' class='sentence'><b>Change:</b> Remove support for adaptable function API<a class='hidden_link' href='#depr-2.sentence-1'>.</a><br/></div> <div id='depr-2.sentence-2' class='sentence'><b>Rationale:</b> The deprecated support relied on a limited convention that could not be
extended to support the general case or new language features<a class='hidden_link' href='#depr-2.sentence-2'>.</a></div> <div id='depr-2.sentence-3' class='sentence'>It has been
superseded by direct language support with <span id=':decltype'><span class='texttt'><span class='keyword'>decltype</span></span></span>, and by the
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>bind</span> and <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>not_<span class='shy'></span>fn</span> function templates<a class='hidden_link' href='#depr-2.sentence-3'>.</a></div> <br/> <div id='depr-2.sentence-4' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that relies on the presence of <span class='texttt'>result_<span class='shy'></span>type</span>,
<span class='texttt'>argument_<span class='shy'></span>type</span>, <span class='texttt'>first_<span class='shy'></span>argument_<span class='shy'></span>type</span>, or
<span class='texttt'>second_<span class='shy'></span>argument_<span class='shy'></span>type</span> in a standard library class may fail to compile<a class='hidden_link' href='#depr-2.sentence-4'>.</a></div> <div id='depr-2.sentence-5' class='sentence'>A
valid C++ 2017 program that calls <span class='texttt'>not1</span> or <span class='texttt'>not2</span>, or uses the
class templates <span class='texttt'>unary_<span class='shy'></span>negate</span> or <span class='texttt'>binary_<span class='shy'></span>negate</span>, may fail to
compile<a class='hidden_link' href='#depr-2.sentence-5'>.</a></div></div></div><div class='para' id='depr-3'><div class='marginalizedparent'><a class='marginalized' href='#depr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1230'>#</a></div><div class='texpara'><div id='depr-3.sentence-1' class='sentence'><b>Change:</b> Remove redundant members from <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>allocator</span><a class='hidden_link' href='#depr-3.sentence-1'>.</a></div> <br/> <div id='depr-3.sentence-2' class='sentence'><b>Rationale:</b> <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>allocator</span> was overspecified, encouraging direct usage in user containers
rather than relying on <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>allocator_<span class='shy'></span>traits</span>, leading to poor containers<a class='hidden_link' href='#depr-3.sentence-2'>.</a></div> <br/> <div id='depr-3.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that directly makes use of the <span class='texttt'>pointer</span>,
<span class='texttt'>const_<span class='shy'></span>pointer</span>, <span class='texttt'>reference</span>, <span class='texttt'>const_<span class='shy'></span>reference</span>,
<span class='texttt'>rebind</span>, <span class='texttt'>address</span>, <span class='texttt'>construct</span>, <span class='texttt'>destroy</span>, or
<span class='texttt'>max_<span class='shy'></span>size</span> members of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>allocator</span>, or that directly calls
<span class='texttt'>allocate</span> with an additional hint argument, may fail to compile<a class='hidden_link' href='#depr-3.sentence-3'>.</a></div></div></div><div class='para' id='depr-4'><div class='marginalizedparent'><a class='marginalized' href='#depr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1243'>#</a></div><div class='texpara'><div id='depr-4.sentence-1' class='sentence'><b>Change:</b> Remove <span class='texttt'>raw_<span class='shy'></span>storage_<span class='shy'></span>iterator</span><a class='hidden_link' href='#depr-4.sentence-1'>.</a></div> <br/> <div id='depr-4.sentence-2' class='sentence'><b>Rationale:</b> The iterator encouraged use of potentially-throwing algorithms, but did
not return the number of elements successfully constructed,
as would be necessary to destroy them<a class='hidden_link' href='#depr-4.sentence-2'>.</a></div> <br/> <div id='depr-4.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that uses this iterator class may fail to compile<a class='hidden_link' href='#depr-4.sentence-3'>.</a></div></div></div><div class='para' id='depr-5'><div class='marginalizedparent'><a class='marginalized' href='#depr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1253'>#</a></div><div class='texpara'><div id='depr-5.sentence-1' class='sentence'><b>Change:</b> Remove temporary buffers API<a class='hidden_link' href='#depr-5.sentence-1'>.</a><br/></div> <div id='depr-5.sentence-2' class='sentence'><b>Rationale:</b> The temporary buffer facility was intended to provide an efficient optimization
for small memory requests, but there is little evidence this was achieved in
practice, while requiring the user to provide their own exception-safe wrappers
to guard use of the facility in many cases<a class='hidden_link' href='#depr-5.sentence-2'>.</a></div> <br/> <div id='depr-5.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that calls <span class='texttt'>get_<span class='shy'></span>temporary_<span class='shy'></span>buffer</span> or
<span class='texttt'>return_<span class='shy'></span>temporary_<span class='shy'></span>buffer</span> may fail to compile<a class='hidden_link' href='#depr-5.sentence-3'>.</a></div></div></div><div class='para' id='depr-6'><div class='marginalizedparent'><a class='marginalized' href='#depr-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1265'>#</a></div><div class='texpara'><div id='depr-6.sentence-1' class='sentence'><b>Change:</b> Remove <span class='texttt'>shared_<span class='shy'></span>ptr<span class='operator'>&#x200b;::&#x200b;</span>unique</span><a class='hidden_link' href='#depr-6.sentence-1'>.</a></div> <br/> <div id='depr-6.sentence-2' class='sentence'><b>Rationale:</b> The result of a call to this member function is not reliable in the presence of
multiple threads and weak pointers<a class='hidden_link' href='#depr-6.sentence-2'>.</a></div> <div id='depr-6.sentence-3' class='sentence'>The member function <span class='texttt'>use_<span class='shy'></span>count</span> is
similarly unreliable, but has a clearer contract in such cases, and remains
available for well-defined use in single-threaded cases<a class='hidden_link' href='#depr-6.sentence-3'>.</a></div> <br/> <div id='depr-6.sentence-4' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that calls <span class='texttt'>unique</span> on a <span class='texttt'>shared_<span class='shy'></span>ptr</span>
object may fail to compile<a class='hidden_link' href='#depr-6.sentence-4'>.</a></div></div></div><div class='para' id='depr-7'><div class='marginalizedparent'><a class='marginalized' href='#depr-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8238252bcec14f76e97133db32721beaec5c749b/source/compatibility.tex#L1276'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='depr.meta.types'>[depr.<span class='shy'></span>meta.<span class='shy'></span>types]</a>
<br/> <div id='depr-7.sentence-1' class='sentence'><b>Change:</b> Remove deprecated type traits<a class='hidden_link' href='#depr-7.sentence-1'>.</a></div> <br/> <div id='depr-7.sentence-2' class='sentence'><b>Rationale:</b> The traits had unreliable or awkward interfaces<a class='hidden_link' href='#depr-7.sentence-2'>.</a></div> <div id='depr-7.sentence-3' class='sentence'>The <span class='texttt'>is_<span class='shy'></span>literal_<span class='shy'></span>type</span>
trait provided no way to detect which subset of constructors and member
functions of a type were declared <span id=':constexpr'><span class='texttt'><span class='keyword'>constexpr</span></span></span><a class='hidden_link' href='#depr-7.sentence-3'>.</a></div> <div id='depr-7.sentence-4' class='sentence'>The <span class='texttt'>result_<span class='shy'></span>of</span>
trait had a surprising syntax that did not directly support function types<a class='hidden_link' href='#depr-7.sentence-4'>.</a></div> <div id='depr-7.sentence-5' class='sentence'>It has been superseded by the <span class='texttt'>invoke_<span class='shy'></span>result</span> trait<a class='hidden_link' href='#depr-7.sentence-5'>.</a></div> <br/> <div id='depr-7.sentence-6' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that relies on the <span class='texttt'>is_<span class='shy'></span>literal_<span class='shy'></span>type</span> or
<span class='texttt'>result_<span class='shy'></span>of</span> type traits, on the <span class='texttt'>is_<span class='shy'></span>literal_<span class='shy'></span>type_<span class='shy'></span>v</span> variable template,
or on the <span class='texttt'>result_<span class='shy'></span>of_<span class='shy'></span>t</span> alias template may fail to compile<a class='hidden_link' href='#depr-7.sentence-6'>.</a></div></div></div></div></div></body></html>