<!DOCTYPE html><html lang='en'><head><title>[class.gslice.overview]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>26</a> Numerics library <a class='abbr_ref' href='./#numerics'>[numerics]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>26.7</a> Numeric arrays <a class='abbr_ref' href='numarray#class.gslice.overview'>[numarray]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>26.7.6</a> The <span class='texttt'>gslice</span> class <a class='abbr_ref' href='class.gslice#overview'>[class.gslice]</a></h3><div id='class.gslice.overview'><h4 ><a class='secnum' style='min-width:118pt'>26.7.6.1</a> The <span class='texttt'>gslice</span> class overview <a class='abbr_ref'>[class.gslice.overview]</a></h4><p ><span class='indexparent'><a class='index' id='gslice'></a></span></p><pre class='codeblock'>
namespace std {
  class gslice {
  public:
    gslice();
    gslice(size_t s, const valarray&lt;size_t&gt;&amp; l, const valarray&lt;size_t&gt;&amp; d);

    size_t           start() const;
    valarray&lt;size_t&gt; size() const;
    valarray&lt;size_t&gt; stride() const;
  };
}
</pre><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >This class represents a generalized slice out of an array.
A
<span class='texttt'>gslice</span>
is defined by a starting offset (<span class='math'><span class='mathalpha'>s</span></span>),
a set of lengths (<span class='math'><span class='mathalpha'>l</span><sub ><span class='mathalpha'>j</span></sub></span>),
and a set of strides (<span class='math'><span class='mathalpha'>d</span><sub ><span class='mathalpha'>j</span></sub></span>).
The number of lengths shall equal the number of strides.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p >A
<span class='texttt'>gslice</span>
represents a mapping from a set of indices (<span class='math'><span class='mathalpha'>i</span><sub ><span class='mathalpha'>j</span></sub></span>),
equal in number to the number of strides, to a single index <span class='math'><span class='mathalpha'>k</span></span>.
It is useful for building multidimensional array classes using
the
<span class='texttt'>valarray</span>
template, which is one-dimensional.
The set of one-dimensional index values specified by a
<span class='texttt'>gslice</span>
are <img src='math/3834175389367651919.png' class='mathinlineimg' alt='$k = s + \sum_ji_jd_j$'/>
where the multidimensional indices <span class='math'><span class='mathalpha'>i</span><sub ><span class='mathalpha'>j</span></sub></span> range in value from
0 to <span class='math'><span class='mathalpha'>l</span><sub ><span class='mathalpha'>ij</span></sub> - 1</span>.</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><p >[&nbsp;<i>Example:</i><span class='space'></span>
The
<span class='texttt'>gslice</span>
specification
</p><pre class='codeblock'>
start  = 3
length = {2, 4, 3}
stride = {19, 4, 1}
</pre><p >yields the sequence of one-dimensional indices</p><p ><span class='math'><span class='mathalpha'>k</span> = 3 + (0,1) &times; 19 + (0,1,2,3) &times; 4 + (0,1,2) &times; 1</span></p><p >which are ordered as shown in the following table:</p><pre >
<span class='='></span><span class='='></span><span class='kill'></span>&#9;<span class='math'>(<span class='mathalpha'>i</span><sub >0</sub>,&emsp;&ensp; <span class='mathalpha'>i</span><sub >1</sub>,&emsp;&ensp; <span class='mathalpha'>i</span><sub >2</sub>,&emsp;&ensp; <span class='mathalpha'>k</span>)&emsp;&ensp; =</span>
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 0,&emsp;&ensp; 0,&emsp;&ensp;  3)</span>,    
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 0,&emsp;&ensp; 1,&emsp;&ensp;  4)</span>,    
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 0,&emsp;&ensp; 2,&emsp;&ensp;  5)</span>,    
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 1,&emsp;&ensp; 0,&emsp;&ensp;  7)</span>,    
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 1,&emsp;&ensp; 1,&emsp;&ensp;  8)</span>,    
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 1,&emsp;&ensp; 2,&emsp;&ensp;  9)</span>,    
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 2,&emsp;&ensp; 0,&emsp;&ensp; 11)</span>, 
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 2,&emsp;&ensp; 1,&emsp;&ensp; 12)</span>, 
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 2,&emsp;&ensp; 2,&emsp;&ensp; 13)</span>, 
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 3,&emsp;&ensp; 0,&emsp;&ensp; 15)</span>, 
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 3,&emsp;&ensp; 1,&emsp;&ensp; 16)</span>, 
&#9;&#9;<span class='math'>(0,&emsp;&ensp; 3,&emsp;&ensp; 2,&emsp;&ensp; 17)</span>, 
&#9;&#9;<span class='math'>(1,&emsp;&ensp; 0,&emsp;&ensp; 0,&emsp;&ensp; 22)</span>, 
&#9;&#9;<span class='math'>(1,&emsp;&ensp; 0,&emsp;&ensp; 1,&emsp;&ensp; 23)</span>, 
&#9;&#9;<span class='math'>&hellip;</span>      
&#9;&#9;<span class='math'>(1,&emsp;&ensp; 3,&emsp;&ensp; 2,&emsp;&ensp; 36)</span>
</pre><p >That is, the highest-ordered index turns fastest.
<i>&nbsp;—&nbsp;end example</i>&nbsp;]</p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><p >It is possible to have degenerate generalized slices in which an address
is repeated.</p></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><p >[&nbsp;<i>Example:</i><span class='space'></span>
If the stride parameters in the previous
example are changed to {1, 1, 1}, the first few elements of the
resulting sequence of indices will be</p><pre >
<span class='='></span><span class='kill'></span>&#9;<span class='math'>(0,&emsp;&ensp; 0,&emsp;&ensp; 0,&emsp;&ensp;  3)</span>,  
&#9;<span class='math'>(0,&emsp;&ensp; 0,&emsp;&ensp; 1,&emsp;&ensp;  4)</span>,  
&#9;<span class='math'>(0,&emsp;&ensp; 0,&emsp;&ensp; 2,&emsp;&ensp;  5)</span>,  
&#9;<span class='math'>(0,&emsp;&ensp; 1,&emsp;&ensp; 0,&emsp;&ensp;  4)</span>,  
&#9;<span class='math'>(0,&emsp;&ensp; 1,&emsp;&ensp; 1,&emsp;&ensp;  5)</span>,  
&#9;<span class='math'>(0,&emsp;&ensp; 1,&emsp;&ensp; 2,&emsp;&ensp;  6)</span>,  
&#9;<span class='math'>&hellip;</span>
</pre><p ><i>&nbsp;—&nbsp;end example</i>&nbsp;]</p></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><p >If a degenerate slice is used as the argument to the
non-<span class='texttt'>const</span>
version of
<span class='texttt'>operator[](const gslice&amp;)</span>,
the resulting behavior is undefined.
<span class='indexparent'><a class='index' id='undefined'></a></span>
</p></div></div></div></body></html>