<!DOCTYPE html><html lang='en'><head><title>[diff]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='annexnum' style='min-width:50pt'>Annex C&emsp;(informative)</a> Compatibility <a class='abbr_ref' href='./#diff'>[diff]</a></h1><div id='cpp23' class='section'><h2 ><a class='secnum' href='#cpp23' style='min-width:65pt'>C.1</a> C++ and ISO C++ 2023 <a class='abbr_ref' href='diff.cpp23'>[diff.cpp23]</a></h2><div id='cpp23.general' class='section'><h3 ><a class='secnum' href='#cpp23.general' style='min-width:80pt'>C.1.1</a> General <a class='abbr_ref' href='diff.cpp23.general'>[diff.cpp23.general]</a></h3><div class='para' id='cpp23.general-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp23.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L8'>#</a></div><div class='texpara'><div id='cpp23.general-1.sentence-1' class='sentence'><a class='index' id=':summary,compatibility_with_ISO_C++_2023'></a>Subclause <a href='#cpp23' title='C.1&emsp;C++ and ISO C++ 2023'>[diff.<span class='shy'></span>cpp23]</a> lists the differences between C++ and
ISO C++ 2023 (ISO/IEC 14882:2023, <i >Programming Languages — C++</i>),
by the chapters of this document<a class='hidden_link' href='#cpp23.general-1.sentence-1'>.</a></div></div></div></div><div id='cpp23.expr' class='section'><h3 ><a class='secnum' href='#cpp23.expr' style='min-width:80pt'>C.1.2</a> <a href='expr' title='7&emsp;Expressions'>[expr]</a>: expressions <a class='abbr_ref' href='diff.cpp23.expr'>[diff.cpp23.expr]</a></h3><div class='para' id='cpp23.expr-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp23.expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L16'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.list'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>
<br/> <div id='cpp23.expr-1.sentence-1' class='sentence'><b>Change:</b> Pointer comparisons between <span class='texttt'>initializer_<span class='shy'></span>list</span> objects' backing arrays
are unspecified<a class='hidden_link' href='#cpp23.expr-1.sentence-1'>.</a></div> <br/> <div id='cpp23.expr-1.sentence-2' class='sentence'><b>Rationale:</b> Permit the implementation to store backing arrays in static read-only memory<a class='hidden_link' href='#cpp23.expr-1.sentence-2'>.</a></div> <br/> <div id='cpp23.expr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2023 code
that relies on the result of pointer comparison between backing arrays
may change behavior<a class='hidden_link' href='#cpp23.expr-1.sentence-3'>.</a></div> <div id='cpp23.expr-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>bool</span> ne<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> a, std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> a<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> b<span class='operator'>.</span>begin<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='literal'>1</span>;
<span class='curlybracket'>}</span>
<span class='keyword'>bool</span> b <span class='operator'>=</span> ne<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span>, <span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;    <span class='comment'>// unspecified result; previously <span class='tcode_in_codeblock'>false</span></span>
</span></div></div></div></div><div id='cpp23.strings' class='section'><h3 ><a class='secnum' href='#cpp23.strings' style='min-width:80pt'>C.1.3</a> <a href='strings' title='23&emsp;Strings library'>[strings]</a>: strings library <a class='abbr_ref' href='diff.cpp23.strings'>[diff.cpp23.strings]</a></h3><div class='para' id='cpp23.strings-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp23.strings-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L36'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='string.conversions'>[string.<span class='shy'></span>conversions]</a>
<br/> <div id='cpp23.strings-1.sentence-1' class='sentence'><b>Change:</b> Output of floating-point overloads of <span class='texttt'>to_<span class='shy'></span>string</span> and <span class='texttt'>to_<span class='shy'></span>wstring</span><a class='hidden_link' href='#cpp23.strings-1.sentence-1'>.</a></div> <br/> <div id='cpp23.strings-1.sentence-2' class='sentence'><b>Rationale:</b> Prevent loss of information and improve consistency with other formatting
facilities<a class='hidden_link' href='#cpp23.strings-1.sentence-2'>.</a></div> <br/> <div id='cpp23.strings-1.sentence-3' class='sentence'><b>Effect on original feature:</b> <span class='texttt'>to_<span class='shy'></span>string</span> and <span class='texttt'>to_<span class='shy'></span>wstring</span> function calls that take
floating-point arguments may produce a different output<a class='hidden_link' href='#cpp23.strings-1.sentence-3'>.</a></div> <div id='cpp23.strings-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>auto</span> s <span class='operator'>=</span> std<span class='operator'>::</span>to_string<span class='parenthesis'>(</span><span class='literal'>1e-7</span><span class='parenthesis'>)</span>;  <span class='comment'>// <span class='tcode_in_codeblock'>"1e-07"</span></span>
                                <span class='comment'>// previously <span class='tcode_in_codeblock'>"0.000000"</span> with <span class='tcode_in_codeblock'>'.'</span> possibly</span>
                                <span class='comment'>// changed according to the global C locale</span>
</span></div></div></div></div></div><div id='cpp20' class='section'><h2 ><a class='secnum' href='#cpp20' style='min-width:65pt'>C.2</a> C++ and ISO C++ 2020 <a class='abbr_ref' href='diff.cpp20'>[diff.cpp20]</a></h2><div id='cpp20.general' class='section'><h3 ><a class='secnum' href='#cpp20.general' style='min-width:80pt'>C.2.1</a> General <a class='abbr_ref' href='diff.cpp20.general'>[diff.cpp20.general]</a></h3><div class='para' id='cpp20.general-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L56'>#</a></div><div class='texpara'><div id='cpp20.general-1.sentence-1' class='sentence'><a class='index' id=':summary,compatibility_with_ISO_C++_2020'></a>Subclause <a href='#cpp20' title='C.2&emsp;C++ and ISO C++ 2020'>[diff.<span class='shy'></span>cpp20]</a> lists the differences between C++ and
ISO C++ 2020 (ISO/IEC 14882:2020, <i >Programming Languages — C++</i>),
by the chapters of this document<a class='hidden_link' href='#cpp20.general-1.sentence-1'>.</a></div></div></div></div><div id='cpp20.lex' class='section'><h3 ><a class='secnum' href='#cpp20.lex' style='min-width:80pt'>C.2.2</a> <a href='lex' title='5&emsp;Lexical conventions'>[lex]</a>: lexical conventions <a class='abbr_ref' href='diff.cpp20.lex'>[diff.cpp20.lex]</a></h3><div class='para' id='cpp20.lex-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.lex-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L64'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.name'>[lex.<span class='shy'></span>name]</a>
<br/> <div id='cpp20.lex-1.sentence-1' class='sentence'><b>Change:</b> Previously valid identifiers containing characters
not present in UAX #44 properties XID_Start or XID_Continue, or
not in Normalization Form C, are now rejected<a class='hidden_link' href='#cpp20.lex-1.sentence-1'>.</a></div> <br/> <div id='cpp20.lex-1.sentence-2' class='sentence'><b>Rationale:</b> Prevent confusing characters in identifiers<a class='hidden_link' href='#cpp20.lex-1.sentence-2'>.</a></div> <div id='cpp20.lex-1.sentence-3' class='sentence'>Requiring normalization of names ensures consistent linker behavior<a class='hidden_link' href='#cpp20.lex-1.sentence-3'>.</a></div> <br/> <div id='cpp20.lex-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Some identifiers are no longer well-formed<a class='hidden_link' href='#cpp20.lex-1.sentence-4'>.</a></div></div></div><div class='para' id='cpp20.lex-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.lex-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L75'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.string'>[lex.<span class='shy'></span>string]</a>
<br/> <div id='cpp20.lex-2.sentence-1' class='sentence'><b>Change:</b> Concatenated <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal'><span class='textsf'><i >string-literal</i></span></span></a><i >s</i> can no longer have
conflicting <a href='lex.ccon#nt:encoding-prefix' title='5.13.3&emsp;Character literals&emsp;[lex.ccon]'><span id='ntref:encoding-prefix'><span class='textsf'><i >encoding-prefix</i></span></span></a>es<a class='hidden_link' href='#cpp20.lex-2.sentence-1'>.</a></div> <br/> <div id='cpp20.lex-2.sentence-2' class='sentence'><b>Rationale:</b> Removal of unimplemented conditionally-supported feature<a class='hidden_link' href='#cpp20.lex-2.sentence-2'>.</a></div> <br/> <div id='cpp20.lex-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Concatenation of <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal_'><span class='textsf'><i >string-literal</i></span></span></a><i >s</i>
with different <a href='lex.ccon#nt:encoding-prefix' title='5.13.3&emsp;Character literals&emsp;[lex.ccon]'><span id='ntref:encoding-prefix_'><span class='textsf'><i >encoding-prefix</i></span></span></a>es
is now ill-formed<a class='hidden_link' href='#cpp20.lex-2.sentence-3'>.</a></div> <div id='cpp20.lex-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>auto</span> c <span class='operator'>=</span> <span class='literal'>L"a"</span> <span class='literal'>U"b"</span>;             <span class='comment'>// was conditionally-supported; now ill-formed</span>
</span></div></div></div></div><div id='cpp20.expr' class='section'><h3 ><a class='secnum' href='#cpp20.expr' style='min-width:80pt'>C.2.3</a> <a href='expr' title='7&emsp;Expressions'>[expr]</a>: expressions <a class='abbr_ref' href='diff.cpp20.expr'>[diff.cpp20.expr]</a></h3><div class='para' id='cpp20.expr-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L92'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='expr.prim.id.unqual'>[expr.<span class='shy'></span>prim.<span class='shy'></span>id.<span class='shy'></span>unqual]</a>
<br/> <div id='cpp20.expr-1.sentence-1' class='sentence'><b>Change:</b> Change move-eligible <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression'><span class='textsf'><i >id-expression</i></span></span></a><i >s</i> from lvalues to xvalues<a class='hidden_link' href='#cpp20.expr-1.sentence-1'>.</a></div> <br/> <div id='cpp20.expr-1.sentence-2' class='sentence'><b>Rationale:</b> Simplify the rules for implicit move<a class='hidden_link' href='#cpp20.expr-1.sentence-2'>.</a></div> <br/> <div id='cpp20.expr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2020 code that relies on a returned <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_'><span class='textsf'><i >id-expression</i></span></span></a>'s
being an lvalue may change behavior or fail to compile<a class='hidden_link' href='#cpp20.expr-1.sentence-3'>.</a></div> <div id='cpp20.expr-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='parenthesis'>)</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>       <span class='comment'>// returns <span class='tcode_in_codeblock'>int&amp;&amp;</span>; previously returned <span class='tcode_in_codeblock'>int&amp;</span></span>
<span class='keyword'>int</span><span class='operator'>&amp;</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span>                   <span class='comment'>// ill-formed; previously well-formed</span>
</span></div></div></div><div class='para' id='cpp20.expr-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.expr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L106'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='expr.sub'>[expr.<span class='shy'></span>sub]</a>
<br/> <div id='cpp20.expr-2.sentence-1' class='sentence'><b>Change:</b> Change the meaning of comma in subscript expressions<a class='hidden_link' href='#cpp20.expr-2.sentence-1'>.</a></div> <br/> <div id='cpp20.expr-2.sentence-2' class='sentence'><b>Rationale:</b> Enable repurposing a deprecated syntax to support multidimensional indexing<a class='hidden_link' href='#cpp20.expr-2.sentence-2'>.</a></div> <br/> <div id='cpp20.expr-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2020 code that uses a comma expression within a
subscript expression may fail to compile<a class='hidden_link' href='#cpp20.expr-2.sentence-3'>.</a></div> <div id='cpp20.expr-2.sentence-4' class='sentence'>For example:
<span class='codeblock'>arr<span class='squarebracket'>[</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='squarebracket'>]</span>               <span class='comment'>// was equivalent to <span class='tcode_in_codeblock'>arr[(1, 2)]</span>,</span>
                        <span class='comment'>// now equivalent to <span class='tcode_in_codeblock'>arr.operator[](1, 2)</span> or ill-formed</span>
</span></div></div></div></div><div id='cpp20.stmt' class='section'><h3 ><a class='secnum' href='#cpp20.stmt' style='min-width:80pt'>C.2.4</a> <a href='stmt.stmt' title='8&emsp;Statements'>[stmt.<span class='shy'></span>stmt]</a>: statements <a class='abbr_ref' href='diff.cpp20.stmt'>[diff.cpp20.stmt]</a></h3><div class='para' id='cpp20.stmt-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.stmt-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L122'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='stmt.ranged'>[stmt.<span class='shy'></span>ranged]</a>
<br/> <div id='cpp20.stmt-1.sentence-1' class='sentence'><b>Change:</b> The lifetime of temporary objects in the <a href='stmt.iter.general#nt:for-range-initializer' title='8.6.1&emsp;General&emsp;[stmt.iter.general]'><span id='ntref:for-range-initializer'><span class='textsf'><i >for-range-initializer</i></span></span></a>
is extended until the end of the loop (<a href='class.temporary' title='6.7.7&emsp;Temporary objects'>[class.<span class='shy'></span>temporary]</a>)<a class='hidden_link' href='#cpp20.stmt-1.sentence-1'>.</a></div> <br/> <div id='cpp20.stmt-1.sentence-2' class='sentence'><b>Rationale:</b> Improve usability of the range-based <span id=':for'><span class='texttt'><span class='keyword'>for</span></span></span> statement<a class='hidden_link' href='#cpp20.stmt-1.sentence-2'>.</a></div> <br/> <div id='cpp20.stmt-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Destructors of some temporary objects are invoked later<a class='hidden_link' href='#cpp20.stmt-1.sentence-3'>.</a></div> <div id='cpp20.stmt-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  std<span class='operator'>::</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> v <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>42</span>, <span class='literal'>17</span>, <span class='literal'>13</span> <span class='curlybracket'>}</span>;
  std<span class='operator'>::</span>mutex m;

  <span class='keyword'>for</span> <span class='parenthesis'>(</span><span class='keyword'>int</span> x <span class='operator'>:</span>
       <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>lock_guard<span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>mutex<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>m<span class='parenthesis'>)</span><span class='parenthesis'>)</span>, v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>  <span class='comment'>// lock released in C++ 2020</span>
    std<span class='operator'>::</span>lock_guard<span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>mutex<span class='anglebracket'>&gt;</span> guard<span class='parenthesis'>(</span>m<span class='parenthesis'>)</span>;                       <span class='comment'>// OK in C++ 2020, now deadlocks</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</span></div></div></div></div><div id='cpp20.dcl' class='section'><h3 ><a class='secnum' href='#cpp20.dcl' style='min-width:80pt'>C.2.5</a> <a href='dcl.dcl' title='9&emsp;Declarations'>[dcl.<span class='shy'></span>dcl]</a>: declarations <a class='abbr_ref' href='diff.cpp20.dcl'>[diff.cpp20.dcl]</a></h3><div class='para' id='cpp20.dcl-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.dcl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L145'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.string'>[dcl.<span class='shy'></span>init.<span class='shy'></span>string]</a>
<br/> <div id='cpp20.dcl-1.sentence-1' class='sentence'><b>Change:</b> UTF-8 string literals may initialize arrays of <span id=':char'><span class='texttt'><span class='keyword'>char</span></span></span> or
<span class='texttt'><span id=':unsigned'><span class='texttt'><span class='keyword'>unsigned</span></span></span> <span id=':char_'><span class='texttt'><span class='keyword'>char</span></span></span></span><a class='hidden_link' href='#cpp20.dcl-1.sentence-1'>.</a></div> <br/> <div id='cpp20.dcl-1.sentence-2' class='sentence'><b>Rationale:</b> Compatibility with previously written code that conformed to previous versions of this document<a class='hidden_link' href='#cpp20.dcl-1.sentence-2'>.</a></div> <br/> <div id='cpp20.dcl-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Arrays of <span id=':char__'><span class='texttt'><span class='keyword'>char</span></span></span> or <span class='texttt'><span id=':unsigned_'><span class='texttt'><span class='keyword'>unsigned</span></span></span> <span id=':char___'><span class='texttt'><span class='keyword'>char</span></span></span></span>
may now be initialized with a UTF-8 string literal<a class='hidden_link' href='#cpp20.dcl-1.sentence-3'>.</a></div> <div id='cpp20.dcl-1.sentence-4' class='sentence'>This can affect initialization that includes arrays
that are directly initialized within class types, typically aggregates<a class='hidden_link' href='#cpp20.dcl-1.sentence-4'>.</a></div> <div id='cpp20.dcl-1.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>char8_t</span> s<span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>char</span> s<span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='parenthesis'>)</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>u8""</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;            <span class='comment'>// ambiguous</span>
<span class='curlybracket'>}</span>
</span></div></div></div></div><div id='cpp20.temp' class='section'><h3 ><a class='secnum' href='#cpp20.temp' style='min-width:80pt'>C.2.6</a> <a href='temp' title='13&emsp;Templates'>[temp]</a>: templates <a class='abbr_ref' href='diff.cpp20.temp'>[diff.cpp20.temp]</a></h3><div class='para' id='cpp20.temp-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.temp-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L175'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='temp.deduct.type'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>type]</a>
<br/> <div id='cpp20.temp-1.sentence-1' class='sentence'><b>Change:</b> Deducing template arguments from exception specifications<a class='hidden_link' href='#cpp20.temp-1.sentence-1'>.</a></div> <br/> <div id='cpp20.temp-1.sentence-2' class='sentence'><b>Rationale:</b> Facilitate generic handling of throwing and non-throwing functions<a class='hidden_link' href='#cpp20.temp-1.sentence-2'>.</a></div> <br/> <div id='cpp20.temp-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid ISO C++ 2020 code may be ill-formed in this revision of C++<a class='hidden_link' href='#cpp20.temp-1.sentence-3'>.</a></div> <div id='cpp20.temp-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span> B<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span><span class='parenthesis'>(</span>B<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span><span class='literal'>false</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>g<span class='parenthesis'>)</span>;                         <span class='comment'>// ill-formed; previously well-formed</span>
<span class='curlybracket'>}</span>
</span></div></div></div></div><div id='cpp20.library' class='section'><h3 ><a class='secnum' href='#cpp20.library' style='min-width:80pt'>C.2.7</a> <a href='library' title='16&emsp;Library introduction'>[library]</a>: library introduction <a class='abbr_ref' href='diff.cpp20.library'>[diff.cpp20.library]</a></h3><div class='para' id='cpp20.library-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.library-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L194'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='headers'>[headers]</a>
<br/> <div id='cpp20.library-1.sentence-1' class='sentence'><b>Change:</b> New headers<a class='hidden_link' href='#cpp20.library-1.sentence-1'>.</a></div> <br/> <div id='cpp20.library-1.sentence-2' class='sentence'><b>Rationale:</b> New functionality<a class='hidden_link' href='#cpp20.library-1.sentence-2'>.</a></div> <br/> <div id='cpp20.library-1.sentence-3' class='sentence'><b>Effect on original feature:</b> The following C++ headers are new:
<a href='expected.syn#header:%3cexpected%3e' title='22.8.2&emsp;Header &lt;expected&gt; synopsis&emsp;[expected.syn]'><span id='headerref:<expected>'><span class='texttt'>&lt;expected&gt;</span></span></a>,
<a href='flat.map.syn#header:%3cflat_map%3e' title='24.6.4&emsp;Header &lt;flat_&shy;map&gt; synopsis&emsp;[flat.map.syn]'><span id='headerref:<flat_map>'><span class='texttt'>&lt;flat_<span class='shy'></span>map&gt;</span></span></a>,
<a href='flat.set.syn#header:%3cflat_set%3e' title='24.6.5&emsp;Header &lt;flat_&shy;set&gt; synopsis&emsp;[flat.set.syn]'><span id='headerref:<flat_set>'><span class='texttt'>&lt;flat_<span class='shy'></span>set&gt;</span></span></a>,
<a href='generator.syn#header:%3cgenerator%3e' title='26.8.2&emsp;Header &lt;generator&gt; synopsis&emsp;[generator.syn]'><span id='headerref:<generator>'><span class='texttt'>&lt;generator&gt;</span></span></a>,
<a href='print.syn#header:%3cprint%3e' title='31.7.4&emsp;Header &lt;print&gt; synopsis&emsp;[print.syn]'><span id='headerref:<print>'><span class='texttt'>&lt;print&gt;</span></span></a>,
<a href='span.streams.overview#header:%3cspanstream%3e' title='31.9.1&emsp;Overview&emsp;[span.streams.overview]'><span id='headerref:<spanstream>'><span class='texttt'>&lt;spanstream&gt;</span></span></a>,
<a href='stacktrace.syn#header:%3cstacktrace%3e' title='19.6.2&emsp;Header &lt;stacktrace&gt; synopsis&emsp;[stacktrace.syn]'><span id='headerref:<stacktrace>'><span class='texttt'>&lt;stacktrace&gt;</span></span></a>, and
<a href='stdatomic.h.syn#header:%3cstdatomic.h%3e' title='33.5.12&emsp;C compatibility&emsp;[stdatomic.h.syn]'><span id='headerref:<stdatomic.h>'><span class='texttt'>&lt;stdatomic.h&gt;</span></span></a><a class='hidden_link' href='#cpp20.library-1.sentence-3'>.</a></div> <div id='cpp20.library-1.sentence-4' class='sentence'>Valid C++ 2020 code that <span class='texttt'><span class='preprocessordirective'>#include</span></span>s headers with these names may be
invalid in this revision of C++<a class='hidden_link' href='#cpp20.library-1.sentence-4'>.</a></div></div></div></div><div id='cpp20.concepts' class='section'><h3 ><a class='secnum' href='#cpp20.concepts' style='min-width:80pt'>C.2.8</a> <a href='concepts' title='18&emsp;Concepts library'>[concepts]</a>: concepts library <a class='abbr_ref' href='diff.cpp20.concepts'>[diff.cpp20.concepts]</a></h3><div class='para' id='cpp20.concepts-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.concepts-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L214'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='cmp.concept'>[cmp.<span class='shy'></span>concept]</a>, <a href='concept.equalitycomparable'>[concept.<span class='shy'></span>equalitycomparable]</a>, and <a href='concept.totallyordered'>[concept.<span class='shy'></span>totallyordered]</a>
<br/> <div id='cpp20.concepts-1.sentence-1' class='sentence'><b>Change:</b> Replace <span class='texttt'>common_<span class='shy'></span>reference_<span class='shy'></span>with</span> in <span class='texttt'>three_<span class='shy'></span>way_<span class='shy'></span>comparable_<span class='shy'></span>with</span>,
<span class='texttt'>equality_<span class='shy'></span>comparable_<span class='shy'></span>with</span>, and <span class='texttt'>totally_<span class='shy'></span>ordered_<span class='shy'></span>with</span>
with an exposition-only concept<a class='hidden_link' href='#cpp20.concepts-1.sentence-1'>.</a></div> <br/> <div id='cpp20.concepts-1.sentence-2' class='sentence'><b>Rationale:</b> Allow uncopyable, but movable, types to model these concepts<a class='hidden_link' href='#cpp20.concepts-1.sentence-2'>.</a></div> <br/> <div id='cpp20.concepts-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2020 code relying on subsumption
with <span class='texttt'>common_<span class='shy'></span>reference_<span class='shy'></span>with</span>
may fail to compile in this revision of C++<a class='hidden_link' href='#cpp20.concepts-1.sentence-3'>.</a></div> <div id='cpp20.concepts-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> <a href='concept.equalitycomparable#concept:equality_comparable_with' title='18.5.4&emsp;Concept equality_&shy;comparable&emsp;[concept.equalitycomparable]'><span id='conceptref:equality_comparable_with'><span class='tcode_in_codeblock'>equality_<span class='shy'></span>comparable_<span class='shy'></span>with</span></span></a><span class='anglebracket'>&lt;</span>T, U<span class='anglebracket'>&gt;</span>
<span class='keyword'>bool</span> attempted_equals<span class='parenthesis'>(</span><span class='keyword'>const</span> T<span class='operator'>&amp;</span>, <span class='keyword'>const</span> U<span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;    <span class='comment'>// previously selected overload</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> <a href='concept.commonref#concept:common_reference_with' title='18.4.5&emsp;Concept common_&shy;reference_&shy;with&emsp;[concept.commonref]'><span id='conceptref:common_reference_with'><span class='tcode_in_codeblock'>common_<span class='shy'></span>reference_<span class='shy'></span>with</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> remove_reference_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> remove_reference_t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span>
<span class='keyword'>bool</span> attempted_equals<span class='parenthesis'>(</span><span class='keyword'>const</span> T<span class='operator'>&amp;</span> t, <span class='keyword'>const</span> U<span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;  <span class='comment'>// ambiguous overload; previously</span>
                                                <span class='comment'>// rejected by partial ordering</span>
<span class='keyword'>bool</span> test<span class='parenthesis'>(</span>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> attempted_equals<span class='parenthesis'>(</span>p, <span class='literal'>nullptr</span><span class='parenthesis'>)</span>;          <span class='comment'>// ill-formed; previously well-formed</span>
<span class='curlybracket'>}</span>
</span></div></div></div></div><div id='cpp20.memory' class='section'><h3 ><a class='secnum' href='#cpp20.memory' style='min-width:80pt'>C.2.9</a> <a href='mem' title='20&emsp;Memory management library'>[mem]</a>: memory management library <a class='abbr_ref' href='diff.cpp20.memory'>[diff.cpp20.memory]</a></h3><div class='para' id='cpp20.memory-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.memory-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L242'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='allocator.traits.general'>[allocator.<span class='shy'></span>traits.<span class='shy'></span>general]</a>
<br/> <div id='cpp20.memory-1.sentence-1' class='sentence'><b>Change:</b> Forbid partial and explicit program-defined specializations
of <span class='texttt'>allocator_<span class='shy'></span>traits</span><a class='hidden_link' href='#cpp20.memory-1.sentence-1'>.</a></div> <br/> <div id='cpp20.memory-1.sentence-2' class='sentence'><b>Rationale:</b> Allow addition of <span class='texttt'>allocate_<span class='shy'></span>at_<span class='shy'></span>least</span> to <span class='texttt'>allocator_<span class='shy'></span>traits</span>,
and potentially other members in the future<a class='hidden_link' href='#cpp20.memory-1.sentence-2'>.</a></div> <br/> <div id='cpp20.memory-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2020 code
that partially or explicitly specializes <span class='texttt'>allocator_<span class='shy'></span>traits</span>
is ill-formed with no diagnostic required in this revision of C++<a class='hidden_link' href='#cpp20.memory-1.sentence-3'>.</a></div></div></div></div><div id='cpp20.utilities' class='section'><h3 ><a class='secnum' href='#cpp20.utilities' style='min-width:80pt'>C.2.10</a> <a href='utilities' title='22&emsp;General utilities library'>[utilities]</a>: general utilities library <a class='abbr_ref' href='diff.cpp20.utilities'>[diff.cpp20.utilities]</a></h3><div class='para' id='cpp20.utilities-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.utilities-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L256'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='format'>[format]</a>
<br/> <div id='cpp20.utilities-1.sentence-1' class='sentence'><b>Change:</b> Signature changes: <span class='texttt'>format</span>, <span class='texttt'>format_<span class='shy'></span>to</span>, <span class='texttt'>vformat_<span class='shy'></span>to</span>,
<span class='texttt'>format_<span class='shy'></span>to_<span class='shy'></span>n</span>, <span class='texttt'>formatted_<span class='shy'></span>size</span><a class='hidden_link' href='#cpp20.utilities-1.sentence-1'>.</a></div> <div id='cpp20.utilities-1.sentence-2' class='sentence'>Removal of <span class='texttt'>format_<span class='shy'></span>args_<span class='shy'></span>t</span><a class='hidden_link' href='#cpp20.utilities-1.sentence-2'>.</a></div> <br/> <div id='cpp20.utilities-1.sentence-3' class='sentence'><b>Rationale:</b> Improve safety via compile-time format string checks,
avoid unnecessary template instantiations<a class='hidden_link' href='#cpp20.utilities-1.sentence-3'>.</a></div> <br/> <div id='cpp20.utilities-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Valid C++ 2020 code that
contained errors in format strings or
relied on previous format string signatures or
<span class='texttt'>format_<span class='shy'></span>args_<span class='shy'></span>t</span> may become ill-formed<a class='hidden_link' href='#cpp20.utilities-1.sentence-4'>.</a></div> <div id='cpp20.utilities-1.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>auto</span> s <span class='operator'>=</span> std<span class='operator'>::</span>format<span class='parenthesis'>(</span><span class='literal'>"{:d}"</span>, <span class='literal'>"I am not a number"</span><span class='parenthesis'>)</span>;      <span class='comment'>// ill-formed,</span>
                                                        <span class='comment'>// previously threw <span class='tcode_in_codeblock'>format_<span class='shy'></span>error</span></span>
</span></div></div></div><div class='para' id='cpp20.utilities-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.utilities-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L275'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='format'>[format]</a>
<br/> <div id='cpp20.utilities-2.sentence-1' class='sentence'><b>Change:</b> Signature changes: <span class='texttt'>format</span>, <span class='texttt'>format_<span class='shy'></span>to</span>, <span class='texttt'>format_<span class='shy'></span>to_<span class='shy'></span>n</span>,
<span class='texttt'>formatted_<span class='shy'></span>size</span><a class='hidden_link' href='#cpp20.utilities-2.sentence-1'>.</a></div> <br/> <div id='cpp20.utilities-2.sentence-2' class='sentence'><b>Rationale:</b> Enable formatting of views
that do not support iteration when const-qualified and
that are not copyable<a class='hidden_link' href='#cpp20.utilities-2.sentence-2'>.</a></div> <br/> <div id='cpp20.utilities-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2020 code that passes bit fields to formatting functions
may become ill-formed<a class='hidden_link' href='#cpp20.utilities-2.sentence-3'>.</a></div> <div id='cpp20.utilities-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> tiny <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> bit<span class='operator'>:</span> <span class='literal'>1</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>auto</span> t <span class='operator'>=</span> tiny<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
std<span class='operator'>::</span>format<span class='parenthesis'>(</span><span class='literal'>"{}"</span>, t<span class='operator'>.</span>bit<span class='parenthesis'>)</span>;       <span class='comment'>// ill-formed, previously returned <span class='tcode_in_codeblock'>"0"</span></span>
</span></div></div></div><div class='para' id='cpp20.utilities-3'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.utilities-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L296'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='format.string.std'>[format.<span class='shy'></span>string.<span class='shy'></span>std]</a>
<br/> <div id='cpp20.utilities-3.sentence-1' class='sentence'><b>Change:</b> Restrict types of formatting arguments
used as <span class='textsf'><i >width</i></span> or <span class='textsf'><i >precision</i></span> in
a <span class='textsf'><i >std-format-spec</i></span><a class='hidden_link' href='#cpp20.utilities-3.sentence-1'>.</a></div> <br/> <div id='cpp20.utilities-3.sentence-2' class='sentence'><b>Rationale:</b> Disallow types that do not have useful or portable semantics as
a formatting width or precision<a class='hidden_link' href='#cpp20.utilities-3.sentence-2'>.</a></div> <br/> <div id='cpp20.utilities-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2020 code that passes a boolean or character type as
<span class='textsf'><i >arg-id</i></span> becomes invalid<a class='hidden_link' href='#cpp20.utilities-3.sentence-3'>.</a></div> <div id='cpp20.utilities-3.sentence-4' class='sentence'>For example:
<span class='codeblock'>std<span class='operator'>::</span>format<span class='parenthesis'>(</span><span class='literal'>"{:*^{}}"</span>, <span class='literal'>""</span>, <span class='literal'>true</span><span class='parenthesis'>)</span>;   <span class='comment'>// ill-formed, previously returned <span class='tcode_in_codeblock'>"*"</span></span>
std<span class='operator'>::</span>format<span class='parenthesis'>(</span><span class='literal'>"{:*^{}}"</span>, <span class='literal'>""</span>, <span class='literal'>'1'</span><span class='parenthesis'>)</span>;    <span class='comment'>// ill-formed, previously returned an</span>
                                    <span class='comment'>// implementation-defined number of <span class='tcode_in_codeblock'>'*'</span> characters</span>
</span></div></div></div><div class='para' id='cpp20.utilities-4'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.utilities-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L314'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='format.formatter.spec'>[format.<span class='shy'></span>formatter.<span class='shy'></span>spec]</a>
<br/> <div id='cpp20.utilities-4.sentence-1' class='sentence'><b>Change:</b> Removed the <span class='texttt'>formatter</span> specialization:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span>size_t N<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> charT<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span>, charT<span class='anglebracket'>&gt;</span>;
</span>
<br/></div> <div id='cpp20.utilities-4.sentence-2' class='sentence'><b>Rationale:</b> The specialization is inconsistent with the design of <span class='texttt'>formatter</span>,
which is intended to be instantiated only with cv-unqualified object types<a class='hidden_link' href='#cpp20.utilities-4.sentence-2'>.</a></div> <br/> <div id='cpp20.utilities-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2020 code that instantiated the removed specialization
can become ill-formed<a class='hidden_link' href='#cpp20.utilities-4.sentence-3'>.</a></div></div></div></div><div id='cpp20.strings' class='section'><h3 ><a class='secnum' href='#cpp20.strings' style='min-width:80pt'>C.2.11</a> <a href='strings' title='23&emsp;Strings library'>[strings]</a>: strings library <a class='abbr_ref' href='diff.cpp20.strings'>[diff.cpp20.strings]</a></h3><div class='para' id='cpp20.strings-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.strings-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L329'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='string.classes'>[string.<span class='shy'></span>classes]</a>
<br/> <div id='cpp20.strings-1.sentence-1' class='sentence'><b>Change:</b> Additional rvalue overload for the <span class='texttt'>substr</span> member function and
the corresponding constructor<a class='hidden_link' href='#cpp20.strings-1.sentence-1'>.</a></div> <br/> <div id='cpp20.strings-1.sentence-2' class='sentence'><b>Rationale:</b> Improve efficiency of operations on rvalues<a class='hidden_link' href='#cpp20.strings-1.sentence-2'>.</a></div> <br/> <div id='cpp20.strings-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2020 code that created a substring
by calling <span class='texttt'>substr</span> (or the corresponding constructor)
on an xvalue expression with type <span class='texttt'>S</span>
that is a specialization of <span class='texttt'>basic_<span class='shy'></span>string</span>
may change meaning in this revision of C++<a class='hidden_link' href='#cpp20.strings-1.sentence-3'>.</a></div> <div id='cpp20.strings-1.sentence-4' class='sentence'>For example:
<span class='codeblock'>std<span class='operator'>::</span>string s1 <span class='operator'>=</span> <span class='literal'>"some long string that forces allocation"</span>, s2 <span class='operator'>=</span> s1;
std<span class='operator'>::</span>move<span class='parenthesis'>(</span>s1<span class='parenthesis'>)</span><span class='operator'>.</span>substr<span class='parenthesis'>(</span><span class='literal'>10</span>, <span class='literal'>5</span><span class='parenthesis'>)</span>;
assert<span class='parenthesis'>(</span>s1 <span class='operator'>=</span><span class='operator'>=</span> s2<span class='parenthesis'>)</span>;       <span class='comment'>// unspecified, previously guaranteed to be <span class='tcode_in_codeblock'>true</span></span>
std<span class='operator'>::</span>string s3<span class='parenthesis'>(</span>std<span class='operator'>::</span>move<span class='parenthesis'>(</span>s2<span class='parenthesis'>)</span>, <span class='literal'>10</span>, <span class='literal'>5</span><span class='parenthesis'>)</span>;
assert<span class='parenthesis'>(</span>s1 <span class='operator'>=</span><span class='operator'>=</span> s2<span class='parenthesis'>)</span>;       <span class='comment'>// unspecified, previously guaranteed to be <span class='tcode_in_codeblock'>true</span></span>
</span></div></div></div></div><div id='cpp20.containers' class='section'><h3 ><a class='secnum' href='#cpp20.containers' style='min-width:80pt'>C.2.12</a> <a href='containers' title='24&emsp;Containers library'>[containers]</a>: containers library <a class='abbr_ref' href='diff.cpp20.containers'>[diff.cpp20.containers]</a></h3><div class='para' id='cpp20.containers-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.containers-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L352'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='associative.reqmts'>[associative.<span class='shy'></span>reqmts]</a> and <a href='unord.req'>[unord.<span class='shy'></span>req]</a>
<br/> <div id='cpp20.containers-1.sentence-1' class='sentence'><b>Change:</b> Heterogeneous <span class='texttt'>extract</span> and <span class='texttt'>erase</span> overloads
for associative containers<a class='hidden_link' href='#cpp20.containers-1.sentence-1'>.</a></div> <br/> <div id='cpp20.containers-1.sentence-2' class='sentence'><b>Rationale:</b> Improve efficiency of erasing elements from associative containers<a class='hidden_link' href='#cpp20.containers-1.sentence-2'>.</a></div> <br/> <div id='cpp20.containers-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2020 code may fail to compile in this revision of C++<a class='hidden_link' href='#cpp20.containers-1.sentence-3'>.</a></div> <div id='cpp20.containers-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>auto</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>const</span> B<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> D <span class='operator'>:</span> <span class='keyword'>private</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>std<span class='operator'>::</span>set<span class='anglebracket'>&lt;</span>B, std<span class='operator'>::</span>less<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> s<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    s<span class='operator'>.</span>erase<span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span>;             <span class='comment'>// ill formed; previously well-formed</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span></div></div></div></div><div id='cpp20.thread' class='section'><h3 ><a class='secnum' href='#cpp20.thread' style='min-width:80pt'>C.2.13</a> <a href='thread' title='33&emsp;Concurrency support library'>[thread]</a>: concurrency support library <a class='abbr_ref' href='diff.cpp20.thread'>[diff.cpp20.thread]</a></h3><div class='para' id='cpp20.thread-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp20.thread-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L375'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='thread.barrier'>[thread.<span class='shy'></span>barrier]</a>
<br/> <div id='cpp20.thread-1.sentence-1' class='sentence'><b>Change:</b> In this revision of C++,
it is implementation-defined whether a barrier's phase completion step runs
if no thread calls <span class='texttt'>wait</span><a class='hidden_link' href='#cpp20.thread-1.sentence-1'>.</a></div> <div id='cpp20.thread-1.sentence-2' class='sentence'>Previously the phase completion step was guaranteed to run on the last thread that calls <span class='texttt'>arrive</span> or <span class='texttt'>arrive_<span class='shy'></span>and_<span class='shy'></span>drop</span> during the phase<a class='hidden_link' href='#cpp20.thread-1.sentence-2'>.</a></div> <div id='cpp20.thread-1.sentence-3' class='sentence'>In this revision of C++,
it can run on any of the threads that arrived or waited at the barrier
during the phase<a class='hidden_link' href='#cpp20.thread-1.sentence-3'>.</a></div> <br/> <div id='cpp20.thread-1.sentence-4' class='sentence'><b>Rationale:</b> Correct contradictory wording and
improve implementation flexibility for performance<a class='hidden_link' href='#cpp20.thread-1.sentence-4'>.</a></div> <br/> <div id='cpp20.thread-1.sentence-5' class='sentence'><b>Effect on original feature:</b> Valid C++ 2020 code using a barrier might have
different semantics in this revision of C++
if it depends on a completion function's side effects occurring exactly once,
on a specific thread running the phase completion step, or
on a completion function's side effects occurring
without <span class='texttt'>wait</span> having been called<a class='hidden_link' href='#cpp20.thread-1.sentence-5'>.</a></div> <div id='cpp20.thread-1.sentence-6' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>auto</span> b0 <span class='operator'>=</span> std<span class='operator'>::</span>barrier<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;
b0<span class='operator'>.</span>arrive<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
b0<span class='operator'>.</span>arrive<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// implementation-defined; previously well-defined</span>

<span class='keyword'>int</span> data <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='keyword'>auto</span> b1 <span class='operator'>=</span> std<span class='operator'>::</span>barrier<span class='parenthesis'>(</span><span class='literal'>1</span>, <span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> data<span class='operator'>+</span><span class='operator'>+</span>; <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
b1<span class='operator'>.</span>arrive<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
assert<span class='parenthesis'>(</span>data <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span><span class='parenthesis'>)</span>;      <span class='comment'>// implementation-defined; previously well-defined</span>
b1<span class='operator'>.</span>arrive<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// implementation-defined; previously well-defined</span>
</span></div></div></div></div></div><div id='cpp17' class='section'><h2 ><a class='secnum' href='#cpp17' style='min-width:65pt'>C.3</a> C++ and ISO C++ 2017 <a class='abbr_ref' href='diff.cpp17'>[diff.cpp17]</a></h2><div id='cpp17.general' class='section'><h3 ><a class='secnum' href='#cpp17.general' style='min-width:80pt'>C.3.1</a> General <a class='abbr_ref' href='diff.cpp17.general'>[diff.cpp17.general]</a></h3><div class='para' id='cpp17.general-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L411'>#</a></div><div class='texpara'><div id='cpp17.general-1.sentence-1' class='sentence'><a class='index' id=':summary,compatibility_with_ISO_C++_2017'></a>Subclause <a href='#cpp17' title='C.3&emsp;C++ and ISO C++ 2017'>[diff.<span class='shy'></span>cpp17]</a> lists the differences between C++ and
ISO C++ 2017 (ISO/IEC 14882:2017, <i >Programming Languages — C++</i>),
by the chapters of this document<a class='hidden_link' href='#cpp17.general-1.sentence-1'>.</a></div></div></div></div><div id='cpp17.lex' class='section'><h3 ><a class='secnum' href='#cpp17.lex' style='min-width:80pt'>C.3.2</a> <a href='lex' title='5&emsp;Lexical conventions'>[lex]</a>: lexical conventions <a class='abbr_ref' href='diff.cpp17.lex'>[diff.cpp17.lex]</a></h3><div class='para' id='cpp17.lex-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.lex-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L419'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='lex.pptoken'>[lex.<span class='shy'></span>pptoken]</a>, <a href='module.unit'>[module.<span class='shy'></span>unit]</a>, <a href='module.import'>[module.<span class='shy'></span>import]</a>, <a href='cpp.pre'>[cpp.<span class='shy'></span>pre]</a>, <a href='cpp.module'>[cpp.<span class='shy'></span>module]</a>, and <a href='cpp.import'>[cpp.<span class='shy'></span>import]</a>
<br/> <div id='cpp17.lex-1.sentence-1' class='sentence'><b>Change:</b> New identifiers with special meaning<a class='hidden_link' href='#cpp17.lex-1.sentence-1'>.</a></div> <br/> <div id='cpp17.lex-1.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#cpp17.lex-1.sentence-2'>.</a></div> <br/> <div id='cpp17.lex-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Logical lines beginning with
<span class='texttt'><span class='keyword'>module</span></span> or <span class='texttt'><span class='keyword'>import</span></span> may
be interpreted differently
in this revision of C++<a class='hidden_link' href='#cpp17.lex-1.sentence-3'>.</a></div> <div id='cpp17.lex-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>class</span> <span class='keyword'>module</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>module</span> m1;          <span class='comment'>// was variable declaration; now <a href='module.unit#nt:module-declaration' title='10.1&emsp;Module units and purviews&emsp;[module.unit]'><span id='ntref:module-declaration'><span class='textsf'><i >module-declaration</i></span></span></a></span>
<span class='keyword'>module</span> <span class='operator'>*</span>m2;         <span class='comment'>// variable declaration</span>

<span class='keyword'>class</span> <span class='keyword'>import</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>import</span> j1;          <span class='comment'>// was variable declaration; now <a href='module.import#nt:module-import-declaration' title='10.3&emsp;Import declaration&emsp;[module.import]'><span id='ntref:module-import-declaration'><span class='textsf'><i >module-import-declaration</i></span></span></a></span>
<span class='operator'>::</span><span class='keyword'>import</span> j2;        <span class='comment'>// variable declaration</span>
</span></div></div></div><div class='para' id='cpp17.lex-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.lex-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L440'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.header'>[lex.<span class='shy'></span>header]</a>
<br/> <div id='cpp17.lex-2.sentence-1' class='sentence'><b>Change:</b> <a href='lex.header#nt:header-name' title='5.8&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name'><span class='textsf'><i >header-name</i></span></span></a> tokens are formed in more contexts<a class='hidden_link' href='#cpp17.lex-2.sentence-1'>.</a></div> <br/> <div id='cpp17.lex-2.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#cpp17.lex-2.sentence-2'>.</a></div> <br/> <div id='cpp17.lex-2.sentence-3' class='sentence'><b>Effect on original feature:</b> When the identifier <span class='texttt'><span class='keyword'>import</span></span>
is followed by a <span class='texttt'><span class='anglebracket'>&lt;</span></span> character,
a <a href='lex.header#nt:header-name' title='5.8&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name_'><span class='textsf'><i >header-name</i></span></span></a> token may be formed<a class='hidden_link' href='#cpp17.lex-2.sentence-3'>.</a></div> <div id='cpp17.lex-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> <span class='keyword'>import</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>import</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                <span class='comment'>// ill-formed; previously well-formed</span>
<span class='operator'>::</span><span class='keyword'>import</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// OK</span>
</span></div></div></div><div class='para' id='cpp17.lex-3'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.lex-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L456'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.key'>[lex.<span class='shy'></span>key]</a>
<br/> <div id='cpp17.lex-3.sentence-1' class='sentence'><b>Change:</b> New keywords<a class='hidden_link' href='#cpp17.lex-3.sentence-1'>.</a></div> <br/> <div id='cpp17.lex-3.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#cpp17.lex-3.sentence-2'>.</a></div> <ul class='itemize'><li id='cpp17.lex-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp17.lex-3.1'>(3.1)</a></div><div class='texpara'><div id='cpp17.lex-3.1.sentence-1' class='sentence'><a class='index' id=':UTF-8'></a>The <span id=':char8_t'><span class='texttt'><span class='keyword'>char8_<span class='shy'></span>t</span></span></span> keyword is added to differentiate
the types of ordinary and UTF-8 literals (<a href='lex.string' title='5.13.5&emsp;String literals'>[lex.<span class='shy'></span>string]</a>)<a class='hidden_link' href='#cpp17.lex-3.1.sentence-1'>.</a></div></div></li><li id='cpp17.lex-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp17.lex-3.2'>(3.2)</a></div><div class='texpara'><div id='cpp17.lex-3.2.sentence-1' class='sentence'>The <span class='texttt'><span class='keyword'>concept</span></span> keyword is
added to enable the definition of concepts (<a href='temp.concept' title='13.7.9&emsp;Concept definitions'>[temp.<span class='shy'></span>concept]</a>)<a class='hidden_link' href='#cpp17.lex-3.2.sentence-1'>.</a></div></div></li><li id='cpp17.lex-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp17.lex-3.3'>(3.3)</a></div><div class='texpara'><div id='cpp17.lex-3.3.sentence-1' class='sentence'>The <span id=':consteval'><span class='texttt'><span class='keyword'>consteval</span></span></span> keyword is added to
declare immediate functions (<a href='dcl.constexpr' title='9.2.6&emsp;The constexpr and consteval specifiers'>[dcl.<span class='shy'></span>constexpr]</a>)<a class='hidden_link' href='#cpp17.lex-3.3.sentence-1'>.</a></div></div></li><li id='cpp17.lex-3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp17.lex-3.4'>(3.4)</a></div><div class='texpara'><div id='cpp17.lex-3.4.sentence-1' class='sentence'>The <span id=':constinit'><span class='texttt'><span class='keyword'>constinit</span></span></span> keyword is added to
prevent unintended dynamic initialization (<a href='dcl.constinit' title='9.2.7&emsp;The constinit specifier'>[dcl.<span class='shy'></span>constinit]</a>)<a class='hidden_link' href='#cpp17.lex-3.4.sentence-1'>.</a></div></div></li><li id='cpp17.lex-3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp17.lex-3.5'>(3.5)</a></div><div class='texpara'><div id='cpp17.lex-3.5.sentence-1' class='sentence'>The <span id=':co_await'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>await</span></span></span>, <span id=':co_yield'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>yield</span></span></span>, and <span id=':co_return'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>return</span></span></span> keywords are added
to enable the definition of coroutines  (<a href='dcl.fct.def.coroutine' title='9.5.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>)<a class='hidden_link' href='#cpp17.lex-3.5.sentence-1'>.</a></div></div></li><li id='cpp17.lex-3.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp17.lex-3.6'>(3.6)</a></div><div class='texpara'><div id='cpp17.lex-3.6.sentence-1' class='sentence'>The <span class='texttt'><span class='keyword'>requires</span></span> keyword is added
to introduce constraints through a <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause'><span class='textsf'><i >requires-clause</i></span></span></a> (<a href='temp.pre' title='13.1&emsp;Preamble'>[temp.<span class='shy'></span>pre]</a>)
or a <a href='expr.prim.req.general#nt:requires-expression' title='7.5.7.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression'><span class='textsf'><i >requires-expression</i></span></span></a> (<a href='expr.prim.req' title='7.5.7&emsp;Requires expressions'>[expr.<span class='shy'></span>prim.<span class='shy'></span>req]</a>)<a class='hidden_link' href='#cpp17.lex-3.6.sentence-1'>.</a></div></div></li></ul> <div id='cpp17.lex-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code using
<span id=':char8_t_'><span class='texttt'><span class='keyword'>char8_<span class='shy'></span>t</span></span></span>,
<span class='texttt'><span class='keyword'>concept</span></span>,
<span id=':consteval_'><span class='texttt'><span class='keyword'>consteval</span></span></span>,
<span id=':constinit_'><span class='texttt'><span class='keyword'>constinit</span></span></span>,
<span id=':co_await_'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>await</span></span></span>, <span id=':co_yield_'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>yield</span></span></span>, <span id=':co_return_'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>return</span></span></span>,
or <span class='texttt'><span class='keyword'>requires</span></span>
as an identifier is not valid in this revision of C++<a class='hidden_link' href='#cpp17.lex-3.sentence-3'>.</a></div></div></div><div class='para' id='cpp17.lex-4'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.lex-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L493'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.operators'>[lex.<span class='shy'></span>operators]</a>
<br/> <div id='cpp17.lex-4.sentence-1' class='sentence'><b>Change:</b> New operator <span class='texttt'><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#cpp17.lex-4.sentence-1'>.</a></div> <br/> <div id='cpp17.lex-4.sentence-2' class='sentence'><b>Rationale:</b> Necessary for new functionality<a class='hidden_link' href='#cpp17.lex-4.sentence-2'>.</a></div> <br/> <div id='cpp17.lex-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that contains a <span class='texttt'><span class='anglebracket'>&lt;</span><span class='operator'>=</span></span> token
immediately followed by a <span class='texttt'><span class='anglebracket'>&gt;</span></span> token
may be ill-formed or have different semantics in this revision of C++<a class='hidden_link' href='#cpp17.lex-4.sentence-3'>.</a></div> <div id='cpp17.lex-4.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> X <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='parenthesis'>(</span>X, X<span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span><span class='parenthesis'>(</span>X, X<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
  Y<span class='anglebracket'>&lt;</span><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span><span class='anglebracket'>&gt;</span> y;              <span class='comment'>// ill-formed; previously well-formed</span>
<span class='curlybracket'>}</span>
</span></div></div></div><div class='para' id='cpp17.lex-5'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.lex-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L512'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.literal'>[lex.<span class='shy'></span>literal]</a>
<a class='index' id=':UTF-8_'></a><br/> <div id='cpp17.lex-5.sentence-1' class='sentence'><b>Change:</b> Type of UTF-8 string and character literals<a class='hidden_link' href='#cpp17.lex-5.sentence-1'>.</a></div> <br/> <div id='cpp17.lex-5.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#cpp17.lex-5.sentence-2'>.</a></div> <div id='cpp17.lex-5.sentence-3' class='sentence'>The changed types enable function overloading, template specialization, and
type deduction to distinguish ordinary and UTF-8 string and character literals<a class='hidden_link' href='#cpp17.lex-5.sentence-3'>.</a></div> <br/> <div id='cpp17.lex-5.sentence-4' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that depends on
UTF-8 string literals having type “array of <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>char</span></span>” and
UTF-8 character literals having type “<span class='texttt'><span class='keyword'>char</span></span>”
is not valid in this revision of C++<a class='hidden_link' href='#cpp17.lex-5.sentence-4'>.</a></div> <div id='cpp17.lex-5.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>const</span> <span class='keyword'>auto</span> <span class='operator'>*</span>u8s <span class='operator'>=</span> <span class='literal'>u8"text"</span>;     <span class='comment'>// <span class='tcode_in_codeblock'>u8s</span> previously deduced as <span class='tcode_in_codeblock'>const char*</span>; now deduced as <span class='tcode_in_codeblock'>const char8_<span class='shy'></span>t*</span></span>
<span class='keyword'>const</span> <span class='keyword'>char</span> <span class='operator'>*</span>ps <span class='operator'>=</span> u8s;           <span class='comment'>// ill-formed; previously well-formed</span>

<span class='keyword'>auto</span> u8c <span class='operator'>=</span> <span class='literal'>u8'c'</span>;               <span class='comment'>// <span class='tcode_in_codeblock'>u8c</span> previously deduced as <span class='tcode_in_codeblock'>char</span>; now deduced as <span id=':char8_t__'><span class='tcode_in_codeblock'>char8_<span class='shy'></span>t</span></span></span>
<span class='keyword'>char</span> <span class='operator'>*</span>pc <span class='operator'>=</span> <span class='operator'>&amp;</span>u8c;                <span class='comment'>// ill-formed; previously well-formed</span>

std<span class='operator'>::</span>string s <span class='operator'>=</span> <span class='literal'>u8"text"</span>;       <span class='comment'>// ill-formed; previously well-formed</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>char</span> <span class='operator'>*</span>s<span class='parenthesis'>)</span>;
f<span class='parenthesis'>(</span><span class='literal'>u8"text"</span><span class='parenthesis'>)</span>;                    <span class='comment'>// ill-formed; previously well-formed</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> ct;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> ct<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> type <span class='operator'>=</span> <span class='keyword'>char</span>;
<span class='curlybracket'>}</span>;
ct<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='literal'>u8'c'</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>type x;    <span class='comment'>// ill-formed; previously well-formed.</span>
</span></div></div></div></div><div id='cpp17.basic' class='section'><h3 ><a class='secnum' href='#cpp17.basic' style='min-width:80pt'>C.3.3</a> <a href='basic' title='6&emsp;Basics'>[basic]</a>: basics <a class='abbr_ref' href='diff.cpp17.basic'>[diff.cpp17.basic]</a></h3><div class='para' id='cpp17.basic-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.basic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L547'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='basic.life'>[basic.<span class='shy'></span>life]</a>
<br/> <div id='cpp17.basic-1.sentence-1' class='sentence'><b>Change:</b> A pseudo-destructor call ends the lifetime of
the object to which it is applied<a class='hidden_link' href='#cpp17.basic-1.sentence-1'>.</a></div> <br/> <div id='cpp17.basic-1.sentence-2' class='sentence'><b>Rationale:</b> Increase consistency of the language model<a class='hidden_link' href='#cpp17.basic-1.sentence-2'>.</a></div> <br/> <div id='cpp17.basic-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid ISO C++ 2017 code may be ill-formed or
have undefined behavior in this revision of C++<a class='hidden_link' href='#cpp17.basic-1.sentence-3'>.</a></div> <div id='cpp17.basic-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>123</span>;
  <span class='keyword'>using</span> T <span class='operator'>=</span> <span class='keyword'>int</span>;
  a<span class='operator'>.</span><span class='operator'>~</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>return</span> a;         <span class='comment'>// undefined behavior; previously returned 123</span>
<span class='curlybracket'>}</span>
</span></div></div></div><div class='para' id='cpp17.basic-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.basic-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L566'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='intro.races'>[intro.<span class='shy'></span>races]</a>
<br/> <div id='cpp17.basic-2.sentence-1' class='sentence'><b>Change:</b> Except for the initial release operation,
a release sequence consists solely of atomic read-modify-write operations<a class='hidden_link' href='#cpp17.basic-2.sentence-1'>.</a></div> <br/> <div id='cpp17.basic-2.sentence-2' class='sentence'><b>Rationale:</b> Removal of rarely used and confusing feature<a class='hidden_link' href='#cpp17.basic-2.sentence-2'>.</a></div> <br/> <div id='cpp17.basic-2.sentence-3' class='sentence'><b>Effect on original feature:</b> If a <span class='texttt'>memory_<span class='shy'></span>order_<span class='shy'></span>release</span> atomic store is followed
by a <span class='texttt'>memory_<span class='shy'></span>order_<span class='shy'></span>relaxed</span> store to the same variable by the same thread,
then reading the latter value with a <span class='texttt'>memory_<span class='shy'></span>order_<span class='shy'></span>acquire</span> load
no longer provides any “happens before” guarantees,
even in the absence of intervening stores by another thread<a class='hidden_link' href='#cpp17.basic-2.sentence-3'>.</a></div></div></div></div><div id='cpp17.expr' class='section'><h3 ><a class='secnum' href='#cpp17.expr' style='min-width:80pt'>C.3.4</a> <a href='expr' title='7&emsp;Expressions'>[expr]</a>: expressions <a class='abbr_ref' href='diff.cpp17.expr'>[diff.cpp17.expr]</a></h3><div class='para' id='cpp17.expr-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L581'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='expr.prim.lambda.capture'>[expr.<span class='shy'></span>prim.<span class='shy'></span>lambda.<span class='shy'></span>capture]</a>
<br/> <div id='cpp17.expr-1.sentence-1' class='sentence'><b>Change:</b> Implicit lambda capture may capture additional entities<a class='hidden_link' href='#cpp17.expr-1.sentence-1'>.</a></div> <br/> <div id='cpp17.expr-1.sentence-2' class='sentence'><b>Rationale:</b> Rule simplification, necessary to resolve interactions with constexpr if<a class='hidden_link' href='#cpp17.expr-1.sentence-2'>.</a></div> <br/> <div id='cpp17.expr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Lambdas with a <a href='expr.prim.lambda.capture#nt:capture-default' title='7.5.5.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default'><span class='textsf'><i >capture-default</i></span></span></a>
may capture local entities
that were not captured in C++ 2017
if those entities are only referenced in contexts
that do not result in an odr-use<a class='hidden_link' href='#cpp17.expr-1.sentence-3'>.</a></div></div></div></div><div id='cpp17.dcl.dcl' class='section'><h3 ><a class='secnum' href='#cpp17.dcl.dcl' style='min-width:80pt'>C.3.5</a> <a href='dcl.dcl' title='9&emsp;Declarations'>[dcl.<span class='shy'></span>dcl]</a>: declarations <a class='abbr_ref' href='diff.cpp17.dcl.dcl'>[diff.cpp17.dcl.dcl]</a></h3><div class='para' id='cpp17.dcl.dcl-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.dcl.dcl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L595'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.typedef'>[dcl.<span class='shy'></span>typedef]</a>
<br/> <div id='cpp17.dcl.dcl-1.sentence-1' class='sentence'><b>Change:</b> Unnamed classes with a typedef name for linkage purposes
can contain only C-compatible constructs<a class='hidden_link' href='#cpp17.dcl.dcl-1.sentence-1'>.</a></div> <br/> <div id='cpp17.dcl.dcl-1.sentence-2' class='sentence'><b>Rationale:</b> Necessary for implementability<a class='hidden_link' href='#cpp17.dcl.dcl-1.sentence-2'>.</a></div> <br/> <div id='cpp17.dcl.dcl-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may be ill-formed in this revision of C++<a class='hidden_link' href='#cpp17.dcl.dcl-1.sentence-3'>.</a></div> <div id='cpp17.dcl.dcl-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>typedef</span> <span class='keyword'>struct</span> <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>           <span class='comment'>// ill-formed; previously well-formed</span>
<span class='curlybracket'>}</span> S;
</span></div></div></div><div class='para' id='cpp17.dcl.dcl-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.dcl.dcl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L610'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.fct.default'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>default]</a>
<br/> <div id='cpp17.dcl.dcl-2.sentence-1' class='sentence'><b>Change:</b> A function cannot have different default arguments
in different translation units<a class='hidden_link' href='#cpp17.dcl.dcl-2.sentence-1'>.</a></div> <br/> <div id='cpp17.dcl.dcl-2.sentence-2' class='sentence'><b>Rationale:</b> Required for modules support<a class='hidden_link' href='#cpp17.dcl.dcl-2.sentence-2'>.</a></div> <br/> <div id='cpp17.dcl.dcl-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may be ill-formed in this revision of C++,
with no diagnostic required<a class='hidden_link' href='#cpp17.dcl.dcl-2.sentence-3'>.</a></div> <div id='cpp17.dcl.dcl-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='comment'>// Translation unit 1</span>
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>42</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>

<span class='comment'>// Translation unit 2</span>
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>76</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>         <span class='comment'>// ill-formed, no diagnostic required; previously well-formed</span>
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>              <span class='comment'>// used to return 42</span>
</span></div></div></div><div class='para' id='cpp17.dcl.dcl-3'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.dcl.dcl-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L631'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.aggr'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a>
<br/> <div id='cpp17.dcl.dcl-3.sentence-1' class='sentence'><b>Change:</b> A class that has user-declared constructors is never an aggregate<a class='hidden_link' href='#cpp17.dcl.dcl-3.sentence-1'>.</a></div> <br/> <div id='cpp17.dcl.dcl-3.sentence-2' class='sentence'><b>Rationale:</b> Remove potentially error-prone aggregate initialization
which may apply notwithstanding the declared constructors of a class<a class='hidden_link' href='#cpp17.dcl.dcl-3.sentence-2'>.</a></div> <br/> <div id='cpp17.dcl.dcl-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that aggregate-initializes
a type with a user-declared constructor
may be ill-formed or have different semantics
in this revision of C++<a class='hidden_link' href='#cpp17.dcl.dcl-3.sentence-3'>.</a></div> <div id='cpp17.dcl.dcl-3.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>              <span class='comment'>// not an aggregate; previously an aggregate</span>
  A<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>              <span class='comment'>// not an aggregate; previously an aggregate</span>
  B<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> C <span class='curlybracket'>{</span>              <span class='comment'>// not an aggregate; previously an aggregate</span>
  C<span class='parenthesis'>(</span>C<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  <span class='keyword'>int</span> a, b;
<span class='curlybracket'>}</span>;

A a<span class='curlybracket'>{</span><span class='curlybracket'>}</span>;                  <span class='comment'>// ill-formed; previously well-formed</span>
B b <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>;              <span class='comment'>// ill-formed; previously well-formed</span>
<span class='keyword'>auto</span><span class='operator'>*</span> c <span class='operator'>=</span> <span class='keyword'>new</span> C<span class='curlybracket'>{</span><span class='literal'>2</span>, <span class='literal'>3</span><span class='curlybracket'>}</span>;  <span class='comment'>// ill-formed; previously well-formed</span>

<span class='keyword'>struct</span> Y;

<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> Y<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> Y <span class='curlybracket'>{</span>              <span class='comment'>// not an aggregate; previously an aggregate</span>
  Y<span class='parenthesis'>(</span><span class='keyword'>const</span> Y<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  X x;
<span class='curlybracket'>}</span>;

Y y<span class='curlybracket'>{</span>X<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span>;               <span class='comment'>// copy constructor call; previously aggregate-initialization</span>
</span></div></div></div><div class='para' id='cpp17.dcl.dcl-4'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.dcl.dcl-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L676'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.list'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>
<br/> <div id='cpp17.dcl.dcl-4.sentence-1' class='sentence'><b>Change:</b> Boolean conversion from a pointer or pointer-to-member type
is now a narrowing conversion<a class='hidden_link' href='#cpp17.dcl.dcl-4.sentence-1'>.</a></div> <br/> <div id='cpp17.dcl.dcl-4.sentence-2' class='sentence'><b>Rationale:</b> Catches bugs<a class='hidden_link' href='#cpp17.dcl.dcl-4.sentence-2'>.</a></div> <br/> <div id='cpp17.dcl.dcl-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may fail to compile
in this revision of C++<a class='hidden_link' href='#cpp17.dcl.dcl-4.sentence-3'>.</a></div> <div id='cpp17.dcl.dcl-4.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>bool</span> y<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>"bc"</span> <span class='curlybracket'>}</span>;    <span class='comment'>// ill-formed; previously well-formed</span>
</span></div></div></div></div><div id='cpp17.class' class='section'><h3 ><a class='secnum' href='#cpp17.class' style='min-width:80pt'>C.3.6</a> <a href='class' title='11&emsp;Classes'>[class]</a>: classes <a class='abbr_ref' href='diff.cpp17.class'>[diff.cpp17.class]</a></h3><div class='para' id='cpp17.class-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L692'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='class.ctor'>[class.<span class='shy'></span>ctor]</a> and <a href='class.conv.fct'>[class.<span class='shy'></span>conv.<span class='shy'></span>fct]</a>
<br/> <div id='cpp17.class-1.sentence-1' class='sentence'><b>Change:</b> The class name can no longer be used parenthesized
immediately after an <span id=':explicit'><span class='texttt'><span class='keyword'>explicit</span></span></span> <a href='dcl.spec.general#nt:decl-specifier' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier'><span class='textsf'><i >decl-specifier</i></span></span></a>
in a constructor declaration<a class='hidden_link' href='#cpp17.class-1.sentence-1'>.</a></div> <div id='cpp17.class-1.sentence-2' class='sentence'>The <a href='class.conv.fct#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id'><span class='textsf'><i >conversion-function-id</i></span></span></a> can no longer be used parenthesized
immediately after an <span id=':explicit_'><span class='texttt'><span class='keyword'>explicit</span></span></span> <a href='dcl.spec.general#nt:decl-specifier' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier_'><span class='textsf'><i >decl-specifier</i></span></span></a>
in a conversion function declaration<a class='hidden_link' href='#cpp17.class-1.sentence-2'>.</a></div> <br/> <div id='cpp17.class-1.sentence-3' class='sentence'><b>Rationale:</b> Necessary for new functionality<a class='hidden_link' href='#cpp17.class-1.sentence-3'>.</a></div> <br/> <div id='cpp17.class-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may fail to compile
in this revision of C++<a class='hidden_link' href='#cpp17.class-1.sentence-4'>.</a></div> <div id='cpp17.class-1.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>explicit</span> <span class='parenthesis'>(</span>S<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>const</span> S<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;       <span class='comment'>// ill-formed; previously well-formed</span>
  <span class='keyword'>explicit</span> <span class='parenthesis'>(</span><span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;    <span class='comment'>// ill-formed; previously well-formed</span>
  <span class='keyword'>explicit</span><span class='parenthesis'>(</span><span class='literal'>true</span><span class='parenthesis'>)</span> <span class='parenthesis'>(</span>S<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;      <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>;
</span></div></div></div><div class='para' id='cpp17.class-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.class-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L714'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='class.ctor'>[class.<span class='shy'></span>ctor]</a> and <a href='class.dtor'>[class.<span class='shy'></span>dtor]</a>
<br/> <div id='cpp17.class-2.sentence-1' class='sentence'><b>Change:</b> A <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id'><span class='textsf'><i >simple-template-id</i></span></span></a>
is no longer valid as the <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id'><span class='textsf'><i >declarator-id</i></span></span></a> of a constructor or destructor<a class='hidden_link' href='#cpp17.class-2.sentence-1'>.</a></div> <br/> <div id='cpp17.class-2.sentence-2' class='sentence'><b>Rationale:</b> Remove potentially error-prone option for redundancy<a class='hidden_link' href='#cpp17.class-2.sentence-2'>.</a></div> <br/> <div id='cpp17.class-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may fail to compile
in this revision of C++<a class='hidden_link' href='#cpp17.class-2.sentence-3'>.</a></div> <div id='cpp17.class-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;           <span class='comment'>// error: <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id_'><span class='textsf'><i >simple-template-id</i></span></span></a> not allowed for constructor</span>
  A<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;           <span class='comment'>// OK, injected-class-name used</span>
  <span class='operator'>~</span>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// error: <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id__'><span class='textsf'><i >simple-template-id</i></span></span></a> not allowed for destructor</span>
<span class='curlybracket'>}</span>;
</span></div></div></div><div class='para' id='cpp17.class-3'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.class-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L733'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.copy.elision'>[class.<span class='shy'></span>copy.<span class='shy'></span>elision]</a>
<br/> <div id='cpp17.class-3.sentence-1' class='sentence'><b>Change:</b> A function returning an implicitly movable entity
may invoke a constructor taking an rvalue reference to a type
different from that of the returned expression<a class='hidden_link' href='#cpp17.class-3.sentence-1'>.</a></div> <div id='cpp17.class-3.sentence-2' class='sentence'>Function and catch-clause parameters can be thrown using move constructors<a class='hidden_link' href='#cpp17.class-3.sentence-2'>.</a></div> <br/> <div id='cpp17.class-3.sentence-3' class='sentence'><b>Rationale:</b> Side effect of making it easier to write
more efficient code that takes advantage of moves<a class='hidden_link' href='#cpp17.class-3.sentence-3'>.</a></div> <br/> <div id='cpp17.class-3.sentence-4' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may fail to compile or have different semantics
in this revision of C++<a class='hidden_link' href='#cpp17.class-3.sentence-4'>.</a></div> <div id='cpp17.class-3.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> base <span class='curlybracket'>{</span>
  base<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  base<span class='parenthesis'>(</span>base <span class='keyword'>const</span> <span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>private</span><span class='operator'>:</span>
  base<span class='parenthesis'>(</span>base <span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> derived <span class='operator'>:</span> base <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

base f<span class='parenthesis'>(</span>base b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>throw</span> b;                      <span class='comment'>// error: <span class='tcode_in_codeblock'>base(base &amp;&amp;)</span> is private</span>
  derived d;
  <span class='keyword'>return</span> d;                     <span class='comment'>// error: <span class='tcode_in_codeblock'>base(base &amp;&amp;)</span> is private</span>
<span class='curlybracket'>}</span>

<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  S<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>char</span> <span class='operator'>*</span>s<span class='parenthesis'>)</span> <span class='operator'>:</span> m<span class='parenthesis'>(</span>s<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
  S<span class='parenthesis'>(</span><span class='keyword'>const</span> S<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>default</span>;
  S<span class='parenthesis'>(</span>S<span class='operator'>&amp;</span><span class='operator'>&amp;</span> other<span class='parenthesis'>)</span> <span class='operator'>:</span> m<span class='parenthesis'>(</span>other<span class='operator'>.</span>m<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> other<span class='operator'>.</span>m <span class='operator'>=</span> <span class='literal'>nullptr</span>; <span class='curlybracket'>}</span>
  <span class='keyword'>const</span> <span class='keyword'>char</span> <span class='operator'>*</span> m;
<span class='curlybracket'>}</span>;

S consume<span class='parenthesis'>(</span>S<span class='operator'>&amp;</span><span class='operator'>&amp;</span> s<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> s; <span class='curlybracket'>}</span>

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  S s<span class='parenthesis'>(</span><span class='literal'>"text"</span><span class='parenthesis'>)</span>;
  consume<span class='parenthesis'>(</span><span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span>S<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>s<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
  <span class='keyword'>char</span> c <span class='operator'>=</span> <span class='operator'>*</span>s<span class='operator'>.</span>m;                <span class='comment'>// undefined behavior; previously ok</span>
<span class='curlybracket'>}</span>
</span></div></div></div></div><div id='cpp17.over' class='section'><h3 ><a class='secnum' href='#cpp17.over' style='min-width:80pt'>C.3.7</a> <a href='over' title='12&emsp;Overloading'>[over]</a>: overloading <a class='abbr_ref' href='diff.cpp17.over'>[diff.cpp17.over]</a></h3><div class='para' id='cpp17.over-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.over-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L780'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='over.match.oper'>[over.<span class='shy'></span>match.<span class='shy'></span>oper]</a>
<br/> <div id='cpp17.over-1.sentence-1' class='sentence'><b>Change:</b> Equality and inequality expressions can now find
reversed and rewritten candidates<a class='hidden_link' href='#cpp17.over-1.sentence-1'>.</a></div> <br/> <div id='cpp17.over-1.sentence-2' class='sentence'><b>Rationale:</b> Improve consistency of equality with three-way comparison
and make it easier to write the full complement of equality operations<a class='hidden_link' href='#cpp17.over-1.sentence-2'>.</a></div> <br/> <div id='cpp17.over-1.sentence-3' class='sentence'><b>Effect on original feature:</b> For certain pairs of types where one is convertible to the other,
equality or inequality expressions between an object of one type
and an object of the other type invoke a different operator<a class='hidden_link' href='#cpp17.over-1.sentence-3'>.</a></div> <div id='cpp17.over-1.sentence-4' class='sentence'>Also, for certain types, equality or inequality expressions
between two objects of that type become ambiguous<a class='hidden_link' href='#cpp17.over-1.sentence-4'>.</a></div> <div id='cpp17.over-1.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span>A, <span class='keyword'>int</span><span class='parenthesis'>)</span>;        <span class='comment'>// #1</span>
<span class='comment'>// #2 is built-in candidate: <span class='tcode_in_codeblock'>bool operator==(int, int);</span></span>
<span class='comment'>// #3 is built-in candidate: <span class='tcode_in_codeblock'>bool operator!=(int, int);</span></span>

<span class='keyword'>int</span> check<span class='parenthesis'>(</span>A x, A y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='parenthesis'>(</span>x <span class='operator'>=</span><span class='operator'>=</span> y<span class='parenthesis'>)</span> <span class='operator'>+</span>             <span class='comment'>// ill-formed; previously well-formed</span>
    <span class='parenthesis'>(</span><span class='literal'>10</span> <span class='operator'>=</span><span class='operator'>=</span> x<span class='parenthesis'>)</span> <span class='operator'>+</span>                 <span class='comment'>// calls #1, previously selected #2</span>
    <span class='parenthesis'>(</span><span class='literal'>10</span> <span class='operator'>!</span><span class='operator'>=</span> x<span class='parenthesis'>)</span>;                  <span class='comment'>// calls #1, previously selected #3</span>
<span class='curlybracket'>}</span>
</span></div></div></div><div class='para' id='cpp17.over-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.over-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L810'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='over.match.oper'>[over.<span class='shy'></span>match.<span class='shy'></span>oper]</a>
<br/> <div id='cpp17.over-2.sentence-1' class='sentence'><b>Change:</b> Overload resolution may change for equality operators (<a href='expr.eq' title='7.6.10&emsp;Equality operators'>[expr.<span class='shy'></span>eq]</a>)<a class='hidden_link' href='#cpp17.over-2.sentence-1'>.</a></div> <br/> <div id='cpp17.over-2.sentence-2' class='sentence'><b>Rationale:</b> Support calling <span class='texttt'><span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span></span> with reversed order of arguments<a class='hidden_link' href='#cpp17.over-2.sentence-2'>.</a></div> <br/> <div id='cpp17.over-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that uses equality operators with conversion functions
may be ill-formed or have different semantics in this revision of C++<a class='hidden_link' href='#cpp17.over-2.sentence-3'>.</a></div> <div id='cpp17.over-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>10</span>; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span>A, <span class='keyword'>int</span><span class='parenthesis'>)</span>;        <span class='comment'>// #1</span>
<span class='comment'>// #2 is built-in candidate: <span class='tcode_in_codeblock'>bool operator==(int, int);</span></span>
<span class='keyword'>bool</span> b <span class='operator'>=</span> <span class='literal'>10</span> <span class='operator'>=</span><span class='operator'>=</span> A<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;             <span class='comment'>// calls #1 with reversed order of arguments; previously selected #2</span>

<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span><span class='parenthesis'>(</span><span class='keyword'>const</span> B<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;    <span class='comment'>// member function with no cv-qualifier</span>
<span class='curlybracket'>}</span>;
B b1;
<span class='keyword'>bool</span> eq <span class='operator'>=</span> <span class='parenthesis'>(</span>b1 <span class='operator'>=</span><span class='operator'>=</span> b1<span class='parenthesis'>)</span>;           <span class='comment'>// ambiguous; previously well-formed</span>
</span></div></div></div></div><div id='cpp17.temp' class='section'><h3 ><a class='secnum' href='#cpp17.temp' style='min-width:80pt'>C.3.8</a> <a href='temp' title='13&emsp;Templates'>[temp]</a>: templates <a class='abbr_ref' href='diff.cpp17.temp'>[diff.cpp17.temp]</a></h3><div class='para' id='cpp17.temp-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.temp-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L837'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='temp.names'>[temp.<span class='shy'></span>names]</a>
<br/> <div id='cpp17.temp-1.sentence-1' class='sentence'><b>Change:</b> An <a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.4.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id'><span class='textsf'><i >unqualified-id</i></span></span></a>
that is followed by a <span class='texttt'><span class='anglebracket'>&lt;</span></span>
and for which name lookup
finds nothing or finds a function
will be treated as a <a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name'><span class='textsf'><i >template-name</i></span></span></a>
in order to potentially cause argument dependent lookup to be performed<a class='hidden_link' href='#cpp17.temp-1.sentence-1'>.</a></div> <br/> <div id='cpp17.temp-1.sentence-2' class='sentence'><b>Rationale:</b> It was problematic to call a function template
with an explicit template argument list
via argument dependent lookup
because of the need to have a template with the same name
visible via normal lookup<a class='hidden_link' href='#cpp17.temp-1.sentence-2'>.</a></div> <br/> <div id='cpp17.temp-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Previously valid code that uses a function name
as the left operand of a <span class='texttt'><span class='anglebracket'>&lt;</span></span> operator
would become ill-formed<a class='hidden_link' href='#cpp17.temp-1.sentence-3'>.</a></div> <div id='cpp17.temp-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='parenthesis'>(</span><span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span>fp<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>, A<span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A a;
  f <span class='anglebracket'>&lt;</span> a;    <span class='comment'>// ill-formed; previously well-formed</span>
  <span class='parenthesis'>(</span>f<span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span> a;  <span class='comment'>// still well-formed</span>
<span class='curlybracket'>}</span>
</span></div></div></div></div><div id='cpp17.except' class='section'><h3 ><a class='secnum' href='#cpp17.except' style='min-width:80pt'>C.3.9</a> <a href='except' title='14&emsp;Exception handling'>[except]</a>: exception handling <a class='abbr_ref' href='diff.cpp17.except'>[diff.cpp17.except]</a></h3><div class='para' id='cpp17.except-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.except-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L869'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='except.spec'>[except.<span class='shy'></span>spec]</a>
<br/> <div id='cpp17.except-1.sentence-1' class='sentence'><b>Change:</b> Remove <span class='texttt'><span class='keyword'>throw</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> exception specification<a class='hidden_link' href='#cpp17.except-1.sentence-1'>.</a></div> <br/> <div id='cpp17.except-1.sentence-2' class='sentence'><b>Rationale:</b> Removal of obsolete feature that has been replaced by <span id=':noexcept'><span class='texttt'><span class='keyword'>noexcept</span></span></span><a class='hidden_link' href='#cpp17.except-1.sentence-2'>.</a></div> <br/> <div id='cpp17.except-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 function declaration, member function declaration, function
pointer declaration, or function reference declaration that uses <span class='texttt'><span class='keyword'>throw</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
for its exception specification will be rejected as ill-formed in this
revision of C++<a class='hidden_link' href='#cpp17.except-1.sentence-3'>.</a></div> <div id='cpp17.except-1.sentence-4' class='sentence'>It should simply be replaced with <span id=':noexcept_'><span class='texttt'><span class='keyword'>noexcept</span></span></span> for no
change of meaning since C++ 2017<a class='hidden_link' href='#cpp17.except-1.sentence-4'>.</a></div> <div id='cpp17.except-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#cpp17.except-note-1'>1</a></i>: <div id='cpp17.except-1.sentence-5' class='sentence'>There is no way to write a function declaration
that is non-throwing in this revision of C++
and is also non-throwing in C++ 2003
except by using the preprocessor to generate
a different token sequence in each case<a class='hidden_link' href='#cpp17.except-1.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='cpp17.library' class='section'><h3 ><a class='secnum' href='#cpp17.library' style='min-width:80pt'>C.3.10</a> <a href='library' title='16&emsp;Library introduction'>[library]</a>: library introduction <a class='abbr_ref' href='diff.cpp17.library'>[diff.cpp17.library]</a></h3><div class='para' id='cpp17.library-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.library-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L890'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='headers'>[headers]</a>
<br/> <div id='cpp17.library-1.sentence-1' class='sentence'><b>Change:</b> New headers<a class='hidden_link' href='#cpp17.library-1.sentence-1'>.</a></div> <br/> <div id='cpp17.library-1.sentence-2' class='sentence'><b>Rationale:</b> New functionality<a class='hidden_link' href='#cpp17.library-1.sentence-2'>.</a></div> <br/> <div id='cpp17.library-1.sentence-3' class='sentence'><b>Effect on original feature:</b> The following C++ headers are new:
<a href='barrier.syn#header:%3cbarrier%3e' title='33.9.3.2&emsp;Header &lt;barrier&gt; synopsis&emsp;[barrier.syn]'><span id='headerref:<barrier>'><span class='texttt'>&lt;barrier&gt;</span></span></a>,
<a href='bit.general#header:%3cbit%3e' title='22.15.1&emsp;General&emsp;[bit.general]'><span id='headerref:<bit>'><span class='texttt'>&lt;bit&gt;</span></span></a>,
<a href='charconv.syn#header:%3ccharconv%3e' title='22.13.1&emsp;Header &lt;charconv&gt; synopsis&emsp;[charconv.syn]'><span id='headerref:<charconv>'><span class='texttt'>&lt;charconv&gt;</span></span></a>,
<a href='compare.syn#header:%3ccompare%3e' title='17.11.1&emsp;Header &lt;compare&gt; synopsis&emsp;[compare.syn]'><span id='headerref:<compare>'><span class='texttt'>&lt;compare&gt;</span></span></a>,
<a href='concepts.syn#header:%3cconcepts%3e' title='18.3&emsp;Header &lt;concepts&gt; synopsis&emsp;[concepts.syn]'><span id='headerref:<concepts>'><span class='texttt'>&lt;concepts&gt;</span></span></a>,
<a href='coroutine.syn#header:%3ccoroutine%3e' title='17.12.2&emsp;Header &lt;coroutine&gt; synopsis&emsp;[coroutine.syn]'><span id='headerref:<coroutine>'><span class='texttt'>&lt;coroutine&gt;</span></span></a>,
<a href='format.syn#header:%3cformat%3e' title='22.14.1&emsp;Header &lt;format&gt; synopsis&emsp;[format.syn]'><span id='headerref:<format>'><span class='texttt'>&lt;format&gt;</span></span></a>,
<a href='latch.syn#header:%3clatch%3e' title='33.9.2.2&emsp;Header &lt;latch&gt; synopsis&emsp;[latch.syn]'><span id='headerref:<latch>'><span class='texttt'>&lt;latch&gt;</span></span></a>,
<a href='numbers.syn#header:%3cnumbers%3e' title='28.8.1&emsp;Header &lt;numbers&gt; synopsis&emsp;[numbers.syn]'><span id='headerref:<numbers>'><span class='texttt'>&lt;numbers&gt;</span></span></a>,
<a href='ranges.syn#header:%3cranges%3e' title='26.2&emsp;Header &lt;ranges&gt; synopsis&emsp;[ranges.syn]'><span id='headerref:<ranges>'><span class='texttt'>&lt;ranges&gt;</span></span></a>,
<a href='semaphore.syn#header:%3csemaphore%3e' title='33.8.2&emsp;Header &lt;semaphore&gt; synopsis&emsp;[semaphore.syn]'><span id='headerref:<semaphore>'><span class='texttt'>&lt;semaphore&gt;</span></span></a>,
<a href='source.location.syn#header:%3csource_location%3e' title='17.8.1&emsp;Header &lt;source_&shy;location&gt; synopsis&emsp;[source.location.syn]'><span id='headerref:<source_location>'><span class='texttt'>&lt;source_<span class='shy'></span>location&gt;</span></span></a>,
<a href='span.syn#header:%3cspan%3e' title='24.7.2.1&emsp;Header &lt;span&gt; synopsis&emsp;[span.syn]'><span id='headerref:<span>'><span class='texttt'>&lt;span&gt;</span></span></a>,
<a href='thread.stoptoken.syn#header:%3cstop_token%3e' title='33.3.2&emsp;Header &lt;stop_&shy;token&gt; synopsis&emsp;[thread.stoptoken.syn]'><span id='headerref:<stop_token>'><span class='texttt'>&lt;stop_<span class='shy'></span>token&gt;</span></span></a>,
<a href='syncstream.syn#header:%3csyncstream%3e' title='31.11.1&emsp;Header &lt;syncstream&gt; synopsis&emsp;[syncstream.syn]'><span id='headerref:<syncstream>'><span class='texttt'>&lt;syncstream&gt;</span></span></a>, and
<a href='version.syn#header:%3cversion%3e' title='17.3.2&emsp;Header &lt;version&gt; synopsis&emsp;[version.syn]'><span id='headerref:<version>'><span class='texttt'>&lt;version&gt;</span></span></a><a class='hidden_link' href='#cpp17.library-1.sentence-3'>.</a></div> <div id='cpp17.library-1.sentence-4' class='sentence'>Valid C++ 2017 code that <span class='texttt'><span class='preprocessordirective'>#include</span></span>s headers with these names may be
invalid in this revision of C++<a class='hidden_link' href='#cpp17.library-1.sentence-4'>.</a></div></div></div><div class='para' id='cpp17.library-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.library-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L916'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='headers'>[headers]</a>
<br/> <div id='cpp17.library-2.sentence-1' class='sentence'><b>Change:</b> Remove vacuous C++ header files<a class='hidden_link' href='#cpp17.library-2.sentence-1'>.</a></div> <br/> <div id='cpp17.library-2.sentence-2' class='sentence'><b>Rationale:</b> The empty headers implied a false requirement to achieve C compatibility with the C++ headers<a class='hidden_link' href='#cpp17.library-2.sentence-2'>.</a></div> <br/> <div id='cpp17.library-2.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that <span class='texttt'><span class='preprocessordirective'>#include</span></span>s any of the following headers may fail to compile:
<a class='index' id=':<ccomplex>,absence_thereof'></a><span class='texttt'><span class='anglebracket'>&lt;</span>ccomplex<span class='anglebracket'>&gt;</span></span>,
<a class='index' id=':<ciso646>,absence_thereof'></a><span class='texttt'><span class='anglebracket'>&lt;</span>ciso646<span class='anglebracket'>&gt;</span></span>,
<a class='index' id=':<cstdalign>,absence_thereof'></a><span class='texttt'><span class='anglebracket'>&lt;</span>cstdalign<span class='anglebracket'>&gt;</span></span>,
<a class='index' id=':<cstdbool>,absence_thereof'></a><span class='texttt'><span class='anglebracket'>&lt;</span>cstdbool<span class='anglebracket'>&gt;</span></span>, and
<a class='index' id=':<ctgmath>,absence_thereof'></a><span class='texttt'><span class='anglebracket'>&lt;</span>ctgmath<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#cpp17.library-2.sentence-3'>.</a></div> <div id='cpp17.library-2.sentence-4' class='sentence'>To retain the same behavior:
<ul class='itemize'><li id='cpp17.library-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp17.library-2.1'>(2.1)</a></div>a <span class='texttt'><span class='preprocessordirective'>#include</span></span> of <a class='index' id=':<ccomplex>,absence_thereof_'></a><span class='texttt'><span class='anglebracket'>&lt;</span>ccomplex<span class='anglebracket'>&gt;</span></span> can be replaced by
a <span class='texttt'><span class='preprocessordirective'>#include</span></span> of <a href='complex.syn#header:%3ccomplex%3e' title='28.4.2&emsp;Header &lt;complex&gt; synopsis&emsp;[complex.syn]'><span id='headerref:<complex>'><span class='texttt'>&lt;complex&gt;</span></span></a>,</li><li id='cpp17.library-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp17.library-2.2'>(2.2)</a></div>a <span class='texttt'><span class='preprocessordirective'>#include</span></span> of <a class='index' id=':<ctgmath>,absence_thereof_'></a><span class='texttt'><span class='anglebracket'>&lt;</span>ctgmath<span class='anglebracket'>&gt;</span></span> can be replaced by
a <span class='texttt'><span class='preprocessordirective'>#include</span></span> of <a href='cmath.syn#header:%3ccmath%3e' title='28.7.1&emsp;Header &lt;cmath&gt; synopsis&emsp;[cmath.syn]'><span id='headerref:<cmath>'><span class='texttt'>&lt;cmath&gt;</span></span></a> and
a <span class='texttt'><span class='preprocessordirective'>#include</span></span> of <a href='complex.syn#header:%3ccomplex%3e' title='28.4.2&emsp;Header &lt;complex&gt; synopsis&emsp;[complex.syn]'><span id='headerref:<complex>_'><span class='texttt'>&lt;complex&gt;</span></span></a>,
and</li><li id='cpp17.library-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp17.library-2.3'>(2.3)</a></div>a <span class='texttt'><span class='preprocessordirective'>#include</span></span> of
<a class='index' id=':<ciso646>,absence_thereof_'></a><span class='texttt'><span class='anglebracket'>&lt;</span>ciso646<span class='anglebracket'>&gt;</span></span>,
<a class='index' id=':<cstdalign>,absence_thereof_'></a><span class='texttt'><span class='anglebracket'>&lt;</span>cstdalign<span class='anglebracket'>&gt;</span></span>, or
<a class='index' id=':<cstdbool>,absence_thereof_'></a><span class='texttt'><span class='anglebracket'>&lt;</span>cstdbool<span class='anglebracket'>&gt;</span></span>
can simply be removed<a class='hidden_link' href='#cpp17.library-2.sentence-4'>.</a></li></ul></div></div></div></div><div id='cpp17.containers' class='section'><h3 ><a class='secnum' href='#cpp17.containers' style='min-width:80pt'>C.3.11</a> <a href='containers' title='24&emsp;Containers library'>[containers]</a>: containers library <a class='abbr_ref' href='diff.cpp17.containers'>[diff.cpp17.containers]</a></h3><div class='para' id='cpp17.containers-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.containers-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L948'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='forward.list'>[forward.<span class='shy'></span>list]</a> and <a href='list'>[list]</a>
<br/> <div id='cpp17.containers-1.sentence-1' class='sentence'><b>Change:</b> Return types of <span class='texttt'>remove</span>, <span class='texttt'>remove_<span class='shy'></span>if</span>, and <span class='texttt'>unique</span>
changed from <span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span> to <span class='texttt'>container<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>type</span><a class='hidden_link' href='#cpp17.containers-1.sentence-1'>.</a></div> <br/> <div id='cpp17.containers-1.sentence-2' class='sentence'><b>Rationale:</b> Improve efficiency and convenience of finding number of removed elements<a class='hidden_link' href='#cpp17.containers-1.sentence-2'>.</a></div> <br/> <div id='cpp17.containers-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Code that depends on the return types might have different semantics in this revision of C++<a class='hidden_link' href='#cpp17.containers-1.sentence-3'>.</a></div> <div id='cpp17.containers-1.sentence-4' class='sentence'>Translation units compiled against this version of C++ may be incompatible with
translation units compiled against C++ 2017, either failing to link or having undefined behavior<a class='hidden_link' href='#cpp17.containers-1.sentence-4'>.</a></div></div></div></div><div id='cpp17.iterators' class='section'><h3 ><a class='secnum' href='#cpp17.iterators' style='min-width:80pt'>C.3.12</a> <a href='iterators' title='25&emsp;Iterators library'>[iterators]</a>: iterators library <a class='abbr_ref' href='diff.cpp17.iterators'>[diff.cpp17.iterators]</a></h3><div class='para' id='cpp17.iterators-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.iterators-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L961'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='iterator.traits'>[iterator.<span class='shy'></span>traits]</a>
<br/> <div id='cpp17.iterators-1.sentence-1' class='sentence'><b>Change:</b> The specialization of <span class='texttt'>iterator_<span class='shy'></span>traits</span> for <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> and
for function pointer types no longer contains any nested typedefs<a class='hidden_link' href='#cpp17.iterators-1.sentence-1'>.</a></div> <br/> <div id='cpp17.iterators-1.sentence-2' class='sentence'><b>Rationale:</b> Corrects an issue misidentifying pointer types that are not incrementable
as iterator types<a class='hidden_link' href='#cpp17.iterators-1.sentence-2'>.</a></div> <br/> <div id='cpp17.iterators-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that relies on the presence of the typedefs
may fail to compile, or have different behavior<a class='hidden_link' href='#cpp17.iterators-1.sentence-3'>.</a></div></div></div></div><div id='cpp17.alg.reqs' class='section'><h3 ><a class='secnum' href='#cpp17.alg.reqs' style='min-width:80pt'>C.3.13</a> <a href='algorithms' title='27&emsp;Algorithms library'>[algorithms]</a>: algorithms library <a class='abbr_ref' href='diff.cpp17.alg.reqs'>[diff.cpp17.alg.reqs]</a></h3><div class='para' id='cpp17.alg.reqs-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.alg.reqs-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L974'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='algorithms.requirements'>[algorithms.<span class='shy'></span>requirements]</a>
<br/> <div id='cpp17.alg.reqs-1.sentence-1' class='sentence'><b>Change:</b> The number and order of deducible template parameters for algorithm declarations
is now unspecified, instead of being as-declared<a class='hidden_link' href='#cpp17.alg.reqs-1.sentence-1'>.</a></div> <br/> <div id='cpp17.alg.reqs-1.sentence-2' class='sentence'><b>Rationale:</b> Increase implementor freedom and allow some function templates
to be implemented as function objects with templated call operators<a class='hidden_link' href='#cpp17.alg.reqs-1.sentence-2'>.</a></div> <br/> <div id='cpp17.alg.reqs-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that passes explicit template arguments to
algorithms not explicitly specified to allow such in this version of C++
may fail to compile or have undefined behavior<a class='hidden_link' href='#cpp17.alg.reqs-1.sentence-3'>.</a></div></div></div></div><div id='cpp17.input.output' class='section'><h3 ><a class='secnum' href='#cpp17.input.output' style='min-width:80pt'>C.3.14</a> <a href='input.output' title='31&emsp;Input/output library'>[input.<span class='shy'></span>output]</a>: input/output library <a class='abbr_ref' href='diff.cpp17.input.output'>[diff.cpp17.input.output]</a></h3><div class='para' id='cpp17.input.output-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.input.output-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L988'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='istream.extractors'>[istream.<span class='shy'></span>extractors]</a>
<br/> <div id='cpp17.input.output-1.sentence-1' class='sentence'><b>Change:</b> Character array extraction only takes array types<a class='hidden_link' href='#cpp17.input.output-1.sentence-1'>.</a></div> <br/> <div id='cpp17.input.output-1.sentence-2' class='sentence'><b>Rationale:</b> Increase safety via preventing buffer overflow at compile time<a class='hidden_link' href='#cpp17.input.output-1.sentence-2'>.</a></div> <br/> <div id='cpp17.input.output-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code may fail to compile in this revision of C++<a class='hidden_link' href='#cpp17.input.output-1.sentence-3'>.</a></div> <div id='cpp17.input.output-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>auto</span> p <span class='operator'>=</span> <span class='keyword'>new</span> <span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>100</span><span class='squarebracket'>]</span>;
<span class='keyword'>char</span> q<span class='squarebracket'>[</span><span class='literal'>100</span><span class='squarebracket'>]</span>;
std<span class='operator'>::</span>cin <span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> std<span class='operator'>::</span>setw<span class='parenthesis'>(</span><span class='literal'>20</span><span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> p;         <span class='comment'>// ill-formed; previously well-formed</span>
std<span class='operator'>::</span>cin <span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> std<span class='operator'>::</span>setw<span class='parenthesis'>(</span><span class='literal'>20</span><span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> q;         <span class='comment'>// OK</span>
</span></div></div></div><div class='para' id='cpp17.input.output-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.input.output-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1003'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='ostream.inserters.character'>[ostream.<span class='shy'></span>inserters.<span class='shy'></span>character]</a>
<a class='index' id=':UTF-8__'></a><br/> <div id='cpp17.input.output-2.sentence-1' class='sentence'><b>Change:</b> Overload resolution for ostream inserters used with UTF-8 literals<a class='hidden_link' href='#cpp17.input.output-2.sentence-1'>.</a></div> <br/> <div id='cpp17.input.output-2.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#cpp17.input.output-2.sentence-2'>.</a></div> <br/> <div id='cpp17.input.output-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that passes UTF-8 literals to
<span class='texttt'>basic_<span class='shy'></span>ostream<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span></span> or
<span class='texttt'>basic_<span class='shy'></span>ostream<span class='anglebracket'>&lt;</span><span class='keyword'>wchar_<span class='shy'></span>t</span>, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span></span> is now ill-formed<a class='hidden_link' href='#cpp17.input.output-2.sentence-3'>.</a></div> <div id='cpp17.input.output-2.sentence-4' class='sentence'>For example:
<span class='codeblock'>std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>u8"text"</span>;          <span class='comment'>// previously called <span class='tcode_in_codeblock'>operator&lt;&lt;(const char*)</span> and printed a string;</span>
                                <span class='comment'>// now ill-formed</span>
std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>u8'X'</span>;             <span class='comment'>// previously called <span class='tcode_in_codeblock'>operator&lt;&lt;(char)</span> and printed a character;</span>
                                <span class='comment'>// now ill-formed</span>
</span></div></div></div><div class='para' id='cpp17.input.output-3'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.input.output-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1021'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='ostream.inserters.character'>[ostream.<span class='shy'></span>inserters.<span class='shy'></span>character]</a>
<br/> <div id='cpp17.input.output-3.sentence-1' class='sentence'><b>Change:</b> Overload resolution for ostream inserters
used with <span id=':wchar_t'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>, <span id=':char16_t'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span>, or <span id=':char32_t'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span> types<a class='hidden_link' href='#cpp17.input.output-3.sentence-1'>.</a></div> <br/> <div id='cpp17.input.output-3.sentence-2' class='sentence'><b>Rationale:</b> Removal of surprising behavior<a class='hidden_link' href='#cpp17.input.output-3.sentence-2'>.</a></div> <br/> <div id='cpp17.input.output-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that passes
<span id=':wchar_t_'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>, <span id=':char16_t_'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span>, or <span id=':char32_t_'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span> characters or strings
to <span class='texttt'>basic_<span class='shy'></span>ostream<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span></span> or
that passes <span id=':char16_t__'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span> or <span id=':char32_t__'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span> characters or strings
to <span class='texttt'>basic_<span class='shy'></span>ostream<span class='anglebracket'>&lt;</span><span class='keyword'>wchar_<span class='shy'></span>t</span>, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span></span> is now ill-formed<a class='hidden_link' href='#cpp17.input.output-3.sentence-3'>.</a></div> <div id='cpp17.input.output-3.sentence-4' class='sentence'>For example:
<span class='codeblock'>std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>u"text"</span>;           <span class='comment'>// previously formatted the string as a pointer value;</span>
                                <span class='comment'>// now ill-formed</span>
std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> <span class='literal'>u'X'</span>;              <span class='comment'>// previously formatted the character as an integer value;</span>
                                <span class='comment'>// now ill-formed</span>
</span></div></div></div><div class='para' id='cpp17.input.output-4'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.input.output-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1041'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='fs.class.path'>[fs.<span class='shy'></span>class.<span class='shy'></span>path]</a>
<br/> <div id='cpp17.input.output-4.sentence-1' class='sentence'><b>Change:</b> Return type of filesystem path format observer member functions<a class='hidden_link' href='#cpp17.input.output-4.sentence-1'>.</a></div> <br/> <div id='cpp17.input.output-4.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#cpp17.input.output-4.sentence-2'>.</a></div> <br/> <div id='cpp17.input.output-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2017 code that depends on the <span class='texttt'>u8string<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> and
<span class='texttt'>generic_<span class='shy'></span>u8string<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> member functions of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>filesystem<span class='operator'>&#x200b;::&#x200b;</span>path</span>
returning <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>string</span> is not valid in this revision of C++<a class='hidden_link' href='#cpp17.input.output-4.sentence-3'>.</a></div> <div id='cpp17.input.output-4.sentence-4' class='sentence'>For example:
<span class='codeblock'>std<span class='operator'>::</span>filesystem<span class='operator'>::</span>path p;
std<span class='operator'>::</span>string s1 <span class='operator'>=</span> p<span class='operator'>.</span>u8string<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// ill-formed; previously well-formed</span>
std<span class='operator'>::</span>string s2 <span class='operator'>=</span> p<span class='operator'>.</span>generic_u8string<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='comment'>// ill-formed; previously well-formed</span>
</span></div></div></div></div><div id='cpp17.depr' class='section'><h3 ><a class='secnum' href='#cpp17.depr' style='min-width:80pt'>C.3.15</a> <a href='depr' title='Annex D&emsp;(normative)&emsp;Compatibility features'>[depr]</a>: compatibility features <a class='abbr_ref' href='diff.cpp17.depr'>[diff.cpp17.depr]</a></h3><div class='para' id='cpp17.depr-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.depr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1060'>#</a></div><div class='texpara'><div id='cpp17.depr-1.sentence-1' class='sentence'><b>Change:</b> Remove <span class='texttt'>uncaught_<span class='shy'></span>exception</span><a class='hidden_link' href='#cpp17.depr-1.sentence-1'>.</a></div> <br/> <div id='cpp17.depr-1.sentence-2' class='sentence'><b>Rationale:</b> The function did not have a clear specification when multiple exceptions were
active, and has been superseded by <span class='texttt'>uncaught_<span class='shy'></span>exceptions</span><a class='hidden_link' href='#cpp17.depr-1.sentence-2'>.</a></div> <br/> <div id='cpp17.depr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that calls <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>uncaught_<span class='shy'></span>exception</span> may fail
to compile<a class='hidden_link' href='#cpp17.depr-1.sentence-3'>.</a></div> <div id='cpp17.depr-1.sentence-4' class='sentence'>It can be revised to use <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>uncaught_<span class='shy'></span>exceptions</span> instead,
for clear and portable semantics<a class='hidden_link' href='#cpp17.depr-1.sentence-4'>.</a></div></div></div><div class='para' id='cpp17.depr-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.depr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1071'>#</a></div><div class='texpara'><div id='cpp17.depr-2.sentence-1' class='sentence'><b>Change:</b> Remove support for adaptable function API<a class='hidden_link' href='#cpp17.depr-2.sentence-1'>.</a><br/></div> <div id='cpp17.depr-2.sentence-2' class='sentence'><b>Rationale:</b> The deprecated support relied on a limited convention that could not be
extended to support the general case or new language features<a class='hidden_link' href='#cpp17.depr-2.sentence-2'>.</a></div> <div id='cpp17.depr-2.sentence-3' class='sentence'>It has been
superseded by direct language support with <span id=':decltype'><span class='texttt'><span class='keyword'>decltype</span></span></span>, and by the
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>bind</span> and <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>not_<span class='shy'></span>fn</span> function templates<a class='hidden_link' href='#cpp17.depr-2.sentence-3'>.</a></div> <br/> <div id='cpp17.depr-2.sentence-4' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that relies on the presence of <span class='texttt'>result_<span class='shy'></span>type</span>,
<span class='texttt'>argument_<span class='shy'></span>type</span>, <span class='texttt'>first_<span class='shy'></span>argument_<span class='shy'></span>type</span>, or
<span class='texttt'>second_<span class='shy'></span>argument_<span class='shy'></span>type</span> in a standard library class may fail to compile<a class='hidden_link' href='#cpp17.depr-2.sentence-4'>.</a></div> <div id='cpp17.depr-2.sentence-5' class='sentence'>A
valid C++ 2017 program that calls <span class='texttt'>not1</span> or <span class='texttt'>not2</span>, or uses the
class templates <span class='texttt'>unary_<span class='shy'></span>negate</span> or <span class='texttt'>binary_<span class='shy'></span>negate</span>, may fail to
compile<a class='hidden_link' href='#cpp17.depr-2.sentence-5'>.</a></div></div></div><div class='para' id='cpp17.depr-3'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.depr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1087'>#</a></div><div class='texpara'><div id='cpp17.depr-3.sentence-1' class='sentence'><b>Change:</b> Remove redundant members from <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>allocator</span><a class='hidden_link' href='#cpp17.depr-3.sentence-1'>.</a></div> <br/> <div id='cpp17.depr-3.sentence-2' class='sentence'><b>Rationale:</b> <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>allocator</span> was overspecified, encouraging direct usage in user containers
rather than relying on <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>allocator_<span class='shy'></span>traits</span>, leading to poor containers<a class='hidden_link' href='#cpp17.depr-3.sentence-2'>.</a></div> <br/> <div id='cpp17.depr-3.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that directly makes use of the <span class='texttt'>pointer</span>,
<span class='texttt'>const_<span class='shy'></span>pointer</span>, <span class='texttt'>reference</span>, <span class='texttt'>const_<span class='shy'></span>reference</span>,
<span class='texttt'>rebind</span>, <span class='texttt'>address</span>, <span class='texttt'>construct</span>, <span class='texttt'>destroy</span>, or
<span class='texttt'>max_<span class='shy'></span>size</span> members of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>allocator</span>, or that directly calls
<span class='texttt'>allocate</span> with an additional hint argument, may fail to compile<a class='hidden_link' href='#cpp17.depr-3.sentence-3'>.</a></div></div></div><div class='para' id='cpp17.depr-4'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.depr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1100'>#</a></div><div class='texpara'><div id='cpp17.depr-4.sentence-1' class='sentence'><b>Change:</b> Remove <span class='texttt'>raw_<span class='shy'></span>storage_<span class='shy'></span>iterator</span><a class='hidden_link' href='#cpp17.depr-4.sentence-1'>.</a></div> <br/> <div id='cpp17.depr-4.sentence-2' class='sentence'><b>Rationale:</b> The iterator encouraged use of potentially-throwing algorithms, but did
not return the number of elements successfully constructed,
as would be necessary to destroy them<a class='hidden_link' href='#cpp17.depr-4.sentence-2'>.</a></div> <br/> <div id='cpp17.depr-4.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that uses this iterator class may fail to compile<a class='hidden_link' href='#cpp17.depr-4.sentence-3'>.</a></div></div></div><div class='para' id='cpp17.depr-5'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.depr-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1110'>#</a></div><div class='texpara'><div id='cpp17.depr-5.sentence-1' class='sentence'><b>Change:</b> Remove temporary buffers API<a class='hidden_link' href='#cpp17.depr-5.sentence-1'>.</a><br/></div> <div id='cpp17.depr-5.sentence-2' class='sentence'><b>Rationale:</b> The temporary buffer facility was intended to provide an efficient optimization
for small memory requests, but there is little evidence this was achieved in
practice, while requiring the user to provide their own exception-safe wrappers
to guard use of the facility in many cases<a class='hidden_link' href='#cpp17.depr-5.sentence-2'>.</a></div> <br/> <div id='cpp17.depr-5.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that calls <span class='texttt'>get_<span class='shy'></span>temporary_<span class='shy'></span>buffer</span> or
<span class='texttt'>return_<span class='shy'></span>temporary_<span class='shy'></span>buffer</span> may fail to compile<a class='hidden_link' href='#cpp17.depr-5.sentence-3'>.</a></div></div></div><div class='para' id='cpp17.depr-6'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.depr-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1122'>#</a></div><div class='texpara'><div id='cpp17.depr-6.sentence-1' class='sentence'><b>Change:</b> Remove <span class='texttt'>shared_<span class='shy'></span>ptr<span class='operator'>&#x200b;::&#x200b;</span>unique</span><a class='hidden_link' href='#cpp17.depr-6.sentence-1'>.</a></div> <br/> <div id='cpp17.depr-6.sentence-2' class='sentence'><b>Rationale:</b> The result of a call to this member function is not reliable in the presence of
multiple threads and weak pointers<a class='hidden_link' href='#cpp17.depr-6.sentence-2'>.</a></div> <div id='cpp17.depr-6.sentence-3' class='sentence'>The member function <span class='texttt'>use_<span class='shy'></span>count</span> is
similarly unreliable, but has a clearer contract in such cases, and remains
available for well-defined use in single-threaded cases<a class='hidden_link' href='#cpp17.depr-6.sentence-3'>.</a></div> <br/> <div id='cpp17.depr-6.sentence-4' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that calls <span class='texttt'>unique</span> on a <span class='texttt'>shared_<span class='shy'></span>ptr</span>
object may fail to compile<a class='hidden_link' href='#cpp17.depr-6.sentence-4'>.</a></div></div></div><div class='para' id='cpp17.depr-7'><div class='marginalizedparent'><a class='marginalized' href='#cpp17.depr-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1133'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='depr.meta.types'>[depr.<span class='shy'></span>meta.<span class='shy'></span>types]</a>
<br/> <div id='cpp17.depr-7.sentence-1' class='sentence'><b>Change:</b> Remove deprecated type traits<a class='hidden_link' href='#cpp17.depr-7.sentence-1'>.</a></div> <br/> <div id='cpp17.depr-7.sentence-2' class='sentence'><b>Rationale:</b> The traits had unreliable or awkward interfaces<a class='hidden_link' href='#cpp17.depr-7.sentence-2'>.</a></div> <div id='cpp17.depr-7.sentence-3' class='sentence'>The <span class='texttt'>is_<span class='shy'></span>literal_<span class='shy'></span>type</span>
trait provided no way to detect which subset of constructors and member
functions of a type were declared <span id=':constexpr'><span class='texttt'><span class='keyword'>constexpr</span></span></span><a class='hidden_link' href='#cpp17.depr-7.sentence-3'>.</a></div> <div id='cpp17.depr-7.sentence-4' class='sentence'>The <span class='texttt'>result_<span class='shy'></span>of</span>
trait had a surprising syntax that did not directly support function types<a class='hidden_link' href='#cpp17.depr-7.sentence-4'>.</a></div> <div id='cpp17.depr-7.sentence-5' class='sentence'>It has been superseded by the <span class='texttt'>invoke_<span class='shy'></span>result</span> trait<a class='hidden_link' href='#cpp17.depr-7.sentence-5'>.</a></div> <br/> <div id='cpp17.depr-7.sentence-6' class='sentence'><b>Effect on original feature:</b> A valid C++ 2017 program that relies on the <span class='texttt'>is_<span class='shy'></span>literal_<span class='shy'></span>type</span> or
<span class='texttt'>result_<span class='shy'></span>of</span> type traits, on the <span class='texttt'>is_<span class='shy'></span>literal_<span class='shy'></span>type_<span class='shy'></span>v</span> variable template,
or on the <span class='texttt'>result_<span class='shy'></span>of_<span class='shy'></span>t</span> alias template may fail to compile<a class='hidden_link' href='#cpp17.depr-7.sentence-6'>.</a></div></div></div></div></div><div id='cpp14' class='section'><h2 ><a class='secnum' href='#cpp14' style='min-width:65pt'>C.4</a> C++ and ISO C++ 2014 <a class='abbr_ref' href='diff.cpp14'>[diff.cpp14]</a></h2><div id='cpp14.general' class='section'><h3 ><a class='secnum' href='#cpp14.general' style='min-width:80pt'>C.4.1</a> General <a class='abbr_ref' href='diff.cpp14.general'>[diff.cpp14.general]</a></h3><div class='para' id='cpp14.general-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1151'>#</a></div><div class='texpara'><div id='cpp14.general-1.sentence-1' class='sentence'><a class='index' id=':summary,compatibility_with_ISO_C++_2014'></a>Subclause <a href='#cpp14' title='C.4&emsp;C++ and ISO C++ 2014'>[diff.<span class='shy'></span>cpp14]</a> lists the differences between C++ and
ISO C++ 2014 (ISO/IEC 14882:2014, <i >Programming Languages — C++</i>),
in addition to those listed above,
by the chapters of this document<a class='hidden_link' href='#cpp14.general-1.sentence-1'>.</a></div></div></div></div><div id='cpp14.lex' class='section'><h3 ><a class='secnum' href='#cpp14.lex' style='min-width:80pt'>C.4.2</a> <a href='lex' title='5&emsp;Lexical conventions'>[lex]</a>: lexical conventions <a class='abbr_ref' href='diff.cpp14.lex'>[diff.cpp14.lex]</a></h3><div class='para' id='cpp14.lex-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.lex-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1160'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.phases'>[lex.<span class='shy'></span>phases]</a>
<a class='index' id=':trigraph_sequence'></a><br/> <div id='cpp14.lex-1.sentence-1' class='sentence'><b>Change:</b> Removal of trigraph support as a required feature<a class='hidden_link' href='#cpp14.lex-1.sentence-1'>.</a></div> <br/> <div id='cpp14.lex-1.sentence-2' class='sentence'><b>Rationale:</b> Prevents accidental uses of trigraphs in non-raw string literals and comments<a class='hidden_link' href='#cpp14.lex-1.sentence-2'>.</a></div> <br/> <div id='cpp14.lex-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code that uses trigraphs may not be valid or may have different
semantics in this revision of C++<a class='hidden_link' href='#cpp14.lex-1.sentence-3'>.</a></div> <div id='cpp14.lex-1.sentence-4' class='sentence'>Implementations may choose to
translate trigraphs as specified in C++ 2014 if they appear outside of a raw
string literal, as part of the <a class='index' id=':mapping_input_source_file_characters_to_translation_character_set'></a>implementation-defined mapping from input source file characters to
the translation character set<a class='hidden_link' href='#cpp14.lex-1.sentence-4'>.</a></div></div></div><div class='para' id='cpp14.lex-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.lex-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1174'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.ppnumber'>[lex.<span class='shy'></span>ppnumber]</a>
<br/> <div id='cpp14.lex-2.sentence-1' class='sentence'><b>Change:</b> <a href='lex.ppnumber#nt:pp-number' title='5.9&emsp;Preprocessing numbers&emsp;[lex.ppnumber]'><span id='ntref:pp-number'><span class='textsf'><i >pp-number</i></span></span></a> can contain <span class='texttt'>p</span> <a href='lex.fcon#nt:sign' title='5.13.4&emsp;Floating-point literals&emsp;[lex.fcon]'><span id='ntref:sign'><span class='textsf'><i >sign</i></span></span></a> and
<span class='texttt'>P</span> <a href='lex.fcon#nt:sign' title='5.13.4&emsp;Floating-point literals&emsp;[lex.fcon]'><span id='ntref:sign_'><span class='textsf'><i >sign</i></span></span></a><a class='hidden_link' href='#cpp14.lex-2.sentence-1'>.</a></div> <br/> <div id='cpp14.lex-2.sentence-2' class='sentence'><b>Rationale:</b> Necessary to enable <a href='lex.fcon#nt:hexadecimal-floating-point-literal' title='5.13.4&emsp;Floating-point literals&emsp;[lex.fcon]'><span id='ntref:hexadecimal-floating-point-literal'><span class='textsf'><i >hexadecimal-floating-point-literal</i></span></span></a><i >s</i><a class='hidden_link' href='#cpp14.lex-2.sentence-2'>.</a></div> <br/> <div id='cpp14.lex-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile or produce different results in
this revision of C++<a class='hidden_link' href='#cpp14.lex-2.sentence-3'>.</a></div> <div id='cpp14.lex-2.sentence-4' class='sentence'>Specifically, character sequences like <span class='texttt'><span class='literal'>0p+0</span></span>
and <span class='texttt'><span class='literal'>0e1_<span class='shy'></span>p+0</span></span> are three separate tokens each in C++ 2014, but one single token
in this revision of C++<a class='hidden_link' href='#cpp14.lex-2.sentence-4'>.</a></div> <div id='cpp14.lex-2.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='preprocessordirective'>#define</span> F<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> b <span class='preprocessordirective'>#</span><span class='preprocessordirective'>#</span> a
<span class='keyword'>int</span> b0p <span class='operator'>=</span> F<span class='parenthesis'>(</span><span class='literal'>0p+0</span><span class='parenthesis'>)</span>;  <span class='comment'>// ill-formed; equivalent to “<span class='tcode_in_codeblock'>int b0p = b0p + 0;</span>'' in C++ 2014</span>
</span></div></div></div></div><div id='cpp14.expr' class='section'><h3 ><a class='secnum' href='#cpp14.expr' style='min-width:80pt'>C.4.3</a> <a href='expr' title='7&emsp;Expressions'>[expr]</a>: expressions <a class='abbr_ref' href='diff.cpp14.expr'>[diff.cpp14.expr]</a></h3><div class='para' id='cpp14.expr-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1193'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='expr.post.incr'>[expr.<span class='shy'></span>post.<span class='shy'></span>incr]</a> and <a href='expr.pre.incr'>[expr.<span class='shy'></span>pre.<span class='shy'></span>incr]</a>
<br/> <div id='cpp14.expr-1.sentence-1' class='sentence'><b>Change:</b> Remove increment operator with <span class='texttt'><span class='keyword'>bool</span></span> operand<a class='hidden_link' href='#cpp14.expr-1.sentence-1'>.</a></div> <br/> <div id='cpp14.expr-1.sentence-2' class='sentence'><b>Rationale:</b> Obsolete feature with occasionally surprising semantics<a class='hidden_link' href='#cpp14.expr-1.sentence-2'>.</a></div> <br/> <div id='cpp14.expr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2014 expression utilizing the increment operator on
a <span class='texttt'><span class='keyword'>bool</span></span> lvalue is ill-formed in this revision of C++<a class='hidden_link' href='#cpp14.expr-1.sentence-3'>.</a></div></div></div><div class='para' id='cpp14.expr-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.expr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1202'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='expr.new'>[expr.<span class='shy'></span>new]</a> and <a href='expr.delete'>[expr.<span class='shy'></span>delete]</a>
<br/> <div id='cpp14.expr-2.sentence-1' class='sentence'><b>Change:</b> Dynamic allocation mechanism for over-aligned types<a class='hidden_link' href='#cpp14.expr-2.sentence-1'>.</a></div> <br/> <div id='cpp14.expr-2.sentence-2' class='sentence'><b>Rationale:</b> Simplify use of over-aligned types<a class='hidden_link' href='#cpp14.expr-2.sentence-2'>.</a></div> <br/> <div id='cpp14.expr-2.sentence-3' class='sentence'><b>Effect on original feature:</b> In C++ 2014 code that uses a <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression'><span class='textsf'><i >new-expression</i></span></span></a>
to allocate an object with an over-aligned class type,
where that class has no allocation functions of its own,
<span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t<span class='parenthesis'>)</span></span>
is used to allocate the memory<a class='hidden_link' href='#cpp14.expr-2.sentence-3'>.</a></div> <div id='cpp14.expr-2.sentence-4' class='sentence'>In this revision of C++,
<span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t, std<span class='operator'>&#x200b;::&#x200b;</span>align_<span class='shy'></span>val_<span class='shy'></span>t<span class='parenthesis'>)</span></span>
is used instead<a class='hidden_link' href='#cpp14.expr-2.sentence-4'>.</a></div></div></div></div><div id='cpp14.dcl.dcl' class='section'><h3 ><a class='secnum' href='#cpp14.dcl.dcl' style='min-width:80pt'>C.4.4</a> <a href='dcl.dcl' title='9&emsp;Declarations'>[dcl.<span class='shy'></span>dcl]</a>: declarations <a class='abbr_ref' href='diff.cpp14.dcl.dcl'>[diff.cpp14.dcl.dcl]</a></h3><div class='para' id='cpp14.dcl.dcl-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.dcl.dcl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1219'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.stc'>[dcl.<span class='shy'></span>stc]</a>
<a class='index' id=':register_storage_class'></a><br/> <div id='cpp14.dcl.dcl-1.sentence-1' class='sentence'><b>Change:</b> Removal of <span id=':register'><span class='texttt'><span class='keyword'>register</span></span></span> <a href='dcl.stc#nt:storage-class-specifier' title='9.2.2&emsp;Storage class specifiers&emsp;[dcl.stc]'><span id='ntref:storage-class-specifier'><span class='textsf'><i >storage-class-specifier</i></span></span></a><a class='hidden_link' href='#cpp14.dcl.dcl-1.sentence-1'>.</a></div> <br/> <div id='cpp14.dcl.dcl-1.sentence-2' class='sentence'><b>Rationale:</b> Enable repurposing of deprecated keyword in future revisions of C++<a class='hidden_link' href='#cpp14.dcl.dcl-1.sentence-2'>.</a></div> <br/> <div id='cpp14.dcl.dcl-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2014 declaration utilizing the <span id=':register_'><span class='texttt'><span class='keyword'>register</span></span></span>
<a href='dcl.stc#nt:storage-class-specifier' title='9.2.2&emsp;Storage class specifiers&emsp;[dcl.stc]'><span id='ntref:storage-class-specifier_'><span class='textsf'><i >storage-class-specifier</i></span></span></a> is ill-formed in this revision of C++<a class='hidden_link' href='#cpp14.dcl.dcl-1.sentence-3'>.</a></div> <div id='cpp14.dcl.dcl-1.sentence-4' class='sentence'>The specifier can simply be removed to retain the original meaning<a class='hidden_link' href='#cpp14.dcl.dcl-1.sentence-4'>.</a></div></div></div><div class='para' id='cpp14.dcl.dcl-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.dcl.dcl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1230'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.spec.auto'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>
<br/> <div id='cpp14.dcl.dcl-2.sentence-1' class='sentence'><b>Change:</b> <span id=':auto'><span class='texttt'><span class='keyword'>auto</span></span></span> deduction from <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list'><span class='textsf'><i >braced-init-list</i></span></span></a><a class='hidden_link' href='#cpp14.dcl.dcl-2.sentence-1'>.</a></div> <br/> <div id='cpp14.dcl.dcl-2.sentence-2' class='sentence'><b>Rationale:</b> More intuitive deduction behavior<a class='hidden_link' href='#cpp14.dcl.dcl-2.sentence-2'>.</a></div> <br/> <div id='cpp14.dcl.dcl-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile or may change meaning
in this revision of C++<a class='hidden_link' href='#cpp14.dcl.dcl-2.sentence-3'>.</a></div> <div id='cpp14.dcl.dcl-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>auto</span> x1<span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>;         <span class='comment'>// was <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;initializer_<span class='shy'></span>list&lt;int&gt;</span>, now <span class='tcode_in_codeblock'>int</span></span>
<span class='keyword'>auto</span> x2<span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span>;      <span class='comment'>// was <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;initializer_<span class='shy'></span>list&lt;int&gt;</span>, now ill-formed</span>
</span></div></div></div><div class='para' id='cpp14.dcl.dcl-3'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.dcl.dcl-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1244'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.fct'>[dcl.<span class='shy'></span>fct]</a>
<br/> <div id='cpp14.dcl.dcl-3.sentence-1' class='sentence'><b>Change:</b> Make exception specifications be part of the type system<a class='hidden_link' href='#cpp14.dcl.dcl-3.sentence-1'>.</a></div> <br/> <div id='cpp14.dcl.dcl-3.sentence-2' class='sentence'><b>Rationale:</b> Improve type-safety<a class='hidden_link' href='#cpp14.dcl.dcl-3.sentence-2'>.</a></div> <br/> <div id='cpp14.dcl.dcl-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile or change meaning in this
revision of C++<a class='hidden_link' href='#cpp14.dcl.dcl-3.sentence-3'>.</a></div> <div id='cpp14.dcl.dcl-3.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>void</span> g1<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
<span class='keyword'>void</span> g2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T <span class='operator'>*</span>, T <span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> x <span class='operator'>=</span> f<span class='parenthesis'>(</span>g1, g2<span class='parenthesis'>)</span>;              <span class='comment'>// ill-formed; previously well-formed</span>
</span></div></div></div><div class='para' id='cpp14.dcl.dcl-4'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.dcl.dcl-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1260'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.aggr'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a>
<br/> <div id='cpp14.dcl.dcl-4.sentence-1' class='sentence'><b>Change:</b> Definition of an aggregate is extended
to apply to user-defined types with base classes<a class='hidden_link' href='#cpp14.dcl.dcl-4.sentence-1'>.</a></div> <br/> <div id='cpp14.dcl.dcl-4.sentence-2' class='sentence'><b>Rationale:</b> To increase convenience of aggregate initialization<a class='hidden_link' href='#cpp14.dcl.dcl-4.sentence-2'>.</a></div> <br/> <div id='cpp14.dcl.dcl-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile or produce different results in this
revision of C++; initialization from an empty initializer list will
perform aggregate initialization instead of invoking a default constructor
for the affected types<a class='hidden_link' href='#cpp14.dcl.dcl-4.sentence-3'>.</a></div> <div id='cpp14.dcl.dcl-4.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> derived;
<span class='keyword'>struct</span> base <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>struct</span> derived;
<span class='keyword'>private</span><span class='operator'>:</span>
  base<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> derived <span class='operator'>:</span> base <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

derived d1<span class='curlybracket'>{</span><span class='curlybracket'>}</span>;       <span class='comment'>// error; the code was well-formed in C++ 2014</span>
derived d2;         <span class='comment'>// still OK</span>
</span></div></div></div></div><div id='cpp14.class' class='section'><h3 ><a class='secnum' href='#cpp14.class' style='min-width:80pt'>C.4.5</a> <a href='class' title='11&emsp;Classes'>[class]</a>: classes <a class='abbr_ref' href='diff.cpp14.class'>[diff.cpp14.class]</a></h3><div class='para' id='cpp14.class-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1287'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.inhctor.init'>[class.<span class='shy'></span>inhctor.<span class='shy'></span>init]</a>
<br/> <div id='cpp14.class-1.sentence-1' class='sentence'><b>Change:</b> Inheriting a constructor no longer injects a constructor into the derived class<a class='hidden_link' href='#cpp14.class-1.sentence-1'>.</a></div> <br/> <div id='cpp14.class-1.sentence-2' class='sentence'><b>Rationale:</b> Better interaction with other language features<a class='hidden_link' href='#cpp14.class-1.sentence-2'>.</a></div> <br/> <div id='cpp14.class-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code that uses inheriting constructors may not be valid
or may have different semantics<a class='hidden_link' href='#cpp14.class-1.sentence-3'>.</a></div> <div id='cpp14.class-1.sentence-4' class='sentence'>A <a href='namespace.udecl#nt:using-declaration' title='9.9&emsp;The using declaration&emsp;[namespace.udecl]'><span id='ntref:using-declaration'><span class='textsf'><i >using-declaration</i></span></span></a>
that names a constructor now makes the corresponding base class constructors
visible to initializations of the derived class
rather than declaring additional derived class constructors<a class='hidden_link' href='#cpp14.class-1.sentence-4'>.</a></div> <div id='cpp14.class-1.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> A<span class='parenthesis'>(</span>T, <span class='keyword'>typename</span> T<span class='operator'>::</span>type <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span>;
  A<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> A<span class='operator'>::</span>A;
  B<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
B b<span class='parenthesis'>(</span><span class='literal'>42L</span><span class='parenthesis'>)</span>;           <span class='comment'>// now calls <span class='tcode_in_codeblock'>B(int)</span>, used to call <span class='tcode_in_codeblock'>B&lt;long&gt;(long)</span>,</span>
                    <span class='comment'>// which called <span class='tcode_in_codeblock'>A(int)</span> due to substitution failure</span>
                    <span class='comment'>// in <span class='tcode_in_codeblock'>A&lt;long&gt;(long)</span>.</span>
</span></div></div></div></div><div id='cpp14.temp' class='section'><h3 ><a class='secnum' href='#cpp14.temp' style='min-width:80pt'>C.4.6</a> <a href='temp' title='13&emsp;Templates'>[temp]</a>: templates <a class='abbr_ref' href='diff.cpp14.temp'>[diff.cpp14.temp]</a></h3><div class='para' id='cpp14.temp-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.temp-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1315'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='temp.deduct.type'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>type]</a>
<br/> <div id='cpp14.temp-1.sentence-1' class='sentence'><b>Change:</b> Allowance to deduce from the type of a non-type template argument<a class='hidden_link' href='#cpp14.temp-1.sentence-1'>.</a></div> <br/> <div id='cpp14.temp-1.sentence-2' class='sentence'><b>Rationale:</b> In combination with the ability to declare
non-type template arguments with placeholder types,
allows partial specializations to decompose
from the type deduced for the non-type template argument<a class='hidden_link' href='#cpp14.temp-1.sentence-2'>.</a></div> <br/> <div id='cpp14.temp-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile
or produce different results in this revision of C++<a class='hidden_link' href='#cpp14.temp-1.sentence-3'>.</a></div> <div id='cpp14.temp-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, T N<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> foo<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>N<span class='anglebracket'>&gt;</span> <span class='operator'>*</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
<span class='keyword'>void</span> foo<span class='parenthesis'>(</span><span class='keyword'>void</span> <span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> bar<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span> <span class='operator'>*</span>p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  foo<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;           <span class='comment'>// ill-formed; previously well-formed</span>
<span class='curlybracket'>}</span>
</span></div></div></div></div><div id='cpp14.except' class='section'><h3 ><a class='secnum' href='#cpp14.except' style='min-width:80pt'>C.4.7</a> <a href='except' title='14&emsp;Exception handling'>[except]</a>: exception handling <a class='abbr_ref' href='diff.cpp14.except'>[diff.cpp14.except]</a></h3><div class='para' id='cpp14.except-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.except-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1338'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='except.spec'>[except.<span class='shy'></span>spec]</a>
<br/> <div id='cpp14.except-1.sentence-1' class='sentence'><b>Change:</b> Remove dynamic exception specifications<a class='hidden_link' href='#cpp14.except-1.sentence-1'>.</a></div> <br/> <div id='cpp14.except-1.sentence-2' class='sentence'><b>Rationale:</b> Dynamic exception specifications were a deprecated feature
that was complex and brittle in use<a class='hidden_link' href='#cpp14.except-1.sentence-2'>.</a></div> <div id='cpp14.except-1.sentence-3' class='sentence'>They interacted badly with the type system,
which became a more significant issue in this revision of C++
where (non-dynamic) exception specifications are part of the function type<a class='hidden_link' href='#cpp14.except-1.sentence-3'>.</a></div> <br/> <div id='cpp14.except-1.sentence-4' class='sentence'><b>Effect on original feature:</b> A valid C++ 2014 function declaration,
member function declaration,
function pointer declaration,
or function reference declaration,
if it has a potentially throwing dynamic exception specification,
is rejected as ill-formed in this revision of C++<a class='hidden_link' href='#cpp14.except-1.sentence-4'>.</a></div> <div id='cpp14.except-1.sentence-5' class='sentence'>Violating a non-throwing dynamic exception specification
calls <span class='texttt'>terminate</span> rather than <span class='texttt'>unexpected</span>,
and it is unspecified whether stack unwinding is performed
prior to such a call<a class='hidden_link' href='#cpp14.except-1.sentence-5'>.</a></div></div></div></div><div id='cpp14.library' class='section'><h3 ><a class='secnum' href='#cpp14.library' style='min-width:80pt'>C.4.8</a> <a href='library' title='16&emsp;Library introduction'>[library]</a>: library introduction <a class='abbr_ref' href='diff.cpp14.library'>[diff.cpp14.library]</a></h3><div class='para' id='cpp14.library-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.library-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1361'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='headers'>[headers]</a>
<br/> <div id='cpp14.library-1.sentence-1' class='sentence'><b>Change:</b> New headers<a class='hidden_link' href='#cpp14.library-1.sentence-1'>.</a></div> <br/> <div id='cpp14.library-1.sentence-2' class='sentence'><b>Rationale:</b> New functionality<a class='hidden_link' href='#cpp14.library-1.sentence-2'>.</a></div> <br/> <div id='cpp14.library-1.sentence-3' class='sentence'><b>Effect on original feature:</b> The following C++ headers are new:
<a href='any.synop#header:%3cany%3e' title='22.7.2&emsp;Header &lt;any&gt; synopsis&emsp;[any.synop]'><span id='headerref:<any>'><span class='texttt'>&lt;any&gt;</span></span></a>,
<a href='charconv.syn#header:%3ccharconv%3e' title='22.13.1&emsp;Header &lt;charconv&gt; synopsis&emsp;[charconv.syn]'><span id='headerref:<charconv>_'><span class='texttt'>&lt;charconv&gt;</span></span></a>,
<a href='execution.syn#header:%3cexecution%3e' title='22.12.2&emsp;Header &lt;execution&gt; synopsis&emsp;[execution.syn]'><span id='headerref:<execution>'><span class='texttt'>&lt;execution&gt;</span></span></a>,
<a href='fs.filesystem.syn#header:%3cfilesystem%3e' title='31.12.4&emsp;Header &lt;filesystem&gt; synopsis&emsp;[fs.filesystem.syn]'><span id='headerref:<filesystem>'><span class='texttt'>&lt;filesystem&gt;</span></span></a>,
<a href='mem.res.syn#header:%3cmemory_resource%3e' title='20.4.1&emsp;Header &lt;memory_&shy;resource&gt; synopsis&emsp;[mem.res.syn]'><span id='headerref:<memory_resource>'><span class='texttt'>&lt;memory_<span class='shy'></span>resource&gt;</span></span></a>,
<a href='optional.syn#header:%3coptional%3e' title='22.5.2&emsp;Header &lt;optional&gt; synopsis&emsp;[optional.syn]'><span id='headerref:<optional>'><span class='texttt'>&lt;optional&gt;</span></span></a>,<br/></div> <div id='cpp14.library-1.sentence-4' class='sentence'><a href='string.view.synop#header:%3cstring_view%3e' title='23.3.2&emsp;Header &lt;string_&shy;view&gt; synopsis&emsp;[string.view.synop]'><span id='headerref:<string_view>'><span class='texttt'>&lt;string_<span class='shy'></span>view&gt;</span></span></a>,
and
<a href='variant.syn#header:%3cvariant%3e' title='22.6.2&emsp;Header &lt;variant&gt; synopsis&emsp;[variant.syn]'><span id='headerref:<variant>'><span class='texttt'>&lt;variant&gt;</span></span></a><a class='hidden_link' href='#cpp14.library-1.sentence-4'>.</a></div> <div id='cpp14.library-1.sentence-5' class='sentence'>Valid C++ 2014 code that <span class='texttt'><span class='preprocessordirective'>#include</span></span>s headers with these names may be
invalid in this revision of C++<a class='hidden_link' href='#cpp14.library-1.sentence-5'>.</a></div></div></div><div class='para' id='cpp14.library-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.library-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1380'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='namespace.future'>[namespace.<span class='shy'></span>future]</a>
<br/> <div id='cpp14.library-2.sentence-1' class='sentence'><b>Change:</b> New reserved namespaces<a class='hidden_link' href='#cpp14.library-2.sentence-1'>.</a></div> <br/> <div id='cpp14.library-2.sentence-2' class='sentence'><b>Rationale:</b> Reserve namespaces for future revisions of the standard library
that might otherwise be incompatible with existing programs<a class='hidden_link' href='#cpp14.library-2.sentence-2'>.</a></div> <br/> <div id='cpp14.library-2.sentence-3' class='sentence'><b>Effect on original feature:</b> The global namespaces <span class='texttt'>std</span>
followed by an arbitrary sequence of <a href='lex.name#nt:digit' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:digit'><span class='textsf'><i >digit</i></span></span></a><i >s</i> (<a href='lex.name' title='5.10&emsp;Identifiers'>[lex.<span class='shy'></span>name]</a>)
are reserved for future standardization<a class='hidden_link' href='#cpp14.library-2.sentence-3'>.</a></div> <div id='cpp14.library-2.sentence-4' class='sentence'>Valid C++ 2014 code that uses such a top-level namespace,
e.g., <span class='texttt'>std2</span>, may be invalid in this revision of C++<a class='hidden_link' href='#cpp14.library-2.sentence-4'>.</a></div></div></div></div><div id='cpp14.utilities' class='section'><h3 ><a class='secnum' href='#cpp14.utilities' style='min-width:80pt'>C.4.9</a> <a href='utilities' title='22&emsp;General utilities library'>[utilities]</a>: general utilities library <a class='abbr_ref' href='diff.cpp14.utilities'>[diff.cpp14.utilities]</a></h3><div class='para' id='cpp14.utilities-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.utilities-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1395'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='func.wrap'>[func.<span class='shy'></span>wrap]</a>
<br/> <div id='cpp14.utilities-1.sentence-1' class='sentence'><b>Change:</b> Constructors taking allocators removed<a class='hidden_link' href='#cpp14.utilities-1.sentence-1'>.</a></div> <br/> <div id='cpp14.utilities-1.sentence-2' class='sentence'><b>Rationale:</b> No implementation consensus<a class='hidden_link' href='#cpp14.utilities-1.sentence-2'>.</a></div> <br/> <div id='cpp14.utilities-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile or may change meaning in this
revision of C++<a class='hidden_link' href='#cpp14.utilities-1.sentence-3'>.</a></div> <div id='cpp14.utilities-1.sentence-4' class='sentence'>Specifically, constructing a <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>function</span> with
an allocator is ill-formed and uses-allocator construction will not pass an
allocator to <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>function</span> constructors in this revision of C++<a class='hidden_link' href='#cpp14.utilities-1.sentence-4'>.</a></div></div></div><div class='para' id='cpp14.utilities-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.utilities-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1406'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='util.smartptr.shared'>[util.<span class='shy'></span>smartptr.<span class='shy'></span>shared]</a>
<br/> <div id='cpp14.utilities-2.sentence-1' class='sentence'><b>Change:</b> Different constraint on conversions from <span class='texttt'>unique_<span class='shy'></span>ptr</span><a class='hidden_link' href='#cpp14.utilities-2.sentence-1'>.</a></div> <br/> <div id='cpp14.utilities-2.sentence-2' class='sentence'><b>Rationale:</b> Adding array support to <span class='texttt'>shared_<span class='shy'></span>ptr</span>,
via the syntax <span class='texttt'>shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span></span> and <span class='texttt'>shared_<span class='shy'></span>ptr<span class='anglebracket'>&lt;</span>T<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#cpp14.utilities-2.sentence-2'>.</a></div> <br/> <div id='cpp14.utilities-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code may fail to compile or may change meaning in this
revision of C++<a class='hidden_link' href='#cpp14.utilities-2.sentence-3'>.</a></div> <div id='cpp14.utilities-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>memory<span class='anglebracket'>&gt;</span>
std<span class='operator'>::</span>unique_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> arr<span class='parenthesis'>(</span><span class='keyword'>new</span> <span class='keyword'>int</span><span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
std<span class='operator'>::</span>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> ptr<span class='parenthesis'>(</span>std<span class='operator'>::</span>move<span class='parenthesis'>(</span>arr<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;   <span class='comment'>// error: <span class='tcode_in_codeblock'>int(*)[]</span> is not compatible with <span class='tcode_in_codeblock'>int*</span></span>
</span></div></div></div></div><div id='cpp14.string' class='section'><h3 ><a class='secnum' href='#cpp14.string' style='min-width:80pt'>C.4.10</a> <a href='strings' title='23&emsp;Strings library'>[strings]</a>: strings library <a class='abbr_ref' href='diff.cpp14.string'>[diff.cpp14.string]</a></h3><div class='para' id='cpp14.string-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.string-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1424'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='basic.string'>[basic.<span class='shy'></span>string]</a>
<br/> <div id='cpp14.string-1.sentence-1' class='sentence'><b>Change:</b> Non-const <span class='texttt'><span class='operator'>.</span>data<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> member added<a class='hidden_link' href='#cpp14.string-1.sentence-1'>.</a></div> <br/> <div id='cpp14.string-1.sentence-2' class='sentence'><b>Rationale:</b> The lack of a non-const <span class='texttt'><span class='operator'>.</span>data<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
differed from the similar member of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>vector</span><a class='hidden_link' href='#cpp14.string-1.sentence-2'>.</a></div> <div id='cpp14.string-1.sentence-3' class='sentence'>This change regularizes behavior<a class='hidden_link' href='#cpp14.string-1.sentence-3'>.</a></div> <br/> <div id='cpp14.string-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Overloaded functions which have differing code paths
for <span class='texttt'><span class='keyword'>char</span><span class='operator'>*</span></span> and <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span></span> arguments
will execute differently
when called with a non-const string's <span class='texttt'><span class='operator'>.</span>data<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> member
in this revision of C++<a class='hidden_link' href='#cpp14.string-1.sentence-4'>.</a></div> <div id='cpp14.string-1.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>char</span> <span class='operator'>*</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='keyword'>delete</span>;
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>char</span> <span class='operator'>*</span><span class='parenthesis'>)</span>;
string s;
<span class='keyword'>int</span> x <span class='operator'>=</span> f<span class='parenthesis'>(</span>s<span class='operator'>.</span>data<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;            <span class='comment'>// ill-formed; previously well-formed</span>
</span></div></div></div></div><div id='cpp14.containers' class='section'><h3 ><a class='secnum' href='#cpp14.containers' style='min-width:80pt'>C.4.11</a> <a href='containers' title='24&emsp;Containers library'>[containers]</a>: containers library <a class='abbr_ref' href='diff.cpp14.containers'>[diff.cpp14.containers]</a></h3><div class='para' id='cpp14.containers-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.containers-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1447'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='associative.reqmts'>[associative.<span class='shy'></span>reqmts]</a>
<br/> <div id='cpp14.containers-1.sentence-1' class='sentence'><b>Change:</b> Requirements change:
<br/></div> <div id='cpp14.containers-1.sentence-2' class='sentence'><b>Rationale:</b> Increase portability, clarification of associative container requirements<a class='hidden_link' href='#cpp14.containers-1.sentence-2'>.</a></div> <br/> <div id='cpp14.containers-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code that attempts to use associative containers
having a comparison object with non-const function call operator
may fail to compile in this revision of C++<a class='hidden_link' href='#cpp14.containers-1.sentence-3'>.</a></div> <div id='cpp14.containers-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>set<span class='anglebracket'>&gt;</span>

<span class='keyword'>struct</span> compare
<span class='curlybracket'>{</span>
  <span class='keyword'>bool</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span> a, <span class='keyword'>int</span> b<span class='parenthesis'>)</span>
  <span class='curlybracket'>{</span>
    <span class='keyword'>return</span> a <span class='anglebracket'>&lt;</span> b;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> std<span class='operator'>::</span>set<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, compare<span class='anglebracket'>&gt;</span> s;
  s<span class='operator'>.</span>find<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div></div></div></div><div id='cpp14.depr' class='section'><h3 ><a class='secnum' href='#cpp14.depr' style='min-width:80pt'>C.4.12</a> <a href='depr' title='Annex D&emsp;(normative)&emsp;Compatibility features'>[depr]</a>: compatibility features <a class='abbr_ref' href='diff.cpp14.depr'>[diff.cpp14.depr]</a></h3><div class='para' id='cpp14.depr-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.depr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1477'>#</a></div><div class='texpara'><div id='cpp14.depr-1.sentence-1' class='sentence'><b>Change:</b> The class templates
<span class='texttt'>auto_<span class='shy'></span>ptr</span>,
<span class='texttt'>unary_<span class='shy'></span>function</span>, and
<span class='texttt'>binary_<span class='shy'></span>function</span>,
the function templates
<span class='texttt'>random_<span class='shy'></span>shuffle</span>,
and the function templates (and their return types)
<span class='texttt'>ptr_<span class='shy'></span>fun</span>,
<span class='texttt'>mem_<span class='shy'></span>fun</span>,
<span class='texttt'>mem_<span class='shy'></span>fun_<span class='shy'></span>ref</span>,
<span class='texttt'>bind1st</span>, and
<span class='texttt'>bind2nd</span>
are not defined<a class='hidden_link' href='#cpp14.depr-1.sentence-1'>.</a></div> <br/> <div id='cpp14.depr-1.sentence-2' class='sentence'><b>Rationale:</b> Superseded by new features<a class='hidden_link' href='#cpp14.depr-1.sentence-2'>.</a></div> <br/> <div id='cpp14.depr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2014 code that uses these class templates
and function templates may fail to compile in this revision of C++<a class='hidden_link' href='#cpp14.depr-1.sentence-3'>.</a></div></div></div><div class='para' id='cpp14.depr-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp14.depr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1498'>#</a></div><div class='texpara'><div id='cpp14.depr-2.sentence-1' class='sentence'><b>Change:</b> Remove old iostreams members [depr.ios.members]<a class='hidden_link' href='#cpp14.depr-2.sentence-1'>.</a></div> <br/> <div id='cpp14.depr-2.sentence-2' class='sentence'><b>Rationale:</b> Redundant feature for compatibility with pre-standard code
has served its time<a class='hidden_link' href='#cpp14.depr-2.sentence-2'>.</a></div> <br/> <div id='cpp14.depr-2.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2014 program using these identifiers
may be ill-formed in this revision of C++<a class='hidden_link' href='#cpp14.depr-2.sentence-3'>.</a></div></div></div></div></div><div id='cpp11' class='section'><h2 ><a class='secnum' href='#cpp11' style='min-width:65pt'>C.5</a> C++ and ISO C++ 2011 <a class='abbr_ref' href='diff.cpp11'>[diff.cpp11]</a></h2><div id='cpp11.general' class='section'><h3 ><a class='secnum' href='#cpp11.general' style='min-width:80pt'>C.5.1</a> General <a class='abbr_ref' href='diff.cpp11.general'>[diff.cpp11.general]</a></h3><div class='para' id='cpp11.general-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp11.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1511'>#</a></div><div class='texpara'><div id='cpp11.general-1.sentence-1' class='sentence'><a class='index' id=':summary,compatibility_with_ISO_C++_2011'></a>Subclause <a href='#cpp11' title='C.5&emsp;C++ and ISO C++ 2011'>[diff.<span class='shy'></span>cpp11]</a> lists the differences between C++ and
ISO C++ 2011 (ISO/IEC 14882:2011, <i >Programming Languages — C++</i>),
in addition to those listed above,
by the chapters of this document<a class='hidden_link' href='#cpp11.general-1.sentence-1'>.</a></div></div></div></div><div id='cpp11.lex' class='section'><h3 ><a class='secnum' href='#cpp11.lex' style='min-width:80pt'>C.5.2</a> <a href='lex' title='5&emsp;Lexical conventions'>[lex]</a>: lexical conventions <a class='abbr_ref' href='diff.cpp11.lex'>[diff.cpp11.lex]</a></h3><div class='para' id='cpp11.lex-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp11.lex-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1520'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.ppnumber'>[lex.<span class='shy'></span>ppnumber]</a>
<br/> <div id='cpp11.lex-1.sentence-1' class='sentence'><b>Change:</b> <a href='lex.ppnumber#nt:pp-number' title='5.9&emsp;Preprocessing numbers&emsp;[lex.ppnumber]'><span id='ntref:pp-number_'><span class='textsf'><i >pp-number</i></span></span></a> can contain one or more single quotes<a class='hidden_link' href='#cpp11.lex-1.sentence-1'>.</a></div> <br/> <div id='cpp11.lex-1.sentence-2' class='sentence'><b>Rationale:</b> Necessary to enable single quotes as digit separators<a class='hidden_link' href='#cpp11.lex-1.sentence-2'>.</a></div> <br/> <div id='cpp11.lex-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2011 code may fail to compile or may change meaning in this
revision of C++<a class='hidden_link' href='#cpp11.lex-1.sentence-3'>.</a></div> <div id='cpp11.lex-1.sentence-4' class='sentence'>For example, the following code is valid both in C++ 2011 and in
this revision of C++, but the macro invocation produces different outcomes
because the single quotes delimit a <a href='lex.ccon#nt:character-literal' title='5.13.3&emsp;Character literals&emsp;[lex.ccon]'><span id='ntref:character-literal'><span class='textsf'><i >character-literal</i></span></span></a> in C++ 2011, whereas they are digit
separators in this revision of C++<a class='hidden_link' href='#cpp11.lex-1.sentence-4'>.</a></div> <div id='cpp11.lex-1.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='preprocessordirective'>#define</span> M<span class='parenthesis'>(</span>x, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> __VA_ARGS__
<span class='keyword'>int</span> x<span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> M<span class='parenthesis'>(</span><span class='literal'>1'2</span>,<span class='literal'>3'4</span>, <span class='literal'>5</span><span class='parenthesis'>)</span> <span class='curlybracket'>}</span>;
<span class='comment'>// <span class='tcode_in_codeblock'>int x[2] = { 5 };&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> --- C++ 2011</span>
<span class='comment'>// <span class='tcode_in_codeblock'>int x[2] = { 3'4, 5 };</span> --- this revision of C++</span>
</span></div></div></div></div><div id='cpp11.basic' class='section'><h3 ><a class='secnum' href='#cpp11.basic' style='min-width:80pt'>C.5.3</a> <a href='basic' title='6&emsp;Basics'>[basic]</a>: basics <a class='abbr_ref' href='diff.cpp11.basic'>[diff.cpp11.basic]</a></h3><div class='para' id='cpp11.basic-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp11.basic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1541'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='basic.stc.dynamic.deallocation'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>deallocation]</a>
<br/> <div id='cpp11.basic-1.sentence-1' class='sentence'><b>Change:</b> New usual (non-placement) deallocator<a class='hidden_link' href='#cpp11.basic-1.sentence-1'>.</a></div> <br/> <div id='cpp11.basic-1.sentence-2' class='sentence'><b>Rationale:</b> Required for sized deallocation<a class='hidden_link' href='#cpp11.basic-1.sentence-2'>.</a></div> <br/> <div id='cpp11.basic-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2011 code can declare a global placement allocation function and
deallocation function as follows:
<span class='codeblock'><span class='keyword'>void</span><span class='operator'>*</span> <span class='keyword'>operator</span> <span class='keyword'>new</span><span class='parenthesis'>(</span>std<span class='operator'>::</span>size_t, std<span class='operator'>::</span>size_t<span class='parenthesis'>)</span>;
<span class='keyword'>void</span> <span class='keyword'>operator</span> <span class='keyword'>delete</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span>, std<span class='operator'>::</span>size_t<span class='parenthesis'>)</span> <span class='keyword'>noexcept</span>;
</span></div> <div id='cpp11.basic-1.sentence-4' class='sentence'>
In this revision of C++, however, the declaration of <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span></span>
might match a predefined usual (non-placement)
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>delete</span></span> (<a href='basic.stc.dynamic' title='6.7.5.5&emsp;Dynamic storage duration'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic]</a>)<a class='hidden_link' href='#cpp11.basic-1.sentence-4'>.</a></div> <div id='cpp11.basic-1.sentence-5' class='sentence'>If so, the
program is ill-formed, as it was for class member allocation functions and
deallocation functions (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>)<a class='hidden_link' href='#cpp11.basic-1.sentence-5'>.</a></div></div></div></div><div id='cpp11.expr' class='section'><h3 ><a class='secnum' href='#cpp11.expr' style='min-width:80pt'>C.5.4</a> <a href='expr' title='7&emsp;Expressions'>[expr]</a>: expressions <a class='abbr_ref' href='diff.cpp11.expr'>[diff.cpp11.expr]</a></h3><div class='para' id='cpp11.expr-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp11.expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1561'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='expr.cond'>[expr.<span class='shy'></span>cond]</a>
<br/> <div id='cpp11.expr-1.sentence-1' class='sentence'><b>Change:</b> A conditional expression with a throw expression as its second or third
operand keeps the type and value category of the other operand<a class='hidden_link' href='#cpp11.expr-1.sentence-1'>.</a></div> <br/> <div id='cpp11.expr-1.sentence-2' class='sentence'><b>Rationale:</b> Formerly mandated conversions (<a href='conv.lval' title='7.3.2&emsp;Lvalue-to-rvalue conversion&emsp;[conv.lval]'>lvalue-to-rvalue</a>,
<a href='conv.array' title='7.3.3&emsp;Array-to-pointer conversion&emsp;[conv.array]'>array-to-pointer</a>, and <a href='conv.func' title='7.3.4&emsp;Function-to-pointer conversion&emsp;[conv.func]'>function-to-pointer</a>
standard conversions), especially the creation of the temporary due to
lvalue-to-rvalue conversion, were considered gratuitous and surprising<a class='hidden_link' href='#cpp11.expr-1.sentence-2'>.</a></div> <br/> <div id='cpp11.expr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2011 code that relies on the conversions may behave differently
in this revision of C++<a class='hidden_link' href='#cpp11.expr-1.sentence-3'>.</a></div> <div id='cpp11.expr-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>1</span>;
  <span class='keyword'>void</span> mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> x <span class='operator'>=</span> <span class='literal'>2</span>; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>bool</span> cond<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  S s;
  <span class='parenthesis'>(</span>cond <span class='operator'>?</span> s <span class='operator'>:</span> <span class='keyword'>throw</span> <span class='literal'>0</span><span class='parenthesis'>)</span><span class='operator'>.</span>mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>return</span> s<span class='operator'>.</span>x;
<span class='curlybracket'>}</span>
</span></div> <div id='cpp11.expr-1.sentence-5' class='sentence'>
In C++ 2011, <span class='texttt'>f<span class='parenthesis'>(</span><span class='literal'>true</span><span class='parenthesis'>)</span></span> returns <span class='texttt'><span class='literal'>1</span></span><a class='hidden_link' href='#cpp11.expr-1.sentence-5'>.</a></div> <div id='cpp11.expr-1.sentence-6' class='sentence'>In this revision of C++,
it returns <span class='texttt'><span class='literal'>2</span></span><a class='hidden_link' href='#cpp11.expr-1.sentence-6'>.</a></div> <span class='codeblock'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='literal'>true</span> <span class='operator'>?</span> <span class='literal'>""</span> <span class='operator'>:</span> <span class='keyword'>throw</span> <span class='literal'>0</span><span class='parenthesis'>)</span>
</span> <div id='cpp11.expr-1.sentence-7' class='sentence'>
In C++ 2011, the expression yields <span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#cpp11.expr-1.sentence-7'>.</a></div> <div id='cpp11.expr-1.sentence-8' class='sentence'>In this
revision of C++, it yields <span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#cpp11.expr-1.sentence-8'>.</a></div></div></div></div><div id='cpp11.dcl.dcl' class='section'><h3 ><a class='secnum' href='#cpp11.dcl.dcl' style='min-width:80pt'>C.5.5</a> <a href='dcl.dcl' title='9&emsp;Declarations'>[dcl.<span class='shy'></span>dcl]</a>: declarations <a class='abbr_ref' href='diff.cpp11.dcl.dcl'>[diff.cpp11.dcl.dcl]</a></h3><div class='para' id='cpp11.dcl.dcl-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp11.dcl.dcl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1595'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.constexpr'>[dcl.<span class='shy'></span>constexpr]</a>
<br/> <div id='cpp11.dcl.dcl-1.sentence-1' class='sentence'><b>Change:</b> <span id=':constexpr_'><span class='texttt'><span class='keyword'>constexpr</span></span></span> non-static member functions are not implicitly
<span id=':const'><span class='texttt'><span class='keyword'>const</span></span></span> member functions<a class='hidden_link' href='#cpp11.dcl.dcl-1.sentence-1'>.</a></div> <br/> <div id='cpp11.dcl.dcl-1.sentence-2' class='sentence'><b>Rationale:</b> Necessary to allow <span id=':constexpr__'><span class='texttt'><span class='keyword'>constexpr</span></span></span> member functions to mutate
the object<a class='hidden_link' href='#cpp11.dcl.dcl-1.sentence-2'>.</a></div> <br/> <div id='cpp11.dcl.dcl-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2011 code may fail to compile in this revision of C++<a class='hidden_link' href='#cpp11.dcl.dcl-1.sentence-3'>.</a></div> <div id='cpp11.dcl.dcl-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>constexpr</span> <span class='keyword'>const</span> <span class='keyword'>int</span> <span class='operator'>&amp;</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>int</span> <span class='operator'>&amp;</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
</span></div> <div id='cpp11.dcl.dcl-1.sentence-5' class='sentence'>
This code is valid in C++ 2011
but invalid in this revision of C++ because it declares the same member
function twice with different return types<a class='hidden_link' href='#cpp11.dcl.dcl-1.sentence-5'>.</a></div></div></div><div class='para' id='cpp11.dcl.dcl-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp11.dcl.dcl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1615'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.aggr'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a>
<br/> <div id='cpp11.dcl.dcl-2.sentence-1' class='sentence'><b>Change:</b> Classes with default member initializers can be aggregates<a class='hidden_link' href='#cpp11.dcl.dcl-2.sentence-1'>.</a></div> <br/> <div id='cpp11.dcl.dcl-2.sentence-2' class='sentence'><b>Rationale:</b> Necessary to allow default member initializers to be used
by aggregate initialization<a class='hidden_link' href='#cpp11.dcl.dcl-2.sentence-2'>.</a></div> <br/> <div id='cpp11.dcl.dcl-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2011 code may fail to compile or may change meaning in this revision of C++<a class='hidden_link' href='#cpp11.dcl.dcl-2.sentence-3'>.</a></div> <div id='cpp11.dcl.dcl-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>          <span class='comment'>// Aggregate in C++ 2014 onwards.</span>
  <span class='keyword'>int</span> m <span class='operator'>=</span> <span class='literal'>1</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>operator</span> S<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
X a<span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
S b<span class='curlybracket'>{</span>a<span class='curlybracket'>}</span>;             <span class='comment'>// uses copy constructor in C++ 2011,</span>
                    <span class='comment'>// performs aggregate initialization in this revision of C++</span>
</span></div></div></div></div><div id='cpp11.library' class='section'><h3 ><a class='secnum' href='#cpp11.library' style='min-width:80pt'>C.5.6</a> <a href='library' title='16&emsp;Library introduction'>[library]</a>: library introduction <a class='abbr_ref' href='diff.cpp11.library'>[diff.cpp11.library]</a></h3><div class='para' id='cpp11.library-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp11.library-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1639'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='headers'>[headers]</a>
<br/> <div id='cpp11.library-1.sentence-1' class='sentence'><b>Change:</b> New header<a class='hidden_link' href='#cpp11.library-1.sentence-1'>.</a></div> <br/> <div id='cpp11.library-1.sentence-2' class='sentence'><b>Rationale:</b> New functionality<a class='hidden_link' href='#cpp11.library-1.sentence-2'>.</a></div> <br/> <div id='cpp11.library-1.sentence-3' class='sentence'><b>Effect on original feature:</b> The C++ header <a href='shared.mutex.syn#header:%3cshared_mutex%3e' title='33.6.3&emsp;Header &lt;shared_&shy;mutex&gt; synopsis&emsp;[shared.mutex.syn]'><span id='headerref:<shared_mutex>'><span class='texttt'>&lt;shared_<span class='shy'></span>mutex&gt;</span></span></a> is new<a class='hidden_link' href='#cpp11.library-1.sentence-3'>.</a></div> <div id='cpp11.library-1.sentence-4' class='sentence'>Valid C++ 2011 code that <span class='texttt'><span class='preprocessordirective'>#include</span></span>s a header with that name may be
invalid in this revision of C++<a class='hidden_link' href='#cpp11.library-1.sentence-4'>.</a></div></div></div></div><div id='cpp11.input.output' class='section'><h3 ><a class='secnum' href='#cpp11.input.output' style='min-width:80pt'>C.5.7</a> <a href='input.output' title='31&emsp;Input/output library'>[input.<span class='shy'></span>output]</a>: input/output library <a class='abbr_ref' href='diff.cpp11.input.output'>[diff.cpp11.input.output]</a></h3><div class='para' id='cpp11.input.output-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp11.input.output-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1651'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='c.files'>[c.<span class='shy'></span>files]</a>
<br/> <div id='cpp11.input.output-1.sentence-1' class='sentence'><b>Change:</b> <span class='texttt'>gets</span> is not defined<a class='hidden_link' href='#cpp11.input.output-1.sentence-1'>.</a></div> <br/> <div id='cpp11.input.output-1.sentence-2' class='sentence'><b>Rationale:</b> Use of <span class='texttt'>gets</span> is considered dangerous<a class='hidden_link' href='#cpp11.input.output-1.sentence-2'>.</a></div> <br/> <div id='cpp11.input.output-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2011 code that uses the <span class='texttt'>gets</span> function may fail to compile
in this revision of C++<a class='hidden_link' href='#cpp11.input.output-1.sentence-3'>.</a></div></div></div></div></div><div id='cpp03' class='section'><h2 ><a class='secnum' href='#cpp03' style='min-width:65pt'>C.6</a> C++ and ISO C++ 2003 <a class='abbr_ref' href='diff.cpp03'>[diff.cpp03]</a></h2><div id='cpp03.general' class='section'><h3 ><a class='secnum' href='#cpp03.general' style='min-width:80pt'>C.6.1</a> General <a class='abbr_ref' href='diff.cpp03.general'>[diff.cpp03.general]</a></h3><div class='para' id='cpp03.general-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1664'>#</a></div><div class='texpara'><div id='cpp03.general-1.sentence-1' class='sentence'><a class='index' id=':summary,compatibility_with_ISO_C++_2003'></a>Subclause <a href='#cpp03' title='C.6&emsp;C++ and ISO C++ 2003'>[diff.<span class='shy'></span>cpp03]</a> lists the differences between C++ and
ISO C++ 2003 (ISO/IEC 14882:2003, <i >Programming Languages — C++</i>),
in addition to those listed above,
by the chapters of this document<a class='hidden_link' href='#cpp03.general-1.sentence-1'>.</a></div></div></div></div><div id='cpp03.lex' class='section'><h3 ><a class='secnum' href='#cpp03.lex' style='min-width:80pt'>C.6.2</a> <a href='lex' title='5&emsp;Lexical conventions'>[lex]</a>: lexical conventions <a class='abbr_ref' href='diff.cpp03.lex'>[diff.cpp03.lex]</a></h3><div class='para' id='cpp03.lex-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.lex-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1673'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.pptoken'>[lex.<span class='shy'></span>pptoken]</a>
<br/> <div id='cpp03.lex-1.sentence-1' class='sentence'><b>Change:</b> New kinds of <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal__'><span class='textsf'><i >string-literal</i></span></span></a><i >s</i><a class='hidden_link' href='#cpp03.lex-1.sentence-1'>.</a></div> <br/> <div id='cpp03.lex-1.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#cpp03.lex-1.sentence-2'>.</a></div> <br/> <div id='cpp03.lex-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may fail to compile or produce different results in
this revision of C++<a class='hidden_link' href='#cpp03.lex-1.sentence-3'>.</a></div> <div id='cpp03.lex-1.sentence-4' class='sentence'>Specifically, macros named <span class='texttt'>R</span>, <span class='texttt'>u8</span>,
<span class='texttt'>u8R</span>, <span class='texttt'>u</span>, <span class='texttt'>uR</span>, <span class='texttt'>U</span>, <span class='texttt'>UR</span>, or <span class='texttt'>LR</span> will
not be expanded when adjacent to a <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal___'><span class='textsf'><i >string-literal</i></span></span></a> but will be interpreted as
part of the <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal____'><span class='textsf'><i >string-literal</i></span></span></a><a class='hidden_link' href='#cpp03.lex-1.sentence-4'>.</a></div> <div id='cpp03.lex-1.sentence-5' class='sentence'>For example:
<span class='codeblock'><span class='preprocessordirective'>#define</span> u8 <span class='literal'>"abc"</span>
<span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> s <span class='operator'>=</span> <span class='literal'>u8"def"</span>;        <span class='comment'>// Previously <span class='tcode_in_codeblock'>"abcdef"</span>, now <span class='tcode_in_codeblock'>"def"</span></span>
</span></div></div></div><div class='para' id='cpp03.lex-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.lex-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1690'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.pptoken'>[lex.<span class='shy'></span>pptoken]</a>
<br/> <div id='cpp03.lex-2.sentence-1' class='sentence'><b>Change:</b> User-defined literal string support<a class='hidden_link' href='#cpp03.lex-2.sentence-1'>.</a></div> <br/> <div id='cpp03.lex-2.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#cpp03.lex-2.sentence-2'>.</a></div> <br/> <div id='cpp03.lex-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may fail to compile or produce different results in
this revision of C++<a class='hidden_link' href='#cpp03.lex-2.sentence-3'>.</a></div> <div id='cpp03.lex-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='preprocessordirective'>#define</span> _x <span class='literal'>"there"</span>
<span class='literal'>"hello"_x</span>           <span class='comment'>// #1</span>
</span></div></div><div class='texpara'><div id='cpp03.lex-2.sentence-5' class='sentence'>Previously, #1 would have consisted of two separate preprocessing tokens and
the macro <span class='texttt'>_<span class='shy'></span>x</span> would have been expanded<a class='hidden_link' href='#cpp03.lex-2.sentence-5'>.</a></div> <div id='cpp03.lex-2.sentence-6' class='sentence'>In this revision of C++,
#1 consists of a single preprocessing token, so the macro is not expanded<a class='hidden_link' href='#cpp03.lex-2.sentence-6'>.</a></div></div></div><div class='para' id='cpp03.lex-3'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.lex-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1708'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.key'>[lex.<span class='shy'></span>key]</a>
<br/> <div id='cpp03.lex-3.sentence-1' class='sentence'><b>Change:</b> New keywords<a class='hidden_link' href='#cpp03.lex-3.sentence-1'>.</a></div> <br/> <div id='cpp03.lex-3.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#cpp03.lex-3.sentence-2'>.</a></div> <br/> <div id='cpp03.lex-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Added to Table <a href='lex.key#tab:lex.key' title='Table 5: Keywords'>5</a>, the following identifiers are new keywords:
<span class='texttt'><span class='keyword'>alignas</span></span>,
<span class='texttt'><span class='keyword'>alignof</span></span>,
<span id=':char16_t___'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span>,
<span id=':char32_t___'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span>,
<span id=':constexpr___'><span class='texttt'><span class='keyword'>constexpr</span></span></span>,
<span id=':decltype_'><span class='texttt'><span class='keyword'>decltype</span></span></span>,
<span id=':noexcept__'><span class='texttt'><span class='keyword'>noexcept</span></span></span>,
<span id=':nullptr'><span class='texttt'><span class='literal'>nullptr</span></span></span>,
<span id=':static_assert'><span class='texttt'><span class='keyword'>static_<span class='shy'></span>assert</span></span></span>,
and
<span id=':thread_local'><span class='texttt'><span class='keyword'>thread_<span class='shy'></span>local</span></span></span><a class='hidden_link' href='#cpp03.lex-3.sentence-3'>.</a></div> <div id='cpp03.lex-3.sentence-4' class='sentence'>Valid C++ 2003 code using these identifiers is invalid in this revision of C++<a class='hidden_link' href='#cpp03.lex-3.sentence-4'>.</a></div></div></div><div class='para' id='cpp03.lex-4'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.lex-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1728'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.icon'>[lex.<span class='shy'></span>icon]</a>
<br/> <div id='cpp03.lex-4.sentence-1' class='sentence'><b>Change:</b> Type of integer literals<a class='hidden_link' href='#cpp03.lex-4.sentence-1'>.</a></div> <br/> <div id='cpp03.lex-4.sentence-2' class='sentence'><b>Rationale:</b> C99 compatibility<a class='hidden_link' href='#cpp03.lex-4.sentence-2'>.</a></div> <br/> <div id='cpp03.lex-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Certain integer literals larger than can be represented by <span class='texttt'><span class='keyword'>long</span></span> could
change from an unsigned integer type to <span class='texttt'><span class='keyword'>signed</span> <span class='keyword'>long</span> <span class='keyword'>long</span></span><a class='hidden_link' href='#cpp03.lex-4.sentence-3'>.</a></div></div></div></div><div id='cpp03.expr' class='section'><h3 ><a class='secnum' href='#cpp03.expr' style='min-width:80pt'>C.6.3</a> <a href='expr' title='7&emsp;Expressions'>[expr]</a>: expressions <a class='abbr_ref' href='diff.cpp03.expr'>[diff.cpp03.expr]</a></h3><div class='para' id='cpp03.expr-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1739'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='conv.ptr'>[conv.<span class='shy'></span>ptr]</a>
<br/> <div id='cpp03.expr-1.sentence-1' class='sentence'><b>Change:</b> Only literals are integer null pointer constants<a class='hidden_link' href='#cpp03.expr-1.sentence-1'>.</a></div> <br/> <div id='cpp03.expr-1.sentence-2' class='sentence'><b>Rationale:</b> Removing surprising interactions with templates and constant
expressions<a class='hidden_link' href='#cpp03.expr-1.sentence-2'>.</a></div> <br/> <div id='cpp03.expr-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may fail to compile or produce different results in
this revision of C++<a class='hidden_link' href='#cpp03.expr-1.sentence-3'>.</a></div> <div id='cpp03.expr-1.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>void</span> <span class='operator'>*</span><span class='parenthesis'>)</span>;     <span class='comment'>// #1</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;        <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='operator'>*</span>N<span class='parenthesis'>)</span>;           <span class='comment'>// calls #2; used to call #1</span>
<span class='curlybracket'>}</span>
</span></div></div></div><div class='para' id='cpp03.expr-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.expr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1757'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='expr.mul'>[expr.<span class='shy'></span>mul]</a>
<br/> <div id='cpp03.expr-2.sentence-1' class='sentence'><b>Change:</b> Specify rounding for results of integer <span class='texttt'><span class='operator'>/</span></span> and <span class='texttt'><span class='operator'>%</span></span><a class='hidden_link' href='#cpp03.expr-2.sentence-1'>.</a></div> <br/> <div id='cpp03.expr-2.sentence-2' class='sentence'><b>Rationale:</b> Increase portability, C99 compatibility<a class='hidden_link' href='#cpp03.expr-2.sentence-2'>.</a></div> <br/> <div id='cpp03.expr-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that uses integer division rounds the result toward 0 or
toward negative infinity, whereas this revision of C++ always rounds
the result toward 0<a class='hidden_link' href='#cpp03.expr-2.sentence-3'>.</a></div></div></div><div class='para' id='cpp03.expr-3'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.expr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1767'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='expr.log.and'>[expr.<span class='shy'></span>log.<span class='shy'></span>and]</a>
<br/> <div id='cpp03.expr-3.sentence-1' class='sentence'><b>Change:</b> <span class='texttt'><span class='operator'>&amp;</span><span class='operator'>&amp;</span></span> is valid in a <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name'><span class='textsf'><i >type-name</i></span></span></a><a class='hidden_link' href='#cpp03.expr-3.sentence-1'>.</a></div> <br/> <div id='cpp03.expr-3.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#cpp03.expr-3.sentence-2'>.</a></div> <br/> <div id='cpp03.expr-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may fail to compile or produce different results in
this revision of C++<a class='hidden_link' href='#cpp03.expr-3.sentence-3'>.</a></div> <div id='cpp03.expr-3.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>bool</span> b1 <span class='operator'>=</span> <span class='keyword'>new</span> <span class='keyword'>int</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='literal'>false</span>;             <span class='comment'>// previously <span class='tcode_in_codeblock'>false</span>, now ill-formed</span>
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>bool</span> b2 <span class='operator'>=</span> <span class='operator'>&amp;</span>S<span class='operator'>::</span><span class='keyword'>operator</span> <span class='keyword'>int</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='literal'>false</span>;    <span class='comment'>// previously <span class='tcode_in_codeblock'>false</span>, now ill-formed</span>
</span></div></div></div></div><div id='cpp03.dcl.dcl' class='section'><h3 ><a class='secnum' href='#cpp03.dcl.dcl' style='min-width:80pt'>C.6.4</a> <a href='dcl.dcl' title='9&emsp;Declarations'>[dcl.<span class='shy'></span>dcl]</a>: declarations <a class='abbr_ref' href='diff.cpp03.dcl.dcl'>[diff.cpp03.dcl.dcl]</a></h3><div class='para' id='cpp03.dcl.dcl-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.dcl.dcl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1784'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.spec'>[dcl.<span class='shy'></span>spec]</a>
<br/> <div id='cpp03.dcl.dcl-1.sentence-1' class='sentence'><b>Change:</b> Remove <span id=':auto_'><span class='texttt'><span class='keyword'>auto</span></span></span> as a storage class specifier<a class='hidden_link' href='#cpp03.dcl.dcl-1.sentence-1'>.</a></div> <br/> <div id='cpp03.dcl.dcl-1.sentence-2' class='sentence'><b>Rationale:</b> New feature<a class='hidden_link' href='#cpp03.dcl.dcl-1.sentence-2'>.</a></div> <br/> <div id='cpp03.dcl.dcl-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that uses the keyword <span id=':auto__'><span class='texttt'><span class='keyword'>auto</span></span></span> as a storage class
specifier
may be invalid in this revision of C++<a class='hidden_link' href='#cpp03.dcl.dcl-1.sentence-3'>.</a></div> <div id='cpp03.dcl.dcl-1.sentence-4' class='sentence'>In this revision of C++,
<span id=':auto___'><span class='texttt'><span class='keyword'>auto</span></span></span> indicates that the type of a variable is to be deduced
from its initializer expression<a class='hidden_link' href='#cpp03.dcl.dcl-1.sentence-4'>.</a></div></div></div><div class='para' id='cpp03.dcl.dcl-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.dcl.dcl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1797'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.list'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>
<br/> <div id='cpp03.dcl.dcl-2.sentence-1' class='sentence'><b>Change:</b> Narrowing restrictions in aggregate initializers<a class='hidden_link' href='#cpp03.dcl.dcl-2.sentence-1'>.</a></div> <br/> <div id='cpp03.dcl.dcl-2.sentence-2' class='sentence'><b>Rationale:</b> Catches bugs<a class='hidden_link' href='#cpp03.dcl.dcl-2.sentence-2'>.</a></div> <br/> <div id='cpp03.dcl.dcl-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may fail to compile in this revision of C++<a class='hidden_link' href='#cpp03.dcl.dcl-2.sentence-3'>.</a></div> <div id='cpp03.dcl.dcl-2.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>int</span> x<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>2.0</span> <span class='curlybracket'>}</span>;
</span></div> <div id='cpp03.dcl.dcl-2.sentence-5' class='sentence'>
This code is valid in C++ 2003 but invalid in this
revision of C++ because <span class='texttt'><span class='keyword'>double</span></span> to <span class='texttt'><span class='keyword'>int</span></span> is a narrowing
conversion<a class='hidden_link' href='#cpp03.dcl.dcl-2.sentence-5'>.</a></div></div></div></div><div id='cpp03.class' class='section'><h3 ><a class='secnum' href='#cpp03.class' style='min-width:80pt'>C.6.5</a> <a href='class' title='11&emsp;Classes'>[class]</a>: classes <a class='abbr_ref' href='diff.cpp03.class'>[diff.cpp03.class]</a></h3><div class='para' id='cpp03.class-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1814'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='class.default.ctor'>[class.<span class='shy'></span>default.<span class='shy'></span>ctor]</a>, <a href='class.dtor'>[class.<span class='shy'></span>dtor]</a>, <a href='class.copy.ctor'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>, and <a href='class.copy.assign'>[class.<span class='shy'></span>copy.<span class='shy'></span>assign]</a>
<br/> <div id='cpp03.class-1.sentence-1' class='sentence'><b>Change:</b> Implicitly-declared special member functions are defined as deleted
when the implicit definition would have been ill-formed<a class='hidden_link' href='#cpp03.class-1.sentence-1'>.</a></div> <br/> <div id='cpp03.class-1.sentence-2' class='sentence'><b>Rationale:</b> Improves template argument deduction failure<a class='hidden_link' href='#cpp03.class-1.sentence-2'>.</a></div> <br/> <div id='cpp03.class-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2003 program that uses one of these special member functions in a
context where the definition is not required (e.g., in an expression that is
not potentially evaluated) becomes ill-formed<a class='hidden_link' href='#cpp03.class-1.sentence-3'>.</a></div></div></div><div class='para' id='cpp03.class-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.class-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1825'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.dtor'>[class.<span class='shy'></span>dtor]</a>
<br/> <div id='cpp03.class-2.sentence-1' class='sentence'><b>Change:</b> User-declared destructors have an implicit exception specification<a class='hidden_link' href='#cpp03.class-2.sentence-1'>.</a></div> <br/> <div id='cpp03.class-2.sentence-2' class='sentence'><b>Rationale:</b> Clarification of destructor requirements<a class='hidden_link' href='#cpp03.class-2.sentence-2'>.</a></div> <br/> <div id='cpp03.class-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may execute differently in this revision of C++<a class='hidden_link' href='#cpp03.class-2.sentence-3'>.</a></div> <div id='cpp03.class-2.sentence-4' class='sentence'>In
particular, destructors that throw exceptions will call <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>terminate</span>
(without calling <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>unexpected</span>) if their exception specification is
non-throwing<a class='hidden_link' href='#cpp03.class-2.sentence-4'>.</a></div></div></div></div><div id='cpp03.temp' class='section'><h3 ><a class='secnum' href='#cpp03.temp' style='min-width:80pt'>C.6.6</a> <a href='temp' title='13&emsp;Templates'>[temp]</a>: templates <a class='abbr_ref' href='diff.cpp03.temp'>[diff.cpp03.temp]</a></h3><div class='para' id='cpp03.temp-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.temp-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1838'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='temp.param'>[temp.<span class='shy'></span>param]</a>
<br/> <div id='cpp03.temp-1.sentence-1' class='sentence'><b>Change:</b> Repurpose <span id=':export'><span class='texttt'><span class='keyword'>export</span></span></span> for modules (<a href='module' title='10&emsp;Modules'>[module]</a>, <a href='cpp.module' title='15.4&emsp;Module directive'>[cpp.<span class='shy'></span>module]</a>, <a href='cpp.import' title='15.5&emsp;Header unit importation'>[cpp.<span class='shy'></span>import]</a>)<a class='hidden_link' href='#cpp03.temp-1.sentence-1'>.</a></div> <br/> <div id='cpp03.temp-1.sentence-2' class='sentence'><b>Rationale:</b> No implementation consensus for the C++ 2003 meaning of <span id=':export_'><span class='texttt'><span class='keyword'>export</span></span></span><a class='hidden_link' href='#cpp03.temp-1.sentence-2'>.</a></div> <br/> <div id='cpp03.temp-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2003 program containing <span class='texttt'><span class='keyword'>export</span></span> is ill-formed in this
revision of C++<a class='hidden_link' href='#cpp03.temp-1.sentence-3'>.</a></div></div></div><div class='para' id='cpp03.temp-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.temp-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1847'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='temp.arg'>[temp.<span class='shy'></span>arg]</a>
<br/> <div id='cpp03.temp-2.sentence-1' class='sentence'><b>Change:</b> Remove whitespace requirement for nested closing template right angle
brackets<a class='hidden_link' href='#cpp03.temp-2.sentence-1'>.</a></div> <br/> <div id='cpp03.temp-2.sentence-2' class='sentence'><b>Rationale:</b> Considered a persistent but minor annoyance<a class='hidden_link' href='#cpp03.temp-2.sentence-2'>.</a></div> <div id='cpp03.temp-2.sentence-3' class='sentence'>Template aliases
representing non-class types would exacerbate whitespace issues<a class='hidden_link' href='#cpp03.temp-2.sentence-3'>.</a></div> <br/> <div id='cpp03.temp-2.sentence-4' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined expression<a class='hidden_link' href='#cpp03.temp-2.sentence-4'>.</a></div> <div id='cpp03.temp-2.sentence-5' class='sentence'>A valid C++ 2003 expression
containing a right angle bracket (“<span class='texttt'><span class='anglebracket'>&gt;</span></span>”) followed immediately by
another right angle bracket may now be treated as closing two templates<a class='hidden_link' href='#cpp03.temp-2.sentence-5'>.</a></div> <div id='cpp03.temp-2.sentence-6' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
X<span class='anglebracket'>&lt;</span> Y<span class='anglebracket'>&lt;</span> <span class='literal'>1</span> <span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='literal'>2</span> <span class='anglebracket'>&gt;</span> <span class='anglebracket'>&gt;</span> x;
</span></div> <div id='cpp03.temp-2.sentence-7' class='sentence'>
This code is valid in C++ 2003 because “<span class='texttt'><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span></span>”
is a right-shift operator, but invalid in this revision of C++ because
“<span class='texttt'><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span></span>” closes two templates<a class='hidden_link' href='#cpp03.temp-2.sentence-7'>.</a></div></div></div><div class='para' id='cpp03.temp-3'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.temp-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1868'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='temp.dep.candidate'>[temp.<span class='shy'></span>dep.<span class='shy'></span>candidate]</a>
<br/> <div id='cpp03.temp-3.sentence-1' class='sentence'><b>Change:</b> Allow dependent calls of functions with internal linkage<a class='hidden_link' href='#cpp03.temp-3.sentence-1'>.</a></div> <br/> <div id='cpp03.temp-3.sentence-2' class='sentence'><b>Rationale:</b> Overly constrained, simplify overload resolution rules<a class='hidden_link' href='#cpp03.temp-3.sentence-2'>.</a></div> <br/> <div id='cpp03.temp-3.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2003 program can get a different result in this
revision of C++<a class='hidden_link' href='#cpp03.temp-3.sentence-3'>.</a></div></div></div></div><div id='cpp03.library' class='section'><h3 ><a class='secnum' href='#cpp03.library' style='min-width:80pt'>C.6.7</a> <a href='library' title='16&emsp;Library introduction'>[library]</a>: library introduction <a class='abbr_ref' href='diff.cpp03.library'>[diff.cpp03.library]</a></h3><div class='para' id='cpp03.library-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.library-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1879'>#</a></div><div class='texpara'><div id='cpp03.library-1.sentence-1' class='sentence'><b>Affected:</b> <a href='library' title='16&emsp;Library introduction'>[library]</a> – <a href='thread' title='33&emsp;Concurrency support library'>[thread]</a>
<br/></div> <div id='cpp03.library-1.sentence-2' class='sentence'><b>Change:</b> New reserved identifiers<a class='hidden_link' href='#cpp03.library-1.sentence-2'>.</a></div> <br/> <div id='cpp03.library-1.sentence-3' class='sentence'><b>Rationale:</b> Required by new features<a class='hidden_link' href='#cpp03.library-1.sentence-3'>.</a></div> <br/> <div id='cpp03.library-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that uses any identifiers added to the C++ standard
library by later revisions of C++ may fail to compile or produce different
results in this revision of C++<a class='hidden_link' href='#cpp03.library-1.sentence-4'>.</a></div> <div id='cpp03.library-1.sentence-5' class='sentence'>A comprehensive list of identifiers used
by the C++ standard library can be found in the Index of Library Names in this
document<a class='hidden_link' href='#cpp03.library-1.sentence-5'>.</a></div></div></div><div class='para' id='cpp03.library-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.library-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1892'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='headers'>[headers]</a>
<br/> <div id='cpp03.library-2.sentence-1' class='sentence'><b>Change:</b> New headers<a class='hidden_link' href='#cpp03.library-2.sentence-1'>.</a></div> <br/> <div id='cpp03.library-2.sentence-2' class='sentence'><b>Rationale:</b> New functionality<a class='hidden_link' href='#cpp03.library-2.sentence-2'>.</a></div> <br/> <div id='cpp03.library-2.sentence-3' class='sentence'><b>Effect on original feature:</b> The following C++ headers are new:
<a href='array.syn#header:%3carray%3e' title='24.3.2&emsp;Header &lt;array&gt; synopsis&emsp;[array.syn]'><span id='headerref:<array>'><span class='texttt'>&lt;array&gt;</span></span></a>,
<a href='atomics.syn#header:%3catomic%3e' title='33.5.2&emsp;Header &lt;atomic&gt; synopsis&emsp;[atomics.syn]'><span id='headerref:<atomic>'><span class='texttt'>&lt;atomic&gt;</span></span></a>,
<a href='time.syn#header:%3cchrono%3e' title='29.2&emsp;Header &lt;chrono&gt; synopsis&emsp;[time.syn]'><span id='headerref:<chrono>'><span class='texttt'>&lt;chrono&gt;</span></span></a>,
<a href='depr.locale.stdcvt.general#header:%3ccodecvt%3e' title='D.26.1&emsp;General&emsp;[depr.locale.stdcvt.general]'><span id='headerref:<codecvt>'><span class='texttt'>&lt;codecvt&gt;</span></span></a>,
<a href='condition.variable.syn#header:%3ccondition_variable%3e' title='33.7.2&emsp;Header &lt;condition_&shy;variable&gt; synopsis&emsp;[condition.variable.syn]'><span id='headerref:<condition_variable>'><span class='texttt'>&lt;condition_<span class='shy'></span>variable&gt;</span></span></a>,
<a href='forward.list.syn#header:%3cforward_list%3e' title='24.3.4&emsp;Header &lt;forward_&shy;list&gt; synopsis&emsp;[forward.list.syn]'><span id='headerref:<forward_list>'><span class='texttt'>&lt;forward_<span class='shy'></span>list&gt;</span></span></a>,
<a href='future.syn#header:%3cfuture%3e' title='33.10.2&emsp;Header &lt;future&gt; synopsis&emsp;[future.syn]'><span id='headerref:<future>'><span class='texttt'>&lt;future&gt;</span></span></a>,
<a href='support.initlist.general#header:%3cinitializer_list%3e' title='17.10.1&emsp;General&emsp;[support.initlist.general]'><span id='headerref:<initializer_list>'><span class='texttt'>&lt;initializer_<span class='shy'></span>list&gt;</span></span></a>,
<a href='mutex.syn#header:%3cmutex%3e' title='33.6.2&emsp;Header &lt;mutex&gt; synopsis&emsp;[mutex.syn]'><span id='headerref:<mutex>'><span class='texttt'>&lt;mutex&gt;</span></span></a>,
<a href='rand.synopsis#header:%3crandom%3e' title='28.5.2&emsp;Header &lt;random&gt; synopsis&emsp;[rand.synopsis]'><span id='headerref:<random>'><span class='texttt'>&lt;random&gt;</span></span></a>,
<a href='ratio.syn#header:%3cratio%3e' title='21.4.2&emsp;Header &lt;ratio&gt; synopsis&emsp;[ratio.syn]'><span id='headerref:<ratio>'><span class='texttt'>&lt;ratio&gt;</span></span></a>,
<a href='re.syn#header:%3cregex%3e' title='32.3&emsp;Header &lt;regex&gt; synopsis&emsp;[re.syn]'><span id='headerref:<regex>'><span class='texttt'>&lt;regex&gt;</span></span></a>,
<a href='allocator.adaptor.syn#header:%3cscoped_allocator%3e' title='20.5.1&emsp;Header &lt;scoped_&shy;allocator&gt; synopsis&emsp;[allocator.adaptor.syn]'><span id='headerref:<scoped_allocator>'><span class='texttt'>&lt;scoped_<span class='shy'></span>allocator&gt;</span></span></a>,
<a href='system.error.syn#header:%3csystem_error%3e' title='19.5.2&emsp;Header &lt;system_&shy;error&gt; synopsis&emsp;[system.error.syn]'><span id='headerref:<system_error>'><span class='texttt'>&lt;system_<span class='shy'></span>error&gt;</span></span></a>,
<a href='thread.syn#header:%3cthread%3e' title='33.4.2&emsp;Header &lt;thread&gt; synopsis&emsp;[thread.syn]'><span id='headerref:<thread>'><span class='texttt'>&lt;thread&gt;</span></span></a>,
<a href='tuple.syn#header:%3ctuple%3e' title='22.4.2&emsp;Header &lt;tuple&gt; synopsis&emsp;[tuple.syn]'><span id='headerref:<tuple>'><span class='texttt'>&lt;tuple&gt;</span></span></a>,
<a href='type.index.synopsis#header:%3ctypeindex%3e' title='22.11.1&emsp;Header &lt;typeindex&gt; synopsis&emsp;[type.index.synopsis]'><span id='headerref:<typeindex>'><span class='texttt'>&lt;typeindex&gt;</span></span></a>,
<a href='meta.type.synop#header:%3ctype_traits%3e' title='21.3.3&emsp;Header &lt;type_&shy;traits&gt; synopsis&emsp;[meta.type.synop]'><span id='headerref:<type_traits>'><span class='texttt'>&lt;type_<span class='shy'></span>traits&gt;</span></span></a>,
<a href='unord.map.syn#header:%3cunordered_map%3e' title='24.5.2&emsp;Header &lt;unordered_&shy;map&gt; synopsis&emsp;[unord.map.syn]'><span id='headerref:<unordered_map>'><span class='texttt'>&lt;unordered_<span class='shy'></span>map&gt;</span></span></a>,
and
<a href='unord.set.syn#header:%3cunordered_set%3e' title='24.5.3&emsp;Header &lt;unordered_&shy;set&gt; synopsis&emsp;[unord.set.syn]'><span id='headerref:<unordered_set>'><span class='texttt'>&lt;unordered_<span class='shy'></span>set&gt;</span></span></a><a class='hidden_link' href='#cpp03.library-2.sentence-3'>.</a></div> <div id='cpp03.library-2.sentence-4' class='sentence'>In addition the following C compatibility headers are new:
<a href='cfenv.syn#header:%3ccfenv%3e' title='28.3.1&emsp;Header &lt;cfenv&gt; synopsis&emsp;[cfenv.syn]'><span id='headerref:<cfenv>'><span class='texttt'>&lt;cfenv&gt;</span></span></a>,
<a href='cinttypes.syn#header:%3ccinttypes%3e' title='31.13.2&emsp;Header &lt;cinttypes&gt; synopsis&emsp;[cinttypes.syn]'><span id='headerref:<cinttypes>'><span class='texttt'>&lt;cinttypes&gt;</span></span></a>,
<a href='cstdint.syn#header:%3ccstdint%3e' title='17.4.1&emsp;Header &lt;cstdint&gt; synopsis&emsp;[cstdint.syn]'><span id='headerref:<cstdint>'><span class='texttt'>&lt;cstdint&gt;</span></span></a>,
and
<a href='cuchar.syn#header:%3ccuchar%3e' title='23.5.5&emsp;Header &lt;cuchar&gt; synopsis&emsp;[cuchar.syn]'><span id='headerref:<cuchar>'><span class='texttt'>&lt;cuchar&gt;</span></span></a><a class='hidden_link' href='#cpp03.library-2.sentence-4'>.</a></div> <div id='cpp03.library-2.sentence-5' class='sentence'>Valid C++ 2003 code that <span class='texttt'><span class='preprocessordirective'>#include</span></span>s headers with these names may be
invalid in this revision of C++<a class='hidden_link' href='#cpp03.library-2.sentence-5'>.</a></div></div></div><div class='para' id='cpp03.library-3'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.library-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1929'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='swappable.requirements'>[swappable.<span class='shy'></span>requirements]</a>
<br/> <div id='cpp03.library-3.sentence-1' class='sentence'><b>Effect on original feature:</b> Function <span class='texttt'>swap</span> moved to a different header
<br/></div> <div id='cpp03.library-3.sentence-2' class='sentence'><b>Rationale:</b> Remove dependency on <a href='algorithm.syn#header:%3calgorithm%3e' title='27.4&emsp;Header &lt;algorithm&gt; synopsis&emsp;[algorithm.syn]'><span id='headerref:<algorithm>'><span class='texttt'>&lt;algorithm&gt;</span></span></a> for <span class='texttt'>swap</span><a class='hidden_link' href='#cpp03.library-3.sentence-2'>.</a></div> <br/> <div id='cpp03.library-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that has been compiled expecting swap to be in
<a href='algorithm.syn#header:%3calgorithm%3e' title='27.4&emsp;Header &lt;algorithm&gt; synopsis&emsp;[algorithm.syn]'><span id='headerref:<algorithm>_'><span class='texttt'>&lt;algorithm&gt;</span></span></a> may have to instead include <a href='utility.syn#header:%3cutility%3e' title='22.2.1&emsp;Header &lt;utility&gt; synopsis&emsp;[utility.syn]'><span id='headerref:<utility>'><span class='texttt'>&lt;utility&gt;</span></span></a><a class='hidden_link' href='#cpp03.library-3.sentence-3'>.</a></div></div></div><div class='para' id='cpp03.library-4'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.library-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1938'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='namespace.posix'>[namespace.<span class='shy'></span>posix]</a>
<br/> <div id='cpp03.library-4.sentence-1' class='sentence'><b>Change:</b> New reserved namespace<a class='hidden_link' href='#cpp03.library-4.sentence-1'>.</a></div> <br/> <div id='cpp03.library-4.sentence-2' class='sentence'><b>Rationale:</b> New functionality<a class='hidden_link' href='#cpp03.library-4.sentence-2'>.</a></div> <br/> <div id='cpp03.library-4.sentence-3' class='sentence'><b>Effect on original feature:</b> The global namespace <span class='texttt'>posix</span> is now reserved for standardization<a class='hidden_link' href='#cpp03.library-4.sentence-3'>.</a></div> <div id='cpp03.library-4.sentence-4' class='sentence'>Valid
C++ 2003 code that uses a top-level namespace <span class='texttt'>posix</span> may be invalid in
this revision of C++<a class='hidden_link' href='#cpp03.library-4.sentence-4'>.</a></div></div></div><div class='para' id='cpp03.library-5'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.library-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1948'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='res.on.macro.definitions'>[res.<span class='shy'></span>on.<span class='shy'></span>macro.<span class='shy'></span>definitions]</a>
<br/> <div id='cpp03.library-5.sentence-1' class='sentence'><b>Change:</b> Additional restrictions on macro names<a class='hidden_link' href='#cpp03.library-5.sentence-1'>.</a></div> <br/> <div id='cpp03.library-5.sentence-2' class='sentence'><b>Rationale:</b> Avoid hard to diagnose or non-portable constructs<a class='hidden_link' href='#cpp03.library-5.sentence-2'>.</a></div> <br/> <div id='cpp03.library-5.sentence-3' class='sentence'><b>Effect on original feature:</b> Names of attribute identifiers may not be used as macro names<a class='hidden_link' href='#cpp03.library-5.sentence-3'>.</a></div> <div id='cpp03.library-5.sentence-4' class='sentence'>Valid C++ 2003
code that defines <span class='texttt'><span class='keyword'>override</span></span>, <span class='texttt'><span class='keyword'>final</span></span>,
<span class='texttt'>carries_<span class='shy'></span>dependency</span>, or <span class='texttt'>noreturn</span> as macros is invalid in this
revision of C++<a class='hidden_link' href='#cpp03.library-5.sentence-4'>.</a></div></div></div></div><div id='cpp03.language.support' class='section'><h3 ><a class='secnum' href='#cpp03.language.support' style='min-width:80pt'>C.6.8</a> <a href='support' title='17&emsp;Language support library'>[support]</a>:
language support library <a class='abbr_ref' href='diff.cpp03.language.support'>[diff.cpp03.language.support]</a></h3><div class='para' id='cpp03.language.support-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.language.support-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1962'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='new.delete.single'>[new.<span class='shy'></span>delete.<span class='shy'></span>single]</a>
<br/> <div id='cpp03.language.support-1.sentence-1' class='sentence'><b>Change:</b> <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span> may throw exceptions other than
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>bad_<span class='shy'></span>alloc</span><a class='hidden_link' href='#cpp03.language.support-1.sentence-1'>.</a></div> <br/> <div id='cpp03.language.support-1.sentence-2' class='sentence'><b>Rationale:</b> Consistent application of <span id=':noexcept___'><span class='texttt'><span class='keyword'>noexcept</span></span></span><a class='hidden_link' href='#cpp03.language.support-1.sentence-2'>.</a></div> <br/> <div id='cpp03.language.support-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that assumes that global <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span> only
throws <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>bad_<span class='shy'></span>alloc</span> may execute differently in this revision of C++<a class='hidden_link' href='#cpp03.language.support-1.sentence-3'>.</a></div> <div id='cpp03.language.support-1.sentence-4' class='sentence'>Valid C++ 2003 code that replaces the global replaceable <span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span>
is ill-formed in this revision of C++,
because the exception specification of <span class='texttt'><span class='keyword'>throw</span><span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>bad_<span class='shy'></span>alloc<span class='parenthesis'>)</span></span>
was removed<a class='hidden_link' href='#cpp03.language.support-1.sentence-4'>.</a></div></div></div></div><div id='cpp03.diagnostics' class='section'><h3 ><a class='secnum' href='#cpp03.diagnostics' style='min-width:80pt'>C.6.9</a> <a href='diagnostics' title='19&emsp;Diagnostics library'>[diagnostics]</a>: diagnostics library <a class='abbr_ref' href='diff.cpp03.diagnostics'>[diff.cpp03.diagnostics]</a></h3><div class='para' id='cpp03.diagnostics-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.diagnostics-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1978'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='errno'>[errno]</a>
<br/> <div id='cpp03.diagnostics-1.sentence-1' class='sentence'><b>Change:</b> Thread-local error numbers<a class='hidden_link' href='#cpp03.diagnostics-1.sentence-1'>.</a></div> <br/> <div id='cpp03.diagnostics-1.sentence-2' class='sentence'><b>Rationale:</b> Support for new thread facilities<a class='hidden_link' href='#cpp03.diagnostics-1.sentence-2'>.</a></div> <br/> <div id='cpp03.diagnostics-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid but implementation-specific C++ 2003 code that relies on
<span class='texttt'>errno</span> being the same across threads may change behavior in this
revision of C++<a class='hidden_link' href='#cpp03.diagnostics-1.sentence-3'>.</a></div></div></div></div><div id='cpp03.utilities' class='section'><h3 ><a class='secnum' href='#cpp03.utilities' style='min-width:80pt'>C.6.10</a> <a href='utilities' title='22&emsp;General utilities library'>[utilities]</a>: general utilities library <a class='abbr_ref' href='diff.cpp03.utilities'>[diff.cpp03.utilities]</a></h3><div class='para' id='cpp03.utilities-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.utilities-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L1990'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='refwrap'>[refwrap]</a>, <a href='arithmetic.operations'>[arithmetic.<span class='shy'></span>operations]</a>, <a href='comparisons'>[comparisons]</a>, <a href='logical.operations'>[logical.<span class='shy'></span>operations]</a>, and <a href='bitwise.operations'>[bitwise.<span class='shy'></span>operations]</a>
<br/> <div id='cpp03.utilities-1.sentence-1' class='sentence'><b>Change:</b> Standard function object types no longer derived from
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>unary_<span class='shy'></span>function</span> or <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>binary_<span class='shy'></span>function</span><a class='hidden_link' href='#cpp03.utilities-1.sentence-1'>.</a></div> <br/> <div id='cpp03.utilities-1.sentence-2' class='sentence'><b>Rationale:</b> Superseded by new feature; <span class='texttt'>unary_<span class='shy'></span>function</span> and
<span class='texttt'>binary_<span class='shy'></span>function</span> are no longer defined<a class='hidden_link' href='#cpp03.utilities-1.sentence-2'>.</a></div> <br/> <div id='cpp03.utilities-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that depends on function object types being derived from
<span class='texttt'>unary_<span class='shy'></span>function</span> or <span class='texttt'>binary_<span class='shy'></span>function</span> may fail to compile
in this revision of C++<a class='hidden_link' href='#cpp03.utilities-1.sentence-3'>.</a></div></div></div></div><div id='cpp03.strings' class='section'><h3 ><a class='secnum' href='#cpp03.strings' style='min-width:80pt'>C.6.11</a> <a href='strings' title='23&emsp;Strings library'>[strings]</a>: strings library <a class='abbr_ref' href='diff.cpp03.strings'>[diff.cpp03.strings]</a></h3><div class='para' id='cpp03.strings-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.strings-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2004'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='string.classes'>[string.<span class='shy'></span>classes]</a>
<br/> <div id='cpp03.strings-1.sentence-1' class='sentence'><b>Change:</b> <span class='texttt'>basic_<span class='shy'></span>string</span> requirements no longer allow reference-counted
strings<a class='hidden_link' href='#cpp03.strings-1.sentence-1'>.</a></div> <br/> <div id='cpp03.strings-1.sentence-2' class='sentence'><b>Rationale:</b> Invalidation is subtly different with reference-counted strings<a class='hidden_link' href='#cpp03.strings-1.sentence-2'>.</a></div> <div id='cpp03.strings-1.sentence-3' class='sentence'>This change regularizes behavior<a class='hidden_link' href='#cpp03.strings-1.sentence-3'>.</a></div> <br/> <div id='cpp03.strings-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may execute differently in this revision of C++<a class='hidden_link' href='#cpp03.strings-1.sentence-4'>.</a></div></div></div><div class='para' id='cpp03.strings-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.strings-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2014'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='string.require'>[string.<span class='shy'></span>require]</a>
<br/> <div id='cpp03.strings-2.sentence-1' class='sentence'><b>Change:</b> Loosen <span class='texttt'>basic_<span class='shy'></span>string</span> invalidation rules<a class='hidden_link' href='#cpp03.strings-2.sentence-1'>.</a></div> <br/> <div id='cpp03.strings-2.sentence-2' class='sentence'><b>Rationale:</b> Allow small-string optimization<a class='hidden_link' href='#cpp03.strings-2.sentence-2'>.</a></div> <br/> <div id='cpp03.strings-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may execute differently in this revision of C++<a class='hidden_link' href='#cpp03.strings-2.sentence-3'>.</a></div> <div id='cpp03.strings-2.sentence-4' class='sentence'>Some <span id=':const_'><span class='texttt'><span class='keyword'>const</span></span></span> member functions, such as <span class='texttt'>data</span> and <span class='texttt'>c_<span class='shy'></span>str</span>,
no longer invalidate iterators<a class='hidden_link' href='#cpp03.strings-2.sentence-4'>.</a></div></div></div></div><div id='cpp03.containers' class='section'><h3 ><a class='secnum' href='#cpp03.containers' style='min-width:80pt'>C.6.12</a> <a href='containers' title='24&emsp;Containers library'>[containers]</a>: containers library <a class='abbr_ref' href='diff.cpp03.containers'>[diff.cpp03.containers]</a></h3><div class='para' id='cpp03.containers-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.containers-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2026'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='container.requirements'>[container.<span class='shy'></span>requirements]</a>
<br/> <div id='cpp03.containers-1.sentence-1' class='sentence'><b>Change:</b> Complexity of <span class='texttt'>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> member functions now constant<a class='hidden_link' href='#cpp03.containers-1.sentence-1'>.</a></div> <br/> <div id='cpp03.containers-1.sentence-2' class='sentence'><b>Rationale:</b> Lack of specification of complexity of <span class='texttt'>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> resulted in
divergent implementations with inconsistent performance characteristics<a class='hidden_link' href='#cpp03.containers-1.sentence-2'>.</a></div> <br/> <div id='cpp03.containers-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Some container implementations that conform to C++ 2003 may not conform to the
specified <span class='texttt'>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> requirements in this revision of C++<a class='hidden_link' href='#cpp03.containers-1.sentence-3'>.</a></div> <div id='cpp03.containers-1.sentence-4' class='sentence'>Adjusting
containers such as <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>list</span> to the stricter requirements may require
incompatible changes<a class='hidden_link' href='#cpp03.containers-1.sentence-4'>.</a></div></div></div><div class='para' id='cpp03.containers-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.containers-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2038'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='container.requirements'>[container.<span class='shy'></span>requirements]</a>
<br/> <div id='cpp03.containers-2.sentence-1' class='sentence'><b>Change:</b> Requirements change: relaxation<a class='hidden_link' href='#cpp03.containers-2.sentence-1'>.</a></div> <br/> <div id='cpp03.containers-2.sentence-2' class='sentence'><b>Rationale:</b> Clarification<a class='hidden_link' href='#cpp03.containers-2.sentence-2'>.</a></div> <br/> <div id='cpp03.containers-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that attempts to meet the specified container requirements
may now be over-specified<a class='hidden_link' href='#cpp03.containers-2.sentence-3'>.</a></div> <div id='cpp03.containers-2.sentence-4' class='sentence'>Code that attempted to be portable across containers
may need to be adjusted as follows:
<ul class='itemize'><li id='cpp03.containers-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.containers-2.1'>(2.1)</a></div>not all containers provide <span class='texttt'>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>; use <span class='texttt'>empty<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> instead
of <span class='texttt'>size<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span></span>;</li><li id='cpp03.containers-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.containers-2.2'>(2.2)</a></div>not all containers are empty after construction (<span class='texttt'>array</span>);</li><li id='cpp03.containers-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.containers-2.3'>(2.3)</a></div>not all containers have constant complexity for <span class='texttt'>swap<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> (<span class='texttt'>array</span>)<a class='hidden_link' href='#cpp03.containers-2.sentence-4'>.</a></li></ul></div></div></div><div class='para' id='cpp03.containers-3'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.containers-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2054'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='container.requirements'>[container.<span class='shy'></span>requirements]</a>
<br/> <div id='cpp03.containers-3.sentence-1' class='sentence'><b>Change:</b> Requirements change: default constructible<a class='hidden_link' href='#cpp03.containers-3.sentence-1'>.</a></div> <br/> <div id='cpp03.containers-3.sentence-2' class='sentence'><b>Rationale:</b> Clarification of container requirements<a class='hidden_link' href='#cpp03.containers-3.sentence-2'>.</a></div> <br/> <div id='cpp03.containers-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that attempts to explicitly instantiate a container using
a user-defined type with no default constructor may fail to compile<a class='hidden_link' href='#cpp03.containers-3.sentence-3'>.</a></div></div></div><div class='para' id='cpp03.containers-4'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.containers-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2063'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='sequence.reqmts'>[sequence.<span class='shy'></span>reqmts]</a> and <a href='associative.reqmts'>[associative.<span class='shy'></span>reqmts]</a>
<br/> <div id='cpp03.containers-4.sentence-1' class='sentence'><b>Change:</b> Signature changes: from <span id=':void_'><span class='texttt'><span class='keyword'>void</span></span></span> return types<a class='hidden_link' href='#cpp03.containers-4.sentence-1'>.</a></div> <br/> <div id='cpp03.containers-4.sentence-2' class='sentence'><b>Rationale:</b> Old signature threw away useful information that may be expensive
to recalculate<a class='hidden_link' href='#cpp03.containers-4.sentence-2'>.</a></div> <br/> <div id='cpp03.containers-4.sentence-3' class='sentence'><b>Effect on original feature:</b> The following member functions have changed:
<ul class='itemize'><li id='cpp03.containers-4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.containers-4.1'>(4.1)</a></div><span class='texttt'>erase<span class='parenthesis'>(</span>iter<span class='parenthesis'>)</span></span> for <span class='texttt'>set</span>, <span class='texttt'>multiset</span>, <span class='texttt'>map</span>, <span class='texttt'>multimap</span></li><li id='cpp03.containers-4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.containers-4.2'>(4.2)</a></div><span class='texttt'>erase<span class='parenthesis'>(</span>begin, end<span class='parenthesis'>)</span></span> for <span class='texttt'>set</span>, <span class='texttt'>multiset</span>, <span class='texttt'>map</span>, <span class='texttt'>multimap</span></li><li id='cpp03.containers-4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.containers-4.3'>(4.3)</a></div><span class='texttt'>insert<span class='parenthesis'>(</span>pos, num, val<span class='parenthesis'>)</span></span> for <span class='texttt'>vector</span>, <span class='texttt'>deque</span>, <span class='texttt'>list</span>, <span class='texttt'>forward_<span class='shy'></span>list</span></li><li id='cpp03.containers-4.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.containers-4.4'>(4.4)</a></div><span class='texttt'>insert<span class='parenthesis'>(</span>pos, beg, end<span class='parenthesis'>)</span></span> for <span class='texttt'>vector</span>, <span class='texttt'>deque</span>, <span class='texttt'>list</span>, <span class='texttt'>forward_<span class='shy'></span>list</span></li></ul></div></div><div class='texpara'><div id='cpp03.containers-4.sentence-4' class='sentence'>Valid C++ 2003 code that relies on these functions returning <span id=':void__'><span class='texttt'><span class='keyword'>void</span></span></span>
(e.g., code that creates a pointer to member function that points to one
of these functions) will fail to compile with this revision of C++<a class='hidden_link' href='#cpp03.containers-4.sentence-4'>.</a></div></div></div><div class='para' id='cpp03.containers-5'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.containers-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2082'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='sequence.reqmts'>[sequence.<span class='shy'></span>reqmts]</a> and <a href='associative.reqmts'>[associative.<span class='shy'></span>reqmts]</a>
<br/> <div id='cpp03.containers-5.sentence-1' class='sentence'><b>Change:</b> Signature changes: from <span class='texttt'>iterator</span> to <span class='texttt'>const_<span class='shy'></span>iterator</span>
parameters<a class='hidden_link' href='#cpp03.containers-5.sentence-1'>.</a></div> <br/> <div id='cpp03.containers-5.sentence-2' class='sentence'><b>Rationale:</b> Overspecification<a class='hidden_link' href='#cpp03.containers-5.sentence-2'>.</a></div> <br/> <div id='cpp03.containers-5.sentence-3' class='sentence'><b>Effect on original feature:</b> The signatures of the following member functions changed from taking an
<span class='texttt'>iterator</span> to taking a <span class='texttt'>const_<span class='shy'></span>iterator</span>:
<ul class='itemize'><li id='cpp03.containers-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.containers-5.1'>(5.1)</a></div><span class='texttt'>insert<span class='parenthesis'>(</span>iter, val<span class='parenthesis'>)</span></span> for <span class='texttt'>vector</span>, <span class='texttt'>deque</span>, <span class='texttt'>list</span>,
<span class='texttt'>set</span>, <span class='texttt'>multiset</span>, <span class='texttt'>map</span>, <span class='texttt'>multimap</span></li><li id='cpp03.containers-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.containers-5.2'>(5.2)</a></div><span class='texttt'>insert<span class='parenthesis'>(</span>pos, beg, end<span class='parenthesis'>)</span></span> for <span class='texttt'>vector</span>, <span class='texttt'>deque</span>, <span class='texttt'>list</span>,
<span class='texttt'>forward_<span class='shy'></span>list</span></li><li id='cpp03.containers-5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.containers-5.3'>(5.3)</a></div><span class='texttt'>erase<span class='parenthesis'>(</span>begin, end<span class='parenthesis'>)</span></span> for <span class='texttt'>set</span>, <span class='texttt'>multiset</span>, <span class='texttt'>map</span>, <span class='texttt'>multimap</span></li><li id='cpp03.containers-5.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.containers-5.4'>(5.4)</a></div>all forms of <span class='texttt'>list<span class='operator'>&#x200b;::&#x200b;</span>splice</span></li><li id='cpp03.containers-5.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.containers-5.5'>(5.5)</a></div>all forms of <span class='texttt'>list<span class='operator'>&#x200b;::&#x200b;</span>merge</span></li></ul></div></div><div class='texpara'><div id='cpp03.containers-5.sentence-4' class='sentence'>Valid C++ 2003 code that uses these functions may fail to compile with this
revision of C++<a class='hidden_link' href='#cpp03.containers-5.sentence-4'>.</a></div></div></div><div class='para' id='cpp03.containers-6'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.containers-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2104'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='sequence.reqmts'>[sequence.<span class='shy'></span>reqmts]</a> and <a href='associative.reqmts'>[associative.<span class='shy'></span>reqmts]</a>
<br/> <div id='cpp03.containers-6.sentence-1' class='sentence'><b>Change:</b> Signature changes: <span class='texttt'>resize</span><a class='hidden_link' href='#cpp03.containers-6.sentence-1'>.</a></div> <br/> <div id='cpp03.containers-6.sentence-2' class='sentence'><b>Rationale:</b> Performance, compatibility with move semantics<a class='hidden_link' href='#cpp03.containers-6.sentence-2'>.</a></div> <br/> <div id='cpp03.containers-6.sentence-3' class='sentence'><b>Effect on original feature:</b> For <span class='texttt'>vector</span>, <span class='texttt'>deque</span>, and <span class='texttt'>list</span>
the fill value passed to <span class='texttt'>resize</span> is now passed by reference instead of
by value, and an additional overload of <span class='texttt'>resize</span> has been added<a class='hidden_link' href='#cpp03.containers-6.sentence-3'>.</a></div> <div id='cpp03.containers-6.sentence-4' class='sentence'>Valid
C++ 2003 code that uses this function may fail to compile with this revision of C++<a class='hidden_link' href='#cpp03.containers-6.sentence-4'>.</a></div></div></div></div><div id='cpp03.algorithms' class='section'><h3 ><a class='secnum' href='#cpp03.algorithms' style='min-width:80pt'>C.6.13</a> <a href='algorithms' title='27&emsp;Algorithms library'>[algorithms]</a>: algorithms library <a class='abbr_ref' href='diff.cpp03.algorithms'>[diff.cpp03.algorithms]</a></h3><div class='para' id='cpp03.algorithms-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.algorithms-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2117'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='algorithms.general'>[algorithms.<span class='shy'></span>general]</a>
<br/> <div id='cpp03.algorithms-1.sentence-1' class='sentence'><b>Change:</b> Result state of inputs after application of some algorithms<a class='hidden_link' href='#cpp03.algorithms-1.sentence-1'>.</a></div> <br/> <div id='cpp03.algorithms-1.sentence-2' class='sentence'><b>Rationale:</b> Required by new feature<a class='hidden_link' href='#cpp03.algorithms-1.sentence-2'>.</a></div> <br/> <div id='cpp03.algorithms-1.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid C++ 2003 program may detect that an object with a valid but
unspecified state has a different valid but unspecified state with this
revision of C++<a class='hidden_link' href='#cpp03.algorithms-1.sentence-3'>.</a></div> <div id='cpp03.algorithms-1.sentence-4' class='sentence'>For example, <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>remove</span> and
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>remove_<span class='shy'></span>if</span> may leave the tail of the input sequence with a
different set of values than previously<a class='hidden_link' href='#cpp03.algorithms-1.sentence-4'>.</a></div></div></div></div><div id='cpp03.numerics' class='section'><h3 ><a class='secnum' href='#cpp03.numerics' style='min-width:80pt'>C.6.14</a> <a href='numerics' title='28&emsp;Numerics library'>[numerics]</a>: numerics library <a class='abbr_ref' href='diff.cpp03.numerics'>[diff.cpp03.numerics]</a></h3><div class='para' id='cpp03.numerics-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.numerics-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2131'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='complex.numbers'>[complex.<span class='shy'></span>numbers]</a>
<br/> <div id='cpp03.numerics-1.sentence-1' class='sentence'><b>Change:</b> Specified representation of complex numbers<a class='hidden_link' href='#cpp03.numerics-1.sentence-1'>.</a></div> <br/> <div id='cpp03.numerics-1.sentence-2' class='sentence'><b>Rationale:</b> Compatibility with C99<a class='hidden_link' href='#cpp03.numerics-1.sentence-2'>.</a></div> <br/> <div id='cpp03.numerics-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that uses implementation-specific knowledge about the
binary representation of the required template specializations of
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>complex</span> may not be compatible with this revision of C++<a class='hidden_link' href='#cpp03.numerics-1.sentence-3'>.</a></div></div></div></div><div id='cpp03.locale' class='section'><h3 ><a class='secnum' href='#cpp03.locale' style='min-width:80pt'>C.6.15</a> <a href='localization' title='30&emsp;Localization library'>[localization]</a>: localization library <a class='abbr_ref' href='diff.cpp03.locale'>[diff.cpp03.locale]</a></h3><div class='para' id='cpp03.locale-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.locale-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2143'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='facet.num.get.virtuals'>[facet.<span class='shy'></span>num.<span class='shy'></span>get.<span class='shy'></span>virtuals]</a>
<br/> <div id='cpp03.locale-1.sentence-1' class='sentence'><b>Change:</b> The <span class='texttt'>num_<span class='shy'></span>get</span> facet recognizes hexadecimal floating point values<a class='hidden_link' href='#cpp03.locale-1.sentence-1'>.</a></div> <br/> <div id='cpp03.locale-1.sentence-2' class='sentence'><b>Rationale:</b> Required by new feature<a class='hidden_link' href='#cpp03.locale-1.sentence-2'>.</a></div> <br/> <div id='cpp03.locale-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code may have different behavior in this revision of C++<a class='hidden_link' href='#cpp03.locale-1.sentence-3'>.</a></div></div></div></div><div id='cpp03.input.output' class='section'><h3 ><a class='secnum' href='#cpp03.input.output' style='min-width:80pt'>C.6.16</a> <a href='input.output' title='31&emsp;Input/output library'>[input.<span class='shy'></span>output]</a>: input/output library <a class='abbr_ref' href='diff.cpp03.input.output'>[diff.cpp03.input.output]</a></h3><div class='para' id='cpp03.input.output-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.input.output-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2153'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='istream.sentry'>[istream.<span class='shy'></span>sentry]</a>, <a href='ostream.sentry'>[ostream.<span class='shy'></span>sentry]</a>, and <a href='iostate.flags'>[iostate.<span class='shy'></span>flags]</a>
<br/> <div id='cpp03.input.output-1.sentence-1' class='sentence'><b>Change:</b> Specify use of <span id=':explicit__'><span class='texttt'><span class='keyword'>explicit</span></span></span> in existing boolean conversion functions<a class='hidden_link' href='#cpp03.input.output-1.sentence-1'>.</a></div> <br/> <div id='cpp03.input.output-1.sentence-2' class='sentence'><b>Rationale:</b> Clarify intentions, avoid workarounds<a class='hidden_link' href='#cpp03.input.output-1.sentence-2'>.</a></div> <br/> <div id='cpp03.input.output-1.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that relies on implicit boolean conversions will fail to
compile with this revision of C++<a class='hidden_link' href='#cpp03.input.output-1.sentence-3'>.</a></div> <div id='cpp03.input.output-1.sentence-4' class='sentence'>Such conversions occur in the
following conditions:
<ul class='itemize'><li id='cpp03.input.output-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.input.output-1.1'>(1.1)</a></div>passing a value to a function that takes an argument of type <span class='texttt'><span class='keyword'>bool</span></span>;</li><li id='cpp03.input.output-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.input.output-1.2'>(1.2)</a></div>using <span class='texttt'><span class='keyword'>operator</span><span class='operator'>=</span><span class='operator'>=</span></span> to compare to <span class='texttt'><span class='literal'>false</span></span> or <span class='texttt'><span class='literal'>true</span></span>;</li><li id='cpp03.input.output-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.input.output-1.3'>(1.3)</a></div>returning a value from a function with a return type of <span class='texttt'><span class='keyword'>bool</span></span>;</li><li id='cpp03.input.output-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.input.output-1.4'>(1.4)</a></div>initializing members of type <span class='texttt'><span class='keyword'>bool</span></span> via aggregate initialization;</li><li id='cpp03.input.output-1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#cpp03.input.output-1.5'>(1.5)</a></div>initializing a <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>bool</span><span class='operator'>&amp;</span></span> which would bind to a temporary object<a class='hidden_link' href='#cpp03.input.output-1.sentence-4'>.</a></li></ul></div></div></div><div class='para' id='cpp03.input.output-2'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.input.output-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2170'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='ios.failure'>[ios.<span class='shy'></span>failure]</a>
<br/> <div id='cpp03.input.output-2.sentence-1' class='sentence'><b>Change:</b> Change base class of <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>ios_<span class='shy'></span>base<span class='operator'>&#x200b;::&#x200b;</span>failure</span><a class='hidden_link' href='#cpp03.input.output-2.sentence-1'>.</a></div> <br/> <div id='cpp03.input.output-2.sentence-2' class='sentence'><b>Rationale:</b> More detailed error messages<a class='hidden_link' href='#cpp03.input.output-2.sentence-2'>.</a></div> <br/> <div id='cpp03.input.output-2.sentence-3' class='sentence'><b>Effect on original feature:</b> <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>ios_<span class='shy'></span>base<span class='operator'>&#x200b;::&#x200b;</span>failure</span> is no longer derived directly from
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>exception</span>, but is now derived from <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>system_<span class='shy'></span>error</span>,
which in turn is derived from <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>runtime_<span class='shy'></span>error</span><a class='hidden_link' href='#cpp03.input.output-2.sentence-3'>.</a></div> <div id='cpp03.input.output-2.sentence-4' class='sentence'>Valid C++ 2003 code
that assumes that <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>ios_<span class='shy'></span>base<span class='operator'>&#x200b;::&#x200b;</span>failure</span> is derived directly from
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>exception</span> may execute differently in this revision of C++<a class='hidden_link' href='#cpp03.input.output-2.sentence-4'>.</a></div></div></div><div class='para' id='cpp03.input.output-3'><div class='marginalizedparent'><a class='marginalized' href='#cpp03.input.output-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2182'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='ios.base'>[ios.<span class='shy'></span>base]</a>
<br/> <div id='cpp03.input.output-3.sentence-1' class='sentence'><b>Change:</b> Flag types in <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>ios_<span class='shy'></span>base</span> are now bitmasks with values
defined as constexpr static members<a class='hidden_link' href='#cpp03.input.output-3.sentence-1'>.</a></div> <br/> <div id='cpp03.input.output-3.sentence-2' class='sentence'><b>Rationale:</b> Required for new features<a class='hidden_link' href='#cpp03.input.output-3.sentence-2'>.</a></div> <br/> <div id='cpp03.input.output-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Valid C++ 2003 code that relies on <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>ios_<span class='shy'></span>base</span> flag types being
represented as <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>bitset</span> or as an integer type may fail to compile
with this revision of C++<a class='hidden_link' href='#cpp03.input.output-3.sentence-3'>.</a></div> <div id='cpp03.input.output-3.sentence-4' class='sentence'>For example:
<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>iostream<span class='anglebracket'>&gt;</span>

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> flag <span class='operator'>=</span> std<span class='operator'>::</span>ios_base<span class='operator'>::</span>hex;
  std<span class='operator'>::</span>cout<span class='operator'>.</span>setf<span class='parenthesis'>(</span>flag<span class='parenthesis'>)</span>;         <span class='comment'>// error: <span class='tcode_in_codeblock'>setf</span> does not take argument of type <span class='tcode_in_codeblock'>int</span></span>
<span class='curlybracket'>}</span>
</span></div></div></div></div></div><div id='iso' class='section'><h2 ><a class='secnum' href='#iso' style='min-width:65pt'>C.7</a> C++ and ISO C <a class='abbr_ref' href='diff.iso'>[diff.iso]</a></h2><div id='iso.general' class='section'><h3 ><a class='secnum' href='#iso.general' style='min-width:80pt'>C.7.1</a> General <a class='abbr_ref' href='diff.iso.general'>[diff.iso.general]</a></h3><div class='para' id='iso.general-1'><div class='marginalizedparent'><a class='marginalized' href='#iso.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2206'>#</a></div><div class='texpara'><div id='iso.general-1.sentence-1' class='sentence'><a class='index' id=':summary,compatibility_with_ISO_C'></a>Subclause <a href='#iso' title='C.7&emsp;C++ and ISO C'>[diff.<span class='shy'></span>iso]</a> lists the differences between C++ and ISO C,
in addition to those listed above,
by the chapters of this document<a class='hidden_link' href='#iso.general-1.sentence-1'>.</a></div></div></div></div><div id='lex' class='section'><h3 ><a class='secnum' href='#lex' style='min-width:80pt'>C.7.2</a> <a href='lex' title='5&emsp;Lexical conventions'>[lex]</a>: lexical conventions <a class='abbr_ref' href='diff.lex'>[diff.lex]</a></h3><div class='para' id='lex-1'><div class='marginalizedparent'><a class='marginalized' href='#lex-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2214'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.key'>[lex.<span class='shy'></span>key]</a>
<br/> <div id='lex-1.sentence-1' class='sentence'><b>Change:</b> New Keywords<br/></div> <div id='lex-1.sentence-2' class='sentence'>
New keywords are added to C++;
see <a href='lex.key' title='5.11&emsp;Keywords'>[lex.<span class='shy'></span>key]</a><a class='hidden_link' href='#lex-1.sentence-2'>.</a></div> <br/> <div id='lex-1.sentence-3' class='sentence'><b>Rationale:</b> These keywords were added in order to implement the new
semantics of C++<a class='hidden_link' href='#lex-1.sentence-3'>.</a></div> <br/> <div id='lex-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#lex-1.sentence-4'>.</a></div> <div id='lex-1.sentence-5' class='sentence'>Any ISO C programs that used any of these keywords as identifiers
are not valid C++ programs<a class='hidden_link' href='#lex-1.sentence-5'>.</a></div> <br/> <div id='lex-1.sentence-6' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#lex-1.sentence-6'>.</a></div> <div id='lex-1.sentence-7' class='sentence'>Converting one specific program is easy<a class='hidden_link' href='#lex-1.sentence-7'>.</a></div> <div id='lex-1.sentence-8' class='sentence'>Converting a large collection
of related programs takes more work<a class='hidden_link' href='#lex-1.sentence-8'>.</a></div> <br/> <div id='lex-1.sentence-9' class='sentence'><b>How widely used:</b> Common<a class='hidden_link' href='#lex-1.sentence-9'>.</a></div></div></div><div class='para' id='lex-2'><div class='marginalizedparent'><a class='marginalized' href='#lex-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2234'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.ccon'>[lex.<span class='shy'></span>ccon]</a>
<br/> <div id='lex-2.sentence-1' class='sentence'><b>Change:</b> Type of <a href='lex.ccon#nt:character-literal' title='5.13.3&emsp;Character literals&emsp;[lex.ccon]'><span id='ntref:character-literal_'><span class='textsf'><i >character-literal</i></span></span></a> is changed from <span class='texttt'><span class='keyword'>int</span></span> to <span class='texttt'><span class='keyword'>char</span></span><a class='hidden_link' href='#lex-2.sentence-1'>.</a></div> <br/> <div id='lex-2.sentence-2' class='sentence'><b>Rationale:</b> This is needed for improved overloaded function argument type
matching<a class='hidden_link' href='#lex-2.sentence-2'>.</a></div> <div id='lex-2.sentence-3' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>int</span> function<span class='parenthesis'>(</span> <span class='keyword'>int</span> i <span class='parenthesis'>)</span>;
<span class='keyword'>int</span> function<span class='parenthesis'>(</span> <span class='keyword'>char</span> c <span class='parenthesis'>)</span>;

function<span class='parenthesis'>(</span> <span class='literal'>'x'</span> <span class='parenthesis'>)</span>;
</span></div> <div id='lex-2.sentence-4' class='sentence'>
It is preferable that this call match the second version of
function rather than the first<a class='hidden_link' href='#lex-2.sentence-4'>.</a></div> <br/> <div id='lex-2.sentence-5' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#lex-2.sentence-5'>.</a></div> <div id='lex-2.sentence-6' class='sentence'>ISO C programs which depend on
<span class='codeblock'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='literal'>'x'</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>
</span>
will not work the same as C++ programs<a class='hidden_link' href='#lex-2.sentence-6'>.</a></div> <br/> <div id='lex-2.sentence-7' class='sentence'><b>Difficulty of converting:</b> Simple<a class='hidden_link' href='#lex-2.sentence-7'>.</a></div> <br/> <div id='lex-2.sentence-8' class='sentence'><b>How widely used:</b> Programs which depend upon <span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='literal'>'x'</span><span class='parenthesis'>)</span></span> are probably rare<a class='hidden_link' href='#lex-2.sentence-8'>.</a></div></div></div><div class='para' id='lex-3'><div class='marginalizedparent'><a class='marginalized' href='#lex-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2260'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.string'>[lex.<span class='shy'></span>string]</a>
<br/> <div id='lex-3.sentence-1' class='sentence'><b>Change:</b> Concatenated <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal_____'><span class='textsf'><i >string-literal</i></span></span></a><i >s</i> can no longer have
conflicting <a href='lex.ccon#nt:encoding-prefix' title='5.13.3&emsp;Character literals&emsp;[lex.ccon]'><span id='ntref:encoding-prefix__'><span class='textsf'><i >encoding-prefix</i></span></span></a>es<a class='hidden_link' href='#lex-3.sentence-1'>.</a></div> <br/> <div id='lex-3.sentence-2' class='sentence'><b>Rationale:</b> Removal of non-portable feature<a class='hidden_link' href='#lex-3.sentence-2'>.</a></div> <br/> <div id='lex-3.sentence-3' class='sentence'><b>Effect on original feature:</b> Concatenation of <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal______'><span class='textsf'><i >string-literal</i></span></span></a><i >s</i>
with different <a href='lex.ccon#nt:encoding-prefix' title='5.13.3&emsp;Character literals&emsp;[lex.ccon]'><span id='ntref:encoding-prefix___'><span class='textsf'><i >encoding-prefix</i></span></span></a>es
is now ill-formed<a class='hidden_link' href='#lex-3.sentence-3'>.</a></div> <br/> <div id='lex-3.sentence-4' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#lex-3.sentence-4'>.</a></div> <br/> <div id='lex-3.sentence-5' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#lex-3.sentence-5'>.</a></div></div></div><div class='para' id='lex-4'><div class='marginalizedparent'><a class='marginalized' href='#lex-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2275'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='lex.string'>[lex.<span class='shy'></span>string]</a>
<br/> <div id='lex-4.sentence-1' class='sentence'><b>Change:</b> String literals made const<a class='hidden_link' href='#lex-4.sentence-1'>.</a></div> <br/> <div id='lex-4.sentence-2' class='sentence'>
The type of a <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal_______'><span class='textsf'><i >string-literal</i></span></span></a> is changed
from “array of <span class='texttt'><span class='keyword'>char</span></span>”
to “array of <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>char</span></span>”<a class='hidden_link' href='#lex-4.sentence-2'>.</a></div> <div id='lex-4.sentence-3' class='sentence'><a class='index' id=':UTF-8___'></a>The type of a UTF-8 string literal is changed
from “array of <span class='texttt'><span class='keyword'>char</span></span>”
to “array of <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>char8_<span class='shy'></span>t</span></span>”<a class='hidden_link' href='#lex-4.sentence-3'>.</a></div> <div id='lex-4.sentence-4' class='sentence'><a class='index' id=':UTF-16'></a>The type of a UTF-16 string literal is changed
from “array of <i >some-integer-type</i>”
to “array of <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>char16_<span class='shy'></span>t</span></span>”<a class='hidden_link' href='#lex-4.sentence-4'>.</a></div> <div id='lex-4.sentence-5' class='sentence'><a class='index' id=':UTF-32'></a>The type of a UTF-32 string literal is changed
from “array of <i >some-integer-type</i>”
to “array of <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>char32_<span class='shy'></span>t</span></span>”<a class='hidden_link' href='#lex-4.sentence-5'>.</a></div> <div id='lex-4.sentence-6' class='sentence'>The type of a wide string literal is changed
from “array of <span id=':wchar_t__'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>”
to “array of <span class='texttt'><span class='keyword'>const</span> <span class='keyword'>wchar_<span class='shy'></span>t</span></span>”<a class='hidden_link' href='#lex-4.sentence-6'>.</a></div> <br/> <div id='lex-4.sentence-7' class='sentence'><b>Rationale:</b> This avoids calling an inappropriate overloaded function,
which might expect to be able to modify its argument<a class='hidden_link' href='#lex-4.sentence-7'>.</a></div> <br/> <div id='lex-4.sentence-8' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#lex-4.sentence-8'>.</a></div> <br/> <div id='lex-4.sentence-9' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#lex-4.sentence-9'>.</a></div> <div id='lex-4.sentence-10' class='sentence'>The fix is to add a cast:
<span class='codeblock'><span class='keyword'>char</span><span class='operator'>*</span> p <span class='operator'>=</span> <span class='literal'>"abc"</span>;                <span class='comment'>// valid in C, invalid in C++</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>char</span><span class='operator'>*</span> p <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>"abc"</span>;       <span class='comment'>// OK, cast added</span>
  f<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;
  f<span class='parenthesis'>(</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>"def"</span><span class='parenthesis'>)</span>;              <span class='comment'>// OK, cast added</span>
<span class='curlybracket'>}</span>
</span>
<br/></div> <div id='lex-4.sentence-11' class='sentence'><b>How widely used:</b> Programs that have a legitimate reason to treat string literal objects
as potentially modifiable memory are probably rare<a class='hidden_link' href='#lex-4.sentence-11'>.</a></div></div></div></div><div id='basic' class='section'><h3 ><a class='secnum' href='#basic' style='min-width:80pt'>C.7.3</a> <a href='basic' title='6&emsp;Basics'>[basic]</a>: basics <a class='abbr_ref' href='diff.basic'>[diff.basic]</a></h3><div class='para' id='basic-1'><div class='marginalizedparent'><a class='marginalized' href='#basic-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2317'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='basic.def'>[basic.<span class='shy'></span>def]</a>
<br/> <div id='basic-1.sentence-1' class='sentence'><b>Change:</b> C++ does not have “tentative definitions” as in C<a class='hidden_link' href='#basic-1.sentence-1'>.</a><br/></div> <div id='basic-1.sentence-2' class='sentence'>
E.g., at file scope,
<span class='codeblock'><span class='keyword'>int</span> i;
<span class='keyword'>int</span> i;
</span>
is valid in C, invalid in C++<a class='hidden_link' href='#basic-1.sentence-2'>.</a></div> <div id='basic-1.sentence-3' class='sentence'>This makes it impossible to define
mutually referential file-local objects with static storage duration,
if initializers are restricted to the syntactic forms of C<a class='hidden_link' href='#basic-1.sentence-3'>.</a></div> <div id='basic-1.sentence-4' class='sentence'>For example,
<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>int</span> i; <span class='keyword'>struct</span> X<span class='operator'>*</span> next; <span class='curlybracket'>}</span>;

<span class='keyword'>static</span> <span class='keyword'>struct</span> X a;
<span class='keyword'>static</span> <span class='keyword'>struct</span> X b <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>0</span>, <span class='operator'>&amp;</span>a <span class='curlybracket'>}</span>;
<span class='keyword'>static</span> <span class='keyword'>struct</span> X a <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='operator'>&amp;</span>b <span class='curlybracket'>}</span>;
</span>
<br/></div> <div id='basic-1.sentence-5' class='sentence'><b>Rationale:</b> This avoids having different initialization rules for
fundamental types and user-defined types<a class='hidden_link' href='#basic-1.sentence-5'>.</a></div> <br/> <div id='basic-1.sentence-6' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#basic-1.sentence-6'>.</a></div> <br/> <div id='basic-1.sentence-7' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#basic-1.sentence-7'>.</a></div> <div id='basic-1.sentence-8' class='sentence'>In C++, the initializer for one of a set of
mutually-referential file-local objects with static storage
duration must invoke a function
call to achieve the initialization<a class='hidden_link' href='#basic-1.sentence-8'>.</a></div> <br/> <div id='basic-1.sentence-9' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#basic-1.sentence-9'>.</a></div></div></div><div class='para' id='basic-2'><div class='marginalizedparent'><a class='marginalized' href='#basic-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2351'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='basic.scope'>[basic.<span class='shy'></span>scope]</a>
<br/> <div id='basic-2.sentence-1' class='sentence'><b>Change:</b> A <span id=':struct'><span class='texttt'><span class='keyword'>struct</span></span></span> is a scope in C++, not in C.
For example,
<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='keyword'>int</span> a; <span class='curlybracket'>}</span> b;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Y c;
</span>
is valid in C but not in C++, which would require <span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span>Y c;</span><a class='hidden_link' href='#basic-2.sentence-1'>.</a></div> <br/> <div id='basic-2.sentence-2' class='sentence'><b>Rationale:</b> Class scope is crucial to C++, and a struct is a class<a class='hidden_link' href='#basic-2.sentence-2'>.</a></div> <br/> <div id='basic-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#basic-2.sentence-3'>.</a></div> <br/> <div id='basic-2.sentence-4' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#basic-2.sentence-4'>.</a></div> <br/> <div id='basic-2.sentence-5' class='sentence'><b>How widely used:</b> C programs use <span id=':struct_'><span class='texttt'><span class='keyword'>struct</span></span></span> extremely frequently, but the
change is only noticeable when <span id=':struct__'><span class='texttt'><span class='keyword'>struct</span></span></span>, enumeration, or enumerator
names are referred to outside the <span id=':struct___'><span class='texttt'><span class='keyword'>struct</span></span></span><a class='hidden_link' href='#basic-2.sentence-5'>.</a></div> <div id='basic-2.sentence-6' class='sentence'>The latter is probably rare<a class='hidden_link' href='#basic-2.sentence-6'>.</a></div></div></div><div class='para' id='basic-3'><div class='marginalizedparent'><a class='marginalized' href='#basic-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2374'>#</a></div><div class='texpara'><div id='basic-3.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='basic.link'>[basic.<span class='shy'></span>link]</a> [also <a href='dcl.type' title='9.2.9&emsp;Type specifiers'>[dcl.<span class='shy'></span>type]</a>]
<br/></div> <div id='basic-3.sentence-2' class='sentence'><b>Change:</b> A name of file scope that is explicitly declared <span id=':const__'><span class='texttt'><span class='keyword'>const</span></span></span>, and not explicitly
declared <span id=':extern'><span class='texttt'><span class='keyword'>extern</span></span></span>, has internal linkage, while in C it would have external linkage<a class='hidden_link' href='#basic-3.sentence-2'>.</a></div> <br/> <div id='basic-3.sentence-3' class='sentence'><b>Rationale:</b> Because const objects may be used as values during translation in
C++, this feature urges programmers to provide an explicit initializer
for each const object<a class='hidden_link' href='#basic-3.sentence-3'>.</a></div> <div id='basic-3.sentence-4' class='sentence'>This feature allows the user to put const objects in source files that are included
in more than one translation unit<a class='hidden_link' href='#basic-3.sentence-4'>.</a></div> <br/> <div id='basic-3.sentence-5' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#basic-3.sentence-5'>.</a></div> <br/> <div id='basic-3.sentence-6' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#basic-3.sentence-6'>.</a></div> <br/> <div id='basic-3.sentence-7' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#basic-3.sentence-7'>.</a></div></div></div><div class='para' id='basic-4'><div class='marginalizedparent'><a class='marginalized' href='#basic-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2391'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='basic.start.main'>[basic.<span class='shy'></span>start.<span class='shy'></span>main]</a>
<br/> <div id='basic-4.sentence-1' class='sentence'><b>Change:</b> The <span class='texttt'>main</span> function cannot be called recursively and cannot have its address taken<a class='hidden_link' href='#basic-4.sentence-1'>.</a></div> <br/> <div id='basic-4.sentence-2' class='sentence'><b>Rationale:</b> The <span class='texttt'>main</span> function may require special actions<a class='hidden_link' href='#basic-4.sentence-2'>.</a></div> <br/> <div id='basic-4.sentence-3' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#basic-4.sentence-3'>.</a></div> <br/> <div id='basic-4.sentence-4' class='sentence'><b>Difficulty of converting:</b> Trivial: create an intermediary function such as
<span class='texttt'>mymain<span class='parenthesis'>(</span>argc, argv<span class='parenthesis'>)</span></span><a class='hidden_link' href='#basic-4.sentence-4'>.</a></div> <br/> <div id='basic-4.sentence-5' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#basic-4.sentence-5'>.</a></div></div></div><div class='para' id='basic-5'><div class='marginalizedparent'><a class='marginalized' href='#basic-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2404'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='basic.types'>[basic.<span class='shy'></span>types]</a>
<br/> <div id='basic-5.sentence-1' class='sentence'><b>Change:</b> C allows “compatible types” in several places, C++ does not<a class='hidden_link' href='#basic-5.sentence-1'>.</a></div> <br/> <div id='basic-5.sentence-2' class='sentence'>
For example,
otherwise-identical <span id=':struct____'><span class='texttt'><span class='keyword'>struct</span></span></span> types with different tag names
are “compatible” in C but are distinctly different types
in C++<a class='hidden_link' href='#basic-5.sentence-2'>.</a></div> <br/> <div id='basic-5.sentence-3' class='sentence'><b>Rationale:</b> Stricter type checking is essential for C++<a class='hidden_link' href='#basic-5.sentence-3'>.</a></div> <br/> <div id='basic-5.sentence-4' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#basic-5.sentence-4'>.</a></div> <br/> <div id='basic-5.sentence-5' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#basic-5.sentence-5'>.</a></div> <div id='basic-5.sentence-6' class='sentence'>The “typesafe linkage” mechanism will find many, but not all,
of such problems<a class='hidden_link' href='#basic-5.sentence-6'>.</a></div> <div id='basic-5.sentence-7' class='sentence'>Those problems not found by typesafe linkage will continue to
function properly,
according to the “layout compatibility rules” of this
document<a class='hidden_link' href='#basic-5.sentence-7'>.</a></div> <br/> <div id='basic-5.sentence-8' class='sentence'><b>How widely used:</b> Common<a class='hidden_link' href='#basic-5.sentence-8'>.</a></div></div></div></div><div id='expr' class='section'><h3 ><a class='secnum' href='#expr' style='min-width:80pt'>C.7.4</a> <a href='expr' title='7&emsp;Expressions'>[expr]</a>: expressions <a class='abbr_ref' href='diff.expr'>[diff.expr]</a></h3><div class='para' id='expr-1'><div class='marginalizedparent'><a class='marginalized' href='#expr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2428'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='conv.ptr'>[conv.<span class='shy'></span>ptr]</a>
<br/> <div id='expr-1.sentence-1' class='sentence'><b>Change:</b> Converting <span class='texttt'><span id=':void___'><span class='texttt'><span class='keyword'>void</span></span></span><span class='operator'>*</span></span> to a pointer-to-object type requires casting<a class='hidden_link' href='#expr-1.sentence-1'>.</a></div> <span class='codeblock'><span class='keyword'>char</span> a<span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span>;
<span class='keyword'>void</span><span class='operator'>*</span> b<span class='operator'>=</span>a;
<span class='keyword'>void</span> foo<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>char</span><span class='operator'>*</span> c<span class='operator'>=</span>b;
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='expr-1.sentence-2' class='sentence'>ISO C accepts this usage of pointer to <span id=':void____'><span class='texttt'><span class='keyword'>void</span></span></span> being assigned
to a pointer to object type<a class='hidden_link' href='#expr-1.sentence-2'>.</a></div> <div id='expr-1.sentence-3' class='sentence'>C++ does not<a class='hidden_link' href='#expr-1.sentence-3'>.</a></div> <br/> <div id='expr-1.sentence-4' class='sentence'><b>Rationale:</b> C++ tries harder than C to enforce compile-time type safety<a class='hidden_link' href='#expr-1.sentence-4'>.</a></div> <br/> <div id='expr-1.sentence-5' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#expr-1.sentence-5'>.</a></div> <br/> <div id='expr-1.sentence-6' class='sentence'><b>Difficulty of converting:</b> Can be automated<a class='hidden_link' href='#expr-1.sentence-6'>.</a></div> <div id='expr-1.sentence-7' class='sentence'>Violations will be diagnosed by the C++ translator<a class='hidden_link' href='#expr-1.sentence-7'>.</a></div> <div id='expr-1.sentence-8' class='sentence'>The
fix is to add a  cast<a class='hidden_link' href='#expr-1.sentence-8'>.</a></div> <div id='expr-1.sentence-9' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>char</span><span class='operator'>*</span> c <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span> b;
</span></div></div><div class='texpara'><br/> <div id='expr-1.sentence-10' class='sentence'><b>How widely used:</b> This is fairly widely used but it is good
programming practice to add the cast when assigning pointer-to-void to pointer-to-object<a class='hidden_link' href='#expr-1.sentence-10'>.</a></div> <div id='expr-1.sentence-11' class='sentence'>Some ISO C translators will give a warning
if the cast is not used<a class='hidden_link' href='#expr-1.sentence-11'>.</a></div></div></div><div class='para' id='expr-2'><div class='marginalizedparent'><a class='marginalized' href='#expr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2462'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='expr.post.incr'>[expr.<span class='shy'></span>post.<span class='shy'></span>incr]</a> and <a href='expr.pre.incr'>[expr.<span class='shy'></span>pre.<span class='shy'></span>incr]</a>
<br/> <div id='expr-2.sentence-1' class='sentence'><b>Change:</b> Decrement operator is not allowed with <span id=':bool'><span class='texttt'><span class='keyword'>bool</span></span></span> operand<a class='hidden_link' href='#expr-2.sentence-1'>.</a></div> <br/> <div id='expr-2.sentence-2' class='sentence'><b>Rationale:</b> Feature with surprising semantics<a class='hidden_link' href='#expr-2.sentence-2'>.</a></div> <br/> <div id='expr-2.sentence-3' class='sentence'><b>Effect on original feature:</b> A valid ISO C expression utilizing the decrement operator on
a <span id=':bool_'><span class='texttt'><span class='keyword'>bool</span></span></span> lvalue
(for instance, via the C typedef in <a href='depr.c.macros#header:%3cstdbool.h%3e' title='D.12&emsp;Deprecated C macros&emsp;[depr.c.macros]'><span id='headerref:<stdbool.h>'><span class='texttt'>&lt;stdbool.h&gt;</span></span></a>)
is ill-formed in C++<a class='hidden_link' href='#expr-2.sentence-3'>.</a></div></div></div><div class='para' id='expr-3'><div class='marginalizedparent'><a class='marginalized' href='#expr-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2473'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='expr.sizeof'>[expr.<span class='shy'></span>sizeof]</a> and <a href='expr.cast'>[expr.<span class='shy'></span>cast]</a>
<br/> <div id='expr-3.sentence-1' class='sentence'><b>Change:</b> In C++, types can only be defined in declarations, not in expressions<a class='hidden_link' href='#expr-3.sentence-1'>.</a></div> <br/> <div id='expr-3.sentence-2' class='sentence'>
In C, a <span id=':sizeof'><span class='texttt'><span class='keyword'>sizeof</span></span></span> expression or cast expression may define a new type<a class='hidden_link' href='#expr-3.sentence-2'>.</a></div> <div id='expr-3.sentence-3' class='sentence'>For example,
<span class='codeblock'>p <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='keyword'>void</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>struct</span> x <span class='curlybracket'>{</span><span class='keyword'>int</span> i;<span class='curlybracket'>}</span> <span class='operator'>*</span><span class='parenthesis'>)</span><span class='literal'>0</span>;
</span>
defines a new type, struct <span class='texttt'>x</span><a class='hidden_link' href='#expr-3.sentence-3'>.</a></div> <br/> <div id='expr-3.sentence-4' class='sentence'><b>Rationale:</b> This prohibition helps to clarify the location of
definitions in the source code<a class='hidden_link' href='#expr-3.sentence-4'>.</a></div> <br/> <div id='expr-3.sentence-5' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#expr-3.sentence-5'>.</a></div> <br/> <div id='expr-3.sentence-6' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#expr-3.sentence-6'>.</a></div> <br/> <div id='expr-3.sentence-7' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#expr-3.sentence-7'>.</a></div></div></div><div class='para' id='expr-4'><div class='marginalizedparent'><a class='marginalized' href='#expr-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2492'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='expr.cond'>[expr.<span class='shy'></span>cond]</a>, <a href='expr.ass'>[expr.<span class='shy'></span>ass]</a>, and <a href='expr.comma'>[expr.<span class='shy'></span>comma]</a>
<a class='index' id=':conversion,lvalue-to-rvalue'></a><a class='index' id=':rvalue,lvalue_conversion_to'></a><a class='index' id=':lvalue'></a><br/> <div id='expr-4.sentence-1' class='sentence'><b>Change:</b> The result of a conditional expression, an assignment expression, or a comma expression may be an lvalue<a class='hidden_link' href='#expr-4.sentence-1'>.</a></div> <br/> <div id='expr-4.sentence-2' class='sentence'><b>Rationale:</b> C++ is an object-oriented language, placing relatively
more emphasis on lvalues<a class='hidden_link' href='#expr-4.sentence-2'>.</a></div> <div id='expr-4.sentence-3' class='sentence'>For example, function calls may
yield lvalues<a class='hidden_link' href='#expr-4.sentence-3'>.</a></div> <br/> <div id='expr-4.sentence-4' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#expr-4.sentence-4'>.</a></div> <div id='expr-4.sentence-5' class='sentence'>Some C
expressions that implicitly rely on lvalue-to-rvalue
conversions will yield different results<a class='hidden_link' href='#expr-4.sentence-5'>.</a></div> <div id='expr-4.sentence-6' class='sentence'>For example,
<span class='codeblock'><span class='keyword'>char</span> arr<span class='squarebracket'>[</span><span class='literal'>100</span><span class='squarebracket'>]</span>;
<span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='literal'>0</span>, arr<span class='parenthesis'>)</span>
</span>
yields
<span class='texttt'><span class='literal'>100</span></span>
in C++ and
<span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='parenthesis'>)</span></span>
in C<a class='hidden_link' href='#expr-4.sentence-6'>.</a><br/></div> <div id='expr-4.sentence-7' class='sentence'><b>Difficulty of converting:</b> Programs must add explicit casts to the appropriate rvalue<a class='hidden_link' href='#expr-4.sentence-7'>.</a></div> <br/> <div id='expr-4.sentence-8' class='sentence'><b>How widely used:</b> Rare<a class='hidden_link' href='#expr-4.sentence-8'>.</a></div></div></div></div><div id='stat' class='section'><h3 ><a class='secnum' href='#stat' style='min-width:80pt'>C.7.5</a> <a href='stmt.stmt' title='8&emsp;Statements'>[stmt.<span class='shy'></span>stmt]</a>: statements <a class='abbr_ref' href='diff.stat'>[diff.stat]</a></h3><div class='para' id='stat-1'><div class='marginalizedparent'><a class='marginalized' href='#stat-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2523'>#</a></div><div class='texpara'><b>Affected subclauses:</b> <a href='stmt.switch'>[stmt.<span class='shy'></span>switch]</a> and <a href='stmt.goto'>[stmt.<span class='shy'></span>goto]</a>
<br/> <div id='stat-1.sentence-1' class='sentence'><b>Change:</b> It is now invalid to jump past a declaration with explicit or implicit initializer (except across entire block not entered)<a class='hidden_link' href='#stat-1.sentence-1'>.</a></div> <br/> <div id='stat-1.sentence-2' class='sentence'><b>Rationale:</b> Constructors used in initializers may allocate
resources which need to be de-allocated upon leaving the
block<a class='hidden_link' href='#stat-1.sentence-2'>.</a></div> <div id='stat-1.sentence-3' class='sentence'>Allowing jump past initializers would require
complicated runtime determination of allocation<a class='hidden_link' href='#stat-1.sentence-3'>.</a></div> <div id='stat-1.sentence-4' class='sentence'>Furthermore, many operations on such an uninitialized object
have undefined behavior<a class='hidden_link' href='#stat-1.sentence-4'>.</a></div> <div id='stat-1.sentence-5' class='sentence'>With this simple compile-time rule, C++ assures that
if an initialized variable is in scope, then it has assuredly been
initialized<a class='hidden_link' href='#stat-1.sentence-5'>.</a></div> <br/> <div id='stat-1.sentence-6' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#stat-1.sentence-6'>.</a></div> <br/> <div id='stat-1.sentence-7' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#stat-1.sentence-7'>.</a></div> <br/> <div id='stat-1.sentence-8' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#stat-1.sentence-8'>.</a></div></div></div><div class='para' id='stat-2'><div class='marginalizedparent'><a class='marginalized' href='#stat-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2544'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='stmt.return'>[stmt.<span class='shy'></span>return]</a>
<br/> <div id='stat-2.sentence-1' class='sentence'><b>Change:</b> It is now invalid to return (explicitly or implicitly) from a function which is
declared to return a value without actually returning a value<a class='hidden_link' href='#stat-2.sentence-1'>.</a></div> <br/> <div id='stat-2.sentence-2' class='sentence'><b>Rationale:</b> The caller and callee may assume fairly elaborate
return-value mechanisms for the return of class objects<a class='hidden_link' href='#stat-2.sentence-2'>.</a></div> <div id='stat-2.sentence-3' class='sentence'>If
some flow paths execute a return without specifying any value,
the implementation must embody many more complications<a class='hidden_link' href='#stat-2.sentence-3'>.</a></div> <div id='stat-2.sentence-4' class='sentence'>Besides,
promising to return a value of a given type, and then not returning
such a value, has always been recognized to be a questionable
practice, tolerated only because very-old C had no distinction between
functions with <span id=':void_____'><span class='texttt'><span class='keyword'>void</span></span></span> and <span id=':int'><span class='texttt'><span class='keyword'>int</span></span></span> return types<a class='hidden_link' href='#stat-2.sentence-4'>.</a></div> <br/> <div id='stat-2.sentence-5' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#stat-2.sentence-5'>.</a></div> <br/> <div id='stat-2.sentence-6' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#stat-2.sentence-6'>.</a></div> <div id='stat-2.sentence-7' class='sentence'>Add an appropriate return value to the source code, such as zero<a class='hidden_link' href='#stat-2.sentence-7'>.</a></div> <br/> <div id='stat-2.sentence-8' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#stat-2.sentence-8'>.</a></div> <div id='stat-2.sentence-9' class='sentence'>For several years, many existing C implementations have produced warnings in
this case<a class='hidden_link' href='#stat-2.sentence-9'>.</a></div></div></div></div><div id='dcl' class='section'><h3 ><a class='secnum' href='#dcl' style='min-width:80pt'>C.7.6</a> <a href='dcl.dcl' title='9&emsp;Declarations'>[dcl.<span class='shy'></span>dcl]</a>: declarations <a class='abbr_ref' href='diff.dcl'>[diff.dcl]</a></h3><div class='para' id='dcl-1'><div class='marginalizedparent'><a class='marginalized' href='#dcl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2571'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.stc'>[dcl.<span class='shy'></span>stc]</a>
<br/> <div id='dcl-1.sentence-1' class='sentence'><b>Change:</b> In C++, the <span id=':static'><span class='texttt'><span class='keyword'>static</span></span></span> or <span id=':extern_'><span class='texttt'><span class='keyword'>extern</span></span></span> specifiers can only be applied to names of objects or functions<a class='hidden_link' href='#dcl-1.sentence-1'>.</a></div> <br/> <div id='dcl-1.sentence-2' class='sentence'>
Using these specifiers with type declarations is illegal in C++<a class='hidden_link' href='#dcl-1.sentence-2'>.</a></div> <div id='dcl-1.sentence-3' class='sentence'>In C, these specifiers are ignored when used on type declarations<a class='hidden_link' href='#dcl-1.sentence-3'>.</a></div></div><div class='texpara'><div id='dcl-1.sentence-4' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>static</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span>               <span class='comment'>// valid C, invalid in C++</span>
  <span class='keyword'>int</span> i;
<span class='curlybracket'>}</span>;
</span></div></div><div class='texpara'><br/> <div id='dcl-1.sentence-5' class='sentence'><b>Rationale:</b> Storage class specifiers don't have any meaning when associated
with a type<a class='hidden_link' href='#dcl-1.sentence-5'>.</a></div> <div id='dcl-1.sentence-6' class='sentence'>In C++, class members can be declared with the <span id=':static_'><span class='texttt'><span class='keyword'>static</span></span></span> storage
class specifier<a class='hidden_link' href='#dcl-1.sentence-6'>.</a></div> <div id='dcl-1.sentence-7' class='sentence'>Storage class specifiers on type
declarations can be confusing for users<a class='hidden_link' href='#dcl-1.sentence-7'>.</a></div> <br/> <div id='dcl-1.sentence-8' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#dcl-1.sentence-8'>.</a></div> <br/> <div id='dcl-1.sentence-9' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#dcl-1.sentence-9'>.</a></div> <br/> <div id='dcl-1.sentence-10' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#dcl-1.sentence-10'>.</a></div></div></div><div class='para' id='dcl-2'><div class='marginalizedparent'><a class='marginalized' href='#dcl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2598'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.stc'>[dcl.<span class='shy'></span>stc]</a>
<br/> <div id='dcl-2.sentence-1' class='sentence'><b>Change:</b> In C++, <span id=':register__'><span class='texttt'><span class='keyword'>register</span></span></span> is not a storage class specifier<a class='hidden_link' href='#dcl-2.sentence-1'>.</a></div> <br/> <div id='dcl-2.sentence-2' class='sentence'><b>Rationale:</b> The storage class specifier had no effect in C++<a class='hidden_link' href='#dcl-2.sentence-2'>.</a></div> <br/> <div id='dcl-2.sentence-3' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#dcl-2.sentence-3'>.</a></div> <br/> <div id='dcl-2.sentence-4' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#dcl-2.sentence-4'>.</a></div> <br/> <div id='dcl-2.sentence-5' class='sentence'><b>How widely used:</b> Common<a class='hidden_link' href='#dcl-2.sentence-5'>.</a></div></div></div><div class='para' id='dcl-3'><div class='marginalizedparent'><a class='marginalized' href='#dcl-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2610'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.typedef'>[dcl.<span class='shy'></span>typedef]</a>
<br/> <div id='dcl-3.sentence-1' class='sentence'><b>Change:</b> A C++ <a href='dcl.typedef#nt:typedef-name' title='9.2.4&emsp;The typedef specifier&emsp;[dcl.typedef]'><span id='ntref:typedef-name'><span class='textsf'><i >typedef-name</i></span></span></a> must be different from any class type name declared
in the same scope (except if the typedef is a synonym of the class name with the
same name)<a class='hidden_link' href='#dcl-3.sentence-1'>.</a></div> <div id='dcl-3.sentence-2' class='sentence'>In C, a <a href='dcl.typedef#nt:typedef-name' title='9.2.4&emsp;The typedef specifier&emsp;[dcl.typedef]'><span id='ntref:typedef-name_'><span class='textsf'><i >typedef-name</i></span></span></a> and a struct tag name declared in the same scope
can have the same name (because they have different name spaces)<a class='hidden_link' href='#dcl-3.sentence-2'>.</a></div></div><div class='texpara'><div id='dcl-3.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>typedef</span> <span class='keyword'>struct</span> name1 <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span> name1;         <span class='comment'>// valid C and C++</span>
<span class='keyword'>struct</span> name <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>typedef</span> <span class='keyword'>int</span> name;               <span class='comment'>// valid C, invalid C++</span>
</span></div></div><div class='texpara'><br/> <div id='dcl-3.sentence-4' class='sentence'><b>Rationale:</b> For ease of use, C++ doesn't require that a type name be prefixed
with the keywords <span id=':class'><span class='texttt'><span class='keyword'>class</span></span></span>, <span id=':struct_____'><span class='texttt'><span class='keyword'>struct</span></span></span> or <span id=':union'><span class='texttt'><span class='keyword'>union</span></span></span> when used in object
declarations or type casts<a class='hidden_link' href='#dcl-3.sentence-4'>.</a></div></div><div class='texpara'><div id='dcl-3.sentence-5' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>class</span> name <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
name i;                         <span class='comment'>// <span class='tcode_in_codeblock'>i</span> has type <span class='tcode_in_codeblock'>class name</span></span>
</span></div></div><div class='texpara'><br/> <div id='dcl-3.sentence-6' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#dcl-3.sentence-6'>.</a></div> <br/> <div id='dcl-3.sentence-7' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#dcl-3.sentence-7'>.</a></div> <div id='dcl-3.sentence-8' class='sentence'>One of the 2 types has to be renamed<a class='hidden_link' href='#dcl-3.sentence-8'>.</a></div> <br/> <div id='dcl-3.sentence-9' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#dcl-3.sentence-9'>.</a></div></div></div><div class='para' id='dcl-4'><div class='marginalizedparent'><a class='marginalized' href='#dcl-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2643'>#</a></div><div class='texpara'><div id='dcl-4.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='dcl.type'>[dcl.<span class='shy'></span>type]</a> [see also <a href='basic.link' title='6.6&emsp;Program and linkage'>[basic.<span class='shy'></span>link]</a>]
<br/></div> <div id='dcl-4.sentence-2' class='sentence'><b>Change:</b> Const objects must be initialized in C++ but can be left uninitialized in C<a class='hidden_link' href='#dcl-4.sentence-2'>.</a><br/></div> <div id='dcl-4.sentence-3' class='sentence'><b>Rationale:</b> A const object cannot be assigned to so it must be initialized
to hold a useful value<a class='hidden_link' href='#dcl-4.sentence-3'>.</a></div> <br/> <div id='dcl-4.sentence-4' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#dcl-4.sentence-4'>.</a></div> <br/> <div id='dcl-4.sentence-5' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#dcl-4.sentence-5'>.</a></div> <br/> <div id='dcl-4.sentence-6' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#dcl-4.sentence-6'>.</a></div></div></div><div class='para' id='dcl-5'><div class='marginalizedparent'><a class='marginalized' href='#dcl-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2656'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.spec.auto'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>
<br/> <div id='dcl-5.sentence-1' class='sentence'><b>Change:</b> The keyword <span id=':auto____'><span class='texttt'><span class='keyword'>auto</span></span></span> cannot be used as a storage class specifier<a class='hidden_link' href='#dcl-5.sentence-1'>.</a></div></div><div class='texpara'><div id='dcl-5.sentence-2' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>auto</span> <span class='keyword'>int</span> x;       <span class='comment'>// valid C, invalid C++</span>
<span class='curlybracket'>}</span>
</span></div></div><div class='texpara'><br/> <div id='dcl-5.sentence-3' class='sentence'><b>Rationale:</b> Allowing the use of <span id=':auto_____'><span class='texttt'><span class='keyword'>auto</span></span></span> to deduce the type
of a variable from its initializer results in undesired interpretations of
<span id=':auto______'><span class='texttt'><span class='keyword'>auto</span></span></span> as a storage class specifier in certain contexts<a class='hidden_link' href='#dcl-5.sentence-3'>.</a></div> <br/> <div id='dcl-5.sentence-4' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#dcl-5.sentence-4'>.</a></div> <br/> <div id='dcl-5.sentence-5' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#dcl-5.sentence-5'>.</a></div> <br/> <div id='dcl-5.sentence-6' class='sentence'><b>How widely used:</b> Rare<a class='hidden_link' href='#dcl-5.sentence-6'>.</a></div></div></div><div class='para' id='dcl-6'><div class='marginalizedparent'><a class='marginalized' href='#dcl-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2678'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.fct'>[dcl.<span class='shy'></span>fct]</a>
<br/> <div id='dcl-6.sentence-1' class='sentence'><b>Change:</b> In C++, a function declared with an empty parameter list takes no arguments<a class='hidden_link' href='#dcl-6.sentence-1'>.</a></div> <div id='dcl-6.sentence-2' class='sentence'>In C, an empty parameter list means that the number and type of the function arguments are unknown<a class='hidden_link' href='#dcl-6.sentence-2'>.</a></div></div><div class='texpara'><div id='dcl-6.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;            <span class='comment'>// means   <span class='tcode_in_codeblock'>int f(void)</span> in C++</span>
                    <span class='comment'>// <span class='tcode_in_codeblock'>int f(</span> unknown <span class='tcode_in_codeblock'>)</span> in C</span>
</span></div></div><div class='texpara'><br/> <div id='dcl-6.sentence-4' class='sentence'><b>Rationale:</b> This is to avoid erroneous function calls (i.e., function calls
with the wrong number or type of arguments)<a class='hidden_link' href='#dcl-6.sentence-4'>.</a></div> <br/> <div id='dcl-6.sentence-5' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#dcl-6.sentence-5'>.</a></div> <div id='dcl-6.sentence-6' class='sentence'>This feature was marked as “obsolescent” in C<a class='hidden_link' href='#dcl-6.sentence-6'>.</a><br/></div> <div id='dcl-6.sentence-7' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#dcl-6.sentence-7'>.</a></div> <div id='dcl-6.sentence-8' class='sentence'>The function declarations using C incomplete declaration style must
be completed to become full prototype declarations<a class='hidden_link' href='#dcl-6.sentence-8'>.</a></div> <div id='dcl-6.sentence-9' class='sentence'>A program may need to be updated further if different calls to the
same (non-prototype) function have different numbers of arguments or
if the type of corresponding arguments differed<a class='hidden_link' href='#dcl-6.sentence-9'>.</a></div> <br/> <div id='dcl-6.sentence-10' class='sentence'><b>How widely used:</b> Common<a class='hidden_link' href='#dcl-6.sentence-10'>.</a></div></div></div><div class='para' id='dcl-7'><div class='marginalizedparent'><a class='marginalized' href='#dcl-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2705'>#</a></div><div class='texpara'><div id='dcl-7.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='dcl.fct'>[dcl.<span class='shy'></span>fct]</a> [see <a href='expr.sizeof' title='7.6.2.5&emsp;Sizeof'>[expr.<span class='shy'></span>sizeof]</a>]
<br/></div> <div id='dcl-7.sentence-2' class='sentence'><b>Change:</b> In C++, types may not be defined in return or parameter types<a class='hidden_link' href='#dcl-7.sentence-2'>.</a></div> <div id='dcl-7.sentence-3' class='sentence'>In C, these type definitions are allowed<a class='hidden_link' href='#dcl-7.sentence-3'>.</a></div></div><div class='texpara'><div id='dcl-7.sentence-4' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>int</span> a; <span class='curlybracket'>}</span> arg <span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>    <span class='comment'>// valid C, invalid C++</span>
<span class='keyword'>enum</span> E <span class='curlybracket'>{</span> A, B, C <span class='curlybracket'>}</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>               <span class='comment'>// valid C, invalid C++</span>
</span></div></div><div class='texpara'><br/> <div id='dcl-7.sentence-5' class='sentence'><b>Rationale:</b> When comparing types in different translation units, C++ relies
on name equivalence when C relies on structural equivalence<a class='hidden_link' href='#dcl-7.sentence-5'>.</a></div> <div id='dcl-7.sentence-6' class='sentence'>Regarding parameter types: since the type defined in a parameter list
would be in the scope of the function, the only legal calls in C++
would be from within the function itself<a class='hidden_link' href='#dcl-7.sentence-6'>.</a></div> <br/> <div id='dcl-7.sentence-7' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#dcl-7.sentence-7'>.</a></div> <br/> <div id='dcl-7.sentence-8' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#dcl-7.sentence-8'>.</a></div> <div id='dcl-7.sentence-9' class='sentence'>The type definitions must be moved to file scope, or in header files<a class='hidden_link' href='#dcl-7.sentence-9'>.</a></div> <br/> <div id='dcl-7.sentence-10' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#dcl-7.sentence-10'>.</a></div> <div id='dcl-7.sentence-11' class='sentence'>This style of type definition is seen as poor coding style<a class='hidden_link' href='#dcl-7.sentence-11'>.</a></div></div></div><div class='para' id='dcl-8'><div class='marginalizedparent'><a class='marginalized' href='#dcl-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2731'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.fct.def'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def]</a>
<br/> <div id='dcl-8.sentence-1' class='sentence'><b>Change:</b> In C++, the syntax for function definition excludes the “old-style” C function<a class='hidden_link' href='#dcl-8.sentence-1'>.</a></div> <div id='dcl-8.sentence-2' class='sentence'>In C, “old-style” syntax is allowed, but deprecated as “obsolescent”<a class='hidden_link' href='#dcl-8.sentence-2'>.</a></div> <br/> <div id='dcl-8.sentence-3' class='sentence'><b>Rationale:</b> Prototypes are essential to type safety<a class='hidden_link' href='#dcl-8.sentence-3'>.</a></div> <br/> <div id='dcl-8.sentence-4' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#dcl-8.sentence-4'>.</a></div> <br/> <div id='dcl-8.sentence-5' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#dcl-8.sentence-5'>.</a></div> <br/> <div id='dcl-8.sentence-6' class='sentence'><b>How widely used:</b> Common in old programs, but already known to be obsolescent<a class='hidden_link' href='#dcl-8.sentence-6'>.</a></div></div></div><div class='para' id='dcl-9'><div class='marginalizedparent'><a class='marginalized' href='#dcl-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2744'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.aggr'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a>
<br/> <div id='dcl-9.sentence-1' class='sentence'><b>Change:</b> In C++, designated initialization support is restricted
compared to the corresponding functionality in C<a class='hidden_link' href='#dcl-9.sentence-1'>.</a></div> <div id='dcl-9.sentence-2' class='sentence'>In C++,
designators for non-static data members
must be specified in declaration order,
designators for array elements and nested designators
are not supported,
and
designated and non-designated initializers
cannot be mixed in the same initializer list<a class='hidden_link' href='#dcl-9.sentence-2'>.</a></div></div><div class='texpara'><div id='dcl-9.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>int</span> x, y; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='keyword'>struct</span> A a; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> A a <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='operator'>.</span>y <span class='operator'>=</span> <span class='literal'>1</span>, <span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>2</span><span class='curlybracket'>}</span>;  <span class='comment'>// valid C, invalid C++</span>
<span class='keyword'>int</span> arr<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='literal'>5</span><span class='curlybracket'>}</span>;         <span class='comment'>// valid C, invalid C++</span>
<span class='keyword'>struct</span> B b <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='operator'>.</span>a<span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>0</span><span class='curlybracket'>}</span>;        <span class='comment'>// valid C, invalid C++</span>
<span class='keyword'>struct</span> A c <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span>;       <span class='comment'>// valid C, invalid C++</span>
</span>
<br/></div> <div id='dcl-9.sentence-4' class='sentence'><b>Rationale:</b> In C++, members are destroyed in reverse construction order
and the elements of an initializer list are evaluated in lexical order,
so field initializers must be specified in order<a class='hidden_link' href='#dcl-9.sentence-4'>.</a></div> <div id='dcl-9.sentence-5' class='sentence'>Array designators conflict with <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression'><span class='textsf'><i >lambda-expression</i></span></span></a> syntax<a class='hidden_link' href='#dcl-9.sentence-5'>.</a></div> <div id='dcl-9.sentence-6' class='sentence'>Nested designators are seldom used<a class='hidden_link' href='#dcl-9.sentence-6'>.</a></div> <br/> <div id='dcl-9.sentence-7' class='sentence'><b>Effect on original feature:</b> Deletion of feature that is incompatible with C++<a class='hidden_link' href='#dcl-9.sentence-7'>.</a></div> <br/> <div id='dcl-9.sentence-8' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#dcl-9.sentence-8'>.</a></div> <br/> <div id='dcl-9.sentence-9' class='sentence'><b>How widely used:</b> Out-of-order initializers are common<a class='hidden_link' href='#dcl-9.sentence-9'>.</a></div> <div id='dcl-9.sentence-10' class='sentence'>The other features are seldom used<a class='hidden_link' href='#dcl-9.sentence-10'>.</a></div></div></div><div class='para' id='dcl-10'><div class='marginalizedparent'><a class='marginalized' href='#dcl-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2780'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.init.string'>[dcl.<span class='shy'></span>init.<span class='shy'></span>string]</a>
<br/> <div id='dcl-10.sentence-1' class='sentence'><b>Change:</b> In C++, when initializing an array of character with a string, the number of
characters in the string (including the terminating <span class='texttt'>'\<span class='literal'>0</span>'</span>) must not exceed the
number of elements in the array<a class='hidden_link' href='#dcl-10.sentence-1'>.</a></div> <div id='dcl-10.sentence-2' class='sentence'>In C, an array can be initialized with a string even if
the array is not large enough to contain the string-terminating <span class='texttt'>'\<span class='literal'>0</span>'</span><a class='hidden_link' href='#dcl-10.sentence-2'>.</a></div></div><div class='texpara'><div id='dcl-10.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>char</span> array<span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='literal'>"abcd"</span>;         <span class='comment'>// valid C, invalid C++</span>
</span>
<br/></div> <div id='dcl-10.sentence-4' class='sentence'><b>Rationale:</b> When these non-terminated arrays are manipulated by standard
string functions, there is potential for major catastrophe<a class='hidden_link' href='#dcl-10.sentence-4'>.</a></div> <br/> <div id='dcl-10.sentence-5' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#dcl-10.sentence-5'>.</a></div> <br/> <div id='dcl-10.sentence-6' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#dcl-10.sentence-6'>.</a></div> <div id='dcl-10.sentence-7' class='sentence'>The arrays must be declared one element bigger to contain the
string terminating <span class='texttt'>'\<span class='literal'>0</span>'</span><a class='hidden_link' href='#dcl-10.sentence-7'>.</a></div> <br/> <div id='dcl-10.sentence-8' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#dcl-10.sentence-8'>.</a></div> <div id='dcl-10.sentence-9' class='sentence'>This style of array initialization is seen as poor coding style<a class='hidden_link' href='#dcl-10.sentence-9'>.</a></div></div></div><div class='para' id='dcl-11'><div class='marginalizedparent'><a class='marginalized' href='#dcl-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2804'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.enum'>[dcl.<span class='shy'></span>enum]</a>
<br/> <div id='dcl-11.sentence-1' class='sentence'><b>Change:</b> C++ objects of enumeration type can only be assigned values of the same enumeration type<a class='hidden_link' href='#dcl-11.sentence-1'>.</a></div> <div id='dcl-11.sentence-2' class='sentence'>In C, objects of enumeration type can be assigned values of any integral type<a class='hidden_link' href='#dcl-11.sentence-2'>.</a></div></div><div class='texpara'><div id='dcl-11.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>enum</span> color <span class='curlybracket'>{</span> red, blue, green <span class='curlybracket'>}</span>;
<span class='keyword'>enum</span> color c <span class='operator'>=</span> <span class='literal'>1</span>;               <span class='comment'>// valid C, invalid C++</span>
</span></div></div><div class='texpara'><br/> <div id='dcl-11.sentence-4' class='sentence'><b>Rationale:</b> The type-safe nature of C++<a class='hidden_link' href='#dcl-11.sentence-4'>.</a></div> <br/> <div id='dcl-11.sentence-5' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#dcl-11.sentence-5'>.</a></div> <br/> <div id='dcl-11.sentence-6' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#dcl-11.sentence-6'>.</a></div> <div id='dcl-11.sentence-7' class='sentence'>(The type error produced by the assignment can be automatically
corrected by applying an explicit cast<a class='hidden_link' href='#dcl-11.sentence-7'>.</a>)</div> <br/> <div id='dcl-11.sentence-8' class='sentence'><b>How widely used:</b> Common<a class='hidden_link' href='#dcl-11.sentence-8'>.</a></div></div></div><div class='para' id='dcl-12'><div class='marginalizedparent'><a class='marginalized' href='#dcl-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2826'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.enum'>[dcl.<span class='shy'></span>enum]</a>
<br/> <div id='dcl-12.sentence-1' class='sentence'><b>Change:</b> In C++, the type of an enumerator is its enumeration<a class='hidden_link' href='#dcl-12.sentence-1'>.</a></div> <div id='dcl-12.sentence-2' class='sentence'>In C, the type of an enumerator is <span id=':int_'><span class='texttt'><span class='keyword'>int</span></span></span><a class='hidden_link' href='#dcl-12.sentence-2'>.</a></div></div><div class='texpara'><div id='dcl-12.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>enum</span> e <span class='curlybracket'>{</span> A <span class='curlybracket'>}</span>;
<span class='keyword'>sizeof</span><span class='parenthesis'>(</span>A<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>        <span class='comment'>// in C</span>
<span class='keyword'>sizeof</span><span class='parenthesis'>(</span>A<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>e<span class='parenthesis'>)</span>          <span class='comment'>// in C++</span>
<span class='comment'>/* and <span class='tcode_in_codeblock'>sizeof(int)</span> is not necessarily equal to <span class='tcode_in_codeblock'>sizeof(e)</span> */</span>
</span></div></div><div class='texpara'><br/> <div id='dcl-12.sentence-4' class='sentence'><b>Rationale:</b> In C++, an enumeration is a distinct type<a class='hidden_link' href='#dcl-12.sentence-4'>.</a></div> <br/> <div id='dcl-12.sentence-5' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#dcl-12.sentence-5'>.</a></div> <br/> <div id='dcl-12.sentence-6' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#dcl-12.sentence-6'>.</a></div> <br/> <div id='dcl-12.sentence-7' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#dcl-12.sentence-7'>.</a></div> <div id='dcl-12.sentence-8' class='sentence'>The only time this affects existing C code is when the size of an
enumerator is taken<a class='hidden_link' href='#dcl-12.sentence-8'>.</a></div> <div id='dcl-12.sentence-9' class='sentence'>Taking the size of an enumerator is not a
common C coding practice<a class='hidden_link' href='#dcl-12.sentence-9'>.</a></div></div></div><div class='para' id='dcl-13'><div class='marginalizedparent'><a class='marginalized' href='#dcl-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2851'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='dcl.align'>[dcl.<span class='shy'></span>align]</a>
<br/> <div id='dcl-13.sentence-1' class='sentence'><b>Change:</b> In C++,
an <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier'><span class='textsf'><i >alignment-specifier</i></span></span></a> is an <a href='dcl.attr.grammar#nt:attribute-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier'><span class='textsf'><i >attribute-specifier</i></span></span></a><a class='hidden_link' href='#dcl-13.sentence-1'>.</a></div> <div id='dcl-13.sentence-2' class='sentence'>In C, an <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier_'><span class='textsf'><i >alignment-specifier</i></span></span></a> is a <span class='textsf'><i >declaration-specifier</i></span><a class='hidden_link' href='#dcl-13.sentence-2'>.</a></div></div><div class='texpara'><div id='dcl-13.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>stdalign<span class='operator'>.</span>h<span class='anglebracket'>&gt;</span>
<span class='keyword'>unsigned</span> <span class='keyword'>alignas</span><span class='parenthesis'>(</span><span class='literal'>8</span><span class='parenthesis'>)</span> <span class='keyword'>int</span> x;      <span class='comment'>// valid C, invalid C++</span>
<span class='keyword'>unsigned</span> <span class='keyword'>int</span> y <span class='keyword'>alignas</span><span class='parenthesis'>(</span><span class='literal'>8</span><span class='parenthesis'>)</span>;      <span class='comment'>// valid C++, invalid C</span>
</span>
<br/></div> <div id='dcl-13.sentence-4' class='sentence'><b>Rationale:</b> C++ requires unambiguous placement of the <a href='dcl.attr.grammar#nt:alignment-specifier' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:alignment-specifier__'><span class='textsf'><i >alignment-specifier</i></span></span></a><a class='hidden_link' href='#dcl-13.sentence-4'>.</a></div> <br/> <div id='dcl-13.sentence-5' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#dcl-13.sentence-5'>.</a></div> <br/> <div id='dcl-13.sentence-6' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#dcl-13.sentence-6'>.</a></div> <br/> <div id='dcl-13.sentence-7' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#dcl-13.sentence-7'>.</a></div></div></div></div><div id='class' class='section'><h3 ><a class='secnum' href='#class' style='min-width:80pt'>C.7.7</a> <a href='class' title='11&emsp;Classes'>[class]</a>: classes <a class='abbr_ref' href='diff.class'>[diff.class]</a></h3><div class='para' id='class-1'><div class='marginalizedparent'><a class='marginalized' href='#class-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2874'>#</a></div><div class='texpara'><div id='class-1.sentence-1' class='sentence'><b>Affected subclause:</b> <a href='class.name'>[class.<span class='shy'></span>name]</a> [see also <a href='dcl.typedef' title='9.2.4&emsp;The typedef specifier'>[dcl.<span class='shy'></span>typedef]</a>]
<br/></div> <div id='class-1.sentence-2' class='sentence'><b>Change:</b> In C++, a class declaration introduces the class name into the scope where it is
declared and hides any object, function or other declaration of that name in an enclosing
scope<a class='hidden_link' href='#class-1.sentence-2'>.</a></div> <div id='class-1.sentence-3' class='sentence'>In C, an inner scope declaration of a struct tag name never hides the name of an
object or function in an outer scope<a class='hidden_link' href='#class-1.sentence-3'>.</a></div></div><div class='texpara'><div id='class-1.sentence-4' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>int</span> x<span class='squarebracket'>[</span><span class='literal'>99</span><span class='squarebracket'>]</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> x <span class='curlybracket'>{</span> <span class='keyword'>int</span> a; <span class='curlybracket'>}</span>;
  <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;  <span class='comment'>/* size of the array in C */</span>
  <span class='comment'>/* size of the struct in <span class='tcode_in_codeblock'><i ><span class='textrm'>C++</span></i></span> */</span>
<span class='curlybracket'>}</span>
</span>
<br/></div> <div id='class-1.sentence-5' class='sentence'><b>Rationale:</b> This is one of the few incompatibilities between C and C++ that
can be attributed to the new C++ name space definition where a
name can be declared as a type and as a non-type in a single scope
causing the non-type name to hide the type name and requiring that
the keywords <span id=':class_'><span class='texttt'><span class='keyword'>class</span></span></span>, <span id=':struct______'><span class='texttt'><span class='keyword'>struct</span></span></span>, <span id=':union_'><span class='texttt'><span class='keyword'>union</span></span></span> or <span id=':enum'><span class='texttt'><span class='keyword'>enum</span></span></span> be used to refer to the type name<a class='hidden_link' href='#class-1.sentence-5'>.</a></div> <div id='class-1.sentence-6' class='sentence'>This new name space definition provides important notational
conveniences to C++ programmers and helps making the use of the
user-defined types as similar as possible to the use of fundamental
types<a class='hidden_link' href='#class-1.sentence-6'>.</a></div> <div id='class-1.sentence-7' class='sentence'>The advantages of the new name space definition were judged to
outweigh by far the incompatibility with C described above<a class='hidden_link' href='#class-1.sentence-7'>.</a></div> <br/> <div id='class-1.sentence-8' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#class-1.sentence-8'>.</a></div> <br/> <div id='class-1.sentence-9' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#class-1.sentence-9'>.</a></div> <div id='class-1.sentence-10' class='sentence'>If the hidden name that needs to be accessed is at global scope,
the <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span></span> C++ operator can be used<a class='hidden_link' href='#class-1.sentence-10'>.</a></div> <div id='class-1.sentence-11' class='sentence'>If the hidden name is at block scope, either the type or the struct
tag has to be renamed<a class='hidden_link' href='#class-1.sentence-11'>.</a></div> <br/> <div id='class-1.sentence-12' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#class-1.sentence-12'>.</a></div></div></div><div class='para' id='class-2'><div class='marginalizedparent'><a class='marginalized' href='#class-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2913'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.copy.ctor'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>
<br/> <div id='class-2.sentence-1' class='sentence'><b>Change:</b> Copying volatile objects<a class='hidden_link' href='#class-2.sentence-1'>.</a></div></div><div class='texpara'><div id='class-2.sentence-2' class='sentence'>The implicitly-declared copy constructor and
implicitly-declared copy assignment operator
cannot make a copy of a volatile lvalue<a class='hidden_link' href='#class-2.sentence-2'>.</a></div> <div id='class-2.sentence-3' class='sentence'>For example, the following is valid in ISO C:
<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>int</span> i; <span class='curlybracket'>}</span>;
<span class='keyword'>volatile</span> <span class='keyword'>struct</span> X x1 <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='literal'>0</span><span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> X x2 <span class='operator'>=</span> x1;               <span class='comment'>// invalid C++</span>
<span class='keyword'>struct</span> X x3;
x3 <span class='operator'>=</span> x1;                        <span class='comment'>// also invalid C++</span>
</span></div></div><div class='texpara'><br/> <div id='class-2.sentence-4' class='sentence'><b>Rationale:</b> Several alternatives were debated at length<a class='hidden_link' href='#class-2.sentence-4'>.</a></div> <div id='class-2.sentence-5' class='sentence'>Changing the parameter to
<span id=':volatile'><span class='texttt'><span class='keyword'>volatile</span></span></span>
<span id=':const___'><span class='texttt'><span class='keyword'>const</span></span></span>
<span class='texttt'>X<span class='operator'>&amp;</span></span>
would greatly complicate the generation of
efficient code for class objects<a class='hidden_link' href='#class-2.sentence-5'>.</a></div> <div id='class-2.sentence-6' class='sentence'>Discussion of
providing two alternative signatures for these
implicitly-defined operations raised
unanswered concerns about creating
ambiguities and complicating
the rules that specify the formation of
these operators according to the bases and
members<a class='hidden_link' href='#class-2.sentence-6'>.</a></div> <br/> <div id='class-2.sentence-7' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#class-2.sentence-7'>.</a></div> <br/> <div id='class-2.sentence-8' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#class-2.sentence-8'>.</a></div> <div id='class-2.sentence-9' class='sentence'>If volatile semantics are required for the copy,
a user-declared constructor or assignment must
be provided<a class='hidden_link' href='#class-2.sentence-9'>.</a></div> <div id='class-2.sentence-10' class='sentence'>If non-volatile semantics are required,
an explicit
<span id=':const_cast'><span class='texttt'><span class='keyword'>const_<span class='shy'></span>cast</span></span></span>
can be used<a class='hidden_link' href='#class-2.sentence-10'>.</a></div> <br/> <div id='class-2.sentence-11' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#class-2.sentence-11'>.</a></div></div></div><div class='para' id='class-3'><div class='marginalizedparent'><a class='marginalized' href='#class-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2959'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.bit'>[class.<span class='shy'></span>bit]</a>
<br/> <div id='class-3.sentence-1' class='sentence'><b>Change:</b> <a class='index' id=':bit-field,implementation-defined_sign_of'></a>Bit-fields of type plain <span id=':int__'><span class='texttt'><span class='keyword'>int</span></span></span> are signed<a class='hidden_link' href='#class-3.sentence-1'>.</a></div> <br/> <div id='class-3.sentence-2' class='sentence'><b>Rationale:</b> The signedness needs to be consistent among template specializations<a class='hidden_link' href='#class-3.sentence-2'>.</a></div> <div id='class-3.sentence-3' class='sentence'>For consistency,
the implementation freedom was eliminated for non-dependent types,
too<a class='hidden_link' href='#class-3.sentence-3'>.</a></div> <br/> <div id='class-3.sentence-4' class='sentence'><b>Effect on original feature:</b> The choice is implementation-defined in C, but not so in C++<a class='hidden_link' href='#class-3.sentence-4'>.</a></div> <br/> <div id='class-3.sentence-5' class='sentence'><b>Difficulty of converting:</b> Syntactic transformation<a class='hidden_link' href='#class-3.sentence-5'>.</a></div> <br/> <div id='class-3.sentence-6' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#class-3.sentence-6'>.</a></div></div></div><div class='para' id='class-4'><div class='marginalizedparent'><a class='marginalized' href='#class-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L2975'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.nest'>[class.<span class='shy'></span>nest]</a>
<br/> <div id='class-4.sentence-1' class='sentence'><b>Change:</b> In C++, the name of a nested class is local to its enclosing class<a class='hidden_link' href='#class-4.sentence-1'>.</a></div> <div id='class-4.sentence-2' class='sentence'>In C
the name of the nested class belongs to the same scope as the name of the outermost enclosing class<a class='hidden_link' href='#class-4.sentence-2'>.</a></div></div><div class='texpara'><div id='class-4.sentence-3' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span> y;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Y yy;                    <span class='comment'>// valid C, invalid C++</span>
</span>
<br/></div> <div id='class-4.sentence-4' class='sentence'><b>Rationale:</b> C++ classes have member functions which require that classes
establish scopes<a class='hidden_link' href='#class-4.sentence-4'>.</a></div> <div id='class-4.sentence-5' class='sentence'>The C rule would leave classes as an incomplete scope mechanism
which would prevent C++ programmers from maintaining locality
within a class<a class='hidden_link' href='#class-4.sentence-5'>.</a></div> <div id='class-4.sentence-6' class='sentence'>A coherent set of scope rules for C++ based on the C rule would
be very complicated and C++ programmers would be unable to predict
reliably the meanings of nontrivial examples involving nested or
local functions<a class='hidden_link' href='#class-4.sentence-6'>.</a></div> <br/> <div id='class-4.sentence-7' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#class-4.sentence-7'>.</a></div> <br/> <div id='class-4.sentence-8' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#class-4.sentence-8'>.</a></div> <div id='class-4.sentence-9' class='sentence'>To make the struct type name visible in the scope of the enclosing
struct, the struct tag can be declared in the scope of the
enclosing struct, before the enclosing struct is defined<a class='hidden_link' href='#class-4.sentence-9'>.</a></div> <div id='class-4.sentence-10' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>struct</span> Y;                       <span class='comment'>// <span class='tcode_in_codeblock'>struct Y</span> and <span class='tcode_in_codeblock'>struct X</span> are at the same scope</span>
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span> y;
<span class='curlybracket'>}</span>;
</span></div></div><div class='texpara'><div id='class-4.sentence-11' class='sentence'>All the definitions of C struct types enclosed in other struct
definitions and accessed outside the scope of the enclosing
struct can be exported to the scope of the enclosing struct<a class='hidden_link' href='#class-4.sentence-11'>.</a></div> <div id='class-4.sentence-12' class='sentence'>Note: this is a consequence of the difference in scope rules,
which is documented in <a href='basic.scope' title='6.4&emsp;Scope'>[basic.<span class='shy'></span>scope]</a><a class='hidden_link' href='#class-4.sentence-12'>.</a></div> <br/> <div id='class-4.sentence-13' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#class-4.sentence-13'>.</a></div></div></div><div class='para' id='class-5'><div class='marginalizedparent'><a class='marginalized' href='#class-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3020'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='class.member.lookup'>[class.<span class='shy'></span>member.<span class='shy'></span>lookup]</a>
<br/> <div id='class-5.sentence-1' class='sentence'><b>Change:</b> In C++, a <a href='dcl.typedef#nt:typedef-name' title='9.2.4&emsp;The typedef specifier&emsp;[dcl.typedef]'><span id='ntref:typedef-name__'><span class='textsf'><i >typedef-name</i></span></span></a> may not be redeclared in a class definition after being used in that definition<a class='hidden_link' href='#class-5.sentence-1'>.</a></div></div><div class='texpara'><div id='class-5.sentence-2' class='sentence'>Example:
<span class='codeblock'><span class='keyword'>typedef</span> <span class='keyword'>int</span> I;
<span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  I i;
  <span class='keyword'>int</span> I;            <span class='comment'>// valid C, invalid C++</span>
<span class='curlybracket'>}</span>;
</span>
<br/></div> <div id='class-5.sentence-3' class='sentence'><b>Rationale:</b> When classes become complicated, allowing such a redefinition
after the type has been used can create confusion for C++
programmers as to what the meaning of <span class='texttt'>I</span> really is<a class='hidden_link' href='#class-5.sentence-3'>.</a></div> <br/> <div id='class-5.sentence-4' class='sentence'><b>Effect on original feature:</b> Deletion of semantically well-defined feature<a class='hidden_link' href='#class-5.sentence-4'>.</a></div> <br/> <div id='class-5.sentence-5' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#class-5.sentence-5'>.</a></div> <div id='class-5.sentence-6' class='sentence'>Either the type or the struct member has to be renamed<a class='hidden_link' href='#class-5.sentence-6'>.</a></div> <br/> <div id='class-5.sentence-7' class='sentence'><b>How widely used:</b> Seldom<a class='hidden_link' href='#class-5.sentence-7'>.</a></div></div></div></div><div id='cpp' class='section'><h3 ><a class='secnum' href='#cpp' style='min-width:80pt'>C.7.8</a> <a href='cpp' title='15&emsp;Preprocessing directives'>[cpp]</a>: preprocessing directives <a class='abbr_ref' href='diff.cpp'>[diff.cpp]</a></h3><div class='para' id='cpp-1'><div class='marginalizedparent'><a class='marginalized' href='#cpp-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3046'>#</a></div><div class='texpara'><b>Affected subclause:</b> <a href='cpp.predefined'>[cpp.<span class='shy'></span>predefined]</a>
<br/> <div id='cpp-1.sentence-1' class='sentence'><b>Change:</b> Whether <span class='texttt'>__STDC__</span> is defined and if so, what its value is, are
<a class='index' id=':definition_and_meaning_of___STDC__'></a>implementation-defined<a class='hidden_link' href='#cpp-1.sentence-1'>.</a></div> <br/> <div id='cpp-1.sentence-2' class='sentence'><b>Rationale:</b> C++ is not identical to ISO C<a class='hidden_link' href='#cpp-1.sentence-2'>.</a></div> <div id='cpp-1.sentence-3' class='sentence'>Mandating that <span class='texttt'>__STDC__</span>
be defined would require that translators make an incorrect claim<a class='hidden_link' href='#cpp-1.sentence-3'>.</a></div> <br/> <div id='cpp-1.sentence-4' class='sentence'><b>Effect on original feature:</b> Change to semantics of well-defined feature<a class='hidden_link' href='#cpp-1.sentence-4'>.</a></div> <br/> <div id='cpp-1.sentence-5' class='sentence'><b>Difficulty of converting:</b> Semantic transformation<a class='hidden_link' href='#cpp-1.sentence-5'>.</a></div> <br/> <div id='cpp-1.sentence-6' class='sentence'><b>How widely used:</b> Programs and headers that reference <span class='texttt'>__STDC__</span> are
quite common<a class='hidden_link' href='#cpp-1.sentence-6'>.</a></div></div></div></div></div><div id='library' class='section'><h2 ><a class='secnum' href='#library' style='min-width:65pt'>C.8</a> C standard library <a class='abbr_ref' href='diff.library'>[diff.library]</a></h2><div id='library.general' class='section'><h3 ><a class='secnum' href='#library.general' style='min-width:80pt'>C.8.1</a> General <a class='abbr_ref' href='diff.library.general'>[diff.library.general]</a></h3><div class='texpara'><a class='index' id=':library,C_standard'></a></div><div class='para' id='library.general-1'><div class='marginalizedparent'><a class='marginalized' href='#library.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3068'>#</a></div><div class='texpara'><div id='library.general-1.sentence-1' class='sentence'>Subclause <a href='#library' title='C.8&emsp;C standard library'>[diff.<span class='shy'></span>library]</a> summarizes the explicit changes in headers,
definitions, declarations, or behavior between the C standard library
in the C standard and the parts of the C++ standard library that were
included from the C standard library<a class='hidden_link' href='#library.general-1.sentence-1'>.</a></div></div></div></div><div id='mods.to.headers' class='section'><h3 ><a class='secnum' href='#mods.to.headers' style='min-width:80pt'>C.8.2</a> Modifications to headers <a class='abbr_ref' href='diff.mods.to.headers'>[diff.mods.to.headers]</a></h3><div class='para' id='mods.to.headers-1'><div class='marginalizedparent'><a class='marginalized' href='#mods.to.headers-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3076'>#</a></div><div class='texpara'><div id='mods.to.headers-1.sentence-1' class='sentence'>For compatibility with the C standard library<a class='index' id=':library,C_standard_'></a>,
the C++ standard library provides the C headers enumerated
in <a href='support.c.headers' title='17.14&emsp;C headers'>[support.<span class='shy'></span>c.<span class='shy'></span>headers]</a><a class='hidden_link' href='#mods.to.headers-1.sentence-1'>.</a></div></div></div><div class='para' id='mods.to.headers-2'><div class='marginalizedparent'><a class='marginalized' href='#mods.to.headers-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3081'>#</a></div><div class='texpara'><div id='mods.to.headers-2.sentence-1' class='sentence'>There are no C++ headers for the C standard library's headers
<a class='index' id=':<stdnoreturn.h>,absence_thereof'></a><span class='texttt'><span class='anglebracket'>&lt;</span>stdnoreturn<span class='operator'>.</span>h<span class='anglebracket'>&gt;</span></span> and <a class='index' id=':<threads.h>,absence_thereof'></a><span class='texttt'><span class='anglebracket'>&lt;</span>threads<span class='operator'>.</span>h<span class='anglebracket'>&gt;</span></span>,
nor are these headers from the C standard library headers themselves part of C++<a class='hidden_link' href='#mods.to.headers-2.sentence-1'>.</a></div></div></div><div class='para' id='mods.to.headers-3'><div class='marginalizedparent'><a class='marginalized' href='#mods.to.headers-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3086'>#</a></div><div class='texpara'><div id='mods.to.headers-3.sentence-1' class='sentence'>The C headers <a href='complex.h.syn#header:%3ccomplex.h%3e' title='17.14.2&emsp;Header &lt;complex.h&gt; synopsis&emsp;[complex.h.syn]'><span id='headerref:<complex.h>'><span class='texttt'>&lt;complex.h&gt;</span></span></a> and
<a href='tgmath.h.syn#header:%3ctgmath.h%3e' title='17.14.6&emsp;Header &lt;tgmath.h&gt; synopsis&emsp;[tgmath.h.syn]'><span id='headerref:<tgmath.h>'><span class='texttt'>&lt;tgmath.h&gt;</span></span></a> do not contain any of the content from
the C standard library and instead merely include other headers from the C++
standard library<a class='hidden_link' href='#mods.to.headers-3.sentence-1'>.</a></div></div></div></div><div id='mods.to.definitions' class='section'><h3 ><a class='secnum' href='#mods.to.definitions' style='min-width:80pt'>C.8.3</a> Modifications to definitions <a class='abbr_ref' href='diff.mods.to.definitions'>[diff.mods.to.definitions]</a></h3><div id='char16' class='section'><h4 ><a class='secnum' href='#char16' style='min-width:95pt'>C.8.3.1</a> Types <span class='texttt'>char16_<span class='shy'></span>t</span> and <span class='texttt'>char32_<span class='shy'></span>t</span> <a class='abbr_ref' href='diff.char16'>[diff.char16]</a></h4><div class='para' id='char16-1'><div class='marginalizedparent'><a class='marginalized' href='#char16-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3096'>#</a></div><div class='texpara'><div id='char16-1.sentence-1' class='sentence'>The types <span id=':char16_t____'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span> and <span id=':char32_t____'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span>
are distinct types rather than typedefs to existing integral types<a class='hidden_link' href='#char16-1.sentence-1'>.</a></div> <div id='char16-1.sentence-2' class='sentence'>The tokens <span id=':char16_t_____'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span> and <span id=':char32_t_____'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span>
are keywords in C++ (<a href='lex.key' title='5.11&emsp;Keywords'>[lex.<span class='shy'></span>key]</a>)<a class='hidden_link' href='#char16-1.sentence-2'>.</a></div> <div id='char16-1.sentence-3' class='sentence'>They do not appear as macro or type names defined in
<a href='cuchar.syn#header:%3ccuchar%3e' title='23.5.5&emsp;Header &lt;cuchar&gt; synopsis&emsp;[cuchar.syn]'><span id='headerref:<cuchar>_'><span class='texttt'>&lt;cuchar&gt;</span></span></a><a class='hidden_link' href='#char16-1.sentence-3'>.</a></div></div></div></div><div id='wchar.t' class='section'><h4 ><a class='secnum' href='#wchar.t' style='min-width:95pt'>C.8.3.2</a> Type <span class='texttt'>wchar_<span class='shy'></span>t</span> <a class='abbr_ref' href='diff.wchar.t'>[diff.wchar.t]</a></h4><div class='para' id='wchar.t-1'><div class='marginalizedparent'><a class='marginalized' href='#wchar.t-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3106'>#</a></div><div class='texpara'><div id='wchar.t-1.sentence-1' class='sentence'>The type <span id=':wchar_t___'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span> is a distinct type rather than a typedef to an
existing integral type<a class='hidden_link' href='#wchar.t-1.sentence-1'>.</a></div> <div id='wchar.t-1.sentence-2' class='sentence'>The token <span id=':wchar_t____'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>
is a keyword in C++ (<a href='lex.key' title='5.11&emsp;Keywords'>[lex.<span class='shy'></span>key]</a>)<a class='hidden_link' href='#wchar.t-1.sentence-2'>.</a></div> <div id='wchar.t-1.sentence-3' class='sentence'>It does not appear as a macro or type name defined in any of
<a href='cstddef.syn#header:%3ccstddef%3e' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis&emsp;[cstddef.syn]'><span id='headerref:<cstddef>'><span class='texttt'>&lt;cstddef&gt;</span></span></a>,
<a href='cstdlib.syn#header:%3ccstdlib%3e' title='17.2.2&emsp;Header &lt;cstdlib&gt; synopsis&emsp;[cstdlib.syn]'><span id='headerref:<cstdlib>'><span class='texttt'>&lt;cstdlib&gt;</span></span></a>,
or <a href='cwchar.syn#header:%3ccwchar%3e' title='23.5.4&emsp;Header &lt;cwchar&gt; synopsis&emsp;[cwchar.syn]'><span id='headerref:<cwchar>'><span class='texttt'>&lt;cwchar&gt;</span></span></a><a class='hidden_link' href='#wchar.t-1.sentence-3'>.</a></div></div></div></div><div id='header.assert.h' class='section'><h4 ><a class='secnum' href='#header.assert.h' style='min-width:95pt'>C.8.3.3</a> Header <span class='texttt'>&lt;assert.h&gt;</span> <a class='abbr_ref' href='diff.header.assert.h'>[diff.header.assert.h]</a></h4><div class='texpara'><a class='index' id='headerref:<assert.h>'></a></div><div class='para' id='header.assert.h-1'><div class='marginalizedparent'><a class='marginalized' href='#header.assert.h-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3119'>#</a></div><div class='texpara'><div id='header.assert.h-1.sentence-1' class='sentence'>The token <span id=':static_assert_'><span class='texttt'><span class='keyword'>static_<span class='shy'></span>assert</span></span></span> is a keyword in C++<a class='hidden_link' href='#header.assert.h-1.sentence-1'>.</a></div> <div id='header.assert.h-1.sentence-2' class='sentence'>It does not appear as a macro name defined
in <a href='assertions.general#header:%3ccassert%3e' title='19.3.1&emsp;General&emsp;[assertions.general]'><span id='headerref:<cassert>'><span class='texttt'>&lt;cassert&gt;</span></span></a><a class='hidden_link' href='#header.assert.h-1.sentence-2'>.</a></div></div></div></div><div id='header.iso646.h' class='section'><h4 ><a class='secnum' href='#header.iso646.h' style='min-width:95pt'>C.8.3.4</a> Header <span class='texttt'>&lt;iso646.h&gt;</span> <a class='abbr_ref' href='diff.header.iso646.h'>[diff.header.iso646.h]</a></h4><div class='para' id='header.iso646.h-1'><div class='marginalizedparent'><a class='marginalized' href='#header.iso646.h-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3126'>#</a></div><div class='texpara'><div id='header.iso646.h-1.sentence-1' class='sentence'>The tokens
<span id=':and'><span class='texttt'>and</span></span>,
<span id=':and_eq'><span class='texttt'>and_<span class='shy'></span>eq</span></span>,
<span id=':bitand'><span class='texttt'>bitand</span></span>,
<span id=':bitor'><span class='texttt'>bitor</span></span>,
<span id=':compl'><span class='texttt'>compl</span></span>,
<span id=':not'><span class='texttt'>not</span></span>,
<span id=':not_eq'><span class='texttt'>not_<span class='shy'></span>eq</span></span>,
<span id=':or'><span class='texttt'>or</span></span>,
<span id=':or_eq'><span class='texttt'>or_<span class='shy'></span>eq</span></span>,
<span id=':xor'><span class='texttt'>xor</span></span>,
and
<span id=':xor_eq'><span class='texttt'>xor_<span class='shy'></span>eq</span></span>
are keywords in C++ (<a href='lex.key' title='5.11&emsp;Keywords'>[lex.<span class='shy'></span>key]</a>),
and are not introduced as macros
by <a href='iso646.h.syn#header:%3ciso646.h%3e' title='17.14.3&emsp;Header &lt;iso646.h&gt; synopsis&emsp;[iso646.h.syn]'><span id='headerref:<iso646.h>'><span class='texttt'>&lt;iso646.h&gt;</span></span></a><a class='hidden_link' href='#header.iso646.h-1.sentence-1'>.</a></div></div></div></div><div id='header.stdalign.h' class='section'><h4 ><a class='secnum' href='#header.stdalign.h' style='min-width:95pt'>C.8.3.5</a> Header <span class='texttt'>&lt;stdalign.h&gt;</span> <a class='abbr_ref' href='diff.header.stdalign.h'>[diff.header.stdalign.h]</a></h4><div class='texpara'><a class='index' id='headerref:<stdalign.h>'></a></div><div class='para' id='header.stdalign.h-1'><div class='marginalizedparent'><a class='marginalized' href='#header.stdalign.h-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3147'>#</a></div><div class='texpara'><div id='header.stdalign.h-1.sentence-1' class='sentence'>The token <span id=':alignas'><span class='texttt'><span class='keyword'>alignas</span></span></span> is a keyword in C++ (<a href='lex.key' title='5.11&emsp;Keywords'>[lex.<span class='shy'></span>key]</a>),
and is not introduced as a macro
by <a href='depr.c.macros#header:%3cstdalign.h%3e' title='D.12&emsp;Deprecated C macros&emsp;[depr.c.macros]'><span id='headerref:<stdalign.h>_'><span class='texttt'>&lt;stdalign.h&gt;</span></span></a><a class='hidden_link' href='#header.stdalign.h-1.sentence-1'>.</a></div></div></div></div><div id='header.stdbool.h' class='section'><h4 ><a class='secnum' href='#header.stdbool.h' style='min-width:95pt'>C.8.3.6</a> Header <span class='texttt'>&lt;stdbool.h&gt;</span> <a class='abbr_ref' href='diff.header.stdbool.h'>[diff.header.stdbool.h]</a></h4><div class='texpara'><a class='index' id='headerref:<stdbool.h>_'></a></div><div class='para' id='header.stdbool.h-1'><div class='marginalizedparent'><a class='marginalized' href='#header.stdbool.h-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3155'>#</a></div><div class='texpara'><div id='header.stdbool.h-1.sentence-1' class='sentence'>The tokens <span id=':bool__'><span class='texttt'><span class='keyword'>bool</span></span></span>, <span id=':true'><span class='texttt'><span class='literal'>true</span></span></span>, and <span id=':false'><span class='texttt'><span class='literal'>false</span></span></span>
are keywords in C++ (<a href='lex.key' title='5.11&emsp;Keywords'>[lex.<span class='shy'></span>key]</a>),
and are not introduced as macros
by <a href='depr.c.macros#header:%3cstdbool.h%3e' title='D.12&emsp;Deprecated C macros&emsp;[depr.c.macros]'><span id='headerref:<stdbool.h>__'><span class='texttt'>&lt;stdbool.h&gt;</span></span></a><a class='hidden_link' href='#header.stdbool.h-1.sentence-1'>.</a></div></div></div></div><div id='null' class='section'><h4 ><a class='secnum' href='#null' style='min-width:95pt'>C.8.3.7</a> Macro <span class='texttt'>NULL</span> <a class='abbr_ref' href='diff.null'>[diff.null]</a></h4><div class='para' id='null-1'><div class='marginalizedparent'><a class='marginalized' href='#null-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3163'>#</a></div><div class='texpara'><div id='null-1.sentence-1' class='sentence'>The macro
<span class='texttt'>NULL</span>,
defined in any of
<a href='clocale.syn#header:%3cclocale%3e' title='30.5.1&emsp;Header &lt;clocale&gt; synopsis&emsp;[clocale.syn]'><span id='headerref:<clocale>'><span class='texttt'>&lt;clocale&gt;</span></span></a>,
<a href='cstddef.syn#header:%3ccstddef%3e' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis&emsp;[cstddef.syn]'><span id='headerref:<cstddef>_'><span class='texttt'>&lt;cstddef&gt;</span></span></a>,
<a href='cstdio.syn#header:%3ccstdio%3e' title='31.13.1&emsp;Header &lt;cstdio&gt; synopsis&emsp;[cstdio.syn]'><span id='headerref:<cstdio>'><span class='texttt'>&lt;cstdio&gt;</span></span></a>,
<a href='cstdlib.syn#header:%3ccstdlib%3e' title='17.2.2&emsp;Header &lt;cstdlib&gt; synopsis&emsp;[cstdlib.syn]'><span id='headerref:<cstdlib>_'><span class='texttt'>&lt;cstdlib&gt;</span></span></a>,
<a href='cstring.syn#header:%3ccstring%3e' title='23.5.3&emsp;Header &lt;cstring&gt; synopsis&emsp;[cstring.syn]'><span id='headerref:<cstring>'><span class='texttt'>&lt;cstring&gt;</span></span></a>,
<a href='ctime.syn#header:%3cctime%3e' title='29.15&emsp;Header &lt;ctime&gt; synopsis&emsp;[ctime.syn]'><span id='headerref:<ctime>'><span class='texttt'>&lt;ctime&gt;</span></span></a>,
or <a href='cwchar.syn#header:%3ccwchar%3e' title='23.5.4&emsp;Header &lt;cwchar&gt; synopsis&emsp;[cwchar.syn]'><span id='headerref:<cwchar>_'><span class='texttt'>&lt;cwchar&gt;</span></span></a>,
is an <a class='index' id=':definition_of_NULL'></a>implementation-defined null pointer constant in
C++ (<a href='support.types' title='17.2&emsp;Common definitions'>[support.<span class='shy'></span>types]</a>)<a class='hidden_link' href='#null-1.sentence-1'>.</a></div></div></div></div></div><div id='mods.to.declarations' class='section'><h3 ><a class='secnum' href='#mods.to.declarations' style='min-width:80pt'>C.8.4</a> Modifications to declarations <a class='abbr_ref' href='diff.mods.to.declarations'>[diff.mods.to.declarations]</a></h3><div class='para' id='mods.to.declarations-1'><div class='marginalizedparent'><a class='marginalized' href='#mods.to.declarations-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3179'>#</a></div><div class='texpara'><div id='mods.to.declarations-1.sentence-1' class='sentence'>Header <a href='cstring.syn#header:%3ccstring%3e' title='23.5.3&emsp;Header &lt;cstring&gt; synopsis&emsp;[cstring.syn]'><span id='headerref:<cstring>_'><span class='texttt'>&lt;cstring&gt;</span></span></a>:
The following functions have different declarations:
<ul class='itemize'><li id='mods.to.declarations-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.declarations-1.1'>(1.1)</a></div><span class='texttt'>strchr</span></li><li id='mods.to.declarations-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.declarations-1.2'>(1.2)</a></div><span class='texttt'>strpbrk</span></li><li id='mods.to.declarations-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.declarations-1.3'>(1.3)</a></div><span class='texttt'>strrchr</span></li><li id='mods.to.declarations-1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.declarations-1.4'>(1.4)</a></div><span class='texttt'>strstr</span></li><li id='mods.to.declarations-1.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.declarations-1.5'>(1.5)</a></div><span class='texttt'>memchr</span></li></ul></div></div><div class='texpara'><div id='mods.to.declarations-1.sentence-2' class='sentence'>Subclause <a href='cstring.syn' title='23.5.3&emsp;Header &lt;cstring&gt; synopsis'>[cstring.<span class='shy'></span>syn]</a> describes the changes<a class='hidden_link' href='#mods.to.declarations-1.sentence-2'>.</a></div></div></div><div class='para' id='mods.to.declarations-2'><div class='marginalizedparent'><a class='marginalized' href='#mods.to.declarations-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3192'>#</a></div><div class='texpara'><div id='mods.to.declarations-2.sentence-1' class='sentence'>Header <a href='cwchar.syn#header:%3ccwchar%3e' title='23.5.4&emsp;Header &lt;cwchar&gt; synopsis&emsp;[cwchar.syn]'><span id='headerref:<cwchar>__'><span class='texttt'>&lt;cwchar&gt;</span></span></a>:
The following functions have different declarations:
<ul class='itemize'><li id='mods.to.declarations-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.declarations-2.1'>(2.1)</a></div><span class='texttt'>wcschr</span></li><li id='mods.to.declarations-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.declarations-2.2'>(2.2)</a></div><span class='texttt'>wcspbrk</span></li><li id='mods.to.declarations-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.declarations-2.3'>(2.3)</a></div><span class='texttt'>wcsrchr</span></li><li id='mods.to.declarations-2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.declarations-2.4'>(2.4)</a></div><span class='texttt'>wcsstr</span></li><li id='mods.to.declarations-2.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.declarations-2.5'>(2.5)</a></div><span class='texttt'>wmemchr</span></li></ul></div></div><div class='texpara'><div id='mods.to.declarations-2.sentence-2' class='sentence'>Subclause <a href='cwchar.syn' title='23.5.4&emsp;Header &lt;cwchar&gt; synopsis'>[cwchar.<span class='shy'></span>syn]</a> describes the changes<a class='hidden_link' href='#mods.to.declarations-2.sentence-2'>.</a></div></div></div><div class='para' id='mods.to.declarations-3'><div class='marginalizedparent'><a class='marginalized' href='#mods.to.declarations-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3205'>#</a></div><div class='texpara'><div id='mods.to.declarations-3.sentence-1' class='sentence'>Header <a href='cstddef.syn#header:%3ccstddef%3e' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis&emsp;[cstddef.syn]'><span id='headerref:<cstddef>__'><span class='texttt'>&lt;cstddef&gt;</span></span></a>
declares the names <span class='texttt'>nullptr_<span class='shy'></span>t</span>, <span class='texttt'>byte</span>, and <span class='texttt'>to_<span class='shy'></span>integer</span>,
and the operators and operator templates in  (<a href='support.types.byteops' title='17.2.5&emsp;byte type operations'>[support.<span class='shy'></span>types.<span class='shy'></span>byteops]</a>),
in addition to the names declared in
<a href='support.c.headers.general#header:%3cstddef.h%3e' title='17.14.1&emsp;General&emsp;[support.c.headers.general]'><span id='headerref:<stddef.h>'><span class='texttt'>&lt;stddef.h&gt;</span></span></a> in the C standard library<a class='hidden_link' href='#mods.to.declarations-3.sentence-1'>.</a></div></div></div></div><div id='mods.to.behavior' class='section'><h3 ><a class='secnum' href='#mods.to.behavior' style='min-width:80pt'>C.8.5</a> Modifications to behavior <a class='abbr_ref' href='diff.mods.to.behavior'>[diff.mods.to.behavior]</a></h3><div id='mods.to.behavior.general' class='section'><h4 ><a class='secnum' href='#mods.to.behavior.general' style='min-width:95pt'>C.8.5.1</a> General <a class='abbr_ref' href='diff.mods.to.behavior.general'>[diff.mods.to.behavior.general]</a></h4><div class='para' id='mods.to.behavior.general-1'><div class='marginalizedparent'><a class='marginalized' href='#mods.to.behavior.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3216'>#</a></div><div class='texpara'><div id='mods.to.behavior.general-1.sentence-1' class='sentence'>Header <a href='cstdlib.syn#header:%3ccstdlib%3e' title='17.2.2&emsp;Header &lt;cstdlib&gt; synopsis&emsp;[cstdlib.syn]'><span id='headerref:<cstdlib>__'><span class='texttt'>&lt;cstdlib&gt;</span></span></a>:
The following functions have different behavior:
<ul class='itemize'><li id='mods.to.behavior.general-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.behavior.general-1.1'>(1.1)</a></div><span class='texttt'>atexit</span></li><li id='mods.to.behavior.general-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.behavior.general-1.2'>(1.2)</a></div><span class='texttt'>exit</span></li><li id='mods.to.behavior.general-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.behavior.general-1.3'>(1.3)</a></div><span class='texttt'>abort</span></li></ul></div></div><div class='texpara'><div id='mods.to.behavior.general-1.sentence-2' class='sentence'>Subclause <a href='support.start.term' title='17.5&emsp;Startup and termination'>[support.<span class='shy'></span>start.<span class='shy'></span>term]</a> describes the changes<a class='hidden_link' href='#mods.to.behavior.general-1.sentence-2'>.</a></div></div></div><div class='para' id='mods.to.behavior.general-2'><div class='marginalizedparent'><a class='marginalized' href='#mods.to.behavior.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3227'>#</a></div><div class='texpara'><div id='mods.to.behavior.general-2.sentence-1' class='sentence'>Header <a href='csetjmp.syn#header:%3ccsetjmp%3e' title='17.13.3&emsp;Header &lt;csetjmp&gt; synopsis&emsp;[csetjmp.syn]'><span id='headerref:<csetjmp>'><span class='texttt'>&lt;csetjmp&gt;</span></span></a>:
The following functions have different behavior:
<ul class='itemize'><li id='mods.to.behavior.general-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#mods.to.behavior.general-2.1'>(2.1)</a></div><span class='texttt'>longjmp</span></li></ul></div></div><div class='texpara'><div id='mods.to.behavior.general-2.sentence-2' class='sentence'>Subclause <a href='csetjmp.syn' title='17.13.3&emsp;Header &lt;csetjmp&gt; synopsis'>[csetjmp.<span class='shy'></span>syn]</a> describes the changes<a class='hidden_link' href='#mods.to.behavior.general-2.sentence-2'>.</a></div></div></div></div><div id='offsetof' class='section'><h4 ><a class='secnum' href='#offsetof' style='min-width:95pt'>C.8.5.2</a> Macro <span class='texttt'>offsetof(<i >type</i>, <i >member-designator</i>)</span> <a class='abbr_ref' href='diff.offsetof'>[diff.offsetof]</a></h4><div class='texpara'><a class='index' id='lib:offsetof'></a></div><div class='para' id='offsetof-1'><div class='marginalizedparent'><a class='marginalized' href='#offsetof-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3239'>#</a></div><div class='texpara'><div id='offsetof-1.sentence-1' class='sentence'>The macro <span class='texttt'>offsetof</span>, defined in
<a href='cstddef.syn#header:%3ccstddef%3e' title='17.2.1&emsp;Header &lt;cstddef&gt; synopsis&emsp;[cstddef.syn]'><span id='headerref:<cstddef>___'><span class='texttt'>&lt;cstddef&gt;</span></span></a>,
accepts a restricted set of <span class='texttt'><i >type</i></span> arguments in C++<a class='hidden_link' href='#offsetof-1.sentence-1'>.</a></div> <div id='offsetof-1.sentence-2' class='sentence'>Subclause <a href='support.types.layout' title='17.2.4&emsp;Sizes, alignments, and offsets'>[support.<span class='shy'></span>types.<span class='shy'></span>layout]</a> describes the change<a class='hidden_link' href='#offsetof-1.sentence-2'>.</a></div></div></div></div><div id='malloc' class='section'><h4 ><a class='secnum' href='#malloc' style='min-width:95pt'>C.8.5.3</a> Memory allocation functions <a class='abbr_ref' href='diff.malloc'>[diff.malloc]</a></h4><div class='para' id='malloc-1'><div class='marginalizedparent'><a class='marginalized' href='#malloc-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/compatibility.tex#L3247'>#</a></div><div class='texpara'><div id='malloc-1.sentence-1' class='sentence'>The functions
<a class='index' id='lib:aligned_alloc'></a><span class='texttt'>aligned_<span class='shy'></span>alloc</span>,
<a class='index' id='lib:calloc'></a><span class='texttt'>calloc</span>,
<a class='index' id='lib:malloc'></a><span class='texttt'>malloc</span>,
and
<a class='index' id='lib:realloc'></a><span class='texttt'>realloc</span>
are restricted in C++<a class='hidden_link' href='#malloc-1.sentence-1'>.</a></div> <div id='malloc-1.sentence-2' class='sentence'>Subclause <a href='c.malloc' title='20.2.12&emsp;C library memory allocation'>[c.<span class='shy'></span>malloc]</a> describes the changes<a class='hidden_link' href='#malloc-1.sentence-2'>.</a></div></div></div></div></div></div></div></body></html>