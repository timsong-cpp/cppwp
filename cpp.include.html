<!DOCTYPE html><html lang='en'><head><title>[cpp.include]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>15</a> Preprocessing directives <a class='abbr_ref' href='./#cpp'>[cpp]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>15.3</a> Source file inclusion <a class='abbr_ref'>[cpp.include]</a></h2><div class='texpara'><a class='index' id=':preprocessing_directive,header_inclusion'></a>
<a class='index' id=':preprocessing_directive,source-file_inclusion'></a>
<a class='index' id=':#include'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/preprocessor.tex#L697'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:search,header' title='15.3&emsp;Source file inclusion&emsp;[cpp.include]'><span id='def:search,header'><i >header search</i></span></a> for a sequence of characters
searches a sequence of places for a header
identified uniquely by that sequence of characters<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>How the places are determined or the header identified
is <a class='index' id=':determination_of_places_and_identification_of_headers_during_header_search'></a>implementation-defined<a class='hidden_link' href='#1.sentence-2'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/preprocessor.tex#L704'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:search,source_file' title='15.3&emsp;Source file inclusion&emsp;[cpp.include]'><span id='def:search,source_file'><i >source file search</i></span></a> for a sequence of characters
attempts to identify a source file that is named by the sequence of characters<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>The named source file is searched for
in an <a class='index' id=':search_for_source_files_during_source_file_search'></a>implementation-defined manner<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>If the implementation does not support a source file search
for that sequence of characters, or if the search fails,
the result of the source file search
is the result of a header search for the same sequence of characters<a class='hidden_link' href='#2.sentence-3'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/preprocessor.tex#L714'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>A preprocessing directive of the form
<div class='simplebnf'>
<span class='terminal'><span class='preprocessordirective'># include</span></span> <a href='lex.header#nt:header-name' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name'><span class='textsf'><i >header-name</i></span></span></a> <a href='cpp.pre#nt:new-line' title='15.1&emsp;Preamble&emsp;[cpp.pre]'><span id='ntref:new-line'><span class='textsf'><i >new-line</i></span></span></a>
</div>
causes the replacement of that directive by the entire contents
of the header or source file identified by <a href='lex.header#nt:header-name' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name_'><span class='textsf'><i >header-name</i></span></span></a><a class='hidden_link' href='#3.sentence-1'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/preprocessor.tex#L722'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>If the <a href='lex.header#nt:header-name' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name__'><span class='textsf'><i >header-name</i></span></span></a> is of the form
<div class='simplebnf'>
<span class='terminal'><span class='anglebracket'>&lt;</span></span> <a href='lex.header#nt:h-char-sequence' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:h-char-sequence'><span class='textsf'><i >h-char-sequence</i></span></span></a> <span class='terminal'><span class='anglebracket'>&gt;</span></span>
</div>
a header is identified by a header search for the sequence of characters
of the <a href='lex.header#nt:h-char-sequence' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:h-char-sequence_'><span class='textsf'><i >h-char-sequence</i></span></span></a><a class='hidden_link' href='#4.sentence-1'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/preprocessor.tex#L730'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>If the <a href='lex.header#nt:header-name' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name___'><span class='textsf'><i >header-name</i></span></span></a> is of the form
<div class='simplebnf'>
<span class='terminal'>"</span> <a href='lex.header#nt:q-char-sequence' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:q-char-sequence'><span class='textsf'><i >q-char-sequence</i></span></span></a> <span class='terminal'>"</span>
</div>
the source file or header is identified by a source file search
for the sequence of characters of the <a href='lex.header#nt:q-char-sequence' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:q-char-sequence_'><span class='textsf'><i >q-char-sequence</i></span></span></a><a class='hidden_link' href='#5.sentence-1'>.</a></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/preprocessor.tex#L738'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>If a header search fails, or if a source file search or header search
identifies a header or source file that cannot be processed by the implementation,
the program is ill-formed<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='6.sentence-2' class='sentence'>If the header or source file cannot be processed,
the program is ill-formed even when evaluating <span class='texttt'><span class='preprocessordirective'>__has_<span class='shy'></span>include</span></span><a class='hidden_link' href='#6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/preprocessor.tex#L747'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>A preprocessing directive of the form
<div class='simplebnf'>
<span class='terminal'><span class='preprocessordirective'># include</span></span> <a href='cpp.pre#nt:pp-tokens' title='15.1&emsp;Preamble&emsp;[cpp.pre]'><span id='ntref:pp-tokens'><span class='textsf'><i >pp-tokens</i></span></span></a> <a href='cpp.pre#nt:new-line' title='15.1&emsp;Preamble&emsp;[cpp.pre]'><span id='ntref:new-line_'><span class='textsf'><i >new-line</i></span></span></a>
</div>
(that does not match the previous form) is permitted<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>The preprocessing tokens after
<span class='texttt'>include</span>
in the directive are processed just as in normal text
(i.e., each identifier currently defined as a macro name is replaced by its
replacement list of preprocessing tokens)<a class='hidden_link' href='#7.sentence-2'>.</a></div> <div id='7.sentence-3' class='sentence'>Then, an attempt is made to form a <a href='lex.header#nt:header-name' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name____'><span class='textsf'><i >header-name</i></span></span></a>
preprocessing token (<a href='lex.header' title='5.6&emsp;Header names'>[lex.<span class='shy'></span>header]</a>) from the whitespace and the characters
of the spellings of the resulting sequence of preprocessing tokens;
the treatment of whitespace
is <a class='index' id=':treatment_of_whitespace_when_processing_a_#include_directive'></a>implementation-defined<a class='hidden_link' href='#7.sentence-3'>.</a></div> <div id='7.sentence-4' class='sentence'>If the attempt succeeds, the directive with the so-formed <a href='lex.header#nt:header-name' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name_____'><span class='textsf'><i >header-name</i></span></span></a>
is processed as specified for the previous form<a class='hidden_link' href='#7.sentence-4'>.</a></div> <div id='7.sentence-5' class='sentence'>Otherwise, the program is ill-formed, no diagnostic required<a class='hidden_link' href='#7.sentence-5'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='7.sentence-6' class='sentence'>Adjacent <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal'><span class='textsf'><i >string-literal</i></span></span></a><i >s</i> are not concatenated into
a single <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal_'><span class='textsf'><i >string-literal</i></span></span></a>
(see the translation phases in <a href='lex.phases' title='5.2&emsp;Phases of translation'>[lex.<span class='shy'></span>phases]</a>);
thus, an expansion that results in two <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal__'><span class='textsf'><i >string-literal</i></span></span></a><i >s</i> is an
invalid directive<a class='hidden_link' href='#7.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/preprocessor.tex#L774'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'>The implementation shall provide unique mappings for
sequences consisting of one or more
<a href='lex.name#nt:nondigit' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:nondigit'><span class='textsf'><i >nondigit</i></span></span></a><i >s</i> or <a href='lex.name#nt:digit' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:digit'><span class='textsf'><i >digit</i></span></span></a><i >s</i> (<a href='lex.name' title='5.11&emsp;Identifiers'>[lex.<span class='shy'></span>name]</a>)
followed by a period
(<span class='texttt'><span class='operator'>.</span></span>)
and a single
<a href='lex.name#nt:nondigit' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:nondigit_'><span class='textsf'><i >nondigit</i></span></span></a><a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>The first character shall not be a <a href='lex.name#nt:digit' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:digit_'><span class='textsf'><i >digit</i></span></span></a><a class='hidden_link' href='#8.sentence-2'>.</a></div> <div id='8.sentence-3' class='sentence'>The implementation may ignore distinctions of alphabetical case<a class='hidden_link' href='#8.sentence-3'>.</a></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/preprocessor.tex#L785'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'>A
<span class='texttt'><span class='preprocessordirective'>#include</span></span>
preprocessing directive may appear
in a source file that has been read because of a
<span class='texttt'><span class='preprocessordirective'>#include</span></span>
directive in another file,
up to an <a class='index' id=':nesting_limit_for_#include_directives'></a>implementation-defined nesting limit<a class='hidden_link' href='#9.sentence-1'>.</a></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/preprocessor.tex#L794'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'>If the header identified by the <a href='lex.header#nt:header-name' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name______'><span class='textsf'><i >header-name</i></span></span></a>
denotes an importable header (<a href='module.import' title='10.3&emsp;Import declaration'>[module.<span class='shy'></span>import]</a>),
it is
<a class='index' id=':whether_source_file_inclusion_of_importable_header_is_replaced_with_import_directive'></a>implementation-defined
whether the <span class='texttt'><span class='preprocessordirective'>#include</span></span> preprocessing directive
is instead replaced by an <span class='texttt'><span class='keyword'>import</span></span> directive (<a href='cpp.import' title='15.6&emsp;Header unit importation'>[cpp.<span class='shy'></span>import]</a>) of the form
<div class='bnf'>
<span id=':import'><span class='texttt'><span class='keyword'>import</span></span></span> <a href='lex.header#nt:header-name' title='5.6&emsp;Header names&emsp;[lex.header]'><span id='ntref:header-name_______'><span class='textsf'><i >header-name</i></span></span></a> <span class='terminal'>;</span> <a href='cpp.pre#nt:new-line' title='15.1&emsp;Preamble&emsp;[cpp.pre]'><span id='ntref:new-line__'><span class='textsf'><i >new-line</i></span></span></a>
</div></div></div></div><div class='para nonNormativeOnly' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/preprocessor.tex#L806'>#</a></div><div class='texpara'><div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='11.sentence-1' class='sentence'>An implementation can provide a mechanism for making arbitrary
source files available to the <span class='texttt'><span class='anglebracket'>&lt;</span> <span class='anglebracket'>&gt;</span></span> search<a class='hidden_link' href='#11.sentence-1'>.</a></div> <div id='11.sentence-2' class='sentence'>However, using the <span class='texttt'><span class='anglebracket'>&lt;</span> <span class='anglebracket'>&gt;</span></span> form for headers provided
with the implementation and the <span class='texttt'><span class='literal'>" "</span></span> form for sources
outside the control of the implementation
achieves wider portability<a class='hidden_link' href='#11.sentence-2'>.</a></div> <div id='11.sentence-3' class='sentence'>For instance:
<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>stdio<span class='operator'>.</span>h<span class='anglebracket'>&gt;</span>
<span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>unistd<span class='operator'>.</span>h<span class='anglebracket'>&gt;</span>
<span class='preprocessordirective'>#include</span> <span class='literal'>"usefullib.h"</span>
<span class='preprocessordirective'>#include</span> <span class='literal'>"myprog.h"</span>
</span></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/preprocessor.tex#L822'>#</a></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<div id='12.sentence-1' class='sentence'>This illustrates macro-replaced
<span class='texttt'><span class='preprocessordirective'>#include</span></span>
directives:
<span class='codeblock'><span class='preprocessordirective'>#if</span> VERSION <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span>
    <span class='preprocessordirective'>#define</span> INCFILE  <span class='literal'>"vers1.h"</span>
<span class='preprocessordirective'>#elif</span> VERSION <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>2</span>
    <span class='preprocessordirective'>#define</span> INCFILE  <span class='literal'>"vers2.h"</span>  <span class='comment'>// and so on</span>
<span class='preprocessordirective'>#else</span>
    <span class='preprocessordirective'>#define</span> INCFILE  <span class='literal'>"versN.h"</span>
<span class='preprocessordirective'>#endif</span>
<span class='preprocessordirective'>#include</span> INCFILE
</span></div> —&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>