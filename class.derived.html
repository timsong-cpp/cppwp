<!DOCTYPE html><html lang='en'><head><title>[class.derived]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>10</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>10.6</a> Derived classes <a class='abbr_ref'>[class.derived]</a></h2><span class='indexparent'><a class='index' id=':derived_class'></a></span>

<div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3453'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':base_class'></a></span><span class='indexparent'><a class='index' id=':inheritance'></a></span><span class='indexparent'><a class='index' id=':multiple_inheritance'></a></span>A list of base classes can be specified in a class definition using
the notation:</div><pre class='bnf'><a class='nontermdef' href='#nt:base-clause' id='nt:base-clause'>base-clause:</a>
&#9;<span class='terminal'>:</span> <i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:base-specifier-list' id='nt:base-specifier-list'>base-specifier-list:</a>
&#9;<i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
&#9;<i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i> <span class='terminal'>,</span> <i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i> <span class='terminal'>...</span><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:base-specifier' id='nt:base-specifier'>base-specifier:</a>
&#9;<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i>
&#9;<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>virtual</span> <i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i>
&#9;<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i> <span class='terminal'>virtual</span><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:class-or-decltype' id='nt:class-or-decltype'>class-or-decltype:</a>
&#9;<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='class#nt:class-name'>class-name</a></i>
&#9;<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i> <span class='terminal'>template</span> <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>
&#9;<i ><a href='dcl.type.simple#nt:decltype-specifier'>decltype-specifier</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:access-specifier' id='nt:access-specifier'>access-specifier:</a>
&#9;<span class='terminal'>private</span>
&#9;<span class='terminal'>protected</span>
&#9;<span class='terminal'>public</span>
</pre><div id='1.sentence-2' class='sentence'>The optional <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> appertains to the <i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i><a class='hidden_link' href='#1.sentence-2'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3497'>#</a></div><div id='2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':type,incomplete'></a></span>A <i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i> shall denote
a class type that is not
an incompletely defined class (<a href='class'>[class]</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>The class denoted by the <i ><a href='class.derived#nt:class-or-decltype'>class-or-decltype</a></i> of
a <i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i> is called a
<a class='hidden_link' href='#def:base_class,direct' id='def:base_class,direct'><i >direct base class</i></a>
for the class being defined<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':base_class_'></a></span>During the lookup for a base class name, non-type names are
ignored (<a href='basic.scope.hiding'>[basic.scope.hiding]</a>)<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>If the name found is not a
<i ><a href='class#nt:class-name'>class-name</a></i>, the program is ill-formed<a class='hidden_link' href='#2.sentence-4'>.</a></div> <div id='2.sentence-5' class='sentence'>A class <span class='texttt'>B</span> is a
base class of a class <span class='texttt'>D</span> if it is a direct base class of
<span class='texttt'>D</span> or a direct base class of one of <span class='texttt'>D</span>'s base classes<a class='hidden_link' href='#2.sentence-5'>.</a></div> <div id='2.sentence-6' class='sentence'>A class is an <a class='hidden_link' href='#def:base_class,indirect' id='def:base_class,indirect'><i >indirect</i></a> base class of another if it is a base
class but not a direct base class<a class='hidden_link' href='#2.sentence-6'>.</a></div> <div id='2.sentence-7' class='sentence'>A class is said to be (directly or
indirectly) <a class='hidden_link' href='#def:derived' id='def:derived'><i>derived</i></a> from its (direct or indirect) base
classes<a class='hidden_link' href='#2.sentence-7'>.</a></div> <div id='2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.sentence-12' class='sentence'>See <a href='class.access'>[class.access]</a> for the meaning of
<i ><a href='class.derived#nt:access-specifier'>access-specifier</a></i><a class='hidden_link' href='#2.sentence-12'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='2.sentence-8' class='sentence'><span class='indexparent'><a class='index' id=':access_control,base_class_member'></a></span>Unless redeclared in the derived class, members of a base class are also
considered to be members of the derived class<a class='hidden_link' href='#2.sentence-8'>.</a></div> <div id='2.sentence-9' class='sentence'>Members of a base class other than constructors are said to be
<a class='hidden_link' href='#def:inheritance' id='def:inheritance'><i >inherited</i></a>
by the derived class<a class='hidden_link' href='#2.sentence-9'>.</a></div> <div id='2.sentence-10' class='sentence'>Constructors of a base class
can also be inherited as described in <a href='namespace.udecl'>[namespace.udecl]</a><a class='hidden_link' href='#2.sentence-10'>.</a></div> <div id='2.sentence-11' class='sentence'>Inherited members can be referred to in
expressions in the same manner as other members of the derived class,
unless their names are hidden or ambiguous (<a href='class.member.lookup'>[class.member.lookup]</a>)<a class='hidden_link' href='#2.sentence-11'>.</a></div> <span class='indexparent'><a class='index' id=':operator,scope_resolution'></a></span><div id='2.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#2.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.sentence-13' class='sentence'>The scope resolution operator <span class='texttt'>&#x200b;::&#x200b;</span> (<a href='expr.prim.id.qual'>[expr.prim.id.qual]</a>) can be used
to refer to a direct or indirect base member explicitly<a class='hidden_link' href='#2.sentence-13'>.</a></div> <div id='2.sentence-14' class='sentence'>This allows
access to a name that has been redeclared in the derived class<a class='hidden_link' href='#2.sentence-14'>.</a></div> <div id='2.sentence-15' class='sentence'>A
derived class can itself serve as a base class subject to access
control; see <a href='class.access.base'>[class.access.base]</a><a class='hidden_link' href='#2.sentence-15'>.</a></div> <div id='2.sentence-16' class='sentence'>A pointer to a derived class can be
implicitly converted to a pointer to an accessible unambiguous base
class (<a href='conv.ptr'>[conv.ptr]</a>)<a class='hidden_link' href='#2.sentence-16'>.</a></div> <div id='2.sentence-17' class='sentence'>An lvalue of a derived class type can be bound
to a reference to an accessible unambiguous base
class (<a href='dcl.init.ref'>[dcl.init.ref]</a>)<a class='hidden_link' href='#2.sentence-17'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3544'>#</a></div><div id='3.sentence-1' class='sentence'>The <i ><a href='class.derived#nt:base-specifier-list'>base-specifier-list</a></i> specifies the type of the
<a class='hidden_link' href='#def:base_class_subobjects' id='def:base_class_subobjects'><i>base class subobjects</i></a> contained in an
object of the derived class type<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct Base {
  int a, b, c;
};</pre><pre class='codeblock'>
struct Derived : Base {
  int b;
};</pre><pre class='codeblock'>
struct Derived2 : Derived {
  int c;
};</pre><div id='3.sentence-2' class='sentence'>Here, an object of class <span class='texttt'>Derived2</span> will have a subobject of class
<span class='texttt'>Derived</span> which in turn will have a subobject of class
<span class='texttt'>Base</span><a class='hidden_link' href='#3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3572'>#</a></div><div id='4.sentence-1' class='sentence'>A <i ><a href='class.derived#nt:base-specifier'>base-specifier</a></i> followed by an ellipsis is a pack
expansion (<a href='temp.variadic'>[temp.variadic]</a>)<a class='hidden_link' href='#4.sentence-1'>.</a></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3576'>#</a></div><div id='5.sentence-1' class='sentence'>The order in which the base class subobjects are allocated in the most
derived object (<a href='intro.object'>[intro.object]</a>) is unspecified<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='5.sentence-2' class='sentence'>A derived class and its base class subobjects can be represented by a
directed acyclic graph (DAG) where an arrow means “directly derived
from”<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>An arrow need not have a physical representation in memory<a class='hidden_link' href='#5.sentence-3'>.</a></div> <div id='5.sentence-4' class='sentence'>A DAG of subobjects is often referred to as a “subobject lattice”<a class='hidden_link' href='#5.sentence-4'>.</a></div><div class='figure' id='fig:dag'><svg width="114pt" height="182pt"
 viewBox="0.00 0.00 114.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>dag</title>
<!-- Base -->
<g class="node">
<title>Base</title>
<text text-anchor="middle" x="53" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">Base</text>
</g>
<!-- Derived1 -->
<g class="node">
<title>Derived1</title>
<text text-anchor="middle" x="53" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">Derived1</text>
</g>
<!-- Derived1&#45;&gt;Base -->
<g class="edge">
<title>Derived1&#45;&gt;Base</title>
<path fill="none" stroke="#000000" d="M53,-104.3034C53,-112.0173 53,-121.2875 53,-129.8876"/>
<polygon fill="#000000" stroke="#000000" points="49.5001,-129.8956 53,-139.8957 56.5001,-129.8957 49.5001,-129.8956"/>
</g>
<!-- Derived2 -->
<g class="node">
<title>Derived2</title>
<text text-anchor="middle" x="53" y="-10.8" font-family="Times,serif" font-size="24.00" fill="#000000">Derived2</text>
</g>
<!-- Derived2&#45;&gt;Derived1 -->
<g class="edge">
<title>Derived2&#45;&gt;Derived1</title>
<path fill="none" stroke="#000000" d="M53,-34.3034C53,-42.0173 53,-51.2875 53,-59.8876"/>
<polygon fill="#000000" stroke="#000000" points="49.5001,-59.8956 53,-69.8957 56.5001,-59.8957 49.5001,-59.8956"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:dag'>2</a> — Directed acyclic graph</div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3594'>#</a></div><div id='6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.sentence-1' class='sentence'>Initialization of objects representing base classes can be specified in
constructors; see <a href='class.base.init'>[class.base.init]</a><a class='hidden_link' href='#6.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3600'>#</a></div><div id='7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='7.sentence-1' class='sentence'>A base class subobject might have a layout (<a href='basic.stc'>[basic.stc]</a>) different
from the layout of a most derived object of the same type<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>A base class
subobject might have a polymorphic behavior (<a href='class.cdtor'>[class.cdtor]</a>)
different from the polymorphic behavior of a most derived object of the
same type<a class='hidden_link' href='#7.sentence-2'>.</a></div> <div id='7.sentence-3' class='sentence'>A base class subobject may be of zero size (<a href='class'>[class]</a>);
however, two subobjects that have the same class type and that belong to
the same most derived object must not be allocated at the same
address (<a href='expr.eq'>[expr.eq]</a>)<a class='hidden_link' href='#7.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='class.mi' class='section'><h3 ><a class='secnum' href='#class.mi' style='min-width:103pt'>10.6.1</a> Multiple base classes <a class='abbr_ref' href='class.mi'>[class.mi]</a></h3><span class='indexparent'><a class='index' id=':multiple_inheritance_'></a></span><span class='indexparent'><a class='index' id=':base_class__'></a></span><div class='para' id='class.mi-1'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3616'>#</a></div><div id='class.mi-1.sentence-1' class='sentence'>A class can be derived from any number of base classes<a class='hidden_link' href='#class.mi-1.sentence-1'>.</a></div> <div id='class.mi-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.mi-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.mi-1.sentence-2' class='sentence'>The use of more than one direct base class is often called multiple inheritance<a class='hidden_link' href='#class.mi-1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.mi-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.mi-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class A { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class C { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class D : public A, public B, public C { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.mi-2'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3630'>#</a></div><span class='indexparent'><a class='index' id=':layout,class_object'></a></span><span class='indexparent'><a class='index' id=':initialization,order_of'></a></span><div id='class.mi-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.mi-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.mi-2.sentence-1' class='sentence'>The order of derivation is not significant except as specified by the
semantics of initialization by constructor (<a href='class.base.init'>[class.base.init]</a>),
cleanup (<a href='class.dtor'>[class.dtor]</a>), and storage
layout (<a href='class.mem'>[class.mem]</a>, <a href='class.access.spec'>[class.access.spec]</a>)<a class='hidden_link' href='#class.mi-2.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.mi-3'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3640'>#</a></div><div id='class.mi-3.sentence-1' class='sentence'>A class shall not be specified as a direct base class of a derived class
more than once<a class='hidden_link' href='#class.mi-3.sentence-1'>.</a></div> <div id='class.mi-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.mi-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.mi-3.sentence-2' class='sentence'>A class can be an indirect base class more than once and can be a direct
and an indirect base class<a class='hidden_link' href='#class.mi-3.sentence-2'>.</a></div> <div id='class.mi-3.sentence-3' class='sentence'>There are limited things that can be done
with such a class<a class='hidden_link' href='#class.mi-3.sentence-3'>.</a></div> <div id='class.mi-3.sentence-4' class='sentence'>The non-static data members and member functions of
the direct base class cannot be referred to in the scope of the derived
class<a class='hidden_link' href='#class.mi-3.sentence-4'>.</a></div> <div id='class.mi-3.sentence-5' class='sentence'>However, the static members, enumerations and types can be
unambiguously referred to<a class='hidden_link' href='#class.mi-3.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.mi-3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.mi-3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class Y : public X, public X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };             <span class='comment'>// ill-formed
</span></pre> <pre class='codeblock'>
class L { public: int next;  <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class A : public L { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class B : public L { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class C : public A, public B { void f(); <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };   <span class='comment'>// well-formed
</span>class D : public A, public L { void f(); <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };   <span class='comment'>// well-formed
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.mi-4'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3666'>#</a></div><div id='class.mi-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':base_class,virtual'></a></span>A base class specifier that does not contain the keyword
<span class='texttt'>virtual</span> specifies a <a class='hidden_link' href='#def:base_class,non-virtual' id='def:base_class,non-virtual'><i >non-virtual base class</i></a><a class='hidden_link' href='#class.mi-4.sentence-1'>.</a></div> <div id='class.mi-4.sentence-2' class='sentence'>A base
class specifier that contains the keyword <span class='texttt'>virtual</span> specifies a
<a class='hidden_link' href='#def:base_class,virtual' id='def:base_class,virtual'><i >virtual base class</i></a><a class='hidden_link' href='#class.mi-4.sentence-2'>.</a></div> <div id='class.mi-4.sentence-3' class='sentence'>For each distinct occurrence of a
non-virtual base class in the class lattice of the most derived class,
the most derived object (<a href='intro.object'>[intro.object]</a>) shall contain a
corresponding distinct base class subobject of that type<a class='hidden_link' href='#class.mi-4.sentence-3'>.</a></div> <div id='class.mi-4.sentence-4' class='sentence'>For each
distinct base class that is specified virtual, the most derived object
shall contain a single base class subobject of that type<a class='hidden_link' href='#class.mi-4.sentence-4'>.</a></div></div><div class='para' id='class.mi-5'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3678'>#</a></div><div id='class.mi-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.mi-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.mi-5.sentence-1' class='sentence'>For an object of class type <span class='texttt'>C</span>, each distinct occurrence of a
(non-virtual) base class <span class='texttt'>L</span> in the class lattice of <span class='texttt'>C</span>
corresponds one-to-one with a distinct <span class='texttt'>L</span> subobject within the
object of type <span class='texttt'>C</span><a class='hidden_link' href='#class.mi-5.sentence-1'>.</a></div> <div id='class.mi-5.sentence-2' class='sentence'>Given the class <span class='texttt'>C</span> defined above, an
object of class <span class='texttt'>C</span> will have two subobjects of class <span class='texttt'>L</span> as
shown in Figure <a href='#fig:nonvirt'>[fig:nonvirt]</a><a class='hidden_link' href='#class.mi-5.sentence-2'>.</a></div><div class='figure' id='fig:nonvirt'><svg width="224pt" height="182pt"
 viewBox="0.00 0.00 224.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>nonvirt</title>
<!-- L1 -->
<g class="node">
<title>L1</title>
<text text-anchor="middle" x="27" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">L</text>
</g>
<!-- L2 -->
<g class="node">
<title>L2</title>
<text text-anchor="middle" x="189" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">L</text>
</g>
<!-- A -->
<g class="node">
<title>A</title>
<text text-anchor="middle" x="27" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">A</text>
</g>
<!-- A&#45;&gt;L1 -->
<g class="edge">
<title>A&#45;&gt;L1</title>
<path fill="none" stroke="#000000" d="M27,-104.3034C27,-112.0173 27,-121.2875 27,-129.8876"/>
<polygon fill="#000000" stroke="#000000" points="23.5001,-129.8956 27,-139.8957 30.5001,-129.8957 23.5001,-129.8956"/>
</g>
<!-- B -->
<g class="node">
<title>B</title>
<text text-anchor="middle" x="189" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">B</text>
</g>
<!-- B&#45;&gt;L2 -->
<g class="edge">
<title>B&#45;&gt;L2</title>
<path fill="none" stroke="#000000" d="M189,-104.3034C189,-112.0173 189,-121.2875 189,-129.8876"/>
<polygon fill="#000000" stroke="#000000" points="185.5001,-129.8956 189,-139.8957 192.5001,-129.8957 185.5001,-129.8956"/>
</g>
<!-- C -->
<g class="node">
<title>C</title>
<text text-anchor="middle" x="108" y="-10.8" font-family="Times,serif" font-size="24.00" fill="#000000">C</text>
</g>
<!-- C&#45;&gt;A -->
<g class="edge">
<title>C&#45;&gt;A</title>
<path fill="none" stroke="#000000" d="M87.9775,-34.3034C77.8744,-43.0345 65.464,-53.7595 54.4825,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="52.0698,-60.7088 46.7922,-69.8957 56.6468,-66.0052 52.0698,-60.7088"/>
</g>
<!-- C&#45;&gt;B -->
<g class="edge">
<title>C&#45;&gt;B</title>
<path fill="none" stroke="#000000" d="M128.0225,-34.3034C138.1256,-43.0345 150.536,-53.7595 161.5175,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="159.3532,-66.0052 169.2078,-69.8957 163.9302,-60.7088 159.3532,-66.0052"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:nonvirt'>3</a> — Non-virtual base</div><div id='class.mi-5.sentence-3' class='sentence'>In such lattices, explicit qualification can be used to specify which
subobject is meant<a class='hidden_link' href='#class.mi-5.sentence-3'>.</a></div> <div id='class.mi-5.sentence-4' class='sentence'>The body of function <span class='texttt'>C&#x200b;::&#x200b;f</span> could refer to the
member <span class='texttt'>next</span> of each <span class='texttt'>L</span> subobject:
<pre class='codeblock'>
void C::f() { A::next = B::next; }      <span class='comment'>// well-formed
</span></pre>
Without the <span class='texttt'>A&#x200b;::&#x200b;</span> or <span class='texttt'>B&#x200b;::&#x200b;</span> qualifiers, the definition of
<span class='texttt'>C&#x200b;::&#x200b;f</span> above would be ill-formed because of
ambiguity (<a href='class.member.lookup'>[class.member.lookup]</a>)<a class='hidden_link' href='#class.mi-5.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.mi-6'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3704'>#</a></div><div id='class.mi-6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.mi-6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.mi-6.sentence-1' class='sentence'>In contrast, consider the case with a virtual base class:
<pre class='codeblock'>
class V { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class A : virtual public V { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class B : virtual public V { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class C : public A, public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre>
<div class='figure' id='fig:virt'><svg width="224pt" height="182pt"
 viewBox="0.00 0.00 224.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>virt</title>
<!-- V -->
<g class="node">
<title>V</title>
<text text-anchor="middle" x="108" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">V</text>
</g>
<!-- A -->
<g class="node">
<title>A</title>
<text text-anchor="middle" x="27" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">A</text>
</g>
<!-- A&#45;&gt;V -->
<g class="edge">
<title>A&#45;&gt;V</title>
<path fill="none" stroke="#000000" d="M47.0225,-104.3034C57.1256,-113.0345 69.536,-123.7595 80.5175,-133.2497"/>
<polygon fill="#000000" stroke="#000000" points="78.3532,-136.0052 88.2078,-139.8957 82.9302,-130.7088 78.3532,-136.0052"/>
</g>
<!-- B -->
<g class="node">
<title>B</title>
<text text-anchor="middle" x="189" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">B</text>
</g>
<!-- B&#45;&gt;V -->
<g class="edge">
<title>B&#45;&gt;V</title>
<path fill="none" stroke="#000000" d="M168.9775,-104.3034C158.8744,-113.0345 146.464,-123.7595 135.4825,-133.2497"/>
<polygon fill="#000000" stroke="#000000" points="133.0698,-130.7088 127.7922,-139.8957 137.6468,-136.0052 133.0698,-130.7088"/>
</g>
<!-- C -->
<g class="node">
<title>C</title>
<text text-anchor="middle" x="108" y="-10.8" font-family="Times,serif" font-size="24.00" fill="#000000">C</text>
</g>
<!-- C&#45;&gt;A -->
<g class="edge">
<title>C&#45;&gt;A</title>
<path fill="none" stroke="#000000" d="M87.9775,-34.3034C77.8744,-43.0345 65.464,-53.7595 54.4825,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="52.0698,-60.7088 46.7922,-69.8957 56.6468,-66.0052 52.0698,-60.7088"/>
</g>
<!-- C&#45;&gt;B -->
<g class="edge">
<title>C&#45;&gt;B</title>
<path fill="none" stroke="#000000" d="M128.0225,-34.3034C138.1256,-43.0345 150.536,-53.7595 161.5175,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="159.3532,-66.0052 169.2078,-69.8957 163.9302,-60.7088 159.3532,-66.0052"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:virt'>4</a> — Virtual base</div>
For an object <span class='texttt'>c</span> of class type <span class='texttt'>C</span>, a single subobject of
type <span class='texttt'>V</span> is shared by every base class subobject of <span class='texttt'>c</span> that has a
<span class='texttt'>virtual</span> base class of type <span class='texttt'>V</span><a class='hidden_link' href='#class.mi-6.sentence-1'>.</a></div> <div id='class.mi-6.sentence-2' class='sentence'>Given the class <span class='texttt'>C</span>
defined above, an object of class <span class='texttt'>C</span> will have one subobject of
class <span class='texttt'>V</span>, as shown in Figure <a href='#fig:virt'>[fig:virt]</a><a class='hidden_link' href='#class.mi-6.sentence-2'>.</a></div> <span class='indexparent'><a class='index' id=':DAG,multiple_inheritance'></a></span><span class='indexparent'><a class='index' id=':DAG,virtual_base_class'></a></span> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.mi-7'><div class='marginalizedparent'><a class='marginalized' href='#class.mi-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3727'>#</a></div><div id='class.mi-7.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.mi-7.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.mi-7.sentence-1' class='sentence'>A class can have both virtual and non-virtual base classes of a given
type<a class='hidden_link' href='#class.mi-7.sentence-1'>.</a></div> <pre class='codeblock'>
class B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class X : virtual public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class Y : virtual public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class Z : public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class AA : public X, public Y, public Z { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre> <div id='class.mi-7.sentence-2' class='sentence'>
For an object of class <span class='texttt'>AA</span>, all <span class='texttt'>virtual</span> occurrences of
base class <span class='texttt'>B</span> in the class lattice of <span class='texttt'>AA</span> correspond to a
single <span class='texttt'>B</span> subobject within the object of type <span class='texttt'>AA</span>, and
every other occurrence of a (non-virtual) base class <span class='texttt'>B</span> in the
class lattice of <span class='texttt'>AA</span> corresponds one-to-one with a distinct
<span class='texttt'>B</span> subobject within the object of type <span class='texttt'>AA</span><a class='hidden_link' href='#class.mi-7.sentence-2'>.</a></div> <div id='class.mi-7.sentence-3' class='sentence'>Given the
class <span class='texttt'>AA</span> defined above, class <span class='texttt'>AA</span> has two subobjects of
class <span class='texttt'>B</span>: <span class='texttt'>Z</span>'s <span class='texttt'>B</span> and the virtual <span class='texttt'>B</span> shared
by <span class='texttt'>X</span> and <span class='texttt'>Y</span>, as shown in Figure <a href='#fig:virtnonvirt'>[fig:virtnonvirt]</a><a class='hidden_link' href='#class.mi-7.sentence-3'>.</a></div><span class='indexparent'><a class='index' id=':DAG,virtual_base_class_'></a></span><span class='indexparent'><a class='index' id=':DAG,non-virtual_base_class'></a></span><span class='indexparent'><a class='index' id=':DAG,multiple_inheritance_'></a></span><div class='figure' id='fig:virtnonvirt'><svg width="386pt" height="182pt"
 viewBox="0.00 0.00 386.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>virtnonvirt</title>
<!-- B1 -->
<g class="node">
<title>B1</title>
<text text-anchor="middle" x="108" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">B</text>
</g>
<!-- B2 -->
<g class="node">
<title>B2</title>
<text text-anchor="middle" x="351" y="-150.8" font-family="Times,serif" font-size="24.00" fill="#000000">B</text>
</g>
<!-- AA -->
<g class="node">
<title>AA</title>
<text text-anchor="middle" x="108" y="-10.8" font-family="Times,serif" font-size="24.00" fill="#000000">AA</text>
</g>
<!-- X -->
<g class="node">
<title>X</title>
<text text-anchor="middle" x="27" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">X</text>
</g>
<!-- AA&#45;&gt;X -->
<g class="edge">
<title>AA&#45;&gt;X</title>
<path fill="none" stroke="#000000" d="M87.9775,-34.3034C77.8744,-43.0345 65.464,-53.7595 54.4825,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="52.0698,-60.7088 46.7922,-69.8957 56.6468,-66.0052 52.0698,-60.7088"/>
</g>
<!-- Y -->
<g class="node">
<title>Y</title>
<text text-anchor="middle" x="189" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">Y</text>
</g>
<!-- AA&#45;&gt;Y -->
<g class="edge">
<title>AA&#45;&gt;Y</title>
<path fill="none" stroke="#000000" d="M128.0225,-34.3034C138.1256,-43.0345 150.536,-53.7595 161.5175,-63.2497"/>
<polygon fill="#000000" stroke="#000000" points="159.3532,-66.0052 169.2078,-69.8957 163.9302,-60.7088 159.3532,-66.0052"/>
</g>
<!-- Z -->
<g class="node">
<title>Z</title>
<text text-anchor="middle" x="351" y="-80.8" font-family="Times,serif" font-size="24.00" fill="#000000">Z</text>
</g>
<!-- AA&#45;&gt;Z -->
<g class="edge">
<title>AA&#45;&gt;Z</title>
<path fill="none" stroke="#000000" d="M135.4028,-24.8938C179.0896,-37.4785 264.596,-62.11 313.7812,-76.2785"/>
<polygon fill="#000000" stroke="#000000" points="313.1192,-79.7301 323.6973,-79.135 315.0569,-73.0036 313.1192,-79.7301"/>
</g>
<!-- X&#45;&gt;B1 -->
<g class="edge">
<title>X&#45;&gt;B1</title>
<path fill="none" stroke="#000000" d="M47.0225,-104.3034C57.1256,-113.0345 69.536,-123.7595 80.5175,-133.2497"/>
<polygon fill="#000000" stroke="#000000" points="78.3532,-136.0052 88.2078,-139.8957 82.9302,-130.7088 78.3532,-136.0052"/>
</g>
<!-- Y&#45;&gt;B1 -->
<g class="edge">
<title>Y&#45;&gt;B1</title>
<path fill="none" stroke="#000000" d="M168.9775,-104.3034C158.8744,-113.0345 146.464,-123.7595 135.4825,-133.2497"/>
<polygon fill="#000000" stroke="#000000" points="133.0698,-130.7088 127.7922,-139.8957 137.6468,-136.0052 133.0698,-130.7088"/>
</g>
<!-- Z&#45;&gt;B2 -->
<g class="edge">
<title>Z&#45;&gt;B2</title>
<path fill="none" stroke="#000000" d="M351,-104.3034C351,-112.0173 351,-121.2875 351,-129.8876"/>
<polygon fill="#000000" stroke="#000000" points="347.5001,-129.8956 351,-139.8957 354.5001,-129.8957 347.5001,-129.8956"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:virtnonvirt'>5</a> — Virtual and non-virtual base</div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='class.virtual' class='section'><h3 ><a class='secnum' href='#class.virtual' style='min-width:103pt'>10.6.2</a> Virtual functions <a class='abbr_ref' href='class.virtual'>[class.virtual]</a></h3><span class='indexparent'><a class='index' id=':function,virtual'></a></span><span class='indexparent'><a class='index' id=':type,polymorphic'></a></span><div class='para' id='class.virtual-1'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3762'>#</a></div><div id='class.virtual-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.virtual-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.virtual-1.sentence-2' class='sentence'>Virtual functions support dynamic binding and object-oriented
programming<a class='hidden_link' href='#class.virtual-1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.virtual-1.sentence-1' class='sentence'> A class that declares or inherits a virtual function is
called a <a class='hidden_link' href='#def:class,polymorphic' id='def:class,polymorphic'><i >polymorphic class</i></a><a class='hidden_link' href='#class.virtual-1.sentence-1'>.</a></div></div><div class='para' id='class.virtual-2'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3768'>#</a></div><div id='class.virtual-2.sentence-1' class='sentence'>If a virtual member function <span class='texttt'>vf</span> is declared in a class
<span class='texttt'>Base</span> and in a class <span class='texttt'>Derived</span>, derived directly or
indirectly from <span class='texttt'>Base</span>, a member function <span class='texttt'>vf</span> with the same
name, parameter-type-list (<a href='dcl.fct'>[dcl.fct]</a>), cv-qualification, and ref-qualifier
(or absence of same) as
<span class='texttt'>Base&#x200b;::&#x200b;vf</span> is declared, then <span class='texttt'>Derived&#x200b;::&#x200b;vf</span> is also virtual
(whether or not it is so declared) and it <a class='hidden_link' href='#def:overrides' id='def:overrides'><i>overrides</i></a><a class='footnotenum' href='#footnote-114'>114</a>
<span class='texttt'>Base&#x200b;::&#x200b;vf</span><a class='hidden_link' href='#class.virtual-2.sentence-1'>.</a></div> <div id='class.virtual-2.sentence-2' class='sentence'>For convenience we say that any virtual function
overrides itself<a class='hidden_link' href='#class.virtual-2.sentence-2'>.</a></div> <div id='class.virtual-2.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':overrider,final'></a></span>A virtual member function <span class='texttt'>C&#x200b;::&#x200b;vf</span> of a class object <span class='texttt'>S</span> is a <a class='hidden_link' href='#def:final_overrider' id='def:final_overrider'><i >final
overrider</i></a> unless the most derived class (<a href='intro.object'>[intro.object]</a>) of which <span class='texttt'>S</span> is a
base class subobject (if any) declares or inherits another member function that overrides
<span class='texttt'>vf</span><a class='hidden_link' href='#class.virtual-2.sentence-3'>.</a></div> <div id='class.virtual-2.sentence-4' class='sentence'>In a derived class, if a virtual member function of a base class subobject
has more than one final overrider the program is ill-formed<a class='hidden_link' href='#class.virtual-2.sentence-4'>.</a></div> <div id='class.virtual-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.virtual-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  virtual void f();
};
struct B : virtual A {
  virtual void f();
};
struct C : B , virtual A {
  using A::f;
};

void foo() {
  C c;
  c.f();              <span class='comment'>// calls <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f</span>, the final overrider
</span>  c.C::f();           <span class='comment'>// calls <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span> because of the using-declaration
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> <div id='class.virtual-2.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.virtual-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A { virtual void f(); };
struct B : A { };
struct C : A { void f(); };
struct D : B, C { };  <span class='comment'>// OK: <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span> and <span class='tcode_in_codeblock'>C&#x200b;::&#x200b;f</span> are the final overriders
</span>                      <span class='comment'>// for the <span class='tcode_in_codeblock'>B</span> and <span class='tcode_in_codeblock'>C</span> subobjects, respectively
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.virtual-3'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3819'>#</a></div><div id='class.virtual-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.virtual-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.virtual-3.sentence-1' class='sentence'>A virtual member function does not have to be visible to be overridden,
for example,
<pre class='codeblock'>
struct B {
  virtual void f();
};
struct D : B {
  void f(int);
};
struct D2 : D {
  void f();
};</pre>
the function <span class='texttt'>f(int)</span> in class <span class='texttt'>D</span> hides the virtual
function <span class='texttt'>f()</span> in its base class <span class='texttt'>B</span>; <span class='texttt'>D&#x200b;::&#x200b;f(int)</span> is
not a virtual function<a class='hidden_link' href='#class.virtual-3.sentence-1'>.</a></div> <div id='class.virtual-3.sentence-2' class='sentence'>However, <span class='texttt'>f()</span> declared in class
<span class='texttt'>D2</span> has the same name and the same parameter list as
<span class='texttt'>B&#x200b;::&#x200b;f()</span>, and therefore is a virtual function that overrides the
function <span class='texttt'>B&#x200b;::&#x200b;f()</span> even though <span class='texttt'>B&#x200b;::&#x200b;f()</span> is not visible in
class <span class='texttt'>D2</span><a class='hidden_link' href='#class.virtual-3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.virtual-4'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3843'>#</a></div><div id='class.virtual-4.sentence-1' class='sentence'>If a virtual function <span class='texttt'>f</span> in some class <span class='texttt'>B</span> is marked with the
<i ><a href='class.mem#nt:virt-specifier'>virt-specifier</a></i> <span class='texttt'>final</span> and in a class <span class='texttt'>D</span> derived from <span class='texttt'>B</span>
a function <span class='texttt'>D&#x200b;::&#x200b;f</span> overrides <span class='texttt'>B&#x200b;::&#x200b;f</span>, the program is ill-formed<a class='hidden_link' href='#class.virtual-4.sentence-1'>.</a></div> <div id='class.virtual-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.virtual-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct B {
  virtual void f() const final;
};

struct D : B {
  void f() const;     <span class='comment'>// error: <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;f</span> attempts to override <span class='tcode_in_codeblock'>final</span> <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f</span>
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.virtual-5'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3858'>#</a></div><div id='class.virtual-5.sentence-1' class='sentence'>If a virtual function is marked with the <i ><a href='class.mem#nt:virt-specifier'>virt-specifier</a></i> <span class='texttt'>override</span> and
does not override a member function of a base class, the program is ill-formed<a class='hidden_link' href='#class.virtual-5.sentence-1'>.</a></div> <div id='class.virtual-5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.virtual-5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct B {
  virtual void f(int);
};

struct D : B {
  virtual void f(long) override;  <span class='comment'>// error: wrong signature overriding <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;f</span>
</span>  virtual void f(int) override;   <span class='comment'>// OK
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.virtual-6'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3873'>#</a></div><div id='class.virtual-6.sentence-1' class='sentence'>A virtual function shall not have a trailing <i ><a href='temp#nt:requires-clause'>requires-clause</a></i> (<a href='dcl.decl'>[dcl.decl]</a>)<a class='hidden_link' href='#class.virtual-6.sentence-1'>.</a></div> <div id='class.virtual-6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.virtual-6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  virtual void f() requires true; <span class='comment'>// error: virtual function cannot be constrained (<a href='temp.constr.decl'>[temp.constr.decl]</a>)
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.virtual-7'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3883'>#</a></div><div id='class.virtual-7.sentence-1' class='sentence'>Even though destructors are not inherited, a destructor in a derived
class overrides a base class destructor declared virtual;
see <a href='class.dtor'>[class.dtor]</a> and <a href='class.free'>[class.free]</a><a class='hidden_link' href='#class.virtual-7.sentence-1'>.</a></div></div><div class='para' id='class.virtual-8'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3888'>#</a></div><div id='class.virtual-8.sentence-1' class='sentence'>The return type of an overriding function shall be either identical to
the return type of the overridden function or <a class='hidden_link' href='#def:return_type,covariant' id='def:return_type,covariant'><i >covariant</i></a> with
the classes of the functions<a class='hidden_link' href='#class.virtual-8.sentence-1'>.</a></div> <div id='class.virtual-8.sentence-2' class='sentence'>If a function <span class='texttt'>D&#x200b;::&#x200b;f</span> overrides a
function <span class='texttt'>B&#x200b;::&#x200b;f</span>, the return types of the functions are covariant
if they satisfy the following criteria:
<ul class='itemize'><li id='class.virtual-8.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.virtual-8.1'>(8.1)</a></div><div id='class.virtual-8.1.sentence-1' class='sentence'>both are pointers to classes, both are lvalue references to
classes, or both are rvalue references to classes<a class='footnotenum' href='#footnote-115'>115</a></div></li><li id='class.virtual-8.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.virtual-8.2'>(8.2)</a></div><div id='class.virtual-8.2.sentence-1' class='sentence'>the class in the return type of <span class='texttt'>B&#x200b;::&#x200b;f</span> is the same class as
the class in the return type of <span class='texttt'>D&#x200b;::&#x200b;f</span>, or is an unambiguous and
accessible direct or indirect base class of the class in the return type
of <span class='texttt'>D&#x200b;::&#x200b;f</span></div></li><li id='class.virtual-8.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#class.virtual-8.3'>(8.3)</a></div><div id='class.virtual-8.3.sentence-1' class='sentence'>both pointers or references have the same cv-qualification and the
class type in the return type of <span class='texttt'>D&#x200b;::&#x200b;f</span> has the same
cv-qualification as or less cv-qualification than the class type in the
return type of <span class='texttt'>B&#x200b;::&#x200b;f</span><a class='hidden_link' href='#class.virtual-8.3.sentence-1'>.</a></div></li></ul></div></div><div class='para' id='class.virtual-9'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3911'>#</a></div><div id='class.virtual-9.sentence-1' class='sentence'>If the class type in the covariant return type of <span class='texttt'>D&#x200b;::&#x200b;f</span> differs from that of
<span class='texttt'>B&#x200b;::&#x200b;f</span>, the class type in the return type of <span class='texttt'>D&#x200b;::&#x200b;f</span> shall be
complete at the point of declaration of <span class='texttt'>D&#x200b;::&#x200b;f</span> or shall be the
class type <span class='texttt'>D</span><a class='hidden_link' href='#class.virtual-9.sentence-1'>.</a></div> <div id='class.virtual-9.sentence-2' class='sentence'>When the overriding function is called as the
final overrider of the overridden function, its result is converted to
the type returned by the (statically chosen) overridden
function (<a href='expr.call'>[expr.call]</a>)<a class='hidden_link' href='#class.virtual-9.sentence-2'>.</a></div> <div id='class.virtual-9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.virtual-9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class B { };
class D : private B { friend class Derived; };
struct Base {
  virtual void vf1();
  virtual void vf2();
  virtual void vf3();
  virtual B*   vf4();
  virtual B*   vf5();
  void f();
};

struct No_good : public Base {
  D*  vf4();        <span class='comment'>// error: <span class='tcode_in_codeblock'>B</span> (base class of <span class='tcode_in_codeblock'>D</span>) inaccessible
</span>};

class A;
struct Derived : public Base {
    void vf1();     <span class='comment'>// virtual and overrides <span class='tcode_in_codeblock'>Base&#x200b;::&#x200b;vf1()</span>
</span>    void vf2(int);  <span class='comment'>// not virtual, hides <span class='tcode_in_codeblock'>Base&#x200b;::&#x200b;vf2()</span>
</span>    char vf3();     <span class='comment'>// error: invalid difference in return type only
</span>    D*   vf4();     <span class='comment'>// OK: returns pointer to derived class
</span>    A*   vf5();     <span class='comment'>// error: returns pointer to incomplete class
</span>    void f();
};

void g() {
  Derived d;
  Base* bp = &amp;d;                <span class='comment'>// standard conversion:
</span>                                <span class='comment'>// <span class='tcode_in_codeblock'>Derived*</span> to <span class='tcode_in_codeblock'>Base*</span>
</span>  bp-&gt;vf1();                    <span class='comment'>// calls <span class='tcode_in_codeblock'>Derived&#x200b;::&#x200b;vf1()</span>
</span>  bp-&gt;vf2();                    <span class='comment'>// calls <span class='tcode_in_codeblock'>Base&#x200b;::&#x200b;vf2()</span>
</span>  bp-&gt;f();                      <span class='comment'>// calls <span class='tcode_in_codeblock'>Base&#x200b;::&#x200b;f()</span> (not virtual)
</span>  B*  p = bp-&gt;vf4();            <span class='comment'>// calls <span class='tcode_in_codeblock'>Derived&#x200b;::&#x200b;vf4()</span> and converts the
</span>                                <span class='comment'>// result to <span class='tcode_in_codeblock'>B*</span>
</span>  Derived*  dp = &amp;d;
  D*  q = dp-&gt;vf4();            <span class='comment'>// calls <span class='tcode_in_codeblock'>Derived&#x200b;::&#x200b;vf4()</span> and does not
</span>                                <span class='comment'>// convert the result to <span class='tcode_in_codeblock'>B*</span>
</span>  dp-&gt;vf2();                    <span class='comment'>// ill-formed: argument mismatch
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.virtual-10'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3963'>#</a></div><div id='class.virtual-10.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.virtual-10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.virtual-10.sentence-1' class='sentence'>The interpretation of the call of a virtual function depends on the type
of the object for which it is called (the dynamic type), whereas the
interpretation of a call of a non-virtual member function depends only
on the type of the pointer or reference denoting that object (the static
type) (<a href='expr.call'>[expr.call]</a>)<a class='hidden_link' href='#class.virtual-10.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.virtual-11'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3972'>#</a></div><div id='class.virtual-11.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.virtual-11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.virtual-11.sentence-1' class='sentence'>The <span class='texttt'>virtual</span> specifier implies membership, so a virtual function
cannot be a non-member (<a href='dcl.fct.spec'>[dcl.fct.spec]</a>) function<a class='hidden_link' href='#class.virtual-11.sentence-1'>.</a></div> <div id='class.virtual-11.sentence-2' class='sentence'>Nor can a virtual
function be a static member, since a virtual function call relies on a
specific object for determining which function to invoke<a class='hidden_link' href='#class.virtual-11.sentence-2'>.</a></div> <div id='class.virtual-11.sentence-3' class='sentence'>A virtual
function declared in one class can be declared a friend (<a href='class.friend'>[class.friend]</a>) in
another class<a class='hidden_link' href='#class.virtual-11.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.virtual-12'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3982'>#</a></div><div id='class.virtual-12.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':definition,virtual_function'></a></span>A virtual function declared in a class shall be defined, or declared
pure (<a href='#class.abstract'>[class.abstract]</a>) in that class, or both; no diagnostic is
required (<a href='basic.def.odr'>[basic.def.odr]</a>)<a class='hidden_link' href='#class.virtual-12.sentence-1'>.</a></div> <span class='indexparent'><a class='index' id=':friend,virtual_and'></a></span></div><div class='para' id='class.virtual-13'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L3989'>#</a></div><span class='indexparent'><a class='index' id=':multiple_inheritance,virtual_and'></a></span><div id='class.virtual-13.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.virtual-13.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.virtual-13.sentence-1' class='sentence'>Here are some uses of virtual functions with multiple base classes:
<pre class='codeblock'>
struct A {
  virtual void f();
};

struct B1 : A {                 <span class='comment'>// note non-virtual derivation
</span>  void f();
};

struct B2 : A {
  void f();
};

struct D : B1, B2 {             <span class='comment'>// <span class='tcode_in_codeblock'>D</span> has two separate <span class='tcode_in_codeblock'>A</span> subobjects
</span>};

void foo() {
  D   d;
<span class='comment'>//<span class='tcode_in_codeblock'>   A*  ap = &amp;d;</span>                  // would be ill-formed: ambiguous
</span>  B1*  b1p = &amp;d;
  A*   ap = b1p;
  D*   dp = &amp;d;
  ap-&gt;f();                      <span class='comment'>// calls <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;B1&#x200b;::&#x200b;f</span>
</span>  dp-&gt;f();                      <span class='comment'>// ill-formed: ambiguous
</span>}</pre>
In class <span class='texttt'>D</span> above there are two occurrences of class <span class='texttt'>A</span>
and hence two occurrences of the virtual member function <span class='texttt'>A&#x200b;::&#x200b;f</span><a class='hidden_link' href='#class.virtual-13.sentence-1'>.</a></div> <div id='class.virtual-13.sentence-2' class='sentence'>The final overrider of <span class='texttt'>B1&#x200b;::&#x200b;A&#x200b;::&#x200b;f</span> is <span class='texttt'>B1&#x200b;::&#x200b;f</span> and the final
overrider of <span class='texttt'>B2&#x200b;::&#x200b;A&#x200b;::&#x200b;f</span> is <span class='texttt'>B2&#x200b;::&#x200b;f</span><a class='hidden_link' href='#class.virtual-13.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.virtual-14'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L4025'>#</a></div><div id='class.virtual-14.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.virtual-14.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.virtual-14.sentence-1' class='sentence'>The following example shows a function that does not have a unique final
overrider:
<pre class='codeblock'>
struct A {
  virtual void f();
};

struct VB1 : virtual A {        <span class='comment'>// note virtual derivation
</span>  void f();
};

struct VB2 : virtual A {
  void f();
};

struct Error : VB1, VB2 {       <span class='comment'>// ill-formed
</span>};

struct Okay : VB1, VB2 {
  void f();
};</pre>
Both <span class='texttt'>VB1&#x200b;::&#x200b;f</span> and <span class='texttt'>VB2&#x200b;::&#x200b;f</span> override <span class='texttt'>A&#x200b;::&#x200b;f</span> but there
is no overrider of both of them in class <span class='texttt'>Error</span><a class='hidden_link' href='#class.virtual-14.sentence-1'>.</a></div> <div id='class.virtual-14.sentence-2' class='sentence'>This example is
therefore ill-formed<a class='hidden_link' href='#class.virtual-14.sentence-2'>.</a></div> <div id='class.virtual-14.sentence-3' class='sentence'>Class <span class='texttt'>Okay</span> is well-formed, however,
because <span class='texttt'>Okay&#x200b;::&#x200b;f</span> is a final overrider<a class='hidden_link' href='#class.virtual-14.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.virtual-15'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L4055'>#</a></div><div id='class.virtual-15.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.virtual-15.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='class.virtual-15.sentence-1' class='sentence'>The following example uses the well-formed classes from above<a class='hidden_link' href='#class.virtual-15.sentence-1'>.</a></div> <pre class='codeblock'>
struct VB1a : virtual A {       <span class='comment'>// does not declare <span class='tcode_in_codeblock'>f</span>
</span>};

struct Da : VB1a, VB2 {
};

void foe() {
  VB1a*  vb1ap = new Da;
  vb1ap-&gt;f();                   <span class='comment'>// calls <span class='tcode_in_codeblock'>VB2&#x200b;::&#x200b;f</span>
</span>}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.virtual-16'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L4072'>#</a></div><div id='class.virtual-16.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':operator,scope_resolution_'></a></span><span class='indexparent'><a class='index' id=':virtual_function_call'></a></span>Explicit qualification with the scope operator (<a href='expr.prim.id.qual'>[expr.prim.id.qual]</a>)
suppresses the virtual call mechanism<a class='hidden_link' href='#class.virtual-16.sentence-1'>.</a></div> <div id='class.virtual-16.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.virtual-16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class B { public: virtual void f(); };
class D : public B { public: void f(); };

void D::f() { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> B::f(); }</pre><div id='class.virtual-16.sentence-2' class='sentence'>Here, the function call in
<span class='texttt'>D&#x200b;::&#x200b;f</span>
really does call
<span class='texttt'>B&#x200b;::&#x200b;f</span>
and not
<span class='texttt'>D&#x200b;::&#x200b;f</span><a class='hidden_link' href='#class.virtual-16.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.virtual-17'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L4093'>#</a></div><div id='class.virtual-17.sentence-1' class='sentence'>A function with a deleted definition (<a href='dcl.fct.def'>[dcl.fct.def]</a>) shall
not override a function that does not have a deleted definition<a class='hidden_link' href='#class.virtual-17.sentence-1'>.</a></div> <div id='class.virtual-17.sentence-2' class='sentence'>Likewise,
a function that does not have a deleted definition shall not override a
function with a deleted definition<a class='hidden_link' href='#class.virtual-17.sentence-2'>.</a></div> </div><div class='para' id='class.virtual-18'><div class='marginalizedparent'><a class='marginalized' href='#class.virtual-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L4100'>#</a></div><div id='class.virtual-18.sentence-1' class='sentence'>If an overriding function specifies contract conditions (<a href='dcl.attr.contract'>[dcl.attr.contract]</a>),
it shall specify the same list of contract conditions as
its overridden functions;
no diagnostic is required
if corresponding conditions will always evaluate to the same value<a class='hidden_link' href='#class.virtual-18.sentence-1'>.</a></div> <div id='class.virtual-18.sentence-2' class='sentence'>Otherwise, it is considered to have
the list of contract conditions from one of its overridden functions;
the names in the contract conditions are bound,
and the semantic constraints are checked,
at the point where the contract conditions appear<a class='hidden_link' href='#class.virtual-18.sentence-2'>.</a></div> <div id='class.virtual-18.sentence-3' class='sentence'>Given a virtual function <span class='texttt'>f</span>
with a contract condition that odr-uses <span class='texttt'>*this</span> (<a href='basic.def.odr'>[basic.def.odr]</a>),
the class of which <span class='texttt'>f</span> is a direct member
shall be be an unambiguous and accessible base class of any class
in which <span class='texttt'>f</span> is overridden<a class='hidden_link' href='#class.virtual-18.sentence-3'>.</a></div> <div id='class.virtual-18.sentence-4' class='sentence'>If a function overrides more than one function,
all of the overridden functions shall have
the same list of contract conditions (<a href='dcl.attr.contract'>[dcl.attr.contract]</a>);
no diagnostic is required
if corresponding conditions will always evaluate to the same value<a class='hidden_link' href='#class.virtual-18.sentence-4'>.</a></div> <div id='class.virtual-18.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.virtual-18.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {
  virtual void g() [[expects: x == 0]];
  int x = 42;
};

int x = 42;
struct B {
  virtual void g() [[expects: x == 0]];
}

struct C : A, B {
  virtual void g();             <span class='comment'>// error: preconditions of overridden functions are not the same
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='footnote' id='footnote-114'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-114'>114)</a></div><div id='footnote-114.sentence-1' class='sentence'>A function with the same name but a different parameter list (<a href='over'>[over]</a>)
as a virtual function is not necessarily virtual and
does not override<a class='hidden_link' href='#footnote-114.sentence-1'>.</a></div> <div id='footnote-114.sentence-2' class='sentence'>The use of the <span class='texttt'>virtual</span> specifier in the
declaration of an overriding function is legal but redundant (has empty
semantics)<a class='hidden_link' href='#footnote-114.sentence-2'>.</a></div> <div id='footnote-114.sentence-3' class='sentence'>Access control (<a href='class.access'>[class.access]</a>) is not considered in
determining overriding<a class='hidden_link' href='#footnote-114.sentence-3'>.</a></div></div><div class='footnote' id='footnote-115'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-115'>115)</a></div><div id='footnote-115.sentence-1' class='sentence'>Multi-level pointers to classes or references to multi-level pointers to
classes are not allowed<a class='hidden_link' href='#footnote-115.sentence-1'>.</a></div></div></div><div id='class.abstract' class='section'><h3 ><a class='secnum' href='#class.abstract' style='min-width:103pt'>10.6.3</a> Abstract classes <a class='abbr_ref' href='class.abstract'>[class.abstract]</a></h3><div class='para' id='class.abstract-1'><div class='marginalizedparent'><a class='marginalized' href='#class.abstract-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L4141'>#</a></div><div id='class.abstract-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.abstract-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.abstract-1.sentence-1' class='sentence'>The abstract class mechanism supports the notion of a general concept,
such as a <span class='texttt'>shape</span>, of which only more concrete variants, such as
<span class='texttt'>circle</span> and <span class='texttt'>square</span>, can actually be used<a class='hidden_link' href='#class.abstract-1.sentence-1'>.</a></div> <div id='class.abstract-1.sentence-2' class='sentence'>An abstract
class can also be used to define an interface for which derived classes
provide a variety of implementations<a class='hidden_link' href='#class.abstract-1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.abstract-2'><div class='marginalizedparent'><a class='marginalized' href='#class.abstract-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L4150'>#</a></div><div id='class.abstract-2.sentence-1' class='sentence'>A virtual function is specified as
a <a class='hidden_link' href='#def:function,virtual,pure' id='def:function,virtual,pure'><i >pure virtual function</i></a> by using a
<i ><a href='class.mem#nt:pure-specifier'>pure-specifier</a></i> in the function declaration
in the class definition<a class='hidden_link' href='#class.abstract-2.sentence-1'>.</a></div> <div id='class.abstract-2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.abstract-2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.abstract-2.sentence-4' class='sentence'>Such a function might be inherited: see below<a class='hidden_link' href='#class.abstract-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.abstract-2.sentence-2' class='sentence'>
A class is an <a class='hidden_link' href='#def:class,abstract' id='def:class,abstract'><i >abstract class</i></a>
if it has at least one pure virtual function<a class='hidden_link' href='#class.abstract-2.sentence-2'>.</a></div> <div id='class.abstract-2.note-2' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.abstract-2.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.abstract-2.sentence-5' class='sentence'>An abstract class can be used only as a base class of some other class;
no objects of an abstract class can be created
except as subobjects of a class
derived from it (<a href='basic.def'>[basic.def]</a>, <a href='class.mem'>[class.mem]</a>)<a class='hidden_link' href='#class.abstract-2.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.abstract-2.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':definition,pure_virtual_function'></a></span>A pure virtual function need be defined only if called with, or as if
with (<a href='class.dtor'>[class.dtor]</a>), the <i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
syntax (<a href='expr.prim.id.qual'>[expr.prim.id.qual]</a>)<a class='hidden_link' href='#class.abstract-2.sentence-3'>.</a></div> <div id='class.abstract-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.abstract-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class point { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class shape {                   <span class='comment'>// abstract class
</span>  point center;
public:
  point where() { return center; }
  void move(point p) { center=p; draw(); }
  virtual void rotate(int) = 0; <span class='comment'>// pure virtual
</span>  virtual void draw() = 0;      <span class='comment'>// pure virtual
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.abstract-2.note-3' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.abstract-2.note-3'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.abstract-2.sentence-6' class='sentence'>A function declaration cannot provide both a <i ><a href='class.mem#nt:pure-specifier'>pure-specifier</a></i>
and a definition</div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='class.abstract-2.example-2' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.abstract-2.example-2'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct C {
  virtual void f() = 0 { };     <span class='comment'>// ill-formed
</span>};</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.abstract-3'><div class='marginalizedparent'><a class='marginalized' href='#class.abstract-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L4195'>#</a></div><div id='class.abstract-3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.abstract-3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.abstract-3.sentence-1' class='sentence'>An abstract class type cannot be used
as a parameter or return type of
a function being defined (<a href='dcl.fct'>[dcl.fct]</a>) or called (<a href='expr.call'>[expr.call]</a>),
except as specified in <a href='dcl.type.simple'>[dcl.type.simple]</a><a class='hidden_link' href='#class.abstract-3.sentence-1'>.</a></div> <div id='class.abstract-3.sentence-2' class='sentence'>Further, an abstract class type cannot be used as
the type of an explicit type conversion (<a href='expr.static.cast'>[expr.static.cast]</a>,
<a href='expr.reinterpret.cast'>[expr.reinterpret.cast]</a>, <a href='expr.const.cast'>[expr.const.cast]</a>),
because the resulting prvalue would be of abstract class type (<a href='basic.lval'>[basic.lval]</a>)<a class='hidden_link' href='#class.abstract-3.sentence-2'>.</a></div> <div id='class.abstract-3.sentence-3' class='sentence'>However, pointers and references to abstract class types
can appear in such contexts<a class='hidden_link' href='#class.abstract-3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.abstract-4'><div class='marginalizedparent'><a class='marginalized' href='#class.abstract-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L4209'>#</a></div><div id='class.abstract-4.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':function,virtual,pure'></a></span>A class is abstract if it contains or inherits at least one pure virtual
function for which the final overrider is pure virtual<a class='hidden_link' href='#class.abstract-4.sentence-1'>.</a></div> <div id='class.abstract-4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#class.abstract-4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
class ab_circle : public shape {
  int radius;
public:
  void rotate(int) { }
  <span class='comment'>// <span class='tcode_in_codeblock'>ab_&shy;circle&#x200b;::&#x200b;draw()</span> is a pure virtual
</span>};</pre><div id='class.abstract-4.sentence-2' class='sentence'>Since <span class='texttt'>shape&#x200b;::&#x200b;draw()</span> is a pure virtual function
<span class='texttt'>ab_&shy;circle&#x200b;::&#x200b;draw()</span> is a pure virtual by default<a class='hidden_link' href='#class.abstract-4.sentence-2'>.</a></div> <div id='class.abstract-4.sentence-3' class='sentence'>The alternative
declaration,
<pre class='codeblock'>
class circle : public shape {
  int radius;
public:
  void rotate(int) { }
  void draw();                  <span class='comment'>// a definition is required somewhere
</span>};</pre>
would make class <span class='texttt'>circle</span> non-abstract and a definition of
<span class='texttt'>circle&#x200b;::&#x200b;draw()</span> must be provided<a class='hidden_link' href='#class.abstract-4.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.abstract-5'><div class='marginalizedparent'><a class='marginalized' href='#class.abstract-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L4238'>#</a></div><div id='class.abstract-5.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#class.abstract-5.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='class.abstract-5.sentence-1' class='sentence'>An abstract class can be derived from a class that is not abstract, and
a pure virtual function may override a virtual function which is not
pure<a class='hidden_link' href='#class.abstract-5.sentence-1'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='class.abstract-6'><div class='marginalizedparent'><a class='marginalized' href='#class.abstract-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/012f107cc796a2be49c4136718ecf322a920dcd8/source/classes.tex#L4245'>#</a></div><div id='class.abstract-6.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':class,constructor_and_abstract'></a></span>Member functions can be called from a constructor (or destructor) of an
abstract class;
<span class='indexparent'><a class='index' id=':virtual_function_call,undefined_pure'></a></span>the effect of making a virtual call (<a href='#class.virtual'>[class.virtual]</a>) to a pure
virtual function directly or indirectly for the object being created (or
destroyed) from such a constructor (or destructor) is undefined<a class='hidden_link' href='#class.abstract-6.sentence-1'>.</a></div> </div></div></div></body></html>