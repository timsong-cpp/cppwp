<!DOCTYPE html><html lang='en'><head><title>[cpp.scope]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>15</a> Preprocessing directives <a class='abbr_ref' href='./#cpp'>[cpp]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>15.5</a> Macro replacement <a class='abbr_ref' href='cpp.replace#cpp.scope'>[cpp.replace]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>15.5.5</a> Scope of macro definitions <a class='abbr_ref'>[cpp.scope]</a></h3><span class='indexparent'><a class='index' id=':macro,scope_of_definition'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/preprocessor.tex#L1257'>#</a></div><div id='1.sentence-1' class='sentence'>A macro definition lasts
(independent of block structure)
until a corresponding
<span class='texttt'><span class='preprocessordirective'>#undef</span></span>
directive is encountered or
(if none is encountered)
until the end of the translation unit<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>Macro definitions have no significance after translation phase 4<a class='hidden_link' href='#1.sentence-2'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/preprocessor.tex#L1267'>#</a></div><div id='2.sentence-1' class='sentence'>A preprocessing directive of the form
<pre class='ncsimplebnf'><span class='terminal'><span class='preprocessordirective'># undef</span></span> <i ><a href='lex.name#nt:identifier'>identifier</a></i> <i ><a href='cpp#nt:new-line'>new-line</a></i><span class='indexparent'><a class='index' id=':#undef'></a></span>
</pre>
causes the specified identifier no longer to be defined as a macro name<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>It is ignored if the specified identifier is not currently defined as
a macro name<a class='hidden_link' href='#2.sentence-2'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/preprocessor.tex#L1277'>#</a></div><div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='3.sentence-1' class='sentence'>The simplest use of this facility is to define a “manifest constant”,
as in
<pre class='codeblock'>
<span class='preprocessordirective'>#define</span> TABSIZE <span class='literal'>100</span>
<span class='keyword'>int</span> table<span class='squarebracket'>[</span>TABSIZE<span class='squarebracket'>]</span>;
</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/preprocessor.tex#L1287'>#</a></div><div id='4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='4.sentence-1' class='sentence'>The following defines a function-like
macro whose value is the maximum of its arguments<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>It has the advantages of working for any compatible types of the arguments
and of generating in-line code without the overhead of function calling<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>It has the disadvantages of evaluating one or the other of its arguments
a second time
(including
<span class='indexparent'><a class='index' id=':side_effects'></a></span>side effects)
and generating more code than a function if invoked several times<a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='4.sentence-4' class='sentence'>It also cannot have its address taken,
as it has none<a class='hidden_link' href='#4.sentence-4'>.</a></div><pre class='codeblock'>
<span class='preprocessordirective'>#define</span> max<span class='parenthesis'>(</span>a, b<span class='parenthesis'>)</span> <span class='parenthesis'>(</span><span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='parenthesis'>(</span>b<span class='parenthesis'>)</span> <span class='operator'>?</span> <span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> <span class='operator'>:</span> <span class='parenthesis'>(</span>b<span class='parenthesis'>)</span><span class='parenthesis'>)</span>
</pre><div id='4.sentence-5' class='sentence'>The parentheses ensure that the arguments and
the resulting expression are bound properly<a class='hidden_link' href='#4.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/preprocessor.tex#L1310'>#</a></div><div id='5.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#5.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='5.sentence-1' class='sentence'>To illustrate the rules for redefinition and reexamination,
the sequence
<pre class='codeblock'>
<span class='preprocessordirective'>#define</span> x       <span class='literal'>3</span>
<span class='preprocessordirective'>#define</span> f<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>    f<span class='parenthesis'>(</span>x <span class='operator'>*</span> <span class='parenthesis'>(</span>a<span class='parenthesis'>)</span><span class='parenthesis'>)</span>
<span class='preprocessordirective'>#undef</span>  x
<span class='preprocessordirective'>#define</span> x       <span class='literal'>2</span>
<span class='preprocessordirective'>#define</span> g       f
<span class='preprocessordirective'>#define</span> z       z<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span>
<span class='preprocessordirective'>#define</span> h       g<span class='parenthesis'>(</span><span class='operator'>~</span>
<span class='preprocessordirective'>#define</span> m<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>    a<span class='parenthesis'>(</span>w<span class='parenthesis'>)</span>
<span class='preprocessordirective'>#define</span> w       <span class='literal'>0</span>,<span class='literal'>1</span>
<span class='preprocessordirective'>#define</span> t<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>    a
<span class='preprocessordirective'>#define</span> p<span class='parenthesis'>(</span><span class='parenthesis'>)</span>     <span class='keyword'>int</span>
<span class='preprocessordirective'>#define</span> q<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>    x
<span class='preprocessordirective'>#define</span> r<span class='parenthesis'>(</span>x,y<span class='parenthesis'>)</span>  x <span class='preprocessordirective'>#</span><span class='preprocessordirective'>#</span> y
<span class='preprocessordirective'>#define</span> str<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>  <span class='preprocessordirective'>#</span> x

f<span class='parenthesis'>(</span>y<span class='operator'>+</span><span class='literal'>1</span><span class='parenthesis'>)</span> <span class='operator'>+</span> f<span class='parenthesis'>(</span>f<span class='parenthesis'>(</span>z<span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>%</span> t<span class='parenthesis'>(</span>t<span class='parenthesis'>(</span>g<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span> <span class='operator'>+</span> t<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;
g<span class='parenthesis'>(</span>x<span class='operator'>+</span><span class='parenthesis'>(</span><span class='literal'>3</span>,<span class='literal'>4</span><span class='parenthesis'>)</span><span class='operator'>-</span>w<span class='parenthesis'>)</span> <span class='operator'>|</span> h <span class='literal'>5</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span> m
    <span class='parenthesis'>(</span>f<span class='parenthesis'>)</span><span class='operator'>^</span>m<span class='parenthesis'>(</span>m<span class='parenthesis'>)</span>;
p<span class='parenthesis'>(</span><span class='parenthesis'>)</span> i<span class='squarebracket'>[</span>q<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> q<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>, r<span class='parenthesis'>(</span><span class='literal'>2</span>,<span class='literal'>3</span><span class='parenthesis'>)</span>, r<span class='parenthesis'>(</span><span class='literal'>4</span>,<span class='parenthesis'>)</span>, r<span class='parenthesis'>(</span>,<span class='literal'>5</span><span class='parenthesis'>)</span>, r<span class='parenthesis'>(</span>,<span class='parenthesis'>)</span> <span class='curlybracket'>}</span>;
<span class='keyword'>char</span> c<span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> str<span class='parenthesis'>(</span>hello<span class='parenthesis'>)</span>, str<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>}</span>;
</pre>
results in
<pre class='codeblock'>
f<span class='parenthesis'>(</span><span class='literal'>2</span> <span class='operator'>*</span> <span class='parenthesis'>(</span>y<span class='operator'>+</span><span class='literal'>1</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>+</span> f<span class='parenthesis'>(</span><span class='literal'>2</span> <span class='operator'>*</span> <span class='parenthesis'>(</span>f<span class='parenthesis'>(</span><span class='literal'>2</span> <span class='operator'>*</span> <span class='parenthesis'>(</span>z<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>%</span> f<span class='parenthesis'>(</span><span class='literal'>2</span> <span class='operator'>*</span> <span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>+</span> t<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;
f<span class='parenthesis'>(</span><span class='literal'>2</span> <span class='operator'>*</span> <span class='parenthesis'>(</span><span class='literal'>2+</span><span class='parenthesis'>(</span><span class='literal'>3</span>,<span class='literal'>4</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='literal'>0</span>,<span class='literal'>1</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>|</span> f<span class='parenthesis'>(</span><span class='literal'>2</span> <span class='operator'>*</span> <span class='parenthesis'>(</span><span class='operator'>~</span> <span class='literal'>5</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>&amp;</span> f<span class='parenthesis'>(</span><span class='literal'>2</span> <span class='operator'>*</span> <span class='parenthesis'>(</span><span class='literal'>0</span>,<span class='literal'>1</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='operator'>^</span>m<span class='parenthesis'>(</span><span class='literal'>0</span>,<span class='literal'>1</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>23</span>, <span class='literal'>4</span>, <span class='literal'>5</span>, <span class='curlybracket'>}</span>;
<span class='keyword'>char</span> c<span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>"hello"</span>, <span class='literal'>""</span> <span class='curlybracket'>}</span>;
</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/preprocessor.tex#L1345'>#</a></div><div id='6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='6.sentence-1' class='sentence'>To illustrate the rules for creating character string literals
and concatenating tokens,
the sequence
<pre class='codeblock'>
<span class='preprocessordirective'>#define</span> str<span class='parenthesis'>(</span>s<span class='parenthesis'>)</span>      <span class='preprocessordirective'>#</span> s
<span class='preprocessordirective'>#define</span> xstr<span class='parenthesis'>(</span>s<span class='parenthesis'>)</span>     str<span class='parenthesis'>(</span>s<span class='parenthesis'>)</span>
<span class='preprocessordirective'>#define</span> debug<span class='parenthesis'>(</span>s, t<span class='parenthesis'>)</span> printf<span class='parenthesis'>(</span><span class='literal'>"x"</span> <span class='preprocessordirective'>#</span> s <span class='literal'>"= %d, x"</span> <span class='preprocessordirective'>#</span> t <span class='literal'>"= %s"</span>, \
               x <span class='preprocessordirective'>#</span><span class='preprocessordirective'>#</span> s, x <span class='preprocessordirective'>#</span><span class='preprocessordirective'>#</span> t<span class='parenthesis'>)</span>
<span class='preprocessordirective'>#define</span> INCFILE<span class='parenthesis'>(</span>n<span class='parenthesis'>)</span>  vers <span class='preprocessordirective'>#</span><span class='preprocessordirective'>#</span> n
<span class='preprocessordirective'>#define</span> glue<span class='parenthesis'>(</span>a, b<span class='parenthesis'>)</span>  a <span class='preprocessordirective'>#</span><span class='preprocessordirective'>#</span> b
<span class='preprocessordirective'>#define</span> xglue<span class='parenthesis'>(</span>a, b<span class='parenthesis'>)</span> glue<span class='parenthesis'>(</span>a, b<span class='parenthesis'>)</span>
<span class='preprocessordirective'>#define</span> HIGHLOW     <span class='literal'>"hello"</span>
<span class='preprocessordirective'>#define</span> LOW         LOW <span class='literal'>", world"</span>

debug<span class='parenthesis'>(</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='parenthesis'>)</span>;
fputs<span class='parenthesis'>(</span>str<span class='parenthesis'>(</span>strncmp<span class='parenthesis'>(</span><span class='literal'>"abc\0d"</span>, <span class='literal'>"abc"</span>, <span class='literal'>'\4'</span><span class='parenthesis'>)</span>        <span class='comment'>// this goes away</span>
    <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span> str<span class='parenthesis'>(</span><span class='operator'>:</span> @\n<span class='parenthesis'>)</span>, s<span class='parenthesis'>)</span>;
<span class='preprocessordirective'>#include</span> xstr<span class='parenthesis'>(</span>INCFILE<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span><span class='operator'>.</span>h<span class='parenthesis'>)</span>
glue<span class='parenthesis'>(</span>HIGH, LOW<span class='parenthesis'>)</span>;
xglue<span class='parenthesis'>(</span>HIGH, LOW<span class='parenthesis'>)</span>
</pre>
results in
<pre class='codeblock'>
printf<span class='parenthesis'>(</span><span class='literal'>"x"</span> <span class='literal'>"1"</span> <span class='literal'>"= %d, x"</span> <span class='literal'>"2"</span> <span class='literal'>"= %s"</span>, x1, x2<span class='parenthesis'>)</span>;
fputs<span class='parenthesis'>(</span><span class='literal'>"strncmp(\"abc\\0d\", \"abc\", '\\4') == 0"</span> <span class='literal'>": @\n"</span>, s<span class='parenthesis'>)</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"vers2.h"</span>      <span class='textrm'>(<span class='textit'>after macro replacement, before file access</span>)</span>
<span class='literal'>"hello"</span>;
<span class='literal'>"hello"</span> <span class='literal'>", world"</span>
</pre>
or, after concatenation of the character string literals,
<pre class='codeblock'>
printf<span class='parenthesis'>(</span><span class='literal'>"x1= %d, x2= %s"</span>, x1, x2<span class='parenthesis'>)</span>;
fputs<span class='parenthesis'>(</span><span class='literal'>"strncmp(\"abc\\0d\", \"abc\", '\\4') == 0: @\n"</span>, s<span class='parenthesis'>)</span>;
<span class='preprocessordirective'>#include</span> <span class='literal'>"vers2.h"</span>      <span class='textrm'>(<span class='textit'>after macro replacement, before file access</span>)</span>
<span class='literal'>"hello"</span>;
<span class='literal'>"hello, world"</span>
</pre></div><div id='6.sentence-2' class='sentence'>Space around the
<span class='texttt'><span class='preprocessordirective'>#</span></span>
and
<span class='texttt'><span class='preprocessordirective'>#</span><span class='preprocessordirective'>#</span></span>
tokens in the macro definition is optional<a class='hidden_link' href='#6.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/preprocessor.tex#L1392'>#</a></div><div id='7.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#7.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='7.sentence-1' class='sentence'>To illustrate the rules for placemarker preprocessing tokens, the sequence
<pre class='codeblock'>
<span class='preprocessordirective'>#define</span> t<span class='parenthesis'>(</span>x,y,z<span class='parenthesis'>)</span> x <span class='preprocessordirective'>#</span><span class='preprocessordirective'>#</span> y <span class='preprocessordirective'>#</span><span class='preprocessordirective'>#</span> z
<span class='keyword'>int</span> j<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> t<span class='parenthesis'>(</span><span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span><span class='parenthesis'>)</span>, t<span class='parenthesis'>(</span>,<span class='literal'>4</span>,<span class='literal'>5</span><span class='parenthesis'>)</span>, t<span class='parenthesis'>(</span><span class='literal'>6</span>,,<span class='literal'>7</span><span class='parenthesis'>)</span>, t<span class='parenthesis'>(</span><span class='literal'>8</span>,<span class='literal'>9</span>,<span class='parenthesis'>)</span>,
  t<span class='parenthesis'>(</span><span class='literal'>10</span>,,<span class='parenthesis'>)</span>, t<span class='parenthesis'>(</span>,<span class='literal'>11</span>,<span class='parenthesis'>)</span>, t<span class='parenthesis'>(</span>,,<span class='literal'>12</span><span class='parenthesis'>)</span>, t<span class='parenthesis'>(</span>,,<span class='parenthesis'>)</span> <span class='curlybracket'>}</span>;
</pre>
results in
<pre class='codeblock'>
<span class='keyword'>int</span> j<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>123</span>, <span class='literal'>45</span>, <span class='literal'>67</span>, <span class='literal'>89</span>,
  <span class='literal'>10</span>, <span class='literal'>11</span>, <span class='literal'>12</span>, <span class='curlybracket'>}</span>;
</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/preprocessor.tex#L1407'>#</a></div><div id='8.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='8.sentence-1' class='sentence'>To demonstrate the redefinition rules,
the following sequence is valid<a class='hidden_link' href='#8.sentence-1'>.</a></div><pre class='codeblock'>
<span class='preprocessordirective'>#define</span> OBJ_LIKE      <span class='parenthesis'>(</span><span class='literal'>1-1</span><span class='parenthesis'>)</span>
<span class='preprocessordirective'>#define</span> OBJ_LIKE      <span class='comment'>/* white space */</span> <span class='parenthesis'>(</span><span class='literal'>1-1</span><span class='parenthesis'>)</span> <span class='comment'>/* other */</span>
<span class='preprocessordirective'>#define</span> FUNC_LIKE<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>   <span class='parenthesis'>(</span> a <span class='parenthesis'>)</span>
<span class='preprocessordirective'>#define</span> FUNC_LIKE<span class='parenthesis'>(</span> a <span class='parenthesis'>)</span><span class='parenthesis'>(</span>     <span class='comment'>/* note the white space */</span> \
                a <span class='comment'>/* other stuff on this line
                  */</span> <span class='parenthesis'>)</span>
</pre><div id='8.sentence-2' class='sentence'>But the following redefinitions are invalid:
<pre class='codeblock'>
<span class='preprocessordirective'>#define</span> OBJ_LIKE    <span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>         <span class='comment'>// different token sequence</span>
<span class='preprocessordirective'>#define</span> OBJ_LIKE    <span class='parenthesis'>(</span><span class='literal'>1</span> <span class='operator'>-</span> <span class='literal'>1</span><span class='parenthesis'>)</span>     <span class='comment'>// different white space</span>
<span class='preprocessordirective'>#define</span> FUNC_LIKE<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span> <span class='parenthesis'>(</span> a <span class='parenthesis'>)</span>      <span class='comment'>// different parameter usage</span>
<span class='preprocessordirective'>#define</span> FUNC_LIKE<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span> <span class='parenthesis'>(</span> b <span class='parenthesis'>)</span>      <span class='comment'>// different parameter spelling</span>
</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/b5ee2beccbe6c39d90768142e564ac749e45f47f/source/preprocessor.tex#L1430'>#</a></div><div id='9.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='9.sentence-1' class='sentence'>Finally, to show the variable argument list macro facilities:
<pre class='codeblock'>
<span class='preprocessordirective'>#define</span> debug<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> fprintf<span class='parenthesis'>(</span>stderr, __VA_ARGS__<span class='parenthesis'>)</span>
<span class='preprocessordirective'>#define</span> showlist<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> puts<span class='parenthesis'>(</span><span class='preprocessordirective'>#</span>__VA_ARGS__<span class='parenthesis'>)</span>
<span class='preprocessordirective'>#define</span> report<span class='parenthesis'>(</span>test, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='parenthesis'>(</span><span class='parenthesis'>(</span>test<span class='parenthesis'>)</span> <span class='operator'>?</span> puts<span class='parenthesis'>(</span><span class='preprocessordirective'>#</span>test<span class='parenthesis'>)</span> <span class='operator'>:</span> printf<span class='parenthesis'>(</span>__VA_ARGS__<span class='parenthesis'>)</span><span class='parenthesis'>)</span>
debug<span class='parenthesis'>(</span><span class='literal'>"Flag"</span><span class='parenthesis'>)</span>;
debug<span class='parenthesis'>(</span><span class='literal'>"X = %d\n"</span>, x<span class='parenthesis'>)</span>;
showlist<span class='parenthesis'>(</span>The first, second, and third items<span class='operator'>.</span><span class='parenthesis'>)</span>;
report<span class='parenthesis'>(</span>x<span class='anglebracket'>&gt;</span>y, <span class='literal'>"x is %d but y is %d"</span>, x, y<span class='parenthesis'>)</span>;
</pre>
results in
<pre class='codeblock'>
fprintf<span class='parenthesis'>(</span>stderr, <span class='literal'>"Flag"</span><span class='parenthesis'>)</span>;
fprintf<span class='parenthesis'>(</span>stderr, <span class='literal'>"X = %d\n"</span>, x<span class='parenthesis'>)</span>;
puts<span class='parenthesis'>(</span><span class='literal'>"The first, second, and third items."</span><span class='parenthesis'>)</span>;
<span class='parenthesis'>(</span><span class='parenthesis'>(</span>x<span class='anglebracket'>&gt;</span>y<span class='parenthesis'>)</span> <span class='operator'>?</span> puts<span class='parenthesis'>(</span><span class='literal'>"x&gt;y"</span><span class='parenthesis'>)</span> <span class='operator'>:</span> printf<span class='parenthesis'>(</span><span class='literal'>"x is %d but y is %d"</span>, x, y<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;

</pre></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  </div></div></body></html>