<!DOCTYPE html><html lang='en'><head><title>[memory.resource.pool.mem]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>20</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>20.12</a> Memory resources <a class='abbr_ref' href='memory.resource#pool.mem'>[memory.resource]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>20.12.5</a> Pool resource classes <a class='abbr_ref' href='memory.resource.pool#mem'>[memory.resource.pool]</a></h3><div id='memory.resource.pool.mem'><h4 ><a class='secnum' style='min-width:118pt'>20.12.5.4</a> Pool resource members <a class='abbr_ref'>[memory.resource.pool.mem]</a></h4><p ><span class='indexparent'><a class='index' id='release,synchronized_pool_resource'></a></span><span class='indexparent'><a class='index' id='synchronized_pool_resource,release'></a></span><span class='indexparent'><a class='index' id='release,unsynchronized_pool_resource'></a></span><span class='indexparent'><a class='index' id='unsynchronized_pool_resource,release'></a></span><code class='itemdecl'>
void release();
</code></p><div class='itemdescr'></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='itemdescr'><p ><i>Effects:</i>
Calls <span class='texttt'>upstream_resource()-&gt;deallocate()</span> as necessary
to release all allocated memory.
[&nbsp;<i>Note:</i><span class='space'></span>
The memory is released back to <span class='texttt'>upstream_resource()</span>
even if <span class='texttt'>deallocate</span> has not been called
for some of the allocated blocks.<i>&nbsp;â€”&nbsp;end note</i>&nbsp;]
</p></div></div><p ><span class='indexparent'><a class='index' id='upstream_resource,synchronized_pool_resource'></a></span><span class='indexparent'><a class='index' id='synchronized_pool_resource,upstream_resource'></a></span><span class='indexparent'><a class='index' id='upstream_resource,unsynchronized_pool_resource'></a></span><span class='indexparent'><a class='index' id='unsynchronized_pool_resource,upstream_resource'></a></span><code class='itemdecl'>
memory_resource* upstream_resource() const;
</code></p><div class='itemdescr'></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i>
The value of the <span class='texttt'>upstream</span> argument
provided to the constructor of this object.
</p></div></div><p ><span class='indexparent'><a class='index' id='options,synchronized_pool_resource'></a></span><span class='indexparent'><a class='index' id='synchronized_pool_resource,options'></a></span><span class='indexparent'><a class='index' id='options,unsynchronized_pool_resource'></a></span><span class='indexparent'><a class='index' id='unsynchronized_pool_resource,options'></a></span><code class='itemdecl'>
pool_options options() const;
</code></p><div class='itemdescr'></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><p ><i>Returns:</i>
The options that control the pooling behavior of this resource.
The values in the returned struct may differ
from those supplied to the pool resource constructor in that
values of zero will be replaced with <span class='indexparent'><a class='index' id='default_configuration_of_a_pool'></a></span>implementation-defined
defaults, and sizes may be rounded to unspecified granularity.
</p></div></div><p ><span class='indexparent'><a class='index' id='do_allocate,synchronized_pool_resource'></a></span><span class='indexparent'><a class='index' id='synchronized_pool_resource,do_allocate'></a></span><span class='indexparent'><a class='index' id='do_allocate,unsynchronized_pool_resource'></a></span><span class='indexparent'><a class='index' id='unsynchronized_pool_resource,do_allocate'></a></span><code class='itemdecl'>
void* do_allocate(size_t bytes, size_t alignment) override;
</code></p><div class='itemdescr'></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><p ><i>Returns:</i>
A pointer to allocated storage (<a href='basic.stc.dynamic.deallocation'>[basic.stc.dynamic.deallocation]</a>)
with a size of at least <span class='texttt'>bytes</span>.
The size and alignment of the allocated memory shall meet the requirements
for a class derived from <span class='texttt'>memory_resource</span> (<a href='memory.resource'>[memory.resource]</a>).</p></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><p ><i>Effects:</i>
If the pool selected for a block of size <span class='texttt'>bytes</span>
is unable to satisfy the memory request from its own internal data structures,
it will call <span class='texttt'>upstream_resource()-&gt;allocate()</span> to obtain more memory.
If <span class='texttt'>bytes</span> is larger than that which the largest pool can handle,
then memory will be allocated using <span class='texttt'>upstream_resource()-&gt;allocate()</span>.</p></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><p ><i>Throws:</i>
Nothing unless <span class='texttt'>upstream_resource()-&gt;allocate()</span> throws.
</p></div></div><p ><span class='indexparent'><a class='index' id='do_deallocate,synchronized_pool_resource'></a></span><span class='indexparent'><a class='index' id='synchronized_pool_resource,do_deallocate'></a></span><span class='indexparent'><a class='index' id='do_deallocate,unsynchronized_pool_resource'></a></span><span class='indexparent'><a class='index' id='unsynchronized_pool_resource,do_deallocate'></a></span><code class='itemdecl'>
void do_deallocate(void* p, size_t bytes, size_t alignment) override;
</code></p><div class='itemdescr'></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><p ><i>Effects:</i>
Returns the memory at <span class='texttt'>p</span> to the pool.
It is unspecified if, or under what circumstances,
this operation will result in a call to <span class='texttt'>upstream_resource()-&gt;deallocate()</span>.</p></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='itemdescr'><p ><i>Throws:</i>
Nothing.
</p></div></div><p ><span class='indexparent'><a class='index' id='do_is_equal,unsynchronized_pool_resource'></a></span><span class='indexparent'><a class='index' id='unsynchronized_pool_resource,do_is_equal'></a></span><code class='itemdecl'>
bool unsynchronized_pool_resource::do_is_equal(const memory_resource&amp; other) const noexcept override;
</code></p><div class='itemdescr'></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='itemdescr'><p ><i>Returns:</i>
<span class='texttt'>this == dynamic_cast&lt;const unsynchronized_pool_resource*&gt;(&amp;other)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='do_is_equal,synchronized_pool_resource'></a></span><span class='indexparent'><a class='index' id='synchronized_pool_resource,do_is_equal'></a></span><code class='itemdecl'>
bool synchronized_pool_resource::do_is_equal(const memory_resource&amp; other) const noexcept override;
</code></p><div class='itemdescr'></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='itemdescr'><p ><i>Returns:</i>
<span class='texttt'>this == dynamic_cast&lt;const synchronized_pool_resource*&gt;(&amp;other)</span>.
</p></div></div></div></div></body></html>