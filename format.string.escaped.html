<!DOCTYPE html><html lang='en'><head><title>[format.string.escaped]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>28</a> Text processing library <a class='abbr_ref' href='./#text'>[text]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>28.5</a> Formatting <a class='abbr_ref' href='format#string.escaped'>[format]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>28.5.6</a> Formatter <a class='abbr_ref' href='format.formatter#format.string.escaped'>[format.formatter]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>28.5.6.5</a> Formatting escaped characters and strings <a class='abbr_ref'>[format.string.escaped]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/text.tex#L7286'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':string,formatted_as_escaped'></a><a class='index' id=':character,formatted_as_escaped'></a>A character or string can be formatted as <a class='hidden_link' href='#def:escaped' title='28.5.6.5&emsp;Formatting escaped characters and strings&emsp;[format.string.escaped]'><span id='def:escaped'><i >escaped</i></span></a>
to make it more suitable for debugging or for logging<a class='hidden_link' href='#1.sentence-1'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/text.tex#L7292'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>The escaped string <i >E</i> representation of a string <i >S</i>
is constructed by encoding a sequence of characters as follows<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>The associated character encoding <i >CE</i>
for <span class='texttt'>charT</span> (Table <a href='lex.string#tab:lex.string.literal' title='Table 12: String literals'>12</a>)
is used to both interpret <i >S</i> and construct <i >E</i><a class='hidden_link' href='#2.sentence-2'>.</a></div></div><div class='texpara'><ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.1'>(2.1)</a></div><div class='texpara'><div id='2.1.sentence-1' class='sentence'><span class='ucode'>U+0022</span> <span class='uname'>quotation mark</span> (<span class='texttt'>"</span>) is appended to <i >E</i><a class='hidden_link' href='#2.1.sentence-1'>.</a></div></div></li><li id='2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.2'>(2.2)</a></div><div class='texpara'><div id='2.2.sentence-1' class='sentence'>For each code unit sequence <i >X</i> in <i >S</i> that either
encodes a single character,
is a shift sequence, or
is a sequence of ill-formed code units,
processing is in order as follows:</div></div><div class='texpara'><ul class='itemize'><li id='2.2.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#2.2.1'>(2.2.1)</a></div><div class='texpara'><div id='2.2.1.sentence-1' class='sentence'>If <i >X</i> encodes a single character <i >C</i>, then:</div></div><div class='texpara'><ul class='itemize'><li id='2.2.1.1'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#2.2.1.1'>(2.2.1.1)</a></div><div class='texpara'><div id='2.2.1.1.sentence-1' class='sentence'>If <i >C</i> is one of the characters in Table <a href='#tab:format.escape.sequences' title='Table 114: Mapping of characters to escape sequences'>114</a>,
then the two characters shown as the corresponding escape sequence
are appended to <i >E</i><a class='hidden_link' href='#2.2.1.1.sentence-1'>.</a></div></div></li><li id='2.2.1.2'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#2.2.1.2'>(2.2.1.2)</a></div><div class='texpara'><div id='2.2.1.2.sentence-1' class='sentence'>Otherwise, if <i >C</i> is not <span class='ucode'>U+0020</span> <span class='uname'>space</span> and</div></div><div class='texpara'><ul class='itemize'><li id='2.2.1.2.1'><div class='marginalizedparent' style='left:-54mm'><a class='marginalized' href='#2.2.1.2.1'>(2.2.1.2.1)</a></div><i >CE</i> is UTF-8, UTF-16, or UTF-32 and
<i >C</i> corresponds to a Unicode scalar value
whose Unicode property <span class='texttt'>General_<span class='shy'></span>Category</span> has a value in the groups
<span class='texttt'>Separator</span> (<span class='texttt'>Z</span>) or <span class='texttt'>Other</span> (<span class='texttt'>C</span>),
as described by UAX #44 of the Unicode Standard, or</li><li id='2.2.1.2.2'><div class='marginalizedparent' style='left:-54mm'><a class='marginalized' href='#2.2.1.2.2'>(2.2.1.2.2)</a></div><i >CE</i> is UTF-8, UTF-16, or UTF-32 and
<i >C</i> corresponds to a Unicode scalar value
with the Unicode property <span class='texttt'>Grapheme_<span class='shy'></span>Extend<span class='operator'>=</span>Yes</span>
as described by UAX #44 of the Unicode Standard and
<i >C</i> is not immediately preceded in <i >S</i> by
a character <i >P</i> appended to <i >E</i>
without translation to an escape sequence, or</li><li id='2.2.1.2.3'><div class='marginalizedparent' style='left:-54mm'><a class='marginalized' href='#2.2.1.2.3'>(2.2.1.2.3)</a></div><i >CE</i> is neither UTF-8, UTF-16, nor UTF-32 and
<i >C</i> is one of an implementation-defined set
of separator or non-printable characters</li></ul></div><div class='texpara'><div id='2.2.1.2.sentence-2' class='sentence'>then the sequence <span class='texttt'>\u<span class='curlybracket'>{</span><i >hex-digit-sequence</i><span class='curlybracket'>}</span></span>
is appended to <i >E</i>,
where <span class='texttt'><i >hex-digit-sequence</i></span>
is the shortest hexadecimal representation
of <i >C</i> using lower-case hexadecimal digits<a class='hidden_link' href='#2.2.1.2.sentence-2'>.</a></div></div></li><li id='2.2.1.3'><div class='marginalizedparent' style='left:-45mm'><a class='marginalized' href='#2.2.1.3'>(2.2.1.3)</a></div><div class='texpara'><div id='2.2.1.3.sentence-1' class='sentence'>Otherwise, <i >C</i> is appended to <i >E</i><a class='hidden_link' href='#2.2.1.3.sentence-1'>.</a></div></div></li></ul></div></li><li id='2.2.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#2.2.2'>(2.2.2)</a></div><div class='texpara'><div id='2.2.2.sentence-1' class='sentence'>Otherwise, if <i >X</i> is a shift sequence,
the effect on <i >E</i> and further decoding of <i >S</i>
is unspecified<a class='hidden_link' href='#2.2.2.sentence-1'>.</a></div></div><div class='texpara'><div id='2.2.2.sentence-2' class='sentence'><i >Recommended practice</i>: A shift sequence should be represented in <i >E</i>
such that the original code unit sequence of <i >S</i>
can be reconstructed<a class='hidden_link' href='#2.2.2.sentence-2'>.</a></div></div></li><li id='2.2.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#2.2.3'>(2.2.3)</a></div><div class='texpara'><div id='2.2.3.sentence-1' class='sentence'>Otherwise (<i >X</i> is a sequence of ill-formed code units),
each code unit <i >U</i> is appended to <i >E</i> in order
as the sequence <span class='texttt'>\x<span class='curlybracket'>{</span><i >hex-digit-sequence</i><span class='curlybracket'>}</span></span>,
where <span class='texttt'><i >hex-digit-sequence</i></span>
is the shortest hexadecimal representation of <i >U</i>
using lower-case hexadecimal digits<a class='hidden_link' href='#2.2.3.sentence-1'>.</a></div></div></li></ul></div></li><li id='2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.3'>(2.3)</a></div><div class='texpara'><div id='2.3.sentence-1' class='sentence'>Finally, <span class='ucode'>U+0022</span> <span class='uname'>quotation mark</span> (<span class='texttt'>"</span>)
is appended to <i >E</i><a class='hidden_link' href='#2.3.sentence-1'>.</a></div></div></li></ul></div><div class='texpara'><div class='numberedTable' id='tab:format.escape.sequences'>Table <a href='#tab:format.escape.sequences'>114</a> &mdash; Mapping of characters to escape sequences&emsp;<a href='./tab:format.escape.sequences'>[tab:format.escape.sequences]</a><br><table ><tr id='tab:format.escape.sequences-row-1' class='rowsep'><td class='center'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:format.escape.sequences-row-1'>🔗</a></div><div class='texpara'><div id='tab:format.escape.sequences-row-1-column-1-sentence-1' class='sentence'><b>Character</b></div></div></td><td class='center'><div class='texpara'><div id='tab:format.escape.sequences-row-1-column-2-sentence-1' class='sentence'><b>Escape sequence</b></div></div></td></tr><tr id='tab:format.escape.sequences-row-2' class='rowsep'><td class='left'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:format.escape.sequences-row-2'>🔗</a></div><div class='texpara'><span class='ucode'>U+0009</span> <span class='uname'>character tabulation</span></div></td><td class='left'><div class='texpara'><div id='tab:format.escape.sequences-row-2-column-2-sentence-1' class='sentence'><span class='texttt'>\t</span></div></div></td></tr><tr id='tab:format.escape.sequences-row-3' class='rowsep'><td class='left'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:format.escape.sequences-row-3'>🔗</a></div><div class='texpara'><span class='ucode'>U+000a</span> <span class='uname'>line feed</span></div></td><td class='left'><div class='texpara'><div id='tab:format.escape.sequences-row-3-column-2-sentence-1' class='sentence'><span class='texttt'>\n</span></div></div></td></tr><tr id='tab:format.escape.sequences-row-4' class='rowsep'><td class='left'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:format.escape.sequences-row-4'>🔗</a></div><div class='texpara'><span class='ucode'>U+000d</span> <span class='uname'>carriage return</span></div></td><td class='left'><div class='texpara'><div id='tab:format.escape.sequences-row-4-column-2-sentence-1' class='sentence'><span class='texttt'>\r</span></div></div></td></tr><tr id='tab:format.escape.sequences-row-5' class='rowsep'><td class='left'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:format.escape.sequences-row-5'>🔗</a></div><div class='texpara'><span class='ucode'>U+0022</span> <span class='uname'>quotation mark</span></div></td><td class='left'><div class='texpara'><div id='tab:format.escape.sequences-row-5-column-2-sentence-1' class='sentence'><span class='texttt'>\"</span></div></div></td></tr><tr id='tab:format.escape.sequences-row-6' class='rowsep'><td class='left'><div class='marginalizedparent'><a class='itemDeclLink' href='#tab:format.escape.sequences-row-6'>🔗</a></div><div class='texpara'><span class='ucode'>U+005c</span> <span class='uname'>reverse solidus</span></div></td><td class='left'><div class='texpara'><div id='tab:format.escape.sequences-row-6-column-2-sentence-1' class='sentence'><span class='texttt'>\\</span></div></div></td></tr></table></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/454ba171cb14531639e641cb1200617fbf8d943f/source/text.tex#L7404'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>The escaped string representation of a character <i >C</i>
is equivalent to the escaped string representation
of a string of <i >C</i>, except that:</div></div><div class='texpara'><ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div>the result starts and ends with <span class='ucode'>U+0027</span> <span class='uname'>apostrophe</span> (<span class='texttt'>'</span>)
instead of <span class='ucode'>U+0022</span> <span class='uname'>quotation mark</span> (<span class='texttt'>"</span>), and</li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div>if <i >C</i> is <span class='ucode'>U+0027</span> <span class='uname'>apostrophe</span>,
the two characters <span class='texttt'>\'</span> are appended to <i >E</i>, and</li><li id='3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.3'>(3.3)</a></div>if <i >C</i> is <span class='ucode'>U+0022</span> <span class='uname'>quotation mark</span>,
then <i >C</i> is appended unchanged.</li></ul></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'>string s0 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{}]"</span>, <span class='literal'>"h\tllo"</span><span class='parenthesis'>)</span>;                   <span class='comment'>// <span class='tcode_in_codeblock'>s0</span> has value: <span class='tcode_in_codeblock'>[h&nbsp;&nbsp;&nbsp;&nbsp;llo]</span></span>
string s1 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"h\tllo"</span><span class='parenthesis'>)</span>;                 <span class='comment'>// <span class='tcode_in_codeblock'>s1</span> has value: <span class='tcode_in_codeblock'>["h\tllo"]</span></span>
string s2 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"<span class='texttt'>Спасибо, Виктор ♥!</span>"</span><span class='parenthesis'>)</span>;  <span class='comment'>// <span class='tcode_in_codeblock'>s2</span> has value: <span class='tcode_in_codeblock'>["<span class='texttt'>Спасибо, Виктор ♥!</span>"]</span></span>
string s3 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}, {:?}]"</span>, <span class='literal'>'\''</span>, <span class='literal'>'"'</span><span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>s3</span> has value: <span class='tcode_in_codeblock'>['\'', '"']</span></span>

<span class='comment'>// The following examples assume use of the UTF-8 encoding</span>
string s4 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, string<span class='parenthesis'>(</span><span class='literal'>"\0 \n \t \x02 \x1b"</span>, <span class='literal'>9</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
                                                    <span class='comment'>// <span class='tcode_in_codeblock'>s4</span> has value: <span class='tcode_in_codeblock'>["\u{0} \n \t \u{2} \u{1b}"]</span></span>
string s5 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"\xc3\x28"</span><span class='parenthesis'>)</span>;           <span class='comment'>// invalid UTF-8, <span class='tcode_in_codeblock'>s5</span> has value: <span class='tcode_in_codeblock'>["\x{c3}("]</span></span>
string s6 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"🤷🏻‍♂️"</span><span class='parenthesis'>)</span>;                 <span class='comment'>// <span class='tcode_in_codeblock'>s6</span> has value: <span class='tcode_in_codeblock'>["🤷\u{200d}♂"]</span></span>
string s7 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"\u0301"</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>s7</span> has value: <span class='tcode_in_codeblock'>["\u{301}"]</span></span>
string s8 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"\\\u0301"</span><span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>s8</span> has value: <span class='tcode_in_codeblock'>["\\\u{301}"]</span></span>
string s9 <span class='operator'>=</span> format<span class='parenthesis'>(</span><span class='literal'>"[{:?}]"</span>, <span class='literal'>"e\u0301\u0323"</span><span class='parenthesis'>)</span>;      <span class='comment'>// <span class='tcode_in_codeblock'>s9</span> has value: <span class='tcode_in_codeblock'>["<span class='texttt'>ẹ́</span>"]</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>