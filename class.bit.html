<!DOCTYPE html><html lang='en'><head><title>[class.bit]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>12</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>12.2</a> Class members <a class='abbr_ref' href='class.mem#class.bit'>[class.mem]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>12.2.4</a> Bit-fields <a class='abbr_ref'>[class.bit]</a></h3><span class='indexparent'><a class='index' id=':bit-field'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/classes.tex#L1322'>#</a></div><div id='1.sentence-1' class='sentence'>A <i ><a href='class.mem#nt:member-declarator'>member-declarator</a></i> of the form</div><pre class='ncsimplebnf'><i ><a href='lex.name#nt:identifier'>identifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>:</span> <i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i> <i ><a href='dcl.init#nt:brace-or-equal-initializer'>brace-or-equal-initializer</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</pre><div id='1.sentence-2' class='sentence'><span class='indexparent'><a class='index' id='::,bit-field_declaration'></a></span><span class='indexparent'><a class='index' id=':declaration,bit-field'></a></span>specifies a bit-field;
its length is set off from the bit-field name by a colon<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>The optional <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> appertains to the entity being declared<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>The bit-field
attribute is not part of the type of the class member<a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>The
<i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i> shall be an integral constant expression
with a value greater than or equal to zero<a class='hidden_link' href='#1.sentence-5'>.</a></div> <div id='1.sentence-6' class='sentence'>The
value of the integral constant expression may
be larger than the number of bits in the <a href='basic.types#def:object_representation'>object
representation</a> of the bit-field's type; in such
cases the extra bits are padding bits (<a href='basic.types'>[basic.types]</a>)<a class='hidden_link' href='#1.sentence-6'>.</a></div> <div id='1.sentence-7' class='sentence'><span class='indexparent'><a class='index' id=':allocation,implementation-defined_bit-field'></a></span>Allocation of bit-fields within a class object is
<span class='indexparent'><a class='index' id=':allocation_of_bit-fields_within_a_class_object'></a></span>implementation-defined<a class='hidden_link' href='#1.sentence-7'>.</a></div> <div id='1.sentence-8' class='sentence'><span class='indexparent'><a class='index' id=':bit-field,implementation-defined_alignment_of'></a></span>Alignment of bit-fields is <span class='indexparent'><a class='index' id=':alignment_of_bit-fields_within_a_class_object'></a></span>implementation-defined<a class='hidden_link' href='#1.sentence-8'>.</a></div> <div id='1.sentence-9' class='sentence'><span class='indexparent'><a class='index' id=':layout,bit-field'></a></span>Bit-fields are packed into some addressable allocation unit<a class='hidden_link' href='#1.sentence-9'>.</a></div> <div id='1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='1.sentence-10' class='sentence'>Bit-fields straddle allocation units on some machines and not on others<a class='hidden_link' href='#1.sentence-10'>.</a></div> <div id='1.sentence-11' class='sentence'>Bit-fields are assigned right-to-left on some machines, left-to-right on
others<a class='hidden_link' href='#1.sentence-11'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/classes.tex#L1353'>#</a></div><div id='2.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':bit-field,unnamed'></a></span>A declaration for a bit-field that omits the <i ><a href='lex.name#nt:identifier'>identifier</a></i>
declares an <a class='hidden_link' href='#def:unnamed_bit-field' id='def:unnamed_bit-field'><i >unnamed bit-field</i></a><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Unnamed bit-fields are not
members and cannot be initialized<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>An unnamed bit-field shall not be declared with a cv-qualified type<a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#2.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='2.sentence-6' class='sentence'>An unnamed bit-field is useful for padding to conform to
externally-imposed layouts<a class='hidden_link' href='#2.sentence-6'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='2.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':bit-field,zero_width_of'></a></span><span class='indexparent'><a class='index' id=':bit-field,alignment_of'></a></span>As a special case, an unnamed bit-field with a width of zero specifies
alignment of the next bit-field at an allocation unit boundary<a class='hidden_link' href='#2.sentence-4'>.</a></div> <div id='2.sentence-5' class='sentence'>Only
when declaring an unnamed bit-field may the value of the
<i ><a href='expr.const#nt:constant-expression'>constant-expression</a></i> be equal to zero<a class='hidden_link' href='#2.sentence-5'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/classes.tex#L1370'>#</a></div><div id='3.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':bit-field,type_of'></a></span>A bit-field shall not be a static member<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>A bit-field shall have
integral or enumeration type (<a href='basic.fundamental'>[basic.fundamental]</a>)<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'><span class='indexparent'><a class='index' id=':Boolean'></a></span>A <span class='texttt'>bool</span> value can successfully be stored in a bit-field of any
nonzero size<a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='3.sentence-4' class='sentence'><span class='indexparent'><a class='index' id=':bit-field,address_of'></a></span>The address-of operator <span class='texttt'>&amp;</span> shall not be applied to a bit-field,
so there are no pointers to bit-fields<a class='hidden_link' href='#3.sentence-4'>.</a></div> <div id='3.sentence-5' class='sentence'><span class='indexparent'><a class='index' id=':restriction,bit-field'></a></span><span class='indexparent'><a class='index' id=':restriction,address_of_bit-field'></a></span><span class='indexparent'><a class='index' id=':restriction,pointer_to_bit-field'></a></span>A non-const reference shall not be bound to a
bit-field (<a href='dcl.init.ref'>[dcl.init.ref]</a>)<a class='hidden_link' href='#3.sentence-5'>.</a></div> <div id='3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-6' class='sentence'>If the initializer for a reference of type <span class='texttt'>const</span> <span class='texttt'>T&amp;</span> is
an lvalue that refers to a bit-field, the reference is bound to a
temporary initialized to hold the value of the bit-field; the reference
is not bound to the bit-field directly<a class='hidden_link' href='#3.sentence-6'>.</a></div> <div id='3.sentence-7' class='sentence'>See <a href='dcl.init.ref'>[dcl.init.ref]</a><a class='hidden_link' href='#3.sentence-7'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3fe46c716367d6e367b4c5acff344bce3f2a5cd2/source/classes.tex#L1392'>#</a></div><div id='4.sentence-1' class='sentence'>If the value <span class='texttt'>true</span> or <span class='texttt'>false</span> is stored into a bit-field of
type <span class='texttt'>bool</span> of any size (including a one bit bit-field), the
original <span class='texttt'>bool</span> value and the value of the bit-field shall compare
equal<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>If the value of an enumerator is stored into a bit-field of the
same enumeration type and the number of bits in the bit-field is large
enough to hold all the values of that <a href='dcl.enum'>enumeration type</a>,
the original enumerator value and the value of the bit-field shall
compare equal<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
enum BOOL { FALSE=0, TRUE=1 };
struct A {
  BOOL b:1;
};
A a;
void f() {
  a.b = TRUE;
  if (a.b == TRUE)              <span class='comment'>// yields <span class='tcode_in_codeblock'>true</span>
</span>    { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> }
}</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></body></html>