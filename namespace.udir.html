<!DOCTYPE html><html lang='en'><head><title>[namespace.udir]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>10</a> Declarations <a class='abbr_ref' href='./#dcl.dcl'>[dcl.dcl]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>10.3</a> Namespaces <a class='abbr_ref' href='basic.namespace#namespace.udir'>[basic.namespace]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>10.3.4</a> Using directive <a class='abbr_ref'>[namespace.udir]</a></h3><p ><span class='indexparent'><a class='index' id=':using-directive'></a></span></p><pre class='bnf'><a class='nontermdef' id='nt:using-directive'>using-directive:</a>
&#9;<i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>using  namespace</span> <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='namespace.def#nt:namespace-name'>namespace-name</a></i> <span class='terminal'>;</span>
</pre><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ae6271c88727c3fabe7dd8258f8687b369d83d6d/source/declarations.tex#L3121'>#</a></div><p >A <i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i> shall not appear in class scope, but may
appear in namespace scope or in block scope.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
When looking up a <i ><a href='namespace.def#nt:namespace-name'>namespace-name</a></i> in a
<i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i>, only namespace names are considered,
see <a href='basic.lookup.udir'>[basic.lookup.udir]</a>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
The optional <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i> appertains to the <i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i>.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ae6271c88727c3fabe7dd8258f8687b369d83d6d/source/declarations.tex#L3131'>#</a></div><p >A <i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i> specifies that the names in the nominated
namespace can be used in the scope in which the
<i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i> appears after the <i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i>.
During <a href='basic.lookup.unqual'>unqualified name lookup</a>, the names
appear as if they were declared in the nearest enclosing namespace which
contains both the <i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i> and the nominated
namespace.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
In this context, “contains” means “contains directly or indirectly”.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ae6271c88727c3fabe7dd8258f8687b369d83d6d/source/declarations.tex#L3143'>#</a></div><p >A <i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i> does not add any members to the declarative
region in which it appears.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> </p><pre class='codeblock'>
namespace A {
  int i;
  namespace B {
    namespace C {
      int i;
    }
    using namespace A::B::C;
    void f1() {
      i = 5;        <span class='comment'>// OK, <span class='tcode_in_codeblock'>C&#x200b;::&#x200b;i</span> visible in <span class='tcode_in_codeblock'>B</span> and hides <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;i</span>
</span>    }
  }
  namespace D {
    using namespace B;
    using namespace C;
    void f2() {
      i = 5;        <span class='comment'>// ambiguous, <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;C&#x200b;::&#x200b;i</span> or <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;i</span>?
</span>    }
  }
  void f3() {
    i = 5;          <span class='comment'>// uses <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;i</span>
</span>  }
}
void f4() {
  i = 5;            <span class='comment'>// ill-formed; neither <span class='tcode_in_codeblock'>i</span> is visible
</span>}</pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ae6271c88727c3fabe7dd8258f8687b369d83d6d/source/declarations.tex#L3177'>#</a></div><p >For <a href='basic.lookup.unqual'>unqualified lookup</a>, the
<i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i> is transitive: if a scope contains a
<i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i> that nominates a second namespace that itself
contains <i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i><span class='textit'>s</span>, the effect is as if the
<i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i><span class='textit'>s</span> from the second namespace also appeared in
the first.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span>  For qualified lookup, see <a href='namespace.qual'>[namespace.qual]</a>. <span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> </p><pre class='codeblock'>
namespace M {
  int i;
}

namespace N {
  int i;
  using namespace M;
}

void f() {
  using namespace N;
  i = 7;            <span class='comment'>// error: both <span class='tcode_in_codeblock'>M&#x200b;::&#x200b;i</span> and <span class='tcode_in_codeblock'>N&#x200b;::&#x200b;i</span> are visible
</span>}</pre><p >For another example,</p><pre class='codeblock'>
namespace A {
  int i;
}
namespace B {
  int i;
  int j;
  namespace C {
    namespace D {
      using namespace A;
      int j;
      int k;
      int a = i;    <span class='comment'>// <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;i</span> hides <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;i</span>
</span>    }
    using namespace D;
    int k = 89;     <span class='comment'>// no problem yet
</span>    int l = k;      <span class='comment'>// ambiguous: <span class='tcode_in_codeblock'>C&#x200b;::&#x200b;k</span> or <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;k</span>
</span>    int m = i;      <span class='comment'>// <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;i</span> hides <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;i</span>
</span>    int n = j;      <span class='comment'>// <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;j</span> hides <span class='tcode_in_codeblock'>B&#x200b;::&#x200b;j</span>
</span>  }
}</pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ae6271c88727c3fabe7dd8258f8687b369d83d6d/source/declarations.tex#L3230'>#</a></div><p >If a namespace is <a href='namespace.def#def:namespace,extend'>extended</a> after a
<i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i> for that namespace is given, the additional
members of the extended namespace and the members of namespaces
nominated by <i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i><span class='textit'>s</span> in the
extending <i ><a href='namespace.def#nt:namespace-definition'>namespace-definition</a></i> can be used after the
extending <i ><a href='namespace.def#nt:namespace-definition'>namespace-definition</a></i>.</p></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ae6271c88727c3fabe7dd8258f8687b369d83d6d/source/declarations.tex#L3238'>#</a></div><p >If name lookup finds a declaration for a name in two different
namespaces, and the declarations do not declare the same entity and do
not declare functions, the use of the name is ill-formed.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
In particular, the name of a variable, function or enumerator does not
hide the name of a class or enumeration declared in a different
namespace. For example,</p><pre class='codeblock'>
namespace A {
  class X { };
  extern "C"   int g();
  extern "C++" int h();
}
namespace B {
  void X(int);
  extern "C"   int g();
  extern "C++" int h(int);
}
using namespace A;
using namespace B;

void f() {
  X(1);             <span class='comment'>// error: name <span class='tcode_in_codeblock'>X</span> found in two namespaces
</span>  g();              <span class='comment'>// OK: name <span class='tcode_in_codeblock'>g</span> refers to the same entity
</span>  h();              <span class='comment'>// OK: overload resolution selects <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span>
</span>}</pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/ae6271c88727c3fabe7dd8258f8687b369d83d6d/source/declarations.tex#L3269'>#</a></div><p ><span class='indexparent'><a class='index' id=':overloading,using_directive_and'></a></span>During overload resolution, all functions from the transitive search are
considered for argument matching. The set of declarations found by the
transitive search is unordered.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
In particular, the order in which namespaces were considered and the
relationships among the namespaces implied by the
<i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i><span class='textit'>s</span> do not cause preference to be given to any
of the declarations found by the search.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
An ambiguity exists if the best match finds two functions with the same
signature, even if one is in a namespace reachable through
<i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i><span class='textit'>s</span> in the namespace of the other.<a class='footnotenum' href='#footnote-99'>99</a>
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> </p><pre class='codeblock'>
namespace D {
  int d1;
  void f(char);
}
using namespace D;

int d1;             <span class='comment'>// OK: no conflict with <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;d1</span>
</span>
namespace E {
  int e;
  void f(int);
}

namespace D {       <span class='comment'>// namespace extension
</span>  int d2;
  using namespace E;
  void f(int);
}

void f() {
  d1++;             <span class='comment'>// error: ambiguous <span class='tcode_in_codeblock'>&#x200b;::&#x200b;d1</span> or <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;d1</span>?
</span>  ::d1++;           <span class='comment'>// OK
</span>  D::d1++;          <span class='comment'>// OK
</span>  d2++;             <span class='comment'>// OK: <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;d2</span>
</span>  e++;              <span class='comment'>// OK: <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;e</span>
</span>  f(1);             <span class='comment'>// error: ambiguous: <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;f(int)</span> or <span class='tcode_in_codeblock'>E&#x200b;::&#x200b;f(int)</span>?
</span>  f('a');           <span class='comment'>// OK: <span class='tcode_in_codeblock'>D&#x200b;::&#x200b;f(char)</span>
</span>}</pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='footnote' id='footnote-99'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-99'>99)</a></div><p >During
name lookup in a class hierarchy, some ambiguities may be
resolved by considering whether one member hides the other along some
paths (<a href='class.member.lookup'>[class.member.lookup]</a>). There is no such disambiguation when
considering the set of names found as a result of following
<i ><a href='namespace.udir#nt:using-directive'>using-directive</a></i><span class='textit'>s</span>.</p></div></div></body></html>