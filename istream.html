<!DOCTYPE html><html lang='en'><head><title>[istream]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>27</a> Input/output library <a class='abbr_ref' href='./#input.output'>[input.output]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>27.7</a> Formatting and manipulators <a class='abbr_ref' href='iostream.format#istream'>[iostream.format]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>27.7.2</a> Input streams <a class='abbr_ref' href='input.streams#istream'>[input.streams]</a></h3><div id='istream'><h4 ><a class='secnum' style='min-width:118pt'>27.7.2.1</a> Class template <span class='texttt'>basic_istream</span> <a class='abbr_ref'>[istream]</a></h4><p ><span class='indexparent'><a class='index' id='basic_istream'></a></span></p><pre class='codeblock'>
namespace std {
  template &lt;class charT, class traits = char_traits&lt;charT&gt; &gt;
  class basic_istream
    : virtual public basic_ios&lt;charT, traits&gt; {
  public:
    <span class='comment'>// types (inherited from <span class='texttt'>basic_ios</span> (<a href='ios'>[ios]</a>)):
</span>    using char_type   = charT;
    using int_type    = typename traits::int_type;
    using pos_type    = typename traits::pos_type;
    using off_type    = typename traits::off_type;
    using traits_type = traits;

    <span class='comment'>// <a href='istream.cons'>[istream.cons]</a>, constructor/destructor:
</span>    explicit basic_istream(basic_streambuf&lt;charT, traits&gt;* sb);
    virtual ~basic_istream();

    <span class='comment'>// <a href='./istream::sentry'>[istream::sentry]</a>, prefix/suffix:
</span>    class sentry;

    <span class='comment'>// <a href='istream.formatted'>[istream.formatted]</a>, formatted input:
</span>    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(
      basic_istream&lt;charT, traits&gt;&amp; (*pf)(basic_istream&lt;charT, traits&gt;&amp;));
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(
      basic_ios&lt;charT, traits&gt;&amp; (*pf)(basic_ios&lt;charT, traits&gt;&amp;));
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(
      ios_base&amp; (*pf)(ios_base&amp;));

    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(bool&amp; n);
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(short&amp; n);
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(unsigned short&amp; n);
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(int&amp; n);
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(unsigned int&amp; n);
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(long&amp; n);
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(unsigned long&amp; n);
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(long long&amp; n);
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(unsigned long long&amp; n);
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(float&amp; f);
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(double&amp; f);
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(long double&amp; f);

    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(void*&amp; p);
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(
      basic_streambuf&lt;char_type, traits&gt;* sb);

    <span class='comment'>// <a href='istream.unformatted'>[istream.unformatted]</a>, unformatted input:
</span>    streamsize gcount() const;
    int_type get();
    basic_istream&lt;charT, traits&gt;&amp; get(char_type&amp; c);
    basic_istream&lt;charT, traits&gt;&amp; get(char_type* s, streamsize n);
    basic_istream&lt;charT, traits&gt;&amp; get(char_type* s, streamsize n,
                                      char_type delim);
    basic_istream&lt;charT, traits&gt;&amp; get(basic_streambuf&lt;char_type, traits&gt;&amp; sb);
    basic_istream&lt;charT, traits&gt;&amp; get(basic_streambuf&lt;char_type, traits&gt;&amp; sb,
                                      char_type delim);

    basic_istream&lt;charT, traits&gt;&amp; getline(char_type* s, streamsize n);
    basic_istream&lt;charT, traits&gt;&amp; getline(char_type* s, streamsize n,
                                          char_type delim);

    basic_istream&lt;charT, traits&gt;&amp; ignore(
      streamsize n = 1, int_type delim = traits::eof());
    int_type                      peek();
    basic_istream&lt;charT, traits&gt;&amp; read    (char_type* s, streamsize n);
    streamsize                    readsome(char_type* s, streamsize n);

    basic_istream&lt;charT, traits&gt;&amp; putback(char_type c);
    basic_istream&lt;charT, traits&gt;&amp; unget();
    int sync();

    pos_type tellg();
    basic_istream&lt;charT, traits&gt;&amp; seekg(pos_type);
    basic_istream&lt;charT, traits&gt;&amp; seekg(off_type, ios_base::seekdir);

  protected:
    <span class='comment'>// <a href='istream.cons'>[istream.cons]</a>, copy/move constructor:
</span>    basic_istream(const basic_istream&amp; rhs) = delete;
    basic_istream(basic_istream&amp;&amp; rhs);

    <span class='comment'>// <a href='istream.assign'>[istream.assign]</a>, assign and swap:
</span>    basic_istream&amp; operator=(const basic_istream&amp; rhs) = delete;
    basic_istream&amp; operator=(basic_istream&amp;&amp; rhs);
    void swap(basic_istream&amp; rhs);
  };

  <span class='comment'>// <a href='./istream::extractors'>[istream::extractors]</a>, character extraction templates:
</span>  template&lt;class charT, class traits&gt;
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(basic_istream&lt;charT, traits&gt;&amp;,
                                             charT&amp;);
  template&lt;class traits&gt;
    basic_istream&lt;char, traits&gt;&amp; operator&gt;&gt;(basic_istream&lt;char, traits&gt;&amp;,
                                            unsigned char&amp;);
  template&lt;class traits&gt;
    basic_istream&lt;char, traits&gt;&amp; operator&gt;&gt;(basic_istream&lt;char, traits&gt;&amp;,
                                            signed char&amp;);

  template&lt;class charT, class traits&gt;
    basic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(basic_istream&lt;charT, traits&gt;&amp;,
                                             charT*);
  template&lt;class traits&gt;
    basic_istream&lt;char, traits&gt;&amp; operator&gt;&gt;(basic_istream&lt;char, traits&gt;&amp;,
                                            unsigned char*);
  template&lt;class traits&gt;
    basic_istream&lt;char, traits&gt;&amp; operator&gt;&gt;(basic_istream&lt;char, traits&gt;&amp;,
                                            signed char*);
}
</pre><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><p >The class template
<span class='texttt'>basic_istream</span>
defines a number of member function
signatures that assist in reading and interpreting input from sequences
controlled by a stream buffer.</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><p >Two groups of member function signatures share common properties:
the
<i>formatted input functions</i>
(or
<i>extractors</i>)
and the
<i>unformatted input functions.</i>
Both groups of input functions are described as if they obtain (or
<i>extract</i>)
input
<i>characters</i>
by calling
<span class='texttt'>rdbuf()-&gt;sbumpc()</span>
or
<span class='texttt'>rdbuf()-&gt;sgetc()</span>.
They may use other public members of
<span class='texttt'>istream</span>.</p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><p >If
<span class='texttt'>rdbuf()-&gt;sbumpc()</span>
or
<span class='texttt'>rdbuf()-&gt;sgetc()</span>
returns
<span class='texttt'>traits::eof()</span>,
then the input function, except as explicitly noted otherwise, completes its actions and does
<span class='texttt'>setstate(eofbit)</span>,
which may throw
<span class='texttt'>ios_base::failure</span> (<a href='iostate.flags'>[iostate.flags]</a>), before returning.</p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><p >If one of these called functions throws an exception, then unless explicitly noted otherwise,
the input function sets
<span class='texttt'>badbit</span>
in error state.
If
<span class='texttt'>badbit</span>
is on in
<span class='texttt'>exceptions()</span>,
the input function
rethrows the exception without completing its actions, otherwise
it does not throw anything and proceeds as if the called function had returned
a failure indication.</p></div><div id='cons'><h4 ><a class='secnum' href='#cons' style='min-width:133pt'>27.7.2.1.1</a> <span class='texttt'>basic_istream</span> constructors <a class='abbr_ref' href='istream.cons'>[istream.cons]</a></h4><p ><span class='indexparent'><a class='index' id='basic_istream!constructor'></a></span><code class='itemdecl'>
explicit basic_istream(basic_streambuf&lt;charT, traits&gt;* sb);
</code></p><p ><span class='indexparent'><a class='index' id='init!basic_ios'></a></span><span class='indexparent'><a class='index' id='basic_ios!init'></a></span></p><div class='itemdescr'></div><div class='para' id='cons-1'><div class='marginalizedparent'><a class='marginalized' href='#cons-1'>1</a></div><div class='itemdescr'><p ><i>Effects:</i>
Constructs an object of class
<span class='texttt'>basic_istream</span>,
assigning initial values to the base class by calling
<span class='texttt'>basic_ios::init(sb)</span> (<a href='basic.ios.cons'>[basic.ios.cons]</a>).</p></div></div><div class='para' id='cons-2'><div class='marginalizedparent'><a class='marginalized' href='#cons-2'>2</a></div><div class='itemdescr'><p ><i>Postcondition:</i>
<span class='texttt'>gcount() == 0</span>
</p></div></div><p ><span class='indexparent'><a class='index' id='basic_istream!constructor'></a></span><code class='itemdecl'>
basic_istream(basic_istream&amp;&amp; rhs);
</code></p><div class='itemdescr'></div><div class='para' id='cons-3'><div class='marginalizedparent'><a class='marginalized' href='#cons-3'>3</a></div><div class='itemdescr'><p ><i>Effects:</i> Move constructs from the rvalue <span class='texttt'>rhs</span>.
This is accomplished by default constructing the base class, copying the
<span class='texttt'>gcount()</span> from <span class='texttt'>rhs</span>, calling
<span class='texttt'>basic_ios&lt;charT, traits&gt;::move(rhs)</span> to initialize the base
class, and setting the <span class='texttt'>gcount()</span> for <span class='texttt'>rhs</span> to 0.
</p></div></div><p ><span class='indexparent'><a class='index' id='basic_istream!destructor'></a></span><code class='itemdecl'>
virtual ~basic_istream();
</code></p><div class='itemdescr'></div><div class='para' id='cons-4'><div class='marginalizedparent'><a class='marginalized' href='#cons-4'>4</a></div><div class='itemdescr'><p ><i>Effects:</i>
Destroys an object of class
<span class='texttt'>basic_istream</span>.</p></div></div><div class='para' id='cons-5'><div class='marginalizedparent'><a class='marginalized' href='#cons-5'>5</a></div><div class='itemdescr'><p ><i>Remarks:</i>
Does not perform any operations of
<span class='texttt'>rdbuf()</span>.
</p></div></div></div><div id='assign'><h4 ><a class='secnum' href='#assign' style='min-width:133pt'>27.7.2.1.2</a> Class <span class='texttt'>basic_istream</span> assign and swap <a class='abbr_ref' href='istream.assign'>[istream.assign]</a></h4><p ><span class='indexparent'><a class='index' id='operator=!basic_istream'></a></span><span class='indexparent'><a class='index' id='basic_istream!operator='></a></span><code class='itemdecl'>
basic_istream&amp; operator=(basic_istream&amp;&amp; rhs);
</code></p><div class='itemdescr'></div><div class='para' id='assign-1'><div class='marginalizedparent'><a class='marginalized' href='#assign-1'>1</a></div><div class='itemdescr'><p ><i>Effects:</i> As if by <span class='texttt'>swap(rhs)</span>.</p></div></div><div class='para' id='assign-2'><div class='marginalizedparent'><a class='marginalized' href='#assign-2'>2</a></div><div class='itemdescr'><p ><i>Returns:</i> <span class='texttt'>*this</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='swap!basic_istream'></a></span><span class='indexparent'><a class='index' id='basic_istream!swap'></a></span><code class='itemdecl'>
void swap(basic_istream&amp; rhs);
</code></p><div class='itemdescr'></div><div class='para' id='assign-3'><div class='marginalizedparent'><a class='marginalized' href='#assign-3'>3</a></div><div class='itemdescr'><p ><i>Effects:</i> Calls <span class='texttt'>basic_ios&lt;charT, traits&gt;::swap(rhs)</span>.
Exchanges the values returned by <span class='texttt'>gcount()</span> and
<span class='texttt'>rhs.gcount()</span>.
</p></div></div></div><div id='istream::sentry'><h4 ><a class='secnum' href='#istream::sentry' style='min-width:133pt'>27.7.2.1.3</a> Class <span class='texttt'>basic_istream::sentry</span> <a class='abbr_ref' href='./istream::sentry'>[istream::sentry]</a></h4><p ><span class='indexparent'><a class='index' id='basic_istream::sentry'></a></span><span class='indexparent'><a class='index' id='sentry!basic_istream'></a></span></p><pre class='codeblock'>
namespace std {
  template &lt;class charT, class traits = char_traits&lt;charT&gt; &gt;
  class basic_istream&lt;charT, traits&gt;::sentry {
    using traits_type = traits;
    bool ok_; <span class='comment'>// <i>exposition only</i>
</span>  public:
    explicit sentry(basic_istream&lt;charT, traits&gt;&amp; is, bool noskipws = false);
    ~sentry();
    explicit operator bool() const { return ok_; }
    sentry(const sentry&amp;) = delete;
    sentry&amp; operator=(const sentry&amp;) = delete;
  };
}
</pre><div class='itemdescr'></div><div class='para' id='istream::sentry-1'><div class='marginalizedparent'><a class='marginalized' href='#istream::sentry-1'>1</a></div><div class='itemdescr'><p >The class
<span class='texttt'>sentry</span>
defines a class that is responsible for doing exception safe prefix and suffix
operations.
</p></div></div><p ><span class='indexparent'><a class='index' id='sentry!constructor'></a></span><span class='indexparent'><a class='index' id='basic_istream::sentry!constructor'></a></span><code class='itemdecl'>
explicit sentry(basic_istream&lt;charT, traits&gt;&amp; is, bool noskipws = false);
</code></p><div class='itemdescr'></div><div class='para' id='istream::sentry-2'><div class='marginalizedparent'><a class='marginalized' href='#istream::sentry-2'>2</a></div><div class='itemdescr'><p ><i>Effects:</i>
If
<span class='texttt'>is.good()</span>
is
<span class='texttt'>false</span>,
calls <span class='texttt'>is.setstate(failbit)</span>. Otherwise,
prepares for formatted or
unformatted input.
First, if
<span class='texttt'>is.tie()</span>
is not a null pointer, the
function calls
<span class='indexparent'><a class='index' id='flush'></a></span><span class='texttt'>is.tie()-&gt;flush()</span>
to synchronize the output sequence with any associated external
C stream.
Except that this call can be suppressed if the put area of
<span class='texttt'>is.tie()</span>
is empty.
Further an implementation is allowed to defer the call to
<span class='texttt'>flush</span>
until a
call of
<span class='texttt'>is.rdbuf()-&gt;underflow()</span>
occurs.
If no such call occurs before the
<span class='texttt'>sentry</span>
object is destroyed, the call to
<span class='texttt'>flush</span>
may be eliminated entirely.<a class='footnotenum' href='#footnote-310'>310</a>
If <span class='texttt'>noskipws</span> is zero and
<span class='texttt'>is.flags() &amp; ios_base::skipws</span>
is nonzero, the function extracts and discards each character as long as
the next available input character <span class='texttt'>c</span> is a whitespace character.
If
<span class='texttt'>is.rdbuf()-&gt;sbumpc()</span>
or
<span class='texttt'>is.rdbuf()-&gt;sgetc()</span>
returns
<span class='texttt'>traits::eof()</span>,
the function calls
<span class='texttt'>setstate(failbit | eofbit)</span>
(which may throw
<span class='texttt'>ios_base::failure</span>).</p></div></div><div class='para' id='istream::sentry-3'><div class='marginalizedparent'><a class='marginalized' href='#istream::sentry-3'>3</a></div><div class='itemdescr'><p ><i>Remarks:</i>
The constructor
<span class='texttt'>explicit sentry(basic_istream&lt;charT, traits&gt;&amp; is, bool noskipws = false)</span>
uses the currently imbued locale in <span class='texttt'>is</span>,
to determine whether the next input character is
whitespace or not.</p></div></div><div class='para' id='istream::sentry-4'><div class='marginalizedparent'><a class='marginalized' href='#istream::sentry-4'>4</a></div><div class='itemdescr'><p >To decide if the character <span class='texttt'>c</span> is a whitespace character,
the constructor performs as if it executes the following code fragment:
</p><pre class='codeblock'>
const ctype&lt;charT&gt;&amp; ctype = use_facet&lt;ctype&lt;charT&gt; &gt;(is.getloc());
if (ctype.is(ctype.space, c) != 0)
  <span class='comment'>// <span class='texttt'>c</span> is a whitespace character.
</span></pre></div></div><div class='para' id='istream::sentry-5'><div class='marginalizedparent'><a class='marginalized' href='#istream::sentry-5'>5</a></div><div class='itemdescr'><p >If, after any preparation is completed,
<span class='texttt'>is.good()</span>
is
<span class='texttt'>true</span>,
<span class='texttt'>ok_ != false</span>
otherwise,
<span class='texttt'>ok_ == false</span>.
During preparation, the constructor may call
<span class='texttt'>setstate(failbit)</span>
(which may throw
<span class='texttt'>ios_base::<span class='discretionary'></span>failure</span> (<a href='iostate.flags'>[iostate.flags]</a>))<a class='footnotenum' href='#footnote-311'>311</a>
</p></div></div><p ><span class='indexparent'><a class='index' id='sentry!destructor'></a></span><span class='indexparent'><a class='index' id='basic_istream::sentry!destructor'></a></span><code class='itemdecl'>
~sentry();
</code></p><div class='itemdescr'></div><div class='para' id='istream::sentry-6'><div class='marginalizedparent'><a class='marginalized' href='#istream::sentry-6'>6</a></div><div class='itemdescr'><p ><i>Effects:</i>
None.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator bool!basic_istream::sentry'></a></span><span class='indexparent'><a class='index' id='basic_istream::sentry!operator bool'></a></span><code class='itemdecl'>
explicit operator bool() const;
</code></p><div class='itemdescr'></div><div class='para' id='istream::sentry-7'><div class='marginalizedparent'><a class='marginalized' href='#istream::sentry-7'>7</a></div><div class='itemdescr'><p ><i>Effects:</i>
Returns
<span class='texttt'>ok_</span>.
</p></div></div><div class='footnote' id='footnote-310'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-310'>310)</a></div><p >This will be possible only in functions
that are part of the library.
The semantics of the constructor used in user code is as specified.</p></div><div class='footnote' id='footnote-311'><div class='footnoteNumberParent'><a class='marginalized' href='#footnote-311'>311)</a></div><p >The sentry
constructor and destructor
can also perform additional
<span class='indexparent'><a class='index' id='implementation-dependent'></a></span>implementation-dependent operations.</p></div></div></div></div></body></html>