<!DOCTYPE html><html lang='en'><head><title>[syserr.errcat]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>22</a> Diagnostics library <a class='abbr_ref' href='./#diagnostics'>[diagnostics]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>22.5</a> System error support <a class='abbr_ref' href='syserr#errcat'>[syserr]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>22.5.2</a> Class <span class='texttt'>error_&shy;category</span> <a class='abbr_ref'>[syserr.errcat]</a></h3><div id='overview' class='section'><h4 ><a class='secnum' href='#overview' style='min-width:118pt'>22.5.2.1</a> Class <span class='texttt'>error_&shy;category</span> overview <a class='abbr_ref' href='syserr.errcat.overview'>[syserr.errcat.overview]</a></h4><div class='para' id='overview-1'><div class='marginalizedparent'><a class='marginalized' href='#overview-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L936'>#</a></div><div id='overview-1.sentence-1' class='sentence'>The class <span class='texttt'>error_&shy;category</span> serves as a base class for types used
to identify the source and encoding of a particular category of error code<a class='hidden_link' href='#overview-1.sentence-1'>.</a></div> <div id='overview-1.sentence-2' class='sentence'>Classes may be derived from <span class='texttt'>error_&shy;category</span> to support
categories of errors in addition to those defined in this International
Standard<a class='hidden_link' href='#overview-1.sentence-2'>.</a></div> <div id='overview-1.sentence-3' class='sentence'>Such classes shall behave as specified in this
subclause<a class='hidden_link' href='#overview-1.sentence-3'>.</a></div> <div id='overview-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#overview-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='overview-1.sentence-4' class='sentence'><span class='texttt'>error_&shy;category</span> objects are
passed by reference, and two such objects
are equal if they have the same address<a class='hidden_link' href='#overview-1.sentence-4'>.</a></div> <div id='overview-1.sentence-5' class='sentence'>This means that applications using
custom <span class='texttt'>error_&shy;category</span> types should create a single object of each
such type<a class='hidden_link' href='#overview-1.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> <span class='indexparent'><a class='index' id='lib:error_category'></a></span><span class='indexparent'><a class='index' id='lib:generic_category'></a></span><span class='indexparent'><a class='index' id='lib:system_category'></a></span><pre class='codeblock'>
namespace std {
  class error_category {
  public:
    constexpr error_category() noexcept;
    virtual ~error_category();
    error_category(const error_category&amp;) = delete;
    error_category&amp; operator=(const error_category&amp;) = delete;
    virtual const char* name() const noexcept = 0;
    virtual error_condition default_error_condition(int ev) const noexcept;
    virtual bool equivalent(int code, const error_condition&amp; condition) const noexcept;
    virtual bool equivalent(const error_code&amp; code, int condition) const noexcept;
    virtual string message(int ev) const = 0;

    bool operator==(const error_category&amp; rhs) const noexcept;
    bool operator!=(const error_category&amp; rhs) const noexcept;
    bool operator&lt;(const error_category&amp; rhs) const noexcept;
  };

  const error_category&amp; generic_category() noexcept;
  const error_category&amp; system_category() noexcept;
}</pre></div></div><div id='virtuals' class='section'><h4 ><a class='secnum' href='#virtuals' style='min-width:118pt'>22.5.2.2</a> Class <span class='texttt'>error_&shy;category</span> virtual members <a class='abbr_ref' href='syserr.errcat.virtuals'>[syserr.errcat.virtuals]</a></h4><span class='indexparent'><a class='index' id='lib:error_category,destructor'></a></span><code class='itemdecl'>virtual ~error_category();
</code><div class='itemdescr'></div><div class='para' id='virtuals-1'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L984'>#</a></div><div id='virtuals-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Destroys an object of class <span class='texttt'>error_&shy;category</span><a class='hidden_link' href='#virtuals-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:name,error_category'></a></span><span class='indexparent'><a class='index' id='lib:error_category,name'></a></span><code class='itemdecl'>virtual const char* name() const noexcept = 0;
</code><div class='itemdescr'></div><div class='para' id='virtuals-2'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L994'>#</a></div><div id='virtuals-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> A string naming the error category<a class='hidden_link' href='#virtuals-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:default_error_condition,error_category'></a></span><span class='indexparent'><a class='index' id='lib:error_category,default_error_condition'></a></span><code class='itemdecl'>virtual error_condition default_error_condition(int ev) const noexcept;
</code><div class='itemdescr'></div><div class='para' id='virtuals-3'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1004'>#</a></div><div id='virtuals-3.sentence-1' class='sentence'><span class='textit'>Returns:</span> 
<span class='texttt'>error_&shy;condition(ev, *this)</span><a class='hidden_link' href='#virtuals-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:equivalent,error_category'></a></span><span class='indexparent'><a class='index' id='lib:error_category,equivalent'></a></span><code class='itemdecl'>virtual bool equivalent(int code, const error_condition&amp; condition) const noexcept;
</code><div class='itemdescr'></div><div class='para' id='virtuals-4'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1015'>#</a></div><div id='virtuals-4.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>default_&shy;error_&shy;condition(code) == condition</span><a class='hidden_link' href='#virtuals-4.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:equivalent,error_category_'></a></span><span class='indexparent'><a class='index' id='lib:error_category,equivalent_'></a></span><code class='itemdecl'>virtual bool equivalent(const error_code&amp; code, int condition) const noexcept;
</code><div class='itemdescr'></div><div class='para' id='virtuals-5'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1025'>#</a></div><div id='virtuals-5.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>*this == code.category() &amp;&amp; code.value() == condition</span><a class='hidden_link' href='#virtuals-5.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:message,error_category'></a></span><span class='indexparent'><a class='index' id='lib:error_category,message'></a></span><code class='itemdecl'>virtual string message(int ev) const = 0;
</code><div class='itemdescr'></div><div class='para' id='virtuals-6'><div class='marginalizedparent'><a class='marginalized' href='#virtuals-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1035'>#</a></div><div id='virtuals-6.sentence-1' class='sentence'><span class='textit'>Returns:</span> A string that describes the error condition denoted by <span class='texttt'>ev</span><a class='hidden_link' href='#virtuals-6.sentence-1'>.</a></div></div></div></div><div id='nonvirtuals' class='section'><h4 ><a class='secnum' href='#nonvirtuals' style='min-width:118pt'>22.5.2.3</a> Class <span class='texttt'>error_&shy;category</span> non-virtual members <a class='abbr_ref' href='syserr.errcat.nonvirtuals'>[syserr.errcat.nonvirtuals]</a></h4><span class='indexparent'><a class='index' id='lib:error_category,constructor'></a></span><code class='itemdecl'>constexpr error_category() noexcept;
</code><div class='itemdescr'></div><div class='para' id='nonvirtuals-1'><div class='marginalizedparent'><a class='marginalized' href='#nonvirtuals-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1047'>#</a></div><div id='nonvirtuals-1.sentence-1' class='sentence'><span class='textit'>Effects:</span> Constructs an object of class <span class='texttt'>error_&shy;category</span><a class='hidden_link' href='#nonvirtuals-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator==,error_category'></a></span><span class='indexparent'><a class='index' id='lib:error_category,operator=='></a></span><code class='itemdecl'>bool operator==(const error_category&amp; rhs) const noexcept;
</code><div class='itemdescr'></div><div class='para' id='nonvirtuals-2'><div class='marginalizedparent'><a class='marginalized' href='#nonvirtuals-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1057'>#</a></div><div id='nonvirtuals-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>this == &amp;rhs</span><a class='hidden_link' href='#nonvirtuals-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator!=,error_category'></a></span><span class='indexparent'><a class='index' id='lib:error_category,operator!='></a></span><code class='itemdecl'>bool operator!=(const error_category&amp; rhs) const noexcept;
</code><div class='itemdescr'></div><div class='para' id='nonvirtuals-3'><div class='marginalizedparent'><a class='marginalized' href='#nonvirtuals-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1067'>#</a></div><div id='nonvirtuals-3.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>!(*this == rhs)</span><a class='hidden_link' href='#nonvirtuals-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:operator<,error_category'></a></span><span class='indexparent'><a class='index' id='lib:error_category,operator<'></a></span><code class='itemdecl'>bool operator&lt;(const error_category&amp; rhs) const noexcept;
</code><div class='itemdescr'></div><div class='para' id='nonvirtuals-4'><div class='marginalizedparent'><a class='marginalized' href='#nonvirtuals-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1077'>#</a></div><div id='nonvirtuals-4.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>less&lt;const error_&shy;category*&gt;()(this, &amp;rhs)</span><a class='hidden_link' href='#nonvirtuals-4.sentence-1'>.</a></div><div style='height:0.6em;display:block'></div><div id='nonvirtuals-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#nonvirtuals-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='nonvirtuals-4.sentence-2' class='sentence'><a href='comparisons.less'><span class='texttt'>less</span></a> provides a total ordering for pointers<a class='hidden_link' href='#nonvirtuals-4.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div><div id='derived' class='section'><h4 ><a class='secnum' href='#derived' style='min-width:118pt'>22.5.2.4</a> Program defined classes derived from <span class='texttt'>error_&shy;category</span> <a class='abbr_ref' href='syserr.errcat.derived'>[syserr.errcat.derived]</a></h4><span class='indexparent'><a class='index' id='lib:name,error_category_'></a></span><span class='indexparent'><a class='index' id='lib:error_category,name_'></a></span><code class='itemdecl'>virtual const char* name() const noexcept = 0;
</code><div class='itemdescr'></div><div class='para' id='derived-1'><div class='marginalizedparent'><a class='marginalized' href='#derived-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1091'>#</a></div><div id='derived-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> A string naming the error category<a class='hidden_link' href='#derived-1.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:default_error_condition,error_category_'></a></span><span class='indexparent'><a class='index' id='lib:error_category,default_error_condition_'></a></span><code class='itemdecl'>virtual error_condition default_error_condition(int ev) const noexcept;
</code><div class='itemdescr'></div><div class='para' id='derived-2'><div class='marginalizedparent'><a class='marginalized' href='#derived-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1101'>#</a></div><div id='derived-2.sentence-1' class='sentence'><span class='textit'>Returns:</span> An object of type <span class='texttt'>error_&shy;condition</span> that corresponds to <span class='texttt'>ev</span><a class='hidden_link' href='#derived-2.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:equivalent,error_category__'></a></span><span class='indexparent'><a class='index' id='lib:error_category,equivalent__'></a></span><code class='itemdecl'>virtual bool equivalent(int code, const error_condition&amp; condition) const noexcept;
</code><div class='itemdescr'></div><div class='para' id='derived-3'><div class='marginalizedparent'><a class='marginalized' href='#derived-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1111'>#</a></div><div id='derived-3.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>true</span> if, for the category of error represented by <span class='texttt'>*this</span>, <span class='texttt'>code</span> is considered equivalent to <span class='texttt'>condition</span>; otherwise, <span class='texttt'>false</span><a class='hidden_link' href='#derived-3.sentence-1'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:equivalent,error_category___'></a></span><span class='indexparent'><a class='index' id='lib:error_category,equivalent___'></a></span><code class='itemdecl'>virtual bool equivalent(const error_code&amp; code, int condition) const noexcept;
</code><div class='itemdescr'></div><div class='para' id='derived-4'><div class='marginalizedparent'><a class='marginalized' href='#derived-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1121'>#</a></div><div id='derived-4.sentence-1' class='sentence'><span class='textit'>Returns:</span> <span class='texttt'>true</span> if, for the category of error represented by <span class='texttt'>*this</span>, <span class='texttt'>code</span> is considered equivalent to <span class='texttt'>condition</span>; otherwise, <span class='texttt'>false</span><a class='hidden_link' href='#derived-4.sentence-1'>.</a></div></div></div></div><div id='objects' class='section'><h4 ><a class='secnum' href='#objects' style='min-width:118pt'>22.5.2.5</a> Error category objects <a class='abbr_ref' href='syserr.errcat.objects'>[syserr.errcat.objects]</a></h4><span class='indexparent'><a class='index' id='lib:generic_category_'></a></span><code class='itemdecl'>const error_category&amp; generic_category() noexcept;
</code><div class='itemdescr'></div><div class='para' id='objects-1'><div class='marginalizedparent'><a class='marginalized' href='#objects-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1133'>#</a></div><div id='objects-1.sentence-1' class='sentence'><span class='textit'>Returns:</span> A reference to an object of a type derived from class <span class='texttt'>error_&shy;category</span><a class='hidden_link' href='#objects-1.sentence-1'>.</a></div> <div id='objects-1.sentence-2' class='sentence'>All calls to this function shall return references to the same object<a class='hidden_link' href='#objects-1.sentence-2'>.</a></div></div></div><div class='para' id='objects-2'><div class='marginalizedparent'><a class='marginalized' href='#objects-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1137'>#</a></div><div id='objects-2.sentence-1' class='sentence'><span class='textit'>Remarks:</span> The object's <span class='texttt'>default_&shy;error_&shy;condition</span> and <span class='texttt'>equivalent</span> virtual functions shall behave as specified for the class <span class='texttt'>error_&shy;category</span><a class='hidden_link' href='#objects-2.sentence-1'>.</a></div> <div id='objects-2.sentence-2' class='sentence'>The object's <span class='texttt'>name</span> virtual function shall return a pointer to the string <span class='texttt'>"generic"</span><a class='hidden_link' href='#objects-2.sentence-2'>.</a></div></div></div><span class='indexparent'><a class='index' id='lib:system_category_'></a></span><code class='itemdecl'>const error_category&amp; system_category() noexcept;
</code><div class='itemdescr'></div><div class='para' id='objects-3'><div class='marginalizedparent'><a class='marginalized' href='#objects-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1147'>#</a></div><div id='objects-3.sentence-1' class='sentence'><span class='textit'>Returns:</span> A reference to an object of a type derived from class <span class='texttt'>error_&shy;category</span><a class='hidden_link' href='#objects-3.sentence-1'>.</a></div> <div id='objects-3.sentence-2' class='sentence'>All calls to this function shall return references to the same object<a class='hidden_link' href='#objects-3.sentence-2'>.</a></div></div></div><div class='para' id='objects-4'><div class='marginalizedparent'><a class='marginalized' href='#objects-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/78f8e15e9acb75272c0c32cd7df9085e81668b1e/source/diagnostics.tex#L1151'>#</a></div><div id='objects-4.sentence-1' class='sentence'><span class='textit'>Remarks:</span> The object's <span class='texttt'>equivalent</span> virtual functions shall behave as specified for
class <span class='texttt'>error_&shy;category</span><a class='hidden_link' href='#objects-4.sentence-1'>.</a></div> <div id='objects-4.sentence-2' class='sentence'>The object's <span class='texttt'>name</span> virtual function shall return a
pointer to the string <span class='texttt'>"system"</span><a class='hidden_link' href='#objects-4.sentence-2'>.</a></div> <div id='objects-4.sentence-3' class='sentence'>The object's <span class='texttt'>default_&shy;error_&shy;condition</span>
virtual function shall behave as follows:</div><div style='height:0.6em;display:block'></div><div id='objects-4.sentence-4' class='sentence'>If the argument <span class='texttt'>ev</span> corresponds to a POSIX <span class='texttt'>errno</span> value <span class='texttt'>posv</span>, the
function shall return <span class='texttt'>error_&shy;condition(posv, generic_&shy;category())</span><a class='hidden_link' href='#objects-4.sentence-4'>.</a></div> <div id='objects-4.sentence-5' class='sentence'>Otherwise, the function shall return <span class='texttt'>error_&shy;condition(ev,
system_&shy;category())</span><a class='hidden_link' href='#objects-4.sentence-5'>.</a></div> <div id='objects-4.sentence-6' class='sentence'>What constitutes correspondence for any given operating
system is unspecified<a class='hidden_link' href='#objects-4.sentence-6'>.</a></div> <div id='objects-4.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#objects-4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='objects-4.sentence-7' class='sentence'>The number of potential system error codes is large
and unbounded, and some may not correspond to any POSIX <span class='texttt'>errno</span> value<a class='hidden_link' href='#objects-4.sentence-7'>.</a></div> <div id='objects-4.sentence-8' class='sentence'>Thus
implementations are given latitude in determining correspondence<a class='hidden_link' href='#objects-4.sentence-8'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></div></div></body></html>