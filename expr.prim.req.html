<!DOCTYPE html><html lang='en'><head><title>[expr.prim.req]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>7.5</a> Primary expressions <a class='abbr_ref' href='expr.prim#req'>[expr.prim]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>7.5.7</a> Requires expressions <a class='abbr_ref'>[expr.prim.req]</a></h3><span class='indexparent'><a class='index' id=':expression,requires'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be83c0b472b3912df2ba63bb2831f2a7798badd3/source/expressions.tex#L2443'>#</a></div><div id='1.sentence-1' class='sentence'>A <i ><a href='#nt:requires-expression'>requires-expression</a></i> provides a concise way to express
requirements on template arguments
that can be checked by <a href='basic.lookup'>name lookup</a>
or by checking properties of types and expressions<a class='hidden_link' href='#1.sentence-1'>.</a></div><pre class='bnf'><a class='nontermdef' href='#nt:requires-expression' id='nt:requires-expression'>requires-expression:</a>
&#9;<span class='terminal'><span class='keyword'>requires</span></span> <i ><a href='#nt:requirement-parameter-list'>requirement-parameter-list</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='#nt:requirement-body'>requirement-body</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:requirement-parameter-list' id='nt:requirement-parameter-list'>requirement-parameter-list:</a>
&#9;<span class='terminal'><span class='parenthesis'>(</span></span> <i ><a href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='parenthesis'>)</span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:requirement-body' id='nt:requirement-body'>requirement-body:</a>
&#9;<span class='terminal'><span class='curlybracket'>{</span></span> <i ><a href='#nt:requirement-seq'>requirement-seq</a></i> <span class='terminal'><span class='curlybracket'>}</span></span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:requirement-seq' id='nt:requirement-seq'>requirement-seq:</a>
&#9;<i ><a href='#nt:requirement'>requirement</a></i>
&#9;<i ><a href='#nt:requirement-seq'>requirement-seq</a></i> <i ><a href='#nt:requirement'>requirement</a></i>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:requirement' id='nt:requirement'>requirement:</a>
&#9;<i ><a href='#nt:simple-requirement'>simple-requirement</a></i>
&#9;<i ><a href='#nt:type-requirement'>type-requirement</a></i>
&#9;<i ><a href='#nt:compound-requirement'>compound-requirement</a></i>
&#9;<i ><a href='#nt:nested-requirement'>nested-requirement</a></i>
</pre></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be83c0b472b3912df2ba63bb2831f2a7798badd3/source/expressions.tex#L2478'>#</a></div><div id='2.sentence-1' class='sentence'>A <i ><a href='#nt:requires-expression'>requires-expression</a></i> is a prvalue of type <span class='texttt'><span class='keyword'>bool</span></span>
whose value is described below<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Expressions appearing within a <i ><a href='#nt:requirement-body'>requirement-body</a></i>
are <a href='expr.prop#def:unevaluated_operand'>unevaluated operands</a><a class='hidden_link' href='#2.sentence-2'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be83c0b472b3912df2ba63bb2831f2a7798badd3/source/expressions.tex#L2484'>#</a></div><div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='3.sentence-1' class='sentence'>A common use of <i ><a href='#nt:requires-expression'>requires-expression</a></i>s is to define
requirements in concepts such as the one below:
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>concept</span> R <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>typename</span> T<span class='operator'>:</span><span class='operator'>:</span>type;
    <span class='curlybracket'>{</span><span class='operator'>*</span>i<span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>const</span> <span class='keyword'>typename</span> T<span class='operator'>:</span><span class='operator'>:</span>type<span class='operator'>&amp;</span>;
  <span class='curlybracket'>}</span>;
</pre></div> <div id='3.sentence-2' class='sentence'>
A <i ><a href='#nt:requires-expression'>requires-expression</a></i> can also be used in a
<i ><a href='temp#nt:requires-clause'>requires-clause</a></i> (<a href='temp'>[temp]</a>) as a way of writing ad hoc
constraints on template arguments such as the one below:
<pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> x <span class='operator'>+</span> x; <span class='curlybracket'>}</span>
    T add<span class='parenthesis'>(</span>T a, T b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a <span class='operator'>+</span> b; <span class='curlybracket'>}</span>
</pre></div> <div id='3.sentence-3' class='sentence'>
The first <span class='texttt'><span class='keyword'>requires</span></span> introduces the
<i ><a href='temp#nt:requires-clause'>requires-clause</a></i>, and the second
introduces the <i ><a href='#nt:requires-expression'>requires-expression</a></i><a class='hidden_link' href='#3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be83c0b472b3912df2ba63bb2831f2a7798badd3/source/expressions.tex#L2508'>#</a></div><div id='4.sentence-1' class='sentence'>A <i ><a href='#nt:requires-expression'>requires-expression</a></i> may introduce local parameters using a
<i ><a href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a></i> (<a href='dcl.fct'>[dcl.fct]</a>)<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>A local parameter of a <i ><a href='#nt:requires-expression'>requires-expression</a></i> shall not have a
default argument<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>Each name introduced by a local parameter is in scope from the point
of its declaration until the closing brace of the
<i ><a href='#nt:requirement-body'>requirement-body</a></i><a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='4.sentence-4' class='sentence'>These parameters have no linkage, storage, or lifetime; they are only used
as notation for the purpose of defining <i ><a href='#nt:requirement'>requirement</a></i>s<a class='hidden_link' href='#4.sentence-4'>.</a></div> <div id='4.sentence-5' class='sentence'>The <i ><a href='dcl.fct#nt:parameter-declaration-clause'>parameter-declaration-clause</a></i> of a
<i ><a href='#nt:requirement-parameter-list'>requirement-parameter-list</a></i>
shall not terminate with an ellipsis<a class='hidden_link' href='#4.sentence-5'>.</a></div> <div id='4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T t, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>    <span class='comment' style='font-style:italic;font-family:serif;'>// error: terminates with an ellipsis</span>
  t;
<span class='curlybracket'>}</span>;
</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be83c0b472b3912df2ba63bb2831f2a7798badd3/source/expressions.tex#L2530'>#</a></div><div id='5.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':requirement'></a></span>The <i ><a href='#nt:requirement-body'>requirement-body</a></i> contains
a sequence of <i ><a href='#nt:requirement'>requirement</a></i>s<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>These <i ><a href='#nt:requirement'>requirement</a></i>s may refer to local
parameters, template parameters, and any other declarations visible from the
enclosing context<a class='hidden_link' href='#5.sentence-2'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be83c0b472b3912df2ba63bb2831f2a7798badd3/source/expressions.tex#L2538'>#</a></div><div id='6.sentence-1' class='sentence'>The substitution of template arguments into a <i ><a href='#nt:requires-expression'>requires-expression</a></i>
may result in the formation of invalid types or expressions in its
requirements or the violation of the semantic constraints of those requirements<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>In such cases, the <i ><a href='#nt:requires-expression'>requires-expression</a></i> evaluates to <span class='texttt'><span class='literal'>false</span></span>;
it does not cause the program to be ill-formed<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>The substitution and semantic constraint checking
proceeds in lexical order and stops when a condition that
determines the result of the <i ><a href='#nt:requires-expression'>requires-expression</a></i> is encountered<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='6.sentence-4' class='sentence'>If substitution (if any) and semantic constraint checking succeed,
the <i ><a href='#nt:requires-expression'>requires-expression</a></i> evaluates to <span class='texttt'><span class='literal'>true</span></span><a class='hidden_link' href='#6.sentence-4'>.</a></div> <div id='6.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.sentence-5' class='sentence'>If a <i ><a href='#nt:requires-expression'>requires-expression</a></i> contains invalid types or expressions in
its requirements, and it does not appear within the declaration of a templated
entity, then the program is ill-formed<a class='hidden_link' href='#6.sentence-5'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='6.sentence-6' class='sentence'>
If the substitution of template arguments into a <i ><a href='#nt:requirement'>requirement</a></i>
would always result in a substitution failure, the program is ill-formed;
no diagnostic required<a class='hidden_link' href='#6.sentence-6'>.</a></div> <div id='6.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span>
<span class='keyword'>requires</span> <span class='curlybracket'>{</span>
  <span class='keyword'>new</span> <span class='keyword'>int</span><span class='squarebracket'>[</span><span class='operator'>-</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='squarebracket'>]</span>; <span class='comment' style='font-style:italic;font-family:serif;'>// ill-formed, no diagnostic required</span>
<span class='curlybracket'>}</span>;
</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div id='simple' class='section'><h4 ><a class='secnum' href='#simple' style='min-width:118pt'>7.5.7.1</a> Simple requirements <a class='abbr_ref' href='expr.prim.req.simple'>[expr.prim.req.simple]</a></h4><span class='indexparent'><a class='index' id=':requirement,simple'></a></span>
<pre class='bnf'><a class='nontermdef' href='#nt:simple-requirement' id='nt:simple-requirement'>simple-requirement:</a>
&#9;<i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'>;</span>
</pre><div class='para' id='simple-1'><div class='marginalizedparent'><a class='marginalized' href='#simple-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be83c0b472b3912df2ba63bb2831f2a7798badd3/source/expressions.tex#L2574'>#</a></div><div id='simple-1.sentence-1' class='sentence'>A <i ><a href='#nt:simple-requirement'>simple-requirement</a></i> asserts
the validity of an <i ><a href='expr.comma#nt:expression'>expression</a></i><a class='hidden_link' href='#simple-1.sentence-1'>.</a></div> <div id='simple-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#simple-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='simple-1.sentence-2' class='sentence'>The enclosing <i ><a href='#nt:requires-expression'>requires-expression</a></i> will evaluate to <span class='texttt'><span class='literal'>false</span></span>
if substitution of template arguments into the <i ><a href='expr.comma#nt:expression'>expression</a></i> fails<a class='hidden_link' href='#simple-1.sentence-2'>.</a></div> <div id='simple-1.sentence-3' class='sentence'>The <i ><a href='expr.comma#nt:expression'>expression</a></i> is an <a href='expr.prop#def:unevaluated_operand'>unevaluated operand</a><a class='hidden_link' href='#simple-1.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='simple-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#simple-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span>
  <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T a, T b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    a <span class='operator'>+</span> b;  <span class='comment' style='font-style:italic;font-family:serif;'>// <span class='tcode_in_codeblock'>C&lt;T&gt;</span> is <span class='tcode_in_codeblock'>true</span> if <span class='tcode_in_codeblock'>a + b</span> is a valid expression</span>
  <span class='curlybracket'>}</span>;
</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='type' class='section'><h4 ><a class='secnum' href='#type' style='min-width:118pt'>7.5.7.2</a> Type requirements <a class='abbr_ref' href='expr.prim.req.type'>[expr.prim.req.type]</a></h4><span class='indexparent'><a class='index' id=':requirement,type'></a></span>
<pre class='bnf'><a class='nontermdef' href='#nt:type-requirement' id='nt:type-requirement'>type-requirement:</a>
&#9;<span class='terminal'><span class='keyword'>typename</span></span> <i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i> <span class='terminal'>;</span>
</pre><div class='para' id='type-1'><div class='marginalizedparent'><a class='marginalized' href='#type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be83c0b472b3912df2ba63bb2831f2a7798badd3/source/expressions.tex#L2599'>#</a></div><div id='type-1.sentence-1' class='sentence'>A <i ><a href='#nt:type-requirement'>type-requirement</a></i> asserts the validity of a type<a class='hidden_link' href='#type-1.sentence-1'>.</a></div> <div id='type-1.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#type-1.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='type-1.sentence-2' class='sentence'>The enclosing <i ><a href='#nt:requires-expression'>requires-expression</a></i> will evaluate to <span class='texttt'><span class='literal'>false</span></span>
if substitution of template arguments fails<a class='hidden_link' href='#type-1.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='type-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#type-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>typename</span> T<span class='operator'>:</span><span class='operator'>:</span>type <span class='operator'>=</span> <span class='literal'>0</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> Ref <span class='operator'>=</span> T<span class='operator'>&amp;</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typename</span> T<span class='operator'>:</span><span class='operator'>:</span>inner;    <span class='comment' style='font-style:italic;font-family:serif;'>// required nested member name</span>
  <span class='keyword'>typename</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;        <span class='comment' style='font-style:italic;font-family:serif;'>// required class template specialization</span>
  <span class='keyword'>typename</span> Ref<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;      <span class='comment' style='font-style:italic;font-family:serif;'>// required alias template substitution, fails if <span class='tcode_in_codeblock'>T</span> is void</span>
<span class='curlybracket'>}</span>;
</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='type-2'><div class='marginalizedparent'><a class='marginalized' href='#type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be83c0b472b3912df2ba63bb2831f2a7798badd3/source/expressions.tex#L2618'>#</a></div><div id='type-2.sentence-1' class='sentence'>A <i ><a href='#nt:type-requirement'>type-requirement</a></i> that names a class template specialization
does not require that type to be complete (<a href='basic.types'>[basic.types]</a>)<a class='hidden_link' href='#type-2.sentence-1'>.</a></div></div></div><div id='compound' class='section'><h4 ><a class='secnum' href='#compound' style='min-width:118pt'>7.5.7.3</a> Compound requirements <a class='abbr_ref' href='expr.prim.req.compound'>[expr.prim.req.compound]</a></h4><span class='indexparent'><a class='index' id=':requirement,compound'></a></span>
<pre class='bnf'><a class='nontermdef' href='#nt:compound-requirement' id='nt:compound-requirement'>compound-requirement:</a>
&#9;<span class='terminal'><span class='curlybracket'>{</span></span> <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='terminal'><span class='curlybracket'>}</span></span> <span class='terminal'><span class='keyword'>noexcept</span></span><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='#nt:return-type-requirement'>return-type-requirement</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="_\mathit{opt}"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='terminal'>;</span>
</pre><pre class='bnf'><a class='nontermdef' href='#nt:return-type-requirement' id='nt:return-type-requirement'>return-type-requirement:</a>
&#9;<i ><a href='dcl.decl#nt:trailing-return-type'>trailing-return-type</a></i>
&#9;<span class='terminal'><span class='operator'>-</span><span class='anglebracket'>&gt;</span></span> <i ><a href='temp#nt:type-constraint'>type-constraint</a></i>
</pre><div class='para' id='compound-1'><div class='marginalizedparent'><a class='marginalized' href='#compound-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be83c0b472b3912df2ba63bb2831f2a7798badd3/source/expressions.tex#L2636'>#</a></div><div id='compound-1.sentence-1' class='sentence'>A <i ><a href='#nt:compound-requirement'>compound-requirement</a></i> asserts properties
of the <i ><a href='expr.comma#nt:expression'>expression</a></i> <span class='texttt'>E</span><a class='hidden_link' href='#compound-1.sentence-1'>.</a></div> <div id='compound-1.sentence-2' class='sentence'>Substitution
of template arguments (if any) and verification of
semantic properties proceed in the following order:</div><div id='compound-1.sentence-3' class='sentence'><ul class='itemize'><li id='compound-1.1'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#compound-1.1'>(1.1)</a></div><div id='compound-1.1.sentence-1' class='sentence'>Substitution of template arguments (if any)
into the <i ><a href='expr.comma#nt:expression'>expression</a></i> is performed<a class='hidden_link' href='#compound-1.1.sentence-1'>.</a></div></li><li id='compound-1.2'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#compound-1.2'>(1.2)</a></div><div id='compound-1.2.sentence-1' class='sentence'>If the <span class='texttt'><span class='keyword'>noexcept</span></span> specifier is present,
<span class='texttt'>E</span> shall not be a potentially-throwing expression (<a href='except.spec'>[except.spec]</a>)<a class='hidden_link' href='#compound-1.2.sentence-1'>.</a></div></li><li id='compound-1.3'><div class='marginalizedparent' style='left:-7em'><a class='marginalized' href='#compound-1.3'>(1.3)</a></div><div id='compound-1.3.sentence-1' class='sentence'>If the <i ><a href='#nt:return-type-requirement'>return-type-requirement</a></i> is present, then:</div><div id='compound-1.3.sentence-2' class='sentence'><ul class='itemize'><li id='compound-1.3.1'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#compound-1.3.1'>(1.3.1)</a></div><div id='compound-1.3.1.sentence-1' class='sentence'>Substitution of template arguments (if any)
into the <i ><a href='#nt:return-type-requirement'>return-type-requirement</a></i> is performed<a class='hidden_link' href='#compound-1.3.1.sentence-1'>.</a></div></li><li id='compound-1.3.2'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#compound-1.3.2'>(1.3.2)</a></div><div id='compound-1.3.2.sentence-1' class='sentence'>If the <i ><a href='#nt:return-type-requirement'>return-type-requirement</a></i> is a
<i ><a href='dcl.decl#nt:trailing-return-type'>trailing-return-type</a></i> (<a href='dcl.decl'>[dcl.decl]</a>),
<span class='texttt'>E</span> is implicitly convertible to
the type named by the <i ><a href='dcl.decl#nt:trailing-return-type'>trailing-return-type</a></i><a class='hidden_link' href='#compound-1.3.2.sentence-1'>.</a></div> <div id='compound-1.3.2.sentence-2' class='sentence'>If conversion fails, the enclosing <i ><a href='#nt:requires-expression'>requires-expression</a></i>
is <span class='texttt'><span class='literal'>false</span></span><a class='hidden_link' href='#compound-1.3.2.sentence-2'>.</a></div></li><li id='compound-1.3.3'><div class='marginalizedparent' style='left:-9em'><a class='marginalized' href='#compound-1.3.3'>(1.3.3)</a></div><div id='compound-1.3.3.sentence-1' class='sentence'>If the <i ><a href='#nt:return-type-requirement'>return-type-requirement</a></i>
is of the form <span class='texttt'><span class='operator'>-</span><span class='anglebracket'>&gt;</span></span> <i ><a href='temp#nt:type-constraint'>type-constraint</a></i>, then
the contextually-determined type being constrained
is <span class='texttt'><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>E<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#compound-1.3.3.sentence-1'>.</a></div> <div id='compound-1.3.3.sentence-2' class='sentence'>The immediately-declared constraint (<a href='temp'>[temp]</a>) of <span class='texttt'><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>E<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
shall be satisfied<a class='hidden_link' href='#compound-1.3.3.sentence-2'>.</a></div> <div id='compound-1.3.3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#compound-1.3.3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='compound-1.3.3.sentence-3' class='sentence'>Given concepts <span class='texttt'>C</span> and <span class='texttt'>D</span>,
<pre class='codeblock'>
<span class='keyword'>requires</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span> E1 <span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> C;
  <span class='curlybracket'>{</span> E2 <span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> D<span class='anglebracket'>&lt;</span>A<span class="mjx-chtml"><span class="mjx-math" aria-label="_1"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, <span class='math'>⋯</span>, A<span class="mjx-chtml"><span class="mjx-math" aria-label="_n"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span><span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>;
</pre>
is equivalent to
<pre class='codeblock'>
<span class='keyword'>requires</span> <span class='curlybracket'>{</span>
  E1; <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>E1<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span>;
  E2; <span class='keyword'>requires</span> D<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>E2<span class='parenthesis'>)</span><span class='parenthesis'>)</span>, A<span class="mjx-chtml"><span class="mjx-math" aria-label="_1"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span>, <span class='math'>⋯</span>, A<span class="mjx-chtml"><span class="mjx-math" aria-label="_n"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span><span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>;
</pre>
(including in the case where <span class='math'><span class='mathalpha'>n</span></span> is zero)<a class='hidden_link' href='#compound-1.3.3.sentence-3'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </li></ul></div></li></ul></div></div><div class='para' id='compound-2'><div class='marginalizedparent'><a class='marginalized' href='#compound-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be83c0b472b3912df2ba63bb2831f2a7798badd3/source/expressions.tex#L2695'>#</a></div><div id='compound-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#compound-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C1 <span class='operator'>=</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span>x<span class='operator'>+</span><span class='operator'>+</span><span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
</pre> <div id='compound-2.sentence-1' class='sentence'>
The <i ><a href='#nt:compound-requirement'>compound-requirement</a></i> in <span class='texttt'>C1</span>
requires that <span class='texttt'>x<span class='operator'>+</span><span class='operator'>+</span></span> is a valid expression<a class='hidden_link' href='#compound-2.sentence-1'>.</a></div> <div id='compound-2.sentence-2' class='sentence'>It is equivalent to the <i ><a href='#nt:simple-requirement'>simple-requirement</a></i>
<span class='texttt'>x<span class='operator'>+</span><span class='operator'>+</span>;</span><a class='hidden_link' href='#compound-2.sentence-2'>.</a></div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C2 <span class='operator'>=</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span><span class='operator'>*</span>x<span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>typename</span> T<span class='operator'>:</span><span class='operator'>:</span>inner;
<span class='curlybracket'>}</span>;
</pre><div id='compound-2.sentence-3' class='sentence'>The <i ><a href='#nt:compound-requirement'>compound-requirement</a></i> in <span class='texttt'>C2</span>
requires that <span class='texttt'><span class='operator'>*</span>x</span> is a valid expression,
that <span class='texttt'><span class='keyword'>typename</span> T<span class='operator'>:</span><span class='operator'>:</span>inner</span> is a valid type, and
that <span class='texttt'><span class='operator'>*</span>x</span> is implicitly convertible to
<span class='texttt'><span class='keyword'>typename</span> T<span class='operator'>:</span><span class='operator'>:</span>inner</span><a class='hidden_link' href='#compound-2.sentence-3'>.</a></div><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C3 <span class='operator'>=</span>
  <span class='keyword'>requires</span><span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='curlybracket'>{</span>g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span><span class='curlybracket'>}</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
</pre><div id='compound-2.sentence-4' class='sentence'>The <i ><a href='#nt:compound-requirement'>compound-requirement</a></i> in <span class='texttt'>C3</span>
requires that <span class='texttt'>g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span></span> is a valid expression and
that <span class='texttt'>g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span></span> is non-throwing<a class='hidden_link' href='#compound-2.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div><div id='nested' class='section'><h4 ><a class='secnum' href='#nested' style='min-width:118pt'>7.5.7.4</a> Nested requirements <a class='abbr_ref' href='expr.prim.req.nested'>[expr.prim.req.nested]</a></h4><span class='indexparent'><a class='index' id=':requirement,nested'></a></span>
<pre class='bnf'><a class='nontermdef' href='#nt:nested-requirement' id='nt:nested-requirement'>nested-requirement:</a>
&#9;<span class='terminal'><span class='keyword'>requires</span></span> <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i> <span class='terminal'>;</span>
</pre><div class='para' id='nested-1'><div class='marginalizedparent'><a class='marginalized' href='#nested-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be83c0b472b3912df2ba63bb2831f2a7798badd3/source/expressions.tex#L2739'>#</a></div><div id='nested-1.sentence-1' class='sentence'>A <i ><a href='#nt:nested-requirement'>nested-requirement</a></i> can be used
to specify additional constraints in terms of local parameters<a class='hidden_link' href='#nested-1.sentence-1'>.</a></div> <div id='nested-1.sentence-2' class='sentence'>The <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i>
shall be satisfied (<a href='temp.constr.decl'>[temp.constr.decl]</a>)
by the substituted template arguments, if any<a class='hidden_link' href='#nested-1.sentence-2'>.</a></div> <div id='nested-1.sentence-3' class='sentence'>Substitution of template arguments into a <i ><a href='#nt:nested-requirement'>nested-requirement</a></i>
does not result in substitution into the <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i>
other than as specified in <a href='temp.constr.decl'>[temp.constr.decl]</a><a class='hidden_link' href='#nested-1.sentence-3'>.</a></div> <div id='nested-1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#nested-1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='nested-1.sentence-4' class='sentence'><pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>U<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> D <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span> <span class='parenthesis'>(</span><span class='operator'>+</span>t<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>;
</pre>
<span class='texttt'>D<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is satisfied if <span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>decltype</span> <span class='parenthesis'>(</span><span class='operator'>+</span>t<span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span></span> (<a href='temp.constr.atomic'>[temp.constr.atomic]</a>)<a class='hidden_link' href='#nested-1.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='nested-2'><div class='marginalizedparent'><a class='marginalized' href='#nested-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/be83c0b472b3912df2ba63bb2831f2a7798badd3/source/expressions.tex#L2759'>#</a></div><div id='nested-2.sentence-1' class='sentence'>A local parameter shall only appear as an <a href='expr.prop#def:unevaluated_operand'>unevaluated operand</a>
within the <i ><a href='temp.constr.decl#nt:constraint-expression'>constraint-expression</a></i><a class='hidden_link' href='#nested-2.sentence-1'>.</a></div> <div id='nested-2.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#nested-2.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>requires</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>4</span>;  <span class='comment' style='font-style:italic;font-family:serif;'>// OK</span>
  <span class='keyword'>requires</span> a <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>0</span>;          <span class='comment' style='font-style:italic;font-family:serif;'>// error: evaluation of a constraint variable</span>
<span class='curlybracket'>}</span>
</pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  
</div></div></div></body></html>