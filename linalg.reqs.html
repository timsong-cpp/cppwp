<!DOCTYPE html><html lang='en'><head><title>[linalg.reqs]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>28</a> Numerics library <a class='abbr_ref' href='./#numerics'>[numerics]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>28.9</a> Basic linear algebra algorithms <a class='abbr_ref' href='linalg#reqs'>[linalg]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>28.9.4</a> Requirements <a class='abbr_ref'>[linalg.reqs]</a></h3><div id='val' class='section'><h4 ><a class='secnum' href='#val' style='min-width:95pt'>28.9.4.1</a> Linear algebra value types <a class='abbr_ref' href='linalg.reqs.val'>[linalg.reqs.val]</a></h4><div class='para' id='val-1'><div class='marginalizedparent'><a class='marginalized' href='#val-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/numerics.tex#L11706'>#</a></div><div class='texpara'><div id='val-1.sentence-1' class='sentence'>Throughout <a href='linalg' title='28.9&emsp;Basic linear algebra algorithms'>[linalg]</a>,
the following types are
<a class='hidden_link' href='#def:linear_algebra_value_types,linear_algebra' title='28.9.4.1&emsp;Linear algebra value types&emsp;[linalg.reqs.val]'><span id='def:linear_algebra_value_types,linear_algebra'><i >linear algebra value type</i></span></a>:
<ul class='itemize'><li id='val-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#val-1.1'>(1.1)</a></div>the <span class='texttt'>value_<span class='shy'></span>type</span> type alias of
any input or output <span class='texttt'>mdspan</span> parameter(s) of
any function in <a href='linalg' title='28.9&emsp;Basic linear algebra algorithms'>[linalg]</a>; and</li><li id='val-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#val-1.2'>(1.2)</a></div>the <span class='texttt'>Scalar</span> template parameter (if any) of
any function or class in <a href='linalg' title='28.9&emsp;Basic linear algebra algorithms'>[linalg]</a><a class='hidden_link' href='#val-1.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='val-2'><div class='marginalizedparent'><a class='marginalized' href='#val-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/numerics.tex#L11720'>#</a></div><div class='texpara'><div id='val-2.sentence-1' class='sentence'>Linear algebra value types shall model <a href='concepts.object#concept:semiregular' title='18.6&emsp;Object concepts&emsp;[concepts.object]'><span id='conceptref:semiregular'><span class='texttt'>semiregular</span></span></a><a class='hidden_link' href='#val-2.sentence-1'>.</a></div></div></div><div class='para' id='val-3'><div class='marginalizedparent'><a class='marginalized' href='#val-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/numerics.tex#L11723'>#</a></div><div class='texpara'><div id='val-3.sentence-1' class='sentence'>A value-initialized object of linear algebra value type
shall act as the additive identity<a class='hidden_link' href='#val-3.sentence-1'>.</a></div></div></div></div><div id='alg' class='section'><h4 ><a class='secnum' href='#alg' style='min-width:95pt'>28.9.4.2</a> Algorithm and class requirements <a class='abbr_ref' href='linalg.reqs.alg'>[linalg.reqs.alg]</a></h4><div class='para' id='alg-1'><div class='marginalizedparent'><a class='marginalized' href='#alg-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/numerics.tex#L11729'>#</a></div><div class='texpara'><div id='alg-1.sentence-1' class='sentence'><a href='#alg' title='28.9.4.2&emsp;Algorithm and class requirements'>[linalg.<span class='shy'></span>reqs.<span class='shy'></span>alg]</a> lists common requirements for
all algorithms and classes in <a href='linalg' title='28.9&emsp;Basic linear algebra algorithms'>[linalg]</a><a class='hidden_link' href='#alg-1.sentence-1'>.</a></div></div></div><div class='para' id='alg-2'><div class='marginalizedparent'><a class='marginalized' href='#alg-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/numerics.tex#L11733'>#</a></div><div class='texpara'><div id='alg-2.sentence-1' class='sentence'>All of the following statements presume
that the algorithm's asymptotic complexity requirements, if any, are satisfied<a class='hidden_link' href='#alg-2.sentence-1'>.</a></div> <ul class='itemize'><li id='alg-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#alg-2.1'>(2.1)</a></div><div class='texpara'><div id='alg-2.1.sentence-1' class='sentence'>The function may make arbitrarily many objects of any linear algebra value type,
value-initializing or direct-initializing them
with any existing object of that type<a class='hidden_link' href='#alg-2.1.sentence-1'>.</a></div></div></li><li id='alg-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#alg-2.2'>(2.2)</a></div><div class='texpara'><div id='alg-2.2.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:triangular_solve_algorithms' id='def:triangular_solve_algorithms'><i>triangular solve algorithms</i></a> in
<a href='linalg.algs.blas2.trsv' title='28.9.14.5&emsp;Solve a triangular linear system'>[linalg.<span class='shy'></span>algs.<span class='shy'></span>blas2.<span class='shy'></span>trsv]</a>,
<a href='linalg.algs.blas3.trmm' title='28.9.15.3&emsp;In-place triangular matrix-matrix product'>[linalg.<span class='shy'></span>algs.<span class='shy'></span>blas3.<span class='shy'></span>trmm]</a>,
<a href='linalg.algs.blas3.trsm' title='28.9.15.6&emsp;Solve multiple triangular linear systems'>[linalg.<span class='shy'></span>algs.<span class='shy'></span>blas3.<span class='shy'></span>trsm]</a>, and
<a href='linalg.algs.blas3.inplacetrsm' title='28.9.15.7&emsp;Solve multiple triangular linear systems in-place'>[linalg.<span class='shy'></span>algs.<span class='shy'></span>blas3.<span class='shy'></span>inplacetrsm]</a>
either have
a <span class='texttt'>BinaryDivideOp</span> template parameter (see <a href='linalg.algs.reqs' title='28.9.12&emsp;Algorithm requirements based on template parameter name'>[linalg.<span class='shy'></span>algs.<span class='shy'></span>reqs]</a>) and
a binary function object parameter <span class='texttt'>divide</span> of that type,
or they have effects equivalent to invoking such an algorithm<a class='hidden_link' href='#alg-2.2.sentence-1'>.</a></div> <div id='alg-2.2.sentence-2' class='sentence'>Triangular solve algorithms interpret <span class='texttt'>divide<span class='parenthesis'>(</span>a, b<span class='parenthesis'>)</span></span> as
<span class='texttt'>a</span> times the multiplicative inverse of <span class='texttt'>b</span><a class='hidden_link' href='#alg-2.2.sentence-2'>.</a></div> <div id='alg-2.2.sentence-3' class='sentence'>Each triangular solve algorithm uses a sequence of evaluations of
<span class='texttt'><span class='operator'>*</span></span>, <span class='texttt'><span class='operator'>*</span><span class='operator'>=</span></span>, <span class='texttt'>divide</span>,
unary <span class='texttt'><span class='operator'>+</span></span>, binary <span class='texttt'><span class='operator'>+</span></span>, <span class='texttt'><span class='operator'>+</span><span class='operator'>=</span></span>,
unary <span class='texttt'><span class='operator'>-</span></span>, binary <span class='texttt'><span class='operator'>-</span></span>, <span class='texttt'><span class='operator'>-</span><span class='operator'>=</span></span>,
and <span class='texttt'><span class='operator'>=</span></span> operators
that would produce the result
specified by the algorithm's <i >Effects</i> and <i >Remarks</i>
when operating on elements of a field with noncommutative multiplication<a class='hidden_link' href='#alg-2.2.sentence-3'>.</a></div> <div id='alg-2.2.sentence-4' class='sentence'>It is a precondition of the algorithm that
any addend,
any subtrahend,
any partial sum of addends in any order
(treating any difference as a sum with the second term negated),
any factor,
any partial product of factors respecting their order,
any numerator (first argument of <span class='texttt'>divide</span>),
any denominator (second argument of <span class='texttt'>divide</span>),
and any assignment
is a well-formed expression<a class='hidden_link' href='#alg-2.2.sentence-4'>.</a></div></div></li><li id='alg-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#alg-2.3'>(2.3)</a></div><div class='texpara'><div id='alg-2.3.sentence-1' class='sentence'>Each function in
<a href='linalg.algs.blas1' title='28.9.13&emsp;BLAS 1 algorithms'>[linalg.<span class='shy'></span>algs.<span class='shy'></span>blas1]</a>, <a href='linalg.algs.blas2' title='28.9.14&emsp;BLAS 2 algorithms'>[linalg.<span class='shy'></span>algs.<span class='shy'></span>blas2]</a>, and <a href='linalg.algs.blas3' title='28.9.15&emsp;BLAS 3 algorithms'>[linalg.<span class='shy'></span>algs.<span class='shy'></span>blas3]</a>
that is not a triangular solve algorithm
will use a sequence of evaluations of
<span class='texttt'><span class='operator'>*</span></span>, <span class='texttt'><span class='operator'>*</span><span class='operator'>=</span></span>, <span class='texttt'><span class='operator'>+</span></span>, <span class='texttt'><span class='operator'>+</span><span class='operator'>=</span></span>, and <span class='texttt'><span class='operator'>=</span></span> operators
that would produce the result
specified by the algorithm's <i >Effects</i> and <i >Remarks</i>
when operating on elements of a semiring with noncommutative multiplication<a class='hidden_link' href='#alg-2.3.sentence-1'>.</a></div> <div id='alg-2.3.sentence-2' class='sentence'>It is a precondition of the algorithm that
any addend,
any partial sum of addends in any order,
any factor,
any partial product of factors respecting their order,
and any assignment
is a well-formed expression<a class='hidden_link' href='#alg-2.3.sentence-2'>.</a></div></div></li><li id='alg-2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#alg-2.4'>(2.4)</a></div><div class='texpara'><div id='alg-2.4.sentence-1' class='sentence'>If the function has an output <span class='texttt'>mdspan</span>,
then all addends,
subtrahends (for the triangular solve algorithms),
or results of the <span class='texttt'>divide</span> parameter on intermediate terms
(if the function takes a <span class='texttt'>divide</span> parameter)
are assignable and convertible to
the output <span class='texttt'>mdspan</span>'s <span class='texttt'>value_<span class='shy'></span>type</span><a class='hidden_link' href='#alg-2.4.sentence-1'>.</a></div></div></li><li id='alg-2.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#alg-2.5'>(2.5)</a></div><div class='texpara'><div id='alg-2.5.sentence-1' class='sentence'>The function may reorder addends and partial sums arbitrarily<a class='hidden_link' href='#alg-2.5.sentence-1'>.</a></div> <div id='alg-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#alg-note-1'>1</a></i>:&ensp;<div id='alg-2.5.sentence-2' class='sentence'>Factors in each product are not reordered;
multiplication is not necessarily commutative<a class='hidden_link' href='#alg-2.5.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li></ul> <div id='alg-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#alg-note-2'>2</a></i>:&ensp;<div id='alg-2.sentence-2' class='sentence'>The above requirements do not prohibit
implementation approaches and optimization techniques
which are not user-observable<a class='hidden_link' href='#alg-2.sentence-2'>.</a></div> <div id='alg-2.sentence-3' class='sentence'>In particular, if for all input and output arguments
the <span class='texttt'>value_<span class='shy'></span>type</span> is a floating-point type,
implementers are free to leverage approximations,
use arithmetic operations not explicitly listed above, and
compute floating point sums in any way that improves their accuracy<a class='hidden_link' href='#alg-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='alg-3'><div class='marginalizedparent'><a class='marginalized' href='#alg-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/numerics.tex#L11814'>#</a></div><div class='texpara'><div id='alg-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#alg-note-3'>3</a></i>:&ensp;<div id='alg-3.sentence-1' class='sentence'>For all functions in <a href='linalg' title='28.9&emsp;Basic linear algebra algorithms'>[linalg]</a>,
suppose that all input and output <span class='texttt'>mdspan</span> have as <span class='texttt'>value_<span class='shy'></span>type</span>
a floating-point type, and
any <span class='texttt'>Scalar</span> template argument has a floating-point type<a class='hidden_link' href='#alg-3.sentence-1'>.</a></div> <div id='alg-3.sentence-2' class='sentence'>Then, functions can do all of the following:
<ul class='itemize'><li id='alg-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#alg-3.1'>(3.1)</a></div>compute floating-point sums in any way
that improves their accuracy for arbitrary input;</li><li id='alg-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#alg-3.2'>(3.2)</a></div>perform additional arithmetic operations
(other than those specified by the function's wording and <a href='#alg' title='28.9.4.2&emsp;Algorithm and class requirements'>[linalg.<span class='shy'></span>reqs.<span class='shy'></span>alg]</a>)
in order to improve performance or accuracy; and</li><li id='alg-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#alg-3.3'>(3.3)</a></div>use approximations
(that might not be exact even if computing with real numbers),
instead of computations that would be exact
if it were possible to compute without rounding error;</li></ul>
as long as
<ul class='itemize'><li id='alg-3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#alg-3.4'>(3.4)</a></div>the function satisfies the complexity requirements; and</li><li id='alg-3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#alg-3.5'>(3.5)</a></div>the function is logarithmically stable,
as defined in Demmel 2007<span class='textsuperscript'><a href='bibliography#bib:linalg-stable' title='Bibliography'>[bib]</a></span><a class='hidden_link' href='#alg-3.sentence-2'>.</a> <div class='texpara'><div id='alg-3.5.sentence-2' class='sentence'>Strassen's algorithm for matrix-matrix multiply
is an example of a logarithmically stable algorithm<a class='hidden_link' href='#alg-3.5.sentence-2'>.</a></div></div></li></ul></div> —&nbsp;<i>end note</i>]</div></div></div></div></div></div></body></html>