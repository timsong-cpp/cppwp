<!DOCTYPE html><html lang='en'><head><title>[thread.lock.unique]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>30</a> Thread support library <a class='abbr_ref' href='./#thread'>[thread]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>30.4</a> Mutual exclusion <a class='abbr_ref' href='thread.mutex#thread.lock.unique'>[thread.mutex]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>30.4.4</a> Locks <a class='abbr_ref' href='thread.lock#unique'>[thread.lock]</a></h3><div id='thread.lock.unique'><h4 ><a class='secnum' style='min-width:118pt'>30.4.4.2</a> Class template <span class='texttt'>unique_lock</span> <a class='abbr_ref'>[thread.lock.unique]</a></h4><p ><span class='indexparent'><a class='index' id='unique_lock'></a></span></p><pre class='codeblock'>
namespace std {
  template &lt;class Mutex&gt;
  class unique_lock {
  public:
    using mutex_type = Mutex;

    <span class='comment'>// <a href='thread.lock.unique.cons'>[thread.lock.unique.cons]</a>, construct/copy/destroy
</span>    unique_lock() noexcept;
    explicit unique_lock(mutex_type&amp; m);
    unique_lock(mutex_type&amp; m, defer_lock_t) noexcept;
    unique_lock(mutex_type&amp; m, try_to_lock_t);
    unique_lock(mutex_type&amp; m, adopt_lock_t);
    template &lt;class Clock, class Duration&gt;
      unique_lock(mutex_type&amp; m, const chrono::time_point&lt;Clock, Duration&gt;&amp; abs_time);
    template &lt;class Rep, class Period&gt;
      unique_lock(mutex_type&amp; m, const chrono::duration&lt;Rep, Period&gt;&amp; rel_time);
    ~unique_lock();

    unique_lock(const unique_lock&amp;) = delete;
    unique_lock&amp; operator=(const unique_lock&amp;) = delete;

    unique_lock(unique_lock&amp;&amp; u) noexcept;
    unique_lock&amp; operator=(unique_lock&amp;&amp; u);

    <span class='comment'>// <a href='thread.lock.unique.locking'>[thread.lock.unique.locking]</a>, locking
</span>    void lock();
    bool try_lock();

    template &lt;class Rep, class Period&gt;
      bool try_lock_for(const chrono::duration&lt;Rep, Period&gt;&amp; rel_time);
    template &lt;class Clock, class Duration&gt;
      bool try_lock_until(const chrono::time_point&lt;Clock, Duration&gt;&amp; abs_time);

    void unlock();

    <span class='comment'>// <a href='thread.lock.unique.mod'>[thread.lock.unique.mod]</a>, modifiers
</span>    void swap(unique_lock&amp; u) noexcept;
    mutex_type* release() noexcept;

    <span class='comment'>// <a href='thread.lock.unique.obs'>[thread.lock.unique.obs]</a>, observers
</span>    bool owns_lock() const noexcept;
    explicit operator bool () const noexcept;
    mutex_type* mutex() const noexcept;

  private:
    mutex_type* pm; <span class='comment'>// <i>exposition only</i>
</span>    bool owns;      <span class='comment'>// <i>exposition only</i>
</span>  };

  template &lt;class Mutex&gt;
    void swap(unique_lock&lt;Mutex&gt;&amp; x, unique_lock&lt;Mutex&gt;&amp; y) noexcept;
}</pre><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1779'>#</a></div><p >An object of type <span class='texttt'>unique_lock</span> controls the ownership of a lockable
object within a scope. Ownership of the lockable object may be acquired at
construction or after construction, and may be transferred, after
acquisition, to another <span class='texttt'>unique_lock</span> object. Objects of type <span class='texttt'>unique_lock</span> are not
copyable but are movable. The behavior of a program is undefined if the contained pointer
<span class='texttt'>pm</span> is not null and the lockable object pointed
to by <span class='texttt'>pm</span> does not exist for the entire remaining
lifetime (<a href='basic.life'>[basic.life]</a>) of the <span class='texttt'>unique_lock</span> object. The supplied
<span class='texttt'>Mutex</span> type shall meet the <span class='texttt'>BasicLockable</span>
requirements (<a href='thread.req.lockable.basic'>[thread.req.lockable.basic]</a>).</p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1791'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><i>Note:</i> <span class='texttt'>unique_lock&lt;Mutex&gt;</span> meets the <span class='texttt'>BasicLockable</span> requirements. If <span class='texttt'>Mutex</span>
meets the <span class='texttt'>Lockable</span> requirements (<a href='thread.req.lockable.req'>[thread.req.lockable.req]</a>),
<span class='texttt'>unique_lock&lt;Mutex&gt;</span> also meets the <span class='texttt'>Lockable</span> requirements;
if <span class='texttt'>Mutex</span>
meets the <span class='texttt'>TimedLockable</span> requirements (<a href='thread.req.lockable.timed'>[thread.req.lockable.timed]</a>),
<span class='texttt'>unique_lock&lt;Mutex&gt;</span> also meets the <span class='texttt'>TimedLockable</span> requirements. <i><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</i><span style='white-space:nowrap'>&thinsp;</span>]</p></div><div id='cons'><h4 ><a class='secnum' href='#cons' style='min-width:133pt'>30.4.4.2.1</a> <span class='texttt'>unique_lock</span> constructors, destructor, and assignment <a class='abbr_ref' href='thread.lock.unique.cons'>[thread.lock.unique.cons]</a></h4><p ><span class='indexparent'><a class='index' id='unique_lock,constructor'></a></span><code class='itemdecl'>
unique_lock() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='cons-1'><div class='marginalizedparent'><a class='marginalized' href='#cons-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1807'>#</a></div><p ><i>Effects:</i> Constructs an object of type <span class='texttt'>unique_lock</span>.</p></div></div><div class='para' id='cons-2'><div class='marginalizedparent'><a class='marginalized' href='#cons-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1810'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>pm == 0</span> and <span class='texttt'>owns == false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='unique_lock,constructor'></a></span><code class='itemdecl'>
explicit unique_lock(mutex_type&amp; m);
</code></p><div class='itemdescr'></div><div class='para' id='cons-3'><div class='marginalizedparent'><a class='marginalized' href='#cons-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1820'>#</a></div><p ><i>Requires:</i> If <span class='texttt'>mutex_type</span> is not a recursive mutex the calling thread does not own the mutex.</p></div></div><div class='para' id='cons-4'><div class='marginalizedparent'><a class='marginalized' href='#cons-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1823'>#</a></div><p ><i>Effects:</i> Constructs an object of type <span class='texttt'>unique_lock</span> and calls <span class='texttt'>m.lock()</span>.</p></div></div><div class='para' id='cons-5'><div class='marginalizedparent'><a class='marginalized' href='#cons-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1826'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>pm == addressof(m)</span> and <span class='texttt'>owns == true</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='unique_lock,constructor'></a></span><code class='itemdecl'>
unique_lock(mutex_type&amp; m, defer_lock_t) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='cons-6'><div class='marginalizedparent'><a class='marginalized' href='#cons-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1836'>#</a></div><p ><i>Effects:</i> Constructs an object of type <span class='texttt'>unique_lock</span>.</p></div></div><div class='para' id='cons-7'><div class='marginalizedparent'><a class='marginalized' href='#cons-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1839'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>pm == addressof(m)</span> and <span class='texttt'>owns == false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='unique_lock,constructor'></a></span><code class='itemdecl'>
unique_lock(mutex_type&amp; m, try_to_lock_t);
</code></p><div class='itemdescr'></div><div class='para' id='cons-8'><div class='marginalizedparent'><a class='marginalized' href='#cons-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1849'>#</a></div><p ><i>Requires:</i>
The supplied <span class='texttt'>Mutex</span> type shall meet the <span class='texttt'>Lockable</span>
requirements (<a href='thread.req.lockable.req'>[thread.req.lockable.req]</a>).
If <span class='texttt'>mutex_type</span> is not a recursive mutex the calling thread does not own the mutex.</p></div></div><div class='para' id='cons-9'><div class='marginalizedparent'><a class='marginalized' href='#cons-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1855'>#</a></div><p ><i>Effects:</i> Constructs an object of type <span class='texttt'>unique_lock</span> and calls <span class='texttt'>m.try_lock()</span>.</p></div></div><div class='para' id='cons-10'><div class='marginalizedparent'><a class='marginalized' href='#cons-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1858'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>pm == addressof(m)</span> and <span class='texttt'>owns == res</span>,
where <span class='texttt'>res</span> is the value returned by the call to <span class='texttt'>m.try_lock()</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='unique_lock,constructor'></a></span><code class='itemdecl'>
unique_lock(mutex_type&amp; m, adopt_lock_t);
</code></p><div class='itemdescr'></div><div class='para' id='cons-11'><div class='marginalizedparent'><a class='marginalized' href='#cons-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1869'>#</a></div><p ><i>Requires:</i> The calling thread owns the mutex.</p></div></div><div class='para' id='cons-12'><div class='marginalizedparent'><a class='marginalized' href='#cons-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1872'>#</a></div><p ><i>Effects:</i> Constructs an object of type <span class='texttt'>unique_lock</span>.</p></div></div><div class='para' id='cons-13'><div class='marginalizedparent'><a class='marginalized' href='#cons-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1875'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>pm == addressof(m)</span> and <span class='texttt'>owns == true</span>.</p></div></div><div class='para' id='cons-14'><div class='marginalizedparent'><a class='marginalized' href='#cons-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1878'>#</a></div><p ><i>Throws:</i> Nothing.
</p></div></div><p ><span class='indexparent'><a class='index' id='unique_lock,constructor'></a></span><code class='itemdecl'>
template &lt;class Clock, class Duration&gt;
  unique_lock(mutex_type&amp; m, const chrono::time_point&lt;Clock, Duration&gt;&amp; abs_time);
</code></p><div class='itemdescr'></div><div class='para' id='cons-15'><div class='marginalizedparent'><a class='marginalized' href='#cons-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1889'>#</a></div><p ><i>Requires:</i> If <span class='texttt'>mutex_type</span> is not a recursive mutex the calling thread
does not own the mutex. The supplied <span class='texttt'>Mutex</span> type shall meet the
<span class='texttt'>TimedLockable</span> requirements (<a href='thread.req.lockable.timed'>[thread.req.lockable.timed]</a>).</p></div></div><div class='para' id='cons-16'><div class='marginalizedparent'><a class='marginalized' href='#cons-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1894'>#</a></div><p ><i>Effects:</i> Constructs an object of type <span class='texttt'>unique_lock</span> and calls <span class='texttt'>m.try_lock_until(abs_time)</span>.</p></div></div><div class='para' id='cons-17'><div class='marginalizedparent'><a class='marginalized' href='#cons-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1897'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>pm == addressof(m)</span> and <span class='texttt'>owns == res</span>,
where <span class='texttt'>res</span> is
the value returned by the call to <span class='texttt'>m.try_lock_until(abs_time)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='unique_lock,constructor'></a></span><code class='itemdecl'>
template &lt;class Rep, class Period&gt;
  unique_lock(mutex_type&amp; m, const chrono::duration&lt;Rep, Period&gt;&amp; rel_time);
</code></p><div class='itemdescr'></div><div class='para' id='cons-18'><div class='marginalizedparent'><a class='marginalized' href='#cons-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1910'>#</a></div><p ><i>Requires:</i> If <span class='texttt'>mutex_type</span> is not a recursive mutex the calling thread does not own the mutex.
The supplied <span class='texttt'>Mutex</span> type shall meet the <span class='texttt'>TimedLockable</span> requirements (<a href='thread.req.lockable.timed'>[thread.req.lockable.timed]</a>).</p></div></div><div class='para' id='cons-19'><div class='marginalizedparent'><a class='marginalized' href='#cons-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1914'>#</a></div><p ><i>Effects:</i> Constructs an object of type <span class='texttt'>unique_lock</span> and calls <span class='texttt'>m.try_lock_for(rel_time)</span>.</p></div></div><div class='para' id='cons-20'><div class='marginalizedparent'><a class='marginalized' href='#cons-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1917'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>pm == addressof(m)</span> and <span class='texttt'>owns == res</span>,
where <span class='texttt'>res</span> is the value returned by the call to <span class='texttt'>m.try_lock_for(rel_time)</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='unique_lock,constructor'></a></span><code class='itemdecl'>
unique_lock(unique_lock&amp;&amp; u) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='cons-21'><div class='marginalizedparent'><a class='marginalized' href='#cons-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1928'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>pm == u_p.pm</span> and <span class='texttt'>owns == u_p.owns</span> (where <span class='texttt'>u_p</span> is the state of <span class='texttt'>u</span> just prior to this construction),  <span class='texttt'>u.pm == 0</span> and <span class='texttt'>u.owns == false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator=,unique_lock'></a></span><span class='indexparent'><a class='index' id='unique_lock,operator='></a></span><code class='itemdecl'>
unique_lock&amp; operator=(unique_lock&amp;&amp; u);
</code></p><div class='itemdescr'></div><div class='para' id='cons-22'><div class='marginalizedparent'><a class='marginalized' href='#cons-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1937'>#</a></div><p ><i>Effects:</i> If <span class='texttt'>owns</span> calls <span class='texttt'>pm-&gt;unlock()</span>.</p></div></div><div class='para' id='cons-23'><div class='marginalizedparent'><a class='marginalized' href='#cons-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1939'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>pm == u_p.pm</span> and <span class='texttt'>owns == u_p.owns</span> (where <span class='texttt'>u_p</span> is the state of <span class='texttt'>u</span> just prior to this construction),  <span class='texttt'>u.pm == 0</span> and <span class='texttt'>u.owns == false</span>.</p></div></div><div class='para' id='cons-24'><div class='marginalizedparent'><a class='marginalized' href='#cons-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1941'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><i>Note:</i> With a recursive mutex it is possible for both <span class='texttt'>*this</span> and <span class='texttt'>u</span> to own the same mutex before the assignment. In this case, <span class='texttt'>*this</span> will own the mutex after the assignment and <span class='texttt'>u</span> will not. <i><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</i><span style='white-space:nowrap'>&thinsp;</span>]</p></div></div><div class='para' id='cons-25'><div class='marginalizedparent'><a class='marginalized' href='#cons-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1944'>#</a></div><p ><i>Throws:</i> Nothing.
</p></div></div><p ><span class='indexparent'><a class='index' id='unique_lock,destructor'></a></span><code class='itemdecl'>
~unique_lock();
</code></p><div class='itemdescr'></div><div class='para' id='cons-26'><div class='marginalizedparent'><a class='marginalized' href='#cons-26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1954'>#</a></div><p ><i>Effects:</i> If <span class='texttt'>owns</span> calls <span class='texttt'>pm-&gt;unlock()</span>.
</p></div></div></div><div id='locking'><h4 ><a class='secnum' href='#locking' style='min-width:133pt'>30.4.4.2.2</a> <span class='texttt'>unique_lock</span> locking <a class='abbr_ref' href='thread.lock.unique.locking'>[thread.lock.unique.locking]</a></h4><p ><span class='indexparent'><a class='index' id='lock,unique_lock'></a></span><span class='indexparent'><a class='index' id='unique_lock,lock'></a></span><code class='itemdecl'>
void lock();
</code></p><div class='itemdescr'></div><div class='para' id='locking-1'><div class='marginalizedparent'><a class='marginalized' href='#locking-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1965'>#</a></div><p ><i>Effects:</i> As if by <span class='texttt'>pm-&gt;lock()</span>.</p></div></div><div class='para' id='locking-2'><div class='marginalizedparent'><a class='marginalized' href='#locking-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1968'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>owns == true</span>.</p></div></div><div class='para' id='locking-3'><div class='marginalizedparent'><a class='marginalized' href='#locking-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1971'>#</a></div><p ><i>Throws:</i>
Any exception thrown by <span class='texttt'>pm-&gt;lock()</span>. <span class='texttt'>system_error</span> when an exception
is required (<a href='thread.req.exception'>[thread.req.exception]</a>).</p></div></div><div class='para' id='locking-4'><div class='marginalizedparent'><a class='marginalized' href='#locking-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1976'>#</a></div><p ><i>Error conditions:</i>
</p><ul class='itemize'><li id='locking-4.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#locking-4.1'>(4.1)</a></div><p ><span class='texttt'>operation_not_permitted</span> — if <span class='texttt'>pm</span> is <span class='texttt'>nullptr</span>.
</p></li><li id='locking-4.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#locking-4.2'>(4.2)</a></div><p ><span class='texttt'>resource_deadlock_would_occur</span> — if on entry <span class='texttt'>owns</span>
is <span class='texttt'>true</span>.
</p></li></ul></div></div><p ><span class='indexparent'><a class='index' id='try_lock,unique_lock'></a></span><span class='indexparent'><a class='index' id='unique_lock,try_lock'></a></span><code class='itemdecl'>
bool try_lock();
</code></p><div class='itemdescr'></div><div class='para' id='locking-5'><div class='marginalizedparent'><a class='marginalized' href='#locking-5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1991'>#</a></div><p ><i>Requires:</i> The supplied <span class='texttt'>Mutex</span> shall meet the <span class='texttt'>Lockable</span>
requirements (<a href='thread.req.lockable.req'>[thread.req.lockable.req]</a>).</p></div></div><div class='para' id='locking-6'><div class='marginalizedparent'><a class='marginalized' href='#locking-6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1995'>#</a></div><p ><i>Effects:</i> As if by <span class='texttt'>pm-&gt;try_lock()</span>.</p></div></div><div class='para' id='locking-7'><div class='marginalizedparent'><a class='marginalized' href='#locking-7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L1998'>#</a></div><p ><i>Returns:</i> The value returned by the call to <span class='texttt'>try_lock()</span>.</p></div></div><div class='para' id='locking-8'><div class='marginalizedparent'><a class='marginalized' href='#locking-8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2000'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>owns == res</span>, where <span class='texttt'>res</span> is the value returned by
the call to <span class='texttt'>try_lock()</span>.</p></div></div><div class='para' id='locking-9'><div class='marginalizedparent'><a class='marginalized' href='#locking-9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2004'>#</a></div><p ><i>Throws:</i>
Any exception thrown by <span class='texttt'>pm-&gt;try_lock()</span>. <span class='texttt'>system_error</span> when an exception
is required (<a href='thread.req.exception'>[thread.req.exception]</a>).</p></div></div><div class='para' id='locking-10'><div class='marginalizedparent'><a class='marginalized' href='#locking-10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2009'>#</a></div><p ><i>Error conditions:</i>
</p><ul class='itemize'><li id='locking-10.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#locking-10.1'>(10.1)</a></div><p ><span class='texttt'>operation_not_permitted</span> — if <span class='texttt'>pm</span> is <span class='texttt'>nullptr</span>.
</p></li><li id='locking-10.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#locking-10.2'>(10.2)</a></div><p ><span class='texttt'>resource_deadlock_would_occur</span> — if on entry <span class='texttt'>owns</span>
is <span class='texttt'>true</span>.
</p></li></ul></div></div><p ><span class='indexparent'><a class='index' id='try_lock_until,unique_lock'></a></span><span class='indexparent'><a class='index' id='unique_lock,try_lock_until'></a></span><code class='itemdecl'>
template &lt;class Clock, class Duration&gt;
  bool try_lock_until(const chrono::time_point&lt;Clock, Duration&gt;&amp; abs_time);
</code></p><div class='itemdescr'></div><div class='para' id='locking-11'><div class='marginalizedparent'><a class='marginalized' href='#locking-11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2025'>#</a></div><p ><i>Requires:</i> The supplied <span class='texttt'>Mutex</span> type shall meet the <span class='texttt'>TimedLockable</span>
requirements (<a href='thread.req.lockable.timed'>[thread.req.lockable.timed]</a>).</p></div></div><div class='para' id='locking-12'><div class='marginalizedparent'><a class='marginalized' href='#locking-12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2029'>#</a></div><p ><i>Effects:</i> As if by <span class='texttt'>pm-&gt;try_lock_until(abs_time)</span>.</p></div></div><div class='para' id='locking-13'><div class='marginalizedparent'><a class='marginalized' href='#locking-13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2032'>#</a></div><p ><i>Returns:</i> The value returned by the call to <span class='texttt'>try_lock_until(abs_time)</span>.</p></div></div><div class='para' id='locking-14'><div class='marginalizedparent'><a class='marginalized' href='#locking-14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2035'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>owns == res</span>, where <span class='texttt'>res</span> is the value returned by
the call to <span class='texttt'>try_lock_until(abs_time)</span>.</p></div></div><div class='para' id='locking-15'><div class='marginalizedparent'><a class='marginalized' href='#locking-15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2039'>#</a></div><p ><i>Throws:</i> Any exception thrown by <span class='texttt'>pm-&gt;try_lock_until()</span>. <span class='texttt'>system_error</span> when an
exception is required (<a href='thread.req.exception'>[thread.req.exception]</a>). </p></div></div><div class='para' id='locking-16'><div class='marginalizedparent'><a class='marginalized' href='#locking-16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2043'>#</a></div><p ><i>Error conditions:</i>
</p><ul class='itemize'><li id='locking-16.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#locking-16.1'>(16.1)</a></div><p ><span class='texttt'>operation_not_permitted</span> — if <span class='texttt'>pm</span> is <span class='texttt'>nullptr</span>.
</p></li><li id='locking-16.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#locking-16.2'>(16.2)</a></div><p ><span class='texttt'>resource_deadlock_would_occur</span> — if on entry <span class='texttt'>owns</span> is
<span class='texttt'>true</span>.
</p></li></ul></div></div><p ><span class='indexparent'><a class='index' id='try_lock_for,unique_lock'></a></span><span class='indexparent'><a class='index' id='unique_lock,try_lock_for'></a></span><code class='itemdecl'>
template &lt;class Rep, class Period&gt;
  bool try_lock_for(const chrono::duration&lt;Rep, Period&gt;&amp; rel_time);
</code></p><div class='itemdescr'></div><div class='para' id='locking-17'><div class='marginalizedparent'><a class='marginalized' href='#locking-17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2059'>#</a></div><p ><i>Requires:</i> The supplied <span class='texttt'>Mutex</span> type shall meet the <span class='texttt'>TimedLockable</span> requirements (<a href='thread.req.lockable.timed'>[thread.req.lockable.timed]</a>).</p></div></div><div class='para' id='locking-18'><div class='marginalizedparent'><a class='marginalized' href='#locking-18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2062'>#</a></div><p ><i>Effects:</i> As if by <span class='texttt'>pm-&gt;try_lock_for(rel_time)</span>.</p></div></div><div class='para' id='locking-19'><div class='marginalizedparent'><a class='marginalized' href='#locking-19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2065'>#</a></div><p ><i>Returns:</i> The value returned by the call to <span class='texttt'>try_lock_until(rel_time)</span>.</p></div></div><div class='para' id='locking-20'><div class='marginalizedparent'><a class='marginalized' href='#locking-20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2068'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>owns == res</span>, where <span class='texttt'>res</span> is the value returned by the call to <span class='texttt'>try_lock_for(rel_time)</span>.</p></div></div><div class='para' id='locking-21'><div class='marginalizedparent'><a class='marginalized' href='#locking-21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2071'>#</a></div><p ><i>Throws:</i> Any exception thrown by <span class='texttt'>pm-&gt;try_lock_for()</span>. <span class='texttt'>system_error</span> when an
exception is required (<a href='thread.req.exception'>[thread.req.exception]</a>).</p></div></div><div class='para' id='locking-22'><div class='marginalizedparent'><a class='marginalized' href='#locking-22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2075'>#</a></div><p ><i>Error conditions:</i>
</p><ul class='itemize'><li id='locking-22.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#locking-22.1'>(22.1)</a></div><p ><span class='texttt'>operation_not_permitted</span> — if <span class='texttt'>pm</span> is <span class='texttt'>nullptr</span>.
</p></li><li id='locking-22.2'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#locking-22.2'>(22.2)</a></div><p ><span class='texttt'>resource_deadlock_would_occur</span> — if on entry <span class='texttt'>owns</span> is
<span class='texttt'>true</span>.
</p></li></ul></div></div><p ><span class='indexparent'><a class='index' id='unlock,unique_lock'></a></span><span class='indexparent'><a class='index' id='unique_lock,unlock'></a></span><code class='itemdecl'>
void unlock();
</code></p><div class='itemdescr'></div><div class='para' id='locking-23'><div class='marginalizedparent'><a class='marginalized' href='#locking-23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2090'>#</a></div><p ><i>Effects:</i> As if by <span class='texttt'>pm-&gt;unlock()</span>.</p></div></div><div class='para' id='locking-24'><div class='marginalizedparent'><a class='marginalized' href='#locking-24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2092'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>owns == false</span>.</p></div></div><div class='para' id='locking-25'><div class='marginalizedparent'><a class='marginalized' href='#locking-25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2094'>#</a></div><p ><i>Throws:</i> <span class='texttt'>system_error</span> when
an exception is required (<a href='thread.req.exception'>[thread.req.exception]</a>).</p></div></div><div class='para' id='locking-26'><div class='marginalizedparent'><a class='marginalized' href='#locking-26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2097'>#</a></div><p ><i>Error conditions:</i>
</p><ul class='itemize'><li id='locking-26.1'><div class='marginalizedparent' style='left:-10em'><a class='marginalized' href='#locking-26.1'>(26.1)</a></div><p ><span class='texttt'>operation_not_permitted</span> — if on entry <span class='texttt'>owns</span> is <span class='texttt'>false</span>.
</p></li></ul></div></div></div><div id='mod'><h4 ><a class='secnum' href='#mod' style='min-width:133pt'>30.4.4.2.3</a> <span class='texttt'>unique_lock</span> modifiers <a class='abbr_ref' href='thread.lock.unique.mod'>[thread.lock.unique.mod]</a></h4><p ><span class='indexparent'><a class='index' id='swap,unique_lock'></a></span><span class='indexparent'><a class='index' id='unique_lock,swap'></a></span><code class='itemdecl'>
void swap(unique_lock&amp; u) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='mod-1'><div class='marginalizedparent'><a class='marginalized' href='#mod-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2111'>#</a></div><p ><i>Effects:</i> Swaps the data members of <span class='texttt'>*this</span> and <span class='texttt'>u</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='release,unique_lock'></a></span><span class='indexparent'><a class='index' id='unique_lock,release'></a></span><code class='itemdecl'>
mutex_type* release() noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='mod-2'><div class='marginalizedparent'><a class='marginalized' href='#mod-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2120'>#</a></div><p ><i>Returns:</i> The previous value of <span class='texttt'>pm</span>.</p></div></div><div class='para' id='mod-3'><div class='marginalizedparent'><a class='marginalized' href='#mod-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2122'>#</a></div><p ><i>Postconditions:</i> <span class='texttt'>pm == 0</span> and <span class='texttt'>owns == false</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='swap,unique_lock'></a></span><span class='indexparent'><a class='index' id='unique_lock,swap'></a></span><code class='itemdecl'>
template &lt;class Mutex&gt;
  void swap(unique_lock&lt;Mutex&gt;&amp; x, unique_lock&lt;Mutex&gt;&amp; y) noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='mod-4'><div class='marginalizedparent'><a class='marginalized' href='#mod-4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2132'>#</a></div><p ><i>Effects:</i> As if by <span class='texttt'>x.swap(y)</span>.
</p></div></div></div><div id='obs'><h4 ><a class='secnum' href='#obs' style='min-width:133pt'>30.4.4.2.4</a> <span class='texttt'>unique_lock</span> observers <a class='abbr_ref' href='thread.lock.unique.obs'>[thread.lock.unique.obs]</a></h4><p ><span class='indexparent'><a class='index' id='owns_lock,unique_lock'></a></span><span class='indexparent'><a class='index' id='unique_lock,owns_lock'></a></span><code class='itemdecl'>
bool owns_lock() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='obs-1'><div class='marginalizedparent'><a class='marginalized' href='#obs-1'>1</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2143'>#</a></div><p ><i>Returns:</i> <span class='texttt'>owns</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='operator_bool,unique_lock'></a></span><span class='indexparent'><a class='index' id='unique_lock,operator_bool'></a></span><code class='itemdecl'>
explicit operator bool() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='obs-2'><div class='marginalizedparent'><a class='marginalized' href='#obs-2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2152'>#</a></div><p ><i>Returns:</i> <span class='texttt'>owns</span>.
</p></div></div><p ><span class='indexparent'><a class='index' id='mutex,unique_lock'></a></span><span class='indexparent'><a class='index' id='unique_lock,mutex'></a></span><code class='itemdecl'>
mutex_type *mutex() const noexcept;
</code></p><div class='itemdescr'></div><div class='para' id='obs-3'><div class='marginalizedparent'><a class='marginalized' href='#obs-3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8dbc0ac22069c102d3b97e67d31390c4e4c6247a/source/threads.tex#L2161'>#</a></div><p ><i>Returns:</i> <span class='texttt'>pm</span>.
</p></div></div></div></div></div></body></html>