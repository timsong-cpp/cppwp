<!DOCTYPE html><html lang='en'><head><title>[expr.ass]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>7.6</a> Compound expressions <a class='abbr_ref' href='expr.compound#expr.ass'>[expr.compound]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>7.6.19</a> Assignment and compound assignment operators <a class='abbr_ref'>[expr.ass]</a></h3><div class='texpara'><a class='index' id=':expression,assignment_and_compound_assignment'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L7236'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':operator,assignment'></a><a class='index' id=':operator,+='></a><a class='index' id=':operator,-='></a><a class='index' id=':operator,*='></a><a class='index' id=':operator,/='></a><a class='index' id=':operator,%='></a><a class='index' id=':operator,>>='></a><a class='index' id=':operator,<<='></a><a class='index' id=':operator,&amp;='></a><a class='index' id=':operator,^='></a><a class='index' id=':operator,|='></a>The assignment operator (<span class='texttt'><span class='operator'>=</span></span>) and the compound assignment
operators all group right-to-left<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'><a class='index' id=':assignment,and_lvalue'></a>All
require a modifiable lvalue as their left operand; their result is an lvalue
of the type of the left operand, referring to the left operand<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>The result in all cases is a bit-field if
the left operand is a bit-field<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>In all cases, the assignment is
sequenced after the
<a class='index' id=':value_computation'></a>value computation of the right and left operands,
and before the
value computation of the assignment expression<a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>The right operand is sequenced before the left operand<a class='hidden_link' href='#1.sentence-5'>.</a></div> <div id='1.sentence-6' class='sentence'>With
respect to an indeterminately-sequenced function call, the operation of
a compound assignment is a single evaluation<a class='hidden_link' href='#1.sentence-6'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='1.sentence-7' class='sentence'>Therefore, a function call cannot intervene between the
lvalue-to-rvalue conversion and the side effect associated with any
single compound assignment operator<a class='hidden_link' href='#1.sentence-7'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div><div class='texpara'><div class='bnf' id='nt:assignment-expression'>
<a class='hidden_link' href='#nt:assignment-expression' title='7.6.19&emsp;Assignment and compound assignment operators&emsp;[expr.ass]'><span id='nt:assignment-expression'><span id=':assignment-expression'>assignment-expression<span class='textnormal'>:</span></span></span></a><br/><a href='expr.cond#nt:conditional-expression' title='7.6.16&emsp;Conditional operator&emsp;[expr.cond]'><span id='ntref:conditional-expression'><span class='textsf'><i >conditional-expression</i></span></span></a><br/><a href='expr.yield#nt:yield-expression' title='7.6.17&emsp;Yielding a value&emsp;[expr.yield]'><span id='ntref:yield-expression'><span class='textsf'><i >yield-expression</i></span></span></a><br/><a href='expr.throw#nt:throw-expression' title='7.6.18&emsp;Throwing an exception&emsp;[expr.throw]'><span id='ntref:throw-expression'><span class='textsf'><i >throw-expression</i></span></span></a><br/><a href='expr.log.or#nt:logical-or-expression' title='7.6.15&emsp;Logical OR operator&emsp;[expr.log.or]'><span id='ntref:logical-or-expression'><span class='textsf'><i >logical-or-expression</i></span></span></a> <a href='#nt:assignment-operator' title='7.6.19&emsp;Assignment and compound assignment operators&emsp;[expr.ass]'><span id='ntref:assignment-operator'><span class='textsf'><i >assignment-operator</i></span></span></a> <a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause'><span class='textsf'><i >initializer-clause</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:assignment-operator'>
<a class='hidden_link' href='#nt:assignment-operator' title='7.6.19&emsp;Assignment and compound assignment operators&emsp;[expr.ass]'><span id='nt:assignment-operator'><span id=':assignment-operator'>assignment-operator<span class='textnormal'>:</span></span></span></a> <span class='textnormal'>one of</span><br/><span class='terminal'><span class='operator'>=</span>  <span class='operator'>*</span><span class='operator'>=</span>  <span class='operator'>/</span><span class='operator'>=</span>  <span class='operator'>%</span><span class='operator'>=</span>   <span class='operator'>+</span><span class='operator'>=</span>  <span class='operator'>-</span><span class='operator'>=</span>  <span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='operator'>=</span>  <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span>  <span class='operator'>&amp;</span><span class='operator'>=</span>  <span class='operator'>^</span><span class='operator'>=</span>  <span class='operator'>|</span><span class='operator'>=</span></span>
</div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L7284'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>In simple assignment (<span class='texttt'><span class='operator'>=</span></span>), the object referred to by the left operand
is modified (<a href='defns.access' title='3.1&emsp;access'>[defns.<span class='shy'></span>access]</a>)
by replacing its value with the result of the right operand<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L7289'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'><a class='index' id=':assignment,conversion_by'></a>If the right operand is an expression, it is implicitly
<a href='conv' title='7.3&emsp;Standard conversions&emsp;[conv]'>converted</a> to the cv-unqualified type of the left
operand<a class='hidden_link' href='#3.sentence-1'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L7295'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'><a class='index' id=':reference,assignment_to'></a>When the left operand of an assignment operator
is a bit-field that cannot represent the value of the expression, the
resulting value of the bit-field is
<a class='index' id=':value_of_bit-field_that_cannot_represent,assigned_value'></a>implementation-defined<a class='hidden_link' href='#4.sentence-1'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L7302'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>An assignment whose left operand is of
a volatile-qualified type is deprecated (<a href='depr.volatile.type' title='D.4&emsp;Deprecated volatile types'>[depr.<span class='shy'></span>volatile.<span class='shy'></span>type]</a>)
unless the (possibly parenthesized) assignment is a discarded-value expression or
an <a href='expr.context#def:unevaluated_operand' title='7.2.3&emsp;Context dependence&emsp;[expr.context]'>unevaluated operand</a><a class='hidden_link' href='#5.sentence-1'>.</a></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L7308'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>The behavior of an expression of the form <span class='texttt'>E1 <i >op</i><span class='operator'>=</span> E2</span>
is equivalent to <span class='texttt'>E1 <span class='operator'>=</span> E1 <i >op</i> E2</span> except
that <span class='texttt'>E1</span> is evaluated only once<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='6.sentence-2' class='sentence'>The object designated by <span class='texttt'>E1</span> is accessed twice<a class='hidden_link' href='#6.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div> <div id='6.sentence-3' class='sentence'>
For <span class='texttt'><span class='operator'>+</span><span class='operator'>=</span></span> and <span class='texttt'><span class='operator'>-</span><span class='operator'>=</span></span>,
<span class='texttt'>E1</span> shall either have arithmetic type or be a pointer to a
possibly cv-qualified completely-defined object type<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='6.sentence-4' class='sentence'>In all other
cases, <span class='texttt'>E1</span> shall have arithmetic type<a class='hidden_link' href='#6.sentence-4'>.</a></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L7320'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>If the value being stored in an object is read via another object that
overlaps in any way the storage of the first object, then the overlap shall be
exact and the two objects shall have the same type, otherwise the behavior is
undefined<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='7.sentence-2' class='sentence'>This restriction applies to the relationship
between the left and right sides of the assignment operation; it is not a
statement about how the target of the assignment can be aliased in general<a class='hidden_link' href='#7.sentence-2'>.</a></div> <div id='7.sentence-3' class='sentence'>See <a href='basic.lval' title='7.2.1&emsp;Value category'>[basic.<span class='shy'></span>lval]</a><a class='hidden_link' href='#7.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/bf43925ff0d9e80997918e98989892b4c7bf15f7/source/expressions.tex#L7332'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'>A <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list'><span class='textsf'><i >braced-init-list</i></span></span></a> <span class='math'><span class='mathalpha'>B</span></span> may appear on the right-hand side of</div></div><div class='texpara'><ul class='itemize'><li id='8.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#8.1'>(8.1)</a></div><div class='texpara'><div id='8.1.sentence-1' class='sentence'>an assignment to a scalar of type <span class='texttt'>T</span>, in which case <span class='math'><span class='mathalpha'>B</span></span>
shall have at most a single element<a class='hidden_link' href='#8.1.sentence-1'>.</a></div> <div id='8.1.sentence-2' class='sentence'>The meaning of <span class='texttt'>x <span class='operator'>=</span> <span class='math'><span class='mathalpha'>B</span></span></span> is <span class='texttt'>x <span class='operator'>=</span> t</span>,
where <span class='texttt'>t</span> is an invented temporary variable
declared and initialized as <span class='texttt'>T t <span class='operator'>=</span> <span class='math'><span class='mathalpha'>B</span></span></span><a class='hidden_link' href='#8.1.sentence-2'>.</a></div></div></li><li id='8.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#8.2'>(8.2)</a></div><div class='texpara'><div id='8.2.sentence-1' class='sentence'>an assignment to an object of class type, in which case <span class='math'><span class='mathalpha'>B</span></span>
is passed as the argument to the assignment operator function selected by
overload resolution (<a href='over.ass' title='12.4.3.2&emsp;Simple assignment'>[over.<span class='shy'></span>ass]</a>, <a href='over.match' title='12.2&emsp;Overload resolution'>[over.<span class='shy'></span>match]</a>)<a class='hidden_link' href='#8.2.sentence-1'>.</a></div></div></li></ul></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'>complex<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span> z;
z <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>,<span class='literal'>2</span> <span class='curlybracket'>}</span>;        <span class='comment'>// meaning <span class='tcode_in_codeblock'>z.operator=({1,2})</span></span>
z <span class='operator'>+</span><span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>;      <span class='comment'>// meaning <span class='tcode_in_codeblock'>z.operator+=({1,2})</span></span>
<span class='keyword'>int</span> a, b;
a <span class='operator'>=</span> b <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span> <span class='curlybracket'>}</span>;      <span class='comment'>// meaning <span class='tcode_in_codeblock'>a=b=1;</span></span>
a <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span> <span class='curlybracket'>}</span> <span class='operator'>=</span> b;      <span class='comment'>// syntax error</span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>