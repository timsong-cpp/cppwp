<!DOCTYPE html><html lang='en'><head><title>[temp.fct.spec]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>13</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>13.10</a> Function template specializations <a class='abbr_ref'>[temp.fct.spec]</a></h2><div id='general' class='section'><h3 ><a class='secnum' href='#general' style='min-width:80pt'>13.10.1</a> General <a class='abbr_ref' href='temp.fct.spec.general'>[temp.fct.spec.general]</a></h3><div class='para' id='general-1'><div class='marginalizedparent'><a class='marginalized' href='#general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6708'>#</a></div><div class='texpara'><div id='general-1.sentence-1' class='sentence'><a class='index' id=':template,function'></a>A function instantiated from a function template is called a function template
specialization; so is an explicit specialization of a function template<a class='hidden_link' href='#general-1.sentence-1'>.</a></div> <div id='general-1.sentence-2' class='sentence'>Template arguments can be explicitly specified when naming the function
template specialization, deduced from the context (e.g.,
deduced from the function arguments in a call to the function template
specialization, see <a href='#temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>), or obtained from default template arguments<a class='hidden_link' href='#general-1.sentence-2'>.</a></div></div></div><div class='para' id='general-2'><div class='marginalizedparent'><a class='marginalized' href='#general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6717'>#</a></div><div class='texpara'><div id='general-2.sentence-1' class='sentence'>Each function template specialization instantiated from a template
has its own copy of any static variable<a class='hidden_link' href='#general-2.sentence-1'>.</a></div> <div id='general-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#general-example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> T s;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span> a, <span class='keyword'>char</span><span class='operator'>*</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>a<span class='parenthesis'>)</span>;            <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(int*)</span></span>
  f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>b<span class='parenthesis'>)</span>;            <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;char*&gt;(char**)</span></span>
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='general-2.sentence-2' class='sentence'>Here
<span class='texttt'>f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span></span>
has a static variable
<span class='texttt'>s</span>
of type
<span class='texttt'><span class='keyword'>int</span></span>
and
<span class='texttt'>f<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='operator'>*</span><span class='operator'>*</span><span class='parenthesis'>)</span></span>
has a static variable
<span class='texttt'>s</span>
of type
<span class='texttt'><span class='keyword'>char</span><span class='operator'>*</span></span><a class='hidden_link' href='#general-2.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='temp.arg.explicit' class='section'><h3 ><a class='secnum' href='#temp.arg.explicit' style='min-width:80pt'>13.10.2</a> Explicit template argument specification <a class='abbr_ref' href='temp.arg.explicit'>[temp.arg.explicit]</a></h3><div class='para' id='temp.arg.explicit-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.arg.explicit-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6748'>#</a></div><div class='texpara'><div id='temp.arg.explicit-1.sentence-1' class='sentence'><a class='index' id=':specification,template_argument'></a>Template arguments can be specified when referring to a function
template specialization that is not a specialization of a constructor template
by qualifying the function template
name with the list of
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument'><span class='textsf'><i >template-argument</i></span></span></a><i >s</i>
in the same way as
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument_'><span class='textsf'><i >template-argument</i></span></span></a><i >s</i>
are specified in uses of a class template specialization<a class='hidden_link' href='#temp.arg.explicit-1.sentence-1'>.</a></div> <div id='temp.arg.explicit-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.arg.explicit-example-1'>1</a></i>: <div id='temp.arg.explicit-1.sentence-2' class='sentence'><span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>dcomplex<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> cv, Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> ci<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  sort<span class='anglebracket'>&lt;</span>dcomplex<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>cv<span class='parenthesis'>)</span>;                   <span class='comment'>// <span class='tcode_in_codeblock'>sort(Array&lt;dcomplex&gt;&amp;)</span></span>
  sort<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>ci<span class='parenthesis'>)</span>;                        <span class='comment'>// <span class='tcode_in_codeblock'>sort(Array&lt;int&gt;&amp;)</span></span>
<span class='curlybracket'>}</span>
</span>
and
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U, <span class='keyword'>class</span> V<span class='anglebracket'>&gt;</span> U convert<span class='parenthesis'>(</span>V v<span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>double</span> d<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> convert<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>d<span class='parenthesis'>)</span>;       <span class='comment'>// <span class='tcode_in_codeblock'>int convert(double)</span></span>
  <span class='keyword'>char</span> c <span class='operator'>=</span> convert<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>,<span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>d<span class='parenthesis'>)</span>;     <span class='comment'>// <span class='tcode_in_codeblock'>char convert(double)</span></span>
<span class='curlybracket'>}</span>
</span></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.arg.explicit-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.arg.explicit-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6777'>#</a></div><div class='texpara'><div id='temp.arg.explicit-2.sentence-1' class='sentence'>Template arguments shall not be specified
when referring to a specialization of
a constructor template (<a href='class.ctor' title='11.4.5&emsp;Constructors'>[class.<span class='shy'></span>ctor]</a>, <a href='class.qual' title='6.5.5.2&emsp;Class members'>[class.<span class='shy'></span>qual]</a>)<a class='hidden_link' href='#temp.arg.explicit-2.sentence-1'>.</a></div></div></div><div class='para' id='temp.arg.explicit-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.arg.explicit-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6782'>#</a></div><div class='texpara'><div id='temp.arg.explicit-3.sentence-1' class='sentence'>A template argument list may be specified when referring to a specialization
of a function template
<ul class='itemize'><li id='temp.arg.explicit-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.arg.explicit-3.1'>(3.1)</a></div>when a function is called,</li><li id='temp.arg.explicit-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.arg.explicit-3.2'>(3.2)</a></div>when the address of a function is taken, when a function initializes a
reference to function, or when a pointer to member function is formed,</li><li id='temp.arg.explicit-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.arg.explicit-3.3'>(3.3)</a></div>in an explicit specialization,</li><li id='temp.arg.explicit-3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.arg.explicit-3.4'>(3.4)</a></div>in an explicit instantiation, or</li><li id='temp.arg.explicit-3.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.arg.explicit-3.5'>(3.5)</a></div>in a friend declaration<a class='hidden_link' href='#temp.arg.explicit-3.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='temp.arg.explicit-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.arg.explicit-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6799'>#</a></div><div class='texpara'><div id='temp.arg.explicit-4.sentence-1' class='sentence'>Trailing template arguments that can be deduced (<a href='#temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>) or
obtained from default <a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument__'><span class='textsf'><i >template-argument</i></span></span></a><i >s</i>
may be omitted from the list of explicit <a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument___'><span class='textsf'><i >template-argument</i></span></span></a><i >s</i><a class='hidden_link' href='#temp.arg.explicit-4.sentence-1'>.</a></div> <div id='temp.arg.explicit-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.arg.explicit-note-1'>1</a></i>: <div id='temp.arg.explicit-4.sentence-2' class='sentence'>A trailing template parameter pack (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>) not otherwise deduced will be
deduced as an empty sequence of template arguments<a class='hidden_link' href='#temp.arg.explicit-4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.arg.explicit-4.sentence-3' class='sentence'>
If all of the template arguments can be deduced, they may all be omitted;
in this case, the empty template argument list <span class='texttt'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span>
itself may also be omitted<a class='hidden_link' href='#temp.arg.explicit-4.sentence-3'>.</a></div> <div id='temp.arg.explicit-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.arg.explicit-example-2'>2</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X, <span class='keyword'>class</span> Y<span class='anglebracket'>&gt;</span> X f<span class='parenthesis'>(</span>Y<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X, <span class='keyword'>class</span> Y, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Z<span class='anglebracket'>&gt;</span> X g<span class='parenthesis'>(</span>Y<span class='parenthesis'>)</span>;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>5.6</span><span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> deduced as <span class='tcode_in_codeblock'>double</span></span>
  <span class='keyword'>int</span> j <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>5.6</span><span class='parenthesis'>)</span>;               <span class='comment'>// error: <span class='tcode_in_codeblock'>X</span> cannot be deduced</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>bool</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;        <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> for outer <span class='tcode_in_codeblock'>f</span> deduced as <span class='tcode_in_codeblock'>int (*)(bool)</span></span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>f&lt;int&gt;</span> does not denote a single function template specialization</span>
  <span class='keyword'>int</span> k <span class='operator'>=</span> g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>5.6</span><span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> deduced as double; <span class='tcode_in_codeblock'>Z</span> deduced as an empty sequence</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>bool</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;        <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> for outer <span class='tcode_in_codeblock'>f</span> deduced as <span class='tcode_in_codeblock'>int (*)(bool)</span>,</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>Z</span> deduced as an empty sequence</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.arg.explicit-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.arg.explicit-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6826'>#</a></div><div class='texpara'><div id='temp.arg.explicit-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.arg.explicit-note-2'>2</a></i>: <div id='temp.arg.explicit-5.sentence-1' class='sentence'>An empty template argument list can be used to indicate that a given
use refers to a specialization of a function template even when a
non-template function (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>) is visible that would otherwise be used<a class='hidden_link' href='#temp.arg.explicit-5.sentence-1'>.</a></div> <div id='temp.arg.explicit-5.sentence-2' class='sentence'>For example:
<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;    <span class='comment'>// #1</span>
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;                     <span class='comment'>// #2</span>
<span class='keyword'>int</span> k <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                   <span class='comment'>// uses #2</span>
<span class='keyword'>int</span> l <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                 <span class='comment'>// uses #1</span>
</span></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.arg.explicit-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.arg.explicit-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6840'>#</a></div><div class='texpara'><div id='temp.arg.explicit-6.sentence-1' class='sentence'>Template arguments that are present shall be specified in the declaration
order of their corresponding
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter'><span class='textsf'><i >template-parameter</i></span></span></a><i >s</i><a class='hidden_link' href='#temp.arg.explicit-6.sentence-1'>.</a></div> <div id='temp.arg.explicit-6.sentence-2' class='sentence'>The template argument list shall not specify more
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument____'><span class='textsf'><i >template-argument</i></span></span></a><i >s</i>
than there are corresponding
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter_'><span class='textsf'><i >template-parameter</i></span></span></a><i >s</i>
unless one of the <a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter__'><span class='textsf'><i >template-parameter</i></span></span></a><i >s</i> is a template
parameter pack<a class='hidden_link' href='#temp.arg.explicit-6.sentence-2'>.</a></div> <div id='temp.arg.explicit-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.arg.explicit-example-3'>3</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X, <span class='keyword'>class</span> Y, <span class='keyword'>class</span> Z<span class='anglebracket'>&gt;</span> X f<span class='parenthesis'>(</span>Y,Z<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span>,<span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>"aa"</span>,<span class='literal'>3.0</span><span class='parenthesis'>)</span>;
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>"aa"</span>,<span class='literal'>3.0</span><span class='parenthesis'>)</span>; <span class='comment'>// <span class='tcode_in_codeblock'>Z</span> deduced as <span class='tcode_in_codeblock'>double</span></span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>"aa"</span>,<span class='literal'>3.0</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>Y</span> deduced as <span class='tcode_in_codeblock'>const char*</span>; <span class='tcode_in_codeblock'>Z</span> deduced as <span class='tcode_in_codeblock'>double</span></span>
  f<span class='parenthesis'>(</span><span class='literal'>"aa"</span>,<span class='literal'>3.0</span><span class='parenthesis'>)</span>;                  <span class='comment'>// error: <span class='tcode_in_codeblock'>X</span> cannot be deduced</span>
  f2<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>, <span class='keyword'>short</span>, <span class='keyword'>int</span>, <span class='keyword'>long</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.arg.explicit-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.arg.explicit-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6864'>#</a></div><div class='texpara'><div id='temp.arg.explicit-7.sentence-1' class='sentence'>Implicit conversions (<a href='conv' title='7.3&emsp;Standard conversions'>[conv]</a>) will be performed on a function argument
to convert it to the type of the corresponding function parameter if
the parameter type contains no
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter___'><span class='textsf'><i >template-parameter</i></span></span></a><i >s</i>
that participate in template argument deduction<a class='hidden_link' href='#temp.arg.explicit-7.sentence-1'>.</a></div> <div id='temp.arg.explicit-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.arg.explicit-note-3'>3</a></i>: <div id='temp.arg.explicit-7.sentence-2' class='sentence'>Template parameters do not participate in template argument deduction if
they are explicitly specified<a class='hidden_link' href='#temp.arg.explicit-7.sentence-2'>.</a></div> <div id='temp.arg.explicit-7.sentence-3' class='sentence'>For example,</div></div><div class='texpara'><span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;

<span class='keyword'>class</span> Complex <span class='curlybracket'>{</span>
  Complex<span class='parenthesis'>(</span><span class='keyword'>double</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span>Complex<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;    <span class='comment'>// OK, means <span class='tcode_in_codeblock'>f&lt;Complex&gt;(Complex(1))</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.arg.explicit-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.arg.explicit-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6888'>#</a></div><div class='texpara'><div id='temp.arg.explicit-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.arg.explicit-note-4'>4</a></i>: <div id='temp.arg.explicit-8.sentence-1' class='sentence'>Because the explicit template argument list follows the function
template name, and because
constructor templates (<a href='class.ctor' title='11.4.5&emsp;Constructors'>[class.<span class='shy'></span>ctor]</a>) are named without using a
function name (<a href='class.qual' title='6.5.5.2&emsp;Class members'>[class.<span class='shy'></span>qual]</a>), there is no way to provide an explicit
template argument list for these function templates<a class='hidden_link' href='#temp.arg.explicit-8.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.arg.explicit-9'><div class='marginalizedparent'><a class='marginalized' href='#temp.arg.explicit-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6897'>#</a></div><div class='texpara'><div id='temp.arg.explicit-9.sentence-1' class='sentence'>Template argument deduction can extend the sequence of template
arguments corresponding to a template parameter pack, even when the
sequence contains explicitly specified template arguments<a class='hidden_link' href='#temp.arg.explicit-9.sentence-1'>.</a></div> <div id='temp.arg.explicit-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.arg.explicit-example-4'>4</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> values<span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>*</span>, <span class='keyword'>float</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span>, <span class='literal'>0</span>, <span class='literal'>0</span><span class='parenthesis'>)</span>;     <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> deduced as the sequence <span class='tcode_in_codeblock'>int*</span>, <span class='tcode_in_codeblock'>float*</span>, <span class='tcode_in_codeblock'>int</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='temp.deduct' class='section'><h3 ><a class='secnum' href='#temp.deduct' style='min-width:80pt'>13.10.3</a> Template argument deduction <a class='abbr_ref' href='temp.deduct'>[temp.deduct]</a></h3><div id='temp.deduct.general' class='section'><h4 ><a class='secnum' href='#temp.deduct.general' style='min-width:95pt'>13.10.3.1</a> General <a class='abbr_ref' href='temp.deduct.general'>[temp.deduct.general]</a></h4><div class='para' id='temp.deduct.general-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6915'>#</a></div><div class='texpara'><div id='temp.deduct.general-1.sentence-1' class='sentence'>When a
function template
specialization is referenced, all of the
template arguments shall have values<a class='hidden_link' href='#temp.deduct.general-1.sentence-1'>.</a></div> <div id='temp.deduct.general-1.sentence-2' class='sentence'>The values can be
explicitly specified or, in some cases, be deduced from the use
or obtained from default
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument_____'><span class='textsf'><i >template-argument</i></span></span></a><i >s</i><a class='hidden_link' href='#temp.deduct.general-1.sentence-2'>.</a></div> <div id='temp.deduct.general-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-1'>1</a></i>: <div id='temp.deduct.general-1.sentence-3' class='sentence'><span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>dcomplex<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> cv, Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> ci<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  sort<span class='parenthesis'>(</span>cv<span class='parenthesis'>)</span>;                     <span class='comment'>// calls <span class='tcode_in_codeblock'>sort(Array&lt;dcomplex&gt;&amp;)</span></span>
  sort<span class='parenthesis'>(</span>ci<span class='parenthesis'>)</span>;                     <span class='comment'>// calls <span class='tcode_in_codeblock'>sort(Array&lt;int&gt;&amp;)</span></span>
<span class='curlybracket'>}</span>
</span>
and
<span class='codeblock'><span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>double</span> d<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> convert<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>d<span class='parenthesis'>)</span>;      <span class='comment'>// calls <span class='tcode_in_codeblock'>convert&lt;int,double&gt;(double)</span></span>
  <span class='keyword'>int</span> c <span class='operator'>=</span> convert<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>d<span class='parenthesis'>)</span>;     <span class='comment'>// calls <span class='tcode_in_codeblock'>convert&lt;char,double&gt;(double)</span></span>
<span class='curlybracket'>}</span>
</span></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.general-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6940'>#</a></div><div class='texpara'><div id='temp.deduct.general-2.sentence-1' class='sentence'>When an explicit template argument list is specified, if the
given <a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id'><span class='textsf'><i >template-id</i></span></span></a> is not valid (<a href='temp.names' title='13.3&emsp;Names of template specializations'>[temp.<span class='shy'></span>names]</a>),
type deduction fails<a class='hidden_link' href='#temp.deduct.general-2.sentence-1'>.</a></div> <div id='temp.deduct.general-2.sentence-2' class='sentence'>Otherwise, the specified template argument values are substituted for the
corresponding template parameters as specified below<a class='hidden_link' href='#temp.deduct.general-2.sentence-2'>.</a></div></div></div><div class='para' id='temp.deduct.general-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6947'>#</a></div><div class='texpara'><div id='temp.deduct.general-3.sentence-1' class='sentence'>After this substitution is performed, the function parameter type
adjustments described in <a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a> are performed<a class='hidden_link' href='#temp.deduct.general-3.sentence-1'>.</a></div> <div id='temp.deduct.general-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-2'>2</a></i>: <div id='temp.deduct.general-3.sentence-2' class='sentence'>A parameter type of “<span class='texttt'><span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>int</span>, <span class='keyword'>int</span><span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span></span>” becomes
“<span class='texttt'><span class='keyword'>void</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span>,<span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span></span>”<a class='hidden_link' href='#temp.deduct.general-3.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div> <div id='temp.deduct.general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.general-note-1'>1</a></i>: <div id='temp.deduct.general-3.sentence-3' class='sentence'>A top-level qualifier in a function parameter declaration does not affect
the function type but still affects the type of the function parameter
variable within the function<a class='hidden_link' href='#temp.deduct.general-3.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.deduct.general-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-3'>3</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> X<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>const</span> X x<span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> Z<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span>Z, Z<span class='operator'>*</span><span class='parenthesis'>)</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='comment'>// #1: function type is <span class='tcode_in_codeblock'>f(int)</span>, <span class='tcode_in_codeblock'>t</span> is non <span class='tcode_in_codeblock'>const</span></span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;

  <span class='comment'>// #2: function type is <span class='tcode_in_codeblock'>f(int)</span>, <span class='tcode_in_codeblock'>t</span> is <span class='tcode_in_codeblock'>const</span></span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;

  <span class='comment'>// #3: function type is <span class='tcode_in_codeblock'>g(int)</span>, <span class='tcode_in_codeblock'>x</span> is <span class='tcode_in_codeblock'>const</span></span>
  g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;

  <span class='comment'>// #4: function type is <span class='tcode_in_codeblock'>g(int)</span>, <span class='tcode_in_codeblock'>x</span> is <span class='tcode_in_codeblock'>const</span></span>
  g<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;

  <span class='comment'>// #5: function type is <span class='tcode_in_codeblock'>h(int, const int*)</span></span>
  h<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span>,<span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.general-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6984'>#</a></div><div class='texpara'><div id='temp.deduct.general-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.general-note-2'>2</a></i>: <div id='temp.deduct.general-4.sentence-1' class='sentence'><span class='texttt'>f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span></span> and <span class='texttt'>f<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span></span> call distinct functions
even though both of the functions called have the same function type<a class='hidden_link' href='#temp.deduct.general-4.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.deduct.general-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L6990'>#</a></div><div class='texpara'><div id='temp.deduct.general-5.sentence-1' class='sentence'>The resulting substituted and adjusted function type is used as
the type of the function template for template argument
deduction<a class='hidden_link' href='#temp.deduct.general-5.sentence-1'>.</a></div> <div id='temp.deduct.general-5.sentence-2' class='sentence'>If a template argument has not been deduced and its
corresponding template parameter has a default argument, the
template argument is determined by substituting the template
arguments determined for preceding template parameters into the
default argument<a class='hidden_link' href='#temp.deduct.general-5.sentence-2'>.</a></div> <div id='temp.deduct.general-5.sentence-3' class='sentence'>If the substitution results in an invalid type,
as described above, type deduction fails<a class='hidden_link' href='#temp.deduct.general-5.sentence-3'>.</a></div> <div id='temp.deduct.general-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-4'>4</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U <span class='operator'>=</span> <span class='keyword'>double</span><span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>T t <span class='operator'>=</span> <span class='literal'>0</span>, U u <span class='operator'>=</span> <span class='literal'>0</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>1</span>, <span class='literal'>'c'</span><span class='parenthesis'>)</span>;        <span class='comment'>// <span class='tcode_in_codeblock'>f&lt;int,char&gt;(1,'c')</span></span>
  f<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>f&lt;int,double&gt;(1,0)</span></span>
  f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> cannot be deduced</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;         <span class='comment'>// <span class='tcode_in_codeblock'>f&lt;int,double&gt;(0,0)</span></span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;    <span class='comment'>// <span class='tcode_in_codeblock'>f&lt;int,char&gt;(0,0)</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'><div id='temp.deduct.general-5.sentence-4' class='sentence'>When all template arguments have been deduced or obtained from
default template arguments, all uses of template parameters in
the template parameter list of the template
are replaced with the corresponding deduced
or default argument values<a class='hidden_link' href='#temp.deduct.general-5.sentence-4'>.</a></div> <div id='temp.deduct.general-5.sentence-5' class='sentence'>If the substitution results in an
invalid type, as described above, type deduction fails<a class='hidden_link' href='#temp.deduct.general-5.sentence-5'>.</a></div> <div id='temp.deduct.general-5.sentence-6' class='sentence'>If the function template has associated constraints (<a href='temp.constr.decl' title='13.5.3&emsp;Constrained declarations'>[temp.<span class='shy'></span>constr.<span class='shy'></span>decl]</a>),
those constraints are checked for satisfaction (<a href='temp.constr.constr' title='13.5.2&emsp;Constraints'>[temp.<span class='shy'></span>constr.<span class='shy'></span>constr]</a>)<a class='hidden_link' href='#temp.deduct.general-5.sentence-6'>.</a></div> <div id='temp.deduct.general-5.sentence-7' class='sentence'>If the constraints are not satisfied, type deduction fails<a class='hidden_link' href='#temp.deduct.general-5.sentence-7'>.</a></div> <div id='temp.deduct.general-5.sentence-8' class='sentence'>In the context of a function call, if type deduction has not yet failed, then
for those function parameters for which the function call has arguments,
each function parameter with a type that was non-dependent
before substitution of any explicitly-specified template arguments
is checked against its corresponding argument;
if the corresponding argument cannot be implicitly converted
to the parameter type, type deduction fails<a class='hidden_link' href='#temp.deduct.general-5.sentence-8'>.</a></div> <div id='temp.deduct.general-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.general-note-3'>3</a></i>: <div id='temp.deduct.general-5.sentence-9' class='sentence'>Overload resolution will check the other parameters, including
parameters with dependent types in which
no template parameters participate in template argument deduction and
parameters that became non-dependent due to substitution of
explicitly-specified template arguments<a class='hidden_link' href='#temp.deduct.general-5.sentence-9'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.deduct.general-5.sentence-10' class='sentence'>
If type deduction has not yet failed, then
all uses of template parameters in the function type are
replaced with the corresponding deduced or default argument values<a class='hidden_link' href='#temp.deduct.general-5.sentence-10'>.</a></div> <div id='temp.deduct.general-5.sentence-11' class='sentence'>If the substitution results in an invalid type, as described above,
type deduction fails<a class='hidden_link' href='#temp.deduct.general-5.sentence-11'>.</a></div> <div id='temp.deduct.general-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-5'>5</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Z <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>x xx;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='curlybracket'>{</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>A; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span>C T<span class='anglebracket'>&gt;</span> <span class='keyword'>typename</span> Z<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>xx f<span class='parenthesis'>(</span><span class='keyword'>void</span> <span class='operator'>*</span>, T<span class='parenthesis'>)</span>;          <span class='comment'>// #1</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span>, T<span class='parenthesis'>)</span>;                      <span class='comment'>// #2</span>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span> a;
<span class='keyword'>struct</span> ZZ <span class='curlybracket'>{</span>
  <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> <span class='operator'>=</span> <span class='keyword'>typename</span> Z<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>xx<span class='anglebracket'>&gt;</span> <span class='keyword'>operator</span> T <span class='operator'>*</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  ZZ zz;
  f<span class='parenthesis'>(</span><span class='literal'>1</span>, a<span class='parenthesis'>)</span>;              <span class='comment'>// OK, deduction fails for #1 because there is no conversion from <span class='tcode_in_codeblock'>int</span> to <span class='tcode_in_codeblock'>void*</span></span>
  f<span class='parenthesis'>(</span>zz, <span class='literal'>42</span><span class='parenthesis'>)</span>;            <span class='comment'>// OK, deduction fails for #1 because <span class='tcode_in_codeblock'>C&lt;int&gt;</span> is not satisfied</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.general-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.general-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7063'>#</a></div><div class='texpara'><div id='temp.deduct.general-6.sentence-1' class='sentence'>At certain points in the template argument deduction process it is necessary
to take a function type that makes use of template parameters and replace those
template parameters with the corresponding template arguments<a class='hidden_link' href='#temp.deduct.general-6.sentence-1'>.</a></div> <div id='temp.deduct.general-6.sentence-2' class='sentence'>This is done at
the beginning of template argument deduction when any explicitly specified
template arguments are substituted into the function type, and again at the end
of template argument deduction when any template arguments that were deduced or
obtained from default arguments are substituted<a class='hidden_link' href='#temp.deduct.general-6.sentence-2'>.</a></div></div></div><div class='para' id='temp.deduct.general-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.general-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7072'>#</a></div><div class='texpara'><div id='temp.deduct.general-7.sentence-1' class='sentence'>The substitution occurs in all types and expressions that are used in the function
type and in template parameter declarations<a class='hidden_link' href='#temp.deduct.general-7.sentence-1'>.</a></div> <div id='temp.deduct.general-7.sentence-2' class='sentence'>The expressions include not only
constant expressions such as those that appear in array bounds or as nontype
template arguments but also general expressions (i.e., non-constant expressions)
inside <span class='texttt'><span class='keyword'>sizeof</span></span>, <span class='texttt'><span class='keyword'>decltype</span></span>, and other contexts that allow non-constant
expressions<a class='hidden_link' href='#temp.deduct.general-7.sentence-2'>.</a></div> <div id='temp.deduct.general-7.sentence-3' class='sentence'>The substitution proceeds in lexical order and stops when
a condition that causes deduction to fail is encountered<a class='hidden_link' href='#temp.deduct.general-7.sentence-3'>.</a></div> <div id='temp.deduct.general-7.sentence-4' class='sentence'>If substitution into different declarations of the same function template would
cause template instantiations to occur in a different order or not at all,
the program is ill-formed; no diagnostic required<a class='hidden_link' href='#temp.deduct.general-7.sentence-4'>.</a></div> <div id='temp.deduct.general-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.general-note-4'>4</a></i>: <div id='temp.deduct.general-7.sentence-5' class='sentence'>The equivalent substitution in exception specifications is
done only when the <a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier'><span class='textsf'><i >noexcept-specifier</i></span></span></a> is instantiated,
at which point a program is ill-formed
if the substitution results in an invalid type or expression<a class='hidden_link' href='#temp.deduct.general-7.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.deduct.general-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-6'>6</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='keyword'>using</span> X <span class='operator'>=</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>X; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>X f<span class='parenthesis'>(</span><span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>X<span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> g<span class='parenthesis'>(</span><span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>X<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>X;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>X h<span class='parenthesis'>(</span><span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>X<span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> h<span class='parenthesis'>(</span><span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>X<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>X;   <span class='comment'>// redeclaration</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='keyword'>void</span> x<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;        <span class='comment'>// OK, substituting return type causes deduction to fail</span>
  g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;        <span class='comment'>// error, substituting parameter type instantiates <span class='tcode_in_codeblock'>A&lt;int&gt;</span></span>
  h<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;        <span class='comment'>// ill-formed, no diagnostic required</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.general-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.general-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7108'>#</a></div><div class='texpara'><div id='temp.deduct.general-8.sentence-1' class='sentence'>If a substitution results in an invalid type or expression, type deduction fails<a class='hidden_link' href='#temp.deduct.general-8.sentence-1'>.</a></div> <div id='temp.deduct.general-8.sentence-2' class='sentence'>An
invalid type or expression is one that would be ill-formed, with a diagnostic
required, if written using the substituted arguments<a class='hidden_link' href='#temp.deduct.general-8.sentence-2'>.</a></div> <div id='temp.deduct.general-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.general-note-5'>5</a></i>: <div id='temp.deduct.general-8.sentence-3' class='sentence'>If no
diagnostic is required, the program is still ill-formed<a class='hidden_link' href='#temp.deduct.general-8.sentence-3'>.</a></div> <div id='temp.deduct.general-8.sentence-4' class='sentence'>Access checking is done
as part of the substitution
process<a class='hidden_link' href='#temp.deduct.general-8.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.deduct.general-8.sentence-5' class='sentence'>
Only invalid types and expressions in the immediate context of
the function type,
its template parameter types,
and its <a href='dcl.fct.spec#nt:explicit-specifier' title='9.2.3&emsp;Function specifiers&emsp;[dcl.fct.spec]'><span id='ntref:explicit-specifier'><span class='textsf'><i >explicit-specifier</i></span></span></a>
can result in a deduction failure<a class='hidden_link' href='#temp.deduct.general-8.sentence-5'>.</a></div> <div id='temp.deduct.general-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.general-note-6'>6</a></i>: <div id='temp.deduct.general-8.sentence-6' class='sentence'>The substitution into types and expressions can result
in effects such as the instantiation of class template specializations and/or
function template specializations, the generation of implicitly-defined functions,
etc<a class='hidden_link' href='#temp.deduct.general-8.sentence-6'>.</a></div> <div id='temp.deduct.general-8.sentence-7' class='sentence'>Such effects are not in the “immediate context” and can result in the
program being ill-formed<a class='hidden_link' href='#temp.deduct.general-8.sentence-7'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.deduct.general-9'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.general-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7131'>#</a></div><div class='texpara'><div id='temp.deduct.general-9.sentence-1' class='sentence'>A <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression'><span class='textsf'><i >lambda-expression</i></span></span></a> appearing in a function type
or a template parameter is not considered part of the immediate context
for the purposes of template argument deduction<a class='hidden_link' href='#temp.deduct.general-9.sentence-1'>.</a></div> <div id='temp.deduct.general-note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.general-note-7'>7</a></i>: <div id='temp.deduct.general-9.sentence-2' class='sentence'>The intent is to avoid requiring implementations to deal with
substitution failure involving arbitrary statements<a class='hidden_link' href='#temp.deduct.general-9.sentence-2'>.</a></div> <div id='temp.deduct.general-example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-7'>7</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>auto</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> T<span class='operator'>::</span>invalid; <span class='curlybracket'>}</span> <span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;               <span class='comment'>// error: invalid expression not part of the immediate context</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, std<span class='operator'>::</span>size_t <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> T<span class='operator'>::</span>invalid; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span>
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
g<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;               <span class='comment'>// error: invalid expression not part of the immediate context</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>auto</span> h<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span>x <span class='operator'>=</span> T<span class='operator'>::</span>invalid<span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
h<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;               <span class='comment'>// error: invalid expression not part of the immediate context</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>auto</span> i<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>invalid <span class='curlybracket'>{</span> <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> i<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
i<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;               <span class='comment'>// error: invalid expression not part of the immediate context</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>auto</span> j<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> x<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span>x<span class='operator'>.</span>invalid<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> <span class='parenthesis'>(</span>t<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;   <span class='comment'>// #1</span>
<span class='keyword'>void</span> j<span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;                                                            <span class='comment'>// #2</span>
j<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;               <span class='comment'>// deduction fails on #1, calls #2</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.general-10'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.general-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7168'>#</a></div><div class='texpara'><div id='temp.deduct.general-example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-8'>8</a></i>: <span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Y <span class='curlybracket'>{</span>
  Y<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> f<span class='parenthesis'>(</span>T t1, T t2<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span>t1 <span class='operator'>+</span> t2<span class='parenthesis'>)</span>;     <span class='comment'>// #1</span>
X f<span class='parenthesis'>(</span>Y, Y<span class='parenthesis'>)</span>;                                                      <span class='comment'>// #2</span>

X x1, x2;
X x3 <span class='operator'>=</span> f<span class='parenthesis'>(</span>x1, x2<span class='parenthesis'>)</span>;   <span class='comment'>// deduction fails on #1 (cannot add <span class='tcode_in_codeblock'>X+X</span>), calls #2</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.general-11'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.general-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7184'>#</a></div><div class='texpara'><div id='temp.deduct.general-note-8' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.general-note-8'>8</a></i>: <div id='temp.deduct.general-11.sentence-1' class='sentence'>Type deduction can fail for the following reasons:
<ul class='itemize'><li id='temp.deduct.general-11.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.general-11.1'>(11.1)</a></div><div class='texpara'><div id='temp.deduct.general-11.1.sentence-1' class='sentence'>Attempting to instantiate a pack expansion containing multiple packs of differing lengths<a class='hidden_link' href='#temp.deduct.general-11.1.sentence-1'>.</a></div></div></li><li id='temp.deduct.general-11.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.general-11.2'>(11.2)</a></div><div class='texpara'><div id='temp.deduct.general-11.2.sentence-1' class='sentence'>Attempting to create an array with an element type that is <span class='texttt'><span class='keyword'>void</span></span>, a
function type, or a reference type, or attempting
to create an array with a size that is zero or negative<a class='hidden_link' href='#temp.deduct.general-11.2.sentence-1'>.</a></div> <div id='temp.deduct.general-example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-9'>9</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T<span class='squarebracket'>[</span><span class='literal'>5</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> I <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> j <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;             <span class='comment'>// invalid array</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='temp.deduct.general-11.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.general-11.3'>(11.3)</a></div><div class='texpara'><div id='temp.deduct.general-11.3.sentence-1' class='sentence'>Attempting to use a type that is not a class or enumeration type in a qualified name<a class='hidden_link' href='#temp.deduct.general-11.3.sentence-1'>.</a></div> <div id='temp.deduct.general-example-10' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-10'>10</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>typename</span> T<span class='operator'>::</span>B<span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='temp.deduct.general-11.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.general-11.4'>(11.4)</a></div><div class='texpara'><div id='temp.deduct.general-11.4.sentence-1' class='sentence'>Attempting to use a type in a <a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier'><span class='textsf'><i >nested-name-specifier</i></span></span></a> of a
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id'><span class='textsf'><i >qualified-id</i></span></span></a> when
that type does not contain the specified member, or
<ul class='itemize'><li id='temp.deduct.general-11.4.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#temp.deduct.general-11.4.1'>(11.4.1)</a></div>the specified member is not a type where a type is required, or</li><li id='temp.deduct.general-11.4.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#temp.deduct.general-11.4.2'>(11.4.2)</a></div>the specified member is not a template where a template is required, or</li><li id='temp.deduct.general-11.4.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#temp.deduct.general-11.4.3'>(11.4.3)</a></div>the specified member is not a non-type where a non-type is required<a class='hidden_link' href='#temp.deduct.general-11.4.sentence-1'>.</a></li></ul></div> <div id='temp.deduct.general-example-11' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-11'>11</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> I<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Z <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>typename</span> T<span class='operator'>::</span>Y<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>X<span class='anglebracket'>&lt;</span>T<span class='operator'>::</span>N<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span>Z<span class='anglebracket'>&lt;</span>T<span class='operator'>::</span>TT<span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='keyword'>int</span> Y; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> N;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D <span class='curlybracket'>{</span>
  <span class='keyword'>typedef</span> <span class='keyword'>int</span> TT;
<span class='curlybracket'>}</span>;

<span class='keyword'>int</span> main<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='comment'>// Deduction fails in each of these cases:</span>
  f<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>A</span> does not contain a member <span class='tcode_in_codeblock'>Y</span></span>
  f<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;          <span class='comment'>// The <span class='tcode_in_codeblock'>Y</span> member of <span class='tcode_in_codeblock'>B</span> is not a type</span>
  g<span class='anglebracket'>&lt;</span>C<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;          <span class='comment'>// The <span class='tcode_in_codeblock'>N</span> member of <span class='tcode_in_codeblock'>C</span> is not a non-type</span>
  h<span class='anglebracket'>&lt;</span>D<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;          <span class='comment'>// The <span class='tcode_in_codeblock'>TT</span> member of <span class='tcode_in_codeblock'>D</span> is not a template</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='temp.deduct.general-11.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.general-11.5'>(11.5)</a></div><div class='texpara'><div id='temp.deduct.general-11.5.sentence-1' class='sentence'>Attempting to create a pointer to reference type<a class='hidden_link' href='#temp.deduct.general-11.5.sentence-1'>.</a></div></div></li><li id='temp.deduct.general-11.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.general-11.6'>(11.6)</a></div><div class='texpara'><div id='temp.deduct.general-11.6.sentence-1' class='sentence'>Attempting to create a reference to <span class='texttt'><span class='keyword'>void</span></span><a class='hidden_link' href='#temp.deduct.general-11.6.sentence-1'>.</a></div></div></li><li id='temp.deduct.general-11.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.general-11.7'>(11.7)</a></div><div class='texpara'><div id='temp.deduct.general-11.7.sentence-1' class='sentence'>Attempting to create “pointer to member of <span class='texttt'>T</span>” when <span class='texttt'>T</span> is not a
class type<a class='hidden_link' href='#temp.deduct.general-11.7.sentence-1'>.</a></div> <div id='temp.deduct.general-example-12' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-12'>12</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> T<span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='temp.deduct.general-11.8'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.general-11.8'>(11.8)</a></div><div class='texpara'><div id='temp.deduct.general-11.8.sentence-1' class='sentence'>Attempting to give an invalid type to a non-type template parameter<a class='hidden_link' href='#temp.deduct.general-11.8.sentence-1'>.</a></div> <div id='temp.deduct.general-example-13' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-13'>13</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>S<span class='anglebracket'>&lt;</span>T, T<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>struct</span> X <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>int</span> i0 <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='temp.deduct.general-11.9'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.general-11.9'>(11.9)</a></div><div class='texpara'><div id='temp.deduct.general-11.9.sentence-1' class='sentence'>Attempting to perform an invalid conversion in either a template
argument expression, or an expression used in the function
declaration<a class='hidden_link' href='#temp.deduct.general-11.9.sentence-1'>.</a></div> <div id='temp.deduct.general-example-14' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-14'>14</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, T<span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i2 <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>,<span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;           <span class='comment'>// can't conv <span class='tcode_in_codeblock'>1</span> to <span class='tcode_in_codeblock'>int*</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='temp.deduct.general-11.10'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.general-11.10'>(11.10)</a></div><div class='texpara'><div id='temp.deduct.general-11.10.sentence-1' class='sentence'>Attempting to create a function type in which a parameter has a type
of <span class='texttt'><span class='keyword'>void</span></span>, or in which the return type is a function type
or array type<a class='hidden_link' href='#temp.deduct.general-11.10.sentence-1'>.</a></div></div></li></ul></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.general-12'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.general-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7287'>#</a></div><div class='texpara'><div id='temp.deduct.general-example-15' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.general-example-15'>15</a></i>: <div id='temp.deduct.general-12.sentence-1' class='sentence'>In the following example,
assuming a <span class='texttt'><span class='keyword'>signed</span> <span class='keyword'>char</span></span>
cannot represent the value 1000,
a <a href='dcl.init.list#def:conversion,narrowing' title='9.4.5&emsp;List-initialization&emsp;[dcl.init.list]'>narrowing conversion</a>
would be required
to convert the <a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument______'><span class='textsf'><i >template-argument</i></span></span></a>
of type <span class='texttt'><span class='keyword'>int</span></span> to <span class='texttt'><span class='keyword'>signed</span> <span class='keyword'>char</span></span>,
therefore substitution fails for the
second template (<a href='temp.arg.nontype' title='13.4.3&emsp;Template non-type arguments'>[temp.<span class='shy'></span>arg.<span class='shy'></span>nontype]</a>)<a class='hidden_link' href='#temp.deduct.general-12.sentence-1'>.</a></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>signed</span> <span class='keyword'>char</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i1 <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='literal'>1000</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;            <span class='comment'>// OK</span>
<span class='keyword'>int</span> i2 <span class='operator'>=</span> f<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;               <span class='comment'>// ambiguous; not narrowing</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='temp.deduct.call' class='section'><h4 ><a class='secnum' href='#temp.deduct.call' style='min-width:95pt'>13.10.3.2</a> Deducing template arguments from a function call <a class='abbr_ref' href='temp.deduct.call'>[temp.deduct.call]</a></h4><div class='para' id='temp.deduct.call-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.call-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7309'>#</a></div><div class='texpara'><div id='temp.deduct.call-1.sentence-1' class='sentence'>Template argument deduction is done by comparing each function
template parameter type (call it
<span class='texttt'>P</span>)
that contains <a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter____'><span class='textsf'><i >template-parameter</i></span></span></a><i >s</i> that participate in template argument deduction
with the type of the corresponding argument of the call (call it
<span class='texttt'>A</span>)
as described below<a class='hidden_link' href='#temp.deduct.call-1.sentence-1'>.</a></div> <div id='temp.deduct.call-1.sentence-2' class='sentence'>If removing references and cv-qualifiers from <span class='texttt'>P</span> gives
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span>P</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.515em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span><span class="mjx-texatom"><span class="mjx-mrow"></span></span></span></span></span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;"><span class='anglebracket'>&gt;</span></span></span></span></span></span></span></span>
or <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.519em; padding-bottom: 0.372em;"><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span></span></span></span></span></span></span>
for some <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span></span></span></span></span> and <span class='texttt'>N</span> and the
argument is a non-empty initializer list (<a href='dcl.init.list' title='9.4.5&emsp;List-initialization'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>), then deduction is
performed instead for each element of the initializer list independently,
taking <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span></span></span></span></span>
as separate function template parameter types <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-stack" style="vertical-align: -0.302em;"><span class="mjx-sup" style="font-size: 70.7%; padding-bottom: 0.255em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span><span class="mjx-sub" style="font-size: 70.7%; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span></span>
and the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span> initializer element as the corresponding argument<a class='hidden_link' href='#temp.deduct.call-1.sentence-2'>.</a></div> <div id='temp.deduct.call-1.sentence-3' class='sentence'>In the <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0px; padding-right: 0.071em;"><span class="mjx-mo"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.298em; padding-bottom: 0.298em;">′</span></span></span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.519em; padding-bottom: 0.372em;"><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span></span></span></span></span></span></span> case, if <span class='texttt'>N</span> is a non-type template parameter,
<span class='texttt'>N</span> is deduced from the length of the initializer list<a class='hidden_link' href='#temp.deduct.call-1.sentence-3'>.</a></div> <div id='temp.deduct.call-1.sentence-4' class='sentence'>Otherwise, an initializer list argument causes the
parameter to be considered a non-deduced context (<a href='#temp.deduct.type' title='13.10.3.6&emsp;Deducing template arguments from a type'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>type]</a>)<a class='hidden_link' href='#temp.deduct.call-1.sentence-4'>.</a></div> <div id='temp.deduct.call-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.call-example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>std<span class='operator'>::</span>initializer_list<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
f<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                     <span class='comment'>// <span class='tcode_in_codeblock'>T</span> deduced as <span class='tcode_in_codeblock'>int</span></span>
f<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>"asdf"</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                  <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> deduced as both <span class='tcode_in_codeblock'>int</span> and <span class='tcode_in_codeblock'>const char*</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
g<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                     <span class='comment'>// error: no argument deduced for <span class='tcode_in_codeblock'>T</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span>T <span class='keyword'>const</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
h<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                     <span class='comment'>// <span class='tcode_in_codeblock'>T</span> deduced as <span class='tcode_in_codeblock'>int</span>; <span class='tcode_in_codeblock'>N</span> deduced as <span class='tcode_in_codeblock'>3</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> j<span class='parenthesis'>(</span>T <span class='keyword'>const</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
j<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>42</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                        <span class='comment'>// <span class='tcode_in_codeblock'>T</span> deduced as <span class='tcode_in_codeblock'>int</span>; array bound not considered</span>

<span class='keyword'>struct</span> Aggr <span class='curlybracket'>{</span> <span class='keyword'>int</span> i; <span class='keyword'>int</span> j; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> k<span class='parenthesis'>(</span>Aggr <span class='keyword'>const</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
k<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                     <span class='comment'>// error: deduction fails, no conversion from <span class='tcode_in_codeblock'>int</span> to <span class='tcode_in_codeblock'>Aggr</span></span>
k<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>,<span class='curlybracket'>{</span><span class='literal'>2</span><span class='curlybracket'>}</span>,<span class='curlybracket'>{</span><span class='literal'>3</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;               <span class='comment'>// OK, <span class='tcode_in_codeblock'>N</span> deduced as <span class='tcode_in_codeblock'>3</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> M, <span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> m<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='keyword'>const</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>M<span class='squarebracket'>]</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
m<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span><span class='curlybracket'>}</span>,<span class='curlybracket'>{</span><span class='literal'>3</span>,<span class='literal'>4</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;               <span class='comment'>// <span class='tcode_in_codeblock'>M</span> and <span class='tcode_in_codeblock'>N</span> both deduced as <span class='tcode_in_codeblock'>2</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> n<span class='parenthesis'>(</span>T <span class='keyword'>const</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span>, T<span class='parenthesis'>)</span>;
n<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='curlybracket'>{</span><span class='literal'>1</span><span class='curlybracket'>}</span>,<span class='curlybracket'>{</span><span class='literal'>2</span><span class='curlybracket'>}</span>,<span class='curlybracket'>{</span><span class='literal'>3</span><span class='curlybracket'>}</span><span class='curlybracket'>}</span>,Aggr<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;        <span class='comment'>// OK, <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>Aggr</span>, <span class='tcode_in_codeblock'>N</span> is <span class='tcode_in_codeblock'>3</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>int</span> N<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> o<span class='parenthesis'>(</span>T <span class='parenthesis'>(</span><span class='operator'>*</span> <span class='keyword'>const</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span>N<span class='squarebracket'>]</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>int</span> f1<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> f4<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>char</span> f4<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span>;
o<span class='parenthesis'>(</span><span class='curlybracket'>{</span> <span class='operator'>&amp;</span>f1, <span class='operator'>&amp;</span>f4 <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                                <span class='comment'>// OK, <span class='tcode_in_codeblock'>T</span> deduced as <span class='tcode_in_codeblock'>int</span> from first element, nothing</span>
                                                <span class='comment'>// deduced from second element, <span class='tcode_in_codeblock'>N</span> deduced as <span class='tcode_in_codeblock'>2</span></span>
o<span class='parenthesis'>(</span><span class='curlybracket'>{</span> <span class='operator'>&amp;</span>f1, <span class='keyword'>static_cast</span><span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='operator'>&amp;</span>f4<span class='parenthesis'>)</span> <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;    <span class='comment'>// error: conflicting deductions for <span class='tcode_in_codeblock'>T</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='temp.deduct.call-1.sentence-5' class='sentence'>
For a function parameter pack that occurs at the end
of the <a href='dcl.fct#nt:parameter-declaration-list' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-list'><span class='textsf'><i >parameter-declaration-list</i></span></span></a>,
deduction is performed for each remaining argument of the call,
taking the type <span class='texttt'>P</span>
of the <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id'><span class='textsf'><i >declarator-id</i></span></span></a> of the function parameter pack
as the corresponding function template parameter type<a class='hidden_link' href='#temp.deduct.call-1.sentence-5'>.</a></div> <div id='temp.deduct.call-1.sentence-6' class='sentence'>Each deduction deduces template arguments for subsequent positions in
the template parameter packs expanded by the function parameter pack<a class='hidden_link' href='#temp.deduct.call-1.sentence-6'>.</a></div> <div id='temp.deduct.call-1.sentence-7' class='sentence'>When a function parameter pack appears in a non-deduced
context (<a href='#temp.deduct.type' title='13.10.3.6&emsp;Deducing template arguments from a type'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>type]</a>), the type of that pack is
never deduced<a class='hidden_link' href='#temp.deduct.call-1.sentence-7'>.</a></div> <div id='temp.deduct.call-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.call-example-2'>2</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>Types<span class='operator'>&amp;</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T1, Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g1<span class='parenthesis'>(</span>Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>, T1<span class='parenthesis'>)</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span> x, <span class='keyword'>float</span><span class='operator'>&amp;</span> y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> <span class='keyword'>int</span> z <span class='operator'>=</span> x;
  f<span class='parenthesis'>(</span>x, y, z<span class='parenthesis'>)</span>;                   <span class='comment'>// <span class='tcode_in_codeblock'>Types</span> deduced as <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>const int</span></span>
  g<span class='parenthesis'>(</span>x, y, z<span class='parenthesis'>)</span>;                   <span class='comment'>// <span class='tcode_in_codeblock'>T1</span> deduced as <span class='tcode_in_codeblock'>int</span>; <span class='tcode_in_codeblock'>Types</span> deduced as <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>int</span></span>
  g1<span class='parenthesis'>(</span>x, y, z<span class='parenthesis'>)</span>;                  <span class='comment'>// error: <span class='tcode_in_codeblock'>Types</span> is not deduced</span>
  g1<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span>, <span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>x, y, z<span class='parenthesis'>)</span>;   <span class='comment'>// OK, no deduction occurs</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.call-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.call-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7392'>#</a></div><div class='texpara'><div id='temp.deduct.call-2.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is not a reference type:
<ul class='itemize'><li id='temp.deduct.call-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.call-2.1'>(2.1)</a></div>If
<span class='texttt'>A</span>
is an array type, the pointer type produced by the <a href='conv.array' title='7.3.3&emsp;Array-to-pointer conversion&emsp;[conv.array]'>array-to-pointer
standard conversion</a> is used in place of
<span class='texttt'>A</span>
for type deduction;
otherwise,</li><li id='temp.deduct.call-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.call-2.2'>(2.2)</a></div>If
<span class='texttt'>A</span>
is a function type, the pointer type produced by the
<a href='conv.func' title='7.3.4&emsp;Function-to-pointer conversion&emsp;[conv.func]'>function-to-pointer standard conversion</a> is used in place
of
<span class='texttt'>A</span>
for type
deduction; otherwise,</li><li id='temp.deduct.call-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.call-2.3'>(2.3)</a></div>If
<span class='texttt'>A</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>A</span>'s
type are ignored for type deduction<a class='hidden_link' href='#temp.deduct.call-2.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='temp.deduct.call-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.call-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7422'>#</a></div><div class='texpara'><div id='temp.deduct.call-3.sentence-1' class='sentence'><a class='index' id=':reference,forwarding'></a>If
<span class='texttt'>P</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>P</span>'s
type are ignored for type deduction<a class='hidden_link' href='#temp.deduct.call-3.sentence-1'>.</a></div> <div id='temp.deduct.call-3.sentence-2' class='sentence'>If
<span class='texttt'>P</span>
is a reference type, the type
referred to by
<span class='texttt'>P</span>
is used for type deduction<a class='hidden_link' href='#temp.deduct.call-3.sentence-2'>.</a></div> <div id='temp.deduct.call-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.call-example-3'>3</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> n1 <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>5</span><span class='parenthesis'>)</span>;                  <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(const int&amp;)</span></span>
<span class='keyword'>const</span> <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='keyword'>int</span> n2 <span class='operator'>=</span> f<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>;                  <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(const int&amp;)</span></span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>volatile</span> T<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> n3 <span class='operator'>=</span> g<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>;                  <span class='comment'>// calls <span class='tcode_in_codeblock'>g&lt;const int&gt;(const volatile int&amp;)</span></span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='temp.deduct.call-3.sentence-3' class='sentence'>
A <a class='hidden_link' href='#def:forwarding_reference' title='13.10.3.2&emsp;Deducing template arguments from a function call&emsp;[temp.deduct.call]'><span id='def:forwarding_reference'><i >forwarding reference</i></span></a>
is an rvalue reference to a cv-unqualified template parameter
that does not represent a template parameter of a class template
(during class template argument deduction (<a href='over.match.class.deduct' title='12.2.2.9&emsp;Class template argument deduction'>[over.<span class='shy'></span>match.<span class='shy'></span>class.<span class='shy'></span>deduct]</a>))<a class='hidden_link' href='#temp.deduct.call-3.sentence-3'>.</a></div> <div id='temp.deduct.call-3.sentence-4' class='sentence'>If <span class='texttt'>P</span> is a forwarding reference and the argument is an
lvalue, the type “lvalue reference to <span class='texttt'>A</span>” is used in place of <span class='texttt'>A</span> for type
deduction<a class='hidden_link' href='#temp.deduct.call-3.sentence-4'>.</a></div> <div id='temp.deduct.call-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.call-example-4'>4</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span> heisenreference<span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>const</span> T<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i;
<span class='keyword'>int</span> n1 <span class='operator'>=</span> f<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>;                  <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&amp;&gt;(int&amp;)</span></span>
<span class='keyword'>int</span> n2 <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                  <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(int&amp;&amp;)</span></span>
<span class='keyword'>int</span> n3 <span class='operator'>=</span> g<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>;                  <span class='comment'>// error: would call <span class='tcode_in_codeblock'>g&lt;int&gt;(const int&amp;&amp;)</span>, which</span>
                                <span class='comment'>// would bind an rvalue reference to an lvalue</span>

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span>
    A<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span>, U<span class='operator'>&amp;</span><span class='operator'>&amp;</span>, <span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span>;          <span class='comment'>// #1: <span class='tcode_in_codeblock'>T&amp;&amp;</span> is not a forwarding reference.</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>U&amp;&amp;</span> is a forwarding reference.</span>
  A<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span>, <span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span>;                 <span class='comment'>// #2</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> A<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span>, <span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;    <span class='comment'>// #3: <span class='tcode_in_codeblock'>T&amp;&amp;</span> is a forwarding reference.</span>

<span class='keyword'>int</span> <span class='operator'>*</span>ip;
A a<span class='curlybracket'>{</span>i, <span class='literal'>0</span>, ip<span class='curlybracket'>}</span>;                  <span class='comment'>// error: cannot deduce from #1</span>
A a0<span class='curlybracket'>{</span><span class='literal'>0</span>, <span class='literal'>0</span>, ip<span class='curlybracket'>}</span>;                 <span class='comment'>// uses #1 to deduce <span class='tcode_in_codeblock'>A&lt;int&gt;</span> and #1 to initialize</span>
A a2<span class='curlybracket'>{</span>i, ip<span class='curlybracket'>}</span>;                    <span class='comment'>// uses #3 to deduce <span class='tcode_in_codeblock'>A&lt;int&amp;&gt;</span> and #2 to initialize</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.call-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.call-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7478'>#</a></div><div class='texpara'><div id='temp.deduct.call-4.sentence-1' class='sentence'>In general, the deduction process attempts to find template argument
values that will make the deduced
<span class='texttt'>A</span>
identical to
<span class='texttt'>A</span>
(after
the type
<span class='texttt'>A</span>
is transformed as described above)<a class='hidden_link' href='#temp.deduct.call-4.sentence-1'>.</a></div> <div id='temp.deduct.call-4.sentence-2' class='sentence'>However, there are
three cases that allow a difference:
<ul class='itemize'><li id='temp.deduct.call-4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.call-4.1'>(4.1)</a></div><div class='texpara'><div id='temp.deduct.call-4.1.sentence-1' class='sentence'>If the original
<span class='texttt'>P</span>
is a reference type, the deduced
<span class='texttt'>A</span>
(i.e.,
the type referred to by the reference) can be more cv-qualified than
the transformed <span class='texttt'>A</span><a class='hidden_link' href='#temp.deduct.call-4.1.sentence-1'>.</a></div></div></li><li id='temp.deduct.call-4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.call-4.2'>(4.2)</a></div><div class='texpara'><div id='temp.deduct.call-4.2.sentence-1' class='sentence'>The transformed <span class='texttt'>A</span>
can be another pointer or pointer-to-member type that can be converted
to the deduced
<span class='texttt'>A</span>
via a <a href='conv.fctptr' title='7.3.14&emsp;Function pointer conversions&emsp;[conv.fctptr]'>function pointer conversion</a> and/or
<a href='conv.qual' title='7.3.6&emsp;Qualification conversions&emsp;[conv.qual]'>qualification conversion</a><a class='hidden_link' href='#temp.deduct.call-4.2.sentence-1'>.</a></div></div></li><li id='temp.deduct.call-4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.call-4.3'>(4.3)</a></div><div class='texpara'><div id='temp.deduct.call-4.3.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is a class and
<span class='texttt'>P</span>
has the form
<a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id'><span class='textsf'><i >simple-template-id</i></span></span></a>,
then
the transformed <span class='texttt'>A</span>
can be a derived class <span class='texttt'>D</span> of the
deduced
<span class='texttt'>A</span><a class='hidden_link' href='#temp.deduct.call-4.3.sentence-1'>.</a></div> <div id='temp.deduct.call-4.3.sentence-2' class='sentence'>Likewise, if
<span class='texttt'>P</span>
is a pointer to a class of the form
<a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id_'><span class='textsf'><i >simple-template-id</i></span></span></a>,
the transformed <span class='texttt'>A</span>
can be a pointer to a
derived class <span class='texttt'>D</span> pointed to by the deduced
<span class='texttt'>A</span><a class='hidden_link' href='#temp.deduct.call-4.3.sentence-2'>.</a></div> <div id='temp.deduct.call-4.3.sentence-3' class='sentence'>However, if there is a class <span class='texttt'>C</span> that is
a (direct or indirect) base class of <span class='texttt'>D</span> and
derived (directly or indirectly) from a class <span class='texttt'>B</span> and
that would be a valid deduced <span class='texttt'>A</span>,
the deduced <span class='texttt'>A</span> cannot be <span class='texttt'>B</span> or pointer to <span class='texttt'>B</span>,
respectively<a class='hidden_link' href='#temp.deduct.call-4.3.sentence-3'>.</a></div> <div id='temp.deduct.call-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.call-example-5'>5</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>typename</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Ts<span class='anglebracket'>&gt;</span>
  <span class='keyword'>struct</span> X<span class='anglebracket'>&lt;</span>T, Ts<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='operator'>:</span> X<span class='anglebracket'>&lt;</span>Ts<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D <span class='operator'>:</span> X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> E <span class='operator'>:</span> X<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span>, X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> X<span class='anglebracket'>&lt;</span>T<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> x <span class='operator'>=</span> f<span class='parenthesis'>(</span>D<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;     <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;</span>, not <span class='tcode_in_codeblock'>f&lt;&gt;</span></span>
                    <span class='comment'>// <span class='tcode_in_codeblock'>B</span> is <span class='tcode_in_codeblock'>X&lt;&gt;</span>, <span class='tcode_in_codeblock'>C</span> is <span class='tcode_in_codeblock'>X&lt;int&gt;</span></span>
<span class='keyword'>int</span> z <span class='operator'>=</span> f<span class='parenthesis'>(</span>E<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;     <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;</span>, not <span class='tcode_in_codeblock'>f&lt;&gt;</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li></ul></div></div></div><div class='para' id='temp.deduct.call-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.call-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7551'>#</a></div><div class='texpara'><div id='temp.deduct.call-5.sentence-1' class='sentence'>These alternatives are considered only if type deduction would
otherwise fail<a class='hidden_link' href='#temp.deduct.call-5.sentence-1'>.</a></div> <div id='temp.deduct.call-5.sentence-2' class='sentence'>If they yield more than one possible deduced
<span class='texttt'>A</span>,
the type deduction fails<a class='hidden_link' href='#temp.deduct.call-5.sentence-2'>.</a></div> <div id='temp.deduct.call-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.call-note-1'>1</a></i>: <div id='temp.deduct.call-5.sentence-3' class='sentence'>If a
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter_____'><span class='textsf'><i >template-parameter</i></span></span></a>
is not used in any of the function parameters of a function template,
or is used only in a non-deduced context, its corresponding
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument_______'><span class='textsf'><i >template-argument</i></span></span></a>
cannot be deduced from a function call and the
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument________'><span class='textsf'><i >template-argument</i></span></span></a>
must be explicitly specified<a class='hidden_link' href='#temp.deduct.call-5.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.deduct.call-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.call-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7568'>#</a></div><div class='texpara'><div id='temp.deduct.call-6.sentence-1' class='sentence'>When
<span class='texttt'>P</span>
is a function type, function pointer type, or pointer-to-member-function type:
<ul class='itemize'><li id='temp.deduct.call-6.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.call-6.1'>(6.1)</a></div><div class='texpara'><div id='temp.deduct.call-6.1.sentence-1' class='sentence'>If the argument is an overload set containing one or more function templates,
the parameter is treated as a non-deduced context<a class='hidden_link' href='#temp.deduct.call-6.1.sentence-1'>.</a></div></div></li><li id='temp.deduct.call-6.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.call-6.2'>(6.2)</a></div><div class='texpara'><div id='temp.deduct.call-6.2.sentence-1' class='sentence'>If the argument is an overload set (not containing function templates), trial
argument deduction is attempted using each of the members of the set<a class='hidden_link' href='#temp.deduct.call-6.2.sentence-1'>.</a></div> <div id='temp.deduct.call-6.2.sentence-2' class='sentence'>If
deduction succeeds for only one of the overload set members, that member is
used as the argument value for the deduction<a class='hidden_link' href='#temp.deduct.call-6.2.sentence-2'>.</a></div> <div id='temp.deduct.call-6.2.sentence-3' class='sentence'>If deduction succeeds for more than
one member of the overload set the parameter is treated as a non-deduced context<a class='hidden_link' href='#temp.deduct.call-6.2.sentence-3'>.</a></div></div></li></ul></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.call-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.call-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7584'>#</a></div><div class='texpara'><div id='temp.deduct.call-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.call-example-6'>6</a></i>: <span class='codeblock'><span class='comment'>// Only one function of an overload set matches the call so the function parameter is a deduced context.</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T <span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i <span class='operator'>=</span> f<span class='parenthesis'>(</span>g<span class='parenthesis'>)</span>;       <span class='comment'>// calls <span class='tcode_in_codeblock'>f(int (*)(int))</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.call-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.call-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7595'>#</a></div><div class='texpara'><div id='temp.deduct.call-example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.call-example-7'>7</a></i>: <span class='codeblock'><span class='comment'>// Ambiguous deduction causes the second function parameter to be a non-deduced context.</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T, T <span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>char</span> g<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>1</span>, g<span class='parenthesis'>)</span>;    <span class='comment'>// calls <span class='tcode_in_codeblock'>f(int, int (*)(int))</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.call-9'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.call-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7606'>#</a></div><div class='texpara'><div id='temp.deduct.call-example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.call-example-8'>8</a></i>: <span class='codeblock'><span class='comment'>// The overload set contains a template, causing the second function parameter to be a non-deduced context.</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span>T, T <span class='parenthesis'>(</span><span class='operator'>*</span>p<span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>char</span> g<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i <span class='operator'>=</span> f<span class='parenthesis'>(</span><span class='literal'>1</span>, g<span class='parenthesis'>)</span>;    <span class='comment'>// calls <span class='tcode_in_codeblock'>f(int, int (*)(int))</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='temp.deduct.funcaddr' class='section'><h4 ><a class='secnum' href='#temp.deduct.funcaddr' style='min-width:95pt'>13.10.3.3</a> Deducing template arguments taking the address of a function template <a class='abbr_ref' href='temp.deduct.funcaddr'>[temp.deduct.funcaddr]</a></h4><div class='para' id='temp.deduct.funcaddr-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.funcaddr-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7619'>#</a></div><div class='texpara'><div id='temp.deduct.funcaddr-1.sentence-1' class='sentence'>Template arguments can be deduced from the type specified when taking
the address of an <a href='over.over' title='12.3&emsp;Address of an overload set&emsp;[over.over]'>overload set</a><a class='hidden_link' href='#temp.deduct.funcaddr-1.sentence-1'>.</a></div> <div id='temp.deduct.funcaddr-1.sentence-2' class='sentence'>If there is a target,
the function template's function type and the target type
are used as the types of
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>,
and the deduction is done as
described in <a href='#temp.deduct.type' title='13.10.3.6&emsp;Deducing template arguments from a type'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>type]</a><a class='hidden_link' href='#temp.deduct.funcaddr-1.sentence-2'>.</a></div> <div id='temp.deduct.funcaddr-1.sentence-3' class='sentence'>Otherwise, deduction is performed with empty sets of types P and A<a class='hidden_link' href='#temp.deduct.funcaddr-1.sentence-3'>.</a></div></div></div><div class='para' id='temp.deduct.funcaddr-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.funcaddr-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7632'>#</a></div><div class='texpara'><div id='temp.deduct.funcaddr-2.sentence-1' class='sentence'>A <a href='dcl.spec.auto#def:type,placeholder' title='9.2.9.6&emsp;Placeholder type specifiers&emsp;[dcl.spec.auto]'>placeholder type</a> in the return type of a
function template is a non-deduced context<a class='hidden_link' href='#temp.deduct.funcaddr-2.sentence-1'>.</a></div> <div id='temp.deduct.funcaddr-2.sentence-2' class='sentence'>If template argument
deduction succeeds for such a function, the return type is determined
from instantiation of the function body<a class='hidden_link' href='#temp.deduct.funcaddr-2.sentence-2'>.</a></div></div></div></div><div id='temp.deduct.conv' class='section'><h4 ><a class='secnum' href='#temp.deduct.conv' style='min-width:95pt'>13.10.3.4</a> Deducing conversion function template arguments <a class='abbr_ref' href='temp.deduct.conv'>[temp.deduct.conv]</a></h4><div class='para' id='temp.deduct.conv-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.conv-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7640'>#</a></div><div class='texpara'><div id='temp.deduct.conv-1.sentence-1' class='sentence'>Template argument deduction is done by comparing the return type of
the
conversion function template
(call it
<span class='texttt'>P</span>)
with the type specified by the <a href='class.conv.fct#nt:conversion-type-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-type-id'><span class='textsf'><i >conversion-type-id</i></span></span></a> of the
<a href='class.conv.fct#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id'><span class='textsf'><i >conversion-function-id</i></span></span></a> being looked up
(call it <span class='texttt'>A</span>) as described in <a href='#temp.deduct.type' title='13.10.3.6&emsp;Deducing template arguments from a type'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>type]</a><a class='hidden_link' href='#temp.deduct.conv-1.sentence-1'>.</a></div> <div id='temp.deduct.conv-1.sentence-2' class='sentence'>If the <a href='class.conv.fct#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id_'><span class='textsf'><i >conversion-function-id</i></span></span></a> is constructed during
overload resolution (<a href='over.match.funcs' title='12.2.2&emsp;Candidate functions and argument lists'>[over.<span class='shy'></span>match.<span class='shy'></span>funcs]</a>),
the following transformations apply<a class='hidden_link' href='#temp.deduct.conv-1.sentence-2'>.</a></div></div></div><div class='para' id='temp.deduct.conv-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.conv-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7653'>#</a></div><div class='texpara'><div id='temp.deduct.conv-2.sentence-1' class='sentence'>If <span class='texttt'>P</span> is a reference type, the type referred to by <span class='texttt'>P</span> is used in place
of <span class='texttt'>P</span> for type deduction and for any further references to or transformations of
<span class='texttt'>P</span> in the remainder of this subclause<a class='hidden_link' href='#temp.deduct.conv-2.sentence-1'>.</a></div></div></div><div class='para' id='temp.deduct.conv-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.conv-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7658'>#</a></div><div class='texpara'><div id='temp.deduct.conv-3.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is not a reference type:
<ul class='itemize'><li id='temp.deduct.conv-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.conv-3.1'>(3.1)</a></div>If
<span class='texttt'>P</span>
is an array type, the pointer type produced by the
<a href='conv.array' title='7.3.3&emsp;Array-to-pointer conversion&emsp;[conv.array]'>array-to-pointer standard conversion</a> is used in place of
<span class='texttt'>P</span>
for type
deduction; otherwise,</li><li id='temp.deduct.conv-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.conv-3.2'>(3.2)</a></div>If
<span class='texttt'>P</span>
is a function type, the pointer type produced by the
<a href='conv.func' title='7.3.4&emsp;Function-to-pointer conversion&emsp;[conv.func]'>function-to-pointer standard conversion</a> is used in place of
<span class='texttt'>P</span>
for
type deduction; otherwise,</li><li id='temp.deduct.conv-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.conv-3.3'>(3.3)</a></div>If
<span class='texttt'>P</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>P</span>'s
type are ignored for type deduction<a class='hidden_link' href='#temp.deduct.conv-3.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='temp.deduct.conv-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.conv-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7687'>#</a></div><div class='texpara'><div id='temp.deduct.conv-4.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is a cv-qualified type, the top-level cv-qualifiers of
<span class='texttt'>A</span>'s
type are ignored for type deduction<a class='hidden_link' href='#temp.deduct.conv-4.sentence-1'>.</a></div> <div id='temp.deduct.conv-4.sentence-2' class='sentence'>If
<span class='texttt'>A</span>
is a
reference type, the type referred to by
<span class='texttt'>A</span>
is used for type deduction<a class='hidden_link' href='#temp.deduct.conv-4.sentence-2'>.</a></div></div></div><div class='para' id='temp.deduct.conv-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.conv-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7700'>#</a></div><div class='texpara'><div id='temp.deduct.conv-5.sentence-1' class='sentence'>In general, the deduction process attempts to find template argument
values that will make the deduced
<span class='texttt'>A</span>
identical to
<span class='texttt'>A</span><a class='hidden_link' href='#temp.deduct.conv-5.sentence-1'>.</a></div> <div id='temp.deduct.conv-5.sentence-2' class='sentence'>However, certain attributes of <span class='texttt'>A</span> may be ignored:
<ul class='itemize'><li id='temp.deduct.conv-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.conv-5.1'>(5.1)</a></div><div class='texpara'><div id='temp.deduct.conv-5.1.sentence-1' class='sentence'>If the original <span class='texttt'>A</span> is a reference type,
any cv-qualifiers of <span class='texttt'>A</span>
(i.e., the type referred to by the reference)<a class='hidden_link' href='#temp.deduct.conv-5.1.sentence-1'>.</a></div></div></li><li id='temp.deduct.conv-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.conv-5.2'>(5.2)</a></div><div class='texpara'><div id='temp.deduct.conv-5.2.sentence-1' class='sentence'>If the original <span class='texttt'>A</span> is
a function pointer or pointer-to-member-function type,
its <span class='texttt'><span class='keyword'>noexcept</span></span><a class='hidden_link' href='#temp.deduct.conv-5.2.sentence-1'>.</a></div></div></li><li id='temp.deduct.conv-5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.conv-5.3'>(5.3)</a></div><div class='texpara'><div id='temp.deduct.conv-5.3.sentence-1' class='sentence'>Any cv-qualifiers in <span class='texttt'>A</span>
that can be restored by a qualification conversion<a class='hidden_link' href='#temp.deduct.conv-5.3.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='temp.deduct.conv-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.conv-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7721'>#</a></div><div class='texpara'><div id='temp.deduct.conv-6.sentence-1' class='sentence'>These attributes are ignored only if type deduction would
otherwise fail<a class='hidden_link' href='#temp.deduct.conv-6.sentence-1'>.</a></div> <div id='temp.deduct.conv-6.sentence-2' class='sentence'>If ignoring them allows more than one possible deduced
<span class='texttt'>A</span>,
the type deduction fails<a class='hidden_link' href='#temp.deduct.conv-6.sentence-2'>.</a></div></div></div></div><div id='temp.deduct.partial' class='section'><h4 ><a class='secnum' href='#temp.deduct.partial' style='min-width:95pt'>13.10.3.5</a> Deducing template arguments during partial ordering <a class='abbr_ref' href='temp.deduct.partial'>[temp.deduct.partial]</a></h4><div class='para' id='temp.deduct.partial-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.partial-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7730'>#</a></div><div class='texpara'><div id='temp.deduct.partial-1.sentence-1' class='sentence'>Template argument deduction is done by comparing certain types associated with
the two function templates being compared<a class='hidden_link' href='#temp.deduct.partial-1.sentence-1'>.</a></div></div></div><div class='para' id='temp.deduct.partial-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.partial-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7734'>#</a></div><div class='texpara'><div id='temp.deduct.partial-2.sentence-1' class='sentence'>Two sets of types are used to determine the partial ordering<a class='hidden_link' href='#temp.deduct.partial-2.sentence-1'>.</a></div> <div id='temp.deduct.partial-2.sentence-2' class='sentence'>For each of
the templates involved there is the original function type and the
transformed function type<a class='hidden_link' href='#temp.deduct.partial-2.sentence-2'>.</a></div> <div id='temp.deduct.partial-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.partial-note-1'>1</a></i>: <div id='temp.deduct.partial-2.sentence-3' class='sentence'>The creation of the transformed type is described in <a href='temp.func.order' title='13.7.7.3&emsp;Partial ordering of function templates'>[temp.<span class='shy'></span>func.<span class='shy'></span>order]</a><a class='hidden_link' href='#temp.deduct.partial-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.deduct.partial-2.sentence-4' class='sentence'>
The deduction process uses the
transformed type as the argument template and the original type of the
other template as the parameter template<a class='hidden_link' href='#temp.deduct.partial-2.sentence-4'>.</a></div> <div id='temp.deduct.partial-2.sentence-5' class='sentence'>This process is done twice
for each type involved in the partial ordering comparison: once using
the transformed template-1 as the argument template and template-2 as
the parameter template and again using the transformed template-2 as
the argument template and template-1 as the parameter template<a class='hidden_link' href='#temp.deduct.partial-2.sentence-5'>.</a></div></div></div><div class='para' id='temp.deduct.partial-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.partial-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7749'>#</a></div><div class='texpara'><div id='temp.deduct.partial-3.sentence-1' class='sentence'>The types used to determine the ordering depend on the context in which
the partial ordering is done:
<ul class='itemize'><li id='temp.deduct.partial-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.partial-3.1'>(3.1)</a></div><div class='texpara'><div id='temp.deduct.partial-3.1.sentence-1' class='sentence'>In the context of a function call, the types used are those function parameter types
for which the function call has arguments<a class='hidden_link' href='#temp.deduct.partial-3.1.sentence-1'>.</a><a class='footnoteref' href='#footnote-133' id='footnoteref-133' title='Default arguments are not considered to be arguments in this context; they only become arguments after a function has been selected.'>133</a></div></div></li><li id='temp.deduct.partial-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.partial-3.2'>(3.2)</a></div><div class='texpara'><div id='temp.deduct.partial-3.2.sentence-1' class='sentence'>In the context of a call to a conversion function, the return types of
the conversion function templates are used<a class='hidden_link' href='#temp.deduct.partial-3.2.sentence-1'>.</a></div></div></li><li id='temp.deduct.partial-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.partial-3.3'>(3.3)</a></div><div class='texpara'><div id='temp.deduct.partial-3.3.sentence-1' class='sentence'>In <a href='temp.func.order' title='13.7.7.3&emsp;Partial ordering of function templates&emsp;[temp.func.order]'>other contexts</a> the function template's function
type is used<a class='hidden_link' href='#temp.deduct.partial-3.3.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='temp.deduct.partial-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.partial-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7769'>#</a></div><div class='texpara'><div id='temp.deduct.partial-4.sentence-1' class='sentence'>Each type nominated above from the parameter template and the corresponding type from the
argument template are used as the types of
<span class='texttt'>P</span>
and
<span class='texttt'>A</span><a class='hidden_link' href='#temp.deduct.partial-4.sentence-1'>.</a></div></div></div><div class='para' id='temp.deduct.partial-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.partial-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7776'>#</a></div><div class='texpara'><div id='temp.deduct.partial-5.sentence-1' class='sentence'>Before the partial ordering is done, certain transformations are performed
on the types used for partial ordering:
<ul class='itemize'><li id='temp.deduct.partial-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.partial-5.1'>(5.1)</a></div><div class='texpara'><div id='temp.deduct.partial-5.1.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is a reference type,
<span class='texttt'>P</span>
is replaced by the type referred to<a class='hidden_link' href='#temp.deduct.partial-5.1.sentence-1'>.</a></div></div></li><li id='temp.deduct.partial-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.partial-5.2'>(5.2)</a></div><div class='texpara'><div id='temp.deduct.partial-5.2.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is a reference type,
<span class='texttt'>A</span>
is replaced by the type referred to<a class='hidden_link' href='#temp.deduct.partial-5.2.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='temp.deduct.partial-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.partial-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7794'>#</a></div><div class='texpara'><div id='temp.deduct.partial-6.sentence-1' class='sentence'>If both
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>
were reference types (before being replaced with the type referred to
above), determine which of the two types (if any) is more cv-qualified
than the other; otherwise the types are considered to be equally
cv-qualified for partial ordering purposes<a class='hidden_link' href='#temp.deduct.partial-6.sentence-1'>.</a></div> <div id='temp.deduct.partial-6.sentence-2' class='sentence'>The result of this
determination will be used below<a class='hidden_link' href='#temp.deduct.partial-6.sentence-2'>.</a></div></div></div><div class='para' id='temp.deduct.partial-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.partial-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7805'>#</a></div><div class='texpara'><div id='temp.deduct.partial-7.sentence-1' class='sentence'>Remove any top-level cv-qualifiers:
<ul class='itemize'><li id='temp.deduct.partial-7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.partial-7.1'>(7.1)</a></div><div class='texpara'><div id='temp.deduct.partial-7.1.sentence-1' class='sentence'>If
<span class='texttt'>P</span>
is a cv-qualified type,
<span class='texttt'>P</span>
is replaced by the cv-unqualified version of
<span class='texttt'>P</span><a class='hidden_link' href='#temp.deduct.partial-7.1.sentence-1'>.</a></div></div></li><li id='temp.deduct.partial-7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.partial-7.2'>(7.2)</a></div><div class='texpara'><div id='temp.deduct.partial-7.2.sentence-1' class='sentence'>If
<span class='texttt'>A</span>
is a cv-qualified type,
<span class='texttt'>A</span>
is replaced by the cv-unqualified version of
<span class='texttt'>A</span><a class='hidden_link' href='#temp.deduct.partial-7.2.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='temp.deduct.partial-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.partial-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7824'>#</a></div><div class='texpara'><div id='temp.deduct.partial-8.sentence-1' class='sentence'>Using the resulting types
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>,
the deduction is then done as described in <a href='#temp.deduct.type' title='13.10.3.6&emsp;Deducing template arguments from a type'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>type]</a><a class='hidden_link' href='#temp.deduct.partial-8.sentence-1'>.</a></div> <div id='temp.deduct.partial-8.sentence-2' class='sentence'>If <span class='texttt'>P</span> is a function parameter pack, the type <span class='texttt'>A</span> of each remaining
parameter type of the argument template is compared with the type <span class='texttt'>P</span> of
the <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id_'><span class='textsf'><i >declarator-id</i></span></span></a> of the function parameter pack<a class='hidden_link' href='#temp.deduct.partial-8.sentence-2'>.</a></div> <div id='temp.deduct.partial-8.sentence-3' class='sentence'>Each comparison
deduces template arguments for subsequent positions in the template parameter
packs expanded by the function parameter pack<a class='hidden_link' href='#temp.deduct.partial-8.sentence-3'>.</a></div> <div id='temp.deduct.partial-8.sentence-4' class='sentence'>Similarly, if <span class='texttt'>A</span> was transformed from a function parameter pack,
it is compared with each remaining parameter type of the parameter template<a class='hidden_link' href='#temp.deduct.partial-8.sentence-4'>.</a></div> <div id='temp.deduct.partial-8.sentence-5' class='sentence'>If deduction succeeds for a given type,
the type from the argument template is considered to be at least as specialized
as the type from the parameter template<a class='hidden_link' href='#temp.deduct.partial-8.sentence-5'>.</a></div> <div id='temp.deduct.partial-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.partial-example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>           <span class='keyword'>void</span> f<span class='parenthesis'>(</span>Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;         <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T1 a1, Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;  <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span>      <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T1 a1, T2 a2<span class='parenthesis'>)</span>;         <span class='comment'>// #3</span>

f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                <span class='comment'>// calls #1</span>
f<span class='parenthesis'>(</span><span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span><span class='parenthesis'>)</span>;         <span class='comment'>// calls #2</span>
f<span class='parenthesis'>(</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='parenthesis'>)</span>;            <span class='comment'>// calls #3; non-variadic template #3 is more specialized</span>
                    <span class='comment'>// than the variadic templates #1 and #2</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.partial-9'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.partial-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7853'>#</a></div><div class='texpara'><div id='temp.deduct.partial-9.sentence-1' class='sentence'>If, for a given type, the
types are identical after the transformations above
and both <span class='texttt'>P</span> and <span class='texttt'>A</span> were reference types (before being replaced with the
type referred to above):
<ul class='itemize'><li id='temp.deduct.partial-9.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.partial-9.1'>(9.1)</a></div>if the type from the argument template was an lvalue reference and the type
from the parameter template was not,
the parameter type is not considered to be
at least as specialized as the argument type; otherwise,</li><li id='temp.deduct.partial-9.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.partial-9.2'>(9.2)</a></div>if the type from
the argument template is more cv-qualified than the type from the
parameter template (as described above),
the parameter type is not considered to be
at least as specialized as the argument type<a class='hidden_link' href='#temp.deduct.partial-9.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='temp.deduct.partial-10'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.partial-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7870'>#</a></div><div class='texpara'><div id='temp.deduct.partial-10.sentence-1' class='sentence'>Function template <span class='texttt'>F</span>
is <a class='hidden_link' href='#def:more_specialized' title='13.10.3.5&emsp;Deducing template arguments during partial ordering&emsp;[temp.deduct.partial]'><span id='def:more_specialized'><i >at least as specialized as</i></span></a>
function template <span class='texttt'>G</span> if,
for each pair of types used to determine the ordering,
the type from <span class='texttt'>F</span>
is at least as specialized as
the type from <span class='texttt'>G</span><a class='hidden_link' href='#temp.deduct.partial-10.sentence-1'>.</a></div> <div id='temp.deduct.partial-10.sentence-2' class='sentence'><span class='texttt'>F</span>
is <a class='hidden_link' href='#def:more_specialized,function_template' title='13.10.3.5&emsp;Deducing template arguments during partial ordering&emsp;[temp.deduct.partial]'><span id='def:more_specialized,function_template'><i >more specialized than</i></span></a>
<span class='texttt'>G</span> if
<span class='texttt'>F</span>
is at least as specialized as
<span class='texttt'>G</span> and
<span class='texttt'>G</span>
is not at least as specialized as
<span class='texttt'>F</span><a class='hidden_link' href='#temp.deduct.partial-10.sentence-2'>.</a></div></div></div><div class='para' id='temp.deduct.partial-11'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.partial-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7889'>#</a></div><div class='texpara'><div id='temp.deduct.partial-11.sentence-1' class='sentence'>If, after considering the above, function template <span class='texttt'>F</span>
is at least as specialized as function template <span class='texttt'>G</span> and vice-versa, and
if <span class='texttt'>G</span> has a trailing function parameter pack
for which <span class='texttt'>F</span> does not have a corresponding parameter, and
if <span class='texttt'>F</span> does not have a trailing function parameter pack,
then <span class='texttt'>F</span> is more specialized than <span class='texttt'>G</span><a class='hidden_link' href='#temp.deduct.partial-11.sentence-1'>.</a></div></div></div><div class='para' id='temp.deduct.partial-12'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.partial-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7897'>#</a></div><div class='texpara'><div id='temp.deduct.partial-12.sentence-1' class='sentence'>In most cases,
deduction fails if not all template parameters have values,
but for partial ordering purposes a template
parameter may remain without a value provided it is not used in the
types being used for partial ordering<a class='hidden_link' href='#temp.deduct.partial-12.sentence-1'>.</a></div> <div id='temp.deduct.partial-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.partial-note-2'>2</a></i>: <div id='temp.deduct.partial-12.sentence-2' class='sentence'>A template parameter used in a non-deduced context is considered used<a class='hidden_link' href='#temp.deduct.partial-12.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.deduct.partial-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.partial-example-2'>2</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;            <span class='comment'>// #1</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> T f<span class='parenthesis'>(</span>U<span class='parenthesis'>)</span>;     <span class='comment'>// #2</span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;                            <span class='comment'>// calls #1</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.partial-13'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.partial-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7916'>#</a></div><div class='texpara'><div id='temp.deduct.partial-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.partial-note-3'>3</a></i>: <div id='temp.deduct.partial-13.sentence-1' class='sentence'>Partial ordering of function templates containing
template parameter packs is independent of the number of deduced arguments
for those template parameter packs<a class='hidden_link' href='#temp.deduct.partial-13.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.deduct.partial-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.partial-example-3'>3</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Tuple <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span>Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;                 <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span>T1, Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;   <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span>T1, Types<span class='operator'>&amp;</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;  <span class='comment'>// #3</span>

g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;                   <span class='comment'>// calls #1</span>
g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>float</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;         <span class='comment'>// calls #2</span>
g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>float</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;        <span class='comment'>// calls #3</span>
g<span class='parenthesis'>(</span>Tuple<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;                <span class='comment'>// calls #3</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-133'><div class='texpara'><a class='footnotenum' href='#footnote-133'>133)</a><a class='footnoteBacklink' href='#footnoteref-133'>133)</a> <div id='footnote-133.sentence-1' class='sentence'>Default arguments
are not considered to be arguments in this context; they only become arguments
after a function has been selected<a class='hidden_link' href='#footnote-133.sentence-1'>.</a></div></div></div></div><div id='temp.deduct.type' class='section'><h4 ><a class='secnum' href='#temp.deduct.type' style='min-width:95pt'>13.10.3.6</a> Deducing template arguments from a type <a class='abbr_ref' href='temp.deduct.type'>[temp.deduct.type]</a></h4><div class='para' id='temp.deduct.type-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7938'>#</a></div><div class='texpara'><div id='temp.deduct.type-1.sentence-1' class='sentence'>Template arguments can be deduced in several different contexts, but
in each case a type that is specified in terms of template parameters
(call it
<span class='texttt'>P</span>)
is compared with an actual type (call it
<span class='texttt'>A</span>),
and an attempt is made to find template argument values (a type for a type
parameter, a value for a non-type parameter, or a template for a
template parameter) that will make
<span class='texttt'>P</span>,
after substitution of the deduced values (call it the deduced
<span class='texttt'>A</span>),
compatible with
<span class='texttt'>A</span><a class='hidden_link' href='#temp.deduct.type-1.sentence-1'>.</a></div></div></div><div class='para' id='temp.deduct.type-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7954'>#</a></div><div class='texpara'><div id='temp.deduct.type-2.sentence-1' class='sentence'>In some cases, the deduction is done using a single set of types
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>,
in other cases, there will be a set of corresponding types
<span class='texttt'>P</span>
and
<span class='texttt'>A</span><a class='hidden_link' href='#temp.deduct.type-2.sentence-1'>.</a></div> <div id='temp.deduct.type-2.sentence-2' class='sentence'>Type deduction is done
independently for each
<span class='texttt'>P<span class='operator'>/</span>A</span>
pair, and the deduced template
argument values are then combined<a class='hidden_link' href='#temp.deduct.type-2.sentence-2'>.</a></div> <div id='temp.deduct.type-2.sentence-3' class='sentence'>If type deduction cannot be done
for any
<span class='texttt'>P<span class='operator'>/</span>A</span>
pair, or if for any pair the deduction leads to more than
one possible set of deduced values, or if different pairs yield
different deduced values, or if any template argument remains neither
deduced nor explicitly specified, template argument deduction fails<a class='hidden_link' href='#temp.deduct.type-2.sentence-3'>.</a></div> <div id='temp.deduct.type-2.sentence-4' class='sentence'>The type of a type parameter
is only deduced from an array bound
if it is not otherwise deduced<a class='hidden_link' href='#temp.deduct.type-2.sentence-4'>.</a></div></div></div><div class='para' id='temp.deduct.type-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L7979'>#</a></div><div class='texpara'><div id='temp.deduct.type-3.sentence-1' class='sentence'>A given type
<span class='texttt'>P</span>
can be composed from a number of other
types, templates, and non-type values:
<ul class='itemize'><li id='temp.deduct.type-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-3.1'>(3.1)</a></div><div class='texpara'><div id='temp.deduct.type-3.1.sentence-1' class='sentence'>A function type includes the types of each of the function parameters
and the return type<a class='hidden_link' href='#temp.deduct.type-3.1.sentence-1'>.</a></div></div></li><li id='temp.deduct.type-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-3.2'>(3.2)</a></div><div class='texpara'><div id='temp.deduct.type-3.2.sentence-1' class='sentence'>A pointer-to-member type includes the type of the class object pointed to
and the type of the member pointed to<a class='hidden_link' href='#temp.deduct.type-3.2.sentence-1'>.</a></div></div></li><li id='temp.deduct.type-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-3.3'>(3.3)</a></div><div class='texpara'><div id='temp.deduct.type-3.3.sentence-1' class='sentence'>A type that is a specialization of a class template (e.g.,
<span class='texttt'>A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span></span>)
includes the types, templates, and non-type values referenced by the
template argument list of the specialization<a class='hidden_link' href='#temp.deduct.type-3.3.sentence-1'>.</a></div></div></li><li id='temp.deduct.type-3.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-3.4'>(3.4)</a></div><div class='texpara'><div id='temp.deduct.type-3.4.sentence-1' class='sentence'>An array type includes the array element type and the value of the
array bound<a class='hidden_link' href='#temp.deduct.type-3.4.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='temp.deduct.type-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8001'>#</a></div><div class='texpara'><div id='temp.deduct.type-4.sentence-1' class='sentence'>In most cases, the types, templates, and non-type values that are used
to compose
<span class='texttt'>P</span>
participate in template argument deduction<a class='hidden_link' href='#temp.deduct.type-4.sentence-1'>.</a></div> <div id='temp.deduct.type-4.sentence-2' class='sentence'>That is,
they may be used to determine the value of a template argument, and
template argument deduction fails if
the value so determined is not consistent with the values determined
elsewhere<a class='hidden_link' href='#temp.deduct.type-4.sentence-2'>.</a></div> <div id='temp.deduct.type-4.sentence-3' class='sentence'>In certain contexts, however, the value does not
participate in type deduction, but instead uses the values of template
arguments that were either deduced elsewhere or explicitly specified<a class='hidden_link' href='#temp.deduct.type-4.sentence-3'>.</a></div> <div id='temp.deduct.type-4.sentence-4' class='sentence'>If a template parameter is used only in non-deduced contexts and is not
explicitly specified, template argument deduction fails<a class='hidden_link' href='#temp.deduct.type-4.sentence-4'>.</a></div> <div id='temp.deduct.type-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.type-note-1'>1</a></i>: <div id='temp.deduct.type-4.sentence-5' class='sentence'>Under <a href='#temp.deduct.call' title='13.10.3.2&emsp;Deducing template arguments from a function call'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>call]</a>,
if <span class='texttt'>P</span> contains no <a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter_______'><span class='textsf'><i >template-parameter</i></span></span></a><i >s</i> that appear
in deduced contexts, no deduction is done, so <span class='texttt'>P</span> and <span class='texttt'>A</span>
need not have the same form<a class='hidden_link' href='#temp.deduct.type-4.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.deduct.type-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8023'>#</a></div><div class='texpara'><div id='temp.deduct.type-5.sentence-1' class='sentence'>The non-deduced contexts are:
<a class='index' id=':context,non-deduced'></a><ul class='itemize'><li id='temp.deduct.type-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-5.1'>(5.1)</a></div><div class='texpara'><div id='temp.deduct.type-5.1.sentence-1' class='sentence'>The
<a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier_'><span class='textsf'><i >nested-name-specifier</i></span></span></a>
of a type that was specified using a
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_'><span class='textsf'><i >qualified-id</i></span></span></a><a class='hidden_link' href='#temp.deduct.type-5.1.sentence-1'>.</a></div></div></li><li id='temp.deduct.type-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-5.2'>(5.2)</a></div><div class='texpara'><div id='temp.deduct.type-5.2.sentence-1' class='sentence'>The <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression'><span class='textsf'><i >expression</i></span></span></a> of a <a href='dcl.type.decltype#nt:decltype-specifier' title='9.2.9.5&emsp;Decltype specifiers&emsp;[dcl.type.decltype]'><span id='ntref:decltype-specifier'><span class='textsf'><i >decltype-specifier</i></span></span></a><a class='hidden_link' href='#temp.deduct.type-5.2.sentence-1'>.</a></div></div></li><li id='temp.deduct.type-5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-5.3'>(5.3)</a></div><div class='texpara'><div id='temp.deduct.type-5.3.sentence-1' class='sentence'>A non-type template argument or an array bound in which a subexpression
references a template parameter<a class='hidden_link' href='#temp.deduct.type-5.3.sentence-1'>.</a></div></div></li><li id='temp.deduct.type-5.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-5.4'>(5.4)</a></div><div class='texpara'><div id='temp.deduct.type-5.4.sentence-1' class='sentence'>A template parameter used in the parameter type of a function parameter that
has a default argument that is being used in the call for which argument
deduction is being done<a class='hidden_link' href='#temp.deduct.type-5.4.sentence-1'>.</a></div></div></li><li id='temp.deduct.type-5.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-5.5'>(5.5)</a></div><div class='texpara'><div id='temp.deduct.type-5.5.sentence-1' class='sentence'>A function parameter for which the associated argument is an
overload set (<a href='over.over' title='12.3&emsp;Address of an overload set'>[over.<span class='shy'></span>over]</a>), and one or more of the following apply:
<ul class='itemize'><li id='temp.deduct.type-5.5.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#temp.deduct.type-5.5.1'>(5.5.1)</a></div>more than one function matches the function parameter type (resulting in
an ambiguous deduction), or</li><li id='temp.deduct.type-5.5.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#temp.deduct.type-5.5.2'>(5.5.2)</a></div>no function matches the function parameter type, or</li><li id='temp.deduct.type-5.5.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#temp.deduct.type-5.5.3'>(5.5.3)</a></div>the overload set supplied as an argument contains one or more function templates<a class='hidden_link' href='#temp.deduct.type-5.5.sentence-1'>.</a></li></ul></div></div></li><li id='temp.deduct.type-5.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-5.6'>(5.6)</a></div><div class='texpara'><div id='temp.deduct.type-5.6.sentence-1' class='sentence'>A function parameter for which the associated argument is an initializer
list (<a href='dcl.init.list' title='9.4.5&emsp;List-initialization'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>) but the parameter does not have
a type for which deduction from an initializer list is specified (<a href='#temp.deduct.call' title='13.10.3.2&emsp;Deducing template arguments from a function call'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>call]</a>)<a class='hidden_link' href='#temp.deduct.type-5.6.sentence-1'>.</a></div> <div id='temp.deduct.type-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
g<span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>,<span class='literal'>2</span>,<span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;                 <span class='comment'>// error: no argument deduced for <span class='tcode_in_codeblock'>T</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li><li id='temp.deduct.type-5.7'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-5.7'>(5.7)</a></div><div class='texpara'><div id='temp.deduct.type-5.7.sentence-1' class='sentence'>A function parameter pack that does not occur at the end of the
<a href='dcl.fct#nt:parameter-declaration-list' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-list_'><span class='textsf'><i >parameter-declaration-list</i></span></span></a><a class='hidden_link' href='#temp.deduct.type-5.7.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='temp.deduct.type-6'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8066'>#</a></div><div class='texpara'><div id='temp.deduct.type-6.sentence-1' class='sentence'>When a type name is specified in a way that includes a non-deduced
context, all of the types that comprise that type name are also
non-deduced<a class='hidden_link' href='#temp.deduct.type-6.sentence-1'>.</a></div> <div id='temp.deduct.type-6.sentence-2' class='sentence'>However, a compound type can include both deduced and non-deduced types<a class='hidden_link' href='#temp.deduct.type-6.sentence-2'>.</a></div> <div id='temp.deduct.type-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-2'>2</a></i>: <div id='temp.deduct.type-6.sentence-3' class='sentence'>If a type is specified as
<span class='texttt'>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>B<span class='anglebracket'>&lt;</span>T2<span class='anglebracket'>&gt;</span></span>,
both
<span class='texttt'>T</span>
and
<span class='texttt'>T2</span>
are non-deduced<a class='hidden_link' href='#temp.deduct.type-6.sentence-3'>.</a></div> <div id='temp.deduct.type-6.sentence-4' class='sentence'>Likewise, if a type is specified as
<span class='texttt'>A<span class='anglebracket'>&lt;</span>I<span class='operator'>+</span>J<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>X<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>,
<span class='texttt'>I</span>,
<span class='texttt'>J</span>,
and
<span class='texttt'>T</span>
are non-deduced<a class='hidden_link' href='#temp.deduct.type-6.sentence-4'>.</a></div> <div id='temp.deduct.type-6.sentence-5' class='sentence'>If a type is specified as
<span class='texttt'><span class='keyword'>void</span></span>
<span class='texttt'>f<span class='parenthesis'>(</span><span class='keyword'>typename</span></span>
<span class='texttt'>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>B,</span>
<span class='texttt'>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span></span>,
the
<span class='texttt'>T</span>
in
<span class='texttt'>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>B</span>
is non-deduced but
the
<span class='texttt'>T</span>
in
<span class='texttt'>A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
is deduced<a class='hidden_link' href='#temp.deduct.type-6.sentence-5'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.type-7'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8103'>#</a></div><div class='texpara'><div id='temp.deduct.type-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-3'>3</a></i>: <div id='temp.deduct.type-7.sentence-1' class='sentence'>Here is an example in which different parameter/argument pairs produce
inconsistent template argument deductions:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T x, T y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> A <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span>A a, B b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>a,b<span class='parenthesis'>)</span>;           <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> deduced as both <span class='tcode_in_codeblock'>A</span> and <span class='tcode_in_codeblock'>B</span></span>
  f<span class='parenthesis'>(</span>b,a<span class='parenthesis'>)</span>;           <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> deduced as both <span class='tcode_in_codeblock'>A</span> and <span class='tcode_in_codeblock'>B</span></span>
  f<span class='parenthesis'>(</span>a,a<span class='parenthesis'>)</span>;           <span class='comment'>// OK: <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>A</span></span>
  f<span class='parenthesis'>(</span>b,b<span class='parenthesis'>)</span>;           <span class='comment'>// OK: <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>B</span></span>
<span class='curlybracket'>}</span>
</span></div></div><div class='texpara'><div id='temp.deduct.type-7.sentence-2' class='sentence'>Here is an example where two template arguments are deduced from a
single function parameter/argument pair<a class='hidden_link' href='#temp.deduct.type-7.sentence-2'>.</a></div> <div id='temp.deduct.type-7.sentence-3' class='sentence'>This can lead to conflicts
that cause type deduction to fail:
<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>  T <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span> T, U, U <span class='parenthesis'>)</span>  <span class='parenthesis'>)</span>;

<span class='keyword'>int</span> g1<span class='parenthesis'>(</span> <span class='keyword'>int</span>, <span class='keyword'>float</span>, <span class='keyword'>float</span><span class='parenthesis'>)</span>;
<span class='keyword'>char</span> g2<span class='parenthesis'>(</span> <span class='keyword'>int</span>, <span class='keyword'>float</span>, <span class='keyword'>float</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> g3<span class='parenthesis'>(</span> <span class='keyword'>int</span>, <span class='keyword'>char</span>, <span class='keyword'>float</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> r<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>g1<span class='parenthesis'>)</span>;            <span class='comment'>// OK: <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>int</span> and <span class='tcode_in_codeblock'>U</span> is <span class='tcode_in_codeblock'>float</span></span>
  f<span class='parenthesis'>(</span>g2<span class='parenthesis'>)</span>;            <span class='comment'>// error: <span class='tcode_in_codeblock'>T</span> deduced as both <span class='tcode_in_codeblock'>char</span> and <span class='tcode_in_codeblock'>int</span></span>
  f<span class='parenthesis'>(</span>g3<span class='parenthesis'>)</span>;            <span class='comment'>// error: <span class='tcode_in_codeblock'>U</span> deduced as both <span class='tcode_in_codeblock'>char</span> and <span class='tcode_in_codeblock'>float</span></span>
<span class='curlybracket'>}</span>
</span></div></div><div class='texpara'><div id='temp.deduct.type-7.sentence-4' class='sentence'>Here is an example where a qualification conversion applies between the
argument type on the function call and the deduced template argument type:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> T<span class='operator'>*</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>int</span><span class='operator'>*</span> p;
<span class='keyword'>void</span> s<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>p<span class='parenthesis'>)</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>f(const int*)</span></span>
<span class='curlybracket'>}</span>
</span></div></div><div class='texpara'><div id='temp.deduct.type-7.sentence-5' class='sentence'>Here is an example where the template argument is used to instantiate
a derived class type of the corresponding function parameter type:
<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> D <span class='operator'>:</span> <span class='keyword'>public</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D2 <span class='operator'>:</span> <span class='keyword'>public</span> B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>void</span> t<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  D<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> d;
  D2     d2;
  f<span class='parenthesis'>(</span>d<span class='parenthesis'>)</span>;             <span class='comment'>// calls <span class='tcode_in_codeblock'>f(B&lt;int&gt;&amp;)</span></span>
  f<span class='parenthesis'>(</span>d2<span class='parenthesis'>)</span>;            <span class='comment'>// calls <span class='tcode_in_codeblock'>f(B&lt;int&gt;&amp;)</span></span>
<span class='curlybracket'>}</span>
</span></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.type-8'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8163'>#</a></div><div class='texpara'><div id='temp.deduct.type-8.sentence-1' class='sentence'>A template type argument
<span class='texttt'>T</span>,
a template template argument
<span class='texttt'>TT</span>
or a template non-type argument
<span class='texttt'>i</span>
can be deduced if
<span class='texttt'>P</span>
and
<span class='texttt'>A</span>
have one of the following forms:
<span class='codeblock'>T
<span class='mathit'>cv</span> T
T<span class='operator'>*</span>
T<span class='operator'>&amp;</span>
T<span class='operator'>&amp;</span><span class='operator'>&amp;</span>
T<span class='squarebracket'>[</span><i >integer-constant</i><span class='squarebracket'>]</span>
<a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name'><span class='textsf'><i >template-name</i></span></span></a><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>  <span class='textrm'>(where <span class='tcode_in_codeblock'><a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name_'><span class='textsf'><i >template-name</i></span></span></a></span> refers to a class template)</span>
<i >type</i><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>
T<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
T <i >type</i><span class='operator'>::</span><span class='operator'>*</span>
<i >type</i> T<span class='operator'>::</span><span class='operator'>*</span>
T T<span class='operator'>::</span><span class='operator'>*</span>
T <span class='parenthesis'>(</span><i >type</i><span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>
<i >type</i> <span class='parenthesis'>(</span>T<span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>
<i >type</i> <span class='parenthesis'>(</span><i >type</i><span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
<i >type</i> <span class='parenthesis'>(</span>T<span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
T <span class='parenthesis'>(</span><i >type</i><span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
T <span class='parenthesis'>(</span>T<span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>
T <span class='parenthesis'>(</span>T<span class='operator'>::</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
<i >type</i><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span>
<a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name__'><span class='textsf'><i >template-name</i></span></span></a><span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span>  <span class='textrm'>(where <span class='tcode_in_codeblock'><a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name___'><span class='textsf'><i >template-name</i></span></span></a></span> refers to a class template)</span>
TT<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>
TT<span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span>
TT<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span>
</span>
where
<span class='texttt'><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span>
represents
a parameter-type-list (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>)
where at least one parameter type contains a
<span class='texttt'>T</span>,
and
<span class='texttt'><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
represents
a parameter-type-list
where no parameter type contains a
<span class='texttt'>T</span><a class='hidden_link' href='#temp.deduct.type-8.sentence-1'>.</a></div> <div id='temp.deduct.type-8.sentence-2' class='sentence'>Similarly,
<span class='texttt'><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
represents template argument lists where at least one argument contains a
<span class='texttt'>T</span>,
<span class='texttt'><span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span></span>
represents template argument lists where at least one argument contains an
<span class='texttt'>i</span>
and
<span class='texttt'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span></span>
represents template argument lists where no argument contains a
<span class='texttt'>T</span>
or an
<span class='texttt'>i</span><a class='hidden_link' href='#temp.deduct.type-8.sentence-2'>.</a></div></div></div><div class='para' id='temp.deduct.type-9'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8228'>#</a></div><div class='texpara'><div id='temp.deduct.type-9.sentence-1' class='sentence'>If <span class='texttt'>P</span> has a form that contains <span class='texttt'><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
or <span class='texttt'><span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span></span>, then each argument <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> of the
respective template argument list of <span class='texttt'>P</span> is compared with the
corresponding argument <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> of the corresponding
template argument list of <span class='texttt'>A</span><a class='hidden_link' href='#temp.deduct.type-9.sentence-1'>.</a></div> <div id='temp.deduct.type-9.sentence-2' class='sentence'>If the template argument list
of <span class='texttt'>P</span> contains a pack expansion that is not the last
template argument, the entire template argument list is a non-deduced
context<a class='hidden_link' href='#temp.deduct.type-9.sentence-2'>.</a></div> <div id='temp.deduct.type-9.sentence-3' class='sentence'>If <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is a pack expansion, then the pattern
of <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is compared with each remaining argument in the
template argument list of <span class='texttt'>A</span><a class='hidden_link' href='#temp.deduct.type-9.sentence-3'>.</a></div> <div id='temp.deduct.type-9.sentence-4' class='sentence'>Each comparison deduces
template arguments for subsequent positions in the template parameter
packs expanded by <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span><a class='hidden_link' href='#temp.deduct.type-9.sentence-4'>.</a></div> <div id='temp.deduct.type-9.sentence-5' class='sentence'>During <a href='#temp.deduct.partial' title='13.10.3.5&emsp;Deducing template arguments during partial ordering&emsp;[temp.deduct.partial]'>partial ordering</a>, if <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> was
originally a pack expansion:
<ul class='itemize'><li id='temp.deduct.type-9.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-9.1'>(9.1)</a></div>if <span class='texttt'>P</span> does not contain a template argument corresponding to
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> then <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is ignored;</li><li id='temp.deduct.type-9.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-9.2'>(9.2)</a></div>otherwise, if <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is not a pack expansion, template argument
deduction fails<a class='hidden_link' href='#temp.deduct.type-9.sentence-5'>.</a></li></ul></div> <div id='temp.deduct.type-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-4'>4</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Z<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> S;                                 <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Z<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> S<span class='anglebracket'>&lt;</span>T1, <span class='keyword'>const</span> Z<span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;            <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span>   <span class='keyword'>class</span> S<span class='anglebracket'>&lt;</span>T1, <span class='keyword'>const</span> T2<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;              <span class='comment'>// #3</span>
S<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span> s;           <span class='comment'>// both #2 and #3 match; #3 is more specialized</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> U<span class='anglebracket'>&gt;</span>            <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;                  <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>T1, T2<span class='operator'>*</span>, U<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;   <span class='comment'>// #2</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T1, <span class='keyword'>class</span> T2<span class='anglebracket'>&gt;</span>             <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span>T1, T2<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;          <span class='comment'>// #3</span>
<span class='keyword'>template</span> <span class='keyword'>struct</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>int</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span>;   <span class='comment'>// selects #2</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.type-10'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8264'>#</a></div><div class='texpara'><div id='temp.deduct.type-10.sentence-1' class='sentence'>Similarly, if <span class='texttt'>P</span> has a form that contains
<span class='texttt'><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span>, then each parameter type <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span>
of the respective parameter-type-list (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>) of
<span class='texttt'>P</span> is compared with the corresponding parameter type
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> of the corresponding parameter-type-list
of <span class='texttt'>A</span><a class='hidden_link' href='#temp.deduct.type-10.sentence-1'>.</a></div> <div id='temp.deduct.type-10.sentence-2' class='sentence'>If <span class='texttt'>P</span> and <span class='texttt'>A</span> are function types that originated from deduction when
taking the address of a function template (<a href='#temp.deduct.funcaddr' title='13.10.3.3&emsp;Deducing template arguments taking the address of a function template'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>funcaddr]</a>) or when
deducing template arguments from a function declaration (<a href='#temp.deduct.decl' title='13.10.3.7&emsp;Deducing template arguments from a function declaration'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>decl]</a>)
and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> are parameters of the top-level
parameter-type-list of <span class='texttt'>P</span> and <span class='texttt'>A</span>, respectively,
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is adjusted if it is a forwarding reference (<a href='#temp.deduct.call' title='13.10.3.2&emsp;Deducing template arguments from a function call'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>call]</a>)
and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is an lvalue reference, in which case the type of
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is changed to be the template parameter type (i.e., <span class='texttt'>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span> is
changed to simply <span class='texttt'>T</span>)<a class='hidden_link' href='#temp.deduct.type-10.sentence-2'>.</a></div> <div id='temp.deduct.type-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.type-note-2'>2</a></i>: <div id='temp.deduct.type-10.sentence-3' class='sentence'>As a result, when <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is <span class='texttt'>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>
and <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is <span class='texttt'>X<span class='operator'>&amp;</span></span>, the adjusted <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> will be <span class='texttt'>T</span>,
causing <span class='texttt'>T</span> to be deduced as <span class='texttt'>X<span class='operator'>&amp;</span></span><a class='hidden_link' href='#temp.deduct.type-10.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.deduct.type-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-5'>5</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>    <span class='comment'>// #1</span>
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>   <span class='comment'>// #2</span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>i<span class='parenthesis'>)</span>;                         <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&amp;&gt;(int&amp;)</span>, i.e., #1</span>
  f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                         <span class='comment'>// calls <span class='tcode_in_codeblock'>f&lt;int&gt;(int&amp;&amp;)</span>, i.e., #2</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'><div id='temp.deduct.type-10.sentence-4' class='sentence'>If the <a href='dcl.fct#nt:parameter-declaration' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration'><span class='textsf'><i >parameter-declaration</i></span></span></a>
corresponding to <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is a function parameter pack,
then the type of its <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id__'><span class='textsf'><i >declarator-id</i></span></span></a> is compared with
each remaining parameter type in the parameter-type-list
of <span class='texttt'>A</span><a class='hidden_link' href='#temp.deduct.type-10.sentence-4'>.</a></div> <div id='temp.deduct.type-10.sentence-5' class='sentence'>Each comparison deduces template arguments for
subsequent positions in the template parameter packs expanded by the
function parameter pack<a class='hidden_link' href='#temp.deduct.type-10.sentence-5'>.</a></div> <div id='temp.deduct.type-10.sentence-6' class='sentence'>During <a href='#temp.deduct.partial' title='13.10.3.5&emsp;Deducing template arguments during partial ordering&emsp;[temp.deduct.partial]'>partial ordering</a>, if <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> was
originally a function parameter pack:
<ul class='itemize'><li id='temp.deduct.type-10.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-10.1'>(10.1)</a></div>if <span class='texttt'>P</span> does not contain a function parameter type corresponding to
<span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> then <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.446em; padding-bottom: 0.225em;">A</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is ignored;</li><li id='temp.deduct.type-10.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#temp.deduct.type-10.2'>(10.2)</a></div>otherwise, if <span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.372em; padding-bottom: 0.225em;">P</span></span></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em;">i</span></span></span></span></span></span></span> is not a function parameter pack, template
argument deduction fails<a class='hidden_link' href='#temp.deduct.type-10.sentence-6'>.</a></li></ul></div> <div id='temp.deduct.type-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-6'>6</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>*</span>, U<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>  <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>             <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>         <span class='comment'>// #2</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span>;                              <span class='comment'>// selects #1</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.type-11'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8321'>#</a></div><div class='texpara'><div id='temp.deduct.type-11.sentence-1' class='sentence'>These forms can be used in the same way as
<span class='texttt'>T</span>
is for further composition of types<a class='hidden_link' href='#temp.deduct.type-11.sentence-1'>.</a></div> <div id='temp.deduct.type-example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-7'>7</a></i>: <div id='temp.deduct.type-11.sentence-2' class='sentence'><span class='codeblock'>X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>
</span>
is of the form
<span class='codeblock'><a href='temp.names#nt:template-name' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-name____'><span class='textsf'><i >template-name</i></span></span></a><span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><i >type</i><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='parenthesis'>)</span>
</span>
which is a variant of
<span class='codeblock'><i >type</i> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>
</span>
where type is
<span class='texttt'>X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span></span>
and
<span class='texttt'>T</span>
is
<span class='texttt'><span class='keyword'>char</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#temp.deduct.type-11.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.type-12'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8345'>#</a></div><div class='texpara'><div id='temp.deduct.type-12.sentence-1' class='sentence'>Template arguments cannot be deduced from function arguments involving
constructs other than the ones specified above<a class='hidden_link' href='#temp.deduct.type-12.sentence-1'>.</a></div></div></div><div class='para' id='temp.deduct.type-13'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8349'>#</a></div><div class='texpara'><div id='temp.deduct.type-13.sentence-1' class='sentence'>When the value of the argument
corresponding to a non-type template parameter <span class='texttt'>P</span>
that is declared with a dependent type
is deduced from an expression,
the template parameters in the type of <span class='texttt'>P</span>
are deduced from the type of the value<a class='hidden_link' href='#temp.deduct.type-13.sentence-1'>.</a></div> <div id='temp.deduct.type-example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-8'>8</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>long</span> n<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, T n<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> C<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&lt;</span>n<span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> Q <span class='operator'>=</span> T;
<span class='curlybracket'>}</span>;

<span class='keyword'>using</span> R <span class='operator'>=</span> <span class='keyword'>long</span>;
<span class='keyword'>using</span> R <span class='operator'>=</span> C<span class='anglebracket'>&lt;</span>A<span class='anglebracket'>&lt;</span><span class='literal'>2</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>Q;           <span class='comment'>// OK; <span class='tcode_in_codeblock'>T</span> was deduced as <span class='tcode_in_codeblock'>long</span> from the</span>
                                <span class='comment'>// template argument value in the type <span class='tcode_in_codeblock'>A&lt;2&gt;</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.type-14'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8371'>#</a></div><div class='texpara'><div id='temp.deduct.type-14.sentence-1' class='sentence'>The type of <span class='texttt'>N</span> in the type <span class='texttt'>T<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> is <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_&shy;t</span><a class='hidden_link' href='#temp.deduct.type-14.sentence-1'>.</a></div> <div id='temp.deduct.type-example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-9'>9</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, T n<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='squarebracket'>[</span>n<span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>using</span> Q <span class='operator'>=</span> T;
<span class='curlybracket'>}</span>;

<span class='keyword'>using</span> V <span class='operator'>=</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='keyword'>sizeof</span> <span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='keyword'>using</span> V <span class='operator'>=</span> S<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='squarebracket'>[</span><span class='literal'>42</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>Q;        <span class='comment'>// OK; <span class='tcode_in_codeblock'>T</span> was deduced as <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;size_&shy;t</span> from the type <span class='tcode_in_codeblock'>int[42]</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.type-15'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8385'>#</a></div><div class='texpara'><div id='temp.deduct.type-example-10' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-10'>10</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, T i<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span>a<span class='parenthesis'>)</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> v<span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;                         <span class='comment'>// OK: <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>std&#x200b;::&#x200b;size_&shy;t</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.type-16'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8396'>#</a></div><div class='texpara'><div id='temp.deduct.type-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.type-note-3'>3</a></i>: <div id='temp.deduct.type-16.sentence-1' class='sentence'>Except for reference and pointer types, a major array bound is not part of a
function parameter type and cannot be deduced from an argument:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f1<span class='parenthesis'>(</span><span class='keyword'>int</span> a<span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f2<span class='parenthesis'>(</span><span class='keyword'>int</span> a<span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>20</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f3<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span>a<span class='parenthesis'>)</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>20</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> v<span class='squarebracket'>[</span><span class='literal'>10</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>20</span><span class='squarebracket'>]</span>;
  f1<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;                        <span class='comment'>// OK: <span class='tcode_in_codeblock'>i</span> deduced as <span class='tcode_in_codeblock'>20</span></span>
  f1<span class='anglebracket'>&lt;</span><span class='literal'>20</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;                    <span class='comment'>// OK</span>
  f2<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;                        <span class='comment'>// error: cannot deduce template-argument <span class='tcode_in_codeblock'>i</span></span>
  f2<span class='anglebracket'>&lt;</span><span class='literal'>10</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;                    <span class='comment'>// OK</span>
  f3<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span>;                        <span class='comment'>// OK: <span class='tcode_in_codeblock'>i</span> deduced as <span class='tcode_in_codeblock'>10</span></span>
<span class='curlybracket'>}</span>
</span></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.type-17'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8416'>#</a></div><div class='texpara'><div id='temp.deduct.type-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.type-note-4'>4</a></i>: <div id='temp.deduct.type-17.sentence-1' class='sentence'>If, in the declaration of a function template with a non-type
template parameter, the non-type template parameter
is used in a subexpression in the function parameter list,
the expression is a non-deduced context as specified above<a class='hidden_link' href='#temp.deduct.type-17.sentence-1'>.</a></div> <div id='temp.deduct.type-example-11' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-11'>11</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>i<span class='operator'>+</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span>, A<span class='anglebracket'>&lt;</span>i<span class='operator'>+</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> k<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span> a1;
  A<span class='anglebracket'>&lt;</span><span class='literal'>2</span><span class='anglebracket'>&gt;</span> a2;
  g<span class='parenthesis'>(</span>a1<span class='parenthesis'>)</span>;                        <span class='comment'>// error: deduction fails for expression <span class='tcode_in_codeblock'>i+1</span></span>
  g<span class='anglebracket'>&lt;</span><span class='literal'>0</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>a1<span class='parenthesis'>)</span>;                     <span class='comment'>// OK</span>
  f<span class='parenthesis'>(</span>a1, a2<span class='parenthesis'>)</span>;                    <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.type-18'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8438'>#</a></div><div class='texpara'><div id='temp.deduct.type-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.type-note-5'>5</a></i>: <div id='temp.deduct.type-18.sentence-1' class='sentence'>Template parameters do not participate in template argument deduction if
they are used only in non-deduced contexts<a class='hidden_link' href='#temp.deduct.type-18.sentence-1'>.</a></div> <div id='temp.deduct.type-18.sentence-2' class='sentence'>For example,</div></div><div class='texpara'><span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i, <span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
T deduce<span class='parenthesis'>(</span><span class='keyword'>typename</span> A<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>::</span>X x,    <span class='comment'>// <span class='tcode_in_codeblock'>T</span> is not deduced here</span>
         T t,                   <span class='comment'>// but <span class='tcode_in_codeblock'>T</span> is deduced here</span>
         <span class='keyword'>typename</span> B<span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span><span class='operator'>::</span>Y y<span class='parenthesis'>)</span>;   <span class='comment'>// <span class='tcode_in_codeblock'>i</span> is not deduced here</span>
A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> a;
B<span class='anglebracket'>&lt;</span><span class='literal'>77</span><span class='anglebracket'>&gt;</span>  b;

<span class='keyword'>int</span>    x <span class='operator'>=</span> deduce<span class='anglebracket'>&lt;</span><span class='literal'>77</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>a<span class='operator'>.</span>xm, <span class='literal'>62</span>, b<span class='operator'>.</span>ym<span class='parenthesis'>)</span>;
<span class='comment'>// <span class='tcode_in_codeblock'>T</span> deduced as <span class='tcode_in_codeblock'>int</span>; <span class='tcode_in_codeblock'>a.xm</span> must be convertible to <span class='tcode_in_codeblock'>A&lt;int&gt;&#x200b;::&#x200b;X</span></span>
<span class='comment'>// <span class='tcode_in_codeblock'>i</span> is explicitly specified to be <span class='tcode_in_codeblock'>77</span>; <span class='tcode_in_codeblock'>b.ym</span> must be convertible to <span class='tcode_in_codeblock'>B&lt;77&gt;&#x200b;::&#x200b;Y</span></span>
</span> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='temp.deduct.type-19'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8458'>#</a></div><div class='texpara'><div id='temp.deduct.type-19.sentence-1' class='sentence'>If <span class='texttt'>P</span> has a form that contains <span class='texttt'><span class='anglebracket'>&lt;</span>i<span class='anglebracket'>&gt;</span></span>, and
if the type of <span class='texttt'>i</span> differs from the type
of the corresponding template parameter
of the template named by the enclosing <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id__'><span class='textsf'><i >simple-template-id</i></span></span></a>,
deduction fails<a class='hidden_link' href='#temp.deduct.type-19.sentence-1'>.</a></div> <div id='temp.deduct.type-19.sentence-2' class='sentence'>If <span class='texttt'>P</span> has a form that contains <span class='texttt'><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span></span>, and if the type of
<span class='texttt'>i</span> is not an integral type, deduction fails<a class='hidden_link' href='#temp.deduct.type-19.sentence-2'>.</a><a class='footnoteref' href='#footnote-134' id='footnoteref-134' title='Although the template-argument corresponding to a template-parameter of type bool can be deduced from an array bound, the resulting value will always be true because the array bound will be nonzero.'>134</a></div> <div id='temp.deduct.type-example-12' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-12'>12</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>int</span> i<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> A <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>short</span> s<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>s<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> k1<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span> a;
  f<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>;             <span class='comment'>// error: deduction fails for conversion from <span class='tcode_in_codeblock'>int</span> to <span class='tcode_in_codeblock'>short</span></span>
  f<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>;          <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>short</span> cs<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>short</span> s<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span>s<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> k2<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  B<span class='anglebracket'>&lt;</span><span class='literal'>1</span><span class='anglebracket'>&gt;</span> b;
  g<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>;             <span class='comment'>// OK: cv-qualifiers are ignored on template parameter types</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.type-20'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-20'>20</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8496'>#</a></div><div class='texpara'><div id='temp.deduct.type-20.sentence-1' class='sentence'>A
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument__________'><span class='textsf'><i >template-argument</i></span></span></a>
can be deduced from a function, pointer to function, or
pointer-to-member-function type<a class='hidden_link' href='#temp.deduct.type-20.sentence-1'>.</a></div></div><div class='texpara'><div id='temp.deduct.type-example-13' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-13'>13</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>void</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T,<span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> foo<span class='parenthesis'>(</span>T,<span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>char</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span>,<span class='keyword'>int</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>char</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> m<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>g<span class='parenthesis'>)</span>;            <span class='comment'>// error: ambiguous</span>
  f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>h<span class='parenthesis'>)</span>;            <span class='comment'>// OK: void <span class='tcode_in_codeblock'>h(char,int)</span> is a unique match</span>
  f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>foo<span class='parenthesis'>)</span>;          <span class='comment'>// error: type deduction fails because <span class='tcode_in_codeblock'>foo</span> is a template</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.type-21'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-21'>21</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8519'>#</a></div><div class='texpara'><div id='temp.deduct.type-21.sentence-1' class='sentence'>A template
<a href='temp.param#nt:type-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:type-parameter'><span class='textsf'><i >type-parameter</i></span></span></a>
cannot be deduced from the type of a function default argument<a class='hidden_link' href='#temp.deduct.type-21.sentence-1'>.</a></div> <div id='temp.deduct.type-example-14' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-14'>14</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T <span class='operator'>=</span> <span class='literal'>5</span>, T <span class='operator'>=</span> <span class='literal'>7</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;             <span class='comment'>// OK: call <span class='tcode_in_codeblock'>f&lt;int&gt;(1,7)</span></span>
  f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;              <span class='comment'>// error: cannot deduce <span class='tcode_in_codeblock'>T</span></span>
  f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;         <span class='comment'>// OK: call <span class='tcode_in_codeblock'>f&lt;int&gt;(5,7)</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.deduct.type-22'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-22'>22</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8534'>#</a></div><div class='texpara'><div id='temp.deduct.type-22.sentence-1' class='sentence'>The
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument___________'><span class='textsf'><i >template-argument</i></span></span></a>
corresponding to a template
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter________'><span class='textsf'><i >template-parameter</i></span></span></a>
is deduced from the type of the
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument____________'><span class='textsf'><i >template-argument</i></span></span></a>
of a class template specialization used in the argument list of a function call<a class='hidden_link' href='#temp.deduct.type-22.sentence-1'>.</a></div> <div id='temp.deduct.type-example-15' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-15'>15</a></i>: <span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> X<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
A<span class='anglebracket'>&lt;</span>B<span class='anglebracket'>&gt;</span> ab;
f<span class='parenthesis'>(</span>ab<span class='parenthesis'>)</span>;              <span class='comment'>// calls <span class='tcode_in_codeblock'>f(A&lt;B&gt;)</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.deduct.type-23'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.type-23'>23</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8552'>#</a></div><div class='texpara'><div id='temp.deduct.type-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#temp.deduct.type-note-6'>6</a></i>: <div id='temp.deduct.type-23.sentence-1' class='sentence'>Template argument deduction involving parameter
packs (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>) can deduce zero or more arguments for
each parameter pack<a class='hidden_link' href='#temp.deduct.type-23.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='temp.deduct.type-example-16' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.deduct.type-example-16'>16</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> R, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> ArgTypes<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> X<span class='anglebracket'>&lt;</span>R<span class='parenthesis'>(</span><span class='keyword'>int</span>, ArgTypes <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Y <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> Y<span class='anglebracket'>&lt;</span>T, Types<span class='operator'>&amp;</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Types<span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> f<span class='parenthesis'>(</span><span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>Types <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>float</span><span class='parenthesis'>)</span>;

X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> x1;                      <span class='comment'>// uses primary template</span>
X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>float</span>, <span class='keyword'>double</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> x2;  <span class='comment'>// uses partial specialization; <span class='tcode_in_codeblock'>ArgTypes</span> contains <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>double</span></span>
X<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='parenthesis'>(</span><span class='keyword'>float</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span> x3;          <span class='comment'>// uses primary template</span>
Y<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> y1;                         <span class='comment'>// use primary template; <span class='tcode_in_codeblock'>Types</span> is empty</span>
Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='operator'>&amp;</span>, <span class='keyword'>float</span><span class='operator'>&amp;</span>, <span class='keyword'>double</span><span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span> y2;    <span class='comment'>// uses partial specialization; <span class='tcode_in_codeblock'>T</span> is <span class='tcode_in_codeblock'>int&amp;</span>, <span class='tcode_in_codeblock'>Types</span> contains <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>double</span></span>
Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span>, <span class='keyword'>float</span>, <span class='keyword'>double</span><span class='anglebracket'>&gt;</span> y3;       <span class='comment'>// uses primary template; <span class='tcode_in_codeblock'>Types</span> contains <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>float</span>, <span class='tcode_in_codeblock'>double</span></span>
<span class='keyword'>int</span> fv <span class='operator'>=</span> f<span class='parenthesis'>(</span>g<span class='parenthesis'>)</span>;                  <span class='comment'>// OK; <span class='tcode_in_codeblock'>Types</span> contains <span class='tcode_in_codeblock'>int</span>, <span class='tcode_in_codeblock'>float</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-134'><div class='texpara'><a class='footnotenum' href='#footnote-134'>134)</a><a class='footnoteBacklink' href='#footnoteref-134'>134)</a> <div id='footnote-134.sentence-1' class='sentence'>Although the
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument_________'><span class='textsf'><i >template-argument</i></span></span></a>
corresponding to a
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter______'><span class='textsf'><i >template-parameter</i></span></span></a>
of type
<span class='texttt'><span class='keyword'>bool</span></span>
can be deduced from an array bound, the resulting value will always be
<span class='texttt'><span class='literal'>true</span></span>
because the array bound will be nonzero<a class='hidden_link' href='#footnote-134.sentence-1'>.</a></div></div></div></div><div id='temp.deduct.decl' class='section'><h4 ><a class='secnum' href='#temp.deduct.decl' style='min-width:95pt'>13.10.3.7</a> Deducing template arguments from a function declaration <a class='abbr_ref' href='temp.deduct.decl'>[temp.deduct.decl]</a></h4><div class='para' id='temp.deduct.decl-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.decl-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8580'>#</a></div><div class='texpara'><div id='temp.deduct.decl-1.sentence-1' class='sentence'>In a declaration whose <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id___'><span class='textsf'><i >declarator-id</i></span></span></a> refers to a specialization
of a function template, template argument deduction is performed to identify
the specialization to which the declaration refers<a class='hidden_link' href='#temp.deduct.decl-1.sentence-1'>.</a></div> <div id='temp.deduct.decl-1.sentence-2' class='sentence'>Specifically, this is done
for <a href='temp.explicit' title='13.9.3&emsp;Explicit instantiation&emsp;[temp.explicit]'>explicit instantiations</a>, <a href='temp.expl.spec' title='13.9.4&emsp;Explicit specialization&emsp;[temp.expl.spec]'>explicit specializations</a>,
and certain <a href='temp.friend' title='13.7.5&emsp;Friends&emsp;[temp.friend]'>friend declarations</a><a class='hidden_link' href='#temp.deduct.decl-1.sentence-2'>.</a></div> <div id='temp.deduct.decl-1.sentence-3' class='sentence'>This is also done to
determine whether a deallocation function template specialization matches a placement
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span> (<a href='basic.stc.dynamic.deallocation' title='6.7.5.5.3&emsp;Deallocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>deallocation]</a>, <a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>)<a class='hidden_link' href='#temp.deduct.decl-1.sentence-3'>.</a></div> <div id='temp.deduct.decl-1.sentence-4' class='sentence'>In all these cases, <span class='texttt'>P</span> is the type of the function template being considered
as a potential match and <span class='texttt'>A</span> is either the function type from the
declaration
or the type of the deallocation function that would match the placement
<span class='texttt'><span class='keyword'>operator</span> <span class='keyword'>new</span></span> as described in <a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a><a class='hidden_link' href='#temp.deduct.decl-1.sentence-4'>.</a></div> <div id='temp.deduct.decl-1.sentence-5' class='sentence'>The
deduction is done as described in <a href='#temp.deduct.type' title='13.10.3.6&emsp;Deducing template arguments from a type'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>type]</a><a class='hidden_link' href='#temp.deduct.decl-1.sentence-5'>.</a></div></div></div><div class='para' id='temp.deduct.decl-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.deduct.decl-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8595'>#</a></div><div class='texpara'><div id='temp.deduct.decl-2.sentence-1' class='sentence'>If, for the set of function templates so considered, there is either no match or
more than one match after partial ordering has been considered (<a href='temp.func.order' title='13.7.7.3&emsp;Partial ordering of function templates'>[temp.<span class='shy'></span>func.<span class='shy'></span>order]</a>),
deduction fails and, in the declaration cases, the
program is ill-formed<a class='hidden_link' href='#temp.deduct.decl-2.sentence-1'>.</a></div></div></div></div></div><div id='temp.over' class='section'><h3 ><a class='secnum' href='#temp.over' style='min-width:80pt'>13.10.4</a> Overload resolution <a class='abbr_ref' href='temp.over'>[temp.over]</a></h3><div class='para' id='temp.over-1'><div class='marginalizedparent'><a class='marginalized' href='#temp.over-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8603'>#</a></div><div class='texpara'><div id='temp.over-1.sentence-1' class='sentence'><a class='index' id=':overloading,resolution,function_template'></a>When a call of a function or function template
is written (explicitly, or implicitly using the
operator notation), template argument deduction (<a href='#temp.deduct' title='13.10.3&emsp;Template argument deduction'>[temp.<span class='shy'></span>deduct]</a>)
and checking of any explicit template arguments (<a href='temp.arg' title='13.4&emsp;Template arguments'>[temp.<span class='shy'></span>arg]</a>) are performed
for each function template to find the template argument values (if any) that
can be used with that function template to instantiate a function template
specialization that can be invoked with the call arguments or,
for conversion function templates, that can convert to the required type<a class='hidden_link' href='#temp.over-1.sentence-1'>.</a></div> <div id='temp.over-1.sentence-2' class='sentence'>For each function template, if the argument deduction and checking succeeds,
the
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument_____________'><span class='textsf'><i >template-argument</i></span></span></a><i >s</i>
(deduced and/or explicit)
are used to synthesize the declaration of
a single function template specialization which is
added to the candidate functions set to be used in overload resolution<a class='hidden_link' href='#temp.over-1.sentence-2'>.</a></div> <div id='temp.over-1.sentence-3' class='sentence'>If, for a given function template, argument deduction fails or
the synthesized function template specialization would be ill-formed,
no such function is added to the set of candidate functions for that template<a class='hidden_link' href='#temp.over-1.sentence-3'>.</a></div> <div id='temp.over-1.sentence-4' class='sentence'>The complete set of candidate functions includes all the synthesized
declarations and all of the non-template functions found by name lookup<a class='hidden_link' href='#temp.over-1.sentence-4'>.</a></div> <div id='temp.over-1.sentence-5' class='sentence'>The synthesized declarations are
treated like any other functions in
the remainder of overload resolution, except as explicitly noted
in <a href='over.match.best' title='12.2.4&emsp;Best viable function'>[over.<span class='shy'></span>match.<span class='shy'></span>best]</a><a class='hidden_link' href='#temp.over-1.sentence-5'>.</a><a class='footnoteref' href='#footnote-135' id='footnoteref-135' title='The parameters of function template specializations contain no template parameter types. The set of conversions allowed on deduced arguments is limited, because the argument deduction process produces function templates with parameters that either match the call arguments exactly or differ only in ways that can be bridged by the allowed limited conversions. Non-deduced arguments allow the full range of conversions. Note also that [over.match.best] specifies that a non-template function will be given preference over a template specialization if the two functions are otherwise equally good candidates for an overload match.'>135</a></div></div></div><div class='para nonNormativeOnly' id='temp.over-2'><div class='marginalizedparent'><a class='marginalized' href='#temp.over-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8643'>#</a></div><div class='texpara'><div id='temp.over-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.over-example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T max<span class='parenthesis'>(</span>T a, T b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a<span class='anglebracket'>&gt;</span>b<span class='operator'>?</span>a<span class='operator'>:</span>b; <span class='curlybracket'>}</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> a, <span class='keyword'>int</span> b, <span class='keyword'>char</span> c, <span class='keyword'>char</span> d<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> m1 <span class='operator'>=</span> max<span class='parenthesis'>(</span>a,b<span class='parenthesis'>)</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>max(int a, int b)</span></span>
  <span class='keyword'>char</span> m2 <span class='operator'>=</span> max<span class='parenthesis'>(</span>c,d<span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>max(char a, char b)</span></span>
  <span class='keyword'>int</span> m3 <span class='operator'>=</span> max<span class='parenthesis'>(</span>a,c<span class='parenthesis'>)</span>;            <span class='comment'>// error: cannot generate <span class='tcode_in_codeblock'>max(int,char)</span></span>
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='temp.over-2.sentence-1' class='sentence'>Adding the non-template function
<span class='codeblock'><span class='keyword'>int</span> max<span class='parenthesis'>(</span><span class='keyword'>int</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;
</span>
to the example above would resolve the third call, by providing a function that
can be called for
<span class='texttt'>max<span class='parenthesis'>(</span>a,c<span class='parenthesis'>)</span></span>
after using the standard conversion of
<span class='texttt'><span class='keyword'>char</span></span>
to
<span class='texttt'><span class='keyword'>int</span></span>
for
<span class='texttt'>c</span><a class='hidden_link' href='#temp.over-2.sentence-1'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.over-3'><div class='marginalizedparent'><a class='marginalized' href='#temp.over-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8670'>#</a></div><div class='texpara'><div id='temp.over-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.over-example-2'>2</a></i>: <div id='temp.over-3.sentence-1' class='sentence'>Here is an example involving conversions on a function argument involved in
<a href='temp.names#nt:template-argument' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-argument______________'><span class='textsf'><i >template-argument</i></span></span></a>
deduction:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> D <span class='operator'>:</span> <span class='keyword'>public</span> B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span>B<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> bi, D<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> di<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>bi<span class='parenthesis'>)</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>f(bi)</span></span>
  f<span class='parenthesis'>(</span>di<span class='parenthesis'>)</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>f((B&lt;int&gt;&amp;)di)</span></span>
<span class='curlybracket'>}</span>
</span></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='temp.over-4'><div class='marginalizedparent'><a class='marginalized' href='#temp.over-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8687'>#</a></div><div class='texpara'><div id='temp.over-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.over-example-3'>3</a></i>: <div id='temp.over-4.sentence-1' class='sentence'>Here is an example involving conversions on a function argument not involved in
<a href='temp.param#nt:template-parameter' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:template-parameter_________'><span class='textsf'><i >template-parameter</i></span></span></a>
deduction:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>*</span>,<span class='keyword'>int</span><span class='parenthesis'>)</span>;       <span class='comment'>// #1</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T,<span class='keyword'>char</span><span class='parenthesis'>)</span>;       <span class='comment'>// #2</span>

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>*</span> pi, <span class='keyword'>int</span> i, <span class='keyword'>char</span> c<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span>pi,i<span class='parenthesis'>)</span>;          <span class='comment'>// #1: <span class='tcode_in_codeblock'>f&lt;int&gt;(pi,i)</span></span>
  f<span class='parenthesis'>(</span>pi,c<span class='parenthesis'>)</span>;          <span class='comment'>// #2: <span class='tcode_in_codeblock'>f&lt;int*&gt;(pi,c)</span></span>

  f<span class='parenthesis'>(</span>i,c<span class='parenthesis'>)</span>;           <span class='comment'>// #2: <span class='tcode_in_codeblock'>f&lt;int&gt;(i,c);</span></span>
  f<span class='parenthesis'>(</span>i,i<span class='parenthesis'>)</span>;           <span class='comment'>// #2: <span class='tcode_in_codeblock'>f&lt;int&gt;(i,char(i))</span></span>
<span class='curlybracket'>}</span>
</span></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='temp.over-5'><div class='marginalizedparent'><a class='marginalized' href='#temp.over-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/f8ac034ab30648da8e74427bdf6a8429ff6bf3fc/source/templates.tex#L8706'>#</a></div><div class='texpara'><div id='temp.over-5.sentence-1' class='sentence'>Only the signature of a function template specialization is needed to enter the
specialization in a set of candidate functions<a class='hidden_link' href='#temp.over-5.sentence-1'>.</a></div> <div id='temp.over-5.sentence-2' class='sentence'>Therefore only the function template declaration is needed to resolve a call
for which a template specialization is a candidate<a class='hidden_link' href='#temp.over-5.sentence-2'>.</a></div> <div id='temp.over-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#temp.over-example-4'>4</a></i>: <span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;    <span class='comment'>// declaration</span>

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  f<span class='parenthesis'>(</span><span class='literal'>"Annemarie"</span><span class='parenthesis'>)</span>;               <span class='comment'>// call of <span class='tcode_in_codeblock'>f&lt;const char*&gt;</span></span>
<span class='curlybracket'>}</span>
</span></div><div class='texpara'><div id='temp.over-5.sentence-3' class='sentence'>The call of
<span class='texttt'>f</span>
is well-formed even if the template
<span class='texttt'>f</span>
is only declared and not defined at the point of the call<a class='hidden_link' href='#temp.over-5.sentence-3'>.</a></div> <div id='temp.over-5.sentence-4' class='sentence'>The program will be ill-formed unless a specialization for
<span class='texttt'>f<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span></span>
is explicitly instantiated in some translation unit (<a href='temp.pre' title='13.1&emsp;Preamble'>[temp.<span class='shy'></span>pre]</a>)<a class='hidden_link' href='#temp.over-5.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div><div class='texpara'></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-135'><div class='texpara'><a class='footnotenum' href='#footnote-135'>135)</a><a class='footnoteBacklink' href='#footnoteref-135'>135)</a> <div id='footnote-135.sentence-1' class='sentence'>The parameters of function template
specializations contain no
template parameter types<a class='hidden_link' href='#footnote-135.sentence-1'>.</a></div> <div id='footnote-135.sentence-2' class='sentence'>The set of conversions allowed on deduced arguments is limited, because the
argument deduction process produces function templates with parameters that
either match the call arguments exactly or differ only in ways that can be
bridged by the allowed limited conversions<a class='hidden_link' href='#footnote-135.sentence-2'>.</a></div> <div id='footnote-135.sentence-3' class='sentence'>Non-deduced arguments allow the full range of conversions<a class='hidden_link' href='#footnote-135.sentence-3'>.</a></div> <div id='footnote-135.sentence-4' class='sentence'>Note also that <a href='over.match.best' title='12.2.4&emsp;Best viable function'>[over.<span class='shy'></span>match.<span class='shy'></span>best]</a> specifies that a non-template function will
be given preference over a template specialization if the two functions
are otherwise equally good candidates for an overload match<a class='hidden_link' href='#footnote-135.sentence-4'>.</a></div></div></div></div></div></body></html>