<!DOCTYPE html><html lang='en'><head><title>[expr.cond]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>7.6</a> Compound expressions <a class='abbr_ref' href='expr.compound#expr.cond'>[expr.compound]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>7.6.16</a> Conditional operator <a class='abbr_ref'>[expr.cond]</a></h3><div class='texpara'><a class='index' id=':expression,conditional_operator'></a><a class='index' id=':operator,conditional_expression'></a>
<div class='bnf' id='nt:conditional-expression'>
<a class='hidden_link' href='#nt:conditional-expression' title='7.6.16&emsp;Conditional operator&emsp;[expr.cond]'><span id='nt:conditional-expression'><span id=':conditional-expression'>conditional-expression<span class='textnormal'>:</span></span></span></a><br/><a href='expr.log.or#nt:logical-or-expression' title='7.6.15&emsp;Logical OR operator&emsp;[expr.log.or]'><span id='ntref:logical-or-expression'><span class='textsf'><i >logical-or-expression</i></span></span></a><br/><a href='expr.log.or#nt:logical-or-expression' title='7.6.15&emsp;Logical OR operator&emsp;[expr.log.or]'><span id='ntref:logical-or-expression_'><span class='textsf'><i >logical-or-expression</i></span></span></a> <span class='terminal'><span class='operator'>?</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression'><span class='textsf'><i >expression</i></span></span></a> <span class='terminal'><span class='operator'>:</span></span> <a href='expr.ass#nt:assignment-expression' title='7.6.19&emsp;Assignment and compound assignment operators&emsp;[expr.ass]'><span id='ntref:assignment-expression'><span class='textsf'><i >assignment-expression</i></span></span></a>
</div></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/expressions.tex#L6846'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>Conditional expressions group right-to-left<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>The first expression is
contextually converted to <span id=':bool'><span class='texttt'><span class='keyword'>bool</span></span></span> (<a href='conv' title='7.3&emsp;Standard conversions'>[conv]</a>)<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>It is
evaluated and if it is <span id=':true'><span class='texttt'><span class='literal'>true</span></span></span>, the result of the conditional
expression is the value of the second expression, otherwise that of the
third expression<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>Only one of the second and third expressions is
evaluated<a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>The first expression is sequenced before
the second or third expression (<a href='intro.execution' title='6.9.1&emsp;Sequential execution'>[intro.<span class='shy'></span>execution]</a>)<a class='hidden_link' href='#1.sentence-5'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/expressions.tex#L6857'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>If either the second or the third operand has type <span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span>,
one of the following shall hold:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.1'>(2.1)</a></div><div class='texpara'><div id='2.1.sentence-1' class='sentence'><a class='index' id=':conditional-expression,throw-expression_in'></a>The second or the third operand (but not both) is a (possibly
parenthesized) <a href='expr.throw#nt:throw-expression' title='7.6.18&emsp;Throwing an exception&emsp;[expr.throw]'><span id='ntref:throw-expression'><span class='textsf'><i >throw-expression</i></span></span></a> (<a href='expr.throw' title='7.6.18&emsp;Throwing an exception'>[expr.<span class='shy'></span>throw]</a>); the result
is of the type and value category of the other<a class='hidden_link' href='#2.1.sentence-1'>.</a></div> <div id='2.1.sentence-2' class='sentence'>The <a href='#nt:conditional-expression' title='7.6.16&emsp;Conditional operator&emsp;[expr.cond]'><span id='ntref:conditional-expression'><span class='textsf'><i >conditional-expression</i></span></span></a>
is a bit-field if that operand is a bit-field<a class='hidden_link' href='#2.1.sentence-2'>.</a></div></div></li><li id='2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.2'>(2.2)</a></div><div class='texpara'><div id='2.2.sentence-1' class='sentence'>Both the second and the third operands have type <span id=':void_'><span class='texttt'><span class='keyword'>void</span></span></span>; the
result is of type <span id=':void__'><span class='texttt'><span class='keyword'>void</span></span></span> and is a prvalue<a class='hidden_link' href='#2.2.sentence-1'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='2.2.sentence-2' class='sentence'>This
includes the case where both operands are <a href='expr.throw#nt:throw-expression' title='7.6.18&emsp;Throwing an exception&emsp;[expr.throw]'><span id='ntref:throw-expression_'><span class='textsf'><i >throw-expression</i></span></span></a><i >s</i><a class='hidden_link' href='#2.2.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li></ul></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/expressions.tex#L6877'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>Otherwise, if the second and third operand are glvalue bit-fields
of the same value category and
of types <i >cv1</i> <span class='texttt'>T</span> and <i >cv2</i> <span class='texttt'>T</span>, respectively,
the operands are considered to be of type <span class='mathit'>cv</span> <span class='texttt'>T</span>
for the remainder of this subclause,
where <span class='mathit'>cv</span> is the union of <i >cv1</i> and <i >cv2</i><a class='hidden_link' href='#3.sentence-1'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/expressions.tex#L6885'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>Otherwise, if the second and third operand have different types and
either has (possibly cv-qualified) class type, or if both
are glvalues of the same value category and the same type except for
cv-qualification, an attempt is made to
form an <a href='over.best.ics' title='12.2.4.2&emsp;Implicit conversion sequences&emsp;[over.best.ics]'>implicit conversion sequence</a> from
each of those operands to the type of the other<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>: <div id='4.sentence-2' class='sentence'>Properties such as access, whether an operand is a bit-field, or whether
a conversion function is deleted are ignored for that determination<a class='hidden_link' href='#4.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='4.sentence-3' class='sentence'>
Attempts are made to form an implicit conversion sequence
from an operand expression <span class='texttt'>E1</span> of type <span class='texttt'>T1</span>
to a target type related to the type <span class='texttt'>T2</span>
of the operand expression <span class='texttt'>E2</span> as follows:
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.1'>(4.1)</a></div><div class='texpara'><div id='4.1.sentence-1' class='sentence'>If <span class='texttt'>E2</span> is an lvalue, the target type is
“lvalue reference to <span class='texttt'>T2</span>”,
but an implicit conversion sequence can only be formed
if the reference would bind directly (<a href='dcl.init.ref' title='9.4.4&emsp;References'>[dcl.<span class='shy'></span>init.<span class='shy'></span>ref]</a>)
to a glvalue<a class='hidden_link' href='#4.1.sentence-1'>.</a></div></div></li><li id='4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.2'>(4.2)</a></div><div class='texpara'><div id='4.2.sentence-1' class='sentence'>If <span class='texttt'>E2</span> is an xvalue, the target type is
“rvalue reference to <span class='texttt'>T2</span>”,
but an implicit conversion sequence can only be formed
if the reference would bind directly<a class='hidden_link' href='#4.2.sentence-1'>.</a></div></div></li><li id='4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.3'>(4.3)</a></div><div class='texpara'><div id='4.3.sentence-1' class='sentence'>If <span class='texttt'>E2</span> is a prvalue or if neither of the conversion sequences above can be
formed and at least one of the operands has (possibly cv-qualified) class type:
<ul class='itemize'><li id='4.3.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#4.3.1'>(4.3.1)</a></div>if <span class='texttt'>T1</span> and <span class='texttt'>T2</span> are the same class type
(ignoring cv-qualification) and
<span class='texttt'>T2</span> is at least as cv-qualified as <span class='texttt'>T1</span>,
the target type is <span class='texttt'>T2</span>,</li><li id='4.3.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#4.3.2'>(4.3.2)</a></div>otherwise, if <span class='texttt'>T2</span> is a base class of <span class='texttt'>T1</span>,
the target type is <i >cv1</i> <span class='texttt'>T2</span>, where <i >cv1</i>
denotes the cv-qualifiers of <span class='texttt'>T1</span>,</li><li id='4.3.3'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#4.3.3'>(4.3.3)</a></div>otherwise, the target type is the type that <span class='texttt'>E2</span> would have
after applying the
<a href='conv.lval' title='7.3.2&emsp;Lvalue-to-rvalue conversion&emsp;[conv.lval]'>lvalue-to-rvalue</a>,
<a href='conv.array' title='7.3.3&emsp;Array-to-pointer conversion&emsp;[conv.array]'>array-to-pointer</a>, and
<a href='conv.func' title='7.3.4&emsp;Function-to-pointer conversion&emsp;[conv.func]'>function-to-pointer</a>
standard conversions<a class='hidden_link' href='#4.3.sentence-1'>.</a></li></ul></div></div></li></ul></div></div><div class='texpara'><div id='4.sentence-4' class='sentence'>Using this process, it is determined whether an implicit conversion
sequence can be formed from the second operand
to the target type determined for the third operand, and vice versa<a class='hidden_link' href='#4.sentence-4'>.</a></div> <div id='4.sentence-5' class='sentence'>If both sequences can be formed, or one can be formed but it is the
ambiguous conversion sequence, the program is ill-formed<a class='hidden_link' href='#4.sentence-5'>.</a></div> <div id='4.sentence-6' class='sentence'>If no conversion sequence can be formed, the operands are left unchanged
and further checking is performed as described below<a class='hidden_link' href='#4.sentence-6'>.</a></div> <div id='4.sentence-7' class='sentence'>Otherwise, if exactly one conversion sequence can be formed,
that conversion is applied to the chosen operand
and the converted operand is used in place of the original operand for
the remainder of this subclause<a class='hidden_link' href='#4.sentence-7'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>: <div id='4.sentence-8' class='sentence'>The conversion might be ill-formed even if an implicit conversion
sequence could be formed<a class='hidden_link' href='#4.sentence-8'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/expressions.tex#L6949'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>If the second and third operands are glvalues of the same value category
and have the same type, the
result is of that type and value category and it is a bit-field if the
second or the third operand is a bit-field, or if both are bit-fields<a class='hidden_link' href='#5.sentence-1'>.</a></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/expressions.tex#L6955'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>Otherwise, the result is a prvalue<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>If the second and third operands do
not have the same type, and either has (possibly cv-qualified) class
type, overload resolution is used to determine the conversions (if any)
to be applied to the operands (<a href='over.match.oper' title='12.2.2.3&emsp;Operators in expressions'>[over.<span class='shy'></span>match.<span class='shy'></span>oper]</a>, <a href='over.built' title='12.5&emsp;Built-in operators'>[over.<span class='shy'></span>built]</a>)<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>If the overload resolution fails, the program is ill-formed<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='6.sentence-4' class='sentence'>Otherwise,
the conversions thus determined are applied, and the converted operands
are used in place of the original operands for the remainder of this
subclause<a class='hidden_link' href='#6.sentence-4'>.</a></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/expressions.tex#L6965'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'><a href='conv.lval' title='7.3.2&emsp;Lvalue-to-rvalue conversion&emsp;[conv.lval]'>Lvalue-to-rvalue</a>, <a href='conv.array' title='7.3.3&emsp;Array-to-pointer conversion&emsp;[conv.array]'>array-to-pointer</a>,
and <a href='conv.func' title='7.3.4&emsp;Function-to-pointer conversion&emsp;[conv.func]'>function-to-pointer</a> standard conversions are
performed on the second and third operands<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>After those conversions, one
of the following shall hold:
<ul class='itemize'><li id='7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.1'>(7.1)</a></div><div class='texpara'><div id='7.1.sentence-1' class='sentence'>The second and third operands have the same type; the result is of
that type and the result object is initialized using the selected operand<a class='hidden_link' href='#7.1.sentence-1'>.</a></div></div></li><li id='7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.2'>(7.2)</a></div><div class='texpara'><div id='7.2.sentence-1' class='sentence'>The second and third operands have arithmetic or enumeration type;
the <a href='expr.arith.conv' title='7.4&emsp;Usual arithmetic conversions&emsp;[expr.arith.conv]'>usual arithmetic conversions</a> are performed to bring them to a common
type, and the result is of that type<a class='hidden_link' href='#7.2.sentence-1'>.</a></div></div></li><li id='7.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.3'>(7.3)</a></div><div class='texpara'><div id='7.3.sentence-1' class='sentence'>One or both of the second and third operands have pointer type;
<a href='conv.ptr' title='7.3.12&emsp;Pointer conversions&emsp;[conv.ptr]'>pointer conversions</a>,
<a href='conv.fctptr' title='7.3.14&emsp;Function pointer conversions&emsp;[conv.fctptr]'>function pointer conversions</a>, and
<a href='conv.qual' title='7.3.6&emsp;Qualification conversions&emsp;[conv.qual]'>qualification conversions</a>
are performed to bring them to their
<a href='expr.type#def:composite_pointer_type' title='7.2.2&emsp;Type&emsp;[expr.type]'>composite pointer type</a><a class='hidden_link' href='#7.3.sentence-1'>.</a></div> <div id='7.3.sentence-2' class='sentence'>The result is of the composite
pointer type<a class='hidden_link' href='#7.3.sentence-2'>.</a></div></div></li><li id='7.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.4'>(7.4)</a></div><div class='texpara'><div id='7.4.sentence-1' class='sentence'>One or both of the second and third operands have pointer-to-member type;
pointer to member conversions (<a href='conv.mem' title='7.3.13&emsp;Pointer-to-member conversions'>[conv.<span class='shy'></span>mem]</a>),
function pointer conversions (<a href='conv.fctptr' title='7.3.14&emsp;Function pointer conversions'>[conv.<span class='shy'></span>fctptr]</a>), and
qualification conversions (<a href='conv.qual' title='7.3.6&emsp;Qualification conversions'>[conv.<span class='shy'></span>qual]</a>)
are performed to bring them to their composite
pointer type (<a href='expr.type' title='7.2.2&emsp;Type'>[expr.<span class='shy'></span>type]</a>)<a class='hidden_link' href='#7.4.sentence-1'>.</a></div> <div id='7.4.sentence-2' class='sentence'>The result is of the composite pointer type<a class='hidden_link' href='#7.4.sentence-2'>.</a></div></div></li><li id='7.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#7.5'>(7.5)</a></div><div class='texpara'><div id='7.5.sentence-1' class='sentence'>Both the second and third operands have type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>nullptr_<span class='shy'></span>t</span> or one has
that type and the other is a null pointer constant<a class='hidden_link' href='#7.5.sentence-1'>.</a></div> <div id='7.5.sentence-2' class='sentence'>The result is of type
<span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>nullptr_<span class='shy'></span>t</span><a class='hidden_link' href='#7.5.sentence-2'>.</a></div></div></li></ul></div></div></div></div></body></html>