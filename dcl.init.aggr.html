<!DOCTYPE html><html lang='en'><head><title>[dcl.init.aggr]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>9</a> Declarations <a class='abbr_ref' href='./#dcl.dcl'>[dcl.dcl]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>9.4</a> Initializers <a class='abbr_ref' href='dcl.init#aggr'>[dcl.init]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>9.4.2</a> Aggregates <a class='abbr_ref'>[dcl.init.aggr]</a></h3><div class='texpara'><a class='index' id=':aggregate'></a><a class='index' id=':initialization,aggregate'></a><a class='index' id=':aggregate_initialization'></a><a class='index' id=':initialization,array'></a><a class='index' id=':initialization,class_object'></a><a class='index' id=':{},initializer_list'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L4860'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>An <a class='hidden_link' href='#def:aggregate' title='9.4.2&emsp;Aggregates&emsp;[dcl.init.aggr]'><span id='def:aggregate'><i >aggregate</i></span></a> is an array or a class (<a href='class' title='11&emsp;Classes'>[class]</a>) with
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.1'>(1.1)</a></div>no user-declared or inherited constructors (<a href='class.ctor' title='11.4.5&emsp;Constructors'>[class.<span class='shy'></span>ctor]</a>),</li><li id='1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.2'>(1.2)</a></div>no private or protected direct non-static data members (<a href='class.access' title='11.8&emsp;Member access control'>[class.<span class='shy'></span>access]</a>),</li><li id='1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.3'>(1.3)</a></div>no private or protected direct base classes (<a href='class.access.base' title='11.8.3&emsp;Accessibility of base classes and base class members'>[class.<span class='shy'></span>access.<span class='shy'></span>base]</a>), and</li><li id='1.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.4'>(1.4)</a></div>no virtual functions (<a href='class.virtual' title='11.7.3&emsp;Virtual functions'>[class.<span class='shy'></span>virtual]</a>) or virtual base classes (<a href='class.mi' title='11.7.2&emsp;Multiple base classes'>[class.<span class='shy'></span>mi]</a>)<a class='hidden_link' href='#1.sentence-1'>.</a></li></ul></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='1.sentence-2' class='sentence'>Aggregate initialization does not allow accessing
protected and private base class' members or constructors<a class='hidden_link' href='#1.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L4877'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:aggregate,elements' title='9.4.2&emsp;Aggregates&emsp;[dcl.init.aggr]'><span id='def:aggregate,elements'><i >elements</i></span></a> of an aggregate are:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.1'>(2.1)</a></div>for an array, the array elements in increasing subscript order, or</li><li id='2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.2'>(2.2)</a></div>for a class, the direct base classes in declaration order,
followed by the direct non-static data members (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>)
that are not members of an anonymous union, in declaration order<a class='hidden_link' href='#2.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L4888'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>When an aggregate is initialized by an initializer list
as specified in <a href='dcl.init.list' title='9.4.5&emsp;List-initialization'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>,
the elements of the initializer list are taken as initializers
for the elements of the aggregate<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>The <a class='hidden_link' href='#def:explicitly_initialized_elements,aggregate' title='9.4.2&emsp;Aggregates&emsp;[dcl.init.aggr]'><span id='def:explicitly_initialized_elements,aggregate'><i >explicitly initialized elements</i></span></a>
of the aggregate are determined as follows:
<ul class='itemize'><li id='3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.1'>(3.1)</a></div><div class='texpara'><div id='3.1.sentence-1' class='sentence'>If the initializer list is
a brace-enclosed <a href='dcl.init.general#nt:designated-initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:designated-initializer-list'><span class='textsf'><i >designated-initializer-list</i></span></span></a>,
the aggregate shall be of class type,
the <a href='lex.name#nt:identifier' title='5.10&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier'><span class='textsf'><i >identifier</i></span></span></a> in each <a href='dcl.init.general#nt:designator' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:designator'><span class='textsf'><i >designator</i></span></span></a>
shall name a direct non-static data member of the class, and
the explicitly initialized elements of the aggregate
are the elements that are, or contain, those members<a class='hidden_link' href='#3.1.sentence-1'>.</a></div></div></li><li id='3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.2'>(3.2)</a></div><div class='texpara'><div id='3.2.sentence-1' class='sentence'>If the initializer list is a brace-enclosed <a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list'><span class='textsf'><i >initializer-list</i></span></span></a>,
the explicitly initialized elements of the aggregate
are the first <span class='math'><span class='mathalpha'>n</span></span> elements of the aggregate,
where <span class='math'><span class='mathalpha'>n</span></span> is the number of elements in the initializer list<a class='hidden_link' href='#3.2.sentence-1'>.</a></div></div></li><li id='3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#3.3'>(3.3)</a></div><div class='texpara'><div id='3.3.sentence-1' class='sentence'>Otherwise, the initializer list must be <span class='texttt'><span class='curlybracket'>{</span><span class='curlybracket'>}</span></span>,
and there are no explicitly initialized elements<a class='hidden_link' href='#3.3.sentence-1'>.</a></div></div></li></ul></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L4914'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>For each explicitly initialized element:
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.1'>(4.1)</a></div><div class='texpara'><div id='4.1.sentence-1' class='sentence'>If the element is an anonymous union member and
the initializer list is
a brace-enclosed <a href='dcl.init.general#nt:designated-initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:designated-initializer-list_'><span class='textsf'><i >designated-initializer-list</i></span></span></a>,
the element is initialized by the
<a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list_'><span class='textsf'><i >braced-init-list</i></span></span></a> <span class='texttt'><span class='curlybracket'>{</span> </span><i >D</i><span class='texttt'> <span class='curlybracket'>}</span></span>,
where <i >D</i> is the <a href='dcl.init.general#nt:designated-initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:designated-initializer-clause'><span class='textsf'><i >designated-initializer-clause</i></span></span></a>
naming a member of the anonymous union member<a class='hidden_link' href='#4.1.sentence-1'>.</a></div> <div id='4.1.sentence-2' class='sentence'>There shall be only one such <a href='dcl.init.general#nt:designated-initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:designated-initializer-clause_'><span class='textsf'><i >designated-initializer-clause</i></span></span></a><a class='hidden_link' href='#4.1.sentence-2'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>: <div id='4.1.sentence-3' class='sentence'><span class='codeblock'><span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>union</span> <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> a;
    <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> p;
  <span class='curlybracket'>}</span>;
  <span class='keyword'>int</span> x;
<span class='curlybracket'>}</span> c <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='operator'>.</span>a <span class='operator'>=</span> <span class='literal'>1</span>, <span class='operator'>.</span>x <span class='operator'>=</span> <span class='literal'>3</span> <span class='curlybracket'>}</span>;
</span>
initializes <span class='texttt'>c<span class='operator'>.</span>a</span> with 1 and <span class='texttt'>c<span class='operator'>.</span>x</span> with 3<a class='hidden_link' href='#4.1.sentence-3'>.</a></div> â€”&nbsp;<i>end example</i>]</div></div></div></li><li id='4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.2'>(4.2)</a></div><div class='texpara'><div id='4.2.sentence-1' class='sentence'>Otherwise, the element is copy-initialized
from the corresponding <a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause'><span class='textsf'><i >initializer-clause</i></span></span></a>
or is initialized with the <a href='dcl.init.general#nt:brace-or-equal-initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:brace-or-equal-initializer'><span class='textsf'><i >brace-or-equal-initializer</i></span></span></a>
of the corresponding <a href='dcl.init.general#nt:designated-initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:designated-initializer-clause__'><span class='textsf'><i >designated-initializer-clause</i></span></span></a><a class='hidden_link' href='#4.2.sentence-1'>.</a></div> <div id='4.2.sentence-2' class='sentence'>If that initializer is of the form
<a href='expr.ass#nt:assignment-expression' title='7.6.19&emsp;Assignment and compound assignment operators&emsp;[expr.ass]'><span id='ntref:assignment-expression'><span class='textsf'><i >assignment-expression</i></span></span></a> or
<span class='texttt'><span class='operator'>=</span> </span><a href='expr.ass#nt:assignment-expression' title='7.6.19&emsp;Assignment and compound assignment operators&emsp;[expr.ass]'><span id='ntref:assignment-expression_'><span class='textsf'><i >assignment-expression</i></span></span></a>
and
a narrowing conversion (<a href='dcl.init.list' title='9.4.5&emsp;List-initialization'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>) is required
to convert the expression, the program is ill-formed<a class='hidden_link' href='#4.2.sentence-2'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>: <div id='4.2.sentence-3' class='sentence'>If the initialization is by <a href='dcl.init.general#nt:designated-initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:designated-initializer-clause___'><span class='textsf'><i >designated-initializer-clause</i></span></span></a>,
its form determines whether copy-initialization or direct-initialization
is performed<a class='hidden_link' href='#4.2.sentence-3'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>: <div id='4.2.sentence-4' class='sentence'>If an initializer is itself an initializer list,
the element is list-initialized, which will result in a recursive application
of the rules in this subclause if the element is an aggregate<a class='hidden_link' href='#4.2.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>: <div id='4.2.sentence-5' class='sentence'><span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> x;
  <span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> i;
    <span class='keyword'>int</span> j;
  <span class='curlybracket'>}</span> b;
<span class='curlybracket'>}</span> a <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='curlybracket'>{</span> <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;
</span>
initializes
<span class='texttt'>a<span class='operator'>.</span>x</span>
with 1,
<span class='texttt'>a<span class='operator'>.</span>b<span class='operator'>.</span>i</span>
with 2,
<span class='texttt'>a<span class='operator'>.</span>b<span class='operator'>.</span>j</span>
with 3<a class='hidden_link' href='#4.2.sentence-5'>.</a></div></div><div class='texpara'><div id='4.2.sentence-6' class='sentence'><span class='codeblock'><span class='keyword'>struct</span> base1 <span class='curlybracket'>{</span> <span class='keyword'>int</span> b1, b2 <span class='operator'>=</span> <span class='literal'>42</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> base2 <span class='curlybracket'>{</span>
  base2<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    b3 <span class='operator'>=</span> <span class='literal'>42</span>;
  <span class='curlybracket'>}</span>
  <span class='keyword'>int</span> b3;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> derived <span class='operator'>:</span> base1, base2 <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> d;
<span class='curlybracket'>}</span>;

derived d1<span class='curlybracket'>{</span><span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span>, <span class='curlybracket'>{</span><span class='curlybracket'>}</span>, <span class='literal'>4</span><span class='curlybracket'>}</span>;
derived d2<span class='curlybracket'>{</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span>, <span class='curlybracket'>{</span><span class='curlybracket'>}</span>, <span class='literal'>4</span><span class='curlybracket'>}</span>;
</span>
initializes
<span class='texttt'>d1<span class='operator'>.</span>b1</span> with 1,
<span class='texttt'>d1<span class='operator'>.</span>b2</span> with 2,
<span class='texttt'>d1<span class='operator'>.</span>b3</span> with 42,
<span class='texttt'>d1<span class='operator'>.</span>d</span> with 4, and
<span class='texttt'>d2<span class='operator'>.</span>b1</span> with 0,
<span class='texttt'>d2<span class='operator'>.</span>b2</span> with 42,
<span class='texttt'>d2<span class='operator'>.</span>b3</span> with 42,
<span class='texttt'>d2<span class='operator'>.</span>d</span> with 4<a class='hidden_link' href='#4.2.sentence-6'>.</a></div> â€”&nbsp;<i>end example</i>]</div></div></div></li></ul></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5004'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>For a non-union aggregate,
each element that is not an explicitly initialized element
is initialized as follows:
<ul class='itemize'><li id='5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.1'>(5.1)</a></div><div class='texpara'><div id='5.1.sentence-1' class='sentence'>If the element has a default member initializer (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>),
the element is initialized from that initializer<a class='hidden_link' href='#5.1.sentence-1'>.</a></div></div></li><li id='5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.2'>(5.2)</a></div><div class='texpara'><div id='5.2.sentence-1' class='sentence'>Otherwise, if the element is not a reference, the element
is copy-initialized from an empty initializer list (<a href='dcl.init.list' title='9.4.5&emsp;List-initialization'>[dcl.<span class='shy'></span>init.<span class='shy'></span>list]</a>)<a class='hidden_link' href='#5.2.sentence-1'>.</a></div></div></li><li id='5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.3'>(5.3)</a></div><div class='texpara'><div id='5.3.sentence-1' class='sentence'>Otherwise, the program is ill-formed<a class='hidden_link' href='#5.3.sentence-1'>.</a></div></div></li></ul></div> <div id='5.sentence-2' class='sentence'>
If the aggregate is a union and the initializer list is empty, then
<ul class='itemize'><li id='5.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.4'>(5.4)</a></div>if any variant member has a default member initializer,
that member is initialized from its default member initializer;</li><li id='5.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.5'>(5.5)</a></div>otherwise, the first member of the union (if any)
is copy-initialized from an empty initializer list<a class='hidden_link' href='#5.sentence-2'>.</a></li></ul></div></div></div><div class='para nonNormativeOnly' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5028'>#</a></div><div class='texpara'><div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>: <div id='6.sentence-1' class='sentence'><span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='keyword'>int</span> a; <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> b; <span class='keyword'>int</span> c; <span class='keyword'>int</span> d <span class='operator'>=</span> b<span class='squarebracket'>[</span>a<span class='squarebracket'>]</span>; <span class='curlybracket'>}</span>;
S ss <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>"asdf"</span> <span class='curlybracket'>}</span>;
</span>
initializes
<span class='texttt'>ss<span class='operator'>.</span>a</span>
with 1,
<span class='texttt'>ss<span class='operator'>.</span>b</span>
with <span class='texttt'><span class='literal'>"asdf"</span></span>,
<span class='texttt'>ss<span class='operator'>.</span>c</span>
with the value of an expression of the form
<span class='texttt'><span class='keyword'>int</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span></span>
(that is, <span class='texttt'><span class='literal'>0</span></span>), and <span class='texttt'>ss<span class='operator'>.</span>d</span> with the value of <span class='texttt'>ss<span class='operator'>.</span>b<span class='squarebracket'>[</span>ss<span class='operator'>.</span>a<span class='squarebracket'>]</span></span>
(that is, <span class='texttt'>'s'</span>), and in
<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>int</span> i, j, k <span class='operator'>=</span> <span class='literal'>42</span>; <span class='curlybracket'>}</span>;
X a<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span>, <span class='literal'>4</span>, <span class='literal'>5</span>, <span class='literal'>6</span> <span class='curlybracket'>}</span>;
X b<span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>, <span class='curlybracket'>{</span> <span class='literal'>4</span>, <span class='literal'>5</span>, <span class='literal'>6</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;
</span>
<span class='texttt'>a</span> and <span class='texttt'>b</span> have the same value</div></div><div class='texpara'><span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  string a;
  <span class='keyword'>int</span> b <span class='operator'>=</span> <span class='literal'>42</span>;
  <span class='keyword'>int</span> c <span class='operator'>=</span> <span class='operator'>-</span><span class='literal'>1</span>;
<span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='6.sentence-2' class='sentence'><span class='texttt'>A<span class='curlybracket'>{</span><span class='operator'>.</span>c<span class='operator'>=</span><span class='literal'>21</span><span class='curlybracket'>}</span></span> has the following steps:
<ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#6.1'>(6.1)</a></div>Initialize <span class='texttt'>a</span> with <span class='texttt'><span class='curlybracket'>{</span><span class='curlybracket'>}</span></span></li><li id='6.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#6.2'>(6.2)</a></div>Initialize <span class='texttt'>b</span> with <span class='texttt'><span class='operator'>=</span> <span class='literal'>42</span></span></li><li id='6.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#6.3'>(6.3)</a></div>Initialize <span class='texttt'>c</span> with <span class='texttt'><span class='operator'>=</span> <span class='literal'>21</span></span></li></ul></div> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5067'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>The initializations of the elements of the aggregate
are evaluated in the element order<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>That is,
all value computations and side effects associated with a given element
are sequenced before
those of any element that follows it in order<a class='hidden_link' href='#7.sentence-2'>.</a></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5075'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'>An aggregate that is a class can also be initialized with a single
expression not enclosed in braces, as described in <a href='dcl.init' title='9.4&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a><a class='hidden_link' href='#8.sentence-1'>.</a></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5079'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'>The destructor for each element of class type
is potentially invoked (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)
from the context where the aggregate initialization occurs<a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>: <div id='9.sentence-2' class='sentence'>This provision ensures that destructors can be called
for fully-constructed subobjects
in case an exception is thrown (<a href='except.ctor' title='14.3&emsp;Constructors and destructors'>[except.<span class='shy'></span>ctor]</a>)<a class='hidden_link' href='#9.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5089'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'>An array of unknown bound initialized with a
brace-enclosed
<a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list_'><span class='textsf'><i >initializer-list</i></span></span></a>
containing
<span class='texttt'>n</span>
<a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause_'><span class='textsf'><i >initializer-clause</i></span></span></a><i >s</i>
is defined as having
<span class='texttt'>n</span>
elements (<a href='dcl.array' title='9.3.4.5&emsp;Arrays'>[dcl.<span class='shy'></span>array]</a>)<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-4'>4</a></i>: <div id='10.sentence-2' class='sentence'><span class='codeblock'><span class='keyword'>int</span> x<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>3</span>, <span class='literal'>5</span> <span class='curlybracket'>}</span>;
</span>
declares and initializes
<span class='texttt'>x</span>
as a one-dimensional array that has three elements
since no size was specified and there are three initializers<a class='hidden_link' href='#10.sentence-2'>.</a></div> â€”&nbsp;<i>end example</i>]</div></div> <div id='10.sentence-3' class='sentence'>
An array of unknown bound shall not be initialized with
an empty <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list__'><span class='textsf'><i >braced-init-list</i></span></span></a> <span class='texttt'><span class='curlybracket'>{</span><span class='curlybracket'>}</span></span><a class='hidden_link' href='#10.sentence-3'>.</a><a class='footnoteref' href='#footnote-84' id='footnoteref-84' title='The syntax provides for empty braced-init-lists, but nonetheless C++ does not have zero length arrays.'>84</a></div> <div id='note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-5'>5</a></i>: <div id='10.sentence-4' class='sentence'>A default member initializer does not determine the bound for a member
array of unknown bound<a class='hidden_link' href='#10.sentence-4'>.</a></div> <div id='10.sentence-5' class='sentence'>Since the default member initializer is
ignored if a suitable <a href='class.base.init#nt:mem-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:mem-initializer'><span class='textsf'><i >mem-initializer</i></span></span></a> is present (<a href='class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>),
the default member initializer is not
considered to initialize the array of unknown bound<a class='hidden_link' href='#10.sentence-5'>.</a></div> <div id='example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-5'>5</a></i>: <span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> y<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>0</span> <span class='curlybracket'>}</span>;          <span class='comment'>// error: non-static data member of incomplete type</span>
<span class='curlybracket'>}</span>;
</span> â€”&nbsp;<i>end example</i>]</div></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5129'>#</a></div><div class='texpara'><div id='note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-6'>6</a></i>: <div id='11.sentence-1' class='sentence'>Static data members,
non-static data members of anonymous union members,
and
unnamed bit-fields
are not considered elements of the aggregate<a class='hidden_link' href='#11.sentence-1'>.</a></div> <div id='example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-6'>6</a></i>: <span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i;
  <span class='keyword'>static</span> <span class='keyword'>int</span> s;
  <span class='keyword'>int</span> j;
  <span class='keyword'>int</span> <span class='operator'>:</span><span class='literal'>17</span>;
  <span class='keyword'>int</span> k;
<span class='curlybracket'>}</span> a <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span>, <span class='literal'>3</span> <span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='11.sentence-2' class='sentence'>Here, the second initializer 2 initializes
<span class='texttt'>a<span class='operator'>.</span>j</span>
and not the static data member
<span class='texttt'>A<span class='operator'>&#x200b;::&#x200b;</span>s</span>, and the third initializer 3 initializes <span class='texttt'>a<span class='operator'>.</span>k</span>
and not the unnamed bit-field before it<a class='hidden_link' href='#11.sentence-2'>.</a></div> â€”&nbsp;<i>end example</i>]</div></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5155'>#</a></div><div class='texpara'><div id='12.sentence-1' class='sentence'>An
<a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list__'><span class='textsf'><i >initializer-list</i></span></span></a>
is ill-formed if the number of
<a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause__'><span class='textsf'><i >initializer-clause</i></span></span></a><i >s</i>
exceeds the number of elements of the aggregate<a class='hidden_link' href='#12.sentence-1'>.</a></div> <div id='example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-7'>7</a></i>: <div id='12.sentence-2' class='sentence'><span class='codeblock'><span class='keyword'>char</span> cv<span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>'a'</span>, <span class='literal'>'s'</span>, <span class='literal'>'d'</span>, <span class='literal'>'f'</span>, <span class='literal'>0</span> <span class='curlybracket'>}</span>;     <span class='comment'>// error</span>
</span>
is ill-formed<a class='hidden_link' href='#12.sentence-2'>.</a></div> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5168'>#</a></div><div class='texpara'><div id='13.sentence-1' class='sentence'>If a member has a default member initializer
and a potentially-evaluated subexpression thereof is an aggregate
initialization that would use that default member initializer,
the program is ill-formed<a class='hidden_link' href='#13.sentence-1'>.</a></div> <div id='example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-8'>8</a></i>: <span class='codeblock'><span class='keyword'>struct</span> A;
<span class='keyword'>extern</span> A a;
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> A<span class='operator'>&amp;</span> a1 <span class='curlybracket'>{</span> A<span class='curlybracket'>{</span>a,a<span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;       <span class='comment'>// OK</span>
  <span class='keyword'>const</span> A<span class='operator'>&amp;</span> a2 <span class='curlybracket'>{</span> A<span class='curlybracket'>{</span><span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;          <span class='comment'>// error</span>
<span class='curlybracket'>}</span>;
A a<span class='curlybracket'>{</span>a,a<span class='curlybracket'>}</span>;                       <span class='comment'>// OK</span>

<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> n <span class='operator'>=</span> B<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='operator'>.</span>n;                <span class='comment'>// error</span>
<span class='curlybracket'>}</span>;
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5189'>#</a></div><div class='texpara'><div id='14.sentence-1' class='sentence'>If an aggregate class <span class='texttt'>C</span> contains a subaggregate element
<span class='texttt'>e</span> with no elements,
the <a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause___'><span class='textsf'><i >initializer-clause</i></span></span></a> for <span class='texttt'>e</span> shall not be
omitted from an <a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list___'><span class='textsf'><i >initializer-list</i></span></span></a> for an object of type
<span class='texttt'>C</span> unless the <a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause____'><span class='textsf'><i >initializer-clause</i></span></span></a><i >s</i> for all
elements of <span class='texttt'>C</span> following <span class='texttt'>e</span> are also omitted<a class='hidden_link' href='#14.sentence-1'>.</a></div> <div id='example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-9'>9</a></i>: <span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> s;
<span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  S s1;
  <span class='keyword'>int</span> i1;
  S s2;
  <span class='keyword'>int</span> i2;
  S s3;
  <span class='keyword'>int</span> i3;
<span class='curlybracket'>}</span> a <span class='operator'>=</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>,              <span class='comment'>// Required initialization</span>
  <span class='literal'>0</span>,
  s,                <span class='comment'>// Required initialization</span>
  <span class='literal'>0</span>
<span class='curlybracket'>}</span>;                  <span class='comment'>// Initialization not required for <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;s3</span> because <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;i3</span> is also not initialized</span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5215'>#</a></div><div class='texpara'><div id='15.sentence-1' class='sentence'>When initializing a multidimensional array,
the
<a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause_____'><span class='textsf'><i >initializer-clause</i></span></span></a><i >s</i>
initialize the elements with the last (rightmost) index of the array
varying the fastest (<a href='dcl.array' title='9.3.4.5&emsp;Arrays'>[dcl.<span class='shy'></span>array]</a>)<a class='hidden_link' href='#15.sentence-1'>.</a></div> <div id='example-10' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-10'>10</a></i>: <div id='15.sentence-2' class='sentence'><span class='codeblock'><span class='keyword'>int</span> x<span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>3</span>, <span class='literal'>1</span>, <span class='literal'>4</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>;
</span>
initializes
<span class='texttt'>x<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span>
to
<span class='texttt'><span class='literal'>3</span></span>,
<span class='texttt'>x<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span></span>
to
<span class='texttt'><span class='literal'>1</span></span>,
<span class='texttt'>x<span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span>
to
<span class='texttt'><span class='literal'>4</span></span>,
and
<span class='texttt'>x<span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span></span>
to
<span class='texttt'><span class='literal'>2</span></span><a class='hidden_link' href='#15.sentence-2'>.</a></div> <div id='15.sentence-3' class='sentence'>On the other hand,
<span class='codeblock'><span class='keyword'>float</span> y<span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span> <span class='literal'>1</span> <span class='curlybracket'>}</span>, <span class='curlybracket'>{</span> <span class='literal'>2</span> <span class='curlybracket'>}</span>, <span class='curlybracket'>{</span> <span class='literal'>3</span> <span class='curlybracket'>}</span>, <span class='curlybracket'>{</span> <span class='literal'>4</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span>
initializes the first column of
<span class='texttt'>y</span>
(regarded as a two-dimensional array)
and leaves the rest zero<a class='hidden_link' href='#15.sentence-3'>.</a></div> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='16'><div class='marginalizedparent'><a class='marginalized' href='#16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5251'>#</a></div><div class='texpara'><div id='16.sentence-1' class='sentence'>Braces can be elided in an
<a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list____'><span class='textsf'><i >initializer-list</i></span></span></a>
as follows<a class='hidden_link' href='#16.sentence-1'>.</a></div> <div id='16.sentence-2' class='sentence'>If the
<a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list_____'><span class='textsf'><i >initializer-list</i></span></span></a>
begins with a left brace,
then the succeeding comma-separated list of
<a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause______'><span class='textsf'><i >initializer-clause</i></span></span></a><i >s</i>
initializes the elements of a subaggregate;
it is erroneous for there to be more
<a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause_______'><span class='textsf'><i >initializer-clause</i></span></span></a><i >s</i>
than elements<a class='hidden_link' href='#16.sentence-2'>.</a></div> <div id='16.sentence-3' class='sentence'>If, however, the
<a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list______'><span class='textsf'><i >initializer-list</i></span></span></a>
for a subaggregate does not begin with a left brace,
then only enough
<a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause________'><span class='textsf'><i >initializer-clause</i></span></span></a><i >s</i>
from the list are taken to initialize the elements of the subaggregate;
any remaining
<a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause_________'><span class='textsf'><i >initializer-clause</i></span></span></a><i >s</i>
are left to initialize the next element of the aggregate
of which the current subaggregate is an element<a class='hidden_link' href='#16.sentence-3'>.</a></div> <div id='example-11' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-11'>11</a></i>: <div id='16.sentence-4' class='sentence'><span class='codeblock'><span class='keyword'>float</span> y<span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>3</span>, <span class='literal'>5</span> <span class='curlybracket'>}</span>,
  <span class='curlybracket'>{</span> <span class='literal'>2</span>, <span class='literal'>4</span>, <span class='literal'>6</span> <span class='curlybracket'>}</span>,
  <span class='curlybracket'>{</span> <span class='literal'>3</span>, <span class='literal'>5</span>, <span class='literal'>7</span> <span class='curlybracket'>}</span>,
<span class='curlybracket'>}</span>;
</span>
is a completely-braced initialization:
1, 3, and 5 initialize the first row of the array
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span>,
namely
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span>,
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span></span>,
and
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#16.sentence-4'>.</a></div> <div id='16.sentence-5' class='sentence'>Likewise the next two lines initialize
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span></span>
and
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#16.sentence-5'>.</a></div> <div id='16.sentence-6' class='sentence'>The initializer ends early and therefore
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span></span>'s
elements are initialized as if explicitly initialized with an
expression of the form
<span class='texttt'><span class='keyword'>float</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
that is, are initialized with
<span class='texttt'><span class='literal'>0.0</span></span><a class='hidden_link' href='#16.sentence-6'>.</a></div> <div id='16.sentence-7' class='sentence'>In the following example, braces in the
<a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list_______'><span class='textsf'><i >initializer-list</i></span></span></a>
are elided;
however the
<a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list________'><span class='textsf'><i >initializer-list</i></span></span></a>
has the same effect as the completely-braced
<a href='dcl.init.general#nt:initializer-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-list_________'><span class='textsf'><i >initializer-list</i></span></span></a>
of the above example,
<span class='codeblock'><span class='keyword'>float</span> y<span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>3</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span>
  <span class='literal'>1</span>, <span class='literal'>3</span>, <span class='literal'>5</span>, <span class='literal'>2</span>, <span class='literal'>4</span>, <span class='literal'>6</span>, <span class='literal'>3</span>, <span class='literal'>5</span>, <span class='literal'>7</span>
<span class='curlybracket'>}</span>;
</span></div></div><div class='texpara'><div id='16.sentence-8' class='sentence'>The initializer for
<span class='texttt'>y</span>
begins with a left brace, but the one for
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span></span>
does not,
therefore three elements from the list are used<a class='hidden_link' href='#16.sentence-8'>.</a></div> <div id='16.sentence-9' class='sentence'>Likewise the next three are taken successively for
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span></span>
and
<span class='texttt'>y<span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#16.sentence-9'>.</a></div> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='17'><div class='marginalizedparent'><a class='marginalized' href='#17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5327'>#</a></div><div class='texpara'><div id='17.sentence-1' class='sentence'>All implicit type conversions (<a href='conv' title='7.3&emsp;Standard conversions'>[conv]</a>) are considered when
initializing the element with an <a href='expr.ass#nt:assignment-expression' title='7.6.19&emsp;Assignment and compound assignment operators&emsp;[expr.ass]'><span id='ntref:assignment-expression__'><span class='textsf'><i >assignment-expression</i></span></span></a><a class='hidden_link' href='#17.sentence-1'>.</a></div> <div id='17.sentence-2' class='sentence'>If the
<a href='expr.ass#nt:assignment-expression' title='7.6.19&emsp;Assignment and compound assignment operators&emsp;[expr.ass]'><span id='ntref:assignment-expression___'><span class='textsf'><i >assignment-expression</i></span></span></a>
can initialize an element, the element is initialized<a class='hidden_link' href='#17.sentence-2'>.</a></div> <div id='17.sentence-3' class='sentence'>Otherwise, if the element is itself a subaggregate,
brace elision is assumed and the
<a href='expr.ass#nt:assignment-expression' title='7.6.19&emsp;Assignment and compound assignment operators&emsp;[expr.ass]'><span id='ntref:assignment-expression____'><span class='textsf'><i >assignment-expression</i></span></span></a>
is considered for the initialization of the first element of the subaggregate<a class='hidden_link' href='#17.sentence-3'>.</a></div> <div id='note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-7'>7</a></i>: <div id='17.sentence-4' class='sentence'>As specified above, brace elision cannot apply to
subaggregates with no elements; an
<a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause__________'><span class='textsf'><i >initializer-clause</i></span></span></a> for the entire subobject is
required<a class='hidden_link' href='#17.sentence-4'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div><div class='texpara'><div id='example-12' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-12'>12</a></i>: <span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i;
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='curlybracket'>{</span>
  A a1, a2;
  <span class='keyword'>int</span> z;
<span class='curlybracket'>}</span>;
A a;
B b <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>4</span>, a, a <span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='17.sentence-5' class='sentence'>Braces are elided around the
<a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause___________'><span class='textsf'><i >initializer-clause</i></span></span></a>
for
<span class='texttt'>b<span class='operator'>.</span>a1<span class='operator'>.</span>i</span><a class='hidden_link' href='#17.sentence-5'>.</a></div> <div id='17.sentence-6' class='sentence'><span class='texttt'>b<span class='operator'>.</span>a1<span class='operator'>.</span>i</span>
is initialized with 4,
<span class='texttt'>b<span class='operator'>.</span>a2</span>
is initialized with
<span class='texttt'>a</span>,
<span class='texttt'>b<span class='operator'>.</span>z</span>
is initialized with whatever
<span class='texttt'>a<span class='operator'>.</span><span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
returns<a class='hidden_link' href='#17.sentence-6'>.</a></div> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='18'><div class='marginalizedparent'><a class='marginalized' href='#18'>18</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5373'>#</a></div><div class='texpara'><a class='index' id=':initialization,array_of_class_objects'></a><div id='note-8' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-8'>8</a></i>: <div id='18.sentence-1' class='sentence'>An aggregate array or an aggregate class can contain elements of a
class type with a user-declared constructor (<a href='class.ctor' title='11.4.5&emsp;Constructors'>[class.<span class='shy'></span>ctor]</a>)<a class='hidden_link' href='#18.sentence-1'>.</a></div> <div id='18.sentence-2' class='sentence'>Initialization of these aggregate objects is described in <a href='class.expl.init' title='11.9.2&emsp;Explicit initialization'>[class.<span class='shy'></span>expl.<span class='shy'></span>init]</a><a class='hidden_link' href='#18.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='19'><div class='marginalizedparent'><a class='marginalized' href='#19'>19</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5381'>#</a></div><div class='texpara'><div id='note-9' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-9'>9</a></i>: <div id='19.sentence-1' class='sentence'>Whether the initialization of aggregates with static storage duration
is static or dynamic is specified
in <a href='basic.start.static' title='6.9.3.2&emsp;Static initialization'>[basic.<span class='shy'></span>start.<span class='shy'></span>static]</a>, <a href='basic.start.dynamic' title='6.9.3.3&emsp;Dynamic initialization of non-block variables'>[basic.<span class='shy'></span>start.<span class='shy'></span>dynamic]</a>, and <a href='stmt.dcl' title='8.8&emsp;Declaration statement'>[stmt.<span class='shy'></span>dcl]</a><a class='hidden_link' href='#19.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='20'><div class='marginalizedparent'><a class='marginalized' href='#20'>20</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5388'>#</a></div><div class='texpara'><div id='20.sentence-1' class='sentence'><a class='index' id=':initialization,union'></a>When a union is initialized with an initializer list,
there shall not be more than one
explicitly initialized element<a class='hidden_link' href='#20.sentence-1'>.</a></div> <div id='example-13' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-13'>13</a></i>: <span class='codeblock'><span class='keyword'>union</span> u <span class='curlybracket'>{</span> <span class='keyword'>int</span> a; <span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> b; <span class='curlybracket'>}</span>;
u a <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>1</span> <span class='curlybracket'>}</span>;
u b <span class='operator'>=</span> a;
u c <span class='operator'>=</span> <span class='literal'>1</span>;                        <span class='comment'>// error</span>
u d <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>0</span>, <span class='literal'>"asdf"</span> <span class='curlybracket'>}</span>;            <span class='comment'>// error</span>
u e <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>"asdf"</span> <span class='curlybracket'>}</span>;               <span class='comment'>// error</span>
u f <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='operator'>.</span>b <span class='operator'>=</span> <span class='literal'>"asdf"</span> <span class='curlybracket'>}</span>;
u g <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='operator'>.</span>a <span class='operator'>=</span> <span class='literal'>1</span>, <span class='operator'>.</span>b <span class='operator'>=</span> <span class='literal'>"asdf"</span> <span class='curlybracket'>}</span>;  <span class='comment'>// error</span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='21'><div class='marginalizedparent'><a class='marginalized' href='#21'>21</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/a4b1ffd9e65188ae19c29dffd2db42cb1558cee2/source/declarations.tex#L5406'>#</a></div><div class='texpara'><div id='note-10' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-10'>10</a></i>: <div id='21.sentence-1' class='sentence'>As described above,
the braces around the
<a href='dcl.init.general#nt:initializer-clause' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer-clause____________'><span class='textsf'><i >initializer-clause</i></span></span></a>
for a union member can be omitted if the
union is a member of another aggregate<a class='hidden_link' href='#21.sentence-1'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-84'><div class='texpara'><a class='footnotenum' href='#footnote-84'>84)</a><a class='footnoteBacklink' href='#footnoteref-84'>84)</a> <div id='footnote-84.sentence-1' class='sentence'>The syntax provides for empty <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list'><span class='textsf'><i >braced-init-list</i></span></span></a><i >s</i>,
but nonetheless C++ does not have zero length arrays<a class='hidden_link' href='#footnote-84.sentence-1'>.</a></div></div></div></div></body></html>