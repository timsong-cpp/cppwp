<!DOCTYPE html><html lang='en'><head><title>[temp.explicit]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>13</a> Templates <a class='abbr_ref' href='./#temp'>[temp]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>13.8</a> Template instantiation and specialization <a class='abbr_ref' href='temp.spec#temp.explicit'>[temp.spec]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>13.8.2</a> Explicit instantiation <a class='abbr_ref'>[temp.explicit]</a></h3><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6144'>#</a></div><div id='1.sentence-1' class='sentence'><span class='indexparent'><a class='index' id=':instantiation,explicit'></a></span>A class, function, variable, or member template specialization can be explicitly
instantiated from its template<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>A member function, member class or static data member of a class template can
be explicitly instantiated from the member definition associated with its class
template<a class='hidden_link' href='#1.sentence-2'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6153'>#</a></div><div id='2.sentence-1' class='sentence'>The syntax for explicit instantiation is:</div><pre class='bnf'><a class='nontermdef' href='#nt:explicit-instantiation' id='nt:explicit-instantiation'>explicit-instantiation:</a>
&#9;<span class='texttt'><span class='keyword'>extern</span></span><span class='indexparent'><a class='index' id=':extern'></a></span><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <span class='texttt'><span class='keyword'>template</span></span><span class='indexparent'><a class='index' id=':template'></a></span> <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i>
</pre><div id='2.sentence-2' class='sentence'>There are two forms of explicit instantiation: an explicit instantiation
definition and an explicit instantiation declaration<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>An explicit instantiation
declaration begins with the <span class='texttt'><span class='keyword'>extern</span></span> keyword<a class='hidden_link' href='#2.sentence-3'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6165'>#</a></div><div id='3.sentence-1' class='sentence'>An explicit instantiation shall not use
a <i ><a href='dcl.stc#nt:storage-class-specifier'>storage-class-specifier</a></i>
other than <span class='texttt'><span class='keyword'>thread_&shy;local</span></span><span class='indexparent'><a class='index' id=':thread_local'></a></span><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>An explicit instantiation of a
function template,
member function of a class template, or
variable template
shall not
use the <span class='texttt'><span class='keyword'>inline</span></span>, <span class='texttt'><span class='keyword'>constexpr</span></span>, or <span class='texttt'><span class='keyword'>consteval</span></span> specifiers<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>No <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i>
shall appertain to an explicit instantiation<a class='hidden_link' href='#3.sentence-3'>.</a></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6178'>#</a></div><div id='4.sentence-1' class='sentence'>If the explicit instantiation is for a class or member class, the
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> in the <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i>
shall include a <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i>;
otherwise, the <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i>
shall be a <i ><a href='dcl.dcl#nt:simple-declaration'>simple-declaration</a></i> whose <i ><a href='dcl.decl#nt:init-declarator-list'>init-declarator-list</a></i>
comprises a single <i ><a href='dcl.decl#nt:init-declarator'>init-declarator</a></i>
that does not have an <i ><a href='dcl.init#nt:initializer'>initializer</a></i><a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>If the explicit instantiation is for
a function or member function,
the
<i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>
in the
<i ><a href='dcl.decl#nt:declarator'>declarator</a></i>
shall be either a
<i ><a href='temp.names#nt:template-id'>template-id</a></i>
or, where all template arguments can be deduced, a
<i ><a href='temp.names#nt:template-name'>template-name</a></i> or <i ><a href='over.oper#nt:operator-function-id'>operator-function-id</a></i><a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.note-1' class='note'>[&nbsp;<a class='note_link' href='#4.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-3' class='sentence'>The declaration may declare a
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>,
in which case the
<i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i>
of the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
must be a
<i ><a href='temp.names#nt:template-id'>template-id</a></i><a class='hidden_link' href='#4.sentence-3'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='4.sentence-4' class='sentence'>
If the explicit instantiation is for a member function, a member class or
a static data member of a class template specialization,
the name of the class template specialization in the
<i ><a href='expr.prim.id.qual#nt:qualified-id'>qualified-id</a></i>
for the member name shall be a <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i><a class='hidden_link' href='#4.sentence-4'>.</a></div> <div id='4.sentence-5' class='sentence'>If the explicit instantiation is for a variable template specialization,
the <i ><a href='expr.prim.id.unqual#nt:unqualified-id'>unqualified-id</a></i> in the <i ><a href='dcl.decl#nt:declarator'>declarator</a></i>
shall be a <i ><a href='temp.names#nt:simple-template-id'>simple-template-id</a></i><a class='hidden_link' href='#4.sentence-5'>.</a></div> <div id='4.sentence-6' class='sentence'>An explicit instantiation shall appear in an enclosing namespace
of its template<a class='hidden_link' href='#4.sentence-6'>.</a></div> <div id='4.sentence-7' class='sentence'>If the name declared in the explicit
instantiation is an unqualified name, the explicit instantiation
shall appear in the namespace where its template is declared or, if that
namespace is inline (<a href='namespace.def'>[namespace.def]</a>), any namespace from its enclosing
namespace set<a class='hidden_link' href='#4.sentence-7'>.</a></div> <div id='4.note-2' class='note'>[&nbsp;<a class='note_link' href='#4.note-2'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='4.sentence-8' class='sentence'>Regarding qualified names in declarators, see <a href='dcl.meaning'>[dcl.meaning]</a><a class='hidden_link' href='#4.sentence-8'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='4.example-1' class='example'>[&nbsp;<a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span> <span class='keyword'>void</span> mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='keyword'>class</span> Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span> <span class='keyword'>void</span> Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;       <span class='comment'>// argument is deduced here</span>

<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>T<span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> N<span class='operator'>::</span>f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6240'>#</a></div><div id='5.sentence-1' class='sentence'>A declaration of a function template, a variable template, a member function
or static data member
of a class template, or a member function template of a class or class
template shall precede an explicit instantiation of that entity<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>A definition
of a class template, a member class of a class template, or a member class
template of a class or class template shall precede an explicit instantiation
of that entity unless the explicit instantiation is preceded by an explicit
specialization of the entity with the same template arguments<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>If the
<i ><a href='dcl.dcl#nt:declaration'>declaration</a></i>
of the explicit instantiation names an implicitly-declared <a href='special'>special member
function</a>, the program is ill-formed<a class='hidden_link' href='#5.sentence-3'>.</a></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6254'>#</a></div><div id='6.sentence-1' class='sentence'>The <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i> in an <i ><a href='#nt:explicit-instantiation'>explicit-instantiation</a></i> and
the <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i> produced by the corresponding substitution
into the templated function, variable, or class
are two declarations of the same entity<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.note-1' class='note'>[&nbsp;<a class='note_link' href='#6.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='6.sentence-2' class='sentence'>These declarations are required to have matching types as specified in <a href='basic.link'>[basic.link]</a>, except as specified in <a href='except.spec'>[except.spec]</a><a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.example-1' class='example'>[&nbsp;<a class='example_link' href='#6.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> T var <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='keyword'>float</span> var<span class='anglebracket'>&lt;</span><span class='keyword'>float</span><span class='anglebracket'>&gt;</span>;      <span class='comment'>// OK, instantiated variable has type <span class='tcode_in_codeblock'>float</span></span>
<span class='keyword'>template</span> <span class='keyword'>int</span> var<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='squarebracket'>[</span><span class='literal'>16</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span>;    <span class='comment'>// OK, absence of major array bound is permitted</span>
<span class='keyword'>template</span> <span class='keyword'>int</span> <span class='operator'>*</span>var<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;         <span class='comment'>// error: instantiated variable has type <span class='tcode_in_codeblock'>int</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> av <span class='operator'>=</span> T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='keyword'>int</span> av<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;           <span class='comment'>// OK, variable with type <span class='tcode_in_codeblock'>int</span> can be redeclared with type <span class='tcode_in_codeblock'>auto</span></span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> f<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;         <span class='comment'>// error: function with deduced return type</span>
                                <span class='comment'>// redeclared with non-deduced return type (<a href='dcl.spec.auto'>[dcl.spec.auto]</a>)</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div>  —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='6.sentence-3' class='sentence'>
Despite its syntactic form, the <i ><a href='dcl.dcl#nt:declaration'>declaration</a></i> in an <i ><a href='#nt:explicit-instantiation'>explicit-instantiation</a></i> for a variable is not itself a definition and does not conflict with the definition instantiated by an explicit instantiation definition for that variable<a class='hidden_link' href='#6.sentence-3'>.</a></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6279'>#</a></div><div id='7.sentence-1' class='sentence'>For a given set of template arguments, if an explicit
instantiation of a template appears after a declaration of
an explicit specialization for that template, the explicit
instantiation has no effect<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='7.sentence-2' class='sentence'>Otherwise, for an explicit instantiation
definition the definition of a
function template, a variable template, a member
function template, or a member function or static
data member of a class template shall be present in every
translation unit in which it is explicitly instantiated<a class='hidden_link' href='#7.sentence-2'>.</a></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6290'>#</a></div><div id='8.sentence-1' class='sentence'>An explicit instantiation of a class, function template, or variable template
specialization is
placed in the namespace in which the template is defined<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='8.sentence-2' class='sentence'>An explicit instantiation for a member of a class template is placed in
the namespace where the enclosing class template is defined<a class='hidden_link' href='#8.sentence-2'>.</a></div> <div id='8.sentence-3' class='sentence'>An explicit instantiation for a member template is placed in the namespace
where the enclosing class or class template is defined<a class='hidden_link' href='#8.sentence-3'>.</a></div> <div id='8.example-1' class='example'>[&nbsp;<a class='example_link' href='#8.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>namespace</span> N <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Y <span class='curlybracket'>{</span> <span class='keyword'>void</span> mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span> <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>template</span> <span class='keyword'>class</span> Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;          <span class='comment'>// error: class template <span class='tcode_in_codeblock'>Y</span> not visible in the global namespace</span>

<span class='keyword'>using</span> N<span class='operator'>::</span>Y;
<span class='keyword'>template</span> <span class='keyword'>class</span> Y<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span>;          <span class='comment'>// error: explicit instantiation outside of the namespace of the template</span>

<span class='keyword'>template</span> <span class='keyword'>class</span> N<span class='operator'>::</span>Y<span class='anglebracket'>&lt;</span><span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span>;             <span class='comment'>// OK: explicit instantiation in namespace <span class='tcode_in_codeblock'>N</span></span>
<span class='keyword'>template</span> <span class='keyword'>void</span> N<span class='operator'>::</span>Y<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>mf<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK: explicit instantiation in namespace <span class='tcode_in_codeblock'>N</span></span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6315'>#</a></div><div id='9.sentence-1' class='sentence'>A trailing
<i ><a href='temp.names#nt:template-argument'>template-argument</a></i>
can be left unspecified in an explicit instantiation of a function template
specialization or of a member function template specialization provided
it can be deduced from the type of a function parameter (<a href='temp.deduct'>[temp.deduct]</a>)<a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='9.example-1' class='example'>[&nbsp;<a class='example_link' href='#9.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> Array <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> sort<span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>

<span class='comment'>// instantiate <span class='tcode_in_codeblock'>sort(Array&lt;int&gt;&amp;)</span> -- template-argument deduced</span>
<span class='keyword'>template</span> <span class='keyword'>void</span> sort<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>Array<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6331'>#</a></div><div id='10.note-1' class='note'>[&nbsp;<a class='note_link' href='#10.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='10.sentence-1' class='sentence'>An explicit instantiation of a constrained template
shall satisfy that template's <a href='temp.constr.decl#def:associated_constraints'>associated constraints</a><a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='10.sentence-2' class='sentence'>The satisfaction of constraints is determined
when forming the template name of an explicit instantiation
in which all template arguments are specified (<a href='temp.names'>[temp.names]</a>),
or, for explicit instantiations of function templates,
during template argument deduction (<a href='temp.deduct.decl'>[temp.deduct.decl]</a>)
when one or more trailing template arguments are left unspecified<a class='hidden_link' href='#10.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6344'>#</a></div><div id='11.sentence-1' class='sentence'>An explicit instantiation that names a class
template specialization is also an explicit
instantiation of the same kind (declaration or definition) of each
of its members (not including members inherited from base classes and members
that are templates) that has not been previously explicitly specialized in
the translation unit containing the explicit instantiation,
provided that the associated constraints, if any,
of that member are satisfied by the template arguments of the explicit
instantiation (<a href='temp.constr.decl'>[temp.constr.decl]</a>, <a href='temp.constr.constr'>[temp.constr.constr]</a>),
except as described below<a class='hidden_link' href='#11.sentence-1'>.</a></div> <div id='11.note-1' class='note'>[&nbsp;<a class='note_link' href='#11.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='11.sentence-2' class='sentence'>In addition, it will typically be an explicit instantiation of certain
<span class='indexparent'><a class='index' id=':implementation-dependent'></a></span>implementation-dependent data about the class<a class='hidden_link' href='#11.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6359'>#</a></div><div id='12.sentence-1' class='sentence'>An explicit instantiation definition that names a class template
specialization explicitly instantiates the class template specialization
and is an explicit instantiation definition of only those
members that have been defined at the point of instantiation<a class='hidden_link' href='#12.sentence-1'>.</a></div></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6365'>#</a></div><div id='13.sentence-1' class='sentence'>An explicit instantiation of a prospective destructor (<a href='class.dtor'>[class.dtor]</a>)
shall name the selected destructor of the class<a class='hidden_link' href='#13.sentence-1'>.</a></div></div><div class='para' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6369'>#</a></div><div id='14.sentence-1' class='sentence'>Except for inline functions and variables, declarations with types deduced from their
initializer or return value (<a href='dcl.spec.auto'>[dcl.spec.auto]</a>), <span class='texttt'><span class='keyword'>const</span></span> variables of
literal types,
variables of reference types, and class template specializations,
explicit instantiation declarations have the
effect of suppressing the implicit instantiation
of the definition of the entity to which they refer<a class='hidden_link' href='#14.sentence-1'>.</a></div> <div id='14.note-1' class='note'>[&nbsp;<a class='note_link' href='#14.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='14.sentence-2' class='sentence'>The intent is that an inline function that is the
subject of an explicit instantiation declaration will still be implicitly
instantiated when <a href='basic.def.odr'>odr-used</a> so that the body can be considered for inlining, but
that no out-of-line copy of the inline function would be generated in the
translation unit<a class='hidden_link' href='#14.sentence-2'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div> </div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6383'>#</a></div><div id='15.sentence-1' class='sentence'>If an entity is the subject of both an explicit instantiation declaration
and an explicit instantiation definition in the same translation unit, the
definition shall follow the declaration<a class='hidden_link' href='#15.sentence-1'>.</a></div> <div id='15.sentence-2' class='sentence'>An entity that is the subject of an
explicit instantiation declaration and that is also used
in a way that would otherwise cause an <a href='temp.inst'>implicit instantiation</a>
in the translation unit
shall be the subject of an explicit instantiation definition somewhere in the
program; otherwise the program is ill-formed, no diagnostic required<a class='hidden_link' href='#15.sentence-2'>.</a></div> <div id='15.note-1' class='note'>[&nbsp;<a class='note_link' href='#15.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='15.sentence-3' class='sentence'>This rule does apply to inline functions even though an
explicit instantiation declaration of such an entity has no other normative
effect<a class='hidden_link' href='#15.sentence-3'>.</a></div> <div id='15.sentence-4' class='sentence'>This is needed to ensure that if the address of an inline function is
taken in a translation unit in which the implementation chose to suppress the
out-of-line body, another translation unit will supply the body<a class='hidden_link' href='#15.sentence-4'>.</a></div> —&nbsp;<i>end note</i></div>&nbsp;]</div>  <div id='15.sentence-5' class='sentence'>
An explicit instantiation declaration shall not name a specialization of a
template with internal linkage<a class='hidden_link' href='#15.sentence-5'>.</a></div></div><div class='para' id='16'><div class='marginalizedparent'><a class='marginalized' href='#16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8fdd7d4307f1ea0ecf1af00503142f46e23bd15f/source/templates.tex#L6400'>#</a></div><div id='16.sentence-1' class='sentence'>An explicit instantiation does not constitute a use of a default argument,
so default argument instantiation is not done<a class='hidden_link' href='#16.sentence-1'>.</a></div> <div id='16.example-1' class='example'>[&nbsp;<a class='example_link' href='#16.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
<span class='keyword'>char</span><span class='operator'>*</span> p <span class='operator'>=</span> <span class='literal'>0</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> T g<span class='parenthesis'>(</span>T x <span class='operator'>=</span> <span class='operator'>&amp;</span>p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span>
<span class='keyword'>template</span> <span class='keyword'>int</span> g<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK even though <span class='tcode_in_codeblock'>&amp;p</span> isn't an <span class='tcode_in_codeblock'>int</span>.</span>
</pre> —&nbsp;<i>end example</i></div>&nbsp;]</div> </div></div></body></html>