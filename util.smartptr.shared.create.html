<!DOCTYPE html><html lang='en'><head><title>[util.smartptr.shared.create]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>20</a> Memory management library <a class='abbr_ref' href='./#mem'>[mem]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>20.3</a> Smart pointers <a class='abbr_ref' href='smartptr#util.smartptr.shared.create'>[smartptr]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>20.3.2</a> Shared-ownership pointers <a class='abbr_ref' href='util.sharedptr#util.smartptr.shared.create'>[util.sharedptr]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>20.3.2.2</a> Class template <span class='texttt'>shared_<span class='shy'></span>ptr</span> <a class='abbr_ref' href='util.smartptr.shared#create'>[util.smartptr.shared]</a></h4><h4 ><a class='secnum' style='min-width:110pt'>20.3.2.2.7</a> Creation <a class='abbr_ref'>[util.smartptr.shared.create]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4076'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>The common requirements that apply to all
<span class='texttt'>make_<span class='shy'></span>shared</span>,
<span class='texttt'>allocate_<span class='shy'></span>shared</span>,
<span class='texttt'>make_<span class='shy'></span>shared_<span class='shy'></span>for_<span class='shy'></span>overwrite</span>, and
<span class='texttt'>allocate_<span class='shy'></span>shared_<span class='shy'></span>for_<span class='shy'></span>overwrite</span> overloads,
unless specified otherwise, are described below<a class='hidden_link' href='#1.sentence-1'>.</a></div></div></div><div class='texpara'><div id='lib:allocate_shared'><div id='lib:make_shared'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span><i >args</i><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, <i >args</i><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared_for_overwrite<span class='parenthesis'>(</span><i >args</i><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared_for_overwrite<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, <i >args</i><span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4098'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'><i >Preconditions</i>: <span class='texttt'>A</span> meets
the <a href='allocator.requirements.general#:Cpp17Allocator' title='16.4.4.6.1&emsp;General&emsp;[allocator.requirements.general]'><i >Cpp17Allocator</i></a> requirements (<a href='allocator.requirements.general' title='16.4.4.6.1&emsp;General'>[allocator.<span class='shy'></span>requirements.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4103'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'><i >Effects</i>: Allocates memory for an object of type <span class='texttt'>T</span>
(or <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span> when <span class='texttt'>T</span> is <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span>,
where <span class='texttt'>N</span> is determined from <i >args</i> as specified by the concrete overload)<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>The object is initialized from <i >args</i> as specified by the concrete overload<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>The <span class='texttt'>allocate_<span class='shy'></span>shared</span> and <span class='texttt'>allocate_<span class='shy'></span>shared_<span class='shy'></span>for_<span class='shy'></span>overwrite</span> templates
use a copy of <span class='texttt'>a</span>
(rebound for an unspecified <span class='texttt'>value_<span class='shy'></span>type</span>) to allocate memory<a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='3.sentence-4' class='sentence'>If an exception is thrown, the functions have no effect<a class='hidden_link' href='#3.sentence-4'>.</a></div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4114'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'><i >Postconditions</i>: <span class='texttt'>r<span class='operator'>.</span>get<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>!</span><span class='operator'>=</span> <span class='literal'>nullptr</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> r<span class='operator'>.</span>use_<span class='shy'></span>count<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span></span>,
where <span class='texttt'>r</span> is the return value<a class='hidden_link' href='#4.sentence-1'>.</a></div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4119'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> instance that stores and owns the address of
the newly constructed object<a class='hidden_link' href='#5.sentence-1'>.</a></div></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4124'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'><i >Throws</i>: <span class='texttt'>bad_<span class='shy'></span>alloc</span>, or
an exception thrown from <span class='texttt'>allocate</span> or from the initialization of the object<a class='hidden_link' href='#6.sentence-1'>.</a></div></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4129'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'><i >Remarks</i>: <ul class='itemize'><li id='7.1'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#7.1'>(7.1)</a></div><div class='texpara'><div id='7.1.sentence-1' class='sentence'>Implementations should perform no more than one memory allocation<a class='hidden_link' href='#7.1.sentence-1'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='7.1.sentence-2' class='sentence'>This provides efficiency equivalent to an intrusive smart pointer<a class='hidden_link' href='#7.1.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></li><li id='7.2'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#7.2'>(7.2)</a></div><div class='texpara'><div id='7.2.sentence-1' class='sentence'>When an object of an array type <span class='texttt'>U</span> is specified to have
  an initial value of <span class='texttt'>u</span> (of the same type),
  this shall be interpreted to mean that
  each array element of the object has as its initial value
  the corresponding element from <span class='texttt'>u</span><a class='hidden_link' href='#7.2.sentence-1'>.</a></div></div></li><li id='7.3'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#7.3'>(7.3)</a></div><div class='texpara'><div id='7.3.sentence-1' class='sentence'>When an object of an array type is specified to have
  a default initial value,
  this shall be interpreted to mean that each array element of the object
  has a default initial value<a class='hidden_link' href='#7.3.sentence-1'>.</a></div></div></li><li id='7.4'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#7.4'>(7.4)</a></div><div class='texpara'><div id='7.4.sentence-1' class='sentence'>When a (sub)object of a non-array type <span class='texttt'>U</span> is specified to have
  an initial value of <span class='texttt'>v</span>, or <span class='texttt'>U<span class='parenthesis'>(</span>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>,
  where <span class='texttt'>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> is a list of constructor arguments,
  <span class='texttt'>make_<span class='shy'></span>shared</span> shall initialize this (sub)object
  via the expression <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>new</span><span class='parenthesis'>(</span>pv<span class='parenthesis'>)</span> U<span class='parenthesis'>(</span>v<span class='parenthesis'>)</span></span> or <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>new</span><span class='parenthesis'>(</span>pv<span class='parenthesis'>)</span> U<span class='parenthesis'>(</span>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span> respectively,
  where <span class='texttt'>pv</span> has type <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> and points to storage
  suitable to hold an object of type <span class='texttt'>U</span><a class='hidden_link' href='#7.4.sentence-1'>.</a></div></div></li><li id='7.5'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#7.5'>(7.5)</a></div><div class='texpara'><div id='7.5.sentence-1' class='sentence'>When a (sub)object of a non-array type <span class='texttt'>U</span> is specified to have
  an initial value of <span class='texttt'>v</span>, or <span class='texttt'>U<span class='parenthesis'>(</span>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>,
  where <span class='texttt'>l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> is a list of constructor arguments,
  <span class='texttt'>allocate_<span class='shy'></span>shared</span> shall initialize this (sub)object
  via the expression
  <ul class='itemize'><li id='7.5.1'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#7.5.1'>(7.5.1)</a></div><span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A2<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>construct<span class='parenthesis'>(</span>a2, pu, v<span class='parenthesis'>)</span></span> or</li><li id='7.5.2'><div class='marginalizedparent' style='left:-48mm'><a class='marginalized' href='#7.5.2'>(7.5.2)</a></div><span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A2<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>construct<span class='parenthesis'>(</span>a2, pu, l<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span></li></ul>
  respectively,
  where <span class='texttt'>pu</span> is a pointer of type <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>*</span></span>
  pointing to storage
  suitable to hold an object of type <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> and
  <span class='texttt'>a2</span> of type <span class='texttt'>A2</span> is a potentially rebound copy of
  the allocator <span class='texttt'>a</span> passed to <span class='texttt'>allocate_<span class='shy'></span>shared</span><a class='hidden_link' href='#7.5.sentence-1'>.</a></div></div></li><li id='7.6'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#7.6'>(7.6)</a></div><div class='texpara'><div id='7.6.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span> is specified to have
  a default initial value,
  <span class='texttt'>make_<span class='shy'></span>shared</span> shall initialize this (sub)object
  via the expression <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>new</span><span class='parenthesis'>(</span>pv<span class='parenthesis'>)</span> U<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>,
  where <span class='texttt'>pv</span> has type <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> and points to storage
  suitable to hold an object of type <span class='texttt'>U</span><a class='hidden_link' href='#7.6.sentence-1'>.</a></div></div></li><li id='7.7'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#7.7'>(7.7)</a></div><div class='texpara'><div id='7.7.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span> is specified to have
  a default initial value,
  <span class='texttt'>allocate_<span class='shy'></span>shared</span> initializes this (sub)object
  via the expression <span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A2<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>construct<span class='parenthesis'>(</span>a2, pu<span class='parenthesis'>)</span></span>,
  where <span class='texttt'>pu</span> is a pointer of type <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>*</span></span>
  pointing to storage
  suitable to hold an object of type <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> and
  <span class='texttt'>a2</span> of type <span class='texttt'>A2</span> is a potentially rebound copy of
  the allocator <span class='texttt'>a</span> passed to <span class='texttt'>allocate_<span class='shy'></span>shared</span><a class='hidden_link' href='#7.7.sentence-1'>.</a></div></div></li><li id='7.8'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#7.8'>(7.8)</a></div><div class='texpara'><div id='7.8.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span> is initialized by
  <span class='texttt'>make_<span class='shy'></span>shared_<span class='shy'></span>for_<span class='shy'></span>overwrite</span> or
  <span class='texttt'>allocate_<span class='shy'></span>shared_<span class='shy'></span>for_<span class='shy'></span>overwrite</span>,
  it is initialized via the expression <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>new</span><span class='parenthesis'>(</span>pv<span class='parenthesis'>)</span> U</span>,
  where <span class='texttt'>pv</span> has type <span class='texttt'><span class='keyword'>void</span><span class='operator'>*</span></span> and
  points to storage suitable to hold an object of type <span class='texttt'>U</span><a class='hidden_link' href='#7.8.sentence-1'>.</a></div></div></li><li id='7.9'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#7.9'>(7.9)</a></div><div class='texpara'><div id='7.9.sentence-1' class='sentence'>Array elements are initialized in ascending order of their addresses<a class='hidden_link' href='#7.9.sentence-1'>.</a></div></div></li><li id='7.10'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#7.10'>(7.10)</a></div><div class='texpara'><div id='7.10.sentence-1' class='sentence'>When the lifetime of the object managed by the return value ends, or
  when the initialization of an array element throws an exception,
  the initialized elements are destroyed in the reverse order
  of their original construction<a class='hidden_link' href='#7.10.sentence-1'>.</a></div></div></li><li id='7.11'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#7.11'>(7.11)</a></div><div class='texpara'><div id='7.11.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span>
  that was initialized by <span class='texttt'>make_<span class='shy'></span>shared</span>,
  <span class='texttt'>make_<span class='shy'></span>shared_<span class='shy'></span>for_<span class='shy'></span>overwrite</span>, or <span class='texttt'>allocate_<span class='shy'></span>shared_<span class='shy'></span>for_<span class='shy'></span>overwrite</span>
  is to be destroyed,
  it is destroyed via the expression <span class='texttt'>pu<span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='operator'>~</span>U<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span> where
  <span class='texttt'>pu</span> points to that object of type <span class='texttt'>U</span><a class='hidden_link' href='#7.11.sentence-1'>.</a></div></div></li><li id='7.12'><div class='marginalizedparent' style='left:-39mm'><a class='marginalized' href='#7.12'>(7.12)</a></div><div class='texpara'><div id='7.12.sentence-1' class='sentence'>When a (sub)object of non-array type <span class='texttt'>U</span>
  that was initialized by <span class='texttt'>allocate_<span class='shy'></span>shared</span> is to be destroyed,
  it is destroyed via the expression
  <span class='texttt'>allocator_<span class='shy'></span>traits<span class='anglebracket'>&lt;</span>A2<span class='anglebracket'>&gt;</span><span class='operator'>&#x200b;::&#x200b;</span>destroy<span class='parenthesis'>(</span>a2, pu<span class='parenthesis'>)</span></span> where
  <span class='texttt'>pu</span> is a pointer of type <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span><span class='operator'>*</span></span>
  pointing to that object of type <span class='texttt'>remove_<span class='shy'></span>cv_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>U<span class='anglebracket'>&gt;</span></span> and
  <span class='texttt'>a2</span> of type <span class='texttt'>A2</span> is a potentially rebound copy of
  the allocator <span class='texttt'>a</span> passed to <span class='texttt'>allocate_<span class='shy'></span>shared</span><a class='hidden_link' href='#7.12.sentence-1'>.</a></div></div></li></ul></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='7.sentence-2' class='sentence'>These functions will typically allocate more memory than <span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span></span> to
allow for internal bookkeeping structures such as reference counts<a class='hidden_link' href='#7.sentence-2'>.</a></div> â€”&nbsp;<i>end note</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared_'><div id='lib:make_shared_'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared_'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span>Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;                    <span class='comment'>// <span class='texttt'>T</span> is not array</span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A, <span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, Args<span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span>;    <span class='comment'>// <span class='texttt'>T</span> is not array</span>
</code></div></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4236'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is not an array type<a class='hidden_link' href='#8.sentence-1'>.</a></div></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4240'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>T</span>
with an initial value <span class='texttt'>T<span class='parenthesis'>(</span>std<span class='operator'>&#x200b;::&#x200b;</span>forward<span class='anglebracket'>&lt;</span>Args<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#9.sentence-1'>.</a></div></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4245'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'><i >Remarks</i>: The <span class='texttt'>shared_<span class='shy'></span>ptr</span> constructors called by these functions
enable <span class='texttt'>shared_<span class='shy'></span>from_<span class='shy'></span>this</span>
with the address of the newly constructed object of type <span class='texttt'>T</span><a class='hidden_link' href='#10.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4251'>#</a></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to <span class='tcode_in_codeblock'>int()</span></span>
shared_ptr<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>16</span>, <span class='literal'>1</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to vector of <span class='tcode_in_codeblock'>16</span> elements with value <span class='tcode_in_codeblock'>1</span></span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared__'><div id='lib:make_shared__'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared__'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>
  make_shared<span class='parenthesis'>(</span>size_t N<span class='parenthesis'>)</span>;                                        <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, size_t N<span class='parenthesis'>)</span>;          <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span></span>
</code></div></div></div></div><div class='para' id='12'><div class='marginalizedparent'><a class='marginalized' href='#12'>12</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4271'>#</a></div><div class='texpara'><div id='12.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is of the form <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#12.sentence-1'>.</a></div></div></div></div><div class='para' id='13'><div class='marginalizedparent'><a class='marginalized' href='#13'>13</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4275'>#</a></div><div class='texpara'><div id='13.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span>
with a default initial value,
where <span class='texttt'>U</span> is <span class='texttt'>remove_<span class='shy'></span>extent_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#13.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='14'><div class='marginalizedparent'><a class='marginalized' href='#14'>14</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4281'>#</a></div><div class='texpara'><div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1024</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[1024]</span></span>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>6</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[6][2][2]</span></span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared___'><div id='lib:make_shared___'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared___'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                                  <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>;                    <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span></span>
</code></div></div></div></div><div class='para' id='15'><div class='marginalizedparent'><a class='marginalized' href='#15'>15</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4302'>#</a></div><div class='texpara'><div id='15.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is of the form <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span><a class='hidden_link' href='#15.sentence-1'>.</a></div></div></div></div><div class='para' id='16'><div class='marginalizedparent'><a class='marginalized' href='#16'>16</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4306'>#</a></div><div class='texpara'><div id='16.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>T</span>
with a default initial value<a class='hidden_link' href='#16.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='17'><div class='marginalizedparent'><a class='marginalized' href='#17'>17</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4311'>#</a></div><div class='texpara'><div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>:&ensp;<span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[1024]</span></span>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a value-initialized <span class='tcode_in_codeblock'>double[6][2][2]</span></span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared____'><div id='lib:make_shared____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared____'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span>size_t N,
                            <span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;       <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, size_t N,
                                <span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;   <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[]</span></span>
</code></div></div></div></div><div class='para' id='18'><div class='marginalizedparent'><a class='marginalized' href='#18'>18</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4334'>#</a></div><div class='texpara'><div id='18.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is of the form <span class='texttt'>U<span class='squarebracket'>[</span><span class='squarebracket'>]</span></span><a class='hidden_link' href='#18.sentence-1'>.</a></div></div></div></div><div class='para' id='19'><div class='marginalizedparent'><a class='marginalized' href='#19'>19</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4338'>#</a></div><div class='texpara'><div id='19.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span>,
where <span class='texttt'>U</span> is <span class='texttt'>remove_<span class='shy'></span>extent_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> and
each array element has an initial value of <span class='texttt'>u</span><a class='hidden_link' href='#19.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='20'><div class='marginalizedparent'><a class='marginalized' href='#20'>20</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4344'>#</a></div><div class='texpara'><div id='example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-4'>4</a></i>:&ensp;<span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1024</span>, <span class='literal'>1.0</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a <span class='tcode_in_codeblock'>double[1024]</span>, where each element is <span class='tcode_in_codeblock'>1.0</span></span>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>6</span>, <span class='curlybracket'>{</span><span class='literal'>1.0</span>, <span class='literal'>0.0</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a <span class='tcode_in_codeblock'>double[6][2]</span>, where each <span class='tcode_in_codeblock'>double[2]</span> element is <span class='tcode_in_codeblock'>{1.0, 0.0}</span></span>
shared_ptr<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> r <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>4</span>, <span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a <span class='tcode_in_codeblock'>vector&lt;int&gt;[4]</span>, where each vector has contents <span class='tcode_in_codeblock'>{1, 2}</span></span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared_____'><div id='lib:make_shared_____'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared_____'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;       <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span></span>
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a,
                                <span class='keyword'>const</span> remove_extent_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='operator'>&amp;</span> u<span class='parenthesis'>)</span>;   <span class='comment'>// <span class='texttt'>T</span> is <span class='texttt'>U[N]</span></span>
</code></div></div></div></div><div class='para' id='21'><div class='marginalizedparent'><a class='marginalized' href='#21'>21</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4368'>#</a></div><div class='texpara'><div id='21.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is of the form <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span><a class='hidden_link' href='#21.sentence-1'>.</a></div></div></div></div><div class='para' id='22'><div class='marginalizedparent'><a class='marginalized' href='#22'>22</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4372'>#</a></div><div class='texpara'><div id='22.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>T</span>,
where each array element of type <span class='texttt'>remove_<span class='shy'></span>extent_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span>
has an initial value of <span class='texttt'>u</span><a class='hidden_link' href='#22.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='23'><div class='marginalizedparent'><a class='marginalized' href='#23'>23</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4378'>#</a></div><div class='texpara'><div id='example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-5'>5</a></i>:&ensp;<span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1.0</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a <span class='tcode_in_codeblock'>double[1024]</span>, where each element is <span class='tcode_in_codeblock'>1.0</span></span>
shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>6</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1.0</span>, <span class='literal'>0.0</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a <span class='tcode_in_codeblock'>double[6][2]</span>, where each double[2] element is <span class='tcode_in_codeblock'>{1.0, 0.0}</span></span>
shared_ptr<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> r <span class='operator'>=</span> make_shared<span class='anglebracket'>&lt;</span>vector<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='squarebracket'>[</span><span class='literal'>4</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='curlybracket'>{</span><span class='literal'>1</span>, <span class='literal'>2</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a <span class='tcode_in_codeblock'>vector&lt;int&gt;[4]</span>, where each vector has contents <span class='tcode_in_codeblock'>{1, 2}</span></span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared______'><div id='lib:make_shared______'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared______'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared_for_overwrite<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared_for_overwrite<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='24'><div class='marginalizedparent'><a class='marginalized' href='#24'>24</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4401'>#</a></div><div class='texpara'><div id='24.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is not an array of unknown bound<a class='hidden_link' href='#24.sentence-1'>.</a></div></div></div></div><div class='para' id='25'><div class='marginalizedparent'><a class='marginalized' href='#25'>25</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4405'>#</a></div><div class='texpara'><div id='25.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>T</span><a class='hidden_link' href='#25.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='26'><div class='marginalizedparent'><a class='marginalized' href='#26'>26</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4409'>#</a></div><div class='texpara'><div id='example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span> <span class='keyword'>double</span> data<span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span>; <span class='curlybracket'>}</span>;
shared_ptr<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared_for_overwrite<span class='anglebracket'>&lt;</span>X<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a default-initialized <span class='tcode_in_codeblock'>X</span>, where each element in <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;data</span> has an indeterminate value</span>

shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> q <span class='operator'>=</span> make_shared_for_overwrite<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='literal'>1024</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a default-initialized <span class='tcode_in_codeblock'>double[1024]</span>, where each element has an indeterminate value</span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div><div class='texpara'><div id='lib:allocate_shared_______'><div id='lib:make_shared_______'><div class='itemdecl'><div class='marginalizedparent'><a class='itemDeclLink' href='#lib:make_shared_______'>ðŸ”—</a></div><code class='itemdeclcode'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> make_shared_for_overwrite<span class='parenthesis'>(</span>size_t N<span class='parenthesis'>)</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T, <span class='keyword'>class</span> A<span class='anglebracket'>&gt;</span>
  shared_ptr<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span> allocate_shared_for_overwrite<span class='parenthesis'>(</span><span class='keyword'>const</span> A<span class='operator'>&amp;</span> a, size_t N<span class='parenthesis'>)</span>;
</code></div></div></div></div><div class='para' id='27'><div class='marginalizedparent'><a class='marginalized' href='#27'>27</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4432'>#</a></div><div class='texpara'><div id='27.sentence-1' class='sentence'><i >Constraints</i>: <span class='texttt'>T</span> is an array of unknown bound<a class='hidden_link' href='#27.sentence-1'>.</a></div></div></div></div><div class='para' id='28'><div class='marginalizedparent'><a class='marginalized' href='#28'>28</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4436'>#</a></div><div class='texpara'><div id='28.sentence-1' class='sentence'><i >Returns</i>: A <span class='texttt'>shared_<span class='shy'></span>ptr</span> to an object of type <span class='texttt'>U<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span></span>,
where <span class='texttt'>U</span> is <span class='texttt'>remove_<span class='shy'></span>extent_<span class='shy'></span>t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#28.sentence-1'>.</a></div></div></div></div><div class='para nonNormativeOnly' id='29'><div class='marginalizedparent'><a class='marginalized' href='#29'>29</a></div><div class='itemdescr'><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9b8a5e51752efe9edd7a447e96ffab0f3313accc/source/memory.tex#L4441'>#</a></div><div class='texpara'><div id='example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-7'>7</a></i>:&ensp;<span class='codeblock'>shared_ptr<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span> p <span class='operator'>=</span> make_shared_for_overwrite<span class='anglebracket'>&lt;</span><span class='keyword'>double</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='literal'>1024</span><span class='parenthesis'>)</span>;
  <span class='comment'>// <span class='tcode_in_codeblock'>shared_<span class='shy'></span>ptr</span> to a default-initialized <span class='tcode_in_codeblock'>double[1024]</span>, where each element has an indeterminate value</span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div></div></body></html>