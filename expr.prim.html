<!DOCTYPE html><html lang='en'><head><title>[expr.prim]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>7.5</a> Primary expressions <a class='abbr_ref'>[expr.prim]</a></h2><div class='texpara'><a class='index' id=':expression,primary'></a></div><div id='grammar' class='section'><h3 ><a class='secnum' href='#grammar' style='min-width:80pt'>7.5.1</a> Grammar <a class='abbr_ref' href='expr.prim.grammar'>[expr.prim.grammar]</a></h3><div class='texpara'><div class='bnf' id='nt:primary-expression'>
<a class='hidden_link' href='#nt:primary-expression' title='7.5.1&emsp;Grammar&emsp;[expr.prim.grammar]'><span id='nt:primary-expression'><span id=':primary-expression'>primary-expression<span class='textnormal'>:</span></span></span></a><br/><a href='lex.literal.kinds#nt:literal' title='5.13.1&emsp;Kinds of literals&emsp;[lex.literal.kinds]'><span id='ntref:literal'><span class='textsf'><i >literal</i></span></span></a><br/><span id=':this'><span class='texttt'><span class='keyword'>this</span></span></span><br/><span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression'><span class='textsf'><i >expression</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression'><span class='textsf'><i >id-expression</i></span></span></a><br/><a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression'><span class='textsf'><i >lambda-expression</i></span></span></a><br/><a href='#nt:fold-expression' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='ntref:fold-expression'><span class='textsf'><i >fold-expression</i></span></span></a><br/><a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression'><span class='textsf'><i >requires-expression</i></span></span></a>
</div></div></div><div id='literal' class='section'><h3 ><a class='secnum' href='#literal' style='min-width:80pt'>7.5.2</a> Literals <a class='abbr_ref' href='expr.prim.literal'>[expr.prim.literal]</a></h3><div class='para' id='literal-1'><div class='marginalizedparent'><a class='marginalized' href='#literal-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1250'>#</a></div><div class='texpara'><div id='literal-1.sentence-1' class='sentence'><a class='index' id=':literal'></a><a class='index' id=':constant'></a>The type of a <a href='lex.literal.kinds#nt:literal' title='5.13.1&emsp;Kinds of literals&emsp;[lex.literal.kinds]'><span id='ntref:literal_'><span class='textsf'><i >literal</i></span></span></a>
is determined based on its form as specified in <a href='lex.literal' title='5.13&emsp;Literals'>[lex.<span class='shy'></span>literal]</a><a class='hidden_link' href='#literal-1.sentence-1'>.</a></div> <div id='literal-1.sentence-2' class='sentence'>A <a href='lex.string#nt:string-literal' title='5.13.5&emsp;String literals&emsp;[lex.string]'><span id='ntref:string-literal'><span class='textsf'><i >string-literal</i></span></span></a> is an lvalue
designating a corresponding string literal object (<a href='lex.string' title='5.13.5&emsp;String literals'>[lex.<span class='shy'></span>string]</a>),
a <a href='lex.ext#nt:user-defined-literal' title='5.13.9&emsp;User-defined literals&emsp;[lex.ext]'><span id='ntref:user-defined-literal'><span class='textsf'><i >user-defined-literal</i></span></span></a>
has the same value category
as the corresponding operator call expression described in <a href='lex.ext' title='5.13.9&emsp;User-defined literals'>[lex.<span class='shy'></span>ext]</a>,
and any other <a href='lex.literal.kinds#nt:literal' title='5.13.1&emsp;Kinds of literals&emsp;[lex.literal.kinds]'><span id='ntref:literal__'><span class='textsf'><i >literal</i></span></span></a> is a prvalue<a class='hidden_link' href='#literal-1.sentence-2'>.</a></div></div></div></div><div id='this' class='section'><h3 ><a class='secnum' href='#this' style='min-width:80pt'>7.5.3</a> This <a class='abbr_ref' href='expr.prim.this'>[expr.prim.this]</a></h3><div class='para' id='this-1'><div class='marginalizedparent'><a class='marginalized' href='#this-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1264'>#</a></div><div class='texpara'><div id='this-1.sentence-1' class='sentence'><a class='index' id=':this_'></a>The keyword <span id=':this__'><span class='texttt'><span class='keyword'>this</span></span></span> names a pointer to the object for which an implicit object member
function (<a href='class.mfct.non.static' title='11.4.3&emsp;Non-static member functions'>[class.<span class='shy'></span>mfct.<span class='shy'></span>non.<span class='shy'></span>static]</a>) is invoked or a non-static data member's
initializer (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>) is evaluated<a class='hidden_link' href='#this-1.sentence-1'>.</a></div></div></div><div class='para' id='this-2'><div class='marginalizedparent'><a class='marginalized' href='#this-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1270'>#</a></div><div class='texpara'><div id='this-2.sentence-1' class='sentence'>The <a class='hidden_link' href='#def:class,current' title='7.5.3&emsp;This&emsp;[expr.prim.this]'><span id='def:class,current'><i >current class</i></span></a> at a program point is
the class associated with the innermost class scope containing that point<a class='hidden_link' href='#this-2.sentence-1'>.</a></div> <div id='this-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#this-note-1'>1</a></i>:&ensp;<div id='this-2.sentence-2' class='sentence'>A <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_'><span class='textsf'><i >lambda-expression</i></span></span></a> does not introduce a class scope<a class='hidden_link' href='#this-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='this-3'><div class='marginalizedparent'><a class='marginalized' href='#this-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1277'>#</a></div><div class='texpara'><div id='this-3.sentence-1' class='sentence'>If a declaration declares a member function or member function template of a
class <span class='texttt'>X</span>, the expression <span id=':this___'><span class='texttt'><span class='keyword'>this</span></span></span> is a prvalue of type “pointer to
<a href='dcl.decl.general#nt:cv-qualifier-seq' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:cv-qualifier-seq'><span class='textsf'><i >cv-qualifier-seq</i></span></span></a> <span class='texttt'>X</span>”
wherever <span class='texttt'>X</span> is the current class
between the optional
<a href='dcl.decl.general#nt:cv-qualifier-seq' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:cv-qualifier-seq_'><span class='textsf'><i >cv-qualifier-seq</i></span></span></a> and the end of the <a href='dcl.fct.def.general#nt:function-definition' title='9.5.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-definition'><span class='textsf'><i >function-definition</i></span></span></a>,
<a href='class.mem.general#nt:member-declarator' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:member-declarator'><span class='textsf'><i >member-declarator</i></span></span></a>, or <a href='dcl.decl.general#nt:declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator'><span class='textsf'><i >declarator</i></span></span></a><a class='hidden_link' href='#this-3.sentence-1'>.</a></div> <div id='this-3.sentence-2' class='sentence'>It shall not appear within
the declaration of
a static or explicit object member function
of the current class (although its type and value category
are defined within such member functions as they are within an implicit object
member function)<a class='hidden_link' href='#this-3.sentence-2'>.</a></div> <div id='this-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#this-note-2'>2</a></i>:&ensp;<div id='this-3.sentence-3' class='sentence'>This is because declaration matching does not
occur until the complete declarator is known<a class='hidden_link' href='#this-3.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='this-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#this-note-3'>3</a></i>:&ensp;<div id='this-3.sentence-4' class='sentence'>In a <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type'><span class='textsf'><i >trailing-return-type</i></span></span></a>,
the class being defined is not required to be complete
for purposes of <a href='expr.ref' title='7.6.1.5&emsp;Class member access&emsp;[expr.ref]'>class member access</a><a class='hidden_link' href='#this-3.sentence-4'>.</a></div> <div id='this-3.sentence-5' class='sentence'>Class members declared later are not visible<a class='hidden_link' href='#this-3.sentence-5'>.</a></div> <div id='this-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#this-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>char</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> f<span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span>t <span class='operator'>+</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>
    <span class='curlybracket'>{</span> <span class='keyword'>return</span> t <span class='operator'>+</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span> <span class='keyword'>auto</span> A<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='keyword'>int</span> t<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span>t <span class='operator'>+</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='this-4'><div class='marginalizedparent'><a class='marginalized' href='#this-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1311'>#</a></div><div class='texpara'><div id='this-4.sentence-1' class='sentence'>Otherwise, if a <a href='class.mem.general#nt:member-declarator' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:member-declarator_'><span class='textsf'><i >member-declarator</i></span></span></a> declares a non-static data
member (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>) of a class <span class='texttt'>X</span>, the expression <span id=':this____'><span class='texttt'><span class='keyword'>this</span></span></span> is
a prvalue of type “pointer to <span class='texttt'>X</span>”
wherever <span class='texttt'>X</span> is the current class
within the
optional default member initializer (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>)<a class='hidden_link' href='#this-4.sentence-1'>.</a></div></div></div><div class='para' id='this-5'><div class='marginalizedparent'><a class='marginalized' href='#this-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1319'>#</a></div><div class='texpara'><div id='this-5.sentence-1' class='sentence'>The expression <span id=':this_____'><span class='texttt'><span class='keyword'>this</span></span></span> shall not appear in any other context<a class='hidden_link' href='#this-5.sentence-1'>.</a></div> <div id='this-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#this-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> Outer <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a<span class='squarebracket'>[</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='squarebracket'>]</span>;                 <span class='comment'>// error: not inside a member function</span>
  <span class='keyword'>unsigned</span> <span class='keyword'>int</span> sz <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span>;      <span class='comment'>// OK, in default member initializer</span>

  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> b<span class='squarebracket'>[</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='squarebracket'>]</span>;               <span class='comment'>// OK</span>

    <span class='keyword'>struct</span> Inner <span class='curlybracket'>{</span>
      <span class='keyword'>int</span> c<span class='squarebracket'>[</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span><span class='squarebracket'>]</span>;             <span class='comment'>// error: not inside a member function of <span class='tcode_in_codeblock'>Inner</span></span>
    <span class='curlybracket'>}</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='paren' class='section'><h3 ><a class='secnum' href='#paren' style='min-width:80pt'>7.5.4</a> Parentheses <a class='abbr_ref' href='expr.prim.paren'>[expr.prim.paren]</a></h3><div class='para' id='paren-1'><div class='marginalizedparent'><a class='marginalized' href='#paren-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1340'>#</a></div><div class='texpara'><div id='paren-1.sentence-1' class='sentence'><a class='index' id=':expression,parenthesized'></a>A parenthesized expression <span class='texttt'><span class='parenthesis'>(</span><span class='math'><span class='mathalpha'>E</span></span><span class='parenthesis'>)</span></span>
is a primary expression whose type, result, and value category are identical to those of <span class='math'><span class='mathalpha'>E</span></span><a class='hidden_link' href='#paren-1.sentence-1'>.</a></div> <div id='paren-1.sentence-2' class='sentence'>The parenthesized expression can be used in exactly the same contexts as
those where <span class='math'><span class='mathalpha'>E</span></span> can be used, and with the same
meaning, except as otherwise indicated<a class='hidden_link' href='#paren-1.sentence-2'>.</a></div></div></div></div><div id='id' class='section'><h3 ><a class='secnum' href='#id' style='min-width:80pt'>7.5.5</a> Names <a class='abbr_ref' href='expr.prim.id'>[expr.prim.id]</a></h3><div id='id.general' class='section'><h4 ><a class='secnum' href='#id.general' style='min-width:95pt'>7.5.5.1</a> General <a class='abbr_ref' href='expr.prim.id.general'>[expr.prim.id.general]</a></h4><div class='texpara'><div class='bnf' id='nt:id-expression'>
<a class='hidden_link' href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='nt:id-expression'><span id=':id-expression'>id-expression<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:unqualified-id' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id'><span class='textsf'><i >unqualified-id</i></span></span></a><br/><a href='#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id'><span class='textsf'><i >qualified-id</i></span></span></a><br/><a href='#nt:pack-index-expression' title='7.5.5.4&emsp;Pack indexing expression&emsp;[expr.prim.pack.index]'><span id='ntref:pack-index-expression'><span class='textsf'><i >pack-index-expression</i></span></span></a>
</div></div><div class='para' id='id.general-1'><div class='marginalizedparent'><a class='marginalized' href='#id.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1359'>#</a></div><div class='texpara'><div id='id.general-1.sentence-1' class='sentence'><a class='index' id=':name'></a><a class='index' id=':id-expression'></a>An <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_'><span class='textsf'><i >id-expression</i></span></span></a> is a restricted form of a
<a href='#nt:primary-expression' title='7.5.1&emsp;Grammar&emsp;[expr.prim.grammar]'><span id='ntref:primary-expression'><span class='textsf'><i >primary-expression</i></span></span></a><a class='hidden_link' href='#id.general-1.sentence-1'>.</a></div> <div id='id.general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#id.general-note-1'>1</a></i>:&ensp;<div id='id.general-1.sentence-2' class='sentence'>An <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression__'><span class='textsf'><i >id-expression</i></span></span></a> can appear after
<a href='expr.ref' title='7.6.1.5&emsp;Class member access&emsp;[expr.ref]'><span class='texttt'>.</span> and <span class='texttt'>-&gt;</span> operators</a><a class='hidden_link' href='#id.general-1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='id.general-2'><div class='marginalizedparent'><a class='marginalized' href='#id.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1369'>#</a></div><div class='texpara'><div id='id.general-2.sentence-1' class='sentence'>If an <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression___'><span class='textsf'><i >id-expression</i></span></span></a> <span class='math'><span class='mathalpha'>E</span></span> denotes
a non-static non-type member of some class <span class='texttt'>C</span> at a point where
the current class (<a href='#this' title='7.5.3&emsp;This'>[expr.<span class='shy'></span>prim.<span class='shy'></span>this]</a>) is <span class='texttt'>X</span> and
<ul class='itemize'><li id='id.general-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.general-2.1'>(2.1)</a></div><span class='math'><span class='mathalpha'>E</span></span> is potentially evaluated or
<span class='texttt'>C</span> is <span class='texttt'>X</span> or a base class of <span class='texttt'>X</span>, and</li><li id='id.general-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.general-2.2'>(2.2)</a></div><span class='math'><span class='mathalpha'>E</span></span> is not the <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression____'><span class='textsf'><i >id-expression</i></span></span></a> of
a class member access expression (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>), and</li><li id='id.general-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.general-2.3'>(2.3)</a></div>if <span class='math'><span class='mathalpha'>E</span></span> is a <a href='#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_'><span class='textsf'><i >qualified-id</i></span></span></a>,
<span class='math'><span class='mathalpha'>E</span></span> is not the un-parenthesized operand of
the unary <span class='texttt'><span class='operator'>&amp;</span></span> operator (<a href='expr.unary.op' title='7.6.2.2&emsp;Unary operators'>[expr.<span class='shy'></span>unary.<span class='shy'></span>op]</a>),</li></ul>
the <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_____'><span class='textsf'><i >id-expression</i></span></span></a> is transformed into
a class member access expression using <span class='texttt'><span class='parenthesis'>(</span><span class='operator'>*</span><span class='keyword'>this</span><span class='parenthesis'>)</span></span> as the object expression<a class='hidden_link' href='#id.general-2.sentence-1'>.</a></div> <div id='id.general-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#id.general-note-2'>2</a></i>:&ensp;<div id='id.general-2.sentence-2' class='sentence'>If <span class='texttt'>C</span> is not <span class='texttt'>X</span> or a base class of <span class='texttt'>X</span>,
the class member access expression is ill-formed<a class='hidden_link' href='#id.general-2.sentence-2'>.</a></div> <div id='id.general-2.sentence-3' class='sentence'>Also, if the <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression______'><span class='textsf'><i >id-expression</i></span></span></a> occurs within
a static or explicit object member function,
the class member access is ill-formed<a class='hidden_link' href='#id.general-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='id.general-2.sentence-4' class='sentence'>
This transformation does not apply in
the template definition context (<a href='temp.dep.type' title='13.8.3.2&emsp;Dependent types'>[temp.<span class='shy'></span>dep.<span class='shy'></span>type]</a>)<a class='hidden_link' href='#id.general-2.sentence-4'>.</a></div></div></div><div class='para' id='id.general-3'><div class='marginalizedparent'><a class='marginalized' href='#id.general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1397'>#</a></div><div class='texpara'><div id='id.general-3.sentence-1' class='sentence'>If an <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_______'><span class='textsf'><i >id-expression</i></span></span></a> <span class='math'><span class='mathalpha'>E</span></span> denotes
a member <span class='math'><span class='mathalpha'>M</span></span> of an anonymous union (<a href='class.union.anon' title='11.5.2&emsp;Anonymous unions'>[class.<span class='shy'></span>union.<span class='shy'></span>anon]</a>) <span class='math'><span class='mathalpha'>U</span></span>:
<ul class='itemize'><li id='id.general-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.general-3.1'>(3.1)</a></div><div class='texpara'><div id='id.general-3.1.sentence-1' class='sentence'>If <span class='math'><span class='mathalpha'>U</span></span> is a non-static data member,
<span class='math'><span class='mathalpha'>E</span></span> refers to <span class='math'><span class='mathalpha'>M</span></span> as a member of the lookup context of the terminal name of <span class='math'><span class='mathalpha'>E</span></span>
(after any implicit transformation to
a class member access expression)<a class='hidden_link' href='#id.general-3.1.sentence-1'>.</a></div> <div id='id.general-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#id.general-example-1'>1</a></i>:&ensp;<div id='id.general-3.1.sentence-2' class='sentence'><span class='texttt'>o<span class='operator'>.</span>x</span> is interpreted as <span class='texttt'>o<span class='operator'>.</span><span class='math'><span class='mathalpha'>u</span></span><span class='operator'>.</span>x</span>,
where <span class='math'><span class='mathalpha'>u</span></span> names the anonymous union member<a class='hidden_link' href='#id.general-3.1.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></li><li id='id.general-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.general-3.2'>(3.2)</a></div><div class='texpara'><div id='id.general-3.2.sentence-1' class='sentence'>Otherwise, <span class='math'><span class='mathalpha'>E</span></span> is interpreted as a class member access (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>)
that designates the member subobject <span class='math'><span class='mathalpha'>M</span></span> of
the anonymous union variable for <span class='math'><span class='mathalpha'>U</span></span><a class='hidden_link' href='#id.general-3.2.sentence-1'>.</a></div> <div id='id.general-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#id.general-note-3'>3</a></i>:&ensp;<div id='id.general-3.2.sentence-2' class='sentence'>Under this interpretation, <span class='math'><span class='mathalpha'>E</span></span> no longer denotes a non-static data member<a class='hidden_link' href='#id.general-3.2.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='id.general-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#id.general-example-2'>2</a></i>:&ensp;<div id='id.general-3.2.sentence-3' class='sentence'><span class='texttt'>N<span class='operator'>&#x200b;::&#x200b;</span>x</span> is interpreted as <span class='texttt'>N<span class='operator'>&#x200b;::&#x200b;</span><span class='math'><span class='mathalpha'>u</span></span><span class='operator'>.</span>x</span>,
where <span class='math'><span class='mathalpha'>u</span></span> names the anonymous union variable<a class='hidden_link' href='#id.general-3.2.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></li></ul></div></div></div><div class='para' id='id.general-4'><div class='marginalizedparent'><a class='marginalized' href='#id.general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1423'>#</a></div><div class='texpara'><div id='id.general-4.sentence-1' class='sentence'>An <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression________'><span class='textsf'><i >id-expression</i></span></span></a> that denotes a non-static data member or
implicit object member function of a class can only be used:
<ul class='itemize'><li id='id.general-4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.general-4.1'>(4.1)</a></div>as part of a class member access
(after any implicit transformation (see above))
in which the
object expression
refers to the member's class
or a class derived from
that class, or</li><li id='id.general-4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.general-4.2'>(4.2)</a></div>to form a pointer to member (<a href='expr.unary.op' title='7.6.2.2&emsp;Unary operators'>[expr.<span class='shy'></span>unary.<span class='shy'></span>op]</a>), or</li><li id='id.general-4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.general-4.3'>(4.3)</a></div>if that <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_________'><span class='textsf'><i >id-expression</i></span></span></a> denotes a non-static data member
and it appears in an unevaluated operand<a class='hidden_link' href='#id.general-4.sentence-1'>.</a> <div class='texpara'><div id='id.general-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#id.general-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> m;
<span class='curlybracket'>}</span>;
<span class='keyword'>int</span> i <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>S<span class='operator'>::</span>m<span class='parenthesis'>)</span>;           <span class='comment'>// OK</span>
<span class='keyword'>int</span> j <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>S<span class='operator'>::</span>m <span class='operator'>+</span> <span class='literal'>42</span><span class='parenthesis'>)</span>;      <span class='comment'>// OK</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li></ul></div></div></div><div class='para' id='id.general-5'><div class='marginalizedparent'><a class='marginalized' href='#id.general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1450'>#</a></div><div class='texpara'><div id='id.general-5.sentence-1' class='sentence'>For an <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression__________'><span class='textsf'><i >id-expression</i></span></span></a> that denotes an overload set,
overload resolution is performed
to select a unique function (<a href='over.match' title='12.2&emsp;Overload resolution'>[over.<span class='shy'></span>match]</a>, <a href='over.over' title='12.3&emsp;Address of an overload set'>[over.<span class='shy'></span>over]</a>)<a class='hidden_link' href='#id.general-5.sentence-1'>.</a></div> <div id='id.general-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#id.general-note-4'>4</a></i>:&ensp;<div id='id.general-5.sentence-2' class='sentence'>A program cannot refer to a function
with a trailing <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause'><span class='textsf'><i >requires-clause</i></span></span></a>
whose <a href='temp.constr.decl#nt:constraint-expression' title='13.5.3&emsp;Constrained declarations&emsp;[temp.constr.decl]'><span id='ntref:constraint-expression'><span class='textsf'><i >constraint-expression</i></span></span></a> is not satisfied,
because such functions are never selected by overload resolution<a class='hidden_link' href='#id.general-5.sentence-2'>.</a></div> <div id='id.general-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#id.general-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>static</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='keyword'>requires</span> <span class='literal'>false</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;                         <span class='comment'>// error: cannot call <span class='tcode_in_codeblock'>f</span></span>
  <span class='keyword'>void</span> <span class='parenthesis'>(</span><span class='operator'>*</span>p1<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='operator'>=</span> A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>f;          <span class='comment'>// error: cannot take the address of <span class='tcode_in_codeblock'>f</span></span>
  <span class='keyword'>decltype</span><span class='parenthesis'>(</span>A<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>f<span class='parenthesis'>)</span><span class='operator'>*</span> p2 <span class='operator'>=</span> <span class='literal'>nullptr</span>;    <span class='comment'>// error: the type <span class='tcode_in_codeblock'>decltype(A&lt;int&gt;&#x200b;::&#x200b;f)</span> is invalid</span>
<span class='curlybracket'>}</span>
</span> <div id='id.general-5.sentence-3' class='sentence'>
In each case, the constraints of <span class='texttt'>f</span> are not satisfied<a class='hidden_link' href='#id.general-5.sentence-3'>.</a></div> <div id='id.general-5.sentence-4' class='sentence'>In the declaration of <span class='texttt'>p2</span>,
those constraints need to be satisfied
even though
<span class='texttt'>f</span> is an <a href='expr.context#def:unevaluated_operand' title='7.2.3&emsp;Context dependence&emsp;[expr.context]'>unevaluated operand</a><a class='hidden_link' href='#id.general-5.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='id.unqual' class='section'><h4 ><a class='secnum' href='#id.unqual' style='min-width:95pt'>7.5.5.2</a> Unqualified names <a class='abbr_ref' href='expr.prim.id.unqual'>[expr.prim.id.unqual]</a></h4><div class='texpara'><div class='bnf' id='nt:unqualified-id'>
<a class='hidden_link' href='#nt:unqualified-id' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='nt:unqualified-id'><span id=':unqualified-id'>unqualified-id<span class='textnormal'>:</span></span></span></a><br/><a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier'><span class='textsf'><i >identifier</i></span></span></a><br/><a href='over.oper.general#nt:operator-function-id' title='12.4.1&emsp;General&emsp;[over.oper.general]'><span id='ntref:operator-function-id'><span class='textsf'><i >operator-function-id</i></span></span></a><br/><a href='class.conv.fct#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id'><span class='textsf'><i >conversion-function-id</i></span></span></a><br/><a href='over.literal#nt:literal-operator-id' title='12.6&emsp;User-defined literals&emsp;[over.literal]'><span id='ntref:literal-operator-id'><span class='textsf'><i >literal-operator-id</i></span></span></a><br/><span class='terminal'><span class='operator'>~</span></span> <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name'><span class='textsf'><i >type-name</i></span></span></a><br/><span class='terminal'><span class='operator'>~</span></span> <a href='dcl.type.simple#nt:computed-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:computed-type-specifier'><span class='textsf'><i >computed-type-specifier</i></span></span></a><br/><a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id'><span class='textsf'><i >template-id</i></span></span></a>
</div></div><div class='para' id='id.unqual-1'><div class='marginalizedparent'><a class='marginalized' href='#id.unqual-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1492'>#</a></div><div class='texpara'><div id='id.unqual-1.sentence-1' class='sentence'><a class='index' id=':identifier'></a>An <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_'><span class='textsf'><i >identifier</i></span></span></a> is only
an <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression___________'><span class='textsf'><i >id-expression</i></span></span></a> if it has
been suitably declared (<a href='dcl.dcl' title='9&emsp;Declarations'>[dcl.<span class='shy'></span>dcl]</a>)
or if it appears as part of a <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id'><span class='textsf'><i >declarator-id</i></span></span></a> (<a href='dcl.decl' title='9.3&emsp;Declarators'>[dcl.<span class='shy'></span>decl]</a>)<a class='hidden_link' href='#id.unqual-1.sentence-1'>.</a></div> <div id='id.unqual-1.sentence-2' class='sentence'>An <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier__'><span class='textsf'><i >identifier</i></span></span></a> that names a coroutine parameter
refers to the copy of the parameter (<a href='dcl.fct.def.coroutine' title='9.5.4&emsp;Coroutine definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>coroutine]</a>)<a class='hidden_link' href='#id.unqual-1.sentence-2'>.</a></div> <div id='id.unqual-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#id.unqual-note-1'>1</a></i>:&ensp;<div id='id.unqual-1.sentence-3' class='sentence'>For <a href='over.oper.general#nt:operator-function-id' title='12.4.1&emsp;General&emsp;[over.oper.general]'><span id='ntref:operator-function-id_'><span class='textsf'><i >operator-function-id</i></span></span></a><i >s</i>, see <a href='over.oper' title='12.4&emsp;Overloaded operators'>[over.<span class='shy'></span>oper]</a>; for
<a href='class.conv.fct#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id_'><span class='textsf'><i >conversion-function-id</i></span></span></a><i >s</i>, see <a href='class.conv.fct' title='11.4.8.3&emsp;Conversion functions'>[class.<span class='shy'></span>conv.<span class='shy'></span>fct]</a>; for
<a href='over.literal#nt:literal-operator-id' title='12.6&emsp;User-defined literals&emsp;[over.literal]'><span id='ntref:literal-operator-id_'><span class='textsf'><i >literal-operator-id</i></span></span></a><i >s</i>, see <a href='over.literal' title='12.6&emsp;User-defined literals'>[over.<span class='shy'></span>literal]</a>; for
<a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id_'><span class='textsf'><i >template-id</i></span></span></a><i >s</i>, see <a href='temp.names' title='13.3&emsp;Names of template specializations'>[temp.<span class='shy'></span>names]</a><a class='hidden_link' href='#id.unqual-1.sentence-3'>.</a></div> <div id='id.unqual-1.sentence-4' class='sentence'>A <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name_'><span class='textsf'><i >type-name</i></span></span></a> or <a href='dcl.type.simple#nt:computed-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:computed-type-specifier_'><span class='textsf'><i >computed-type-specifier</i></span></span></a>
prefixed by <span class='texttt'><span class='operator'>~</span></span> denotes the destructor of the type so named;
see <a href='#id.dtor' title='7.5.5.5&emsp;Destruction'>[expr.<span class='shy'></span>prim.<span class='shy'></span>id.<span class='shy'></span>dtor]</a><a class='hidden_link' href='#id.unqual-1.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='id.unqual-2'><div class='marginalizedparent'><a class='marginalized' href='#id.unqual-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1510'>#</a></div><div class='texpara'><div id='id.unqual-2.sentence-1' class='sentence'>A <a class='hidden_link' href='#def:component_name' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='def:component_name'><i >component name</i></span></a> of an <a href='#nt:unqualified-id' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id_'><span class='textsf'><i >unqualified-id</i></span></span></a> <span class='math'><span class='mathalpha'>U</span></span> is
<ul class='itemize'><li id='id.unqual-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.unqual-2.1'>(2.1)</a></div><span class='math'><span class='mathalpha'>U</span></span> if it is a name or</li><li id='id.unqual-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.unqual-2.2'>(2.2)</a></div>the component name of
the <a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id__'><span class='textsf'><i >template-id</i></span></span></a> or <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name__'><span class='textsf'><i >type-name</i></span></span></a> of <span class='math'><span class='mathalpha'>U</span></span>, if any<a class='hidden_link' href='#id.unqual-2.sentence-1'>.</a></li></ul></div> <div id='id.unqual-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#id.unqual-note-2'>2</a></i>:&ensp;<div id='id.unqual-2.sentence-2' class='sentence'>Other constructs that contain names to look up can have several
component names (<a href='#id.qual' title='7.5.5.3&emsp;Qualified names'>[expr.<span class='shy'></span>prim.<span class='shy'></span>id.<span class='shy'></span>qual]</a>, <a href='dcl.type.simple' title='9.2.9.3&emsp;Simple type specifiers'>[dcl.<span class='shy'></span>type.<span class='shy'></span>simple]</a>, <a href='dcl.type.elab' title='9.2.9.5&emsp;Elaborated type specifiers'>[dcl.<span class='shy'></span>type.<span class='shy'></span>elab]</a>, <a href='dcl.mptr' title='9.3.4.4&emsp;Pointers to members'>[dcl.<span class='shy'></span>mptr]</a>, <a href='namespace.udecl' title='9.9&emsp;The using declaration'>[namespace.<span class='shy'></span>udecl]</a>, <a href='temp.param' title='13.2&emsp;Template parameters'>[temp.<span class='shy'></span>param]</a>, <a href='temp.names' title='13.3&emsp;Names of template specializations'>[temp.<span class='shy'></span>names]</a>, <a href='temp.res' title='13.8&emsp;Name resolution'>[temp.<span class='shy'></span>res]</a>)<a class='hidden_link' href='#id.unqual-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='id.unqual-2.sentence-3' class='sentence'>
The <a class='hidden_link' href='#def:name,terminal' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='def:name,terminal'><i >terminal name</i></span></a> of a construct is
the component name of that construct that appears lexically last<a class='hidden_link' href='#id.unqual-2.sentence-3'>.</a></div></div></div><div class='para' id='id.unqual-3'><div class='marginalizedparent'><a class='marginalized' href='#id.unqual-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1527'>#</a></div><div class='texpara'><div id='id.unqual-3.sentence-1' class='sentence'>The result is the entity denoted by
the <a href='#nt:unqualified-id' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id__'><span class='textsf'><i >unqualified-id</i></span></span></a> (<a href='basic.lookup.unqual' title='6.5.3&emsp;Unqualified name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>unqual]</a>)<a class='hidden_link' href='#id.unqual-3.sentence-1'>.</a></div> <div id='id.unqual-3.sentence-2' class='sentence'>If the <a href='#nt:unqualified-id' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id___'><span class='textsf'><i >unqualified-id</i></span></span></a> appears
in a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__'><span class='textsf'><i >lambda-expression</i></span></span></a> at program point <span class='math'><span class='mathalpha'>P</span></span> and
the entity is a local entity (<a href='basic.pre' title='6.1&emsp;Preamble'>[basic.<span class='shy'></span>pre]</a>) or a variable declared by
an <a href='#nt:init-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture'><span class='textsf'><i >init-capture</i></span></span></a> (<a href='#lambda.capture' title='7.5.6.3&emsp;Captures'>[expr.<span class='shy'></span>prim.<span class='shy'></span>lambda.<span class='shy'></span>capture]</a>),
then let <span class='math'><span class='mathalpha'>S</span></span> be the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement'><span class='textsf'><i >compound-statement</i></span></span></a> of
the innermost enclosing <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression___'><span class='textsf'><i >lambda-expression</i></span></span></a> of <span class='math'><span class='mathalpha'>P</span></span><a class='hidden_link' href='#id.unqual-3.sentence-2'>.</a></div> <div id='id.unqual-3.sentence-3' class='sentence'>If naming the entity from outside of an unevaluated operand within <span class='math'><span class='mathalpha'>S</span></span>
would refer to an entity
captured by copy in some intervening <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression____'><span class='textsf'><i >lambda-expression</i></span></span></a>,
then let <span class='math'><span class='mathalpha'>E</span></span> be the innermost such <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_____'><span class='textsf'><i >lambda-expression</i></span></span></a><a class='hidden_link' href='#id.unqual-3.sentence-3'>.</a></div> <ul class='itemize'><li id='id.unqual-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.unqual-3.1'>(3.1)</a></div><div class='texpara'><div id='id.unqual-3.1.sentence-1' class='sentence'>If there is such a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression______'><span class='textsf'><i >lambda-expression</i></span></span></a> and
if <span class='math'><span class='mathalpha'>P</span></span> is in <span class='math'><span class='mathalpha'>E</span></span>'s function parameter scope
but not its <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a>, then
the type of the expression is
the type of a class member access expression (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>)
naming the non-static data member
that would be declared for such a capture
in the object parameter (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>) of the function call operator of <span class='math'><span class='mathalpha'>E</span></span><a class='hidden_link' href='#id.unqual-3.1.sentence-1'>.</a></div> <div id='id.unqual-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#id.unqual-note-3'>3</a></i>:&ensp;<div id='id.unqual-3.1.sentence-2' class='sentence'>If <span class='math'><span class='mathalpha'>E</span></span> is not declared <span id=':mutable'><span class='texttt'><span class='keyword'>mutable</span></span></span>,
the type of such an identifier will typically be <span id=':const'><span class='texttt'><span class='keyword'>const</span></span></span> qualified<a class='hidden_link' href='#id.unqual-3.1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='id.unqual-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.unqual-3.2'>(3.2)</a></div><div class='texpara'><div id='id.unqual-3.2.sentence-1' class='sentence'>Otherwise (if there is no such <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_______'><span class='textsf'><i >lambda-expression</i></span></span></a> or
if <span class='math'><span class='mathalpha'>P</span></span> either precedes <span class='math'><span class='mathalpha'>E</span></span>'s function parameter scope or
is in <span class='math'><span class='mathalpha'>E</span></span>'s <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause_'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a>),
the type of the expression is the type of the result<a class='hidden_link' href='#id.unqual-3.2.sentence-1'>.</a></div></div></li></ul> <div id='id.unqual-3.sentence-4' class='sentence'>
If the entity is a template parameter object for
a template parameter of type <span class='texttt'>T</span> (<a href='temp.param' title='13.2&emsp;Template parameters'>[temp.<span class='shy'></span>param]</a>),
the type of the expression is <span class='texttt'><span class='keyword'>const</span> T</span><a class='hidden_link' href='#id.unqual-3.sentence-4'>.</a></div> <div id='id.unqual-3.sentence-5' class='sentence'>In all other cases, the type of the expression is the type of the entity<a class='hidden_link' href='#id.unqual-3.sentence-5'>.</a></div> <div id='id.unqual-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#id.unqual-note-4'>4</a></i>:&ensp;<div id='id.unqual-3.sentence-6' class='sentence'>The type will be adjusted as described in <a href='expr.type' title='7.2.2&emsp;Type'>[expr.<span class='shy'></span>type]</a>
if it is cv-qualified or is a reference type<a class='hidden_link' href='#id.unqual-3.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='id.unqual-3.sentence-7' class='sentence'>
The expression is an xvalue if it is move-eligible (see below);
an lvalue
if the entity is a function, variable, <a href='dcl.struct.bind' title='9.6&emsp;Structured binding declarations&emsp;[dcl.struct.bind]'>structured binding</a>, data member, or
template parameter object;
and a prvalue otherwise (<a href='basic.lval' title='7.2.1&emsp;Value category'>[basic.<span class='shy'></span>lval]</a>);
it is a bit-field if the identifier designates a bit-field<a class='hidden_link' href='#id.unqual-3.sentence-7'>.</a></div> <div id='id.unqual-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#id.unqual-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>float</span> x, <span class='operator'>&amp;</span>r <span class='operator'>=</span> x;

  <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>      <span class='comment'>// lambda returns <span class='tcode_in_codeblock'>float const&amp;</span> because this lambda is not <span class='tcode_in_codeblock'>mutable</span> and</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>x</span> is an lvalue</span>
    <span class='keyword'>decltype</span><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span> y1;             <span class='comment'>// <span class='tcode_in_codeblock'>y1</span> has type <span class='tcode_in_codeblock'>float</span></span>
    <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span><span class='parenthesis'>)</span> y2 <span class='operator'>=</span> y1;      <span class='comment'>// <span class='tcode_in_codeblock'>y2</span> has type <span class='tcode_in_codeblock'>float const&amp;</span></span>
    <span class='keyword'>decltype</span><span class='parenthesis'>(</span>r<span class='parenthesis'>)</span> r1 <span class='operator'>=</span> y1;        <span class='comment'>// <span class='tcode_in_codeblock'>r1</span> has type <span class='tcode_in_codeblock'>float&amp;</span></span>
    <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>r<span class='parenthesis'>)</span><span class='parenthesis'>)</span> r2 <span class='operator'>=</span> y2;      <span class='comment'>// <span class='tcode_in_codeblock'>r2</span> has type <span class='tcode_in_codeblock'>float const&amp;</span></span>
    <span class='keyword'>return</span> y2;
  <span class='curlybracket'>}</span>;

  <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span><span class='parenthesis'>)</span> y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span><span class='parenthesis'>)</span> z <span class='operator'>=</span> x;        <span class='comment'>// OK, <span class='tcode_in_codeblock'>y</span> has type <span class='tcode_in_codeblock'>float&amp;</span>, <span class='tcode_in_codeblock'>z</span> has type <span class='tcode_in_codeblock'>float const&amp;</span></span>
  <span class='curlybracket'>}</span>;

  <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
    <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span><span class='parenthesis'>)</span> y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;     <span class='comment'>// OK, lambda takes a parameter of type <span class='tcode_in_codeblock'>float const&amp;</span></span>

    <span class='squarebracket'>[</span>x<span class='operator'>=</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span><span class='parenthesis'>)</span> y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>x<span class='parenthesis'>)</span><span class='parenthesis'>)</span> z <span class='operator'>=</span> x;      <span class='comment'>// OK, <span class='tcode_in_codeblock'>y</span> has type <span class='tcode_in_codeblock'>int&amp;</span>, <span class='tcode_in_codeblock'>z</span> has type <span class='tcode_in_codeblock'>int const&amp;</span></span>
    <span class='curlybracket'>}</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='id.unqual-4'><div class='marginalizedparent'><a class='marginalized' href='#id.unqual-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1603'>#</a></div><div class='texpara'><div id='id.unqual-4.sentence-1' class='sentence'>An <a class='hidden_link' href='#def:entity,implicitly_movable' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='def:entity,implicitly_movable'><i >implicitly movable entity</i></span></a> is
a variable of automatic storage duration
that is either a non-volatile object or
an rvalue reference to a non-volatile object type<a class='hidden_link' href='#id.unqual-4.sentence-1'>.</a></div> <div id='id.unqual-4.sentence-2' class='sentence'>In the following contexts,
an <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression____________'><span class='textsf'><i >id-expression</i></span></span></a> is <a class='hidden_link' href='#def:move-eligible' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='def:move-eligible'><i >move-eligible</i></span></a>:
<ul class='itemize'><li id='id.unqual-4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.unqual-4.1'>(4.1)</a></div>If the <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_____________'><span class='textsf'><i >id-expression</i></span></span></a> (possibly parenthesized)
is the operand of a <span class='texttt'><span class='keyword'>return</span></span> (<a href='stmt.return' title='8.7.4&emsp;The return statement'>[stmt.<span class='shy'></span>return]</a>) or
<span id=':co_return'><span class='texttt'><span class='keyword'>co_<span class='shy'></span>return</span></span></span> (<a href='stmt.return.coroutine' title='8.7.5&emsp;The co_&shy;return statement'>[stmt.<span class='shy'></span>return.<span class='shy'></span>coroutine]</a>) statement,
and names an implicitly movable entity declared in the body
or <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause__'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> of the innermost enclosing
function or <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression________'><span class='textsf'><i >lambda-expression</i></span></span></a>, or</li><li id='id.unqual-4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.unqual-4.2'>(4.2)</a></div>if the <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression______________'><span class='textsf'><i >id-expression</i></span></span></a> (possibly parenthesized)
is the operand of a <a href='expr.throw#nt:throw-expression' title='7.6.18&emsp;Throwing an exception&emsp;[expr.throw]'><span id='ntref:throw-expression'><span class='textsf'><i >throw-expression</i></span></span></a> (<a href='expr.throw' title='7.6.18&emsp;Throwing an exception'>[expr.<span class='shy'></span>throw]</a>),
and names an implicitly movable entity
that belongs to a scope that does not contain the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement_'><span class='textsf'><i >compound-statement</i></span></span></a>
of the innermost
<a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_________'><span class='textsf'><i >lambda-expression</i></span></span></a>,
<a href='except.pre#nt:try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:try-block'><span class='textsf'><i >try-block</i></span></span></a>, or
<a href='except.pre#nt:function-try-block' title='14.1&emsp;Preamble&emsp;[except.pre]'><span id='ntref:function-try-block'><span class='textsf'><i >function-try-block</i></span></span></a> (if any)
whose <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement__'><span class='textsf'><i >compound-statement</i></span></span></a> or <a href='class.base.init#nt:ctor-initializer' title='11.9.3&emsp;Initializing bases and members&emsp;[class.base.init]'><span id='ntref:ctor-initializer'><span class='textsf'><i >ctor-initializer</i></span></span></a>
contains the <a href='expr.throw#nt:throw-expression' title='7.6.18&emsp;Throwing an exception&emsp;[expr.throw]'><span id='ntref:throw-expression_'><span class='textsf'><i >throw-expression</i></span></span></a><a class='hidden_link' href='#id.unqual-4.sentence-2'>.</a></li></ul></div></div></div></div><div id='id.qual' class='section'><h4 ><a class='secnum' href='#id.qual' style='min-width:95pt'>7.5.5.3</a> Qualified names <a class='abbr_ref' href='expr.prim.id.qual'>[expr.prim.id.qual]</a></h4><div class='texpara'><a class='index' id=':operator,scope_resolution'></a><div class='bnf' id='nt:qualified-id'>
<a class='hidden_link' href='#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='nt:qualified-id'><span id=':qualified-id'>qualified-id<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier'><span class='textsf'><i >nested-name-specifier</i></span></span></a> <span id=':template'><span class='texttt'><span class='keyword'>template</span></span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='#nt:unqualified-id' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id____'><span class='textsf'><i >unqualified-id</i></span></span></a>
</div></div><div class='texpara'><a class='index' id=':operator,scope_resolution_'></a><a class='index' id=':name_hiding'></a><div class='bnf' id='nt:nested-name-specifier'>
<a class='hidden_link' href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='nt:nested-name-specifier'><span id=':nested-name-specifier'>nested-name-specifier<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='operator'>::</span></span><br/><a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name___'><span class='textsf'><i >type-name</i></span></span></a> <span class='terminal'><span class='operator'>::</span></span><br/><a href='namespace.def.general#nt:namespace-name' title='9.8.2.1&emsp;General&emsp;[namespace.def.general]'><span id='ntref:namespace-name'><span class='textsf'><i >namespace-name</i></span></span></a> <span class='terminal'><span class='operator'>::</span></span><br/><a href='dcl.type.simple#nt:computed-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:computed-type-specifier__'><span class='textsf'><i >computed-type-specifier</i></span></span></a> <span class='terminal'><span class='operator'>::</span></span><br/><a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier_'><span class='textsf'><i >nested-name-specifier</i></span></span></a> <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier___'><span class='textsf'><i >identifier</i></span></span></a> <span class='terminal'><span class='operator'>::</span></span><br/><a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier__'><span class='textsf'><i >nested-name-specifier</i></span></span></a> <span id=':template_'><span class='texttt'><span class='keyword'>template</span></span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id'><span class='textsf'><i >simple-template-id</i></span></span></a> <span class='terminal'><span class='operator'>::</span></span>
</div></div><div class='para' id='id.qual-1'><div class='marginalizedparent'><a class='marginalized' href='#id.qual-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1654'>#</a></div><div class='texpara'><div id='id.qual-1.sentence-1' class='sentence'><a class='index' id=':component_name'></a>The component names of a <a href='#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id__'><span class='textsf'><i >qualified-id</i></span></span></a> are those of
its <a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier___'><span class='textsf'><i >nested-name-specifier</i></span></span></a> and <a href='#nt:unqualified-id' title='7.5.5.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id_____'><span class='textsf'><i >unqualified-id</i></span></span></a><a class='hidden_link' href='#id.qual-1.sentence-1'>.</a></div> <div id='id.qual-1.sentence-2' class='sentence'>The component names of a <a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier____'><span class='textsf'><i >nested-name-specifier</i></span></span></a> are
its <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier____'><span class='textsf'><i >identifier</i></span></span></a> (if any) and those of its
<a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name____'><span class='textsf'><i >type-name</i></span></span></a>,
<a href='namespace.def.general#nt:namespace-name' title='9.8.2.1&emsp;General&emsp;[namespace.def.general]'><span id='ntref:namespace-name_'><span class='textsf'><i >namespace-name</i></span></span></a>,
<a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id_'><span class='textsf'><i >simple-template-id</i></span></span></a>, and/or
<a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier_____'><span class='textsf'><i >nested-name-specifier</i></span></span></a><a class='hidden_link' href='#id.qual-1.sentence-2'>.</a></div></div></div><div class='para' id='id.qual-2'><div class='marginalizedparent'><a class='marginalized' href='#id.qual-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1665'>#</a></div><div class='texpara'><div id='id.qual-2.sentence-1' class='sentence'>A <a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier______'><span class='textsf'><i >nested-name-specifier</i></span></span></a> is <a class='hidden_link' href='#def:declarative' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='def:declarative'><i >declarative</i></span></a> if it is part of
<ul class='itemize'><li id='id.qual-2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.qual-2.1'>(2.1)</a></div>a <a href='class.pre#nt:class-head-name' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-head-name'><span class='textsf'><i >class-head-name</i></span></span></a>,</li><li id='id.qual-2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.qual-2.2'>(2.2)</a></div>an <a href='dcl.enum#nt:enum-head-name' title='9.7.1&emsp;Enumeration declarations&emsp;[dcl.enum]'><span id='ntref:enum-head-name'><span class='textsf'><i >enum-head-name</i></span></span></a>,</li><li id='id.qual-2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.qual-2.3'>(2.3)</a></div>a <a href='#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id___'><span class='textsf'><i >qualified-id</i></span></span></a>
that is the <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_______________'><span class='textsf'><i >id-expression</i></span></span></a> of a <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id_'><span class='textsf'><i >declarator-id</i></span></span></a>, or</li><li id='id.qual-2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.qual-2.4'>(2.4)</a></div>a declarative <a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier_______'><span class='textsf'><i >nested-name-specifier</i></span></span></a><a class='hidden_link' href='#id.qual-2.sentence-1'>.</a></li></ul></div> <div id='id.qual-2.sentence-2' class='sentence'>
A declarative <a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier________'><span class='textsf'><i >nested-name-specifier</i></span></span></a>
shall not have a <a href='dcl.type.simple#nt:computed-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:computed-type-specifier___'><span class='textsf'><i >computed-type-specifier</i></span></span></a><a class='hidden_link' href='#id.qual-2.sentence-2'>.</a></div> <div id='id.qual-2.sentence-3' class='sentence'>A declaration that uses a declarative <a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier_________'><span class='textsf'><i >nested-name-specifier</i></span></span></a>
shall be a friend declaration or
inhabit a scope that contains the entity being redeclared or specialized<a class='hidden_link' href='#id.qual-2.sentence-3'>.</a></div></div></div><div class='para' id='id.qual-3'><div class='marginalizedparent'><a class='marginalized' href='#id.qual-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1684'>#</a></div><div class='texpara'><div id='id.qual-3.sentence-1' class='sentence'>The <a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier__________'><span class='textsf'><i >nested-name-specifier</i></span></span></a> <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span></span> nominates
the global namespace<a class='hidden_link' href='#id.qual-3.sentence-1'>.</a></div> <div id='id.qual-3.sentence-2' class='sentence'>A <a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier___________'><span class='textsf'><i >nested-name-specifier</i></span></span></a> with a <a href='dcl.type.simple#nt:computed-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:computed-type-specifier____'><span class='textsf'><i >computed-type-specifier</i></span></span></a>
nominates the type denoted by the <a href='dcl.type.simple#nt:computed-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:computed-type-specifier_____'><span class='textsf'><i >computed-type-specifier</i></span></span></a>,
which shall be a class or enumeration type<a class='hidden_link' href='#id.qual-3.sentence-2'>.</a></div> <div id='id.qual-3.sentence-3' class='sentence'>If a <a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier____________'><span class='textsf'><i >nested-name-specifier</i></span></span></a> <span class='math'><span class='mathalpha'>N</span></span>
is declarative and
has a <a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id__'><span class='textsf'><i >simple-template-id</i></span></span></a> with a template argument list <span class='math'><span class='mathalpha'>A</span></span>
that involves a template parameter,
let <span class='math'><span class='mathalpha'>T</span></span> be the template nominated by <span class='math'><span class='mathalpha'>N</span></span> without <span class='math'><span class='mathalpha'>A</span></span><a class='hidden_link' href='#id.qual-3.sentence-3'>.</a></div> <div id='id.qual-3.sentence-4' class='sentence'><span class='math'><span class='mathalpha'>T</span></span> shall be a class template<a class='hidden_link' href='#id.qual-3.sentence-4'>.</a></div> <ul class='itemize'><li id='id.qual-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.qual-3.1'>(3.1)</a></div><div class='texpara'><div id='id.qual-3.1.sentence-1' class='sentence'>If <span class='math'><span class='mathalpha'>A</span></span> is the template argument list (<a href='temp.arg' title='13.4&emsp;Template arguments'>[temp.<span class='shy'></span>arg]</a>) of
the corresponding <a href='temp.pre#nt:template-head' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-head'><span class='textsf'><i >template-head</i></span></span></a> <span class='math'><span class='mathalpha'>H</span></span> (<a href='temp.mem' title='13.7.3&emsp;Member templates'>[temp.<span class='shy'></span>mem]</a>),
<span class='math'><span class='mathalpha'>N</span></span> nominates the primary template of <span class='math'><span class='mathalpha'>T</span></span>;
<span class='math'><span class='mathalpha'>H</span></span> shall be equivalent to
the <a href='temp.pre#nt:template-head' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-head_'><span class='textsf'><i >template-head</i></span></span></a> of <span class='math'><span class='mathalpha'>T</span></span> (<a href='temp.over.link' title='13.7.7.2&emsp;Function template overloading'>[temp.<span class='shy'></span>over.<span class='shy'></span>link]</a>)<a class='hidden_link' href='#id.qual-3.1.sentence-1'>.</a></div></div></li><li id='id.qual-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.qual-3.2'>(3.2)</a></div><div class='texpara'><div id='id.qual-3.2.sentence-1' class='sentence'>Otherwise, <span class='math'><span class='mathalpha'>N</span></span> nominates the partial specialization (<a href='temp.spec.partial' title='13.7.6&emsp;Partial specialization'>[temp.<span class='shy'></span>spec.<span class='shy'></span>partial]</a>) of <span class='math'><span class='mathalpha'>T</span></span>
whose template argument list is equivalent to <span class='math'><span class='mathalpha'>A</span></span> (<a href='temp.over.link' title='13.7.7.2&emsp;Function template overloading'>[temp.<span class='shy'></span>over.<span class='shy'></span>link]</a>);
the program is ill-formed if no such partial specialization exists<a class='hidden_link' href='#id.qual-3.2.sentence-1'>.</a></div></div></li></ul> <div id='id.qual-3.sentence-5' class='sentence'>
Any other <a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier_____________'><span class='textsf'><i >nested-name-specifier</i></span></span></a> nominates
the entity denoted by its
<a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name_____'><span class='textsf'><i >type-name</i></span></span></a>,
<a href='namespace.def.general#nt:namespace-name' title='9.8.2.1&emsp;General&emsp;[namespace.def.general]'><span id='ntref:namespace-name__'><span class='textsf'><i >namespace-name</i></span></span></a>,
<a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_____'><span class='textsf'><i >identifier</i></span></span></a>, or
<a href='temp.names#nt:simple-template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:simple-template-id___'><span class='textsf'><i >simple-template-id</i></span></span></a><a class='hidden_link' href='#id.qual-3.sentence-5'>.</a></div> <div id='id.qual-3.sentence-6' class='sentence'>If the <a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier______________'><span class='textsf'><i >nested-name-specifier</i></span></span></a> is not declarative,
the entity shall not be a template<a class='hidden_link' href='#id.qual-3.sentence-6'>.</a></div></div></div><div class='para' id='id.qual-4'><div class='marginalizedparent'><a class='marginalized' href='#id.qual-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1717'>#</a></div><div class='texpara'><div id='id.qual-4.sentence-1' class='sentence'>A <a href='#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id____'><span class='textsf'><i >qualified-id</i></span></span></a> shall not be of the form
<a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier_______________'><span class='textsf'><i >nested-name-specifier</i></span></span></a> <span id=':template__'><span class='texttt'><span class='keyword'>template</span></span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='texttt'><span class='operator'>~</span></span>
<a href='dcl.type.simple#nt:computed-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:computed-type-specifier______'><span class='textsf'><i >computed-type-specifier</i></span></span></a>
nor of the form
<a href='dcl.type.simple#nt:computed-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:computed-type-specifier_______'><span class='textsf'><i >computed-type-specifier</i></span></span></a> <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span></span> <span class='texttt'><span class='operator'>~</span></span> <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name______'><span class='textsf'><i >type-name</i></span></span></a><a class='hidden_link' href='#id.qual-4.sentence-1'>.</a></div></div></div><div class='para' id='id.qual-5'><div class='marginalizedparent'><a class='marginalized' href='#id.qual-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1724'>#</a></div><div class='texpara'><div id='id.qual-5.sentence-1' class='sentence'>The result of a <a href='#nt:qualified-id' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_____'><span class='textsf'><i >qualified-id</i></span></span></a> <span class='math'><span class='mathalpha'>Q</span></span> is
the entity it denotes (<a href='basic.lookup.qual' title='6.5.5&emsp;Qualified name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>qual]</a>)<a class='hidden_link' href='#id.qual-5.sentence-1'>.</a></div> <div id='id.qual-5.sentence-2' class='sentence'>The type of the expression is the type of the result<a class='hidden_link' href='#id.qual-5.sentence-2'>.</a></div> <div id='id.qual-5.sentence-3' class='sentence'>The result is an lvalue if the member is
<ul class='itemize'><li id='id.qual-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.qual-5.1'>(5.1)</a></div>a function other than a non-static member function,</li><li id='id.qual-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.qual-5.2'>(5.2)</a></div>a non-static member function
if <span class='math'><span class='mathalpha'>Q</span></span> is the operand of a unary <span class='texttt'><span class='operator'>&amp;</span></span> operator,</li><li id='id.qual-5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.qual-5.3'>(5.3)</a></div>a variable,</li><li id='id.qual-5.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.qual-5.4'>(5.4)</a></div>a structured binding (<a href='dcl.struct.bind' title='9.6&emsp;Structured binding declarations'>[dcl.<span class='shy'></span>struct.<span class='shy'></span>bind]</a>), or</li><li id='id.qual-5.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#id.qual-5.5'>(5.5)</a></div>a data member,</li></ul>
and a prvalue otherwise<a class='hidden_link' href='#id.qual-5.sentence-3'>.</a></div></div></div></div><div id='pack.index' class='section'><h4 ><a class='secnum' href='#pack.index' style='min-width:95pt'>7.5.5.4</a> Pack indexing expression <a class='abbr_ref' href='expr.prim.pack.index'>[expr.prim.pack.index]</a></h4><div class='texpara'><div class='bnf' id='nt:pack-index-expression'>
<a class='hidden_link' href='#nt:pack-index-expression' title='7.5.5.4&emsp;Pack indexing expression&emsp;[expr.prim.pack.index]'><span id='nt:pack-index-expression'><span id=':pack-index-expression'>pack-index-expression<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression________________'><span class='textsf'><i >id-expression</i></span></span></a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> <span class='terminal'><span class='squarebracket'>[</span></span> <a href='expr.const#nt:constant-expression' title='7.7&emsp;Constant expressions&emsp;[expr.const]'><span id='ntref:constant-expression'><span class='textsf'><i >constant-expression</i></span></span></a> <span class='terminal'><span class='squarebracket'>]</span></span>
</div></div><div class='para' id='pack.index-1'><div class='marginalizedparent'><a class='marginalized' href='#pack.index-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1751'>#</a></div><div class='texpara'><div id='pack.index-1.sentence-1' class='sentence'>The <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_________________'><span class='textsf'><i >id-expression</i></span></span></a> <span class='math'><span class='mathalpha'>P</span></span> in a <a href='#nt:pack-index-expression' title='7.5.5.4&emsp;Pack indexing expression&emsp;[expr.prim.pack.index]'><span id='ntref:pack-index-expression_'><span class='textsf'><i >pack-index-expression</i></span></span></a>
shall be an <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier______'><span class='textsf'><i >identifier</i></span></span></a> that denotes a pack<a class='hidden_link' href='#pack.index-1.sentence-1'>.</a></div></div></div><div class='para' id='pack.index-2'><div class='marginalizedparent'><a class='marginalized' href='#pack.index-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1755'>#</a></div><div class='texpara'><div id='pack.index-2.sentence-1' class='sentence'>The <a href='expr.const#nt:constant-expression' title='7.7&emsp;Constant expressions&emsp;[expr.const]'><span id='ntref:constant-expression_'><span class='textsf'><i >constant-expression</i></span></span></a> shall be
a converted constant expression (<a href='expr.const' title='7.7&emsp;Constant expressions'>[expr.<span class='shy'></span>const]</a>) of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span>
whose value <span class='math'><span class='mathalpha'>V</span></span>, termed the index,
is such that <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">0</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.446em;">≤</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.186em;">V</span></span><span class="mjx-mo MJXc-space3"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.225em; padding-bottom: 0.372em;">&lt;</span></span><span class="mjx-texatom MJXc-space3"><span class="mjx-mrow"><span class="mjx-mrow"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.519em; padding-bottom: 0.372em;"><span class='keyword'>sizeof</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>(</span></span></span><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.109em;">P</span></span></span></span><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-type-R" style="padding-top: 0.519em; padding-bottom: 0.372em;"><span class='parenthesis'>)</span></span></span></span></span></span></span></span></span></span><a class='hidden_link' href='#pack.index-2.sentence-1'>.</a></div></div></div><div class='para' id='pack.index-3'><div class='marginalizedparent'><a class='marginalized' href='#pack.index-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1761'>#</a></div><div class='texpara'><div id='pack.index-3.sentence-1' class='sentence'>A <a href='#nt:pack-index-expression' title='7.5.5.4&emsp;Pack indexing expression&emsp;[expr.prim.pack.index]'><span id='ntref:pack-index-expression__'><span class='textsf'><i >pack-index-expression</i></span></span></a> is a pack expansion (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>)<a class='hidden_link' href='#pack.index-3.sentence-1'>.</a></div></div></div><div class='para nonNormativeOnly' id='pack.index-4'><div class='marginalizedparent'><a class='marginalized' href='#pack.index-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1764'>#</a></div><div class='texpara'><div id='pack.index-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#pack.index-note-1'>1</a></i>:&ensp;<div id='pack.index-4.sentence-1' class='sentence'>A <a href='#nt:pack-index-expression' title='7.5.5.4&emsp;Pack indexing expression&emsp;[expr.prim.pack.index]'><span id='ntref:pack-index-expression___'><span class='textsf'><i >pack-index-expression</i></span></span></a> denotes
the <span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base" style="margin-right: -0.186em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.446em; padding-bottom: 0.298em; padding-right: 0.186em;">V</span></span></span><span class="mjx-sup" style="font-size: 70.7%; vertical-align: 0.513em; padding-left: 0.413em; padding-right: 0.071em;"><span class="mjx-mtext"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">th</span></span></span></span></span></span></span></span> element of the pack<a class='hidden_link' href='#pack.index-4.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='id.dtor' class='section'><h4 ><a class='secnum' href='#id.dtor' style='min-width:95pt'>7.5.5.5</a> Destruction <a class='abbr_ref' href='expr.prim.id.dtor'>[expr.prim.id.dtor]</a></h4><div class='para' id='id.dtor-1'><div class='marginalizedparent'><a class='marginalized' href='#id.dtor-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1772'>#</a></div><div class='texpara'><div id='id.dtor-1.sentence-1' class='sentence'><a class='index' id=':expression,destructor_call'></a><a class='index' id=':expression,pseudo-destructor_call'></a>An <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression__________________'><span class='textsf'><i >id-expression</i></span></span></a> that denotes the destructor of a type <span class='texttt'>T</span>
names the destructor of <span class='texttt'>T</span>
if <span class='texttt'>T</span> is a class type (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>),
otherwise the <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression___________________'><span class='textsf'><i >id-expression</i></span></span></a> is said
to name a <a class='hidden_link' href='#def:pseudo-destructor' title='7.5.5.5&emsp;Destruction&emsp;[expr.prim.id.dtor]'><span id='def:pseudo-destructor'><i >pseudo-destructor</i></span></a><a class='hidden_link' href='#id.dtor-1.sentence-1'>.</a></div></div></div><div class='para' id='id.dtor-2'><div class='marginalizedparent'><a class='marginalized' href='#id.dtor-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1781'>#</a></div><div class='texpara'><div id='id.dtor-2.sentence-1' class='sentence'>If the <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression____________________'><span class='textsf'><i >id-expression</i></span></span></a> names a pseudo-destructor,
<span class='texttt'>T</span> shall be a scalar type and
the <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_____________________'><span class='textsf'><i >id-expression</i></span></span></a> shall appear
as the right operand of a class member access (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>) that forms
the <a href='expr.post.general#nt:postfix-expression' title='7.6.1.1&emsp;General&emsp;[expr.post.general]'><span id='ntref:postfix-expression'><span class='textsf'><i >postfix-expression</i></span></span></a> of a function call (<a href='expr.call' title='7.6.1.3&emsp;Function call'>[expr.<span class='shy'></span>call]</a>)<a class='hidden_link' href='#id.dtor-2.sentence-1'>.</a></div> <div id='id.dtor-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#id.dtor-note-1'>1</a></i>:&ensp;<div id='id.dtor-2.sentence-2' class='sentence'>Such a call ends the lifetime of the object (<a href='expr.call' title='7.6.1.3&emsp;Function call'>[expr.<span class='shy'></span>call]</a>, <a href='basic.life' title='6.7.4&emsp;Lifetime'>[basic.<span class='shy'></span>life]</a>)<a class='hidden_link' href='#id.dtor-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='id.dtor-3'><div class='marginalizedparent'><a class='marginalized' href='#id.dtor-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1791'>#</a></div><div class='texpara'><div id='id.dtor-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#id.dtor-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> C <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  C <span class='operator'>*</span> pc <span class='operator'>=</span> <span class='keyword'>new</span> C;
  <span class='keyword'>using</span> C2 <span class='operator'>=</span> C;
  pc<span class='operator'>-</span><span class='anglebracket'>&gt;</span>C<span class='operator'>::</span><span class='operator'>~</span>C2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// OK, destroys <span class='tcode_in_codeblock'>*pc</span></span>
  C<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>.</span>C<span class='operator'>::</span><span class='operator'>~</span>C<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;      <span class='comment'>// undefined behavior: temporary of type <span class='tcode_in_codeblock'>C</span> destroyed twice</span>
  <span class='keyword'>using</span> T <span class='operator'>=</span> <span class='keyword'>int</span>;
  <span class='literal'>0</span> <span class='operator'>.</span>T<span class='operator'>::</span><span class='operator'>~</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK, no effect</span>
  <span class='literal'>0.T</span><span class='operator'>::</span><span class='operator'>~</span>T<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;        <span class='comment'>// error: <span class='tcode_in_codeblock'>0.T</span> is a <a href='lex.ext#nt:user-defined-floating-point-literal' title='5.13.9&emsp;User-defined literals&emsp;[lex.ext]'><span id='ntref:user-defined-floating-point-literal'><span class='textsf'><i >user-defined-floating-point-literal</i></span></span></a> (<a href='lex.ext' title='5.13.9&emsp;User-defined literals'>[lex.<span class='shy'></span>ext]</a>)</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></div><div id='lambda' class='section'><h3 ><a class='secnum' href='#lambda' style='min-width:80pt'>7.5.6</a> Lambda expressions <a class='abbr_ref' href='expr.prim.lambda'>[expr.prim.lambda]</a></h3><div id='lambda.general' class='section'><h4 ><a class='secnum' href='#lambda.general' style='min-width:95pt'>7.5.6.1</a> General <a class='abbr_ref' href='expr.prim.lambda.general'>[expr.prim.lambda.general]</a></h4><div class='texpara'><a class='index' id=':expression,lambda'></a></div><div class='texpara'><div class='bnf' id='nt:lambda-expression'>
<a class='hidden_link' href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='nt:lambda-expression'><span id=':lambda-expression'>lambda-expression<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:lambda-introducer' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-introducer'><span class='textsf'><i >lambda-introducer</i></span></span></a> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='#nt:lambda-declarator' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator'><span class='textsf'><i >lambda-declarator</i></span></span></a> <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement___'><span class='textsf'><i >compound-statement</i></span></span></a><br/><a href='#nt:lambda-introducer' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-introducer_'><span class='textsf'><i >lambda-introducer</i></span></span></a> <span class='terminal'><span class='anglebracket'>&lt;</span></span> <a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list'><span class='textsf'><i >template-parameter-list</i></span></span></a> <span class='terminal'><span class='anglebracket'>&gt;</span></span> <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause_'><span class='textsf'><i >requires-clause</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span><br/>&emsp;&emsp;&emsp;<a href='#nt:lambda-declarator' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator_'><span class='textsf'><i >lambda-declarator</i></span></span></a> <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement____'><span class='textsf'><i >compound-statement</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:lambda-introducer'>
<a class='hidden_link' href='#nt:lambda-introducer' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='nt:lambda-introducer'><span id=':lambda-introducer'>lambda-introducer<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='squarebracket'>[</span></span> <a href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture'><span class='textsf'><i >lambda-capture</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='terminal'><span class='squarebracket'>]</span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:lambda-declarator'>
<a class='hidden_link' href='#nt:lambda-declarator' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='nt:lambda-declarator'><span id=':lambda-declarator'>lambda-declarator<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:lambda-specifier-seq' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a> <a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier'><span class='textsf'><i >noexcept-specifier</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq__'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type_'><span class='textsf'><i >trailing-return-type</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span><br/><a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier_'><span class='textsf'><i >noexcept-specifier</i></span></span></a> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq___'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type__'><span class='textsf'><i >trailing-return-type</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span><br/><a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type___'><span class='textsf'><i >trailing-return-type</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span><br/><span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause___'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span> <a href='#nt:lambda-specifier-seq' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq_'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier__'><span class='textsf'><i >noexcept-specifier</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq____'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span><br/>&emsp;&emsp;&emsp;<a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type____'><span class='textsf'><i >trailing-return-type</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause__'><span class='textsf'><i >requires-clause</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:lambda-specifier'>
<a class='hidden_link' href='#nt:lambda-specifier' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='nt:lambda-specifier'><span id=':lambda-specifier'>lambda-specifier<span class='textnormal'>:</span></span></span></a><br/><span id=':consteval'><span class='texttt'><span class='keyword'>consteval</span></span></span><br/><span id=':constexpr'><span class='texttt'><span class='keyword'>constexpr</span></span></span><br/><span id=':mutable_'><span class='texttt'><span class='keyword'>mutable</span></span></span><br/><span id=':static'><span class='texttt'><span class='keyword'>static</span></span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:lambda-specifier-seq'>
<a class='hidden_link' href='#nt:lambda-specifier-seq' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='nt:lambda-specifier-seq'><span id=':lambda-specifier-seq'>lambda-specifier-seq<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:lambda-specifier' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier'><span class='textsf'><i >lambda-specifier</i></span></span></a> <a href='#nt:lambda-specifier-seq' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq__'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span>
</div></div><div class='para' id='lambda.general-1'><div class='marginalizedparent'><a class='marginalized' href='#lambda.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1846'>#</a></div><div class='texpara'><div id='lambda.general-1.sentence-1' class='sentence'>A <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__________'><span class='textsf'><i >lambda-expression</i></span></span></a> provides
a concise way to create a simple function object<a class='hidden_link' href='#lambda.general-1.sentence-1'>.</a></div> <div id='lambda.general-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.general-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>algorithm<span class='anglebracket'>&gt;</span>
<span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>cmath<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> abssort<span class='parenthesis'>(</span><span class='keyword'>float</span><span class='operator'>*</span> x, <span class='keyword'>unsigned</span> N<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  std<span class='operator'>::</span>sort<span class='parenthesis'>(</span>x, x <span class='operator'>+</span> N, <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>float</span> a, <span class='keyword'>float</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> std<span class='operator'>::</span>abs<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> <span class='anglebracket'>&lt;</span> std<span class='operator'>::</span>abs<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.general-2'><div class='marginalizedparent'><a class='marginalized' href='#lambda.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1859'>#</a></div><div class='texpara'><div id='lambda.general-2.sentence-1' class='sentence'>A <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression___________'><span class='textsf'><i >lambda-expression</i></span></span></a> is a prvalue
whose result object is called the <a class='hidden_link' href='#def:closure_object' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='def:closure_object'><i >closure object</i></span></a><a class='hidden_link' href='#lambda.general-2.sentence-1'>.</a></div> <div id='lambda.general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.general-note-1'>1</a></i>:&ensp;<div id='lambda.general-2.sentence-2' class='sentence'>A closure object behaves like a <a href='function.objects' title='22.10&emsp;Function objects&emsp;[function.objects]'>function
object</a><a class='hidden_link' href='#lambda.general-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='lambda.general-3'><div class='marginalizedparent'><a class='marginalized' href='#lambda.general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1867'>#</a></div><div class='texpara'><div id='lambda.general-3.sentence-1' class='sentence'>An ambiguity can arise
because a <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause___'><span class='textsf'><i >requires-clause</i></span></span></a> can end in
an <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_____'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a>,
which collides with
the <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq______'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a> in <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression____________'><span class='textsf'><i >lambda-expression</i></span></span></a><a class='hidden_link' href='#lambda.general-3.sentence-1'>.</a></div> <div id='lambda.general-3.sentence-2' class='sentence'>In such cases,
any attributes are treated as
<a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_______'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a> in <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_____________'><span class='textsf'><i >lambda-expression</i></span></span></a><a class='hidden_link' href='#lambda.general-3.sentence-2'>.</a></div> <div id='lambda.general-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.general-note-2'>2</a></i>:&ensp;<div id='lambda.general-3.sentence-3' class='sentence'>Such ambiguous cases cannot have valid semantics
because the constraint expression would not have type <span id=':bool'><span class='texttt'><span class='keyword'>bool</span></span></span><a class='hidden_link' href='#lambda.general-3.sentence-3'>.</a></div> <div id='lambda.general-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.general-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> x <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>requires</span> T<span class='operator'>::</span><span class='keyword'>operator</span> <span class='keyword'>int</span> <span class='squarebracket'>[</span><span class='squarebracket'>[</span>some_attribute<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='lambda.general-4'><div class='marginalizedparent'><a class='marginalized' href='#lambda.general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1886'>#</a></div><div class='texpara'><div id='lambda.general-4.sentence-1' class='sentence'>A <a href='#nt:lambda-specifier-seq' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq___'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a>
shall contain at most one of each <a href='#nt:lambda-specifier' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier_'><span class='textsf'><i >lambda-specifier</i></span></span></a> and
shall not contain both <span id=':constexpr_'><span class='texttt'><span class='keyword'>constexpr</span></span></span> and <span id=':consteval_'><span class='texttt'><span class='keyword'>consteval</span></span></span><a class='hidden_link' href='#lambda.general-4.sentence-1'>.</a></div> <div id='lambda.general-4.sentence-2' class='sentence'>If the <a href='#nt:lambda-declarator' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator__'><span class='textsf'><i >lambda-declarator</i></span></span></a> contains
an explicit object parameter (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>),
then no <a href='#nt:lambda-specifier' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier__'><span class='textsf'><i >lambda-specifier</i></span></span></a> in the <a href='#nt:lambda-specifier-seq' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq____'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a>
shall be <span id=':mutable__'><span class='texttt'><span class='keyword'>mutable</span></span></span> or <span id=':static_'><span class='texttt'><span class='keyword'>static</span></span></span><a class='hidden_link' href='#lambda.general-4.sentence-2'>.</a></div> <div id='lambda.general-4.sentence-3' class='sentence'>The <a href='#nt:lambda-specifier-seq' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq_____'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a> shall not contain
both <span id=':mutable___'><span class='texttt'><span class='keyword'>mutable</span></span></span> and <span id=':static__'><span class='texttt'><span class='keyword'>static</span></span></span><a class='hidden_link' href='#lambda.general-4.sentence-3'>.</a></div> <div id='lambda.general-4.sentence-4' class='sentence'>If the <a href='#nt:lambda-specifier-seq' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-specifier-seq______'><span class='textsf'><i >lambda-specifier-seq</i></span></span></a> contains <span id=':static___'><span class='texttt'><span class='keyword'>static</span></span></span>,
there shall be no <a href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture_'><span class='textsf'><i >lambda-capture</i></span></span></a><a class='hidden_link' href='#lambda.general-4.sentence-4'>.</a></div> <div id='lambda.general-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.general-note-3'>3</a></i>:&ensp;<div id='lambda.general-4.sentence-5' class='sentence'>The trailing <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause____'><span class='textsf'><i >requires-clause</i></span></span></a> is described in <a href='dcl.decl' title='9.3&emsp;Declarators'>[dcl.<span class='shy'></span>decl]</a><a class='hidden_link' href='#lambda.general-4.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='lambda.general-5'><div class='marginalizedparent'><a class='marginalized' href='#lambda.general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1902'>#</a></div><div class='texpara'><div id='lambda.general-5.sentence-1' class='sentence'>A <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression______________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause____'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a>
is the <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause_____'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> of
the <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_______________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s <a href='#nt:lambda-declarator' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator___'><span class='textsf'><i >lambda-declarator</i></span></span></a>, if any,
or empty otherwise<a class='hidden_link' href='#lambda.general-5.sentence-1'>.</a></div> <div id='lambda.general-5.sentence-2' class='sentence'>If the <a href='#nt:lambda-declarator' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator____'><span class='textsf'><i >lambda-declarator</i></span></span></a>
does not include a <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type_____'><span class='textsf'><i >trailing-return-type</i></span></span></a>,
it is considered to be <span class='texttt'><span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span id=':auto'><span class='texttt'><span class='keyword'>auto</span></span></span></span><a class='hidden_link' href='#lambda.general-5.sentence-2'>.</a></div> <div id='lambda.general-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.general-note-4'>4</a></i>:&ensp;<div id='lambda.general-5.sentence-3' class='sentence'>In that case, the return type is deduced from <span id=':return'><span class='texttt'><span class='keyword'>return</span></span></span> statements
as described in <a href='dcl.spec.auto' title='9.2.9.7&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a><a class='hidden_link' href='#lambda.general-5.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='lambda.general-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.general-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> x1 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span>;      <span class='comment'>// OK, return type is <span class='tcode_in_codeblock'>int</span></span>
<span class='keyword'>auto</span> x2 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='curlybracket'>{</span> <span class='literal'>1</span>, <span class='literal'>2</span> <span class='curlybracket'>}</span>; <span class='curlybracket'>}</span>;       <span class='comment'>// error: deducing return type from <a href='dcl.init.general#nt:braced-init-list' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:braced-init-list'><span class='textsf'><i >braced-init-list</i></span></span></a></span>
<span class='keyword'>int</span> j;
<span class='keyword'>auto</span> x3 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> j; <span class='curlybracket'>}</span>;  <span class='comment'>// OK, return type is <span class='tcode_in_codeblock'>int&amp;</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.general-6'><div class='marginalizedparent'><a class='marginalized' href='#lambda.general-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1923'>#</a></div><div class='texpara'><div id='lambda.general-6.sentence-1' class='sentence'>A lambda is a <a class='hidden_link' href='#def:generic_lambda' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='def:generic_lambda'><i >generic lambda</i></span></a>
if the <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
has any generic parameter type placeholders (<a href='dcl.spec.auto' title='9.2.9.7&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>), or
if the lambda has a <a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list_'><span class='textsf'><i >template-parameter-list</i></span></span></a><a class='hidden_link' href='#lambda.general-6.sentence-1'>.</a></div> <div id='lambda.general-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.general-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> x <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> i, <span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span>;               <span class='comment'>// OK, a generic lambda</span>
<span class='keyword'>auto</span> y <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>this</span> <span class='keyword'>auto</span> self, <span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span>;       <span class='comment'>// OK, a generic lambda</span>
<span class='keyword'>auto</span> z <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span>;              <span class='comment'>// OK, a generic lambda</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='lambda.closure' class='section'><h4 ><a class='secnum' href='#lambda.closure' style='min-width:95pt'>7.5.6.2</a> Closure types <a class='abbr_ref' href='expr.prim.lambda.closure'>[expr.prim.lambda.closure]</a></h4><div class='para' id='lambda.closure-1'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1938'>#</a></div><div class='texpara'><div id='lambda.closure-1.sentence-1' class='sentence'>The type of a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_________________'><span class='textsf'><i >lambda-expression</i></span></span></a> (which is also the type of the
closure object) is a unique, unnamed non-union class type,
called the <a class='hidden_link' href='#def:closure_type' title='7.5.6.2&emsp;Closure types&emsp;[expr.prim.lambda.closure]'><span id='def:closure_type'><i >closure type</i></span></a>,
whose properties are described below<a class='hidden_link' href='#lambda.closure-1.sentence-1'>.</a></div></div></div><div class='para' id='lambda.closure-2'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1944'>#</a></div><div class='texpara'><div id='lambda.closure-2.sentence-1' class='sentence'>The closure type is declared in the smallest block
scope, class scope, or namespace scope that contains the corresponding
<a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__________________'><span class='textsf'><i >lambda-expression</i></span></span></a><a class='hidden_link' href='#lambda.closure-2.sentence-1'>.</a></div> <div id='lambda.closure-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.closure-note-1'>1</a></i>:&ensp;<div id='lambda.closure-2.sentence-2' class='sentence'>This determines the set of namespaces and
classes associated with the closure type (<a href='basic.lookup.argdep' title='6.5.4&emsp;Argument-dependent name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>argdep]</a>)<a class='hidden_link' href='#lambda.closure-2.sentence-2'>.</a></div> <div id='lambda.closure-2.sentence-3' class='sentence'>The parameter
types of a <a href='#nt:lambda-declarator' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator_____'><span class='textsf'><i >lambda-declarator</i></span></span></a> do not affect these associated namespaces and
classes<a class='hidden_link' href='#lambda.closure-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='lambda.closure-3'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1955'>#</a></div><div class='texpara'><div id='lambda.closure-3.sentence-1' class='sentence'>The closure type is not an aggregate type (<a href='dcl.init.aggr' title='9.4.2&emsp;Aggregates'>[dcl.<span class='shy'></span>init.<span class='shy'></span>aggr]</a>);
it is a structural type (<a href='temp.param#term.structural.type' title='13.2&emsp;Template parameters'>[temp.<span class='shy'></span>param]</a>) if and only if
the lambda has no <a href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture__'><span class='textsf'><i >lambda-capture</i></span></span></a><a class='hidden_link' href='#lambda.closure-3.sentence-1'>.</a></div> <div id='lambda.closure-3.sentence-2' class='sentence'>An implementation may define the closure type differently from what
is described below provided this does not alter the observable behavior of the program
other than by changing:
<ul class='itemize'><li id='lambda.closure-3.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.closure-3.1'>(3.1)</a></div>the size and/or alignment of the closure type,</li><li id='lambda.closure-3.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.closure-3.2'>(3.2)</a></div>whether the closure type is trivially copyable (<a href='class.prop' title='11.2&emsp;Properties of classes'>[class.<span class='shy'></span>prop]</a>), or</li><li id='lambda.closure-3.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.closure-3.3'>(3.3)</a></div>whether the closure type is a standard-layout class (<a href='class.prop' title='11.2&emsp;Properties of classes'>[class.<span class='shy'></span>prop]</a>)<a class='hidden_link' href='#lambda.closure-3.sentence-2'>.</a></li></ul></div></div><div class='texpara'><div id='lambda.closure-3.sentence-3' class='sentence'>An implementation shall not add members of rvalue reference type to the closure
type<a class='hidden_link' href='#lambda.closure-3.sentence-3'>.</a></div></div></div><div class='para' id='lambda.closure-4'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L1973'>#</a></div><div class='texpara'><div id='lambda.closure-4.sentence-1' class='sentence'>The closure type for a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression___________________'><span class='textsf'><i >lambda-expression</i></span></span></a> has a public
inline function call operator (for a non-generic lambda) or
function call operator template (for a generic lambda) (<a href='over.call' title='12.4.4&emsp;Function call'>[over.<span class='shy'></span>call]</a>)
whose parameters and return type
are those of the <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression____________________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s
<a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause______'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> and <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type______'><span class='textsf'><i >trailing-return-type</i></span></span></a>
respectively, and whose
<a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list__'><span class='textsf'><i >template-parameter-list</i></span></span></a> consists of
the specified <a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list___'><span class='textsf'><i >template-parameter-list</i></span></span></a>, if any<a class='hidden_link' href='#lambda.closure-4.sentence-1'>.</a></div> <div id='lambda.closure-4.sentence-2' class='sentence'>The <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause_____'><span class='textsf'><i >requires-clause</i></span></span></a> of the function call operator template
is the <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause______'><span class='textsf'><i >requires-clause</i></span></span></a> immediately following
<span class='texttt'><span class='anglebracket'>&lt;</span></span> <a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list____'><span class='textsf'><i >template-parameter-list</i></span></span></a> <span class='texttt'><span class='anglebracket'>&gt;</span></span>, if any<a class='hidden_link' href='#lambda.closure-4.sentence-2'>.</a></div> <div id='lambda.closure-4.sentence-3' class='sentence'>The trailing <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause_______'><span class='textsf'><i >requires-clause</i></span></span></a> of the function call operator
or operator template is the <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause________'><span class='textsf'><i >requires-clause</i></span></span></a>
of the <a href='#nt:lambda-declarator' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator______'><span class='textsf'><i >lambda-declarator</i></span></span></a>, if any<a class='hidden_link' href='#lambda.closure-4.sentence-3'>.</a></div> <div id='lambda.closure-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.closure-note-2'>2</a></i>:&ensp;<div id='lambda.closure-4.sentence-4' class='sentence'>The function call operator template for a generic lambda can be
an abbreviated function template (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>)<a class='hidden_link' href='#lambda.closure-4.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='lambda.closure-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.closure-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> glambda <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a, <span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a <span class='anglebracket'>&lt;</span> b; <span class='curlybracket'>}</span>;
<span class='keyword'>bool</span> b <span class='operator'>=</span> glambda<span class='parenthesis'>(</span><span class='literal'>3</span>, <span class='literal'>3.14</span><span class='parenthesis'>)</span>;                                      <span class='comment'>// OK</span>

<span class='keyword'>auto</span> vglambda <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> printer<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> ts<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>                                   <span class='comment'>// OK, <span class='tcode_in_codeblock'>ts</span> is a function parameter pack</span>
    printer<span class='parenthesis'>(</span>std<span class='operator'>::</span>forward<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span>ts<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>ts<span class='parenthesis'>)</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;

    <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      printer<span class='parenthesis'>(</span>ts <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>;
    <span class='curlybracket'>}</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>auto</span> p <span class='operator'>=</span> vglambda<span class='parenthesis'>(</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> v1, <span class='keyword'>auto</span> v2, <span class='keyword'>auto</span> v3<span class='parenthesis'>)</span>
                   <span class='curlybracket'>{</span> std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> v1 <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> v2 <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> v3; <span class='curlybracket'>}</span> <span class='parenthesis'>)</span>;
<span class='keyword'>auto</span> q <span class='operator'>=</span> p<span class='parenthesis'>(</span><span class='literal'>1</span>, <span class='literal'>'a'</span>, <span class='literal'>3.14</span><span class='parenthesis'>)</span>;                                       <span class='comment'>// OK, outputs <span class='tcode_in_codeblock'>1a3.14</span></span>
q<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                                                            <span class='comment'>// OK, outputs <span class='tcode_in_codeblock'>1a3.14</span></span>

<span class='keyword'>auto</span> fact <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>this</span> <span class='keyword'>auto</span> self, <span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>int</span> <span class='curlybracket'>{</span>                  <span class='comment'>// OK, explicit object parameter</span>
  <span class='keyword'>return</span> <span class='parenthesis'>(</span>n <span class='anglebracket'>&lt;</span><span class='operator'>=</span> <span class='literal'>1</span><span class='parenthesis'>)</span> <span class='operator'>?</span> <span class='literal'>1</span> <span class='operator'>:</span> n <span class='operator'>*</span> self<span class='parenthesis'>(</span>n<span class='operator'>-</span><span class='literal'>1</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> fact<span class='parenthesis'>(</span><span class='literal'>5</span><span class='parenthesis'>)</span>;                                           <span class='comment'>// OK, outputs 120</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.closure-5'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2019'>#</a></div><div class='texpara'><div id='lambda.closure-5.sentence-1' class='sentence'>Given a lambda with a <a href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture___'><span class='textsf'><i >lambda-capture</i></span></span></a>,
the type of the explicit object parameter, if any,
of the lambda's function call operator
(possibly instantiated from a function call operator template)
shall be either:
<ul class='itemize'><li id='lambda.closure-5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.closure-5.1'>(5.1)</a></div>the closure type,</li><li id='lambda.closure-5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.closure-5.2'>(5.2)</a></div>a class type publicly and unambiguously derived from the closure type, or</li><li id='lambda.closure-5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.closure-5.3'>(5.3)</a></div>a reference to a possibly cv-qualified such type<a class='hidden_link' href='#lambda.closure-5.sentence-1'>.</a></li></ul></div> <div id='lambda.closure-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.closure-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> C <span class='curlybracket'>{</span>
  <span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
  C<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> func<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> x <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>this</span> <span class='keyword'>auto</span><span class='operator'>&amp;</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;     <span class='comment'>// OK</span>
  <span class='keyword'>int</span> y <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>this</span> C<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// error</span>
  <span class='keyword'>int</span> z <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>this</span> C<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>42</span>; <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.closure-6'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2048'>#</a></div><div class='texpara'><div id='lambda.closure-6.sentence-1' class='sentence'>The function call operator or operator template is
a static member function or static member function template (<a href='class.static.mfct' title='11.4.9.2&emsp;Static member functions'>[class.<span class='shy'></span>static.<span class='shy'></span>mfct]</a>)
if the <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_____________________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s
<a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause_______'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> is followed by <span id=':static____'><span class='texttt'><span class='keyword'>static</span></span></span><a class='hidden_link' href='#lambda.closure-6.sentence-1'>.</a></div> <div id='lambda.closure-6.sentence-2' class='sentence'>Otherwise, it is
a non-static member function or member function template (<a href='class.mfct.non.static' title='11.4.3&emsp;Non-static member functions'>[class.<span class='shy'></span>mfct.<span class='shy'></span>non.<span class='shy'></span>static]</a>)
that is declared
<span id=':const_'><span class='texttt'><span class='keyword'>const</span></span></span> (<a href='class.mfct.non.static' title='11.4.3&emsp;Non-static member functions'>[class.<span class='shy'></span>mfct.<span class='shy'></span>non.<span class='shy'></span>static]</a>) if and only if the
<a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression______________________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause________'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> is not
followed by <span id=':mutable____'><span class='texttt'><span class='keyword'>mutable</span></span></span> and
the <a href='#nt:lambda-declarator' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator_______'><span class='textsf'><i >lambda-declarator</i></span></span></a> does not contain
an explicit object parameter<a class='hidden_link' href='#lambda.closure-6.sentence-2'>.</a></div> <div id='lambda.closure-6.sentence-3' class='sentence'>It is neither virtual nor declared <span class='texttt'><span class='keyword'>volatile</span></span><a class='hidden_link' href='#lambda.closure-6.sentence-3'>.</a></div> <div id='lambda.closure-6.sentence-4' class='sentence'>Any
<a href='except.spec#nt:noexcept-specifier' title='14.5&emsp;Exception specifications&emsp;[except.spec]'><span id='ntref:noexcept-specifier___'><span class='textsf'><i >noexcept-specifier</i></span></span></a> specified on a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_______________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
applies to the corresponding function call operator or operator template<a class='hidden_link' href='#lambda.closure-6.sentence-4'>.</a></div> <div id='lambda.closure-6.sentence-5' class='sentence'>An <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq________'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a> in a <a href='#nt:lambda-declarator' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator________'><span class='textsf'><i >lambda-declarator</i></span></span></a> appertains
to the type of the corresponding function call operator or operator template<a class='hidden_link' href='#lambda.closure-6.sentence-5'>.</a></div> <div id='lambda.closure-6.sentence-6' class='sentence'>An <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq_________'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a> in a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
preceding a <a href='#nt:lambda-declarator' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator_________'><span class='textsf'><i >lambda-declarator</i></span></span></a>
appertains to the corresponding function call operator or operator template<a class='hidden_link' href='#lambda.closure-6.sentence-6'>.</a></div> <div id='lambda.closure-6.sentence-7' class='sentence'>The function call operator or any given operator template specialization
is a constexpr function if either
the corresponding <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s
<a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause_________'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a>
is followed by <span id=':constexpr__'><span class='texttt'><span class='keyword'>constexpr</span></span></span> or <span id=':consteval__'><span class='texttt'><span class='keyword'>consteval</span></span></span>, or
it is constexpr-suitable (<a href='dcl.constexpr' title='9.2.6&emsp;The constexpr and consteval specifiers'>[dcl.<span class='shy'></span>constexpr]</a>)<a class='hidden_link' href='#lambda.closure-6.sentence-7'>.</a></div> <div id='lambda.closure-6.sentence-8' class='sentence'>It is an immediate function (<a href='dcl.constexpr' title='9.2.6&emsp;The constexpr and consteval specifiers'>[dcl.<span class='shy'></span>constexpr]</a>)
if the corresponding <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s
<a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause__________'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> is followed by <span id=':consteval___'><span class='texttt'><span class='keyword'>consteval</span></span></span><a class='hidden_link' href='#lambda.closure-6.sentence-8'>.</a></div> <div id='lambda.closure-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.closure-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> ID <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>;
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>ID<span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>3</span><span class='parenthesis'>)</span>;                      <span class='comment'>// OK</span>

<span class='keyword'>struct</span> NonLiteral <span class='curlybracket'>{</span>
  NonLiteral<span class='parenthesis'>(</span><span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='operator'>:</span> n<span class='parenthesis'>(</span>n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
  <span class='keyword'>int</span> n;
<span class='curlybracket'>}</span>;
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>ID<span class='parenthesis'>(</span>NonLiteral<span class='curlybracket'>{</span><span class='literal'>3</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='operator'>.</span>n <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>3</span><span class='parenthesis'>)</span>;        <span class='comment'>// error</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='lambda.closure-7'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2091'>#</a></div><div class='texpara'><div id='lambda.closure-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.closure-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> monoid <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> v<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> v; <span class='curlybracket'>}</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>auto</span> add <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> m1<span class='parenthesis'>)</span> <span class='keyword'>constexpr</span> <span class='curlybracket'>{</span>
  <span class='keyword'>auto</span> ret <span class='operator'>=</span> m1<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> m2<span class='parenthesis'>)</span> <span class='keyword'>mutable</span> <span class='curlybracket'>{</span>
    <span class='keyword'>auto</span> m1val <span class='operator'>=</span> m1<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='keyword'>auto</span> plus <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> m2val<span class='parenthesis'>)</span> <span class='keyword'>mutable</span> <span class='keyword'>constexpr</span>
                   <span class='curlybracket'>{</span> <span class='keyword'>return</span> m1val <span class='operator'>+</span><span class='operator'>=</span> m2val; <span class='curlybracket'>}</span>;
    ret <span class='operator'>=</span> plus<span class='parenthesis'>(</span>m2<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;
    <span class='keyword'>return</span> monoid<span class='parenthesis'>(</span>ret<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>constexpr</span> <span class='keyword'>auto</span> zero <span class='operator'>=</span> monoid<span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='keyword'>constexpr</span> <span class='keyword'>auto</span> one <span class='operator'>=</span> monoid<span class='parenthesis'>(</span><span class='literal'>1</span><span class='parenthesis'>)</span>;
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>add<span class='parenthesis'>(</span>one<span class='parenthesis'>)</span><span class='parenthesis'>(</span>zero<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> one<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;       <span class='comment'>// OK</span>

<span class='comment'>// Since <span class='tcode_in_codeblock'>two</span> below is not declared <span id=':constexpr___'><span class='tcode_in_codeblock'>constexpr</span></span>, an evaluation of its <span class='tcode_in_codeblock'>constexpr</span> member function call operator</span>
<span class='comment'>// cannot perform an lvalue-to-rvalue conversion on one of its subobjects (that represents its capture)</span>
<span class='comment'>// in a constant expression.</span>
<span class='keyword'>auto</span> two <span class='operator'>=</span> monoid<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span>;
assert<span class='parenthesis'>(</span>two<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>2</span><span class='parenthesis'>)</span>; <span class='comment'>// OK, not a constant expression.</span>
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>add<span class='parenthesis'>(</span>one<span class='parenthesis'>)</span><span class='parenthesis'>(</span>one<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> two<span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;        <span class='comment'>// error: <span class='tcode_in_codeblock'>two()</span> is not a constant expression</span>
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>add<span class='parenthesis'>(</span>one<span class='parenthesis'>)</span><span class='parenthesis'>(</span>one<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> monoid<span class='parenthesis'>(</span><span class='literal'>2</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;  <span class='comment'>// OK</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='lambda.closure-8'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2119'>#</a></div><div class='texpara'><div id='lambda.closure-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.closure-note-3'>3</a></i>:&ensp;<div id='lambda.closure-8.sentence-1' class='sentence'>The function call operator or operator template can be constrained (<a href='temp.constr.decl' title='13.5.3&emsp;Constrained declarations'>[temp.<span class='shy'></span>constr.<span class='shy'></span>decl]</a>)
by a <a href='temp.param#nt:type-constraint' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:type-constraint'><span class='textsf'><i >type-constraint</i></span></span></a> (<a href='temp.param' title='13.2&emsp;Template parameters'>[temp.<span class='shy'></span>param]</a>),
a <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause_________'><span class='textsf'><i >requires-clause</i></span></span></a> (<a href='temp.pre' title='13.1&emsp;Preamble'>[temp.<span class='shy'></span>pre]</a>),
or a trailing <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause__________'><span class='textsf'><i >requires-clause</i></span></span></a> (<a href='dcl.decl' title='9.3&emsp;Declarators'>[dcl.<span class='shy'></span>decl]</a>)<a class='hidden_link' href='#lambda.closure-8.sentence-1'>.</a></div> <div id='lambda.closure-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.closure-example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C1 <span class='operator'>=</span> <span class='comment'>/* ... */</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span>std<span class='operator'>::</span>size_t N<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C2 <span class='operator'>=</span> <span class='comment'>/* ... */</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> A, <span class='keyword'>typename</span> B<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C3 <span class='operator'>=</span> <span class='comment'>/* ... */</span>;

<span class='keyword'>auto</span> f <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T1, C1 T2<span class='anglebracket'>&gt;</span> <span class='keyword'>requires</span> C2<span class='anglebracket'>&lt;</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T1<span class='parenthesis'>)</span> <span class='operator'>+</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>T2<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span>
         <span class='parenthesis'>(</span>T1 a1, T1 b1, T2 a2, <span class='keyword'>auto</span> a3, <span class='keyword'>auto</span> a4<span class='parenthesis'>)</span> <span class='keyword'>requires</span> C3<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span>a4<span class='parenthesis'>)</span>, T2<span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='comment'>// <span class='tcode_in_codeblock'>T2</span> is constrained by a <a href='temp.param#nt:type-constraint' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:type-constraint_'><span class='textsf'><i >type-constraint</i></span></span></a>.</span>
  <span class='comment'>// <span class='tcode_in_codeblock'>T1</span> and <span class='tcode_in_codeblock'>T2</span> are constrained by a <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause___________'><span class='textsf'><i >requires-clause</i></span></span></a>, and</span>
  <span class='comment'>// <span class='tcode_in_codeblock'>T2</span> and the type of <span class='tcode_in_codeblock'>a4</span> are constrained by a trailing <a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause____________'><span class='textsf'><i >requires-clause</i></span></span></a>.</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='lambda.closure-9'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2141'>#</a></div><div class='texpara'><div id='lambda.closure-9.sentence-1' class='sentence'>The closure type for a non-generic <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression___________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> with no
<a href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture____'><span class='textsf'><i >lambda-capture</i></span></span></a>
and no explicit object parameter (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>)
whose constraints (if any) are satisfied
has a conversion function to pointer to
function with C++ language <a href='dcl.link' title='9.11&emsp;Linkage specifications&emsp;[dcl.link]'>linkage</a> having
the same parameter and return types as the closure type's function call operator<a class='hidden_link' href='#lambda.closure-9.sentence-1'>.</a></div> <div id='lambda.closure-9.sentence-2' class='sentence'>The conversion is to “pointer to <span id=':noexcept'><span class='texttt'><span class='keyword'>noexcept</span></span></span> function”
if the function call operator
has a non-throwing exception specification<a class='hidden_link' href='#lambda.closure-9.sentence-2'>.</a></div> <div id='lambda.closure-9.sentence-3' class='sentence'>If the function call operator is a static member function,
then the value returned by this conversion function is
a pointer to the function call operator<a class='hidden_link' href='#lambda.closure-9.sentence-3'>.</a></div> <div id='lambda.closure-9.sentence-4' class='sentence'>Otherwise, the value returned by this conversion function
is a pointer to a function <span class='texttt'>F</span> that, when invoked,
has the same effect as invoking the closure type's function call operator
on a default-constructed instance of the closure type<a class='hidden_link' href='#lambda.closure-9.sentence-4'>.</a></div> <div id='lambda.closure-9.sentence-5' class='sentence'><span class='texttt'>F</span> is a constexpr function
if the function call operator is a constexpr function
and is an immediate function
if the function call operator is an immediate function<a class='hidden_link' href='#lambda.closure-9.sentence-5'>.</a></div></div></div><div class='para' id='lambda.closure-10'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2164'>#</a></div><div class='texpara'><div id='lambda.closure-10.sentence-1' class='sentence'>For a generic lambda with no <a href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture_____'><span class='textsf'><i >lambda-capture</i></span></span></a>
and no explicit object parameter (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>),
the closure type has a
conversion function template to
pointer to function<a class='hidden_link' href='#lambda.closure-10.sentence-1'>.</a></div> <div id='lambda.closure-10.sentence-2' class='sentence'>The conversion function template has the same invented
template parameter list, and the pointer to function has the same
parameter types, as the function call operator template<a class='hidden_link' href='#lambda.closure-10.sentence-2'>.</a></div> <div id='lambda.closure-10.sentence-3' class='sentence'>The return type of
the pointer to function shall behave as if it were a
<a href='dcl.type.decltype#nt:decltype-specifier' title='9.2.9.6&emsp;Decltype specifiers&emsp;[dcl.type.decltype]'><span id='ntref:decltype-specifier'><span class='textsf'><i >decltype-specifier</i></span></span></a> denoting the return type of the corresponding
function call operator template specialization<a class='hidden_link' href='#lambda.closure-10.sentence-3'>.</a></div></div></div><div class='para nonNormativeOnly' id='lambda.closure-11'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2176'>#</a></div><div class='texpara'><div id='lambda.closure-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.closure-note-4'>4</a></i>:&ensp;<div id='lambda.closure-11.sentence-1' class='sentence'>If the generic lambda has no <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type_______'><span class='textsf'><i >trailing-return-type</i></span></span></a> or
the <a href='dcl.decl.general#nt:trailing-return-type' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:trailing-return-type________'><span class='textsf'><i >trailing-return-type</i></span></span></a> contains a placeholder type, return type
deduction of the corresponding function call operator template specialization
has to be done<a class='hidden_link' href='#lambda.closure-11.sentence-1'>.</a></div> <div id='lambda.closure-11.sentence-2' class='sentence'>The corresponding specialization is that instantiation of the
function call operator template with the same template arguments as those
deduced for the conversion function template<a class='hidden_link' href='#lambda.closure-11.sentence-2'>.</a></div> <div id='lambda.closure-11.sentence-3' class='sentence'>Consider the following:
<span class='codeblock'><span class='keyword'>auto</span> glambda <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>;
<span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span>fp<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='operator'>=</span> glambda;
</span></div> <div id='lambda.closure-11.sentence-4' class='sentence'>
The behavior of the conversion function of <span class='texttt'>glambda</span> above is like
that of the following conversion function:
<span class='codeblock'><span class='keyword'>struct</span> Closure <span class='curlybracket'>{</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>static</span> <span class='keyword'>auto</span> lambda_call_operator_invoker<span class='parenthesis'>(</span>T a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='comment'>// forwards execution to <span class='tcode_in_codeblock'>operator()(a)</span> and therefore has</span>
    <span class='comment'>// the same return type deduced</span>
    <span class='comment'>/* ... */</span>
  <span class='curlybracket'>}</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> fptr_t <span class='operator'>=</span>
     <span class='keyword'>decltype</span><span class='parenthesis'>(</span>lambda_call_operator_invoker<span class='parenthesis'>(</span>declval<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;

  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>operator</span> fptr_t<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>
    <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='operator'>&amp;</span>lambda_call_operator_invoker; <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span></div> —&nbsp;<i>end note</i>]</div></div></div><div class='texpara'><div id='lambda.closure-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.closure-example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f1<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>   <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>
<span class='keyword'>void</span> f2<span class='parenthesis'>(</span><span class='keyword'>char</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>  <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>

<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>    <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>     <span class='comment'>// #1</span>
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='keyword'>char</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>  <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>     <span class='comment'>// #2</span>

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>    <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>     <span class='comment'>// #3</span>
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>char</span> <span class='parenthesis'>(</span><span class='operator'>*</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>   <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>     <span class='comment'>// #4</span>

<span class='keyword'>auto</span> glambda <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>;
f1<span class='parenthesis'>(</span>glambda<span class='parenthesis'>)</span>;                    <span class='comment'>// OK</span>
f2<span class='parenthesis'>(</span>glambda<span class='parenthesis'>)</span>;                    <span class='comment'>// error: ID is not convertible</span>
g<span class='parenthesis'>(</span>glambda<span class='parenthesis'>)</span>;                     <span class='comment'>// error: ambiguous</span>
h<span class='parenthesis'>(</span>glambda<span class='parenthesis'>)</span>;                     <span class='comment'>// OK, calls #3 since it is convertible from ID</span>
<span class='keyword'>int</span><span class='operator'>&amp;</span> <span class='parenthesis'>(</span><span class='operator'>*</span>fpi<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span> <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span><span class='operator'>*</span> a<span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>auto</span><span class='operator'>&amp;</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='operator'>*</span>a; <span class='curlybracket'>}</span>;        <span class='comment'>// OK</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.closure-12'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2227'>#</a></div><div class='texpara'><div id='lambda.closure-12.sentence-1' class='sentence'>If the function call operator template is a static member function template,
then the value returned by
any given specialization of this conversion function template is
a pointer to the corresponding function call operator template specialization<a class='hidden_link' href='#lambda.closure-12.sentence-1'>.</a></div> <div id='lambda.closure-12.sentence-2' class='sentence'>Otherwise,
the value returned by any given specialization of this conversion function
template is a pointer to a function <span class='texttt'>F</span> that, when invoked, has the same
effect as invoking the generic lambda's corresponding function call operator
template specialization on a default-constructed instance of the closure type<a class='hidden_link' href='#lambda.closure-12.sentence-2'>.</a></div> <div id='lambda.closure-12.sentence-3' class='sentence'><span class='texttt'>F</span> is a constexpr function
if the corresponding specialization is a constexpr function and
<span class='texttt'>F</span> is an immediate function
if the function call operator template specialization is an immediate function<a class='hidden_link' href='#lambda.closure-12.sentence-3'>.</a></div> <div id='lambda.closure-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.closure-note-5'>5</a></i>:&ensp;<div id='lambda.closure-12.sentence-4' class='sentence'>This will result in the implicit instantiation of the generic lambda's body<a class='hidden_link' href='#lambda.closure-12.sentence-4'>.</a></div> <div id='lambda.closure-12.sentence-5' class='sentence'>The instantiated generic lambda's return type and parameter types need to match
the return type and parameter types of the pointer to function<a class='hidden_link' href='#lambda.closure-12.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='lambda.closure-example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.closure-example-7'>7</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> GL <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> a; <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>;
<span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span>GL_int<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='operator'>=</span> GL;        <span class='comment'>// OK, through conversion function template</span>
GL_int<span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span>;                      <span class='comment'>// OK, same as <span class='tcode_in_codeblock'>GL(3)</span></span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.closure-13'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2254'>#</a></div><div class='texpara'><div id='lambda.closure-13.sentence-1' class='sentence'>The conversion function or conversion function template is public,
constexpr, non-virtual, non-explicit, const, and has a non-throwing <a href='except.spec' title='14.5&emsp;Exception specifications&emsp;[except.spec]'>exception
specification</a><a class='hidden_link' href='#lambda.closure-13.sentence-1'>.</a></div> <div id='lambda.closure-example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.closure-example-8'>8</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> Fwd <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>*</span>fp<span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>, <span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> fp<span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>auto</span> C <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>;

<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>Fwd<span class='parenthesis'>(</span>C,<span class='literal'>3</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>3</span><span class='parenthesis'>)</span>;   <span class='comment'>// OK</span>

<span class='comment'>// No specialization of the function call operator template can be constexpr (due to the local static).</span>
<span class='keyword'>auto</span> NC <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>static</span> <span class='keyword'>int</span> s; <span class='keyword'>return</span> a; <span class='curlybracket'>}</span>;
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span>Fwd<span class='parenthesis'>(</span>NC,<span class='literal'>3</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>3</span><span class='parenthesis'>)</span>;  <span class='comment'>// error</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.closure-14'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2271'>#</a></div><div class='texpara'><div id='lambda.closure-14.sentence-1' class='sentence'>The <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression____________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement_____'><span class='textsf'><i >compound-statement</i></span></span></a> yields
the <a href='dcl.fct.def.general#nt:function-body' title='9.5.1&emsp;General&emsp;[dcl.fct.def.general]'><span id='ntref:function-body'><span class='textsf'><i >function-body</i></span></span></a> (<a href='dcl.fct.def' title='9.5&emsp;Function definitions'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def]</a>) of the function call operator,
but it is not within the scope of the closure type<a class='hidden_link' href='#lambda.closure-14.sentence-1'>.</a></div> <div id='lambda.closure-example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.closure-example-9'>9</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S1 <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> x, y;
  <span class='keyword'>int</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='keyword'>int</span> <span class='curlybracket'>{</span>
      <span class='keyword'>return</span> <span class='keyword'>operator</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span>x <span class='operator'>+</span> y<span class='parenthesis'>)</span>;   <span class='comment'>// equivalent to <span class='tcode_in_codeblock'>S1&#x200b;::&#x200b;operator()(this-&gt;x + (*this).y)</span></span>
                                        <span class='comment'>// <span id=':this______'><span class='tcode_in_codeblock'>this</span></span> has type <span class='tcode_in_codeblock'>S1*</span></span>
    <span class='curlybracket'>}</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div> <div id='lambda.closure-14.sentence-2' class='sentence'>
Further, a variable <span class='texttt'>__func__</span> is implicitly defined at the beginning of
the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement______'><span class='textsf'><i >compound-statement</i></span></span></a> of the <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_____________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>,
with semantics as described in <a href='dcl.fct.def.general' title='9.5.1&emsp;General'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>def.<span class='shy'></span>general]</a><a class='hidden_link' href='#lambda.closure-14.sentence-2'>.</a></div></div></div><div class='para' id='lambda.closure-15'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2293'>#</a></div><div class='texpara'><div id='lambda.closure-15.sentence-1' class='sentence'>The closure type associated with a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression______________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> has no
default constructor
if the <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_______________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> has a <a href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture______'><span class='textsf'><i >lambda-capture</i></span></span></a>
and a defaulted default constructor otherwise<a class='hidden_link' href='#lambda.closure-15.sentence-1'>.</a></div> <div id='lambda.closure-15.sentence-2' class='sentence'>It has a defaulted copy constructor and a defaulted move constructor (<a href='class.copy.ctor' title='11.4.5.3&emsp;Copy/move constructors'>[class.<span class='shy'></span>copy.<span class='shy'></span>ctor]</a>)<a class='hidden_link' href='#lambda.closure-15.sentence-2'>.</a></div> <div id='lambda.closure-15.sentence-3' class='sentence'>It has a deleted copy assignment operator if the <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
has a <a href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture_______'><span class='textsf'><i >lambda-capture</i></span></span></a> and defaulted copy and move assignment
operators otherwise (<a href='class.copy.assign' title='11.4.6&emsp;Copy/move assignment operator'>[class.<span class='shy'></span>copy.<span class='shy'></span>assign]</a>)<a class='hidden_link' href='#lambda.closure-15.sentence-3'>.</a></div> <div id='lambda.closure-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.closure-note-6'>6</a></i>:&ensp;<div id='lambda.closure-15.sentence-4' class='sentence'>These special member functions are implicitly defined as
usual, which can result in them being defined as deleted<a class='hidden_link' href='#lambda.closure-15.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='lambda.closure-16'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2307'>#</a></div><div class='texpara'><div id='lambda.closure-16.sentence-1' class='sentence'>The closure type associated with a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> has an
implicitly-declared destructor (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)<a class='hidden_link' href='#lambda.closure-16.sentence-1'>.</a></div></div></div><div class='para' id='lambda.closure-17'><div class='marginalizedparent'><a class='marginalized' href='#lambda.closure-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2311'>#</a></div><div class='texpara'><div id='lambda.closure-17.sentence-1' class='sentence'>A member of a closure type shall not be
<a href='temp.explicit' title='13.9.3&emsp;Explicit instantiation&emsp;[temp.explicit]'>explicitly instantiated</a>,
<a href='temp.expl.spec' title='13.9.4&emsp;Explicit specialization&emsp;[temp.expl.spec]'>explicitly specialized</a>, or
named in a <a href='class.friend' title='11.8.4&emsp;Friends&emsp;[class.friend]'>friend declaration</a><a class='hidden_link' href='#lambda.closure-17.sentence-1'>.</a></div></div></div></div><div id='lambda.capture' class='section'><h4 ><a class='secnum' href='#lambda.capture' style='min-width:95pt'>7.5.6.3</a> Captures <a class='abbr_ref' href='expr.prim.lambda.capture'>[expr.prim.lambda.capture]</a></h4><div class='texpara'><div class='bnf' id='nt:lambda-capture'>
<a class='hidden_link' href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='nt:lambda-capture'><span id=':lambda-capture'>lambda-capture<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:capture-default' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default'><span class='textsf'><i >capture-default</i></span></span></a><br/><a href='#nt:capture-list' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-list'><span class='textsf'><i >capture-list</i></span></span></a><br/><a href='#nt:capture-default' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default_'><span class='textsf'><i >capture-default</i></span></span></a> <span class='terminal'>,</span> <a href='#nt:capture-list' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-list_'><span class='textsf'><i >capture-list</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:capture-default'>
<a class='hidden_link' href='#nt:capture-default' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='nt:capture-default'><span id=':capture-default'>capture-default<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='operator'>&amp;</span></span><br/><span class='terminal'><span class='operator'>=</span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:capture-list'>
<a class='hidden_link' href='#nt:capture-list' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='nt:capture-list'><span id=':capture-list'>capture-list<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture'><span class='textsf'><i >capture</i></span></span></a><br/><a href='#nt:capture-list' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-list__'><span class='textsf'><i >capture-list</i></span></span></a> <span class='terminal'>,</span> <a href='#nt:capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture_'><span class='textsf'><i >capture</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:capture'>
<a class='hidden_link' href='#nt:capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='nt:capture'><span id=':capture'>capture<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:simple-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture'><span class='textsf'><i >simple-capture</i></span></span></a><br/><a href='#nt:init-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture_'><span class='textsf'><i >init-capture</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:simple-capture'>
<a class='hidden_link' href='#nt:simple-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='nt:simple-capture'><span id=':simple-capture'>simple-capture<span class='textnormal'>:</span></span></span></a><br/><a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_______'><span class='textsf'><i >identifier</i></span></span></a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span><br/><span class='terminal'><span class='operator'>&amp;</span></span> <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier________'><span class='textsf'><i >identifier</i></span></span></a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span><br/><span id=':this_______'><span class='texttt'><span class='keyword'>this</span></span></span><br/><span class='terminal'><span class='operator'>*</span></span> <span class='terminal'><span class='keyword'>this</span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:init-capture'>
<a class='hidden_link' href='#nt:init-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='nt:init-capture'><span id=':init-capture'>init-capture<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_________'><span class='textsf'><i >identifier</i></span></span></a> <a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer'><span class='textsf'><i >initializer</i></span></span></a><br/><span class='terminal'><span class='operator'>&amp;</span></span> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier__________'><span class='textsf'><i >identifier</i></span></span></a> <a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer_'><span class='textsf'><i >initializer</i></span></span></a>
</div></div><div class='para' id='lambda.capture-1'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2358'>#</a></div><div class='texpara'><div id='lambda.capture-1.sentence-1' class='sentence'>The body of a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> may refer to local entities
of enclosing block scopes by capturing those entities, as described
below<a class='hidden_link' href='#lambda.capture-1.sentence-1'>.</a></div></div></div><div class='para' id='lambda.capture-2'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2363'>#</a></div><div class='texpara'><div id='lambda.capture-2.sentence-1' class='sentence'>If a <a href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture________'><span class='textsf'><i >lambda-capture</i></span></span></a> includes a <a href='#nt:capture-default' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default__'><span class='textsf'><i >capture-default</i></span></span></a> that
is <span class='texttt'><span class='operator'>&amp;</span></span>, no identifier in a <a href='#nt:simple-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture_'><span class='textsf'><i >simple-capture</i></span></span></a> of that
<a href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture_________'><span class='textsf'><i >lambda-capture</i></span></span></a> shall be preceded
by <span class='texttt'><span class='operator'>&amp;</span></span><a class='hidden_link' href='#lambda.capture-2.sentence-1'>.</a></div> <div id='lambda.capture-2.sentence-2' class='sentence'>If a <a href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture__________'><span class='textsf'><i >lambda-capture</i></span></span></a> includes a
<a href='#nt:capture-default' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default___'><span class='textsf'><i >capture-default</i></span></span></a> that is <span class='texttt'><span class='operator'>=</span></span>, each
<a href='#nt:simple-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture__'><span class='textsf'><i >simple-capture</i></span></span></a> of that <a href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture___________'><span class='textsf'><i >lambda-capture</i></span></span></a> shall
be of the form
“<span class='texttt'><span class='operator'>&amp;</span></span> <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier___________'><span class='textsf'><i >identifier</i></span></span></a> <span class='texttt'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span>”,
“<span id=':this________'><span class='texttt'><span class='keyword'>this</span></span></span>”,
or “<span class='texttt'><span class='operator'>*</span> <span id=':this_________'><span class='texttt'><span class='keyword'>this</span></span></span></span>”<a class='hidden_link' href='#lambda.capture-2.sentence-2'>.</a></div> <div id='lambda.capture-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.capture-note-1'>1</a></i>:&ensp;<div id='lambda.capture-2.sentence-3' class='sentence'>The form <span class='texttt'><span class='squarebracket'>[</span><span class='operator'>&amp;</span>,<span id=':this__________'><span class='texttt'><span class='keyword'>this</span></span></span><span class='squarebracket'>]</span></span> is redundant but accepted
for compatibility with C++ 2014<a class='hidden_link' href='#lambda.capture-2.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='lambda.capture-2.sentence-4' class='sentence'>
Ignoring appearances in
<a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer__'><span class='textsf'><i >initializer</i></span></span></a><i >s</i> of <a href='#nt:init-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture__'><span class='textsf'><i >init-capture</i></span></span></a><i >s</i>, an identifier or
<span id=':this___________'><span class='texttt'><span class='keyword'>this</span></span></span> shall not appear more than once in a
<a href='#nt:lambda-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:lambda-capture____________'><span class='textsf'><i >lambda-capture</i></span></span></a><a class='hidden_link' href='#lambda.capture-2.sentence-4'>.</a></div> <div id='lambda.capture-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.capture-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S2 <span class='curlybracket'>{</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
<span class='keyword'>void</span> S2<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='squarebracket'>[</span><span class='operator'>&amp;</span>, i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;        <span class='comment'>// OK</span>
  <span class='squarebracket'>[</span><span class='operator'>&amp;</span>, <span class='keyword'>this</span>, i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;  <span class='comment'>// OK, equivalent to <span class='tcode_in_codeblock'>[&amp;, i]</span></span>
  <span class='squarebracket'>[</span><span class='operator'>&amp;</span>, <span class='operator'>&amp;</span>i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;       <span class='comment'>// error: <span class='tcode_in_codeblock'>i</span> preceded by <span class='tcode_in_codeblock'>&amp;</span> when <span class='tcode_in_codeblock'>&amp;</span> is the default</span>
  <span class='squarebracket'>[</span><span class='operator'>=</span>, <span class='operator'>*</span><span class='keyword'>this</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;    <span class='comment'>// OK</span>
  <span class='squarebracket'>[</span><span class='operator'>=</span>, <span class='keyword'>this</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;     <span class='comment'>// OK, equivalent to <span class='tcode_in_codeblock'>[=]</span></span>
  <span class='squarebracket'>[</span>i, i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;        <span class='comment'>// error: <span class='tcode_in_codeblock'>i</span> repeated</span>
  <span class='squarebracket'>[</span><span class='keyword'>this</span>, <span class='operator'>*</span><span class='keyword'>this</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='curlybracket'>}</span>; <span class='comment'>// error: <span id=':this____________'><span class='tcode_in_codeblock'>this</span></span> appears twice</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.capture-3'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2397'>#</a></div><div class='texpara'><div id='lambda.capture-3.sentence-1' class='sentence'>A <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression___________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> shall not have
a <a href='#nt:capture-default' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default____'><span class='textsf'><i >capture-default</i></span></span></a> or <a href='#nt:simple-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture___'><span class='textsf'><i >simple-capture</i></span></span></a>
in its <a href='#nt:lambda-introducer' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-introducer__'><span class='textsf'><i >lambda-introducer</i></span></span></a>
unless its innermost enclosing scope is a block scope (<a href='basic.scope.block' title='6.4.3&emsp;Block scope'>[basic.<span class='shy'></span>scope.<span class='shy'></span>block]</a>)
or it appears within a default member initializer
and its innermost enclosing scope is
the corresponding class scope (<a href='basic.scope.class' title='6.4.7&emsp;Class scope'>[basic.<span class='shy'></span>scope.<span class='shy'></span>class]</a>)<a class='hidden_link' href='#lambda.capture-3.sentence-1'>.</a></div></div></div><div class='para' id='lambda.capture-4'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2406'>#</a></div><div class='texpara'><div id='lambda.capture-4.sentence-1' class='sentence'>The <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier____________'><span class='textsf'><i >identifier</i></span></span></a> in a <a href='#nt:simple-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture____'><span class='textsf'><i >simple-capture</i></span></span></a>
shall denote a local entity (<a href='basic.lookup.unqual' title='6.5.3&emsp;Unqualified name lookup'>[basic.<span class='shy'></span>lookup.<span class='shy'></span>unqual]</a>, <a href='basic.pre' title='6.1&emsp;Preamble'>[basic.<span class='shy'></span>pre]</a>)<a class='hidden_link' href='#lambda.capture-4.sentence-1'>.</a></div> <div id='lambda.capture-4.sentence-2' class='sentence'>The <a href='#nt:simple-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture_____'><span class='textsf'><i >simple-capture</i></span></span></a><i >s</i> <span id=':this_____________'><span class='texttt'><span class='keyword'>this</span></span></span> and <span class='texttt'><span class='operator'>*</span> <span id=':this______________'><span class='texttt'><span class='keyword'>this</span></span></span></span>
denote the local entity <span class='texttt'><span class='operator'>*</span><span id=':this_______________'><span class='texttt'><span class='keyword'>this</span></span></span></span><a class='hidden_link' href='#lambda.capture-4.sentence-2'>.</a></div> <div id='lambda.capture-4.sentence-3' class='sentence'>An entity that is designated by a
<a href='#nt:simple-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture______'><span class='textsf'><i >simple-capture</i></span></span></a>
is said to be <a class='hidden_link' href='#def:explicitly_captured' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='def:explicitly_captured'><i >explicitly captured</i></span></a><a class='hidden_link' href='#lambda.capture-4.sentence-3'>.</a></div></div></div><div class='para' id='lambda.capture-5'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2415'>#</a></div><div class='texpara'><div id='lambda.capture-5.sentence-1' class='sentence'>If an <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_____________'><span class='textsf'><i >identifier</i></span></span></a> in a <a href='#nt:capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture__'><span class='textsf'><i >capture</i></span></span></a> appears
as the <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id__'><span class='textsf'><i >declarator-id</i></span></span></a> of a parameter of
the <a href='#nt:lambda-declarator' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-declarator__________'><span class='textsf'><i >lambda-declarator</i></span></span></a>'s <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause___________'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a>
or as the name of a template parameter of
the <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression____________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>'s <a href='temp.pre#nt:template-parameter-list' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-parameter-list_____'><span class='textsf'><i >template-parameter-list</i></span></span></a>,
the program is ill-formed<a class='hidden_link' href='#lambda.capture-5.sentence-1'>.</a></div> <div id='lambda.capture-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.capture-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>0</span>;
  <span class='keyword'>auto</span> g <span class='operator'>=</span> <span class='squarebracket'>[</span>x<span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>;    <span class='comment'>// error: parameter and <a href='#nt:capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture___'><span class='textsf'><i >capture</i></span></span></a> have the same name</span>
  <span class='keyword'>auto</span> h <span class='operator'>=</span> <span class='squarebracket'>[</span>y <span class='operator'>=</span> <span class='literal'>0</span><span class='squarebracket'>]</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> y<span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span>y<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span>;    <span class='comment'>// error: template parameter and <a href='#nt:capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture____'><span class='textsf'><i >capture</i></span></span></a></span>
                                                    <span class='comment'>// have the same name</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.capture-6'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2433'>#</a></div><div class='texpara'><div id='lambda.capture-6.sentence-1' class='sentence'>An <a href='#nt:init-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture___'><span class='textsf'><i >init-capture</i></span></span></a> inhabits
the lambda scope (<a href='basic.scope.lambda' title='6.4.5&emsp;Lambda scope'>[basic.<span class='shy'></span>scope.<span class='shy'></span>lambda]</a>)
of the <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_____________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a><a class='hidden_link' href='#lambda.capture-6.sentence-1'>.</a></div> <div id='lambda.capture-6.sentence-2' class='sentence'>An <a href='#nt:init-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture____'><span class='textsf'><i >init-capture</i></span></span></a> without ellipsis
behaves as if it declares and explicitly captures a variable of
the form “<span id=':auto_'><span class='texttt'><span class='keyword'>auto</span></span></span> <a href='#nt:init-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture_____'><span class='textsf'><i >init-capture</i></span></span></a> <span class='texttt'>;</span>”, except that:
<ul class='itemize'><li id='lambda.capture-6.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.capture-6.1'>(6.1)</a></div>if the capture is by copy (see below), the non-static data member
declared for the capture and the variable are treated as two different ways
of referring to the same object, which has the lifetime of the non-static
data member, and no additional copy and destruction is performed, and</li><li id='lambda.capture-6.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.capture-6.2'>(6.2)</a></div>if the capture is by reference, the variable's lifetime ends when the
closure object's lifetime ends<a class='hidden_link' href='#lambda.capture-6.sentence-2'>.</a></li></ul></div> <div id='lambda.capture-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.capture-note-2'>2</a></i>:&ensp;<div id='lambda.capture-6.sentence-3' class='sentence'>This enables an <a href='#nt:init-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture______'><span class='textsf'><i >init-capture</i></span></span></a> like
“<span class='texttt'>x <span class='operator'>=</span> std<span class='operator'>&#x200b;::&#x200b;</span>move<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span></span>”; the second “<span class='texttt'>x</span>” must bind to a
declaration in the surrounding context<a class='hidden_link' href='#lambda.capture-6.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='lambda.capture-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.capture-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>4</span>;
<span class='keyword'>auto</span> y <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>&amp;</span>r <span class='operator'>=</span> x, x <span class='operator'>=</span> x<span class='operator'>+</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='keyword'>int</span> <span class='curlybracket'>{</span>
            r <span class='operator'>+</span><span class='operator'>=</span> <span class='literal'>2</span>;
            <span class='keyword'>return</span> x<span class='operator'>+</span><span class='literal'>2</span>;
         <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                               <span class='comment'>// Updates <span class='tcode_in_codeblock'>&#x200b;::&#x200b;x</span> to 6, and initializes <span class='tcode_in_codeblock'>y</span> to 7.</span>

<span class='keyword'>auto</span> z <span class='operator'>=</span> <span class='squarebracket'>[</span>a <span class='operator'>=</span> <span class='literal'>42</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>1</span>; <span class='curlybracket'>}</span>;     <span class='comment'>// error: parameter and conceptual local variable have the same name</span>
<span class='keyword'>auto</span> counter <span class='operator'>=</span> <span class='squarebracket'>[</span>i<span class='operator'>=</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>mutable</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span>i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>     <span class='comment'>// OK, returns <span class='tcode_in_codeblock'>int</span></span>
  <span class='keyword'>return</span> i<span class='operator'>+</span><span class='operator'>+</span>;
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.capture-7'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2468'>#</a></div><div class='texpara'><div id='lambda.capture-7.sentence-1' class='sentence'>For the purposes of lambda capture,
an expression potentially references local entities as follows:
<ul class='itemize'><li id='lambda.capture-7.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.capture-7.1'>(7.1)</a></div><div class='texpara'><div id='lambda.capture-7.1.sentence-1' class='sentence'>An <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression______________________'><span class='textsf'><i >id-expression</i></span></span></a> that names a local entity
potentially references that entity;
an <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_______________________'><span class='textsf'><i >id-expression</i></span></span></a> that names
one or more non-static class members
and does not form a pointer to member (<a href='expr.unary.op' title='7.6.2.2&emsp;Unary operators'>[expr.<span class='shy'></span>unary.<span class='shy'></span>op]</a>)
potentially references <span class='texttt'><span class='operator'>*</span><span id=':this________________'><span class='texttt'><span class='keyword'>this</span></span></span></span><a class='hidden_link' href='#lambda.capture-7.1.sentence-1'>.</a></div> <div id='lambda.capture-note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.capture-note-3'>3</a></i>:&ensp;<div id='lambda.capture-7.1.sentence-2' class='sentence'>This occurs even if overload resolution
selects a static member function for the <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression________________________'><span class='textsf'><i >id-expression</i></span></span></a><a class='hidden_link' href='#lambda.capture-7.1.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='lambda.capture-7.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.capture-7.2'>(7.2)</a></div><div class='texpara'><div id='lambda.capture-7.2.sentence-1' class='sentence'>A <span id=':this_________________'><span class='texttt'><span class='keyword'>this</span></span></span> expression potentially references <span class='texttt'><span class='operator'>*</span><span id=':this__________________'><span class='texttt'><span class='keyword'>this</span></span></span></span><a class='hidden_link' href='#lambda.capture-7.2.sentence-1'>.</a></div></div></li><li id='lambda.capture-7.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.capture-7.3'>(7.3)</a></div><div class='texpara'><div id='lambda.capture-7.3.sentence-1' class='sentence'>A <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression______________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> potentially references
the local entities named by its <a href='#nt:simple-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture_______'><span class='textsf'><i >simple-capture</i></span></span></a><i >s</i><a class='hidden_link' href='#lambda.capture-7.3.sentence-1'>.</a></div></div></li></ul></div></div><div class='texpara'><div id='lambda.capture-7.sentence-2' class='sentence'>If an expression potentially references a local entity
within a scope in which it is odr-usable (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>),
and the expression would be potentially evaluated
if the effect of any enclosing <span id=':typeid'><span class='texttt'><span class='keyword'>typeid</span></span></span> expressions (<a href='expr.typeid' title='7.6.1.8&emsp;Type identification'>[expr.<span class='shy'></span>typeid]</a>) were ignored,
the entity is said to be <a class='hidden_link' href='#def:capture,implicit' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='def:capture,implicit'><i >implicitly captured</i></span></a>
by each intervening <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_______________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> with an associated
<a href='#nt:capture-default' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default_____'><span class='textsf'><i >capture-default</i></span></span></a> that does not explicitly capture it<a class='hidden_link' href='#lambda.capture-7.sentence-2'>.</a></div> <div id='lambda.capture-7.sentence-3' class='sentence'>The implicit capture of <span class='texttt'><span class='operator'>*</span><span id=':this___________________'><span class='texttt'><span class='keyword'>this</span></span></span></span> is deprecated when the
<a href='#nt:capture-default' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default______'><span class='textsf'><i >capture-default</i></span></span></a> is <span class='texttt'><span class='operator'>=</span></span>; see <a href='depr.capture.this' title='D.3&emsp;Implicit capture of *this by reference'>[depr.<span class='shy'></span>capture.<span class='shy'></span>this]</a><a class='hidden_link' href='#lambda.capture-7.sentence-3'>.</a></div> <div id='lambda.capture-example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.capture-example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span>, <span class='keyword'>const</span> <span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;         <span class='comment'>// #1</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>&amp;</span>, <span class='keyword'>const</span> <span class='keyword'>int</span> <span class='parenthesis'>(</span><span class='operator'>&amp;</span><span class='parenthesis'>)</span><span class='squarebracket'>[</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span>;       <span class='comment'>// #2</span>
<span class='keyword'>void</span> test<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> <span class='keyword'>int</span> x <span class='operator'>=</span> <span class='literal'>17</span>;
  <span class='keyword'>auto</span> g <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;                       <span class='comment'>// OK, calls #1, does not capture <span class='tcode_in_codeblock'>x</span></span>
  <span class='curlybracket'>}</span>;

  <span class='keyword'>auto</span> g1 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;                       <span class='comment'>// OK, calls #1, captures <span class='tcode_in_codeblock'>x</span></span>
  <span class='curlybracket'>}</span>;

  <span class='keyword'>auto</span> g2 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> selector<span class='squarebracket'>[</span><span class='keyword'>sizeof</span><span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span> <span class='operator'>?</span> <span class='literal'>1</span> <span class='operator'>:</span> <span class='literal'>2</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
    f<span class='parenthesis'>(</span>x, selector<span class='parenthesis'>)</span>;             <span class='comment'>// OK, captures <span class='tcode_in_codeblock'>x</span>, can call #1 or #2</span>
  <span class='curlybracket'>}</span>;

  <span class='keyword'>auto</span> g3 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>typeid</span><span class='parenthesis'>(</span>a <span class='operator'>+</span> x<span class='parenthesis'>)</span>;              <span class='comment'>// captures <span class='tcode_in_codeblock'>x</span> regardless of whether <span class='tcode_in_codeblock'>a + x</span> is an unevaluated operand</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span> <div id='lambda.capture-7.sentence-4' class='sentence'>
Within <span class='texttt'>g1</span>, an implementation can optimize away
the capture of <span class='texttt'>x</span> as it is not odr-used<a class='hidden_link' href='#lambda.capture-7.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div> <div id='lambda.capture-note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.capture-note-4'>4</a></i>:&ensp;<div id='lambda.capture-7.sentence-5' class='sentence'>The set of captured entities is determined syntactically,
and entities are implicitly captured
even if the expression denoting a local entity
is within a discarded statement (<a href='stmt.if' title='8.5.2&emsp;The if statement'>[stmt.<span class='shy'></span>if]</a>)<a class='hidden_link' href='#lambda.capture-7.sentence-5'>.</a></div> <div id='lambda.capture-example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.capture-example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>bool</span> B<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>auto</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>if</span> <span class='keyword'>constexpr</span> <span class='parenthesis'>(</span>B <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> <span class='anglebracket'>&gt;</span> <span class='literal'>4</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      <span class='parenthesis'>(</span><span class='keyword'>void</span><span class='parenthesis'>)</span>n;                  <span class='comment'>// captures <span class='tcode_in_codeblock'>n</span> regardless of the value of <span class='tcode_in_codeblock'>B</span> and <span class='tcode_in_codeblock'>sizeof(int)</span></span>
    <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='literal'>0</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='lambda.capture-8'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2547'>#</a></div><div class='texpara'><div id='lambda.capture-8.sentence-1' class='sentence'>An entity is <a class='hidden_link' href='#def:captured' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='def:captured'><i >captured</i></span></a> if it is captured explicitly or implicitly<a class='hidden_link' href='#lambda.capture-8.sentence-1'>.</a></div> <div id='lambda.capture-8.sentence-2' class='sentence'>An entity
captured by a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> is odr-used (<a href='basic.def.odr#term.odr.use' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>) by
the <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a><a class='hidden_link' href='#lambda.capture-8.sentence-2'>.</a></div> <div id='lambda.capture-note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.capture-note-5'>5</a></i>:&ensp;<div id='lambda.capture-8.sentence-3' class='sentence'>As a consequence, if a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
explicitly captures an entity that is not odr-usable,
the program is ill-formed (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>)<a class='hidden_link' href='#lambda.capture-8.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='lambda.capture-example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.capture-example-6'>6</a></i>:&ensp;<span id=':Bond,James_Bond'><div class='marginalizedparent'><a class='itemDeclLink' href='#:Bond,James_Bond'>🔗</a></div><span class='codeblock'><span class='keyword'>void</span> f1<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> <span class='keyword'>const</span> N <span class='operator'>=</span> <span class='literal'>20</span>;
  <span class='keyword'>auto</span> m1 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span>
    <span class='keyword'>int</span> <span class='keyword'>const</span> M <span class='operator'>=</span> <span class='literal'>30</span>;
    <span class='keyword'>auto</span> m2 <span class='operator'>=</span> <span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='curlybracket'>{</span>
      <span class='keyword'>int</span> x<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span><span class='squarebracket'>[</span>M<span class='squarebracket'>]</span>;              <span class='comment'>// OK, <span class='tcode_in_codeblock'>N</span> and <span class='tcode_in_codeblock'>M</span> are not odr-used</span>
      x<span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span><span class='squarebracket'>[</span><span class='literal'>0</span><span class='squarebracket'>]</span> <span class='operator'>=</span> i;              <span class='comment'>// OK, <span class='tcode_in_codeblock'>i</span> is explicitly captured by <span class='tcode_in_codeblock'>m2</span> and implicitly captured by <span class='tcode_in_codeblock'>m1</span></span>
    <span class='curlybracket'>}</span>;
  <span class='curlybracket'>}</span>;
  <span class='keyword'>struct</span> s1 <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> f;
    <span class='keyword'>void</span> work<span class='parenthesis'>(</span><span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      <span class='keyword'>int</span> m <span class='operator'>=</span> n<span class='operator'>*</span>n;
      <span class='keyword'>int</span> j <span class='operator'>=</span> <span class='literal'>40</span>;
      <span class='keyword'>auto</span> m3 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='keyword'>this</span>,m<span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
        <span class='keyword'>auto</span> m4 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>&amp;</span>,j<span class='squarebracket'>]</span> <span class='curlybracket'>{</span>       <span class='comment'>// error: <span class='tcode_in_codeblock'>j</span> not odr-usable due to intervening lambda <span class='tcode_in_codeblock'>m3</span></span>
          <span class='keyword'>int</span> x <span class='operator'>=</span> n;            <span class='comment'>// error: <span class='tcode_in_codeblock'>n</span> is odr-used but not odr-usable due to intervening lambda <span class='tcode_in_codeblock'>m3</span></span>
          x <span class='operator'>+</span><span class='operator'>=</span> m;               <span class='comment'>// OK, <span class='tcode_in_codeblock'>m</span> implicitly captured by <span class='tcode_in_codeblock'>m4</span> and explicitly captured by <span class='tcode_in_codeblock'>m3</span></span>
          x <span class='operator'>+</span><span class='operator'>=</span> i;               <span class='comment'>// error: <span class='tcode_in_codeblock'>i</span> is odr-used but not odr-usable</span>
                                <span class='comment'>// due to intervening function and class scopes</span>
          x <span class='operator'>+</span><span class='operator'>=</span> f;               <span class='comment'>// OK, <span id=':this____________________'><span class='tcode_in_codeblock'>this</span></span> captured implicitly by <span class='tcode_in_codeblock'>m4</span> and explicitly by <span class='tcode_in_codeblock'>m3</span></span>
        <span class='curlybracket'>}</span>;
      <span class='curlybracket'>}</span>;
    <span class='curlybracket'>}</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>

<span class='keyword'>struct</span> s2 <span class='curlybracket'>{</span>
  <span class='keyword'>double</span> ohseven <span class='operator'>=</span> <span class='literal'>.007</span>;
  <span class='keyword'>auto</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='keyword'>this</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
      <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>*</span><span class='keyword'>this</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
          <span class='keyword'>return</span> ohseven;       <span class='comment'>// OK</span>
      <span class='curlybracket'>}</span>;
    <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
  <span class='keyword'>auto</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
      <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>*</span><span class='keyword'>this</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;   <span class='comment'>// error: <span class='tcode_in_codeblock'>*this</span> not captured by outer <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression___________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a></span>
    <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span></span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='lambda.capture-9'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2604'>#</a></div><div class='texpara'><div id='lambda.capture-note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.capture-note-6'>6</a></i>:&ensp;<div id='lambda.capture-9.sentence-1' class='sentence'>Because local entities are not
odr-usable within a default argument (<a href='basic.def.odr' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>),
a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression____________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> appearing in a default argument
cannot implicitly or explicitly capture any local entity<a class='hidden_link' href='#lambda.capture-9.sentence-1'>.</a></div> <div id='lambda.capture-9.sentence-2' class='sentence'>Such a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_____________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
can still have an <a href='#nt:init-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture_______'><span class='textsf'><i >init-capture</i></span></span></a> if
any full-expression in its <a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer___'><span class='textsf'><i >initializer</i></span></span></a>
satisfies the constraints of an expression appearing in
a default argument (<a href='dcl.fct.default' title='9.3.4.7&emsp;Default arguments'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>default]</a>)<a class='hidden_link' href='#lambda.capture-9.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='lambda.capture-example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.capture-example-7'>7</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f2<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='literal'>1</span>;
  <span class='keyword'>void</span> g1<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;          <span class='comment'>// error</span>
  <span class='keyword'>void</span> g2<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span>i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;          <span class='comment'>// error</span>
  <span class='keyword'>void</span> g3<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> i; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;          <span class='comment'>// error</span>
  <span class='keyword'>void</span> g4<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>0</span>; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;          <span class='comment'>// OK</span>
  <span class='keyword'>void</span> g5<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='keyword'>sizeof</span> i; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;    <span class='comment'>// OK</span>
  <span class='keyword'>void</span> g6<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span>x<span class='operator'>=</span><span class='literal'>1</span><span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;        <span class='comment'>// OK</span>
  <span class='keyword'>void</span> g7<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='squarebracket'>[</span>x<span class='operator'>=</span>i<span class='squarebracket'>]</span><span class='curlybracket'>{</span> <span class='keyword'>return</span> x; <span class='curlybracket'>}</span><span class='parenthesis'>)</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span><span class='parenthesis'>)</span>;        <span class='comment'>// error</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.capture-10'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2631'>#</a></div><div class='texpara'><div id='lambda.capture-10.sentence-1' class='sentence'>An entity is <a class='hidden_link' href='#def:captured,by_copy' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='def:captured,by_copy'><i >captured by copy</i></span></a> if
<ul class='itemize'><li id='lambda.capture-10.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.capture-10.1'>(10.1)</a></div>it is implicitly captured,
the <a href='#nt:capture-default' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:capture-default_______'><span class='textsf'><i >capture-default</i></span></span></a> is <span class='texttt'><span class='operator'>=</span></span>, and
the captured entity is not <span class='texttt'><span class='operator'>*</span><span id=':this_____________________'><span class='texttt'><span class='keyword'>this</span></span></span></span>, or</li><li id='lambda.capture-10.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.capture-10.2'>(10.2)</a></div>it is explicitly captured with a capture that is not of the form
<span id=':this______________________'><span class='texttt'><span class='keyword'>this</span></span></span>,
<span class='texttt'><span class='operator'>&amp;</span></span> <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier______________'><span class='textsf'><i >identifier</i></span></span></a> <span class='texttt'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span>, or
<span class='texttt'><span class='operator'>&amp;</span></span> <span class='texttt'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='lex.name#nt:identifier' title='5.11&emsp;Identifiers&emsp;[lex.name]'><span id='ntref:identifier_______________'><span class='textsf'><i >identifier</i></span></span></a> <a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer____'><span class='textsf'><i >initializer</i></span></span></a><a class='hidden_link' href='#lambda.capture-10.sentence-1'>.</a></li></ul></div> <div id='lambda.capture-10.sentence-2' class='sentence'>
For each entity captured by copy, an
unnamed non-static data member is declared in the closure type<a class='hidden_link' href='#lambda.capture-10.sentence-2'>.</a></div> <div id='lambda.capture-10.sentence-3' class='sentence'>The declaration order of
these members is unspecified<a class='hidden_link' href='#lambda.capture-10.sentence-3'>.</a></div> <div id='lambda.capture-10.sentence-4' class='sentence'>The type of such a data member is
the referenced type if the entity is a reference to an object,
an lvalue reference to the referenced function type if the entity is a reference to a function, or
the type of the corresponding captured entity otherwise<a class='hidden_link' href='#lambda.capture-10.sentence-4'>.</a></div> <div id='lambda.capture-10.sentence-5' class='sentence'>A member of an anonymous union shall not be captured by copy<a class='hidden_link' href='#lambda.capture-10.sentence-5'>.</a></div></div></div><div class='para' id='lambda.capture-11'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2652'>#</a></div><div class='texpara'><div id='lambda.capture-11.sentence-1' class='sentence'>Every <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_________________________'><span class='textsf'><i >id-expression</i></span></span></a> within the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement_______'><span class='textsf'><i >compound-statement</i></span></span></a> of a
<a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression______________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> that is an odr-use (<a href='basic.def.odr#term.odr.use' title='6.3&emsp;One-definition rule'>[basic.<span class='shy'></span>def.<span class='shy'></span>odr]</a>) of an
entity captured by copy is transformed into an access to the corresponding unnamed data
member of the closure type<a class='hidden_link' href='#lambda.capture-11.sentence-1'>.</a></div> <div id='lambda.capture-note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.capture-note-7'>7</a></i>:&ensp;<div id='lambda.capture-11.sentence-2' class='sentence'>An <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression__________________________'><span class='textsf'><i >id-expression</i></span></span></a> that is not an odr-use refers to
the original entity, never to a member of the closure type<a class='hidden_link' href='#lambda.capture-11.sentence-2'>.</a></div> <div id='lambda.capture-11.sentence-3' class='sentence'>However, such
an <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression___________________________'><span class='textsf'><i >id-expression</i></span></span></a> can still cause the implicit capture of the
entity<a class='hidden_link' href='#lambda.capture-11.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='lambda.capture-11.sentence-4' class='sentence'>
If <span class='texttt'><span class='operator'>*</span><span id=':this_______________________'><span class='texttt'><span class='keyword'>this</span></span></span></span> is captured by copy, each expression that odr-uses <span class='texttt'><span class='operator'>*</span><span id=':this________________________'><span class='texttt'><span class='keyword'>this</span></span></span></span> is
transformed to instead refer to the corresponding unnamed data member of the closure type<a class='hidden_link' href='#lambda.capture-11.sentence-4'>.</a></div> <div id='lambda.capture-example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.capture-example-8'>8</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>const</span> <span class='keyword'>int</span><span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>const</span> <span class='keyword'>int</span> N <span class='operator'>=</span> <span class='literal'>10</span>;
  <span class='squarebracket'>[</span><span class='operator'>=</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
    <span class='keyword'>int</span> arr<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span>;     <span class='comment'>// OK, not an odr-use, refers to variable with automatic storage duration</span>
    f<span class='parenthesis'>(</span><span class='operator'>&amp;</span>N<span class='parenthesis'>)</span>;          <span class='comment'>// OK, causes <span class='tcode_in_codeblock'>N</span> to be captured; <span class='tcode_in_codeblock'>&amp;N</span> points to</span>
                    <span class='comment'>// the corresponding member of the closure type</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.capture-12'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-12'>12</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2680'>#</a></div><div class='texpara'><div id='lambda.capture-12.sentence-1' class='sentence'>An entity is <a class='hidden_link' href='#def:captured,by_reference' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='def:captured,by_reference'><i >captured by reference</i></span></a> if it is implicitly or explicitly
captured but not captured by copy<a class='hidden_link' href='#lambda.capture-12.sentence-1'>.</a></div> <div id='lambda.capture-12.sentence-2' class='sentence'>It is unspecified whether additional unnamed
non-static data members are declared in the closure type for entities captured by
reference<a class='hidden_link' href='#lambda.capture-12.sentence-2'>.</a></div> <div id='lambda.capture-12.sentence-3' class='sentence'>If declared, such non-static data members shall be of literal type<a class='hidden_link' href='#lambda.capture-12.sentence-3'>.</a></div> <div id='lambda.capture-example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.capture-example-9'>9</a></i>:&ensp;<span class='codeblock'><span class='comment'>// The inner closure type must be a literal type regardless of how reference captures are represented.</span>
<span class='keyword'>static_assert</span><span class='parenthesis'>(</span><span class='squarebracket'>[</span><span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>&amp;</span>n<span class='squarebracket'>]</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='operator'>+</span><span class='operator'>+</span>n; <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span><span class='parenthesis'>(</span><span class='literal'>3</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>4</span><span class='parenthesis'>)</span>;
</span> —&nbsp;<i>end example</i>]</div></div> <div id='lambda.capture-12.sentence-4' class='sentence'>
A bit-field or a member of an anonymous union
shall not be captured by reference<a class='hidden_link' href='#lambda.capture-12.sentence-4'>.</a></div></div></div><div class='para' id='lambda.capture-13'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-13'>13</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2695'>#</a></div><div class='texpara'><div id='lambda.capture-13.sentence-1' class='sentence'>An <a href='#nt:id-expression' title='7.5.5.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression____________________________'><span class='textsf'><i >id-expression</i></span></span></a> within
the <a href='stmt.block#nt:compound-statement' title='8.4&emsp;Compound statement or block&emsp;[stmt.block]'><span id='ntref:compound-statement________'><span class='textsf'><i >compound-statement</i></span></span></a> of a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_______________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
that is an odr-use of a reference captured by reference
refers to the entity to which the captured reference is bound and
not to the captured reference<a class='hidden_link' href='#lambda.capture-13.sentence-1'>.</a></div> <div id='lambda.capture-note-8' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.capture-note-8'>8</a></i>:&ensp;<div id='lambda.capture-13.sentence-2' class='sentence'>The validity of such captures is determined by
the lifetime of the object to which the reference refers,
not by the lifetime of the reference itself<a class='hidden_link' href='#lambda.capture-13.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='lambda.capture-example-10' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.capture-example-10'>10</a></i>:&ensp;<span class='codeblock'><span class='keyword'>auto</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span> <span class='operator'>&amp;</span>r<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='squarebracket'>[</span><span class='operator'>&amp;</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span>
    <span class='operator'>+</span><span class='operator'>+</span>r;            <span class='comment'>// Valid after <span class='tcode_in_codeblock'>h</span> returns if the lifetime of the</span>
                    <span class='comment'>// object to which <span class='tcode_in_codeblock'>r</span> is bound has not ended</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.capture-14'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-14'>14</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2717'>#</a></div><div class='texpara'><div id='lambda.capture-14.sentence-1' class='sentence'>If a <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression________________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> <span class='texttt'>m2</span> captures an entity and that entity is
captured by an immediately enclosing <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_________________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
<span class='texttt'>m1</span>, then
<span class='texttt'>m2</span>'s capture is transformed as follows:
<ul class='itemize'><li id='lambda.capture-14.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.capture-14.1'>(14.1)</a></div><div class='texpara'><div id='lambda.capture-14.1.sentence-1' class='sentence'>If <span class='texttt'>m1</span> captures the entity by copy,
<span class='texttt'>m2</span> captures the corresponding
non-static data member of <span class='texttt'>m1</span>'s closure type;
if <span class='texttt'>m1</span> is not <span id=':mutable_____'><span class='texttt'><span class='keyword'>mutable</span></span></span>, the non-static data member is considered to be const-qualified<a class='hidden_link' href='#lambda.capture-14.1.sentence-1'>.</a></div></div></li><li id='lambda.capture-14.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#lambda.capture-14.2'>(14.2)</a></div><div class='texpara'><div id='lambda.capture-14.2.sentence-1' class='sentence'>If <span class='texttt'>m1</span> captures the entity by reference,
<span class='texttt'>m2</span> captures the same
entity captured by <span class='texttt'>m1</span><a class='hidden_link' href='#lambda.capture-14.2.sentence-1'>.</a></div></div></li></ul></div> <div id='lambda.capture-example-11' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.capture-example-11'>11</a></i>:&ensp;<div id='lambda.capture-14.sentence-2' class='sentence'>The nested <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression__________________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a><i >s</i> and invocations below will output
<span class='texttt'><span class='literal'>123234</span></span><a class='hidden_link' href='#lambda.capture-14.sentence-2'>.</a></div> <span class='codeblock'><span class='keyword'>int</span> a <span class='operator'>=</span> <span class='literal'>1</span>, b <span class='operator'>=</span> <span class='literal'>1</span>, c <span class='operator'>=</span> <span class='literal'>1</span>;
<span class='keyword'>auto</span> m1 <span class='operator'>=</span> <span class='squarebracket'>[</span>a, <span class='operator'>&amp;</span>b, <span class='operator'>&amp;</span>c<span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>mutable</span> <span class='curlybracket'>{</span>
  <span class='keyword'>auto</span> m2 <span class='operator'>=</span> <span class='squarebracket'>[</span>a, b, <span class='operator'>&amp;</span>c<span class='squarebracket'>]</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>mutable</span> <span class='curlybracket'>{</span>
    std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> a <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> b <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> c;
    a <span class='operator'>=</span> <span class='literal'>4</span>; b <span class='operator'>=</span> <span class='literal'>4</span>; c <span class='operator'>=</span> <span class='literal'>4</span>;
  <span class='curlybracket'>}</span>;
  a <span class='operator'>=</span> <span class='literal'>3</span>; b <span class='operator'>=</span> <span class='literal'>3</span>; c <span class='operator'>=</span> <span class='literal'>3</span>;
  m2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
a <span class='operator'>=</span> <span class='literal'>2</span>; b <span class='operator'>=</span> <span class='literal'>2</span>; c <span class='operator'>=</span> <span class='literal'>2</span>;
m1<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
std<span class='operator'>::</span>cout <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> a <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> b <span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> c;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='lambda.capture-15'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-15'>15</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2750'>#</a></div><div class='texpara'><div id='lambda.capture-15.sentence-1' class='sentence'>When the <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression___________________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a> is evaluated, the entities that are
captured by copy are used to direct-initialize each corresponding non-static data member
of the resulting closure object, and the non-static data members corresponding to the
<a href='#nt:init-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture________'><span class='textsf'><i >init-capture</i></span></span></a><i >s</i> are initialized as indicated by the corresponding
<a href='dcl.init.general#nt:initializer' title='9.4.1&emsp;General&emsp;[dcl.init.general]'><span id='ntref:initializer_____'><span class='textsf'><i >initializer</i></span></span></a> (which may be copy- or direct-initialization)<a class='hidden_link' href='#lambda.capture-15.sentence-1'>.</a></div> <div id='lambda.capture-15.sentence-2' class='sentence'>(For array members, the array elements are
direct-initialized in increasing subscript order<a class='hidden_link' href='#lambda.capture-15.sentence-2'>.</a>)</div> <div id='lambda.capture-15.sentence-3' class='sentence'>These initializations are performed
in the (unspecified) order in which the non-static data members are declared<a class='hidden_link' href='#lambda.capture-15.sentence-3'>.</a></div> <div id='lambda.capture-note-9' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.capture-note-9'>9</a></i>:&ensp;<div id='lambda.capture-15.sentence-4' class='sentence'>This ensures that the destructions will occur in the reverse order of the constructions<a class='hidden_link' href='#lambda.capture-15.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='lambda.capture-16'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-16'>16</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2762'>#</a></div><div class='texpara'><div id='lambda.capture-note-10' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#lambda.capture-note-10'>10</a></i>:&ensp;<div id='lambda.capture-16.sentence-1' class='sentence'>If a non-reference entity is implicitly or explicitly captured by reference,
invoking the function call operator of the corresponding <a href='#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression____________________________________________________'><span class='textsf'><i >lambda-expression</i></span></span></a>
after the lifetime of the entity has ended is likely to result in undefined behavior<a class='hidden_link' href='#lambda.capture-16.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='lambda.capture-17'><div class='marginalizedparent'><a class='marginalized' href='#lambda.capture-17'>17</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2769'>#</a></div><div class='texpara'><div id='lambda.capture-17.sentence-1' class='sentence'>A <a href='#nt:simple-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:simple-capture________'><span class='textsf'><i >simple-capture</i></span></span></a> containing an ellipsis is a pack
expansion (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>)<a class='hidden_link' href='#lambda.capture-17.sentence-1'>.</a></div> <div id='lambda.capture-17.sentence-2' class='sentence'><a class='index' id=':init-capture_pack'></a>An <a href='#nt:init-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture_________'><span class='textsf'><i >init-capture</i></span></span></a> containing an ellipsis is a pack
expansion that declares an
<a href='#nt:init-capture' title='7.5.6.3&emsp;Captures&emsp;[expr.prim.lambda.capture]'><span id='ntref:init-capture__________'><span class='textsf'><i >init-capture</i></span></span></a> pack (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>)<a class='hidden_link' href='#lambda.capture-17.sentence-2'>.</a></div> <div id='lambda.capture-example-12' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#lambda.capture-example-12'>12</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> Args<span class='anglebracket'>&gt;</span>
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>Args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> args<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>auto</span> lm <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>&amp;</span>, args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> g<span class='parenthesis'>(</span>args<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
  lm<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;

  <span class='keyword'>auto</span> lm2 <span class='operator'>=</span> <span class='squarebracket'>[</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>xs<span class='operator'>=</span>std<span class='operator'>::</span>move<span class='parenthesis'>(</span>args<span class='parenthesis'>)</span><span class='squarebracket'>]</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> g<span class='parenthesis'>(</span>xs<span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>;
  lm2<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> </div></div></div></div><div id='fold' class='section'><h3 ><a class='secnum' href='#fold' style='min-width:80pt'>7.5.7</a> Fold expressions <a class='abbr_ref' href='expr.prim.fold'>[expr.prim.fold]</a></h3><div class='texpara'><a class='index' id=':expression,fold'></a></div><div class='para' id='fold-1'><div class='marginalizedparent'><a class='marginalized' href='#fold-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2793'>#</a></div><div class='texpara'><div id='fold-1.sentence-1' class='sentence'>A fold expression performs a fold of a
pack (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>) over a binary operator<a class='hidden_link' href='#fold-1.sentence-1'>.</a></div></div><div class='texpara'><div class='bnf' id='nt:fold-expression'>
<a class='hidden_link' href='#nt:fold-expression' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='nt:fold-expression'><span id=':fold-expression'>fold-expression<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression'><span class='textsf'><i >cast-expression</i></span></span></a> <a href='#nt:fold-operator' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='ntref:fold-operator'><span class='textsf'><i >fold-operator</i></span></span></a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span class='terminal'><span class='parenthesis'>(</span></span> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> <a href='#nt:fold-operator' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='ntref:fold-operator_'><span class='textsf'><i >fold-operator</i></span></span></a> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression_'><span class='textsf'><i >cast-expression</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span><br/><span class='terminal'><span class='parenthesis'>(</span></span> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression__'><span class='textsf'><i >cast-expression</i></span></span></a> <a href='#nt:fold-operator' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='ntref:fold-operator__'><span class='textsf'><i >fold-operator</i></span></span></a> <span class='terminal'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> <a href='#nt:fold-operator' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='ntref:fold-operator___'><span class='textsf'><i >fold-operator</i></span></span></a> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression___'><span class='textsf'><i >cast-expression</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:fold-operator'>

<a class='hidden_link' href='#nt:fold-operator' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='nt:fold-operator'><span id=':fold-operator'>fold-operator<span class='textnormal'>:</span></span></span></a> <span class='textnormal'>one of</span><br/><span class='terminal'><span class='operator'>+</span> </span>&emsp;&ensp;<span class='terminal'><span class='operator'>-</span> </span>&emsp;&ensp;<span class='terminal'><span class='operator'>*</span> </span>&emsp;&ensp;<span class='terminal'><span class='operator'>/</span> </span>&emsp;&ensp;<span class='terminal'><span class='operator'>%</span> </span>&emsp;&ensp;<span class='terminal'><span class='operator'>^</span> </span>&emsp;&ensp;<span class='terminal'><span class='operator'>&amp;</span> </span>&emsp;&ensp;<span class='terminal'><span class='operator'>|</span> </span>&emsp;&ensp;<span class='terminal'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span> </span>&emsp;&ensp;<span class='terminal'><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span> </span><br/><span class='terminal'><span class='operator'>+</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='operator'>-</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='operator'>*</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='operator'>/</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='operator'>%</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='operator'>^</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='operator'>&amp;</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='operator'>|</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='anglebracket'>&lt;</span><span class='anglebracket'>&lt;</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='anglebracket'>&gt;</span><span class='anglebracket'>&gt;</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='operator'>=</span></span><br/><span class='terminal'><span class='operator'>=</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='operator'>!</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='anglebracket'>&lt;</span> </span>&emsp;&ensp;<span class='terminal'><span class='anglebracket'>&gt;</span> </span>&emsp;&ensp;<span class='terminal'><span class='anglebracket'>&lt;</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='anglebracket'>&gt;</span><span class='operator'>=</span></span>&emsp;&ensp;<span class='terminal'><span class='operator'>&amp;</span><span class='operator'>&amp;</span></span>&emsp;&ensp;<span class='terminal'><span class='operator'>|</span><span class='operator'>|</span></span>&emsp;&ensp;<span class='terminal'>,  </span>&emsp;&ensp;<span class='terminal'><span class='operator'>.</span><span class='operator'>*</span> </span>&emsp;&ensp;<span class='terminal'><span class='operator'>-</span><span class='anglebracket'>&gt;</span><span class='operator'>*</span></span>
</div></div></div><div class='para' id='fold-2'><div class='marginalizedparent'><a class='marginalized' href='#fold-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2813'>#</a></div><div class='texpara'><div id='fold-2.sentence-1' class='sentence'><a class='index' id=':fold,unary'></a>An expression of the form
<span class='texttt'><span class='parenthesis'>(</span><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> <i >op</i> <span class='texttt'>e<span class='parenthesis'>)</span></span>
where <i >op</i> is a <a href='#nt:fold-operator' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='ntref:fold-operator____'><span class='textsf'><i >fold-operator</i></span></span></a>
is called a <a class='hidden_link' href='#def:unary_left_fold' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='def:unary_left_fold'><i >unary left fold</i></span></a><a class='hidden_link' href='#fold-2.sentence-1'>.</a></div> <div id='fold-2.sentence-2' class='sentence'>An expression of the form
<span class='texttt'><span class='parenthesis'>(</span>e</span> <i >op</i> <span class='texttt'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span></span>
where <i >op</i> is a <a href='#nt:fold-operator' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='ntref:fold-operator_____'><span class='textsf'><i >fold-operator</i></span></span></a>
is called a <a class='hidden_link' href='#def:unary_right_fold' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='def:unary_right_fold'><i >unary right fold</i></span></a><a class='hidden_link' href='#fold-2.sentence-2'>.</a></div> <div id='fold-2.sentence-3' class='sentence'>Unary left folds and unary right folds
are collectively called <a class='hidden_link' href='#def:unary_fold' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='def:unary_fold'><i >unary folds</i></span></a><a class='hidden_link' href='#fold-2.sentence-3'>.</a></div> <div id='fold-2.sentence-4' class='sentence'>In a unary fold,
the <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression____'><span class='textsf'><i >cast-expression</i></span></span></a>
shall contain an unexpanded pack (<a href='temp.variadic' title='13.7.4&emsp;Variadic templates'>[temp.<span class='shy'></span>variadic]</a>)<a class='hidden_link' href='#fold-2.sentence-4'>.</a></div></div></div><div class='para' id='fold-3'><div class='marginalizedparent'><a class='marginalized' href='#fold-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2829'>#</a></div><div class='texpara'><div id='fold-3.sentence-1' class='sentence'><a class='index' id=':fold,binary'></a>An expression of the form
<span class='texttt'><span class='parenthesis'>(</span>e1</span> <i >op1</i> <span class='texttt'><span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span></span> <i >op2</i> <span class='texttt'>e2<span class='parenthesis'>)</span></span>
where <i >op1</i> and <i >op2</i> are <a href='#nt:fold-operator' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='ntref:fold-operator______'><span class='textsf'><i >fold-operator</i></span></span></a><i >s</i>
is called a <a class='hidden_link' href='#def:binary_fold' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='def:binary_fold'><i >binary fold</i></span></a><a class='hidden_link' href='#fold-3.sentence-1'>.</a></div> <div id='fold-3.sentence-2' class='sentence'>In a binary fold,
<i >op1</i> and <i >op2</i>
shall be the same <a href='#nt:fold-operator' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='ntref:fold-operator_______'><span class='textsf'><i >fold-operator</i></span></span></a>,
and either <span class='texttt'>e1</span>
shall contain an unexpanded pack
or <span class='texttt'>e2</span>
shall contain an unexpanded pack,
but not both<a class='hidden_link' href='#fold-3.sentence-2'>.</a></div> <div id='fold-3.sentence-3' class='sentence'>If <span class='texttt'>e2</span> contains an unexpanded pack,
the expression is called a <a class='hidden_link' href='#def:binary_left_fold' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='def:binary_left_fold'><i >binary left fold</i></span></a><a class='hidden_link' href='#fold-3.sentence-3'>.</a></div> <div id='fold-3.sentence-4' class='sentence'>If <span class='texttt'>e1</span> contains an unexpanded pack,
the expression is called a <a class='hidden_link' href='#def:binary_right_fold' title='7.5.7&emsp;Fold expressions&emsp;[expr.prim.fold]'><span id='def:binary_right_fold'><i >binary right fold</i></span></a><a class='hidden_link' href='#fold-3.sentence-4'>.</a></div> <div id='fold-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#fold-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>Args<span class='anglebracket'>&gt;</span>
<span class='keyword'>bool</span> f<span class='parenthesis'>(</span>Args <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>args<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='parenthesis'>(</span><span class='literal'>true</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='operator'>&amp;</span><span class='operator'>&amp;</span> args<span class='parenthesis'>)</span>; <span class='comment'>// OK</span>
<span class='curlybracket'>}</span>

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>Args<span class='anglebracket'>&gt;</span>
<span class='keyword'>bool</span> f<span class='parenthesis'>(</span>Args <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span>args<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>return</span> <span class='parenthesis'>(</span>args <span class='operator'>+</span> <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span> <span class='operator'>+</span> args<span class='parenthesis'>)</span>;   <span class='comment'>// error: both operands contain unexpanded packs</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='fold-4'><div class='marginalizedparent'><a class='marginalized' href='#fold-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2861'>#</a></div><div class='texpara'><div id='fold-4.sentence-1' class='sentence'>A fold expression is a pack expansion<a class='hidden_link' href='#fold-4.sentence-1'>.</a></div> </div></div></div><div id='req' class='section'><h3 ><a class='secnum' href='#req' style='min-width:80pt'>7.5.8</a> Requires expressions <a class='abbr_ref' href='expr.prim.req'>[expr.prim.req]</a></h3><div id='req.general' class='section'><h4 ><a class='secnum' href='#req.general' style='min-width:95pt'>7.5.8.1</a> General <a class='abbr_ref' href='expr.prim.req.general'>[expr.prim.req.general]</a></h4><div class='texpara'><a class='index' id=':expression,requires'></a></div><div class='para' id='req.general-1'><div class='marginalizedparent'><a class='marginalized' href='#req.general-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2870'>#</a></div><div class='texpara'><div id='req.general-1.sentence-1' class='sentence'>A <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression_'><span class='textsf'><i >requires-expression</i></span></span></a> provides a concise way to express
requirements on template arguments
that can be checked by <a href='basic.lookup' title='6.5&emsp;Name lookup&emsp;[basic.lookup]'>name lookup</a>
or by checking properties of types and expressions<a class='hidden_link' href='#req.general-1.sentence-1'>.</a></div></div><div class='texpara'><div class='bnf' id='nt:requires-expression'>
<a class='hidden_link' href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='nt:requires-expression'><span id=':requires-expression'>requires-expression<span class='textnormal'>:</span></span></span></a><br/><span id=':requires'><span class='texttt'><span class='keyword'>requires</span></span></span> <a href='#nt:requirement-parameter-list' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requirement-parameter-list'><span class='textsf'><i >requirement-parameter-list</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='#nt:requirement-body' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requirement-body'><span class='textsf'><i >requirement-body</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:requirement-parameter-list'>
<a class='hidden_link' href='#nt:requirement-parameter-list' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='nt:requirement-parameter-list'><span id=':requirement-parameter-list'>requirement-parameter-list<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='parenthesis'>(</span></span> <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause____________'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> <span class='terminal'><span class='parenthesis'>)</span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:requirement-body'>
<a class='hidden_link' href='#nt:requirement-body' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='nt:requirement-body'><span id=':requirement-body'>requirement-body<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='curlybracket'>{</span></span> <a href='#nt:requirement-seq' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requirement-seq'><span class='textsf'><i >requirement-seq</i></span></span></a> <span class='terminal'><span class='curlybracket'>}</span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:requirement-seq'>
<a class='hidden_link' href='#nt:requirement-seq' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='nt:requirement-seq'><span id=':requirement-seq'>requirement-seq<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:requirement' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requirement'><span class='textsf'><i >requirement</i></span></span></a> <a href='#nt:requirement-seq' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requirement-seq_'><span class='textsf'><i >requirement-seq</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:requirement'>
<a class='hidden_link' href='#nt:requirement' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='nt:requirement'><span id=':requirement'>requirement<span class='textnormal'>:</span></span></span></a><br/><a href='#nt:simple-requirement' title='7.5.8.2&emsp;Simple requirements&emsp;[expr.prim.req.simple]'><span id='ntref:simple-requirement'><span class='textsf'><i >simple-requirement</i></span></span></a><br/><a href='#nt:type-requirement' title='7.5.8.3&emsp;Type requirements&emsp;[expr.prim.req.type]'><span id='ntref:type-requirement'><span class='textsf'><i >type-requirement</i></span></span></a><br/><a href='#nt:compound-requirement' title='7.5.8.4&emsp;Compound requirements&emsp;[expr.prim.req.compound]'><span id='ntref:compound-requirement'><span class='textsf'><i >compound-requirement</i></span></span></a><br/><a href='#nt:nested-requirement' title='7.5.8.5&emsp;Nested requirements&emsp;[expr.prim.req.nested]'><span id='ntref:nested-requirement'><span class='textsf'><i >nested-requirement</i></span></span></a>
</div></div></div><div class='para' id='req.general-2'><div class='marginalizedparent'><a class='marginalized' href='#req.general-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2905'>#</a></div><div class='texpara'><div id='req.general-2.sentence-1' class='sentence'>A <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression__'><span class='textsf'><i >requires-expression</i></span></span></a> is a prvalue of type <span class='texttt'><span class='keyword'>bool</span></span>
whose value is described below<a class='hidden_link' href='#req.general-2.sentence-1'>.</a></div></div></div><div class='para nonNormativeOnly' id='req.general-3'><div class='marginalizedparent'><a class='marginalized' href='#req.general-3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2909'>#</a></div><div class='texpara'><div id='req.general-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#req.general-example-1'>1</a></i>:&ensp;<div id='req.general-3.sentence-1' class='sentence'>A common use of <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression___'><span class='textsf'><i >requires-expression</i></span></span></a><i >s</i> is to define
requirements in concepts such as the one below:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>concept</span> R <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='keyword'>typename</span> T<span class='operator'>::</span>type;
    <span class='curlybracket'>{</span><span class='operator'>*</span>i<span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> std<span class='operator'>::</span><a href='concept.convertible#concept:convertible_to' title='18.4.4&emsp;Concept convertible_&shy;to&emsp;[concept.convertible]'><span id='conceptref:convertible_to'><span class='tcode_in_codeblock'>convertible_<span class='shy'></span>to</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>typename</span> T<span class='operator'>::</span>type<span class='operator'>&amp;</span><span class='anglebracket'>&gt;</span>;
  <span class='curlybracket'>}</span>;
</span></div> <div id='req.general-3.sentence-2' class='sentence'>
A <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression____'><span class='textsf'><i >requires-expression</i></span></span></a> can also be used in a
<a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause_____________'><span class='textsf'><i >requires-clause</i></span></span></a> (<a href='temp.pre' title='13.1&emsp;Preamble'>[temp.<span class='shy'></span>pre]</a>) as a way of writing ad hoc
constraints on template arguments such as the one below:
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>requires</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> x <span class='operator'>+</span> x; <span class='curlybracket'>}</span>
    T add<span class='parenthesis'>(</span>T a, T b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> a <span class='operator'>+</span> b; <span class='curlybracket'>}</span>
</span></div> <div id='req.general-3.sentence-3' class='sentence'>
The first <span id=':requires_'><span class='texttt'><span class='keyword'>requires</span></span></span> introduces the
<a href='temp.pre#nt:requires-clause' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:requires-clause______________'><span class='textsf'><i >requires-clause</i></span></span></a>, and the second
introduces the <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression_____'><span class='textsf'><i >requires-expression</i></span></span></a><a class='hidden_link' href='#req.general-3.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='req.general-4'><div class='marginalizedparent'><a class='marginalized' href='#req.general-4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2933'>#</a></div><div class='texpara'><div id='req.general-4.sentence-1' class='sentence'>A <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression______'><span class='textsf'><i >requires-expression</i></span></span></a> may introduce local parameters using a
<a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause_____________'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a><a class='hidden_link' href='#req.general-4.sentence-1'>.</a></div> <div id='req.general-4.sentence-2' class='sentence'>A local parameter of a <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression_______'><span class='textsf'><i >requires-expression</i></span></span></a> shall not have a
default argument<a class='hidden_link' href='#req.general-4.sentence-2'>.</a></div> <div id='req.general-4.sentence-3' class='sentence'>The type of such a parameter is determined as specified for
a function parameter in <a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a><a class='hidden_link' href='#req.general-4.sentence-3'>.</a></div> <div id='req.general-4.sentence-4' class='sentence'>These parameters have no linkage, storage, or lifetime; they are only used
as notation for the purpose of defining <a href='#nt:requirement' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requirement_'><span class='textsf'><i >requirement</i></span></span></a><i >s</i><a class='hidden_link' href='#req.general-4.sentence-4'>.</a></div> <div id='req.general-4.sentence-5' class='sentence'>The <a href='dcl.fct#nt:parameter-declaration-clause' title='9.3.4.6&emsp;Functions&emsp;[dcl.fct]'><span id='ntref:parameter-declaration-clause______________'><span class='textsf'><i >parameter-declaration-clause</i></span></span></a> of a
<a href='#nt:requirement-parameter-list' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requirement-parameter-list_'><span class='textsf'><i >requirement-parameter-list</i></span></span></a>
shall not terminate with an ellipsis<a class='hidden_link' href='#req.general-4.sentence-5'>.</a></div> <div id='req.general-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#req.general-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T t, <span class='operator'>.</span><span class='operator'>.</span><span class='operator'>.</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>    <span class='comment'>// error: terminates with an ellipsis</span>
  t;
<span class='curlybracket'>}</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span>
<span class='keyword'>concept</span> C2 <span class='operator'>=</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T p<span class='squarebracket'>[</span><span class='literal'>2</span><span class='squarebracket'>]</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='parenthesis'>(</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span>p<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='literal'>nullptr</span>;             <span class='comment'>// OK, <span class='tcode_in_codeblock'>p</span> has type “pointer to <span class='tcode_in_codeblock'>T</span>''</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='req.general-5'><div class='marginalizedparent'><a class='marginalized' href='#req.general-5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2958'>#</a></div><div class='texpara'><div id='req.general-5.sentence-1' class='sentence'>The substitution of template arguments into a <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression________'><span class='textsf'><i >requires-expression</i></span></span></a>
can result in
the formation of invalid types or expressions in the immediate context of
its <a href='#nt:requirement' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requirement__'><span class='textsf'><i >requirement</i></span></span></a><i >s</i> (<a href='temp.deduct.general' title='13.10.3.1&emsp;General'>[temp.<span class='shy'></span>deduct.<span class='shy'></span>general]</a>) or
the violation of the semantic constraints of those <a href='#nt:requirement' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requirement___'><span class='textsf'><i >requirement</i></span></span></a><i >s</i><a class='hidden_link' href='#req.general-5.sentence-1'>.</a></div> <div id='req.general-5.sentence-2' class='sentence'>In such cases, the <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression_________'><span class='textsf'><i >requires-expression</i></span></span></a> evaluates to <span id=':false'><span class='texttt'><span class='literal'>false</span></span></span>;
it does not cause the program to be ill-formed<a class='hidden_link' href='#req.general-5.sentence-2'>.</a></div> <div id='req.general-5.sentence-3' class='sentence'>The substitution and semantic constraint checking
proceeds in lexical order and stops when a condition that
determines the result of the <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression__________'><span class='textsf'><i >requires-expression</i></span></span></a> is encountered<a class='hidden_link' href='#req.general-5.sentence-3'>.</a></div> <div id='req.general-5.sentence-4' class='sentence'>If substitution (if any) and semantic constraint checking succeed,
the <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression___________'><span class='textsf'><i >requires-expression</i></span></span></a> evaluates to <span id=':true'><span class='texttt'><span class='literal'>true</span></span></span><a class='hidden_link' href='#req.general-5.sentence-4'>.</a></div> <div id='req.general-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#req.general-note-1'>1</a></i>:&ensp;<div id='req.general-5.sentence-5' class='sentence'>If a <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression____________'><span class='textsf'><i >requires-expression</i></span></span></a> contains invalid types or expressions in
its <a href='#nt:requirement' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requirement____'><span class='textsf'><i >requirement</i></span></span></a><i >s</i>, and it does not appear within the declaration of a templated
entity, then the program is ill-formed<a class='hidden_link' href='#req.general-5.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='req.general-5.sentence-6' class='sentence'>
If the substitution of template arguments into a <a href='#nt:requirement' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requirement_____'><span class='textsf'><i >requirement</i></span></span></a>
would always result in a substitution failure, the program is ill-formed;
no diagnostic required<a class='hidden_link' href='#req.general-5.sentence-6'>.</a></div> <div id='req.general-example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#req.general-example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span>
<span class='keyword'>requires</span> <span class='curlybracket'>{</span>
  <span class='keyword'>new</span> <span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span><span class='keyword'>void</span><span class='parenthesis'>)</span>T<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;      <span class='comment'>// ill-formed, no diagnostic required</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='req.simple' class='section'><h4 ><a class='secnum' href='#req.simple' style='min-width:95pt'>7.5.8.2</a> Simple requirements <a class='abbr_ref' href='expr.prim.req.simple'>[expr.prim.req.simple]</a></h4><div class='texpara'><a class='index' id=':requirement,simple'></a>
<div class='bnf' id='nt:simple-requirement'>
<a class='hidden_link' href='#nt:simple-requirement' title='7.5.8.2&emsp;Simple requirements&emsp;[expr.prim.req.simple]'><span id='nt:simple-requirement'><span id=':simple-requirement'>simple-requirement<span class='textnormal'>:</span></span></span></a><br/><a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression_'><span class='textsf'><i >expression</i></span></span></a> <span class='terminal'>;</span>
</div></div><div class='para' id='req.simple-1'><div class='marginalizedparent'><a class='marginalized' href='#req.simple-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L2996'>#</a></div><div class='texpara'><div id='req.simple-1.sentence-1' class='sentence'>A <a href='#nt:simple-requirement' title='7.5.8.2&emsp;Simple requirements&emsp;[expr.prim.req.simple]'><span id='ntref:simple-requirement_'><span class='textsf'><i >simple-requirement</i></span></span></a> asserts
the validity of an <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression__'><span class='textsf'><i >expression</i></span></span></a><a class='hidden_link' href='#req.simple-1.sentence-1'>.</a></div> <div id='req.simple-1.sentence-2' class='sentence'>The <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression___'><span class='textsf'><i >expression</i></span></span></a> is an unevaluated operand<a class='hidden_link' href='#req.simple-1.sentence-2'>.</a></div> <div id='req.simple-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#req.simple-note-1'>1</a></i>:&ensp;<div id='req.simple-1.sentence-3' class='sentence'>The enclosing <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression_____________'><span class='textsf'><i >requires-expression</i></span></span></a> will evaluate to <span id=':false_'><span class='texttt'><span class='literal'>false</span></span></span>
if substitution of template arguments into the <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression____'><span class='textsf'><i >expression</i></span></span></a> fails<a class='hidden_link' href='#req.simple-1.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='req.simple-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#req.simple-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span>
  <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T a, T b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    a <span class='operator'>+</span> b;          <span class='comment'>// <span class='tcode_in_codeblock'>C&lt;T&gt;</span> is <span class='tcode_in_codeblock'>true</span> if <span class='tcode_in_codeblock'>a + b</span> is a valid expression</span>
  <span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='req.simple-2'><div class='marginalizedparent'><a class='marginalized' href='#req.simple-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L3013'>#</a></div><div class='texpara'><div id='req.simple-2.sentence-1' class='sentence'>A <a href='#nt:requirement' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requirement______'><span class='textsf'><i >requirement</i></span></span></a> that starts with a <span id=':requires__'><span class='texttt'><span class='keyword'>requires</span></span></span> token
is never interpreted as a <a href='#nt:simple-requirement' title='7.5.8.2&emsp;Simple requirements&emsp;[expr.prim.req.simple]'><span id='ntref:simple-requirement__'><span class='textsf'><i >simple-requirement</i></span></span></a><a class='hidden_link' href='#req.simple-2.sentence-1'>.</a></div> <div id='req.simple-note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#req.simple-note-2'>2</a></i>:&ensp;<div id='req.simple-2.sentence-2' class='sentence'>This simplifies distinguishing between a <a href='#nt:simple-requirement' title='7.5.8.2&emsp;Simple requirements&emsp;[expr.prim.req.simple]'><span id='ntref:simple-requirement___'><span class='textsf'><i >simple-requirement</i></span></span></a>
and a <a href='#nt:nested-requirement' title='7.5.8.5&emsp;Nested requirements&emsp;[expr.prim.req.nested]'><span id='ntref:nested-requirement_'><span class='textsf'><i >nested-requirement</i></span></span></a><a class='hidden_link' href='#req.simple-2.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div></div><div id='req.type' class='section'><h4 ><a class='secnum' href='#req.type' style='min-width:95pt'>7.5.8.3</a> Type requirements <a class='abbr_ref' href='expr.prim.req.type'>[expr.prim.req.type]</a></h4><div class='texpara'><a class='index' id=':requirement,type'></a>
<div class='bnf' id='nt:type-requirement'>
<a class='hidden_link' href='#nt:type-requirement' title='7.5.8.3&emsp;Type requirements&emsp;[expr.prim.req.type]'><span id='nt:type-requirement'><span id=':type-requirement'>type-requirement<span class='textnormal'>:</span></span></span></a><br/><span id=':typename'><span class='texttt'><span class='keyword'>typename</span></span></span> <a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier________________'><span class='textsf'><i >nested-name-specifier</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name_______'><span class='textsf'><i >type-name</i></span></span></a> <span class='terminal'>;</span>
</div></div><div class='para' id='req.type-1'><div class='marginalizedparent'><a class='marginalized' href='#req.type-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L3029'>#</a></div><div class='texpara'><div id='req.type-1.sentence-1' class='sentence'>A <a href='#nt:type-requirement' title='7.5.8.3&emsp;Type requirements&emsp;[expr.prim.req.type]'><span id='ntref:type-requirement_'><span class='textsf'><i >type-requirement</i></span></span></a> asserts the validity of a type<a class='hidden_link' href='#req.type-1.sentence-1'>.</a></div> <div id='req.type-1.sentence-2' class='sentence'>The component names of a <a href='#nt:type-requirement' title='7.5.8.3&emsp;Type requirements&emsp;[expr.prim.req.type]'><span id='ntref:type-requirement__'><span class='textsf'><i >type-requirement</i></span></span></a> are those of its
<a href='#nt:nested-name-specifier' title='7.5.5.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier_________________'><span class='textsf'><i >nested-name-specifier</i></span></span></a> (if any) and <a href='dcl.type.simple#nt:type-name' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:type-name________'><span class='textsf'><i >type-name</i></span></span></a><a class='hidden_link' href='#req.type-1.sentence-2'>.</a></div> <div id='req.type-note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#req.type-note-1'>1</a></i>:&ensp;<div id='req.type-1.sentence-3' class='sentence'>The enclosing <a href='#nt:requires-expression' title='7.5.8.1&emsp;General&emsp;[expr.prim.req.general]'><span id='ntref:requires-expression______________'><span class='textsf'><i >requires-expression</i></span></span></a> will evaluate to <span id=':false__'><span class='texttt'><span class='literal'>false</span></span></span>
if substitution of template arguments fails<a class='hidden_link' href='#req.type-1.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='req.type-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#req.type-example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T, <span class='keyword'>typename</span> T<span class='operator'>::</span>type <span class='operator'>=</span> <span class='literal'>0</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> S;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>using</span> Ref <span class='operator'>=</span> T<span class='operator'>&amp;</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='curlybracket'>{</span>
  <span class='keyword'>typename</span> T<span class='operator'>::</span>inner;    <span class='comment'>// required nested member name</span>
  <span class='keyword'>typename</span> S<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;        <span class='comment'>// required valid (<a href='temp.names' title='13.3&emsp;Names of template specializations'>[temp.<span class='shy'></span>names]</a>) <a href='temp.names#nt:template-id' title='13.3&emsp;Names of template specializations&emsp;[temp.names]'><span id='ntref:template-id___'><span class='textsf'><i >template-id</i></span></span></a>;</span>
                        <span class='comment'>// fails if <span class='tcode_in_codeblock'>T&#x200b;::&#x200b;type</span> does not exist as a type to which <span class='tcode_in_codeblock'>0</span> can be implicitly converted</span>
  <span class='keyword'>typename</span> Ref<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span>;      <span class='comment'>// required alias template substitution, fails if <span class='tcode_in_codeblock'>T</span> is void</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='req.type-2'><div class='marginalizedparent'><a class='marginalized' href='#req.type-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L3051'>#</a></div><div class='texpara'><div id='req.type-2.sentence-1' class='sentence'>A <a href='#nt:type-requirement' title='7.5.8.3&emsp;Type requirements&emsp;[expr.prim.req.type]'><span id='ntref:type-requirement___'><span class='textsf'><i >type-requirement</i></span></span></a> that names a class template specialization
does not require that type to be complete (<a href='basic.types.general#term.incomplete.type' title='6.8.1&emsp;General'>[basic.<span class='shy'></span>types.<span class='shy'></span>general]</a>)<a class='hidden_link' href='#req.type-2.sentence-1'>.</a></div></div></div></div><div id='req.compound' class='section'><h4 ><a class='secnum' href='#req.compound' style='min-width:95pt'>7.5.8.4</a> Compound requirements <a class='abbr_ref' href='expr.prim.req.compound'>[expr.prim.req.compound]</a></h4><div class='texpara'><a class='index' id=':requirement,compound'></a>
<div class='bnf' id='nt:compound-requirement'>
<a class='hidden_link' href='#nt:compound-requirement' title='7.5.8.4&emsp;Compound requirements&emsp;[expr.prim.req.compound]'><span id='nt:compound-requirement'><span id=':compound-requirement'>compound-requirement<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='curlybracket'>{</span></span> <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression_____'><span class='textsf'><i >expression</i></span></span></a> <span class='terminal'><span class='curlybracket'>}</span></span> <span id=':noexcept_'><span class='texttt'><span class='keyword'>noexcept</span></span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <a href='#nt:return-type-requirement' title='7.5.8.4&emsp;Compound requirements&emsp;[expr.prim.req.compound]'><span id='ntref:return-type-requirement'><span class='textsf'><i >return-type-requirement</i></span></span></a><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span class='terminal'>;</span>
</div></div><div class='texpara'><div class='bnf' id='nt:return-type-requirement'>
<a class='hidden_link' href='#nt:return-type-requirement' title='7.5.8.4&emsp;Compound requirements&emsp;[expr.prim.req.compound]'><span id='nt:return-type-requirement'><span id=':return-type-requirement'>return-type-requirement<span class='textnormal'>:</span></span></span></a><br/><span class='terminal'><span class='operator'>-</span><span class='anglebracket'>&gt;</span></span> <a href='temp.param#nt:type-constraint' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:type-constraint__'><span class='textsf'><i >type-constraint</i></span></span></a>
</div></div><div class='para' id='req.compound-1'><div class='marginalizedparent'><a class='marginalized' href='#req.compound-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L3068'>#</a></div><div class='texpara'><div id='req.compound-1.sentence-1' class='sentence'>A <a href='#nt:compound-requirement' title='7.5.8.4&emsp;Compound requirements&emsp;[expr.prim.req.compound]'><span id='ntref:compound-requirement_'><span class='textsf'><i >compound-requirement</i></span></span></a> asserts properties
of the <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression______'><span class='textsf'><i >expression</i></span></span></a> <span class='math'><span class='mathalpha'>E</span></span><a class='hidden_link' href='#req.compound-1.sentence-1'>.</a></div> <div id='req.compound-1.sentence-2' class='sentence'>The <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression_______'><span class='textsf'><i >expression</i></span></span></a> is an unevaluated operand<a class='hidden_link' href='#req.compound-1.sentence-2'>.</a></div> <div id='req.compound-1.sentence-3' class='sentence'>Substitution
of template arguments (if any) and verification of
semantic properties proceed in the following order:
<ul class='itemize'><li id='req.compound-1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#req.compound-1.1'>(1.1)</a></div><div class='texpara'><div id='req.compound-1.1.sentence-1' class='sentence'>Substitution of template arguments (if any)
into the <a href='expr.comma#nt:expression' title='7.6.20&emsp;Comma operator&emsp;[expr.comma]'><span id='ntref:expression________'><span class='textsf'><i >expression</i></span></span></a> is performed<a class='hidden_link' href='#req.compound-1.1.sentence-1'>.</a></div></div></li><li id='req.compound-1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#req.compound-1.2'>(1.2)</a></div><div class='texpara'><div id='req.compound-1.2.sentence-1' class='sentence'>If the <span id=':noexcept__'><span class='texttt'><span class='keyword'>noexcept</span></span></span> specifier is present,
<span class='math'><span class='mathalpha'>E</span></span> shall not be a potentially-throwing expression (<a href='except.spec' title='14.5&emsp;Exception specifications'>[except.<span class='shy'></span>spec]</a>)<a class='hidden_link' href='#req.compound-1.2.sentence-1'>.</a></div></div></li><li id='req.compound-1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#req.compound-1.3'>(1.3)</a></div><div class='texpara'><div id='req.compound-1.3.sentence-1' class='sentence'>If the <a href='#nt:return-type-requirement' title='7.5.8.4&emsp;Compound requirements&emsp;[expr.prim.req.compound]'><span id='ntref:return-type-requirement_'><span class='textsf'><i >return-type-requirement</i></span></span></a> is present, then:
<ul class='itemize'><li id='req.compound-1.3.1'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#req.compound-1.3.1'>(1.3.1)</a></div><div class='texpara'><div id='req.compound-1.3.1.sentence-1' class='sentence'>Substitution of template arguments (if any)
into the <a href='#nt:return-type-requirement' title='7.5.8.4&emsp;Compound requirements&emsp;[expr.prim.req.compound]'><span id='ntref:return-type-requirement__'><span class='textsf'><i >return-type-requirement</i></span></span></a> is performed<a class='hidden_link' href='#req.compound-1.3.1.sentence-1'>.</a></div></div></li><li id='req.compound-1.3.2'><div class='marginalizedparent' style='left:-36mm'><a class='marginalized' href='#req.compound-1.3.2'>(1.3.2)</a></div><div class='texpara'><div id='req.compound-1.3.2.sentence-1' class='sentence'>The immediately-declared constraint (<a href='temp.param' title='13.2&emsp;Template parameters'>[temp.<span class='shy'></span>param]</a>)
of the <a href='temp.param#nt:type-constraint' title='13.2&emsp;Template parameters&emsp;[temp.param]'><span id='ntref:type-constraint___'><span class='textsf'><i >type-constraint</i></span></span></a> for <span class='texttt'><span id=':decltype'><span class='texttt'><span class='keyword'>decltype</span></span></span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>E<span class='parenthesis'>)</span><span class='parenthesis'>)</span></span>
shall be satisfied<a class='hidden_link' href='#req.compound-1.3.2.sentence-1'>.</a></div></div></li></ul></div> <div id='req.compound-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#req.compound-example-1'>1</a></i>:&ensp;<div id='req.compound-1.3.sentence-2' class='sentence'>Given concepts <span class='texttt'>C</span> and <span class='texttt'>D</span>,
<span class='codeblock'><span class='keyword'>requires</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span> E1 <span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> C;
  <span class='curlybracket'>{</span> E2 <span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> D<span class='anglebracket'>&lt;</span>A<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span>, <span class='math'>⋯</span>, A<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span></span><span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>;
</span>
is equivalent to
<span class='codeblock'><span class='keyword'>requires</span> <span class='curlybracket'>{</span>
  E1; <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>E1<span class='parenthesis'>)</span><span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span>;
  E2; <span class='keyword'>requires</span> D<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span>E2<span class='parenthesis'>)</span><span class='parenthesis'>)</span>, A<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mn"><span class="mjx-char MJXc-TeX-main-R" style="padding-top: 0.372em; padding-bottom: 0.372em;">1</span></span></span></span></span></span></span></span>, <span class='math'>⋯</span>, A<span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-math-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">n</span></span></span></span></span></span></span></span><span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>;
</span>
(including in the case where <span class='math'><span class='mathalpha'>n</span></span> is zero)<a class='hidden_link' href='#req.compound-1.3.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></li></ul></div></div></div><div class='para nonNormativeOnly' id='req.compound-2'><div class='marginalizedparent'><a class='marginalized' href='#req.compound-2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L3114'>#</a></div><div class='texpara'><div id='req.compound-example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#req.compound-example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C1 <span class='operator'>=</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span>x<span class='operator'>+</span><span class='operator'>+</span><span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
</span> <div id='req.compound-2.sentence-1' class='sentence'>
The <a href='#nt:compound-requirement' title='7.5.8.4&emsp;Compound requirements&emsp;[expr.prim.req.compound]'><span id='ntref:compound-requirement__'><span class='textsf'><i >compound-requirement</i></span></span></a> in <span class='texttt'>C1</span>
requires that <span class='texttt'>x<span class='operator'>+</span><span class='operator'>+</span></span> is a valid expression<a class='hidden_link' href='#req.compound-2.sentence-1'>.</a></div> <div id='req.compound-2.sentence-2' class='sentence'>It is equivalent to the <a href='#nt:simple-requirement' title='7.5.8.2&emsp;Simple requirements&emsp;[expr.prim.req.simple]'><span id='ntref:simple-requirement____'><span class='textsf'><i >simple-requirement</i></span></span></a>
<span class='texttt'>x<span class='operator'>+</span><span class='operator'>+</span>;</span><a class='hidden_link' href='#req.compound-2.sentence-2'>.</a></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C2 <span class='operator'>=</span> <span class='keyword'>requires</span><span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>{</span><span class='operator'>*</span>x<span class='curlybracket'>}</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> std<span class='operator'>::</span><a href='concept.same#concept:same_as' title='18.4.2&emsp;Concept same_&shy;as&emsp;[concept.same]'><span id='conceptref:same_as'><span class='tcode_in_codeblock'>same_<span class='shy'></span>as</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='operator'>::</span>inner<span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='req.compound-2.sentence-3' class='sentence'>The <a href='#nt:compound-requirement' title='7.5.8.4&emsp;Compound requirements&emsp;[expr.prim.req.compound]'><span id='ntref:compound-requirement___'><span class='textsf'><i >compound-requirement</i></span></span></a> in <span class='texttt'>C2</span>
requires that <span class='texttt'><span class='operator'>*</span>x</span> is a valid expression,
that <span class='texttt'><span class='keyword'>typename</span> T<span class='operator'>&#x200b;::&#x200b;</span>inner</span> is a valid type, and
that <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span><a href='concept.same#concept:same_as' title='18.4.2&emsp;Concept same_&shy;as&emsp;[concept.same]'><span id='conceptref:same_as_'><span class='texttt'>same_<span class='shy'></span>as</span></span></a><span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span><span class='parenthesis'>(</span><span class='parenthesis'>(</span><span class='operator'>*</span>x<span class='parenthesis'>)</span><span class='parenthesis'>)</span>, <span class='keyword'>typename</span> T<span class='operator'>&#x200b;::&#x200b;</span>inner<span class='anglebracket'>&gt;</span></span> is satisfied<a class='hidden_link' href='#req.compound-2.sentence-3'>.</a></div></div><div class='texpara'><span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C3 <span class='operator'>=</span>
  <span class='keyword'>requires</span><span class='parenthesis'>(</span>T x<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    <span class='curlybracket'>{</span>g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span><span class='curlybracket'>}</span> <span class='keyword'>noexcept</span>;
  <span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='req.compound-2.sentence-4' class='sentence'>The <a href='#nt:compound-requirement' title='7.5.8.4&emsp;Compound requirements&emsp;[expr.prim.req.compound]'><span id='ntref:compound-requirement____'><span class='textsf'><i >compound-requirement</i></span></span></a> in <span class='texttt'>C3</span>
requires that <span class='texttt'>g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span></span> is a valid expression and
that <span class='texttt'>g<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span></span> is non-throwing<a class='hidden_link' href='#req.compound-2.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div></div><div id='req.nested' class='section'><h4 ><a class='secnum' href='#req.nested' style='min-width:95pt'>7.5.8.5</a> Nested requirements <a class='abbr_ref' href='expr.prim.req.nested'>[expr.prim.req.nested]</a></h4><div class='texpara'><a class='index' id=':requirement,nested'></a>
<div class='bnf' id='nt:nested-requirement'>
<a class='hidden_link' href='#nt:nested-requirement' title='7.5.8.5&emsp;Nested requirements&emsp;[expr.prim.req.nested]'><span id='nt:nested-requirement'><span id=':nested-requirement'>nested-requirement<span class='textnormal'>:</span></span></span></a><br/><span id=':requires___'><span class='texttt'><span class='keyword'>requires</span></span></span> <a href='temp.constr.decl#nt:constraint-expression' title='13.5.3&emsp;Constrained declarations&emsp;[temp.constr.decl]'><span id='ntref:constraint-expression_'><span class='textsf'><i >constraint-expression</i></span></span></a> <span class='terminal'>;</span>
</div></div><div class='para' id='req.nested-1'><div class='marginalizedparent'><a class='marginalized' href='#req.nested-1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/399b93910d0bb6f5632405ad188e9f4aad0ae99a/source/expressions.tex#L3157'>#</a></div><div class='texpara'><div id='req.nested-1.sentence-1' class='sentence'>A <a href='#nt:nested-requirement' title='7.5.8.5&emsp;Nested requirements&emsp;[expr.prim.req.nested]'><span id='ntref:nested-requirement__'><span class='textsf'><i >nested-requirement</i></span></span></a> can be used
to specify additional constraints in terms of local parameters<a class='hidden_link' href='#req.nested-1.sentence-1'>.</a></div> <div id='req.nested-1.sentence-2' class='sentence'>The <a href='temp.constr.decl#nt:constraint-expression' title='13.5.3&emsp;Constrained declarations&emsp;[temp.constr.decl]'><span id='ntref:constraint-expression__'><span class='textsf'><i >constraint-expression</i></span></span></a>
shall be satisfied (<a href='temp.constr.decl' title='13.5.3&emsp;Constrained declarations'>[temp.<span class='shy'></span>constr.<span class='shy'></span>decl]</a>)
by the substituted template arguments, if any<a class='hidden_link' href='#req.nested-1.sentence-2'>.</a></div> <div id='req.nested-1.sentence-3' class='sentence'>Substitution of template arguments into a <a href='#nt:nested-requirement' title='7.5.8.5&emsp;Nested requirements&emsp;[expr.prim.req.nested]'><span id='ntref:nested-requirement___'><span class='textsf'><i >nested-requirement</i></span></span></a>
does not result in substitution into the <a href='temp.constr.decl#nt:constraint-expression' title='13.5.3&emsp;Constrained declarations&emsp;[temp.constr.decl]'><span id='ntref:constraint-expression___'><span class='textsf'><i >constraint-expression</i></span></span></a>
other than as specified in <a href='temp.constr.constr' title='13.5.2&emsp;Constraints'>[temp.<span class='shy'></span>constr.<span class='shy'></span>constr]</a><a class='hidden_link' href='#req.nested-1.sentence-3'>.</a></div> <div id='req.nested-example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#req.nested-example-1'>1</a></i>:&ensp;<div id='req.nested-1.sentence-4' class='sentence'><span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> U<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> C <span class='operator'>=</span> <span class='keyword'>sizeof</span><span class='parenthesis'>(</span>U<span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>concept</span> D <span class='operator'>=</span> <span class='keyword'>requires</span> <span class='parenthesis'>(</span>T t<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>requires</span> C<span class='anglebracket'>&lt;</span><span class='keyword'>decltype</span> <span class='parenthesis'>(</span><span class='operator'>+</span>t<span class='parenthesis'>)</span><span class='anglebracket'>&gt;</span>;
<span class='curlybracket'>}</span>;
</span>
<span class='texttt'>D<span class='anglebracket'>&lt;</span>T<span class='anglebracket'>&gt;</span></span> is satisfied if <span class='texttt'><span class='keyword'>sizeof</span><span class='parenthesis'>(</span><span class='keyword'>decltype</span> <span class='parenthesis'>(</span><span class='operator'>+</span>t<span class='parenthesis'>)</span><span class='parenthesis'>)</span> <span class='operator'>=</span><span class='operator'>=</span> <span class='literal'>1</span></span> (<a href='temp.constr.atomic' title='13.5.2.3&emsp;Atomic constraints'>[temp.<span class='shy'></span>constr.<span class='shy'></span>atomic]</a>)<a class='hidden_link' href='#req.nested-1.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div> 
</div></div></div></div></div></body></html>