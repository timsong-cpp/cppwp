<!DOCTYPE html><html lang='en'><head><title>[class.mi]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>13</a> Derived classes <a class='abbr_ref' href='./#class.derived'>[class.derived]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>13.1</a> Multiple base classes <a class='abbr_ref'>[class.mi]</a></h2><p ><span class='indexparent'><a class='index' id=':multiple_inheritance'></a></span><span class='indexparent'><a class='index' id=':base_class'></a></span>
</p><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/derived.tex#L175'>#</a></div><p >A class can be derived from any number of base classes.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
The use of more than one direct base class is often called multiple inheritance.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> 
</p><pre class='codeblock'>
class A { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class C { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class D : public A, public B, public C { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/derived.tex#L189'>#</a></div><p ><span class='indexparent'><a class='index' id=':layout,class_object'></a></span><span class='indexparent'><a class='index' id=':initialization,order_of'></a></span>[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
The order of derivation is not significant except as specified by the
semantics of initialization by constructor (<a href='class.base.init'>[class.base.init]</a>),
<a href='class.dtor'>cleanup</a>, and storage
layout (<a href='class.mem'>[class.mem]</a>, <a href='class.access.spec'>[class.access.spec]</a>).
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/derived.tex#L199'>#</a></div><p >A class shall not be specified as a direct base class of a derived class
more than once.
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
A class can be an indirect base class more than once and can be a direct
and an indirect base class. There are limited things that can be done
with such a class. The non-static data members and member functions of
the direct base class cannot be referred to in the scope of the derived
class. However, the static members, enumerations and types can be
unambiguously referred to.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] 
[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Example:</span> 
</p><pre class='codeblock'>
class X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class Y : public X, public X { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };             <span class='comment'>// ill-formed
</span></pre><pre class='codeblock'>
class L { public: int next;  <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class A : public L { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class B : public L { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class C : public A, public B { void f(); <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };   <span class='comment'>// well-formed
</span>class D : public A, public L { void f(); <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };   <span class='comment'>// well-formed
</span></pre><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end example</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/derived.tex#L225'>#</a></div><p >A base class specifier that does not contain the keyword
<span class='texttt'>virtual</span> specifies a <a class='hidden_link' href='#def:base_class,non-virtual' id='def:base_class,non-virtual'><i >non-virtual base class</i></a>. A base
class specifier that contains the keyword <span class='texttt'>virtual</span> specifies a
<a class='hidden_link' href='#def:base_class,virtual' id='def:base_class,virtual'><i >virtual base class</i></a>. For each distinct occurrence of a
non-virtual base class in the class lattice of the most derived class,
the <a href='intro.object#def:most_derived_object'>most derived object</a> shall contain a
corresponding distinct base class subobject of that type. For each
distinct base class that is specified virtual, the most derived object
shall contain a single base class subobject of that type.</p></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/derived.tex#L236'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
For an object of class type <span class='texttt'>C</span>, each distinct occurrence of a
(non-virtual) base class <span class='texttt'>L</span> in the class lattice of <span class='texttt'>C</span>
corresponds one-to-one with a distinct <span class='texttt'>L</span> subobject within the
object of type <span class='texttt'>C</span>. Given the class <span class='texttt'>C</span> defined above, an
object of class <span class='texttt'>C</span> will have two subobjects of class <span class='texttt'>L</span> as
shown in Figure <a href='#fig:nonvirt'>[fig:nonvirt]</a>.</p><div class='figure' id='fig:nonvirt'><svg width="224pt" height="182pt"
 viewBox="0.00 0.00 224.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>nonvirt</title>
<!-- L1 -->
<g class="node"><title>L1</title>
<text text-anchor="middle" x="27" y="-150.8" font-family="Times,serif" font-size="24.00">L</text>
</g>
<!-- L2 -->
<g class="node"><title>L2</title>
<text text-anchor="middle" x="189" y="-150.8" font-family="Times,serif" font-size="24.00">L</text>
</g>
<!-- A -->
<g class="node"><title>A</title>
<text text-anchor="middle" x="27" y="-80.8" font-family="Times,serif" font-size="24.00">A</text>
</g>
<!-- A&#45;&gt;L1 -->
<g class="edge"><title>A&#45;&gt;L1</title>
<path fill="none" stroke="black" d="M27,-104.115C27,-111.626 27,-120.766 27,-129.269"/>
<polygon fill="black" stroke="black" points="23.5001,-129.528 27,-139.528 30.5001,-129.528 23.5001,-129.528"/>
</g>
<!-- B -->
<g class="node"><title>B</title>
<text text-anchor="middle" x="189" y="-80.8" font-family="Times,serif" font-size="24.00">B</text>
</g>
<!-- B&#45;&gt;L2 -->
<g class="edge"><title>B&#45;&gt;L2</title>
<path fill="none" stroke="black" d="M189,-104.115C189,-111.626 189,-120.766 189,-129.269"/>
<polygon fill="black" stroke="black" points="185.5,-129.528 189,-139.528 192.5,-129.528 185.5,-129.528"/>
</g>
<!-- C -->
<g class="node"><title>C</title>
<text text-anchor="middle" x="108" y="-10.8" font-family="Times,serif" font-size="24.00">C</text>
</g>
<!-- C&#45;&gt;A -->
<g class="edge"><title>C&#45;&gt;A</title>
<path fill="none" stroke="black" d="M88.8041,-34.1151C78.4893,-42.7745 65.597,-53.5976 54.2599,-63.1151"/>
<polygon fill="black" stroke="black" points="51.7473,-60.6546 46.3388,-69.765 56.2481,-66.0159 51.7473,-60.6546"/>
</g>
<!-- C&#45;&gt;B -->
<g class="edge"><title>C&#45;&gt;B</title>
<path fill="none" stroke="black" d="M127.196,-34.1151C137.511,-42.7745 150.403,-53.5976 161.74,-63.1151"/>
<polygon fill="black" stroke="black" points="159.752,-66.0159 169.661,-69.765 164.253,-60.6546 159.752,-66.0159"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:nonvirt'>3</a> — Non-virtual base</div><p >In such lattices, explicit qualification can be used to specify which
subobject is meant. The body of function <span class='texttt'>C&#x200b;::&#x200b;f</span> could refer to the
member <span class='texttt'>next</span> of each <span class='texttt'>L</span> subobject:
</p><pre class='codeblock'>
void C::f() { A::next = B::next; }      <span class='comment'>// well-formed
</span></pre><p >Without the <span class='texttt'>A&#x200b;::&#x200b;</span> or <span class='texttt'>B&#x200b;::&#x200b;</span> qualifiers, the definition of
<span class='texttt'>C&#x200b;::&#x200b;f</span> above would be ill-formed because of
<a href='class.member.lookup#def:ambiguity'>ambiguity</a>.
<span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/derived.tex#L262'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
In contrast, consider the case with a virtual base class:
</p><pre class='codeblock'>
class V { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class A : virtual public V { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class B : virtual public V { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class C : public A, public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre><div class='figure' id='fig:virt'><svg width="224pt" height="182pt"
 viewBox="0.00 0.00 224.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>virt</title>
<!-- V -->
<g class="node"><title>V</title>
<text text-anchor="middle" x="108" y="-150.8" font-family="Times,serif" font-size="24.00">V</text>
</g>
<!-- A -->
<g class="node"><title>A</title>
<text text-anchor="middle" x="27" y="-80.8" font-family="Times,serif" font-size="24.00">A</text>
</g>
<!-- A&#45;&gt;V -->
<g class="edge"><title>A&#45;&gt;V</title>
<path fill="none" stroke="black" d="M46.1959,-104.115C56.5107,-112.774 69.403,-123.598 80.7401,-133.115"/>
<polygon fill="black" stroke="black" points="78.7519,-136.016 88.6612,-139.765 83.2527,-130.655 78.7519,-136.016"/>
</g>
<!-- B -->
<g class="node"><title>B</title>
<text text-anchor="middle" x="189" y="-80.8" font-family="Times,serif" font-size="24.00">B</text>
</g>
<!-- B&#45;&gt;V -->
<g class="edge"><title>B&#45;&gt;V</title>
<path fill="none" stroke="black" d="M169.804,-104.115C159.489,-112.774 146.597,-123.598 135.26,-133.115"/>
<polygon fill="black" stroke="black" points="132.747,-130.655 127.339,-139.765 137.248,-136.016 132.747,-130.655"/>
</g>
<!-- C -->
<g class="node"><title>C</title>
<text text-anchor="middle" x="108" y="-10.8" font-family="Times,serif" font-size="24.00">C</text>
</g>
<!-- C&#45;&gt;A -->
<g class="edge"><title>C&#45;&gt;A</title>
<path fill="none" stroke="black" d="M88.8041,-34.1151C78.4893,-42.7745 65.597,-53.5976 54.2599,-63.1151"/>
<polygon fill="black" stroke="black" points="51.7473,-60.6546 46.3388,-69.765 56.2481,-66.0159 51.7473,-60.6546"/>
</g>
<!-- C&#45;&gt;B -->
<g class="edge"><title>C&#45;&gt;B</title>
<path fill="none" stroke="black" d="M127.196,-34.1151C137.511,-42.7745 150.403,-53.5976 161.74,-63.1151"/>
<polygon fill="black" stroke="black" points="159.752,-66.0159 169.661,-69.765 164.253,-60.6546 159.752,-66.0159"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:virt'>4</a> — Virtual base</div><p >For an object <span class='texttt'>c</span> of class type <span class='texttt'>C</span>, a single subobject of
type <span class='texttt'>V</span> is shared by every base class subobject of <span class='texttt'>c</span> that has a
<span class='texttt'>virtual</span> base class of type <span class='texttt'>V</span>. Given the class <span class='texttt'>C</span>
defined above, an object of class <span class='texttt'>C</span> will have one subobject of
class <span class='texttt'>V</span>, as shown in Figure <a href='#fig:virt'>[fig:virt]</a>.
<span class='indexparent'><a class='index' id=':DAG,multiple_inheritance'></a></span><span class='indexparent'><a class='index' id=':DAG,virtual_base_class'></a></span><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/33316c99af9acd689e81d52f6e13bb102301f5d8/source/derived.tex#L285'>#</a></div><p >[<span style='white-space:nowrap'>&thinsp;</span><span class='textit'>Note:</span> 
A class can have both virtual and non-virtual base classes of a given
type.
</p><pre class='codeblock'>
class B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class X : virtual public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class Y : virtual public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class Z : public B { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };
class AA : public X, public Y, public Z { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };</pre><p >For an object of class <span class='texttt'>AA</span>, all <span class='texttt'>virtual</span> occurrences of
base class <span class='texttt'>B</span> in the class lattice of <span class='texttt'>AA</span> correspond to a
single <span class='texttt'>B</span> subobject within the object of type <span class='texttt'>AA</span>, and
every other occurrence of a (non-virtual) base class <span class='texttt'>B</span> in the
class lattice of <span class='texttt'>AA</span> corresponds one-to-one with a distinct
<span class='texttt'>B</span> subobject within the object of type <span class='texttt'>AA</span>. Given the
class <span class='texttt'>AA</span> defined above, class <span class='texttt'>AA</span> has two subobjects of
class <span class='texttt'>B</span>: <span class='texttt'>Z</span>'s <span class='texttt'>B</span> and the virtual <span class='texttt'>B</span> shared
by <span class='texttt'>X</span> and <span class='texttt'>Y</span>, as shown in Figure <a href='#fig:virtnonvirt'>[fig:virtnonvirt]</a>.</p><p ><span class='indexparent'><a class='index' id=':DAG,virtual_base_class_'></a></span><span class='indexparent'><a class='index' id=':DAG,non-virtual_base_class'></a></span><span class='indexparent'><a class='index' id=':DAG,multiple_inheritance_'></a></span></p><div class='figure' id='fig:virtnonvirt'><svg width="386pt" height="182pt"
 viewBox="0.00 0.00 386.00 182.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g class="graph" transform="scale(1 1) rotate(0) translate(4 178)">
<title>virtnonvirt</title>
<!-- B1 -->
<g class="node"><title>B1</title>
<text text-anchor="middle" x="108" y="-150.8" font-family="Times,serif" font-size="24.00">B</text>
</g>
<!-- B2 -->
<g class="node"><title>B2</title>
<text text-anchor="middle" x="351" y="-150.8" font-family="Times,serif" font-size="24.00">B</text>
</g>
<!-- AA -->
<g class="node"><title>AA</title>
<text text-anchor="middle" x="108" y="-10.8" font-family="Times,serif" font-size="24.00">AA</text>
</g>
<!-- X -->
<g class="node"><title>X</title>
<text text-anchor="middle" x="27" y="-80.8" font-family="Times,serif" font-size="24.00">X</text>
</g>
<!-- AA&#45;&gt;X -->
<g class="edge"><title>AA&#45;&gt;X</title>
<path fill="none" stroke="black" d="M88.8041,-34.1151C78.4893,-42.7745 65.597,-53.5976 54.2599,-63.1151"/>
<polygon fill="black" stroke="black" points="51.7473,-60.6546 46.3388,-69.765 56.2481,-66.0159 51.7473,-60.6546"/>
</g>
<!-- Y -->
<g class="node"><title>Y</title>
<text text-anchor="middle" x="189" y="-80.8" font-family="Times,serif" font-size="24.00">Y</text>
</g>
<!-- AA&#45;&gt;Y -->
<g class="edge"><title>AA&#45;&gt;Y</title>
<path fill="none" stroke="black" d="M127.196,-34.1151C137.511,-42.7745 150.403,-53.5976 161.74,-63.1151"/>
<polygon fill="black" stroke="black" points="159.752,-66.0159 169.661,-69.765 164.253,-60.6546 159.752,-66.0159"/>
</g>
<!-- Z -->
<g class="node"><title>Z</title>
<text text-anchor="middle" x="351" y="-80.8" font-family="Times,serif" font-size="24.00">Z</text>
</g>
<!-- AA&#45;&gt;Z -->
<g class="edge"><title>AA&#45;&gt;Z</title>
<path fill="none" stroke="black" d="M135.403,-25.6683C179.09,-37.8934 264.596,-61.8211 313.781,-75.5849"/>
<polygon fill="black" stroke="black" points="313.124,-79.0354 323.697,-78.3597 315.01,-72.2943 313.124,-79.0354"/>
</g>
<!-- X&#45;&gt;B1 -->
<g class="edge"><title>X&#45;&gt;B1</title>
<path fill="none" stroke="black" d="M46.1959,-104.115C56.5107,-112.774 69.403,-123.598 80.7401,-133.115"/>
<polygon fill="black" stroke="black" points="78.7519,-136.016 88.6612,-139.765 83.2527,-130.655 78.7519,-136.016"/>
</g>
<!-- Y&#45;&gt;B1 -->
<g class="edge"><title>Y&#45;&gt;B1</title>
<path fill="none" stroke="black" d="M169.804,-104.115C159.489,-112.774 146.597,-123.598 135.26,-133.115"/>
<polygon fill="black" stroke="black" points="132.747,-130.655 127.339,-139.765 137.248,-136.016 132.747,-130.655"/>
</g>
<!-- Z&#45;&gt;B2 -->
<g class="edge"><title>Z&#45;&gt;B2</title>
<path fill="none" stroke="black" d="M351,-104.115C351,-111.626 351,-120.766 351,-129.269"/>
<polygon fill="black" stroke="black" points="347.5,-129.528 351,-139.528 354.5,-129.528 347.5,-129.528"/>
</g>
</g>
</svg>
<br>Figure <a href='#fig:virtnonvirt'>5</a> — Virtual and non-virtual base</div><p ><span class='textit'><span style='white-space:nowrap'>&thinsp;</span>—<span style='white-space:nowrap'>&thinsp;</span>end note</span><span style='white-space:nowrap'>&thinsp;</span>] </p></div></div></body></html>