<!DOCTYPE html><html lang='en'><head><title>[class.friend]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>11</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>11.8</a> Member access control <a class='abbr_ref' href='class.access#class.friend'>[class.access]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>11.8.4</a> Friends <a class='abbr_ref'>[class.friend]</a></h3><div class='texpara'><a class='index' id=':friend_function,access_and'></a><a class='index' id=':access_control,friend_function'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e125ca7c66725801da118fa936e1444b22f8fb23/source/classes.tex#L4646'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>A friend of a class is a function or class that is
given permission to name the private and protected members of the class<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>A class specifies its friends, if any, by way of friend declarations<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>Such declarations give special access rights to the friends, but they
do not make the nominated friends members of the befriending class<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>: <div id='1.sentence-4' class='sentence'>The following example illustrates the differences between
members and friends:
<a class='index' id=':friend_function,member_function_and'></a>
<span class='codeblock'><span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> a;
  <span class='keyword'>friend</span> <span class='keyword'>void</span> friend_set<span class='parenthesis'>(</span>X<span class='operator'>*</span>, <span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>void</span> member_set<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> friend_set<span class='parenthesis'>(</span>X<span class='operator'>*</span> p, <span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>a <span class='operator'>=</span> i; <span class='curlybracket'>}</span>
<span class='keyword'>void</span> X<span class='operator'>::</span>member_set<span class='parenthesis'>(</span><span class='keyword'>int</span> i<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> a <span class='operator'>=</span> i; <span class='curlybracket'>}</span>

<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  X obj;
  friend_set<span class='parenthesis'>(</span><span class='operator'>&amp;</span>obj,<span class='literal'>10</span><span class='parenthesis'>)</span>;
  obj<span class='operator'>.</span>member_set<span class='parenthesis'>(</span><span class='literal'>10</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>
</span></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e125ca7c66725801da118fa936e1444b22f8fb23/source/classes.tex#L4676'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'><a class='index' id=':friend,class_access_and'></a>Declaring a class to be a friend implies that private and
protected members of the class granting friendship can be named in the
<a href='class.derived.general#nt:base-specifier' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:base-specifier'><span class='textsf'><i >base-specifier</i></span></span></a><i >s</i> and member declarations of the befriended
class<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>: <span class='codeblock'><span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> B <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>friend</span> <span class='keyword'>class</span> X;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> X <span class='operator'>:</span> A<span class='operator'>::</span>B <span class='curlybracket'>{</span>               <span class='comment'>// OK: <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> accessible to friend</span>
  A<span class='operator'>::</span>B mx;                      <span class='comment'>// OK: <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> accessible to member of friend</span>
  <span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
    A<span class='operator'>::</span>B my;                    <span class='comment'>// OK: <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;B</span> accessible to nested member of friend</span>
  <span class='curlybracket'>}</span>;
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div> <div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>: <span class='codeblock'><span class='keyword'>class</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>enum</span> <span class='curlybracket'>{</span> a<span class='operator'>=</span><span class='literal'>100</span> <span class='curlybracket'>}</span>;
  <span class='keyword'>friend</span> <span class='keyword'>class</span> Y;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> v<span class='squarebracket'>[</span>X<span class='operator'>::</span>a<span class='squarebracket'>]</span>;                  <span class='comment'>// OK, <span class='tcode_in_codeblock'>Y</span> is a friend of <span class='tcode_in_codeblock'>X</span></span>
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> Z <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> v<span class='squarebracket'>[</span>X<span class='operator'>::</span>a<span class='squarebracket'>]</span>;                  <span class='comment'>// error: <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;a</span> is private</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e125ca7c66725801da118fa936e1444b22f8fb23/source/classes.tex#L4714'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>A friend declaration that does not declare a function
shall have one of the following forms:
<div class='simplebnf'>
<span id=':friend'><span class='texttt'><span class='keyword'>friend</span></span></span> <a href='dcl.type.elab#nt:elaborated-type-specifier' title='9.2.9.4&emsp;Elaborated type specifiers&emsp;[dcl.type.elab]'><span id='ntref:elaborated-type-specifier'><span class='textsf'><i >elaborated-type-specifier</i></span></span></a> <span class='terminal'>;</span><br/><span id=':friend_'><span class='texttt'><span class='keyword'>friend</span></span></span> <a href='dcl.type.simple#nt:simple-type-specifier' title='9.2.9.3&emsp;Simple type specifiers&emsp;[dcl.type.simple]'><span id='ntref:simple-type-specifier'><span class='textsf'><i >simple-type-specifier</i></span></span></a> <span class='terminal'>;</span><br/><span id=':friend__'><span class='texttt'><span class='keyword'>friend</span></span></span> <a href='temp.res.general#nt:typename-specifier' title='13.8.1&emsp;General&emsp;[temp.res.general]'><span id='ntref:typename-specifier'><span class='textsf'><i >typename-specifier</i></span></span></a> <span class='terminal'>;</span>
</div></div></div><div class='texpara'><div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='3.sentence-2' class='sentence'>A friend declaration can be the
<a href='dcl.pre#nt:declaration' title='9.1&emsp;Preamble&emsp;[dcl.pre]'><span id='ntref:declaration'><span class='textsf'><i >declaration</i></span></span></a> in a <a href='temp.pre#nt:template-declaration' title='13.1&emsp;Preamble&emsp;[temp.pre]'><span id='ntref:template-declaration'><span class='textsf'><i >template-declaration</i></span></span></a>
(<a href='temp.pre' title='13.1&emsp;Preamble'>[temp.<span class='shy'></span>pre]</a>, <a href='temp.friend' title='13.7.5&emsp;Friends'>[temp.<span class='shy'></span>friend]</a>)<a class='hidden_link' href='#3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='3.sentence-3' class='sentence'>
If the
type specifier in a <span id=':friend___'><span class='texttt'><span class='keyword'>friend</span></span></span> declaration designates a (possibly
cv-qualified) class type, that class is declared as a friend; otherwise, the
friend declaration is ignored<a class='hidden_link' href='#3.sentence-3'>.</a></div> <div id='example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-4'>4</a></i>: <span class='codeblock'><span class='keyword'>class</span> C;
<span class='keyword'>typedef</span> C Ct;

<span class='keyword'>class</span> X1 <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> C;                     <span class='comment'>// OK: <span class='tcode_in_codeblock'>class C</span> is a friend</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> X2 <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> Ct;                    <span class='comment'>// OK: <span class='tcode_in_codeblock'>class C</span> is a friend</span>
  <span class='keyword'>friend</span> D;                     <span class='comment'>// error: <span class='tcode_in_codeblock'>D</span> not found</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> D;               <span class='comment'>// OK: elaborated-type-specifier declares new class</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>typename</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>class</span> R <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> T;
<span class='curlybracket'>}</span>;

R<span class='anglebracket'>&lt;</span>C<span class='anglebracket'>&gt;</span> rc;                        <span class='comment'>// <span class='tcode_in_codeblock'>class C</span> is a friend of <span class='tcode_in_codeblock'>R&lt;C&gt;</span></span>
R<span class='anglebracket'>&lt;</span><span class='keyword'>int</span><span class='anglebracket'>&gt;</span> Ri;                      <span class='comment'>// OK: <span class='tcode_in_codeblock'>"friend int;"</span> is ignored</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e125ca7c66725801da118fa936e1444b22f8fb23/source/classes.tex#L4756'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'><a class='index' id=':friend_function,linkage_of'></a>A function first declared in a friend declaration
has the linkage of the namespace of which it is a member (<a href='basic.link' title='6.6&emsp;Program and linkage'>[basic.<span class='shy'></span>link]</a>)<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>Otherwise, the function retains its previous linkage (<a href='dcl.stc' title='9.2.2&emsp;Storage class specifiers'>[dcl.<span class='shy'></span>stc]</a>)<a class='hidden_link' href='#4.sentence-2'>.</a></div></div></div><div class='para nonNormativeOnly' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e125ca7c66725801da118fa936e1444b22f8fb23/source/classes.tex#L4762'>#</a></div><div class='texpara'><a class='index' id=':declaration,overloaded_name_and_friend'></a><div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>: <div id='5.sentence-1' class='sentence'>A friend declaration refers to an entity, not (all overloads of) a name<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>A member function of a class
<span class='texttt'>X</span>
can be a friend of
a class
<span class='texttt'>Y</span><a class='hidden_link' href='#5.sentence-2'>.</a></div> <a class='index' id=':member_function,friend'></a><div id='example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-5'>5</a></i>: <span class='codeblock'><span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>char</span><span class='operator'>*</span> X<span class='operator'>::</span>foo<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
  <span class='keyword'>friend</span> X<span class='operator'>::</span>X<span class='parenthesis'>(</span><span class='keyword'>char</span><span class='parenthesis'>)</span>;            <span class='comment'>// constructors can be friends</span>
  <span class='keyword'>friend</span> X<span class='operator'>::</span><span class='operator'>~</span>X<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;               <span class='comment'>// destructors can be friends</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e125ca7c66725801da118fa936e1444b22f8fb23/source/classes.tex#L4783'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'><a class='index' id=':friend_function,inline'></a>A function may be defined in a friend declaration of a class if and only if the
class is a non-local class (<a href='class.local' title='11.6&emsp;Local class declarations'>[class.<span class='shy'></span>local]</a>) and the function name is unqualified<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-6'>6</a></i>: <span class='codeblock'><span class='keyword'>class</span> M <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>           <span class='comment'>// definition of global <span class='tcode_in_codeblock'>f</span>, a friend of <span class='tcode_in_codeblock'>M</span>,</span>
                                <span class='comment'>// not the definition of a member function</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e125ca7c66725801da118fa936e1444b22f8fb23/source/classes.tex#L4796'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>Such a function is implicitly an inline (<a href='dcl.inline' title='9.2.8&emsp;The inline specifier'>[dcl.<span class='shy'></span>inline]</a>) function
if it is attached to the global module<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>: <div id='7.sentence-2' class='sentence'>If a friend function is defined outside a class,
it is not in the scope of the class<a class='hidden_link' href='#7.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e125ca7c66725801da118fa936e1444b22f8fb23/source/classes.tex#L4804'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'>No
<a href='dcl.stc#nt:storage-class-specifier' title='9.2.2&emsp;Storage class specifiers&emsp;[dcl.stc]'><span id='ntref:storage-class-specifier'><span class='textsf'><i >storage-class-specifier</i></span></span></a>
shall appear in the
<a href='dcl.spec.general#nt:decl-specifier-seq' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier-seq'><span class='textsf'><i >decl-specifier-seq</i></span></span></a>
of a friend declaration<a class='hidden_link' href='#8.sentence-1'>.</a></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e125ca7c66725801da118fa936e1444b22f8fb23/source/classes.tex#L4811'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'><a class='index' id=':friend,access_specifier_and'></a>A member nominated by a friend declaration shall be accessible in the
class containing the friend declaration<a class='hidden_link' href='#9.sentence-1'>.</a></div> <div id='9.sentence-2' class='sentence'>The meaning of the friend declaration is the same whether the friend declaration
appears in the private, protected, or public (<a href='class.mem' title='11.4&emsp;Class members'>[class.<span class='shy'></span>mem]</a>)
portion of the class
<a href='class.mem.general#nt:member-specification' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:member-specification'><span class='textsf'><i >member-specification</i></span></span></a><a class='hidden_link' href='#9.sentence-2'>.</a></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e125ca7c66725801da118fa936e1444b22f8fb23/source/classes.tex#L4820'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'><a class='index' id=':friend,inheritance_and'></a>Friendship is neither inherited nor transitive<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='example-7' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-7'>7</a></i>: <span class='codeblock'><span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> B;
  <span class='keyword'>int</span> a;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> C;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> C  <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>a<span class='operator'>+</span><span class='operator'>+</span>;         <span class='comment'>// error: <span class='tcode_in_codeblock'>C</span> is not a friend of <span class='tcode_in_codeblock'>A</span> despite being a friend of a friend</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> D <span class='operator'>:</span> <span class='keyword'>public</span> B  <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>A<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>a<span class='operator'>+</span><span class='operator'>+</span>;         <span class='comment'>// error: <span class='tcode_in_codeblock'>D</span> is not a friend of <span class='tcode_in_codeblock'>A</span> despite being derived from a friend</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='11'><div class='marginalizedparent'><a class='marginalized' href='#11'>11</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/e125ca7c66725801da118fa936e1444b22f8fb23/source/classes.tex#L4848'>#</a></div><div class='texpara'><a class='index' id=':local_class,friend'></a><a class='index' id=':friend,local_class_and'></a><div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>: <div id='11.sentence-1' class='sentence'>A friend declaration never binds any names
(<a href='dcl.meaning' title='9.3.4&emsp;Meaning of declarators'>[dcl.<span class='shy'></span>meaning]</a>, <a href='dcl.type.elab' title='9.2.9.4&emsp;Elaborated type specifiers'>[dcl.<span class='shy'></span>type.<span class='shy'></span>elab]</a>)<a class='hidden_link' href='#11.sentence-1'>.</a></div> —&nbsp;<i>end note</i>]</div></div>
<div id='example-8' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-8'>8</a></i>: <span class='codeblock'><span class='comment'>// Assume <span class='tcode_in_codeblock'>f</span> and <span class='tcode_in_codeblock'>g</span> have not yet been declared.</span>
<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;
<span class='keyword'>template</span> <span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span> <span class='keyword'>void</span> f2<span class='parenthesis'>(</span>T<span class='parenthesis'>)</span>;
<span class='keyword'>namespace</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> X <span class='curlybracket'>{</span>
    <span class='keyword'>friend</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span>;           <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f(X)</span> is a friend</span>
    <span class='keyword'>class</span> Y <span class='curlybracket'>{</span>
      <span class='keyword'>friend</span> <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;          <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span> is a friend</span>
      <span class='keyword'>friend</span> <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;       <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span> is a friend</span>
                                <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;h</span> not considered</span>
      <span class='keyword'>friend</span> <span class='keyword'>void</span> f2<span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span><span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>;    <span class='comment'>// <span class='tcode_in_codeblock'>&#x200b;::&#x200b;f2&lt;&gt;(int)</span> is a friend</span>
    <span class='curlybracket'>}</span>;
  <span class='curlybracket'>}</span>;

  <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span>, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span> and <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span> are not visible here</span>
  X x;
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>; <span class='curlybracket'>}</span>            <span class='comment'>// definition of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span></span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span>X<span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>       <span class='comment'>// definition of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span></span>
  <span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>     <span class='comment'>// definition of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span></span>
  <span class='comment'>// <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;f</span>, <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;g</span> and <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;h</span> are visible here and known to be friends</span>
<span class='curlybracket'>}</span>

<span class='keyword'>using</span> A<span class='operator'>::</span>x;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  A<span class='operator'>::</span>f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;
  A<span class='operator'>::</span>X<span class='operator'>::</span>f<span class='parenthesis'>(</span>x<span class='parenthesis'>)</span>;                   <span class='comment'>// error: <span class='tcode_in_codeblock'>f</span> is not a member of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X</span></span>
  A<span class='operator'>::</span>X<span class='operator'>::</span>Y<span class='operator'>::</span>g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;                 <span class='comment'>// error: <span class='tcode_in_codeblock'>g</span> is not a member of <span class='tcode_in_codeblock'>A&#x200b;::&#x200b;X&#x200b;::&#x200b;Y</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div>
<div id='example-9' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-9'>9</a></i>: <span class='codeblock'><span class='keyword'>class</span> X;
<span class='keyword'>void</span> a<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>class</span> Y;
  <span class='keyword'>extern</span> <span class='keyword'>void</span> b<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>class</span> A <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> X;   <span class='comment'>// OK, but <span class='tcode_in_codeblock'>X</span> is a local class, not <span class='tcode_in_codeblock'>&#x200b;::&#x200b;X</span></span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> Y;   <span class='comment'>// OK</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> Z;   <span class='comment'>// OK, introduces local class <span class='tcode_in_codeblock'>Z</span></span>
  <span class='keyword'>friend</span> <span class='keyword'>void</span> a<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='comment'>// error, <span class='tcode_in_codeblock'>&#x200b;::&#x200b;a</span> is not considered</span>
  <span class='keyword'>friend</span> <span class='keyword'>void</span> b<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='comment'>// OK</span>
  <span class='keyword'>friend</span> <span class='keyword'>void</span> c<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;  <span class='comment'>// error</span>
  <span class='curlybracket'>}</span>;
  X<span class='operator'>*</span> px;            <span class='comment'>// OK, but <span class='tcode_in_codeblock'>&#x200b;::&#x200b;X</span> is found</span>
  Z<span class='operator'>*</span> pz;            <span class='comment'>// error: no <span class='tcode_in_codeblock'>Z</span> is found</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>