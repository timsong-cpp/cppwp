<!DOCTYPE html><html lang='en'><head><title>[dcl.attr.fallthrough]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>9</a> Declarations <a class='abbr_ref' href='./#dcl.dcl'>[dcl.dcl]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>9.12</a> Attributes <a class='abbr_ref' href='dcl.attr#fallthrough'>[dcl.attr]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>9.12.6</a> Fallthrough attribute <a class='abbr_ref'>[dcl.attr.fallthrough]</a></h3><div class='texpara'><a class='index' id=':attribute,fallthrough'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/fa211bcab0c7576e345e93c5940bdd329450a5df/source/declarations.tex#L9180'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>The <a href='dcl.attr.grammar#nt:attribute-token' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-token'><span class='textsf'><i >attribute-token</i></span></span></a> <span class='texttt'>fallthrough</span>
may be applied to a <a href='stmt.expr#def:statement,null' title='8.3&emsp;Expression statement&emsp;[stmt.expr]'>null statement</a>;
<a class='index' id=':statement,fallthrough'></a>
such a statement is a fallthrough statement<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>No <a href='dcl.attr.grammar#nt:attribute-argument-clause' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-argument-clause'><span class='textsf'><i >attribute-argument-clause</i></span></span></a> shall be present<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>A fallthrough statement may only appear within
an enclosing <span id=':switch'><span class='texttt'><span class='keyword'>switch</span></span></span> statement (<a href='stmt.switch' title='8.5.3&emsp;The switch statement'>[stmt.<span class='shy'></span>switch]</a>)<a class='hidden_link' href='#1.sentence-3'>.</a></div> <div id='1.sentence-4' class='sentence'>The next statement that would be executed after a fallthrough statement
shall be a labeled statement whose label is a case label or
default label for the same <span id=':switch_'><span class='texttt'><span class='keyword'>switch</span></span></span> statement and,
if the fallthrough statement is contained in an iteration statement,
the next statement shall be part of the same execution of
the substatement of the innermost enclosing iteration statement<a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>The program is ill-formed if there is no such statement<a class='hidden_link' href='#1.sentence-5'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/fa211bcab0c7576e345e93c5940bdd329450a5df/source/declarations.tex#L9196'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'><i >Recommended practice</i>: The use of a fallthrough statement should suppress
a warning that an implementation might otherwise issue
for a case or default label that is reachable
from another case or default label along some path of execution<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>The value of
a <a href='cpp.cond#nt:has-attribute-expression' title='15.2&emsp;Conditional inclusion&emsp;[cpp.cond]'><span id='ntref:has-attribute-expression'><span class='textsf'><i >has-attribute-expression</i></span></span></a> for the <span class='texttt'>fallthrough</span> attribute
should be <span class='texttt'><span class='literal'>0</span></span>
if the attribute does not cause suppression of such warnings<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>Implementations should issue a warning
if a fallthrough statement is not dynamically reachable<a class='hidden_link' href='#2.sentence-3'>.</a></div></div></div><div class='para nonNormativeOnly' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/fa211bcab0c7576e345e93c5940bdd329450a5df/source/declarations.tex#L9209'>#</a></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='keyword'>int</span> n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>, i<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>switch</span> <span class='parenthesis'>(</span>n<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>case</span> <span class='literal'>1</span><span class='operator'>:</span>
  <span class='keyword'>case</span> <span class='literal'>2</span><span class='operator'>:</span>
    g<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>fallthrough<span class='squarebracket'>]</span><span class='squarebracket'>]</span>;
  <span class='keyword'>case</span> <span class='literal'>3</span><span class='operator'>:</span>                       <span class='comment'>// warning on fallthrough discouraged</span>
    <span class='keyword'>do</span> <span class='curlybracket'>{</span>
      <span class='squarebracket'>[</span><span class='squarebracket'>[</span>fallthrough<span class='squarebracket'>]</span><span class='squarebracket'>]</span>;          <span class='comment'>// error: next statement is not part of the same substatement execution</span>
    <span class='curlybracket'>}</span> <span class='keyword'>while</span> <span class='parenthesis'>(</span><span class='literal'>false</span><span class='parenthesis'>)</span>;
  <span class='keyword'>case</span> <span class='literal'>6</span><span class='operator'>:</span>
    <span class='keyword'>do</span> <span class='curlybracket'>{</span>
      <span class='squarebracket'>[</span><span class='squarebracket'>[</span>fallthrough<span class='squarebracket'>]</span><span class='squarebracket'>]</span>;          <span class='comment'>// error: next statement is not part of the same substatement execution</span>
    <span class='curlybracket'>}</span> <span class='keyword'>while</span> <span class='parenthesis'>(</span>n<span class='operator'>-</span><span class='operator'>-</span><span class='parenthesis'>)</span>;
  <span class='keyword'>case</span> <span class='literal'>7</span><span class='operator'>:</span>
    <span class='keyword'>while</span> <span class='parenthesis'>(</span><span class='literal'>false</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
      <span class='squarebracket'>[</span><span class='squarebracket'>[</span>fallthrough<span class='squarebracket'>]</span><span class='squarebracket'>]</span>;          <span class='comment'>// error: next statement is not part of the same substatement execution</span>
    <span class='curlybracket'>}</span>
  <span class='keyword'>case</span> <span class='literal'>5</span><span class='operator'>:</span>
    h<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>case</span> <span class='literal'>4</span><span class='operator'>:</span>                       <span class='comment'>// implementation may warn on fallthrough</span>
    i<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
    <span class='squarebracket'>[</span><span class='squarebracket'>[</span>fallthrough<span class='squarebracket'>]</span><span class='squarebracket'>]</span>;            <span class='comment'>// error</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</span> â€”&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>