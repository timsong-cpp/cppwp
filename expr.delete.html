<!DOCTYPE html><html lang='en'><head><title>[expr.delete]</title><meta charset='UTF-8'><link rel='stylesheet' type='text/css' href='14882.css'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'><link rel='icon' href='icon.png'><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>7</a> Expressions <a class='abbr_ref' href='./#expr'>[expr]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>7.6</a> Compound expressions <a class='abbr_ref' href='expr.compound#expr.delete'>[expr.compound]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>7.6.2</a> Unary expressions <a class='abbr_ref' href='expr.unary#expr.delete'>[expr.unary]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>7.6.2.9</a> Delete <a class='abbr_ref'>[expr.delete]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/expressions.tex#L6360'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'><a class='index' id=':expression,delete'></a><a class='index' id=':delete_'></a>The <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression'><span class='textsf'><i >delete-expression</i></span></span></a> operator destroys a
<a href='intro.object#def:most_derived_object' title='6.8.2&emsp;Object model&emsp;[intro.object]'>most derived object</a> or array created by a
<a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_'><span class='textsf'><i >new-expression</i></span></span></a><a class='hidden_link' href='#1.sentence-1'>.</a></div></div><div class='texpara'><div class='bnf' id='nt:delete-expression'>
<a class='hidden_link' href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='nt:delete-expression'><span id=':delete-expression'>delete-expression<span class='textnormal'>:</span></span></span></a><br><span class='terminal'><span class='operator'>::</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span id=':delete__'><span class='texttt'><span class='keyword'>delete</span></span></span> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression'><span class='textsf'><i >cast-expression</i></span></span></a><br><span class='terminal'><span class='operator'>::</span></span><span class='math'><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span></span> <span id=':delete___'><span class='texttt'><span class='keyword'>delete</span></span></span> <span class='terminal'><span class='squarebracket'>[</span></span> <span class='terminal'><span class='squarebracket'>]</span></span> <a href='expr.cast#nt:cast-expression' title='7.6.3&emsp;Explicit type conversion (cast notation)&emsp;[expr.cast]'><span id='ntref:cast-expression_'><span class='textsf'><i >cast-expression</i></span></span></a>
</div></div><div class='texpara'><div id='1.sentence-2' class='sentence'>The first alternative is a
<a class='hidden_link' href='#def:delete,single-object' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='def:delete,single-object'><i >single-object delete expression</i></span></a>, and the
second is an <a class='hidden_link' href='#def:delete,array' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='def:delete,array'><i >array delete expression</i></span></a><a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>Whenever the <span id=':delete____'><span class='texttt'><span class='keyword'>delete</span></span></span> keyword is immediately followed by empty square
brackets, it shall be interpreted as the second alternative<a class='hidden_link' href='#1.sentence-3'>.</a><a class='footnoteref' href='#footnote-61' id='footnoteref-61' title='A lambda-expression with a lambda-introducer that consists of empty square brackets can follow the delete keyword if the lambda-expression is enclosed in parentheses.'>61</a></div> <div id='1.sentence-4' class='sentence'>
If the operand is of
class type, it is contextually implicitly converted (<a href='conv' title='7.3&emsp;Standard conversions'>[conv]</a>)
to a pointer to object
type
and the converted operand is used in place of the original operand
for the remainder of this subclause<a class='hidden_link' href='#1.sentence-4'>.</a></div> <div id='1.sentence-5' class='sentence'>Otherwise, it shall be a prvalue of pointer to object type<a class='hidden_link' href='#1.sentence-5'>.</a></div> <div id='1.sentence-6' class='sentence'>The <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_'><span class='textsf'><i >delete-expression</i></span></span></a> has type
<span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span><a class='hidden_link' href='#1.sentence-6'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/expressions.tex#L6394'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'><a class='index' id=':delete,single-object'></a>In a single-object delete expression, the value of the operand of
<span id=':delete_____'><span class='texttt'><span class='keyword'>delete</span></span></span> may be a null pointer value,
a pointer value
that resulted from a previous non-array <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression__'><span class='textsf'><i >new-expression</i></span></span></a>, or
a pointer to a base class subobject
of an object created by such a <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression___'><span class='textsf'><i >new-expression</i></span></span></a><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>If not, the behavior is undefined<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'><a class='index' id=':array,delete'></a>In an array delete expression, the value of the operand of <span id=':delete______'><span class='texttt'><span class='keyword'>delete</span></span></span>
may be a null pointer value or a pointer value that resulted from
a previous array <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression____'><span class='textsf'><i >new-expression</i></span></span></a> whose
allocation function was not a non-allocating form (<a href='new.delete.placement' title='17.6.3.4&emsp;Non-allocating forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>placement]</a>)<a class='hidden_link' href='#2.sentence-3'>.</a><a class='footnoteref' href='#footnote-62' id='footnoteref-62' title='For nonzero-length arrays, this is the same as a pointer to the first element of the array created by that new-expression. Zero-length arrays do not have a first element.'>62</a></div> <div id='2.sentence-4' class='sentence'>
If not, the behavior is undefined<a class='hidden_link' href='#2.sentence-4'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='2.sentence-5' class='sentence'>This means that the syntax of the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression__'><span class='textsf'><i >delete-expression</i></span></span></a> must
match the type of the object allocated by <span id=':new'><span class='texttt'><span class='keyword'>new</span></span></span>, not the syntax of the
<a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_____'><span class='textsf'><i >new-expression</i></span></span></a><a class='hidden_link' href='#2.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='2.sentence-6' class='sentence'>A pointer to a <span id=':const'><span class='texttt'><span class='keyword'>const</span></span></span> type can be the operand of a
<a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression___'><span class='textsf'><i >delete-expression</i></span></span></a>; it is not necessary to cast away the
constness (<a href='expr.const.cast' title='7.6.1.11&emsp;Const cast'>[expr.<span class='shy'></span>const.<span class='shy'></span>cast]</a>) of the pointer expression before it is
used as the operand of the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression____'><span class='textsf'><i >delete-expression</i></span></span></a><a class='hidden_link' href='#2.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/expressions.tex#L6427'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'><a class='index' id=':delete,undefined'></a>In a single-object delete expression, if the static type of the object to be
deleted is not similar (<a href='conv.qual' title='7.3.6&emsp;Qualification conversions'>[conv.<span class='shy'></span>qual]</a>) to its dynamic type
and the selected deallocation function (see below)
is not a destroying operator delete,
the static type shall be a base
class of the dynamic type of the object to be deleted and the static type shall
have a virtual destructor or the behavior is undefined<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>In an array delete
expression, if the dynamic type of the object to be deleted is not similar to
its static type, the behavior is undefined<a class='hidden_link' href='#3.sentence-2'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/expressions.tex#L6439'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'><a class='index' id=':type,incomplete'></a>If the object being deleted has incomplete class type at the point of deletion,
the program is ill-formed<a class='hidden_link' href='#4.sentence-1'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/expressions.tex#L6444'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'><a class='index' id=':delete,destructor_and'></a>If the value of the operand of the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_____'><span class='textsf'><i >delete-expression</i></span></span></a> is not a
null pointer value
and the selected deallocation function (see below)
is not a destroying operator delete,
evaluating the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression______'><span class='textsf'><i >delete-expression</i></span></span></a> invokes the
destructor (if any) for the object or the elements of the array being
deleted<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>The destructor shall be accessible from the point where
the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_______'><span class='textsf'><i >delete-expression</i></span></span></a> appears<a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='5.sentence-3' class='sentence'>In the case of an array, the elements are destroyed in
order of decreasing address (that is, in reverse order of the completion
of their constructor; see <a href='class.base.init' title='11.9.3&emsp;Initializing bases and members'>[class.<span class='shy'></span>base.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#5.sentence-3'>.</a></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/expressions.tex#L6459'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>If the value of the operand of the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression________'><span class='textsf'><i >delete-expression</i></span></span></a> is not a
null pointer value, then:
<ul class='itemize'><li id='6.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#6.1'>(6.1)</a></div><div class='texpara'><div id='6.1.sentence-1' class='sentence'>If the allocation call for the <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression______'><span class='textsf'><i >new-expression</i></span></span></a> for the object to
be deleted was not omitted and the allocation was not extended (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>), the
<a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_________'><span class='textsf'><i >delete-expression</i></span></span></a> shall call a <a href='basic.stc.dynamic.deallocation' title='6.8.6.5.3&emsp;Deallocation functions&emsp;[basic.stc.dynamic.deallocation]'>deallocation
function</a><a class='hidden_link' href='#6.1.sentence-1'>.</a></div> <div id='6.1.sentence-2' class='sentence'>The value returned from the
allocation call of the <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_______'><span class='textsf'><i >new-expression</i></span></span></a> shall be passed as the
first argument to the deallocation function<a class='hidden_link' href='#6.1.sentence-2'>.</a></div></div></li><li id='6.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#6.2'>(6.2)</a></div><div class='texpara'><div id='6.2.sentence-1' class='sentence'>Otherwise, if the allocation was extended or was provided by extending the
allocation of another <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression________'><span class='textsf'><i >new-expression</i></span></span></a>, and the
<a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression__________'><span class='textsf'><i >delete-expression</i></span></span></a> for every other pointer value produced by a
<a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression_________'><span class='textsf'><i >new-expression</i></span></span></a> that had storage provided by the extended
<a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression__________'><span class='textsf'><i >new-expression</i></span></span></a> has been evaluated, the
<a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression___________'><span class='textsf'><i >delete-expression</i></span></span></a> shall call a deallocation function<a class='hidden_link' href='#6.2.sentence-1'>.</a></div> <div id='6.2.sentence-2' class='sentence'>The value
returned from the allocation call of the extended <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression___________'><span class='textsf'><i >new-expression</i></span></span></a>
shall be passed as the first argument to the deallocation function<a class='hidden_link' href='#6.2.sentence-2'>.</a></div></div></li><li id='6.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#6.3'>(6.3)</a></div><div class='texpara'><div id='6.3.sentence-1' class='sentence'>Otherwise, the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression____________'><span class='textsf'><i >delete-expression</i></span></span></a> will not call a
deallocation function<a class='hidden_link' href='#6.3.sentence-1'>.</a></div></div></li></ul></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='6.sentence-2' class='sentence'>The deallocation function is called regardless of whether the destructor
for the object or some element of the array throws an exception<a class='hidden_link' href='#6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='6.sentence-3' class='sentence'>
If the value of the operand of the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_____________'><span class='textsf'><i >delete-expression</i></span></span></a> is a
null pointer value, it is unspecified whether a deallocation function will be
called as described above<a class='hidden_link' href='#6.sentence-3'>.</a></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/expressions.tex#L6493'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'>If a deallocation function is called,
it is <span class='texttt'><span id=':operator'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':delete_______'><span class='texttt'><span class='keyword'>delete</span></span></span></span> for a single-object delete expression or
<span class='texttt'><span id=':operator_'><span class='texttt'><span class='keyword'>operator</span></span></span> <span id=':delete________'><span class='texttt'><span class='keyword'>delete</span></span></span><span class='squarebracket'>[</span><span class='squarebracket'>]</span></span> for an array delete expression<a class='hidden_link' href='#7.sentence-1'>.</a></div> <div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>:&ensp;<div id='7.sentence-2' class='sentence'><a class='index' id=':operator_delete'></a>An implementation provides default definitions of the global
deallocation functions (<a href='new.delete.single' title='17.6.3.2&emsp;Single-object forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>single]</a>, <a href='new.delete.array' title='17.6.3.3&emsp;Array forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>array]</a>)<a class='hidden_link' href='#7.sentence-2'>.</a></div> <div id='7.sentence-3' class='sentence'>A C++ program can provide alternative definitions of these
functions (<a href='replacement.functions' title='16.4.5.6&emsp;Replacement functions'>[replacement.<span class='shy'></span>functions]</a>), and/or class-specific
versions (<a href='class.free' title='11.4.11&emsp;Allocation and deallocation functions'>[class.<span class='shy'></span>free]</a>)<a class='hidden_link' href='#7.sentence-3'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/expressions.tex#L6506'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'>If the keyword <span id=':delete_________'><span class='texttt'><span class='keyword'>delete</span></span></span> in a <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression______________'><span class='textsf'><i >delete-expression</i></span></span></a>
is not preceded by the unary <span class='texttt'><span class='operator'>&#x200b;::&#x200b;</span></span> operator and the type of the operand is
a pointer to a (possibly cv-qualified) class type <span class='texttt'>T</span>
or (possibly multidimensional) array thereof:
<ul class='itemize'><li id='8.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#8.1'>(8.1)</a></div><div class='texpara'><div id='8.1.sentence-1' class='sentence'>For a single-object delete expression,
if the operand is a pointer to <span class='mathit'>cv</span> <span class='texttt'>T</span> and
<span class='texttt'>T</span> has a virtual destructor,
the deallocation function is the one selected at the point of definition of
the dynamic type's virtual destructor (<a href='class.dtor' title='11.4.7&emsp;Destructors'>[class.<span class='shy'></span>dtor]</a>)<a class='hidden_link' href='#8.1.sentence-1'>.</a></div></div></li><li id='8.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#8.2'>(8.2)</a></div><div class='texpara'><div id='8.2.sentence-1' class='sentence'>Otherwise,
a search is performed for the deallocation function's name
in the scope of <span class='texttt'>T</span><a class='hidden_link' href='#8.2.sentence-1'>.</a></div></div></li></ul></div> <div id='8.sentence-2' class='sentence'>
Otherwise, or if nothing is found,
the deallocation function's name is looked up by
searching for it in the global scope<a class='hidden_link' href='#8.sentence-2'>.</a></div> <div id='8.sentence-3' class='sentence'>In any case, any declarations
other than of usual deallocation functions (<a href='basic.stc.dynamic.deallocation' title='6.8.6.5.3&emsp;Deallocation functions'>[basic.<span class='shy'></span>stc.<span class='shy'></span>dynamic.<span class='shy'></span>deallocation]</a>)
are discarded<a class='hidden_link' href='#8.sentence-3'>.</a></div> <div id='note-5' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-5'>5</a></i>:&ensp;<div id='8.sentence-4' class='sentence'>If only a placement deallocation function is found in a class,
the program is ill-formed because the lookup set is empty (<a href='basic.lookup' title='6.5&emsp;Name lookup'>[basic.<span class='shy'></span>lookup]</a>)<a class='hidden_link' href='#8.sentence-4'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='9'><div class='marginalizedparent'><a class='marginalized' href='#9'>9</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/expressions.tex#L6534'>#</a></div><div class='texpara'><div id='9.sentence-1' class='sentence'>The deallocation function to be called is selected as follows:
<ul class='itemize'><li id='9.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#9.1'>(9.1)</a></div><div class='texpara'><div id='9.1.sentence-1' class='sentence'>If any of the deallocation functions is a destroying operator delete,
all deallocation functions that are not destroying operator deletes
are eliminated from further consideration<a class='hidden_link' href='#9.1.sentence-1'>.</a></div></div></li><li id='9.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#9.2'>(9.2)</a></div><div class='texpara'><div id='9.2.sentence-1' class='sentence'>If the type has new-extended alignment,
a function with a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>align_<span class='shy'></span>val_<span class='shy'></span>t</span> is preferred;
otherwise a function without such a parameter is preferred<a class='hidden_link' href='#9.2.sentence-1'>.</a></div> <div id='9.2.sentence-2' class='sentence'>If any preferred functions are found,
all non-preferred functions are eliminated from further consideration<a class='hidden_link' href='#9.2.sentence-2'>.</a></div></div></li><li id='9.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#9.3'>(9.3)</a></div><div class='texpara'><div id='9.3.sentence-1' class='sentence'>If exactly one function remains,
that function is selected and the selection process terminates<a class='hidden_link' href='#9.3.sentence-1'>.</a></div></div></li><li id='9.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#9.4'>(9.4)</a></div><div class='texpara'><div id='9.4.sentence-1' class='sentence'>If the deallocation functions belong to a class scope,
the one without a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span> is selected<a class='hidden_link' href='#9.4.sentence-1'>.</a></div></div></li><li id='9.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#9.5'>(9.5)</a></div><div class='texpara'><div id='9.5.sentence-1' class='sentence'>If the type is complete
and if, for an array delete expression only,
the operand is a pointer to a class type with a
non-trivial destructor or a (possibly multidimensional) array thereof,
the function with a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span> is selected<a class='hidden_link' href='#9.5.sentence-1'>.</a></div></div></li><li id='9.6'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#9.6'>(9.6)</a></div><div class='texpara'><div id='9.6.sentence-1' class='sentence'>Otherwise, it is unspecified
whether a deallocation function with a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span>
is selected<a class='hidden_link' href='#9.6.sentence-1'>.</a></div></div></li></ul></div> <div id='9.sentence-2' class='sentence'>
Unless the deallocation function is selected
at the point of definition of the dynamic type's virtual destructor,
the selected deallocation function shall be accessible
from the point where the <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression_______________'><span class='textsf'><i >delete-expression</i></span></span></a> appears<a class='hidden_link' href='#9.sentence-2'>.</a></div></div></div><div class='para' id='10'><div class='marginalizedparent'><a class='marginalized' href='#10'>10</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/98ce5ac6fbce2338787adb9b1c842fcf8ebab37c/source/expressions.tex#L6569'>#</a></div><div class='texpara'><div id='10.sentence-1' class='sentence'>For a single-object delete expression,
the deleted object is
the object <span class='math'><span class='mathalpha'>A</span></span> pointed to by the operand
if the static type of <span class='math'><span class='mathalpha'>A</span></span> does not have a virtual destructor,
and the most-derived object of <span class='math'><span class='mathalpha'>A</span></span> otherwise<a class='hidden_link' href='#10.sentence-1'>.</a></div> <div id='note-6' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-6'>6</a></i>:&ensp;<div id='10.sentence-2' class='sentence'>If the deallocation function is not a destroying operator delete
and the deleted object is not the most derived object in the former case,
the behavior is undefined,
as stated above<a class='hidden_link' href='#10.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='10.sentence-3' class='sentence'>
For an array delete expression,
the deleted object is
the array object<a class='hidden_link' href='#10.sentence-3'>.</a></div> <div id='10.sentence-4' class='sentence'>When a <a href='#nt:delete-expression' title='7.6.2.9&emsp;Delete&emsp;[expr.delete]'><span id='ntref:delete-expression________________'><span class='textsf'><i >delete-expression</i></span></span></a>
is executed, the selected deallocation function shall be called with
the address of the deleted object
in a single-object delete expression, or
the address of the deleted object
suitably adjusted for the array allocation
overhead (<a href='expr.new' title='7.6.2.8&emsp;New'>[expr.<span class='shy'></span>new]</a>) in an array delete expression,
as its first argument<a class='hidden_link' href='#10.sentence-4'>.</a></div> <div id='note-7' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-7'>7</a></i>:&ensp;<div id='10.sentence-5' class='sentence'>Any cv-qualifiers in the type of the deleted object
are ignored when forming this argument<a class='hidden_link' href='#10.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='10.sentence-6' class='sentence'>
If a destroying operator delete is used,
an unspecified value
is passed as the argument
corresponding to the parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>destroying_<span class='shy'></span>delete_<span class='shy'></span>t</span><a class='hidden_link' href='#10.sentence-6'>.</a></div> <div id='10.sentence-7' class='sentence'>If a deallocation function
with a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>align_<span class='shy'></span>val_<span class='shy'></span>t</span>
is used,
the alignment of the type of the deleted object
is passed as the corresponding argument<a class='hidden_link' href='#10.sentence-7'>.</a></div> <div id='10.sentence-8' class='sentence'>If a deallocation function
with a parameter of type <span class='texttt'>std<span class='operator'>&#x200b;::&#x200b;</span>size_<span class='shy'></span>t</span> is used,
the size of the deleted object
in a single-object delete expression, or
of the array plus allocation overhead
in an array delete expression,
is passed as the corresponding argument<a class='hidden_link' href='#10.sentence-8'>.</a></div> <div id='note-8' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-8'>8</a></i>:&ensp;<div id='10.sentence-9' class='sentence'>If this results in a call to a replaceable deallocation function,
and either
the first argument was not the result of
a prior call to a replaceable allocation function or
the second or third argument was not the corresponding argument in said call,
the behavior is undefined (<a href='new.delete.single' title='17.6.3.2&emsp;Single-object forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>single]</a>, <a href='new.delete.array' title='17.6.3.3&emsp;Array forms'>[new.<span class='shy'></span>delete.<span class='shy'></span>array]</a>)<a class='hidden_link' href='#10.sentence-9'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-61'><div class='texpara'><a class='footnotenum' href='#footnote-61'>61)</a><a class='footnoteBacklink' href='#footnoteref-61'>61)</a> <div id='footnote-61.sentence-1' class='sentence'>A
<a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression'><span class='textsf'><i >lambda-expression</i></span></span></a> with a <a href='expr.prim.lambda.general#nt:lambda-introducer' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-introducer'><span class='textsf'><i >lambda-introducer</i></span></span></a>
that consists of empty square brackets can follow the <span id=':delete'><span class='texttt'><span class='keyword'>delete</span></span></span> keyword
if the <a href='expr.prim.lambda.general#nt:lambda-expression' title='7.5.6.1&emsp;General&emsp;[expr.prim.lambda.general]'><span id='ntref:lambda-expression_'><span class='textsf'><i >lambda-expression</i></span></span></a> is enclosed in parentheses<a class='hidden_link' href='#footnote-61.sentence-1'>.</a></div></div></div><div class='footnote' id='footnote-62'><div class='texpara'><a class='footnotenum' href='#footnote-62'>62)</a><a class='footnoteBacklink' href='#footnoteref-62'>62)</a> <div id='footnote-62.sentence-1' class='sentence'>For nonzero-length
arrays, this is the same as a pointer to the first
element of the array created by that <a href='expr.new#nt:new-expression' title='7.6.2.8&emsp;New&emsp;[expr.new]'><span id='ntref:new-expression'><span class='textsf'><i >new-expression</i></span></span></a><a class='hidden_link' href='#footnote-62.sentence-1'>.</a></div> <div id='footnote-62.sentence-2' class='sentence'>Zero-length arrays do not have a first element<a class='hidden_link' href='#footnote-62.sentence-2'>.</a></div></div></div></div></body></html>