<!DOCTYPE html><html lang='en'><head><title>[format.formatter.spec]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>22</a> General utilities library <a class='abbr_ref' href='./#utilities'>[utilities]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>22.14</a> Formatting <a class='abbr_ref' href='format#formatter.spec'>[format]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>22.14.6</a> Formatter <a class='abbr_ref' href='format.formatter#spec'>[format.formatter]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>22.14.6.3</a> Formatter specializations <a class='abbr_ref'>[format.formatter.spec]</a></h4><div class='texpara'><a class='index' id='lib:formatter'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/utilities.tex#L16933'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>The functions defined in <a href='format.functions' title='22.14.5&emsp;Formatting functions'>[format.<span class='shy'></span>functions]</a> use
specializations of the class template <span class='texttt'>formatter</span> to format
individual arguments<a class='hidden_link' href='#1.sentence-1'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/utilities.tex#L16939'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>Let <span class='texttt'>charT</span> be either <span class='texttt'><span class='keyword'>char</span></span> or <span id=':wchar_t'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Each specialization of <span class='texttt'>formatter</span> is either enabled or disabled,
as described below<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'><a class='index' id=':formatter,debug-enabled_specialization_of'></a>A <a class='hidden_link' href='#def:debug-enabled' title='22.14.6.3&emsp;Formatter specializations&emsp;[format.formatter.spec]'><span id='def:debug-enabled'><i >debug-enabled</i></span></a> specialization of <span class='texttt'>formatter</span>
additionally provides
a public, constexpr, non-static member function <span class='texttt'>set_<span class='shy'></span>debug_<span class='shy'></span>format<span class='parenthesis'>(</span><span class='parenthesis'>)</span></span>
which modifies the state of the <span class='texttt'>formatter</span> to be as if
the type of the <span class='textsf'><i >std-format-spec</i></span>
parsed by the last call to <span class='texttt'>parse</span> were <span class='texttt'><span class='operator'>?</span></span><a class='hidden_link' href='#2.sentence-3'>.</a></div> <div id='2.sentence-4' class='sentence'>Each header that declares the template <span class='texttt'>formatter</span>
provides the following enabled specializations:
<ul class='itemize'><li id='2.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.1'>(2.1)</a></div><a class='index' id='lib:formatter,specializations,character_types'></a>The debug-enabled specializations
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>, <span class='keyword'>char</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>char</span>, <span class='keyword'>wchar_t</span><span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>wchar_t</span>, <span class='keyword'>wchar_t</span><span class='anglebracket'>&gt;</span>;
</span></li><li id='2.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.2'>(2.2)</a></div><a class='index' id='lib:formatter,specializations,string_types'></a>For each <span class='texttt'>charT</span>,
the debug-enabled string type specializations
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>charT<span class='operator'>*</span>, charT<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> charT<span class='operator'>*</span>, charT<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span>size_t N<span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>charT<span class='squarebracket'>[</span>N<span class='squarebracket'>]</span>, charT<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> traits, <span class='keyword'>class</span> Allocator<span class='anglebracket'>&gt;</span>
  <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>basic_string<span class='anglebracket'>&lt;</span>charT, traits, Allocator<span class='anglebracket'>&gt;</span>, charT<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> traits<span class='anglebracket'>&gt;</span>
  <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>basic_string_view<span class='anglebracket'>&lt;</span>charT, traits<span class='anglebracket'>&gt;</span>, charT<span class='anglebracket'>&gt;</span>;
</span></li><li id='2.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.3'>(2.3)</a></div><a class='index' id='lib:formatter,specializations,arithmetic_types'></a>For each <span class='texttt'>charT</span>,
for each cv-unqualified arithmetic type <span class='texttt'>ArithmeticT</span>
other than
<span class='texttt'><span class='keyword'>char</span></span>,
<span id=':wchar_t_'><span class='texttt'><span class='keyword'>wchar_<span class='shy'></span>t</span></span></span>,
<span id=':char8_t'><span class='texttt'><span class='keyword'>char8_<span class='shy'></span>t</span></span></span>,
<span id=':char16_t'><span class='texttt'><span class='keyword'>char16_<span class='shy'></span>t</span></span></span>, or
<span id=':char32_t'><span class='texttt'><span class='keyword'>char32_<span class='shy'></span>t</span></span></span>,
a specialization
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>ArithmeticT, charT<span class='anglebracket'>&gt;</span>;
</span></li><li id='2.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#2.4'>(2.4)</a></div><a class='index' id='lib:formatter,specializations,pointer_types'></a><a class='index' id='lib:formatter,specializations,nullptr_t'></a>For each <span class='texttt'>charT</span>,
the pointer type specializations
<span class='codeblock'><span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span>nullptr_t, charT<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>void</span><span class='operator'>*</span>, charT<span class='anglebracket'>&gt;</span>;
<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>void</span><span class='operator'>*</span>, charT<span class='anglebracket'>&gt;</span>;
</span></li></ul>
The <span class='texttt'>parse</span> member functions of these formatters
interpret the format specification
as a <span class='textsf'><i >std-format-spec</i></span>
as described in <a href='format.string.std' title='22.14.2.2&emsp;Standard format specifiers'>[format.<span class='shy'></span>string.<span class='shy'></span>std]</a><a class='hidden_link' href='#2.sentence-4'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='2.sentence-5' class='sentence'>Specializations such as <span class='texttt'>formatter<span class='anglebracket'>&lt;</span><span class='keyword'>wchar_<span class='shy'></span>t</span>, <span class='keyword'>char</span><span class='anglebracket'>&gt;</span></span>
and <span class='texttt'>formatter<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span>, <span class='keyword'>wchar_<span class='shy'></span>t</span><span class='anglebracket'>&gt;</span></span>
that would require implicit
multibyte / wide string or character conversion are disabled<a class='hidden_link' href='#2.sentence-5'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/utilities.tex#L17013'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>For any types <span class='texttt'>T</span> and <span class='texttt'>charT</span> for which
neither the library nor the user provides
an explicit or partial specialization of
the class template <span class='texttt'>formatter</span>,
<span class='texttt'>formatter<span class='anglebracket'>&lt;</span>T, charT<span class='anglebracket'>&gt;</span></span> is disabled<a class='hidden_link' href='#3.sentence-1'>.</a></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/utilities.tex#L17020'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>If the library provides an explicit or partial specialization of
<span class='texttt'>formatter<span class='anglebracket'>&lt;</span>T, charT<span class='anglebracket'>&gt;</span></span>, that specialization is enabled
and meets the <i >Formatter</i> requirements
except as noted otherwise<a class='hidden_link' href='#4.sentence-1'>.</a></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/utilities.tex#L17026'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>If <span class='texttt'>F</span> is a disabled specialization of <span class='texttt'>formatter</span>, these
values are <span class='texttt'><span class='literal'>false</span></span>:
<ul class='itemize'><li id='5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.1'>(5.1)</a></div><span class='texttt'>is_<span class='shy'></span>default_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span></span>,</li><li id='5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.2'>(5.2)</a></div><span class='texttt'>is_<span class='shy'></span>copy_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span></span>,</li><li id='5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.3'>(5.3)</a></div><span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>constructible_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span></span>,</li><li id='5.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.4'>(5.4)</a></div><span class='texttt'>is_<span class='shy'></span>copy_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span></span>, and</li><li id='5.5'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.5'>(5.5)</a></div><span class='texttt'>is_<span class='shy'></span>move_<span class='shy'></span>assignable_<span class='shy'></span>v<span class='anglebracket'>&lt;</span>F<span class='anglebracket'>&gt;</span></span><a class='hidden_link' href='#5.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/8410aac1b84ec161b6990441acde53185f958135/source/utilities.tex#L17037'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>An enabled specialization <span class='texttt'>formatter<span class='anglebracket'>&lt;</span>T, charT<span class='anglebracket'>&gt;</span></span> meets the
<i >BasicFormatter</i> requirements (<a href='formatter.requirements' title='22.14.6.1&emsp;Formatter requirements'>[formatter.<span class='shy'></span>requirements]</a>)<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>format<span class='anglebracket'>&gt;</span>
<span class='preprocessordirective'>#include</span> <span class='anglebracket'>&lt;</span>string<span class='anglebracket'>&gt;</span>

<span class='keyword'>enum</span> color <span class='curlybracket'>{</span> red, green, blue <span class='curlybracket'>}</span>;
<span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span> color_names<span class='squarebracket'>[</span><span class='squarebracket'>]</span> <span class='operator'>=</span> <span class='curlybracket'>{</span> <span class='literal'>"red"</span>, <span class='literal'>"green"</span>, <span class='literal'>"blue"</span> <span class='curlybracket'>}</span>;

<span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='anglebracket'>&gt;</span> <span class='keyword'>struct</span> std<span class='operator'>::</span>formatter<span class='anglebracket'>&lt;</span>color<span class='anglebracket'>&gt;</span> <span class='operator'>:</span> std<span class='operator'>::</span>formatter<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span> <span class='curlybracket'>{</span>
  <span class='keyword'>auto</span> format<span class='parenthesis'>(</span>color c, format_context<span class='operator'>&amp;</span> ctx<span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span>
    <span class='keyword'>return</span> formatter<span class='anglebracket'>&lt;</span><span class='keyword'>const</span> <span class='keyword'>char</span><span class='operator'>*</span><span class='anglebracket'>&gt;</span><span class='operator'>::</span>format<span class='parenthesis'>(</span>color_names<span class='squarebracket'>[</span>c<span class='squarebracket'>]</span>, ctx<span class='parenthesis'>)</span>;
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> err <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;

std<span class='operator'>::</span>string s0 <span class='operator'>=</span> std<span class='operator'>::</span>format<span class='parenthesis'>(</span><span class='literal'>"{}"</span>, <span class='literal'>42</span><span class='parenthesis'>)</span>;         <span class='comment'>// OK, library-provided formatter</span>
std<span class='operator'>::</span>string s1 <span class='operator'>=</span> std<span class='operator'>::</span>format<span class='parenthesis'>(</span><span class='literal'>"{}"</span>, <span class='literal'>L"foo"</span><span class='parenthesis'>)</span>;     <span class='comment'>// error: disabled formatter</span>
std<span class='operator'>::</span>string s2 <span class='operator'>=</span> std<span class='operator'>::</span>format<span class='parenthesis'>(</span><span class='literal'>"{}"</span>, red<span class='parenthesis'>)</span>;        <span class='comment'>// OK, user-provided formatter</span>
std<span class='operator'>::</span>string s3 <span class='operator'>=</span> std<span class='operator'>::</span>format<span class='parenthesis'>(</span><span class='literal'>"{}"</span>, err<span class='curlybracket'>{</span><span class='curlybracket'>}</span><span class='parenthesis'>)</span>;      <span class='comment'>// error: disabled formatter</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>