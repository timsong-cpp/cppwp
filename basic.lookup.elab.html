<!DOCTYPE html><html lang='en'><head><title>[basic.lookup.elab]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>6</a> Basics <a class='abbr_ref' href='./#basic'>[basic]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>6.4</a> Name lookup <a class='abbr_ref' href='basic.lookup#elab'>[basic.lookup]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>6.4.4</a> Elaborated type specifiers <a class='abbr_ref'>[basic.lookup.elab]</a></h3><span class='indexparent'><a class='index' id=':lookup,elaborated_type_specifier'></a></span><span class='indexparent'><a class='index' id=':type_specifier,elaborated'></a></span><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/basic.tex#L2085'>#</a></div><div id='1.sentence-1' class='sentence'>An <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> may be
used to refer to a previously declared <i ><a href='class#nt:class-name'>class-name</a></i> or
<i ><a href='dcl.enum#nt:enum-name'>enum-name</a></i> even though the name has been
<a href='basic.scope.hiding'>hidden</a> by a non-type
declaration<a class='hidden_link' href='#1.sentence-1'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/basic.tex#L2092'>#</a></div><div id='2.sentence-1' class='sentence'>If the <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> has no
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>, and unless the
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> appears in a declaration with the
following form:
<pre class='ncbnf'><i ><a href='class#nt:class-key'>class-key</a></i> <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='lex.name#nt:identifier'>identifier</a></i> <span class='terminal'>;</span>
</pre>
the <i ><a href='lex.name#nt:identifier'>identifier</a></i> is looked up according
to <a href='basic.lookup.unqual'>[basic.lookup.unqual]</a> but ignoring any non-type names that have
been declared<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>If the <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> is introduced
by the <span class='texttt'>enum</span> keyword and this lookup does not find a previously
declared <i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i>, the <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i>
is ill-formed<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>If the <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> is introduced
by the <i ><a href='class#nt:class-key'>class-key</a></i> and this lookup does not find a previously
declared <i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i>, or if the
<i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> appears in a declaration with the
form:
<pre class='ncbnf'><i ><a href='class#nt:class-key'>class-key</a></i> <i ><a href='dcl.attr.grammar#nt:attribute-specifier-seq'>attribute-specifier-seq</a></i><span class="mjx-chtml"><span class="mjx-math" aria-label="Subscript o p t"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span> <i ><a href='lex.name#nt:identifier'>identifier</a></i> <span class='terminal'>;</span>
</pre>
the <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> is a declaration that
introduces the <i ><a href='class#nt:class-name'>class-name</a></i> as described
in <a href='basic.scope.pdecl'>[basic.scope.pdecl]</a><a class='hidden_link' href='#2.sentence-3'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/6d886642cd163af40ae8c5ec4f98f44acfe405f6/source/basic.tex#L2117'>#</a></div><div id='3.sentence-1' class='sentence'>If the <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i> has a
<i ><a href='expr.prim.id.qual#nt:nested-name-specifier'>nested-name-specifier</a></i>, qualified name lookup is performed, as
described in <a href='basic.lookup.qual'>[basic.lookup.qual]</a>, but ignoring any non-type names
that have been declared<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>If the name lookup does not find a previously
declared <i ><a href='dcl.type.simple#nt:type-name'>type-name</a></i>, the <i ><a href='dcl.type.elab#nt:elaborated-type-specifier'>elaborated-type-specifier</a></i>
is ill-formed<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#3.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct Node {
  struct Node* Next;            <span class='comment'>// OK: Refers to <span class='tcode_in_codeblock'>Node</span> at global scope
</span>  struct Data* Data;            <span class='comment'>// OK: Declares type <span class='tcode_in_codeblock'>Data</span> at global scope and member <span class='tcode_in_codeblock'>Data</span>
</span>};

struct Data {
  struct Node* Node;            <span class='comment'>// OK: Refers to <span class='tcode_in_codeblock'>Node</span> at global scope
</span>  friend struct ::Glob;         <span class='comment'>// error: <span class='tcode_in_codeblock'>Glob</span> is not declared, cannot introduce a qualified type (<a href='dcl.type.elab'>[dcl.type.elab]</a>)
</span>  friend struct Glob;           <span class='comment'>// OK: Refers to (as yet) undeclared <span class='tcode_in_codeblock'>Glob</span> at global scope.
</span>  <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span>
};

struct Base {
  struct Data;                  <span class='comment'>// OK: Declares nested <span class='tcode_in_codeblock'>Data</span>
</span>  struct ::Data*     thatData;  <span class='comment'>// OK: Refers to <span class='tcode_in_codeblock'>&#x200b;::&#x200b;Data</span>
</span>  struct Base::Data* thisData;  <span class='comment'>// OK: Refers to nested <span class='tcode_in_codeblock'>Data</span>
</span>  friend class ::Data;          <span class='comment'>// OK: global <span class='tcode_in_codeblock'>Data</span> is a friend
</span>  friend class Data;            <span class='comment'>// OK: nested <span class='tcode_in_codeblock'>Data</span> is a friend
</span>  struct Data { <span class='tcode_in_codeblock'>/* ...&nbsp;*/</span> };    <span class='comment'>// Defines nested <span class='tcode_in_codeblock'>Data</span>
</span>};

struct Data;                    <span class='comment'>// OK: Redeclares <span class='tcode_in_codeblock'>Data</span> at global scope
</span>struct ::Data;                  <span class='comment'>// error: cannot introduce a qualified type (<a href='dcl.type.elab'>[dcl.type.elab]</a>)
</span>struct Base::Data;              <span class='comment'>// error: cannot introduce a qualified type (<a href='dcl.type.elab'>[dcl.type.elab]</a>)
</span>struct Base::Datum;             <span class='comment'>// error: <span class='tcode_in_codeblock'>Datum</span> undefined
</span>struct Base::Data* pBase;       <span class='comment'>// OK: refers to nested <span class='tcode_in_codeblock'>Data</span>
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>   </div></div></body></html>