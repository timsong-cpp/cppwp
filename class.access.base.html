<!DOCTYPE html><html lang='en'><head><title>[class.access.base]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>11</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>11.8</a> Member access control <a class='abbr_ref' href='class.access#base'>[class.access]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>11.8.3</a> Accessibility of base classes and base class members <a class='abbr_ref'>[class.access.base]</a></h3><div class='texpara'><a class='index' id=':access_control,base_class'></a><a class='index' id=':access_specifier'></a><a class='index' id=':base_class,private'></a><a class='index' id=':base_class,protected'></a><a class='index' id=':base_class,public'></a></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1c88b6bdafb2eb128e7da05815f3b30fa52d3710/source/classes.tex#L4528'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>If a class is declared to be a base class (<a href='class.derived' title='11.7&emsp;Derived classes'>[class.<span class='shy'></span>derived]</a>) for another class using the
<span id=':public'><span class='texttt'><span class='keyword'>public</span></span></span>
access specifier, the
public members of the base class are accessible as
public members of the derived class and
protected members of the base class are accessible as
protected members of the derived class<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.sentence-2' class='sentence'>If a class is declared to be a base class for another class using the
<span id=':protected'><span class='texttt'><span class='keyword'>protected</span></span></span>
access specifier, the
public and protected members of the base class are accessible as
protected members of the derived class<a class='hidden_link' href='#1.sentence-2'>.</a></div> <div id='1.sentence-3' class='sentence'>If a class is declared to be a base class for another class using the
<span id=':private'><span class='texttt'><span class='keyword'>private</span></span></span>
access specifier, the
public and protected
members of the base class are accessible as private
members of the derived class<a class='hidden_link' href='#1.sentence-3'>.</a><a class='footnoteref' href='#footnote-105' id='footnoteref-105' title='As specified previously in [class.access], private members of a base class remain inaccessible even to derived classes unless friend declarations within the base class definition are used to grant access explicitly.'>105</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1c88b6bdafb2eb128e7da05815f3b30fa52d3710/source/classes.tex#L4554'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>In the absence of an
<a href='class.derived.general#nt:access-specifier' title='11.7.1&emsp;General&emsp;[class.derived.general]'><span id='ntref:access-specifier'><span class='textsf'><i >access-specifier</i></span></span></a>
for a base class,
<span id=':public_'><span class='texttt'><span class='keyword'>public</span></span></span>
is assumed when the derived class is
defined with the <a href='class.pre#nt:class-key' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-key'><span class='textsf'><i >class-key</i></span></span></a>
<span id=':struct'><span class='texttt'><span class='keyword'>struct</span></span></span>
and
<span id=':private_'><span class='texttt'><span class='keyword'>private</span></span></span>
is assumed when the class is
defined with the <a href='class.pre#nt:class-key' title='11.1&emsp;Preamble&emsp;[class.pre]'><span id='ntref:class-key_'><span class='textsf'><i >class-key</i></span></span></a>
<span id=':class'><span class='texttt'><span class='keyword'>class</span></span></span><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>: <span class='codeblock'><span class='keyword'>class</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> D1 <span class='operator'>:</span> <span class='keyword'>private</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> D2 <span class='operator'>:</span> <span class='keyword'>public</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>class</span> D3 <span class='operator'>:</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;             <span class='comment'>// <span class='tcode_in_codeblock'>B</span> private by default</span>
<span class='keyword'>struct</span> D4 <span class='operator'>:</span> <span class='keyword'>public</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D5 <span class='operator'>:</span> <span class='keyword'>private</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D6 <span class='operator'>:</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;            <span class='comment'>// <span class='tcode_in_codeblock'>B</span> public by default</span>
<span class='keyword'>class</span> D7 <span class='operator'>:</span> <span class='keyword'>protected</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> D8 <span class='operator'>:</span> <span class='keyword'>protected</span> B <span class='curlybracket'>{</span> <span class='comment'>/* ... */</span> <span class='curlybracket'>}</span>;
</span></div><div class='texpara'><div id='2.sentence-2' class='sentence'>Here
<span class='texttt'>B</span>
is a public base of
<span class='texttt'>D2</span>,
<span class='texttt'>D4</span>,
and
<span class='texttt'>D6</span>,
a private base of
<span class='texttt'>D1</span>,
<span class='texttt'>D3</span>,
and
<span class='texttt'>D5</span>,
and a protected base of
<span class='texttt'>D7</span>
and
<span class='texttt'>D8</span><a class='hidden_link' href='#2.sentence-2'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para nonNormativeOnly' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1c88b6bdafb2eb128e7da05815f3b30fa52d3710/source/classes.tex#L4598'>#</a></div><div class='texpara'><div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>: <div id='3.sentence-1' class='sentence'>A member of a private base class can be inaccessible as inherited,
but accessible directly<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>Because of the rules on pointer conversions (<a href='conv.ptr' title='7.3.12&emsp;Pointer conversions'>[conv.<span class='shy'></span>ptr]</a>) and
explicit casts (<a href='expr.type.conv' title='7.6.1.4&emsp;Explicit type conversion (functional notation)'>[expr.<span class='shy'></span>type.<span class='shy'></span>conv]</a>, <a href='expr.static.cast' title='7.6.1.9&emsp;Static cast'>[expr.<span class='shy'></span>static.<span class='shy'></span>cast]</a>, <a href='expr.cast' title='7.6.3&emsp;Explicit type conversion (cast notation)'>[expr.<span class='shy'></span>cast]</a>),
a conversion from a pointer to a derived class to a pointer
to an inaccessible base class can be ill-formed if an implicit conversion
is used, but well-formed if an explicit cast is used<a class='hidden_link' href='#3.sentence-2'>.</a></div> <div id='3.sentence-3' class='sentence'>For example,</div></div><div class='texpara'><span class='codeblock'><span class='keyword'>class</span> B <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>int</span> mi;                       <span class='comment'>// non-static member</span>
  <span class='keyword'>static</span> <span class='keyword'>int</span> si;                <span class='comment'>// static member</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>class</span> D <span class='operator'>:</span> <span class='keyword'>private</span> B <span class='curlybracket'>{</span>
<span class='curlybracket'>}</span>;
<span class='keyword'>class</span> DD <span class='operator'>:</span> <span class='keyword'>public</span> D <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> DD<span class='operator'>::</span>f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  mi <span class='operator'>=</span> <span class='literal'>3</span>;                       <span class='comment'>// error: <span class='tcode_in_codeblock'>mi</span> is private in <span class='tcode_in_codeblock'>D</span></span>
  si <span class='operator'>=</span> <span class='literal'>3</span>;                       <span class='comment'>// error: <span class='tcode_in_codeblock'>si</span> is private in <span class='tcode_in_codeblock'>D</span></span>
  <span class='operator'>::</span>B  b;
  b<span class='operator'>.</span>mi <span class='operator'>=</span> <span class='literal'>3</span>;                     <span class='comment'>// OK (<span class='tcode_in_codeblock'>b.mi</span> is different from <span class='tcode_in_codeblock'>this-&gt;mi</span>)</span>
  b<span class='operator'>.</span>si <span class='operator'>=</span> <span class='literal'>3</span>;                     <span class='comment'>// OK (<span class='tcode_in_codeblock'>b.si</span> is different from <span class='tcode_in_codeblock'>this-&gt;si</span>)</span>
  <span class='operator'>::</span>B<span class='operator'>::</span>si <span class='operator'>=</span> <span class='literal'>3</span>;                  <span class='comment'>// OK</span>
  <span class='operator'>::</span>B<span class='operator'>*</span> bp1 <span class='operator'>=</span> <span class='keyword'>this</span>;              <span class='comment'>// error: <span class='tcode_in_codeblock'>B</span> is a private base class</span>
  <span class='operator'>::</span>B<span class='operator'>*</span> bp2 <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='operator'>::</span>B<span class='operator'>*</span><span class='parenthesis'>)</span><span class='keyword'>this</span>;        <span class='comment'>// OK with cast</span>
  bp2<span class='operator'>-</span><span class='anglebracket'>&gt;</span>mi <span class='operator'>=</span> <span class='literal'>3</span>;                  <span class='comment'>// OK, access through a pointer to <span class='tcode_in_codeblock'>B</span>.</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1c88b6bdafb2eb128e7da05815f3b30fa52d3710/source/classes.tex#L4635'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>A base class
<span class='texttt'>B</span>
of
<span class='texttt'>N</span>
is
<a class='hidden_link' href='#def:accessible' title='11.8.3&emsp;Accessibility of base classes and base class members&emsp;[class.access.base]'><span id='def:accessible'><i >accessible</i></span></a>
at
<i >R</i>,
if
<ul class='itemize'><li id='4.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.1'>(4.1)</a></div>an invented public member of
<span class='texttt'>B</span>
would be a public member of
<span class='texttt'>N</span>, or</li><li id='4.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.2'>(4.2)</a></div><i >R</i>
occurs in a direct member or friend of class
<span class='texttt'>N</span>,
and an invented public member of
<span class='texttt'>B</span>
would be a private or protected member of
<span class='texttt'>N</span>, or</li><li id='4.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.3'>(4.3)</a></div><i >R</i>
occurs in a direct member or friend of a class
<span class='texttt'>P</span>
derived from
<span class='texttt'>N</span>,
and an invented public member of
<span class='texttt'>B</span>
would be a private or protected member of
<span class='texttt'>P</span>, or</li><li id='4.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#4.4'>(4.4)</a></div>there exists a class
<span class='texttt'>S</span>
such that
<span class='texttt'>B</span>
is a base class of
<span class='texttt'>S</span>
accessible at
<i >R</i>
and
<span class='texttt'>S</span>
is a base class of
<span class='texttt'>N</span>
accessible at
<i >R</i><a class='hidden_link' href='#4.sentence-1'>.</a></li></ul></div></div><div class='texpara'><div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>: <span class='codeblock'><span class='keyword'>class</span> B <span class='curlybracket'>{</span>
<span class='keyword'>public</span><span class='operator'>:</span>
  <span class='keyword'>int</span> m;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> S<span class='operator'>:</span> <span class='keyword'>private</span> B <span class='curlybracket'>{</span>
  <span class='keyword'>friend</span> <span class='keyword'>class</span> N;
<span class='curlybracket'>}</span>;

<span class='keyword'>class</span> N<span class='operator'>:</span> <span class='keyword'>private</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>void</span> f<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
    B<span class='operator'>*</span> p <span class='operator'>=</span> <span class='keyword'>this</span>;    <span class='comment'>// OK because class <span class='tcode_in_codeblock'>S</span> satisfies the fourth condition above: <span class='tcode_in_codeblock'>B</span> is a base class of <span class='tcode_in_codeblock'>N</span></span>
                    <span class='comment'>// accessible in <span class='tcode_in_codeblock'>f()</span> because <span class='tcode_in_codeblock'>B</span> is an accessible base class of <span class='tcode_in_codeblock'>S</span> and <span class='tcode_in_codeblock'>S</span> is an accessible</span>
                    <span class='comment'>// base class of <span class='tcode_in_codeblock'>N</span>.</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1c88b6bdafb2eb128e7da05815f3b30fa52d3710/source/classes.tex#L4707'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>If a base class is accessible, one can implicitly convert a pointer to
a derived class to a pointer to that base class (<a href='conv.ptr' title='7.3.12&emsp;Pointer conversions'>[conv.<span class='shy'></span>ptr]</a>, <a href='conv.mem' title='7.3.13&emsp;Pointer-to-member conversions'>[conv.<span class='shy'></span>mem]</a>)<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>: <div id='5.sentence-2' class='sentence'>It follows that
members and friends of a class
<span class='texttt'>X</span>
can implicitly convert an
<span class='texttt'>X<span class='operator'>*</span></span>
to a pointer to a private or protected immediate base class of
<span class='texttt'>X</span><a class='hidden_link' href='#5.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='5.sentence-3' class='sentence'>
The access to a member is affected by the class in which the member is
named<a class='hidden_link' href='#5.sentence-3'>.</a></div> <div id='5.sentence-4' class='sentence'>This naming class is
the class in whose scope name lookup performed a search that found the member<a class='hidden_link' href='#5.sentence-4'>.</a></div> <div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>: <div id='5.sentence-5' class='sentence'>This class can be explicit, e.g., when a
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id'><span class='textsf'><i >qualified-id</i></span></span></a>
is used, or implicit, e.g., when a class member access operator (<a href='expr.ref' title='7.6.1.5&emsp;Class member access'>[expr.<span class='shy'></span>ref]</a>) is used (including cases where an implicit
“<span class='texttt'><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span></span>”
is
added)<a class='hidden_link' href='#5.sentence-5'>.</a></div> <div id='5.sentence-6' class='sentence'>If both a class member access operator and a
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id_'><span class='textsf'><i >qualified-id</i></span></span></a>
are used to name the member (as in
<span class='texttt'>p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>T<span class='operator'>&#x200b;::&#x200b;</span>m</span>),
the class naming the member is the class denoted by the
<a href='expr.prim.id.qual#nt:nested-name-specifier' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:nested-name-specifier'><span class='textsf'><i >nested-name-specifier</i></span></span></a>
of the
<a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id__'><span class='textsf'><i >qualified-id</i></span></span></a>
(that is,
<span class='texttt'>T</span>)<a class='hidden_link' href='#5.sentence-6'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='5.sentence-7' class='sentence'>
A member
<span class='texttt'>m</span>
is accessible at the point
<i >R</i>
when named in class
<span class='texttt'>N</span>
if
<ul class='itemize'><li id='5.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.1'>(5.1)</a></div><span class='texttt'>m</span>
as a member of
<span class='texttt'>N</span>
is public, or</li><li id='5.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.2'>(5.2)</a></div><span class='texttt'>m</span>
as a member of
<span class='texttt'>N</span>
is private, and
<i >R</i>
occurs in a direct member or friend of class
<span class='texttt'>N</span>,
or</li><li id='5.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.3'>(5.3)</a></div><span class='texttt'>m</span>
as a member of
<span class='texttt'>N</span>
is protected, and
<i >R</i>
occurs in a direct member or friend of class
<span class='texttt'>N</span>,
or in a member of a class
<span class='texttt'>P</span>
derived from
<span class='texttt'>N</span>,
where
<span class='texttt'>m</span>
as a member of
<span class='texttt'>P</span>
is public, private, or protected, or</li><li id='5.4'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#5.4'>(5.4)</a></div>there exists a base class
<span class='texttt'>B</span>
of
<span class='texttt'>N</span>
that is accessible at
<i >R</i>,
and
<span class='texttt'>m</span>
is accessible at
<i >R</i>
when named in class
<span class='texttt'>B</span><a class='hidden_link' href='#5.sentence-7'>.</a> <div class='texpara'><div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>: <span class='codeblock'><span class='keyword'>class</span> B;
<span class='keyword'>class</span> A <span class='curlybracket'>{</span>
<span class='keyword'>private</span><span class='operator'>:</span>
  <span class='keyword'>int</span> i;
  <span class='keyword'>friend</span> <span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='operator'>*</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;
<span class='keyword'>class</span> B <span class='operator'>:</span> <span class='keyword'>public</span> A <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>void</span> f<span class='parenthesis'>(</span>B<span class='operator'>*</span> p<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  p<span class='operator'>-</span><span class='anglebracket'>&gt;</span>i <span class='operator'>=</span> <span class='literal'>1</span>;         <span class='comment'>// OK, <span class='tcode_in_codeblock'>B*</span> can be implicitly converted to <span class='tcode_in_codeblock'>A*</span>, and <span class='tcode_in_codeblock'>f</span> has access to <span class='tcode_in_codeblock'>i</span> in <span class='tcode_in_codeblock'>A</span></span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></li></ul></div></div></div><div class='para' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/1c88b6bdafb2eb128e7da05815f3b30fa52d3710/source/classes.tex#L4809'>#</a></div><div class='texpara'><div id='6.sentence-1' class='sentence'>If a class member access operator, including an implicit
“<span class='texttt'><span class='keyword'>this</span><span class='operator'>-</span><span class='anglebracket'>&gt;</span></span>”,
is used to access a non-static data member or non-static
member function, the reference is ill-formed if the
left operand (considered as a pointer in the
“<span class='texttt'><span class='operator'>.</span></span>”
operator case) cannot be implicitly converted to a
pointer to the naming class of the right operand<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='note-4' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-4'>4</a></i>: <div id='6.sentence-2' class='sentence'>This requirement is in addition to the requirement that
the member be accessible as named<a class='hidden_link' href='#6.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='footnoteSeparator'></div><div class='footnote' id='footnote-105'><div class='texpara'><a class='footnotenum' href='#footnote-105'>105)</a><a class='footnoteBacklink' href='#footnoteref-105'>105)</a> <div id='footnote-105.sentence-1' class='sentence'>As specified previously in <a href='class.access' title='11.8&emsp;Member access control'>[class.<span class='shy'></span>access]</a>,
private members of a base class remain inaccessible even to derived classes
unless friend
declarations within the base class definition are used to grant access explicitly<a class='hidden_link' href='#footnote-105.sentence-1'>.</a></div></div></div></div></body></html>