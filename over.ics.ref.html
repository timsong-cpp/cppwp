<!DOCTYPE html><html lang='en'><head><title>[over.ics.ref]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Notes and examples expanded'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='collapsed.css' title='Notes and examples collapsed'/><link rel='icon' href='icon.png'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:73pt'>16</a> Overloading <a class='abbr_ref' href='./#over'>[over]</a></h1><h2 ><a class='secnum' style='min-width:88pt'>16.3</a> Overload resolution <a class='abbr_ref' href='over.match#over.ics.ref'>[over.match]</a></h2><h3 ><a class='secnum' style='min-width:103pt'>16.3.3</a> Best viable function <a class='abbr_ref' href='over.match.best#over.ics.ref'>[over.match.best]</a></h3><h4 ><a class='secnum' style='min-width:118pt'>16.3.3.1</a> Implicit conversion sequences <a class='abbr_ref' href='over.best.ics#over.ics.ref'>[over.best.ics]</a></h4><h4 ><a class='secnum' style='min-width:133pt'>16.3.3.1.4</a> Reference binding <a class='abbr_ref'>[over.ics.ref]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3b306cd7198c3d7657620c1f448bdef04c98dc0e/source/overloading.tex#L2196'>#</a></div><div id='1.sentence-1' class='sentence'>When a parameter of reference type <a href='dcl.init.ref'>binds directly</a> to an
argument expression, the implicit conversion sequence is the identity conversion,
unless the argument expression has a type that is a derived class of the parameter
type, in which case the implicit conversion sequence is a derived-to-base
Conversion (<a href='over.best.ics'>[over.best.ics]</a>)<a class='hidden_link' href='#1.sentence-1'>.</a></div> <div id='1.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#1.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <pre class='codeblock'>
struct A {};
struct B : public A {} b;
int f(A&amp;);
int f(B&amp;);
int i = f(b);       <span class='comment'>// calls <span class='tcode_in_codeblock'>f(B&amp;)</span>, an exact match, rather than <span class='tcode_in_codeblock'>f(A&amp;)</span>, a conversion
</span></pre> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div>  <div id='1.sentence-2' class='sentence'>
If the parameter binds directly to the result of
applying a conversion function to the argument expression, the implicit
conversion sequence is a <a href='over.ics.user'>user-defined conversion sequence</a>,
with the second standard conversion sequence either an identity conversion or,
if the conversion function returns an entity of a type that is a derived class
of the parameter type, a derived-to-base Conversion<a class='hidden_link' href='#1.sentence-2'>.</a></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3b306cd7198c3d7657620c1f448bdef04c98dc0e/source/overloading.tex#L2219'>#</a></div><div id='2.sentence-1' class='sentence'>When a parameter of reference type is not bound directly to an argument
expression, the conversion sequence is the one required to convert the argument
expression to the referenced type according to <a href='over.best.ics'>[over.best.ics]</a><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Conceptually, this conversion sequence corresponds to copy-initializing a
temporary of the referenced type with the argument expression<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>Any difference
in top-level cv-qualification is subsumed by the initialization itself and
does not constitute a conversion<a class='hidden_link' href='#2.sentence-3'>.</a></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3b306cd7198c3d7657620c1f448bdef04c98dc0e/source/overloading.tex#L2229'>#</a></div><div id='3.sentence-1' class='sentence'>Except for an implicit object parameter, for which see <a href='over.match.funcs'>[over.match.funcs]</a>, a
standard conversion sequence cannot be formed if it requires
binding an lvalue reference
other than a reference to a non-volatile <span class='texttt'>const</span> type
to an rvalue
or binding an rvalue reference to an lvalue other than a function lvalue<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.note-1' class='note'>[<span style='white-space:nowrap'> </span><a class='note_link' href='#3.note-1'><span class='textit'>Note</span></a><div class='noteBody'><span class='textit'>:</span> <div id='3.sentence-2' class='sentence'>This means, for example, that a candidate function cannot be a viable
function if it has a non-<span class='texttt'>const</span> lvalue reference parameter (other than
the implicit object parameter) and the corresponding argument
would require a temporary to be created to initialize the lvalue
reference (see <a href='dcl.init.ref'>[dcl.init.ref]</a>)<a class='hidden_link' href='#3.sentence-2'>.</a></div> —<span style='white-space:nowrap'> </span><i>end note</i></div><span style='white-space:nowrap'> </span>]</div> </div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/3b306cd7198c3d7657620c1f448bdef04c98dc0e/source/overloading.tex#L2244'>#</a></div><div id='4.sentence-1' class='sentence'>Other restrictions on binding a reference to a particular argument
that are not based on the types of the reference and the argument
do not affect the formation of a standard conversion
sequence, however<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.example-1' class='example'>[<span style='white-space:nowrap'> </span><a class='example_link' href='#4.example-1'><span class='textit'>Example</span></a><div class='exampleBody'><span class='textit'>:</span> <div id='4.sentence-2' class='sentence'>A function with an “lvalue reference to <span class='texttt'>int</span>” parameter can
be a viable candidate even if the corresponding argument is an
<span class='texttt'>int</span>
bit-field<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>The formation of implicit conversion sequences
treats the
<span class='texttt'>int</span>
bit-field as an
<span class='texttt'>int</span>
lvalue and finds an exact
match with the parameter<a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='4.sentence-4' class='sentence'>If the function is selected by overload
resolution, the call will nonetheless be ill-formed because of
the prohibition on binding a non-<span class='texttt'>const</span> lvalue reference to a bit-field (<a href='dcl.init.ref'>[dcl.init.ref]</a>)<a class='hidden_link' href='#4.sentence-4'>.</a></div> —<span style='white-space:nowrap'> </span><i>end example</i></div><span style='white-space:nowrap'> </span>]</div> </div></div></body></html>