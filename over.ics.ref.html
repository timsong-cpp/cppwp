<!DOCTYPE html><html lang='en'><head><title>[over.ics.ref]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>12</a> Overloading <a class='abbr_ref' href='./#over'>[over]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>12.2</a> Overload resolution <a class='abbr_ref' href='over.match#over.ics.ref'>[over.match]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>12.2.4</a> Best viable function <a class='abbr_ref' href='over.match.best#over.ics.ref'>[over.match.best]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>12.2.4.2</a> Implicit conversion sequences <a class='abbr_ref' href='over.best.ics#over.ics.ref'>[over.best.ics]</a></h4><h4 ><a class='secnum' style='min-width:110pt'>12.2.4.2.5</a> Reference binding <a class='abbr_ref'>[over.ics.ref]</a></h4><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/overloading.tex#L2313'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>When a parameter of type “reference to <span class='mathit'>cv</span><span class='texttt'>T</span>”
binds directly (<a href='dcl.init.ref' title='9.4.4&emsp;References'>[dcl.<span class='shy'></span>init.<span class='shy'></span>ref]</a>) to an argument expression:
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.1'>(1.1)</a></div><div class='texpara'><div id='1.1.sentence-1' class='sentence'>If the argument expression has a type that
is a derived class of the parameter type,
the implicit conversion sequence is a derived-to-base
conversion (<a href='over.best.ics' title='12.2.4.2&emsp;Implicit conversion sequences'>[over.<span class='shy'></span>best.<span class='shy'></span>ics]</a>)<a class='hidden_link' href='#1.1.sentence-1'>.</a></div></div></li><li id='1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.2'>(1.2)</a></div><div class='texpara'><div id='1.2.sentence-1' class='sentence'>Otherwise,
if <span class='texttt'>T</span> is a function type, or
if the type of the argument is possibly cv-qualified <span class='texttt'>T</span>, or
if <span class='texttt'>T</span> is an array type of unknown bound with element type <span class='texttt'>U</span> and
the argument has an array type of known bound whose
element type is possibly cv-qualified <span class='texttt'>U</span>,
the implicit conversion sequence is the identity conversion<a class='hidden_link' href='#1.2.sentence-1'>.</a></div> <div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='1.2.sentence-2' class='sentence'>When <span class='texttt'>T</span> is a function type,
the type of the argument can differ only by the presence of <span id=':noexcept'><span class='texttt'><span class='keyword'>noexcept</span></span></span><a class='hidden_link' href='#1.2.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></li><li id='1.3'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.3'>(1.3)</a></div><div class='texpara'><div id='1.3.sentence-1' class='sentence'>Otherwise, the implicit conversion sequence is a qualification conversion<a class='hidden_link' href='#1.3.sentence-1'>.</a></div></div></li></ul></div></div><div class='texpara'><div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> B <span class='operator'>:</span> <span class='keyword'>public</span> A <span class='curlybracket'>{</span><span class='curlybracket'>}</span> b;
<span class='keyword'>int</span> f<span class='parenthesis'>(</span>A<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> f<span class='parenthesis'>(</span>B<span class='operator'>&amp;</span><span class='parenthesis'>)</span>;
<span class='keyword'>int</span> i <span class='operator'>=</span> f<span class='parenthesis'>(</span>b<span class='parenthesis'>)</span>;       <span class='comment'>// calls <span class='tcode_in_codeblock'>f(B&amp;)</span>, an exact match, rather than <span class='tcode_in_codeblock'>f(A&amp;)</span>, a conversion</span>
</span> —&nbsp;<i>end example</i>]</div></div> <div id='1.sentence-2' class='sentence'>
If the parameter binds directly to the result of
applying a conversion function to the argument expression, the implicit
conversion sequence is a user-defined conversion sequence (<a href='over.ics.user' title='12.2.4.2.3&emsp;User-defined conversion sequences'>[over.<span class='shy'></span>ics.<span class='shy'></span>user]</a>)
whose second standard conversion sequence is
determined by the above rules<a class='hidden_link' href='#1.sentence-2'>.</a></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/overloading.tex#L2355'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>When a parameter of reference type is not bound directly to an argument
expression, the conversion sequence is the one required to convert the argument
expression to the referenced type according to <a href='over.best.ics' title='12.2.4.2&emsp;Implicit conversion sequences'>[over.<span class='shy'></span>best.<span class='shy'></span>ics]</a><a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>Conceptually, this conversion sequence corresponds to copy-initializing a
temporary of the referenced type with the argument expression<a class='hidden_link' href='#2.sentence-2'>.</a></div> <div id='2.sentence-3' class='sentence'>Any difference
in top-level cv-qualification is subsumed by the initialization itself and
does not constitute a conversion<a class='hidden_link' href='#2.sentence-3'>.</a></div></div></div><div class='para' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/overloading.tex#L2365'>#</a></div><div class='texpara'><div id='3.sentence-1' class='sentence'>Except for an implicit object parameter, for which see <a href='over.match.funcs' title='12.2.2&emsp;Candidate functions and argument lists'>[over.<span class='shy'></span>match.<span class='shy'></span>funcs]</a>,
an implicit conversion sequence cannot be formed if it requires
binding an lvalue reference
other than a reference to a non-volatile <span id=':const'><span class='texttt'><span class='keyword'>const</span></span></span> type
to an rvalue
or binding an rvalue reference to an lvalue of object type<a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='3.sentence-2' class='sentence'>This means, for example, that a candidate function cannot be a viable
function if it has a non-<span id=':const_'><span class='texttt'><span class='keyword'>const</span></span></span> lvalue reference parameter (other than
the implicit object parameter) and the corresponding argument
would require a temporary to be created to initialize the lvalue
reference (see <a href='dcl.init.ref' title='9.4.4&emsp;References'>[dcl.<span class='shy'></span>init.<span class='shy'></span>ref]</a>)<a class='hidden_link' href='#3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/9243ba5befaea8fd3e878e6114942db8d556a6e0/source/overloading.tex#L2380'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>Other restrictions on binding a reference to a particular argument
that are not based on the types of the reference and the argument
do not affect the formation of an implicit conversion
sequence, however<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<div id='4.sentence-2' class='sentence'>A function with an “lvalue reference to <span class='texttt'><span class='keyword'>int</span></span>” parameter can
be a viable candidate even if the corresponding argument is an
<span class='texttt'><span class='keyword'>int</span></span>
bit-field<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='4.sentence-3' class='sentence'>The formation of implicit conversion sequences
treats the
<span class='texttt'><span class='keyword'>int</span></span>
bit-field as an
<span class='texttt'><span class='keyword'>int</span></span>
lvalue and finds an exact
match with the parameter<a class='hidden_link' href='#4.sentence-3'>.</a></div> <div id='4.sentence-4' class='sentence'>If the function is selected by overload
resolution, the call will nonetheless be ill-formed because of
the prohibition on binding a non-<span id=':const__'><span class='texttt'><span class='keyword'>const</span></span></span> lvalue reference to a bit-field (<a href='dcl.init.ref' title='9.4.4&emsp;References'>[dcl.<span class='shy'></span>init.<span class='shy'></span>ref]</a>)<a class='hidden_link' href='#4.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>