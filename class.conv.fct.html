<!DOCTYPE html><html lang='en'><head><title>[class.conv.fct]</title><meta charset='UTF-8'/><link rel='stylesheet' type='text/css' href='14882.css'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Serif'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans'/><link rel='stylesheet' type='text/css' href='https://fonts.googleapis.com/css2?family=Noto+Sans+Mono'/><link rel='icon' href='icon.png'/><link rel='stylesheet' type='text/css' href='expanded.css' title='Normal'/><link rel='alternate stylesheet' type='text/css' href='colored.css' title='Notes and examples colored'/><link rel='alternate stylesheet' type='text/css' href='normative-only.css' title='Notes and examples hidden'/></head><body><div class='wrapper'><h1 ><a class='secnum' style='min-width:50pt'>11</a> Classes <a class='abbr_ref' href='./#class'>[class]</a></h1><h2 ><a class='secnum' style='min-width:65pt'>11.4</a> Class members <a class='abbr_ref' href='class.mem#class.conv.fct'>[class.mem]</a></h2><h3 ><a class='secnum' style='min-width:80pt'>11.4.8</a> Conversions <a class='abbr_ref' href='class.conv#fct'>[class.conv]</a></h3><h4 ><a class='secnum' style='min-width:95pt'>11.4.8.3</a> Conversion functions <a class='abbr_ref'>[class.conv.fct]</a></h4><div class='texpara'><a class='index' id=':function,conversion'></a><a class='index' id=':conversion,user-defined'></a>
<div class='bnf' id='nt:conversion-function-id'>
<a class='hidden_link' href='#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='nt:conversion-function-id'><span id=':conversion-function-id'>conversion-function-id<span class='textnormal'>:</span></span></span></a><br/><span id=':operator'><span class='texttt'><span class='keyword'>operator</span></span></span> <a href='#nt:conversion-type-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-type-id'><span class='textsf'><i >conversion-type-id</i></span></span></a>
</div></div><div class='texpara'><div class='bnf' id='nt:conversion-type-id'>
<a class='hidden_link' href='#nt:conversion-type-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='nt:conversion-type-id'><span id=':conversion-type-id'>conversion-type-id<span class='textnormal'>:</span></span></span></a><br/><a href='dcl.type.general#nt:type-specifier-seq' title='9.2.9.1&emsp;General&emsp;[dcl.type.general]'><span id='ntref:type-specifier-seq'><span class='textsf'><i >type-specifier-seq</i></span></span></a> <a href='#nt:conversion-declarator' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-declarator'><span class='textsf'><i >conversion-declarator</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</div></div><div class='texpara'><div class='bnf' id='nt:conversion-declarator'>
<a class='hidden_link' href='#nt:conversion-declarator' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='nt:conversion-declarator'><span id=':conversion-declarator'>conversion-declarator<span class='textnormal'>:</span></span></span></a><br/><a href='dcl.decl.general#nt:ptr-operator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:ptr-operator'><span class='textsf'><i >ptr-operator</i></span></span></a> <a href='#nt:conversion-declarator' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-declarator_'><span class='textsf'><i >conversion-declarator</i></span></span></a><span class="mjx-chtml"><span class="mjx-math"><span class="mjx-mrow" aria-hidden="true"><span class="mjx-msubsup"><span class="mjx-base"><span class="mjx-mi"><span class="mjx-char"></span></span></span><span class="mjx-sub" style="font-size: 70.7%; vertical-align: -0.212em; padding-right: 0.071em;"><span class="mjx-texatom"><span class="mjx-mrow"><span class="mjx-mstyle" style="font-size: 113.1%; color: black;"><span class="mjx-mrow" style="font-size: 88.4%;"><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.298em;">o</span></span></span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.225em; padding-bottom: 0.446em;">p</span></span><span class="mjx-mi"><span class="mjx-char MJXc-TeX-main-I" style="padding-top: 0.372em; padding-bottom: 0.298em;">t</span></span></span></span></span></span></span></span></span>
</div></div><div class='para' id='1'><div class='marginalizedparent'><a class='marginalized' href='#1'>1</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/classes.tex#L2406'>#</a></div><div class='texpara'><div id='1.sentence-1' class='sentence'>A declaration
whose <a href='dcl.decl.general#nt:declarator-id' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator-id'><span class='textsf'><i >declarator-id</i></span></span></a> has
an <a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.4.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id'><span class='textsf'><i >unqualified-id</i></span></span></a> that is a <a href='#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id'><span class='textsf'><i >conversion-function-id</i></span></span></a>
declares a <a class='hidden_link' href='#def:function,conversion' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='def:function,conversion'><i >conversion function</i></span></a>;
its <a href='dcl.decl.general#nt:declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:declarator'><span class='textsf'><i >declarator</i></span></span></a> shall be
a function declarator (<a href='dcl.fct' title='9.3.4.6&emsp;Functions'>[dcl.<span class='shy'></span>fct]</a>) of the form
<div class='simplebnf'>
<a href='dcl.decl.general#nt:noptr-declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:noptr-declarator'><span class='textsf'><i >noptr-declarator</i></span></span></a> <a href='dcl.decl.general#nt:parameters-and-qualifiers' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:parameters-and-qualifiers'><span class='textsf'><i >parameters-and-qualifiers</i></span></span></a>
</div>
where the <a href='dcl.decl.general#nt:noptr-declarator' title='9.3.1&emsp;General&emsp;[dcl.decl.general]'><span id='ntref:noptr-declarator_'><span class='textsf'><i >noptr-declarator</i></span></span></a> consists solely of
an <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression'><span class='textsf'><i >id-expression</i></span></span></a>,
an optional <a href='dcl.attr.grammar#nt:attribute-specifier-seq' title='9.12.1&emsp;Attribute syntax and semantics&emsp;[dcl.attr.grammar]'><span id='ntref:attribute-specifier-seq'><span class='textsf'><i >attribute-specifier-seq</i></span></span></a>, and
optional surrounding parentheses, and
the <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression_'><span class='textsf'><i >id-expression</i></span></span></a> has one of the following forms:
<ul class='itemize'><li id='1.1'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.1'>(1.1)</a></div>in a <a href='class.mem.general#nt:member-declaration' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:member-declaration'><span class='textsf'><i >member-declaration</i></span></span></a> that belongs to
the <a href='class.mem.general#nt:member-specification' title='11.4.1&emsp;General&emsp;[class.mem.general]'><span id='ntref:member-specification'><span class='textsf'><i >member-specification</i></span></span></a> of a class or class template
but is not a friend declaration (<a href='class.friend' title='11.8.4&emsp;Friends'>[class.<span class='shy'></span>friend]</a>),
the <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression__'><span class='textsf'><i >id-expression</i></span></span></a> is a <a href='#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id_'><span class='textsf'><i >conversion-function-id</i></span></span></a>;</li><li id='1.2'><div class='marginalizedparent' style='left:-27mm'><a class='marginalized' href='#1.2'>(1.2)</a></div>otherwise, the <a href='expr.prim.id.general#nt:id-expression' title='7.5.4.1&emsp;General&emsp;[expr.prim.id.general]'><span id='ntref:id-expression___'><span class='textsf'><i >id-expression</i></span></span></a> is a <a href='expr.prim.id.qual#nt:qualified-id' title='7.5.4.3&emsp;Qualified names&emsp;[expr.prim.id.qual]'><span id='ntref:qualified-id'><span class='textsf'><i >qualified-id</i></span></span></a>
whose <a href='expr.prim.id.unqual#nt:unqualified-id' title='7.5.4.2&emsp;Unqualified names&emsp;[expr.prim.id.unqual]'><span id='ntref:unqualified-id_'><span class='textsf'><i >unqualified-id</i></span></span></a> is a <a href='#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id__'><span class='textsf'><i >conversion-function-id</i></span></span></a><a class='hidden_link' href='#1.sentence-1'>.</a></li></ul></div></div></div><div class='para' id='2'><div class='marginalizedparent'><a class='marginalized' href='#2'>2</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/classes.tex#L2432'>#</a></div><div class='texpara'><div id='2.sentence-1' class='sentence'>A conversion function  shall have no non-object parameters and
shall be a non-static member function of a class or class template <span class='texttt'>X</span>;
its declared return type is the <a href='#nt:conversion-type-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-type-id_'><span class='textsf'><i >conversion-type-id</i></span></span></a> and
it specifies a conversion from <span class='texttt'>X</span> to
the type specified by the <a href='#nt:conversion-type-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-type-id__'><span class='textsf'><i >conversion-type-id</i></span></span></a>,
interpreted as a <a href='dcl.name#nt:type-id' title='9.3.2&emsp;Type names&emsp;[dcl.name]'><span id='ntref:type-id'><span class='textsf'><i >type-id</i></span></span></a> (<a href='dcl.name' title='9.3.2&emsp;Type names'>[dcl.<span class='shy'></span>name]</a>)<a class='hidden_link' href='#2.sentence-1'>.</a></div> <div id='2.sentence-2' class='sentence'>A <a href='dcl.spec.general#nt:decl-specifier' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier'><span class='textsf'><i >decl-specifier</i></span></span></a> in the <a href='dcl.spec.general#nt:decl-specifier-seq' title='9.2.1&emsp;General&emsp;[dcl.spec.general]'><span id='ntref:decl-specifier-seq'><span class='textsf'><i >decl-specifier-seq</i></span></span></a>
of a conversion function (if any) shall not be
a <a href='dcl.type.general#nt:defining-type-specifier' title='9.2.9.1&emsp;General&emsp;[dcl.type.general]'><span id='ntref:defining-type-specifier'><span class='textsf'><i >defining-type-specifier</i></span></span></a><a class='hidden_link' href='#2.sentence-2'>.</a></div></div></div><div class='para nonNormativeOnly' id='3'><div class='marginalizedparent'><a class='marginalized' href='#3'>3</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/classes.tex#L2443'>#</a></div><div class='texpara'><div id='note-1' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-1'>1</a></i>:&ensp;<div id='3.sentence-1' class='sentence'>A conversion function is never invoked for
implicit or explicit conversions of an object
to the same object type (or a reference to it),
to a base class of that type (or a reference to it),
or to <span class='mathit'>cv</span> <span id=':void'><span class='texttt'><span class='keyword'>void</span></span></span><a class='hidden_link' href='#3.sentence-1'>.</a></div> <div id='3.sentence-2' class='sentence'>Even though never directly called to perform a conversion,
such conversion functions can be declared and can potentially
be reached through a call to a virtual conversion function in a base class<a class='hidden_link' href='#3.sentence-2'>.</a></div> —&nbsp;<i>end note</i>]</div></div> <div id='example-1' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-1'>1</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
  <span class='keyword'>operator</span> <span class='keyword'>auto</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='operator'>-</span><span class='anglebracket'>&gt;</span> <span class='keyword'>short</span>;     <span class='comment'>// error: trailing return type</span>
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span>X a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='keyword'>int</span><span class='parenthesis'>(</span>a<span class='parenthesis'>)</span>;
  i <span class='operator'>=</span> <span class='parenthesis'>(</span><span class='keyword'>int</span><span class='parenthesis'>)</span>a;
  i <span class='operator'>=</span> a;
<span class='curlybracket'>}</span>
</span> <div id='3.sentence-3' class='sentence'>
In all three cases the value assigned will be converted by
<span class='texttt'>X<span class='operator'>&#x200b;::&#x200b;</span><span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span></span><a class='hidden_link' href='#3.sentence-3'>.</a></div> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='4'><div class='marginalizedparent'><a class='marginalized' href='#4'>4</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/classes.tex#L2471'>#</a></div><div class='texpara'><div id='4.sentence-1' class='sentence'>A conversion function may be explicit (<a href='dcl.fct.spec' title='9.2.3&emsp;Function specifiers'>[dcl.<span class='shy'></span>fct.<span class='shy'></span>spec]</a>), in which case it is only considered as a user-defined conversion for direct-initialization (<a href='dcl.init' title='9.4&emsp;Initializers'>[dcl.<span class='shy'></span>init]</a>)<a class='hidden_link' href='#4.sentence-1'>.</a></div> <div id='4.sentence-2' class='sentence'>Otherwise, user-defined conversions are not restricted to use in assignments and initializations<a class='hidden_link' href='#4.sentence-2'>.</a></div> <div id='example-2' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-2'>2</a></i>:&ensp;<span class='codeblock'><span class='keyword'>class</span> Y <span class='curlybracket'>{</span> <span class='curlybracket'>}</span>;
<span class='keyword'>struct</span> Z <span class='curlybracket'>{</span>
  <span class='keyword'>explicit</span> <span class='keyword'>operator</span> Y<span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> h<span class='parenthesis'>(</span>Z z<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  Y y1<span class='parenthesis'>(</span>z<span class='parenthesis'>)</span>;          <span class='comment'>// OK, direct-initialization</span>
  Y y2 <span class='operator'>=</span> z;         <span class='comment'>// error: no conversion function candidate for copy-initialization</span>
  Y y3 <span class='operator'>=</span> <span class='parenthesis'>(</span>Y<span class='parenthesis'>)</span>z;      <span class='comment'>// OK, cast notation</span>
<span class='curlybracket'>}</span>

<span class='keyword'>void</span> g<span class='parenthesis'>(</span>X a, X b<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>int</span> i <span class='operator'>=</span> <span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> <span class='operator'>?</span> <span class='literal'>1</span><span class='operator'>+</span>a <span class='operator'>:</span> <span class='literal'>0</span>;
  <span class='keyword'>int</span> j <span class='operator'>=</span> <span class='parenthesis'>(</span>a<span class='operator'>&amp;</span><span class='operator'>&amp;</span>b<span class='parenthesis'>)</span> <span class='operator'>?</span> a<span class='operator'>+</span>b <span class='operator'>:</span> i;
  <span class='keyword'>if</span> <span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div></div></div><div class='para' id='5'><div class='marginalizedparent'><a class='marginalized' href='#5'>5</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/classes.tex#L2495'>#</a></div><div class='texpara'><div id='5.sentence-1' class='sentence'>The
<a href='#nt:conversion-type-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-type-id___'><span class='textsf'><i >conversion-type-id</i></span></span></a>
shall not represent a function type nor an array type<a class='hidden_link' href='#5.sentence-1'>.</a></div> <div id='5.sentence-2' class='sentence'>The
<a href='#nt:conversion-type-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-type-id____'><span class='textsf'><i >conversion-type-id</i></span></span></a>
in a
<a href='#nt:conversion-function-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-function-id___'><span class='textsf'><i >conversion-function-id</i></span></span></a>
is the longest sequence of
tokens that could possibly form a <a href='#nt:conversion-type-id' title='11.4.8.3&emsp;Conversion functions&emsp;[class.conv.fct]'><span id='ntref:conversion-type-id_____'><span class='textsf'><i >conversion-type-id</i></span></span></a><a class='hidden_link' href='#5.sentence-2'>.</a></div> <div id='note-2' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-2'>2</a></i>:&ensp;<div id='5.sentence-3' class='sentence'>This prevents ambiguities between the declarator operator <span class='texttt'><span class='operator'>*</span></span> and its expression
counterparts<a class='hidden_link' href='#5.sentence-3'>.</a></div> <div id='example-3' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-3'>3</a></i>:&ensp;<span class='codeblock'><span class='operator'>&amp;</span>ac<span class='operator'>.</span><span class='keyword'>operator</span> <span class='keyword'>int</span><span class='operator'>*</span>i; <span class='comment'>// syntax error:</span>
                    <span class='comment'>// parsed as: <span class='tcode_in_codeblock'>&amp;(ac.operator int *)i</span></span>
                    <span class='comment'>// not as: <span class='tcode_in_codeblock'>&amp;(ac.operator int)*i</span></span>
</span> <div id='5.sentence-4' class='sentence'>
The <span class='texttt'><span class='operator'>*</span></span> is the pointer declarator and not the multiplication operator<a class='hidden_link' href='#5.sentence-4'>.</a></div> —&nbsp;<i>end example</i>]</div></div> <div id='5.sentence-5' class='sentence'>
This rule also prevents ambiguities for attributes<a class='hidden_link' href='#5.sentence-5'>.</a></div> <div id='example-4' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-4'>4</a></i>:&ensp;<span class='codeblock'><span class='keyword'>operator</span> <span class='keyword'>int</span> <span class='squarebracket'>[</span><span class='squarebracket'>[</span>noreturn<span class='squarebracket'>]</span><span class='squarebracket'>]</span> <span class='parenthesis'>(</span><span class='parenthesis'>)</span>;   <span class='comment'>// error: <span class='tcode_in_codeblock'>noreturn</span> attribute applied to a type</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para nonNormativeOnly' id='6'><div class='marginalizedparent'><a class='marginalized' href='#6'>6</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/classes.tex#L2524'>#</a></div><div class='texpara'><a class='index' id=':conversion,inheritance_of_user-defined'></a><div id='note-3' class='note'><div class='texpara'>[<i>Note&nbsp;<a href='#note-3'>3</a></i>:&ensp;<div id='6.sentence-1' class='sentence'>A conversion function in a derived class hides only
conversion functions in base classes that convert to the same type<a class='hidden_link' href='#6.sentence-1'>.</a></div> <div id='6.sentence-2' class='sentence'>A conversion function template with a dependent return type hides only
templates in base classes that correspond to it (<a href='class.member.lookup' title='6.5.2&emsp;Member name lookup'>[class.<span class='shy'></span>member.<span class='shy'></span>lookup]</a>);
otherwise, it hides and is hidden as a non-template function<a class='hidden_link' href='#6.sentence-2'>.</a></div> <div id='6.sentence-3' class='sentence'>Function overload resolution (<a href='over.match.best' title='12.2.4&emsp;Best viable function'>[over.<span class='shy'></span>match.<span class='shy'></span>best]</a>) selects
the best conversion function to perform the conversion<a class='hidden_link' href='#6.sentence-3'>.</a></div> <div id='example-5' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-5'>5</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> X <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> <span class='keyword'>int</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>struct</span> Y <span class='operator'>:</span> X <span class='curlybracket'>{</span>
    <span class='keyword'>operator</span> <span class='keyword'>char</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span>;
<span class='curlybracket'>}</span>;

<span class='keyword'>void</span> f<span class='parenthesis'>(</span>Y<span class='operator'>&amp;</span> a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>
  <span class='keyword'>if</span> <span class='parenthesis'>(</span>a<span class='parenthesis'>)</span> <span class='curlybracket'>{</span>          <span class='comment'>// error: ambiguous between <span class='tcode_in_codeblock'>X&#x200b;::&#x200b;operator int()</span> and <span class='tcode_in_codeblock'>Y&#x200b;::&#x200b;operator char()</span></span>
  <span class='curlybracket'>}</span>
<span class='curlybracket'>}</span>
</span> —&nbsp;<i>end example</i>]</div></div> —&nbsp;<i>end note</i>]</div></div></div></div><div class='para' id='7'><div class='marginalizedparent'><a class='marginalized' href='#7'>7</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/classes.tex#L2552'>#</a></div><div class='texpara'><div id='7.sentence-1' class='sentence'><a class='index' id=':conversion,virtual_user-defined'></a>Conversion functions can be virtual<a class='hidden_link' href='#7.sentence-1'>.</a></div></div></div><div class='para' id='8'><div class='marginalizedparent'><a class='marginalized' href='#8'>8</a></div><div class='sourceLinkParent'><a class='sourceLink' href='https://github.com/cplusplus/draft/tree/12b6307589257a803527eb38c43f08f867d59322/source/classes.tex#L2556'>#</a></div><div class='texpara'><div id='8.sentence-1' class='sentence'><a class='index' id=':conversion,deduced_return_type_of_user-defined'></a>A conversion function template shall not have a
deduced return type (<a href='dcl.spec.auto' title='9.2.9.7&emsp;Placeholder type specifiers'>[dcl.<span class='shy'></span>spec.<span class='shy'></span>auto]</a>)<a class='hidden_link' href='#8.sentence-1'>.</a></div> <div id='example-6' class='example'><div class='texpara'>[<i>Example&nbsp;<a href='#example-6'>6</a></i>:&ensp;<span class='codeblock'><span class='keyword'>struct</span> S <span class='curlybracket'>{</span>
  <span class='keyword'>operator</span> <span class='keyword'>auto</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>10</span>; <span class='curlybracket'>}</span>      <span class='comment'>// OK</span>
  <span class='keyword'>template</span><span class='anglebracket'>&lt;</span><span class='keyword'>class</span> T<span class='anglebracket'>&gt;</span>
  <span class='keyword'>operator</span> <span class='keyword'>auto</span><span class='parenthesis'>(</span><span class='parenthesis'>)</span> <span class='keyword'>const</span> <span class='curlybracket'>{</span> <span class='keyword'>return</span> <span class='literal'>1.2</span>; <span class='curlybracket'>}</span>     <span class='comment'>// error: conversion function template</span>
<span class='curlybracket'>}</span>;
</span> —&nbsp;<i>end example</i>]</div></div></div></div></div></body></html>